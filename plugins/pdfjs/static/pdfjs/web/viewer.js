!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).PDFViewer={})}(this,function(t){"use strict";
/**
   * @licstart The following is the entire license notice for the
   * JavaScript code in this page
   *
   * Copyright 2024 Mozilla Foundation
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * @licend The above is the entire license notice for the
   * JavaScript code in this page
   */var e={34:(t,e,i)=>{var n=i(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},81:(t,e,i)=>{var n=i(9565),s=i(9306),r=i(8551),a=i(6823),o=i(851),l=TypeError;t.exports=function(t,e){var i=arguments.length<2?o(t):e;if(s(i))return r(n(i,t));throw new l(a(t)+" is not iterable")}},283:(t,e,i)=>{var n=i(9504),s=i(9039),r=i(4901),a=i(9297),o=i(3724),l=i(350).CONFIGURABLE,u=i(3706),d=i(1181),h=d.enforce,c=d.get,g=String,p=Object.defineProperty,f=n("".slice),m=n("".replace),v=n([].join),b=o&&!s(function(){return 8!==p(function(){},"length",{value:8}).length}),w=String(String).split("String"),y=t.exports=function(t,e,i){"Symbol("===f(g(e),0,7)&&(e="["+m(g(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!a(t,"name")||l&&t.name!==e)&&(o?p(t,"name",{value:e,configurable:!0}):t.name=e),b&&i&&a(i,"arity")&&t.length!==i.arity&&p(t,"length",{value:i.arity});try{i&&a(i,"constructor")&&i.constructor?o&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=h(t);return a(n,"source")||(n.source=v(w,"string"==typeof e?e:"")),t};Function.prototype.toString=y(function(){return r(this)&&c(this).source||u(this)},"toString")},350:(t,e,i)=>{var n=i(3724),s=i(9297),r=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=s(r,"name"),l=o&&"something"===function(){}.name,u=o&&(!n||n&&a(r,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:u}},397:(t,e,i)=>{var n=i(7751);t.exports=n("document","documentElement")},421:t=>{t.exports={}},507:(t,e,i)=>{var n=i(9565);t.exports=function(t,e,i){for(var s,r,a=i?t:t.iterator,o=t.next;!(s=n(o,a)).done;)if(void 0!==(r=e(s.value)))return r}},616:(t,e,i)=>{var n=i(9039);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},655:(t,e,i)=>{var n=i(6955),s=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},679:(t,e,i)=>{var n=i(1625),s=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new s("Incorrect invocation")}},741:t=>{var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?i:e)(n)}},757:(t,e,i)=>{var n=i(7751),s=i(4901),r=i(1625),a=i(7040),o=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return s(e)&&r(e.prototype,o(t))}},851:(t,e,i)=>{var n=i(6955),s=i(5966),r=i(4117),a=i(6269),o=i(8227)("iterator");t.exports=function(t){if(!r(t))return s(t,o)||s(t,"@@iterator")||a[n(t)]}},1072:(t,e,i)=>{var n=i(1828),s=i(8727);t.exports=Object.keys||function(t){return n(t,s)}},1148:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(2652),a=i(9306),o=i(8551),l=i(1767),u=i(9539),d=i(4549)("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(t){o(this);try{a(t)}catch(t){u(this,"throw",t)}if(d)return s(d,this,t);var e=l(this),i=0;return!r(e,function(e,n){if(!t(e,i++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:(t,e,i)=>{var n,s,r,a=i(8622),o=i(4576),l=i(34),u=i(6699),d=i(9297),h=i(7629),c=i(6119),g=i(421),p="Object already initialized",f=o.TypeError,m=o.WeakMap;if(a||h.state){var v=h.state||(h.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(t,e){if(v.has(t))throw new f(p);return e.facade=t,v.set(t,e),e},s=function(t){return v.get(t)||{}},r=function(t){return v.has(t)}}else{var b=c("state");g[b]=!0,n=function(t,e){if(d(t,b))throw new f(p);return e.facade=t,u(t,b,e),e},s=function(t){return d(t,b)?t[b]:{}},r=function(t){return d(t,b)}}t.exports={set:n,get:s,has:r,enforce:function(t){return r(t)?s(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=s(e)).type!==t)throw new f("Incompatible receiver, "+t+" required");return i}}}},1291:(t,e,i)=>{var n=i(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},1548:(t,e,i)=>{var n=i(4576),s=i(9039),r=i(9519),a=i(4215),o=n.structuredClone;t.exports=!!o&&!s(function(){if("DENO"===a&&r>92||"NODE"===a&&r>94||"BROWSER"===a&&r>97)return!1;var t=new ArrayBuffer(8),e=o(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength})},1625:(t,e,i)=>{var n=i(9504);t.exports=n({}.isPrototypeOf)},1698:(t,e,i)=>{var n=i(6518),s=i(4204);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("union")},{union:s})},1701:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(9306),a=i(8551),o=i(1767),l=i(9462),u=i(6319),d=i(9539),h=i(4549),c=i(6395),g=!c&&h("map",TypeError),p=l(function(){var t=this.iterator,e=a(s(this.next,t));if(!(this.done=!!e.done))return u(t,this.mapper,[e.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:c||g},{map:function(t){a(this);try{r(t)}catch(t){d(this,"throw",t)}return g?s(g,this,t):new p(o(this),{mapper:t})}})},1767:t=>{t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1828:(t,e,i)=>{var n=i(9504),s=i(9297),r=i(5397),a=i(9617).indexOf,o=i(421),l=n([].push);t.exports=function(t,e){var i,n=r(t),u=0,d=[];for(i in n)!s(o,i)&&s(n,i)&&l(d,i);for(;e.length>u;)s(n,i=e[u++])&&(~a(d,i)||l(d,i));return d}},2106:(t,e,i)=>{var n=i(283),s=i(4913);t.exports=function(t,e,i){return i.get&&n(i.get,e,{getter:!0}),i.set&&n(i.set,e,{setter:!0}),s.f(t,e,i)}},2140:(t,e,i)=>{var n={};n[i(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},2195:(t,e,i)=>{var n=i(9504),s=n({}.toString),r=n("".slice);t.exports=function(t){return r(s(t),8,-1)}},2211:(t,e,i)=>{var n=i(9039);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2222:(t,e,i)=>{var n=i(6518),s=i(7751),r=i(9039),a=i(2812),o=i(655),l=i(7416),u=s("URL"),d=l&&r(function(){u.canParse()}),h=r(function(){return 1!==u.canParse.length});n({target:"URL",stat:!0,forced:!d||h},{canParse:function(t){var e=a(arguments.length,1),i=o(t),n=e<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return!!new u(i,n)}catch(t){return!1}}})},2360:(t,e,i)=>{var n,s=i(8551),r=i(6801),a=i(8727),o=i(421),l=i(397),u=i(4055),d=i(6119),h="prototype",c="script",g=d("IE_PROTO"),p=function(){},f=function(t){return"<"+c+">"+t+"</"+c+">"},m=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;v="undefined"!=typeof document?document.domain&&n?m(n):(e=u("iframe"),i="java"+c+":",e.style.display="none",l.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F):m(n);for(var s=a.length;s--;)delete v[h][a[s]];return v()};o[g]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(p[h]=s(t),i=new p,p[h]=null,i[g]=t):i=v(),void 0===e?i:r.f(i,e)}},2475:(t,e,i)=>{var n=i(6518),s=i(8527);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("isSupersetOf",function(t){return!t})},{isSupersetOf:s})},2489:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(9306),a=i(8551),o=i(1767),l=i(9462),u=i(6319),d=i(6395),h=i(9539),c=i(4549),g=!d&&c("filter",TypeError),p=l(function(){for(var t,e,i=this.iterator,n=this.predicate,r=this.next;;){if(t=a(s(r,i)),this.done=!!t.done)return;if(e=t.value,u(i,n,[e,this.counter++],!0))return e}});n({target:"Iterator",proto:!0,real:!0,forced:d||g},{filter:function(t){a(this);try{r(t)}catch(t){h(this,"throw",t)}return g?s(g,this,t):new p(o(this),{predicate:t})}})},2529:t=>{t.exports=function(t,e){return{value:t,done:e}}},2652:(t,e,i)=>{var n=i(6080),s=i(9565),r=i(8551),a=i(6823),o=i(4209),l=i(6198),u=i(1625),d=i(81),h=i(851),c=i(9539),g=TypeError,p=function(t,e){this.stopped=t,this.result=e},f=p.prototype;t.exports=function(t,e,i){var m,v,b,w,y,C,E,A=i&&i.that,x=!(!i||!i.AS_ENTRIES),P=!(!i||!i.IS_RECORD),S=!(!i||!i.IS_ITERATOR),_=!(!i||!i.INTERRUPTED),F=n(e,A),T=function(t){return m&&c(m,"normal",t),new p(!0,t)},D=function(t){return x?(r(t),_?F(t[0],t[1],T):F(t[0],t[1])):_?F(t,T):F(t)};if(P)m=t.iterator;else if(S)m=t;else{if(!(v=h(t)))throw new g(a(t)+" is not iterable");if(o(v)){for(b=0,w=l(t);w>b;b++)if((y=D(t[b]))&&u(f,y))return y;return new p(!1)}m=d(t,v)}for(C=P?t.next:m.next;!(E=s(C,m)).done;){try{y=D(E.value)}catch(t){c(m,"throw",t)}if("object"==typeof y&&y&&u(f,y))return y}return new p(!1)}},2777:(t,e,i)=>{var n=i(9565),s=i(34),r=i(757),a=i(5966),o=i(4270),l=i(8227),u=TypeError,d=l("toPrimitive");t.exports=function(t,e){if(!s(t)||r(t))return t;var i,l=a(t,d);if(l){if(void 0===e&&(e="default"),i=n(l,t,e),!s(i)||r(i))return i;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},2787:(t,e,i)=>{var n=i(9297),s=i(4901),r=i(8981),a=i(6119),o=i(2211),l=a("IE_PROTO"),u=Object,d=u.prototype;t.exports=o?u.getPrototypeOf:function(t){var e=r(t);if(n(e,l))return e[l];var i=e.constructor;return s(i)&&e instanceof i?i.prototype:e instanceof u?d:null}},2796:(t,e,i)=>{var n=i(9039),s=i(4901),r=/#|\.prototype\./,a=function(t,e){var i=l[o(t)];return i===d||i!==u&&(s(e)?n(e):!!e)},o=a.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",d=a.POLYFILL="P";t.exports=a},2812:t=>{var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},2839:(t,e,i)=>{var n=i(4576).navigator,s=n&&n.userAgent;t.exports=s?String(s):""},3238:(t,e,i)=>{var n=i(4576),s=i(7811),r=i(7394),a=n.DataView;t.exports=function(t){if(!s||0!==r(t))return!1;try{return new a(t),!1}catch(t){return!0}}},3392:(t,e,i)=>{var n=i(9504),s=0,r=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++s+r,36)}},3440:(t,e,i)=>{var n=i(7080),s=i(4402),r=i(9286),a=i(5170),o=i(3789),l=i(8469),u=i(507),d=s.has,h=s.remove;t.exports=function(t){var e=n(this),i=o(t),s=r(e);return a(e)<=i.size?l(e,function(t){i.includes(t)&&h(s,t)}):u(i.getIterator(),function(t){d(e,t)&&h(s,t)}),s}},3579:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(2652),a=i(9306),o=i(8551),l=i(1767),u=i(9539),d=i(4549)("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(t){o(this);try{a(t)}catch(t){u(this,"throw",t)}if(d)return s(d,this,t);var e=l(this),i=0;return r(e,function(e,n){if(t(e,i++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:(t,e,i)=>{var n=i(7080),s=i(4402),r=i(9286),a=i(3789),o=i(507),l=s.add,u=s.has,d=s.remove;t.exports=function(t){var e=n(this),i=a(t).getIterator(),s=r(e);return o(i,function(t){u(e,t)?d(s,t):l(s,t)}),s}},3706:(t,e,i)=>{var n=i(9504),s=i(4901),r=i(7629),a=n(Function.toString);s(r.inspectSource)||(r.inspectSource=function(t){return a(t)}),t.exports=r.inspectSource},3717:(t,e)=>{e.f=Object.getOwnPropertySymbols},3724:(t,e,i)=>{var n=i(9039);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:(t,e,i)=>{var n=i(9306),s=i(8551),r=i(9565),a=i(1291),o=i(1767),l="Invalid size",u=RangeError,d=TypeError,h=Math.max,c=function(t,e){this.set=t,this.size=h(e,0),this.has=n(t.has),this.keys=n(t.keys)};c.prototype={getIterator:function(){return o(s(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},t.exports=function(t){s(t);var e=+t.size;if(e!=e)throw new d(l);var i=a(e);if(i<0)throw new u(l);return new c(t,i)}},3838:(t,e,i)=>{var n=i(7080),s=i(5170),r=i(8469),a=i(3789);t.exports=function(t){var e=n(this),i=a(t);return!(s(e)>i.size)&&!1!==r(e,function(t){if(!i.includes(t))return!1},!0)}},3853:(t,e,i)=>{var n=i(6518),s=i(4449);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("isDisjointFrom",function(t){return!t})},{isDisjointFrom:s})},4055:(t,e,i)=>{var n=i(4576),s=i(34),r=n.document,a=s(r)&&s(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},4114:(t,e,i)=>{var n=i(6518),s=i(8981),r=i(6198),a=i(4527),o=i(6837);n({target:"Array",proto:!0,arity:1,forced:i(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=s(this),i=r(e),n=arguments.length;o(i+n);for(var l=0;l<n;l++)e[i]=arguments[l],i++;return a(e,i),i}})},4117:t=>{t.exports=function(t){return null==t}},4204:(t,e,i)=>{var n=i(7080),s=i(4402).add,r=i(9286),a=i(3789),o=i(507);t.exports=function(t){var e=n(this),i=a(t).getIterator(),l=r(e);return o(i,function(t){s(l,t)}),l}},4209:(t,e,i)=>{var n=i(8227),s=i(6269),r=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||a[r]===t)}},4215:(t,e,i)=>{var n=i(4576),s=i(2839),r=i(2195),a=function(t){return s.slice(0,t.length)===t};t.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===r(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},4270:(t,e,i)=>{var n=i(9565),s=i(4901),r=i(34),a=TypeError;t.exports=function(t,e){var i,o;if("string"===e&&s(i=t.toString)&&!r(o=n(i,t)))return o;if(s(i=t.valueOf)&&!r(o=n(i,t)))return o;if("string"!==e&&s(i=t.toString)&&!r(o=n(i,t)))return o;throw new a("Can't convert object to primitive value")}},4376:(t,e,i)=>{var n=i(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4402:(t,e,i)=>{var n=i(9504),s=Set.prototype;t.exports={Set:Set,add:n(s.add),has:n(s.has),remove:n(s.delete),proto:s}},4449:(t,e,i)=>{var n=i(7080),s=i(4402).has,r=i(5170),a=i(3789),o=i(8469),l=i(507),u=i(9539);t.exports=function(t){var e=n(this),i=a(t);if(r(e)<=i.size)return!1!==o(e,function(t){if(i.includes(t))return!1},!0);var d=i.getIterator();return!1!==l(d,function(t){if(s(e,t))return u(d,"normal",!1)})}},4483:(t,e,i)=>{var n,s,r,a,o=i(4576),l=i(9429),u=i(1548),d=o.structuredClone,h=o.ArrayBuffer,c=o.MessageChannel,g=!1;if(u)g=function(t){d(t,{transfer:[t]})};else if(h)try{c||(n=l("worker_threads"))&&(c=n.MessageChannel),c&&(s=new c,r=new h(2),a=function(t){s.port1.postMessage(null,[t])},2===r.byteLength&&(a(r),0===r.byteLength&&(g=a)))}catch(t){}t.exports=g},4495:(t,e,i)=>{var n=i(9519),s=i(9039),r=i(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var t=Symbol("symbol detection");return!r(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4527:(t,e,i)=>{var n=i(3724),s=i(4376),r=TypeError,a=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(s(t)&&!a(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:(t,e,i)=>{var n=i(4576);t.exports=function(t,e){var i=n.Iterator,s=i&&i.prototype,r=s&&s[t],a=!1;if(r)try{r.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(t){t instanceof e||(a=!1)}if(!a)return r}},4576:function(t){var e=function(t){return t&&t.Math===Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||e("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4603:(t,e,i)=>{var n=i(6840),s=i(9504),r=i(655),a=i(2812),o=URLSearchParams,l=o.prototype,u=s(l.append),d=s(l.delete),h=s(l.forEach),c=s([].push),g=new o("a=1&a=2&b=3");g.delete("a",1),g.delete("b",void 0),g+""!="a=2"&&n(l,"delete",function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return d(this,t);var n=[];h(this,function(t,e){c(n,{key:e,value:t})}),a(e,1);for(var s,o=r(t),l=r(i),g=0,p=0,f=!1,m=n.length;g<m;)s=n[g++],f||s.key===o?(f=!0,d(this,s.key)):p++;for(;p<m;)(s=n[p++]).key===o&&s.value===l||u(this,s.key,s.value)},{enumerable:!0,unsafe:!0})},4628:(t,e,i)=>{var n=i(6518),s=i(6043);n({target:"Promise",stat:!0},{withResolvers:function(){var t=s.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},4659:(t,e,i)=>{var n=i(3724),s=i(4913),r=i(6980);t.exports=function(t,e,i){n?s.f(t,e,r(0,i)):t[e]=i}},4901:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:(t,e,i)=>{var n=i(3724),s=i(5917),r=i(8686),a=i(8551),o=i(6969),l=TypeError,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",c="configurable",g="writable";e.f=n?r?function(t,e,i){if(a(t),e=o(e),a(i),"function"==typeof t&&"prototype"===e&&"value"in i&&g in i&&!i[g]){var n=d(t,e);n&&n[g]&&(t[e]=i.value,i={configurable:c in i?i[c]:n[c],enumerable:h in i?i[h]:n[h],writable:!1})}return u(t,e,i)}:u:function(t,e,i){if(a(t),e=o(e),a(i),s)try{return u(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},4916:(t,e,i)=>{var n=i(7751),s=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},r=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var i=n("Set");try{(new i)[t](s(0));try{return(new i)[t](s(-1)),!1}catch(n){if(!e)return!0;try{return(new i)[t](r(-1/0)),!1}catch(n){var a=new i;return a.add(1),a.add(2),e(a[t](r(1/0)))}}}catch(t){return!1}}},5024:(t,e,i)=>{var n=i(6518),s=i(3650);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("symmetricDifference")},{symmetricDifference:s})},5031:(t,e,i)=>{var n=i(7751),s=i(9504),r=i(8480),a=i(3717),o=i(8551),l=s([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(o(t)),i=a.f;return i?l(e,i(t)):e}},5169:(t,e,i)=>{var n=i(3238),s=TypeError;t.exports=function(t){if(n(t))throw new s("ArrayBuffer is detached");return t}},5170:(t,e,i)=>{var n=i(6706),s=i(4402);t.exports=n(s.proto,"size","get")||function(t){return t.size}},5397:(t,e,i)=>{var n=i(7055),s=i(7750);t.exports=function(t){return n(s(t))}},5610:(t,e,i)=>{var n=i(1291),s=Math.max,r=Math.min;t.exports=function(t,e){var i=n(t);return i<0?s(i+e,0):r(i,e)}},5636:(t,e,i)=>{var n=i(4576),s=i(9504),r=i(6706),a=i(7696),o=i(5169),l=i(7394),u=i(4483),d=i(1548),h=n.structuredClone,c=n.ArrayBuffer,g=n.DataView,p=Math.min,f=c.prototype,m=g.prototype,v=s(f.slice),b=r(f,"resizable","get"),w=r(f,"maxByteLength","get"),y=s(m.getInt8),C=s(m.setInt8);t.exports=(d||u)&&function(t,e,i){var n,s=l(t),r=void 0===e?s:a(e),f=!b||!b(t);if(o(t),d&&(t=h(t,{transfer:[t]}),s===r&&(i||f)))return t;if(s>=r&&(!i||f))n=v(t,0,r);else{var m=i&&!f&&w?{maxByteLength:w(t)}:void 0;n=new c(r,m);for(var E=new g(t),A=new g(n),x=p(r,s),P=0;P<x;P++)C(A,P,y(E,P))}return d||u(t),n}},5745:(t,e,i)=>{var n=i(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},5781:(t,e,i)=>{var n=i(6518),s=i(7751),r=i(2812),a=i(655),o=i(7416),l=s("URL");n({target:"URL",stat:!0,forced:!o},{parse:function(t){var e=r(arguments.length,1),i=a(t),n=e<2||void 0===arguments[1]?void 0:a(arguments[1]);try{return new l(i,n)}catch(t){return null}}})},5876:(t,e,i)=>{var n=i(6518),s=i(3838);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("isSubsetOf",function(t){return t})},{isSubsetOf:s})},5917:(t,e,i)=>{var n=i(3724),s=i(9039),r=i(4055);t.exports=!n&&!s(function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},5966:(t,e,i)=>{var n=i(9306),s=i(4117);t.exports=function(t,e){var i=t[e];return s(i)?void 0:n(i)}},6043:(t,e,i)=>{var n=i(9306),s=TypeError,r=function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw new s("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new r(t)}},6080:(t,e,i)=>{var n=i(7476),s=i(9306),r=i(616),a=n(n.bind);t.exports=function(t,e){return s(t),void 0===e?t:r?a(t,e):function(){return t.apply(e,arguments)}}},6119:(t,e,i)=>{var n=i(5745),s=i(3392),r=n("keys");t.exports=function(t){return r[t]||(r[t]=s(t))}},6193:(t,e,i)=>{var n=i(4215);t.exports="NODE"===n},6198:(t,e,i)=>{var n=i(8014);t.exports=function(t){return n(t.length)}},6269:t=>{t.exports={}},6279:(t,e,i)=>{var n=i(6840);t.exports=function(t,e,i){for(var s in e)n(t,s,e[s],i);return t}},6319:(t,e,i)=>{var n=i(8551),s=i(9539);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){s(t,"throw",e)}}},6395:t=>{t.exports=!1},6518:(t,e,i)=>{var n=i(4576),s=i(7347).f,r=i(6699),a=i(6840),o=i(9433),l=i(7740),u=i(2796);t.exports=function(t,e){var i,d,h,c,g,p=t.target,f=t.global,m=t.stat;if(i=f?n:m?n[p]||o(p,{}):n[p]&&n[p].prototype)for(d in e){if(c=e[d],h=t.dontCallGetSet?(g=s(i,d))&&g.value:i[d],!u(f?d:p+(m?".":"#")+d,t.forced)&&void 0!==h){if(typeof c==typeof h)continue;l(c,h)}(t.sham||h&&h.sham)&&r(c,"sham",!0),a(i,d,c,t)}}},6573:(t,e,i)=>{var n=i(3724),s=i(2106),r=i(3238),a=ArrayBuffer.prototype;n&&!("detached"in a)&&s(a,"detached",{configurable:!0,get:function(){return r(this)}})},6699:(t,e,i)=>{var n=i(3724),s=i(4913),r=i(6980);t.exports=n?function(t,e,i){return s.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},6706:(t,e,i)=>{var n=i(9504),s=i(9306);t.exports=function(t,e,i){try{return n(s(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}},6801:(t,e,i)=>{var n=i(3724),s=i(8686),r=i(4913),a=i(8551),o=i(5397),l=i(1072);e.f=n&&!s?Object.defineProperties:function(t,e){a(t);for(var i,n=o(e),s=l(e),u=s.length,d=0;u>d;)r.f(t,i=s[d++],n[i]);return t}},6823:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6837:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6840:(t,e,i)=>{var n=i(4901),s=i(4913),r=i(283),a=i(9433);t.exports=function(t,e,i,o){o||(o={});var l=o.enumerable,u=void 0!==o.name?o.name:e;if(n(i)&&r(i,u,o),o.global)l?t[e]=i:a(e,i);else{try{o.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=i:s.f(t,e,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},6955:(t,e,i)=>{var n=i(2140),s=i(4901),r=i(2195),a=i(8227)("toStringTag"),o=Object,l="Arguments"===r(function(){return arguments}());t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=o(t),a))?i:l?r(e):"Object"===(n=r(e))&&s(e.callee)?"Arguments":n}},6969:(t,e,i)=>{var n=i(2777),s=i(757);t.exports=function(t){var e=n(t,"string");return s(e)?e:e+""}},6980:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:(t,e,i)=>{var n=i(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:(t,e,i)=>{var n=i(9504),s=i(9039),r=i(2195),a=Object,o=n("".split);t.exports=s(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"===r(t)?o(t,""):a(t)}:a},7080:(t,e,i)=>{var n=i(4402).has;t.exports=function(t){return n(t),t}},7347:(t,e,i)=>{var n=i(3724),s=i(9565),r=i(8773),a=i(6980),o=i(5397),l=i(6969),u=i(9297),d=i(5917),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=o(t),e=l(e),d)try{return h(t,e)}catch(t){}if(u(t,e))return a(!s(r.f,t,e),t[e])}},7394:(t,e,i)=>{var n=i(4576),s=i(6706),r=i(2195),a=n.ArrayBuffer,o=n.TypeError;t.exports=a&&s(a.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==r(t))throw new o("ArrayBuffer expected");return t.byteLength}},7416:(t,e,i)=>{var n=i(9039),s=i(8227),r=i(3724),a=i(6395),o=s("iterator");t.exports=!n(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(t,i){e.delete("b"),n+=i+t}),i.delete("a",2),i.delete("b",void 0),a&&(!t.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!e.size&&(a||!r)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==n||"x"!==new URL("https://x",void 0).host})},7476:(t,e,i)=>{var n=i(2195),s=i(9504);t.exports=function(t){if("Function"===n(t))return s(t)}},7566:(t,e,i)=>{var n=i(6840),s=i(9504),r=i(655),a=i(2812),o=URLSearchParams,l=o.prototype,u=s(l.getAll),d=s(l.has),h=new o("a=1");!h.has("a",2)&&h.has("a",void 0)||n(l,"has",function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return d(this,t);var n=u(this,t);a(e,1);for(var s=r(i),o=0;o<n.length;)if(n[o++]===s)return!0;return!1},{enumerable:!0,unsafe:!0})},7588:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(2652),a=i(9306),o=i(8551),l=i(1767),u=i(9539),d=i(4549)("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(t){o(this);try{a(t)}catch(t){u(this,"throw",t)}if(d)return s(d,this,t);var e=l(this),i=0;r(e,function(e){t(e,i++)},{IS_RECORD:!0})}})},7629:(t,e,i)=>{var n=i(6395),s=i(4576),r=i(9433),a="__core-js_shared__",o=t.exports=s[a]||r(a,{});(o.versions||(o.versions=[])).push({version:"3.42.0",mode:n?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:(t,e,i)=>{var n=i(6518),s=i(3440);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("difference",function(t){return 0===t.size})},{difference:s})},7657:(t,e,i)=>{var n,s,r,a=i(9039),o=i(4901),l=i(34),u=i(2360),d=i(2787),h=i(6840),c=i(8227),g=i(6395),p=c("iterator"),f=!1;[].keys&&("next"in(r=[].keys())?(s=d(d(r)))!==Object.prototype&&(n=s):f=!0),!l(n)||a(function(){var t={};return n[p].call(t)!==t})?n={}:g&&(n=u(n)),o(n[p])||h(n,p,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},7696:(t,e,i)=>{var n=i(1291),s=i(8014),r=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=s(e);if(e!==i)throw new r("Wrong length or index");return i}},7740:(t,e,i)=>{var n=i(9297),s=i(5031),r=i(7347),a=i(4913);t.exports=function(t,e,i){for(var o=s(e),l=a.f,u=r.f,d=0;d<o.length;d++){var h=o[d];n(t,h)||i&&n(i,h)||l(t,h,u(e,h))}}},7750:(t,e,i)=>{var n=i(4117),s=TypeError;t.exports=function(t){if(n(t))throw new s("Can't call method on "+t);return t}},7751:(t,e,i)=>{var n=i(4576),s=i(4901);t.exports=function(t,e){return arguments.length<2?(i=n[t],s(i)?i:void 0):n[t]&&n[t][e];var i}},7811:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7936:(t,e,i)=>{var n=i(6518),s=i(5636);s&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return s(this,arguments.length?arguments[0]:void 0,!1)}})},8004:(t,e,i)=>{var n=i(6518),s=i(9039),r=i(8750);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||s(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:r})},8014:(t,e,i)=>{var n=i(1291),s=Math.min;t.exports=function(t){var e=n(t);return e>0?s(e,9007199254740991):0}},8100:(t,e,i)=>{var n=i(6518),s=i(5636);s&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return s(this,arguments.length?arguments[0]:void 0,!0)}})},8111:(t,e,i)=>{var n=i(6518),s=i(4576),r=i(679),a=i(8551),o=i(4901),l=i(2787),u=i(2106),d=i(4659),h=i(9039),c=i(9297),g=i(8227),p=i(7657).IteratorPrototype,f=i(3724),m=i(6395),v="constructor",b="Iterator",w=g("toStringTag"),y=TypeError,C=s[b],E=m||!o(C)||C.prototype!==p||!h(function(){C({})}),A=function(){if(r(this,p),l(this)===p)throw new y("Abstract class Iterator not directly constructable")},x=function(t,e){f?u(p,t,{configurable:!0,get:function(){return e},set:function(e){if(a(this),this===p)throw new y("You can't redefine this property");c(this,t)?this[t]=e:d(this,t,e)}}):p[t]=e};c(p,w)||x(w,b),!E&&c(p,v)&&p[v]!==Object||x(v,A),A.prototype=p,n({global:!0,constructor:!0,forced:E},{Iterator:A})},8227:(t,e,i)=>{var n=i(4576),s=i(5745),r=i(9297),a=i(3392),o=i(4495),l=i(7040),u=n.Symbol,d=s("wks"),h=l?u.for||u:u&&u.withoutSetter||a;t.exports=function(t){return r(d,t)||(d[t]=o&&r(u,t)?u[t]:h("Symbol."+t)),d[t]}},8235:(t,e,i)=>{var n=i(9504),s=i(9297),r=SyntaxError,a=parseInt,o=String.fromCharCode,l=n("".charAt),u=n("".slice),d=n(/./.exec),h={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},c=/^[\da-f]{4}$/i,g=/^[\u0000-\u001F]$/;t.exports=function(t,e){for(var i=!0,n="";e<t.length;){var p=l(t,e);if("\\"===p){var f=u(t,e,e+2);if(s(h,f))n+=h[f],e+=2;else{if("\\u"!==f)throw new r('Unknown escape sequence: "'+f+'"');var m=u(t,e+=2,e+4);if(!d(c,m))throw new r("Bad Unicode escape at: "+e);n+=o(a(m,16)),e+=4}}else{if('"'===p){i=!1,e++;break}if(d(g,p))throw new r("Bad control character in string literal at: "+e);n+=p,e++}}if(i)throw new r("Unterminated string at: "+e);return{value:n,end:e}}},8335:(t,e,i)=>{var n=i(6518),s=i(3724),r=i(4576),a=i(7751),o=i(9504),l=i(9565),u=i(4901),d=i(34),h=i(4376),c=i(9297),g=i(655),p=i(6198),f=i(4659),m=i(9039),v=i(8235),b=i(4495),w=r.JSON,y=r.Number,C=r.SyntaxError,E=w&&w.parse,A=a("Object","keys"),x=Object.getOwnPropertyDescriptor,P=o("".charAt),S=o("".slice),_=o(/./.exec),F=o([].push),T=/^\d$/,D=/^[1-9]$/,B=/^[\d-]$/,I=/^[\t\n\r ]$/,L=function(t,e,i,n){var s,r,a,o,u,g=t[e],f=n&&g===n.value,m=f&&"string"==typeof n.source?{source:n.source}:{};if(d(g)){var v=h(g),b=f?n.nodes:v?[]:{};if(v)for(s=b.length,a=p(g),o=0;o<a;o++)k(g,o,L(g,""+o,i,o<s?b[o]:void 0));else for(r=A(g),a=p(r),o=0;o<a;o++)u=r[o],k(g,u,L(g,u,i,c(b,u)?b[u]:void 0))}return l(i,t,e,g,m)},k=function(t,e,i){if(s){var n=x(t,e);if(n&&!n.configurable)return}void 0===i?delete t[e]:f(t,e,i)},M=function(t,e,i,n){this.value=t,this.end=e,this.source=i,this.nodes=n},N=function(t,e){this.source=t,this.index=e};N.prototype={fork:function(t){return new N(this.source,t)},parse:function(){var t=this.source,e=this.skip(I,this.index),i=this.fork(e),n=P(t,e);if(_(B,n))return i.number();switch(n){case"{":return i.object();case"[":return i.array();case'"':return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new C('Unexpected character: "'+n+'" at: '+e)},node:function(t,e,i,n,s){return new M(e,n,t?null:S(this.source,i,n),s)},object:function(){for(var t=this.source,e=this.index+1,i=!1,n={},s={};e<t.length;){if(e=this.until(['"',"}"],e),"}"===P(t,e)&&!i){e++;break}var r=this.fork(e).string(),a=r.value;e=r.end,e=this.until([":"],e)+1,e=this.skip(I,e),r=this.fork(e).parse(),f(s,a,r),f(n,a,r.value),e=this.until([",","}"],r.end);var o=P(t,e);if(","===o)i=!0,e++;else if("}"===o){e++;break}}return this.node(1,n,this.index,e,s)},array:function(){for(var t=this.source,e=this.index+1,i=!1,n=[],s=[];e<t.length;){if(e=this.skip(I,e),"]"===P(t,e)&&!i){e++;break}var r=this.fork(e).parse();if(F(s,r),F(n,r.value),e=this.until([",","]"],r.end),","===P(t,e))i=!0,e++;else if("]"===P(t,e)){e++;break}}return this.node(1,n,this.index,e,s)},string:function(){var t=this.index,e=v(this.source,this.index+1);return this.node(0,e.value,t,e.end)},number:function(){var t=this.source,e=this.index,i=e;if("-"===P(t,i)&&i++,"0"===P(t,i))i++;else{if(!_(D,P(t,i)))throw new C("Failed to parse number at: "+i);i=this.skip(T,i+1)}if(("."===P(t,i)&&(i=this.skip(T,i+1)),"e"===P(t,i)||"E"===P(t,i))&&(i++,"+"!==P(t,i)&&"-"!==P(t,i)||i++,i===(i=this.skip(T,i))))throw new C("Failed to parse number's exponent value at: "+i);return this.node(0,y(S(t,e,i)),e,i)},keyword:function(t){var e=""+t,i=this.index,n=i+e.length;if(S(this.source,i,n)!==e)throw new C("Failed to parse value at: "+i);return this.node(0,t,i,n)},skip:function(t,e){for(var i=this.source;e<i.length&&_(t,P(i,e));e++);return e},until:function(t,e){e=this.skip(I,e);for(var i=P(this.source,e),n=0;n<t.length;n++)if(t[n]===i)return e;throw new C('Unexpected character: "'+i+'" at: '+e)}};var O=m(function(){var t,e="9007199254740993";return E(e,function(e,i,n){t=n.source}),t!==e}),j=b&&!m(function(){return 1/E("-0 \t")!=-1/0});n({target:"JSON",stat:!0,forced:O},{parse:function(t,e){return j&&!u(e)?E(t):function(t,e){t=g(t);var i=new N(t,0),n=i.parse(),s=n.value,r=i.skip(I,n.end);if(r<t.length)throw new C('Unexpected extra character: "'+P(t,r)+'" after the parsed data at: '+r);return u(e)?L({"":s},"",e,n):s}(t,e)}})},8469:(t,e,i)=>{var n=i(9504),s=i(507),r=i(4402),a=r.Set,o=r.proto,l=n(o.forEach),u=n(o.keys),d=u(new a).next;t.exports=function(t,e,i){return i?s({iterator:u(t),next:d},e):l(t,e)}},8480:(t,e,i)=>{var n=i(1828),s=i(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},8527:(t,e,i)=>{var n=i(7080),s=i(4402).has,r=i(5170),a=i(3789),o=i(507),l=i(9539);t.exports=function(t){var e=n(this),i=a(t);if(r(e)<i.size)return!1;var u=i.getIterator();return!1!==o(u,function(t){if(!s(e,t))return l(u,"normal",!1)})}},8551:(t,e,i)=>{var n=i(34),s=String,r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(s(t)+" is not an object")}},8622:(t,e,i)=>{var n=i(4576),s=i(4901),r=n.WeakMap;t.exports=s(r)&&/native code/.test(String(r))},8686:(t,e,i)=>{var n=i(3724),s=i(9039);t.exports=n&&s(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8721:(t,e,i)=>{var n=i(3724),s=i(9504),r=i(2106),a=URLSearchParams.prototype,o=s(a.forEach);n&&!("size"in a)&&r(a,"size",{get:function(){var t=0;return o(this,function(){t++}),t},configurable:!0,enumerable:!0})},8727:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8750:(t,e,i)=>{var n=i(7080),s=i(4402),r=i(5170),a=i(3789),o=i(8469),l=i(507),u=s.Set,d=s.add,h=s.has;t.exports=function(t){var e=n(this),i=a(t),s=new u;return r(e)>i.size?l(i.getIterator(),function(t){h(e,t)&&d(s,t)}):o(e,function(t){i.includes(t)&&d(s,t)}),s}},8773:(t,e)=>{var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!i.call({1:2},1);e.f=s?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},8981:(t,e,i)=>{var n=i(7750),s=Object;t.exports=function(t){return s(n(t))}},9039:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9286:(t,e,i)=>{var n=i(4402),s=i(8469),r=n.Set,a=n.add;t.exports=function(t){var e=new r;return s(t,function(t){a(e,t)}),e}},9297:(t,e,i)=>{var n=i(9504),s=i(8981),r=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(s(t),e)}},9306:(t,e,i)=>{var n=i(4901),s=i(6823),r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(s(t)+" is not a function")}},9429:(t,e,i)=>{var n=i(4576),s=i(6193);t.exports=function(t){if(s){try{return n.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}}},9433:(t,e,i)=>{var n=i(4576),s=Object.defineProperty;t.exports=function(t,e){try{s(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},9462:(t,e,i)=>{var n=i(9565),s=i(2360),r=i(6699),a=i(6279),o=i(8227),l=i(1181),u=i(5966),d=i(7657).IteratorPrototype,h=i(2529),c=i(9539),g=o("toStringTag"),p="IteratorHelper",f="WrapForValidIterator",m=l.set,v=function(t){var e=l.getterFor(t?f:p);return a(s(d),{next:function(){var i=e(this);if(t)return i.nextHandler();if(i.done)return h(void 0,!0);try{var n=i.nextHandler();return i.returnHandlerResult?n:h(n,i.done)}catch(t){throw i.done=!0,t}},return:function(){var i=e(this),s=i.iterator;if(i.done=!0,t){var r=u(s,"return");return r?n(r,s):h(void 0,!0)}if(i.inner)try{c(i.inner.iterator,"normal")}catch(t){return c(s,"throw",t)}return s&&c(s,"normal"),h(void 0,!0)}})},b=v(!0),w=v(!1);r(w,g,"Iterator Helper"),t.exports=function(t,e,i){var n=function(n,s){s?(s.iterator=n.iterator,s.next=n.next):s=n,s.type=e?f:p,s.returnHandlerResult=!!i,s.nextHandler=t,s.counter=0,s.done=!1,m(this,s)};return n.prototype=e?b:w,n}},9504:(t,e,i)=>{var n=i(616),s=Function.prototype,r=s.call,a=n&&s.bind.bind(r,r);t.exports=n?a:function(t){return function(){return r.apply(t,arguments)}}},9519:(t,e,i)=>{var n,s,r=i(4576),a=i(2839),o=r.process,l=r.Deno,u=o&&o.versions||l&&l.version,d=u&&u.v8;d&&(s=(n=d.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(s=+n[1]),t.exports=s},9539:(t,e,i)=>{var n=i(9565),s=i(8551),r=i(5966);t.exports=function(t,e,i){var a,o;s(t);try{if(!(a=r(t,"return"))){if("throw"===e)throw i;return i}a=n(a,t)}catch(t){o=!0,a=t}if("throw"===e)throw i;if(o)throw a;return s(a),i}},9565:(t,e,i)=>{var n=i(616),s=Function.prototype.call;t.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},9617:(t,e,i)=>{var n=i(5397),s=i(5610),r=i(6198),a=function(t){return function(e,i,a){var o=n(e),l=r(o);if(0===l)return!t&&-1;var u,d=s(a,l);if(t&&i!=i){for(;l>d;)if((u=o[d++])!=u)return!0}else for(;l>d;d++)if((t||d in o)&&o[d]===i)return t||d||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n(4114),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(4603),n(7566),n(8721);const{AbortException:s,AnnotationEditorLayer:r,AnnotationEditorParamsType:a,AnnotationEditorType:o,AnnotationEditorUIManager:l,AnnotationLayer:u,AnnotationMode:d,AnnotationType:h,build:c,ColorPicker:g,createValidAbsoluteUrl:p,DOMSVGFactory:f,DrawLayer:m,FeatureTest:v,fetchData:b,getDocument:w,getFilenameFromUrl:y,getPdfFilenameFromUrl:C,getUuid:E,getXfaPageViewport:A,GlobalWorkerOptions:x,ImageKind:P,InvalidPDFException:S,isDataScheme:_,isPdfFile:F,isValidExplicitDest:T,MathClamp:D,noContextMenu:B,normalizeUnicode:I,OPS:L,OutputScale:k,PasswordResponses:M,PDFDataRangeTransport:N,PDFDateString:O,PDFWorker:j,PermissionFlag:V,PixelsPerInch:R,RenderingCancelledException:U,ResponseException:z,setLayerDimensions:H,shadow:$,SignatureExtractor:W,stopEvent:G,SupportedImageMimeTypes:X,TextLayer:Z,TouchManager:K,updateUrlHash:q,Util:Y,VerbosityLevel:J,version:Q,XfaLayer:tt}=globalThis.pdfjsLib,et="auto",it={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},nt=0,st=1,rt=2,at=3,ot=-1,lt=0,ut=1,dt=2,ht=3,ct=4,gt=0,pt=1,ft=2,mt={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},vt={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},bt=0,wt=1,yt=/\bprint\s*\(/;function Ct(t,e,i=!1){let n=t.offsetParent;if(!n)return void console.error("offsetParent is not set -- cannot scroll");let s=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||i&&(n.classList.contains("markedContent")||"hidden"===getComputedStyle(n).overflow);)if(s+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent,!n)return;e&&(void 0!==e.top&&(s+=e.top),void 0!==e.left&&(r+=e.left,n.scrollLeft=r)),n.scrollTop=s}function Et(t,e,i=void 0){const n=function(i){r||(r=window.requestAnimationFrame(function(){r=null;const i=t.scrollLeft,n=s.lastX;i!==n&&(s.right=i>n),s.lastX=i;const a=t.scrollTop,o=s.lastY;a!==o&&(s.down=a>o),s.lastY=a,e(s)}))},s={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:n};let r=null;return t.addEventListener("scroll",n,{useCapture:!0,signal:i}),i?.addEventListener("abort",()=>window.cancelAnimationFrame(r),{once:!0}),s}function At(t){const e=new Map;for(const[i,n]of new URLSearchParams(t))e.set(i.toLowerCase(),n);return e}const xt=/[\x00-\x1F]/g;function Pt(t,e=!1){return xt.test(t)?e?t.replaceAll(xt,t=>"\0"===t?"":" "):t.replaceAll("\0",""):t}function St(t,e,i=0){let n=i,s=t.length-1;if(s<0||!e(t[s]))return t.length;if(e(t[n]))return n;for(;n<s;){const i=n+s>>1;e(t[i])?s=i:n=i+1}return n}function _t(t){if(Math.floor(t)===t)return[t,1];const e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const i=t>1?e:t;let n,s=0,r=1,a=1,o=1;for(;;){const t=s+a,e=r+o;if(e>8)break;i<=t/e?(a=t,o=e):(s=t,r=e)}return n=i-s/r<a/o-i?i===t?[s,r]:[r,s]:i===t?[a,o]:[o,a],n}function Ft(t,e){return t-t%e}function Tt({view:t,userUnit:e,rotate:i}){const[n,s,r,a]=t,o=i%180!=0,l=(r-n)/72*e,u=(a-s)/72*e;return{width:o?u:l,height:o?l:u}}function Dt({scrollEl:t,views:e,sortByVisibility:i=!1,horizontal:n=!1,rtl:s=!1}){const r=t.scrollTop,a=r+t.clientHeight,o=t.scrollLeft,l=o+t.clientWidth;const u=[],d=new Set,h=e.length;let c=St(e,n?function(t){const e=t.div,i=e.offsetLeft+e.clientLeft,n=i+e.clientWidth;return s?i<l:n>o}:function(t){const e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>r});c>0&&c<h&&!n&&(c=function(t,e,i){if(t<2)return t;let n=e[t].div,s=n.offsetTop+n.clientTop;s>=i&&(n=e[t-1].div,s=n.offsetTop+n.clientTop);for(let i=t-2;i>=0&&(n=e[i].div,!(n.offsetTop+n.clientTop+n.clientHeight<=s));--i)t=i;return t}(c,e,r));let g=n?l:-1;for(let t=c;t<h;t++){const i=e[t],s=i.div,h=s.offsetLeft+s.clientLeft,c=s.offsetTop+s.clientTop,p=s.clientWidth,f=s.clientHeight,m=h+p,v=c+f;if(-1===g)v>=a&&(g=v);else if((n?h:c)>g)break;if(v<=r||c>=a||m<=o||h>=l)continue;const b=Math.max(0,r-c),w=Math.max(0,o-h),y=b+Math.max(0,v-a),C=(p-(w+Math.max(0,m-l)))/p,E=(f-y)/f*C*100|0;u.push({id:i.id,x:h,y:c,visibleArea:100===E?null:{minX:w,minY:b,maxX:Math.min(m,l)-h,maxY:Math.min(v,a)-c},view:i,percent:E,widthPercent:100*C|0}),d.add(i.id)}const p=u[0],f=u.at(-1);return i&&u.sort(function(t,e){const i=t.percent-e.percent;return Math.abs(i)>.001?-i:t.id-e.id}),{first:p,last:f,views:u,ids:d}}function Bt(t){let e=Math.hypot(t.deltaX,t.deltaY);const i=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<i&&i<.75*Math.PI&&(e=-e),e}function It(t){return Number.isInteger(t)&&t%90==0}function Lt(t){return Number.isInteger(t)&&Object.values(mt).includes(t)&&t!==mt.UNKNOWN}function kt(t){return Number.isInteger(t)&&Object.values(vt).includes(t)&&t!==vt.UNKNOWN}function Mt(t){return t.width<=t.height}const Nt=new Promise(function(t){window.requestAnimationFrame(t)}),Ot=document.documentElement.style;class jt{#t=null;#e=null;#i=0;#n=null;#s=!0;constructor(t){this.#t=t.classList,this.#n=t.style}get percent(){return this.#i}set percent(t){this.#i=D(t,0,100),isNaN(t)?this.#t.add("indeterminate"):(this.#t.remove("indeterminate"),this.#n.setProperty("--progressBar-percent",`${this.#i}%`))}setWidth(t){if(!t)return;const e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&this.#n.setProperty("--progressBar-end-offset",`${e}px`)}setDisableAutoFetch(t=5e3){100===this.#i||isNaN(this.#i)||(this.#e&&clearTimeout(this.#e),this.show(),this.#e=setTimeout(()=>{this.#e=null,this.hide()},t))}hide(){this.#s&&(this.#s=!1,this.#t.add("hidden"))}show(){this.#s||(this.#s=!0,this.#t.remove("hidden"))}}function Vt(){let t=document,e=t.activeElement||t.querySelector(":focus");for(;e?.shadowRoot;)t=e.shadowRoot,e=t.activeElement||t.querySelector(":focus");return e}function Rt(t){let e=mt.VERTICAL,i=vt.NONE;switch(t){case"SinglePage":e=mt.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=mt.PAGE;case"TwoColumnLeft":i=vt.ODD;break;case"TwoPageRight":e=mt.PAGE;case"TwoColumnRight":i=vt.EVEN}return{scrollMode:e,spreadMode:i}}function Ut(t,e,i=null){t.classList.toggle("toggled",e),t.setAttribute("aria-checked",e),i?.classList.toggle("hidden",!e)}function zt(t,e,i=null){t.classList.toggle("toggled",e),t.setAttribute("aria-expanded",e),i?.classList.toggle("hidden",!e)}const Ht=function(){const t=document.createElement("div");return t.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)","calc(1320px)"===t.style.width?Math.fround:t=>t}();{var $t=new Map;const{maxTouchPoints:t,platform:e,userAgent:i}=navigator,n=/Android/.test(i);(/\b(iPad|iPhone|iPod)(?=;)/.test(i)||"MacIntel"===e&&t>1||n)&&$t.set("maxCanvasPixels",5242880),n&&$t.set("useSystemFonts",!1)}const Wt=1,Gt=2,Xt=4,Zt=8,Kt=16,qt=128,Yt={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Jt={allowedGlobalEvents:{value:null,kind:Wt},canvasMaxAreaInBytes:{value:-1,kind:Wt+Xt},isInAutomation:{value:!1,kind:Wt},localeProperties:{value:{lang:navigator.language||"en-US"},kind:Wt},maxCanvasDim:{value:32767,kind:Wt+Gt},nimbusDataStr:{value:"",kind:Wt},supportsCaretBrowsingMode:{value:!1,kind:Wt},supportsDocumentFonts:{value:!0,kind:Wt},supportsIntegratedFind:{value:!1,kind:Wt},supportsMouseWheelZoomCtrlKey:{value:!0,kind:Wt},supportsMouseWheelZoomMetaKey:{value:!0,kind:Wt},supportsPinchToZoom:{value:!0,kind:Wt},supportsPrinting:{value:!0,kind:Wt},toolbarDensity:{value:0,kind:Wt+Kt},altTextLearnMoreUrl:{value:"",kind:Gt+qt},annotationEditorMode:{value:0,kind:Gt+qt},annotationMode:{value:2,kind:Gt+qt},capCanvasAreaFactor:{value:200,kind:Gt+qt},cursorToolOnLoad:{value:0,kind:Gt+qt},debuggerSrc:{value:"./debugger.mjs",kind:Gt},defaultZoomDelay:{value:400,kind:Gt+qt},defaultZoomValue:{value:"",kind:Gt+qt},disableHistory:{value:!1,kind:Gt},disablePageLabels:{value:!1,kind:Gt+qt},enableAltText:{value:!1,kind:Gt+qt},enableAltTextModelDownload:{value:!0,kind:Gt+qt+Kt},enableAutoLinking:{value:!0,kind:Gt+qt},enableDetailCanvas:{value:!0,kind:Gt},enableGuessAltText:{value:!0,kind:Gt+qt+Kt},enableHighlightFloatingButton:{value:!1,kind:Gt+qt},enableNewAltTextWhenAddingImage:{value:!0,kind:Gt+qt},enablePermissions:{value:!1,kind:Gt+qt},enablePrintAutoRotate:{value:!0,kind:Gt+qt},enableScripting:{value:!0,kind:Gt+qt},enableSignatureEditor:{value:!1,kind:Gt+qt},enableUpdatedAddImage:{value:!1,kind:Gt+qt},externalLinkRel:{value:"noopener noreferrer nofollow",kind:Gt},externalLinkTarget:{value:0,kind:Gt+qt},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:Gt+qt},historyUpdateUrl:{value:!1,kind:Gt+qt},ignoreDestinationZoom:{value:!1,kind:Gt+qt},imageResourcesPath:{value:"./images/",kind:Gt},maxCanvasPixels:{value:2**25,kind:Gt},minDurationToUpdateCanvas:{value:500,kind:Gt},forcePageColors:{value:!1,kind:Gt+qt},pageColorsBackground:{value:"Canvas",kind:Gt+qt},pageColorsForeground:{value:"CanvasText",kind:Gt+qt},pdfBugEnabled:{value:!1,kind:Gt+qt},printResolution:{value:150,kind:Gt},sidebarViewOnLoad:{value:-1,kind:Gt+qt},scrollModeOnLoad:{value:-1,kind:Gt+qt},spreadModeOnLoad:{value:-1,kind:Gt+qt},textLayerMode:{value:1,kind:Gt+qt},viewerCssTheme:{value:0,kind:Gt+qt},viewOnLoad:{value:0,kind:Gt+qt},cMapPacked:{value:!0,kind:Xt},cMapUrl:{value:"../web/cmaps/",kind:Xt},disableAutoFetch:{value:!1,kind:Xt+qt},disableFontFace:{value:!1,kind:Xt+qt},disableRange:{value:!1,kind:Xt+qt},disableStream:{value:!1,kind:Xt+qt},docBaseUrl:{value:"",kind:Xt},enableHWA:{value:!0,kind:Xt+Gt+qt},enableXfa:{value:!0,kind:Xt+qt},fontExtraProperties:{value:!1,kind:Xt},iccUrl:{value:"../web/iccs/",kind:Xt},isEvalSupported:{value:!0,kind:Xt},isOffscreenCanvasSupported:{value:!0,kind:Xt},maxImageSize:{value:-1,kind:Xt},pdfBug:{value:!1,kind:Xt},standardFontDataUrl:{value:"../web/standard_fonts/",kind:Xt},useSystemFonts:{value:void 0,kind:Xt,type:Yt.BOOLEAN+Yt.UNDEFINED},verbosity:{value:1,kind:Xt},wasmUrl:{value:"../web/wasm/",kind:Xt},workerPort:{value:null,kind:Zt},workerSrc:{value:"../build/pdf.worker.mjs",kind:Zt}};Jt.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:Gt},Jt.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:Gt},Jt.enableFakeMLManager={value:!0,kind:Gt},Jt.disablePreferences={value:!1,kind:Gt};class Qt{static eventBus;static#r=new Map;static{for(const t in Jt)this.#r.set(t,Jt[t].value);for(const[t,e]of $t)this.#r.set(t,e);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>!!this.get("disablePreferences")||(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(t){return this.#r.get(t)}static getAll(t=null,e=!1){const i=Object.create(null);for(const n in Jt){const s=Jt[n];(!t||t&s.kind)&&(i[n]=e?s.value:this.#r.get(n))}return i}static set(t,e){this.setAll({[t]:e})}static setAll(t,e=!1){let i;this._hasInvokedSet||=!0;for(const n in t){const s=Jt[n],r=t[n];if(!s||!(typeof r==typeof s.value||Yt[(typeof r).toUpperCase()]&s.type))continue;const{kind:a}=s;(!e||a&Wt||a&qt)&&(this.eventBus&&a&Kt&&(i||=new Map).set(n,r),this.#r.set(n,r))}if(i)for(const[t,e]of i)this.eventBus.dispatch(t.toLowerCase(),{source:this,value:e})}}n(8335);const te={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class ee{externalLinkEnabled=!0;constructor({eventBus:t,externalLinkTarget:e=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}={}){this.eventBus=t,this.externalLinkTarget=e,this.externalLinkRel=i,this._ignoreDestinationZoom=n,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(t,e=null){this.baseUrl=e,this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(t){this.pdfDocument&&(this.pdfViewer.currentPageNumber=t)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(t){this.pdfDocument&&(this.pdfViewer.pagesRotation=t)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}async goToDestination(t){if(!this.pdfDocument)return;let e,i,n;if("string"==typeof t?(e=t,i=await this.pdfDocument.getDestination(t)):(e=null,i=await t),!Array.isArray(i))return void console.error(`goToDestination: "${i}" is not a valid destination array, for dest="${t}".`);const[s]=i;if(s&&"object"==typeof s){if(n=this.pdfDocument.cachedPageNumber(s),!n)try{n=await this.pdfDocument.getPageIndex(s)+1}catch{return void console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${t}".`)}}else Number.isInteger(s)&&(n=s+1);!n||n<1||n>this.pagesCount?console.error(`goToDestination: "${n}" is not a valid page number, for dest="${t}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:e,explicitDest:i,pageNumber:n})),this.pdfViewer.scrollPageIntoView({pageNumber:n,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom}))}goToPage(t){if(!this.pdfDocument)return;const e="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;Number.isInteger(e)&&e>0&&e<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})):console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`)}addLinkAttributes(t,e,i=!1){if(!e||"string"!=typeof e)throw new Error('A valid "url" parameter must provided.');const n=i?te.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?t.href=t.title=e:(t.href="",t.title=`Disabled: ${e}`,t.onclick=()=>!1);let r="";switch(n){case te.NONE:break;case te.SELF:r="_self";break;case te.BLANK:r="_blank";break;case te.PARENT:r="_parent";break;case te.TOP:r="_top"}t.target=r,t.rel="string"==typeof s?s:"noopener noreferrer nofollow"}getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){const e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}getAnchorUrl(t){return this.baseUrl?this.baseUrl+t:t}setHash(t){if(!this.pdfDocument)return;let e,i;if(t.includes("=")){const n=At(t);if(n.has("search")){const t=n.get("search").replaceAll('"',""),e="true"===n.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:e?t:t.match(/\S+/g)})}if(n.has("page")&&(e=0|n.get("page")||1),n.has("zoom")){const t=n.get("zoom").split(","),e=t[0],s=parseFloat(e);e.includes("Fit")?"Fit"===e||"FitB"===e?i=[null,{name:e}]:"FitH"===e||"FitBH"===e||"FitV"===e||"FitBV"===e?i=[null,{name:e},t.length>1?0|t[1]:null]:"FitR"===e?5!==t.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:e},0|t[1],0|t[2],0|t[3],0|t[4]]:console.error(`PDFLinkService.setHash: "${e}" is not a valid zoom value.`):i=[null,{name:"XYZ"},t.length>1?0|t[1]:null,t.length>2?0|t[2]:null,s?s/100:e]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:i,allowNegativeOffset:!0}):e&&(this.page=e),n.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")}),void(n.has("nameddest")&&this.goToDestination(n.get("nameddest")))}i=unescape(t);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}"string"==typeof i||T(i)?this.goToDestination(i):console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}executeNamedAction(t){if(this.pdfDocument){switch(t){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}}async executeSetOCGState(t){if(!this.pdfDocument)return;const e=this.pdfDocument,i=await this.pdfViewer.optionalContentConfigPromise;e===this.pdfDocument&&(i.setOCGState(t),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i))}}class ie extends ee{setDocument(t,e=null){}}n(8111),n(3579),n(4628),n(5781);const ne="event",se="timeout";async function re({target:t,name:e,delay:i=0}){if("object"!=typeof t||!e||"string"!=typeof e||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:n,resolve:s}=Promise.withResolvers(),r=new AbortController;function a(t){r.abort(),clearTimeout(o),s(t)}t[t instanceof ae?"_on":"addEventListener"](e,a.bind(null,ne),{signal:r.signal});const o=setTimeout(a.bind(null,se),i);return n}class ae{#a=Object.create(null);on(t,e,i=null){this._on(t,e,{external:!0,once:i?.once,signal:i?.signal})}off(t,e,i=null){this._off(t,e)}dispatch(t,e){const i=this.#a[t];if(!i||0===i.length)return;let n;for(const{listener:s,external:r,once:a}of i.slice(0))a&&this._off(t,s),r?(n||=[]).push(s):s(e);if(n){for(const t of n)t(e);n=null}}_on(t,e,i=null){let n=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted)return void console.error("Cannot use an `aborted` signal.");const r=()=>this._off(t,e);n=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}(this.#a[t]||=[]).push({listener:e,external:!0===i?.external,once:!0===i?.once,rmAbort:n})}_off(t,e,i=null){const n=this.#a[t];if(n)for(let t=0,i=n.length;t<i;t++){const i=n[t];if(i.listener===e)return i.rmAbort?.(),void n.splice(t,1)}}}class oe{updateFindControlState(t){}updateFindMatchesCount(t){}initPassiveLoading(){}reportTelemetry(t){}async createL10n(){throw new Error("Not implemented: createL10n")}createScripting(){throw new Error("Not implemented: createScripting")}createSignatureStorage(){throw new Error("Not implemented: createSignatureStorage")}updateEditorStates(t){throw new Error("Not implemented: updateEditorStates")}dispatchGlobalEvent(t){}}class le{#o=Object.freeze({altTextLearnMoreUrl:"",annotationEditorMode:0,annotationMode:2,capCanvasAreaFactor:200,cursorToolOnLoad:0,defaultZoomDelay:400,defaultZoomValue:"",disablePageLabels:!1,enableAltText:!1,enableAltTextModelDownload:!0,enableAutoLinking:!0,enableGuessAltText:!0,enableHighlightFloatingButton:!1,enableNewAltTextWhenAddingImage:!0,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,enableSignatureEditor:!1,enableUpdatedAddImage:!1,externalLinkTarget:0,highlightEditorColors:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableHWA:!0,enableXfa:!0});#l=null;constructor(){this.#l=this._readFromStorage(this.#o).then(({browserPrefs:t,prefs:e})=>{Qt._checkDisablePreferences()||Qt.setAll({...t,...e},!0)})}async _writeToStorage(t){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(t){throw new Error("Not implemented: _readFromStorage")}async reset(){await this.#l,Qt.setAll(this.#o,!0),await this._writeToStorage(this.#o)}async set(t,e){await this.#l,Qt.setAll({[t]:e},!0),await this._writeToStorage(Qt.getAll(qt))}async get(t){return await this.#l,Qt.get(t)}get initializedPromise(){return this.#l}}n(1701);class ue{constructor(t){this.value=t}valueOf(){return this.value}}class de extends ue{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}}class he extends ue{constructor(t,e={}){super(t),this.opts=e}toString(t){if(t)try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){t.reportError(e)}return this.value.toString(10)}}class ce extends ue{static supportsValue(t){if("number"==typeof t)return!0;if(t instanceof Date)return!0;if(t instanceof ue)return ce.supportsValue(t.valueOf());if("Temporal"in globalThis){const e=globalThis.Temporal;if(t instanceof e.Instant||t instanceof e.PlainDateTime||t instanceof e.PlainDate||t instanceof e.PlainMonthDay||t instanceof e.PlainTime||t instanceof e.PlainYearMonth)return!0}return!1}constructor(t,e={}){t instanceof ce?(e={...t.opts,...e},t=t.value):t instanceof ue&&(t=t.valueOf()),"object"==typeof t&&"calendarId"in t&&void 0===e.calendar&&(e={...e,calendar:t.calendarId}),super(t),this.opts=e}[Symbol.toPrimitive](t){return"string"===t?this.toString():this.toNumber()}toNumber(){const t=this.value;if("number"==typeof t)return t;if(t instanceof Date)return t.getTime();if("epochMilliseconds"in t)return t.epochMilliseconds;if("toZonedDateTime"in t)return t.toZonedDateTime("UTC").epochMilliseconds;throw new TypeError("Unwrapping a non-number value as a number")}toString(t){if(t)try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){t.reportError(e)}return"number"==typeof this.value||this.value instanceof Date?new Date(this.value).toISOString():this.value.toString()}}function ge(t,e,i){if(i===e)return!0;if(i instanceof he&&e instanceof he&&i.value===e.value)return!0;if(e instanceof he&&"string"==typeof i){if(i===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0}return!1}function pe(t,e,i){return e[i]?be(t,e[i].value):(t.reportError(new RangeError("No default")),new de)}function fe(t,e){const i=[],n=Object.create(null);for(const s of e)"narg"===s.type?n[s.name]=me(t,s.value):i.push(me(t,s));return{positional:i,named:n}}function me(t,e){switch(e.type){case"str":return e.value;case"num":return new he(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,{name:e}){let i;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,e))return new de(`$${e}`);i=t.params[e]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,e))return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new de(`$${e}`);i=t.args[e]}if(i instanceof ue)return i;switch(typeof i){case"string":return i;case"number":return new he(i);case"object":if(ce.supportsValue(i))return new ce(i);default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new de(`$${e}`)}}(t,e);case"mesg":return function(t,{name:e,attr:i}){const n=t.bundle._messages.get(e);if(!n)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new de(e);if(i){const s=n.attributes[i];return s?be(t,s):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new de(`${e}.${i}`))}if(n.value)return be(t,n.value);return t.reportError(new ReferenceError(`No value: ${e}`)),new de(e)}(t,e);case"term":return function(t,{name:e,attr:i,args:n}){const s=`-${e}`,r=t.bundle._terms.get(s);if(!r)return t.reportError(new ReferenceError(`Unknown term: ${s}`)),new de(s);if(i){const e=r.attributes[i];if(e){t.params=fe(t,n).named;const i=be(t,e);return t.params=null,i}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new de(`${s}.${i}`)}t.params=fe(t,n).named;const a=be(t,r.value);return t.params=null,a}(t,e);case"func":return function(t,{name:e,args:i}){let n=t.bundle._functions[e];if(!n)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new de(`${e}()`);if("function"!=typeof n)return t.reportError(new TypeError(`Function ${e}() is not callable`)),new de(`${e}()`);try{let e=fe(t,i);return n(e.positional,e.named)}catch(i){return t.reportError(i),new de(`${e}()`)}}(t,e);case"select":return function(t,{selector:e,variants:i,star:n}){let s=me(t,e);if(s instanceof de)return pe(t,i,n);for(const e of i){if(ge(t,s,me(t,e.key)))return be(t,e.value)}return pe(t,i,n)}(t,e);default:return new de}}function ve(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new de;t.dirty.add(e);const i=[],n=t.bundle._useIsolating&&e.length>1;for(const s of e)if("string"!=typeof s){if(t.placeables++,t.placeables>100)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is 100`);n&&i.push("⁨"),i.push(me(t,s).toString(t)),n&&i.push("⁩")}else i.push(t.bundle._transform(s));return t.dirty.delete(e),i.join("")}function be(t,e){return"string"==typeof e?t.bundle._transform(e):ve(t,e)}class we{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle._intls.get(t);i||(i={},this.bundle._intls.set(t,i));let n=JSON.stringify(e);return i[n]||(i[n]=new t(this.bundle.locales,e)),i[n]}}function ye(t,e){const i=Object.create(null);for(const[n,s]of Object.entries(t))e.includes(n)&&(i[n]=s.valueOf());return i}const Ce=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Ee(t,e){let i=t[0];if(i instanceof de)return new de(`NUMBER(${i.valueOf()})`);if(i instanceof he)return new he(i.valueOf(),{...i.opts,...ye(e,Ce)});if(i instanceof ce)return new he(i.toNumber(),{...ye(e,Ce)});throw new TypeError("Invalid argument to NUMBER")}const Ae=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function xe(t,e){let i=t[0];if(i instanceof de)return new de(`DATETIME(${i.valueOf()})`);if(i instanceof ce||i instanceof he)return new ce(i,ye(e,Ae));throw new TypeError("Invalid argument to DATETIME")}const Pe=new Map;class Se{constructor(t,{functions:e,useIsolating:i=!0,transform:n=t=>t}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(t)?t:[t],this._functions={NUMBER:Ee,DATETIME:xe,...e},this._useIsolating=i,this._transform=n,this._intls=function(t){const e=Array.isArray(t)?t.join(" "):t;let i=Pe.get(e);return void 0===i&&(i=new Map,Pe.set(e,i)),i}(t)}hasMessage(t){return this._messages.has(t)}getMessage(t){return this._messages.get(t)}addResource(t,{allowOverrides:e=!1}={}){const i=[];for(let n=0;n<t.body.length;n++){let s=t.body[n];if(s.id.startsWith("-")){if(!1===e&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(!1===e&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(t,e=null,i=null){if("string"==typeof t)return this._transform(t);let n=new we(this,i,e);try{return ve(n,t).toString(n)}catch(t){if(n.errors&&t instanceof Error)return n.errors.push(t),(new de).toString(n);throw t}}}const _e=/^(-?[a-zA-Z][\w-]*) *= */gm,Fe=/\.([a-zA-Z][\w-]*) *= */y,Te=/\*?\[/y,De=/(-?[0-9]+(?:\.([0-9]+))?)/y,Be=/([a-zA-Z][\w-]*)/y,Ie=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,Le=/^[A-Z][A-Z0-9_-]*$/,ke=/([^{}\n\r]+)/y,Me=/([^\\"\n\r]*)/y,Ne=/\\([\\"])/y,Oe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,je=/^\n+/,Ve=/ +$/,Re=/ *\r?\n/g,Ue=/( *)$/,ze=/{\s*/y,He=/\s*}/y,$e=/\[\s*/y,We=/\s*] */y,Ge=/\s*\(\s*/y,Xe=/\s*->\s*/y,Ze=/\s*:\s*/y,Ke=/\s*,?\s*/y,qe=/\s+/y;class Ye{constructor(t){this.body=[],_e.lastIndex=0;let e=0;for(;;){let i=_e.exec(t);if(null===i)break;e=_e.lastIndex;try{this.body.push(o(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function i(i){return i.lastIndex=e,i.test(t)}function n(i,n){if(t[e]===i)return e++,!0;if(n)throw new n(`Expected ${i}`);return!1}function s(t,n){if(i(t))return e=t.lastIndex,!0;if(n)throw new n(`Expected ${t.toString()}`);return!1}function r(i){i.lastIndex=e;let n=i.exec(t);if(null===n)throw new SyntaxError(`Expected ${i.toString()}`);return e=i.lastIndex,n}function a(t){return r(t)[1]}function o(t){let e=l(),n=function(){let t=Object.create(null);for(;i(Fe);){let e=a(Fe),i=l();if(null===i)throw new SyntaxError("Expected attribute value");t[e]=i}return t}();if(null===e&&0===Object.keys(n).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:n}}function l(){let n;if(i(ke)&&(n=a(ke)),"{"===t[e]||"}"===t[e])return u(n?[n]:[],1/0);let s=v();return s?n?u([n,s],s.length):(s.value=b(s.value,je),u([s],s.length)):n?b(n,Ve):null}function u(n=[],s){for(;;){if(i(ke)){n.push(a(ke));continue}if("{"===t[e]){n.push(d());continue}if("}"===t[e])throw new SyntaxError("Unbalanced closing brace");let r=v();if(!r)break;n.push(r),s=Math.min(s,r.length)}let r=n.length-1,o=n[r];"string"==typeof o&&(n[r]=b(o,Ve));let l=[];for(let t of n)t instanceof Je&&(t=t.value.slice(0,t.value.length-s)),t&&l.push(t);return l}function d(){s(ze,SyntaxError);let t=h();if(s(He))return t;if(s(Xe)){let e=function(){let t,e=[],s=0;for(;i(Te);){n("*")&&(t=s);let i=g(),r=l();if(null===r)throw new SyntaxError("Expected variant value");e[s++]={key:i,value:r}}if(0===s)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return s(He,SyntaxError),{type:"select",selector:t,...e}}throw new SyntaxError("Unclosed placeable")}function h(){if("{"===t[e])return d();if(i(Ie)){let[,i,n,a=null]=r(Ie);if("$"===i)return{type:"var",name:n};if(s(Ge)){let r=function(){let i=[];for(;;){switch(t[e]){case")":return e++,i;case void 0:throw new SyntaxError("Unclosed argument list")}i.push(c()),s(Ke)}}();if("-"===i)return{type:"term",name:n,attr:a,args:r};if(Le.test(n))return{type:"func",name:n,args:r};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:n,attr:a,args:[]}:{type:"mesg",name:n,attr:a}}return p()}function c(){let t=h();return"mesg"!==t.type?t:s(Ze)?{type:"narg",name:t.name,value:p()}:t}function g(){let t;return s($e,SyntaxError),t=i(De)?f():{type:"str",value:a(Be)},s(We,SyntaxError),t}function p(){if(i(De))return f();if('"'===t[e])return function(){n('"',SyntaxError);let i="";for(;;){if(i+=a(Me),"\\"!==t[e]){if(n('"'))return{type:"str",value:i};throw new SyntaxError("Unclosed string literal")}i+=m()}}();throw new SyntaxError("Invalid expression")}function f(){let[,t,e=""]=r(De),i=e.length;return{type:"num",value:parseFloat(t),precision:i}}function m(){if(i(Ne))return a(Ne);if(i(Oe)){let[,t,e]=r(Oe),i=parseInt(t||e,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function v(){let i=e;switch(s(qe),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(t.slice(i,e))}return" "===t[e-1]&&w(t.slice(i,e))}function b(t,e){return t.replace(e,"")}function w(t){let e=t.replace(Re,"\n"),i=Ue.exec(t)[1].length;return new Je(e,i)}}}class Je{constructor(t,e){this.value=t,this.length=e}}const Qe=/<|&#?\w+;/,ti={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},ei={"http://www.w3.org/1999/xhtml":{global:["title","aria-description","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function ii(t,e){const{value:i}=e;if("string"==typeof i)if("title"===t.localName&&"http://www.w3.org/1999/xhtml"===t.namespaceURI)t.textContent=i;else if(Qe.test(i)){const e=t.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");e.innerHTML=i,function(t,e){for(const i of t.childNodes)if(i.nodeType!==i.TEXT_NODE){if(i.hasAttribute("data-l10n-name")){const n=ri(e,i);t.replaceChild(n,i);continue}if(li(i)){const e=ai(i);t.replaceChild(e,i);continue}console.warn(`An element of forbidden type "${i.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),t.replaceChild(oi(i),i)}e.textContent="",e.appendChild(t)}(e.content,t)}else t.textContent=i;si(e,t)}function ni(t,e){if(!t)return!1;for(let i of t)if(i.name===e)return!0;return!1}function si(t,e){const i=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(t=>t.trim()):null;for(const n of Array.from(e.attributes))ui(n.name,e,i)&&!ni(t.attributes,n.name)&&e.removeAttribute(n.name);if(t.attributes)for(const n of Array.from(t.attributes))ui(n.name,e,i)&&e.getAttribute(n.name)!==n.value&&e.setAttribute(n.name,n.value)}function ri(t,e){const i=e.getAttribute("data-l10n-name"),n=t.querySelector(`[data-l10n-name="${i}"]`);if(!n)return console.warn(`An element named "${i}" wasn't found in the source.`),oi(e);if(n.localName!==e.localName)return console.warn(`An element named "${i}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${n.localName}).`),oi(e);t.removeChild(n);return di(e,n.cloneNode(!1))}function ai(t){const e=t.ownerDocument.createElement(t.localName);return di(t,e)}function oi(t){return t.ownerDocument.createTextNode(t.textContent)}function li(t){const e=ti[t.namespaceURI];return e&&e.includes(t.localName)}function ui(t,e,i=null){if(i&&i.includes(t))return!0;const n=ei[e.namespaceURI];if(!n)return!1;const s=t.toLowerCase(),r=e.localName;if(n.global.includes(s))return!0;if(!n[r])return!1;if(n[r].includes(s))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===r&&"value"===s){const t=e.type.toLowerCase();if("submit"===t||"button"===t||"reset"===t)return!0}return!1}function di(t,e){return e.textContent=t.textContent,si(t,e),e}n(2489),n(7588);class hi extends Array{static from(t){return t instanceof this?t:new this(t)}}class ci extends hi{constructor(t){if(super(),Symbol.asyncIterator in Object(t))this.iterator=t[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(t)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=t[Symbol.iterator]()}}[Symbol.asyncIterator](){const t=this;let e=0;return{next:async()=>(t.length<=e&&t.push(t.iterator.next()),t[e++])}}async touchNext(t=1){let e=0;for(;e++<t;){const t=this[this.length-1];if(t&&(await t).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class gi{constructor(t=[],e){this.resourceIds=t,this.generateBundles=e,this.onChange(!0)}addResourceIds(t,e=!1){return this.resourceIds.push(...t),this.onChange(e),this.resourceIds.length}removeResourceIds(t){return this.resourceIds=this.resourceIds.filter(e=>!t.includes(e)),this.onChange(),this.resourceIds.length}async formatWithFallback(t,e){const i=[];let n=!1;for await(const s of this.bundles){n=!0;const r=mi(e,s,t,i);if(0===r.size)break;if("undefined"!=typeof console){const t=s.locales[0],e=Array.from(r).join(", ");console.warn(`[fluent] Missing translations in ${t}: ${e}`)}}return n||"undefined"==typeof console||console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(t)}.\n  resourceIds: ${JSON.stringify(this.resourceIds)}.`),i}formatMessages(t){return this.formatWithFallback(t,fi)}formatValues(t){return this.formatWithFallback(t,pi)}async formatValue(t,e){const[i]=await this.formatValues([{id:t,args:e}]);return i}handleEvent(){this.onChange()}onChange(t=!1){this.bundles=ci.from(this.generateBundles(this.resourceIds)),t&&this.bundles.touchNext(2)}}function pi(t,e,i,n){return i.value?t.formatPattern(i.value,n,e):null}function fi(t,e,i,n){const s={value:null,attributes:null};i.value&&(s.value=t.formatPattern(i.value,n,e));let r=Object.keys(i.attributes);if(r.length>0){s.attributes=new Array(r.length);for(let[a,o]of r.entries()){let r=t.formatPattern(i.attributes[o],n,e);s.attributes[a]={name:o,value:r}}}return s}function mi(t,e,i,n){const s=[],r=new Set;return i.forEach(({id:i,args:a},o)=>{if(void 0!==n[o])return;let l=e.getMessage(i);if(l){if(s.length=0,n[o]=t(e,s,l,a),s.length>0&&"undefined"!=typeof console){const t=e.locales[0],n=s.join(", ");console.warn(`[fluent][resolver] errors in ${t}/${i}: ${n}.`)}}else r.add(i)}),r}const vi="data-l10n-id",bi="data-l10n-args",wi=`[${vi}]`;class yi extends gi{constructor(t,e){super(t,e),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[vi,bi]}}onChange(t=!1){super.onChange(t),this.roots&&this.translateRoots()}setAttributes(t,e,i){return t.setAttribute(vi,e),i?t.setAttribute(bi,JSON.stringify(i)):t.removeAttribute(bi),t}getAttributes(t){return{id:t.getAttribute(vi),args:JSON.parse(t.getAttribute(bi)||null)}}connectRoot(t){for(const e of this.roots)if(e===t||e.contains(t)||t.contains(e))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==t.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=t.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(t),this.mutationObserver.observe(t,this.observerConfig)}disconnectRoot(t){return this.roots.delete(t),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const t=Array.from(this.roots);return Promise.all(t.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const t of this.roots)this.mutationObserver.observe(t,this.observerConfig)}translateMutations(t){for(const e of t)switch(e.type){case"attributes":e.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(e.target);break;case"childList":for(const t of e.addedNodes)if(t.nodeType===t.ELEMENT_NODE)if(t.childElementCount)for(const e of this.getTranslatables(t))this.pendingElements.add(e);else t.hasAttribute(vi)&&this.pendingElements.add(t)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(t){return this.translateElements(this.getTranslatables(t))}async translateElements(t){if(!t.length)return;const e=t.map(this.getKeysForElement),i=await this.formatMessages(e);return this.applyTranslations(t,i)}applyTranslations(t,e){this.pauseObserving();for(let i=0;i<t.length;i++)void 0!==e[i]&&ii(t[i],e[i]);this.resumeObserving()}getTranslatables(t){const e=Array.from(t.querySelectorAll(wi));return"function"==typeof t.hasAttribute&&t.hasAttribute(vi)&&e.push(t),e}getKeysForElement(t){return{id:t.getAttribute(vi),args:JSON.parse(t.getAttribute(bi)||null)}}}class Ci{#u;#d;#h;#c;constructor({lang:t,isRTL:e},i=null){this.#h=Ci.#g(t),this.#c=i,this.#u=e??Ci.#p(this.#h)?"rtl":"ltr"}_setL10n(t){this.#c=t}getLanguage(){return this.#h}getDirection(){return this.#u}async get(t,e=null,i){if(Array.isArray(t)){t=t.map(t=>({id:t}));return(await this.#c.formatMessages(t)).map(t=>t.value)}const n=await this.#c.formatMessages([{id:t,args:e}]);return n[0]?.value||i}async translate(t){(this.#d||=new Set).add(t);try{this.#c.connectRoot(t),await this.#c.translateRoots()}catch{}}async translateOnce(t){try{await this.#c.translateElements([t])}catch(t){console.error("translateOnce:",t)}}async destroy(){if(this.#d){for(const t of this.#d)this.#c.disconnectRoot(t);this.#d.clear(),this.#d=null}this.#c.pauseObserving()}pause(){this.#c.pauseObserving()}resume(){this.#c.resumeObserving()}static#g(t){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[t=t?.toLowerCase()||"en-us"]||t}static#p(t){const e=t.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(e)}}function Ei(){const{isAndroid:t,isLinux:e,isMac:i,isWindows:n}=v.platform;return e?"linux":n?"windows":i?"macos":t?"android":"other"}function Ai(t,e){const i=new Ye(e),n=new Se(t,{functions:{PLATFORM:Ei}}),s=n.addResource(i);return s.length&&console.error("L10n errors",s),n}class xi extends Ci{constructor(t){super({lang:t});const e=t?xi.#f.bind(xi,"en-us",this.getLanguage()):xi.#m.bind(xi,this.getLanguage());this._setL10n(new yi([],e))}static async*#f(t,e){const{baseURL:i,paths:n}=await this.#v(),s=[e];if(t!==e){const i=e.split("-",1)[0];i!==e&&s.push(i),s.push(t)}const r=s.map(t=>[t,this.#b(t,i,n)]);for(const[t,e]of r){const i=await e;i?yield i:"en-us"===t&&(yield this.#w(t))}}static async#b(t,e,i){const n=i[t];if(!n)return null;const s=new URL(n,e);return Ai(t,await b(s,"text"))}static async#v(){try{const{href:t}=document.querySelector('link[type="application/l10n"]'),e=await b(t,"json");return{baseURL:t.substring(0,t.lastIndexOf("/")+1)||"./",paths:e}}catch{}return{baseURL:"./",paths:Object.create(null)}}static async*#m(t){yield this.#w(t)}static async#w(t){return Ai(t,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties…\npdfjs-document-properties-button-label = Document Properties…\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing…\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document…\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-signature-button =\n    .title = Add signature\npdfjs-editor-signature-button-label = Add signature\npdfjs-editor-highlight-editor =\n    .aria-label = Highlight editor\npdfjs-editor-ink-editor =\n    .aria-label = Drawing editor\npdfjs-editor-signature-editor1 =\n    .aria-description = Signature editor: { $description }\npdfjs-editor-stamp-editor =\n    .aria-label = Image editor\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-remove-signature-button =\n    .title = Remove signature\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-editor-add-signature-container =\n    .aria-label = Signature controls and saved signatures\npdfjs-editor-signature-add-signature-button =\n    .title = Add new signature\npdfjs-editor-signature-add-signature-button-label = Add new signature\npdfjs-editor-add-saved-signature-button =\n    .title = Saved signature: { $description }\npdfjs-free-text2 =\n    .aria-label = Text Editor\n    .default-content = Start typing…\npdfjs-editor-alt-text-button =\n    .aria-label = Alt text\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button =\n    .aria-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, “A young man sits down at a table to eat a meal”\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner — resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle — resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner — resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right — resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner — resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle — resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner — resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left — resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here…\npdfjs-editor-new-alt-text-description = Short description for people who can’t see the image or when the image doesn’t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn’t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button =\n    .aria-label = Alt text added\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button =\n    .aria-label = Missing alt text\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button =\n    .aria-label = Review alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can’t see the image or when the image doesn’t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading…\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close\npdfjs-editor-undo-bar-message-highlight = Highlight removed\npdfjs-editor-undo-bar-message-freetext = Text removed\npdfjs-editor-undo-bar-message-ink = Drawing removed\npdfjs-editor-undo-bar-message-stamp = Image removed\npdfjs-editor-undo-bar-message-signature = Signature removed\npdfjs-editor-undo-bar-message-multiple =\n    { $count ->\n        [one] { $count } annotation removed\n       *[other] { $count } annotations removed\n    }\npdfjs-editor-undo-bar-undo-button =\n    .title = Undo\npdfjs-editor-undo-bar-undo-button-label = Undo\npdfjs-editor-undo-bar-close-button =\n    .title = Close\npdfjs-editor-undo-bar-close-button-label = Close\npdfjs-editor-add-signature-dialog-label = This modal allows the user to create a signature to add to a PDF document. The user can edit the name (which also serves as the alt text), and optionally save the signature for repeated use.\npdfjs-editor-add-signature-dialog-title = Add a signature\npdfjs-editor-add-signature-type-button = Type\n    .title = Type\npdfjs-editor-add-signature-draw-button = Draw\n    .title = Draw\npdfjs-editor-add-signature-image-button = Image\n    .title = Image\npdfjs-editor-add-signature-type-input =\n    .aria-label = Type your signature\n    .placeholder = Type your signature\npdfjs-editor-add-signature-draw-placeholder = Draw your signature\npdfjs-editor-add-signature-draw-thickness-range-label = Thickness\npdfjs-editor-add-signature-draw-thickness-range =\n    .title = Drawing thickness: { $thickness }\npdfjs-editor-add-signature-image-placeholder = Drag a file here to upload\npdfjs-editor-add-signature-image-browse-link =\n    { PLATFORM() ->\n        [macos] Or choose image files\n       *[other] Or browse image files\n    }\npdfjs-editor-add-signature-description-label = Description (alt text)\npdfjs-editor-add-signature-description-input =\n    .title = Description (alt text)\npdfjs-editor-add-signature-description-default-when-drawing = Signature\npdfjs-editor-add-signature-clear-button-label = Clear signature\npdfjs-editor-add-signature-clear-button =\n    .title = Clear signature\npdfjs-editor-add-signature-save-checkbox = Save signature\npdfjs-editor-add-signature-save-warning-message = You’ve reached the limit of 5 saved signatures. Remove one to save more.\npdfjs-editor-add-signature-image-upload-error-title = Couldn’t upload image\npdfjs-editor-add-signature-image-upload-error-description = Check your network connection or try another image.\npdfjs-editor-add-signature-error-close-button = Close\npdfjs-editor-add-signature-cancel-button = Cancel\npdfjs-editor-add-signature-add-button = Add\npdfjs-editor-delete-signature-button1 =\n    .title = Remove saved signature\npdfjs-editor-delete-signature-button-label1 = Remove saved signature\npdfjs-editor-add-signature-edit-button-label = Edit description\npdfjs-editor-edit-signature-dialog-title = Edit description\npdfjs-editor-edit-signature-update-button = Update')}}class Pi{constructor(t){this._ready=new Promise((e,i)=>{import(t).then(t=>{e(t.QuickJSSandbox())}).catch(i)})}async createSandbox(t){(await this._ready).create(t)}async dispatchEventInSandbox(t){const e=await this._ready;setTimeout(()=>e.dispatchEvent(t),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}const Si="pdfjs.signature";class _i{#y;#C=null;#E=null;constructor(t,e){this.#y=t,this.#E=e}#A(){localStorage.setItem(Si,JSON.stringify(Object.fromEntries(this.#C)))}async getAll(){if(this.#E&&(window.addEventListener("storage",({key:t})=>{t===Si&&(this.#C=null,this.#y?.dispatch("storedsignatureschanged",{source:this}))},{signal:this.#E}),this.#E=null),!this.#C){this.#C=new Map;const t=localStorage.getItem(Si);if(t)for(const[e,i]of Object.entries(JSON.parse(t)))this.#C.set(e,i)}return this.#C}async isFull(){return 5===await this.size()}async size(){return(await this.getAll()).size}async create(t){if(await this.isFull())return null;const e=E();return this.#C.set(e,t),this.#A(),e}async delete(t){const e=await this.getAll();return!!e.has(t)&&(e.delete(t),this.#A(),!0)}}class Fi extends oe{async createL10n(){return new xi(Qt.get("localeProperties")?.lang)}createScripting(){return new Pi(Qt.get("sandboxBundleSrc"))}createSignatureStorage(t,e){return new _i(t,e)}}class Ti{#x=this.#P.bind(this);#S;#_=null;#F;#T;#D;#B;#I;#L;#y;#k=!1;#M;#N=null;#O=null;#j;#V;#R=!1;#U=!1;#z;#H;#$;#W;#G;#X;#Z=null;constructor({descriptionContainer:t,dialog:e,imagePreview:i,cancelButton:n,disclaimer:s,notNowButton:r,saveButton:a,textarea:o,learnMore:l,errorCloseButton:u,createAutomaticallyButton:d,downloadModel:h,downloadModelDescription:c,title:g},p,f){this.#F=n,this.#S=d,this.#T=t,this.#D=e,this.#B=s,this.#H=r,this.#j=i,this.#W=o,this.#z=l,this.#G=g,this.#I=h,this.#L=c,this.#$=p,this.#y=f,e.addEventListener("close",this.#K.bind(this)),e.addEventListener("contextmenu",t=>{t.target!==this.#W&&t.preventDefault()}),n.addEventListener("click",this.#x),r.addEventListener("click",this.#x),a.addEventListener("click",this.#A.bind(this)),u.addEventListener("click",()=>{this.#q(!1)}),d.addEventListener("click",async()=>{const t="true"!==d.getAttribute("aria-pressed");this.#_._reportTelemetry({action:"pdfjs.image.alt_text.ai_generation_check",data:{status:t}}),this.#X&&(this.#X.setPreference("enableGuessAltText",t),await this.#X.mlManager.toggleService("altText",t)),this.#Y(t,!1)}),o.addEventListener("focus",()=>{this.#U=this.#R,this.#J(!1),this.#Q()}),o.addEventListener("blur",()=>{o.value||this.#J(this.#U),this.#Q()}),o.addEventListener("input",()=>{this.#Q()}),f._on("enableguessalttext",({value:t})=>{this.#Y(t,!1)}),this.#$.register(e),this.#z.addEventListener("click",()=>{this.#_._reportTelemetry({action:"pdfjs.image.alt_text.info",data:{topic:"alt_text"}})})}#J(t){this.#X&&this.#R!==t&&(this.#R=t,this.#T.classList.toggle("loading",t))}#q(t){this.#X&&this.#D.classList.toggle("error",t)}async#Y(t,e=!1){if(this.#X)if(this.#D.classList.toggle("aiDisabled",!t),this.#S.setAttribute("aria-pressed",t),t){const{altTextLearnMoreUrl:t}=this.#X.mlManager;t&&(this.#z.href=t),this.#tt(e)}else this.#J(!1),this.#R=!1,this.#Q()}#et(){this.#H.classList.toggle("hidden",!this.#k),this.#F.classList.toggle("hidden",this.#k)}#it(t){this.#X&&this.#N!==t&&(this.#N=t,this.#D.classList.toggle("noAi",!t),this.#Q())}#Q(){const t=this.#R||this.#M&&this.#M===this.#W.value;this.#B.hidden=!t;const e=this.#R||!!this.#W.value;this.#O!==e&&(this.#O=e,this.#G.setAttribute("data-l10n-id",e?"pdfjs-editor-new-alt-text-dialog-edit-label":"pdfjs-editor-new-alt-text-dialog-add-label"))}async#tt(t){if(this.#R)return;if(this.#W.value)return;if(t&&null!==this.#Z)return;if(this.#M=this.#_.guessedAltText,null===this.#Z&&this.#M)return void this.#nt(this.#M);this.#J(!0),this.#Q();let e=!1;try{const t=await this.#_.mlGuessAltText(this.#V,!1);t&&(this.#M=t,this.#U=this.#R,this.#R&&this.#nt(t))}catch(t){console.error(t),e=!0}this.#J(!1),this.#Q(),e&&this.#X&&this.#q(!0)}#nt(t){this.#X&&!this.#W.value&&(this.#W.value=t,this.#Q())}#st(){this.#I.classList.toggle("hidden",!1);const t=async({detail:{finished:e,total:i,totalLoaded:n}})=>{const s=1e6;n=Math.min(.99*i,n);const r=this.#L.ariaValueMax=Math.round(i/s),a=this.#L.ariaValueNow=Math.round(n/s);if(this.#L.setAttribute("data-l10n-args",JSON.stringify({totalSize:r,downloadedSize:a})),!e)return;if(this.#y._off("loadaiengineprogress",t),this.#I.classList.toggle("hidden",!0),this.#it(!0),!this.#X)return;const{mlManager:o}=this.#X;o.toggleService("altText",!0),this.#Y(await o.isEnabledFor("altText"),!0)};this.#y._on("loadaiengineprogress",t)}async editAltText(t,e,i){if(this.#_||!e)return;if(i&&e.hasAltTextData())return void e.altTextFinish();this.#k=i;let{mlManager:n}=t,s=!!n;this.#Q(),n&&!n.isReady("altText")?(s=!1,n.hasProgress?this.#st():n=null):this.#I.classList.toggle("hidden",!0);const r=n?.isEnabledFor("altText");this.#_=e,this.#X=t,this.#X.removeEditListeners(),({altText:this.#Z}=e.altTextData),this.#W.value=this.#Z??"";let a,o,l;n?(({canvas:a,width:o,height:l,imageData:this.#V}=e.copyCanvas(224,180,!0)),s&&this.#Y(await r,!0)):({canvas:a,width:o,height:l}=e.copyCanvas(224,180,!1)),a.setAttribute("role","presentation");const{style:u}=a;u.width=`${o}px`,u.height=`${l}px`,this.#j.append(a),this.#et(),this.#it(s),this.#q(!1);try{await this.#$.open(this.#D)}catch(t){throw this.#K(),t}}#P(){this.#_.altTextData={cancel:!0};const t=this.#W.value.trim();this.#_._reportTelemetry({action:"pdfjs.image.alt_text.dismiss",data:{alt_text_type:t?"present":"empty",flow:this.#k?"image_add":"alt_text_edit"}}),this.#_._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!0,alt_text_type:"skipped"}}),this.#rt()}#rt(){this.#$.closeIfActive(this.#D)}#K(){const t=this.#j.firstChild;t.remove(),t.width=t.height=0,this.#V=null,this.#J(!1),this.#X?.addEditListeners(),this.#_.altTextFinish(),this.#X?.setSelected(this.#_),this.#_=null,this.#X=null}#at(t){return new Set(t.toLowerCase().split(/[^\p{L}\p{N}]+/gu).filter(t=>!!t))}#A(){const t=this.#W.value.trim();if(this.#_.altTextData={altText:t,decorative:!1},this.#_.altTextData.guessedAltText=this.#M,this.#M&&this.#M!==t){const e=this.#at(this.#M),i=this.#at(t);this.#_._reportTelemetry({action:"pdfjs.image.alt_text.user_edit",data:{total_words:e.size,words_removed:e.difference(i).size,words_added:i.difference(e).size}})}this.#_._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!0,alt_text_type:t?"present":"empty"}}),this.#_._reportTelemetry({action:"pdfjs.image.alt_text.save",data:{alt_text_type:t?"present":"empty",flow:this.#k?"image_add":"alt_text_edit"}}),this.#rt()}destroy(){this.#X=null,this.#rt()}}class Di{#ot;#lt;#ut;#D;#y;#dt;#$;#ht;constructor({dialog:t,createModelButton:e,aiModelSettings:i,learnMore:n,closeButton:s,deleteModelButton:r,downloadModelButton:a,showAltTextDialogButton:o},l,u,d){this.#D=t,this.#ot=i,this.#lt=e,this.#ut=a,this.#ht=o,this.#$=l,this.#y=u,this.#dt=d;const{altTextLearnMoreUrl:h}=d;h&&(n.href=h),t.addEventListener("contextmenu",B),e.addEventListener("click",async t=>{const e=this.#ct("enableGuessAltText",t);await d.toggleService("altText",e),this.#gt({type:"stamp",action:"pdfjs.image.alt_text.settings_ai_generation_check",data:{status:e}})}),o.addEventListener("click",t=>{const e=this.#ct("enableNewAltTextWhenAddingImage",t);this.#gt({type:"stamp",action:"pdfjs.image.alt_text.settings_edit_alt_text_check",data:{status:e}})}),r.addEventListener("click",this.#pt.bind(this,!0)),a.addEventListener("click",this.#ft.bind(this,!0)),s.addEventListener("click",this.#rt.bind(this)),n.addEventListener("click",()=>{this.#gt({type:"stamp",action:"pdfjs.image.alt_text.info",data:{topic:"ai_generation"}})}),u._on("enablealttextmodeldownload",({value:t})=>{t?this.#ft(!1):this.#pt(!1)}),this.#$.register(t)}#gt(t){this.#y.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}async#ft(t=!1){if(t){this.#ut.disabled=!0;const t=this.#ut.firstChild;t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-settings-downloading-model-button"),await this.#dt.downloadModel("altText"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-settings-download-model-button"),this.#lt.disabled=!1,this.#mt("enableGuessAltText",!0),this.#dt.toggleService("altText",!0),this.#mt("enableAltTextModelDownload",!0),this.#ut.disabled=!1}this.#ot.classList.toggle("download",!1),this.#lt.setAttribute("aria-pressed",!0)}async#pt(t=!1){t&&(await this.#dt.deleteModel("altText"),this.#mt("enableGuessAltText",!1),this.#mt("enableAltTextModelDownload",!1)),this.#ot.classList.toggle("download",!0),this.#lt.disabled=!0,this.#lt.setAttribute("aria-pressed",!1)}async open({enableGuessAltText:t,enableNewAltTextWhenAddingImage:e}){const{enableAltTextModelDownload:i}=this.#dt;this.#lt.disabled=!i,this.#lt.setAttribute("aria-pressed",i&&t),this.#ht.setAttribute("aria-pressed",e),this.#ot.classList.toggle("download",!i),await this.#$.open(this.#D),this.#gt({type:"stamp",action:"pdfjs.image.alt_text.settings_displayed"})}#ct(t,{target:e}){const i="true"!==e.getAttribute("aria-pressed");return this.#mt(t,i),e.setAttribute("aria-pressed",i),i}#mt(t,e){this.#y.dispatch("setpreference",{source:this,name:t,value:e})}#rt(){this.#$.closeIfActive(this.#D)}}class Bi{#vt=null;#_=null;#F;#D;#y;#bt=!1;#wt;#yt;#$;#Ct;#W;#X;#Z=null;#Et=null;#At=null;#xt=null;#Pt;#St=null;constructor({dialog:t,optionDescription:e,optionDecorative:i,textarea:n,cancelButton:s,saveButton:r},a,o,l){this.#D=t,this.#wt=e,this.#yt=i,this.#W=n,this.#F=s,this.#Ct=r,this.#$=o,this.#y=l,this.#Pt=a;const u=this.#_t.bind(this);t.addEventListener("close",this.#K.bind(this)),t.addEventListener("contextmenu",t=>{t.target!==this.#W&&t.preventDefault()}),s.addEventListener("click",this.#rt.bind(this)),r.addEventListener("click",this.#A.bind(this)),e.addEventListener("change",u),i.addEventListener("change",u),this.#$.register(t)}#Ft(){if(this.#At)return;const t=new f,e=this.#At=t.createElement("svg");e.setAttribute("width","0"),e.setAttribute("height","0");const i=t.createElement("defs");e.append(i);const n=t.createElement("mask");i.append(n),n.setAttribute("id","alttext-manager-mask"),n.setAttribute("maskContentUnits","objectBoundingBox");let s=t.createElement("rect");n.append(s),s.setAttribute("fill","white"),s.setAttribute("width","1"),s.setAttribute("height","1"),s.setAttribute("x","0"),s.setAttribute("y","0"),s=this.#xt=t.createElement("rect"),n.append(s),s.setAttribute("fill","black"),this.#D.append(e)}async editAltText(t,e){if(this.#_||!e)return;this.#Ft(),this.#bt=!1,this.#vt=new AbortController;const i={signal:this.#vt.signal},n=this.#Tt.bind(this);for(const t of[this.#wt,this.#yt,this.#W,this.#Ct,this.#F])t.addEventListener("click",n,i);const{altText:s,decorative:r}=e.altTextData;!0===r?(this.#yt.checked=!0,this.#wt.checked=!1):(this.#yt.checked=!1,this.#wt.checked=!0),this.#Z=this.#W.value=s?.trim()||"",this.#_t(),this.#_=e,this.#X=t,this.#X.removeEditListeners(),this.#Et=new AbortController,this.#y._on("resize",this.#Dt.bind(this),{signal:this.#Et.signal});try{await this.#$.open(this.#D),this.#Dt()}catch(t){throw this.#K(),t}}#Dt(){if(!this.#_)return;const t=this.#D,{style:e}=t,{x:i,y:n,width:s,height:r}=this.#Pt.getBoundingClientRect(),{innerWidth:a,innerHeight:o}=window,{width:l,height:u}=t.getBoundingClientRect(),{x:d,y:h,width:c,height:g}=this.#_.getClientDimensions(),p=10,f="ltr"===this.#X.direction,m=Math.max(d,i),v=Math.min(d+c,i+s),b=Math.max(h,n),w=Math.min(h+g,n+r);this.#xt.setAttribute("width",""+(v-m)/a),this.#xt.setAttribute("height",""+(w-b)/o),this.#xt.setAttribute("x",""+m/a),this.#xt.setAttribute("y",""+b/o);let y=null,C=Math.max(h,0);C+=Math.min(o-(C+u),0),f?d+c+p+l<a?y=d+c+p:d>l+p&&(y=d-l-p):d>l+p?y=d-l-p:d+c+p+l<a&&(y=d+c+p),null===y&&(C=null,y=Math.max(d,0),y+=Math.min(a-(y+l),0),h>u+p?C=h-u-p:h+g+p+u<o&&(C=h+g+p)),null!==C?(t.classList.add("positioned"),f?e.left=`${y}px`:e.right=a-y-l+"px",e.top=`${C}px`):(t.classList.remove("positioned"),e.left="",e.top="")}#rt(){this.#$.closeIfActive(this.#D)}#K(){this.#_._reportTelemetry(this.#St||{action:"alt_text_cancel",alt_text_keyboard:!this.#bt}),this.#St=null,this.#Bt(),this.#X?.addEditListeners(),this.#Et?.abort(),this.#Et=null,this.#_.altTextFinish(),this.#_=null,this.#X=null}#_t(){this.#W.disabled=this.#yt.checked}#A(){const t=this.#W.value.trim(),e=this.#yt.checked;this.#_.altTextData={altText:t,decorative:e},this.#St={action:"alt_text_save",alt_text_description:!!t,alt_text_edit:!!this.#Z&&this.#Z!==t,alt_text_decorative:e,alt_text_keyboard:!this.#bt},this.#rt()}#Tt(t){0!==t.detail&&(this.#bt=!0,this.#Bt())}#Bt(){this.#vt?.abort(),this.#vt=null}destroy(){this.#X=null,this.#rt(),this.#At?.remove(),this.#At=this.#xt=null}}class Ii{constructor(t,e){this.eventBus=e,this.#It(t)}#It({editorFreeTextFontSize:t,editorFreeTextColor:e,editorInkColor:i,editorInkThickness:n,editorInkOpacity:s,editorStampAddImage:r,editorFreeHighlightThickness:o,editorHighlightShowAll:l,editorSignatureAddSignature:u}){const{eventBus:d}=this,h=(t,e)=>{d.dispatch("switchannotationeditorparams",{source:this,type:a[t],value:e})};t.addEventListener("input",function(){h("FREETEXT_SIZE",this.valueAsNumber)}),e.addEventListener("input",function(){h("FREETEXT_COLOR",this.value)}),i.addEventListener("input",function(){h("INK_COLOR",this.value)}),n.addEventListener("input",function(){h("INK_THICKNESS",this.valueAsNumber)}),s.addEventListener("input",function(){h("INK_OPACITY",this.valueAsNumber)}),r.addEventListener("click",()=>{d.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{action:"pdfjs.image.add_image_click"}}}),h("CREATE")}),o.addEventListener("input",function(){h("HIGHLIGHT_THICKNESS",this.valueAsNumber)}),l.addEventListener("click",function(){const t="true"===this.getAttribute("aria-pressed");this.setAttribute("aria-pressed",!t),h("HIGHLIGHT_SHOW_ALL",!t)}),u.addEventListener("click",()=>{h("CREATE")}),d._on("annotationeditorparamschanged",r=>{for(const[u,h]of r.details)switch(u){case a.FREETEXT_SIZE:t.value=h;break;case a.FREETEXT_COLOR:e.value=h;break;case a.INK_COLOR:i.value=h;break;case a.INK_THICKNESS:n.value=h;break;case a.INK_OPACITY:s.value=h;break;case a.HIGHLIGHT_DEFAULT_COLOR:d.dispatch("mainhighlightcolorpickerupdatecolor",{source:this,value:h});break;case a.HIGHLIGHT_THICKNESS:o.value=h;break;case a.HIGHLIGHT_FREE:o.disabled=!h;break;case a.HIGHLIGHT_SHOW_ALL:l.setAttribute("aria-pressed",h)}})}}const Li=.1;class ki{#Lt;#kt=0;#Mt;constructor(t,e,i,n){if(this.#Lt=e,this.#Mt=i,!n)return;this.#kt=n.getBoundingClientRect().height;const s=new ResizeObserver(t=>{for(const e of t)if(e.target===n){this.#kt=Math.floor(e.borderBoxSize[0].blockSize);break}});s.observe(n),t.addEventListener("abort",()=>s.disconnect(),{once:!0})}#Nt(t,e){const i=t.y,n=t.bottom,s=t.y+t.height/2,r=e.y,a=e.bottom,o=e.y+e.height/2;return i<=o&&o<=n||r<=s&&s<=a}#Ot(t,e,i,n){const s=t.y+t.height/2;return(n?i>=s:i<=s)&&t.x-Li<=e&&e<=t.right+Li}#jt(t){return t.top>=this.#kt&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}#Vt(t,e){const{focusNode:i,focusOffset:n}=t,s=document.createRange();s.setStart(i,n),s.setEnd(i,n);const r=s.getBoundingClientRect();return[r.x,e?r.top:r.bottom]}static#Rt(t,e){if(!document.caretPositionFromPoint){const{startContainer:i,startOffset:n}=document.caretRangeFromPoint(t,e);return{offsetNode:i,offset:n}}return document.caretPositionFromPoint(t,e)}#Ut(t,e,i,n,s){if(s||=n.getBoundingClientRect(),e<=s.x+Li)return void(i?t.extend(n.firstChild,0):t.setPosition(n.firstChild,0));if(s.right-Li<=e){const{lastChild:e}=n;return void(i?t.extend(e,e.length):t.setPosition(e,e.length))}const r=s.y+s.height/2;let a=ki.#Rt(e,r),o=a.offsetNode?.parentElement;if(o&&o!==n){const t=document.elementsFromPoint(e,r),i=[];for(const e of t){if(e===n)break;const{style:t}=e;i.push([e,t.visibility]),t.visibility="hidden"}a=ki.#Rt(e,r),o=a.offsetNode?.parentElement;for(const[t,e]of i)t.style.visibility=e}o===n?i?t.extend(a.offsetNode,a.offset):t.setPosition(a.offsetNode,a.offset):i?t.extend(n.firstChild,0):t.setPosition(n.firstChild,0)}#zt(t,e,i,n,s){this.#jt(n)?this.#Ut(e,s,t,i,n):(this.#Lt.addEventListener("scrollend",this.#Ut.bind(this,e,s,t,i,null),{once:!0}),i.scrollIntoView())}#Ht(t,e){for(;;){const i=t.closest(".page"),n=parseInt(i.getAttribute("data-page-number")),s=e?n-1:n+1;if(!(t=this.#Mt.querySelector(`.page[data-page-number="${s}"] .textLayer`)))return null;const r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),a=e?r.lastChild():r.firstChild();if(a)return a}}moveCaret(t,e){const i=document.getSelection();if(0===i.rangeCount)return;const{focusNode:n}=i,s=n.nodeType!==Node.ELEMENT_NODE?n.parentElement:n,r=s.closest(".textLayer");if(!r)return;const a=document.createTreeWalker(r,NodeFilter.SHOW_TEXT);a.currentNode=n;const o=s.getBoundingClientRect();let l=null;const u=(t?a.previousSibling:a.nextSibling).bind(a);for(;u();){const t=a.currentNode.parentElement;if(!this.#Nt(o,t.getBoundingClientRect())){l=t;break}}if(!l){const s=this.#Ht(r,t);if(!s)return;if(e){const e=(t?a.firstChild():a.lastChild())||n;i.extend(e,t?0:e.length);const r=document.createRange();return r.setStart(s,t?s.length:0),r.setEnd(s,t?s.length:0),void i.addRange(r)}const[o]=this.#Vt(i,t),{parentElement:l}=s;return void this.#zt(e,i,l,l.getBoundingClientRect(),o)}const[d,h]=this.#Vt(i,t),c=l.getBoundingClientRect();if(this.#Ot(c,d,h,t))this.#zt(e,i,l,c,d);else{for(;u();){const n=a.currentNode.parentElement,s=n.getBoundingClientRect();if(!this.#Nt(c,s))break;if(this.#Ot(s,d,h,t))return void this.#zt(e,i,n,s,d)}this.#zt(e,i,l,c,d)}}}function Mi(t,e){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=t,i.target="_parent","download"in i&&(i.download=e),(document.body||document.documentElement).append(i),i.click(),i.remove()}class Ni{#$t=new WeakMap;downloadData(t,e,i){Mi(URL.createObjectURL(new Blob([t],{type:i})),e)}openOrDownloadData(t,e,i=null){const n=F(e),s=n?"application/pdf":"";if(n){let n,r=this.#$t.get(t);r||(r=URL.createObjectURL(new Blob([t],{type:s})),this.#$t.set(t,r)),n="?file="+encodeURIComponent(r+"#"+e),i&&(n+=`#${escape(i)}`);try{return window.open(n),!0}catch(e){console.error("openOrDownloadData:",e),URL.revokeObjectURL(r),this.#$t.delete(t)}}return this.downloadData(t,e,s),!1}download(t,e,i){let n;if(t)n=URL.createObjectURL(new Blob([t],{type:"application/pdf"}));else{if(!p(e,"http://example.com"))return void console.error(`download - not a valid URL: ${e}`);n=e+"#pdfjs.action=download"}Mi(n,i)}}class Oi{#Wt=null;#Pt;#y=null;#Gt=null;#Xt=null;isOpen=!1;#Zt;#Kt=null;#qt;static#Yt=Object.freeze({highlight:"pdfjs-editor-undo-bar-message-highlight",freetext:"pdfjs-editor-undo-bar-message-freetext",stamp:"pdfjs-editor-undo-bar-message-stamp",ink:"pdfjs-editor-undo-bar-message-ink",signature:"pdfjs-editor-undo-bar-message-signature",_multiple:"pdfjs-editor-undo-bar-message-multiple"});constructor({container:t,message:e,undoButton:i,closeButton:n},s){this.#Pt=t,this.#Zt=e,this.#qt=i,this.#Wt=n,this.#y=s}destroy(){this.#Xt?.abort(),this.#Xt=null,this.hide()}show(t,e){if(!this.#Xt){this.#Xt=new AbortController;const t={signal:this.#Xt.signal},e=this.hide.bind(this);this.#Pt.addEventListener("contextmenu",B,t),this.#Wt.addEventListener("click",e,t),this.#y._on("beforeprint",e,t),this.#y._on("download",e,t)}this.hide(),"string"==typeof e?this.#Zt.setAttribute("data-l10n-id",Oi.#Yt[e]):(this.#Zt.setAttribute("data-l10n-id",Oi.#Yt._multiple),this.#Zt.setAttribute("data-l10n-args",JSON.stringify({count:e}))),this.isOpen=!0,this.#Pt.hidden=!1,this.#Kt=new AbortController,this.#qt.addEventListener("click",()=>{t(),this.hide()},{signal:this.#Kt.signal}),this.#Gt=setTimeout(()=>{this.#Pt.focus(),this.#Gt=null},100)}hide(){this.isOpen&&(this.isOpen=!1,this.#Pt.hidden=!0,this.#Kt?.abort(),this.#Kt=null,this.#Gt&&(clearTimeout(this.#Gt),this.#Gt=null))}}class ji{#Jt=new WeakMap;#Qt=null;get active(){return this.#Qt}async register(t,e=!1){if("object"!=typeof t)throw new Error("Not enough parameters.");if(this.#Jt.has(t))throw new Error("The overlay is already registered.");this.#Jt.set(t,{canForceClose:e}),t.addEventListener("cancel",({target:t})=>{this.#Qt===t&&(this.#Qt=null)})}async open(t){if(!this.#Jt.has(t))throw new Error("The overlay does not exist.");if(this.#Qt){if(this.#Qt===t)throw new Error("The overlay is already active.");if(!this.#Jt.get(t).canForceClose)throw new Error("Another overlay is currently active.");await this.close()}this.#Qt=t,t.showModal()}async close(t=this.#Qt){if(!this.#Jt.has(t))throw new Error("The overlay does not exist.");if(!this.#Qt)throw new Error("The overlay is currently not active.");if(this.#Qt!==t)throw new Error("Another overlay is currently active.");t.close(),this.#Qt=null}async closeIfActive(t){this.#Qt===t&&await this.close(t)}}class Vi{#te=null;#ee=null;#ie=null;constructor(t,e,i=!1){this.dialog=t.dialog,this.label=t.label,this.input=t.input,this.submitButton=t.submitButton,this.cancelButton=t.cancelButton,this.overlayManager=e,this._isViewerEmbedded=i,this.submitButton.addEventListener("click",this.#ne.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",t=>{13===t.keyCode&&this.#ne()}),this.overlayManager.register(this.dialog,!0),this.dialog.addEventListener("close",this.#P.bind(this))}async open(){await(this.#te?.promise),this.#te=Promise.withResolvers();try{await this.overlayManager.open(this.dialog)}catch(t){throw this.#te.resolve(),t}const t=this.#ie===M.INCORRECT_PASSWORD;this._isViewerEmbedded&&!t||this.input.focus(),this.label.setAttribute("data-l10n-id",t?"pdfjs-password-invalid":"pdfjs-password-label")}async close(){this.overlayManager.closeIfActive(this.dialog)}#ne(){const t=this.input.value;t?.length>0&&this.#se(t)}#P(){this.#se(new Error("PasswordPrompt cancelled.")),this.#te.resolve()}#se(t){this.#ee&&(this.close(),this.input.value="",this.#ee(t),this.#ee=null)}async setUpdateCallback(t,e){this.#te&&await this.#te.promise,this.#ee=t,this.#ie=e}}const Ri="selected";class Ui{constructor(t){this.container=t.container,this.eventBus=t.eventBus,this._l10n=t.l10n,this.reset()}reset(){this._pdfDocument=null,this._lastToggleIsShow=!0,this._currentTreeItem=null,this.container.textContent="",this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(t){throw new Error("Not implemented: _dispatchEvent")}_bindLink(t,e){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(t){return Pt(t,!0)||"–"}_addToggleButton(t,e=!1){const i=document.createElement("div");i.className="treeItemToggler",e&&i.classList.add("treeItemsHidden"),i.onclick=e=>{if(e.stopPropagation(),i.classList.toggle("treeItemsHidden"),e.shiftKey){const e=!i.classList.contains("treeItemsHidden");this._toggleTreeItem(t,e)}},t.prepend(i)}_toggleTreeItem(t,e=!1){this._l10n.pause(),this._lastToggleIsShow=e;for(const i of t.querySelectorAll(".treeItemToggler"))i.classList.toggle("treeItemsHidden",!e);this._l10n.resume()}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(t,e,i=!1){i&&(this.container.classList.add("treeWithDeepNesting"),this._lastToggleIsShow=!t.querySelector(".treeItemsHidden")),this._l10n.pause(),this.container.append(t),this._l10n.resume(),this._dispatchEvent(e)}render(t){throw new Error("Not implemented: render")}_updateCurrentTreeItem(t=null){this._currentTreeItem&&(this._currentTreeItem.classList.remove(Ri),this._currentTreeItem=null),t&&(t.classList.add(Ri),this._currentTreeItem=t)}_scrollToCurrentTreeItem(t){if(!t)return;this._l10n.pause();let e=t.parentNode;for(;e&&e!==this.container;){if(e.classList.contains("treeItem")){const t=e.firstElementChild;t?.classList.remove("treeItemsHidden")}e=e.parentNode}this._l10n.resume(),this._updateCurrentTreeItem(t),this.container.scrollTo(t.offsetLeft,t.offsetTop+-100)}}class zi extends Ui{constructor(t){super(t),this.downloadManager=t.downloadManager,this.eventBus._on("fileattachmentannotation",this.#re.bind(this))}reset(t=!1){super.reset(),this._attachments=null,t||(this._renderedCapability=Promise.withResolvers()),this._pendingDispatchEvent=!1}async _dispatchEvent(t){this._renderedCapability.resolve(),(0!==t||this._pendingDispatchEvent||(this._pendingDispatchEvent=!0,await re({target:this.eventBus,name:"annotationlayerrendered",delay:1e3}),this._pendingDispatchEvent))&&(this._pendingDispatchEvent=!1,this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:t}))}_bindLink(t,{content:e,description:i,filename:n}){i&&(t.title=i),t.onclick=()=>(this.downloadManager.openOrDownloadData(e,n),!1)}render({attachments:t,keepRenderedCapability:e=!1}){if(this._attachments&&this.reset(e),this._attachments=t||null,!t)return void this._dispatchEvent(0);const i=document.createDocumentFragment();let n=0;for(const e in t){const s=t[e],r=document.createElement("div");r.className="treeItem";const a=document.createElement("a");this._bindLink(a,s),a.textContent=this._normalizeTextContent(s.filename),r.append(a),i.append(r),n++}this._finishRendering(i,n)}#re(t){const e=this._renderedCapability.promise;e.then(()=>{if(e!==this._renderedCapability.promise)return;const i=this._attachments||Object.create(null);for(const e in i)if(t.filename===e)return;i[t.filename]=t,this.render({attachments:i,keepRenderedCapability:!0})})}}const Hi="grab-to-pan-grab";class $i{#ae=null;#oe=null;#le=null;constructor({element:t}){this.element=t,this.document=t.ownerDocument;(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}activate(){this.#ae||(this.#ae=new AbortController,this.element.addEventListener("mousedown",this.#ue.bind(this),{capture:!0,signal:this.#ae.signal}),this.element.classList.add(Hi))}deactivate(){this.#ae&&(this.#ae.abort(),this.#ae=null,this.#de(),this.element.classList.remove(Hi))}toggle(){this.#ae?this.deactivate():this.activate()}ignoreTarget(t){return t.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}#ue(t){if(0!==t.button||this.ignoreTarget(t.target))return;if(t.originalTarget)try{t.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=t.clientX,this.clientYStart=t.clientY,this.#oe=new AbortController;const e=this.#de.bind(this),i={capture:!0,signal:this.#oe.signal};this.document.addEventListener("mousemove",this.#he.bind(this),i),this.document.addEventListener("mouseup",e,i),this.#le=new AbortController,this.element.addEventListener("scroll",e,{capture:!0,signal:this.#le.signal}),G(t);const n=document.activeElement;n&&!n.contains(t.target)&&n.blur()}#he(t){if(this.#le?.abort(),this.#le=null,!(1&t.buttons))return void this.#de();const e=t.clientX-this.clientXStart,i=t.clientY-this.clientYStart;this.element.scrollTo({top:this.scrollTopStart-i,left:this.scrollLeftStart-e,behavior:"instant"}),this.overlay.parentNode||document.body.append(this.overlay)}#de(){this.#oe?.abort(),this.#oe=null,this.#le?.abort(),this.#le=null,this.overlay.remove()}}class Wi{#Qt=bt;#ce=null;constructor({container:t,eventBus:e,cursorToolOnLoad:i=bt}){this.container=t,this.eventBus=e,this.#ge(),Promise.resolve().then(()=>{this.switchTool(i)})}get activeTool(){return this.#Qt}switchTool(t){null===this.#ce&&this.#pe(t)}#pe(t,e=!1){if(t===this.#Qt)return void(null!==this.#ce&&this.eventBus.dispatch("cursortoolchanged",{source:this,tool:t,disabled:e}));const i=()=>{switch(this.#Qt){case bt:break;case wt:this._handTool.deactivate()}};switch(t){case bt:i();break;case wt:i(),this._handTool.activate();break;default:return void console.error(`switchTool: "${t}" is an unsupported value.`)}this.#Qt=t,this.eventBus.dispatch("cursortoolchanged",{source:this,tool:t,disabled:e})}#ge(){this.eventBus._on("switchcursortool",i=>{i.reset?null!==this.#ce&&(t=o.NONE,e=st,n()):this.switchTool(i.tool)});let t=o.NONE,e=st;const i=()=>{this.#ce??=this.#Qt,this.#pe(bt,!0)},n=()=>{null!==this.#ce&&t===o.NONE&&e===st&&(this.#pe(this.#ce),this.#ce=null)};this.eventBus._on("annotationeditormodechanged",({mode:e})=>{t=e,e===o.NONE?n():i()}),this.eventBus._on("presentationmodechanged",({state:t})=>{e=t,t===st?n():t===at&&i()})}get _handTool(){return $(this,"_handTool",new $i({element:this.container}))}}const Gi=["en-us","en-lr","my"],Xi={"8.5x11":"pdfjs-document-properties-page-size-name-letter","8.5x14":"pdfjs-document-properties-page-size-name-legal"},Zi={"297x420":"pdfjs-document-properties-page-size-name-a-three","210x297":"pdfjs-document-properties-page-size-name-a-four"};function Ki(t,e,i){return i[`${e?t.width:t.height}x${e?t.height:t.width}`]}class qi{#fe=null;constructor({dialog:t,fields:e,closeButton:i},n,s,r,a,o){this.dialog=t,this.fields=e,this.overlayManager=n,this.l10n=r,this._fileNameLookup=a,this._titleLookup=o,this.#me(),i.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.dialog),s._on("pagechanging",t=>{this._currentPageNumber=t.pageNumber}),s._on("rotationchanging",t=>{this._pagesRotation=t.pagesRotation})}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const t=this._currentPageNumber,e=this._pagesRotation;if(this.#fe&&t===this.#fe._currentPageNumber&&e===this.#fe._pagesRotation)return void this.#ve();const[{info:i,metadata:n,contentLength:s},r]=await Promise.all([this.pdfDocument.getMetadata(),this.pdfDocument.getPage(t)]),[a,o,l,u,d,h,c]=await Promise.all([this._fileNameLookup(),this.#be(s),this._titleLookup(),this.#we(n?.get("xmp:createdate"),i.CreationDate),this.#we(n?.get("xmp:modifydate"),i.ModDate),this.#ye(Tt(r),e),this.#Ce(i.IsLinearized)]);this.#fe=Object.freeze({fileName:a,fileSize:o,title:l,author:n?.get("dc:creator")?.join("\n")||i.Author,subject:n?.get("dc:subject")?.join("\n")||i.Subject,keywords:n?.get("pdf:keywords")||i.Keywords,creationDate:u,modificationDate:d,creator:n?.get("xmp:creatortool")||i.Creator,producer:n?.get("pdf:producer")||i.Producer,version:i.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:h,linearized:c,_currentPageNumber:t,_pagesRotation:e}),this.#ve();const{length:g}=await this.pdfDocument.getDownloadInfo();if(s===g)return;const p=Object.assign(Object.create(null),this.#fe);p.fileSize=await this.#be(g),this.#fe=Object.freeze(p),this.#ve()}async close(){this.overlayManager.close(this.dialog)}setDocument(t){this.pdfDocument&&(this.#me(),this.#ve()),t&&(this.pdfDocument=t,this._dataAvailableCapability.resolve())}#me(){this.pdfDocument=null,this.#fe=null,this._dataAvailableCapability=Promise.withResolvers(),this._currentPageNumber=1,this._pagesRotation=0}#ve(){if(!this.#fe||this.overlayManager.active===this.dialog)for(const t in this.fields){const e=this.#fe?.[t];this.fields[t].textContent=e||0===e?e:"-"}}async#be(t=0){const e=t/1024,i=e/1024;return e?this.l10n.get(i>=1?"pdfjs-document-properties-size-mb":"pdfjs-document-properties-size-kb",{mb:i,kb:e,b:t}):void 0}async#ye(t,e){if(!t)return;e%180!=0&&(t={width:t.height,height:t.width});const i=Mt(t),n=Gi.includes(this.l10n.getLanguage());let s={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100},r={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10},a=Ki(s,i,Xi)||Ki(r,i,Zi);if(!(a||Number.isInteger(r.width)&&Number.isInteger(r.height))){const e={width:25.4*t.width,height:25.4*t.height},n={width:Math.round(r.width),height:Math.round(r.height)};Math.abs(e.width-n.width)<.1&&Math.abs(e.height-n.height)<.1&&(a=Ki(n,i,Zi),a&&(s={width:Math.round(n.width/25.4*100)/100,height:Math.round(n.height/25.4*100)/100},r=n))}const[{width:o,height:l},u,d,h]=await Promise.all([n?s:r,this.l10n.get(n?"pdfjs-document-properties-page-size-unit-inches":"pdfjs-document-properties-page-size-unit-millimeters"),a&&this.l10n.get(a),this.l10n.get(i?"pdfjs-document-properties-page-size-orientation-portrait":"pdfjs-document-properties-page-size-orientation-landscape")]);return this.l10n.get(d?"pdfjs-document-properties-page-size-dimension-name-string":"pdfjs-document-properties-page-size-dimension-string",{width:o,height:l,unit:u,name:d,orientation:h})}async#we(t,e){const i=Date.parse(t)||O.toDateObject(e);return i?this.l10n.get("pdfjs-document-properties-date-time-string",{dateObj:i.valueOf()}):void 0}#Ce(t){return this.l10n.get(t?"pdfjs-document-properties-linearized-yes":"pdfjs-document-properties-linearized-no")}}n(6573),n(8100),n(7936);const Yi=0,Ji=1,Qi=2,tn=3,en=4,nn=5,sn=6,rn=7;function an(t){return function(t){return t<11904}(t)?function(t){return!(65408&t)}(t)?function(t){return 32===t||9===t||13===t||10===t}(t)?Yi:function(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function(t){return t>=48&&t<=57}(t)||95===t?Ji:Qi:function(t){return 3584==(65408&t)}(t)?rn:160===t?Yi:Ji:function(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t)?tn:function(t){return t>=12448&&t<=12543}(t)?en:function(t){return t>=12352&&t<=12447}(t)?nn:function(t){return t>=65376&&t<=65439}(t)?sn:Ji}let on;const ln=0,un=1,dn=2,hn=3,cn={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},gn=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let pn;const fn=/\p{M}+/gu,mn=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,vn=/([^\p{M}])\p{M}*$/u,bn=/^\p{M}*([^\p{M}])/u,wn=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,yn=new Map,Cn=new Map;let En=null,An=null;function xn(t){const e=[];let i;for(;null!==(i=wn.exec(t));){let{index:t}=i;for(const n of i[0]){let i=yn.get(n);i||(i=n.normalize("NFD").length,yn.set(n,i)),e.push([i,t++])}}const n=e.length>0;let s;if(!n&&En)s=En;else if(n&&An)s=An;else{const t=Object.keys(cn).join(""),e=(on||=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦",on);s=new RegExp([`[${t}]`,`[${e}]`,`${"(?:゙|゚)"}\\n`,"\\p{M}+(?:-\\n)?",`${"\\p{Ll}-\\n(?=\\p{Ll})|\\p{Lu}-\\n(?=\\p{L})"}`,"\\S-\\n",`${"(?:\\p{Ideographic}|[぀-ヿ])"}\\n`,"\\n",n?"[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]":"\\u0000"].map(t=>`(${t})`).join("|"),"gum"),n?An=s:En=s}const r=[];for(;null!==(i=fn.exec(t));)r.push([i[0].length,i.index]);let a=t.normalize("NFD");const o=[0,0];let l=0,u=0,d=0,h=0,c=0,g=!1;a=a.replace(s,(t,i,n,s,a,p,f,m,v,b,w)=>{if(w-=h,i){const t=cn[i],e=t.length;for(let t=1;t<e;t++)o.push(w-d+t,d-t);return d-=e-1,t}if(n){let t=Cn.get(n);t||(t=n.normalize("NFKC"),Cn.set(n,t));const e=t.length;for(let t=1;t<e;t++)o.push(w-d+t,d-t);return d-=e-1,t}if(s)return g=!0,w+c===r[l]?.[1]?++l:(o.push(w-1-d+1,d-1),d-=1,h+=1),o.push(w-d+1,d),h+=1,c+=1,s.charAt(0);if(a){const t=a.endsWith("\n"),e=t?a.length-2:a.length;g=!0;let i=e;w+c===r[l]?.[1]&&(i-=r[l][0],++l);for(let t=1;t<=i;t++)o.push(w-1-d+t,d-t);return d-=i,h+=i,t?(w+=e-1,o.push(w-d+1,1+d),d+=1,h+=1,c+=1,a.slice(0,e)):a}if(p){const t=p.length-2;return o.push(w-d+t,1+d),d+=1,h+=1,c+=1,p.slice(0,-2)}if(f)return h+=1,c+=1,f.slice(0,-1);if(m){const t=m.length-1;return o.push(w-d+t,d),h+=1,c+=1,m.slice(0,-1)}if(v)return o.push(w-d+1,d-1),d-=1,h+=1,c+=1," ";if(w+c===e[u]?.[1]){const t=e[u][0]-1;++u;for(let e=1;e<=t;e++)o.push(w-(d-e),d-e);d-=t,h+=t}return b}),o.push(a.length,d);const p=new Uint32Array(o.length>>1),f=new Int32Array(o.length>>1);for(let t=0,e=o.length;t<e;t+=2)p[t>>1]=o[t],f[t>>1]=o[t+1];return[a,[p,f],g]}function Pn(t,e,i){if(!t)return[e,i];const[n,s]=t,r=e,a=e+i-1;let o=St(n,t=>t>=r);n[o]>r&&--o;let l=St(n,t=>t>=a,o);n[l]>a&&--l;const u=r+s[o];return[u,a+s[l]+1-u]}class Sn{#Ee=null;#Ae=!0;#xe=0;constructor({linkService:t,eventBus:e,updateMatchesCountOnProgress:i=!0}){this._linkService=t,this._eventBus=e,this.#Ae=i,this.onIsPageVisible=null,this.#me(),e._on("find",this.#Pe.bind(this)),e._on("findbarclose",this.#Se.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#Ee}setDocument(t){this._pdfDocument&&this.#me(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}#Pe(t){if(!t)return;const e=this._pdfDocument,{type:i}=t;(null===this.#Ee||this.#_e(t))&&(this._dirtyMatch=!0),this.#Ee=t,"highlightallchange"!==i&&this.#_t(hn),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||e&&this._pdfDocument!==e)return;this.#Fe();const t=!this._highlightMatches,n=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#Te():"again"===i?(this.#Te(),t&&this.#Ee.highlightAll&&this.#De()):"highlightallchange"===i?(n?this.#Te():this._highlightMatches=!0,this.#De()):this.#Te():this._findTimeout=setTimeout(()=>{this.#Te(),this._findTimeout=null},250)})}scrollMatchIntoView({element:t=null,selectedLeft:e=0,pageIndex:i=-1,matchIndex:n=-1}){if(!this._scrollMatches||!t)return;if(-1===n||n!==this._selected.matchIdx)return;if(-1===i||i!==this._selected.pageIdx)return;this._scrollMatches=!1;Ct(t,{top:-50,left:e+-400},!0)}#me(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#xe=0,this.#Ee=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#Be(){const{query:t}=this.#Ee;return"string"==typeof t?(t!==this._rawQuery&&(this._rawQuery=t,[this._normalizedQuery]=xn(t)),this._normalizedQuery):(t||[]).filter(t=>!!t).map(t=>xn(t)[0])}#_e(t){const e=t.query,i=this.#Ee.query,n=typeof e;if(n!==typeof i)return!0;if("string"===n){if(e!==i)return!0}else if(JSON.stringify(e)!==JSON.stringify(i))return!0;switch(t.type){case"again":const t=this._selected.pageIdx+1,e=this._linkService;return t>=1&&t<=e.pagesCount&&t!==e.page&&!(this.onIsPageVisible?.(t)??1);case"highlightallchange":return!1}return!0}#Ie(t,e,i){let n=t.slice(0,e).match(vn);if(n){const i=t.charCodeAt(e),s=n[1].charCodeAt(0);if(an(i)===an(s))return!1}if(n=t.slice(e+i).match(bn),n){const s=t.charCodeAt(e+i-1),r=n[1].charCodeAt(0);if(an(s)===an(r))return!1}return!0}#Le(t,e){const{matchDiacritics:i}=this.#Ee;let n=!1;const s="[ ]*";return(t=t.replaceAll(mn,(t,s,r,a,o,l)=>s?`[ ]*\\${s}[ ]*`:r?`[ ]*${r}[ ]*`:a?"[ ]+":i?o||l:o?gn.has(o.charCodeAt(0))?o:"":e?(n=!0,`${l}\\p{M}*`):l)).endsWith(s)&&(t=t.slice(0,t.length-4)),i&&e&&(pn||=String.fromCharCode(...gn),n=!0,t=`${t}(?=[${pn}]|[^\\p{M}]|$)`),[n,t]}#ke(t){if(!this.#Ee)return;const e=this.#Be;if(0===e.length)return;const i=this._pageContents[t],n=this.match(e,i,t),s=this._pageMatches[t]=[],r=this._pageMatchesLength[t]=[],a=this._pageDiffs[t];n?.forEach(({index:t,length:e})=>{const[i,n]=Pn(a,t,e);n&&(s.push(i),r.push(n))}),this.#Ee.highlightAll&&this.#Me(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this.#Ne());const o=s.length;this._matchesCountTotal+=o,this.#Ae?o>0&&this.#Oe():++this.#xe===this._linkService.pagesCount&&this.#Oe()}match(t,e,i){const n=this._hasDiacritics[i];let s=!1;if("string"==typeof t?[s,t]=this.#Le(t,n):t=t.sort().reverse().map(t=>{const[e,i]=this.#Le(t,n);return s||=e,`(${i})`}).join("|"),!t)return;const{caseSensitive:r,entireWord:a}=this.#Ee;t=new RegExp(t,`g${s?"u":""}${r?"":"i"}`);const o=[];let l;for(;null!==(l=t.exec(e));)a&&!this.#Ie(e,l.index,l[0].length)||o.push({index:l.index,length:l[0].length});return o}#Fe(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve();const e={disableNormalization:!0},i=this._pdfDocument;for(let n=0,s=this._linkService.pagesCount;n<s;n++){const{promise:s,resolve:r}=Promise.withResolvers();this._extractTextPromises[n]=s,t=t.then(async()=>{i===this._pdfDocument?await i.getPage(n+1).then(t=>t.getTextContent(e)).then(t=>{const e=[];for(const i of t.items)e.push(i.str),i.hasEOL&&e.push("\n");[this._pageContents[n],this._pageDiffs[n],this._hasDiacritics[n]]=xn(e.join("")),r()},t=>{console.error(`Unable to get text content for page ${n+1}`,t),this._pageContents[n]="",this._pageDiffs[n]=null,this._hasDiacritics[n]=!1,r()}):r()})}}#Me(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}#De(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#Te(){const t=this.#Ee.findPrevious,e=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#xe=0,this._matchesCountTotal=0,this.#De();for(let t=0;t<i;t++)this._pendingFindMatches.has(t)||(this._pendingFindMatches.add(t),this._extractTextPromises[t].then(()=>{this._pendingFindMatches.delete(t),this.#ke(t)}))}if(0===this.#Be.length)return void this.#_t(ln);if(this._resumePageIdx)return;const n=this._offset;if(this._pagesToSearch=i,null!==n.matchIdx){const e=this._pageMatches[n.pageIdx].length;if(!t&&n.matchIdx+1<e||t&&n.matchIdx>0)return n.matchIdx=t?n.matchIdx-1:n.matchIdx+1,void this.#je(!0);this.#Ve(t)}this.#Ne()}#Re(t){const e=this._offset,i=t.length,n=this.#Ee.findPrevious;return i?(e.matchIdx=n?i-1:0,this.#je(!0),!0):(this.#Ve(n),!!(e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0))&&(this.#je(!1),!0))}#Ne(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let t=null;do{const e=this._offset.pageIdx;if(t=this._pageMatches[e],!t){this._resumePageIdx=e;break}}while(!this.#Re(t))}#Ve(t){const e=this._offset,i=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=i||e.pageIdx<0)&&(e.pageIdx=t?i-1:0,e.wrapped=!0)}#je(t=!1){let e=un;const i=this._offset.wrapped;if(this._offset.wrapped=!1,t){const t=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=i?dn:ln,-1!==t&&t!==this._selected.pageIdx&&this.#Me(t)}this.#_t(e,this.#Ee.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#Me(this._selected.pageIdx))}#Se(t){const e=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||e&&this._pdfDocument!==e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#_t(ln),this._highlightMatches=!1,this.#De())})}#Ue(){const{pageIdx:t,matchIdx:e}=this._selected;let i=0,n=this._matchesCountTotal;if(-1!==e){for(let e=0;e<t;e++)i+=this._pageMatches[e]?.length||0;i+=e+1}return(i<1||i>n)&&(i=n=0),{current:i,total:n}}#Oe(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#Ue()})}#_t(t,e=!1){(this.#Ae||this.#xe===this._linkService.pagesCount&&t!==hn)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:e,entireWord:this.#Ee?.entireWord??null,matchesCount:this.#Ue(),rawQuery:this.#Ee?.query??null})}}class _n{#Lt;#ze=new ResizeObserver(this.#He.bind(this));constructor(t,e,i){this.opened=!1,this.bar=t.bar,this.toggleButton=t.toggleButton,this.findField=t.findField,this.highlightAll=t.highlightAllCheckbox,this.caseSensitive=t.caseSensitiveCheckbox,this.matchDiacritics=t.matchDiacriticsCheckbox,this.entireWord=t.entireWordCheckbox,this.findMsg=t.findMsg,this.findResultsCount=t.findResultsCount,this.findPreviousButton=t.findPreviousButton,this.findNextButton=t.findNextButton,this.eventBus=i,this.#Lt=e;const n=new Map([[this.highlightAll,"highlightallchange"],[this.caseSensitive,"casesensitivitychange"],[this.entireWord,"entirewordchange"],[this.matchDiacritics,"diacriticmatchingchange"]]);this.toggleButton.addEventListener("click",()=>{this.toggle()}),this.findField.addEventListener("input",()=>{this.dispatchEvent("")}),this.bar.addEventListener("keydown",({keyCode:t,shiftKey:e,target:i})=>{switch(t){case 13:i===this.findField?this.dispatchEvent("again",e):n.has(i)&&(i.checked=!i.checked,this.dispatchEvent(n.get(i)));break;case 27:this.close()}}),this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",!1)});for(const[t,e]of n)t.addEventListener("click",()=>{this.dispatchEvent(e)})}reset(){this.updateUIState()}dispatchEvent(t,e=!1){this.eventBus.dispatch("find",{source:this,type:t,query:this.findField.value,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:e,matchDiacritics:this.matchDiacritics.checked})}updateUIState(t,e,i){const{findField:n,findMsg:s}=this;let r="",a="";switch(t){case ln:break;case hn:a="pending";break;case un:r="pdfjs-find-not-found",a="notFound";break;case dn:r=e?"pdfjs-find-reached-top":"pdfjs-find-reached-bottom"}n.setAttribute("data-status",a),n.setAttribute("aria-invalid",t===un),s.setAttribute("data-status",a),r?s.setAttribute("data-l10n-id",r):(s.removeAttribute("data-l10n-id"),s.textContent=""),this.updateResultsCount(i)}updateResultsCount({current:t=0,total:e=0}={}){const{findResultsCount:i}=this;if(e>0){const n=1e3;i.setAttribute("data-l10n-id",e>n?"pdfjs-find-match-count-limit":"pdfjs-find-match-count"),i.setAttribute("data-l10n-args",JSON.stringify({limit:n,current:t,total:e}))}else i.removeAttribute("data-l10n-id"),i.textContent=""}open(){this.opened||(this.#ze.observe(this.#Lt),this.#ze.observe(this.bar),this.opened=!0,zt(this.toggleButton,!0,this.bar)),this.findField.select(),this.findField.focus()}close(){this.opened&&(this.#ze.disconnect(),this.opened=!1,zt(this.toggleButton,!1,this.bar),this.eventBus.dispatch("findbarclose",{source:this}))}toggle(){this.opened?this.close():this.open()}#He(){const{bar:t}=this;t.classList.remove("wrapContainers");t.clientHeight>t.firstElementChild.clientHeight&&t.classList.add("wrapContainers")}}function Fn(){return document.location.hash}class Tn{#$e=null;constructor({linkService:t,eventBus:e}){this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",t=>{this._isPagesLoaded=!!t.pagesCount},{once:!0})})}initialize({fingerprint:t,resetHistory:e=!1,updateUrl:i=!1}){if(!t||"string"!=typeof t)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const n=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===i,this._initialized=!0,this.#We();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=Fn(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#Ge(s,!0)||e){const{hash:t,page:i,rotation:s}=this.#Xe(!0);return!t||n||e?void this.#Ze(null,!0):void this.#Ze({hash:t,page:i,rotation:s},!0)}const r=s.destination;this.#Ke(r,s.uid,!0),void 0!==r.rotation&&(this._initialRotation=r.rotation),r.dest?(this._initialBookmark=JSON.stringify(r.dest),this._destination.page=null):r.hash?this._initialBookmark=r.hash:r.page&&(this._initialBookmark=`page=${r.page}`)}reset(){this._initialized&&(this.#qe(),this._initialized=!1,this.#Ye()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:e,pageNumber:i}){if(!this._initialized)return;if(t&&"string"!=typeof t)return void console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);if(!Array.isArray(e))return void console.error(`PDFHistory.push: "${e}" is not a valid explicitDest parameter.`);if(!this.#Je(i)&&(null!==i||this._destination))return void console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);const n=t||JSON.stringify(e);if(!n)return;let s=!1;if(this._destination&&(function(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;if(t===e)return!0;if(At(t).get("nameddest")===e)return!0;return!1}(this._destination.hash,n)||function(t,e){function i(t,e){if(typeof t!=typeof e)return!1;if(Array.isArray(t)||Array.isArray(e))return!1;if(null!==t&&"object"==typeof t&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!i(t[n],e[n]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let n=0,s=t.length;n<s;n++)if(!i(t[n],e[n]))return!1;return!0}(this._destination.dest,e))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#Ze({dest:e,hash:n,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(t){this._initialized&&(this.#Je(t)?this._destination?.page!==t&&(this._popStateInProgress||(this.#Ze({dest:null,hash:`page=${t}`,page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))):console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this.#Qe()}back(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this.#Ge(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this.#Ge(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#Ze(t,e=!1){const i=e||!this._destination,n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};let s;if(this.#Ke(t,n.uid),this._updateUrl&&t?.hash){const{href:e,protocol:i}=document.location;"file:"!==i&&(s=q(e,t.hash))}i?window.history.replaceState(n,"",s):window.history.pushState(n,"",s)}#Qe(t=!1){if(!this._position)return;let e=this._position;if(t&&(e=Object.assign(Object.create(null),this._position),e.temporary=!0),!this._destination)return void this.#Ze(e);if(this._destination.temporary)return void this.#Ze(e,!0);if(this._destination.hash===e.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this.#Ze(e,i)}#Je(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}#Ge(t,e=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!e)return!1;{if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;const[e]=performance.getEntriesByType("navigation");if("reload"!==e?.type)return!1}}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"==typeof t.destination)}#Ke(t,e,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&t?.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0}#Xe(t=!1){const e=unescape(Fn()).substring(1),i=At(e),n=i.get("nameddest")||"";let s=0|i.get("page");return(!this.#Je(s)||t&&n.length>0)&&(s=null),{hash:e,page:s,rotation:this.linkService.rotation}}#ti({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#Qe(!0),this._updateViewareaTimeout=null},1e3))}#ei({state:t}){const e=Fn(),i=this._currentHash!==e;if(this._currentHash=e,!t){this._uid++;const{hash:t,page:e,rotation:i}=this.#Xe();return void this.#Ze({hash:t,page:e,rotation:i},!0)}if(!this.#Ge(t))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,re({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const n=t.destination;this.#Ke(n,t.uid,!0),It(n.rotation)&&(this.linkService.rotation=n.rotation),n.dest?this.linkService.goToDestination(n.dest):n.hash?this.linkService.setHash(n.hash):n.page&&(this.linkService.page=n.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#qe(){this._destination&&!this._destination.temporary||this.#Qe()}#We(){if(this.#$e)return;this.#$e=new AbortController;const{signal:t}=this.#$e;this.eventBus._on("updateviewarea",this.#ti.bind(this),{signal:t}),window.addEventListener("popstate",this.#ei.bind(this),{signal:t}),window.addEventListener("pagehide",this.#qe.bind(this),{signal:t})}#Ye(){this.#$e?.abort(),this.#$e=null}}class Dn extends Ui{constructor(t){super(t),this.eventBus._on("optionalcontentconfigchanged",t=>{this.#ii(t.promise)}),this.eventBus._on("resetlayers",()=>{this.#ii()}),this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset(),this._optionalContentConfig=null,this._optionalContentVisibility?.clear(),this._optionalContentVisibility=null}_dispatchEvent(t){this.eventBus.dispatch("layersloaded",{source:this,layersCount:t})}_bindLink(t,{groupId:e,input:i}){const n=()=>{const t=i.checked;this._optionalContentConfig.setVisibility(e,t);const n=this._optionalContentVisibility.get(e);n&&(n.visible=t),this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};t.onclick=e=>e.target===i?(n(),!0):e.target!==t||(i.checked=!i.checked,n(),!1)}_setNestedName(t,{name:e=null}){"string"!=typeof e?(t.setAttribute("data-l10n-id","pdfjs-additional-layers"),t.style.fontStyle="italic",this._l10n.translateOnce(t)):t.textContent=this._normalizeTextContent(e)}_addToggleButton(t,{name:e=null}){super._addToggleButton(t,null===e)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render({optionalContentConfig:t,pdfDocument:e}){this._optionalContentConfig&&this.reset(),this._optionalContentConfig=t||null,this._pdfDocument=e||null;const i=t?.getOrder();if(!i)return void this._dispatchEvent(0);this._optionalContentVisibility=new Map;const n=document.createDocumentFragment(),s=[{parent:n,groups:i}];let r=0,a=!1;for(;s.length>0;){const e=s.shift();for(const i of e.groups){const n=document.createElement("div");n.className="treeItem";const o=document.createElement("a");if(n.append(o),"object"==typeof i){a=!0,this._addToggleButton(n,i),this._setNestedName(o,i);const t=document.createElement("div");t.className="treeItems",n.append(t),s.push({parent:t,groups:i.order})}else{const e=t.getGroup(i),n=document.createElement("input");this._bindLink(o,{groupId:i,input:n}),n.type="checkbox",n.checked=e.visible,this._optionalContentVisibility.set(i,{input:n,visible:n.checked});const s=document.createElement("label");s.textContent=this._normalizeTextContent(e.name),s.append(n),o.append(s),r++}e.parent.append(n)}}this._finishRendering(n,r,a)}async#ii(t=null){if(!this._optionalContentConfig)return;const e=this._pdfDocument,i=await(t||e.getOptionalContentConfig({intent:"display"}));if(e===this._pdfDocument)if(t)for(const[t,e]of this._optionalContentVisibility){const n=i.getGroup(t);n&&e.visible!==n.visible&&(e.input.checked=e.visible=!e.visible)}else this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(i)}),this.render({optionalContentConfig:i,pdfDocument:this._pdfDocument})}}class Bn extends Ui{constructor(t){super(t),this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this)),this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this)),this.eventBus._on("pagechanging",t=>{this._currentPageNumber=t.pageNumber}),this.eventBus._on("pagesloaded",t=>{this._isPagesLoaded=!!t.pagesCount,this._currentOutlineItemCapability?.resolve(this._isPagesLoaded)}),this.eventBus._on("sidebarviewchanged",t=>{this._sidebarView=t.view})}reset(){super.reset(),this._outline=null,this._pageNumberToDestHashCapability=null,this._currentPageNumber=1,this._isPagesLoaded=null,this._currentOutlineItemCapability?.resolve(!1),this._currentOutlineItemCapability=null}_dispatchEvent(t){this._currentOutlineItemCapability=Promise.withResolvers(),0===t||this._pdfDocument?.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):null!==this._isPagesLoaded&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded),this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:t,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(t,{url:e,newWindow:i,action:n,attachment:s,dest:r,setOCGState:a}){const{linkService:o}=this;if(e)o.addLinkAttributes(t,e,i);else{if(n)return t.href=o.getAnchorUrl(""),void(t.onclick=()=>(o.executeNamedAction(n),!1));if(s)return t.href=o.getAnchorUrl(""),void(t.onclick=()=>(this.downloadManager.openOrDownloadData(s.content,s.filename),!1));if(a)return t.href=o.getAnchorUrl(""),void(t.onclick=()=>(o.executeSetOCGState(a),!1));t.href=o.getDestinationHash(r),t.onclick=t=>(this._updateCurrentTreeItem(t.target.parentNode),r&&o.goToDestination(r),!1)}}_setStyles(t,{bold:e,italic:i}){e&&(t.style.fontWeight="bold"),i&&(t.style.fontStyle="italic")}_addToggleButton(t,{count:e,items:i}){let n=!1;if(e<0){let t=i.length;if(t>0){const e=[...i];for(;e.length>0;){const{count:i,items:n}=e.shift();i>0&&n.length>0&&(t+=n.length,e.push(...n))}}Math.abs(e)===t&&(n=!0)}super._addToggleButton(t,n)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render({outline:t,pdfDocument:e}){if(this._outline&&this.reset(),this._outline=t||null,this._pdfDocument=e||null,!t)return void this._dispatchEvent(0);const i=document.createDocumentFragment(),n=[{parent:i,items:t}];let s=0,r=!1;for(;n.length>0;){const t=n.shift();for(const e of t.items){const i=document.createElement("div");i.className="treeItem";const a=document.createElement("a");if(this._bindLink(a,e),this._setStyles(a,e),a.textContent=this._normalizeTextContent(e.title),i.append(a),e.items.length>0){r=!0,this._addToggleButton(i,e);const t=document.createElement("div");t.className="treeItems",i.append(t),n.push({parent:t,items:e.items})}t.parent.append(i),s++}}this._finishRendering(i,s,r)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const t=await this._getPageNumberToDestHash(this._pdfDocument);if(t&&(this._updateCurrentTreeItem(null),this._sidebarView===dt))for(let e=this._currentPageNumber;e>0;e--){const i=t.get(e);if(!i)continue;const n=this.container.querySelector(`a[href="${i}"]`);if(n){this._scrollToCurrentTreeItem(n.parentNode);break}}}async _getPageNumberToDestHash(t){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=Promise.withResolvers();const e=new Map,i=new Map,n=[{nesting:0,items:this._outline}];for(;n.length>0;){const s=n.shift(),r=s.nesting;for(const{dest:a,items:o}of s.items){let s,l;if("string"==typeof a){if(s=await t.getDestination(a),t!==this._pdfDocument)return null}else s=a;if(Array.isArray(s)){const[n]=s;if(n&&"object"==typeof n?l=t.cachedPageNumber(n):Number.isInteger(n)&&(l=n+1),Number.isInteger(l)&&(!e.has(l)||r>i.get(l))){const t=this.linkService.getDestinationHash(a);e.set(l,t),i.set(l,r)}}o.length>0&&n.push({nesting:r+1,items:o})}}return this._pageNumberToDestHashCapability.resolve(e.size>0?e:null),this._pageNumberToDestHashCapability.promise}}const In="pdfPresentationMode",Ln="pdfPresentationModeControls",kn=Math.PI/6;class Mn{#Ee=nt;#ni=null;#si=null;#ri=null;constructor({container:t,pdfViewer:e,eventBus:i}){this.container=t,this.pdfViewer=e,this.eventBus=i,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}async request(){const{container:t,pdfViewer:e}=this;if(this.active||!e.pagesCount||!t.requestFullscreen)return!1;this.#ai(),this.#oi(rt);const i=t.requestFullscreen();this.#ni={pageNumber:e.currentPageNumber,scaleValue:e.currentScaleValue,scrollMode:e.scrollMode,spreadMode:null,annotationEditorMode:null},e.spreadMode===vt.NONE||e.pageViewsReady&&e.hasEqualPageSizes||(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),this.#ni.spreadMode=e.spreadMode),e.annotationEditorMode!==o.DISABLE&&(this.#ni.annotationEditorMode=e.annotationEditorMode);try{return await i,e.focus(),!0}catch{this.#li(),this.#oi(st)}return!1}get active(){return this.#Ee===rt||this.#Ee===at}#ui(t){if(!this.active)return;t.preventDefault();const e=function(t){const e=t.deltaMode;let i=Bt(t);return e===WheelEvent.DOM_DELTA_PIXEL?i/=900:e===WheelEvent.DOM_DELTA_LINE&&(i/=30),i}(t),i=Date.now(),n=this.mouseScrollTimeStamp;if(!(i>n&&i-n<50)&&((this.mouseScrollDelta>0&&e<0||this.mouseScrollDelta<0&&e>0)&&this.#di(),this.mouseScrollDelta+=e,Math.abs(this.mouseScrollDelta)>=.1)){const t=this.mouseScrollDelta;this.#di();(t>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=i)}}#oi(t){this.#Ee=t,this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})}#hi(){this.#oi(at),this.container.classList.add(In),setTimeout(()=>{this.pdfViewer.scrollMode=mt.PAGE,null!==this.#ni.spreadMode&&(this.pdfViewer.spreadMode=vt.NONE),this.pdfViewer.currentPageNumber=this.#ni.pageNumber,this.pdfViewer.currentScaleValue="page-fit",null!==this.#ni.annotationEditorMode&&(this.pdfViewer.annotationEditorMode={mode:o.NONE})},0),this.#ci(),this.#gi(),this.contextMenuOpen=!1,document.getSelection().empty()}#pi(){const t=this.pdfViewer.currentPageNumber;this.container.classList.remove(In),setTimeout(()=>{this.#li(),this.#oi(st),this.pdfViewer.scrollMode=this.#ni.scrollMode,null!==this.#ni.spreadMode&&(this.pdfViewer.spreadMode=this.#ni.spreadMode),this.pdfViewer.currentScaleValue=this.#ni.scaleValue,this.pdfViewer.currentPageNumber=t,null!==this.#ni.annotationEditorMode&&(this.pdfViewer.annotationEditorMode={mode:this.#ni.annotationEditorMode}),this.#ni=null},0),this.#fi(),this.#mi(),this.#di(),this.contextMenuOpen=!1}#vi(t){if(this.contextMenuOpen)return this.contextMenuOpen=!1,void t.preventDefault();0===t.button&&(t.target.href&&t.target.parentNode?.hasAttribute("data-internal-link")||(t.preventDefault(),t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))}#bi(){this.contextMenuOpen=!0}#gi(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(Ln),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(Ln),delete this.controlsTimeout},3e3)}#mi(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(Ln),delete this.controlsTimeout)}#di(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}#wi(t){if(this.active)if(t.touches.length>1)this.touchSwipeState=null;else switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=t.touches[0].pageX,this.touchSwipeState.endY=t.touches[0].pageY,t.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;let e=0;const i=this.touchSwipeState.endX-this.touchSwipeState.startX,n=this.touchSwipeState.endY-this.touchSwipeState.startY,s=Math.abs(Math.atan2(n,i));Math.abs(i)>50&&(s<=kn||s>=Math.PI-kn)?e=i:Math.abs(n)>50&&Math.abs(s-Math.PI/2)<=kn&&(e=n),e>0?this.pdfViewer.previousPage():e<0&&this.pdfViewer.nextPage()}}#ci(){if(this.#ri)return;this.#ri=new AbortController;const{signal:t}=this.#ri,e=this.#wi.bind(this);window.addEventListener("mousemove",this.#gi.bind(this),{signal:t}),window.addEventListener("mousedown",this.#vi.bind(this),{signal:t}),window.addEventListener("wheel",this.#ui.bind(this),{passive:!1,signal:t}),window.addEventListener("keydown",this.#di.bind(this),{signal:t}),window.addEventListener("contextmenu",this.#bi.bind(this),{signal:t}),window.addEventListener("touchstart",e,{signal:t}),window.addEventListener("touchmove",e,{signal:t}),window.addEventListener("touchend",e,{signal:t})}#fi(){this.#ri?.abort(),this.#ri=null}#ai(){this.#si||(this.#si=new AbortController,window.addEventListener("fullscreenchange",()=>{document.fullscreenElement?this.#hi():this.#pi()},{signal:this.#si.signal}))}#li(){this.#si?.abort(),this.#si=null}}n(1148);class Nn{constructor({pdfPage:t,annotationStorage:e=null,linkService:i,xfaHtml:n=null}){this.pdfPage=t,this.annotationStorage=e,this.linkService=i,this.xfaHtml=n,this.div=null,this._cancelled=!1}async render({viewport:t,intent:e="display"}){if("print"===e){const i={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div=document.createElement("div"),i.div=this.div,tt.render(i)}const i=await this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};const n={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div?tt.update(n):(this.div=document.createElement("div"),n.div=this.div,tt.render(n))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}let On=null,jn=null,Vn=null,Rn={};class Un{constructor({pdfDocument:t,pagesOverview:e,printContainer:i,printResolution:n,printAnnotationStoragePromise:s=null}){this.pdfDocument=t,this.pagesOverview=e,this.printContainer=i,this._printResolution=n||150,this._optionalContentConfigPromise=t.getOptionalContentConfig({intent:"print"}),this._printAnnotationStoragePromise=s||Promise.resolve(),this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const t=document.querySelector("body");t.setAttribute("data-pdfjsprinting",!0);const{width:e,height:i}=this.pagesOverview[0];this.pagesOverview.every(t=>t.width===e&&t.height===i)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${e}pt ${i}pt;}`,t.append(this.pageStyleSheet)}destroy(){if(On!==this)return;this.printContainer.textContent="";document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,On=null,Xn().then(function(){Vn.closeIfActive(jn)})}renderPages(){if(this.pdfDocument.isPureXfa)return function(t,e){const i=e.allXfaHtml,n=new ie,s=Math.round(100*R.PDF_TO_CSS_UNITS)/100;for(const r of i.children){const i=document.createElement("div");i.className="xfaPrintedPage",t.append(i);const a=new Nn({pdfPage:null,annotationStorage:e.annotationStorage,linkService:n,xfaHtml:r}),o=A(r,{scale:s});a.render({viewport:o,intent:"print"}),i.append(a.div)}}(this.printContainer,this.pdfDocument),Promise.resolve();const t=this.pagesOverview.length,e=(i,n)=>{if(this.throwIfInactive(),++this.currentPage>=t)return Wn(t,t),void i();const s=this.currentPage;Wn(s,t),function(t,e,i,n,s,r,a){const o=On.scratchCanvas,l=s/R.PDF;o.width=Math.floor(n.width*l),o.height=Math.floor(n.height*l);const u=o.getContext("2d");return u.save(),u.fillStyle="rgb(255, 255, 255)",u.fillRect(0,0,o.width,o.height),u.restore(),Promise.all([e.getPage(i),a]).then(function([t,e]){const i={canvasContext:u,transform:[l,0,0,l,0,0],viewport:t.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:d.ENABLE_STORAGE,optionalContentConfigPromise:r,printAnnotationStorage:e};return t.render(i).promise.catch(t=>{throw t instanceof U||console.error(t),t})})}(0,this.pdfDocument,s+1,this.pagesOverview[s],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){e(i,n)},n)};return new Promise(e)}useRenderedPage(){this.throwIfInactive();const t=document.createElement("img");this.scratchCanvas.toBlob(e=>{t.src=URL.createObjectURL(e)});const e=document.createElement("div");e.className="printedPage",e.append(t),this.printContainer.append(e);const{promise:i,resolve:n,reject:s}=Promise.withResolvers();return t.onload=n,t.onerror=s,i.catch(()=>{}).then(()=>{URL.revokeObjectURL(t.src)}),i}performPrint(){return this.throwIfInactive(),new Promise(t=>{setTimeout(()=>{this.active?(zn.call(window),setTimeout(t,20)):t()},0)})}get active(){return this===On}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const zn=window.print;function Hn(t){const e=new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:"custom"});window.dispatchEvent(e)}function $n(){On&&(On.destroy(),Hn("afterprint"))}function Wn(t,e){jn||=document.getElementById("printServiceDialog");const i=Math.round(100*t/e),n=jn.querySelector("progress"),s=jn.querySelector(".relative-progress");n.value=i,s.setAttribute("data-l10n-args",JSON.stringify({progress:i}))}if(window.print=function(){if(On)console.warn("Ignored window.print() because of a pending print job.");else{Xn().then(function(){On&&Vn.open(jn)});try{Hn("beforeprint")}finally{if(On){const t=On;On.renderPages().then(()=>t.performPrint()).catch(()=>{}).then(()=>{t.active&&$n()})}else console.error("Expected print service to be initialized."),Xn().then(function(){Vn.closeIfActive(jn)})}}},window.addEventListener("keydown",function(t){80!==t.keyCode||!t.ctrlKey&&!t.metaKey||t.altKey||t.shiftKey&&!window.chrome&&!window.opera||(window.print(),t.preventDefault(),t.stopImmediatePropagation())},!0),"onbeforeprint"in window){const t=function(t){"custom"!==t.detail&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",t),window.addEventListener("afterprint",t)}let Gn;function Xn(){if(!Gn){if(Vn=Rn.overlayManager,!Vn)throw new Error("The overlay manager has not yet been initialized.");jn||=document.getElementById("printServiceDialog"),Gn=Vn.register(jn,!0),document.getElementById("printCancel").onclick=$n,jn.addEventListener("close",$n)}return Gn}class Zn{static initGlobals(t){Rn=t}static get supportsPrinting(){return $(this,"supportsPrinting",!0)}static createPrintService(t){if(On)throw new Error("The print service is created and active.");return On=new Un(t)}}class Kn{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(t,e,i,n=!1,s=!1){const r=t.views,a=r.length;if(0===a)return null;for(let t=0;t<a;t++){const e=r[t].view;if(!this.isViewFinished(e))return e}if(!s)for(let t=0;t<a;t++){const{detailView:e}=r[t].view;if(e&&!this.isViewFinished(e))return e}const o=t.first.id,l=t.last.id;if(l-o+1>a){const n=t.ids;for(let t=1,s=l-o;t<s;t++){const s=i?o+t:l-t;if(n.has(s))continue;const r=e[s-1];if(!this.isViewFinished(r))return r}}let u=i?l:o-2,d=e[u];return d&&!this.isViewFinished(d)||n&&(u+=i?1:-1,d=e[u],d&&!this.isViewFinished(d))?d:null}isViewFinished(t){return t.renderingState===it.FINISHED}renderView(t){switch(t.renderingState){case it.FINISHED:return!1;case it.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case it.RUNNING:this.highestPriorityPage=t.renderingId;break;case it.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof U||console.error("renderView:",t)})}return!0}}class qn{#yi=null;#Ci=null;#Ei=null;#$e=null;#y=null;#Ai=null;#xi=null;#Pi=null;#Si=!1;#_i=null;#Fi=null;constructor({eventBus:t,externalServices:e=null,docProperties:i=null}){this.#y=t,this.#Ai=e,this.#Ei=i}setViewer(t){this.#Pi=t}async setDocument(t){if(this.#xi&&await this.#Ti(),this.#xi=t,!t)return;const[e,i,n]=await Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(!e&&!n)return void await this.#Ti();if(t!==this.#xi)return;try{this.#_i=this.#Di()}catch(t){return console.error("setDocument:",t),void await this.#Ti()}const s=this.#y;this.#$e=new AbortController;const{signal:r}=this.#$e;s._on("updatefromsandbox",t=>{t?.source===window&&this.#Bi(t.detail)},{signal:r}),s._on("dispatcheventinsandbox",t=>{this.#_i?.dispatchEventInSandbox(t.detail)},{signal:r}),s._on("pagechanging",({pageNumber:t,previous:e})=>{t!==e&&(this.#Ii(e),this.#Li(t))},{signal:r}),s._on("pagerendered",({pageNumber:t})=>{this._pageOpenPending.has(t)&&t===this.#Pi.currentPageNumber&&this.#Li(t)},{signal:r}),s._on("pagesdestroy",async()=>{await this.#Ii(this.#Pi.currentPageNumber),await(this.#_i?.dispatchEventInSandbox({id:"doc",name:"WillClose"})),this.#yi?.resolve()},{signal:r});try{const r=await this.#Ei(t);if(t!==this.#xi)return;await this.#_i.createSandbox({objects:e,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...r,actions:n}}),s.dispatch("sandboxcreated",{source:this})}catch(t){return console.error("setDocument:",t),void await this.#Ti()}await(this.#_i?.dispatchEventInSandbox({id:"doc",name:"Open"})),await this.#Li(this.#Pi.currentPageNumber,!0),Promise.resolve().then(()=>{t===this.#xi&&(this.#Si=!0)})}async dispatchWillSave(){return this.#_i?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){return this.#_i?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){if(this.#_i){await(this.#Fi?.promise),this.#Fi=Promise.withResolvers();try{await this.#_i.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw this.#Fi.resolve(),this.#Fi=null,t}await this.#Fi.promise}}async dispatchDidPrint(){return this.#_i?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){return this.#Ci?.promise||null}get ready(){return this.#Si}get _pageOpenPending(){return $(this,"_pageOpenPending",new Set)}get _visitedPages(){return $(this,"_visitedPages",new Map)}async#Bi(t){const e=this.#Pi,i=e.isInPresentationMode||e.isChangingPresentationMode,{id:n,siblings:s,command:r,value:a}=t;if(!n){switch(r){case"clear":console.clear();break;case"error":console.error(a);break;case"layout":if(!i){const t=Rt(a);e.spreadMode=t.spreadMode}break;case"page-num":e.currentPageNumber=a+1;break;case"print":await e.pagesPromise,this.#y.dispatch("print",{source:this});break;case"println":console.log(a);break;case"zoom":i||(e.currentScaleValue=a);break;case"SaveAs":this.#y.dispatch("download",{source:this});break;case"FirstPage":e.currentPageNumber=1;break;case"LastPage":e.currentPageNumber=e.pagesCount;break;case"NextPage":e.nextPage();break;case"PrevPage":e.previousPage();break;case"ZoomViewIn":i||e.increaseScale();break;case"ZoomViewOut":i||e.decreaseScale();break;case"WillPrintFinished":this.#Fi?.resolve(),this.#Fi=null}return}if(i&&t.focus)return;delete t.id,delete t.siblings;const o=s?[n,...s]:[n];for(const e of o){const i=document.querySelector(`[data-element-id="${e}"]`);i?i.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):this.#xi?.annotationStorage.setValue(e,t)}}async#Li(t,e=!1){const i=this.#xi,n=this._visitedPages;if(e&&(this.#yi=Promise.withResolvers()),!this.#yi)return;const s=this.#Pi.getPageView(t-1);if(s?.renderingState!==it.FINISHED)return void this._pageOpenPending.add(t);this._pageOpenPending.delete(t);const r=(async()=>{const e=await(n.has(t)?null:s.pdfPage?.getJSActions());i===this.#xi&&await(this.#_i?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:e}))})();n.set(t,r)}async#Ii(t){const e=this.#xi,i=this._visitedPages;if(!this.#yi)return;if(this._pageOpenPending.has(t))return;const n=i.get(t);n&&(i.set(t,null),await n,e===this.#xi&&await(this.#_i?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))}#Di(){if(this.#Ci=Promise.withResolvers(),this.#_i)throw new Error("#initScripting: Scripting already exists.");return this.#Ai.createScripting()}async#Ti(){if(!this.#_i)return this.#xi=null,void this.#Ci?.resolve();this.#yi&&(await Promise.race([this.#yi.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),this.#yi=null),this.#xi=null;try{await this.#_i.destroySandbox()}catch{}this.#Fi?.reject(new Error("Scripting destroyed.")),this.#Fi=null,this.#$e?.abort(),this.#$e=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#_i=null,this.#Si=!1,this.#Ci?.resolve()}}const Yn="sidebarResizing",Jn="pdfSidebarNotification";class Qn{#p=!1;#ki=null;#Mi=null;#Ni=null;constructor({elements:t,eventBus:e,l10n:i}){this.isOpen=!1,this.active=ut,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.onUpdateThumbnails=null,this.outerContainer=t.outerContainer,this.sidebarContainer=t.sidebarContainer,this.toggleButton=t.toggleButton,this.resizer=t.resizer,this.thumbnailButton=t.thumbnailButton,this.outlineButton=t.outlineButton,this.attachmentsButton=t.attachmentsButton,this.layersButton=t.layersButton,this.thumbnailView=t.thumbnailView,this.outlineView=t.outlineView,this.attachmentsView=t.attachmentsView,this.layersView=t.layersView,this._currentOutlineItemButton=t.currentOutlineItemButton,this.eventBus=e,this.#p="rtl"===i.getDirection(),this.#ge()}reset(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.#Oi(!0),this.switchView(ut),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1,this.layersButton.disabled=!1,this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:lt}setInitialView(t=lt){this.isInitialViewSet||(this.isInitialViewSet=!0,t!==lt&&t!==ot?(this.switchView(t,!0),this.isInitialEventDispatched||this.#ji()):this.#ji())}switchView(t,e=!1){const i=t!==this.active;let n=!1;switch(t){case lt:return void(this.isOpen&&this.close());case ut:this.isOpen&&i&&(n=!0);break;case dt:if(this.outlineButton.disabled)return;break;case ht:if(this.attachmentsButton.disabled)return;break;case ct:if(this.layersButton.disabled)return;break;default:return void console.error(`PDFSidebar.switchView: "${t}" is not a valid view.`)}this.active=t,Ut(this.thumbnailButton,t===ut,this.thumbnailView),Ut(this.outlineButton,t===dt,this.outlineView),Ut(this.attachmentsButton,t===ht,this.attachmentsView),Ut(this.layersButton,t===ct,this.layersView),!e||this.isOpen?(n&&(this.onUpdateThumbnails(),this.onToggled()),i&&this.#ji()):this.open()}open(){this.isOpen||(this.isOpen=!0,zt(this.toggleButton,!0),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===ut&&this.onUpdateThumbnails(),this.onToggled(),this.#ji(),this.#Oi())}close(t=null){this.isOpen&&(this.isOpen=!1,zt(this.toggleButton,!1),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this.onToggled(),this.#ji(),t?.detail>0&&this.toggleButton.blur())}toggle(t=null){this.isOpen?this.close(t):this.open()}#ji(){this.isInitialViewSet&&(this.isInitialEventDispatched||=!0),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}#Vi(){this.toggleButton.setAttribute("data-l10n-id","pdfjs-toggle-sidebar-notification-button"),this.isOpen||this.toggleButton.classList.add(Jn)}#Oi(t=!1){(this.isOpen||t)&&this.toggleButton.classList.remove(Jn),t&&this.toggleButton.setAttribute("data-l10n-id","pdfjs-toggle-sidebar-button")}#ge(){const{eventBus:t,outerContainer:e}=this;this.sidebarContainer.addEventListener("transitionend",i=>{i.target===this.sidebarContainer&&(e.classList.remove("sidebarMoving"),t.dispatch("resize",{source:this}))}),this.toggleButton.addEventListener("click",t=>{this.toggle(t)}),this.thumbnailButton.addEventListener("click",()=>{this.switchView(ut)}),this.outlineButton.addEventListener("click",()=>{this.switchView(dt)}),this.outlineButton.addEventListener("dblclick",()=>{t.dispatch("toggleoutlinetree",{source:this})}),this.attachmentsButton.addEventListener("click",()=>{this.switchView(ht)}),this.layersButton.addEventListener("click",()=>{this.switchView(ct)}),this.layersButton.addEventListener("dblclick",()=>{t.dispatch("resetlayers",{source:this})}),this._currentOutlineItemButton.addEventListener("click",()=>{t.dispatch("currentoutlineitem",{source:this})});const i=(t,e,i)=>{e.disabled=!t,t?this.#Vi():this.active===i&&this.switchView(ut)};t._on("outlineloaded",t=>{i(t.outlineCount,this.outlineButton,dt),t.currentOutlineItemPromise.then(t=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!t)})}),t._on("attachmentsloaded",t=>{i(t.attachmentsCount,this.attachmentsButton,ht)}),t._on("layersloaded",t=>{i(t.layersCount,this.layersButton,ct)}),t._on("presentationmodechanged",t=>{t.state===st&&this.visibleView===ut&&this.onUpdateThumbnails()}),this.resizer.addEventListener("mousedown",t=>{if(0!==t.button)return;e.classList.add(Yn),this.#ki=new AbortController;const i={signal:this.#ki.signal};window.addEventListener("mousemove",this.#Ri.bind(this),i),window.addEventListener("mouseup",this.#Ui.bind(this),i),window.addEventListener("blur",this.#Ui.bind(this),i)}),t._on("resize",i=>{if(i.source!==window)return;if(this.#Mi=null,!this.#Ni)return;if(!this.isOpen)return void this.#zi(this.#Ni);e.classList.add(Yn);const n=this.#zi(this.#Ni);Promise.resolve().then(()=>{e.classList.remove(Yn),n&&t.dispatch("resize",{source:this})})})}get outerContainerWidth(){return this.#Mi||=this.outerContainer.clientWidth}#zi(t=0){const e=Math.floor(this.outerContainerWidth/2);return t>e&&(t=e),t<200&&(t=200),t!==this.#Ni&&(this.#Ni=t,Ot.setProperty("--sidebar-width",`${t}px`),!0)}#Ri(t){let e=t.clientX;this.#p&&(e=this.outerContainerWidth-e),this.#zi(e)}#Ui(t){this.outerContainer.classList.remove(Yn),this.eventBus.dispatch("resize",{source:this}),this.#ki?.abort(),this.#ki=null}}function ts(t){t.width=0,t.height=0}class es{static#Hi=null;static getCanvas(t,e){const i=this.#Hi||=document.createElement("canvas");i.width=t,i.height=e;const n=i.getContext("2d",{alpha:!1});return n.save(),n.fillStyle="rgb(255, 255, 255)",n.fillRect(0,0,t,e),n.restore(),[i,i.getContext("2d")]}static destroyCanvas(){this.#Hi&&ts(this.#Hi),this.#Hi=null}}class is{constructor({container:t,eventBus:e,id:i,defaultViewport:n,optionalContentConfigPromise:s,linkService:r,renderingQueue:a,maxCanvasPixels:o,maxCanvasDim:l,pageColors:u,enableHWA:d}){this.id=i,this.renderingId="thumbnail"+i,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=n,this.pdfPageRotate=n.rotation,this._optionalContentConfigPromise=s||null,this.maxCanvasPixels=o??Qt.get("maxCanvasPixels"),this.maxCanvasDim=l||Qt.get("maxCanvasDim"),this.pageColors=u||null,this.enableHWA=d||!1,this.eventBus=e,this.linkService=r,this.renderingQueue=a,this.renderTask=null,this.renderingState=it.INITIAL,this.resume=null;const h=document.createElement("a");h.href=r.getAnchorUrl("#page="+i),h.setAttribute("data-l10n-id","pdfjs-thumb-page-title"),h.setAttribute("data-l10n-args",this.#$i),h.onclick=function(){return r.goToPage(i),!1},this.anchor=h;const c=document.createElement("div");c.className="thumbnail",c.setAttribute("data-page-number",this.id),this.div=c,this.#Wi();const g=document.createElement("div");g.className="thumbnailImage",this._placeholderImg=g,c.append(g),h.append(c),t.append(h)}#Wi(){const{width:t,height:e}=this.viewport,i=t/e;this.canvasWidth=98,this.canvasHeight=this.canvasWidth/i|0,this.scale=this.canvasWidth/t;const{style:n}=this.div;n.setProperty("--thumbnail-width",`${this.canvasWidth}px`),n.setProperty("--thumbnail-height",`${this.canvasHeight}px`)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:e}),this.reset()}reset(){this.cancelRendering(),this.renderingState=it.INITIAL,this.div.removeAttribute("data-loaded"),this.image?.replaceWith(this._placeholderImg),this.#Wi(),this.image&&(this.image.removeAttribute("src"),delete this.image)}update({rotation:t=null}){"number"==typeof t&&(this.rotation=t);const e=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:e}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}#Gi(t=1,e=this.enableHWA){const i=document.createElement("canvas"),n=i.getContext("2d",{alpha:!1,willReadFrequently:!e}),s=new k,r=t*this.canvasWidth,a=t*this.canvasHeight;s.limitCanvas(r,a,this.maxCanvasPixels,this.maxCanvasDim),i.width=r*s.sx|0,i.height=a*s.sy|0;return{ctx:n,canvas:i,transform:s.scaled?[s.sx,0,0,s.sy,0,0]:null}}#Xi(t){if(this.renderingState!==it.FINISHED)throw new Error("#convertCanvasToImage: Rendering has not finished.");const e=this.#Zi(t),i=document.createElement("img");i.className="thumbnailImage",i.setAttribute("data-l10n-id","pdfjs-thumb-page-canvas"),i.setAttribute("data-l10n-args",this.#$i),i.src=e.toDataURL(),this.image=i,this.div.setAttribute("data-loaded",!0),this._placeholderImg.replaceWith(i),ts(e)}async draw(){if(this.renderingState!==it.INITIAL)return void console.error("Must be in new state before drawing");const{pageColors:t,pdfPage:e}=this;if(!e)throw this.renderingState=it.FINISHED,new Error("pdfPage is not loaded");this.renderingState=it.RUNNING;const{ctx:i,canvas:n,transform:s}=this.#Gi(2),r={canvasContext:i,transform:s,viewport:this.viewport.clone({scale:2*this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:t},a=this.renderTask=e.render(r);a.onContinue=t=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=it.PAUSED,void(this.resume=()=>{this.renderingState=it.RUNNING,t()});t()};let o=null;try{await a.promise}catch(t){if(t instanceof U)return void ts(n);o=t}finally{a===this.renderTask&&(this.renderTask=null)}if(this.renderingState=it.FINISHED,this.#Xi(n),ts(n),this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:e}),o)throw o}setImage(t){if(this.renderingState!==it.INITIAL)return;const{thumbnailCanvas:e,pdfPage:i,scale:n}=t;e&&(this.pdfPage||this.setPdfPage(i),n<this.scale||(this.renderingState=it.FINISHED,this.#Xi(e)))}#Ki(t){const e=t.width<<3,i=t.height<<3,n=new k;return n.sx=n.sy=1,n.limitCanvas(e,i,this.maxCanvasPixels,this.maxCanvasDim),[e*n.sx|0,i*n.sy|0]}#Zi(t){const{ctx:e,canvas:i}=this.#Gi(1,!0);if(t.width<=2*i.width)return e.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),i;let[n,s]=this.#Ki(i);const[r,a]=es.getCanvas(n,s);for(;n>t.width||s>t.height;)n>>=1,s>>=1;for(a.drawImage(t,0,0,t.width,t.height,0,0,n,s);n>2*i.width;)a.drawImage(r,0,0,n,s,0,0,n>>1,s>>1),n>>=1,s>>=1;return e.drawImage(r,0,0,n,s,0,0,i.width,i.height),i}get#$i(){return JSON.stringify({page:this.pageLabel??this.id})}setPageLabel(t){this.pageLabel="string"==typeof t?t:null,this.anchor.setAttribute("data-l10n-args",this.#$i),this.renderingState===it.FINISHED&&this.image?.setAttribute("data-l10n-args",this.#$i)}}const ns="selected";class ss{constructor({container:t,eventBus:e,linkService:i,renderingQueue:n,maxCanvasPixels:s,maxCanvasDim:r,pageColors:a,abortSignal:o,enableHWA:l}){this.container=t,this.eventBus=e,this.linkService=i,this.renderingQueue=n,this.maxCanvasPixels=s,this.maxCanvasDim=r,this.pageColors=a||null,this.enableHWA=l||!1,this.scroll=Et(this.container,this.#qi.bind(this),o),this.#Yi()}#qi(){this.renderingQueue.renderHighestPriority()}getThumbnail(t){return this._thumbnails[t]}#Ji(){return Dt({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(t){if(!this.pdfDocument)return;const e=this._thumbnails[t-1];if(!e)return void console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');if(t!==this._currentPageNumber){this._thumbnails[this._currentPageNumber-1].div.classList.remove(ns),e.div.classList.add(ns)}const{first:i,last:n,views:s}=this.#Ji();if(s.length>0){let r=!1;if(t<=i.id||t>=n.id)r=!0;else for(const{id:e,percent:i}of s)if(e===t){r=i<100;break}r&&Ct(e.div,{top:-19})}this._currentPageNumber=t}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!It(t))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument)return;if(this._pagesRotation===t)return;this._pagesRotation=t;const e={rotation:t};for(const t of this._thumbnails)t.update(e)}cleanup(){for(const t of this._thumbnails)t.renderingState!==it.FINISHED&&t.reset();es.destroyCanvas()}#Yi(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}setDocument(t){if(this.pdfDocument&&(this.#Qi(),this.#Yi()),this.pdfDocument=t,!t)return;const e=t.getPage(1),i=t.getOptionalContentConfig({intent:"display"});e.then(e=>{const n=t.numPages,s=e.getViewport({scale:1});for(let t=1;t<=n;++t){const e=new is({container:this.container,eventBus:this.eventBus,id:t,defaultViewport:s.clone(),optionalContentConfigPromise:i,linkService:this.linkService,renderingQueue:this.renderingQueue,maxCanvasPixels:this.maxCanvasPixels,maxCanvasDim:this.maxCanvasDim,pageColors:this.pageColors,enableHWA:this.enableHWA});this._thumbnails.push(e)}this._thumbnails[0]?.setPdfPage(e);this._thumbnails[this._currentPageNumber-1].div.classList.add(ns)}).catch(t=>{console.error("Unable to initialize thumbnail viewer",t)})}#Qi(){for(const t of this._thumbnails)t.cancelRendering()}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,e=this._thumbnails.length;t<e;t++)this._thumbnails[t].setPageLabel(this._pageLabels?.[t]??null)}}async#tn(t){if(t.pdfPage)return t.pdfPage;try{const e=await this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),e}catch(t){return console.error("Unable to get page for thumb view",t),null}}#en(t){return 1===t.first?.id||t.last?.id!==this._thumbnails.length&&this.scroll.down}forceRendering(){const t=this.#Ji(),e=this.#en(t),i=this.renderingQueue.getHighestPriority(t,this._thumbnails,e,!1,!0);return!!i&&(this.#tn(i).then(()=>{this.renderingQueue.renderView(i)}),!0)}}class rs{#in=null;#nn=null;#sn=null;#rn=null;#an=null;#X;constructor(t){this.pdfPage=t.pdfPage,this.accessibilityManager=t.accessibilityManager,this.l10n=t.l10n,this.l10n||=new xi,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#X=t.uiManager,this.#in=t.annotationLayer||null,this.#an=t.textLayer||null,this.#nn=t.drawLayer||null,this.#sn=t.onAppend||null,this.#rn=t.structTreeLayer||null}async render({viewport:t,intent:e="display"}){if("display"!==e)return;if(this._cancelled)return;const i=t.clone({dontFlip:!0});if(this.div)return this.annotationEditorLayer.update({viewport:i}),void this.show();const n=this.div=document.createElement("div");n.className="annotationEditorLayer",n.hidden=!0,n.dir=this.#X.direction,this.#sn?.(n),this.annotationEditorLayer=new r({uiManager:this.#X,div:n,structTreeLayer:this.#rn,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i,annotationLayer:this.#in,textLayer:this.#an,drawLayer:this.#nn});const s={viewport:i,div:n,annotations:null,intent:e};this.annotationEditorLayer.render(s),this.show()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.annotationEditorLayer.pause(!0),this.div.hidden=!0)}show(){this.div&&!this.annotationEditorLayer.isInvisible&&(this.div.hidden=!1,this.annotationEditorLayer.pause(!1))}}class as{#on=null;#ln=!1;#sn=null;#$e=null;#un=!1;constructor({pdfPage:t,linkService:e,downloadManager:i,annotationStorage:n=null,imageResourcesPath:s="",renderForms:r=!0,enableScripting:a=!1,hasJSActionsPromise:o=null,fieldObjectsPromise:l=null,annotationCanvasMap:u=null,accessibilityManager:d=null,annotationEditorUIManager:h=null,onAppend:c=null}){this.pdfPage=t,this.linkService=e,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=r,this.annotationStorage=n,this.enableScripting=a,this._hasJSActionsPromise=o||Promise.resolve(!1),this._fieldObjectsPromise=l||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=d,this._annotationEditorUIManager=h,this.#sn=c,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=e.eventBus}async render({viewport:t,intent:e="display",structTreeLayer:i=null}){if(this.div){if(this._cancelled||!this.annotationLayer)return;return void this.annotationLayer.update({viewport:t.clone({dontFlip:!0})})}const[n,s,r]=await Promise.all([this.pdfPage.getAnnotations({intent:e}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const a=this.div=document.createElement("div");if(a.className="annotationLayer",this.#sn?.(a),0===n.length)return this.#on=n,void this.hide(!0);this.#dn(t,i),await this.annotationLayer.render({annotations:n,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:s,fieldObjects:r}),this.#on=n,this.linkService.isInPresentationMode&&this.#hn(at),this.#$e||(this.#$e=new AbortController,this._eventBus?._on("presentationmodechanged",t=>{this.#hn(t.state)},{signal:this.#$e.signal}))}#dn(t,e){this.annotationLayer=new u({div:this.div,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:t.clone({dontFlip:!0}),structTreeLayer:e})}cancel(){this._cancelled=!0,this.#$e?.abort(),this.#$e=null}hide(t=!1){this.#ln=!t,this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}async injectLinkAnnotations({inferredLinks:t,viewport:e,structTreeLayer:i=null}){if(null===this.#on)throw new Error("`render` method must be called before `injectLinkAnnotations`.");if(this._cancelled||this.#un)return;this.#un=!0;const n=this.#on.length?this.#cn(t):t;n.length&&(this.annotationLayer||(this.#dn(e,i),H(this.div,e)),await this.annotationLayer.addLinkAnnotations(n,this.linkService),this.#ln||(this.div.hidden=!1))}#hn(t){if(!this.div)return;let e=!1;switch(t){case at:e=!0;break;case st:break;default:return}for(const t of this.div.childNodes)t.hasAttribute("data-internal-link")||(t.inert=e)}#cn(t){function e(t){if(!t.quadPoints)return[t.rect];const e=[];for(let i=2,n=t.quadPoints.length;i<n;i+=8){const n=t.quadPoints[i],s=t.quadPoints[i+1],r=t.quadPoints[i+2],a=t.quadPoints[i+3];e.push([r,a,n,s])}return e}function i(t,i){const n=[],s=e(t),r=e(i);for(const t of s)for(const e of r){const i=Y.intersect(t,e);i&&n.push(i)}return n}function n(t){let e=0;for(const i of t)e+=Math.abs((i[2]-i[0])*(i[3]-i[1]));return e}return t.filter(t=>{let s;for(const r of this.#on){if(r.annotationType!==h.LINK||!r.url)continue;const a=i(r,t);if(0!==a.length&&(s??=n(e(t)),n(a)/s>.5))return!1}return!0})}}function os({width:t,height:e,left:i,top:n},s){if(0===t||0===e)return null;const r=s.textLayer.div.getBoundingClientRect(),a=s.getPagePoint(i-r.left,n-r.top),o=s.getPagePoint(i-r.left+t,n-r.top+e);return Y.normalizeRect([a[0],a[1],o[0],o[1]])}function ls(t,e){const i=t.getClientRects();if(1===i.length)return{rect:os(i[0],e)};const n=[1/0,1/0,-1/0,-1/0],s=[];let r=0;for(const t of i){const i=os(t,e);null!==i&&(s[r]=s[r+4]=i[0],s[r+1]=s[r+3]=i[3],s[r+2]=s[r+6]=i[2],s[r+5]=s[r+7]=i[1],Y.rectBoundingBox(...i,n),r+=8)}return{quadPoints:s,rect:n}}function us(t,e){let i=t;do{if(i.nodeType===Node.TEXT_NODE){const t=i.textContent.length;if(e<=t)return[i,e];e-=t}else if(i.firstChild){i=i.firstChild;continue}for(;!i.nextSibling&&i!==t;)i=i.parentNode;i!==t&&(i=i.nextSibling)}while(i!==t);throw new Error("Offset is bigger than container's contents length.")}n(2222);class ds{static#gn=0;static#pn;static findLinks(t){this.#pn??=/\b(?:https?:\/\/|mailto:|www\.)(?:[\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}]|\/|[\0-\x08\x0E-\x1F!-Z\\\^-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\u{10FFFF}]+[\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}])+|\b[\0-\x08\x0E-\x1F!-'\*-;=\?A-Z\\\^-z\|~-\x9F\xA1-\u0F39\u0F3E-\u167F\u1681-\u169A\u169D-\u1FFF\u200B-\u2019\u201B-\u201D\u201F-\u2027\u202A-\u202E\u2030-\u2044\u2047-\u205E\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2E21\u2E2A-\u2E41\u2E43-\u2E54\u2E5D-\u2FFF\u3001-\u3007\u3012\u3013\u301C\u3020-\uFD3D\uFD40-\uFE16\uFE19-\uFE34\uFE45\uFE46\uFE49-\uFE58\uFE5F-\uFEFE\uFF00-\uFF07\uFF0A-\uFF3A\uFF3C\uFF3E-\uFF5A\uFF5C\uFF5E\uFF61\uFF64-\u{10FFFF}]+@([\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}]+(?:\.[\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}]+)+)/gmu;const[e,i]=xn(t),n=e.matchAll(this.#pn),s=[];for(const t of n){const[e,n]=t;let r;if(e.startsWith("www.")||e.startsWith("http://")||e.startsWith("https://"))r=e;else{if(!URL.canParse(`http://${n}`))continue;r=e.startsWith("mailto:")?e:`mailto:${e}`}const a=p(r,null,{addDefaultProtocol:!0});if(a){const[n,r]=Pn(i,t.index,e.length);s.push({url:a.href,index:n,length:r})}}return s}static processLinks(t){return this.findLinks(t._textHighlighter.textContentItemsStr.join("\n")).map(e=>function({url:t,index:e,length:i},n,s){const r=n._textHighlighter,[{begin:a,end:o}]=r._convertMatches([e],[i]),l=new Range;return l.setStart(...us(r.textDivs[a.divIdx],a.offset)),l.setEnd(...us(r.textDivs[o.divIdx],o.offset)),{id:`inferred_link_${s}`,unsafeUrl:t,url:t,annotationType:h.LINK,rotation:0,...ls(l,n),borderStyle:null}}(e,t,this.#gn++))}}class hs{#fn=!1;#mn=null;#vn=0;#bn=null;#wn=it.INITIAL;#yn=null;#Cn=0;#Hi=null;canvas=null;div=null;eventBus=null;id=null;pageColors=null;renderingQueue=null;renderTask=null;resume=null;constructor(t){this.#fn=#fn in t?t.#fn:t.enableHWA||!1,this.eventBus=t.eventBus,this.id=t.id,this.pageColors=t.pageColors||null,this.renderingQueue=t.renderingQueue,this.#vn=t.minDurationToUpdateCanvas??500}get renderingState(){return this.#wn}set renderingState(t){if(t!==this.#wn)switch(this.#wn=t,this.#mn&&(clearTimeout(this.#mn),this.#mn=null),t){case it.PAUSED:this.div.classList.remove("loading"),this.#Cn=0,this.#yn?.(!1);break;case it.RUNNING:this.div.classList.add("loadingIcon"),this.#mn=setTimeout(()=>{this.div.classList.add("loading"),this.#mn=null},0),this.#Cn=Date.now();break;case it.INITIAL:case it.FINISHED:this.div.classList.remove("loadingIcon","loading"),this.#Cn=0}}_createCanvas(t,e=!1){const{pageColors:i}=this,n=!(!i?.background||!i?.foreground),s=this.canvas,r=!s&&!n&&!e;let a=this.canvas=document.createElement("canvas");this.#yn=e=>{if(r){let i=this.#Hi;if(!e&&this.#vn>0){if(Date.now()-this.#Cn<this.#vn)return;i||(i=this.#Hi=a,a=this.canvas=a.cloneNode(!1),t(a))}if(i){return a.getContext("2d",{alpha:!1}).drawImage(i,0,0),void(e?this.#En():this.#Cn=Date.now())}return t(a),void(this.#yn=null)}e&&(s?(s.replaceWith(a),s.width=s.height=0):t(a))};const o=a.getContext("2d",{alpha:!1,willReadFrequently:!this.#fn});return{canvas:a,prevCanvas:s,ctx:o}}#An=t=>{if(this.#yn?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this))return this.renderingState=it.PAUSED,void(this.resume=()=>{this.renderingState=it.RUNNING,t()});t()};_resetCanvas(){const{canvas:t}=this;t&&(t.remove(),t.width=t.height=0,this.canvas=null,this.#En())}#En(){this.#Hi&&(this.#Hi.width=this.#Hi.height=0,this.#Hi=null)}async _drawCanvas(t,e,i){const n=this.renderTask=this.pdfPage.render(t);n.onContinue=this.#An,n.onError=t=>{t instanceof U&&(e(),this.#bn=null)};let s=null;try{await n.promise,this.#yn?.(!0)}catch(t){if(t instanceof U)return;s=t,this.#yn?.(!0)}finally{this.#bn=s,n===this.renderTask&&(this.renderTask=null)}if(this.renderingState=it.FINISHED,i(n),s)throw s}cancelRendering({cancelExtraDelay:t=0}={}){this.renderTask&&(this.renderTask.cancel(t),this.renderTask=null),this.resume=null}dispatchPageRender(){this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id})}dispatchPageRendered(t,e){this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:t,isDetailView:e,timestamp:performance.now(),error:this.#bn})}}class cs{#nn=null;constructor(t){this.pageIndex=t.pageIndex}async render({intent:t="display"}){"display"!==t||this.#nn||this._cancelled||(this.#nn=new m({pageIndex:this.pageIndex}))}cancel(){this._cancelled=!0,this.#nn&&(this.#nn.destroy(),this.#nn=null)}setParent(t){this.#nn?.setParent(t)}getDrawLayer(){return this.#nn}}class gs extends hs{#xn=null;renderingCancelled=!1;constructor({pageView:t}){super(t),this.pageView=t,this.renderingId="detail"+this.id,this.div=t.div}setPdfPage(t){this.pageView.setPdfPage(t)}get pdfPage(){return this.pageView.pdfPage}get renderingState(){return super.renderingState}set renderingState(t){this.renderingCancelled=!1,super.renderingState=t}reset({keepCanvas:t=!1}={}){const e=this.renderingCancelled||this.renderingState===it.RUNNING||this.renderingState===it.PAUSED;this.cancelRendering(),this.renderingState=it.INITIAL,this.renderingCancelled=e,t||this._resetCanvas()}#Pn(t){if(!this.#xn)return!0;const e=this.#xn.minX,i=this.#xn.minY,n=this.#xn.width+e,s=this.#xn.height+i;if(t.minX<e||t.minY<i||t.maxX>n||t.maxY>s)return!0;const{width:r,height:a,scale:o}=this.pageView.viewport;if(this.#xn.scale!==o)return!0;const l=t.minX-e,u=n-t.maxX,d=t.minY-i,h=s-t.maxY;return e>0&&u/l>3||n<r&&l/u>3||i>0&&h/d>3||s<a&&d/h>3}update({visibleArea:t=null,underlyingViewUpdated:e=!1}={}){if(e)return this.cancelRendering(),void(this.renderingState=it.INITIAL);if(!this.#Pn(t))return;const{viewport:i,maxCanvasPixels:n,capCanvasAreaFactor:s}=this.pageView,r=t.maxX-t.minX,a=t.maxY-t.minY,o=r*a*k.pixelRatio**2,l=(Math.sqrt(k.capPixels(n,s)/o)-1)/2;let u=Math.min(1,l);u<0&&(u=0);const d=r*u,h=a*u,c=Math.max(0,t.minX-d),g=Math.min(i.width,t.maxX+d),p=Math.max(0,t.minY-h),f=g-c,m=Math.min(i.height,t.maxY+h)-p;this.#xn={minX:c,minY:p,width:f,height:m,scale:i.scale},this.reset({keepCanvas:!0})}async draw(){if(this.pageView.detailView!==this)return;const t=this.pageView.renderingState===it.FINISHED||this.renderingState===it.FINISHED;this.renderingState!==it.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:e,pdfPage:i,viewport:n}=this.pageView;if(!i)throw this.renderingState=it.FINISHED,new Error("pdfPage is not loaded");this.renderingState=it.RUNNING;const s=this.pageView._ensureCanvasWrapper(),{canvas:r,prevCanvas:a,ctx:o}=this._createCanvas(t=>{"CANVAS"===s.firstElementChild?.tagName?s.firstElementChild.after(t):s.prepend(t)},t);r.setAttribute("aria-hidden","true");const{width:l,height:u}=n,d=this.#xn,{pixelRatio:h}=k,c=[h,0,0,h,-d.minX*h,-d.minY*h];r.width=d.width*h,r.height=d.height*h;const{style:g}=r;g.width=100*d.width/l+"%",g.height=100*d.height/u+"%",g.top=100*d.minY/u+"%",g.left=100*d.minX/l+"%";const p=this._drawCanvas(this.pageView._getRenderingContext(o,c),()=>{this.canvas?.remove(),this.canvas=a},()=>{this.dispatchPageRendered(!1,!0)});return e.setAttribute("data-loaded",!0),this.dispatchPageRender(),p}}const ps={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},fs=/^H(\d+)$/;class ms{#Sn;#_n=null;#Fn;#Tn=new Map;#Dn;#Bn=null;constructor(t,e){this.#Sn=t.getStructTree(),this.#Dn=e}async render(){if(this.#Fn)return this.#Fn;const{promise:t,resolve:e,reject:i}=Promise.withResolvers();this.#Fn=t;try{this.#_n=this.#In(await this.#Sn)}catch(t){i(t)}return this.#Sn=null,this.#_n?.classList.add("structTree"),e(this.#_n),t}async getAriaAttributes(t){try{return await this.render(),this.#Tn.get(t)}catch{}return null}hide(){this.#_n&&!this.#_n.hidden&&(this.#_n.hidden=!0)}show(){this.#_n?.hidden&&(this.#_n.hidden=!1)}#Ln(t,e){const{alt:i,id:n,lang:s}=t;if(void 0!==i){let n=!1;const s=Pt(i);for(const e of t.children)if("annotation"===e.type){let t=this.#Tn.get(e.id);t||(t=new Map,this.#Tn.set(e.id,t)),t.set("aria-label",s),n=!0}n||e.setAttribute("aria-label",s)}void 0!==n&&e.setAttribute("aria-owns",n),void 0!==s&&e.setAttribute("lang",Pt(s,!0))}#kn(t,e){const{alt:i,bbox:n,children:s}=t,r=s?.[0];if(!this.#Dn||!i||!n||"content"!==r?.type)return!1;const{id:a}=r;if(!a)return!1;e.setAttribute("aria-owns",a);const o=document.createElement("span");(this.#Bn||=new Map).set(a,o),o.setAttribute("role","img"),o.setAttribute("aria-label",Pt(i));const{pageHeight:l,pageX:u,pageY:d}=this.#Dn,h="calc(var(--total-scale-factor) *",{style:c}=o;return c.width=`${h}${n[2]-n[0]}px)`,c.height=`${h}${n[3]-n[1]}px)`,c.left=`${h}${n[0]-u}px)`,c.top=`${h}${l-n[3]+d}px)`,!0}addElementsToTextLayer(){if(this.#Bn){for(const[t,e]of this.#Bn)document.getElementById(t)?.append(e);this.#Bn.clear(),this.#Bn=null}}#In(t){if(!t)return null;const e=document.createElement("span");if("role"in t){const{role:i}=t,n=i.match(fs);if(n?(e.setAttribute("role","heading"),e.setAttribute("aria-level",n[1])):ps[i]&&e.setAttribute("role",ps[i]),"Figure"===i&&this.#kn(t,e))return e}if(this.#Ln(t,e),t.children)if(1===t.children.length&&"id"in t.children[0])this.#Ln(t.children[0],e);else for(const i of t.children)e.append(this.#In(i));return e}}class vs{#Mn=!1;#Nn=null;#On=new Map;#jn=new Map;setTextMapping(t){this.#Nn=t}static#Vn(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===n.width&&0===n.height)return-1;const s=i.y,r=i.y+i.height,a=i.y+i.height/2,o=n.y,l=n.y+n.height,u=n.y+n.height/2;if(a<=o&&u>=r)return-1;if(u<=s&&a>=l)return 1;return i.x+i.width/2-(n.x+n.width/2)}enable(){if(this.#Mn)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#Nn)throw new Error("Text divs and strings have not been set.");if(this.#Mn=!0,this.#Nn=this.#Nn.slice(),this.#Nn.sort(vs.#Vn),this.#On.size>0){const t=this.#Nn;for(const[e,i]of this.#On){document.getElementById(e)?this.#Rn(e,t[i]):this.#On.delete(e)}}for(const[t,e]of this.#jn)this.addPointerInTextLayer(t,e);this.#jn.clear()}disable(){this.#Mn&&(this.#jn.clear(),this.#Nn=null,this.#Mn=!1)}removePointerInTextLayer(t){if(!this.#Mn)return void this.#jn.delete(t);const e=this.#Nn;if(!e||0===e.length)return;const{id:i}=t,n=this.#On.get(i);if(void 0===n)return;const s=e[n];this.#On.delete(i);let r=s.getAttribute("aria-owns");r?.includes(i)&&(r=r.split(" ").filter(t=>t!==i).join(" "),r?s.setAttribute("aria-owns",r):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#Rn(t,e){const i=e.getAttribute("aria-owns");i?.includes(t)||e.setAttribute("aria-owns",i?`${i} ${t}`:t),e.removeAttribute("role")}addPointerInTextLayer(t,e){const{id:i}=t;if(!i)return null;if(!this.#Mn)return this.#jn.set(t,e),null;e&&this.removePointerInTextLayer(t);const n=this.#Nn;if(!n||0===n.length)return null;const s=St(n,e=>vs.#Vn(t,e)<0),r=Math.max(0,s-1),a=n[r];this.#Rn(i,a),this.#On.set(i,r);const o=a.parentNode;return o?.classList.contains("markedContent")?o.id:null}moveElementInDOM(t,e,i,n){const s=this.addPointerInTextLayer(i,n);if(!t.hasChildNodes())return t.append(e),s;const r=Array.from(t.childNodes).filter(t=>t!==e);if(0===r.length)return s;const a=i||e,o=St(r,t=>vs.#Vn(a,t)<0);return 0===o?r[0].before(e):r[o-1].after(e),s}}class bs{#$e=null;constructor({findController:t,eventBus:e,pageIndex:i}){this.findController=t,this.matches=[],this.eventBus=e,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(t,e){this.textDivs=t,this.textContentItemsStr=e}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#$e||(this.#$e=new AbortController,this.eventBus._on("updatetextlayermatches",t=>{t.pageIndex!==this.pageIdx&&-1!==t.pageIndex||this._updateMatches()},{signal:this.#$e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#$e?.abort(),this.#$e=null,this._updateMatches(!0))}_convertMatches(t,e){if(!t)return[];const{textContentItemsStr:i}=this;let n=0,s=0;const r=i.length-1,a=[];for(let o=0,l=t.length;o<l;o++){let l=t[o];for(;n!==r&&l>=s+i[n].length;)s+=i[n].length,n++;n===i.length&&console.error("Could not find a matching mapping");const u={begin:{divIdx:n,offset:l-s}};for(l+=e[o];n!==r&&l>s+i[n].length;)s+=i[n].length,n++;u.end={divIdx:n,offset:l-s},a.push(u)}return a}_renderMatches(t){if(0===t.length)return;const{findController:e,pageIdx:i}=this,{textContentItemsStr:n,textDivs:s}=this,r=i===e.selected.pageIdx,a=e.selected.matchIdx;let o=null;const l={offset:void 0};function u(t,e){const i=t.divIdx;return s[i].textContent="",d(i,0,t.offset,e)}function d(t,e,i,r){let a=s[t];if(a.nodeType===Node.TEXT_NODE){const e=document.createElement("span");a.before(e),e.append(a),s[t]=e,a=e}const o=n[t].substring(e,i),l=document.createTextNode(o);if(r){const t=document.createElement("span");if(t.className=`${r} appended`,t.append(l),a.append(t),r.includes("selected")){const{left:e}=t.getClientRects()[0];return e-a.getBoundingClientRect().left}return 0}return a.append(l),0}let h=a,c=h+1;if(e.state.highlightAll)h=0,c=t.length;else if(!r)return;let g=-1,p=-1;for(let n=h;n<c;n++){const h=t[n],c=h.begin;if(c.divIdx===g&&c.offset===p)continue;g=c.divIdx,p=c.offset;const f=h.end,m=r&&n===a,v=m?" selected":"";let b=0;if(o&&c.divIdx===o.divIdx?d(o.divIdx,o.offset,c.offset):(null!==o&&d(o.divIdx,o.offset,l.offset),u(c)),c.divIdx===f.divIdx)b=d(c.divIdx,c.offset,f.offset,"highlight"+v);else{b=d(c.divIdx,c.offset,l.offset,"highlight begin"+v);for(let t=c.divIdx+1,e=f.divIdx;t<e;t++)s[t].className="highlight middle"+v;u(f,"highlight end"+v)}o=f,m&&e.scrollMatchIntoView({element:s[c.divIdx],selectedLeft:b,pageIndex:i,matchIndex:a})}o&&d(o.divIdx,o.offset,l.offset)}_updateMatches(t=!1){if(!this.enabled&&!t)return;const{findController:e,matches:i,pageIdx:n}=this,{textContentItemsStr:s,textDivs:r}=this;let a=-1;for(const t of i){for(let e=Math.max(a,t.begin.divIdx),i=t.end.divIdx;e<=i;e++){const t=r[e];t.textContent=s[e],t.className=""}a=t.end.divIdx+1}if(!e?.highlightMatches||t)return;const o=e.pageMatches[n]||null,l=e.pageMatchesLength[n]||null;this.matches=this._convertMatches(o,l),this._renderMatches(this.matches)}}class ws{#Un=!1;#sn=null;#zn=!1;#an=null;static#Hn=new Map;static#$n=null;constructor({pdfPage:t,highlighter:e=null,accessibilityManager:i=null,enablePermissions:n=!1,onAppend:s=null}){this.pdfPage=t,this.highlighter=e,this.accessibilityManager=i,this.#Un=!0===n,this.#sn=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}async render({viewport:t,textContentParams:e=null}){if(this.#zn&&this.#an)return this.#an.update({viewport:t,onBefore:this.hide.bind(this)}),void this.show();this.cancel(),this.#an=new Z({textContentSource:this.pdfPage.streamTextContent(e||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:t});const{textDivs:i,textContentItemsStr:n}=this.#an;this.highlighter?.setTextMapping(i,n),this.accessibilityManager?.setTextMapping(i),await this.#an.render(),this.#zn=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#Wn(s),this.#sn?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()}hide(){!this.div.hidden&&this.#zn&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#zn&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#an?.cancel(),this.#an=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),ws.#Gn(this.div)}#Wn(t){const{div:e}=this;e.addEventListener("mousedown",()=>{e.classList.add("selecting")}),e.addEventListener("copy",t=>{if(!this.#Un){const e=document.getSelection();t.clipboardData.setData("text/plain",Pt(I(e.toString())))}G(t)}),ws.#Hn.set(e,t),ws.#Xn()}static#Gn(t){this.#Hn.delete(t),0===this.#Hn.size&&(this.#$n?.abort(),this.#$n=null)}static#Xn(){if(this.#$n)return;this.#$n=new AbortController;const{signal:t}=this.#$n,e=(t,e)=>{e.append(t),t.style.width="",t.style.height="",e.classList.remove("selecting")};let i=!1;var n,s;document.addEventListener("pointerdown",()=>{i=!0},{signal:t}),document.addEventListener("pointerup",()=>{i=!1,this.#Hn.forEach(e)},{signal:t}),window.addEventListener("blur",()=>{i=!1,this.#Hn.forEach(e)},{signal:t}),document.addEventListener("keyup",()=>{i||this.#Hn.forEach(e)},{signal:t}),document.addEventListener("selectionchange",()=>{const t=document.getSelection();if(0===t.rangeCount)return void this.#Hn.forEach(e);const i=new Set;for(let e=0;e<t.rangeCount;e++){const n=t.getRangeAt(e);for(const t of this.#Hn.keys())!i.has(t)&&n.intersectsNode(t)&&i.add(t)}for(const[t,n]of this.#Hn)i.has(t)?t.classList.add("selecting"):e(n,t);if(n??="none"===getComputedStyle(this.#Hn.values().next().value).getPropertyValue("-moz-user-select"),n)return;const r=t.getRangeAt(0),a=s&&(0===r.compareBoundaryPoints(Range.END_TO_END,s)||0===r.compareBoundaryPoints(Range.START_TO_END,s));let o=a?r.startContainer:r.endContainer;if(o.nodeType===Node.TEXT_NODE&&(o=o.parentNode),!a&&0===r.endOffset)do{for(;!o.previousSibling;)o=o.parentNode;o=o.previousSibling}while(!o.childNodes.length);const l=o.parentElement?.closest(".textLayer"),u=this.#Hn.get(l);u&&(u.style.width=l.style.width,u.style.height=l.style.height,o.parentElement.insertBefore(u,a?o:o.nextSibling)),s=r.cloneRange()},{signal:t})}}const ys=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class Cs extends hs{#Zn=d.ENABLE_FORMS;#Kn=null;#qn=!0;#Yn=!1;#O=!1;#Jn=null;#Qn=!1;#ts=null;#es=null;#is=1;#ns=1;#ss=pt;#rs=1;#as={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#os=[null,null,null,null];constructor(t){super(t);const e=t.container,i=t.defaultViewport;this.renderingId="page"+this.id,this.#Jn=t.layerProperties||null,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||1,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.#ss=t.textLayerMode??pt,this.#Zn=t.annotationMode??d.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.enableDetailCanvas=t.enableDetailCanvas??!0,this.maxCanvasPixels=t.maxCanvasPixels??Qt.get("maxCanvasPixels"),this.maxCanvasDim=t.maxCanvasDim||Qt.get("maxCanvasDim"),this.capCanvasAreaFactor=t.capCanvasAreaFactor??Qt.get("capCanvasAreaFactor"),this.#qn=!1!==t.enableAutoLinking,this.l10n=t.l10n,this.l10n||=new xi,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=e,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null,this.detailView=null;const n=document.createElement("div");if(n.className="page",n.setAttribute("data-page-number",this.id),n.setAttribute("role","region"),n.setAttribute("data-l10n-id","pdfjs-page-landmark"),n.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=n,this.#ls(),e?.append(n),this._isStandalone){e?.style.setProperty("--scale-factor",this.scale*R.PDF_TO_CSS_UNITS),this.pageColors?.background&&e?.style.setProperty("--page-bg-color",this.pageColors.background);const{optionalContentConfigPromise:i}=t;i&&i.then(t=>{i===this._optionalContentConfigPromise&&(this.#as.initialOptionalContent=t.hasInitialVisibility)}),t.l10n||this.l10n.translate(this.div)}}#us(t,e){const i=ys.get(e),n=this.#os[i];if(this.#os[i]=t,n)n.replaceWith(t);else{for(let e=i-1;e>=0;e--){const i=this.#os[e];if(i)return void i.after(t)}this.div.prepend(t)}}#ls(){const{div:t,viewport:e}=this;if(e.userUnit!==this.#rs&&(1!==e.userUnit?t.style.setProperty("--user-unit",e.userUnit):t.style.removeProperty("--user-unit"),this.#rs=e.userUnit),this.pdfPage){if(this.#es===e.rotation)return;this.#es=e.rotation}H(t,e,!0,!1)}setPdfPage(t){!this._isStandalone||"CanvasText"!==this.pageColors?.foreground&&"Canvas"!==this.pageColors?.background||(this._container?.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=t,this.pdfPageRotate=t.rotate;const e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*R.PDF_TO_CSS_UNITS,rotation:e}),this.#ls(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return $(this,"_textHighlighter",new bs({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#Jn.findController}))}#ds(t,e){this.eventBus.dispatch(t,{source:this,pageNumber:this.id,error:e})}async#hs(){let t=null;try{await this.annotationLayer.render({viewport:this.viewport,intent:"display",structTreeLayer:this.structTreeLayer})}catch(e){console.error("#renderAnnotationLayer:",e),t=e}finally{this.#ds("annotationlayerrendered",t)}}async#cs(){let t=null;try{await this.annotationEditorLayer.render({viewport:this.viewport,intent:"display"})}catch(e){console.error("#renderAnnotationEditorLayer:",e),t=e}finally{this.#ds("annotationeditorlayerrendered",t)}}async#gs(){try{await this.drawLayer.render({intent:"display"})}catch(t){console.error("#renderDrawLayer:",t)}}async#ps(){let t=null;try{const t=await this.xfaLayer.render({viewport:this.viewport,intent:"display"});t?.textDivs&&this._textHighlighter&&this.#fs(t.textDivs)}catch(e){console.error("#renderXfaLayer:",e),t=e}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#us(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#ds("xfalayerrendered",t)}}async#ms(){if(!this.textLayer)return;let t=null;try{await this.textLayer.render({viewport:this.viewport})}catch(e){if(e instanceof s)return;console.error("#renderTextLayer:",e),t=e}this.#ds("textlayerrendered",t),this.#vs()}async#vs(){if(!this.textLayer)return;const t=await(this.structTreeLayer?.render());t&&(this.l10n.pause(),this.structTreeLayer?.addElementsToTextLayer(),this.canvas&&t.parentNode!==this.canvas&&this.canvas.append(t),this.l10n.resume()),this.structTreeLayer?.show()}async#fs(t){const e=await this.pdfPage.getTextContent(),i=[];for(const t of e.items)i.push(t.str);this._textHighlighter.setTextMapping(t,i),this._textHighlighter.enable()}async#bs(t){try{if(await t,!this.annotationLayer)return;await this.annotationLayer.injectLinkAnnotations({inferredLinks:ds.processLinks(this),viewport:this.viewport,structTreeLayer:this.structTreeLayer})}catch(t){console.error("#injectLinkAnnotations:",t)}}_resetCanvas(){super._resetCanvas(),this.#ts=null}reset({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,keepCanvasWrapper:s=!1,preserveDetailViewState:r=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:e,keepXfaLayer:i,keepTextLayer:n}),this.renderingState=it.INITIAL;const a=this.div,o=a.childNodes,l=t&&this.annotationLayer?.div||null,u=e&&this.annotationEditorLayer?.div||null,d=i&&this.xfaLayer?.div||null,h=n&&this.textLayer?.div||null,c=s&&this.#Kn||null;for(let t=o.length-1;t>=0;t--){const e=o[t];switch(e){case l:case u:case d:case h:case c:continue}e.remove();const i=this.#os.indexOf(e);i>=0&&(this.#os[i]=null)}a.removeAttribute("data-loaded"),l&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),h&&this.textLayer.hide(),this.structTreeLayer?.hide(),!s&&this.#Kn&&(this.#Kn=null,this._resetCanvas()),r||(this.detailView?.reset({keepCanvas:s}),s||(this.detailView=null))}toggleEditingMode(t){this.#O=t,this.hasEditableAnnotations()&&this.reset({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,keepCanvasWrapper:!0})}updateVisibleArea(t){this.enableDetailCanvas&&(this.#Qn&&this.maxCanvasPixels>0&&t?(this.detailView??=new gs({pageView:this}),this.detailView.update({visibleArea:t})):this.detailView&&(this.detailView.reset(),this.detailView=null))}update({scale:t=0,rotation:e=null,optionalContentConfigPromise:i=null,drawingDelay:n=-1}){this.scale=t||this.scale,"number"==typeof e&&(this.rotation=e),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(t=>{i===this._optionalContentConfigPromise&&(this.#as.initialOptionalContent=t.hasInitialVisibility)})),this.#as.directDrawing=!0;const s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*R.PDF_TO_CSS_UNITS,rotation:s}),this.#ls(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.#ws(),this.canvas){const t=this.#Yn&&this.#Qn,e=n>=0&&n<1e3;if(e||t)return e&&!t&&this.renderingState!==it.FINISHED&&(this.cancelRendering({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:n}),this.renderingState=it.FINISHED,this.#as.directDrawing=!1),this.cssTransform({redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!e,hideTextLayer:e}),void(e||(this.detailView?.update({underlyingViewUpdated:!0}),this.dispatchPageRendered(!0,!1)))}this.cssTransform({}),this.reset({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,keepCanvasWrapper:!0,preserveDetailViewState:!0}),this.detailView?.update({underlyingViewUpdated:!0})}#ws(){const{width:t,height:e}=this.viewport,i=this.outputScale=new k;if(0===this.maxCanvasPixels){const t=1/this.scale;i.sx*=t,i.sy*=t,this.#Qn=!0}else this.#Qn=i.limitCanvas(t,e,this.maxCanvasPixels,this.maxCanvasDim,this.capCanvasAreaFactor)}cancelRendering({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,cancelExtraDelay:s=0}={}){super.cancelRendering({cancelExtraDelay:s}),!this.textLayer||n&&this.textLayer.div||(this.textLayer.cancel(),this.textLayer=null),!this.annotationLayer||t&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationEditorLayer||e&&this.annotationEditorLayer.div||(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||i&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:e=!1,redrawXfaLayer:i=!1,redrawTextLayer:n=!1,hideTextLayer:s=!1}){const{canvas:r}=this;if(!r)return;const a=this.#ts;if(this.viewport!==a){const t=(360+this.viewport.rotation-a.rotation)%360;if(90===t||270===t){const{width:e,height:i}=this.viewport,n=i/e,s=e/i;r.style.transform=`rotate(${t}deg) scale(${n},${s})`}else r.style.transform=0===t?"":`rotate(${t}deg)`}t&&this.annotationLayer&&this.#hs(),e&&this.annotationEditorLayer&&(this.drawLayer&&this.#gs(),this.#cs()),i&&this.xfaLayer&&this.#ps(),this.textLayer&&(s?(this.textLayer.hide(),this.structTreeLayer?.hide()):n&&this.#ms())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,e){return this.viewport.convertToPdfPoint(t,e)}_ensureCanvasWrapper(){let t=this.#Kn;return t||(t=this.#Kn=document.createElement("div"),t.classList.add("canvasWrapper"),this.#us(t,"canvasWrapper")),t}_getRenderingContext(t,e){return{canvasContext:t,transform:e,viewport:this.viewport,annotationMode:this.#Zn,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors,isEditing:this.#O}}async draw(){this.renderingState!==it.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:t,l10n:e,pdfPage:i,viewport:n}=this;if(!i)throw this.renderingState=it.FINISHED,new Error("pdfPage is not loaded");this.renderingState=it.RUNNING;const s=this._ensureCanvasWrapper();if(this.textLayer||this.#ss===gt||i.isPureXfa||(this._accessibilityManager||=new vs,this.textLayer=new ws({pdfPage:i,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#ss===ft,onAppend:t=>{this.l10n.pause(),this.#us(t,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#Zn!==d.DISABLE){const{annotationStorage:t,annotationEditorUIManager:e,downloadManager:n,enableScripting:s,fieldObjectsPromise:r,hasJSActionsPromise:a,linkService:o}=this.#Jn;this._annotationCanvasMap||=new Map,this.annotationLayer=new as({pdfPage:i,annotationStorage:t,imageResourcesPath:this.imageResourcesPath,renderForms:this.#Zn===d.ENABLE_FORMS,linkService:o,downloadManager:n,enableScripting:s,hasJSActionsPromise:a,fieldObjectsPromise:r,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:e,onAppend:t=>{this.#us(t,"annotationLayer")}})}const{width:r,height:a}=n;this.#ts=n;const{canvas:o,prevCanvas:l,ctx:u}=this._createCanvas(t=>{s.prepend(t)});o.setAttribute("role","presentation"),this.outputScale||this.#ws();const{outputScale:h}=this;this.#Yn=this.#Qn;const c=_t(h.sx),g=_t(h.sy),p=o.width=Ft(Ht(r*h.sx),c[0]),f=o.height=Ft(Ht(a*h.sy),g[0]),m=Ft(Ht(r),c[1]),v=Ft(Ht(a),g[1]);h.sx=p/m,h.sy=f/v,this.#is!==c[1]&&(t.style.setProperty("--scale-round-x",`${c[1]}px`),this.#is=c[1]),this.#ns!==g[1]&&(t.style.setProperty("--scale-round-y",`${g[1]}px`),this.#ns=g[1]);const b=h.scaled?[h.sx,0,0,h.sy,0,0]:null,w=this._drawCanvas(this._getRenderingContext(u,b),()=>{l?.remove(),this._resetCanvas()},t=>{this.#as.regularAnnotations=!t.separateAnnots,this.dispatchPageRendered(!1,!1)}).then(async()=>{this.structTreeLayer||=new ms(i,n.rawDims);const t=this.#ms();this.annotationLayer&&(await this.#hs(),this.#qn&&this.annotationLayer&&this.textLayer&&await this.#bs(t));const{annotationEditorUIManager:r}=this.#Jn;r&&(this.drawLayer||=new cs({pageIndex:this.id}),await this.#gs(),this.drawLayer.setParent(s),this.annotationEditorLayer||=new rs({uiManager:r,pdfPage:i,l10n:e,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:t=>{this.#us(t,"annotationEditorLayer")}}),this.#cs())});if(i.isPureXfa){if(!this.xfaLayer){const{annotationStorage:t,linkService:e}=this.#Jn;this.xfaLayer=new Nn({pdfPage:i,annotationStorage:t,linkService:e})}this.#ps()}return t.setAttribute("data-loaded",!0),this.dispatchPageRender(),w}setPageLabel(t){this.pageLabel="string"==typeof t?t:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:t,initialOptionalContent:e,regularAnnotations:i}=this.#as;return t&&e&&i?this.canvas:null}}const Es=1e4,As=5e3,xs=250;function Ps(t){return Object.values(o).includes(t)&&t!==o.DISABLE}class Ss{#ys=new Set;#Cs=0;constructor(t){this.#Cs=t}push(t){const e=this.#ys;e.has(t)&&e.delete(t),e.add(t),e.size>this.#Cs&&this.#Es()}resize(t,e=null){this.#Cs=t;const i=this.#ys;if(e){const t=i.size;let n=1;for(const s of i)if(e.has(s.id)&&(i.delete(s),i.add(s)),++n>t)break}for(;i.size>this.#Cs;)this.#Es()}has(t){return this.#ys.has(t)}[Symbol.iterator](){return this.#ys.keys()}#Es(){const t=this.#ys.keys().next().value;t?.destroy(),this.#ys.delete(t)}}class _s{#As=null;#xs=null;#Ps=null;#Ss=o.NONE;#_s=null;#Zn=d.ENABLE_FORMS;#Fs=null;#Ts=null;#fn=!1;#Ds=!1;#Un=!1;#Bs=!1;#Is=!1;#qn=!0;#$e=null;#vn=0;#dt=null;#Ls=null;#ks=null;#Ms=null;#Ns=!1;#Os=null;#js=!1;#Vs=0;#ze=new ResizeObserver(this.#He.bind(this));#Rs=null;#Us=null;#zs=null;#Hs=!0;#ss=pt;constructor(t){const e="5.3.31";if(Q!==e)throw new Error(`The API version "${Q}" does not match the Viewer version "${e}".`);if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#ze.observe(this.container),this.eventBus=t.eventBus,this.linkService=t.linkService||new ie,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.#xs=t.altTextManager||null,this.#zs=t.signatureManager||null,this.#Ts=t.editorUndoBar||null,this.findController&&(this.findController.onIsPageVisible=t=>this._getVisiblePages().ids.has(t)),this._scriptingManager=t.scriptingManager||null,this.#ss=t.textLayerMode??pt,this.#Zn=t.annotationMode??d.ENABLE_FORMS,this.#Ss=t.annotationEditorMode??o.NONE,this.#Ps=t.annotationEditorHighlightColors||null,this.#Ds=!0===t.enableHighlightFloatingButton,this.#Bs=!0===t.enableUpdatedAddImage,this.#Is=!0===t.enableNewAltTextWhenAddingImage,this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.removePageBorders=t.removePageBorders||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.maxCanvasDim=t.maxCanvasDim,this.capCanvasAreaFactor=t.capCanvasAreaFactor,this.enableDetailCanvas=t.enableDetailCanvas??!0,this.l10n=t.l10n,this.l10n||=new xi,this.#Un=t.enablePermissions||!1,this.pageColors=t.pageColors||null,this.#dt=t.mlManager||null,this.#fn=t.enableHWA||!1,this.#Hs=!1!==t.supportsPinchToZoom,this.#qn=!1!==t.enableAutoLinking,this.#vn=t.minDurationToUpdateCanvas??500,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new Kn,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue;const{abortSignal:i}=t;i?.addEventListener("abort",()=>{this.#ze.disconnect(),this.#ze=null},{once:!0}),this.scroll=Et(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=nt,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#$s(),this.eventBus._on("thumbnailrendered",({pageNumber:t,pdfPage:e})=>{const i=this._pages[t-1];this.#As.has(i)||e?.cleanup()}),t.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}getCachedPageViews(){return new Set(this.#As)}get pageViewsReady(){return this._pages.every(t=>t?.pdfPage)}get renderForms(){return this.#Zn===d.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,e=!1){if(this._currentPageNumber===t)return e&&this.#Ws(),!0;if(!(0<t&&t<=this.pagesCount))return!1;const i=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels?.[t-1]??null,previous:i}),e&&this.#Ws(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(t){if(!this.pdfDocument)return;let e=0|t;if(this._pageLabels){const i=this._pageLabels.indexOf(t);i>=0&&(e=i+1)}this._setCurrentPageNumber(e,!0)||console.error(`currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#Gs(t,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&this.#Gs(t,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!It(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if((t%=360)<0&&(t+=360),this._pagesRotation===t)return;this._pagesRotation=t;const e=this._currentPageNumber;this.refresh(!0,{rotation:t}),this._currentScaleValue&&this.#Gs(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const t=this;return $(this,"_layerProperties",{get annotationEditorUIManager(){return t.#_s},get annotationStorage(){return t.pdfDocument?.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){return t.pdfDocument?.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){return t.pdfDocument?.hasJSActions()},get linkService(){return t.linkService}})}#Xs(t){const e={annotationEditorMode:this.#Ss,annotationMode:this.#Zn,textLayerMode:this.#ss};return t?(t.includes(V.COPY)||this.#ss!==pt||(e.textLayerMode=ft),t.includes(V.MODIFY_CONTENTS)||(e.annotationEditorMode=o.DISABLE),t.includes(V.MODIFY_ANNOTATIONS)||t.includes(V.FILL_INTERACTIVE_FORMS)||this.#Zn!==d.ENABLE_FORMS||(e.annotationMode=d.ENABLE),e):e}async#Zs(t){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return;const e=Promise.withResolvers(),i=new AbortController;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e.resolve()},{signal:AbortSignal.any([t,i.signal])}),await Promise.race([this._onePageRenderedCapability.promise,e.promise]),i.abort()}async getAllText(){const t=[],e=[];for(let i=1,n=this.pdfDocument.numPages;i<=n;++i){if(this.#js)return null;e.length=0;const n=await this.pdfDocument.getPage(i),{items:s}=await n.getTextContent();for(const t of s)t.str&&e.push(t.str),t.hasEOL&&e.push("\n");t.push(Pt(e.join("")))}return t.join("\n")}#Ks(t,e){const i=document.getSelection(),{focusNode:n,anchorNode:s}=i;if(s&&n&&i.containsNode(this.#Os)){if(this.#Ns||t===ft)return void G(e);this.#Ns=!0;const{classList:i}=this.viewer;i.add("copyAll");const n=new AbortController;window.addEventListener("keydown",t=>this.#js="Escape"===t.key,{signal:n.signal}),this.getAllText().then(async t=>{null!==t&&await navigator.clipboard.writeText(t)}).catch(t=>{console.warn(`Something goes wrong when extracting the text: ${t.message}`)}).finally(()=>{this.#Ns=!1,this.#js=!1,n.abort(),i.remove("copyAll")}),G(e)}}setDocument(t){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#_s?.destroy(),this.#_s=null),this.pdfDocument=t,!t)return;const e=t.numPages,i=t.getPage(1),n=t.getOptionalContentConfig({intent:"display"}),s=this.#Un?t.getPermissions():Promise.resolve(),{eventBus:r,pageColors:a,viewer:u}=this;this.#$e=new AbortController;const{signal:d}=this.#$e;if(e>Es){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const t=this._scrollMode=mt.PAGE;r.dispatch("scrollmodechanged",{source:this,mode:t})}this._pagesCapability.promise.then(()=>{r.dispatch("pagesloaded",{source:this,pagesCount:e})},()=>{});r._on("pagerender",t=>{const e=this._pages[t.pageNumber-1];e&&this.#As.push(e)},{signal:d});const h=t=>{t.cssTransform||t.isDetailView||(this._onePageRenderedCapability.resolve({timestamp:t.timestamp}),r._off("pagerendered",h))};r._on("pagerendered",h,{signal:d}),Promise.all([i,s]).then(([i,s])=>{if(t!==this.pdfDocument)return;this._firstPageCapability.resolve(i),this._optionalContentConfigPromise=n;const{annotationEditorMode:h,annotationMode:c,textLayerMode:g}=this.#Xs(s);if(g!==gt){const t=this.#Os=document.createElement("div");t.id="hiddenCopyElement",u.before(t)}if(h!==o.DISABLE){const e=h;t.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):Ps(e)?(this.#_s=new l(this.container,u,this.#xs,this.#zs,r,t,a,this.#Ps,this.#Ds,this.#Bs,this.#Is,this.#dt,this.#Ts,this.#Hs),r.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#_s}),e!==o.NONE&&(this.#qs(e),this.#_s.updateMode(e))):console.error(`Invalid AnnotationEditor mode: ${e}`)}const p=this._scrollMode===mt.PAGE?null:u,f=this.currentScale,m=i.getViewport({scale:f*R.PDF_TO_CSS_UNITS});u.style.setProperty("--scale-factor",m.scale),a?.background&&u.style.setProperty("--page-bg-color",a.background),"CanvasText"!==a?.foreground&&"Canvas"!==a?.background||(u.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),u.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let t=1;t<=e;++t){const e=new Cs({container:p,eventBus:r,id:t,scale:f,defaultViewport:m.clone(),optionalContentConfigPromise:n,renderingQueue:this.renderingQueue,textLayerMode:g,annotationMode:c,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,maxCanvasDim:this.maxCanvasDim,capCanvasAreaFactor:this.capCanvasAreaFactor,enableDetailCanvas:this.enableDetailCanvas,pageColors:a,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#fn,enableAutoLinking:this.#qn,minDurationToUpdateCanvas:this.#vn});this._pages.push(e)}this._pages[0]?.setPdfPage(i),this._scrollMode===mt.PAGE?this.#Ys():this._spreadMode!==vt.NONE&&this._updateSpreadMode(),this.#Zs(d).then(async()=>{if(t!==this.pdfDocument)return;if(this.findController?.setDocument(t),this._scriptingManager?.setDocument(t),this.#Os&&document.addEventListener("copy",this.#Ks.bind(this,g),{signal:d}),this.#_s&&r.dispatch("annotationeditormodechanged",{source:this,mode:this.#Ss}),t.loadingParams.disableAutoFetch||e>As)return void this._pagesCapability.resolve();let i=e-1;if(i<=0)this._pagesCapability.resolve();else for(let n=2;n<=e;++n){const e=t.getPage(n).then(t=>{const e=this._pages[n-1];e.pdfPage||e.setPdfPage(t),0===--i&&this._pagesCapability.resolve()},t=>{console.error(`Unable to get page ${n} to initialize viewer`,t),0===--i&&this._pagesCapability.resolve()});n%xs===0&&await e}}),r.dispatch("pagesinit",{source:this}),t.getMetadata().then(({info:e})=>{t===this.pdfDocument&&e.Language&&(u.lang=e.Language)}),this.defaultRenderingQueue&&this.update()}).catch(t=>{console.error("Unable to initialize viewer",t),this._pagesCapability.reject(t)})}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,e=this._pages.length;t<e;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,this.#As=new Ss(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=mt.VERTICAL,this._previousScrollMode=mt.UNKNOWN,this._spreadMode=vt.NONE,this.#Rs={previousPageNumber:1,scrollDown:!0,pages:[]},this.#$e?.abort(),this.#$e=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#Os?.remove(),this.#Os=null,this.#Js(),this.#Qs()}#Ys(){if(this._scrollMode!==mt.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const t=this._currentPageNumber,e=this.#Rs,i=this.viewer;if(i.textContent="",e.pages.length=0,this._spreadMode!==vt.NONE||this.isInPresentationMode){const n=new Set,s=this._spreadMode-1;-1===s?n.add(t-1):t%2!==s?(n.add(t-1),n.add(t)):(n.add(t-2),n.add(t-1));const r=document.createElement("div");if(r.className="spread",this.isInPresentationMode){const t=document.createElement("div");t.className="dummyPage",r.append(t)}for(const t of n){const i=this._pages[t];i&&(r.append(i.div),e.pages.push(i))}i.append(r)}else{const n=this._pages[t-1];i.append(n.div),e.pages.push(n)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t}_scrollUpdate(){0!==this.pagesCount&&(this.#Ls&&clearTimeout(this.#Ls),this.#Ls=setTimeout(()=>{this.#Ls=null,this.update()},100),this.update())}#tr(t,e=null){const{div:i,id:n}=t;if(this._currentPageNumber!==n&&this._setCurrentPageNumber(n),this._scrollMode===mt.PAGE&&(this.#Ys(),this.update()),!e&&!this.isInPresentationMode){const t=i.offsetLeft+i.clientLeft,n=t+i.clientWidth,{scrollLeft:s,clientWidth:r}=this.container;(this._scrollMode===mt.HORIZONTAL||t<s||n>s+r)&&(e={left:0,top:0})}Ct(i,e),!this._currentScaleValue&&this._location&&(this._location=null)}#er(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}#ir(t,e,{noScroll:i=!1,preset:n=!1,drawingDelay:s=-1,origin:r=null}){if(this._currentScaleValue=e.toString(),this.#er(t))return void(n&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e}));this.viewer.style.setProperty("--scale-factor",t*R.PDF_TO_CSS_UNITS);const a=s>=0&&s<1e3;this.refresh(!0,{scale:t,drawingDelay:a?s:-1}),a&&(this.#Us=setTimeout(()=>{this.#Us=null,this.refresh()},s));const o=this._currentScale;if(this._currentScale=t,!i){let e,i=this._currentPageNumber;if(!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(i=this._location.pageNumber,e=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:i,destArray:e,allowNegativeOffset:!0}),Array.isArray(r)){const e=t/o-1,[i,n]=this.containerTopLeft;this.container.scrollLeft+=(r[0]-n)*e,this.container.scrollTop+=(r[1]-i)*e}}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:n?e:void 0}),this.defaultRenderingQueue&&this.update()}get#nr(){return this._spreadMode!==vt.NONE&&this._scrollMode!==mt.HORIZONTAL?2:1}#Gs(t,e){let i=parseFloat(t);if(i>0)e.preset=!1,this.#ir(i,t,e);else{const n=this._pages[this._currentPageNumber-1];if(!n)return;let s=40,r=5;this.isInPresentationMode?(s=r=4,this._spreadMode!==vt.NONE&&(s*=2)):this.removePageBorders?s=r=0:this._scrollMode===mt.HORIZONTAL&&([s,r]=[r,s]);const a=(this.container.clientWidth-s)/n.width*n.scale/this.#nr,o=(this.container.clientHeight-r)/n.height*n.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=o;break;case"page-fit":i=Math.min(a,o);break;case"auto":const e=Mt(n)?a:Math.min(o,a);i=Math.min(1.25,e);break;default:return void console.error(`#setScale: "${t}" is an unknown zoom value.`)}e.preset=!0,this.#ir(i,t,e)}}#Ws(){const t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#Gs(this._currentScaleValue,{noScroll:!0}),this.#tr(t)}pageLabelToPageNumber(t){if(!this._pageLabels)return null;const e=this._pageLabels.indexOf(t);return e<0?null:e+1}scrollPageIntoView({pageNumber:t,destArray:e=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:n=!1}){if(!this.pdfDocument)return;const s=Number.isInteger(t)&&this._pages[t-1];if(!s)return void console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!e)return void this._setCurrentPageNumber(t,!0);let r,a,o=0,l=0,u=0,d=0;const h=s.rotation%180!=0,c=(h?s.height:s.width)/s.scale/R.PDF_TO_CSS_UNITS,g=(h?s.width:s.height)/s.scale/R.PDF_TO_CSS_UNITS;let p=0;switch(e[1].name){case"XYZ":o=e[2],l=e[3],p=e[4],o=null!==o?o:0,l=null!==l?l:g;break;case"Fit":case"FitB":p="page-fit";break;case"FitH":case"FitBH":l=e[2],p="page-width",null===l&&this._location?(o=this._location.left,l=this._location.top):("number"!=typeof l||l<0)&&(l=g);break;case"FitV":case"FitBV":o=e[2],u=c,d=g,p="page-height";break;case"FitR":o=e[2],l=e[3],u=e[4]-o,d=e[5]-l;let t=40,i=5;this.removePageBorders&&(t=i=0),r=(this.container.clientWidth-t)/u/R.PDF_TO_CSS_UNITS,a=(this.container.clientHeight-i)/d/R.PDF_TO_CSS_UNITS,p=Math.min(Math.abs(r),Math.abs(a));break;default:return void console.error(`scrollPageIntoView: "${e[1].name}" is not a valid destination type.`)}if(n||(p&&p!==this._currentScale?this.currentScaleValue=p:0===this._currentScale&&(this.currentScaleValue=et)),"page-fit"===p&&!e[4])return void this.#tr(s);const f=[s.viewport.convertToViewportPoint(o,l),s.viewport.convertToViewportPoint(o+u,l+d)];let m=Math.min(f[0][0],f[1][0]),v=Math.min(f[0][1],f[1][1]);i||(m=Math.max(m,0),v=Math.max(v,0)),this.#tr(s,{left:m,top:v})}_updateLocation(t){const e=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===e?Math.round(1e4*e)/100:i,s=t.id,r=this._pages[s-1],a=this.container,o=r.getPagePoint(a.scrollLeft-t.x,a.scrollTop-t.y),l=Math.round(o[0]),u=Math.round(o[1]);let d=`#page=${s}`;this.isInPresentationMode||(d+=`&zoom=${n},${l},${u}`),this._location={pageNumber:s,scale:n,top:u,left:l,rotation:this._pagesRotation,pdfOpenParams:d}}update(){const t=this._getVisiblePages(),e=t.views,i=e.length;if(0===i)return;const n=Math.max(10,2*i+1);this.#As.resize(n,t.ids);for(const{view:t,visibleArea:i}of e)t.updateVisibleArea(i);for(const e of this.#As)t.ids.has(e.id)||e.updateVisibleArea(null);this.renderingQueue.renderHighestPriority(t);const s=this._spreadMode===vt.NONE&&(this._scrollMode===mt.PAGE||this._scrollMode===mt.VERTICAL),r=this._currentPageNumber;let a=!1;for(const t of e){if(t.percent<100)break;if(t.id===r&&s){a=!0;break}}this._setCurrentPageNumber(a?r:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#sr(){const t=this._getVisiblePages(),e=[],{ids:i,views:n}=t;for(const t of n){const{view:n}=t;n.hasEditableAnnotations()?e.push(t):i.delete(n.id)}return 0===e.length?null:(this.renderingQueue.renderHighestPriority({first:e[0],last:e.at(-1),views:e,ids:i}),i)}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===at}get isChangingPresentationMode(){return this.presentationModeState===rt}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const t=this._scrollMode===mt.PAGE?this.#Rs.pages:this._pages,e=this._scrollMode===mt.HORIZONTAL,i=e&&this._isContainerRtl;return Dt({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:i})}cleanup(){for(const t of this._pages)t.renderingState!==it.FINISHED&&t.reset()}_cancelRendering(){for(const t of this._pages)t.cancelRendering()}async#tn(t){if(t.pdfPage)return t.pdfPage;try{const e=await this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),e}catch(t){return console.error("Unable to get page for page view",t),null}}#en(t){if(1===t.first?.id)return!0;if(t.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case mt.PAGE:return this.#Rs.scrollDown;case mt.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(t){const e=t||this._getVisiblePages(),i=this.#en(e),n=this._spreadMode!==vt.NONE&&this._scrollMode!==mt.HORIZONTAL,s=null!==this.#Us||null!==this.#Ls&&e.views.some(t=>t.detailView?.renderingCancelled),r=this.renderingQueue.getHighestPriority(e,this._pages,i,n,s);return!!r&&(this.#tn(r).then(()=>{this.renderingQueue.renderView(r)}),!0)}get hasEqualPageSizes(){const t=this._pages[0];for(let e=1,i=this._pages.length;e<i;++e){const i=this._pages[e];if(i.width!==t.width||i.height!==t.height)return!1}return!0}getPagesOverview(){let t;return this._pages.map(e=>{const i=e.pdfPage.getViewport({scale:1}),n=Mt(i);if(void 0===t)t=n;else if(this.enablePrintAutoRotate&&n!==t)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=t,this.refresh(!1,{optionalContentConfigPromise:t}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t}))}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!Lt(t))throw new Error(`Invalid scroll mode: ${t}`);this.pagesCount>Es||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(t=null){const e=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",e===mt.HORIZONTAL),i.classList.toggle("scrollWrapped",e===mt.WRAPPED),this.pdfDocument&&t&&(e===mt.PAGE?this.#Ys():this._previousScrollMode===mt.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#Gs(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!kt(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;const e=this.viewer,i=this._pages;if(this._scrollMode===mt.PAGE)this.#Ys();else if(e.textContent="",this._spreadMode===vt.NONE)for(const t of this._pages)e.append(t.div);else{const t=this._spreadMode-1;let n=null;for(let s=0,r=i.length;s<r;++s)null===n?(n=document.createElement("div"),n.className="spread",e.append(n)):s%2===t&&(n=n.cloneNode(!1),e.append(n)),n.append(i[s].div)}t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#Gs(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}_getPageAdvance(t,e=!1){switch(this._scrollMode){case mt.WRAPPED:{const{views:i}=this._getVisiblePages(),n=new Map;for(const{id:t,y:e,percent:s,widthPercent:r}of i){if(0===s||r<100)continue;let i=n.get(e);i||n.set(e,i||=[]),i.push(t)}for(const i of n.values()){const n=i.indexOf(t);if(-1===n)continue;const s=i.length;if(1===s)break;if(e)for(let e=n-1,s=0;e>=s;e--){const n=i[e],s=i[e+1]-1;if(n<s)return t-s}else for(let e=n+1,r=s;e<r;e++){const n=i[e],s=i[e-1]+1;if(n>s)return s-t}if(e){const e=i[0];if(e<t)return t-e+1}else{const e=i[s-1];if(e>t)return e-t+1}break}break}case mt.HORIZONTAL:break;case mt.PAGE:case mt.VERTICAL:{if(this._spreadMode===vt.NONE)break;const i=this._spreadMode-1;if(e&&t%2!==i)break;if(!e&&t%2===i)break;const{views:n}=this._getVisiblePages(),s=e?t-1:t+1;for(const{id:t,percent:e,widthPercent:i}of n)if(t===s){if(e>0&&100===i)return 2;break}break}}return 1}nextPage(){const t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;const i=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+i,e),!0}previousPage(){const t=this._currentPageNumber;if(t<=1)return!1;const e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}updateScale({drawingDelay:t,scaleFactor:e=null,steps:i=null,origin:n}){if(null===i&&null===e)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(e>0&&1!==e)s=Math.round(s*e*100)/100;else if(i){const t=i>0?1.1:1/1.1,e=i>0?Math.ceil:Math.floor;i=Math.abs(i);do{s=e(10*(s*t).toFixed(2))/10}while(--i>0)}s=D(s,.1,10),this.#Gs(s,{noScroll:!1,drawingDelay:t,origin:n})}increaseScale(t={}){this.updateScale({...t,steps:t.steps??1})}decreaseScale(t={}){this.updateScale({...t,steps:-(t.steps??1)})}#$s(t=this.container.clientHeight){t!==this.#Vs&&(this.#Vs=t,Ot.setProperty("--viewer-container-height",`${t}px`))}#He(t){for(const e of t)if(e.target===this.container){this.#$s(Math.floor(e.borderBoxSize[0].blockSize)),this.#Fs=null;break}}get containerTopLeft(){return this.#Fs||=[this.container.offsetTop,this.container.offsetLeft]}#Js(){null!==this.#Us&&(clearTimeout(this.#Us),this.#Us=null),null!==this.#Ls&&(clearTimeout(this.#Ls),this.#Ls=null)}#Qs(){this.#ks?.abort(),this.#ks=null,null!==this.#Ms&&(clearTimeout(this.#Ms),this.#Ms=null)}#qs(t){switch(t){case o.STAMP:this.#dt?.loadModel("altText");break;case o.SIGNATURE:this.#zs?.loadSignatures()}}get annotationEditorMode(){return this.#_s?this.#Ss:o.DISABLE}set annotationEditorMode({mode:t,editId:e=null,isFromKeyboard:i=!1}){if(!this.#_s)throw new Error("The AnnotationEditor is not enabled.");if(this.#Ss===t)return;if(!Ps(t))throw new Error(`Invalid AnnotationEditor mode: ${t}`);if(!this.pdfDocument)return;this.#qs(t);const{eventBus:n,pdfDocument:s}=this,r=async()=>{this.#Qs(),this.#Ss=t,await this.#_s.updateMode(t,e,i),t===this.#Ss&&s===this.pdfDocument&&n.dispatch("annotationeditormodechanged",{source:this,mode:t})};if(t===o.NONE||this.#Ss===o.NONE){const e=t!==o.NONE;e||this.pdfDocument.annotationStorage.resetModifiedIds();for(const t of this._pages)t.toggleEditingMode(e);const i=this.#sr();if(e&&i){this.#Qs(),this.#ks=new AbortController;const t=AbortSignal.any([this.#$e.signal,this.#ks.signal]);return void n._on("pagerendered",({pageNumber:t})=>{i.delete(t),0===i.size&&(this.#Ms=setTimeout(r,0))},{signal:t})}}r()}refresh(t=!1,e=Object.create(null)){if(this.pdfDocument){for(const t of this._pages)t.update(e);this.#Js(),t||this.update()}}}class Fs{#r;constructor(t,e){this.#r=t;const i=[{element:t.presentationModeButton,eventName:"presentationmode",close:!0},{element:t.printButton,eventName:"print",close:!0},{element:t.downloadButton,eventName:"download",close:!0},{element:t.viewBookmarkButton,eventName:null,close:!0},{element:t.firstPageButton,eventName:"firstpage",close:!0},{element:t.lastPageButton,eventName:"lastpage",close:!0},{element:t.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:t.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:t.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:bt},close:!0},{element:t.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:wt},close:!0},{element:t.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:mt.PAGE},close:!0},{element:t.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:mt.VERTICAL},close:!0},{element:t.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:mt.HORIZONTAL},close:!0},{element:t.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:mt.WRAPPED},close:!0},{element:t.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:vt.NONE},close:!0},{element:t.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:vt.ODD},close:!0},{element:t.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:vt.EVEN},close:!0},{element:t.imageAltTextSettingsButton,eventName:"imagealttextsettings",close:!0},{element:t.documentPropertiesButton,eventName:"documentproperties",close:!0}];i.push({element:t.openFileButton,eventName:"openfile",close:!0}),this.eventBus=e,this.opened=!1,this.#It(i),this.reset()}get isOpen(){return this.opened}setPageNumber(t){this.pageNumber=t,this.#_t()}setPagesCount(t){this.pagesCount=t,this.#_t()}reset(){this.pageNumber=0,this.pagesCount=0,this.#_t(),this.eventBus.dispatch("switchcursortool",{source:this,reset:!0}),this.#rr({mode:mt.VERTICAL}),this.#ar({mode:vt.NONE})}#_t(){const{firstPageButton:t,lastPageButton:e,pageRotateCwButton:i,pageRotateCcwButton:n}=this.#r;t.disabled=this.pageNumber<=1,e.disabled=this.pageNumber>=this.pagesCount,i.disabled=0===this.pagesCount,n.disabled=0===this.pagesCount}#It(t){const{eventBus:e}=this,{toggleButton:i}=this.#r;i.addEventListener("click",this.toggle.bind(this));for(const{element:i,eventName:n,close:s,eventDetails:r}of t)i.addEventListener("click",t=>{null!==n&&e.dispatch(n,{source:this,...r}),s&&this.close(),e.dispatch("reporttelemetry",{source:this,details:{type:"buttons",data:{id:i.id}}})});e._on("cursortoolchanged",this.#or.bind(this)),e._on("scrollmodechanged",this.#rr.bind(this)),e._on("spreadmodechanged",this.#ar.bind(this))}#or({tool:t,disabled:e}){const{cursorSelectToolButton:i,cursorHandToolButton:n}=this.#r;Ut(i,t===bt),Ut(n,t===wt),i.disabled=e,n.disabled=e}#rr({mode:t}){const{scrollPageButton:e,scrollVerticalButton:i,scrollHorizontalButton:n,scrollWrappedButton:s,spreadNoneButton:r,spreadOddButton:a,spreadEvenButton:o}=this.#r;Ut(e,t===mt.PAGE),Ut(i,t===mt.VERTICAL),Ut(n,t===mt.HORIZONTAL),Ut(s,t===mt.WRAPPED);const l=this.pagesCount>Es;e.disabled=l,i.disabled=l,n.disabled=l,s.disabled=l;const u=t===mt.HORIZONTAL;r.disabled=u,a.disabled=u,o.disabled=u}#ar({mode:t}){const{spreadNoneButton:e,spreadOddButton:i,spreadEvenButton:n}=this.#r;Ut(e,t===vt.NONE),Ut(i,t===vt.ODD),Ut(n,t===vt.EVEN)}open(){if(this.opened)return;this.opened=!0;const{toggleButton:t,toolbar:e}=this.#r;zt(t,!0,e)}close(){if(!this.opened)return;this.opened=!1;const{toggleButton:t,toolbar:e}=this.#r;zt(t,!1,e)}toggle(){this.opened?this.close():this.open()}}class Ts{#lr;#ur=null;#dr;#hr;#_;#cr;#D;#gr=null;#pr;#fr=null;#mr="";#vr=null;#br;#wr;#yr;#Cr=null;#Er=null;#Ar;#xr;#Pr;#Sr;#_r;#Fr;#Tr;#Dr;#Br=null;#Ir;#Lr=null;#kr=null;#Mr=!1;#y;#c;#$;#Nr;#Or;#X=null;static#jr=null;constructor({dialog:t,panels:e,typeButton:i,typeInput:n,drawButton:s,drawPlaceholder:r,drawSVG:a,drawThickness:o,imageButton:l,imageSVG:u,imagePlaceholder:d,imagePicker:h,imagePickerLink:c,description:g,clearButton:p,cancelButton:f,addButton:m,errorCloseButton:v,errorBar:b,saveCheckbox:w,saveContainer:y},C,E,A,x,P,S){this.#lr=m,this.#dr=p,this.#hr=g.lastElementChild,this.#cr=g.firstElementChild,this.#D=t,this.#br=a,this.#pr=r,this.#wr=o,this.#yr=b,this.#Sr=u,this.#Pr=d,this.#Ar=h,this.#xr=c,this.#$=A,this.#_r=w,this.#Fr=y,this.#Dr=E,this.#Ir=n,this.#c=x,this.#Or=P,this.#y=S,this.#Nr=new Ds(C,A),Ts.#jr||=Object.freeze({signature:"pdfjs-editor-add-signature-description-default-when-drawing"}),t.addEventListener("close",this.#K.bind(this)),t.addEventListener("contextmenu",t=>{const{target:e}=t;e!==this.#Ir&&e!==this.#cr&&t.preventDefault()}),t.addEventListener("drop",t=>{G(t)}),f.addEventListener("click",this.#P.bind(this)),m.addEventListener("click",this.#Vr.bind(this)),p.addEventListener("click",()=>{this.#gt({type:"signature",action:"pdfjs.signature.clear",data:{type:this.#Lr}}),this.#Rr(null)},{passive:!0}),this.#cr.addEventListener("input",()=>{this.#hr.disabled=""===this.#cr.value},{passive:!0}),this.#hr.addEventListener("click",()=>{this.#cr.value="",this.#hr.disabled=!0},{passive:!0}),v.addEventListener("click",()=>{b.hidden=!0},{passive:!0}),this.#Ur(i,s,l,e),h.accept=X.join(","),S._on("storedsignatureschanged",this.#zr.bind(this)),A.register(t)}#Ur(t,e,i,n){const s=this.#Tr=new Map([["type",t],["draw",e],["image",i]]),r=t=>{for(const[e,i]of s)i===t.target?(i.setAttribute("aria-selected",!0),i.setAttribute("tabindex",0),n.setAttribute("data-selected",e),this.#Rr(e)):(i.setAttribute("aria-selected",!1),i.setAttribute("tabindex",-1))},a=Array.from(s.values());for(let t=0,e=a.length;t<e;t++){const e=a[t];e.addEventListener("click",r,{passive:!0}),e.addEventListener("keydown",({key:e})=>{"ArrowLeft"!==e&&"ArrowRight"!==e||a[t+("ArrowLeft"===e?-1:1)]?.focus()},{passive:!0})}}#Hr(){this.#Mr=!1,this.#cr.value="",this.#Lr&&(this.#ur.get(this.#Lr).value="")}#$r(t){switch(t){case"type":this.#Ir.value="";break;case"draw":this.#gr=null,this.#vr=null,this.#mr="",this.#fr?.remove(),this.#fr=null,this.#pr.hidden=!1,this.#wr.value=1;break;case"image":this.#Pr.hidden=!1,this.#Er?.remove(),this.#Er=null}}#Rr(t){if(t&&this.#Lr===t)return;this.#Lr&&(this.#ur.get(this.#Lr).value=this.#cr.value),t&&(this.#Lr=t),this.#yr.hidden=!0;const e=!t;switch(e?this.#Hr():this.#cr.value=this.#ur.get(this.#Lr).value,this.#hr.disabled=""===this.#cr.value,this.#kr?.abort(),this.#kr=new AbortController,this.#Lr){case"type":this.#Wr(e);break;case"draw":this.#Gr(e);break;case"image":this.#Xr(e)}}#Zr(t){this.#_r.disabled=this.#dr.disabled=this.#lr.disabled=this.#cr.disabled=!t}#Wr(t){t&&this.#$r("type"),this.#Zr(this.#Ir.value);const{signal:e}=this.#kr,i={passive:!0,signal:e};this.#Ir.addEventListener("input",()=>{const{value:t}=this.#Ir;this.#Mr||(this.#ur.get("type").default=this.#cr.value=t,this.#hr.disabled=""===t),this.#Zr(t)},i),this.#cr.addEventListener("input",()=>{this.#Mr=this.#Ir.value!==this.#cr.value},i)}#Gr(t){t&&this.#$r("draw"),this.#Zr(this.#fr);const{signal:e}=this.#kr,i={signal:e};let n=NaN;const s=t=>{const{pointerId:r}=t;if(!isNaN(n)&&n!==r)return;n=r,t.preventDefault(),this.#br.setPointerCapture(r);const{width:a,height:o}=this.#br.getBoundingClientRect();let{offsetX:l,offsetY:u}=t;if(l=Math.round(l),u=Math.round(u),t.target===this.#pr&&(this.#pr.hidden=!0),!this.#gr){this.#gr={width:a,height:o,thickness:parseInt(this.#wr.value),curves:[]},this.#Zr(!0);const t=new f,e=this.#fr=t.createElement("path");e.setAttribute("stroke-width",this.#wr.value),this.#br.append(e),this.#br.addEventListener("pointerdown",s,i),this.#pr.removeEventListener("pointerdown",s),""===this.#cr.value&&this.#c.get(Ts.#jr.signature).then(t=>{this.#ur.get("draw").default=t,this.#cr.value||=t,this.#hr.disabled=""===this.#cr.value})}this.#vr=[l,u],this.#gr.curves.push({points:this.#vr}),this.#mr+=`M ${l} ${u}`,this.#fr.setAttribute("d",this.#mr);const d=new AbortController,h={signal:AbortSignal.any([e,d.signal])};this.#br.addEventListener("contextmenu",B,h),this.#br.addEventListener("pointermove",t=>{t.preventDefault();let{offsetX:e,offsetY:i}=t;e=Math.round(e),i=Math.round(i);const n=this.#vr;if(!(e<0||i<0||e>a||i>o||e===n.at(-2)&&i===n.at(-1))){if(n.length>=4){const[t,s,r,a]=n.slice(-4);this.#mr+=`C${(t+5*r)/6} ${(s+5*a)/6} ${(5*r+e)/6} ${(5*a+i)/6} ${(r+e)/2} ${(a+i)/2}`}else this.#mr+=`L${e} ${i}`;n.push(e,i),this.#fr.setAttribute("d",this.#mr)}},h),this.#br.addEventListener("pointerup",t=>{const{pointerId:e}=t;(isNaN(n)||n===e)&&(n=NaN,t.preventDefault(),this.#br.releasePointerCapture(e),d.abort(),2===this.#vr.length&&(this.#mr+=`L${this.#vr[0]} ${this.#vr[1]}`,this.#fr.setAttribute("d",this.#mr)))},h)};this.#gr?this.#br.addEventListener("pointerdown",s,i):this.#pr.addEventListener("pointerdown",s,i),this.#wr.addEventListener("input",()=>{const{value:t}=this.#wr;this.#wr.setAttribute("data-l10n-args",JSON.stringify({thickness:t})),this.#gr&&(this.#fr.setAttribute("stroke-width",t),this.#gr.thickness=t)},i)}#Xr(t){t&&this.#$r("image"),this.#Zr(this.#Er);const{signal:e}=this.#kr,i={signal:e},n={passive:!0,signal:e};this.#xr.addEventListener("keydown",t=>{const{key:e}=t;"Enter"!==e&&" "!==e||(G(t),this.#Ar.click())},i),this.#Ar.addEventListener("click",()=>{this.#D.classList.toggle("waiting",!0)},n),this.#Ar.addEventListener("change",async()=>{const t=this.#Ar.files?.[0];if(!t||!X.includes(t.type))return this.#yr.hidden=!1,void this.#D.classList.toggle("waiting",!1);await this.#Kr(t)},n),this.#Ar.addEventListener("cancel",()=>{this.#D.classList.toggle("waiting",!1)},n),this.#Pr.addEventListener("dragover",t=>{const{dataTransfer:e}=t;for(const{type:i}of e.items)if(X.includes(i))return e.dropEffect="copy"===e.effectAllowed?"copy":"move",void G(t);e.dropEffect="none"},i),this.#Pr.addEventListener("drop",t=>{const{dataTransfer:{files:e}}=t;if(e?.length){for(const t of e)if(X.includes(t.type)){this.#Kr(t);break}G(t),this.#D.classList.toggle("waiting",!0)}},i)}async#Kr(t){let e;try{e=await this.#X.imageManager.getFromFile(t)}catch(t){console.error("SignatureManager.#extractSignature.",t)}if(!e)return this.#yr.hidden=!1,void this.#D.classList.toggle("waiting",!1);const{outline:i}=this.#Cr=this.#_.getFromImage(e.bitmap);if(!i)return void this.#D.classList.toggle("waiting",!1);this.#Pr.hidden=!0,this.#Zr(!0);const n=new f,s=this.#Er=n.createElement("path");this.#Sr.setAttribute("viewBox",i.viewBox),this.#Sr.setAttribute("preserveAspectRatio","xMidYMid meet"),this.#Sr.append(s),s.setAttribute("d",i.toSVGPath()),this.#ur.get("image").default=t.name,""===this.#cr.value&&(this.#cr.value=t.name||"",this.#hr.disabled=""===this.#cr.value),this.#D.classList.toggle("waiting",!1)}#qr(){return this.#_.getFromText(this.#Ir.value,window.getComputedStyle(this.#Ir))}#Yr(){const{width:t,height:e}=this.#br.getBoundingClientRect();return this.#_.getDrawnSignature(this.#gr,t,e)}#gt(t){this.#y.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}#Jr(t,e,i){const{curves:n,areContours:s,thickness:r,width:o,height:l}=t,u=Math.max(o,l),d=W.processDrawnLines({lines:{curves:n,thickness:r,width:o,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});if(!d)return;const{outline:h}=d,c=new f,g=document.createElement("div"),p=document.createElement("button");p.addEventListener("click",()=>{this.#y.dispatch("switchannotationeditorparams",{source:this,type:a.CREATE,value:{signatureData:{lines:{curves:n,thickness:r,width:o,height:l},mustSmooth:!1,areContours:s,description:i,uuid:e,heightInPage:40}}})}),g.append(p),g.classList.add("toolbarAddSignatureButtonContainer");const m=c.create(1,1,!0);p.append(m);const v=document.createElement("span");v.ariaHidden=!0,p.append(v),p.classList.add("toolbarAddSignatureButton"),p.type="button",v.textContent=i,p.setAttribute("data-l10n-id","pdfjs-editor-add-saved-signature-button"),p.setAttribute("data-l10n-args",JSON.stringify({description:i})),p.tabIndex=0;const b=c.createElement("path");m.append(b),m.setAttribute("viewBox",h.viewBox),m.setAttribute("preserveAspectRatio","xMidYMid meet"),s&&b.classList.add("contours"),b.setAttribute("d",h.toSVGPath());const w=document.createElement("button");g.append(w),w.classList.add("toolbarButton","deleteButton"),w.setAttribute("data-l10n-id","pdfjs-editor-delete-signature-button1"),w.type="button",w.tabIndex=0,w.addEventListener("click",async()=>{await this.#Or.delete(e)&&(g.remove(),this.#gt({type:"signature",action:"pdfjs.signature.delete_saved",data:{savedCount:await this.#Or.size()}}))});const y=document.createElement("span");w.append(y),y.setAttribute("data-l10n-id","pdfjs-editor-delete-signature-button-label1"),this.#Dr.before(g)}async#zr(){const t=this.#Dr.parentElement;for(;t.firstElementChild!==this.#Dr;)t.firstElementChild.remove();this.#Br=null,await this.loadSignatures(!0)}getSignature(t){return this.open(t)}async loadSignatures(t=!1){if(!this.#Dr||!t&&this.#Dr.previousElementSibling||!this.#Or)return;if(!this.#Br&&(this.#Br=this.#Or.getAll().then(async t=>[t,await Promise.all(Array.from(t.values(),({signatureData:t})=>W.decompressSignature(t)))]),!t))return;const[e,i]=await this.#Br;this.#Br=null;let n=0;for(const[t,{description:s}]of e){const e=i[n++];e&&(e.curves=e.outlines.map(t=>({points:t})),delete e.outlines,this.#Jr(e,t,s))}}async renderEditButton(t){const e=document.createElement("button");e.classList.add("altText","editDescription"),e.tabIndex=0,e.title=t.description;const i=document.createElement("span");return e.append(i),i.setAttribute("data-l10n-id","pdfjs-editor-add-signature-edit-button-label"),e.addEventListener("click",()=>{this.#Nr.open(t)},{passive:!0}),e}async open({uiManager:t,editor:e}){this.#ur||=new Map(this.#Tr.keys().map(t=>[t,{value:"",default:""}])),this.#X=t,this.#_=e,this.#X.removeEditListeners();const i=await this.#Or.isFull();this.#Fr.classList.toggle("fullStorage",i),this.#_r.checked=!i,await this.#$.open(this.#D);const n=this.#Tr.get("type");n.focus(),n.click()}#P(){this.#rt()}#rt(){this.#$.closeIfActive(this.#D)}#K(){null===this.#_._drawId&&this.#_.remove(),this.#X?.addEditListeners(),this.#kr?.abort(),this.#kr=null,this.#X=null,this.#_=null,this.#Hr();for(const[t]of this.#Tr)this.#$r(t);this.#Zr(!1),this.#Lr=null,this.#ur=null}async#Vr(){let t;const e=this.#Lr;switch(e){case"type":t=this.#qr();break;case"draw":t=this.#Yr();break;case"image":t=this.#Cr}let i=null;const n=this.#cr.value;if(this.#_r.checked){const{newCurves:e,areContours:s,thickness:r,width:a,height:o}=t,l=await W.compressSignature({outlines:e,areContours:s,thickness:r,width:a,height:o});i=await this.#Or.create({description:n,signatureData:l}),i?this.#Jr({curves:e.map(t=>({points:t})),areContours:s,thickness:r,width:a,height:o},i,n):console.warn("SignatureManager.add: cannot save the signature.")}const s=this.#ur.get(e);this.#gt({type:"signature",action:"pdfjs.signature.created",data:{type:e,saved:!!i,savedCount:await this.#Or.size(),descriptionChanged:n!==s.default}}),this.#_.addSignature(t,40,this.#cr.value,i),this.#rt()}destroy(){this.#X=null,this.#rt()}}class Ds{#_;#Qr;#cr;#D;#$;#ta;#X;constructor({dialog:t,description:e,cancelButton:i,updateButton:n,editSignatureView:s},r){const a=this.#cr=e.firstElementChild;this.#ta=s,this.#D=t,this.#$=r,t.addEventListener("close",this.#K.bind(this)),t.addEventListener("contextmenu",t=>{t.target!==this.#cr&&t.preventDefault()}),i.addEventListener("click",this.#P.bind(this)),n.addEventListener("click",this.#ea.bind(this));const o=e.lastElementChild;o.addEventListener("click",()=>{a.value="",o.disabled=!0,n.disabled=""===this.#Qr}),a.addEventListener("input",()=>{const{value:t}=a;o.disabled=""===t,n.disabled=t===this.#Qr,s.setAttribute("aria-label",t)},{passive:!0}),r.register(t)}async open(t){this.#X=t._uiManager,this.#_=t,this.#Qr=this.#cr.value=t.description,this.#cr.dispatchEvent(new Event("input")),this.#X.removeEditListeners();const{areContours:e,outline:i}=t.getSignaturePreview(),n=(new f).createElement("path");this.#ta.append(n),this.#ta.setAttribute("viewBox",i.viewBox),n.setAttribute("d",i.toSVGPath()),e&&n.classList.add("contours"),await this.#$.open(this.#D)}async#ea(){this.#_._reportTelemetry({action:"pdfjs.signature.edit_description",data:{hasBeenChanged:!0}}),this.#_.description=this.#cr.value,this.#rt()}#P(){this.#_._reportTelemetry({action:"pdfjs.signature.edit_description",data:{hasBeenChanged:!1}}),this.#rt()}#rt(){this.#$.closeIfActive(this.#D)}#K(){this.#X?.addEditListeners(),this.#X=null,this.#_=null,this.#ta.firstElementChild.remove()}}class Bs{#ia=null;#r;constructor(t,e,i=0){this.#r=t,this.eventBus=e;const n=[{element:t.previous,eventName:"previouspage"},{element:t.next,eventName:"nextpage"},{element:t.zoomIn,eventName:"zoomin"},{element:t.zoomOut,eventName:"zoomout"},{element:t.print,eventName:"print"},{element:t.download,eventName:"download"},{element:t.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorFreeTextButton;return e.contains("toggled")?o.NONE:o.FREETEXT}}},{element:t.editorHighlightButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorHighlightButton;return e.contains("toggled")?o.NONE:o.HIGHLIGHT}}},{element:t.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorInkButton;return e.contains("toggled")?o.NONE:o.INK}}},{element:t.editorStampButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorStampButton;return e.contains("toggled")?o.NONE:o.STAMP}},telemetry:{type:"editing",data:{action:"pdfjs.image.icon_click"}}},{element:t.editorSignatureButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorSignatureButton;return e.contains("toggled")?o.NONE:o.SIGNATURE}}}];this.#It(n),this.#na({value:i}),this.reset()}#na({value:t}){let e="normal";switch(t){case 1:e="compact";break;case 2:e="touch"}document.documentElement.setAttribute("data-toolbar-density",e)}setPageNumber(t,e){this.pageNumber=t,this.pageLabel=e,this.#_t(!1)}setPagesCount(t,e){this.pagesCount=t,this.hasPageLabels=e,this.#_t(!0)}setPageScale(t,e){this.pageScaleValue=(t||e).toString(),this.pageScale=e,this.#_t(!1)}reset(){this.#ia=null,this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=et,this.pageScale=1,this.#_t(!0),this.updateLoadingIndicatorState(),this.#sa({mode:o.DISABLE})}#It(t){const{eventBus:e}=this,{editorHighlightColorPicker:i,editorHighlightButton:n,pageNumber:s,scaleSelect:r}=this.#r,a=this;for(const{element:i,eventName:n,eventDetails:s,telemetry:r}of t)i.addEventListener("click",t=>{null!==n&&e.dispatch(n,{source:this,...s,isFromKeyboard:0===t.detail}),r&&e.dispatch("reporttelemetry",{source:this,details:r})});s.addEventListener("click",function(){this.select()}),s.addEventListener("change",function(){e.dispatch("pagenumberchanged",{source:a,value:this.value})}),r.addEventListener("change",function(){"custom"!==this.value&&e.dispatch("scalechanged",{source:a,value:this.value})}),r.addEventListener("click",function({target:t}){this.value===a.pageScaleValue&&"OPTION"===t.tagName.toUpperCase()&&this.blur()}),r.oncontextmenu=B,e._on("annotationeditormodechanged",this.#sa.bind(this)),e._on("showannotationeditorui",({mode:t})=>{if(t===o.HIGHLIGHT)n.click()}),e._on("toolbardensity",this.#na.bind(this)),i&&(e._on("annotationeditoruimanager",({uiManager:t})=>{const e=this.#ia=new g({uiManager:t});t.setMainHighlightColorPicker(e),i.append(e.renderMainDropdown())}),e._on("mainhighlightcolorpickerupdatecolor",({value:t})=>{this.#ia?.updateColor(t)}))}#sa({mode:t}){const{editorFreeTextButton:e,editorFreeTextParamsToolbar:i,editorHighlightButton:n,editorHighlightParamsToolbar:s,editorInkButton:r,editorInkParamsToolbar:a,editorStampButton:l,editorStampParamsToolbar:u,editorSignatureButton:d,editorSignatureParamsToolbar:h}=this.#r;zt(e,t===o.FREETEXT,i),zt(n,t===o.HIGHLIGHT,s),zt(r,t===o.INK,a),zt(l,t===o.STAMP,u),zt(d,t===o.SIGNATURE,h);const c=t===o.DISABLE;e.disabled=c,n.disabled=c,r.disabled=c,l.disabled=c,d.disabled=c}#_t(t=!1){const{pageNumber:e,pagesCount:i,pageScaleValue:n,pageScale:s}=this,r=this.#r;t&&(this.hasPageLabels?(r.pageNumber.type="text",r.numPages.setAttribute("data-l10n-id","pdfjs-page-of-pages")):(r.pageNumber.type="number",r.numPages.setAttribute("data-l10n-id","pdfjs-of-pages"),r.numPages.setAttribute("data-l10n-args",JSON.stringify({pagesCount:i}))),r.pageNumber.max=i),this.hasPageLabels?(r.pageNumber.value=this.pageLabel,r.numPages.setAttribute("data-l10n-args",JSON.stringify({pageNumber:e,pagesCount:i}))):r.pageNumber.value=e,r.previous.disabled=e<=1,r.next.disabled=e>=i,r.zoomOut.disabled=s<=.1,r.zoomIn.disabled=s>=10;let a=!1;for(const t of r.scaleSelect.options)t.value===n?(t.selected=!0,a=!0):t.selected=!1;a||(r.customScaleOption.selected=!0,r.customScaleOption.setAttribute("data-l10n-args",JSON.stringify({scale:Math.round(1e4*s)/100})))}updateLoadingIndicatorState(t=!1){const{pageNumber:e}=this.#r;e.classList.toggle("loading",t)}}class Is{constructor(t,e=20){this.fingerprint=t,this.cacheSize=e,this._initializedPromise=this._readFromStorage().then(t=>{const e=JSON.parse(t||"{}");let i=-1;if(Array.isArray(e.files)){for(;e.files.length>=this.cacheSize;)e.files.shift();for(let t=0,n=e.files.length;t<n;t++){if(e.files[t].fingerprint===this.fingerprint){i=t;break}}}else e.files=[];-1===i&&(i=e.files.push({fingerprint:this.fingerprint})-1),this.file=e.files[i],this.database=e})}async _writeToStorage(){const t=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",t)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(t,e){return await this._initializedPromise,this.file[t]=e,this._writeToStorage()}async setMultiple(t){await this._initializedPromise;for(const e in t)this.file[e]=t[e];return this._writeToStorage()}async get(t,e){await this._initializedPromise;const i=this.file[t];return void 0!==i?i:e}async getMultiple(t){await this._initializedPromise;const e=Object.create(null);for(const i in t){const n=this.file[i];e[i]=void 0!==n?n:t[i]}return e}}const Ls=-1,ks=1,Ms={initialBookmark:document.location.hash.substring(1),_initializedCapability:{...Promise.withResolvers(),settled:!1},appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:new class extends le{async _writeToStorage(t){localStorage.setItem("pdfjs.preferences",JSON.stringify(t))}async _readFromStorage(t){return{prefs:JSON.parse(localStorage.getItem("pdfjs.preferences"))}}},toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,annotationEditorParams:null,imageAltTextSettings:null,isInitialViewSet:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",mlManager:null,_downloadUrl:"",_eventBusAbortController:null,_windowAbortController:null,_globalAbortController:new AbortController,documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:!1,_wheelUnusedTicks:0,_wheelUnusedFactor:1,_touchManager:null,_touchUnusedTicks:0,_touchUnusedFactor:1,_PDFBug:null,_hasAnnotationEditors:!1,_title:document.title,_printAnnotationStoragePromise:null,_isCtrlKeyDown:!1,_caretBrowsing:null,_isScrolling:!1,editorUndoBar:null,async initialize(t){this.appConfig=t;try{await this.preferences.initializedPromise}catch(t){console.error("initialize:",t)}let e;switch(Qt.get("pdfBugEnabled")&&await this._parseHashParams(),Qt.get("viewerCssTheme")){case 1:e="light";break;case 2:e="dark"}e&&Ot.setProperty("color-scheme",e),this.l10n=await this.externalServices.createL10n(),document.getElementsByTagName("html")[0].dir=this.l10n.getDirection(),this.l10n.translate(t.appContainer||document.documentElement),this.isViewerEmbedded&&Qt.get("externalLinkTarget")===te.NONE&&Qt.set("externalLinkTarget",te.TOP),await this._initializeViewerComponents(),this.bindEvents(),this.bindWindowEvents(),this._initializedCapability.settled=!0,this._initializedCapability.resolve()},async _parseHashParams(){const t=document.location.hash.substring(1);if(!t)return;const{mainContainer:e,viewerContainer:i}=this.appConfig,n=At(t),s=async()=>{if(this._PDFBug)return;const{PDFBug:t}=await import(Qt.get("debuggerSrc"));this._PDFBug=t};if("true"===n.get("disableworker"))try{x.workerSrc||=Qt.get("workerSrc"),await import(j.workerSrc),Qt.set("workerPort",null)}catch(t){console.error("_parseHashParams:",t)}if(n.has("textlayer"))switch(n.get("textlayer")){case"off":Qt.set("textLayerMode",gt);break;case"visible":case"shadow":case"hover":i.classList.add(`textLayer-${n.get("textlayer")}`);try{await s(),this._PDFBug.loadCSS()}catch(t){console.error("_parseHashParams:",t)}}if(n.has("pdfbug")){const t=n.get("pdfbug").split(",");try{await s(),this._PDFBug.init(e,t)}catch(t){console.error("_parseHashParams:",t)}const i={pdfBug:!0,fontExtraProperties:!0};globalThis.StepperManager?.enabled&&(i.minDurationToUpdateCanvas=0),Qt.setAll(i)}n.has("locale")&&Qt.set("localeProperties",{lang:n.get("locale")});const r={disableAutoFetch:t=>"true"===t,disableFontFace:t=>"true"===t,disableHistory:t=>"true"===t,disableRange:t=>"true"===t,disableStream:t=>"true"===t,verbosity:t=>0|t};for(const t in r){const e=r[t],i=t.toLowerCase();n.has(i)&&Qt.set(t,e(n.get(i)))}},async _initializeViewerComponents(){const{appConfig:t,externalServices:e,l10n:i,mlManager:n}=this,s=this._globalAbortController.signal,r=new ae;this.eventBus=Qt.eventBus=r,n?.setEventBus(r,s);const a=this.overlayManager=new ji,l=this.pdfRenderingQueue=new Kn;l.onIdle=this._cleanup.bind(this);const u=this.pdfLinkService=new ee({eventBus:r,externalLinkTarget:Qt.get("externalLinkTarget"),externalLinkRel:Qt.get("externalLinkRel"),ignoreDestinationZoom:Qt.get("ignoreDestinationZoom")}),d=this.downloadManager=new Ni,h=this.findController=new Sn({linkService:u,eventBus:r,updateMatchesCountOnProgress:!0}),c=this.pdfScriptingManager=new qn({eventBus:r,externalServices:e,docProperties:this._scriptingDocProperties.bind(this)}),g=t.mainContainer,p=t.viewerContainer,f=Qt.get("annotationEditorMode"),m=Qt.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:Qt.get("pageColorsBackground"),foreground:Qt.get("pageColorsForeground")}:null;let v;v=Qt.get("enableUpdatedAddImage")?t.newAltTextDialog?new Ti(t.newAltTextDialog,a,r):null:t.altTextDialog?new Bi(t.altTextDialog,g,a,r):null,t.editorUndoBar&&(this.editorUndoBar=new Oi(t.editorUndoBar,r));const b=Qt.get("enableSignatureEditor")&&t.addSignatureDialog?new Ts(t.addSignatureDialog,t.editSignatureDialog,t.annotationEditorParams?.editorSignatureAddSignature||null,a,i,e.createSignatureStorage(r,s),r):null,w=Qt.get("enableHWA"),y=Qt.get("maxCanvasPixels"),C=Qt.get("maxCanvasDim"),E=Qt.get("capCanvasAreaFactor"),A=this.pdfViewer=new _s({container:g,viewer:p,eventBus:r,renderingQueue:l,linkService:u,downloadManager:d,altTextManager:v,signatureManager:b,editorUndoBar:this.editorUndoBar,findController:h,scriptingManager:Qt.get("enableScripting")&&c,l10n:i,textLayerMode:Qt.get("textLayerMode"),annotationMode:Qt.get("annotationMode"),annotationEditorMode:f,annotationEditorHighlightColors:Qt.get("highlightEditorColors"),enableHighlightFloatingButton:Qt.get("enableHighlightFloatingButton"),enableUpdatedAddImage:Qt.get("enableUpdatedAddImage"),enableNewAltTextWhenAddingImage:Qt.get("enableNewAltTextWhenAddingImage"),imageResourcesPath:Qt.get("imageResourcesPath"),enablePrintAutoRotate:Qt.get("enablePrintAutoRotate"),maxCanvasPixels:y,maxCanvasDim:C,capCanvasAreaFactor:E,enableDetailCanvas:Qt.get("enableDetailCanvas"),enablePermissions:Qt.get("enablePermissions"),pageColors:m,mlManager:n,abortSignal:s,enableHWA:w,supportsPinchToZoom:this.supportsPinchToZoom,enableAutoLinking:Qt.get("enableAutoLinking"),minDurationToUpdateCanvas:Qt.get("minDurationToUpdateCanvas")});if(l.setViewer(A),u.setViewer(A),c.setViewer(A),t.sidebar?.thumbnailView&&(this.pdfThumbnailViewer=new ss({container:t.sidebar.thumbnailView,eventBus:r,renderingQueue:l,linkService:u,maxCanvasPixels:y,maxCanvasDim:C,pageColors:m,abortSignal:s,enableHWA:w}),l.setThumbnailViewer(this.pdfThumbnailViewer)),this.isViewerEmbedded||Qt.get("disableHistory")||(this.pdfHistory=new Tn({linkService:u,eventBus:r}),u.setHistory(this.pdfHistory)),!this.supportsIntegratedFind&&t.findBar&&(this.findBar=new _n(t.findBar,t.principalContainer,r)),t.annotationEditorParams)if(f!==o.DISABLE){const e=t.toolbar?.editorSignatureButton;e&&Qt.get("enableSignatureEditor")&&(e.parentElement.hidden=!1),this.annotationEditorParams=new Ii(t.annotationEditorParams,r)}else for(const t of["editorModeButtons","editorModeSeparator"])document.getElementById(t)?.classList.add("hidden");n&&t.secondaryToolbar?.imageAltTextSettingsButton&&(this.imageAltTextSettings=new Di(t.altTextSettingsDialog,a,r,n)),t.documentProperties&&(this.pdfDocumentProperties=new qi(t.documentProperties,a,r,i,()=>this._docFilename,()=>this._docTitle)),t.secondaryToolbar?.cursorHandToolButton&&(this.pdfCursorTools=new Wi({container:g,eventBus:r,cursorToolOnLoad:Qt.get("cursorToolOnLoad")})),t.toolbar&&(this.toolbar=new Bs(t.toolbar,r,Qt.get("toolbarDensity"))),t.secondaryToolbar&&(Qt.get("enableAltText")&&(t.secondaryToolbar.imageAltTextSettingsButton?.classList.remove("hidden"),t.secondaryToolbar.imageAltTextSettingsSeparator?.classList.remove("hidden")),this.secondaryToolbar=new Fs(t.secondaryToolbar,r)),this.supportsFullscreen&&t.secondaryToolbar?.presentationModeButton&&(this.pdfPresentationMode=new Mn({container:g,pdfViewer:A,eventBus:r})),t.passwordOverlay&&(this.passwordPrompt=new Vi(t.passwordOverlay,a,this.isViewerEmbedded)),t.sidebar?.outlineView&&(this.pdfOutlineViewer=new Bn({container:t.sidebar.outlineView,eventBus:r,l10n:i,linkService:u,downloadManager:d})),t.sidebar?.attachmentsView&&(this.pdfAttachmentViewer=new zi({container:t.sidebar.attachmentsView,eventBus:r,l10n:i,downloadManager:d})),t.sidebar?.layersView&&(this.pdfLayerViewer=new Dn({container:t.sidebar.layersView,eventBus:r,l10n:i})),t.sidebar&&(this.pdfSidebar=new Qn({elements:t.sidebar,eventBus:r,l10n:i}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebar.onUpdateThumbnails=()=>{for(const t of A.getCachedPageViews())t.renderingState===it.FINISHED&&this.pdfThumbnailViewer.getThumbnail(t.id-1)?.setImage(t);this.pdfThumbnailViewer.scrollThumbnailIntoView(A.currentPageNumber)})},async run(t){await this.initialize(t);const{appConfig:e,eventBus:i}=this;let n;n=At(document.location.search.substring(1)).get("file")??Qt.get("defaultUrl"),Ns(n);const s=this._openFileInput=document.createElement("input");s.id="fileInput",s.hidden=!0,s.type="file",s.value=null,document.body.append(s),s.addEventListener("change",function(t){const{files:e}=t.target;e&&0!==e.length&&i.dispatch("fileinputchange",{source:this,fileInput:t.target})}),e.mainContainer.addEventListener("dragover",function(t){for(const e of t.dataTransfer.items)if("application/pdf"===e.type)return t.dataTransfer.dropEffect="copy"===t.dataTransfer.effectAllowed?"copy":"move",void G(t)}),e.mainContainer.addEventListener("drop",function(t){"application/pdf"===t.dataTransfer.files?.[0].type&&(G(t),i.dispatch("fileinputchange",{source:this,fileInput:t.dataTransfer}))}),Qt.get("supportsDocumentFonts")||(Qt.set("disableFontFace",!0),this.l10n.get("pdfjs-web-fonts-disabled").then(t=>{console.warn(t)})),this.supportsPrinting||(e.toolbar?.print?.classList.add("hidden"),e.secondaryToolbar?.printButton.classList.add("hidden")),this.supportsFullscreen||e.secondaryToolbar?.presentationModeButton.classList.add("hidden"),this.supportsIntegratedFind&&e.findBar?.toggleButton?.classList.add("hidden"),n?this.open({url:n}):this._hideViewBookmark()},get externalServices(){return $(this,"externalServices",new Fi)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},updateZoom(t,e,i){this.pdfViewer.isInPresentationMode||this.pdfViewer.updateScale({drawingDelay:Qt.get("defaultZoomDelay"),steps:t,scaleFactor:e,origin:i})},zoomIn(){this.updateZoom(1)},zoomOut(){this.updateZoom(-1)},zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=et)},touchPinchCallback(t,e,i){if(this.supportsPinchToZoom){const n=this._accumulateFactor(this.pdfViewer.currentScale,i/e,"_touchUnusedFactor");this.updateZoom(null,n,t)}else{const n=30,s=this._accumulateTicks((i-e)/n,"_touchUnusedTicks");this.updateZoom(s,null,t)}},touchPinchEndCallback(){this._touchUnusedTicks=0,this._touchUnusedFactor=1},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(t){this.pdfViewer.currentPageNumber=t},get supportsPrinting(){return $(this,"supportsPrinting",Qt.get("supportsPrinting")&&Zn.supportsPrinting)},get supportsFullscreen(){return $(this,"supportsFullscreen",document.fullscreenEnabled)},get supportsPinchToZoom(){return $(this,"supportsPinchToZoom",Qt.get("supportsPinchToZoom"))},get supportsIntegratedFind(){return $(this,"supportsIntegratedFind",Qt.get("supportsIntegratedFind"))},get loadingBar(){const t=document.getElementById("loadingBar"),e=t?new jt(t):null;return $(this,"loadingBar",e)},get supportsMouseWheelZoomCtrlKey(){return $(this,"supportsMouseWheelZoomCtrlKey",Qt.get("supportsMouseWheelZoomCtrlKey"))},get supportsMouseWheelZoomMetaKey(){return $(this,"supportsMouseWheelZoomMetaKey",Qt.get("supportsMouseWheelZoomMetaKey"))},get supportsCaretBrowsingMode(){return Qt.get("supportsCaretBrowsingMode")},moveCaret(t,e){this._caretBrowsing||=new ki(this._globalAbortController.signal,this.appConfig.mainContainer,this.appConfig.viewerContainer,this.appConfig.toolbar?.container),this._caretBrowsing.moveCaret(t,e)},setTitleUsingUrl(t="",e=null){this.url=t,this.baseUrl=q(t,"",!0),e&&(this._downloadUrl=e===t?this.baseUrl:q(e,"",!0)),_(t)&&this._hideViewBookmark();let i=C(t,"");if(!i)try{i=decodeURIComponent(y(t))}catch{}this.setTitle(i||t)},setTitle(t=this._title){if(this._title=t,this.isViewerEmbedded)return;const e=this._hasAnnotationEditors&&!this.pdfRenderingQueue.printing;document.title=`${e?"* ":""}${t}`},get _docFilename(){return this._contentDispositionFilename||C(this.url)},get _docTitle(){const{documentInfo:t,metadata:e}=this,i=e?.get("dc:title");return i&&"Untitled"!==i&&!/[\uFFF0-\uFFFF]/g.test(i)?i:t.Title},_hideViewBookmark(){const{secondaryToolbar:t}=this.appConfig;t?.viewBookmarkButton.classList.add("hidden"),t?.presentationModeButton.classList.contains("hidden")&&document.getElementById("viewBookmarkSeparator")?.classList.add("hidden")},async close(){if(this._unblockDocumentLoadEvent(),this._hideViewBookmark(),!this.pdfLoadingTask)return;if(this.pdfDocument?.annotationStorage.size>0&&this._annotationStorageModified)try{await this.save()}catch{}const t=[];t.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfThumbnailViewer?.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),this.pdfDocumentProperties?.setDocument(null)),this.pdfLinkService.externalLinkEnabled=!0,this.store=null,this.isInitialViewSet=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,t.push(this.pdfScriptingManager.destroyPromise,this.passwordPrompt.close()),this.setTitle(),this.pdfSidebar?.reset(),this.pdfOutlineViewer?.reset(),this.pdfAttachmentViewer?.reset(),this.pdfLayerViewer?.reset(),this.pdfHistory?.reset(),this.findBar?.reset(),this.toolbar?.reset(),this.secondaryToolbar?.reset(),this._PDFBug?.cleanup(),await Promise.all(t)},async open(t){this.pdfLoadingTask&&await this.close();const e=Qt.getAll(Zt);Object.assign(x,e),t.url&&this.setTitleUsingUrl(t.originalUrl||t.url,t.url);const i=Qt.getAll(Xt),n=w({...i,...t});return this.pdfLoadingTask=n,n.onPassword=(t,e)=>{this.isViewerEmbedded&&this._unblockDocumentLoadEvent(),this.pdfLinkService.externalLinkEnabled=!1,this.passwordPrompt.setUpdateCallback(t,e),this.passwordPrompt.open()},n.onProgress=({loaded:t,total:e})=>{this.progress(t/e)},n.promise.then(t=>{this.load(t)},t=>{if(n!==this.pdfLoadingTask)return;let e="pdfjs-loading-error";return t instanceof S?e="pdfjs-invalid-file-error":t instanceof z&&(e=t.missing?"pdfjs-missing-file-error":"pdfjs-unexpected-response-error"),this._documentError(e,{message:t.message}).then(()=>{throw t})})},async download(){let t;try{t=await(this.pdfDocument?this.pdfDocument.getData():this.pdfLoadingTask.getData())}catch{}this.downloadManager.download(t,this._downloadUrl,this._docFilename)},async save(){if(!this._saveInProgress){this._saveInProgress=!0,await this.pdfScriptingManager.dispatchWillSave();try{const t=await this.pdfDocument.saveDocument();this.downloadManager.download(t,this._downloadUrl,this._docFilename)}catch(t){console.error("Error when saving the document:",t),await this.download()}finally{await this.pdfScriptingManager.dispatchDidSave(),this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save",stats:this.pdfDocument?.annotationStorage.editorStats}})}},async downloadOrSave(){const{classList:t}=this.appConfig.appContainer;t.add("wait"),await(this.pdfDocument?.annotationStorage.size>0?this.save():this.download()),t.remove("wait")},async _documentError(t,e=null){this._unblockDocumentLoadEvent();const i=await this._otherError(t||"pdfjs-loading-error",e);this.eventBus.dispatch("documenterror",{source:this,message:i,reason:e?.message??null})},async _otherError(t,e=null){const i=await this.l10n.get(t),n=[`PDF.js v${Q||"?"} (build: ${c||"?"})`];return e&&(n.push(`Message: ${e.message}`),e.stack?n.push(`Stack: ${e.stack}`):(e.filename&&n.push(`File: ${e.filename}`),e.lineNumber&&n.push(`Line: ${e.lineNumber}`))),console.error(`${i}\n\n${n.join("\n")}`),i},progress(t){const e=Math.round(100*t);!this.loadingBar||e<=this.loadingBar.percent||(this.loadingBar.percent=e,(this.pdfDocument?.loadingParams.disableAutoFetch??Qt.get("disableAutoFetch"))&&this.loadingBar.setDisableAutoFetch())},load(t){this.pdfDocument=t,t.getDownloadInfo().then(({length:t})=>{this._contentLength=t,this.loadingBar?.hide(),r.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const e=t.getPageLayout().catch(()=>{}),i=t.getPageMode().catch(()=>{}),n=t.getOpenAction().catch(()=>{});this.toolbar?.setPagesCount(t.numPages,!1),this.secondaryToolbar?.setPagesCount(t.numPages),this.pdfLinkService.setDocument(t),this.pdfDocumentProperties?.setDocument(t);const s=this.pdfViewer;s.setDocument(t);const{firstPagePromise:r,onePageRendered:a,pagesPromise:o}=s;this.pdfThumbnailViewer?.setDocument(t);const l=(this.store=new Is(t.fingerprints[0])).getMultiple({page:null,zoom:et,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:ot,scrollMode:mt.UNKNOWN,spreadMode:vt.UNKNOWN}).catch(()=>{});r.then(r=>{this.loadingBar?.setWidth(this.appConfig.viewerContainer),this._initializeAnnotationStorageCallbacks(t),Promise.all([Nt,l,e,i,n]).then(async([e,i,n,r,a])=>{const l=Qt.get("viewOnLoad");this._initializePdfHistory({fingerprint:t.fingerprints[0],viewOnLoad:l,initialDest:a?.dest});const u=this.initialBookmark,d=Qt.get("defaultZoomValue");let h=d?`zoom=${d}`:null,c=null,g=Qt.get("sidebarViewOnLoad"),p=Qt.get("scrollModeOnLoad"),f=Qt.get("spreadModeOnLoad");if(i?.page&&l!==ks&&(h=`page=${i.page}&zoom=${d||i.zoom},${i.scrollLeft},${i.scrollTop}`,c=parseInt(i.rotation,10),g===ot&&(g=0|i.sidebarView),p===mt.UNKNOWN&&(p=0|i.scrollMode),f===vt.UNKNOWN&&(f=0|i.spreadMode)),r&&g===ot&&(g=function(t){switch(t){case"UseNone":return lt;case"UseThumbs":return ut;case"UseOutlines":return dt;case"UseAttachments":return ht;case"UseOC":return ct}return lt}(r)),n&&p===mt.UNKNOWN&&f===vt.UNKNOWN){f=Rt(n).spreadMode}this.setInitialView(h,{rotation:c,sidebarView:g,scrollMode:p,spreadMode:f}),this.eventBus.dispatch("documentinit",{source:this}),this.isViewerEmbedded||s.focus(),await Promise.race([o,new Promise(t=>{setTimeout(t,1e4)})]),(u||h)&&(s.hasEqualPageSizes||(this.initialBookmark=u,s.currentScaleValue=s.currentScaleValue,this.setInitialView(h)))}).catch(()=>{this.setInitialView()}).then(function(){s.update()})}),o.then(()=>{this._unblockDocumentLoadEvent(),this._initializeAutoPrint(t,n)},t=>{this._documentError("pdfjs-loading-error",{message:t.message})}),a.then(e=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:e.timestamp}),this.pdfOutlineViewer&&t.getOutline().then(e=>{t===this.pdfDocument&&this.pdfOutlineViewer.render({outline:e,pdfDocument:t})}),this.pdfAttachmentViewer&&t.getAttachments().then(e=>{t===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:e})}),this.pdfLayerViewer&&s.optionalContentConfigPromise.then(e=>{t===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:e,pdfDocument:t})})}),this._initializePageLabels(t),this._initializeMetadata(t)},async _scriptingDocProperties(t){return(this.documentInfo||(await new Promise(t=>{this.eventBus._on("metadataloaded",t,{once:!0})}),t===this.pdfDocument))&&(this._contentLength||(await new Promise(t=>{this.eventBus._on("documentloaded",t,{once:!0})}),t===this.pdfDocument))?{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:this.metadata?.getRaw(),authors:this.metadata?.get("dc:creator"),numPages:this.pagesCount,URL:this.url}:null},async _initializeAutoPrint(t,e){const[i,n]=await Promise.all([e,this.pdfViewer.enableScripting?null:t.getJSActions()]);if(t!==this.pdfDocument)return;let s="Print"===i?.action;if(n){console.warn("Warning: JavaScript support is not enabled");for(const t in n){if(s)break;switch(t){case"WillClose":case"WillSave":case"DidSave":case"WillPrint":case"DidPrint":continue}s=n[t].some(t=>yt.test(t))}}s&&this.triggerPrinting()},async _initializeMetadata(t){const{info:e,metadata:i,contentDispositionFilename:n,contentLength:s}=await t.getMetadata();if(t!==this.pdfDocument)return;this.documentInfo=e,this.metadata=i,this._contentDispositionFilename??=n,this._contentLength??=s,console.log(`PDF ${t.fingerprints[0]} [${e.PDFFormatVersion} ${(i?.get("pdf:producer")||e.Producer||"-").trim()} / ${(i?.get("xmp:creatortool")||e.Creator||"-").trim()}] (PDF.js: ${Q||"?"} [${c||"?"}])`);const r=this._docTitle;r?this.setTitle(`${r} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename),!e.IsXFAPresent||e.IsAcroFormPresent||t.isPureXfa?!e.IsAcroFormPresent&&!e.IsXFAPresent||this.pdfViewer.renderForms||console.warn("Warning: Interactive form support is not enabled"):t.loadingParams.enableXfa?console.warn("Warning: XFA Foreground documents are not supported"):console.warn("Warning: XFA support is not enabled"),e.IsSignaturesPresent&&console.warn("Warning: Digital signatures validation is not supported"),this.eventBus.dispatch("metadataloaded",{source:this})},async _initializePageLabels(t){const e=await t.getPageLabels();if(t!==this.pdfDocument)return;if(!e||Qt.get("disablePageLabels"))return;const i=e.length;let n=0,s=0;for(let t=0;t<i;t++){const i=e[t];if(i===(t+1).toString())n++;else{if(""!==i)break;s++}}if(n>=i||s>=i)return;const{pdfViewer:r,pdfThumbnailViewer:a,toolbar:o}=this;r.setPageLabels(e),a?.setPageLabels(e),o?.setPagesCount(i,!0),o?.setPageNumber(r.currentPageNumber,r.currentPageLabel)},_initializePdfHistory({fingerprint:t,viewOnLoad:e,initialDest:i=null}){this.pdfHistory&&(this.pdfHistory.initialize({fingerprint:t,resetHistory:e===ks,updateUrl:Qt.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),i&&!this.initialBookmark&&e===Ls&&(this.initialBookmark=JSON.stringify(i),this.pdfHistory.push({explicitDest:i,pageNumber:null})))},_initializeAnnotationStorageCallbacks(t){if(t!==this.pdfDocument)return;const{annotationStorage:e}=t;e.onSetModified=()=>{window.addEventListener("beforeunload",lr),this._annotationStorageModified=!0},e.onResetModified=()=>{window.removeEventListener("beforeunload",lr),delete this._annotationStorageModified},e.onAnnotationEditor=t=>{this._hasAnnotationEditors=!!t,this.setTitle()}},setInitialView(t,{rotation:e,sidebarView:i,scrollMode:n,spreadMode:s}={}){const r=t=>{It(t)&&(this.pdfViewer.pagesRotation=t)};this.isInitialViewSet=!0,this.pdfSidebar?.setInitialView(i),((t,e)=>{Lt(t)&&(this.pdfViewer.scrollMode=t),kt(e)&&(this.pdfViewer.spreadMode=e)})(n,s),this.initialBookmark?(r(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):t&&(r(e),this.pdfLinkService.setHash(t)),this.toolbar?.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),this.secondaryToolbar?.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=et)},_cleanup(){this.pdfDocument&&(this.pdfViewer.cleanup(),this.pdfThumbnailViewer?.cleanup(),this.pdfDocument.cleanup(Qt.get("fontExtraProperties")))},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar?.visibleView===ut,this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>this.pdfDocument?.annotationStorage.print),this.printService||(this.supportsPrinting?this.pdfViewer.pageViewsReady?(this.printService=Zn.createPrintService({pdfDocument:this.pdfDocument,pagesOverview:this.pdfViewer.getPagesOverview(),printContainer:this.appConfig.printContainer,printResolution:Qt.get("printResolution"),printAnnotationStoragePromise:this._printAnnotationStoragePromise}),this.forceRendering(),this.setTitle(),this.printService.layout(),this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print",stats:this.pdfDocument?.annotationStorage.editorStats}})):this.l10n.get("pdfjs-printing-not-ready").then(t=>{window.alert(t)}):this._otherError("pdfjs-printing-not-supported"))},afterPrint(){this._printAnnotationStoragePromise&&(this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()}),this._printAnnotationStoragePromise=null),this.printService&&(this.printService.destroy(),this.printService=null,this.pdfDocument?.annotationStorage.resetModified()),this.forceRendering(),this.setTitle()},rotatePages(t){this.pdfViewer.pagesRotation+=t},requestPresentationMode(){this.pdfPresentationMode?.request()},triggerPrinting(){this.supportsPrinting&&window.print()},bindEvents(){if(this._eventBusAbortController)return;const t={signal:(this._eventBusAbortController=new AbortController).signal},{eventBus:e,externalServices:i,pdfDocumentProperties:n,pdfViewer:s,preferences:r}=this;e._on("resize",Gs.bind(this),t),e._on("hashchange",Xs.bind(this),t),e._on("beforeprint",this.beforePrint.bind(this),t),e._on("afterprint",this.afterPrint.bind(this),t),e._on("pagerender",Vs.bind(this),t),e._on("pagerendered",Rs.bind(this),t),e._on("updateviewarea",$s.bind(this),t),e._on("pagechanging",er.bind(this),t),e._on("scalechanging",Qs.bind(this),t),e._on("rotationchanging",tr.bind(this),t),e._on("sidebarviewchanged",Hs.bind(this),t),e._on("pagemode",Us.bind(this),t),e._on("namedaction",zs.bind(this),t),e._on("presentationmodechanged",t=>s.presentationModeState=t.state,t),e._on("presentationmode",this.requestPresentationMode.bind(this),t),e._on("switchannotationeditormode",t=>s.annotationEditorMode=t,t),e._on("print",this.triggerPrinting.bind(this),t),e._on("download",this.downloadOrSave.bind(this),t),e._on("firstpage",()=>this.page=1,t),e._on("lastpage",()=>this.page=this.pagesCount,t),e._on("nextpage",()=>s.nextPage(),t),e._on("previouspage",()=>s.previousPage(),t),e._on("zoomin",this.zoomIn.bind(this),t),e._on("zoomout",this.zoomOut.bind(this),t),e._on("zoomreset",this.zoomReset.bind(this),t),e._on("pagenumberchanged",Zs.bind(this),t),e._on("scalechanged",t=>s.currentScaleValue=t.value,t),e._on("rotatecw",this.rotatePages.bind(this,90),t),e._on("rotateccw",this.rotatePages.bind(this,-90),t),e._on("optionalcontentconfig",t=>s.optionalContentConfigPromise=t.promise,t),e._on("switchscrollmode",t=>s.scrollMode=t.mode,t),e._on("scrollmodechanged",Ws.bind(this,"scrollMode"),t),e._on("switchspreadmode",t=>s.spreadMode=t.mode,t),e._on("spreadmodechanged",Ws.bind(this,"spreadMode"),t),e._on("imagealttextsettings",Ks.bind(this),t),e._on("documentproperties",()=>n?.open(),t),e._on("findfromurlhash",qs.bind(this),t),e._on("updatefindmatchescount",Ys.bind(this),t),e._on("updatefindcontrolstate",Js.bind(this),t),e._on("fileinputchange",Os.bind(this),t),e._on("openfile",js.bind(this),t)},bindWindowEvents(){if(this._windowAbortController)return;this._windowAbortController=new AbortController;const{eventBus:t,appConfig:{mainContainer:e},pdfViewer:i,_windowAbortController:{signal:n}}=this;if(this._touchManager=new K({container:window,isPinchingDisabled:()=>i.isInPresentationMode,isPinchingStopped:()=>this.overlayManager?.active,onPinching:this.touchPinchCallback.bind(this),onPinchEnd:this.touchPinchEndCallback.bind(this),signal:n}),function t(e=null){e&&i.refresh(),window.matchMedia(`(resolution: ${k.pixelRatio}dppx)`).addEventListener("change",t,{once:!0,signal:n})}(),window.addEventListener("wheel",ir.bind(this),{passive:!1,signal:n}),window.addEventListener("click",rr.bind(this),{signal:n}),window.addEventListener("keydown",or.bind(this),{signal:n}),window.addEventListener("keyup",ar.bind(this),{signal:n}),window.addEventListener("resize",()=>t.dispatch("resize",{source:window}),{signal:n}),window.addEventListener("hashchange",()=>{t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},{signal:n}),window.addEventListener("beforeprint",()=>t.dispatch("beforeprint",{source:window}),{signal:n}),window.addEventListener("afterprint",()=>t.dispatch("afterprint",{source:window}),{signal:n}),window.addEventListener("updatefromsandbox",e=>{t.dispatch("updatefromsandbox",{source:window,detail:e.detail})},{signal:n}),!("onscrollend"in document.documentElement))return;({scrollTop:this._lastScrollTop,scrollLeft:this._lastScrollLeft}=e);const s=()=>{({scrollTop:this._lastScrollTop,scrollLeft:this._lastScrollLeft}=e),this._isScrolling=!1,e.addEventListener("scroll",r,{passive:!0,signal:n}),e.removeEventListener("scrollend",s),e.removeEventListener("blur",s)},r=()=>{this._isCtrlKeyDown||this._lastScrollTop===e.scrollTop&&this._lastScrollLeft===e.scrollLeft||(e.removeEventListener("scroll",r),this._isScrolling=!0,e.addEventListener("scrollend",s,{signal:n}),e.addEventListener("blur",s,{signal:n}))};e.addEventListener("scroll",r,{passive:!0,signal:n})},unbindEvents(){this._eventBusAbortController?.abort(),this._eventBusAbortController=null},unbindWindowEvents(){this._windowAbortController?.abort(),this._windowAbortController=null,this._touchManager=null},async testingClose(){this.unbindEvents(),this.unbindWindowEvents(),this._globalAbortController?.abort(),this._globalAbortController=null,this.findBar?.close(),await Promise.all([this.l10n?.destroy(),this.close()])},_accumulateTicks(t,e){(this[e]>0&&t<0||this[e]<0&&t>0)&&(this[e]=0),this[e]+=t;const i=Math.trunc(this[e]);return this[e]-=i,i},_accumulateFactor(t,e,i){if(1===e)return 1;(this[i]>1&&e<1||this[i]<1&&e>1)&&(this[i]=1);const n=Math.floor(t*e*this[i]*100)/(100*t);return this[i]=e/n,n},_unblockDocumentLoadEvent(){document.blockUnblockOnload?.(!1),this._unblockDocumentLoadEvent=()=>{}},get scriptingReady(){return this.pdfScriptingManager.ready}};Zn.initGlobals(Ms);{const t=new Set(["null","http://mozilla.github.io","https://mozilla.github.io"]);var Ns=function(e){if(!e)return;const i=URL.parse(window.location)?.origin||"null";if(t.has(i))return;const n=URL.parse(e,window.location)?.origin;if(n===i)return;const s=new Error("file origin does not match viewer's");throw Ms._documentError("pdfjs-loading-error",{message:s.message}),s},Os=function(t){if(this.pdfViewer?.isInPresentationMode)return;const e=t.fileInput.files[0];this.open({url:URL.createObjectURL(e),originalUrl:e.name})},js=function(t){this._openFileInput?.click()}}function Vs({pageNumber:t}){t===this.page&&this.toolbar?.updateLoadingIndicatorState(!0)}function Rs({pageNumber:t,isDetailView:e,error:i}){if(t===this.page&&this.toolbar?.updateLoadingIndicatorState(!1),!e&&this.pdfSidebar?.visibleView===ut){const e=this.pdfViewer.getPageView(t-1),i=this.pdfThumbnailViewer?.getThumbnail(t-1);e&&i?.setImage(e)}i&&this._otherError("pdfjs-rendering-error",i)}function Us({mode:t}){let e;switch(t){case"thumbs":e=ut;break;case"bookmarks":case"outline":e=dt;break;case"attachments":e=ht;break;case"layers":e=ct;break;case"none":e=lt;break;default:return void console.error('Invalid "pagemode" hash parameter: '+t)}this.pdfSidebar?.switchView(e,!0)}function zs(t){switch(t.action){case"GoToPage":this.appConfig.toolbar?.pageNumber.select();break;case"Find":this.supportsIntegratedFind||this.findBar?.toggle();break;case"Print":this.triggerPrinting();break;case"SaveAs":this.downloadOrSave()}}function Hs({view:t}){this.pdfRenderingQueue.isThumbnailViewEnabled=t===ut,this.isInitialViewSet&&this.store?.set("sidebarView",t).catch(()=>{})}function $s({location:t}){this.isInitialViewSet&&this.store?.setMultiple({page:t.pageNumber,zoom:t.scale,scrollLeft:t.left,scrollTop:t.top,rotation:t.rotation}).catch(()=>{}),this.appConfig.secondaryToolbar&&(this.appConfig.secondaryToolbar.viewBookmarkButton.href=this.pdfLinkService.getAnchorUrl(t.pdfOpenParams))}function Ws(t,e){this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&this.store?.set(t,e.mode).catch(()=>{})}function Gs(){const{pdfDocument:t,pdfViewer:e,pdfRenderingQueue:i}=this;if(i.printing&&window.matchMedia("print").matches)return;if(!t)return;const n=e.currentScaleValue;"auto"!==n&&"page-fit"!==n&&"page-width"!==n||(e.currentScaleValue=n),e.update()}function Xs(t){const e=t.hash;e&&(this.isInitialViewSet?this.pdfHistory?.popStateInProgress||this.pdfLinkService.setHash(e):this.initialBookmark=e)}function Zs(t){const{pdfViewer:e}=this;""!==t.value&&this.pdfLinkService.goToPage(t.value),t.value!==e.currentPageNumber.toString()&&t.value!==e.currentPageLabel&&this.toolbar?.setPageNumber(e.currentPageNumber,e.currentPageLabel)}function Ks(){this.imageAltTextSettings?.open({enableGuessAltText:Qt.get("enableGuessAltText"),enableNewAltTextWhenAddingImage:Qt.get("enableNewAltTextWhenAddingImage")})}function qs(t){this.eventBus.dispatch("find",{source:t.source,type:"",query:t.query,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function Ys({matchesCount:t}){this.supportsIntegratedFind?this.externalServices.updateFindMatchesCount(t):this.findBar?.updateResultsCount(t)}function Js({state:t,previous:e,entireWord:i,matchesCount:n,rawQuery:s}){this.supportsIntegratedFind?this.externalServices.updateFindControlState({result:t,findPrevious:e,entireWord:i,matchesCount:n,rawQuery:s}):this.findBar?.updateUIState(t,e,n)}function Qs(t){this.toolbar?.setPageScale(t.presetValue,t.scale),this.pdfViewer.update()}function tr(t){this.pdfThumbnailViewer&&(this.pdfThumbnailViewer.pagesRotation=t.pagesRotation),this.forceRendering(),this.pdfViewer.currentPageNumber=t.pageNumber}function er({pageNumber:t,pageLabel:e}){this.toolbar?.setPageNumber(t,e),this.secondaryToolbar?.setPageNumber(t),this.pdfSidebar?.visibleView===ut&&this.pdfThumbnailViewer?.scrollThumbnailIntoView(t);const i=this.pdfViewer.getPageView(t-1);this.toolbar?.updateLoadingIndicatorState(i?.renderingState===it.RUNNING)}function ir(t){const{pdfViewer:e,supportsMouseWheelZoomCtrlKey:i,supportsMouseWheelZoomMetaKey:n,supportsPinchToZoom:s}=this;if(e.isInPresentationMode)return;const r=t.deltaMode;let a=Math.exp(-t.deltaY/100);const o=t.ctrlKey&&!this._isCtrlKeyDown&&r===WheelEvent.DOM_DELTA_PIXEL&&0===t.deltaX&&(Math.abs(a-1)<.05||!1)&&0===t.deltaZ,l=[t.clientX,t.clientY];if(o||t.ctrlKey&&i||t.metaKey&&n){if(t.preventDefault(),this._isScrolling||"hidden"===document.visibilityState||this.overlayManager.active)return;if(o&&s)a=this._accumulateFactor(e.currentScale,a,"_wheelUnusedFactor"),this.updateZoom(null,a,l);else{const e=Bt(t);let i=0;if(r===WheelEvent.DOM_DELTA_LINE||r===WheelEvent.DOM_DELTA_PAGE)i=Math.abs(e)>=1?Math.sign(e):this._accumulateTicks(e,"_wheelUnusedTicks");else{const t=30;i=this._accumulateTicks(e/t,"_wheelUnusedTicks")}this.updateZoom(i,null,l)}}}function nr({target:t}){if(!this.secondaryToolbar?.isOpen)return;const{toolbar:e,secondaryToolbar:i}=this.appConfig;(this.pdfViewer.containsElement(t)||e?.container.contains(t)&&!i?.toolbar.contains(t)&&!i?.toggleButton.contains(t))&&this.secondaryToolbar.close()}function sr(t){this.editorUndoBar?.isOpen&&this.appConfig.secondaryToolbar?.toolbar.contains(t.target)&&this.editorUndoBar.hide()}function rr(t){nr.call(this,t),sr.call(this,t)}function ar(t){"Control"===t.key&&(this._isCtrlKeyDown=!1)}function or(t){if(this._isCtrlKeyDown="Control"===t.key,this.editorUndoBar?.isOpen&&9!==t.keyCode&&16!==t.keyCode&&(13!==t.keyCode&&32!==t.keyCode||Vt()!==this.appConfig.editorUndoBar.undoButton)&&this.editorUndoBar.hide(),this.overlayManager.active)return;const{eventBus:e,pdfViewer:i}=this,n=i.isInPresentationMode;let s=!1,r=!1;const a=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0);if(1===a||8===a||5===a||12===a)switch(t.keyCode){case 70:this.supportsIntegratedFind||t.shiftKey||(this.findBar?.open(),s=!0);break;case 71:if(!this.supportsIntegratedFind){const{state:t}=this.findController;if(t){const i={source:window,type:"again",findPrevious:5===a||12===a};e.dispatch("find",{...t,...i})}s=!0}break;case 61:case 107:case 187:case 171:this.zoomIn(),s=!0;break;case 173:case 109:case 189:this.zoomOut(),s=!0;break;case 48:case 96:n||(setTimeout(()=>{this.zoomReset()}),s=!1);break;case 38:(n||this.page>1)&&(this.page=1,s=!0,r=!0);break;case 40:(n||this.page<this.pagesCount)&&(this.page=this.pagesCount,s=!0,r=!0)}if(1===a||8===a)switch(t.keyCode){case 83:e.dispatch("download",{source:window}),s=!0;break;case 79:e.dispatch("openfile",{source:window}),s=!0}if(3===a||10===a)switch(t.keyCode){case 80:this.requestPresentationMode(),s=!0,this.externalServices.reportTelemetry({type:"buttons",data:{id:"presentationModeKeyboard"}});break;case 71:this.appConfig.toolbar&&(this.appConfig.toolbar.pageNumber.select(),s=!0)}if(s)return r&&!n&&i.focus(),void t.preventDefault();const o=Vt(),l=o?.tagName.toUpperCase();if("INPUT"!==l&&"TEXTAREA"!==l&&"SELECT"!==l&&("BUTTON"!==l||13!==t.keyCode&&32!==t.keyCode)&&!o?.isContentEditable||27===t.keyCode){if(0===a){let e=0,a=!1;switch(t.keyCode){case 38:if(this.supportsCaretBrowsingMode){this.moveCaret(!0,!1),s=!0;break}case 33:i.isVerticalScrollbarEnabled&&(a=!0),e=-1;break;case 8:n||(a=!0),e=-1;break;case 37:if(this.supportsCaretBrowsingMode)return;i.isHorizontalScrollbarEnabled&&(a=!0);case 75:case 80:e=-1;break;case 27:this.secondaryToolbar?.isOpen&&(this.secondaryToolbar.close(),s=!0),!this.supportsIntegratedFind&&this.findBar?.opened&&(this.findBar.close(),s=!0);break;case 40:if(this.supportsCaretBrowsingMode){this.moveCaret(!1,!1),s=!0;break}case 34:i.isVerticalScrollbarEnabled&&(a=!0),e=1;break;case 13:case 32:n||(a=!0),e=1;break;case 39:if(this.supportsCaretBrowsingMode)return;i.isHorizontalScrollbarEnabled&&(a=!0);case 74:case 78:e=1;break;case 36:(n||this.page>1)&&(this.page=1,s=!0,r=!0);break;case 35:(n||this.page<this.pagesCount)&&(this.page=this.pagesCount,s=!0,r=!0);break;case 83:this.pdfCursorTools?.switchTool(bt);break;case 72:this.pdfCursorTools?.switchTool(wt);break;case 82:this.rotatePages(90);break;case 115:this.pdfSidebar?.toggle()}0===e||a&&"page-fit"!==i.currentScaleValue||(e>0?i.nextPage():i.previousPage(),s=!0)}if(4===a)switch(t.keyCode){case 13:case 32:if(!n&&"page-fit"!==i.currentScaleValue)break;i.previousPage(),s=!0;break;case 38:this.moveCaret(!0,!0),s=!0;break;case 40:this.moveCaret(!1,!0),s=!0;break;case 82:this.rotatePages(-90)}s||n||(t.keyCode>=33&&t.keyCode<=40||32===t.keyCode&&"BUTTON"!==l)&&(r=!0),r&&!i.containsElement(o)&&i.focus(),s&&t.preventDefault()}}function lr(t){return t.preventDefault(),t.returnValue="",!1}const ur={LinkTarget:te,RenderingStates:it,ScrollMode:mt,SpreadMode:vt};function dr(){const t={appContainer:document.body,principalContainer:document.getElementById("mainContainer"),mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),toolbar:{container:document.getElementById("toolbarContainer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomInButton"),zoomOut:document.getElementById("zoomOutButton"),print:document.getElementById("printButton"),editorFreeTextButton:document.getElementById("editorFreeTextButton"),editorFreeTextParamsToolbar:document.getElementById("editorFreeTextParamsToolbar"),editorHighlightButton:document.getElementById("editorHighlightButton"),editorHighlightParamsToolbar:document.getElementById("editorHighlightParamsToolbar"),editorHighlightColorPicker:document.getElementById("editorHighlightColorPicker"),editorInkButton:document.getElementById("editorInkButton"),editorInkParamsToolbar:document.getElementById("editorInkParamsToolbar"),editorStampButton:document.getElementById("editorStampButton"),editorStampParamsToolbar:document.getElementById("editorStampParamsToolbar"),editorSignatureButton:document.getElementById("editorSignatureButton"),editorSignatureParamsToolbar:document.getElementById("editorSignatureParamsToolbar"),download:document.getElementById("downloadButton")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggleButton"),presentationModeButton:document.getElementById("presentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("viewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),imageAltTextSettingsButton:document.getElementById("imageAltTextSettings"),imageAltTextSettingsSeparator:document.getElementById("imageAltTextSettingsSeparator"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),sidebarContainer:document.getElementById("sidebarContainer"),toggleButton:document.getElementById("sidebarToggleButton"),resizer:document.getElementById("sidebarResizer"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFindButton"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),matchDiacriticsCheckbox:document.getElementById("findMatchDiacritics"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPreviousButton"),findNextButton:document.getElementById("findNextButton")},passwordOverlay:{dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{dialog:document.getElementById("documentPropertiesDialog"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},altTextDialog:{dialog:document.getElementById("altTextDialog"),optionDescription:document.getElementById("descriptionButton"),optionDecorative:document.getElementById("decorativeButton"),textarea:document.getElementById("descriptionTextarea"),cancelButton:document.getElementById("altTextCancel"),saveButton:document.getElementById("altTextSave")},newAltTextDialog:{dialog:document.getElementById("newAltTextDialog"),title:document.getElementById("newAltTextTitle"),descriptionContainer:document.getElementById("newAltTextDescriptionContainer"),textarea:document.getElementById("newAltTextDescriptionTextarea"),disclaimer:document.getElementById("newAltTextDisclaimer"),learnMore:document.getElementById("newAltTextLearnMore"),imagePreview:document.getElementById("newAltTextImagePreview"),createAutomatically:document.getElementById("newAltTextCreateAutomatically"),createAutomaticallyButton:document.getElementById("newAltTextCreateAutomaticallyButton"),downloadModel:document.getElementById("newAltTextDownloadModel"),downloadModelDescription:document.getElementById("newAltTextDownloadModelDescription"),error:document.getElementById("newAltTextError"),errorCloseButton:document.getElementById("newAltTextCloseButton"),cancelButton:document.getElementById("newAltTextCancel"),notNowButton:document.getElementById("newAltTextNotNow"),saveButton:document.getElementById("newAltTextSave")},altTextSettingsDialog:{dialog:document.getElementById("altTextSettingsDialog"),createModelButton:document.getElementById("createModelButton"),aiModelSettings:document.getElementById("aiModelSettings"),learnMore:document.getElementById("altTextSettingsLearnMore"),deleteModelButton:document.getElementById("deleteModelButton"),downloadModelButton:document.getElementById("downloadModelButton"),showAltTextDialogButton:document.getElementById("showAltTextDialogButton"),altTextSettingsCloseButton:document.getElementById("altTextSettingsCloseButton"),closeButton:document.getElementById("altTextSettingsCloseButton")},addSignatureDialog:{dialog:document.getElementById("addSignatureDialog"),panels:document.getElementById("addSignatureActionContainer"),typeButton:document.getElementById("addSignatureTypeButton"),typeInput:document.getElementById("addSignatureTypeInput"),drawButton:document.getElementById("addSignatureDrawButton"),drawSVG:document.getElementById("addSignatureDraw"),drawPlaceholder:document.getElementById("addSignatureDrawPlaceholder"),drawThickness:document.getElementById("addSignatureDrawThickness"),imageButton:document.getElementById("addSignatureImageButton"),imageSVG:document.getElementById("addSignatureImage"),imagePlaceholder:document.getElementById("addSignatureImagePlaceholder"),imagePicker:document.getElementById("addSignatureFilePicker"),imagePickerLink:document.getElementById("addSignatureImageBrowse"),description:document.getElementById("addSignatureDescription"),clearButton:document.getElementById("clearSignatureButton"),saveContainer:document.getElementById("addSignatureSaveContainer"),saveCheckbox:document.getElementById("addSignatureSaveCheckbox"),errorBar:document.getElementById("addSignatureError"),errorCloseButton:document.getElementById("addSignatureErrorCloseButton"),cancelButton:document.getElementById("addSignatureCancelButton"),addButton:document.getElementById("addSignatureAddButton")},editSignatureDialog:{dialog:document.getElementById("editSignatureDescriptionDialog"),description:document.getElementById("editSignatureDescription"),editSignatureView:document.getElementById("editSignatureView"),cancelButton:document.getElementById("editSignatureCancelButton"),updateButton:document.getElementById("editSignatureUpdateButton")},annotationEditorParams:{editorFreeTextFontSize:document.getElementById("editorFreeTextFontSize"),editorFreeTextColor:document.getElementById("editorFreeTextColor"),editorInkColor:document.getElementById("editorInkColor"),editorInkThickness:document.getElementById("editorInkThickness"),editorInkOpacity:document.getElementById("editorInkOpacity"),editorStampAddImage:document.getElementById("editorStampAddImage"),editorSignatureAddSignature:document.getElementById("editorSignatureAddSignature"),editorFreeHighlightThickness:document.getElementById("editorFreeHighlightThickness"),editorHighlightShowAll:document.getElementById("editorHighlightShowAll")},printContainer:document.getElementById("printContainer"),editorUndoBar:{container:document.getElementById("editorUndoBar"),message:document.getElementById("editorUndoBarMessage"),undoButton:document.getElementById("editorUndoBarUndoButton"),closeButton:document.getElementById("editorUndoBarCloseButton")}},e=new CustomEvent("webviewerloaded",{bubbles:!0,cancelable:!0,detail:{source:window}});try{parent.document.dispatchEvent(e)}catch(t){console.error("webviewerloaded:",t),document.dispatchEvent(e)}Ms.run(t)}window.PDFViewerApplication=Ms,window.PDFViewerApplicationConstants=ur,window.PDFViewerApplicationOptions=Qt,document.blockUnblockOnload?.(!0),"interactive"===document.readyState||"complete"===document.readyState?dr():document.addEventListener("DOMContentLoaded",dr,!0),t.PDFViewerApplication=Ms,t.PDFViewerApplicationConstants=ur,t.PDFViewerApplicationOptions=Qt});
//# sourceMappingURL=viewer.js.map
