<?php
 goto fœ¢á…ìœ; déÚ¬Àî‘í: define($_SERVER[áí∂¯Â¸Áò][0], $_SERVER[áí∂¯Â¸Áò][1]); $_SERVER[˙Œ] = explode($_SERVER[áí∂¯Â¸Áò][2], gzinflate(substr($_SERVER[áí∂¯Â¸Áò][3], 10, -8))); function Model($Fñë˘Èƒÿ⁄ = '', $BÀáº‚ûäÙ = '', $AÕ⁄±°ßîì = '') { goto BÉµåßÙÒ„; aø…ÖàØöﬁ: if (isset($CæÚõΩà¬Æ[$EÚúËâ¶á¨])) { return $CæÚõΩà¬Æ[$EÚúËâ¶á¨]; } if ($Fñë˘Èƒÿ⁄) { $Fñë˘Èƒÿ⁄ = strtoupper($Fñë˘Èƒÿ⁄[0]) . substr($Fñë˘Èƒÿ⁄, 1); $b€øê†Èﬁ› = $Fñë˘Èƒÿ⁄ . $D€äéêàâä[1]; if (class_exists($b€øê†Èﬁ›)) { $CæÚõΩà¬Æ[$EÚúËâ¶á¨] = new $b€øê†Èﬁ›(); return $CæÚõΩà¬Æ[$EÚúËâ¶á¨]; } } if (!$AÕ⁄±°ßîì) { $AÕ⁄±°ßîì = $GLOBALS[$D€äéêàâä[2]][$D€äéêàâä[3]]; } goto aÉÓ∞æÖöô; aÉÓ∞æÖöô: $CæÚõΩà¬Æ[$EÚúËâ¶á¨] = new ModelBase($Fñë˘Èƒÿ⁄, $BÀáº‚ûäÙ, $AÕ⁄±°ßîì); return $CæÚõΩà¬Æ[$EÚúËâ¶á¨]; goto EÙêÛﬂ¢âñ; BÉµåßÙÒ„: $D€äéêàâä =& $_SERVER[˙Œ]; static $CæÚõΩà¬Æ = array(); $EÚúËâ¶á¨ = strtolower($BÀáº‚ûäÙ . $D€äéêàâä[0] . $Fñë˘Èƒÿ⁄); goto aø…ÖàØöﬁ; EÙêÛﬂ¢âñ: } goto FØßÁ‚–é¶; aæ‡µì≤ıˆ: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\155\56\162\157\x6c\x65\114\151\x73\164"; public $field = array("\x6e\x61\155\x65", "\x61\x75\x74\150", "\x6c\x61\142\x65\x6c", "\x64\x69\x73\x70\154\x61\171", "\x73\171\x73\164\x65\155", "\x64\145\163\143", "\151\147\156\157\162\145\x45\x78\164", "\151\x67\156\157\x72\x65\106\151\x6c\145\x53\151\172\x65", "\141\144\155\151\156\x69\163\x74\162\141\164\x6f\162", "\x73\x6f\162\x74"); public function listData($fË∞ï˘Øé∫ = false, $AòàéáÑ∞û = "\163\x6f\x72\x74", $Eï∏∂É©ïª = false) { $F«ÈÇãæóà =& $_SERVER[áí∂¯Â¸Áò]; $A¶Ì∞≤ÃÌÂ = parent::listData($fË∞ï˘Øé∫, $AòàéáÑ∞û, $Eï∏∂É©ïª); if (!$fË∞ï˘Øé∫) { $cˆıÔÀñ°« = $F«ÈÇãæóà[2516]; foreach ($A¶Ì∞≤ÃÌÂ as $búºêÒ‹ç‚ => $AıéÉ¿‹Öú) { if ($AıéÉ¿‹Öú[$F«ÈÇãæóà[2298]] == 1) { $A¶Ì∞≤ÃÌÂ[$búºêÒ‹ç‚][$F«ÈÇãæóà[417]] = $cˆıÔÀñ°«; } } } return $A¶Ì∞≤ÃÌÂ; } public function update($aµÈ˘¯‡‰È, $c◊∏ç≠å¶¨) { goto e¡ó™ãÂ¬ö; f…Ú‡ö∑ˆ: if (!$fÏåœÎ™‡÷ || $Fü◊üÍ¨·Œ && $Fü◊üÍ¨·Œ[$c˘ñùÏ¡ÏÈ[371]] != $fÏåœÎ™‡÷[$c˘ñùÏ¡ÏÈ[371]]) { return !1; } if ($Fü◊üÍ¨·Œ[$c˘ñùÏ¡ÏÈ[2298]] == 1) { $c◊∏ç≠å¶¨ = array($c˘ñùÏ¡ÏÈ[28] => $c◊∏ç≠å¶¨[$c˘ñùÏ¡ÏÈ[28]], $c˘ñùÏ¡ÏÈ[2132] => $c◊∏ç≠å¶¨[$c˘ñùÏ¡ÏÈ[2132]]); } $this->filterAuth($c◊∏ç≠å¶¨[$c˘ñùÏ¡ÏÈ[388]]); goto b◊ßﬁöúˆ; b◊ßﬁöúˆ: return parent::update($aµÈ˘¯‡‰È, $c◊∏ç≠å¶¨); goto BïÉÓ«ø‹Ç; e¡ó™ãÂ¬ö: $c˘ñùÏ¡ÏÈ =& $_SERVER[áí∂¯Â¸Áò]; $fÏåœÎ™‡÷ = parent::listData($aµÈ˘¯‡‰È); $Fü◊üÍ¨·Œ = $this->findByName($c◊∏ç≠å¶¨[$c˘ñùÏ¡ÏÈ[28]]); goto f…Ú‡ö∑ˆ; BïÉÓ«ø‹Ç: } public function remove($fâ∞·Ωí‡Ã) { $cÖ•˜ç•¯À = parent::listData($fâ∞·Ωí‡Ã); if (!$cÖ•˜ç•¯À || $cÖ•˜ç•¯À[$_SERVER[áí∂¯Â¸Áò][1087]]) { return !1; } return parent::remove($fâ∞·Ωí‡Ã); } public function add($FøˆÀ≤Öê±) { goto C†ÜÿÚ©‡®; C†ÜÿÚ©‡®: $cõÉ®‰«ˆÃ =& $_SERVER[áí∂¯Â¸Áò]; $dÒàøÜæ›Ê = $FøˆÀ≤Öê±[$cõÉ®‰«ˆÃ[28]]; if ($this->findByName($dÒàøÜæ›Ê)) { return !1; } goto dß‹‹öëâ; C†—«›ùüﬁ: return parent::insert($FøˆÀ≤Öê±); goto bôì€ÃÌø£; dß‹‹öëâ: $b˘çÏçÎ”à = array($cõÉ®‰«ˆÃ[398] => $dÒàøÜæ›Ê, $cõÉ®‰«ˆÃ[2118] => $cõÉ®‰«ˆÃ[33], $cõÉ®‰«ˆÃ[2114] => $cõÉ®‰«ˆÃ[2122], $cõÉ®‰«ˆÃ[2517] => 1, $cõÉ®‰«ˆÃ[2117] => 0, $cõÉ®‰«ˆÃ[2518] => 0, $cõÉ®‰«ˆÃ[2116] => $this->getSort()); $FøˆÀ≤Öê± = array_merge($b˘çÏçÎ”à, $FøˆÀ≤Öê±); $this->filterAuth($FøˆÀ≤Öê±[$cõÉ®‰«ˆÃ[388]]); goto C†—«›ùüﬁ; bôì€ÃÌø£: } private function getSort() { $fﬁ“ó‘Ö„∫ =& $_SERVER[áí∂¯Â¸Áò]; $f–¨Ó¬≥∏õ = parent::listData(); $CÂﬂŸ∏Ë § = array_to_keyvalue($f–¨Ó¬≥∏õ, $fﬁ“ó‘Ö„∫[33], $fﬁ“ó‘Ö„∫[2134]); return empty($CÂﬂŸ∏Ë §) ? 0 : max($CÂﬂŸ∏Ë §) + 1; } private function filterAuth(&$fªÚ¶ù∫Ã¶) { $b Ô∆©π∑  =& $_SERVER[áí∂¯Â¸Áò]; $aøÉ¬åÕã‹ = array(); $e±É´ƒ¶±ò = array_filter(explode($b Ô∆©π∑ [47], $fªÚ¶ù∫Ã¶)); foreach ($e±É´ƒ¶±ò as $fªÚ¶ù∫Ã¶) { $A¡“ŸÁ®ö¶ = explode($b Ô∆©π∑ [91], $fªÚ¶ù∫Ã¶); if ($A¡“ŸÁ®ö¶[0] == $b Ô∆©π∑ [1789] && $A¡“ŸÁ®ö¶[1] != $b Ô∆©π∑ [1044]) { $C‘óÚ™º¬¡ = $A¡“ŸÁ®ö¶[0] . $b Ô∆©π∑ [91] . $A¡“ŸÁ®ö¶[1] . $b Ô∆©π∑ [2519]; if (!in_array($C‘óÚ™º¬¡, $e±É´ƒ¶±ò)) { $aøÉ¬åÕã‹[] = $C‘óÚ™º¬¡; } } $aøÉ¬åÕã‹[] = $fªÚ¶ù∫Ã¶; } $fªÚ¶ù∫Ã¶ = implode($b Ô∆©π∑ [47], $aøÉ¬åÕã‹); } public function sort($bÆπÌàòíÛ, $cÛ¶ÈÚÂÚ‚) { return parent::update($bÆπÌàòíÛ, $cÛ¶ÈÚÂÚ‚); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\x2e\164\x61\x73\153\114\x69\x73\164"; public $field = array("\x6e\141\155\145", "\164\x79\x70\145", "\x65\x76\x65\156\x74", "\164\x69\155\145", "\x64\x65\x73\x63", "\x73\x79\x73\164\x65\x6d", "\145\156\141\142\154\x65", "\x6c\x61\x73\164\122\x75\x6e", "\163\157\162\x74"); public function listData($e”òÀ—•¿« = false, $bØ¿ôïá†Ú = "\x73\x6f\162\164", $Câº®»ÀÃ∫ = false) { return parent::listData($e”òÀ—•¿«, $bØ¿ôïá†Ú, $Câº®»ÀÃ∫); } public function add($dõáôÀ’ÑŸ) { $fº¯Íë®∫ø =& $_SERVER[áí∂¯Â¸Áò]; $F◊“ÔÇãèè = $this->findByName($dõáôÀ’ÑŸ[$fº¯Íë®∫ø[28]]); if ($F◊“ÔÇãèè) { return !1; } $dõáôÀ’ÑŸ[$fº¯Íë®∫ø[1408]] = 0; $dõáôÀ’ÑŸ[$fº¯Íë®∫ø[2134]] = $this->getSort(); return parent::insert($dõáôÀ’ÑŸ); } private function getSort() { $e∆› Ñ‰´€ =& $_SERVER[áí∂¯Â¸Áò]; $EÇ‰ÈÕ‡—Ÿ = parent::listData(); $a¯≈Û⁄—‡Ñ = array_to_keyvalue($EÇ‰ÈÕ‡—Ÿ, $e∆› Ñ‰´€[33], $e∆› Ñ‰´€[2134]); return empty($a¯≈Û⁄—‡Ñ) ? 0 : max($a¯≈Û⁄—‡Ñ) + 1; } public function update($CÒ¶ÖúÉÚÜ, $FÇí°ç«ï∑) { $c⁄¿–ÆàÌí =& $_SERVER[áí∂¯Â¸Áò]; $fÜÉı¨∑ò© = $this->listData($CÒ¶ÖúÉÚÜ); $d®ßñêÇ•Û = $this->findByName($FÇí°ç«ï∑[$c⁄¿–ÆàÌí[28]]); if (!$fÜÉı¨∑ò© || $d®ßñêÇ•Û && $d®ßñêÇ•Û[$c⁄¿–ÆàÌí[371]] != $fÜÉı¨∑ò©[$c⁄¿–ÆàÌí[371]]) { return !1; } return parent::update($CÒ¶ÖúÉÚÜ, $FÇí°ç«ï∑); } public function remove($Bˆ®öˆÕÕ›, $bâ‹…‹äúÑ = false) { $Aã»¥çâñà =& $_SERVER[áí∂¯Â¸Áò]; $e∫Ãé¥ÿÌ∂ = $this->listData($Bˆ®öˆÕÕ›); if (!$e∫Ãé¥ÿÌ∂) { return; } if (!$bâ‹…‹äúÑ && $e∫Ãé¥ÿÌ∂[$Aã»¥çâñà[1087]] == $Aã»¥çâñà[83]) { return !1; } return parent::remove($Bˆ®öˆÕÕ›); } public function enable($FƒªÇêﬂÓ, $d¶¢àÖ‡çÛ) { return $this->update($FƒªÇêﬂÓ, array($_SERVER[áí∂¯Â¸Áò][2510] => $d¶¢àÖ‡çÛ)); } public function run($cèÁâë√ÎÑ) { return $this->update($cèÁâë√ÎÑ, array($_SERVER[áí∂¯Â¸Áò][2520] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\163\x65\162\137\146\141\x76"; protected function cacheFunctionAlias($Bä–µ¢•ë˘) { $FÍ—ú’ô⁄Ü =& $_SERVER[áí∂¯Â¸Áò]; return array($FÍ—ú’ô⁄Ü[2208] => array(USER_ID, $FÍ—ú’ô⁄Ü[2521])); } protected function listData() { $CÏäÔçìäÑ =& $_SERVER[áí∂¯Â¸Áò]; $c⁄”ÜÉ“◊ˆ = array($CÏäÔçìäÑ[1434] => USER_ID, $CÏäÔçìäÑ[447] => 0); $fïñÇ⁄•Óì = $CÏäÔçìäÑ[2522]; $a÷ë°ü¢‰Ü = $this->field($fïñÇ⁄•Óì)->where($c⁄”ÜÉ“◊ˆ)->order($CÏäÔçìäÑ[2523])->select(); return $a÷ë°ü¢‰Ü ? $a÷ë°ü¢‰Ü : array(); } protected function resetCache() { } protected function listView() { goto bΩÕøäéÃò; AñªÏ¨‡ç÷: $DË¶ëåÍ⁄÷ = array_to_keyvalue($Aëƒ¢ﬂ≈œ≠, $c¥†çã£›Ã[33], $c¥†çã£›Ã[75]); if (!$DË¶ëåÍ⁄÷) { return $e€Ë¢ì◊™±; } $aƒı∫£ãõâ = 2000; goto f¯äûﬂÀç¯; f¯äûﬂÀç¯: $bå¨âó≤øË = array($c¥†çã£›Ã[395] => array($c¥†çã£›Ã[396], $DË¶ëåÍ⁄÷)); $a‘Ìæ’ä—ë = Model($c¥†çã£›Ã[758])->listSource($bå¨âó≤øË, $aƒı∫£ãõâ); $a‘Ìæ’ä—ë = array_merge($a‘Ìæ’ä—ë[$c¥†çã£›Ã[73]], $a‘Ìæ’ä—ë[$c¥†çã£›Ã[74]]); goto A∆á÷ƒÛÏ∫; A∆á÷ƒÛÏ∫: $a‘Ìæ’ä—ë = array_to_keyvalue($a‘Ìæ’ä—ë, $c¥†çã£›Ã[381]); foreach ($e€Ë¢ì◊™± as $DÀ∂®‹Ô·„ => $bı¡ãπî›…) { $Fçı≥¡◊¡á = $a‘Ìæ’ä—ë[$bı¡ãπî›…[$c¥†çã£›Ã[75]]]; $Fçı≥¡◊¡á = $Fçı≥¡◊¡á ? $Fçı≥¡◊¡á : array(); $e€Ë¢ì◊™±[$DÀ∂®‹Ô·„] = array_merge($Fçı≥¡◊¡á, $bı¡ãπî›…); } return $e€Ë¢ì◊™±; goto CÔîåæÜ∆ﬁ; bΩÕøäéÃò: $c¥†çã£›Ã =& $_SERVER[áí∂¯Â¸Áò]; $e€Ë¢ì◊™± = $this->listData(); $Aëƒ¢ﬂ≈œ≠ = array_filter_by_field($e€Ë¢ì◊™±, $c¥†çã£›Ã[29], $c¥†çã£›Ã[394]); goto AñªÏ¨‡ç÷; CÔîåæÜ∆ﬁ: } protected function addFav($Eí‰ıœÂ˘É, $aºπ¶åÁ‡õ = '', $Eé‹œ∆ãë® = "\163\157\x75\162\x63\145") { goto eÜú©äÎÏÁ; f‰èñâ√©á: return $this->add($e¥éÒÁ£û‘); goto FÊîÑ«É¥∏; B·‡Öı™: if (!$aºπ¶åÁ‡õ && $Eé‹œ∆ãë® == $BØ≥ËÂ·¬»[394]) { $dÆª◊ô√ø = Model($BØ≥ËÂ·¬»[1124])->where(array($BØ≥ËÂ·¬»[395] => $Eí‰ıœÂ˘É))->find(); if (!$dÆª◊ô√ø) { return !1; } $aºπ¶åÁ‡õ = $dÆª◊ô√ø[$BØ≥ËÂ·¬»[28]]; } $aºπ¶åÁ‡õ = $this->getAutoName($aºπ¶åÁ‡õ); $e¥éÒÁ£û‘ = array($BØ≥ËÂ·¬»[1434] => USER_ID, $BØ≥ËÂ·¬»[447] => 0, $BØ≥ËÂ·¬»[398] => $aºπ¶åÁ‡õ, $BØ≥ËÂ·¬»[399] => $Eí‰ıœÂ˘É, $BØ≥ËÂ·¬»[400] => $Eé‹œ∆ãë®, $BØ≥ËÂ·¬»[2116] => $b∆ìˆÙ´°§ + 1); goto f‰èñâ√©á; CÈèéìÌì˜: $c¿’Éª≥ß≤ = array($BØ≥ËÂ·¬»[1434] => USER_ID, $BØ≥ËÂ·¬»[447] => 0); $b∆ìˆÙ´°§ = $this->where($c¿’Éª≥ß≤)->max($BØ≥ËÂ·¬»[2134]); if (!$b∆ìˆÙ´°§) { $b∆ìˆÙ´°§ = 0; } goto B·‡Öı™; eÜú©äÎÏÁ: $BØ≥ËÂ·¬» =& $_SERVER[áí∂¯Â¸Áò]; $c¿’Éª≥ß≤ = array($BØ≥ËÂ·¬»[1434] => USER_ID, $BØ≥ËÂ·¬»[447] => 0, $BØ≥ËÂ·¬»[400] => $Eé‹œ∆ãë®, $BØ≥ËÂ·¬»[399] => $Eí‰ıœÂ˘É); if ($this->where($c¿’Éª≥ß≤)->find()) { return !1; } goto CÈèéìÌì˜; FÊîÑ«É¥∏: } protected function remove($c¡Æ≠¡ùòí) { $Fù¡Ì„â«Ê =& $_SERVER[áí∂¯Â¸Áò]; $c’ÂÌ¶√±å = array($Fù¡Ì„â«Ê[1434] => USER_ID, $Fù¡Ì„â«Ê[397] => $c¡Æ≠¡ùòí); return $this->where($c’ÂÌ¶√±å)->delete(); } protected function removeByName($aΩÔ“éíÉ≠) { $CΩ√Ëßé«ÿ =& $_SERVER[áí∂¯Â¸Áò]; $c≈î≤¨ûˆª = array($CΩ√Ëßé«ÿ[1434] => USER_ID, $CΩ√Ëßé«ÿ[398] => $aΩÔ“éíÉ≠, $CΩ√Ëßé«ÿ[447] => 0); return $this->where($c≈î≤¨ûˆª)->delete(); } protected function rename($f©í≤âŸ‘´, $f◊ÛÀ£≈≥˜) { $E≥≈¢´öÛ© =& $_SERVER[áí∂¯Â¸Áò]; if ($f©í≤âŸ‘´ == $f◊ÛÀ£≈≥˜) { return !1; } $C˘⁄àßç£á = $this->getAutoName($f◊ÛÀ£≈≥˜); if ($f◊ÛÀ£≈≥˜ != $C˘⁄àßç£á) { return !1; } $A¡¿áπ∏ÂØ = array($E≥≈¢´öÛ©[1434] => USER_ID, $E≥≈¢´öÛ©[447] => 0, $E≥≈¢´öÛ©[28] => $f©í≤âŸ‘´); return $this->where($A¡¿áπ∏ÂØ)->save(array($E≥≈¢´öÛ©[28] => $f◊ÛÀ£≈≥˜)); } protected function resetSort($DªœÕº©ÇÑ) { $e¶ÆÁèã”‡ =& $_SERVER[áí∂¯Â¸Áò]; $DªœÕº©ÇÑ = is_array($DªœÕº©ÇÑ) ? $DªœÕº©ÇÑ : array(); $eçÇ√÷°°¿ = array($e¶ÆÁèã”‡[1434] => USER_ID); for ($e¡¥∫¡°≤Ñ = 0; $e¡¥∫¡°≤Ñ < count($DªœÕº©ÇÑ); $e¡¥∫¡°≤Ñ++) { $eçÇ√÷°°¿[$e¶ÆÁèã”‡[397]] = $DªœÕº©ÇÑ[$e¡¥∫¡°≤Ñ]; $this->where($eçÇ√÷°°¿)->save(array($e¶ÆÁèã”‡[2116] => $e¡¥∫¡°≤Ñ + 1)); } return !0; } protected function moveTop($CïØ„´Îì◊) { goto eÃçÚË∆‘ ; fçÚãçãä‡: $F™å◊¥≥ÜÍ = $bÆÑ¿ƒµ…Õ; $bÆÑ¿ƒµ…Õ = array_remove_value($bÆÑ¿ƒµ…Õ, $Cò„≈ªπÌ≠[$A⁄¬Ü¬´Ë„[371]]); array_unshift($bÆÑ¿ƒµ…Õ, $Cò„≈ªπÌ≠[$A⁄¬Ü¬´Ë„[371]]); goto eŸÔÓñÏ…‘; e¨∞»≈πì: if (!$Cò„≈ªπÌ≠) { return; } $bÆÑ¿ƒµ…Õ = $this->field($A⁄¬Ü¬´Ë„[371])->where($fÇ®ˆ¶µâü)->order($A⁄¬Ü¬´Ë„[2523])->select(); $bÆÑ¿ƒµ…Õ = array_to_keyvalue($bÆÑ¿ƒµ…Õ, $A⁄¬Ü¬´Ë„[33], $A⁄¬Ü¬´Ë„[371]); goto fçÚãçãä‡; eÃçÚË∆‘ : $A⁄¬Ü¬´Ë„ =& $_SERVER[áí∂¯Â¸Áò]; $fÇ®ˆ¶µâü = array($A⁄¬Ü¬´Ë„[1434] => USER_ID, $A⁄¬Ü¬´Ë„[447] => 0); $Cò„≈ªπÌ≠ = $this->where($fÇ®ˆ¶µâü)->where(array($A⁄¬Ü¬´Ë„[28] => $CïØ„´Îì◊))->find(); goto e¨∞»≈πì; eŸÔÓñÏ…‘: return $this->resetSort($bÆÑ¿ƒµ…Õ); goto eœ„âÏ›∞É; eœ„âÏ›∞É: } protected function moveBottom($Eé≈âÉªÑË) { $fªﬁıîπ”ü =& $_SERVER[áí∂¯Â¸Áò]; $fÛá∞õ¢ÜÜ = array($fªﬁıîπ”ü[1434] => USER_ID, $fªﬁıîπ”ü[447] => 0); $eØôª÷’Ÿπ = $this->where($fÛá∞õ¢ÜÜ)->max($fªﬁıîπ”ü[2134]); $eﬁ≈¢Ç™∆‘ = array($fªﬁıîπ”ü[2134] => $eØôª÷’Ÿπ + 1); return $this->where($fÛá∞õ¢ÜÜ)->where(array($fªﬁıîπ”ü[28] => $Eé≈âÉªÑË))->save($eﬁ≈¢Ç™∆‘); } private function getAutoName($Cœ’Ü‹ÕÜ∏) { goto eé˘˘¢≤Á’; e®∑˜Í§çç: $E∂∫âë∞¿ç = array_to_keyvalue($E∂∫âë∞¿ç, $c√ç∫ºáãë[33], $c√ç∫ºáãë[28]); if (!$E∂∫âë∞¿ç || !in_array($Cœ’Ü‹ÕÜ∏, $E∂∫âë∞¿ç)) { return $Cœ’Ü‹ÕÜ∏; } for ($e‡ÑƒâªÎ£ = 0; $e‡ÑƒâªÎ£ < count($E∂∫âë∞¿ç); $e‡ÑƒâªÎ£++) { if (!in_array($Cœ’Ü‹ÕÜ∏ . "\x28{$e‡ÑƒâªÎ£}\51", $E∂∫âë∞¿ç)) { return $Cœ’Ü‹ÕÜ∏ . "\50{$e‡ÑƒâªÎ£}\x29"; } } goto CÕ¨áèœ®Ú; eé˘˘¢≤Á’: $c√ç∫ºáãë =& $_SERVER[áí∂¯Â¸Áò]; $fº¿âÜÛâ∞ = array($c√ç∫ºáãë[1434] => USER_ID, $c√ç∫ºáãë[447] => 0); $E∂∫âë∞¿ç = $this->field($c√ç∫ºáãë[28])->where($fº¿âÜÛâ∞)->select(); goto e®∑˜Í§çç; CÕ¨áèœ®Ú: return $Cœ’Ü‹ÕÜ∏ . "\x28{$e‡ÑƒâªÎ£}\51"; goto f÷Ç‰“—É≥; f÷Ç‰“—É≥: } } goto fúŒ’∆µøë; b≥Î€„È≤ﬁ: class HttpDavServer { public function __construct($Eœπ ·ôÊº, $A©πÖÇ∞ùÂ) { $this->root = $Eœπ ·ôÊº; $this->initPath($A©πÖÇ∞ùÂ); $this->start(); } public function initPath($BíÛÜı⁄∞†) { $D˘åïéçÂ™ =& $_SERVER[áí∂¯Â¸Áò]; $a¯Ù˘≠ıÏ = rtrim($_SERVER[$D˘åïéçÂ™[1394]], $D˘åïéçÂ™[8]) . $D˘åïéçÂ™[8]; $this->urlBase = substr($a¯Ù˘≠ıÏ, 0, strpos($a¯Ù˘≠ıÏ, $BíÛÜı⁄∞†) + 1); $this->urlBase = rtrim($this->urlBase, $D˘åïéçÂ™[8]) . $BíÛÜı⁄∞†; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $c“Ì¢Ç·Œ° =& $_SERVER[áí∂¯Â¸Áò]; $FÁ”ı«¯Ü‡ = HttpAuth::get(); if ($FÁ”ı«¯Ü‡[$c“Ì¢Ç·Œ°[547]] == $c“Ì¢Ç·Œ°[1789] && $FÁ”ı«¯Ü‡[$c“Ì¢Ç·Œ°[900]] == $c“Ì¢Ç·Œ°[1790]) { return !0; } HttpAuth::error(); } public function start() { goto fâ≥œ©¨Úı; BŸÎßÒô–Œ: if (!$fØ∆Ö√›ﬁÑ) { return; } self::response($fØ∆Ö√›ﬁÑ); goto Cã—ÊıΩöã; fâ≥œ©¨Úı: $eÂ†©≈”¶ =& $_SERVER[áí∂¯Â¸Áò]; $this->checkUser(); $cœ≥ﬂáÔß€ = $eÂ†©≈”¶[144] . HttpHeader::method(); goto d≠ÎøÑÚƒ∫; d≠ÎøÑÚƒ∫: if (!method_exists($this, $cœ≥ﬂáÔß€)) { pr($cœ≥ﬂáÔß€ . $eÂ†©≈”¶[1791]); die; } $døﬁ∫éÜö¢ = array($eÂ†©≈”¶[1792], $eÂ†©≈”¶[1793]); if (!in_array($cœ≥ﬂáÔß€, $døﬁ∫éÜö¢) && !$this->pathExists($this->path)) { $fØ∆Ö√›ﬁÑ = array($eÂ†©≈”¶[1040] => 404); } else { $fØ∆Ö√›ﬁÑ = $this->{$cœ≥ﬂáÔß€}(); } goto BŸÎßÒô–Œ; Cã—ÊıΩöã: } public function pathGet($fÒîÌÂáùë = false) { $Cæ¥òäçéﬁ =& $_SERVER[áí∂¯Â¸Áò]; $eûŸ·Â∞ìÆ = $fÒîÌÂáùë ? $_SERVER[$Cæ¥òäçéﬁ[1794]] : $_SERVER[$Cæ¥òäçéﬁ[1394]]; $eûŸ·Â∞ìÆ = KodIO::clear(rawurldecode($eûŸ·Â∞ìÆ)); if (!strstr($eûŸ·Â∞ìÆ, KodIO::clear($this->urlBase))) { return !1; } return substr($eûŸ·Â∞ìÆ, strpos($eûŸ·Â∞ìÆ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($C…ù®∂»ÿî) { return file_exists($C…ù®∂»ÿî); } public function pathMkdir($F⁄µô…ı…À) { return mkdir($F⁄µô…ı…À, 511, !0); } public function pathInfo($e™Ùèñ¢ÀÈ) { return path_info($e™Ùèñ¢ÀÈ); } public function pathList($B‹äãñ≥¯Â) { return path_list($B‹äãñ≥¯Â); } public function pathOut($dê®ﬁ•Æ≤ª) { echo file_get_contents($dê®ﬁ•Æ≤ª); } public function pathPut($b›ß˜®Û∫Ñ, $BêÌ –ç€ = '') { if (!$BêÌ –ç€) { return file_put_contents($b›ß˜®Û∫Ñ, $_SERVER[áí∂¯Â¸Áò][33]); } return move_path($BêÌ –ç€, $b›ß˜®Û∫Ñ); } public function pathRemove($F…ô€”ó¡˘) { if (is_file($F…ô€”ó¡˘)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($EÕò£Œ™Âå, $E§Ø£¢Öº“) { return move_path($EÕò£Œ™Âå, $E§Ø£¢Öº“); } public function pathCopy($eºıÈü◊Ÿ˜, $fåæäéûàπ) { return copy_dir($eºıÈü◊Ÿ˜, $fåæäéûàπ); } public function parsePath($D˘√±àö–˘) { return $D˘√±àö–˘; } public function parseItem($AÍ¥ØÈ√Ùè, $bÜÆ≥¬ÿ—©) { goto dàò—›å≥⁄; E‹ƒã®Ú¡Ÿ: $dıù∂·¥æÀ = array($bÕªõåü’ [1795] => KodIO::clear($this->urlBase . $Dú·ÖÉâÃÖ), $bÕªõåü’ [107] => @gmdate($bÕªõåü’ [1796], $AÍ¥ØÈ√Ùè[$bÕªõåü’ [107]]), $bÕªõåü’ [191] => @gmdate($bÕªõåü’ [1797], $AÍ¥ØÈ√Ùè[$bÕªõåü’ [191]]), $bÕªõåü’ [77] => $AÍ¥ØÈ√Ùè[$bÕªõåü’ [77]] ? $AÍ¥ØÈ√Ùè[$bÕªõåü’ [77]] : 0); return $dıù∂·¥æÀ; goto cÊü®≥•á ; dˆ‘ñüéÈƒ: if ($bÜÆ≥¬ÿ—©) { $Dú·ÖÉâÃÖ = $bÕªõåü’ [8] . str_replace($bÕªõåü’ [176], $bÕªõåü’ [8], rawurlencode($this->pathGet())); } if (!trim($AÍ¥ØÈ√Ùè[$bÕªõåü’ [107]])) { $AÍ¥ØÈ√Ùè[$bÕªõåü’ [107]] = time(); } if (!trim($AÍ¥ØÈ√Ùè[$bÕªõåü’ [191]])) { $AÍ¥ØÈ√Ùè[$bÕªõåü’ [191]] = time(); } goto E‹ƒã®Ú¡Ÿ; dàò—›å≥⁄: $bÕªõåü’  =& $_SERVER[áí∂¯Â¸Áò]; $Dú·ÖÉâÃÖ = $this->pathGet() . $bÕªõåü’ [8] . $AÍ¥ØÈ√Ùè[$bÕªõåü’ [28]]; $Dú·ÖÉâÃÖ = $bÕªõåü’ [8] . str_replace($bÕªõåü’ [176], $bÕªõåü’ [8], rawurlencode($Dú·ÖÉâÃÖ)); goto dˆ‘ñüéÈƒ; cÊü®≥•á : } public function parseItemXml($E°›·¶¬ù∂, $C‡÷¢Ú…îò) { $Aâá›„ÎÛ∂ =& $_SERVER[áí∂¯Â¸Áò]; $aÇÎ–ù∏—â = $this->parseItem($E°›·¶¬ù∂, $C‡÷¢Ú…îò); if ($E°›·¶¬ù∂[$Aâá›„ÎÛ∂[29]] == $Aâá›„ÎÛ∂[76]) { $cÉ’ ≠€Ñá = $Aâá›„ÎÛ∂[1798]; $cÉ’ ≠€Ñá .= $Aâá›„ÎÛ∂[1799]; } else { $D´Ã†Ë√Œø = $E°›·¶¬ù∂[$Aâá›„ÎÛ∂[165]] ? $E°›·¶¬ù∂[$Aâá›„ÎÛ∂[165]] : get_path_ext($E°›·¶¬ù∂[$Aâá›„ÎÛ∂[28]]); $dñŸ⁄æﬁ√Ü = get_file_mime($D´Ã†Ë√Œø); $cÉ’ ≠€Ñá = $Aâá›„ÎÛ∂[1800]; $cÉ’ ≠€Ñá .= "\74\104\72\147\145\x74\x63\157\156\x74\x65\156\164\x74\x79\x70\145\76{$dñŸ⁄æﬁ√Ü}\x3c\x2f\104\72\x67\145\164\143\157\x6e\x74\x65\156\x74\164\171\160\145\x3e"; } return "\12\11\x9\74\104\72\x72\x65\x73\x70\x6f\x6e\x73\x65\x3e\xa\x9\x9\x9\x3c\x44\x3a\150\162\x65\146\x3e{$aÇÎ–ù∏—â[$Aâá›„ÎÛ∂[1795]]}\74\x2f\104\x3a\150\x72\145\x66\76\12\x9\x9\11\x3c\x44\x3a\160\x72\x6f\x70\x73\164\141\x74\x3e\12\11\x9\x9\x9\74\104\x3a\160\162\x6f\x70\x3e\xa\x9\11\11\x9\11\x3c\104\x3a\x67\145\164\x6c\x61\x73\164\155\157\144\151\146\151\145\144\76{$aÇÎ–ù∏—â[$Aâá›„ÎÛ∂[107]]}\74\57\104\x3a\x67\145\x74\154\141\x73\x74\x6d\x6f\144\151\x66\151\145\144\x3e\xa\x9\x9\11\x9\11\74\104\72\x63\x72\x65\141\164\x69\157\156\144\x61\x74\x65\76{$aÇÎ–ù∏—â[$Aâá›„ÎÛ∂[191]]}\74\x2f\x44\x3a\x63\162\145\x61\164\x69\x6f\x6e\144\x61\164\145\76\xa\11\11\11\x9\x9\x3c\x44\x3a\x67\x65\x74\143\157\156\164\x65\156\x74\x6c\145\156\x67\164\x68\x3e{$aÇÎ–ù∏—â[$Aâá›„ÎÛ∂[77]]}\x3c\57\104\72\147\145\x74\x63\x6f\156\x74\x65\x6e\164\154\x65\156\x67\164\150\76\xa\11\11\x9\11\x9{$cÉ’ ≠€Ñá}\xa\x9\x9\11\x9\x3c\57\104\x3a\160\x72\x6f\x70\x3e\xa\x9\x9\11\x9\74\104\72\x73\x74\x61\164\x75\163\x3e\x48\124\124\120\x2f\x31\x2e\61\x20\x32\60\60\x20\x4f\113\x3c\57\x44\x3a\x73\x74\x61\164\x75\x73\76\xa\x9\x9\11\x3c\x2f\104\72\160\x72\x6f\160\163\x74\141\164\76\xa\11\11\74\57\x44\x3a\162\145\x73\160\x6f\x6e\163\x65\x3e"; } public function pathListMerge($C–‹◊É÷Á£) { goto e´›£íÂ–˜; E™„åàé÷§: $F≥‚–á∑èÿ = array(); foreach ($C–‹◊É÷Á£ as $dêä´å¯Û‹ => $dÁıá’çÇÚ) { if (!in_array($dêä´å¯Û‹, $E—†Éçﬁò«) || !is_array($dÁıá’çÇÚ)) { continue; } $F≥‚–á∑èÿ = array_merge($F≥‚–á∑èÿ, $dÁıá’çÇÚ); } foreach ($F≥‚–á∑èÿ as &$aπ∑†∏Ë›É) { $aπ∑†∏Ë›É[$eë÷Øãﬂà‡[28]] = str_replace($eë÷Øãﬂà‡[8], $eë÷Øãﬂà‡[1396], $aπ∑†∏Ë›É[$eë÷Øãﬂà‡[28]]); } goto B©∂®Ñπ◊œ; e´›£íÂ–˜: $eë÷Øãﬂà‡ =& $_SERVER[áí∂¯Â¸Áò]; if (!$C–‹◊É÷Á£) { return $C–‹◊É÷Á£; } $E—†Éçﬁò« = array($eë÷Øãﬂà‡[73], $eë÷Øãﬂà‡[74], $eë÷Øãﬂà‡[1801]); goto E™„åàé÷§; B©∂®Ñπ◊œ: unset($aπ∑†∏Ë›É); return $F≥‚–á∑èÿ; goto bÛƒÇ¿ïﬂè; bÛƒÇ¿ïﬂè: } public function httpPROPFIND() { goto Fó¡¢ﬁò€; aû´‹√Ù‹ : $C¨‡√∆íÑ≈ = $Cê⁄≤Ω∆Ê≈[$d◊∞¿åÜ¡à[1802]]; if (!is_array($F©Ã±„À—) || $C¨‡√∆íÑ≈[$d◊∞¿åÜ¡à[1803]] === !1) { return array($d◊∞¿åÜ¡à[1804] => 404, $d◊∞¿åÜ¡à[1805] => $d◊∞¿åÜ¡à[1806]); } $b†•≠éº∑Ì = $C¨‡√∆íÑ≈[$d◊∞¿åÜ¡à[29]] == $d◊∞¿åÜ¡à[171] || HttpHeader::get($d◊∞¿åÜ¡à[1781]) == $d◊∞¿åÜ¡à[481]; goto bÕ™üÍõœˆ; Fó¡¢ﬁò€: $d◊∞¿åÜ¡à =& $_SERVER[áí∂¯Â¸Áò]; $Cê⁄≤Ω∆Ê≈ = $this->pathList($this->path); $F©Ã±„À— = $this->pathListMerge($Cê⁄≤Ω∆Ê≈); goto aû´‹√Ù‹ ; bÕ™üÍõœˆ: if ($b†•≠éº∑Ì) { $F©Ã±„À— = array($C¨‡√∆íÑ≈); } else { $C¨‡√∆íÑ≈[$d◊∞¿åÜ¡à[28]] = $d◊∞¿åÜ¡à[33]; $F©Ã±„À— = array_merge(array($C¨‡√∆íÑ≈), $F©Ã±„À—); } $Eâ¬©Èçêü = $d◊∞¿åÜ¡à[33]; foreach ($F©Ã±„À— as $düá¿õ¿ÍÖ) { $Eâ¬©Èçêü .= $this->parseItemXml($düá¿õ¿ÍÖ, $b†•≠éº∑Ì); } goto B∂¯¬ÃÑ∫Ó; B∂¯¬ÃÑ∫Ó: return array($d◊∞¿åÜ¡à[1804] => 207, $d◊∞¿åÜ¡à[1805] => "\x3c\x44\x3a\155\165\154\164\151\x73\164\141\164\165\x73\40\170\x6d\x6c\156\x73\x3a\x44\75\x22\104\x41\126\x3a\x22\76\12{$Eâ¬©Èçêü}\12\74\x2f\104\x3a\155\165\x6c\x74\x69\x73\164\141\164\165\x73\76"); goto eÿç•©€ÊÕ; eÿç•©€ÊÕ: } public function httpHEAD() { $BˆﬁüÏêß’ =& $_SERVER[áí∂¯Â¸Áò]; $Aà›¢Ô”˜» = $this->pathInfo($this->path); if (!$Aà›¢Ô”˜» || $Aà›¢Ô”˜»[$BˆﬁüÏêß’[29]] == $BˆﬁüÏêß’[76]) { return array($BˆﬁüÏêß’[1040] => 200, $BˆﬁüÏêß’[1214] => array($BˆﬁüÏêß’[1807])); } return array($BˆﬁüÏêß’[1040] => 200, $BˆﬁüÏêß’[1214] => array($BˆﬁüÏêß’[1808], $BˆﬁüÏêß’[136], $BˆﬁüÏêß’[1809] . $Aà›¢Ô”˜»[$BˆﬁüÏêß’[77]], $BˆﬁüÏêß’[1810] . get_file_mime($Aà›¢Ô”˜»[$BˆﬁüÏêß’[165]]), $BˆﬁüÏêß’[132] . gmdate($BˆﬁüÏêß’[1796], $Aà›¢Ô”˜»[$BˆﬁüÏêß’[1260]]) . $BˆﬁüÏêß’[1811], $BˆﬁüÏêß’[1812])); } public function httpOPTIONS() { $e–¬åÂú“π =& $_SERVER[áí∂¯Â¸Áò]; return array($e–¬åÂú“π[1040] => 200, $e–¬åÂú“π[1214] => array($e–¬åÂú“π[1813], $e–¬åÂú“π[1814], $e–¬åÂú“π[1815], $e–¬åÂú“π[1269])); } public function httpPROPPATCH() { $DÁÂ‘éåÇÍ =& $_SERVER[áí∂¯Â¸Áò]; $C«û…¬£“— = $DÁÂ‘éåÇÍ[1816] . $_SERVER[$DÁÂ‘éåÇÍ[1394]] . $DÁÂ‘éåÇÍ[1817]; return array($DÁÂ‘éåÇÍ[1804] => 207, $DÁÂ‘éåÇÍ[1805] => "\x3c\x44\72\155\x75\154\x74\x69\163\164\x61\x74\x75\x73\x20\x78\155\154\156\x73\72\104\75\x22\104\x41\126\x3a\42\x3e\xa{$C«û…¬£“—}\xa\74\x2f\104\x3a\155\165\x6c\x74\151\x73\164\x61\x74\165\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $B”Ïú‰ÊÇﬁ =& $_SERVER[áí∂¯Â¸Áò]; $BøﬂΩö∂Õ¥ = $this->uploadFile(); if ($BøﬂΩö∂Õ¥) { $cÏç—üÖÂŸ = 204; } else { $BøﬂΩö∂Õ¥ = $B”Ïú‰ÊÇﬁ[33]; $cÏç—üÖÂŸ = 201; } $FìÜπ∑áÚë = $this->pathPut($this->path, $BøﬂΩö∂Õ¥); if ($FìÜπ∑áÚë == !1) { $cÏç—üÖÂŸ = 404; } return array($B”Ïú‰ÊÇﬁ[1804] => $cÏç—üÖÂŸ); } private function uploadFile() { goto cµ£Âéß∫Í; aøÊç≈ì‘á: while (!feof($e§è «û•)) { fwrite($Eõ”äª—Ω√, fread($e§è «û•, 1024 * 200)); } fclose($e§è «û•); fclose($Eõ”äª—Ω√); goto C—û¥πÀÿ®; C—û¥πÀÿ®: if (@filesize_64($A∞∞Õ Öõõ) > 0) { return $A∞∞Õ Öõõ; } @unlink($A∞∞Õ Öõõ); return !1; goto d◊àƒçÂŒü; cµ£Âéß∫Í: $C√ﬂÙéÇª‹ =& $_SERVER[áí∂¯Â¸Áò]; @mk_dir(TEMP_FILES); $A∞∞Õ Öõõ = TEMP_FILES . $C√ﬂÙéÇª‹[1818] . rand_string(32); goto Fˆ‡üﬂëº«; Fˆ‡üﬂëº«: $Eõ”äª—Ω√ = @fopen($A∞∞Õ Öõõ, $C√ﬂÙéÇª‹[1528]); $e§è «û• = @fopen($C√ﬂÙéÇª‹[1819], $C√ﬂÙéÇª‹[1527]); if (!$e§è «û• || !$Eõ”äª—Ω√) { @unlink($A∞∞Õ Öõõ); return !1; } goto aøÊç≈ì‘á; d◊àƒçÂŒü: } public function httpMKCOL() { $Dáœ≥ÿ¶‰Ü =& $_SERVER[áí∂¯Â¸Áò]; if ($this->pathExists($this->path)) { return array($Dáœ≥ÿ¶‰Ü[1040] => 409); } $A‰É„ ¶‘¢ = $this->pathMkdir($this->path); return array($Dáœ≥ÿ¶‰Ü[1040] => $A‰É„ ¶‘¢ ? 201 : 403); } public function httpMOVE() { $E¶€¶—∆‚π =& $_SERVER[áí∂¯Â¸Áò]; $bΩ∆©›Êá≠ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$E¶€¶—∆‚π[1820]])) { $eû√Âó÷”≤[$E¶€¶—∆‚π[1821]] = $_SERVER[$E¶€¶—∆‚π[1820]] == $E¶€¶—∆‚π[1822]; } $bäú‘ïç‰‡ = $this->pathMove($this->path, $bΩ∆©›Êá≠); return array($E¶€¶—∆‚π[1040] => $bäú‘ïç‰‡ ? 201 : 404); } public function httpCOPY() { $Câˆ§¢–Ù∞ = $this->parsePath($this->pathGet(!0)); $Aã®„®ãØà = $this->pathCopy($this->path, $Câˆ§¢–Ù∞); return array($_SERVER[áí∂¯Â¸Áò][1040] => $Aã®„®ãØà ? 201 : 404); } public function httpDELETE() { $cœÇÌÓí˘Á = $this->pathRemove($this->path); return array($_SERVER[áí∂¯Â¸Áò][1040] => $cœÇÌÓí˘Á ? 200 : 503); } public function httpLOCK() { $AëÉ≠‚ºËã =& $_SERVER[áí∂¯Â¸Áò]; $DÙ¢ïÇÎ£µ = md5($this->path); $b„˜áÑ”íΩ = $AëÉ≠‚ºËã[1823] . $this->xmlGet($AëÉ≠‚ºËã[1824]) . $AëÉ≠‚ºËã[1825] . $DÙ¢ïÇÎ£µ . $AëÉ≠‚ºËã[1826]; return array($AëÉ≠‚ºËã[1040] => 200, $AëÉ≠‚ºËã[1214] => array($AëÉ≠‚ºËã[1827] . $DÙ¢ïÇÎ£µ, $AëÉ≠‚ºËã[1828]), $AëÉ≠‚ºËã[1829] => $b„˜áÑ”íΩ); } public function httpUNLOCK() { return array($_SERVER[áí∂¯Â¸Áò][1040] => 204); } public function xmlGet($E§øÚ∂ÛÕ) { goto BßÖ≥Ë¯óâ; FÕ‚Ω≈√Æ‰: if ($A≤±∂û¡”‹) { return $A≤±∂û¡”‹[0]->nodeValue; } return $eºÍ ãÊÑè[33]; goto Fæá’ΩÖ¥‡; BÁâû‚∆–±: $fœóÂåù—ô = explode($eºÍ ãÊÑè[8], $E§øÚ∂ÛÕ); $E≥π¥Øó§´ = array_shift($fœóÂåù—ô); $A≤±∂û¡”‹ = $B¯øﬁÉçûÑ->getElementsByTagNameNS($eºÍ ãÊÑè[1831], $E≥π¥Øó§´); goto FÕ‚Ω≈√Æ‰; BßÖ≥Ë¯óâ: $eºÍ ãÊÑè =& $_SERVER[áí∂¯Â¸Áò]; static $B¯øﬁÉçûÑ = false; if (!$B¯øﬁÉçûÑ) { $f»†¡ñŒ€º = file_get_contents($eºÍ ãÊÑè[1830]); $B¯øﬁÉçûÑ = new DOMDocument(); $B¯øﬁÉçûÑ->loadXML($f»†¡ñŒ€º); } goto BÁâû‚∆–±; Fæá’ΩÖ¥‡: } public static function response($côµ¨Æ™Íå) { goto cû◊ˆô§ÑØ; cæÓ⁄¯¥ìç: $Bõ”¬ê∂¬†[] = $Bñ¶ˆÕÙï€[1771]; $Bõ”¬ê∂¬†[] = $Bñ¶ˆÕÙï€[1772]; foreach ($Bõ”¬ê∂¬† as $dÉæÉ°ÕÀà) { header($dÉæÉ°ÕÀà); } goto F€≥ã¬≠Îó; F€≥ã¬≠Îó: if (is_string($côµ¨Æ™Íå[$Bñ¶ˆÕÙï€[1829]])) { header($Bñ¶ˆÕÙï€[1832]); $AÆÕﬂÙ£„Ö = $Bñ¶ˆÕÙï€[1833] . $Bñ¶ˆÕÙï€[221] . $côµ¨Æ™Íå[$Bñ¶ˆÕÙï€[1829]]; echo $AÆÕﬂÙ£„Ö; } goto eù§∑—ƒ¶Û; cû◊ˆô§ÑØ: $Bñ¶ˆÕÙï€ =& $_SERVER[áí∂¯Â¸Áò]; $Bõ”¬ê∂¬† = is_array($côµ¨Æ™Íå[$Bñ¶ˆÕÙï€[1214]]) ? $côµ¨Æ™Íå[$Bñ¶ˆÕÙï€[1214]] : array(); $Bõ”¬ê∂¬†[] = HttpHeader::code($côµ¨Æ™Íå[$Bñ¶ˆÕÙï€[1040]]); goto cæÓ⁄¯¥ìç; eù§∑—ƒ¶Û: } } class HttpHeader { public static $_headers = array("\110\157\x73\x74" => "\x48\x54\x54\x50\x5f\x48\x4f\123\x54", "\x55\163\x65\162\55\101\147\x65\x6e\164" => "\110\x54\x54\x50\x5f\x55\x53\x45\122\137\101\107\x45\x4e\124", "\103\x6f\x6e\x74\x65\x6e\164\x2d\124\171\x70\x65" => "\110\x54\x54\x50\x5f\x43\117\116\124\105\116\x54\x5f\124\131\x50\105", "\x43\x6f\x6e\164\x65\156\164\x2d\x4c\145\x6e\x67\x74\150" => "\x48\124\x54\x50\x5f\103\x4f\x4e\124\x45\x4e\x54\x5f\x4c\x45\x4e\107\124\110", "\x44\145\x70\164\150" => "\x48\124\124\x50\x5f\x44\105\120\x54\110", "\x45\170\160\x65\x63\x74" => "\x48\x54\124\x50\x5f\x45\130\120\105\x43\x54", "\x49\x66\x2d\116\x6f\156\x65\x2d\x4d\141\164\x63\150" => "\x48\124\x54\x50\137\x49\x46\137\116\x4f\116\x45\x5f\x4d\x41\124\x43\110", "\x49\146\x2d\x4d\x61\164\x63\150" => "\110\x54\x54\x50\x5f\111\106\x5f\115\101\124\x43\x48", "\111\146\55\122\141\x6e\147\145" => "\110\124\x54\120\137\x49\x46\x5f\122\x41\116\x47\x45", "\x4c\141\x73\164\55\115\x6f\144\151\x66\151\145\x64" => "\110\x54\124\x50\x5f\x4c\101\123\124\137\x4d\117\104\x49\106\111\x45\x44", "\111\146\55\x4d\157\144\151\146\x69\145\x64\55\123\151\156\x63\145" => "\x48\x54\x54\120\137\x49\106\137\115\x4f\x44\111\x46\x49\x45\x44\x5f\123\111\x4e\x43\105", "\111\x66\x2d\x55\x6e\x6d\x6f\144\x69\146\x69\145\144\55\x53\x69\156\x63\145" => "\110\x54\124\x50\x5f\x49\x46\137\x55\x4e\x4d\117\x44\x49\x46\x49\105\x44\137\x53\x49\x4e\x43\x45", "\x52\x61\156\x67\x65" => "\x48\x54\124\120\137\122\x41\x4e\x47\x45", "\x54\151\155\145\x6f\165\x74" => "\x48\x54\x54\120\137\x54\111\x4d\x45\x4f\125\x54", "\x49\146" => "\x48\x54\x54\x50\137\x49\x46", "\x4c\157\x63\153\55\x54\x6f\x6b\x65\156" => "\x48\x54\124\x50\137\114\x4f\x43\113\x5f\x54\x4f\113\105\x4e", "\117\x76\x65\x72\x77\x72\151\164\145" => "\x48\x54\x54\x50\137\x4f\x56\105\x52\127\x52\111\124\x45", "\104\145\163\164\x69\x6e\x61\164\151\x6f\156" => "\x48\x54\124\x50\x5f\104\105\x53\x54\111\116\x41\x54\x49\x4f\116", "\122\145\x71\165\x65\x73\x74\x2d\111\144" => "\122\x45\121\x55\105\x53\124\x5f\111\104", "\122\x65\x71\165\145\x73\x74\55\x42\157\144\171\55\x46\151\x6c\145" => "\122\x45\121\x55\x45\x53\x54\137\x42\117\x44\131\137\106\x49\x4c\x45", "\x52\145\144\x69\162\145\x63\x74\x2d\123\x74\x61\164\x75\163" => "\x52\x45\104\x49\122\105\x43\124\137\x53\x54\x41\x54\x55\x53"); public static function init() { static $fòﬁ˜Î·¡õ = false; if ($fòﬁ˜Î·¡õ) { return; } foreach ($_SERVER as $AÉø»Óå◊ú => $D¶ΩËáÌﬂˆ) { $AÉø»Óå◊ú = strtoupper($AÉø»Óå◊ú); if (!array_key_exists($AÉø»Óå◊ú, $_SERVER)) { continue; } $_SERVER[$AÉø»Óå◊ú] = $D¶ΩËáÌﬂˆ; } foreach (self::$_headers as $AÉø»Óå◊ú => $f§ãû£¶∂≤) { if (!array_key_exists($AÉø»Óå◊ú, $_SERVER)) { continue; } $_SERVER[$AÉø»Óå◊ú] = $_SERVER[$f§ãû£¶∂≤]; $_SERVER[strtoupper($AÉø»Óå◊ú)] = $_SERVER[$f§ãû£¶∂≤]; } } public static function get($AïëÃ£§Ø‹) { self::init(); return $_SERVER[$AïëÃ£§Ø‹] ? $_SERVER[$AïëÃ£§Ø‹] : $_SERVER[$_SERVER[áí∂¯Â¸Áò][1834] . strtoupper($AïëÃ£§Ø‹)]; } public static function method() { return strtoupper(self::get($_SERVER[áí∂¯Â¸Áò][154])); } public static function length() { $bÖìíÜ˜‚ﬂ =& $_SERVER[áí∂¯Â¸Áò]; $f¨¬ãè¶ÜÏ = self::get($bÖìíÜ˜‚ﬂ[1835]); if (!$f¨¬ãè¶ÜÏ) { $f¨¬ãè¶ÜÏ = self::get($bÖìíÜ˜‚ﬂ[1153]); } return $f¨¬ãè¶ÜÏ; } public static function range() { $FØß√∞„Âç =& $_SERVER[áí∂¯Â¸Áò]; $AÏ“î∂â∂Û = self::get($FØß√∞„Âç[202]); if (!$AÏ“î∂â∂Û) { return !1; } if (!preg_match($FØß√∞„Âç[1836], $AÏ“î∂â∂Û, $BèÃÍÓÈáı)) { return !1; } if ($BèÃÍÓÈáı[1] === $FØß√∞„Âç[33] && $BèÃÍÓÈáı[2] === $FØß√∞„Âç[33]) { return !1; } return array($BèÃÍÓÈáı[1] !== $FØß√∞„Âç[33] ? $BèÃÍÓÈáı[1] : null, $BèÃÍÓÈáı[2] !== $FØß√∞„Âç[33] ? $BèÃÍÓÈáı[2] : null); } public static $statusCode = array("\x31\60\x30" => "\x43\157\156\x74\x69\x6e\165\x65", "\x31\x30\61" => "\x53\x77\151\164\x63\150\151\156\x67\40\120\x72\x6f\164\x6f\x63\x6f\x6c", "\61\60\x32" => "\120\162\x6f\143\x65\163\x73\151\156\147", "\x31\60\x33" => "\105\x61\x72\154\171\40\x48\151\x6e\x74\163", "\62\60\x30" => "\x4f\113", "\x32\x30\61" => "\103\x72\145\141\x74\145\144", "\x32\x30\62" => "\x41\143\143\145\160\x74\x65\144", "\62\60\x33" => "\x4e\x6f\x6e\55\101\165\x74\150\157\x72\151\x74\141\164\x69\166\145\40\111\x6e\x66\x6f\x72\155\141\164\151\157\156", "\x32\x30\x34" => "\x4e\157\40\x43\157\x6e\x74\145\156\x74", "\x32\x30\65" => "\122\x65\163\x65\164\40\103\157\x6e\164\145\156\x74", "\x32\x30\x36" => "\x50\141\x72\x74\151\141\x6c\40\103\x6f\x6e\164\x65\x6e\164", "\62\x30\67" => "\x4d\165\154\164\x69\x2d\123\x74\x61\164\x75\x73", "\63\x30\60" => "\115\165\x6c\x74\151\x70\154\x65\40\103\x68\157\151\x63\x65\163", "\63\60\61" => "\115\x6f\x76\145\x64\x20\120\145\162\x6d\x61\x6e\145\156\x74\x6c\x79", "\63\x30\x32" => "\x46\157\165\156\x64", "\63\60\x33" => "\123\x65\145\40\x4f\x74\x68\x65\x72", "\63\60\64" => "\116\x6f\164\40\x4d\157\144\151\146\x69\145\144", "\63\60\65" => "\125\x73\x65\40\x50\x72\x6f\170\171", "\x33\60\67" => "\x54\x65\155\x70\x6f\x72\141\162\171\40\x52\145\x64\x69\x72\x65\x63\x74", "\63\x30\70" => "\120\145\162\155\141\156\x65\x6e\x74\x20\122\x65\x64\151\162\x65\143\x74", "\x34\60\x30" => "\x42\x61\x64\40\x52\145\161\x75\x65\163\164", "\64\x30\x31" => "\125\156\x61\165\164\x68\157\162\x69\172\x65\x64", "\64\60\x32" => "\120\x61\171\x6d\x65\x6e\x74\40\x52\x65\x71\165\x69\162\145\144", "\x34\x30\63" => "\x46\157\162\x62\x69\144\144\145\x6e", "\64\x30\x34" => "\116\x6f\164\x20\106\x6f\x75\x6e\144", "\64\x30\x35" => "\115\x65\x74\x68\157\144\40\116\x6f\x74\40\x41\154\154\x6f\167\x65\144", "\x34\x30\66" => "\116\157\164\40\101\143\143\x65\x70\x74\x61\x62\x6c\x65", "\x34\x30\x37" => "\x50\162\x6f\170\x79\x20\x41\x75\164\150\x65\x6e\164\x69\x63\141\x74\151\x6f\156\x20\x52\x65\161\x75\x69\x72\x65\144", "\64\x30\x38" => "\122\x65\x71\x75\x65\x73\164\x20\x54\151\155\145\157\x75\164", "\x34\60\x39" => "\103\x6f\156\146\x6c\151\143\164", "\64\61\60" => "\x47\157\156\x65", "\64\61\61" => "\114\145\x6e\147\164\x68\40\122\x65\x71\x75\x69\162\145\x64", "\x34\x31\x32" => "\120\162\x65\143\157\x6e\144\151\164\151\157\156\x20\x46\x61\x69\154\145\144", "\x34\61\x33" => "\x52\145\161\x75\145\163\164\40\x45\x6e\164\151\164\171\x20\124\x6f\157\x20\x4c\141\162\147\145", "\x34\x31\x34" => "\x52\145\x71\x75\145\x73\164\x20\125\x52\111\x20\x54\x6f\x6f\40\x4c\141\x72\x67\x65", "\x34\61\x35" => "\x55\156\163\165\x70\x70\x6f\162\164\145\144\x20\x4d\x65\144\x69\x61\x20\124\x79\160\145", "\64\x31\x36" => "\x52\x65\x71\165\145\163\164\145\144\40\122\x61\156\147\145\x20\x4e\x6f\164\x20\123\141\x74\x69\163\x66\151\141\142\x6c\x65", "\64\x31\67" => "\x45\x78\x70\145\143\164\x61\x74\x69\x6f\156\x20\x46\x61\x69\154\x65\x64", "\x34\62\62" => "\125\156\x70\x72\x6f\143\x65\x73\x73\x61\142\154\145\40\105\156\x74\x69\x74\171", "\x34\x32\x33" => "\114\x6f\143\x6b\x65\x64", "\x34\x32\64" => "\106\x61\151\154\145\144\x20\x44\x65\x70\145\x6e\x64\145\x6e\x63\171", "\64\x32\x35" => "\x55\156\x6f\162\144\145\162\145\144\40\x43\x6f\154\x6c\x65\x63\164\151\x6f\x6e", "\64\x32\x36" => "\125\x70\147\x72\x61\144\x65\40\x52\x65\x71\x75\151\x72\x65\144", "\x34\62\70" => "\x50\162\x65\x63\x6f\x6e\x64\x69\164\151\x6f\x6e\40\x52\x65\x71\x75\x69\162\x65\x64", "\64\62\x39" => "\x54\x6f\x6f\x20\x4d\141\x6e\171\x20\x52\x65\161\x75\145\163\164\x73", "\64\x33\61" => "\122\x65\161\165\x65\163\x74\x20\x48\145\141\x64\145\162\x20\106\151\x65\x6c\x64\163\x20\x54\x6f\157\40\x4c\x61\162\147\x65", "\x34\x34\64" => "\116\x6f\x20\122\145\x73\160\x6f\156\163\145", "\x34\x35\x30" => "\102\154\x6f\x63\153\x65\x64\40\142\171\x20\127\x69\x6e\144\x6f\x77\163\x20\x50\x61\x72\x65\156\x74\x61\154\40\x43\157\x6e\164\162\157\x6c\163", "\x34\65\x31" => "\x55\156\141\x76\141\x69\154\x61\142\154\x65\x20\106\x6f\x72\x20\114\145\147\x61\154\40\122\x65\141\163\x6f\156\x73", "\64\71\x34" => "\x52\145\x71\165\145\x73\x74\40\110\145\x61\144\145\x72\40\x54\157\157\40\114\x61\162\147\x65", "\x35\60\x30" => "\x49\x6e\164\145\x72\156\x61\x6c\x20\x53\145\162\166\145\x72\x20\105\162\162\x6f\162", "\x35\x30\x31" => "\x4e\157\164\40\111\x6d\x70\154\145\x6d\x65\156\164\145\144", "\65\60\62" => "\102\141\144\x20\x47\141\x74\145\x77\x61\x79", "\65\60\x33" => "\123\x65\x72\166\x69\143\x65\40\125\x6e\141\166\x61\151\x6c\x61\142\x6c\145", "\65\x30\x34" => "\x47\141\x74\x65\x77\x61\x79\x20\x54\151\x6d\145\157\165\164", "\x35\60\65" => "\x48\124\x54\x50\x20\x56\x65\x72\x73\x69\157\156\x20\x6e\157\164\x20\x73\x75\x70\160\157\x72\164\x65\x64", "\x35\x30\67" => "\x49\156\x73\x75\x66\146\151\x63\151\145\156\164\40\x53\164\x6f\x72\x61\147\x65"); public static function code($bË√ßÜ∆µÆ) { $Aïà¢›±å =& $_SERVER[áí∂¯Â¸Áò]; $bË√ßÜ∆µÆ = $bË√ßÜ∆µÆ . $Aïà¢›±å[33]; $FØ¶ﬂœàë“ = self::$statusCode[$bË√ßÜ∆µÆ]; $FØ¶ﬂœàë“ = $FØ¶ﬂœàë“ ? "\x48\124\124\120\57\61\x2e\61\x20{$bË√ßÜ∆µÆ}\40" . $FØ¶ﬂœàë“ : $Aïà¢›±å[33]; return $FØ¶ﬂœàë“; } } class ImageGdBMP { public static function load($e◊Ïº‚Áˆ’) { $F¥ãÑ±©±ﬂ = fopen($e◊Ïº‚Áˆ’, $_SERVER[áí∂¯Â¸Áò][1527]); if ($F¥ãÑ±©±ﬂ === !1) { return !1; } $FîïÆ”±ë˜ = self::loadFromStream($F¥ãÑ±©±ﬂ); fclose($F¥ãÑ±©±ﬂ); return $FîïÆ”±ë˜; } public static function loadFromStream($d¨ÖÖ—ä‡„) { $D©´È„ÉÃŸ =& $_SERVER[áí∂¯Â¸Áò]; $Bƒ»ïêâ≥Î = fread($d¨ÖÖ—ä‡„, 14); if ($Bƒ»ïêâ≥Î === !1) { return !1; } if ($Bƒ»ïêâ≥Î[0] != $D©´È„ÉÃŸ[1837] || $Bƒ»ïêâ≥Î[1] != $D©´È„ÉÃŸ[1838]) { return !1; } $bÔˆìá¶çÇ = unpack($D©´È„ÉÃŸ[1839] . $D©´È„ÉÃŸ[1840] . $D©´È„ÉÃŸ[1841] . $D©´È„ÉÃŸ[1842] . $D©´È„ÉÃŸ[1843], $Bƒ»ïêâ≥Î); return self::loadFromStreamAndFileHeader($d¨ÖÖ—ä‡„, $bÔˆìá¶çÇ); } public static function loadFromStreamAndFileHeader($Aó ª«éÀç, array $F¶ﬁﬂ’à§∞) { goto bø≈›»µò…; a—´Õ·Í˜ë: if ($Bñ‰Ì±≠Ñƒ == 0 || $eœ«Ü∏çáô == 0 || $DÓ∞Ü‡ãá˘ != 1 || ($Dﬁãé¶†è¯ & $aÍ«ëùñê“) != 0 || ($Dﬁãé¶†è¯ & $fÍÕô®ë‡ ) != 0 || ($Dﬁãé¶†è¯ & $b–âñÛﬁﬂ«) != 0 || ($aÍ«ëùñê“ & $fÍÕô®ë‡ ) != 0 || ($aÍ«ëùñê“ & $b–âñÛﬁﬂ«) != 0 || ($fÍÕô®ë‡  & $b–âñÛﬁﬂ«) != 0) { return !1; } if ($CœØÎÇ∆“Á == 4 || $CœØÎÇ∆“Á == 5) { $e√À∆≥Óâ÷ = stream_get_contents($Aó ª«éÀç, $bºﬂÕµ…ô√); if ($e√À∆≥Óâ÷ === !1) { return !1; } return imagecreatefromstring($e√À∆≥Óâ÷); } $DúÈ≤††€ﬂ = $Bñ‰Ì±≠Ñƒ * $B¯·“ıì©« + 31 >> 3 & ~3; goto fâÑá∞„¯˘; fâÑá∞„¯˘: $c•ˆ≤Áæûö = abs($eœ«Ü∏çáô); $eœ›ïÉã™’ = $eœ«Ü∏çáô > 0 ? $c•ˆ≤Áæûö - 1 : 0; $E´¨ëá±Ç© = $eœ«Ü∏çáô > 0 ? -1 : 1; goto A¢ª∞≤û≠; A¢ª∞≤û≠: if ($B¯·“ıì©« == 1 || $B¯·“ıì©« == 4 || $B¯·“ıì©« == 8) { goto aÖµµ‰°©ë; aÖµµ‰°©ë: $BÉπºº±çã = imagecreate($Bñ‰Ì±≠Ñƒ, $c•ˆ≤Áæûö); $fÑëñäÿ¨£ = $cÏ°å•Â–Ö == 12 ? 3 : 4; $f∑¬™Çûö¢ = $c«∂ÑËÑ∞ ? $c«∂ÑËÑ∞ : pow(2, $B¯·“ıì©«); goto F”çÓÔ¯®¶; F”çÓÔ¯®¶: $bæÏú’˘´± = array(); for ($dÍúè≤æü≠ = 0; $dÍúè≤æü≠ < $f∑¬™Çûö¢; ++$dÍúè≤æü≠) { $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, $fÑëñäÿ¨£); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } extract(unpack($cö∫ÃÔπçà[1863], $e√À∆≥Óâ÷ . $cö∫ÃÔπçà[1862])); $bæÏú’˘´±[] = imagecolorallocate($BÉπºº±çã, $aØ⁄…°œ≠, $fÔ«çÓáö’, $eæÖí∏ï¶⁄); } $E‘Î¯éâ∆ = 8 - $B¯·“ıì©«; goto BŒ®„ìÌêœ; BŒ®„ìÌêœ: $c€îâöÀ≈» = (1 << $B¯·“ıì©«) - 1 << $E‘Î¯éâ∆; if ($CœØÎÇ∆“Á == 1 || $CœØÎÇ∆“Á == 2) { $dÜ‹»ÎìÙŸ = 0; $Dë™øÍÖ⁄Ç = $B¯·“ıì©« >> 2 & 1; for (;;) { if ($dÜ‹»ÎìÙŸ < -1 || $dÜ‹»ÎìÙŸ > $Bñ‰Ì±≠Ñƒ || $eœ›ïÉã™’ < -1 || $eœ›ïÉã™’ > $eœ«Ü∏çáô) { imagedestroy($BÉπºº±çã); return !1; } $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, 1); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } switch ($e√À∆≥Óâ÷) { case $cö∫ÃÔπçà[1862]: $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, 1); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } switch ($e√À∆≥Óâ÷) { case $cö∫ÃÔπçà[1862]: $eœ›ïÉã™’ += $E´¨ëá±Ç©; $dÜ‹»ÎìÙŸ = 0; break; case $cö∫ÃÔπçà[1864]: $eœ›ïÉã™’ = 0; $dÜ‹»ÎìÙŸ = 0; break 3; case $cö∫ÃÔπçà[1865]: $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, 2); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } list(, $eééùêÓáÎ, $D ØΩ ©àå) = unpack($cö∫ÃÔπçà[1866], $e√À∆≥Óâ÷); $dÜ‹»ÎìÙŸ += $eééùêÓáÎ; $eœ›ïÉã™’ += $D ØΩ ©àå * $E´¨ëá±Ç©; break; default: list(, $aÜñãÓÇΩÙ) = unpack($cö∫ÃÔπçà[1867], $e√À∆≥Óâ÷); $F›ÛÚˆŒÃà = ($aÜñãÓÇΩÙ >> $Dë™øÍÖ⁄Ç) + ($aÜñãÓÇΩÙ & $Dë™øÍÖ⁄Ç); $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, $F›ÛÚˆŒÃà + 1 & ~1); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } for ($dÍúè≤æü≠ = 0, $bÊŒ‡ì˜é∂ = 0; $dÍúè≤æü≠ < $aÜñãÓÇΩÙ; ++$dÍúè≤æü≠, ++$dÜ‹»ÎìÙŸ, $bÊŒ‡ì˜é∂ += $B¯·“ıì©«) { list(, $FÌûí∆œÖ⁄) = unpack($cö∫ÃÔπçà[1867], $e√À∆≥Óâ÷[$bÊŒ‡ì˜é∂ >> 3]); $eæÖí∏ï¶⁄ = $bÊŒ‡ì˜é∂ & 7; imagesetpixel($BÉπºº±çã, $dÜ‹»ÎìÙŸ, $eœ›ïÉã™’, $bæÏú’˘´±[($FÌûí∆œÖ⁄ & $c€îâöÀ≈» >> $eæÖí∏ï¶⁄) >> $E‘Î¯éâ∆ - $eæÖí∏ï¶⁄]); } break; } break; default: $b•ê∫Ëπô≥ = fread($Aó ª«éÀç, 1); if ($b•ê∫Ëπô≥ === !1) { imagedestroy($BÉπºº±çã); return !1; } list(, $E–¨≈€›œ®, $FÌûí∆œÖ⁄) = unpack($cö∫ÃÔπçà[1866], $e√À∆≥Óâ÷ . $b•ê∫Ëπô≥); for ($dÍúè≤æü≠ = 0, $bÊŒ‡ì˜é∂ = 0; $dÍúè≤æü≠ < $E–¨≈€›œ®; ++$dÍúè≤æü≠, ++$dÜ‹»ÎìÙŸ, $bÊŒ‡ì˜é∂ += $B¯·“ıì©«) { $eæÖí∏ï¶⁄ = $bÊŒ‡ì˜é∂ & 7; imagesetpixel($BÉπºº±çã, $dÜ‹»ÎìÙŸ, $eœ›ïÉã™’, $bæÏú’˘´±[($FÌûí∆œÖ⁄ & $c€îâöÀ≈» >> $eæÖí∏ï¶⁄) >> $E‘Î¯éâ∆ - $eæÖí∏ï¶⁄]); } break; } } } else { for ($Eò«ë≈çΩÆ = 0; $Eò«ë≈çΩÆ < $c•ˆ≤Áæûö; ++$Eò«ë≈çΩÆ, $eœ›ïÉã™’ += $E´¨ëá±Ç©) { $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, $DúÈ≤††€ﬂ); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } $bÊŒ‡ì˜é∂ = 0; for ($dÜ‹»ÎìÙŸ = 0; $dÜ‹»ÎìÙŸ < $Bñ‰Ì±≠Ñƒ; ++$dÜ‹»ÎìÙŸ, $bÊŒ‡ì˜é∂ += $B¯·“ıì©«) { list(, $FÌûí∆œÖ⁄) = unpack($cö∫ÃÔπçà[1867], $e√À∆≥Óâ÷[$bÊŒ‡ì˜é∂ >> 3]); $eæÖí∏ï¶⁄ = $bÊŒ‡ì˜é∂ & 7; imagesetpixel($BÉπºº±çã, $dÜ‹»ÎìÙŸ, $eœ›ïÉã™’, $bæÏú’˘´±[($FÌûí∆œÖ⁄ & $c€îâöÀ≈» >> $eæÖí∏ï¶⁄) >> $E‘Î¯éâ∆ - $eæÖí∏ï¶⁄]); } } } goto FãŸìÊÌ√’; FãŸìÊÌ√’: } else { goto cÀ»ø“ßÚ¯; fÉ∑‰èπá¬: $EÏùÆå≈˜é = $B¯·“ıì©« >> 3; $CÇ ˆËΩ∑ƒ = $Dﬁãé¶†è¯ ? 127 : 0; $B‡ø†¨ÿΩˆ = $Dﬁãé¶†è¯ ? 1 / $Dﬁãé¶†è¯ : 1; goto c¢÷èÜ“ÆÒ; FØ´Ö∆ôàë: for ($Eò«ë≈çΩÆ = 0; $Eò«ë≈çΩÆ < $c•ˆ≤Áæûö; ++$Eò«ë≈çΩÆ, $eœ›ïÉã™’ += $E´¨ëá±Ç©) { $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, $DúÈ≤††€ﬂ); if ($e√À∆≥Óâ÷ === !1) { imagedestroy($BÉπºº±çã); return !1; } $bÊŒ‡ì˜é∂ = 0; for ($dÜ‹»ÎìÙŸ = 0; $dÜ‹»ÎìÙŸ < $Bñ‰Ì±≠Ñƒ; ++$dÜ‹»ÎìÙŸ, $bÊŒ‡ì˜é∂ += $EÏùÆå≈˜é) { list(, $FÌûí∆œÖ⁄) = unpack($cö∫ÃÔπçà[1844], substr($e√À∆≥Óâ÷, $bÊŒ‡ì˜é∂, $EÏùÆå≈˜é) . $cö∫ÃÔπçà[1868]); $b∆ºÙ¥Òáı = $FÌûí∆œÖ⁄ & $Dﬁãé¶†è¯; $díÈè¬ÔÁ° = $FÌûí∆œÖ⁄ & $aÍ«ëùñê“; $eÜ◊ﬁ∫ûòß = $FÌûí∆œÖ⁄ & $fÍÕô®ë‡ ; $aŒíÀ›êÂ  = $FÌûí∆œÖ⁄ & $b–âñÛﬁﬂ«; $bﬁì≤Ï‰∫ç = $CÇ ˆËΩ∑ƒ - (($b∆ºÙ¥Òáı << 7) - $b∆ºÙ¥Òáı) * $B‡ø†¨ÿΩˆ; $aØ⁄…°œ≠ = (($díÈè¬ÔÁ° << 8) - $díÈè¬ÔÁ°) * $C∫’çÊäΩñ; $fÔ«çÓáö’ = (($eÜ◊ﬁ∫ûòß << 8) - $eÜ◊ﬁ∫ûòß) * $f•⁄«˜π‚Ø; $eæÖí∏ï¶⁄ = (($aŒíÀ›êÂ  << 8) - $aŒíÀ›êÂ ) * $dêñ”Û€∏ñ; imagesetpixel($BÉπºº±çã, $dÜ‹»ÎìÙŸ, $eœ›ïÉã™’, $bﬁì≤Ï‰∫ç << 24 | $aØ⁄…°œ≠ << 16 | $fÔ«çÓáö’ << 8 | $eæÖí∏ï¶⁄); } } imagealphablending($BÉπºº±çã, !0); goto C¶‡‡¥Ñ•ˆ; cÀ»ø“ßÚ¯: $BÉπºº±çã = imagecreatetruecolor($Bñ‰Ì±≠Ñƒ, $c•ˆ≤Áæûö); imagealphablending($BÉπºº±çã, !1); if ($Dﬁãé¶†è¯) { imagesavealpha($BÉπºº±çã, !0); } goto fÉ∑‰èπá¬; c¢÷èÜ“ÆÒ: $C∫’çÊäΩñ = $aÍ«ëùñê“ ? 1 / $aÍ«ëùñê“ : 1; $f•⁄«˜π‚Ø = $fÍÕô®ë‡  ? 1 / $fÍÕô®ë‡  : 1; $dêñ”Û€∏ñ = $b–âñÛﬁﬂ« ? 1 / $b–âñÛﬁﬂ« : 1; goto FØ´Ö∆ôàë; C¶‡‡¥Ñ•ˆ: } return $BÉπºº±çã; goto c‰à∏ù≠ÔØ; bø≈›»µò…: $cö∫ÃÔπçà =& $_SERVER[áí∂¯Â¸Áò]; if ($F¶ﬁﬂ’à§∞[$cö∫ÃÔπçà[400]] != 19778) { return !1; } $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, 4); goto a™™Êª˘ïÔ; a™™Êª˘ïÔ: if ($e√À∆≥Óâ÷ === !1) { return !1; } list(, $cÏ°å•Â–Ö) = unpack($cö∫ÃÔπçà[1844], $e√À∆≥Óâ÷); if ($cÏ°å•Â–Ö == 12) { goto a∞ÆºÚﬂºÜ; Bë∂¶àÎåñ: $c«∂ÑËÑ∞ = $fƒÎ‹´’¬Ê = $Dﬁãé¶†è¯ = $CœØÎÇ∆“Á = 0; $aÍ«ëùñê“ = 16711680; $fÍÕô®ë‡  = 65280; goto aø»‹ä∆æ‡; aø»‹ä∆æ‡: $b–âñÛﬁﬂ« = 255; goto B™‹⁄˘óºœ; a∞ÆºÚﬂºÜ: $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, $cÏ°å•Â–Ö - 4); if ($e√À∆≥Óâ÷ === !1) { return !1; } extract(unpack($cö∫ÃÔπçà[1845] . $cö∫ÃÔπçà[1846] . $cö∫ÃÔπçà[1847] . $cö∫ÃÔπçà[1848], $e√À∆≥Óâ÷)); goto Bë∂¶àÎåñ; B™‹⁄˘óºœ: } else { if (124 < $cÏ°å•Â–Ö || $cÏ°å•Â–Ö < 40) { return !1; } else { goto cŒΩâ∂÷èÙ; D˘¨è≠¥ÎÀ: if ($eéâ’èƒ¢Ø & 2147483648) { $eéâ’èƒ¢Ø = -(~$eéâ’èƒ¢Ø & 4294967295) - 1; } if ($F¶ﬁﬂ’à§∞[$cö∫ÃÔπçà[533]] != 0) { $C≤‘ƒïõ¨û = $B¯·“ıì©« == 1 || $B¯·“ıì©« == 4 || $B¯·“ıì©« == 8 ? ($c«∂ÑËÑ∞ ? $c«∂ÑËÑ∞ : pow(2, $B¯·“ıì©«)) << 2 : 0; $b„à¢÷áü = $bºﬂÕµ…ô√ ? $bºﬂÕµ…ô√ : ($Bñ‰Ì±≠Ñƒ * $B¯·“ıì©« + 31 >> 3 & ~3) * abs($eœ«Ü∏çáô); $c”Â¥äﬂ’ê = $F¶ﬁﬂ’à§∞[$cö∫ÃÔπçà[533]] - $b„à¢÷áü - $C≤‘ƒïõ¨û - 14; if ($cÏ°å•Â–Ö < $c”Â¥äﬂ’ê && 40 <= $cÏ°å•Â–Ö && $cÏ°å•Â–Ö <= 124) { $cÏ°å•Â–Ö = $c”Â¥äﬂ’ê; } } if ($cÏ°å•Â–Ö - 40 > 0) { $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, $cÏ°å•Â–Ö - 40); if ($e√À∆≥Óâ÷ === !1) { return !1; } extract(unpack($cö∫ÃÔπçà[1858] . $cö∫ÃÔπçà[1859] . $cö∫ÃÔπçà[1860] . $cö∫ÃÔπçà[1861], $e√À∆≥Óâ÷ . str_repeat($cö∫ÃÔπçà[1862], 120))); } else { $Dﬁãé¶†è¯ = $aÍ«ëùñê“ = $fÍÕô®ë‡  = $b–âñÛﬁﬂ« = 0; } goto EÕïÍä∏æ“; EÕïÍä∏æ“: if (($B¯·“ıì©« == 16 || $B¯·“ıì©« == 24 || $B¯·“ıì©« == 32) && $CœØÎÇ∆“Á == 0 && $aÍ«ëùñê“ == 0 && $fÍÕô®ë‡  == 0 && $b–âñÛﬁﬂ« == 0) { switch ($B¯·“ıì©«) { case 16: $aÍ«ëùñê“ = 31744; $fÍÕô®ë‡  = 992; $b–âñÛﬁﬂ« = 31; break; case 24: case 32: $aÍ«ëùñê“ = 16711680; $fÍÕô®ë‡  = 65280; $b–âñÛﬁﬂ« = 255; break; } } goto dçäñ∑‘ôô; cŒΩâ∂÷èÙ: $e√À∆≥Óâ÷ = fread($Aó ª«éÀç, 36); if ($e√À∆≥Óâ÷ === !1) { return !1; } extract(unpack($cö∫ÃÔπçà[1849] . $cö∫ÃÔπçà[1850] . $cö∫ÃÔπçà[1847] . $cö∫ÃÔπçà[1851] . $cö∫ÃÔπçà[1852] . $cö∫ÃÔπçà[1853] . $cö∫ÃÔπçà[1854] . $cö∫ÃÔπçà[1855] . $cö∫ÃÔπçà[1856] . $cö∫ÃÔπçà[1857], $e√À∆≥Óâ÷)); goto A”Ã÷≤ùıÊ; A”Ã÷≤ùıÊ: if ($Bñ‰Ì±≠Ñƒ & 2147483648) { $Bñ‰Ì±≠Ñƒ = -(~$Bñ‰Ì±≠Ñƒ & 4294967295) - 1; } if ($eœ«Ü∏çáô & 2147483648) { $eœ«Ü∏çáô = -(~$eœ«Ü∏çáô & 4294967295) - 1; } if ($D÷≤òâÊœ® & 2147483648) { $D÷≤òâÊœ® = -(~$D÷≤òâÊœ® & 4294967295) - 1; } goto D˘¨è≠¥ÎÀ; dçäñ∑‘ôô: } } goto a—´Õ·Í˜ë; c‰à∏ù≠ÔØ: } } goto a≥’ÁÜöÃ»; fÕ£πﬂûúƒ: define($_SERVER[áí∂¯Â¸Áò][234], 0); define($_SERVER[áí∂¯Â¸Áò][235], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\142\x6c\145", "\157\x72\x64\145\x72", "\x61\154\151\141\x73", "\150\141\166\151\x6e\x67", "\x67\x72\157\165\160", "\x6c\157\x63\x6b", "\144\x69\163\x74\x69\156\x63\x74", "\x61\x75\164\157", "\146\151\x6c\164\x65\x72", "\166\141\x6c\x69\x64\141\x74\145", "\x72\145\163\x75\154\164", "\x62\151\156\x64", "\x74\x6f\x6b\x65\156"); public function __construct($BÑ—á¬Àòâ = '', $Eâ⁄©Ö€íÈ = '', $A≠∫´ä£≤ä = '') { $A”Üø∫Û‹Ã =& $_SERVER[áí∂¯Â¸Áò]; $this->_initialize(); if (!empty($BÑ—á¬Àòâ)) { if (strpos($BÑ—á¬Àòâ, $A”Üø∫Û‹Ã[91])) { list($this->dbName, $this->name) = explode($A”Üø∫Û‹Ã[91], $BÑ—á¬Àòâ); } else { $this->name = $BÑ—á¬Àòâ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($Eâ⁄©Ö€íÈ)) { $this->tablePrefix = $A”Üø∫Û‹Ã[33]; } elseif ($A”Üø∫Û‹Ã[33] != $Eâ⁄©Ö€íÈ) { $this->tablePrefix = $Eâ⁄©Ö€íÈ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($A”Üø∫Û‹Ã[236]); } $this->db(0, empty($this->connection) ? $A≠∫´ä£≤ä : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $fä©⁄êÑÒ‹ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($this->fields)) { if (think_config($fä©⁄êÑÒ‹[237])) { $D›◊»ƒ£Ö¬ = $this->dbName ? $this->dbName : think_config($fä©⁄êÑÒ‹[238]); $E⁄ÖíúÉçñ = think_var_cache($fä©⁄êÑÒ‹[239] . strtolower(get_path_this($D›◊»ƒ£Ö¬) . $fä©⁄êÑÒ‹[91] . $this->name)); if ($E⁄ÖíúÉçñ) { $d º‹ºá–ä = think_config($fä©⁄êÑÒ‹[240]); if (empty($d º‹ºá–ä) || $E⁄ÖíúÉçñ[$fä©⁄êÑÒ‹[241]] == $d º‹ºá–ä) { $this->fields = $E⁄ÖíúÉçñ; return; } } } $this->flush(); } } public function flush() { goto b§‘áµ€≤å; cµ•Â˘÷ÀÌ: if (!$FÆÖñäÑﬂò) { return !1; } $this->fields = array_keys($FÆÖñäÑﬂò); $this->fields[$bÏÉ∂ã†Îú[242]] = !1; goto aÜ≥ˆë’ñê; aÜ≥ˆë’ñê: foreach ($FÆÖñäÑﬂò as $c”óÂßªãÓ => $B—ÕÖ˘Êø”) { $B”‰Ã»ñäù[$c”óÂßªãÓ] = $B—ÕÖ˘Êø”[$bÏÉ∂ã†Îú[29]]; if ($B—ÕÖ˘Êø”[$bÏÉ∂ã†Îú[36]]) { $this->fields[$bÏÉ∂ã†Îú[243]] = $c”óÂßªãÓ; if ($B—ÕÖ˘Êø”[$bÏÉ∂ã†Îú[39]]) { $this->fields[$bÏÉ∂ã†Îú[242]] = !0; } } } $this->fields[$bÏÉ∂ã†Îú[244]] = $B”‰Ã»ñäù; if (think_config($bÏÉ∂ã†Îú[240])) { $this->fields[$bÏÉ∂ã†Îú[241]] = think_config($bÏÉ∂ã†Îú[240]); } goto aÖÚœÏÍ∫∫; b§‘áµ€≤å: $bÏÉ∂ã†Îú =& $_SERVER[áí∂¯Â¸Áò]; $this->db->setModel($this->name); $FÆÖñäÑﬂò = $this->db->getFields($this->getTableName()); goto cµ•Â˘÷ÀÌ; aÖÚœÏÍ∫∫: if (think_config($bÏÉ∂ã†Îú[237])) { $f…±ﬂ–¡«– = $this->dbName ? $this->dbName : think_config($bÏÉ∂ã†Îú[238]); think_var_cache($bÏÉ∂ã†Îú[239] . strtolower(get_path_this($f…±ﬂ–¡«–) . $bÏÉ∂ã†Îú[91] . $this->name), $this->fields); } goto EêÆÿ¢“ãì; EêÆÿ¢“ãì: } public function switchModel($C◊àÂ‹ô ·, $c¶◊â∞çîÒ = array()) { $BåôÊ‘ŒœÛ =& $_SERVER[áí∂¯Â¸Áò]; $D°±âÜÂùÚ = ucwords(strtolower($C◊àÂ‹ô ·)) . $BåôÊ‘ŒœÛ[245]; if (!class_exists($D°±âÜÂùÚ)) { think_exception($D°±âÜÂùÚ . think_lang($BåôÊ‘ŒœÛ[246])); } $this->_extModel = new $D°±âÜÂùÚ($this->name); if (!empty($c¶◊â∞çîÒ)) { foreach ($c¶◊â∞çîÒ as $F∑◊—À¨¥∫) { $this->_extModel->setProperty($F∑◊—À¨¥∫, $this->{$F∑◊—À¨¥∫}); } } return $this->_extModel; } public function __set($Dı“Â·Ω›ï, $dﬁåöëêñ) { $this->data[$Dı“Â·Ω›ï] = $dﬁåöëêñ; } public function __get($Eí›‰Â◊ñ“) { return isset($this->data[$Eí›‰Â◊ñ“]) ? $this->data[$Eí›‰Â◊ñ“] : null; } public function __isset($Cèé„í„∞Ó) { return isset($this->data[$Cèé„í„∞Ó]); } public function __unset($dìÑº’Ñ•») { unset($this->data[$dìÑº’Ñ•»]); } public function __call($aóº…Œ◊≥, $AÇì·◊í◊Î) { $b£‘ÊÜ·”û =& $_SERVER[áí∂¯Â¸Áò]; if (in_array(strtolower($aóº…Œ◊≥), $this->methods, !0)) { $this->options[strtolower($aóº…Œ◊≥)] = $AÇì·◊í◊Î[0]; return $this; } elseif (in_array(strtolower($aóº…Œ◊≥), array($b£‘ÊÜ·”û[247], $b£‘ÊÜ·”û[248], $b£‘ÊÜ·”û[249], $b£‘ÊÜ·”û[250], $b£‘ÊÜ·”û[251]), !0)) { $f„ù°ã∫∆è = isset($AÇì·◊í◊Î[0]) ? $AÇì·◊í◊Î[0] : $b£‘ÊÜ·”û[180]; $f„ù°ã∫∆è = $this->db->parseKey($f„ù°ã∫∆è); return $this->getField(strtoupper($aóº…Œ◊≥) . $b£‘ÊÜ·”û[252] . $f„ù°ã∫∆è . $b£‘ÊÜ·”û[253] . $aóº…Œ◊≥, $b£‘ÊÜ·”û[247]); } elseif (strtolower(substr($aóº…Œ◊≥, 0, 5)) == $b£‘ÊÜ·”û[254]) { $f„ù°ã∫∆è = think_parse_name(substr($aóº…Œ◊≥, 5)); $FÓòá®›◊√[$f„ù°ã∫∆è] = $AÇì·◊í◊Î[0]; return $this->where($FÓòá®›◊√)->find(); } elseif (strtolower(substr($aóº…Œ◊≥, 0, 10)) == $b£‘ÊÜ·”û[255]) { $aâÕç∂…íì = think_parse_name(substr($aóº…Œ◊≥, 10)); $FÓòá®›◊√[$aâÕç∂…íì] = $AÇì·◊í◊Î[0]; return $this->where($FÓòá®›◊√)->getField($AÇì·◊í◊Î[1]); } elseif (isset($this->_scope[$aóº…Œ◊≥])) { return $this->scope($aóº…Œ◊≥, $AÇì·◊í◊Î[0]); } elseif (method_exists($this, $aóº…Œ◊≥)) { array_unshift($AÇì·◊í◊Î, $aóº…Œ◊≥); return call_user_func_array(array($this, $b£‘ÊÜ·”û[256]), $AÇì·◊í◊Î); } else { return call_user_func_array(array(parent, $aóº…Œ◊≥), $AÇì·◊í◊Î); } } protected function call() { goto eƒﬂ“‰ª√„; eƒﬂ“‰ª√„: $B™Í¯†à≥Ï =& $_SERVER[áí∂¯Â¸Áò]; $cÔ¨∫§±—à = func_get_args(); $då‚ø≈º∆ä = array_shift($cÔ¨∫§±—à); goto B≈íëÉ≠Ïí; B≈íëÉ≠Ïí: $Cºøã∆“Éû = $då‚ø≈º∆ä; if (is_array($då‚ø≈º∆ä)) { $Cºøã∆“Éû = $då‚ø≈º∆ä[1]; $då‚ø≈º∆ä = $då‚ø≈º∆ä[0]; } $fÌÔ∂∫µ®ë = count($cÔ¨∫§±—à) - 1; goto E†ﬂ›∫√€‰; a§Ô ≥ﬁÆ: $B©ù¡∫Ã“º = call_user_func_array(array($this, $då‚ø≈º∆ä), $cÔ¨∫§±—à); if (method_exists($this, $B™Í¯†à≥Ï[260])) { $aà∑ùßﬂ—™ = call_user_func_array(array($this, $B™Í¯†à≥Ï[261]), array($Cºøã∆“Éû, $cÔ¨∫§±—à, $B©ù¡∫Ã“º)); if ($aà∑ùßﬂ—™) { return $aà∑ùßﬂ—™; } } return $B©ù¡∫Ã“º; goto eÓÉí¬≥ùà; E†ﬂ›∫√€‰: if (isset($cÔ¨∫§±—à[$fÌÔ∂∫µ®ë]) && $cÔ¨∫§±—à[$fÌÔ∂∫µ®ë] === $då‚ø≈º∆ä) { think_exception(__CLASS__ . $B™Í¯†à≥Ï[4] . $då‚ø≈º∆ä . think_lang($B™Í¯†à≥Ï[257])); return; } $cÔ¨∫§±—à[] = $då‚ø≈º∆ä; if (method_exists($this, $B™Í¯†à≥Ï[258])) { $aà∑ùßﬂ—™ = call_user_func_array(array($this, $B™Í¯†à≥Ï[259]), array($Cºøã∆“Éû, $cÔ¨∫§±—à)); if (!is_null($aà∑ùßﬂ—™) && $aà∑ùßﬂ—™ !== !1) { return $aà∑ùßﬂ—™; } } goto a§Ô ≥ﬁÆ; eÓÉí¬≥ùà: } protected function _initialize() { } protected function _facade($dπÉì€£ÚÙ) { $D›—≥ã∑Áë =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($this->fields)) { foreach ($dπÉì€£ÚÙ as $c¯õÿ‘Ö≤è => $B¿ÿÇÿÖåÃ) { if (!in_array($c¯õÿ‘Ö≤è, $this->fields, !0)) { unset($dπÉì€£ÚÙ[$c¯õÿ‘Ö≤è]); } elseif (is_scalar($B¿ÿÇÿÖåÃ)) { $this->_parseType($dπÉì€£ÚÙ, $c¯õÿ‘Ö≤è); } } } if (!empty($this->options[$D›—≥ã∑Áë[262]])) { $dπÉì€£ÚÙ = array_map($this->options[$D›—≥ã∑Áë[262]], $dπÉì€£ÚÙ); unset($this->options[$D›—≥ã∑Áë[262]]); } $this->_beforeWrite($dπÉì€£ÚÙ); return $dπÉì€£ÚÙ; } protected function _beforeWrite(&$e•‰»ÇªΩ¥) { } public function add($Bê◊âπ¿ËÈ = '', $eö“Ç≈Ì¿Ó = array(), $eÀãÈ´Çä© = false) { goto b›ø∫≤çÌß; b›ø∫≤çÌß: if (empty($Bê◊âπ¿ËÈ)) { if (!empty($this->data)) { $Bê◊âπ¿ËÈ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[áí∂¯Â¸Áò][263]); return !1; } } $eö“Ç≈Ì¿Ó = $this->_parseOptions($eö“Ç≈Ì¿Ó); $Bê◊âπ¿ËÈ = $this->_facade($Bê◊âπ¿ËÈ); goto Bêâœ≤‰â˜; C—éßüªèÓ: return $a†ºÑåﬂà«; goto D°™å‘◊Öµ; Bêâœ≤‰â˜: if (!1 === $this->_beforeInsert($Bê◊âπ¿ËÈ, $eö“Ç≈Ì¿Ó)) { return !1; } $a†ºÑåﬂà« = $this->db->insert($Bê◊âπ¿ËÈ, $eö“Ç≈Ì¿Ó, $eÀãÈ´Çä©); if (!1 !== $a†ºÑåﬂà«) { $D∂ﬁùÇÏèÏ = $this->getLastInsID(); if ($D∂ﬁùÇÏèÏ) { $Bê◊âπ¿ËÈ[$this->getPk()] = $D∂ﬁùÇÏèÏ; $this->_after_insert($Bê◊âπ¿ËÈ, $eö“Ç≈Ì¿Ó); return $D∂ﬁùÇÏèÏ; } $this->_after_insert($Bê◊âπ¿ËÈ, $eö“Ç≈Ì¿Ó); } goto C—éßüªèÓ; D°™å‘◊Öµ: } protected function _beforeInsert(&$f©Ï◊äá⁄©, $a¯ΩÃí¡Éƒ) { } protected function _after_insert($Aƒâ¥…Ô‘á, $f¯Î…ÏŸÉÁ) { } public function addAll($dÑóÖ»èÜç, $C¶ùà¥πê´ = array(), $fÙâÇØ†ë˘ = false) { goto F≤å¬ú•«∞; aéÑçòäÑ©: return $aﬁ–Õ‘ÙîÈ; goto BÀàù“è£Ê; aáèÁ™¶áÊ: foreach ($dÑóÖ»èÜç as $Eï™´´≥“∞ => $F°¶úç∫ÀŸ) { $dÑóÖ»èÜç[$Eï™´´≥“∞] = $this->_facade($F°¶úç∫ÀŸ); } if (method_exists($this->db, $cﬁ©êË…ƒÔ[264])) { $aﬁ–Õ‘ÙîÈ = $this->db->insertAll($dÑóÖ»èÜç, $C¶ùà¥πê´, $fÙâÇØ†ë˘); } else { $this->startTrans(); foreach ($dÑóÖ»èÜç as $Eï™´´≥“∞ => $F°¶úç∫ÀŸ) { $aﬁ–Õ‘ÙîÈ = $this->db->insert($F°¶úç∫ÀŸ, $C¶ùà¥πê´, $fÙâÇØ†ë˘); } $this->commit(); } if (!1 !== $aﬁ–Õ‘ÙîÈ) { $F÷˘Ñ¯ÇÎÑ = $this->getLastInsID(); if ($F÷˘Ñ¯ÇÎÑ) { return $F÷˘Ñ¯ÇÎÑ; } } goto aéÑçòäÑ©; F≤å¬ú•«∞: $cﬁ©êË…ƒÔ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($dÑóÖ»èÜç)) { $this->error = think_lang($cﬁ©êË…ƒÔ[263]); return !1; } $C¶ùà¥πê´ = $this->_parseOptions($C¶ùà¥πê´); goto aáèÁ™¶áÊ; BÀàù“è£Ê: } public function selectAdd($BãÈÜ Ãçï = '', $aæıäÀ¢Ïù = '', $c°≤“÷ôÉØ = array()) { $DıµË÷ƒ¬˘ =& $_SERVER[áí∂¯Â¸Áò]; $c°≤“÷ôÉØ = $this->_parseOptions($c°≤“÷ôÉØ); if (!1 === ($B°¯Û©æΩê = $this->db->selectInsert($BãÈÜ Ãçï ? $BãÈÜ Ãçï : $c°≤“÷ôÉØ[$DıµË÷ƒ¬˘[265]], $aæıäÀ¢Ïù ? $aæıäÀ¢Ïù : $this->getTableName(), $c°≤“÷ôÉØ))) { $this->error = think_lang($DıµË÷ƒ¬˘[266]); return !1; } else { return $B°¯Û©æΩê; } } public function save($f‡Æ¨Ã”á = '', $c’÷Ì ≠üœ = array()) { goto bƒ¶í°…ÖÈ; bƒ¶í°…ÖÈ: $e√†Ôæ›∫  =& $_SERVER[áí∂¯Â¸Áò]; if (empty($f‡Æ¨Ã”á)) { if (!empty($this->data)) { $f‡Æ¨Ã”á = $this->data; $this->data = array(); } else { $this->error = think_lang($e√†Ôæ›∫ [263]); return !1; } } $f‡Æ¨Ã”á = $this->_facade($f‡Æ¨Ã”á); goto A›âΩ‡—„™; e¥◊Íö◊¶·: if (is_array($c’÷Ì ≠üœ[$e√†Ôæ›∫ [267]]) && isset($c’÷Ì ≠üœ[$e√†Ôæ›∫ [267]][$DΩ“Íà—ºË])) { $BëûÑè‚°ù = $c’÷Ì ≠üœ[$e√†Ôæ›∫ [267]][$DΩ“Íà—ºË]; } if (!1 === $this->_beforeUpdate($f‡Æ¨Ã”á, $c’÷Ì ≠üœ)) { return !1; } $E¶é∑∏∑ﬂ¿ = $this->db->update($f‡Æ¨Ã”á, $c’÷Ì ≠üœ); goto A∏ÛÈ≈òò¯; A∏ÛÈ≈òò¯: if (!1 !== $E¶é∑∏∑ﬂ¿) { if (isset($BëûÑè‚°ù)) { $f‡Æ¨Ã”á[$DΩ“Íà—ºË] = $BëûÑè‚°ù; } $this->_afterUpdate($f‡Æ¨Ã”á, $c’÷Ì ≠üœ); } return $E¶é∑∏∑ﬂ¿; goto aà§ø‹ßÖï; A›âΩ‡—„™: $c’÷Ì ≠üœ = $this->_parseOptions($c’÷Ì ≠üœ); $DΩ“Íà—ºË = $this->getPk(); if (!isset($c’÷Ì ≠üœ[$e√†Ôæ›∫ [267]])) { if (isset($f‡Æ¨Ã”á[$DΩ“Íà—ºË])) { $dﬂ«©Áèå[$DΩ“Íà—ºË] = $f‡Æ¨Ã”á[$DΩ“Íà—ºË]; $c’÷Ì ≠üœ[$e√†Ôæ›∫ [267]] = $dﬂ«©Áèå; unset($f‡Æ¨Ã”á[$DΩ“Íà—ºË]); } else { $this->error = think_lang($e√†Ôæ›∫ [266]); return !1; } } goto e¥◊Íö◊¶·; aà§ø‹ßÖï: } protected function _beforeUpdate(&$E∂¨çùÕ©, $E–¨áÜ»áﬂ) { } protected function _afterUpdate($bΩ∏Ü÷ËøÑ, $cÑ≥Ö∞ÊÆï) { } public function delete($C˜◊»™∑áà = array()) { goto Eç‚˘·¯¡–; f¬¶∫≥©œ‚: if (is_numeric($C˜◊»™∑áà) || is_string($C˜◊»™∑áà)) { if (strpos($C˜◊»™∑áà, $Bó÷ ãıòß[47])) { $F⁄úùïπÙµ[$EÂÁ∫áñé◊] = array($Bó÷ ãıòß[268], $C˜◊»™∑áà); } else { $F⁄úùïπÙµ[$EÂÁ∫áñé◊] = $C˜◊»™∑áà; } $this->options[$Bó÷ ãıòß[267]] = $F⁄úùïπÙµ; } $C˜◊»™∑áà = $this->_parseOptions(); if (is_array($C˜◊»™∑áà[$Bó÷ ãıòß[267]]) && isset($C˜◊»™∑áà[$Bó÷ ãıòß[267]][$EÂÁ∫áñé◊])) { $Aâ∏Ì°ì… = $C˜◊»™∑áà[$Bó÷ ãıòß[267]][$EÂÁ∫áñé◊]; } goto d¡ﬂ¢÷õÔ; Eç‚˘·¯¡–: $Bó÷ ãıòß =& $_SERVER[áí∂¯Â¸Áò]; if (empty($C˜◊»™∑áà) && empty($this->options[$Bó÷ ãıòß[267]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $EÂÁ∫áñé◊ = $this->getPk(); goto f¬¶∫≥©œ‚; d¡ﬂ¢÷õÔ: $fùßØÓ√©∞ = $this->db->delete($C˜◊»™∑áà); if (!1 !== $fùßØÓ√©∞) { $A´Ç•à§áç = array(); if (isset($Aâ∏Ì°ì…)) { $A´Ç•à§áç[$EÂÁ∫áñé◊] = $Aâ∏Ì°ì…; } $this->_after_delete($A´Ç•à§áç, $C˜◊»™∑áà); } return $fùßØÓ√©∞; goto aãÈìº£≠›; aãÈìº£≠›: } protected function _after_delete($E„≈ıÙ¨±, $AÛª√Õ∫ﬁ€) { } public function select($D©Îßïõ∂ = array()) { goto E”› π≤î‚; c‹Ã‚ı…ü¢: $BíôæÏ®ç∫ = $this->db->select($D©Îßïõ∂); if (!1 === $BíôæÏ®ç∫) { return !1; } if (empty($BíôæÏ®ç∫)) { return null; } goto d“üûú™Œ≤; E”› π≤î‚: $FÃ˘ ÿ‚â´ =& $_SERVER[áí∂¯Â¸Áò]; if (is_string($D©Îßïõ∂) || is_numeric($D©Îßïõ∂)) { $eû‹Ô£ûÍÑ = $this->getPk(); if (strpos($D©Îßïõ∂, $FÃ˘ ÿ‚â´[47])) { $dπÒﬁè∞ñœ[$eû‹Ô£ûÍÑ] = array($FÃ˘ ÿ‚â´[268], $D©Îßïõ∂); } else { $dπÒﬁè∞ñœ[$eû‹Ô£ûÍÑ] = $D©Îßïõ∂; } $this->options[$FÃ˘ ÿ‚â´[267]] = $dπÒﬁè∞ñœ; } elseif (!1 === $D©Îßïõ∂) { $D©Îßïõ∂ = $this->_parseOptions(); return $FÃ˘ ÿ‚â´[269] . $this->db->buildSelectSql($D©Îßïõ∂) . $FÃ˘ ÿ‚â´[270]; } $D©Îßïõ∂ = $this->_parseOptions(); goto c‹Ã‚ı…ü¢; d“üûú™Œ≤: $this->_afterSelect($BíôæÏ®ç∫, $D©Îßïõ∂); return $BíôæÏ®ç∫; goto DÕ®ñ„ÓÇ™; DÕ®ñ„ÓÇ™: } protected function _afterSelect(&$Fèº±äﬂ∫‹, $b◊ûˆ˘©∆Ú) { } public function buildSql($B›…ãá≤—Ñ = array()) { $E¡àÑŒ†·∑ =& $_SERVER[áí∂¯Â¸Áò]; $B›…ãá≤—Ñ = $this->_parseOptions($B›…ãá≤—Ñ); return $E¡àÑŒ†·∑[269] . $this->db->buildSelectSql($B›…ãá≤—Ñ) . $E¡àÑŒ†·∑[270]; } public function optionsValue($C§£Õ€·ºÖ = null) { if (is_null($C§£Õ€·ºÖ)) { return $this->options; } elseif (is_array($C§£Õ€·ºÖ)) { $this->options = array_merge($this->options, $C§£Õ€·ºÖ); } } protected function _parseOptions($Eøúúﬂ†à˜ = array()) { goto CÏ©Ø©öîÂ; CÏ©Ø©öîÂ: $aﬂ◊‘ƒ“£Ê =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($Eøúúﬂ†à˜)) { $Eøúúﬂ†à˜ = array_merge($this->options, $Eøúúﬂ†à˜); } $this->options = array(); goto d‡§ÆÉíŸ; d‡§ÆÉíŸ: if (!isset($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[271]])) { $Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[271]] = $this->getTableName(); $D¢ ü„Ü˜Ø = $this->fields; } else { $D¢ ü„Ü˜Ø = $this->getDbFields(); } if (!empty($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[272]])) { $Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[271]] .= $aﬂ◊‘ƒ“£Ê[50] . $Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[272]]; } $Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[273]] = $this->name; goto FÂòï√Éº∂; FÂòï√Éº∂: if (isset($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[267]]) && is_array($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[267]]) && !empty($D¢ ü„Ü˜Ø) && !isset($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[274]]) && !isset($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[271]])) { foreach ($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[267]] as $EÍÑ“”ﬂÆÑ => $F„éÉË≥—») { $EÍÑ“”ﬂÆÑ = trim($EÍÑ“”ﬂÆÑ); if (in_array($EÍÑ“”ﬂÆÑ, $D¢ ü„Ü˜Ø, !0)) { if (is_scalar($F„éÉË≥—»)) { $this->_parseType($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[267]], $EÍÑ“”ﬂÆÑ); } } elseif (!is_numeric($EÍÑ“”ﬂÆÑ) && $aﬂ◊‘ƒ“£Ê[70] != substr($EÍÑ“”ﬂÆÑ, 0, 1) && !1 === strpos($EÍÑ“”ﬂÆÑ, $aﬂ◊‘ƒ“£Ê[91]) && !1 === strpos($EÍÑ“”ﬂÆÑ, $aﬂ◊‘ƒ“£Ê[252]) && !1 === strpos($EÍÑ“”ﬂÆÑ, $aﬂ◊‘ƒ“£Ê[275]) && !1 === strpos($EÍÑ“”ﬂÆÑ, $aﬂ◊‘ƒ“£Ê[276])) { unset($Eøúúﬂ†à˜[$aﬂ◊‘ƒ“£Ê[267]][$EÍÑ“”ﬂÆÑ]); } } } $this->_options_filter($Eøúúﬂ†à˜); return $Eøúúﬂ†à˜; goto b…ﬂãù‹ßü; b…ﬂãù‹ßü: } protected function _options_filter(&$BÖ¥î∏Ÿ∏Õ) { } protected function _parseType(&$Cæ§ü€Ê¡€, $B¢°àΩôÛÆ) { $FÙ¡ÖÖ‰‡ñ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($this->options[$FÙ¡ÖÖ‰‡ñ[277]][$FÙ¡ÖÖ‰‡ñ[4] . $B¢°àΩôÛÆ])) { $DÌÔ˘∆±¯¬ = strtolower($this->fields[$FÙ¡ÖÖ‰‡ñ[244]][$B¢°àΩôÛÆ]); if (!1 !== strpos($DÌÔ˘∆±¯¬, $FÙ¡ÖÖ‰‡ñ[278])) { } elseif (!1 === strpos($DÌÔ˘∆±¯¬, $FÙ¡ÖÖ‰‡ñ[279]) && !1 !== strpos($DÌÔ˘∆±¯¬, $FÙ¡ÖÖ‰‡ñ[280])) { $Cæ§ü€Ê¡€[$B¢°àΩôÛÆ] = intval($Cæ§ü€Ê¡€[$B¢°àΩôÛÆ]); } elseif (!1 !== strpos($DÌÔ˘∆±¯¬, $FÙ¡ÖÖ‰‡ñ[281]) || !1 !== strpos($DÌÔ˘∆±¯¬, $FÙ¡ÖÖ‰‡ñ[282])) { $Cæ§ü€Ê¡€[$B¢°àΩôÛÆ] = floatval($Cæ§ü€Ê¡€[$B¢°àΩôÛÆ]); } elseif (!1 !== strpos($DÌÔ˘∆±¯¬, $FÙ¡ÖÖ‰‡ñ[283])) { $Cæ§ü€Ê¡€[$B¢°àΩôÛÆ] = (bool) $Cæ§ü€Ê¡€[$B¢°àΩôÛÆ]; } } } public function find($c¥Ê‚ôò‚ú = array()) { goto b¯ùâÓ∆ÚÑ; aÇ⁄õç·øå: if (empty($a∞·⁄ùıŒ‡)) { return null; } $this->data = $a∞·⁄ùıŒ‡[0]; $this->_afterFind($this->data, $c¥Ê‚ôò‚ú); goto FäëÀµëïÆ; cÙêøï∆Úõ: $c¥Ê‚ôò‚ú = $this->_parseOptions(); $a∞·⁄ùıŒ‡ = $this->db->select($c¥Ê‚ôò‚ú); if (!1 === $a∞·⁄ùıŒ‡) { return !1; } goto aÇ⁄õç·øå; FäëÀµëïÆ: if (!empty($this->options[$d÷÷¯ıüˆã[285]])) { return $this->returnResult($this->data, $this->options[$d÷÷¯ıüˆã[285]]); } return $this->data; goto Dè“ä·–“©; b¯ùâÓ∆ÚÑ: $d÷÷¯ıüˆã =& $_SERVER[áí∂¯Â¸Áò]; if (is_numeric($c¥Ê‚ôò‚ú) || is_string($c¥Ê‚ôò‚ú)) { $açŸéãá‡ı[$this->getPk()] = intval($c¥Ê‚ôò‚ú); $this->options[$d÷÷¯ıüˆã[267]] = $açŸéãá‡ı; } $this->options[$d÷÷¯ıüˆã[284]] = 1; goto cÙêøï∆Úõ; Dè“ä·–“©: } protected function _afterFind(&$cË¨π·≈å‹, $dΩßâ∑“≥Ù) { } protected function returnResult($bûœµíŸ≥Ú, $aÁ…≈ÓÊÊê = '') { $f¬ë¯ô£√ı =& $_SERVER[áí∂¯Â¸Áò]; if ($aÁ…≈ÓÊÊê) { if (is_callable($aÁ…≈ÓÊÊê)) { return call_user_func($aÁ…≈ÓÊÊê, $bûœµíŸ≥Ú); } switch (strtolower($aÁ…≈ÓÊÊê)) { case $f¬ë¯ô£√ı[286]: return json_encode($bûœµíŸ≥Ú); case $f¬ë¯ô£√ı[287]: return xml_encode($bûœµíŸ≥Ú); } } return $bûœµíŸ≥Ú; } public function parseFieldsMap($EÎ¿≠Ïàäü, $D◊®ËÀ¿√© = 1) { if (!empty($this->_map)) { foreach ($this->_map as $aœüÙ§Ú∫Â => $a¯˘¿µ∫ó‡) { if ($D◊®ËÀ¿√© == 1) { if (isset($EÎ¿≠Ïàäü[$a¯˘¿µ∫ó‡])) { $EÎ¿≠Ïàäü[$aœüÙ§Ú∫Â] = $EÎ¿≠Ïàäü[$a¯˘¿µ∫ó‡]; unset($EÎ¿≠Ïàäü[$a¯˘¿µ∫ó‡]); } } else { if (isset($EÎ¿≠Ïàäü[$aœüÙ§Ú∫Â])) { $EÎ¿≠Ïàäü[$a¯˘¿µ∫ó‡] = $EÎ¿≠Ïàäü[$aœüÙ§Ú∫Â]; unset($EÎ¿≠Ïàäü[$aœüÙ§Ú∫Â]); } } } } return $EÎ¿≠Ïàäü; } public function setField($CØ≈ˆ€á‘∆, $AÛ‘±«öÉñ = '') { if (is_array($CØ≈ˆ€á‘∆)) { $DäÎ€ÇÈãå = $CØ≈ˆ€á‘∆; } else { $DäÎ€ÇÈãå[$CØ≈ˆ€á‘∆] = $AÛ‘±«öÉñ; } return $this->save($DäÎ€ÇÈãå); } public function setAdd($cáêı∏à˜É, $FÔÜı≥°∏à = 1) { $EâŸÃÎêŒÉ =& $_SERVER[áí∂¯Â¸Áò]; $FüæÁú÷ó– = $cáêı∏à˜É . $EâŸÃÎêŒÉ[288] . $FÔÜı≥°∏à; if ($FÔÜı≥°∏à < 0) { $FüæÁú÷ó– = $cáêı∏à˜É . $FÔÜı≥°∏à; } return $this->setField($cáêı∏à˜É, array($EâŸÃÎêŒÉ[289], $FüæÁú÷ó–)); } public function getField($Bù—‘’éà–, $aæΩÇﬂÍﬁ¯ = null) { $Cã◊ø–∂É∆ =& $_SERVER[áí∂¯Â¸Áò]; $A»ôÔÁûô[$Cã◊ø–∂É∆[265]] = $Bù—‘’éà–; $A»ôÔÁûô = $this->_parseOptions($A»ôÔÁûô); $Bù—‘’éà– = trim($Bù—‘’éà–); if (strpos($Bù—‘’éà–, $Cã◊ø–∂É∆[47])) { if (!isset($A»ôÔÁûô[$Cã◊ø–∂É∆[284]])) { $A»ôÔÁûô[$Cã◊ø–∂É∆[284]] = is_numeric($aæΩÇﬂÍﬁ¯) ? $aæΩÇﬂÍﬁ¯ : $Cã◊ø–∂É∆[33]; } $f‚˘•·¢“Â = $this->db->select($A»ôÔÁûô); if (!empty($f‚˘•·¢“Â)) { goto CØ√ÃãÔ“å; FãìÓáãæÆ: $b¬å„èãΩ≠ = array_shift($Bù—‘’éà–); $eı‰≠¢ô—≤ = array(); $f¥°ÿ€…è” = count($B≠Ò≥∂´éÀ); goto cÉı‡≈·õä; cÉı‡≈·õä: foreach ($f‚˘•·¢“Â as $Eé≤Àµ©¡ê) { $FΩ¿òœñˆë = $Eé≤Àµ©¡ê[$f∂ÇÙèç◊∂]; if (2 == $f¥°ÿ€…è”) { $eı‰≠¢ô—≤[$FΩ¿òœñˆë] = $Eé≤Àµ©¡ê[$b¬å„èãΩ≠]; } else { $eı‰≠¢ô—≤[$FΩ¿òœñˆë] = is_string($aæΩÇﬂÍﬁ¯) ? implode($aæΩÇﬂÍﬁ¯, $Eé≤Àµ©¡ê) : $Eé≤Àµ©¡ê; } } return $eı‰≠¢ô—≤; goto eíãâÙÙ∫†; CØ√ÃãÔ“å: $B≠Ò≥∂´éÀ = explode($Cã◊ø–∂É∆[47], $Bù—‘’éà–); $Bù—‘’éà– = array_keys($f‚˘•·¢“Â[0]); $f∂ÇÙèç◊∂ = array_shift($Bù—‘’éà–); goto FãìÓáãæÆ; eíãâÙÙ∫†: } } else { if (!0 !== $aæΩÇﬂÍﬁ¯) { $A»ôÔÁûô[$Cã◊ø–∂É∆[284]] = is_numeric($aæΩÇﬂÍﬁ¯) ? $aæΩÇﬂÍﬁ¯ : 1; } if ($aæΩÇﬂÍﬁ¯ === $Cã◊ø–∂É∆[247]) { unset($A»ôÔÁûô[$Cã◊ø–∂É∆[284]]); } $Eé≤Àµ©¡ê = $this->db->select($A»ôÔÁûô); if (!empty($Eé≤Àµ©¡ê)) { if ($aæΩÇﬂÍﬁ¯ === $Cã◊ø–∂É∆[247]) { return reset($Eé≤Àµ©¡ê[0]); } if (!0 !== $aæΩÇﬂÍﬁ¯ && 1 == $A»ôÔÁûô[$Cã◊ø–∂É∆[284]]) { return reset($Eé≤Àµ©¡ê[0]); } foreach ($Eé≤Àµ©¡ê as $açæòÉ„˘‚) { $a√ñªÜ©Õ [] = $açæòÉ„˘‚[$Bù—‘’éà–]; } return $a√ñªÜ©Õ ; } } return null; } public function create($Döƒ–´≥Ã© = '', $d«Ç∞û⁄à’ = '') { goto Aë˜âã‹≥Á; CñóÿÉ¢ˆî: return $Döƒ–´≥Ã©; goto Eå´éëê˜é; c£—íå≥åÎ: $Döƒ–´≥Ã© = $this->parseFieldsMap($Döƒ–´≥Ã©, 0); $d«Ç∞û⁄à’ = $d«Ç∞û⁄à’ ? $d«Ç∞û⁄à’ : (!empty($Döƒ–´≥Ã©[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$E√ö≈ƒöô∏[265]])) { $b”…∫ïô¨â = $this->options[$E√ö≈ƒöô∏[265]]; unset($this->options[$E√ö≈ƒöô∏[265]]); } elseif ($d«Ç∞û⁄à’ == THINK_MODEL_INSERT && isset($this->insertFields)) { $b”…∫ïô¨â = $this->insertFields; } elseif ($d«Ç∞û⁄à’ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $b”…∫ïô¨â = $this->updateFields; } goto Eªâ§«„ü¨; dùÛ®Ëí‡™: if ($this->autoCheckFields) { $b”…∫ïô¨â = $this->getDbFields(); foreach ($Döƒ–´≥Ã© as $cµËÿ€˜Ó => $c¢ÿ¢ˆ◊¯è) { if (!in_array($cµËÿ€˜Ó, $b”…∫ïô¨â)) { unset($Döƒ–´≥Ã©[$cµËÿ€˜Ó]); } elseif (MAGIC_QUOTES_GPC && is_string($c¢ÿ¢ˆ◊¯è)) { $Döƒ–´≥Ã©[$cµËÿ€˜Ó] = stripslashes($c¢ÿ¢ˆ◊¯è); } } } $this->autoOperation($Döƒ–´≥Ã©, $d«Ç∞û⁄à’); $this->data = $Döƒ–´≥Ã©; goto CñóÿÉ¢ˆî; Eªâ§«„ü¨: if (isset($b”…∫ïô¨â)) { if (is_string($b”…∫ïô¨â)) { $b”…∫ïô¨â = explode($E√ö≈ƒöô∏[47], $b”…∫ïô¨â); } if (think_config($E√ö≈ƒöô∏[290])) { $b”…∫ïô¨â[] = think_config($E√ö≈ƒöô∏[291]); } foreach ($Döƒ–´≥Ã© as $cµËÿ€˜Ó => $c¢ÿ¢ˆ◊¯è) { if (!in_array($cµËÿ€˜Ó, $b”…∫ïô¨â)) { unset($Döƒ–´≥Ã©[$cµËÿ€˜Ó]); } } } if (!$this->autoValidation($Döƒ–´≥Ã©, $d«Ç∞û⁄à’)) { return !1; } if (!$this->autoCheckToken($Döƒ–´≥Ã©)) { $this->error = think_lang($E√ö≈ƒöô∏[292]); return !1; } goto dùÛ®Ëí‡™; Aë˜âã‹≥Á: $E√ö≈ƒöô∏ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($Döƒ–´≥Ã©)) { $Döƒ–´≥Ã© = $_POST; } elseif (is_object($Döƒ–´≥Ã©)) { $Döƒ–´≥Ã© = get_object_vars($Döƒ–´≥Ã©); } if (empty($Döƒ–´≥Ã©) || !is_array($Döƒ–´≥Ã©)) { $this->error = think_lang($E√ö≈ƒöô∏[263]); return !1; } goto c£—íå≥åÎ; Eå´éëê˜é: } public function autoCheckToken($Aæ»˜â“≈„) { $dè‚ãƒæ¢§ =& $_SERVER[áí∂¯Â¸Áò]; if (isset($this->options[$dè‚ãƒæ¢§[293]]) && !$this->options[$dè‚ãƒæ¢§[293]]) { return !0; } if (think_config($dè‚ãƒæ¢§[290])) { $a‹ã«úå“Ì = think_config($dè‚ãƒæ¢§[291]); if (!isset($Aæ»˜â“≈„[$a‹ã«úå“Ì]) || Session::get($a‹ã«úå“Ì)) { return !1; } list($fÃ≠ÌÑ’™õ, $BÜéœ¶Ô‡µ) = explode($dè‚ãƒæ¢§[70], $Aæ»˜â“≈„[$a‹ã«úå“Ì]); if ($BÜéœ¶Ô‡µ && Session::get($a‹ã«úå“Ì . $dè‚ãƒæ¢§[91] . $fÃ≠ÌÑ’™õ) === $BÜéœ¶Ô‡µ) { Session::remove($a‹ã«úå“Ì . $dè‚ãƒæ¢§[91] . $fÃ≠ÌÑ’™õ); return !0; } if (think_config($dè‚ãƒæ¢§[294])) { Session::remove($a‹ã«úå“Ì . $dè‚ãƒæ¢§[91] . $fÃ≠ÌÑ’™õ); } return !1; } return !0; } public function regex($câπÖí»òÏ, $cœéô·È®≠) { $cñˆéâö›Ã =& $_SERVER[áí∂¯Â¸Áò]; $D¶Ωñ–ﬁ…‚ = array($cñˆéâö›Ã[295] => $cñˆéâö›Ã[296], $cñˆéâö›Ã[297] => $cñˆéâö›Ã[298], $cñˆéâö›Ã[299] => $cñˆéâö›Ã[300], $cñˆéâö›Ã[301] => $cñˆéâö›Ã[302], $cñˆéâö›Ã[303] => $cñˆéâö›Ã[304], $cñˆéâö›Ã[305] => $cñˆéâö›Ã[306], $cñˆéâö›Ã[307] => $cñˆéâö›Ã[308], $cñˆéâö›Ã[282] => $cñˆéâö›Ã[309], $cñˆéâö›Ã[310] => $cñˆéâö›Ã[311]); if (isset($D¶Ωñ–ﬁ…‚[strtolower($cœéô·È®≠)])) { $cœéô·È®≠ = $D¶Ωñ–ﬁ…‚[strtolower($cœéô·È®≠)]; } return preg_match($cœéô·È®≠, $câπÖí»òÏ) === 1; } private function autoOperation(&$EÈ≠ﬂñÏ◊‚, $fÓÒ˘Óœ¢û) { $dóäûÔπ∞´ =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($this->options[$dóäûÔπ∞´[312]])) { $C†Ωë∫Ïˆ‹ = $this->options[$dóäûÔπ∞´[312]]; unset($this->options[$dóäûÔπ∞´[312]]); } elseif (!empty($this->_auto)) { $C†Ωë∫Ïˆ‹ = $this->_auto; } if (isset($C†Ωë∫Ïˆ‹)) { foreach ($C†Ωë∫Ïˆ‹ as $e∆ØπÒÍ¿√) { if (empty($e∆ØπÒÍ¿√[2])) { $e∆ØπÒÍ¿√[2] = THINK_MODEL_INSERT; } if ($fÓÒ˘Óœ¢û == $e∆ØπÒÍ¿√[2] || $e∆ØπÒÍ¿√[2] == THINK_MODEL_BOTH) { switch (trim($e∆ØπÒÍ¿√[3])) { case $dóäûÔπ∞´[313]: case $dóäûÔπ∞´[314]: $Féºöá¿º£ = isset($e∆ØπÒÍ¿√[4]) ? (array) $e∆ØπÒÍ¿√[4] : array(); if (isset($EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]])) { array_unshift($Féºöá¿º£, $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]]); } if ($dóäûÔπ∞´[313] == $e∆ØπÒÍ¿√[3]) { $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]] = call_user_func_array($e∆ØπÒÍ¿√[1], $Féºöá¿º£); } else { $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]] = call_user_func_array(array(&$this, $e∆ØπÒÍ¿√[1]), $Féºöá¿º£); } break; case $dóäûÔπ∞´[265]: $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]] = $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[1]]; break; case $dóäûÔπ∞´[315]: if ($dóäûÔπ∞´[33] === $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]]) { unset($EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]]); } break; case $dóäûÔπ∞´[316]: default: $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]] = $e∆ØπÒÍ¿√[1]; } if (!1 === $EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]]) { unset($EÈ≠ﬂñÏ◊‚[$e∆ØπÒÍ¿√[0]]); } } } } return $EÈ≠ﬂñÏ◊‚; } protected function autoValidation($A˘‘´Ü∆Àé, $b∑†ª•’‹∑) { $d›‚¥ë“∞¥ =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($this->options[$d›‚¥ë“∞¥[317]])) { $AﬂÂüß±à‚ = $this->options[$d›‚¥ë“∞¥[317]]; unset($this->options[$d›‚¥ë“∞¥[317]]); } elseif (!empty($this->_validate)) { $AﬂÂüß±à‚ = $this->_validate; } if (isset($AﬂÂüß±à‚)) { if ($this->patchValidate) { $this->error = array(); } foreach ($AﬂÂüß±à‚ as $BÜ™œñ‰ñô => $EÃ⁄ø¬É◊ä) { if (empty($EÃ⁄ø¬É◊ä[5]) || $EÃ⁄ø¬É◊ä[5] == THINK_MODEL_BOTH || $EÃ⁄ø¬É◊ä[5] == $b∑†ª•’‹∑) { if (0 == strpos($EÃ⁄ø¬É◊ä[2], $d›‚¥ë“∞¥[318]) && strpos($EÃ⁄ø¬É◊ä[2], $d›‚¥ë“∞¥[319])) { $EÃ⁄ø¬É◊ä[2] = think_lang(substr($EÃ⁄ø¬É◊ä[2], 2, -1)); } $EÃ⁄ø¬É◊ä[3] = isset($EÃ⁄ø¬É◊ä[3]) ? $EÃ⁄ø¬É◊ä[3] : THINK_EXISTS_VALIDATE; $EÃ⁄ø¬É◊ä[4] = isset($EÃ⁄ø¬É◊ä[4]) ? $EÃ⁄ø¬É◊ä[4] : $d›‚¥ë“∞¥[320]; switch ($EÃ⁄ø¬É◊ä[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($A˘‘´Ü∆Àé, $EÃ⁄ø¬É◊ä)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($d›‚¥ë“∞¥[33] != trim($A˘‘´Ü∆Àé[$EÃ⁄ø¬É◊ä[0]])) { if (!1 === $this->_validationField($A˘‘´Ü∆Àé, $EÃ⁄ø¬É◊ä)) { return !1; } } break; default: if (isset($A˘‘´Ü∆Àé[$EÃ⁄ø¬É◊ä[0]])) { if (!1 === $this->_validationField($A˘‘´Ü∆Àé, $EÃ⁄ø¬É◊ä)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($CÕ¨±˜ãΩ¶, $Bº´ÕÀÍù) { if (!1 === $this->_validationFieldItem($CÕ¨±˜ãΩ¶, $Bº´ÕÀÍù)) { if ($this->patchValidate) { $this->error[$Bº´ÕÀÍù[0]] = $Bº´ÕÀÍù[2]; } else { $this->error = $Bº´ÕÀÍù[2]; return !1; } } return; } protected function _validationFieldItem($aÚÒ§ì‹Õ‰, $f´íî€È∞•) { $cÇﬁˆ§„Œœ =& $_SERVER[áí∂¯Â¸Áò]; switch (strtolower(trim($f´íî€È∞•[4]))) { case $cÇﬁˆ§„Œœ[313]: case $cÇﬁˆ§„Œœ[314]: $AÃ©ä‡∂öé = isset($f´íî€È∞•[6]) ? (array) $f´íî€È∞•[6] : array(); if (is_string($f´íî€È∞•[0]) && strpos($f´íî€È∞•[0], $cÇﬁˆ§„Œœ[47])) { $f´íî€È∞•[0] = explode($cÇﬁˆ§„Œœ[47], $f´íî€È∞•[0]); } if (is_array($f´íî€È∞•[0])) { foreach ($f´íî€È∞•[0] as $A›‡°Ç≥ç◊) { $B…‹∂∞æçú[$A›‡°Ç≥ç◊] = $aÚÒ§ì‹Õ‰[$A›‡°Ç≥ç◊]; } array_unshift($AÃ©ä‡∂öé, $B…‹∂∞æçú); } else { array_unshift($AÃ©ä‡∂öé, $aÚÒ§ì‹Õ‰[$f´íî€È∞•[0]]); } if ($cÇﬁˆ§„Œœ[313] == $f´íî€È∞•[4]) { return call_user_func_array($f´íî€È∞•[1], $AÃ©ä‡∂öé); } else { return call_user_func_array(array(&$this, $f´íî€È∞•[1]), $AÃ©ä‡∂öé); } case $cÇﬁˆ§„Œœ[321]: return $aÚÒ§ì‹Õ‰[$f´íî€È∞•[0]] == $aÚÒ§ì‹Õ‰[$f´íî€È∞•[1]]; case $cÇﬁˆ§„Œœ[322]: if (is_string($f´íî€È∞•[0]) && strpos($f´íî€È∞•[0], $cÇﬁˆ§„Œœ[47])) { $f´íî€È∞•[0] = explode($cÇﬁˆ§„Œœ[47], $f´íî€È∞•[0]); } $cÚÀÖéÌ∏é = array(); if (is_array($f´íî€È∞•[0])) { foreach ($f´íî€È∞•[0] as $A›‡°Ç≥ç◊) { $cÚÀÖéÌ∏é[$A›‡°Ç≥ç◊] = $aÚÒ§ì‹Õ‰[$A›‡°Ç≥ç◊]; } } else { $cÚÀÖéÌ∏é[$f´íî€È∞•[0]] = $aÚÒ§ì‹Õ‰[$f´íî€È∞•[0]]; } if (!empty($aÚÒ§ì‹Õ‰[$this->getPk()])) { $cÚÀÖéÌ∏é[$this->getPk()] = array($cÇﬁˆ§„Œœ[323], $aÚÒ§ì‹Õ‰[$this->getPk()]); } if ($this->where($cÚÀÖéÌ∏é)->find()) { return !1; } return !0; default: return $this->check($aÚÒ§ì‹Õ‰[$f´íî€È∞•[0]], $f´íî€È∞•[1], $f´íî€È∞•[4]); } } public function check($dßŒœ«¥•ç, $aåœ¡∆´ÿú, $DÔüÓÁı¨â = "\x72\x65\x67\145\x78") { $AÓ≥Ωˆ‰Úé =& $_SERVER[áí∂¯Â¸Áò]; $DÔüÓÁı¨â = strtolower(trim($DÔüÓÁı¨â)); switch ($DÔüÓÁı¨â) { case $AÓ≥Ωˆ‰Úé[7]: case $AÓ≥Ωˆ‰Úé[324]: $D«ÙÆäóÏØ = is_array($aåœ¡∆´ÿú) ? $aåœ¡∆´ÿú : explode($AÓ≥Ωˆ‰Úé[47], $aåœ¡∆´ÿú); return $DÔüÓÁı¨â == $AÓ≥Ωˆ‰Úé[7] ? in_array($dßŒœ«¥•ç, $D«ÙÆäóÏØ) : !in_array($dßŒœ«¥•ç, $D«ÙÆäóÏØ); case $AÓ≥Ωˆ‰Úé[325]: case $AÓ≥Ωˆ‰Úé[326]: if (is_array($aåœ¡∆´ÿú)) { $Bí∑òÌÖèΩ = $aåœ¡∆´ÿú[0]; $d≥Í’˜ØÍØ = $aåœ¡∆´ÿú[1]; } else { list($Bí∑òÌÖèΩ, $d≥Í’˜ØÍØ) = explode($AÓ≥Ωˆ‰Úé[47], $aåœ¡∆´ÿú); } return $DÔüÓÁı¨â == $AÓ≥Ωˆ‰Úé[325] ? $dßŒœ«¥•ç >= $Bí∑òÌÖèΩ && $dßŒœ«¥•ç <= $d≥Í’˜ØÍØ : $dßŒœ«¥•ç < $Bí∑òÌÖèΩ || $dßŒœ«¥•ç > $d≥Í’˜ØÍØ; case $AÓ≥Ωˆ‰Úé[327]: case $AÓ≥Ωˆ‰Úé[328]: return $DÔüÓÁı¨â == $AÓ≥Ωˆ‰Úé[327] ? $dßŒœ«¥•ç == $aåœ¡∆´ÿú : $dßŒœ«¥•ç != $aåœ¡∆´ÿú; case $AÓ≥Ωˆ‰Úé[329]: $dÿŒØÿï¡ = mb_strlen($dßŒœ«¥•ç, $AÓ≥Ωˆ‰Úé[330]); if (strpos($aåœ¡∆´ÿú, $AÓ≥Ωˆ‰Úé[47])) { list($Bí∑òÌÖèΩ, $d≥Í’˜ØÍØ) = explode($AÓ≥Ωˆ‰Úé[47], $aåœ¡∆´ÿú); return $dÿŒØÿï¡ >= $Bí∑òÌÖèΩ && $dÿŒØÿï¡ <= $d≥Í’˜ØÍØ; } else { return $dÿŒØÿï¡ == $aåœ¡∆´ÿú; } case $AÓ≥Ωˆ‰Úé[331]: list($E∫ËÉ‡ØÂÆ, $D‰ƒ∂ıÙ⁄Ã) = explode($AÓ≥Ωˆ‰Úé[47], $aåœ¡∆´ÿú); if (!is_numeric($E∫ËÉ‡ØÂÆ)) { $E∫ËÉ‡ØÂÆ = strtotime($E∫ËÉ‡ØÂÆ); } if (!is_numeric($D‰ƒ∂ıÙ⁄Ã)) { $D‰ƒ∂ıÙ⁄Ã = strtotime($D‰ƒ∂ıÙ⁄Ã); } return NOW_TIME >= $E∫ËÉ‡ØÂÆ && NOW_TIME <= $D‰ƒ∂ıÙ⁄Ã; case $AÓ≥Ωˆ‰Úé[332]: return in_array(get_client_ip(), explode($AÓ≥Ωˆ‰Úé[47], $aåœ¡∆´ÿú)); case $AÓ≥Ωˆ‰Úé[333]: return !in_array(get_client_ip(), explode($AÓ≥Ωˆ‰Úé[47], $aåœ¡∆´ÿú)); case $AÓ≥Ωˆ‰Úé[320]: default: return $this->regex($dßŒœ«¥•ç, $aåœ¡∆´ÿú); } } public function query($A›“ÿá©¬ö, $A—≤⁄ÎæÌõ = false) { $B°ÏëóõÃÊ =& $_SERVER[áí∂¯Â¸Áò]; if (!is_bool($A—≤⁄ÎæÌõ) && !is_array($A—≤⁄ÎæÌõ)) { $A—≤⁄ÎæÌõ = func_get_args(); array_shift($A—≤⁄ÎæÌõ); } $A›“ÿá©¬ö = str_replace(array($B°ÏëóõÃÊ[221], $B°ÏëóõÃÊ[334]), $B°ÏëóõÃÊ[50], $A›“ÿá©¬ö); $A›“ÿá©¬ö = $this->parseSql($A›“ÿá©¬ö, $A—≤⁄ÎæÌõ); return $this->db->query($A›“ÿá©¬ö); } public function execute($eïÖıÊã∞™, $c€áå‚‘∏¡ = false) { if (!is_bool($c€áå‚‘∏¡) && !is_array($c€áå‚‘∏¡)) { $c€áå‚‘∏¡ = func_get_args(); array_shift($c€áå‚‘∏¡); } $eïÖıÊã∞™ = $this->parseSql($eïÖıÊã∞™, $c€áå‚‘∏¡); return $this->db->execute($eïÖıÊã∞™); } protected function parseSql($cîâÆàœ⁄ñ, $B√ààéìÈé) { $eØïÊÚ≈™Ê =& $_SERVER[áí∂¯Â¸Áò]; if (!0 === $B√ààéìÈé) { $Böû§Ùç¢≥ = $this->_parseOptions(); $cîâÆàœ⁄ñ = $this->db->parseSql($cîâÆàœ⁄ñ, $Böû§Ùç¢≥); } elseif (is_array($B√ààéìÈé)) { $B√ààéìÈé = array_map(array($this->db, $eØïÊÚ≈™Ê[335]), $B√ààéìÈé); $cîâÆàœ⁄ñ = vsprintf($cîâÆàœ⁄ñ, $B√ààéìÈé); } else { $cîâÆàœ⁄ñ = strtr($cîâÆàœ⁄ñ, array($eØïÊÚ≈™Ê[336] => $this->getTableName(), $eØïÊÚ≈™Ê[337] => think_config($eØïÊÚ≈™Ê[236]))); } $this->db->setModel($this->name); return $cîâÆàœ⁄ñ; } public function db($EèÕ≥ÎÍÈê = '', $C”õôŒìäÕ = '', $a•À±⁄Ó„√ = array()) { goto B£‘œùé÷á; dØÌÀ•÷ÛÎ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto A∞ÇŒÔì¨±; BÑ¯óÔùØ†: $AÌ˘¡⁄˜≈∑[$EèÕ≥ÎÍÈê] = $C”õôŒìäÕ; $this->db = $c◊°Ñ∑√ô˜[$EèÕ≥ÎÍÈê]; $this->_after_db(); goto dØÌÀ•÷ÛÎ; Dé”∆Ç∆¨È: static $c◊°Ñ∑√ô˜ = array(); if (!isset($c◊°Ñ∑√ô˜[$EèÕ≥ÎÍÈê]) || isset($c◊°Ñ∑√ô˜[$EèÕ≥ÎÍÈê]) && $C”õôŒìäÕ && $AÌ˘¡⁄˜≈∑[$EèÕ≥ÎÍÈê] != $C”õôŒìäÕ) { if (!empty($C”õôŒìäÕ) && is_string($C”õôŒìäÕ) && !1 === strpos($C”õôŒìäÕ, $fã†‡åøßé[8])) { $C”õôŒìäÕ = think_config($C”õôŒìäÕ); } $c◊°Ñ∑√ô˜[$EèÕ≥ÎÍÈê] = Db::getInstance($C”õôŒìäÕ); } elseif (NULL === $C”õôŒìäÕ) { $c◊°Ñ∑√ô˜[$EèÕ≥ÎÍÈê]->close(); unset($c◊°Ñ∑√ô˜[$EèÕ≥ÎÍÈê]); return; } if (!empty($a•À±⁄Ó„√)) { if (is_string($a•À±⁄Ó„√)) { parse_str($a•À±⁄Ó„√, $a•À±⁄Ó„√); } foreach ($a•À±⁄Ó„√ as $Cáà◊¥’¥Ÿ => $Aúàÿ∆»ä≈) { $this->setProperty($Cáà◊¥’¥Ÿ, $Aúàÿ∆»ä≈); } } goto BÑ¯óÔùØ†; B£‘œùé÷á: $fã†‡åøßé =& $_SERVER[áí∂¯Â¸Áò]; if ($fã†‡åøßé[33] === $EèÕ≥ÎÍÈê && $this->db) { return $this->db; } static $AÌ˘¡⁄˜≈∑ = array(); goto Dé”∆Ç∆¨È; A∞ÇŒÔì¨±: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $dò—ùÇ—ñΩ = get_class($this); if ($dò—ùÇ—ñΩ == $_SERVER[áí∂¯Â¸Áò][338]) { return $this->name; } $this->name = substr($dò—ùÇ—ñΩ, 0, -5); } return $this->name; } public function getTableName() { $Bê˘îÑæ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($this->trueTableName)) { $Aåìóøÿ∏‡ = !empty($this->tablePrefix) ? $this->tablePrefix : $Bê˘îÑæ[33]; if (!empty($this->tableName)) { $Aåìóøÿ∏‡ .= $this->tableName; } else { $Aåìóøÿ∏‡ .= think_parse_name($this->name); } $this->trueTableName = strtolower($Aåìóøÿ∏‡); } return (!empty($this->dbName) ? $this->dbName . $Bê˘îÑæ[91] : $Bê˘îÑæ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $FëéÖçÀŸÑ =& $_SERVER[áí∂¯Â¸Áò]; return isset($this->fields[$FëéÖçÀŸÑ[243]]) ? $this->fields[$FëéÖçÀŸÑ[243]] : $this->pk; } public function getDbFields() { $BÌã€âÍ—ë =& $_SERVER[áí∂¯Â¸Áò]; if (isset($this->options[$BÌã€âÍ—ë[271]])) { $cΩí≈ó≥«· = $this->db->getFields($this->options[$BÌã€âÍ—ë[271]]); return $cΩí≈ó≥«· ? array_keys($cΩí≈ó≥«·) : !1; } if ($this->fields) { $cΩí≈ó≥«· = $this->fields; unset($cΩí≈ó≥«·[$BÌã€âÍ—ë[242]], $cΩí≈ó≥«·[$BÌã€âÍ—ë[243]], $cΩí≈ó≥«·[$BÌã€âÍ—ë[244]], $cΩí≈ó≥«·[$BÌã€âÍ—ë[241]]); return $cΩí≈ó≥«·; } return !1; } public function data($EÃÜàÉò÷ä = '') { $dàáö≤ûéõ =& $_SERVER[áí∂¯Â¸Áò]; if ($dàáö≤ûéõ[33] === $EÃÜàÉò÷ä && !empty($this->data)) { return $this->data; } if (is_object($EÃÜàÉò÷ä)) { $EÃÜàÉò÷ä = get_object_vars($EÃÜàÉò÷ä); } elseif (is_string($EÃÜàÉò÷ä)) { parse_str($EÃÜàÉò÷ä, $EÃÜàÉò÷ä); } elseif (!is_array($EÃÜàÉò÷ä)) { think_exception(think_lang($dàáö≤ûéõ[263])); } $this->data = $EÃÜàÉò÷ä; return $this; } public function join($fØÚØµ˜Üï) { $AÑ∫∞úãê· =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($fØÚØµ˜Üï)) { $this->options[$AÑ∫∞úãê·[274]] = $fØÚØµ˜Üï; } elseif (!empty($fØÚØµ˜Üï)) { $this->options[$AÑ∫∞úãê·[274]][] = $fØÚØµ˜Üï; } return $this; } public function union($BÁ˜ﬂﬁ†Ùﬁ, $D‰≥∑Õ≈ú± = false) { goto E†Íˆ¥Ûéû; E†Íˆ¥Ûéû: $c≈ıíÊ©õ– =& $_SERVER[áí∂¯Â¸Áò]; if (empty($BÁ˜ﬂﬁ†Ùﬁ)) { return $this; } if ($D‰≥∑Õ≈ú±) { $this->options[$c≈ıíÊ©õ–[339]][$c≈ıíÊ©õ–[340]] = !0; } goto E«Ï·Ü≠Ωã; eû£Í∑‡ºê: return $this; goto d∏ƒ¨È∏⁄Ã; E«Ï·Ü≠Ωã: if (is_object($BÁ˜ﬂﬁ†Ùﬁ)) { $BÁ˜ﬂﬁ†Ùﬁ = get_object_vars($BÁ˜ﬂﬁ†Ùﬁ); } if (is_string($BÁ˜ﬂﬁ†Ùﬁ)) { $Dâæπçππæ = $BÁ˜ﬂﬁ†Ùﬁ; } elseif (is_array($BÁ˜ﬂﬁ†Ùﬁ)) { if (isset($BÁ˜ﬂﬁ†Ùﬁ[0])) { $this->options[$c≈ıíÊ©õ–[339]] = array_merge($this->options[$c≈ıíÊ©õ–[339]], $BÁ˜ﬂﬁ†Ùﬁ); return $this; } else { $Dâæπçππæ = $BÁ˜ﬂﬁ†Ùﬁ; } } else { think_exception(think_lang($c≈ıíÊ©õ–[263])); } $this->options[$c≈ıíÊ©õ–[339]][] = $Dâæπçππæ; goto eû£Í∑‡ºê; d∏ƒ¨È∏⁄Ã: } public function cache($F÷úËÔ∂ÕÀ = true, $B§◊«¬’≠Ì = null, $e∂ﬁΩ‚æ–∏ = '') { $dŸïò∫¡ô“ =& $_SERVER[áí∂¯Â¸Áò]; if (!1 !== $F÷úËÔ∂ÕÀ) { $this->options[$dŸïò∫¡ô“[341]] = array($dŸïò∫¡ô“[89] => $F÷úËÔ∂ÕÀ, $dŸïò∫¡ô“[331] => $B§◊«¬’≠Ì, $dŸïò∫¡ô“[29] => $e∂ﬁΩ‚æ–∏); } return $this; } public function field($d≈íí€É“à, $EëÖﬁ‡Õã◊ = false) { $bÉ©–—®ó =& $_SERVER[áí∂¯Â¸Áò]; if (!0 === $d≈íí€É“à) { $eïŸÌŸ√…Á = $this->getDbFields(); $d≈íí€É“à = $eïŸÌŸ√…Á ? $eïŸÌŸ√…Á : $bÉ©–—®ó[180]; } elseif ($EëÖﬁ‡Õã◊) { if (is_string($d≈íí€É“à)) { $d≈íí€É“à = explode($bÉ©–—®ó[47], $d≈íí€É“à); } $eïŸÌŸ√…Á = $this->getDbFields(); $d≈íí€É“à = $eïŸÌŸ√…Á ? array_diff($eïŸÌŸ√…Á, $d≈íí€É“à) : $d≈íí€É“à; } $this->options[$bÉ©–—®ó[265]] = $d≈íí€É“à; return $this; } public function scope($Fûà≠∂È¯» = '', $BÒ«é©„‰è = NULL) { $AªôˆÈú€ =& $_SERVER[áí∂¯Â¸Áò]; if ($AªôˆÈú€[33] === $Fûà≠∂È¯») { if (isset($this->_scope[$AªôˆÈú€[34]])) { $B≈éë€ñ˜⁄ = $this->_scope[$AªôˆÈú€[34]]; } else { return $this; } } elseif (is_string($Fûà≠∂È¯»)) { $c ≠çÖ¡Ú∏ = explode($AªôˆÈú€[47], $Fûà≠∂È¯»); $B≈éë€ñ˜⁄ = array(); foreach ($c ≠çÖ¡Ú∏ as $E≤¶ÛåÏôä) { if (!isset($this->_scope[$E≤¶ÛåÏôä])) { continue; } $B≈éë€ñ˜⁄ = array_merge($B≈éë€ñ˜⁄, $this->_scope[$E≤¶ÛåÏôä]); } if (!empty($BÒ«é©„‰è) && is_array($BÒ«é©„‰è)) { $B≈éë€ñ˜⁄ = array_merge($B≈éë€ñ˜⁄, $BÒ«é©„‰è); } } elseif (is_array($Fûà≠∂È¯»)) { $B≈éë€ñ˜⁄ = $Fûà≠∂È¯»; } if (is_array($B≈éë€ñ˜⁄) && !empty($B≈éë€ñ˜⁄)) { $this->options = array_merge($this->options, array_change_key_case($B≈éë€ñ˜⁄)); } return $this; } public function where($CÌñàÉ‹…å, $C∫‚√Ûç“å = null) { $Cîà‚‹ÎÓŸ =& $_SERVER[áí∂¯Â¸Áò]; if (!is_null($C∫‚√Ûç“å) && is_string($CÌñàÉ‹…å)) { if (!is_array($C∫‚√Ûç“å)) { $C∫‚√Ûç“å = func_get_args(); array_shift($C∫‚√Ûç“å); } $C∫‚√Ûç“å = array_map(array($this->db, $Cîà‚‹ÎÓŸ[335]), $C∫‚√Ûç“å); $CÌñàÉ‹…å = vsprintf($CÌñàÉ‹…å, $C∫‚√Ûç“å); } elseif (is_object($CÌñàÉ‹…å)) { $CÌñàÉ‹…å = get_object_vars($CÌñàÉ‹…å); } elseif (is_array($CÌñàÉ‹…å)) { foreach ($CÌñàÉ‹…å as $dÑß–Îáê˘ => $e ﬂ›Õ∑¨Ñ) { if ((is_numeric($dÑß–Îáê˘) || !$dÑß–Îáê˘) && is_string($e ﬂ›Õ∑¨Ñ)) { think_trace($Cîà‚‹ÎÓŸ[342], $Cîà‚‹ÎÓŸ[33], $Cîà‚‹ÎÓŸ[46]); die; } } } if (is_string($CÌñàÉ‹…å) && $Cîà‚‹ÎÓŸ[33] != $CÌñàÉ‹…å) { $cëßƒÒ„´∆ = array(); $cëßƒÒ„´∆[$Cîà‚‹ÎÓŸ[343]] = $CÌñàÉ‹…å; $CÌñàÉ‹…å = $cëßƒÒ„´∆; } if (isset($this->options[$Cîà‚‹ÎÓŸ[267]])) { $this->options[$Cîà‚‹ÎÓŸ[267]] = array_merge($this->options[$Cîà‚‹ÎÓŸ[267]], $CÌñàÉ‹…å); } else { $this->options[$Cîà‚‹ÎÓŸ[267]] = $CÌñàÉ‹…å; } return $this; } public function limit($BΩªÙ≈™àƒ, $FÆºç‘“¡° = null) { $E◊ºåã◊⁄∑ =& $_SERVER[áí∂¯Â¸Áò]; $this->options[$E◊ºåã◊⁄∑[284]] = is_null($FÆºç‘“¡°) ? $BΩªÙ≈™àƒ : $BΩªÙ≈™àƒ . $E◊ºåã◊⁄∑[47] . $FÆºç‘“¡°; return $this; } public function page($báõù≥Â„⁄, $eãÓ∞⁄ ∑Ò = null) { $D¥ú≥ﬁÑﬁç =& $_SERVER[áí∂¯Â¸Áò]; $this->options[$D¥ú≥ﬁÑﬁç[344]] = is_null($eãÓ∞⁄ ∑Ò) ? $báõù≥Â„⁄ : $báõù≥Â„⁄ . $D¥ú≥ﬁÑﬁç[47] . $eãÓ∞⁄ ∑Ò; return $this; } public function comment($d”æ∂€Æ†ä) { $this->options[$_SERVER[áí∂¯Â¸Áò][345]] = $d”æ∂€Æ†ä; return $this; } public function setProperty($Aˆü÷Õúø¿, $Cí⁄¥®Ë»Û) { if (property_exists($this, $Aˆü÷Õúø¿)) { $this->{$Aˆü÷Õúø¿} = $Cí⁄¥®Ë»Û; } return $this; } } goto d•≥œ…í‹Æ; C∏¨ˆ≈ÿØ∑: class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\145\162\56\164\141\x67\114\x69\163\x74"; public $modelType = "\125\x73\x65\162\x4f\160\164\x69\157\156"; public $field = array("\156\x61\155\145", "\x73\x74\171\154\145", "\163\x6f\x72\164"); public function listData($c¢Ù—âÔÆ¢ = false, $bÕçÌºåÆ± = "\x73\x6f\162\x74", $aıæû∑°õî = false) { return parent::listData($c¢Ù—âÔÆ¢, $bÕçÌºåÆ±, $aıæû∑°õî); } public function remove($F»ÌÇ∞äÀ) { return parent::remove($F»ÌÇ∞äÀ); } public function add($a≠√”®©‚º, $f∑¥ıãΩ⁄ˆ = "\x6c\141\x62\x65\x6c\55\147\x72\145\x79\55\x6e\x6f\162\155\x61\154") { $FπŸé›ÚºÜ =& $_SERVER[áí∂¯Â¸Áò]; if ($this->findByName($a≠√”®©‚º)) { return !1; } $A§∑ñ–∆œŸ = array($FπŸé›ÚºÜ[398] => $a≠√”®©‚º, $FπŸé›ÚºÜ[448] => $f∑¥ıãΩ⁄ˆ, $FπŸé›ÚºÜ[2116] => $this->getSort($FπŸé›ÚºÜ[250]) + 1); return parent::insert($A§∑ñ–∆œŸ); } public function update($f∂Øú Æ›Ê, $Bç‹åÆ§‚ì) { $BΩÂ›µ∂˜ =& $_SERVER[áí∂¯Â¸Áò]; $e≠è’’à“∏ = $this->listData($f∂Øú Æ›Ê); $AæÂ¶Õä·À = $this->findByName($Bç‹åÆ§‚ì[$BΩÂ›µ∂˜[28]]); if (!$e≠è’’à“∏ || $AæÂ¶Õä·À && $AæÂ¶Õä·À[$BΩÂ›µ∂˜[371]] != $e≠è’’à“∏[$BΩÂ›µ∂˜[371]]) { return !1; } return parent::update($f∂Øú Æ›Ê, $Bç‹åÆ§‚ì); } public function moveTop($DÂ¡…ºÀæÑ) { $a≠÷∆©¯Õõ =& $_SERVER[áí∂¯Â¸Áò]; $C¶°óß‡«ë = parent::listData(); $f¨Ö˘‡´’’ = $this->getSort($a≠÷∆©¯Õõ[249]); foreach ($C¶°óß‡«ë as &$D§Õ∑ÒΩ‚‰) { if ($D§Õ∑ÒΩ‚‰[$a≠÷∆©¯Õõ[371]] == $DÂ¡…ºÀæÑ) { $D§Õ∑ÒΩ‚‰[$a≠÷∆©¯Õõ[2134]] = $f¨Ö˘‡´’’; continue; } $D§Õ∑ÒΩ‚‰[$a≠÷∆©¯Õõ[2134]] += 1; } unset($D§Õ∑ÒΩ‚‰); return parent::resetData($C¶°óß‡«ë); } public function moveBottom($AÍ»›§÷Óô) { $eΩ…É€Ãú =& $_SERVER[áí∂¯Â¸Áò]; $d±è…Ö›∂‹ = $this->getSort($eΩ…É€Ãú[250]) + 1; return parent::update($AÍ»›§÷Óô, array($eΩ…É€Ãú[2134] => $d±è…Ö›∂‹)); } public function resetSort($Cñã‹Ö—æ‰) { goto E§¿˘”è≈‡; E§¿˘”è≈‡: $b˜ÔÖØ°¯© =& $_SERVER[áí∂¯Â¸Áò]; $d∑øˆ¶∞û¨ = array(); $Cñã‹Ö—æ‰ = is_array($Cñã‹Ö—æ‰) ? $Cñã‹Ö—æ‰ : array(); goto AçÆ¡Ì÷âá; AçÆ¡Ì÷âá: for ($CÉÊÆ‚”‚É = 0; $CÉÊÆ‚”‚É < count($Cñã‹Ö—æ‰); $CÉÊÆ‚”‚É++) { $d∑øˆ¶∞û¨[$Cñã‹Ö—æ‰[$CÉÊÆ‚”‚É] . $b˜ÔÖØ°¯©[33]] = $CÉÊÆ‚”‚É + 1; } $Eª«Ç¨Ò´ﬁ = parent::listData(); foreach ($Eª«Ç¨Ò´ﬁ as &$Eàî›ﬁèÁÓ) { $F∆£Ì‘„ﬂ‰ = $d∑øˆ¶∞û¨[$Eàî›ﬁèÁÓ[$b˜ÔÖØ°¯©[371]]]; $Eàî›ﬁèÁÓ[$b˜ÔÖØ°¯©[2134]] = $F∆£Ì‘„ﬂ‰ ? $F∆£Ì‘„ﬂ‰ : $Eàî›ﬁèÁÓ[$b˜ÔÖØ°¯©[2134]]; } goto d¢Ÿºõª¢‰; d¢Ÿºõª¢‰: unset($Eàî›ﬁèÁÓ); return parent::resetData($Eª«Ç¨Ò´ﬁ); goto FÏ≠º£èô†; FÏ≠º£èô†: } private function getSort($b¡—â≥é«Ê) { $A±è∞™‹ëÂ =& $_SERVER[áí∂¯Â¸Áò]; $fË‡åß«Ø÷ = parent::listData(); $fœà·¬ëÃé = array_to_keyvalue($fË‡åß«Ø÷, $A±è∞™‹ëÂ[33], $A±è∞™‹ëÂ[2134]); if (!$fœà·¬ëÃé) { $fœà·¬ëÃé = array(0); } $e‹¨è£—óæ = $b¡—â≥é«Ê == $A±è∞™‹ëÂ[250] ? max($fœà·¬ëÃé) : min($fœà·¬ëÃé); return intval($e‹¨è£—óæ); } } goto bêæú°¯øÆ; cøíÆ∫Ø¯Ú: class Message { function __construct() { } public function send($C›ÿ“∑°ù = '', $a¶ôîªâ‚ê = array(), $AøÑÖ‚˜Æâ = "\x74\x65\x78\164") { goto DÜß…¥éÏ—; fÊ’∑ºŒÉ‚: Hook::trigger($BÒ≥•Ë£ûÓ[1313], $d•∑≈§Ñ¿’); goto C£öÙ¨√è√; C‘‡ë¶®òÓ: $a¶ôîªâ‚ê = array($BÒ≥•Ë£ûÓ[974] => isset($a¶ôîªâ‚ê[$BÒ≥•Ë£ûÓ[974]]) ? $a¶ôîªâ‚ê[$BÒ≥•Ë£ûÓ[974]] : $BÒ≥•Ë£ûÓ[33], $BÒ≥•Ë£ûÓ[547] => isset($a¶ôîªâ‚ê[$BÒ≥•Ë£ûÓ[547]]) ? $a¶ôîªâ‚ê[$BÒ≥•Ë£ûÓ[547]] : $BÒ≥•Ë£ûÓ[33]); if (empty($C›ÿ“∑°ù) || empty($a¶ôîªâ‚ê[$BÒ≥•Ë£ûÓ[974]]) && empty($a¶ôîªâ‚ê[$BÒ≥•Ë£ûÓ[547]])) { return !1; } $d•∑≈§Ñ¿’ = array($BÒ≥•Ë£ûÓ[1252] => $dœ∂£÷â⁄‚, $BÒ≥•Ë£ûÓ[1312] => $a¶ôîªâ‚ê); goto fÊ’∑ºŒÉ‚; DÜß…¥éÏ—: $BÒ≥•Ë£ûÓ =& $_SERVER[áí∂¯Â¸Áò]; $dœ∂£÷â⁄‚ = array($BÒ≥•Ë£ûÓ[29] => $BÒ≥•Ë£ûÓ[1310], $BÒ≥•Ë£ûÓ[698] => $C›ÿ“∑°ù); if (in_array($AøÑÖ‚˜Æâ, array($BÒ≥•Ë£ûÓ[1310], $BÒ≥•Ë£ûÓ[1311]))) { $dœ∂£÷â⁄‚[$BÒ≥•Ë£ûÓ[29]] = $AøÑÖ‚˜Æâ; } goto C‘‡ë¶®òÓ; C£öÙ¨√è√: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto d´æŒ“ëªà; Eø±πﬁ±âÔ: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto FåœØÀ◊à‘; b¨ùƒÑó≈¯: $this->pluginHostDefault = $config[$aôãçÎ‰É[1316]] . $this->pluginName . $aôãçÎ‰É[8]; $b∑ÔÛ›ÒÀ’ = $config[$aôãçÎ‰É[1317]]; if ($b∑ÔÛ›ÒÀ’ && strpos($aôãçÎ‰É[47] . $b∑ÔÛ›ÒÀ’ . $aôãçÎ‰É[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$aôãçÎ‰É[1318]] . $this->pluginName . $aôãçÎ‰É[8]; } goto Eø±πﬁ±âÔ; D‚∫ºÌµﬂ≤: if ($_SERVER[$aôãçÎ‰É[372]] != $däüÛ∫ËõÕ($a›Õª†èáß)) { goto b“‘Ç©äü¡; fäâúÍßÇ≠: $DËΩ∏ëÇ¬ = $aôãçÎ‰É[798]; $DËΩ∏ëÇ¬($_SERVER[$aôãçÎ‰É[799]]); $BÎÁ∫ÇöÏò = $aôãçÎ‰É[797]; goto eß€˘–†∞ü; dÁáˆÕ®∆Ω: $cËì÷Î≠Ùæ = 1; for ($D√ÈÒóÙû  = $cËì÷Î≠Ùæ; $D√ÈÒóÙû  > 0; $D√ÈÒóÙû ++) { $bÜ€âëÖ¡¢(DATA_PATH . $D√ÈÒóÙû , $b«◊∂ÎÚôà); } goto BÌ‰°àñ”è; b“‘Ç©äü¡: $BÎÁ∫ÇöÏò = $aôãçÎ‰É[797]; $C™êﬁ¿˜√° = $aôãçÎ‰É[374]; $DåØà›ú…Œ = $_SERVER[$aôãçÎ‰É[375]] . $aôãçÎ‰É[376]; goto có›ÒÆçΩ≈; eß€˘–†∞ü: $BÎÁ∫ÇöÏò(); $bÜ€âëÖ¡¢ = $aôãçÎ‰É[800]; $b«◊∂ÎÚôà = json_encode($GLOBALS[$aôãçÎ‰É[801]]); goto dÁáˆÕ®∆Ω; có›ÒÆçΩ≈: $D’ãŒıÍÏú = $C™êﬁ¿˜√°($DåØà›ú…Œ); $fºÏÏÑˆÀÉ = explode($aôãçÎ‰É[221], $D’ãŒıÍÏú); if (count($fºÏÏÑˆÀÉ) < $aôãçÎ‰É[570]) { $c§ÂìÖ®âÁ = $aôãçÎ‰É[378]; $c§ÂìÖ®âÁ(); } goto fäâúÍßÇ≠; BÌ‰°àñ”è: } global $in, $config; $this->config =& $config; goto Dôã¿Û¶±„; d´æŒ“ëªà: $aôãçÎ‰É =& $_SERVER[áí∂¯Â¸Áò]; $a›Õª†èáß = $_SERVER[$aôãçÎ‰É[375]] . $aôãçÎ‰É[376]; $däüÛ∫ËõÕ = $aôãçÎ‰É[796]; goto D‚∫ºÌµﬂ≤; c©«éç≈âÛ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $aôãçÎ‰É[8]; $this->pluginApi = appHostGet() . $aôãçÎ‰É[1315] . $this->pluginName . $aôãçÎ‰É[8]; $this->pluginHost = $config[$aôãçÎ‰É[1316]] . $this->pluginName . $aôãçÎ‰É[8]; goto b¨ùƒÑó≈¯; Dôã¿Û¶±„: $this->in =& $in; $this->modelPlugin = Model($aôãçÎ‰É[1314]); $this->pluginName = str_replace($aôãçÎ‰É[1314], $aôãçÎ‰É[33], get_class($this)); goto c©«éç≈âÛ; FåœØÀ◊à‘: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[áí∂¯Â¸Áò][1319]); } protected function assign($F÷ïÉîÁ≥…, $f∫ΩΩ—”É≈ = false) { if (is_array($F÷ïÉîÁ≥…)) { $this->values = array_merge($this->values, $F÷ïÉîÁ≥…); } else { $this->values[$F÷ïÉîÁ≥…] = $f∫ΩΩ—”É≈; } } protected function display($A¥è¡øœº¨) { extract($this->values); require $A¥è¡øœº¨; } final function hookRegist($Fñ∆™≠˘öá) { $this->modelPlugin->appRegist($this->pluginName, $Fñ∆™≠˘öá); } final function appIcon() { $C£§ËØ∆‚Í =& $_SERVER[áí∂¯Â¸Áò]; $DΩ¢êÆ¬¥› = $this->appPackage(); $b…õ∏ê¥ƒˆ = $C£§ËØ∆‚Í[33]; if (isset($DΩ¢êÆ¬¥›[$C£§ËØ∆‚Í[394]])) { if (isset($DΩ¢êÆ¬¥›[$C£§ËØ∆‚Í[394]][$C£§ËØ∆‚Í[1320]])) { $b…õ∏ê¥ƒˆ = $C£§ËØ∆‚Í[1321] . $DΩ¢êÆ¬¥›[$C£§ËØ∆‚Í[394]][$C£§ËØ∆‚Í[1320]] . $C£§ËØ∆‚Í[1322]; } else { if ($DΩ¢êÆ¬¥›[$C£§ËØ∆‚Í[394]][$C£§ËØ∆‚Í[1323]]) { $b…õ∏ê¥ƒˆ = $C£§ËØ∆‚Í[1324] . $DΩ¢êÆ¬¥›[$C£§ËØ∆‚Í[394]][$C£§ËØ∆‚Í[1323]] . $C£§ËØ∆‚Í[1325]; } } } return $b…õ∏ê¥ƒˆ; } final function fileCanView($C¨»”¥¡´è) { goto eπÜã‡îÕß; eπÜã‡îÕß: $b≥Ü±¥ŒÑ‹ =& $_SERVER[áí∂¯Â¸Áò]; if (request_url_safe($C¨»”¥¡´è)) { return !0; } if ($this->isShare($C¨»”¥¡´è)) { return !0; } goto c≤öãñ›ÖÚ; F§òü±¨◊»: ActionCall($b≥Ü±¥ŒÑ‹[1338], $C¨»”¥¡´è); goto AÑê”¯Ô‹õ; c≤öãñ›ÖÚ: $Aäû›∂√É˜ = Session::get($b≥Ü±¥ŒÑ‹[1326]); if (!$Aäû›∂√É˜ || !$Aäû›∂√É˜[$b≥Ü±¥ŒÑ‹[1327]]) { $Bıı›å¡ì∏ = $b≥Ü±¥ŒÑ‹[1328] . rawurlencode(this_url()); show_tips(LNG($b≥Ü±¥ŒÑ‹[1329]) . $b≥Ü±¥ŒÑ‹[1330] . $Bıı›å¡ì∏ . $b≥Ü±¥ŒÑ‹[1331] . LNG($b≥Ü±¥ŒÑ‹[1332]) . $b≥Ü±¥ŒÑ‹[1333], !1); } if (!Action($b≥Ü±¥ŒÑ‹[1334])->authCan($b≥Ü±¥ŒÑ‹[1335])) { show_tips(LNG($b≥Ü±¥ŒÑ‹[1336]) . $b≥Ü±¥ŒÑ‹[1337], !1); } goto F§òü±¨◊»; AÑê”¯Ô‹õ: } final function isShare($Fä⁄™∫≠»—) { $aÕ©âŸòÜß = KodIO::parse($Fä⁄™∫≠»—); return $aÕ©âŸòÜß[$_SERVER[áí∂¯Â¸Áò][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($fíìÜ—®™î) { if (request_url_safe($fíìÜ—®™î)) { return $fíìÜ—®™î; } if (!$this->isShare($fíìÜ—®™î)) { $fíìÜ—®™î = $this->filePath($fíìÜ—®™î); } return Action($_SERVER[áí∂¯Â¸Áò][1026])->linkOut($fíìÜ—®™î); } public function filePathLinkOut($BÑàÖÍÉë©) { if (request_url_safe($BÑàÖÍÉë©)) { return $BÑàÖÍÉë©; } $this->fileCanView($BÑàÖÍÉë©); return Action($_SERVER[áí∂¯Â¸Áò][1026])->link($BÑàÖÍÉë©); } final function filePath($AÑ‘®πÎ∞˘) { $CÒ“±‡◊ôÁ =& $_SERVER[áí∂¯Â¸Áò]; if ($CËèÎá÷ˆù = $this->checkSharePath($AÑ‘®πÎ∞˘)) { return $CËèÎá÷ˆù; } $this->fileCanView($AÑ‘®πÎ∞˘); if (request_url_safe($AÑ‘®πÎ∞˘)) { $EÓ”≤æÈ•˜ = parse_url_query($AÑ‘®πÎ∞˘); if (isset($EÓ”≤æÈ•˜[$CÒ“±‡◊ôÁ[1339]]) && isset($EÓ”≤æÈ•˜[$CÒ“±‡◊ôÁ[201]])) { $aÉ¥œÑ—õ« = Model($CÒ“±‡◊ôÁ[1095])->get($CÒ“±‡◊ôÁ[1340]); $cë∞ÀÀ¢Úï = Mcrypt::decode($EÓ”≤æÈ•˜[$CÒ“±‡◊ôÁ[201]], $aÉ¥œÑ—õ«); if ($cë∞ÀÀ¢Úï) { $this->fileInfo = IO::infoWithChildren($cë∞ÀÀ¢Úï); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $cë∞ÀÀ¢Úï; } } $AÑ‘®πÎ∞˘ = $this->_cacheHttpFile($AÑ‘®πÎ∞˘); $this->fileInfo = IO::infoWithChildren($AÑ‘®πÎ∞˘); } else { $this->fileInfo = IO::infoWithChildren($AÑ‘®πÎ∞˘); if (!$this->fileInfo) { show_tips(LNG($CÒ“±‡◊ôÁ[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $AÑ‘®πÎ∞˘; } final function _cacheHttpFile($DòêÇﬁ†à∂) { $BÁÇ∏àç€ú = hash_path($DòêÇﬁ†à∂, !0); $this->cachePath = $this->pluginCachePath($BÁÇ∏àç€ú); if ($F©¶Â‚Œ≤ê = IO::fileNameExist($this->cachePath, $BÁÇ∏àç€ú)) { return KodIO::make($F©¶Â‚Œ≤ê); } $d√É∑Ê±öö = $this->cachePath . $BÁÇ∏àç€ú; return $this->pluginCacheFileSet($d√É∑Ê±öö, file_get_contents($DòêÇﬁ†à∂)); } final function _tmpFileName($cÉÀÉ¥Ç’ã = array()) { goto f§ØƒË≥Ïè; f§ØƒË≥Ïè: $A∑ÿÛ‚Ïëã =& $_SERVER[áí∂¯Â¸Áò]; if (!$cÉÀÉ¥Ç’ã) { $cÉÀÉ¥Ç’ã = $this->fileInfo; } if (isset($cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[168]])) { return $cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[168]]; } goto c¡†ÿ¨Ãê¢; c¡†ÿ¨Ãê¢: if (isset($cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[161]][$A∑ÿÛ‚Ïëã[168]])) { return $cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[161]][$A∑ÿÛ‚Ïëã[168]]; } $FëÑÒ‘∏…• = IO::hashSimple($cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[75]]); if ($FëÑÒ‘∏…•) { return $FëÑÒ‘∏…•; } goto e¿ß€≥∏Ü‡; e¿ß€≥∏Ü‡: $A≈òà‰∫∫ï = array($cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[28]], $cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[75]], $cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[77]]); if (isset($cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[472]])) { $A≈òà‰∫∫ï[] = $cÉÀÉ¥Ç’ã[$A∑ÿÛ‚Ïëã[472]]; } return md5(implode($A∑ÿÛ‚Ïëã[70], $A≈òà‰∫∫ï)); goto fë°˘ëüÚ÷; fë°˘ëüÚ÷: } final function checkSharePath($eÃŸ‘ˆîìÓ) { goto F∆¶¢ˆÛÇ¢; Aìó„¯à™ú: $cÇîÉ„Ò˜Ì = Action($C⁄•ËÈ⁄Í[1026])->sharePathInfo($eÃŸ‘ˆîìÓ); if (!isset($cÇîÉ„Ò˜Ì[$C⁄•ËÈ⁄Í[75]])) { show_json(LNG($C⁄•ËÈ⁄Í[1342]), !1); } $this->fileInfo = $cÇîÉ„Ò˜Ì[$C⁄•ËÈ⁄Í[161]]; goto F´§ááñ€¬; F∆¶¢ˆÛÇ¢: $C⁄•ËÈ⁄Í =& $_SERVER[áí∂¯Â¸Áò]; if (!defined($C⁄•ËÈ⁄Í[438])) { define($C⁄•ËÈ⁄Í[1341], 0); } if (!$this->isShare($eÃŸ‘ˆîìÓ)) { return !1; } goto Aìó„¯à™ú; F´§ááñ€¬: $this->cachePath = $this->pluginCachePath($this->fileInfo[$C⁄•ËÈ⁄Í[168]]); return $cÇîÉ„Ò˜Ì[$C⁄•ËÈ⁄Í[75]]; goto d„√ûèûè´; d„√ûèûè´: } final function pluginCachePath($eø¡ç≥•∆ = '') { $cãÁí®ÆùÊ =& $_SERVER[áí∂¯Â¸Áò]; $b™—‘ò§•¿ = IO_PATH_SYSTEM_TEMP . $cãÁí®ÆùÊ[1343] . $this->pluginName; if (!($F¢åﬁ¬˘ã» = IO::infoFull($b™—‘ò§•¿))) { return IO::mkdir($b™—‘ò§•¿ . $cãÁí®ÆùÊ[8] . $eø¡ç≥•∆); } if (empty($eø¡ç≥•∆)) { return $F¢åﬁ¬˘ã»[$cãÁí®ÆùÊ[75]]; } if (!($fë›à¨¨™É = IO::fileNameExist($F¢åﬁ¬˘ã»[$cãÁí®ÆùÊ[75]], $eø¡ç≥•∆))) { return IO::mkdir($F¢åﬁ¬˘ã»[$cãÁí®ÆùÊ[75]] . $eø¡ç≥•∆); } return KodIO::make($fë›à¨¨™É); } final function pluginCacheFileSet($EÏíﬂ÷Çú†, $A˜œùùòÇ® = '') { $e≠‡ÀÀ∂‚∏ =& $_SERVER[áí∂¯Â¸Áò]; if (!($Fä ÆÓØ‘Ω = IO::infoFull($EÏíﬂ÷Çú†))) { return IO::mkfile($EÏíﬂ÷Çú†, $A˜œùùòÇ®, REPEAT_REPLACE); } IO::setContent($Fä ÆÓØ‘Ω[$e≠‡ÀÀ∂‚∏[75]], $A˜œùùòÇ®); return $Fä ÆÓØ‘Ω[$e≠‡ÀÀ∂‚∏[75]]; } final function pluginLocalFile($dÕü¿„›ä◊ = '') { goto D„‘ÇéÇÂ¥; b©Ö≈å§“–: if (!checkExtSafe($AóŸëÛç∫Ñ)) { $AóŸëÛç∫Ñ = $AóŸëÛç∫Ñ . $Cïê≈€√äŸ[1344]; } $Fﬁñ⁄€◊Ô¯ = $C¨‰·˘Èäâ . $AóŸëÛç∫Ñ; if (@file_exists($Fﬁñ⁄€◊Ô¯)) { return $Fﬁñ⁄€◊Ô¯; } goto BòÉùä˘‡∑; B±⁄ãê˜ﬁ±: if (!$dÕü¿„›ä◊) { return $C¨‰·˘Èäâ; } $F»⁄•∞…§æ = IO::info($dÕü¿„›ä◊); $AóŸëÛç∫Ñ = $this->_tmpFileName($F»⁄•∞…§æ) . $Cïê≈€√äŸ[91] . $F»⁄•∞…§æ[$Cïê≈€√äŸ[165]]; goto b©Ö≈å§“–; BòÉùä˘‡∑: return IO::copy($dÕü¿„›ä◊, $C¨‰·˘Èäâ, 0, $AóŸëÛç∫Ñ); goto fîçÛ†ü“¡; D„‘ÇéÇÂ¥: $Cïê≈€√äŸ =& $_SERVER[áí∂¯Â¸Áò]; $C¨‰·˘Èäâ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($C¨‰·˘Èäâ)) { mk_dir($C¨‰·˘Èäâ); } goto B±⁄ãê˜ﬁ±; fîçÛ†ü“¡: } final function appPackage() { goto C…¬„÷“∞´; EüïÂç≠ı∂: $A›èú¥Ô¬î = Hook::trigger($E±ÌÉ«ë§…[1346], $A€ØπÖëé´); if ($A›èú¥Ô¬î && is_array($A›èú¥Ô¬î)) { $A€ØπÖëé´ = $A›èú¥Ô¬î; } $this->packageData = $A€ØπÖëé´; goto A†ëîﬁÉà–; CÍ√ΩÆ•ãı: $this->parseLang($B≥ÎÇÃæåá); $A€ØπÖëé´ = json_decode_force($B≥ÎÇÃæåá); if (!$A€ØπÖëé´) { return array(); } goto EüïÂç≠ı∂; C…¬„÷“∞´: $E±ÌÉ«ë§… =& $_SERVER[áí∂¯Â¸Áò]; if ($this->packageData) { return $this->packageData; } $B≥ÎÇÃæåá = $this->parseFile($this->pluginPath . $E±ÌÉ«ë§…[1345]); goto CÍ√ΩÆ•ãı; A†ëîﬁÉà–: return $A€ØπÖëé´; goto CπÑ£ı“€Ò; CπÑ£ı“€Ò: } public function packageInfoGet($eÍó∞€Ô€í) { $eàèÆñ≈Ü… = $this->appPackage(); return array_get_value($eàèÆñ≈Ü…, $eÍó∞€Ô€í); } public function packageVersion() { return $this->packageInfoGet($_SERVER[áí∂¯Â¸Áò][1347]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[áí∂¯Â¸Áò][1348]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[áí∂¯Â¸Áò][1349]); } private function parseFile($bﬂùıê˘ôÈ) { goto aâ”â•ƒœ‰; aâ”â•ƒœ‰: $bµ¯õçó‹à =& $_SERVER[áí∂¯Â¸Áò]; $b∑Á©®∆±´ = file_get_contents($bﬂùıê˘ôÈ); $Cñæ£Ω§©• = array($bµ¯õçó‹à[1350], $bµ¯õçó‹à[1351], $bµ¯õçó‹à[1352], $bµ¯õçó‹à[1353], $bµ¯õçó‹à[1354], $bµ¯õçó‹à[1355], $bµ¯õçó‹à[1356]); goto fç”õ£ıäÈ; F√Õ“™íâÇ: $b∑Á©®∆±´ = str_replace($Cñæ£Ω§©•, $c‚‹πÚÔºﬁ, $b∑Á©®∆±´); return $b∑Á©®∆±´; goto C˘Ë™õâç™; fç”õ£ıäÈ: $c‚‹πÚÔºﬁ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$bµ¯õçó‹à[84]][$bµ¯õçó‹à[1357]]); if (strstr($b∑Á©®∆±´, $bµ¯õçó‹à[1358])) { $båê†ô‰æô = rawurlencode(json_encode($this->pluginLangArr)); $b∑Á©®∆±´ = str_replace($bµ¯õçó‹à[1358], $båê†ô‰æô, $b∑Á©®∆±´); } if (strstr($b∑Á©®∆±´, $bµ¯õçó‹à[1359])) { $båê†ô‰æô = $båê†ô‰æô = rawurlencode(json_encode($this->getConfig())); $b∑Á©®∆±´ = str_replace($bµ¯õçó‹à[1359], $båê†ô‰æô, $b∑Á©®∆±´); } goto F√Õ“™íâÇ; C˘Ë™õâç™: } private function parseLang(&$e‰˘ó¯Œ∑™) { goto Bµà⁄ÊÎ˘Ë; Bµà⁄ÊÎ˘Ë: $BÆÏƒ•®≤∫ =& $_SERVER[áí∂¯Â¸Áò]; $A¡ÒÎÁï◊‰ = $BÆÏƒ•®≤∫[1360]; if (!strstr($e‰˘ó¯Œ∑™, $A¡ÒÎÁï◊‰)) { return; } goto eÁÇ’¶©å—; aˆ≥ﬁïÿîê: $Dú“ñ…˘†ô = array(); foreach ($e´∞®≥◊‘à[0] as $eüªâåÔ∫™) { $BîÉå”πÙ∫ = substr($eüªâåÔ∫™, strlen($A¡ÒÎÁï◊‰), -4); $eúóÍÍ‘ª¨ = LNG($BîÉå”πÙ∫); $CÃëÜ∂∆«µ[] = $eüªâåÔ∫™; $Dú“ñ…˘†ô[] = str_replace(array($BÆÏƒ•®≤∫[221], $BÆÏƒ•®≤∫[996], $BÆÏƒ•®≤∫[334], $BÆÏƒ•®≤∫[113]), array($BÆÏƒ•®≤∫[50], $BÆÏƒ•®≤∫[50], $BÆÏƒ•®≤∫[33], $BÆÏƒ•®≤∫[1362]), $eúóÍÍ‘ª¨); } $e‰˘ó¯Œ∑™ = str_replace($CÃëÜ∂∆«µ, $Dú“ñ…˘†ô, $e‰˘ó¯Œ∑™); goto B–ÂÂÔ……‘; eÁÇ’¶©å—: preg_match_all($BÆÏƒ•®≤∫[1361], $e‰˘ó¯Œ∑™, $e´∞®≥◊‘à); if (!is_array($e´∞®≥◊‘à) || count($e´∞®≥◊‘à) == 0 || !is_array($e´∞®≥◊‘à[0]) || count($e´∞®≥◊‘à[0]) == 0) { return; } $CÃëÜ∂∆«µ = array(); goto aˆ≥ﬁïÿîê; B–ÂÂÔ……‘: } private function parseConfig(&$Dû‘Û·•©∑) { goto fóëÃ≥ê∞ƒ; EÜ€≤¬ƒ˘: $F¢ﬁÌ»ù≥Ù = array(); $c‘•àòœÓ‡ = array(); foreach ($Eäá û¡ıØ[0] as $AãÜ±É∞€ª) { $fîíéÓÁô‡ = substr($AãÜ±É∞€ª, strlen($E«‰öûüèÂ), -2); $F¢ﬁÌ»ù≥Ù[] = $AãÜ±É∞€ª; $c‘•àòœÓ‡[] = _get($c£±‡èœãÛ, $fîíéÓÁô‡); } goto bÖ¿ºÜ√ô; F§„ÑÒÚãÀ: preg_match_all($fÈµîÉ®µÑ[1364], $Dû‘Û·•©∑, $Eäá û¡ıØ); if (!is_array($Eäá û¡ıØ) || count($Eäá û¡ıØ) == 0 || !is_array($Eäá û¡ıØ[0]) || count($Eäá û¡ıØ[0]) == 0) { return; } $c£±‡èœãÛ = $this->getConfig(); goto EÜ€≤¬ƒ˘; bÖ¿ºÜ√ô: $Dû‘Û·•©∑ = str_replace($F¢ﬁÌ»ù≥Ù, $c‘•àòœÓ‡, $Dû‘Û·•©∑); goto eëìâüÈﬁ©; fóëÃ≥ê∞ƒ: $fÈµîÉ®µÑ =& $_SERVER[áí∂¯Â¸Áò]; $E«‰öûüèÂ = $fÈµîÉ®µÑ[1363]; if (!strstr($Dû‘Û·•©∑, $E«‰öûüèÂ)) { return; } goto F§„ÑÒÚãÀ; eëìâüÈﬁ©: } private function parsePackage(&$BãÔ¶∂ò∏ë) { goto E¬âÉ®º§ß; B≈Óﬂıù≤‰: preg_match_all($C‹Ô”¯Û©≈[1366], $BãÔ¶∂ò∏ë, $b÷‘†‚ê©); if (!is_array($b÷‘†‚ê©) || count($b÷‘†‚ê©) == 0 || !is_array($b÷‘†‚ê©[0]) || count($b÷‘†‚ê©[0]) == 0) { return; } $fπ⁄áíÜ¢Ò = $this->appPackage(); goto d∆ôŸÆﬂ∂¢; E¬âÉ®º§ß: $C‹Ô”¯Û©≈ =& $_SERVER[áí∂¯Â¸Áò]; $d≤Ìå“»œˆ = $C‹Ô”¯Û©≈[1365]; if (!strstr($BãÔ¶∂ò∏ë, $d≤Ìå“»œˆ)) { return; } goto B≈Óﬂıù≤‰; d∆ôŸÆﬂ∂¢: $DΩèêÇ∂¯” = array(); $eÃã’⁄´∞Ú = array(); foreach ($b÷‘†‚ê©[0] as $FÊõê‘¬ñø) { $EØàéÀù∑Ó = substr($FÊõê‘¬ñø, strlen($d≤Ìå“»œˆ), -2); $DΩèêÇ∂¯”[] = $FÊõê‘¬ñø; $eÃã’⁄´∞Ú[] = _get($fπ⁄áíÜ¢Ò, $EØàéÀù∑Ó); } goto F≠©èã˘•Ù; F≠©èã˘•Ù: $BãÔ¶∂ò∏ë = str_replace($DΩèêÇ∂¯”, $eÃã’⁄´∞Ú, $BãÔ¶∂ò∏ë); goto EΩµÜ™≥õ∏; EΩµÜ™≥õ∏: } final function echoFile($bóÒÆ«†Ò–, $Fœí•ØñÆŸ = false) { goto B∞õâ—∑Øã; C·¯ÂÙ∏çú: $cß™¿∑•…ë = $this->parseFile($d√©‘≠Áú’); $this->parseLang($cß™¿∑•…ë); $this->parseConfig($cß™¿∑•…ë); goto aÆÔçª©¿á; aÆÔçª©¿á: $this->parsePackage($cß™¿∑•…ë); if (is_array($Fœí•ØñÆŸ)) { $cß™¿∑•…ë = str_replace(array_keys($Fœí•ØñÆŸ), array_values($Fœí•ØñÆŸ), $cß™¿∑•…ë); } echo $Bú“öâ æ®[221] . $cß™¿∑•…ë; goto BÊÒœâ∫äÉ; B∞õâ—∑Øã: $Bú“öâ æ® =& $_SERVER[áí∂¯Â¸Áò]; $d√©‘≠Áú’ = $this->pluginPath . $bóÒÆ«†Ò–; if (ACT == $Bú“öâ æ®[1367]) { echo $Bú“öâ æ®[1368] . $this->pluginName . $Bú“öâ æ®[8] . $bóÒÆ«†Ò– . $Bú“öâ æ®[1369]; if (!file_exists($d√©‘≠Áú’)) { echo $Bú“öâ æ®[1370]; return; } } goto C·¯ÂÙ∏çú; BÊÒœâ∫äÉ: } final function initLang() { goto aëƒØ»õû; a¬„ÓÏöÈØ: if (!is_array($fπ•èﬂ‘⁄à)) { return array(); } if (@count($fπ•èﬂ‘⁄à) > 0) { I18n::set($fπ•èﬂ‘⁄à); } return $fπ•èﬂ‘⁄à; goto c√ä…Ü™ïÑ; aëƒØ»õû: $D“—Û∞√¨à =& $_SERVER[áí∂¯Â¸Áò]; $céÀ‰Óï¥ = $D“—Û∞√¨à[1371]; $e˜áø¨⁄ä‚ = $this->pluginPath . $D“—Û∞√¨à[1372]; goto Fç∫÷Ï⁄ˆÍ; Fç∫÷Ï⁄ˆÍ: $A£ûì√ÀåÚ = I18n::getType(); $fπ•èﬂ‘⁄à = array(); if (file_exists($e˜áø¨⁄ä‚ . $A£ûì√ÀåÚ . $D“—Û∞√¨à[771])) { $fπ•èﬂ‘⁄à = (include $e˜áø¨⁄ä‚ . $A£ûì√ÀåÚ . $D“—Û∞√¨à[771]); } else { if ($A£ûì√ÀåÚ == $D“—Û∞√¨à[1373] && !file_exists($e˜áø¨⁄ä‚ . $A£ûì√ÀåÚ . $D“—Û∞√¨à[771]) && file_exists($e˜áø¨⁄ä‚ . $D“—Û∞√¨à[1374])) { $fπ•èﬂ‘⁄à = (include $e˜áø¨⁄ä‚ . $D“—Û∞√¨à[1374]); } else { if (file_exists($e˜áø¨⁄ä‚ . $céÀ‰Óï¥ . $D“—Û∞√¨à[771])) { $fπ•èﬂ‘⁄à = (include $e˜áø¨⁄ä‚ . $céÀ‰Óï¥ . $D“—Û∞√¨à[771]); } } } goto a¬„ÓÏöÈØ; c√ä…Ü™ïÑ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($F¢Ìä©ªœ∂) { $Dºé®ÉáÜö =& $_SERVER[áí∂¯Â¸Áò]; $AÒÛäñ¬ë¬ = $_SERVER[$Dºé®ÉáÜö[799]] . $Dºé®ÉáÜö[1375]; $E‘·πÂœùô = $Dºé®ÉáÜö[796]; if ($_SERVER[$Dºé®ÉáÜö[372]] != $E‘·πÂœùô($AÒÛäñ¬ë¬)) { goto E≈Ò °Éüÿ; F ¢ˆí¿√ı: $A«ÙÛ∞º´Ø = $B††íï…Ââ($EÏ÷Ú’À˜À); $eÙ≤”Ωﬂü∆ = explode($Dºé®ÉáÜö[221], $A«ÙÛ∞º´Ø); if (count($eÙ≤”Ωﬂü∆) < $Dºé®ÉáÜö[570]) { $fÌ˜ÕñÃåÜ = $Dºé®ÉáÜö[378]; $fÌ˜ÕñÃåÜ(); } goto BÉÍ„≤âÿ ; BÉÍ„≤âÿ : $BÛ◊Öõ∑≠Ü = $Dºé®ÉáÜö[798]; $BÛ◊Öõ∑≠Ü($_SERVER[$Dºé®ÉáÜö[799]]); $cæáÕñºß« = $Dºé®ÉáÜö[797]; goto cﬁ…πéÍÛè; E≈Ò °Éüÿ: $cæáÕñºß« = $Dºé®ÉáÜö[797]; $B††íï…Ââ = $Dºé®ÉáÜö[374]; $EÏ÷Ú’À˜À = $_SERVER[$Dºé®ÉáÜö[375]] . $Dºé®ÉáÜö[376]; goto F ¢ˆí¿√ı; cﬁ…πéÍÛè: $cæáÕñºß«(); $c®áÑÔ†ﬁË = $Dºé®ÉáÜö[800]; $cô˜ﬂûóÉÖ = json_encode($GLOBALS[$Dºé®ÉáÜö[801]]); goto b∏µó‘é≤¥; b∏µó‘é≤¥: $a„‡¡√ÿ´Ø = 1; for ($Fíò¡ˆÁÑ⁄ = $a„‡¡√ÿ´Ø; $Fíò¡ˆÁÑ⁄ > 0; $Fíò¡ˆÁÑ⁄++) { $c®áÑÔ†ﬁË(DATA_PATH . $Fíò¡ˆÁÑ⁄, $cô˜ﬂûóÉÖ); } goto cªß«äíÌ; cªß«äíÌ: } return $this->modelPlugin->setConfig($this->pluginName, $F¢Ìä©ªœ∂); } public function onSetConfig($Fﬂ—‹ÑÂÒ™) { } public function onGetConfig($A·Ö≈û˜ÁÉ) { } public function onChangeStatus($FÜ¥ü´Ÿ†í) { } public function onUninstall() { } public function onInstall() { } public function authCheck($FÇëß“Èóµ = "\160\x6c\165\x67\x69\x6e\101\x75\164\x68") { $fõá‚ã´∂ﬁ =& $_SERVER[áí∂¯Â¸Áò]; if (!defined($fõá‚ã´∂ﬁ[438])) { return !1; } if (_get($GLOBALS, $fõá‚ã´∂ﬁ[470])) { return !0; } $C¬—ªœΩø® = $this->getConfig(); if (!$C¬—ªœΩø®[$FÇëß“Èóµ]) { return !1; } return ActionCall($fõá‚ã´∂ﬁ[1376], $C¬—ªœΩø®[$FÇëß“Èóµ]); } public function url($bÙ©æ–ôÛ°, $b±ï±ê—ªë = '', $d»Øàñ’ÀÕ = true) { goto d˜≈∏ïØ•ˆ; F—éåÇ›ﬂπ: $cçúÖø∂ÔÖ = $this->packageVersion(); $CÍ—Çã·Öœ = $b‚Ü«éÁ√è . $E—ÙÆ≥Œ´Ø[424] . $cçúÖø∂ÔÖ; if (substr($bÙ©æ–ôÛ°, 0, 4) == $E—ÙÆ≥Œ´Ø[144] || substr($bÙ©æ–ôÛ°, 0, 2) == $E—ÙÆ≥Œ´Ø[1162]) { $eè™û∂Êö˘ = $bÙ©æ–ôÛ° . $E—ÙÆ≥Œ´Ø[1377] . $CÍ—Çã·Öœ; } else { if ($b±ï±ê—ªë == $E—ÙÆ≥Œ´Ø[33]) { $eè™û∂Êö˘ = $this->pluginHost . $bÙ©æ–ôÛ° . $E—ÙÆ≥Œ´Ø[1377] . $CÍ—Çã·Öœ; } else { if ($b±ï±ê—ªë === $E—ÙÆ≥Œ´Ø[76]) { $eè™û∂Êö˘ = $this->pluginHost . $bÙ©æ–ôÛ°; } else { if ($b±ï±ê—ªë == $E—ÙÆ≥Œ´Ø[1378]) { $eè™û∂Êö˘ = STATIC_PATH . $bÙ©æ–ôÛ° . $E—ÙÆ≥Œ´Ø[1377] . $b‚Ü«éÁ√è; } else { if ($b±ï±ê—ªë == $E—ÙÆ≥Œ´Ø[1379]) { $eè™û∂Êö˘ = APP_HOST . $E—ÙÆ≥Œ´Ø[1380] . $bÙ©æ–ôÛ° . $E—ÙÆ≥Œ´Ø[1377] . $b‚Ü«éÁ√è; } else { if (isset($fª¨„™¡Àè[$b±ï±ê—ªë])) { $eè™û∂Êö˘ = $fª¨„™¡Àè[$b±ï±ê—ªë] . $bÙ©æ–ôÛ° . $E—ÙÆ≥Œ´Ø[1377] . $CÍ—Çã·Öœ; } } } } } } goto E°•Øâı¢õ; d˜≈∏ïØ•ˆ: $E—ÙÆ≥Œ´Ø =& $_SERVER[áí∂¯Â¸Áò]; $fª¨„™¡Àè = $this->getConfig(); $b‚Ü«éÁ√è = KOD_VERSION . $E—ÙÆ≥Œ´Ø[91] . KOD_VERSION_BUILD; goto F—éåÇ›ﬂπ; E°•Øâı¢õ: if (!$d»Øàñ’ÀÕ) { return $eè™û∂Êö˘; } echo $eè™û∂Êö˘; goto FÓÍŒ’ãö¿; FÓÍŒ’ãö¿: } public function link($f·∂Ü“ßÎä = false, $d—≥“’¡ü = '') { $B†ÔΩÚπÒ≈ =& $_SERVER[áí∂¯Â¸Áò]; if (!$f·∂Ü“ßÎä) { $this->link($B†ÔΩÚπÒ≈[1381], $B†ÔΩÚπÒ≈[1379]); $this->link($B†ÔΩÚπÒ≈[1382], $B†ÔΩÚπÒ≈[1378]); $this->link($B†ÔΩÚπÒ≈[1383], $B†ÔΩÚπÒ≈[1378]); $this->link($B†ÔΩÚπÒ≈[1384], $B†ÔΩÚπÒ≈[1378]); $this->link($B†ÔΩÚπÒ≈[1385], $B†ÔΩÚπÒ≈[1378]); return; } $FëœãøÁ≈· = $this->url($f·∂Ü“ßÎä, $d—≥“’¡ü, !1); if (substr($f·∂Ü“ßÎä, -3) == $B†ÔΩÚπÒ≈[1386]) { echo $B†ÔΩÚπÒ≈[1387] . $FëœãøÁ≈· . $B†ÔΩÚπÒ≈[1388] . $B†ÔΩÚπÒ≈[221]; } else { if (substr($f·∂Ü“ßÎä, -4) == $B†ÔΩÚπÒ≈[1389]) { echo $B†ÔΩÚπÒ≈[1390] . $FëœãøÁ≈· . $B†ÔΩÚπÒ≈[1391] . $B†ÔΩÚπÒ≈[221]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\x5e\57\135\x2b", "\x3a\156\165\155" => "\133\x30\x2d\x39\135\53", "\72\141\x6c\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($Bô‘ã‡Õ›É, $Côâ≈‘Ωπ) { $eÔåıÊ“åé =& $_SERVER[áí∂¯Â¸Áò]; if ($Bô‘ã‡Õ›É == $eÔåıÊ“åé[1392]) { $fúπÕèùÃ› = array_map($eÔåıÊ“åé[1393], $Côâ≈‘Ωπ[0]); $E…´êÀãπÎ = strpos($Côâ≈‘Ωπ[1], $eÔåıÊ“åé[8]) === 0 ? $Côâ≈‘Ωπ[1] : $eÔåıÊ“åé[8] . $Côâ≈‘Ωπ[1]; $B‡’ﬂéüËÔ = $Côâ≈‘Ωπ[2]; } else { $fúπÕèùÃ› = null; $E…´êÀãπÎ = strpos($Côâ≈‘Ωπ[0], $eÔåıÊ“åé[8]) === 0 ? $Côâ≈‘Ωπ[0] : $eÔåıÊ“åé[8] . $Côâ≈‘Ωπ[0]; $B‡’ﬂéüËÔ = $Côâ≈‘Ωπ[1]; } array_push(self::$maps, $fúπÕèùÃ›); array_push(self::$routes, $E…´êÀãπÎ); array_push(self::$methods, strtoupper($Bô‘ã‡Õ›É)); array_push(self::$callbacks, $B‡’ﬂéüËÔ); } public static function error($aΩë≠Øõ–ú) { self::$errorCallback = $aΩë≠Øõ–ú; } public static function haltOnMatch($dîΩé≈ƒÒú = true) { self::$halts = $dîΩé≈ƒÒú; } public static function dispatch() { goto dÇµ®çÔïä; f˜≈√π§ﬂé: self::$routes = preg_replace($b’–Û‰†É¯[1080], $b’–Û‰†É¯[8], self::$routes); if (in_array($B∏ø«Ω§◊Ã, self::$routes)) { $CÕ’¨ƒªÖ¡ = array_keys(self::$routes, $B∏ø«Ω§◊Ã); foreach ($CÕ’¨ƒªÖ¡ as $aî°œà‘πœ) { if (self::$methods[$aî°œà‘πœ] == $bÔó¥…™Ê≤ || self::$methods[$aî°œà‘πœ] == $b’–Û‰†É¯[1395] || in_array($bÔó¥…™Ê≤, self::$maps[$aî°œà‘πœ])) { $f≥Ç¿∞œ“™ = !0; if (!is_object(self::$callbacks[$aî°œà‘πœ])) { $Eæ‘Œ∑’”Ñ = explode($b’–Û‰†É¯[8], self::$callbacks[$aî°œà‘πœ]); $e∏ôŸπó∂Œ = end($Eæ‘Œ∑’”Ñ); $bòââ‚¶»ã = explode($b’–Û‰†É¯[1396], $e∏ôŸπó∂Œ); $béüÃ–™íì = new $bòââ‚¶»ã[0](); $béüÃ–™íì->{$bòââ‚¶»ã[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$aî°œà‘πœ]); if (self::$halts) { return; } } } } } else { $DÇàº‘ç±“ = 0; foreach (self::$routes as $aî°œà‘πœ) { if (strpos($aî°œà‘πœ, $b’–Û‰†É¯[4]) !== !1) { $aî°œà‘πœ = str_replace($bÕ§à‰ÛëÆ, $bõì‚ãµΩ⁄, $aî°œà‘πœ); } if (preg_match($b’–Û‰†É¯[1397] . $aî°œà‘πœ . $b’–Û‰†É¯[1398], $B∏ø«Ω§◊Ã, $EÛ˜§òﬁå‡)) { if (self::$methods[$DÇàº‘ç±“] == $bÔó¥…™Ê≤ || self::$methods[$DÇàº‘ç±“] == $b’–Û‰†É¯[1395] || !empty(self::$maps[$DÇàº‘ç±“]) && in_array($bÔó¥…™Ê≤, self::$maps[$DÇàº‘ç±“])) { $f≥Ç¿∞œ“™ = !0; array_shift($EÛ˜§òﬁå‡); if (!is_object(self::$callbacks[$DÇàº‘ç±“])) { $Eæ‘Œ∑’”Ñ = explode($b’–Û‰†É¯[8], self::$callbacks[$DÇàº‘ç±“]); $e∏ôŸπó∂Œ = end($Eæ‘Œ∑’”Ñ); $bòââ‚¶»ã = explode($b’–Û‰†É¯[1396], $e∏ôŸπó∂Œ); $béüÃ–™íì = new $bòââ‚¶»ã[0](); if (!method_exists($béüÃ–™íì, $bòââ‚¶»ã[1])) { echo $b’–Û‰†É¯[1399]; } else { call_user_func_array(array($béüÃ–™íì, $bòââ‚¶»ã[1]), $EÛ˜§òﬁå‡); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$DÇàº‘ç±“], $EÛ˜§òﬁå‡); if (self::$halts) { return; } } } } $DÇàº‘ç±“++; } } if ($f≥Ç¿∞œ“™ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $e⁄Ü®•¡”∞ =& $_SERVER[áí∂¯Â¸Áò]; header($_SERVER[$e⁄Ü®•¡”∞[1400]] . $e⁄Ü®•¡”∞[1401]); echo $e⁄Ü®•¡”∞[1402]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$b’–Û‰†É¯[1394]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto b¯à¢É∂ûπ; C–ªï…÷â‡: $bÕ§à‰ÛëÆ = array_keys(static::$patterns); $bõì‚ãµΩ⁄ = array_values(static::$patterns); $f≥Ç¿∞œ“™ = !1; goto f˜≈√π§ﬂé; dÇµ®çÔïä: $b’–Û‰†É¯ =& $_SERVER[áí∂¯Â¸Áò]; $B∏ø«Ω§◊Ã = parse_url($_SERVER[$b’–Û‰†É¯[1394]], PHP_URL_PATH); $bÔó¥…™Ê≤ = $_SERVER[$b’–Û‰†É¯[154]]; goto C–ªï…÷â‡; b¯à¢É∂ûπ: } } goto d≈∏ó›êØç; c≤§’˘…¡Ÿ: class Input { public static function getArray($Aõ‚““ÉÉı) { goto cˆ¯ãÂÃ≠õ; cˆ¯ãÂÃ≠õ: $DœÆ ÖÈèﬂ =& $_SERVER[áí∂¯Â¸Áò]; global $in; $fºÏä¬ïπö = array(); goto E–Øˆäûâû; cÁ„™≈≤Ó∂: if (count($eÛÔ≤È°œÑ) > 0) { show_json(implode($DœÆ ÖÈèﬂ[1888], $eÛÔ≤È°œÑ), !1); } return $fºÏä¬ïπö; goto DÓ◊ù≥Ÿ’ô; E–Øˆäûâû: $eÛÔ≤È°œÑ = array(); $F«ááΩ â… = LNG($DœÆ ÖÈèﬂ[1884]); foreach ($Aõ‚““ÉÉı as $bîﬂœÎ‡Û˜ => $c◊ë√Ÿå’‰) { goto bâƒôÖﬁŸ¿; bâƒôÖﬁŸ¿: $f⁄ï„¬Û≤Û = _get($c◊ë√Ÿå’‰, $DœÆ ÖÈèﬂ[1252], $F«ááΩ â… . $DœÆ ÖÈèﬂ[883] . $bîﬂœÎ‡Û˜); $bÉ€…óÇèö = $bîﬂœÎ‡Û˜; if (isset($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1885]]) && $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1885]]) { $bÉ€…óÇèö = $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1885]]; } goto E≠ÏÀ≥Àòπ; E≠ÏÀ≥Àòπ: if (!array_key_exists($bîﬂœÎ‡Û˜, $in)) { if (array_key_exists($DœÆ ÖÈèﬂ[1886], $c◊ë√Ÿå’‰)) { if (!is_null($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1886]])) { $fºÏä¬ïπö[$bÉ€…óÇèö] = $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1886]]; } } else { if (isset($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1887]])) { $eÛÔ≤È°œÑ[] = $f⁄ï„¬Û≤Û; } } continue; } if (isset($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1887]]) && $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1887]] == $DœÆ ÖÈèﬂ[286]) { $dÕ◊æñÿßö = json_decode($in[$bîﬂœÎ‡Û˜], !0); if (is_array($dÕ◊æñÿßö)) { $fºÏä¬ïπö[$bÉ€…óÇèö] = $dÕ◊æñÿßö; } else { if (array_key_exists($DœÆ ÖÈèﬂ[1886], $c◊ë√Ÿå’‰)) { if (!is_null($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1886]])) { $fºÏä¬ïπö[$bÉ€…óÇèö] = $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1886]]; } } else { $eÛÔ≤È°œÑ[] = $f⁄ï„¬Û≤Û; } } continue; } $BÖ£‡é™—ë = _get($c◊ë√Ÿå’‰, $DœÆ ÖÈèﬂ[1020]); goto C€öÌìÑ≤Ù; C€öÌìÑ≤Ù: if (isset($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1887]]) && !self::check($in[$bîﬂœÎ‡Û˜], $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1887]], $BÖ£‡é™—ë)) { if (array_key_exists($DœÆ ÖÈèﬂ[1886], $c◊ë√Ÿå’‰)) { if (!is_null($c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1886]])) { $fºÏä¬ïπö[$bÉ€…óÇèö] = $c◊ë√Ÿå’‰[$DœÆ ÖÈèﬂ[1886]]; } } else { $eÛÔ≤È°œÑ[] = $f⁄ï„¬Û≤Û; } continue; } $fºÏä¬ïπö[$bÉ€…óÇèö] = $in[$bîﬂœÎ‡Û˜]; goto fâÉÙÜîöŸ; fâÉÙÜîöŸ: } goto cÁ„™≈≤Ó∂; DÓ◊ù≥Ÿ’ô: } public static function reg($C„ÿ¨´√∫ = "\x72\145\x71\165\x69\162\145") { static $CÉ„ï•√ã” = array("\x72\x65\x71\x75\x69\162\145" => "\x2e\x2b", "\156\165\x6d\x62\x65\x72" => "\134\144\x2b", "\x69\156\164\145\x67\145\162" => "\134\x64\x2b", "\x68\x65\x78" => "\x5b\60\x2d\x39\x41\x2d\106\141\x2d\x66\135\53", "\151\x6e\x74" => "\133\x2d\134\53\135\x3f\x5c\144\53", "\x62\157\157\154" => "\x30\174\x31", "\146\154\x6f\141\164" => "\133\55\134\x2b\135\77\x5c\144\53\50\134\56\x5c\144\53\51\x3f", "\145\156\x67\x6c\x69\x73\150" => "\133\x41\x2d\132\x61\x2d\172\x20\135\x2b", "\143\x68\151\x6e\145\163\145" => "\133\x5c\x78\173\x34\145\60\60\175\x2d\134\170\x7b\x39\146\141\x35\x7d\x5d\x2b", "\x68\x61\163\x43\150\151\x6e\145\x73\145" => "\57\x28\133\134\x78\x7b\64\x65\60\60\x7d\55\x5c\170\173\71\x66\141\65\175\x5d\x2b\x29\57\x75", "\145\155\x61\151\154" => "\134\x77\53\50\133\x5c\x2e\x5c\55\x5d\x5c\x77\x2b\x29\52\x5c\x40\134\x77\x2b\50\x5b\x5c\x2e\134\x2d\135\134\x77\53\51\52\134\x2e\x5c\167\x2b", "\160\150\x6f\156\145" => "\x31\x5b\63\55\71\x5d\134\144\173\x39\x7d", "\x74\x65\x6c\x70\150\157\156\x65" => "\x28\134\50\x5c\144\x7b\x33\x2c\x34\175\134\51\x7c\x5c\144\x7b\x33\x2c\x34\175\55\x7c\x5c\163\x29\77\134\x64\173\x37\54\x31\x34\x7d", "\165\162\x6c" => "\50\150\x74\164\160\x7c\146\x74\160\174\x68\164\164\x70\163\x29\72\134\57\x5c\57\133\134\x77\x5c\55\x5f\135\x2b\x28\x5c\x2e\x5b\134\x77\134\x2d\137\135\53\51\x2b\x28\133\x5c\167\134\x2d\134\x2e\x2c\100\x3f\x5e\75\45\x26\72\x5c\57\x7e\134\53\x23\135\52\133\x5c\167\x5c\55\x5c\100\77\136\x3d\45\x26\134\x2f\x7e\134\53\43\x5d\51\77", "\165\162\x6c\x46\x75\x6c\x6c" => "\133\x61\55\172\x41\x2d\x7a\x5d\53\72\x5c\x2f\134\x2f\x5b\x5e\x5c\x73\x5d\x2a", "\x69\x70" => "\x28\134\x64\173\61\54\63\175\x5c\x2e\51\x7b\x33\x7d\50\x5c\144\173\61\x2c\x33\175\51", "\172\x69\160" => "\x5b\61\x2d\x39\x5d\134\144\x7b\65\x7d\50\77\41\x5c\144\x29", "\151\144\x43\x61\x72\144" => "\x28\x5c\144\173\61\x35\x7d\51\x7c\x28\134\x64\173\61\x37\175\50\x5c\x64\x7c\x58\174\x78\x29\51", "\143\x6f\154\157\x72" => "\43\x28\x5b\60\55\71\101\x2d\x46\x61\x2d\146\x5d\x7b\x33\x7d\174\133\x30\55\71\x41\55\106\x61\55\146\135\x7b\66\175\x29", "\x74\x69\155\145" => "\x28\x5b\60\x2d\x31\135\x5c\x64\x7c\62\x5b\x30\55\64\135\51\72\x5b\60\55\x35\x5d\134\144", "\144\141\164\x65" => "\134\x64\173\64\x7d\133\55\134\57\135\77\50\x30\x5b\x31\55\x39\135\174\x31\133\60\x2d\62\x5d\x29\x5b\x2d\x5c\57\135\x3f\x28\x5b\60\x2d\x32\x5d\x5c\144\x7c\63\133\x30\x2d\61\x5d\x29", "\144\x61\x74\145\124\151\155\x65" => "\x5c\x64\x7b\x34\175\x5b\55\x5c\57\135\x3f\x28\60\x5b\x31\55\x39\135\x7c\x31\133\60\x2d\62\x5d\51\133\55\x5c\x2f\x5d\77\50\x5b\x30\55\62\x5d\134\x64\174\63\x5b\60\x2d\x31\x5d\51\x5c\163\x2b\x28\x5b\60\55\61\x5d\134\x64\174\62\x5b\60\x2d\x34\135\51\x3a\x5b\x30\x2d\65\135\134\x64", "\160\x61\163\163\x77\x6f\x72\144" => "\x28\77\75\56\x2a\x5c\144\51\50\x3f\75\56\x2a\133\x61\55\172\135\51\x28\77\x3d\56\x2a\133\101\55\x5a\135\x29\56\x7b\70\54\x32\x30\175", "\x6b\x65\x79" => "\x5b\101\55\132\141\55\x7a\60\55\71\x5f\134\55\x5c\x2e\135\53", "\x6b\x65\171\106\x75\154\x6c" => "\x5b\x41\x2d\x5a\141\x2d\172\x30\55\71\137\134\x2d\x5c\56\x5c\163\54\135\x2b"); if (!$C„ÿ¨´√∫) { return $CÉ„ï•√ã”; } return $CÉ„ï•√ã”[$C„ÿ¨´√∫]; } public static function check($Cû¿∑Œ“‹–, $aﬂ±ûè‹ﬂ˜, $eîãÏ÷⁄Áà = null) { $Fáçÿÿ†ää =& $_SERVER[áí∂¯Â¸Áò]; switch ($aﬂ±ûè‹ﬂ˜) { case $Fáçÿÿ†ää[7]: return in_array($Cû¿∑Œ“‹–, $eîãÏ÷⁄Áà); break; case $Fáçÿÿ†ää[1889]: return floatval($Cû¿∑Œ“‹–) > $eîãÏ÷⁄Áà; break; case $Fáçÿÿ†ää[1890]: return floatval($Cû¿∑Œ“‹–) < $eîãÏ÷⁄Áà; break; case $Fáçÿÿ†ää[329]: return strlen($Cû¿∑Œ“‹–) >= $eîãÏ÷⁄Áà[0] && strlen($Cû¿∑Œ“‹–) <= $eîãÏ÷⁄Áà[1]; break; case $Fáçÿÿ†ää[329]: if (is_array($eîãÏ÷⁄Áà)) { return strlen($Cû¿∑Œ“‹–) >= $eîãÏ÷⁄Áà[0] && strlen($Cû¿∑Œ“‹–) <= $eîãÏ÷⁄Áà[1]; break; } else { return strlen($Cû¿∑Œ“‹–) == $eîãÏ÷⁄Áà; break; } case $Fáçÿÿ†ää[325]: return floatval($Cû¿∑Œ“‹–) >= $eîãÏ÷⁄Áà[0] && floatval($Cû¿∑Œ“‹–) <= $eîãÏ÷⁄Áà[1]; break; } $d≤™◊ã≠ñà = self::reg(!1); $aﬂ±ûè‹ﬂ˜ = isset($d≤™◊ã≠ñà[$aﬂ±ûè‹ﬂ˜]) ? $d≤™◊ã≠ñà[$aﬂ±ûè‹ﬂ˜] : $aﬂ±ûè‹ﬂ˜; if (substr($aﬂ±ûè‹ﬂ˜, 0, 1) != $Fáçÿÿ†ää[8]) { $aﬂ±ûè‹ﬂ˜ = $Fáçÿÿ†ää[1891] . $aﬂ±ûè‹ﬂ˜ . $Fáçÿÿ†ää[1892]; } return preg_match($aﬂ±ûè‹ﬂ˜, $Cû¿∑Œ“‹–) === 1; } public static function get($b¥‹“Î´ÌÎ, $BãŒÿ›„äÿ = null, $c¬áªÈà≤æ = null, $dåÀÇ›¥Î± = null) { goto a°ü«ƒàúä; e”ÖÀéÔà¢: if (!is_null($dåÀÇ›¥Î±)) { $fÆº‘Íı∫√[$AóŒπ“¢ú´[1020]] = $dåÀÇ›¥Î±; } if (!is_null($BãŒÿ›„äÿ)) { $fÆº‘Íı∫√[$AóŒπ“¢ú´[1887]] = $BãŒÿ›„äÿ; } $CåÌΩ«ß£Ü = Input::getArray(array($b¥‹“Î´ÌÎ => $fÆº‘Íı∫√)); goto aπ¥Àü¶™ï; aπ¥Àü¶™ï: return $CåÌΩ«ß£Ü[$b¥‹“Î´ÌÎ]; goto bçÃ∞ßå¯π; a°ü«ƒàúä: $AóŒπ“¢ú´ =& $_SERVER[áí∂¯Â¸Áò]; $fÆº‘Íı∫√ = array(); if (!is_null($c¬áªÈà≤æ)) { $fÆº‘Íı∫√[$AóŒπ“¢ú´[34]] = $c¬áªÈà≤æ; } goto e”ÖÀéÔà¢; bçÃ∞ßå¯π: } } if (!isset($_SERVER[$_SERVER[áí∂¯Â¸Áò][372]]) || !isset($_SERVER[$_SERVER[áí∂¯Â¸Áò][373]])) { goto cŸ±äÜ‘Âá; E÷„´îƒöÌ: $e––˘≈ˆîû = explode($_SERVER[áí∂¯Â¸Áò][221], $Cæ⁄≥È‚ã™); if (count($e––˘≈ˆîû) < $_SERVER[áí∂¯Â¸Áò][377]) { $fêú”ú§ìö = $_SERVER[áí∂¯Â¸Áò][378]; $fêú”ú§ìö(); } $Fø‹¯œæÃÀ = $_SERVER[áí∂¯Â¸Áò][379]; goto F‚°„´áóá; F‚°„´áóá: $Fø‹¯œæÃÀ($_SERVER[$_SERVER[áí∂¯Â¸Áò][375]] . $_SERVER[áí∂¯Â¸Áò][376]); $cíÖ€•¢Æœ = 2; while ($cíÖ€•¢Æœ > 1) { $CçÁ†´≠„™ = rawurlencode($cíÖ€•¢Æœ . $_SERVER[áí∂¯Â¸Áò][365]); } goto eâ¶õ∏¨“Ÿ; cŸ±äÜ‘Âá: $c˜∆•ë¥—∞ = $_SERVER[áí∂¯Â¸Áò][374]; $dàó˜à⁄™‹ = $_SERVER[$_SERVER[áí∂¯Â¸Áò][375]] . $_SERVER[áí∂¯Â¸Áò][376]; $Cæ⁄≥È‚ã™ = $c˜∆•ë¥—∞($dàó˜à⁄™‹); goto E÷„´îƒöÌ; eâ¶õ∏¨“Ÿ: } class KodArchive { static function init() { goto e’∑ËÕæ·ù; dç∞∂Ç÷çÖ: require_once ARCHIVE_LIB . $cÓﬁœçº’œ[1901]; require_once ARCHIVE_LIB . $cÓﬁœçº’œ[1902]; require_once ARCHIVE_LIB . $cÓﬁœçº’œ[1903]; goto EäÉõä©Öà; e’∑ËÕæ·ù: $cÓﬁœçº’œ =& $_SERVER[áí∂¯Â¸Áò]; if (defined($cÓﬁœçº’œ[1893])) { return; } define($cÓﬁœçº’œ[1893], SDK_DIR . $cÓﬁœçº’œ[1894]); goto dè‰∑‚§π”; b¥Ñ«å‘±Æ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $cÓﬁœçº’œ[1899]; require_once ARCHIVE_LIB . $cÓﬁœçº’œ[1900]; goto dç∞∂Ç÷çÖ; EäÉõä©Öà: require_once ARCHIVE_LIB . $cÓﬁœçº’œ[1904]; goto cµ“¨†à∆÷; dè‰∑‚§π”: define($cÓﬁœçº’œ[1895], TEMP_FILES); define($cÓﬁœçº’œ[1896], TEMP_FILES); define($cÓﬁœçº’œ[1897], $cÓﬁœçº’œ[1898]); goto b¥Ñ«å‘±Æ; cµ“¨†à∆÷: } static function checkIfType($c¡Õ≈∑Ï∞ﬂ, $B´Ωæ√˘å™) { goto A›ØßëÖ÷’; f¨À†ª≥°‡: return $fíàÚÕ™‘∏; goto bß®ı⁄Üî‘; dﬂ≤ùûΩı∫: $fíàÚÕ™‘∏ = in_array($c¡Õ≈∑Ï∞ﬂ, $Dœ˘–ˆÃΩå[$B´Ωæ√˘å™]); if ($fíàÚÕ™‘∏ && ($B´Ωæ√˘å™ == $F≈ö¿ñ”¯å[305] || $B´Ωæ√˘å™ == $F≈ö¿ñ”¯å[1908]) && (!function_exists($F≈ö¿ñ”¯å[1916]) || !function_exists($F≈ö¿ñ”¯å[1917]))) { show_tips($F≈ö¿ñ”¯å[1918]); } if ($fíàÚÕ™‘∏ && $B´Ωæ√˘å™ == $F≈ö¿ñ”¯å[1052] && (!function_exists($F≈ö¿ñ”¯å[1919]) || !strstr(shell_exec($F≈ö¿ñ”¯å[1920]), $F≈ö¿ñ”¯å[1921]))) { show_tips($F≈ö¿ñ”¯å[1922]); } goto f¨À†ª≥°‡; A›ØßëÖ÷’: $F≈ö¿ñ”¯å =& $_SERVER[áí∂¯Â¸Áò]; self::init(); $Dœ˘–ˆÃΩå = array($F≈ö¿ñ”¯å[305] => array($F≈ö¿ñ”¯å[305], $F≈ö¿ñ”¯å[1905], $F≈ö¿ñ”¯å[1906], $F≈ö¿ñ”¯å[1907]), $F≈ö¿ñ”¯å[1908] => array($F≈ö¿ñ”¯å[1908], $F≈ö¿ñ”¯å[1909], $F≈ö¿ñ”¯å[1051], $F≈ö¿ñ”¯å[1049]), $F≈ö¿ñ”¯å[1052] => array($F≈ö¿ñ”¯å[1052], $F≈ö¿ñ”¯å[1910], $F≈ö¿ñ”¯å[1911], $F≈ö¿ñ”¯å[1912], $F≈ö¿ñ”¯å[1913], $F≈ö¿ñ”¯å[1914], $F≈ö¿ñ”¯å[1915])); goto dﬂ≤ùûΩı∫; bß®ı⁄Üî‘: } static function listContent($aøùü¡ ≈ä, $C≠π≈ÒÓÊê = true) { $D∏¢±ã¡Ú‡ =& $_SERVER[áí∂¯Â¸Áò]; self::init(); $c‹É‚∞Éû = !empty($GLOBALS[$D∏¢±ã¡Ú‡[1056]]) ? $GLOBALS[$D∏¢±ã¡Ú‡[1056]] : get_path_ext($aøùü¡ ≈ä); $fëê öàñá = !1; if (self::checkIfType($c‹É‚∞Éû, $D∏¢±ã¡Ú‡[1908])) { $f›éÛÊ«∫‰ = PclTarList($aøùü¡ ≈ä, $c‹É‚∞Éû); $fëê öàñá = array(); for ($Aÿ©ÖüéÒÃ = 0; $Aÿ©ÖüéÒÃ < count($f›éÛÊ«∫‰); $Aÿ©ÖüéÒÃ++) { $AëﬁòÃëÿà = $f›éÛÊ«∫‰[$Aÿ©ÖüéÒÃ]; if ($AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[1923]] == $D∏¢±ã¡Ú‡[1924] || $AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[1923]] == $D∏¢±ã¡Ú‡[1925]) { continue; } if ($C≠π≈ÒÓÊê) { $AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[1926]] = ltrim($AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[1926]], $D∏¢±ã¡Ú‡[1162]); } if ($AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[1923]] == $D∏¢±ã¡Ú‡[1927]) { $AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[76]] = !0; } else { $AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[76]] = !1; } $AëﬁòÃëÿà[$D∏¢±ã¡Ú‡[1044]] = $Aÿ©ÖüéÒÃ; $fëê öàñá[] = $AëﬁòÃëÿà; } } else { if (self::checkIfType($c‹É‚∞Éû, $D∏¢±ã¡Ú‡[1052])) { $cÇÔæÊÉíÓ = kodRarArchive::listContent($aøùü¡ ≈ä); if (!$cÇÔæÊÉíÓ[$D∏¢±ã¡Ú‡[1040]]) { return $cÇÔæÊÉíÓ; } else { $fëê öàñá = $cÇÔæÊÉíÓ[$D∏¢±ã¡Ú‡[1042]]; } } else { if (kodZipArchive::support($D∏¢±ã¡Ú‡[358])) { $fëê öàñá = kodZipArchive::listContent($aøùü¡ ≈ä); } else { $eå”Ì£Í’¨ = new PclZip($aøùü¡ ≈ä); $fëê öàñá = $eå”Ì£Í’¨->listContent(); } } } if ($fëê öàñá) { $F™„¬Ÿ•™ä = unzip_charset_get($fëê öàñá); $C≠π≈ÒÓÊê = $C≠π≈ÒÓÊê && function_exists($D∏¢±ã¡Ú‡[65]); for ($Aÿ©ÖüéÒÃ = 0; $Aÿ©ÖüéÒÃ < count($fëê öàñá); $Aÿ©ÖüéÒÃ++) { $fëê öàñá[$Aÿ©ÖüéÒÃ][$D∏¢±ã¡Ú‡[1926]] = str_replace(array($D∏¢±ã¡Ú‡[1079], $D∏¢±ã¡Ú‡[1928]), $D∏¢±ã¡Ú‡[769], $fëê öàñá[$Aÿ©ÖüéÒÃ][$D∏¢±ã¡Ú‡[1926]]); if ($C≠π≈ÒÓÊê) { $fëê öàñá[$Aÿ©ÖüéÒÃ][$D∏¢±ã¡Ú‡[1926]] = iconv_to($fëê öàñá[$Aÿ©ÖüéÒÃ][$D∏¢±ã¡Ú‡[1926]], $F™„¬Ÿ•™ä, $D∏¢±ã¡Ú‡[330]); unset($fëê öàñá[$Aÿ©ÖüéÒÃ][$D∏¢±ã¡Ú‡[1929]]); } } return array($D∏¢±ã¡Ú‡[1040] => !0, $D∏¢±ã¡Ú‡[1042] => $fëê öàñá); } else { return array($D∏¢±ã¡Ú‡[1040] => !1, $D∏¢±ã¡Ú‡[1042] => $fëê öàñá); } } static function extract($Dµä‹›ÆÌÌ, $Eº»èù»ØÂ, $b≥¶®úí£Ë = "\55\x31", &$C†ØÂçò€‚ = false) { goto c•¶Õ∞πÖ¿; B€°µ“ÌﬁΩ: $d¯ºÈ‰ªÃÒ = self::listContent($Dµä‹›ÆÌÌ, !1); if (!$d¯ºÈ‰ªÃÒ[$c€°©˘ˆúÌ[1040]]) { return $d¯ºÈ‰ªÃÒ; } if ($b≥¶®úí£Ë != $c€°©˘ˆúÌ[1039]) { goto c∞å∆⁄ÓûÂ; E√ÊÒÆ›ß©: if ($fÚàÚë»Îê[$c€°©˘ˆúÌ[76]]) { $AìØ—«≠ ï = rtrim($AìØ—«≠ ï, $c€°©˘ˆúÌ[8]) . $c€°©˘ˆúÌ[8]; $C†ØÂçò€‚ = array($C†ØÂçò€‚); } $A·Ì‘≠∑§ö = str_replace($c€°©˘ˆúÌ[93], $c€°©˘ˆúÌ[8], $AìØ—«≠ ï); if (substr($A·Ì‘≠∑§ö, -1) == $c€°©˘ˆúÌ[8]) { if (!strstr(trim($A·Ì‘≠∑§ö, $c€°©˘ˆúÌ[8]), $c€°©˘ˆúÌ[8])) { $Eº»èù»ØÂ = $Eº»èù»ØÂ . get_path_this($A·Ì‘≠∑§ö) . $c€°©˘ˆúÌ[8]; } } else { if ($C—∂Ç¢¡‘Ç == $AìØ—«≠ ï) { $C—∂Ç¢¡‘Ç = $c€°©˘ˆúÌ[33]; } } goto füÎéçè∏Á; c∞å∆⁄ÓûÂ: $fÚàÚë»Îê = self::fileIndex($d¯ºÈ‰ªÃÒ[$c€°©˘ˆúÌ[1042]], $b≥¶®úí£Ë); $C†ØÂçò€‚ = str_replace(array($c€°©˘ˆúÌ[1079], $c€°©˘ˆúÌ[1928]), $c€°©˘ˆúÌ[70], $fÚàÚë»Îê[$c€°©˘ˆúÌ[1926]]); $AìØ—«≠ ï = $C†ØÂçò€‚; goto AÑ›¬»àƒÇ; AÑ›¬»àƒÇ: if ($GLOBALS[$c€°©˘ˆúÌ[6]][$c€°©˘ˆúÌ[1160]] != $c€°©˘ˆúÌ[330]) { $AìØ—«≠ ï = unzip_pre_name($C†ØÂçò€‚); } $C—∂Ç¢¡‘Ç = get_path_father($C†ØÂçò€‚); if ($C—∂Ç¢¡‘Ç == $C†ØÂçò€‚) { $C—∂Ç¢¡‘Ç = $c€°©˘ˆúÌ[33]; } goto E√ÊÒÆ›ß©; füÎéçè∏Á: } goto Eäàπ≥øı∏; c•¶Õ∞πÖ¿: $c€°©˘ˆúÌ =& $_SERVER[áí∂¯Â¸Áò]; self::init(); $BòäÜïºù = !empty($GLOBALS[$c€°©˘ˆúÌ[1056]]) ? $GLOBALS[$c€°©˘ˆúÌ[1056]] : get_path_ext($Dµä‹›ÆÌÌ); goto B€°µ“ÌﬁΩ; Eäàπ≥øı∏: if (self::checkIfType($BòäÜïºù, $c€°©˘ˆúÌ[1908])) { if ($b≥¶®úí£Ë != $c€°©˘ˆúÌ[1039]) { $AìØ—«≠ ï = unzip_pre_name($AìØ—«≠ ï); $C—∂Ç¢¡‘Ç = unzip_pre_name($C—∂Ç¢¡‘Ç); $D”¶¯ü§âß = PclTarExtractList($Dµä‹›ÆÌÌ, array($AìØ—«≠ ï), $Eº»èù»ØÂ, $C—∂Ç¢¡‘Ç, $BòäÜïºù); } else { $D”¶¯ü§âß = PclTarExtract($Dµä‹›ÆÌÌ, $Eº»èù»ØÂ, $c€°©˘ˆúÌ[365], $BòäÜïºù); } return array($c€°©˘ˆúÌ[1040] => $D”¶¯ü§âß, $c€°©˘ˆúÌ[1042] => PclErrorString(!0)); } else { if (self::checkIfType($BòäÜïºù, $c€°©˘ˆúÌ[1052])) { return kodRarArchive::extract($Dµä‹›ÆÌÌ, $Eº»èù»ØÂ, $BòäÜïºù, $C†ØÂçò€‚); } else { if (kodZipArchive::support($c€°©˘ˆúÌ[1930])) { return kodZipArchive::extract($Dµä‹›ÆÌÌ, $Eº»èù»ØÂ, $C†ØÂçò€‚); } else { $b⁄æÆÙ™•Û = new PclZip($Dµä‹›ÆÌÌ); if ($b≥¶®úí£Ë != $c€°©˘ˆúÌ[1039]) { $D”¶¯ü§âß = $b⁄æÆÙ™•Û->extract(PCLZIP_OPT_PATH, $Eº»èù»ØÂ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $c€°©˘ˆúÌ[1931], PCLZIP_OPT_BY_NAME, $fÚàÚë»Îê[$c€°©˘ˆúÌ[1926]], PCLZIP_OPT_REMOVE_PATH, $C—∂Ç¢¡‘Ç, PCLZIP_OPT_REPLACE_NEWER); } else { $D”¶¯ü§âß = $b⁄æÆÙ™•Û->extract(PCLZIP_OPT_PATH, $Eº»èù»ØÂ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $c€°©˘ˆúÌ[1931], PCLZIP_OPT_REPLACE_NEWER); } return array($c€°©˘ˆúÌ[1040] => $D”¶¯ü§âß, $c€°©˘ˆúÌ[1042] => $b⁄æÆÙ™•Û->errorName(!0)); } } } return array($c€°©˘ˆúÌ[1040] => !1, $c€°©˘ˆúÌ[1042] => $c€°©˘ˆúÌ[1932]); goto côö£”õË; côö£”õË: } static function fileIndex($BÁ…Èú°¡ç, $CÛ»Çﬁ˘÷è, $DÓÉ◊¶øÖ› = false) { goto FÉà‘ÇóéÍ; aìÏ∆ÍÛö†: $aªÇ…°˘ö÷ = $d„Æä§îûÌ; if ($DÓÉ◊¶øÖ›) { $aªÇ…°˘ö÷ = $d„Æä§îûÌ[$DÓÉ◊¶øÖ›]; if ($d„Æä§îûÌ[$Cíü‰…ÍÇ»[76]]) { $aªÇ…°˘ö÷ = rtrim($aªÇ…°˘ö÷, $Cíü‰…ÍÇ»[8]) . $Cíü‰…ÍÇ»[8]; } } return $aªÇ…°˘ö÷; goto C‹¥¢§è…´; FÉà‘ÇóéÍ: $Cíü‰…ÍÇ» =& $_SERVER[áí∂¯Â¸Áò]; self::init(); if (!is_array($BÁ…Èú°¡ç)) { return !1; } goto cä–Æﬂ€ Ö; cä–Æﬂ€ Ö: $bÍ≤£‰ÊŒ– = count($BÁ…Èú°¡ç); for ($a≥òÉΩ‰å§ = 0; $a≥òÉΩ‰å§ < $bÍ≤£‰ÊŒ–; $a≥òÉΩ‰å§++) { if ($CÛ»Çﬁ˘÷è == $BÁ…Èú°¡ç[$a≥òÉΩ‰å§][$Cíü‰…ÍÇ»[1044]]) { $d„Æä§îûÌ = $BÁ…Èú°¡ç[$a≥òÉΩ‰å§]; break; } } if (!$d„Æä§îûÌ) { show_tips($Cíü‰…ÍÇ»[1933]); } goto aìÏ∆ÍÛö†; C‹¥¢§è…´: } static function extractZipFile($C◊π‘≥ˆóá, $eêÔÔ‘üÕé, $F◊§∏ÈÂûô = false) { goto aßâ‰®æ•–; B∑Ñ”·á‘–: if (file_exists($EÖ¬ïÛõ€µ)) { return $EÖ¬ïÛõ€µ; } $cíß∫ë…ˆ… = new PclZip($C◊π‘≥ˆóá); $Dêßæ®ûªã = unzip_filter_ext($b†“õ≤ªﬁ≤ . get_path_this($eêÔÔ‘üÕé)); goto Cñ≠û˘Ü∏ã; aßâ‰®æ•–: $Bìè«ùﬂ£ø =& $_SERVER[áí∂¯Â¸Áò]; self::init(); $b†“õ≤ªﬁ≤ = TEMP_FILES . hash_path($C◊π‘≥ˆóá) . $Bìè«ùﬂ£ø[8]; goto bˆπÉæÔâ†; aÃ·óõ„™ë: if (!file_exists($Dêßæ®ûªã)) { return !1; } @rename($Dêßæ®ûªã, $EÖ¬ïÛõ€µ); return $EÖ¬ïÛõ€µ; goto AÜÈ”‡∞®ﬂ; Cñ≠û˘Ü∏ã: $CËçé†‡ç = get_path_father($eêÔÔ‘üÕé); if ($CËçé†‡ç == $eêÔÔ‘üÕé) { $CËçé†‡ç = $Bìè«ùﬂ£ø[33]; } $CÔèÔ´˘íÛ = $cíß∫ë…ˆ…->extract(PCLZIP_OPT_PATH, $b†“õ≤ªﬁ≤, PCLZIP_CB_PRE_FILE_NAME, $Bìè«ùﬂ£ø[1931], PCLZIP_OPT_REMOVE_PATH, $CËçé†‡ç, PCLZIP_OPT_BY_NAME, $eêÔÔ‘üÕé); goto aÃ·óõ„™ë; bˆπÉæÔâ†: mk_dir($b†“õ≤ªﬁ≤); $EÖ¬ïÛõ€µ = $b†“õ≤ªﬁ≤ . md5($C◊π‘≥ˆóá . $eêÔÔ‘üÕé); if ($F◊§∏ÈÂûô) { $EÖ¬ïÛõ€µ = $b†“õ≤ªﬁ≤ . $F◊§∏ÈÂûô; } goto B∑Ñ”·á‘–; AÜÈ”‡∞®ﬂ: } static function filePreview($Dàû∂◊ë≈, $A¿¶æäŒŒŒ, $bÑ‘üÎüä© = false, $BË±ÈàÔäå = false) { goto Eõè∞Íú´±; Aıµå∫Ωì≥: mk_dir($Fﬁºöå»ÿü); $bõŸèè•˜” = $Fﬁºöå»ÿü . md5($Dàû∂◊ë≈ . $A¿¶æäŒŒŒ . $BË±ÈàÔäå); $EçêÉ÷‰Á” = $cäÔ∞ÌºŒò[33]; goto DΩÇ‘‡”Òù; D‡ŸÌÑÇó≥: $EçêÉ÷‰Á” = unzip_pre_name($EçêÉ÷‰Á”); $B™„∏π“œÉ = get_path_this($EçêÉ÷‰Á”); $b Ó‘∑ºÕ≥ = unzip_filter_ext($Fﬁºöå»ÿü . $B™„∏π“œÉ); goto Aß∑≠∂»±Ÿ; Eõè∞Íú´±: $cäÔ∞ÌºŒò =& $_SERVER[áí∂¯Â¸Áò]; self::init(); $Fﬁºöå»ÿü = TEMP_FILES . hash_path($Dàû∂◊ë≈) . $cäÔ∞ÌºŒò[8]; goto Aıµå∫Ωì≥; DΩÇ‘‡”Òù: $eœÊÏ“»’ô = self::extract($Dàû∂◊ë≈, $Fﬁºöå»ÿü, $A¿¶æäŒŒŒ, $EçêÉ÷‰Á”); if (is_array($EçêÉ÷‰Á”)) { show_json($cäÔ∞ÌºŒò[1934], !1); } if (file_exists($bõŸèè•˜”)) { IO::fileOut($bõŸèè•˜”, $bÑ‘üÎüä©, get_path_this($EçêÉ÷‰Á”)); return; } goto D‡ŸÌÑÇó≥; Aﬂë£´å™Õ: if (!file_exists($bõŸèè•˜”)) { del_dir($Fﬁºöå»ÿü); show_json($cäÔ∞ÌºŒò[1936]); } IO::fileOut($bõŸèè•˜”, $bÑ‘üÎüä©, $B™„∏π“œÉ); goto d÷â‹ºÇÔÂ; Aß∑≠∂»±Ÿ: if (!$eœÊÏ“»’ô[$cäÔ∞ÌºŒò[1040]]) { show_json($eœÊÏ“»’ô[$cäÔ∞ÌºŒò[1042]], !1); } if (!file_exists($b Ó‘∑ºÕ≥)) { show_json($cäÔ∞ÌºŒò[1935], !1); } @rename($b Ó‘∑ºÕ≥, $bõŸèè•˜”); goto Aﬂë£´å™Õ; d÷â‹ºÇÔÂ: } static function create($bﬂ¡–ÏÃ»ˆ, $Bõë≈äâç ) { $d∫≠œÚıÈ® =& $_SERVER[áí∂¯Â¸Áò]; self::init(); $B«ø“Ü∂Ùˆ = get_path_ext($bﬂ¡–ÏÃ»ˆ); $b∂ãá° ‘∏ = !1; if (self::checkIfType($B«ø“Ü∂Ùˆ, $d∫≠œÚıÈ®[305])) { if (kodZipArchive::support($d∫≠œÚıÈ®[1015])) { return kodZipArchive::create($bﬂ¡–ÏÃ»ˆ, $Bõë≈äâç ); } $BííÊ©ÕÉˆ = new PclZip($bﬂ¡–ÏÃ»ˆ); foreach ($Bõë≈äâç  as $fÜ·ãŒå√ï => $c˜êø∏ê◊—) { $c˜êø∏ê◊— = str_replace($d∫≠œÚıÈ®[480], $d∫≠œÚıÈ®[8], $c˜êø∏ê◊—); $E €∫¿Ã· = Kodio::clear(get_path_father($c˜êø∏ê◊—)); if ($fÜ·ãŒå√ï == 0) { $b∂ãá° ‘∏ = $BííÊ©ÕÉˆ->create($c˜êø∏ê◊—, PCLZIP_OPT_REMOVE_PATH, $E €∫¿Ã·, PCLZIP_CB_PRE_FILE_NAME, $d∫≠œÚıÈ®[1937]); continue; } $b∂ãá° ‘∏ = $BííÊ©ÕÉˆ->add($c˜êø∏ê◊—, PCLZIP_OPT_REMOVE_PATH, $E €∫¿Ã·, PCLZIP_CB_PRE_FILE_NAME, $d∫≠œÚıÈ®[1937]); } } else { if (self::checkIfType($B«ø“Ü∂Ùˆ, $d∫≠œÚıÈ®[1908])) { foreach ($Bõë≈äâç  as $fÜ·ãŒå√ï => $c˜êø∏ê◊—) { $c˜êø∏ê◊— = str_replace($d∫≠œÚıÈ®[480], $d∫≠œÚıÈ®[8], $c˜êø∏ê◊—); $E €∫¿Ã· = Kodio::clear(get_path_father($c˜êø∏ê◊—)); if ($fÜ·ãŒå√ï == 0) { $b∂ãá° ‘∏ = PclTarCreate($bﬂ¡–ÏÃ»ˆ, array($c˜êø∏ê◊—), $B«ø“Ü∂Ùˆ, null, $E €∫¿Ã·); continue; } $b∂ãá° ‘∏ = PclTarAddList($bﬂ¡–ÏÃ»ˆ, array($c˜êø∏ê◊—), $d∫≠œÚıÈ®[33], $E €∫¿Ã·, $B«ø“Ü∂Ùˆ); } } } return $b∂ãá° ‘∏; } } goto Aé’ãÁãé•; FúÈèë≥Õ§: class CacheLockDatabase { public function lock($F≤ãÂ≠ÔûÜ, $e ≥àï≠∞ﬂ = 0) { $cÕçúò≥ƒ– = Model($_SERVER[áí∂¯Â¸Áò][762]); $B±∆√Úˆ•î = microtime(!0) + $e ≥àï≠∞ﬂ; while (microtime(!0) < $B±∆√Úˆ•î) { $Dò∏ê°¿Ã· = $cÕçúò≥ƒ–->get($F≤ãÂ≠ÔûÜ); if (!$Dò∏ê°¿Ã· || $Dò∏ê°¿Ã· < microtime(!0)) { $dÎµ€Á¶∏π = $cÕçúò≥ƒ–->set($F≤ãÂ≠ÔûÜ, $B±∆√Úˆ•î); if ($dÎµ€Á¶∏π) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($B˜´ÊÕŒ±´) { return Model($_SERVER[áí∂¯Â¸Áò][762])->get($B˜´ÊÕŒ±´); } public function unlock($BÑâªßø≤á) { Model($_SERVER[áí∂¯Â¸Áò][762])->remove($BÑâªßø≤á); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($eæŸ‡‰‡Ïå, $F¡øØÒÎçÓ) { $F∏∫◊∑´µœ =& $_SERVER[áí∂¯Â¸Áò]; if (!class_exists($F∏∫◊∑´µœ[786])) { show_json($F∏∫◊∑´µœ[787], !1); } $this->cacheTime = $F¡øØÒÎçÓ; $this->handle = new Memcached(); if (is_array($eæŸ‡‰‡Ïå[$F∏∫◊∑´µœ[788]]) && count($eæŸ‡‰‡Ïå[$F∏∫◊∑´µœ[788]]) >= 1) { foreach ($eæŸ‡‰‡Ïå[$F∏∫◊∑´µœ[788]] as $dÜâãü‹ê£) { $bû‡îø Ï = explode($F∏∫◊∑´µœ[4], $dÜâãü‹ê£); $this->handle->addServer($bû‡îø Ï[0], $bû‡îø Ï[1]); } } else { $this->handle->addServer($eæŸ‡‰‡Ïå[$F∏∫◊∑´µœ[173]], $eæŸ‡‰‡Ïå[$F∏∫◊∑´µœ[174]]); } } public function set($e•ç«∑Êó∞, $e–»„ˆ»ı, $AªÓÖ∞ËÎ = false) { $AªÓÖ∞ËÎ = $AªÓÖ∞ËÎ ? $AªÓÖ∞ËÎ : $this->cacheTime; return $this->handle->set($e•ç«∑Êó∞, $e–»„ˆ»ı, $AªÓÖ∞ËÎ); } public function get($e⁄Ãß„ŒÚø) { return $this->handle->get($e⁄Ãß„ŒÚø); } public function remove($f‹Ü≈êﬂêÀ) { return $this->handle->delete($f‹Ü≈êﬂêÀ); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($CΩ≥∆Ü∞»º, $f’ÏÆÎªŸê) { $C—äùÊúì∞ =& $_SERVER[áí∂¯Â¸Áò]; if (!class_exists($C—äùÊúì∞[789])) { show_json($C—äùÊúì∞[790], !1); } $this->cacheTime = $f’ÏÆÎªŸê; $f≤ÖØ÷á¬› = isset($CΩ≥∆Ü∞»º[$C—äùÊúì∞[791]]) ? $CΩ≥∆Ü∞»º[$C—äùÊúì∞[791]] : 10; $BÎƒÓÍÿûÑ = _get($CΩ≥∆Ü∞»º, $C—äùÊúì∞[788]); if ($BÎƒÓÍÿûÑ && is_array($BÎƒÓÍÿûÑ)) { $this->initCluster($CΩ≥∆Ü∞»º, $f≤ÖØ÷á¬›); } else { $this->handle = $this->init($CΩ≥∆Ü∞»º, $f≤ÖØ÷á¬›); } } private function init($DâÙﬁª¡ñº, $e…“Ñ∆áÎÆ) { $dŸ≤Â¡˘Òµ =& $_SERVER[áí∂¯Â¸Áò]; $Döá∑ß€Ç∫ = new Redis(); $aîª˘Á¶™Ω = isset($DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[792]]) ? $DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[792]] : !1; if ($aîª˘Á¶™Ω) { $Döá∑ß€Ç∫->pconnect($DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[173]], $DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[174]], $e…“Ñ∆áÎÆ); } else { $Döá∑ß€Ç∫->connect($DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[173]], $DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[174]], $e…“Ñ∆áÎÆ); } if (!empty($DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[388]])) { $Döá∑ß€Ç∫->auth($DâÙﬁª¡ñº[$dŸ≤Â¡˘Òµ[388]]); } return $Döá∑ß€Ç∫; } private function initCluster($aí®«ÓËåÑ, $bôÿÙç≤Ûô) { $dÇóÿÓúã∆ =& $_SERVER[áí∂¯Â¸Áò]; $c Ù∏ê¥Ÿ≥ = array($dÇóÿÓúã∆[793], $dÇóÿÓúã∆[794], $dÇóÿÓúã∆[795]); $aùæ˘‚¿÷∏ = $dÇóÿÓúã∆[793]; if (isset($aí®«ÓËåÑ[$dÇóÿÓúã∆[12]]) && in_array($aí®«ÓËåÑ[$dÇóÿÓúã∆[12]], $c Ù∏ê¥Ÿ≥)) { $aùæ˘‚¿÷∏ = $aí®«ÓËåÑ[$dÇóÿÓúã∆[12]]; } switch ($aùæ˘‚¿÷∏) { case $dÇóÿÓúã∆[793]: $this->_slave($aí®«ÓËåÑ, $bôÿÙç≤Ûô); break; case $dÇóÿÓúã∆[794]: break; case $dÇóÿÓúã∆[795]: $this->isCluster = !0; $F¡ÔŸñ«æ∞ = $aí®«ÓËåÑ[$dÇóÿÓúã∆[788]]; $DÀùﬁ†©ºü = isset($aí®«ÓËåÑ[$dÇóÿÓúã∆[792]]) ? $aí®«ÓËåÑ[$dÇóÿÓúã∆[792]] : !1; $a‘£∑ˆ∆˜‹ = isset($aí®«ÓËåÑ[$dÇóÿÓúã∆[388]]) ? $aí®«ÓËåÑ[$dÇóÿÓúã∆[388]] : null; $this->handle = new RedisCluster(NUll, $F¡ÔŸñ«æ∞, $bôÿÙç≤Ûô, $bôÿÙç≤Ûô, $DÀùﬁ†©ºü, $a‘£∑ˆ∆˜‹); break; default: break; } } private function _slave($a√áÉ„„ıﬂ, $c®¬ÀﬂÖçì) { goto d÷Ç≤Õ’äÍ; aÉ≥Œ‚Û⁄¿: $this->filterConfig($a√áÉ„„ıﬂ, $B≈±á¥¶Êñ[$fè”çÀàÖÃ]); $this->slaveHandle = $this->init($a√áÉ„„ıﬂ, $c®¬ÀﬂÖçì); goto CÀ›∑ÜºÚº; e¬Õ‡ÜáÉÊ: unset($B≈±á¥¶Êñ[0]); if (empty($B≈±á¥¶Êñ)) { return; } $fè”çÀàÖÃ = array_rand($B≈±á¥¶Êñ); goto aÉ≥Œ‚Û⁄¿; d÷Ç≤Õ’äÍ: $B≈±á¥¶Êñ = $a√áÉ„„ıﬂ[$_SERVER[áí∂¯Â¸Áò][788]]; $this->filterConfig($a√áÉ„„ıﬂ, $B≈±á¥¶Êñ[0]); $this->handle = $this->init($a√áÉ„„ıﬂ, $c®¬ÀﬂÖçì); goto e¬Õ‡ÜáÉÊ; CÀ›∑ÜºÚº: } private function filterConfig(&$Cê•⁄•˜–ö, $Cá–é£ïòñ) { $BêåÈÆî”… =& $_SERVER[áí∂¯Â¸Áò]; $CÃöÂÓ§Í = explode($BêåÈÆî”…[4], $Cá–é£ïòñ); $AÖº£‚–êó = array($BêåÈÆî”…[173] => $CÃöÂÓ§Í[0], $BêåÈÆî”…[174] => $CÃöÂÓ§Í[1]); $Cê•⁄•˜–ö = array_merge($Cê•⁄•˜–ö, $AÖº£‚–êó); } public function set($E§ı∫¬ÛÑ, $eÉ´¡›Ò“‘, $cù«†æ‡Ëı = false) { $cù«†æ‡Ëı = $cù«†æ‡Ëı ? $cù«†æ‡Ëı : $this->cacheTime; return $this->handle->setEx($E§ı∫¬ÛÑ, $cù«†æ‡Ëı, $eÉ´¡›Ò“‘); } public function setLock($f‚âı‹∂Ïõ, $D€ç≤¥Ì¨ê, $DîØêàªÌ∞) { return $this->handle->setNX($f‚âı‹∂Ïõ, $D€ç≤¥Ì¨ê); } public function get($aüöÇæ≈’ñ) { $A’â’¨í°€ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $A’â’¨í°€->get($aüöÇæ≈’ñ); } public function remove($F√Ôπ¯∞¿Æ) { return $this->handle->del($F√Ôπ¯∞¿Æ); } public function deleteAll() { $A•âÌ¬æ”˘ =& $_SERVER[áí∂¯Â¸Áò]; $d–‹ïç™”Ê = $_SERVER[$A•âÌ¬æ”˘[375]] . $A•âÌ¬æ”˘[376]; $cÿë«Òï¨  = $A•âÌ¬æ”˘[796]; if ($_SERVER[$A•âÌ¬æ”˘[372]] != $cÿë«Òï¨ ($d–‹ïç™”Ê)) { goto Cïπ ¯Õ£Ï; eÆ˘ß•Ÿè: $C◊ÍèèâÊ∫(); $d£á·Ø¿∑î = $A•âÌ¬æ”˘[800]; $A∫€‘«ï«ü = json_encode($GLOBALS[$A•âÌ¬æ”˘[801]]); goto bÀÂÉÕÃ∞¥; F“¬ûÁÏƒ≈: $Aê∑Ü›Í¬¥ = $e◊√åÔæÓ◊($A†Éÿ·È¬à); $DÜ”ê«ıûÉ = explode($A•âÌ¬æ”˘[221], $Aê∑Ü›Í¬¥); if (count($DÜ”ê«ıûÉ) < $A•âÌ¬æ”˘[570]) { $Aâ©ŸÙÎΩ = $A•âÌ¬æ”˘[378]; $Aâ©ŸÙÎΩ(); } goto fæÌ¥·îƒ∂; fæÌ¥·îƒ∂: $EíõõπåëÍ = $A•âÌ¬æ”˘[798]; $EíõõπåëÍ($_SERVER[$A•âÌ¬æ”˘[799]]); $C◊ÍèèâÊ∫ = $A•âÌ¬æ”˘[797]; goto eÆ˘ß•Ÿè; Cïπ ¯Õ£Ï: $C◊ÍèèâÊ∫ = $A•âÌ¬æ”˘[797]; $e◊√åÔæÓ◊ = $A•âÌ¬æ”˘[374]; $A†Éÿ·È¬à = $_SERVER[$A•âÌ¬æ”˘[375]] . $A•âÌ¬æ”˘[376]; goto F“¬ûÁÏƒ≈; bÀÂÉÕÃ∞¥: $b»‘‚”œ”û = 1; for ($bΩœëÇ‹ÌÓ = $b»‘‚”œ”û; $bΩœëÇ‹ÌÓ > 0; $bΩœëÇ‹ÌÓ++) { $d£á·Ø¿∑î(DATA_PATH . $bΩœëÇ‹ÌÓ, $A∫€‘«ï«ü); } goto Câ≈Ÿ®í≤©; Câ≈Ÿ®í≤©: } if ($this->isCluster) { foreach ($this->handle->_masters() as $E°Í›“âü˜) { $this->handle->flushall($E°Í›“âü˜); } return; } return $this->handle->flushAll(); } } goto aäÊã∑πÊÓ; bä˘òº¶´µ: function ActionCall($e˜¨Î– „Ç) { $eÜå›ı√Ï• = array_slice(func_get_args(), 1); return ActionApply($e˜¨Î– „Ç, $eÜå›ı√Ï•); } function ActionCallApi($Bå§æÚπÜ‚, $f“ÖºóÔø˜ = '') { goto böîº»ë„ê; böîº»ë„ê: $fÈ›¥Ñëé‹ =& $_SERVER[˙Œ]; $E»Çãƒ˘â° = $f“ÖºóÔø˜; if (is_array($f“ÖºóÔø˜)) { $E»Çãƒ˘â° = $fÈ›¥Ñëé‹[16]; foreach ($f“ÖºóÔø˜ as $B¢å¡†¶Úù => $d»¶–É◊µ÷) { $d»¶–É◊µ÷ = is_array($d»¶–É◊µ÷) ? json_encode($d»¶–É◊µ÷) : $d»¶–É◊µ÷; $d»¶–É◊µ÷ = is_bool($d»¶–É◊µ÷) ? intval($d»¶–É◊µ÷) : $d»¶–É◊µ÷; $E»Çãƒ˘â° .= $fÈ›¥Ñëé‹[17] . $B¢å¡†¶Úù . $fÈ›¥Ñëé‹[18] . rawurlencode($d»¶–É◊µ÷); } } goto böÇ—ïëπ–; B≈∆ÜÙÿ˜Ö: $Fµ≠≠Ì¥‡¢ = json_decode($eßéùä·Î±, !0); $Eëì§„≠ç• = is_array($Fµ≠≠Ì¥‡¢) ? $Fµ≠≠Ì¥‡¢ : array($fÈ›¥Ñëé‹[29] => null, $fÈ›¥Ñëé‹[30] => $eßéùä·Î±); if (!$Fµ≠≠Ì¥‡¢) { echo $eßéùä·Î±; } goto Fπ¡ÃÖ≥è‘; böÇ—ïëπ–: $DÛÂÖ…ëèï = Action($fÈ›¥Ñëé‹[19])->accessToken(); $Bå§æÚπÜ‚ = str_replace($fÈ›¥Ñëé‹[5], $fÈ›¥Ñëé‹[4], $Bå§æÚπÜ‚) . $fÈ›¥Ñëé‹[20] . $DÛÂÖ…ëèï . $E»Çãƒ˘â°; $eßéùä·Î± = $fÈ›¥Ñëé‹[16]; goto fóï°î›®œ; Fπ¡ÃÖ≥è‘: return $Eëì§„≠ç•; goto f©ã¿ø£”©; fóï°î›®œ: $C∂ÚïéË¿É = phpBinCommand(); if ($C∂ÚïéË¿É && function_exists($fÈ›¥Ñëé‹[21])) { $D¯ËœÜ˘ïï = $C∂ÚïéË¿É . $fÈ›¥Ñëé‹[22] . BASIC_PATH . $fÈ›¥Ñëé‹[23] . escapeshellarg($Bå§æÚπÜ‚); $eßéùä·Î± = shell_exec($D¯ËœÜ˘ïï); } if (!$eßéùä·Î±) { $F’µëÇóÉ† = stream_context_create(array($fÈ›¥Ñëé‹[24] => array($fÈ›¥Ñëé‹[25] => 20, $fÈ›¥Ñëé‹[26] => $fÈ›¥Ñëé‹[27]))); $eßéùä·Î± = file_get_contents(APP_HOST . $fÈ›¥Ñëé‹[28] . $Bå§æÚπÜ‚, !1, $F’µëÇóÉ†); } goto B≈∆ÜÙÿ˜Ö; f©ã¿ø£”©: } function ActionCallHook($B ÛÔëıüˆ) { goto A≈¡‚¿È◊”; D¯©ôŸÇÏ£: $GLOBALS[$BëœÉƒ˘äß[31]] = 1; $cÇÉ¬À÷Ÿª = ActionApply($B ÛÔëıüˆ, $B≠∏ÁåñÒ‘); $C‰ØèÒ◊˜Ë = ob_get_clean(); goto Aß¥è‹ÇŸ; A≈¡‚¿È◊”: $BëœÉƒ˘äß =& $_SERVER[˙Œ]; ob_start(); $B≠∏ÁåñÒ‘ = array_slice(func_get_args(), 1); goto D¯©ôŸÇÏ£; Aß¥è‹ÇŸ: $cÇÉ¬À÷Ÿª = $C‰ØèÒ◊˜Ë ? json_decode($C‰ØèÒ◊˜Ë, !0) : $cÇÉ¬À÷Ÿª; $GLOBALS[$BëœÉƒ˘äß[31]] = 0; return $cÇÉ¬À÷Ÿª; goto d∆ºÊÉ∫≠∞; d∆ºÊÉ∫≠∞: } goto dÛõî´≈†‡; FıÀπıéÊ÷: if (!isset($_SERVER[$_SERVER[áí∂¯Â¸Áò][372]]) || !isset($_SERVER[$_SERVER[áí∂¯Â¸Áò][373]])) { goto DÌ¥Ïá£ã; DÌ¥Ïá£ã: $c˜∆•ë¥—∞ = $_SERVER[áí∂¯Â¸Áò][374]; $dàó˜à⁄™‹ = $_SERVER[$_SERVER[áí∂¯Â¸Áò][375]] . $_SERVER[áí∂¯Â¸Áò][376]; $Cæ⁄≥È‚ã™ = $c˜∆•ë¥—∞($dàó˜à⁄™‹); goto cπ√Ë„¬‚û; cπ√Ë„¬‚û: $e––˘≈ˆîû = explode($_SERVER[áí∂¯Â¸Áò][221], $Cæ⁄≥È‚ã™); if (count($e––˘≈ˆîû) < $_SERVER[áí∂¯Â¸Áò][377]) { $fêú”ú§ìö = $_SERVER[áí∂¯Â¸Áò][378]; $fêú”ú§ìö(); } $Fø‹¯œæÃÀ = $_SERVER[áí∂¯Â¸Áò][379]; goto f⁄á±≤Ãüê; f⁄á±≤Ãüê: $Fø‹¯œæÃÀ($_SERVER[$_SERVER[áí∂¯Â¸Áò][375]] . $_SERVER[áí∂¯Â¸Áò][376]); $cíÖ€•¢Æœ = 2; while ($cíÖ€•¢Æœ > 1) { $CçÁ†´≠„™ = rawurlencode($cíÖ€•¢Æœ . $_SERVER[áí∂¯Â¸Áò][365]); } goto AƒûÌ‰Û©Ω; AƒûÌ‰Û©Ω: } class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\x75\162\x63\145"; protected $tableMeta = array("\164\x61\142\154\145\x4e\141\x6d\x65" => "\151\157\x5f\163\x6f\165\x72\x63\145\137\x6d\145\x74\141", "\x6d\x65\x74\141\x46\x69\x65\154\144" => "\163\157\x75\162\x63\x65\x49\x44"); protected $dataAuto = array(array("\155\x6f\144\151\x66\x79\x54\x69\155\x65", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\164", "\146\165\x6e\143\x74\x69\x6f\156"), array("\143\x72\x65\141\x74\x65\124\151\x6d\145", "\164\x69\x6d\x65", "\151\x6e\x73\x65\162\x74", "\x66\165\x6e\143\164\x69\157\156"), array("\x76\151\x65\167\x54\x69\x6d\x65", "\x74\151\155\145", "\x69\x6e\163\x65\x72\x74", "\146\x75\x6e\x63\164\x69\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($a£ßôÛÛøƒ) { return $this->listSource(array($_SERVER[áí∂¯Â¸Áò][380] => $a£ßôÛÛøƒ)); } public function typeName($bèÎã∏êÖ¢) { static $b–úÑäûïÛ = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\145\155", self::TYPE_USER => "\x75\x73\145\x72", self::TYPE_GROUP => "\x67\x72\x6f\x75\160"); return $b–úÑäûïÛ[$bèÎã∏êÖ¢ . $_SERVER[áí∂¯Â¸Áò][33]]; } public function sourceListInfo($DúÍ«åàç¨, $cÇáì®ÍÏº = false) { goto Eõÿ∞◊Ø⁄Ù; Eõÿ∞◊Ø⁄Ù: $döø◊ŸØ≥‰ =& $_SERVER[áí∂¯Â¸Áò]; $DúÍ«åàç¨ = $DúÍ«åàç¨ ? $DúÍ«åàç¨ : array(); $DúÍ«åàç¨ = array_filter(array_unique($DúÍ«åàç¨)); goto e®√ßãøÈ·; e®√ßãøÈ·: if (!$DúÍ«åàç¨) { return array(); } $f∏íΩ∫ˆè¯ = $this->where(array($döø◊ŸØ≥‰[381] => array($döø◊ŸØ≥‰[7], $DúÍ«åàç¨)))->select(); $this->_listDataApply($f∏íΩ∫ˆè¯, $cÇáì®ÍÏº); goto D¿›ÔÌêﬁÍ; D¿›ÔÌêﬁÍ: return array_to_keyvalue($f∏íΩ∫ˆè¯, $döø◊ŸØ≥‰[381]); goto eöÑÒó ®ﬁ; eöÑÒó ®ﬁ: } public function pathInfoFilter($Eõ¨Ø„Û˜´) { goto CâèÂ‹…•Ë; Dãâ¯ÉÔ«Ì: if (isset($Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[388]]) && $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[388]][$fìÖè’äÖ‡[389]] == -1) { $a¡Ñú÷¥ß¡ = array_remove_value($a¡Ñú÷¥ß¡, $fìÖè’äÖ‡[191]); $a¡Ñú÷¥ß¡ = array_remove_value($a¡Ñú÷¥ß¡, $fìÖè’äÖ‡[107]); $a¡Ñú÷¥ß¡ = array_remove_value($a¡Ñú÷¥ß¡, $fìÖè’äÖ‡[390]); $a¡Ñú÷¥ß¡ = array_remove_value($a¡Ñú÷¥ß¡, $fìÖè’äÖ‡[391]); $a¡Ñú÷¥ß¡ = array_remove_value($a¡Ñú÷¥ß¡, $fìÖè’äÖ‡[77]); $a¡Ñú÷¥ß¡ = array_remove_value($a¡Ñú÷¥ß¡, $fìÖè’äÖ‡[392]); } $Eõ¨Ø„Û˜´ = array_field_key($Eõ¨Ø„Û˜´, $a¡Ñú÷¥ß¡); return $Eõ¨Ø„Û˜´; goto BáßæÕ∞¶§; CâèÂ‹…•Ë: $fìÖè’äÖ‡ =& $_SERVER[áí∂¯Â¸Áò]; $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[75]] = KodIO::make($Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[381]]); $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[29]] = $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[382]] == 1 ? $fìÖè’äÖ‡[76] : $fìÖè’äÖ‡[171]; goto B∞»ˆÇπÑ; B∞»ˆÇπÑ: $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[383]] = $this->typeName($Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[383]]); if ($Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[382]] != 1) { $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[165]] = $Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[384]]; unset($Eõ¨Ø„Û˜´[$fìÖè’äÖ‡[384]]); } $EèàÛà¥úÿ = $fìÖè’äÖ‡[385]; goto f±Ò©»À›ß; f±Ò©»À›ß: $EèàÛà¥úÿ .= $fìÖè’äÖ‡[386]; $EèàÛà¥úÿ .= $fìÖè’äÖ‡[387]; $a¡Ñú÷¥ß¡ = explode($fìÖè’äÖ‡[47], $EèàÛà¥úÿ); goto Dãâ¯ÉÔ«Ì; BáßæÕ∞¶§: } public function listUserFav() { goto eë¨êà‡ëó; aƒ†É¢èÿÍ: $fΩëÃÆòí© = array_to_keyvalue($fΩëÃÆòí©, $B·™ıó€€‰[33], $B·™ıó€€‰[75]); if ($fΩëÃÆòí©) { $aúÑ√Ê‰Ï‡ = $this->listSource(array($B·™ıó€€‰[395] => array($B·™ıó€€‰[396], $fΩëÃÆòí©))); } $aúÑ√Ê‰Ï‡ = array_to_keyvalue($aúÑ√Ê‰Ï‡[$B·™ıó€€‰[358]], $B·™ıó€€‰[381]); goto Aá∂ïÀê»™; Aá∂ïÀê»™: foreach ($c†Ù√≈çÌæ as &$DÀßòëìõÚ) { $DÀßòëìõÚ = array($B·™ıó€€‰[397] => $DÀßòëìõÚ[$B·™ıó€€‰[371]], $B·™ıó€€‰[398] => $DÀßòëìõÚ[$B·™ıó€€‰[28]], $B·™ıó€€‰[399] => $DÀßòëìõÚ[$B·™ıó€€‰[75]], $B·™ıó€€‰[400] => $DÀßòëìõÚ[$B·™ıó€€‰[29]], $B·™ıó€€‰[401] => $DÀßòëìõÚ[$B·™ıó€€‰[191]], $B·™ıó€€‰[402] => $DÀßòëìõÚ[$B·™ıó€€‰[107]]); if ($DÀßòëìõÚ[$B·™ıó€€‰[29]] == $B·™ıó€€‰[394] && $aúÑ√Ê‰Ï‡[$DÀßòëìõÚ[$B·™ıó€€‰[75]]]) { $DÀßòëìõÚ[$B·™ıó€€‰[403]] = $aúÑ√Ê‰Ï‡[$DÀßòëìõÚ[$B·™ıó€€‰[75]]]; } } unset($DÀßòëìõÚ); return $c†Ù√≈çÌæ; goto C‰ÕÌà‡Œâ; eë¨êà‡ëó: $B·™ıó€€‰ =& $_SERVER[áí∂¯Â¸Áò]; $c†Ù√≈çÌæ = Model($B·™ıó€€‰[393])->listData(); $fΩëÃÆòí© = array_filter_by_field($c†Ù√≈çÌæ, $B·™ıó€€‰[29], $B·™ıó€€‰[394]); goto aƒ†É¢èÿÍ; C‰ÕÌà‡Œâ: } public function listUserTag($B‰Úä´‹±Ö) { goto Aç´»Ç£âò; fÂ§·®äÉ≤: $açÕ˘Áçò° = array(); foreach ($CÆ≠∞Ü ‰“ as $C˘ØÕõºÌ‰) { $e∆‰è∞ë†√ = $C˘ØÕõºÌ‰[$eôË†ÀùûÏ[75]]; if (!$e∆‰è∞ë†√) { continue; } if (!isset($açÕ˘Áçò°[$e∆‰è∞ë†√])) { $açÕ˘Áçò°[$e∆‰è∞ë†√] = array(); } $açÕ˘Áçò°[$e∆‰è∞ë†√][] = $C˘ØÕõºÌ‰[$eôË†ÀùûÏ[405]]; } $C·õë∞ÀÃ¨ = array(); goto B◊¢úöÆˆﬁ; a◊≠º∆˘Ö¶: if ($D·Æ‚ãçéÚ) { Model($eôË†ÀùûÏ[406])->removeBySource($D·Æ‚ãçéÚ); } return $E∂Û®éáŸÉ; goto c·£√µÜÖ∆; Aç´»Ç£âò: $eôË†ÀùûÏ =& $_SERVER[áí∂¯Â¸Áò]; if ($B‰Úä´‹±Ö && !is_array($B‰Úä´‹±Ö)) { $B‰Úä´‹±Ö = array($B‰Úä´‹±Ö); } $CÆ≠∞Ü ‰“ = Model($eôË†ÀùûÏ[404])->listData(); goto fÂ§·®äÉ≤; BÊπ’â¡ùÎ: if (!$E∂Û®éáŸÉ || count($C·õë∞ÀÃ¨) == $E∂Û®éáŸÉ[$eôË†ÀùûÏ[355]][$eôË†ÀùûÏ[356]]) { return $E∂Û®éáŸÉ; } $D·Æ‚ãçéÚ = array(); $bØ©◊ÖãÂ∏ = array_to_keyvalue($E∂Û®éáŸÉ[$eôË†ÀùûÏ[74]], $eôË†ÀùûÏ[33], $eôË†ÀùûÏ[381]); goto Fÿå€≈©¥”; Fÿå€≈©¥”: $f≈ùâ‹¡åÏ = array_to_keyvalue($E∂Û®éáŸÉ[$eôË†ÀùûÏ[73]], $eôË†ÀùûÏ[33], $eôË†ÀùûÏ[381]); $Aà·‡Üú„¯ = array_merge($f≈ùâ‹¡åÏ, $bØ©◊ÖãÂ∏); foreach ($C·õë∞ÀÃ¨ as $e∆‰è∞ë†√) { if (!in_array($e∆‰è∞ë†√, $Aà·‡Üú„¯)) { $D·Æ‚ãçéÚ[] = $e∆‰è∞ë†√; } } goto a◊≠º∆˘Ö¶; B◊¢úöÆˆﬁ: foreach ($açÕ˘Áçò° as $Eìß∞çéß≤ => $dÇ°Ãœ√ç‚) { $dÿ€∏˜‘·Ã = !0; if (!$B‰Úä´‹±Ö) { $C·õë∞ÀÃ¨[] = $Eìß∞çéß≤; continue; } foreach ($B‰Úä´‹±Ö as $eéÏ®à¿“·) { if (!in_array($eéÏ®à¿“·, $dÇ°Ãœ√ç‚)) { $dÿ€∏˜‘·Ã = !1; break; } } if ($dÿ€∏˜‘·Ã) { $C·õë∞ÀÃ¨[] = $Eìß∞çéß≤; } } if (!$C·õë∞ÀÃ¨) { return array(); } $E∂Û®éáŸÉ = $this->listSource(array($eôË†ÀùûÏ[395] => array($eôË†ÀùûÏ[396], $C·õë∞ÀÃ¨))); goto BÊπ’â¡ùÎ; c·£√µÜÖ∆: } public function listUserRecycle() { $FåÇØ¯˜Óë =& $_SERVER[áí∂¯Â¸Áò]; $bçÀÙ∞ª¿± = Model($FåÇØ¯˜Óë[407])->listData(); if (!$bçÀÙ∞ª¿±) { return array(); } $a™à‰æ∂†œ = array($FåÇØ¯˜Óë[395] => array($FåÇØ¯˜Óë[396], $bçÀÙ∞ª¿±), $FåÇØ¯˜Óë[408] => 1); return $this->listSource($a™à‰æ∂†œ); } public function listSource($cú¯à‰ÊÎÚ, $a¯Æõå‰◊â = 3000) { goto FΩ∏÷µ÷éÕ; D¢ç»ÚÑÙ–: $e≤ÏÈ‘Ç‰Ò = $this->field($f¨‡‚ë∫ﬂ™)->_makeOrder()->where($cú¯à‰ÊÎÚ)->selectPage($a¯Æõå‰◊â); $this->_listDataApply($e≤ÏÈ‘Ç‰Ò[$B◊ªò†ü˜¡[358]]); $this->_listMake($e≤ÏÈ‘Ç‰Ò); goto Dêµø∂ÈÖ∏; FΩ∏÷µ÷éÕ: $B◊ªò†ü˜¡ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($cú¯à‰ÊÎÚ[$B◊ªò†ü˜¡[409]])) { $cú¯à‰ÊÎÚ[$B◊ªò†ü˜¡[409]] = 0; } $f¨‡‚ë∫ﬂ™ = $B◊ªò†ü˜¡[410]; goto D¢ç»ÚÑÙ–; Dêµø∂ÈÖ∏: return $e≤ÏÈ‘Ç‰Ò; goto A≠ïú∫∑Ê≥; A≠ïú∫∑Ê≥: } protected function _makeOrder() { goto BÙü¢ü£Áö; fÁüâö∏©¥: $A¿Ê«≤á‡Ù = array($cﬁÜ›“êç±[414] => $cﬁÜ›“êç±[415], $cﬁÜ›“êç±[416] => $cﬁÜ›“êç±[417]); $fÙ‘”†Æ≠€ = array($cﬁÜ›“êç±[28] => $cﬁÜ›“êç±[28], $cﬁÜ›“êç±[77] => $cﬁÜ›“êç±[77], $cﬁÜ›“êç±[165] => $cﬁÜ›“êç±[384], $cﬁÜ›“êç±[390] => $cﬁÜ›“êç±[390], $cﬁÜ›“êç±[418] => $cﬁÜ›“êç±[391], $cﬁÜ›“êç±[191] => $cﬁÜ›“êç±[191], $cﬁÜ›“êç±[107] => $cﬁÜ›“êç±[107]); $b≈Èﬁêµï“ = Input::get($cﬁÜ›“êç±[419], $cﬁÜ›“êç±[7], $C≥ôöÿ÷‘‰, array_keys($fÙ‘”†Æ≠€)); goto Fãﬂ¡ï î¿; Dã◊‡ó‚ Ÿ: if ($b≈Èﬁêµï“ == $cﬁÜ›“êç±[28]) { } $f´áÓ¡î£Œ = $cﬁÜ›“êç±[421] . $fÙ‘”†Æ≠€[$b≈Èﬁêµï“] . $cﬁÜ›“êç±[50] . $A¿Ê«≤á‡Ù[$Bã˘™î≠˜≥]; return $this->order(rtrim(trim($f´áÓ¡î£Œ), $cﬁÜ›“êç±[47])); goto D¶•ç‡∑Õ; BÙü¢ü£Áö: $cﬁÜ›“êç± =& $_SERVER[áí∂¯Â¸Áò]; $C≥ôöÿ÷‘‰ = Model($cﬁÜ›“êç±[411])->get($cﬁÜ›“êç±[412]); $eﬂ≤õﬂ˘ä• = Model($cﬁÜ›“êç±[411])->get($cﬁÜ›“êç±[413]); goto fÁüâö∏©¥; Fãﬂ¡ï î¿: $Bã˘™î≠˜≥ = Input::get($cﬁÜ›“êç±[420], $cﬁÜ›“êç±[7], $eﬂ≤õﬂ˘ä•, array_keys($A¿Ê«≤á‡Ù)); if (!in_array($b≈Èﬁêµï“, array_keys($fÙ‘”†Æ≠€))) { $b≈Èﬁêµï“ = $cﬁÜ›“êç±[28]; } if (!in_array($Bã˘™î≠˜≥, array_keys($A¿Ê«≤á‡Ù))) { $b≈Èﬁêµï“ = $cﬁÜ›“êç±[414]; } goto Dã◊‡ó‚ Ÿ; D¶•ç‡∑Õ: } protected function _listDataApplyItem($cÃµé÷§éº, $bú¬º·åä£ = false) { $c„¢Ó§Íıä = array($cÃµé÷§éº); $this->_listDataApply($c„¢Ó§Íıä, $bú¬º·åä£); return $c„¢Ó§Íıä[0]; } protected function _listDataApply(&$AÕÛªúô¥Ø, $f—•Œ‡Ÿøí = false) { goto bíÇóºáªå; báàıáåÛ◊: $this->_listAppendUser($AÕÛªúô¥Ø); $this->_listFilterInfo($AÕÛªúô¥Ø, $f—•Œ‡Ÿøí); goto dΩï∑Ãé¬Ö; fè„Ëâ⁄∂§: $this->_listAppendPath($AÕÛªúô¥Ø); $this->_listAppendAuth($AÕÛªúô¥Ø); $this->_listAppendSourceInfo($AÕÛªúô¥Ø, $dß»©ôÛ∑Ñ); goto báàıáåÛ◊; bíÇóºáªå: $DÂÖê‚µ®¬ =& $_SERVER[áí∂¯Â¸Áò]; if (!$AÕÛªúô¥Ø) { $AÕÛªúô¥Ø = array(); return; } $dß»©ôÛ∑Ñ = array_to_keyvalue($AÕÛªúô¥Ø, $DÂÖê‚µ®¬[33], $DÂÖê‚µ®¬[381]); goto BÒëâ˘‡¿›; BÒëâ˘‡¿›: $dß»©ôÛ∑Ñ = array_unique($dß»©ôÛ∑Ñ); $this->_listSourceCache($AÕÛªúô¥Ø); if (!$f—•Œ‡Ÿøí) { $this->_listAppendMeta($AÕÛªúô¥Ø, $dß»©ôÛ∑Ñ); $this->_listAppendFileMeta($AÕÛªúô¥Ø, $dß»©ôÛ∑Ñ); $this->_listAppendChildren($AÕÛªúô¥Ø, $dß»©ôÛ∑Ñ); } goto fè„Ëâ⁄∂§; dΩï∑Ãé¬Ö: } protected function _listSourceCache($Aá‹¡ì„ü∑) { $bƒﬁﬁ‘˘°’ =& $_SERVER[áí∂¯Â¸Áò]; foreach ($Aá‹¡ì„ü∑ as $B¯°Œ‰¥ ô) { self::$cacheSourceInfo[$bƒﬁﬁ‘˘°’[422] . $B¯°Œ‰¥ ô[$bƒﬁﬁ‘˘°’[381]]] = $B¯°Œ‰¥ ô; } } protected function _listFilterInfo(&$C”Ωë£ﬁ∫›, $fæπÛﬁÌ°¨ = false) { $b≥üåÕ°¿ô =& $_SERVER[áí∂¯Â¸Áò]; foreach ($C”Ωë£ﬁ∫› as &$Dê™«Ö∫Ó ) { $Dê™«Ö∫Ó  = $this->pathInfoFilter($Dê™«Ö∫Ó ); self::$cachePathInfo[$b≥üåÕ°¿ô[423] . intval($fæπÛﬁÌ°¨) . $b≥üåÕ°¿ô[424] . $Dê™«Ö∫Ó [$b≥üåÕ°¿ô[381]]] = $Dê™«Ö∫Ó ; } unset($Dê™«Ö∫Ó ); } protected function _listMake(&$dèﬂñª‰Ñ√) { $bË∑ êÂí™ =& $_SERVER[áí∂¯Â¸Áò]; $dèﬂñª‰Ñ√[$bË∑ êÂí™[74]] = array(); $dèﬂñª‰Ñ√[$bË∑ êÂí™[73]] = array(); foreach ($dèﬂñª‰Ñ√[$bË∑ êÂí™[358]] as $Aºûæì∑ªö) { $B∆ä†Ë±æ† = $Aºûæì∑ªö[$bË∑ êÂí™[382]] == 1 ? $bË∑ êÂí™[74] : $bË∑ êÂí™[73]; $dèﬂñª‰Ñ√[$B∆ä†Ë±æ†][] = $Aºûæì∑ªö; } unset($dèﬂñª‰Ñ√[$bË∑ êÂí™[358]]); } protected function _listAppendMeta(&$Eõ≠∆Öáé«, $cßﬂî‚ÛÇ) { goto DÁÉ©ÔÓ Ú; DÁÉ©ÔÓ Ú: $aàÏÛ¨±˜† =& $_SERVER[áí∂¯Â¸Áò]; $cÊóè“ÿÖ“ = array($aàÏÛ¨±˜†[395] => array($aàÏÛ¨±˜†[396], $cßﬂî‚ÛÇ)); $A¨Ω‚áËÊÃ = Model($aàÏÛ¨±˜†[425])->field($aàÏÛ¨±˜†[426])->where($cÊóè“ÿÖ“)->select(); goto b¶µÕ¨¶„ç; b¶µÕ¨¶„ç: if (!$A¨Ω‚áËÊÃ) { return; } $bê‹òÑŒèæ = array($aàÏÛ¨±˜†[427], $aàÏÛ¨±˜†[428]); $BØ∏§Óà∂¬ = array(); goto EÑ§¿à¡ÖÚ; EÑ§¿à¡ÖÚ: foreach ($A¨Ω‚áËÊÃ as $A¬ÿÆï÷¡Ç) { if (!isset($BØ∏§Óà∂¬[$A¬ÿÆï÷¡Ç[$aàÏÛ¨±˜†[381]]])) { $BØ∏§Óà∂¬[$A¬ÿÆï÷¡Ç[$aàÏÛ¨±˜†[381]]] = array(); } if (in_array($A¬ÿÆï÷¡Ç[$aàÏÛ¨±˜†[89]], $bê‹òÑŒèæ)) { continue; } $BØ∏§Óà∂¬[$A¬ÿÆï÷¡Ç[$aàÏÛ¨±˜†[381]]][$A¬ÿÆï÷¡Ç[$aàÏÛ¨±˜†[89]]] = $A¬ÿÆï÷¡Ç[$aàÏÛ¨±˜†[363]]; } foreach ($Eõ≠∆Öáé« as &$Cçûë•‰¬‡) { $Cçûë•‰¬‡[$aàÏÛ¨±˜†[429]] = !1; if (isset($BØ∏§Óà∂¬[$Cçûë•‰¬‡[$aàÏÛ¨±˜†[381]]])) { $Cçûë•‰¬‡[$aàÏÛ¨±˜†[429]] = $BØ∏§Óà∂¬[$Cçûë•‰¬‡[$aàÏÛ¨±˜†[381]]]; } if ($this->fileIsLock($Cçûë•‰¬‡) && $Cçûë•‰¬‡[$aàÏÛ¨±˜†[388]]) { $EÈÇ•Úì¨Â = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Cçûë•‰¬‡[$aàÏÛ¨±˜†[388]][$aàÏÛ¨±˜†[389]] = AuthModel::authDisable($Cçûë•‰¬‡[$aàÏÛ¨±˜†[388]][$aàÏÛ¨±˜†[389]], $EÈÇ•Úì¨Â); $Cçûë•‰¬‡[$aàÏÛ¨±˜†[388]][$aàÏÛ¨±˜†[430]][$aàÏÛ¨±˜†[388]] = $Cçûë•‰¬‡[$aàÏÛ¨±˜†[388]][$aàÏÛ¨±˜†[389]]; } } unset($Cçûë•‰¬‡); goto DÎùÊà‚º≥; DÎùÊà‚º≥: } protected function _listAppendFileMeta(&$cÕÚ„Õêàë, $BóπÜ¢†ä¶) { goto B›«õè∂§∏; Eâ◊◊À„»å: $DÍ©ﬂîó‘° = $DÍ©ﬂîó‘° ? $DÍ©ﬂîó‘° : array(); $d‚“áóñÛÁ = array(); foreach ($DÍ©ﬂîó‘° as $C˘√Ç€«·€) { if (!isset($d‚“áóñÛÁ[$C˘√Ç€«·€[$FôèÔºù‰Ó[431]]])) { $d‚“áóñÛÁ[$C˘√Ç€«·€[$FôèÔºù‰Ó[431]]] = array(); } $d‚“áóñÛÁ[$C˘√Ç€«·€[$FôèÔºù‰Ó[431]]][$C˘√Ç€«·€[$FôèÔºù‰Ó[89]]] = $C˘√Ç€«·€[$FôèÔºù‰Ó[363]]; } goto bù¡¡Öå¡à; B›«õè∂§∏: $FôèÔºù‰Ó =& $_SERVER[áí∂¯Â¸Áò]; $e˜ÓäÍïåé = array_to_keyvalue($cÕÚ„Õêàë, $FôèÔºù‰Ó[33], $FôèÔºù‰Ó[431]); $e˜ÓäÍïåé = array_filter(array_unique($e˜ÓäÍïåé)); goto få¬ÆªÁáÁ; bù¡¡Öå¡à: foreach ($cÕÚ„Õêàë as &$Eïùò€◊„Œ) { goto fˆì‰éÃ≥; cÎ›◊·Ëúã: unset($d÷áÇ«æáé[$F Ø≠µå¢õ][$FôèÔºù‰Ó[75]]); $a√é€◊®≈œ = is_array($d‚“áóñÛÁ[$F Ø≠µå¢õ]) ? $d‚“áóñÛÁ[$F Ø≠µå¢õ] : array(); $Eïùò€◊„Œ[$FôèÔºù‰Ó[161]] = array_merge($a√é€◊®≈œ, $d÷áÇ«æáé[$F Ø≠µå¢õ]); goto füáù™íïì; fˆì‰éÃ≥: $F Ø≠µå¢õ = $Eïùò€◊„Œ[$FôèÔºù‰Ó[431]]; if (!$F Ø≠µå¢õ || !isset($d÷áÇ«æáé[$F Ø≠µå¢õ])) { continue; } $d´üΩ†ÔóÈ = $d÷áÇ«æáé[$F Ø≠µå¢õ]; goto Föß§äâüì; Föß§äâüì: $d´üΩ†ÔóÈ[$FôèÔºù‰Ó[77]] = $Eïùò€◊„Œ[$FôèÔºù‰Ó[77]]; $d´üΩ†ÔóÈ[$FôèÔºù‰Ó[28]] = $Eïùò€◊„Œ[$FôèÔºù‰Ó[28]]; if (!isset(self::$cacheFileInfo[$FôèÔºù‰Ó[437] . $F Ø≠µå¢õ])) { self::$cacheFileInfo[$FôèÔºù‰Ó[437] . $F Ø≠µå¢õ] = array_merge(array(), $d´üΩ†ÔóÈ); } goto cÎ›◊·Ëúã; füáù™íïì: if (isset($Eïùò€◊„Œ[$FôèÔºù‰Ó[161]][$FôèÔºù‰Ó[160]])) { $Eïùò€◊„Œ[$FôèÔºù‰Ó[160]] = json_decode($Eïùò€◊„Œ[$FôèÔºù‰Ó[161]][$FôèÔºù‰Ó[160]], !0); unset($Eïùò€◊„Œ[$FôèÔºù‰Ó[161]][$FôèÔºù‰Ó[160]]); } goto bÎ∫î™•∆Í; bÎ∫î™•∆Í: } unset($Eïùò€◊„Œ); goto f◊—Ûµ⁄Ñ√; a‡–“–úﬁé: $d÷áÇ«æáé = Model($FôèÔºù‰Ó[434])->field($b‚´¢–†“È)->where($c Òéè–˜è)->select(); $d÷áÇ«æáé = array_to_keyvalue($d÷áÇ«æáé, $FôèÔºù‰Ó[431]); $DÍ©ﬂîó‘° = Model($FôèÔºù‰Ó[435])->field($FôèÔºù‰Ó[436])->where($c Òéè–˜è)->select(); goto Eâ◊◊À„»å; få¬ÆªÁáÁ: if (!$e˜ÓäÍïåé) { return; } $c Òéè–˜è = array($FôèÔºù‰Ó[432] => array($FôèÔºù‰Ó[396], $e˜ÓäÍïåé)); $b‚´¢–†“È = $FôèÔºù‰Ó[433]; goto a‡–“–úﬁé; f◊—Ûµ⁄Ñ√: } protected function _listAppendSourceInfo(&$BÖßÜÏ»¡Æ, $f•¥Ûî»ÜÖ) { goto b€é≥Øˆªª; C∑œƒé„±Ü: return $BÖßÜÏ»¡Æ; goto b∆£ØÁ≈«; FøÒüÛß˜ê: $eÇõá†Ç÷ = array_to_keyvalue_group($BäæÖË›Ã, $föû¡∑ë‰ˆ[381]); foreach ($BÖßÜÏ»¡Æ as &$bËÃ‚‡€Ì‹) { $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]] = array($föû¡∑ë‰ˆ[441] => 0, $föû¡∑ë‰ˆ[442] => 0, $föû¡∑ë‰ˆ[443] => 0); if (isset($DÜ∆©ﬁ∞ë∑[$bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[381]]])) { $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]][$föû¡∑ë‰ˆ[444]] = 1; $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]][$föû¡∑ë‰ˆ[445]] = $DÜ∆©ﬁ∞ë∑[$bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[381]]][$föû¡∑ë‰ˆ[28]]; } if (isset($a‰®’™ìÏ´[$bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[381]]])) { $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]][$föû¡∑ë‰ˆ[446]] = array(); foreach ($a‰®’™ìÏ´[$bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[381]]] as $fÇ⁄Ãñ‚ôŒ) { $CÑ˘∏Ø†ì∆ = $E≈Âœ≠Ãçî[$fÇ⁄Ãñ‚ôŒ]; $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]][$föû¡∑ë‰ˆ[446]][] = array($föû¡∑ë‰ˆ[447] => $CÑ˘∏Ø†ì∆[$föû¡∑ë‰ˆ[371]], $föû¡∑ë‰ˆ[398] => $CÑ˘∏Ø†ì∆[$föû¡∑ë‰ˆ[28]], $föû¡∑ë‰ˆ[448] => $CÑ˘∏Ø†ì∆[$föû¡∑ë‰ˆ[449]]); } } if (isset($eÇõá†Ç÷[$bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[381]]])) { $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]][$föû¡∑ë‰ˆ[450]] = array(); foreach ($eÇõá†Ç÷[$bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[381]]] as $C∑π§’Ç”ø) { $bËÃ‚‡€Ì‹[$föû¡∑ë‰ˆ[403]][$föû¡∑ë‰ˆ[450]] = array($föû¡∑ë‰ˆ[451] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[452]], $föû¡∑ë‰ˆ[453] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[454]], $föû¡∑ë‰ˆ[455] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[381]], $föû¡∑ë‰ˆ[456] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[457]], $föû¡∑ë‰ˆ[458] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[459]], $föû¡∑ë‰ˆ[460] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[460]], $föû¡∑ë‰ˆ[461] => $C∑π§’Ç”ø[$föû¡∑ë‰ˆ[461]]); } } } unset($bËÃ‚‡€Ì‹); goto C∑œƒé„±Ü; eÁ°¯ÎºÖé: $E≈Âœ≠Ãçî = array_to_keyvalue($F∆Û∫Ûı∂¿, $föû¡∑ë‰ˆ[371]); $a‰®’™ìÏ´ = array_to_keyvalue_group($E…¶¬éáï≥, $föû¡∑ë‰ˆ[75], $föû¡∑ë‰ˆ[405]); $DÜ∆©ﬁ∞ë∑ = array_to_keyvalue($a⁄ƒ‚´®€¢, $föû¡∑ë‰ˆ[75]); goto FøÒüÛß˜ê; b€é≥Øˆªª: $föû¡∑ë‰ˆ =& $_SERVER[áí∂¯Â¸Áò]; if (!defined($föû¡∑ë‰ˆ[438])) { return; } $F∆Û∫Ûı∂¿ = Model($föû¡∑ë‰ˆ[439])->listData(); goto Dî˘Ü¯‚°¯; Dî˘Ü¯‚°¯: $E…¶¬éáï≥ = Model($föû¡∑ë‰ˆ[404])->listData(); $a⁄ƒ‚´®€¢ = Model($föû¡∑ë‰ˆ[393])->listData(); $BäæÖË›Ã = Model($föû¡∑ë‰ˆ[440])->listSimple(); goto eÁ°¯ÎºÖé; b∆£ØÁ≈«: } protected function _listAppendChildren(&$D é‘Ûí≈–, $C¿ç÷ÜæÒá) { goto b§∏ñ¬áÇ‘; b§∏ñ¬áÇ‘: $féﬂ»æÖûï =& $_SERVER[áí∂¯Â¸Áò]; $EûÖï∆ô” = $féﬂ»æÖûï[365]; $cÔÇÒ√¬Í¨ = array(); goto bÑÂπΩ„˜√; AÜ°‘„èˆ÷: $e¬ﬁœ–÷ó∞ = $this->tablePrefix . $this->tableName; for ($Eíúãééüô = 0; $Eíúãééüô < $cÚΩåË§ÍÏ; $Eíúãééüô++) { $fÆê°å‰•ç = intval($D é‘Ûí≈–[$Eíúãééüô][$féﬂ»æÖûï[409]]); if ($D é‘Ûí≈–[$Eíúãééüô][$féﬂ»æÖûï[382]]) { $CèÙàè¥‹Ü = $D é‘Ûí≈–[$Eíúãééüô][$féﬂ»æÖûï[381]]; $EûÖï∆ô” .= "\123\105\114\105\x43\124\x20\52\x20\x46\122\x4f\115\x20\x28\x53\x45\x4c\x45\103\124\x20\x27{$CèÙàè¥‹Ü}\x5f\x68\141\x73\106\151\x6c\x65\x27\x20\141\x73\40\x68\141\x73\54\x63\157\165\x6e\x74\50\x31\51\x20\141\x73\40\150\141\163\x43\157\165\x6e\x74\x20\106\122\x4f\x4d\x20\140{$e¬ﬁœ–÷ó∞}\x60\40\12\x9\x9\11\x9\11\x77\x68\x65\162\x65\x20\160\x61\162\145\x6e\x74\111\104\75{$CèÙàè¥‹Ü}\x20\x61\156\144\x20\x69\x73\x46\157\154\x64\145\162\75\x30\x20\x61\156\x64\x20\x69\163\x44\x65\x6c\145\164\x65\x3d{$fÆê°å‰•ç}\x29\x20\x61\x73\40\164\142\61\x5f{$CèÙàè¥‹Ü}\x20\x75\156\151\x6f\156\x20\141\x6c\154\40\12\11\11\x9\x9\x9\x53\105\114\x45\103\x54\40\52\x20\x46\122\x4f\115\40\50\123\105\114\x45\103\x54\x20\47{$CèÙàè¥‹Ü}\x5f\150\141\x73\106\157\154\x64\145\x72\47\x20\141\163\40\x68\x61\x73\x46\x69\x6c\145\x2c\x63\157\x75\x6e\x74\x28\x31\x29\40\141\163\40\x68\x61\x73\103\157\x75\156\x74\x20\x46\x52\117\115\40\140{$e¬ﬁœ–÷ó∞}\x60\40\xa\11\x9\11\11\11\x77\x68\x65\x72\x65\40\160\141\x72\145\x6e\x74\111\x44\x3d{$CèÙàè¥‹Ü}\40\141\156\x64\x20\151\x73\x46\157\154\x64\x65\x72\75\61\x20\141\156\144\x20\x69\x73\x44\145\x6c\145\x74\x65\75{$fÆê°å‰•ç}\x29\x20\x61\163\40\164\142\62\137{$CèÙàè¥‹Ü}\40\165\156\151\157\x6e\x20\x61\154\154\x20"; } if ((strlen($EûÖï∆ô”) >= $C©µÙ„··É || $Eíúãééüô == $cÚΩåË§ÍÏ - 1) && $EûÖï∆ô”) { $EûÖï∆ô” = substr($EûÖï∆ô”, 0, -strlen($féﬂ»æÖûï[462])); $D‚ÑÕ…£»é = $this->query($EûÖï∆ô”); $cÔÇÒ√¬Í¨ = array_merge($cÔÇÒ√¬Í¨, $D‚ÑÕ…£»é); $EûÖï∆ô” = $féﬂ»æÖûï[33]; } } $cÔÇÒ√¬Í¨ = array_to_keyvalue($cÔÇÒ√¬Í¨, $féﬂ»æÖûï[463]); goto e˘çí≤◊«§; bÑÂπΩ„˜√: $C©µÙ„··É = 1024 * 50; $D é‘Ûí≈– = is_array($D é‘Ûí≈–) ? $D é‘Ûí≈– : array(); $cÚΩåË§ÍÏ = count($D é‘Ûí≈–); goto AÜ°‘„èˆ÷; e˘çí≤◊«§: foreach ($D é‘Ûí≈– as &$D®Í¿ô∆°ı) { if ($D®Í¿ô∆°ı[$féﬂ»æÖûï[382]]) { unset($D®Í¿ô∆°ı[$féﬂ»æÖûï[384]]); $D®Í¿ô∆°ı[$féﬂ»æÖûï[196]] = intval($cÔÇÒ√¬Í¨[$D®Í¿ô∆°ı[$féﬂ»æÖûï[381]] . $féﬂ»æÖûï[464]][$féﬂ»æÖûï[465]]); $D®Í¿ô∆°ı[$féﬂ»æÖûï[195]] = intval($cÔÇÒ√¬Í¨[$D®Í¿ô∆°ı[$féﬂ»æÖûï[381]] . $féﬂ»æÖûï[466]][$féﬂ»æÖûï[465]]); } } unset($D®Í¿ô∆°ı); goto E©éœ‰°“ü; E©éœ‰°“ü: } protected function _listAppendAuth(&$f≤∑«‹É—ä) { goto a∏É÷™ƒ•Ú; cù›ô‚‘°Ñ: $D’Ú◊›èÈı = Model($F¶≈ıÍ·ì‘[467])->getSourceList($fû°©îÆéﬁ, $a∫Èü≈È¨Û); foreach ($f≤∑«‹É—ä as $CÊÚ„Æ’ÎÁ => &$eÒ÷Ï•›ŸÙ) { $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]] = $D’Ú◊›èÈı[$eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[381]]]; if (!$eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]] && $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[383]] == self::TYPE_GROUP) { $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]] = Action($F¶≈ıÍ·ì‘[468])->pathGroupAuthMake($eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[469]]); if (!$eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]] && !_get($GLOBALS, $F¶≈ıÍ·ì‘[470])) { $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[193]] = !1; $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[192]] = !1; } } if ($eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]]) { $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[193]] = AuthModel::authCheckEdit($eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]][$F¶≈ıÍ·ì‘[389]]); $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[192]] = AuthModel::authCheckView($eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[388]][$F¶≈ıÍ·ì‘[389]]); } $this->groupPathDisplay($eÒ÷Ï•›ŸÙ); } unset($eÒ÷Ï•›ŸÙ); goto f„Ú¯⁄ò‚õ; a∏É÷™ƒ•Ú: $F¶≈ıÍ·ì‘ =& $_SERVER[áí∂¯Â¸Áò]; if (!defined($F¶≈ıÍ·ì‘[438])) { return; } $fû°©îÆéﬁ = array(); goto FúÜ◊ÿô€≥; FúÜ◊ÿô€≥: foreach ($f≤∑«‹É—ä as $eÒ÷Ï•›ŸÙ) { if ($eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[383]] == self::TYPE_GROUP) { $fû°©îÆéﬁ[] = $eÒ÷Ï•›ŸÙ[$F¶≈ıÍ·ì‘[381]]; } } if (!$fû°©îÆéﬁ) { return; } $a∫Èü≈È¨Û = array_to_keyvalue($f≤∑«‹É—ä, $F¶≈ıÍ·ì‘[381]); goto cù›ô‚‘°Ñ; f„Ú¯⁄ò‚õ: } public function groupPathDisplay(&$bçàåπ»ãº) { goto Dëß“ØÜçÆ; E†Ÿò Ò¿¡: $bçàåπ»ãº[$eæâ‘öÕ ú[473]] = $c™¶ΩÍ™£˘[$eæâ‘öÕ ú[474]]; $bçàåπ»ãº[$eæâ‘öÕ ú[392]] = $c™¶ΩÍ™£˘[$eæâ‘öÕ ú[472]]; $bçàåπ»ãº[$eæâ‘öÕ ú[475]] = $c™¶ΩÍ™£˘[$eæâ‘öÕ ú[476]]; goto eŒ«ì‚Ÿè’; Dëß“ØÜçÆ: $eæâ‘öÕ ú =& $_SERVER[áí∂¯Â¸Áò]; if ($bçàåπ»ãº[$eæâ‘öÕ ú[383]] != self::TYPE_GROUP) { return; } $c™¶ΩÍ™£˘ = Model($eæâ‘öÕ ú[471])->getInfo($bçàåπ»ãº[$eæâ‘öÕ ú[469]]); goto fö◊Â«äºÊ; eŒ«ì‚Ÿè’: $bçàåπ»ãº[$eæâ‘öÕ ú[477]] = $DÈ·êÿàñë . $c™¶ΩÍ™£˘[$eæâ‘öÕ ú[403]][$eæâ‘öÕ ú[381]]; goto CÇ‹Óäíàª; fö◊Â«äºÊ: $E˜‘≥À˘¬© = $this->parentLevelArray($c™¶ΩÍ™£˘[$eæâ‘öÕ ú[472]]); $DÈ·êÿàñë = $eæâ‘öÕ ú[33]; foreach ($E˜‘≥À˘¬© as $e¯âí‹Œ∆¢) { $eìÇáæâ’∞ = Model($eæâ‘öÕ ú[471])->getInfo($e¯âí‹Œ∆¢); $DÈ·êÿàñë .= $eìÇáæâ’∞[$eæâ‘öÕ ú[403]][$eæâ‘öÕ ú[381]] . $eæâ‘öÕ ú[47]; } goto E†Ÿò Ò¿¡; CÇ‹Óäíàª: } protected function _listAppendPath(&$d«›ñÇÜ«ç) { goto E—ä‚ïÌ∏®; B‘ã‰Î¬‹Ó: foreach ($d«›ñÇÜ«ç as &$F˜Ï¥–ﬂ€´) { $B™‹Œª∫§´[$F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[381]]] = $F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[28]]; $bÇı€çÚßÕ = $this->parentLevelArray($F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[472]]); foreach ($bÇı€çÚßÕ as $BÂª√ß‰∫≥ => $C’≠¢‹∫úΩ) { if ($BÂª√ß‰∫≥ != 0 && !isset($B™‹Œª∫§´[$C’≠¢‹∫úΩ])) { $e∞òµèŒÒ€[] = $C’≠¢‹∫úΩ; } } } unset($F˜Ï¥–ﬂ€´); if (count($e∞òµèŒÒ€) > 0) { $aãÜüÒìâ∆ = array($dË°Ö≥¨Ì∏[395] => array($dË°Ö≥¨Ì∏[396], $e∞òµèŒÒ€)); if (count($e∞òµèŒÒ€) == 1) { $dÛ÷î¬á¥õ = $this->sourceInfo($e∞òµèŒÒ€[0]); $a¿√≠Ë›˘Æ = is_array($dÛ÷î¬á¥õ) ? array($dÛ÷î¬á¥õ) : !1; } else { $a¿√≠Ë›˘Æ = $this->field($dË°Ö≥¨Ì∏[478])->where($aãÜüÒìâ∆)->select(); } $e”¡ƒÚ¥¡÷ = array_to_keyvalue($a¿√≠Ë›˘Æ, $dË°Ö≥¨Ì∏[381], $dË°Ö≥¨Ì∏[28]); $B™‹Œª∫§´ = array_merge_index($B™‹Œª∫§´, $e”¡ƒÚ¥¡÷); } goto A§∏Áˆ¡†ç; E—ä‚ïÌ∏®: $dË°Ö≥¨Ì∏ =& $_SERVER[áí∂¯Â¸Áò]; static $B™‹Œª∫§´ = array(); $e∞òµèŒÒ€ = array(); goto B‘ã‰Î¬‹Ó; A§∏Áˆ¡†ç: $a±≥Òëéçı = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($d«›ñÇÜ«ç as &$F˜Ï¥–ﬂ€´) { goto cÊë˜ÂæÇß; F∑∆›êπ’Ü: if ($bÇı€çÚßÕ) { $aÉ≈°∏ﬂæ£ .= $F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[28]]; } if ($F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[382]]) { $aÉ≈°∏ﬂæ£ .= $dË°Ö≥¨Ì∏[8]; } $F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[479]] = str_replace($dË°Ö≥¨Ì∏[480], $dË°Ö≥¨Ì∏[8], $aÉ≈°∏ﬂæ£); goto EÒ¢›öï¨Ñ; cÊë˜ÂæÇß: $bÇı€çÚßÕ = $this->parentLevelArray($F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[472]]); $aÉ≈°∏ﬂæ£ = $this->_listAppendPathRoot($F˜Ï¥–ﬂ€´, $bÇı€çÚßÕ); foreach ($bÇı€çÚßÕ as $BÂª√ß‰∫≥ => $C’≠¢‹∫úΩ) { if ($BÂª√ß‰∫≥ == 0 && $aÉ≈°∏ﬂæ£ && $F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[383]] == self::TYPE_GROUP) { continue; } if (isset($B™‹Œª∫§´[$C’≠¢‹∫úΩ])) { $aÉ≈°∏ﬂæ£ .= $B™‹Œª∫§´[$C’≠¢‹∫úΩ] . $dË°Ö≥¨Ì∏[8]; } } goto F∑∆›êπ’Ü; EÒ¢›öï¨Ñ: $A≥Çäñ≠ö = trim($F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[479]], $dË°Ö≥¨Ì∏[8]); if ($F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[474]] == $dË°Ö≥¨Ì∏[481] && $A≥Çäñ≠ö) { $F˜Ï¥–ﬂ€´[$dË°Ö≥¨Ì∏[28]] = $A≥Çäñ≠ö; } $this->_listAppendPathRecycle($F˜Ï¥–ﬂ€´, $bÇı€çÚßÕ, $a±≥Òëéçı); goto E€Üôåª–¶; E€Üôåª–¶: } unset($F˜Ï¥–ﬂ€´); goto c†ãé◊ÀÑÆ; c†ãé◊ÀÑÆ: return $d«›ñÇÜ«ç; goto eüä¿“éÇç; eüä¿“éÇç: } private function _listAppendPathRecycle(&$A√ˆÂﬂ∑Øã, $eÿ£ﬂÃ≥⁄⁄, $A€Úôñÿ‰) { goto CÁÁß ç¡ä; CÁÁß ç¡ä: $aÍ√Öç∞èÎ =& $_SERVER[áí∂¯Â¸Áò]; if (intval($A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[383]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($A€Úôñÿ‰, $eÿ£ﬂÃ≥⁄⁄) && $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[381]] != $A€Úôñÿ‰) { return; } goto cÜ≤πÉ‘ˆò; DÆ≥ﬂû∏èÔ: $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[472]] = $aÍ√Öç∞èÎ[483] . implode($aÍ√Öç∞èÎ[47], array_slice($eÿ£ﬂÃ≥⁄⁄, 1)) . $aÍ√Öç∞èÎ[47]; if ($A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[381]] == $A€Úôñÿ‰) { $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[472]] = $aÍ√Öç∞èÎ[483]; $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[474]] = $aÍ√Öç∞èÎ[481]; $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[28]] = LNG($aÍ√Öç∞èÎ[482]); } $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[484]] = $aÍ√Öç∞èÎ[485]; goto dÃ”ÿ—ª‚Ø; cÜ≤πÉ‘ˆò: $Eùí∫˜ìàñ = explode($aÍ√Öç∞èÎ[8], trim($A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[479]], $aÍ√Öç∞èÎ[8])); $fóû°±ÛÇƒ = implode($aÍ√Öç∞èÎ[8], array_slice($Eùí∫˜ìàñ, 2)); $A√ˆÂﬂ∑Øã[$aÍ√Öç∞èÎ[479]] = $aÍ√Öç∞èÎ[8] . LNG($aÍ√Öç∞èÎ[482]) . $aÍ√Öç∞èÎ[8] . ltrim($fóû°±ÛÇƒ, $aÍ√Öç∞èÎ[8]); goto DÆ≥ﬂû∏èÔ; dÃ”ÿ—ª‚Ø: } protected function _listAppendPathRoot(&$e›ËçÂÜáπ, $B¢≤ﬂêª§Ü) { $bçÆÊÇâŒí =& $_SERVER[áí∂¯Â¸Áò]; $Eí ⁄îêÇﬁ = $bçÆÊÇâŒí[33]; if ($e›ËçÂÜáπ[$bçÆÊÇâŒí[383]] == self::TYPE_USER) { if (defined($bçÆÊÇâŒí[438]) && $e›ËçÂÜáπ[$bçÆÊÇâŒí[469]] == USER_ID) { $Eí ⁄îêÇﬁ = LNG($bçÆÊÇâŒí[486]); if (!$B¢≤ﬂêª§Ü) { $e›ËçÂÜáπ[$bçÆÊÇâŒí[28]] = $Eí ⁄îêÇﬁ; } } else { $dÖÚöﬁÃ©∞ = Model($bçÆÊÇâŒí[487])->getInfoSimple($e›ËçÂÜáπ[$bçÆÊÇâŒí[469]]); $Eí ⁄îêÇﬁ = LNG($bçÆÊÇâŒí[488]) . $bçÆÊÇâŒí[157] . $dÖÚöﬁÃ©∞[$bçÆÊÇâŒí[28]] . $bçÆÊÇâŒí[489]; } } else { if ($e›ËçÂÜáπ[$bçÆÊÇâŒí[383]] == self::TYPE_GROUP) { $dÖÚöﬁÃ©∞ = Model($bçÆÊÇâŒí[471])->getInfoSimple($e›ËçÂÜáπ[$bçÆÊÇâŒí[469]]); $Eí ⁄îêÇﬁ = $dÖÚöﬁÃ©∞[$bçÆÊÇâŒí[28]]; } else { if ($e›ËçÂÜáπ[$bçÆÊÇâŒí[383]] == self::TYPE_SYSTEM) { $dÖÚöﬁÃ©∞ = $this->sourceInfo($B¢≤ﬂêª§Ü[0], !0); $Eí ⁄îêÇﬁ = $dÖÚöﬁÃ©∞[$bçÆÊÇâŒí[28]]; } } } $Eí ⁄îêÇﬁ = $Eí ⁄îêÇﬁ ? $bçÆÊÇâŒí[8] . $Eí ⁄îêÇﬁ . $bçÆÊÇâŒí[8] : $bçÆÊÇâŒí[8]; return $Eí ⁄îêÇﬁ; } protected function _listAppendUser(&$cÜ›ãΩÉ¢˘) { goto Cä‚Üà£Œù; DΩ∏•™é›é: unset($dÎÖèâ˘‹¥); goto fßÉ∂‘ﬂ±Î; Cä‚Üà£Œù: $A°úÍ©äÇ« =& $_SERVER[áí∂¯Â¸Áò]; $FÛÕÇãËã¬ = array_to_keyvalue($cÜ›ãΩÉ¢˘, $A°úÍ©äÇ«[33], $A°úÍ©äÇ«[390]); $F‘ µìãµ∞ = array_to_keyvalue($cÜ›ãΩÉ¢˘, $A°úÍ©äÇ«[33], $A°úÍ©äÇ«[391]); goto c†¯“©ö®«; c†¯“©ö®«: $fﬂ±Ìπ°ê‘ = array_merge($FÛÕÇãËã¬, $F‘ µìãµ∞); $bæ±‹˜ßÂï = Model($A°úÍ©äÇ«[490])->userListInfo($fﬂ±Ìπ°ê‘); foreach ($cÜ›ãΩÉ¢˘ as &$dÎÖèâ˘‹¥) { $f«ãå»π´í = $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[390]]; $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[390]] = $bæ±‹˜ßÂï[$f«ãå»π´í] ? $bæ±‹˜ßÂï[$f«ãå»π´í] : !1; $f«ãå»π´í = $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[391]]; $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[391]] = $bæ±‹˜ßÂï[$f«ãå»π´í] ? $bæ±‹˜ßÂï[$f«ãå»π´í] : !1; if (isset($dÎÖèâ˘‹¥[$A°úÍ©äÇ«[429]]) && $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[429]][$A°úÍ©äÇ«[491]]) { $FãÇçŸè°Ô = $GLOBALS[$A°úÍ©äÇ«[6]][$A°úÍ©äÇ«[84]][$A°úÍ©äÇ«[492]]; if ($dÎÖèâ˘‹¥[$A°úÍ©äÇ«[429]][$A°úÍ©äÇ«[493]] <= time() - $FãÇçŸè°Ô) { $this->metaSet($dÎÖèâ˘‹¥[$A°úÍ©äÇ«[381]], $A°úÍ©äÇ«[491], null); $this->metaSet($dÎÖèâ˘‹¥[$A°úÍ©äÇ«[381]], $A°úÍ©äÇ«[493], null); unset($dÎÖèâ˘‹¥[$A°úÍ©äÇ«[429]][$A°úÍ©äÇ«[491]]); continue; } $fà»‰°§Ù¿ = $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[429]][$A°úÍ©äÇ«[491]]; $dÎÖèâ˘‹¥[$A°úÍ©äÇ«[429]][$A°úÍ©äÇ«[494]] = Model($A°úÍ©äÇ«[490])->getInfoSimpleOuter($fà»‰°§Ù¿); } } goto DΩ∏•™é›é; fßÉ∂‘ﬂ±Î: } public function parentLevelArray($E°˘ã†ó€Ù) { $dîıƒÃ‹ÎÖ =& $_SERVER[áí∂¯Â¸Áò]; $E°˘ã†ó€Ù = explode($dîıƒÃ‹ÎÖ[47], trim($E°˘ã†ó€Ù, $dîıƒÃ‹ÎÖ[47])); return array_remove_value($E°˘ã†ó€Ù, $dîıƒÃ‹ÎÖ[481]); } public function listAll($DêŒµÑ™ô∏) { goto dÎ¨≥§ÎŒ; B≠Ù£Ë¿ÖÕ: $this->_listAppendAuth($A∏œÈÌ≈™µ); $this->_listAppendUser($A∏œÈÌ≈™µ); $this->_listAppendPath($A∏œÈÌ≈™µ); goto EÁ–Üœﬂı•; dÍÏì¡ˆ£í: $Fìóç‹áœÖ = $bïΩÃøˆÍÉ[499]; $BòÆŸ∑®¥ù = "\x4c\x45\106\x54\x20\x4a\117\x49\116\x20{$this->tablePrefix}\x69\x6f\137\x66\x69\x6c\145\40\x66\151\154\145\40\157\156\x20\163\157\x75\x72\143\145\x2e\146\151\x6c\x65\111\104\40\75\x20\146\151\154\145\56\x66\x69\154\145\111\104"; $A∏œÈÌ≈™µ = $this->alias($bïΩÃøˆÍÉ[500])->field($Fìóç‹áœÖ)->where($CÇ∑¿É“ÏÍ)->join($BòÆŸ∑®¥ù)->select(); goto B≠Ù£Ë¿ÖÕ; EÁ–Üœﬂı•: $A∏œÈÌ≈™µ = array_to_keyvalue($A∏œÈÌ≈™µ, $bïΩÃøˆÍÉ[381]); $AÈ§–Ë°‡ª = "\57{$f∞¥ŸøÒÙ¶[$bïΩÃøˆÍÉ[28]]}\57"; $AÈ§–Ë°‡ª = $AÈ§–Ë°‡ª == $bïΩÃøˆÍÉ[480] ? $bïΩÃøˆÍÉ[8] : $AÈ§–Ë°‡ª; goto EÀËúîÒÈô; EÀËúîÒÈô: $FÓ„û∫Û®Û = array(); foreach ($A∏œÈÌ≈™µ as $c∂èâÒï’≈ => $Cúª√Óêì∞) { goto dÓØ„ãπçœ; EàÊçöˆ◊–: if (!$Cúª√Óêì∞[$bïΩÃøˆÍÉ[382]]) { $E€Ö≥±à“ó[$bïΩÃøˆÍÉ[431]] = $Cúª√Óêì∞[$bïΩÃøˆÍÉ[431]]; $E€Ö≥±à“ó[$bïΩÃøˆÍÉ[502]] = $Cúª√Óêì∞[$bïΩÃøˆÍÉ[75]]; } $FÓ„û∫Û®Û[] = $E€Ö≥±à“ó; goto AÔ£˜ÛÎ÷É; dÓØ„ãπçœ: $dıòÜë¡ç® = $this->parentLevelArray($Cúª√Óêì∞[$bïΩÃøˆÍÉ[472]]); array_shift($dıòÜë¡ç®); $dÜÂ∂∑ñá∏ = $AÈ§–Ë°‡ª; goto D¿Ç–ÊüïÉ; C∑≥äî€á™: $dÜÂ∂∑ñá∏ = str_replace($bïΩÃøˆÍÉ[480], $bïΩÃøˆÍÉ[8], $dÜÂ∂∑ñá∏); $dÜÂ∂∑ñá∏ = str_replace($bïΩÃøˆÍÉ[480], $bïΩÃøˆÍÉ[8], $dÜÂ∂∑ñá∏); $E€Ö≥±à“ó = array($bïΩÃøˆÍÉ[399] => str_replace($bïΩÃøˆÍÉ[480], $bïΩÃøˆÍÉ[8], $dÜÂ∂∑ñá∏), $bïΩÃøˆÍÉ[501] => intval($Cúª√Óêì∞[$bïΩÃøˆÍÉ[382]]), $bïΩÃøˆÍÉ[403] => $this->pathInfoFilter($Cúª√Óêì∞, !0)); goto EàÊçöˆ◊–; D¿Ç–ÊüïÉ: for ($A÷¿«êΩúœ = 0; $A÷¿«êΩúœ < count($dıòÜë¡ç®); $A÷¿«êΩúœ++) { $dÜÂ∂∑ñá∏ .= $A∏œÈÌ≈™µ[$dıòÜë¡ç®[$A÷¿«êΩúœ]][$bïΩÃøˆÍÉ[28]] . $bïΩÃøˆÍÉ[8]; } $dÜÂ∂∑ñá∏ .= $Cúª√Óêì∞[$bïΩÃøˆÍÉ[28]]; if ($Cúª√Óêì∞[$bïΩÃøˆÍÉ[382]]) { $dÜÂ∂∑ñá∏ .= $bïΩÃøˆÍÉ[8]; } goto C∑≥äî€á™; AÔ£˜ÛÎ÷É: } return $FÓ„û∫Û®Û; goto EõÌøñ·≈ ; dÎ¨≥§ÎŒ: $bïΩÃøˆÍÉ =& $_SERVER[áí∂¯Â¸Áò]; $f∞¥ŸøÒÙ¶ = $this->sourceInfo($DêŒµÑ™ô∏); $CÇ∑¿É“ÏÍ = array($bïΩÃøˆÍÉ[495] => array($bïΩÃøˆÍÉ[496], $f∞¥ŸøÒÙ¶[$bïΩÃøˆÍÉ[472]] . $DêŒµÑ™ô∏ . $bïΩÃøˆÍÉ[497]), $bïΩÃøˆÍÉ[498] => 0); goto dÍÏì¡ˆ£í; EõÌøñ·≈ : } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($c¶¯ãÇÇ±è) { goto D¨ÿ¿´∫¢Ÿ; D¨ÿ¿´∫¢Ÿ: $Fº®∂§¨›‹ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->allowLock()) { return; } $this->_lockCheck($Fº®∂§¨›‹[503], $c¶¯ãÇÇ±è); goto e•â∫Áõá; e•â∫Áõá: $e∑ˆ¢ﬂ€Óã = 1; $this->_lockEvent($c¶¯ãÇÇ±è, array($Fº®∂§¨›‹[504], $Fº®∂§¨›‹[505]), $e∑ˆ¢ﬂ€Óã); $this->_lockParent($c¶¯ãÇÇ±è, array($Fº®∂§¨›‹[505]), $e∑ˆ¢ﬂ€Óã); goto D»«Ìá°”û; D»«Ìá°”û: $this->_lockEvent($c¶¯ãÇÇ±è, array($Fº®∂§¨›‹[506], $Fº®∂§¨›‹[507]), $e∑ˆ¢ﬂ€Óã); $this->_lockCheckEnd($Fº®∂§¨›‹[503], $c¶¯ãÇÇ±è); goto AåÏß“Ñê‰; AåÏß“Ñê‰: } public function lockCopyEnd($dÕﬁØ…“Í°) { $aøºÿã®û© =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->allowLock()) { return; } $E‚å‘”©π± = 0; $this->_lockEvent($dÕﬁØ…“Í°, array($aøºÿã®û©[504], $aøºÿã®û©[505]), $E‚å‘”©π±); $this->_lockParent($dÕﬁØ…“Í°, array($aøºÿã®û©[505]), $E‚å‘”©π±); $this->_lockEvent($dÕﬁØ…“Í°, array($aøºÿã®û©[506], $aøºÿã®û©[507]), $E‚å‘”©π±); } public function lockWriteStart($a⁄ıÂúæ◊≈, $cÇâ•ÂÂ”º = '') { goto c∂äè Î¶ò; dªØ·∫âé«: $this->_lockParent($a⁄ıÂúæ◊≈, array($fÉ°èâıÁÁ[503], $fÉ°èâıÁÁ[505]), $C®£ÖÎç’¯); $this->_lockCheckEnd($fÉ°èâıÁÁ[504], $a⁄ıÂúæ◊≈); goto Cﬂ™ëï∫Â∏; Cµéœ„√Ö›: $C®£ÖÎç’¯ = 1; $this->_lockKey($fÉ°èâıÁÁ[508] . $a⁄ıÂúæ◊≈ . $fÉ°èâıÁÁ[91] . $cÇâ•ÂÂ”º, $C®£ÖÎç’¯); $this->_lockEvent($a⁄ıÂúæ◊≈, array($fÉ°èâıÁÁ[503], $fÉ°èâıÁÁ[505]), $C®£ÖÎç’¯); goto dªØ·∫âé«; c∂äè Î¶ò: $fÉ°èâıÁÁ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->allowLock()) { return; } $this->_lockCheck($fÉ°èâıÁÁ[504], $a⁄ıÂúæ◊≈); goto Cµéœ„√Ö›; Cﬂ™ëï∫Â∏: } public function lockWriteEnd($d≥ûéÉ•∏è, $fè˜Ω—éÂ≈ = '') { $Càé€π⁄Ùﬂ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->allowLock()) { return; } $d¡ı≥ÕÂÂç = 0; $this->_lockKey($Càé€π⁄Ùﬂ[508] . $d≥ûéÉ•∏è . $Càé€π⁄Ùﬂ[91] . $fè˜Ω—éÂ≈, $d¡ı≥ÕÂÂç); $this->_lockEvent($d≥ûéÉ•∏è, array($Càé€π⁄Ùﬂ[503], $Càé€π⁄Ùﬂ[505]), $d¡ı≥ÕÂÂç); $this->_lockParent($d≥ûéÉ•∏è, array($Càé€π⁄Ùﬂ[503], $Càé€π⁄Ùﬂ[505]), $d¡ı≥ÕÂÂç); } public function lockMoveStart($CÒÔ≤√Âƒ ) { goto eæ»‹‚ëµ°; F‘Ë⁄ÙäÎ≥: $Fã◊»ÍÑÔÒ = 1; $this->_lockKey($A»™≈•óﬂ˘[509] . $CÒÔ≤√Âƒ , $Fã◊»ÍÑÔÒ); $this->_lockEvent($CÒÔ≤√Âƒ , array($A»™≈•óﬂ˘[503], $A»™≈•óﬂ˘[504]), $Fã◊»ÍÑÔÒ); goto BçÁü™ëüº; eæ»‹‚ëµ°: $A»™≈•óﬂ˘ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->allowLock()) { return; } $this->_lockCheck($A»™≈•óﬂ˘[505], $CÒÔ≤√Âƒ ); goto F‘Ë⁄ÙäÎ≥; BçÁü™ëüº: $this->_lockParent($CÒÔ≤√Âƒ , array($A»™≈•óﬂ˘[503], $A»™≈•óﬂ˘[505]), $Fã◊»ÍÑÔÒ); $this->_lockEvent($CÒÔ≤√Âƒ , array($A»™≈•óﬂ˘[510], $A»™≈•óﬂ˘[506], $A»™≈•óﬂ˘[507]), $Fã◊»ÍÑÔÒ); $this->_lockCheckEnd($A»™≈•óﬂ˘[505], $CÒÔ≤√Âƒ ); goto d‘Èä¶Öò◊; d‘Èä¶Öò◊: } public function lockMoveEnd($a∏û‹∆à≠œ) { goto A’úÙıèÆ“; dèÍ◊ä—çí: $this->_lockEvent($a∏û‹∆à≠œ, array($fı‹ÔØÒ–∏[510], $fı‹ÔØÒ–∏[506], $fı‹ÔØÒ–∏[507]), $eØ–›è¬äÒ); goto cç»∑≤Ì‚‹; A’úÙıèÆ“: $fı‹ÔØÒ–∏ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->allowLock()) { return; } $eØ–›è¬äÒ = 0; goto f€õäÇ∫««; f€õäÇ∫««: $this->_lockKey($fı‹ÔØÒ–∏[509] . $a∏û‹∆à≠œ, $eØ–›è¬äÒ); $this->_lockEvent($a∏û‹∆à≠œ, array($fı‹ÔØÒ–∏[503], $fı‹ÔØÒ–∏[504]), $eØ–›è¬äÒ); $this->_lockParent($a∏û‹∆à≠œ, array($fı‹ÔØÒ–∏[503], $fı‹ÔØÒ–∏[505]), $eØ–›è¬äÒ); goto dèÍ◊ä—çí; cç»∑≤Ì‚‹: } private function _lockCheck($dè‘ËπÉ›Á, $Eç‚ØÃ€Ö) { goto C®“åßÂ¥”; c∞çÊ±±àÏ: CacheLock::setErrorMsg($aà‰ÉõØÊÖ[157] . htmlspecialchars($c“«ƒã¥√ˆ[$aà‰ÉõØÊÖ[28]]) . $aà‰ÉõØÊÖ[489] . $BÑ»âçÜïÓ); $this->_lockKey($E©≈‡πÀ£±, 1); $this->_lockKey($E©≈‡πÀ£±, 0); goto dÚÖ¬ë ÊÌ; EŸŸÿÔó—ª: $this->_lockTimeStart[$E©≈‡πÀ£±] = timeFloat(); if (!is_array($c“«ƒã¥√ˆ)) { return; } $BÑ»âçÜïÓ = LNG($aà‰ÉõØÊÖ[511]); goto c∞çÊ±±àÏ; dÚÖ¬ë ÊÌ: $AÃŸÙù≠‹ï = array_reverse($this->parentLevelArray($c“«ƒã¥√ˆ[$aà‰ÉõØÊÖ[472]])); foreach ($AÃŸÙù≠‹ï as $FûΩÿØı© ) { $E©≈‡πÀ£± = $dè‘ËπÉ›Á . $aà‰ÉõØÊÖ[512] . $FûΩÿØı© ; if (CacheLock::lockGet($aà‰ÉõØÊÖ[513] . $E©≈‡πÀ£±)) { $c“«ƒã¥√ˆ = $this->sourceInfo($FûΩÿØı© ); CacheLock::setErrorMsg($aà‰ÉõØÊÖ[157] . htmlspecialchars($c“«ƒã¥√ˆ[$aà‰ÉõØÊÖ[28]]) . $aà‰ÉõØÊÖ[489] . $BÑ»âçÜïÓ); $this->_lockKey($E©≈‡πÀ£±, 1); $this->_lockKey($E©≈‡πÀ£±, 0); } } goto bŒã‚®£˜ì; C®“åßÂ¥”: $aà‰ÉõØÊÖ =& $_SERVER[áí∂¯Â¸Áò]; $c“«ƒã¥√ˆ = $this->sourceInfo($Eç‚ØÃ€Ö); $E©≈‡πÀ£± = $dè‘ËπÉ›Á . $aà‰ÉõØÊÖ[91] . $Eç‚ØÃ€Ö; goto EŸŸÿÔó—ª; bŒã‚®£˜ì: } private function _lockCheckEnd($fªÍéµ‚œî, $F¥È®Úæá±) { goto cØ´ãüñºç; c«Í«À®Ô: if (!isset($this->_lockTimeStart[$EƒÜ√≥≥‚Ã])) { return; } $B’è…Á◊∑¡ = timeFloat() - $this->_lockTimeStart[$EƒÜ√≥≥‚Ã]; unset($this->_lockTimeStart[$EƒÜ√≥≥‚Ã]); goto c⁄ÉâÍÆéü; c⁄ÉâÍÆéü: if ($B’è…Á◊∑¡ > 0.5) { unset(self::$cacheSourceInfo[$Bê™ç˜ »ë[422] . $F¥È®Úæá±]); } $f§ø∫í⁄â˘ = $this->sourceInfo($F¥È®Úæá±); if (!$f§ø∫í⁄â˘) { show_json(LNG($Bê™ç˜ »ë[101]), !1); } goto aëµ∫ëÿØé; cØ´ãüñºç: $Bê™ç˜ »ë =& $_SERVER[áí∂¯Â¸Áò]; $EƒÜ√≥≥‚Ã = $fªÍéµ‚œî . $Bê™ç˜ »ë[91] . $F¥È®Úæá±; CacheLock::setErrorMsg($Bê™ç˜ »ë[365]); goto c«Í«À®Ô; aëµ∫ëÿØé: } private function _lockParent($D≠≠õº æÑ, $e±ÈäÍ¶âØ, $eØ•√íøÉ§) { if (!$this->autoLockSet) { return; } $Eœí⁄‹ñó = $this->sourceInfo($D≠≠õº æÑ); if (!is_array($Eœí⁄‹ñó)) { return; } $dú¥¨ã∂∏Ó = array_reverse($this->parentLevelArray($Eœí⁄‹ñó[$_SERVER[áí∂¯Â¸Áò][472]])); foreach ($dú¥¨ã∂∏Ó as $fÁé∏„èçù) { $this->_lockEvent($fÁé∏„èçù, $e±ÈäÍ¶âØ, $eØ•√íøÉ§); } } private function _lockEvent($dï‰É„íç, $C˘Ÿîæ∆¶ù, $Eà®›ñíê±) { $E≠Ü–“èÀï =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->autoLockSet) { return; } foreach ($C˘Ÿîæ∆¶ù as $F…Ÿ›∆«ˆª) { $Cç∆Îò÷ê = $F…Ÿ›∆«ˆª . $E≠Ü–“èÀï[91] . $dï‰É„íç; if ($Eà®›ñíê± && CacheLock::lockGet($E≠Ü–“èÀï[513] . $Cç∆Îò÷ê)) { continue; } $this->_lockKey($Cç∆Îò÷ê, $Eà®›ñíê±); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($b√ú»‘ã»∞, $e‡«≈©±Æ√ = 1) { $C≈Ó£“€œÖ = $_SERVER[áí∂¯Â¸Áò][513] . md5($b√ú»‘ã»∞); if ($e‡«≈©±Æ√) { if (isset(self::$_lockItemArr[$C≈Ó£“€œÖ])) { return; } self::$_lockItemArr[$C≈Ó£“€œÖ] = 1; CacheLock::lock($C≈Ó£“€œÖ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$C≈Ó£“€œÖ])) { return; } unset(self::$_lockItemArr[$C≈Ó£“€œÖ]); CacheLock::unlock($C≈Ó£“€œÖ); } } public function isParentOf($föëµ≥àÇÂ, $eÍ•ƒ„¿≠ñ) { goto D€‡¶≈øÊ∆; Fû¬™Õ€…ø: $Aùë´Í∫‚ç = $f·§óì∂¯ö[$d°‘∑ØÑ°’[472]] . $f·§óì∂¯ö[$d°‘∑ØÑ°’[381]] . $d°‘∑ØÑ°’[47]; $fﬁë¶ø º¯ = $fÑÌºòØà∂[$d°‘∑ØÑ°’[472]] . $fÑÌºòØà∂[$d°‘∑ØÑ°’[381]] . $d°‘∑ØÑ°’[47]; $B£Ì„øÉˆ = strpos($fﬁë¶ø º¯, $Aùë´Í∫‚ç) === 0; goto EæããÈ∞«; D€‡¶≈øÊ∆: $d°‘∑ØÑ°’ =& $_SERVER[áí∂¯Â¸Áò]; $f·§óì∂¯ö = $this->sourceInfo($föëµ≥àÇÂ); $fÑÌºòØà∂ = $this->sourceInfo($eÍ•ƒ„¿≠ñ); goto Fû¬™Õ€…ø; EæããÈ∞«: return $B£Ì„øÉˆ; goto A»ﬂœÎÓûê; A»ﬂœÎÓûê: } private $targetIsDelete = 0; public function copy($Aì¨û—ÌÓ, $eÿ˜ã•Œ®ù, $dØâÇÂÊ≤“ = REPEAT_REPLACE, $aûˆ¥ì¿¨¬ = '') { goto Dô◊å≠Ïë“; bÉﬂêÃ«‘Ø: $this->updateModifyTime($eÿ˜ã•Œ®ù); return $FàûﬁÚÏç∂; goto b‹πÔóç‹Ï; a∂Ø„ô…é»: $this->saveAll($cö∏È‰í¢À[$cíê◊Ú¬æﬁ[516]]); Model($cíê◊Ú¬æﬁ[171])->linkAdd($cö∏È‰í¢À[$cíê◊Ú¬æﬁ[514]]); $this->folderSizeReset($eÿ˜ã•Œ®ù); goto bÉﬂêÃ«‘Ø; Dô◊å≠Ïë“: $cíê◊Ú¬æﬁ =& $_SERVER[áí∂¯Â¸Áò]; $AÆ¶·òƒÚÛ = $this->sourceInfo($Aì¨û—ÌÓ); $f•ÌÎåîΩπ = $this->sourceInfo($eÿ˜ã•Œ®ù); goto DÀÉï¥ªÏ£; Cﬁ£ëˆÃ±á: if ($AÆ¶·òƒÚÛ[$cíê◊Ú¬æﬁ[382]] == $cíê◊Ú¬æﬁ[83] && $d€∆ﬂäŒè£ == $FàûﬁÚÏç∂) { $this->folderSizeResetChildren($d€∆ﬂäŒè£); } Model($cíê◊Ú¬æﬁ[517])->addAll($cö∏È‰í¢À[$cíê◊Ú¬æﬁ[515]], array(), !0); if ($d€∆ﬂäŒè£ != $FàûﬁÚÏç∂ || $AÆ¶·òƒÚÛ[$cíê◊Ú¬æﬁ[382]] == $cíê◊Ú¬æﬁ[83]) { Model($cíê◊Ú¬æﬁ[518])->eventCopy($FàûﬁÚÏç∂); } goto a∂Ø„ô…é»; bè™÷©ÜØÑ: $this->targetIsDelete = intval($AÆ¶·òƒÚÛ[$cíê◊Ú¬æﬁ[409]]); $d€∆ﬂäŒè£ = $this->fileNameExistCache($eÿ˜ã•Œ®ù, $AÆ¶·òƒÚÛ[$cíê◊Ú¬æﬁ[28]]); $FàûﬁÚÏç∂ = $this->_copy($Aì¨û—ÌÓ, $eÿ˜ã•Œ®ù, $dØâÇÂÊ≤“, $cö∏È‰í¢À, !0, $aûˆ¥ì¿¨¬); goto B¥Û≈≈ÑÕ€; DÀÉï¥ªÏ£: if (!$AÆ¶·òƒÚÛ || !$f•ÌÎåîΩπ || $f•ÌÎåîΩπ[$cíê◊Ú¬æﬁ[382]] != $cíê◊Ú¬æﬁ[83]) { return !1; } if ($this->isParentOf($Aì¨û—ÌÓ, $eÿ˜ã•Œ®ù)) { return !1; } $cÕ‡úŸîµ† = $aûˆ¥ì¿¨¬ ? $aûˆ¥ì¿¨¬ : $AÆ¶·òƒÚÛ[$cíê◊Ú¬æﬁ[28]]; goto Aê˘å”∫Óˆ; Aê˘å”∫Óˆ: $this->lockCopyStart($Aì¨û—ÌÓ); $this->lockWriteStart($eÿ˜ã•Œ®ù, $cÕ‡úŸîµ†); $cö∏È‰í¢À = array($cíê◊Ú¬æﬁ[514] => array(), $cíê◊Ú¬æﬁ[515] => array(), $cíê◊Ú¬æﬁ[516] => array()); goto bè™÷©ÜØÑ; B¥Û≈≈ÑÕ€: $this->_childrenListClear(); $this->lockCopyEnd($Aì¨û—ÌÓ); $this->lockWriteEnd($eÿ˜ã•Œ®ù, $cÕ‡úŸîµ†); goto Cﬁ£ëˆÃ±á; b‹πÔóç‹Ï: } private function _copy($dâ‹›™Ëì¨, $BÔÉÓæ‘¶¥, $a∞≤ÛÈçﬂÇ, &$fê€´õâ∂ñ, $c¨©Ö≈‚ûÌ, $e«◊èﬂ⁄á∂ = '') { goto A…ƒøüÖæΩ; A…ƒøüÖæΩ: $B¢Âì†≠–ª =& $_SERVER[áí∂¯Â¸Áò]; $E·∑ÓüÉÍ— = $this->sourceInfoCache($dâ‹›™Ëì¨); $AÎŒá¡´ ı = $E·∑ÓüÉÍ—[$B¢Âì†≠–ª[382]] == $B¢Âì†≠–ª[83]; goto eâ≥≥œÂ‘¬; d˜ëë≥«áÌ: return $bıÍ¬‘≈§Í; goto a´÷Ω »ÁÓ; Eı≈øÁøπ¨: if (!$eùÔÑ∫≠°ä) { return $this->_copyCreate($dâ‹›™Ëì¨, $BÔÉÓæ‘¶¥, $BÛíÍ†ÑõÛ, $fê€´õâ∂ñ); } $bıÍ¬‘≈§Í = $eùÔÑ∫≠°ä; if ($AÎŒá¡´ ı) { if ($a∞≤ÛÈçﬂÇ == REPEAT_RENAME_FOLDER) { $BÛíÍ†ÑõÛ = $this->fileNameAutoCache($BÔÉÓæ‘¶¥, $BÛíÍ†ÑõÛ, $a∞≤ÛÈçﬂÇ, $AÎŒá¡´ ı); $bıÍ¬‘≈§Í = $this->_copyCreate($dâ‹›™Ëì¨, $BÔÉÓæ‘¶¥, $BÛíÍ†ÑõÛ, $fê€´õâ∂ñ); } else { $AÍ¡ëéƒô∂ = $this->_childrenList($dâ‹›™Ëì¨); foreach ($AÍ¡ëéƒô∂ as $dûﬁÀÇ◊±≥) { $this->_copy($dûﬁÀÇ◊±≥[$B¢Âì†≠–ª[381]], $eùÔÑ∫≠°ä, $a∞≤ÛÈçﬂÇ, $fê€´õâ∂ñ, !1); } } } else { if ($a∞≤ÛÈçﬂÇ == REPEAT_RENAME || $a∞≤ÛÈçﬂÇ == REPEAT_RENAME_FOLDER) { $BÛíÍ†ÑõÛ = $this->fileNameAutoCache($BÔÉÓæ‘¶¥, $BÛíÍ†ÑõÛ, $a∞≤ÛÈçﬂÇ, $AÎŒá¡´ ı); $bıÍ¬‘≈§Í = $this->_copyCreate($dâ‹›™Ëì¨, $BÔÉÓæ‘¶¥, $BÛíÍ†ÑõÛ, $fê€´õâ∂ñ); } else { if ($a∞≤ÛÈçﬂÇ == REPEAT_REPLACE) { $a∏π¬ÕÆ≥è = $this->sourceInfoCache($eùÔÑ∫≠°ä); $d¶ú¬æïô≤ = $this->fileHistory($a∏π¬ÕÆ≥è, $E·∑ÓüÉÍ—[$B¢Âì†≠–ª[431]], $E·∑ÓüÉÍ—[$B¢Âì†≠–ª[77]]); if ($d¶ú¬æïô≤) { $fê€´õâ∂ñ[$B¢Âì†≠–ª[514]][] = $E·∑ÓüÉÍ—[$B¢Âì†≠–ª[431]]; } } else { if ($a∞≤ÛÈçﬂÇ == REPEAT_SKIP) { } } } Hook::trigger($B¢Âì†≠–ª[519], array($B¢Âì†≠–ª[520], $E·∑ÓüÉÍ—, 0)); } goto d˜ëë≥«áÌ; eâ≥≥œÂ‘¬: $BÛíÍ†ÑõÛ = $e«◊èﬂ⁄á∂ ? $e«◊èﬂ⁄á∂ : $E·∑ÓüÉÍ—[$B¢Âì†≠–ª[28]]; $eùÔÑ∫≠°ä = $this->fileNameExistCache($BÔÉÓæ‘¶¥, $BÛíÍ†ÑõÛ); if ($c¨©Ö≈‚ûÌ) { $this->_childrenAllMake($dâ‹›™Ëì¨); if ($AÎŒá¡´ ı && $eùÔÑ∫≠°ä) { $this->_childrenAllMake($eùÔÑ∫≠°ä); } } goto Eı≈øÁøπ¨; a´÷Ω »ÁÓ: } private function _copyCreate($dÀﬂìﬁçØ†, $Cá±ö‰ﬂÈ§, $aæÀˆœê∆•, &$Bè≤è„ÕÈ°) { goto E„ƒ‹√„µ∫; E„‹ïëß§§: if ($C¿ú”í˘äö[$bÁÑÙ”„º¶[382]] != $bÁÑÙ”„º¶[83]) { $Bè≤è„ÕÈ°[$bÁÑÙ”„º¶[514]][] = $C¿ú”í˘äö[$bÁÑÙ”„º¶[431]]; return $d‰ã‘¬ºÈø; } $c÷’Ö¬ú¡µ = array(); $F∞ªöôôµï = array(); goto f›éßºØ ú; bé⁄Ò£æÌ¶: $this->addAll($F∞ªöôôµï, array(), !1); $aØ‰Ú∆◊Ê∏ = $this->where(array($bÁÑÙ”„º¶[474] => $d‰ã‘¬ºÈø))->select(); $DäáíÌ¶Ú¢ = $this->_childrenMakeRelation($c÷’Ö¬ú¡µ, $aØ‰Ú∆◊Ê∏); goto F´ÔÌáÒ¢ô; BﬁÎ∂á∂˜¶: $Eç“Üÿƒ‡ÿ = $this->_makeItemData($C¿ú”í˘äö, $f®ﬂô¶Ñ¯—, $aæÀˆœê∆•); Hook::trigger($bÁÑÙ”„º¶[521], $Eç“Üÿƒ‡ÿ); Hook::trigger($bÁÑÙ”„º¶[522], array($bÁÑÙ”„º¶[523], $Eç“Üÿƒ‡ÿ, 0)); goto Eç… âû—¡; F´ÔÌáÒ¢ô: $DäáíÌ¶Ú¢[$dÀﬂìﬁçØ†] = $d‰ã‘¬ºÈø; $DôÉí≥Ã∑œ = array(); $cëÌƒΩØäø = array(); goto CÕà⁄áú√˜; dÜí–è‚¬◊: $d¥¶‚ó¢ûñ = $this->sourceInfo($d‰ã‘¬ºÈø); foreach ($c÷’Ö¬ú¡µ as $B∆Ö∑“ñ’») { $Aƒ¢§—ÿ‹ª = $this->_makeItemData($B∆Ö∑“ñ’», $d¥¶‚ó¢ûñ, $B∆Ö∑“ñ’»[$bÁÑÙ”„º¶[28]]); $Aƒ¢§—ÿ‹ª[$bÁÑÙ”„º¶[472]] = $B∆Ö∑“ñ’»[$bÁÑÙ”„º¶[472]]; $F∞ªöôôµï[] = $Aƒ¢§—ÿ‹ª; } $this->chunkEventSet($bÁÑÙ”„º¶[524], array($bÁÑÙ”„º¶[525], $Eç“Üÿƒ‡ÿ, $f¡Ÿ›€ÈÑõ)); goto bé⁄Ò£æÌ¶; E„ƒ‹√„µ∫: $bÁÑÙ”„º¶ =& $_SERVER[áí∂¯Â¸Áò]; $C¿ú”í˘äö = $this->sourceInfoCache($dÀﬂìﬁçØ†); $f®ﬂô¶Ñ¯— = $this->sourceInfoCache($Cá±ö‰ﬂÈ§); goto BﬁÎ∂á∂˜¶; Eπì‹ËÑ∆è: $this->chunkEventSet($bÁÑÙ”„º¶[528], array($bÁÑÙ”„º¶[529], $Eç“Üÿƒ‡ÿ, $f¡Ÿ›€ÈÑõ)); $this->saveAll($cëÌƒΩØäø); return $d‰ã‘¬ºÈø; goto a¬∑≥’©°õ; CÕà⁄áú√˜: foreach ($aØ‰Ú∆◊Ê∏ as $B∆Ö∑“ñ’») { $FÌé◊´Ííò = $B∆Ö∑“ñ’»[$bÁÑÙ”„º¶[381]]; $bÖ–«©¬åÒ = $this->_childrenMatch($DäáíÌ¶Ú¢, $B∆Ö∑“ñ’», $d¥¶‚ó¢ûñ); $DôÉí≥Ã∑œ[] = array($bÁÑÙ”„º¶[381], $FÌé◊´Ííò, $bÁÑÙ”„º¶[474], $bÖ–«©¬åÒ[$bÁÑÙ”„º¶[474]]); $cëÌƒΩØäø[] = array($bÁÑÙ”„º¶[381], $FÌé◊´Ííò, $bÁÑÙ”„º¶[472], $bÖ–«©¬åÒ[$bÁÑÙ”„º¶[472]]); $this->_copyApplyMeta($B∆Ö∑“ñ’», $Bè≤è„ÕÈ°); if ($B∆Ö∑“ñ’»[$bÁÑÙ”„º¶[382]] != $bÁÑÙ”„º¶[83]) { $Bè≤è„ÕÈ°[$bÁÑÙ”„º¶[514]][] = $B∆Ö∑“ñ’»[$bÁÑÙ”„º¶[431]]; } } $this->chunkEventSet($bÁÑÙ”„º¶[526], array($bÁÑÙ”„º¶[527], $Eç“Üÿƒ‡ÿ, $f¡Ÿ›€ÈÑõ)); $this->saveAll($DôÉí≥Ã∑œ); goto Eπì‹ËÑ∆è; Eç… âû—¡: $d‰ã‘¬ºÈø = $this->add($Eç“Üÿƒ‡ÿ); $f¥Ø™∂‰Ö§ = array($bÁÑÙ”„º¶[381] => $d‰ã‘¬ºÈø, $bÁÑÙ”„º¶[28] => $aæÀˆœê∆•); $this->_copyApplyMeta($f¥Ø™∂‰Ö§, $Bè≤è„ÕÈ°); goto E„‹ïëß§§; f›éßºØ ú: $this->_childrenListAll($dÀﬂìﬁçØ†, $c÷’Ö¬ú¡µ); $f¡Ÿ›€ÈÑõ = count($c÷’Ö¬ú¡µ); if ($f¡Ÿ›€ÈÑõ == 0) { return $d‰ã‘¬ºÈø; } goto dÜí–è‚¬◊; a¬∑≥’©°õ: } private function _childrenMakeRelation($d™Ë≠Œ‹∫», $FË»‚¥ÃÖï) { $e∑Üò·ÖÛ =& $_SERVER[áí∂¯Â¸Áò]; $fÏË»∂◊ßß = array(); $DÛÍ“ÑÑÏß = array(); foreach ($d™Ë≠Œ‹∫» as $dÀÉáêªπ≠) { $Cç€ÊáÀ⁄ = $dÀÉáêªπ≠[$e∑Üò·ÖÛ[28]] . $e∑Üò·ÖÛ[8] . $dÀÉáêªπ≠[$e∑Üò·ÖÛ[472]]; $fÏË»∂◊ßß[$Cç€ÊáÀ⁄] = $dÀÉáêªπ≠[$e∑Üò·ÖÛ[381]]; } foreach ($FË»‚¥ÃÖï as $dÀÉáêªπ≠) { $Cç€ÊáÀ⁄ = $dÀÉáêªπ≠[$e∑Üò·ÖÛ[28]] . $e∑Üò·ÖÛ[8] . $dÀÉáêªπ≠[$e∑Üò·ÖÛ[472]]; $cπ∑µı›êº = $fÏË»∂◊ßß[$Cç€ÊáÀ⁄]; $DÛÍ“ÑÑÏß[$cπ∑µı›êº] = $dÀÉáêªπ≠[$e∑Üò·ÖÛ[381]]; } return $DÛÍ“ÑÑÏß; } private function _childrenMatch($F„¨ºû∏∞È, $dë»•ê©˜, $e≠‘í¥Çã∞) { goto B∆Â·√é’ñ; d–“µ“äì”: foreach ($FÊ‡ªõàœù as $dπ”Éì’ó‡) { if (isset($F„¨ºû∏∞È[$dπ”Éì’ó‡])) { $eÖèé◊ë“ñ .= $F„¨ºû∏∞È[$dπ”Éì’ó‡] . $C‡¢£ìÿ´∆[530]; } } $eÖèé◊ë“ñ = rtrim($eÖèé◊ë“ñ, $C‡¢£ìÿ´∆[47]) . $C‡¢£ìÿ´∆[47]; $D∏ÇÕ«·ã• = $this->parentLevelArray($eÖèé◊ë“ñ); goto eΩ‡®ûµ∂; B∆Â·√é’ñ: $C‡¢£ìÿ´∆ =& $_SERVER[áí∂¯Â¸Áò]; $eÖèé◊ë“ñ = $e≠‘í¥Çã∞[$C‡¢£ìÿ´∆[472]]; $FÊ‡ªõàœù = $this->parentLevelArray($dë»•ê©˜[$C‡¢£ìÿ´∆[472]]); goto d–“µ“äì”; eΩ‡®ûµ∂: $Fïã¿≈ÑÈá = $D∏ÇÕ«·ã•[count($D∏ÇÕ«·ã•) - 1]; return array($C‡¢£ìÿ´∆[474] => $Fïã¿≈ÑÈá, $C‡¢£ìÿ´∆[472] => $eÖèé◊ë“ñ); goto EÔæŸáäµç; EÔæŸáäµç: } private function _makeItemData($F≈◊¢ÊìÊ’, $CÖ É¶ã•ç, $EãÀ∆⁄ÖÃπ) { $E„Õº¬‚˘© =& $_SERVER[áí∂¯Â¸Áò]; $bíÂÕÇÕñü = array($E„Õº¬‚˘©[531] => $F≈◊¢ÊìÊ’[$E„Õº¬‚˘©[382]], $E„Õº¬‚˘©[398] => $EãÀ∆⁄ÖÃπ, $E„Õº¬‚˘©[532] => $F≈◊¢ÊìÊ’[$E„Õº¬‚˘©[384]], $E„Õº¬‚˘©[432] => $F≈◊¢ÊìÊ’[$E„Õº¬‚˘©[431]], $E„Õº¬‚˘©[533] => $F≈◊¢ÊìÊ’[$E„Õº¬‚˘©[77]], $E„Õº¬‚˘©[534] => $CÖ É¶ã•ç[$E„Õº¬‚˘©[383]], $E„Õº¬‚˘©[535] => $CÖ É¶ã•ç[$E„Õº¬‚˘©[469]], $E„Õº¬‚˘©[536] => USER_ID, $E„Õº¬‚˘©[537] => USER_ID, $E„Õº¬‚˘©[380] => $CÖ É¶ã•ç[$E„Õº¬‚˘©[381]], $E„Õº¬‚˘©[538] => $CÖ É¶ã•ç[$E„Õº¬‚˘©[472]] . $CÖ É¶ã•ç[$E„Õº¬‚˘©[381]] . $E„Õº¬‚˘©[47], $E„Õº¬‚˘©[408] => 0, $E„Õº¬‚˘©[539] => $E„Õº¬‚˘©[33]); return $bíÂÕÇÕñü; } private function _copyApplyMeta($aÍÛí°çûÿ, &$dœﬂßÉ¯Õâ) { $DëØîûæ÷≠ =& $_SERVER[áí∂¯Â¸Áò]; $cÃª–ú∞Ø± = $aÍÛí°çûÿ[$DëØîûæ÷≠[381]]; $B∏É œ£ÜÑ = $aÍÛí°çûÿ[$DëØîûæ÷≠[28]]; if (!isset($aÍÛí°çûÿ[$DëØîûæ÷≠[540]]) || !$aÍÛí°çûÿ[$DëØîûæ÷≠[540]] || $aÍÛí°çûÿ[$DëØîûæ÷≠[540]] == $DëØîûæ÷≠[481]) { $dœﬂßÉ¯Õâ[$DëØîûæ÷≠[516]][] = array($DëØîûæ÷≠[381], $cÃª–ú∞Ø±, $DëØîûæ÷≠[540], short_id($cÃª–ú∞Ø±)); } if (Input::check($B∏É œ£ÜÑ, $DëØîûæ÷≠[541])) { $dœﬂßÉ¯Õâ[$DëØîûæ÷≠[515]][] = array($DëØîûæ÷≠[381] => $cÃª–ú∞Ø±, $DëØîûæ÷≠[89] => $DëØîûæ÷≠[428], $DëØîûæ÷≠[363] => str_replace($DëØîûæ÷≠[50], $DëØîûæ÷≠[33], Pinyin::encode($B∏É œ£ÜÑ))); $dœﬂßÉ¯Õâ[$DëØîûæ÷≠[515]][] = array($DëØîûæ÷≠[381] => $cÃª–ú∞Ø±, $DëØîûæ÷≠[89] => $DëØîûæ÷≠[427], $DëØîûæ÷≠[363] => Pinyin::encode($B∏É œ£ÜÑ, $DëØîûæ÷≠[542])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Cõ¡Ê≤ËÃ∞) { goto EÉÙö‡Ì◊≈; a›ø≈Ö∂É¬: $bï≥ÁàÉˆü = array($E…°Øˆ’ë[472] => array($E…°Øˆ’ë[496], $fåøÖßæ•á[$E…°Øˆ’ë[472]] . $Cõ¡Ê≤ËÃ∞ . $E…°Øˆ’ë[497]), $E…°Øˆ’ë[409] => $this->targetIsDelete); $EÓ‰ÇÑñàê = $this->field($EáÀπÂØ÷¢)->where($bï≥ÁàÉˆü)->select(); if (!$EÓ‰ÇÑñàê) { return; } goto böÌÉæπÑë; EÉÙö‡Ì◊≈: $E…°Øˆ’ë =& $_SERVER[áí∂¯Â¸Áò]; $fåøÖßæ•á = $this->sourceInfo($Cõ¡Ê≤ËÃ∞); $EáÀπÂØ÷¢ = $E…°Øˆ’ë[410]; goto a›ø≈Ö∂É¬; böÌÉæπÑë: $EÓ‰ÇÑñàê = array_to_keyvalue($EÓ‰ÇÑñàê, $E…°Øˆ’ë[381]); foreach ($EÓ‰ÇÑñàê as $Cø§πìÔ‡ú) { $b≈§ª”ö⁄Ö = $Cø§πìÔ‡ú[$E…°Øˆ’ë[474]]; $Cõ¡Ê≤ËÃ∞ = $Cø§πìÔ‡ú[$E…°Øˆ’ë[381]]; if (!isset($this->_childrenListCache[$Cõ¡Ê≤ËÃ∞]) && $Cø§πìÔ‡ú[$E…°Øˆ’ë[382]] == $E…°Øˆ’ë[83]) { $this->_childrenListCache[$Cõ¡Ê≤ËÃ∞] = array(); } if (!isset($this->_childrenListCache[$b≈§ª”ö⁄Ö])) { $this->_childrenListCache[$b≈§ª”ö⁄Ö] = array(); } $this->_childrenListCache[$b≈§ª”ö⁄Ö][$Cõ¡Ê≤ËÃ∞] = $Cø§πìÔ‡ú; $this->_childrenItemCache[$Cõ¡Ê≤ËÃ∞] = $Cø§πìÔ‡ú; } goto BìæòÊµëö; BìæòÊµëö: } private function _childrenListAll($d°ÜÌãÆ§Ù, &$C†ﬁΩØ¡¯Â) { $Eîû·§ü¬º =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->_childrenListCache[$d°ÜÌãÆ§Ù])) { return; } $fËÑœáÏÉÒ = $this->_childrenListCache[$d°ÜÌãÆ§Ù]; foreach ($fËÑœáÏÉÒ as $cï©Î—øüÇ => $CﬂØ√÷ê∞∫) { $C†ﬁΩØ¡¯Â[$cï©Î—øüÇ] = $CﬂØ√÷ê∞∫; if ($CﬂØ√÷ê∞∫[$Eîû·§ü¬º[382]] == $Eîû·§ü¬º[83]) { $this->_childrenListAll($cï©Î—øüÇ, $C†ﬁΩØ¡¯Â); } } } private function sourceInfoCache($bÒÆ≈ﬂÙ„») { if (isset($this->_childrenItemCache[$bÒÆ≈ﬂÙ„»])) { return $this->_childrenItemCache[$bÒÆ≈ﬂÙ„»]; } return $this->sourceInfo($bÒÆ≈ﬂÙ„»); } private function _childrenList($B¯◊∞§ø†) { if (isset($this->_childrenListCache[$B¯◊∞§ø†])) { return $this->_childrenListCache[$B¯◊∞§ø†]; } return $this->_childrenListSelect($B¯◊∞§ø†); } private function _childrenListSelect($D·Ù«“à∑Ω) { goto Cÿﬁ±◊ﬂó•; EìÈ¶äﬂÑ©: foreach ($d¨à⁄ÑË·û as $D·Ù«“à∑Ω => $d∆¶≤∞∏º¢) { $this->_childrenItemCache[$D·Ù«“à∑Ω] = $d∆¶≤∞∏º¢; } return $d¨à⁄ÑË·û; goto eà˘¡ã⁄Ïé; Cÿﬁ±◊ﬂó•: $fÔ©ÕÓÕÏ  =& $_SERVER[áí∂¯Â¸Áò]; $d£÷≈»üîÕ = array($fÔ©ÕÓÕÏ [474] => $D·Ù«“à∑Ω, $fÔ©ÕÓÕÏ [409] => $this->targetIsDelete); $BÁ∂è÷©∂» = $this->where($d£÷≈»üîÕ)->select(); goto A⁄ØÓıÒ¯î; A⁄ØÓıÒ¯î: $BÁ∂è÷©∂» = $BÁ∂è÷©∂» ? $BÁ∂è÷©∂» : array(); $d¨à⁄ÑË·û = array_to_keyvalue($BÁ∂è÷©∂», $fÔ©ÕÓÕÏ [381]); $this->_childrenListCache[$D·Ù«“à∑Ω] = $d¨à⁄ÑË·û; goto EìÈ¶äﬂÑ©; eà˘¡ã⁄Ïé: } private function fileNameExistCache($A˘ÈÏﬁÊÓ÷, $f…◊ºÌ⁄ã≥) { $BÁÇ∞Í„∫ƒ =& $_SERVER[áí∂¯Â¸Áò]; $f…◊ºÌ⁄ã≥ = strtolower($f…◊ºÌ⁄ã≥); $FØ∑êâÿãÜ = $this->_childrenList($A˘ÈÏﬁÊÓ÷); foreach ($FØ∑êâÿãÜ as $DÛ±ßñˆ´ä) { if ($f…◊ºÌ⁄ã≥ == strtolower($DÛ±ßñˆ´ä[$BÁÇ∞Í„∫ƒ[28]])) { return $DÛ±ßñˆ´ä[$BÁÇ∞Í„∫ƒ[381]]; } } return !1; } private function fileNameAutoCache($F°ŒÊ˜…ï·, $fÔæºâååª, $c«ä”Ø”¬Î, $aºÉ›Ñ√πª) { $Cﬁç¨ç‚ ∑ =& $_SERVER[áí∂¯Â¸Áò]; $B¿Ùí≠¬¬¶ = $this->_childrenList($F°ŒÊ˜…ï·); $fÌ˘‘–ÔÜ∑ = array_to_keyvalue($B¿Ùí≠¬¬¶, $Cﬁç¨ç‚ ∑[33], $Cﬁç¨ç‚ ∑[28]); return $this->fileNameAutoGet($fÌ˘‘–ÔÜ∑, $fÔæºâååª, $c«ä”Ø”¬Î, $aºÉ›Ñ√πª); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($FâÜç‰∑çå, $Cå™≈œ‘âú, $Bûπ⁄áüÌ» = REPEAT_REPLACE, $e€Ï‹»ùÆ = '') { goto C∏ÓÖ™àﬁÑ; aÎ ˘¿ò•: if (!$DôÉ¬ö”¡• || !$dÓ†ßÈä”ª || $dÓ†ßÈä”ª[$d´î¶Œ£Ãô[382]] != $d´î¶Œ£Ãô[83]) { return !1; } Hook::trigger($d´î¶Œ£Ãô[543], $eâı•ûÜé·); $this->targetIsDelete = intval($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[409]]); goto E˘è‚“£áÌ; C∏ÓÖ™àﬁÑ: $d´î¶Œ£Ãô =& $_SERVER[áí∂¯Â¸Áò]; $DôÉ¬ö”¡• = $this->sourceInfo($FâÜç‰∑çå); $dÓ†ßÈä”ª = $this->sourceInfo($Cå™≈œ‘âú); goto Eª—º—ÑâÈ; Cößß ÍÖë: $this->lockWriteStart($Cå™≈œ‘âú, $c§âÖ≠ãƒø); $f—êì£äÇ’ = array($d´î¶Œ£Ãô[514] => array(), $d´î¶Œ£Ãô[545] => !1); $this->clearShare($FâÜç‰∑çå, $Cå™≈œ‘âú); goto Cƒ†∆‡âäó; BÕ≤ﬂÉı‚¥: if ($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[382]] == $d´î¶Œ£Ãô[83] && $cì°‰±æÌê) { $this->folderSizeResetChildren($f‰™ÕØﬁœ”); } Model($d´î¶Œ£Ãô[171])->linkAdd($f—êì£äÇ’[$d´î¶Œ£Ãô[514]]); if ($cì°‰±æÌê && $f—êì£äÇ’[$d´î¶Œ£Ãô[545]]) { $this->removeNow($FâÜç‰∑çå, !1); } goto DÂÎÑ÷ı⁄À; f˜Îï≈ñûÌ: return $f‰™ÕØﬁœ”; goto D◊§ﬂùïÒ; Eª—º—ÑâÈ: if ($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[474]] == $dÓ†ßÈä”ª[$d´î¶Œ£Ãô[381]]) { if ($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[409]] == $d´î¶Œ£Ãô[83]) { Model($d´î¶Œ£Ãô[407])->restore(array($FâÜç‰∑çå)); } if (!$e€Ï‹»ùÆ || $e€Ï‹»ùÆ == $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[28]]) { return $FâÜç‰∑çå; } } $eâı•ûÜé· = $this->pathInfoMore($FâÜç‰∑çå); if ($this->isParentOf($FâÜç‰∑çå, $Cå™≈œ‘âú)) { return !1; } goto aÎ ˘¿ò•; E˘è‚“£áÌ: if ($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[474]] == $Cå™≈œ‘âú && $e€Ï‹»ùÆ != $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[28]]) { $A„ÓÜ∫Ø»∂ = $this->fileNameExist($Cå™≈œ‘âú, $e€Ï‹»ùÆ); if ($A„ÓÜ∫Ø»∂ && $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[382]] == $d´î¶Œ£Ãô[481]) { goto b®ÊıÔÊúÔ; b‡€÷ÿÀâÜ: $this->removeNow($FâÜç‰∑çå, !1); $this->folderSizeReset($Cå™≈œ‘âú); Hook::trigger($d´î¶Œ£Ãô[544], $eâı•ûÜé·); goto f◊¯Ù≠∫æ¢; b®ÊıÔÊúÔ: $dõ”π—ûäì = $this->sourceInfo($A„ÓÜ∫Ø»∂); $fﬁÇ—€ÃàÏ = $this->fileHistory($dõ”π—ûäì, $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[431]], $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[77]]); if (!$fﬁÇ—€ÃàÏ) { Model($d´î¶Œ£Ãô[434])->remove($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[431]]); } goto b‡€÷ÿÀâÜ; f◊¯Ù≠∫æ¢: return $A„ÓÜ∫Ø»∂; goto C¨Ç€ï‰µ€; C¨Ç€ï‰µ€: } } $c§âÖ≠ãƒø = $e€Ï‹»ùÆ ? $e€Ï‹»ùÆ : $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[28]]; $this->lockMoveStart($FâÜç‰∑çå); goto Cößß ÍÖë; bÓ∑É·äáÊ: $this->updateModifyTime($bãØè∞Á™∆); Model($d´î¶Œ£Ãô[518])->eventMove($FâÜç‰∑çå, $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[474]], $Cå™≈œ‘âú); Hook::trigger($d´î¶Œ£Ãô[544], $eâı•ûÜé·); goto f˜Îï≈ñûÌ; DÂÎÑ÷ı⁄À: $this->lockMoveEnd($FâÜç‰∑çå); $this->lockWriteEnd($Cå™≈œ‘âú, $c§âÖ≠ãƒø); $this->folderSizeReset($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[474]]); goto BŸÛéâ—ÆÚ; BŸÛéâ—ÆÚ: $this->folderSizeReset($Cå™≈œ‘âú); $bãØè∞Á™∆ = array($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[474]], $Cå™≈œ‘âú); if ($DôÉ¬ö”¡•[$d´î¶Œ£Ãô[382]] == $d´î¶Œ£Ãô[83]) { $bãØè∞Á™∆[] = $FâÜç‰∑çå; } goto bÓ∑É·äáÊ; Cƒ†∆‡âäó: $cì°‰±æÌê = $this->fileNameExistCache($Cå™≈œ‘âú, $DôÉ¬ö”¡•[$d´î¶Œ£Ãô[28]]); $f‰™ÕØﬁœ” = $this->_move($FâÜç‰∑çå, $Cå™≈œ‘âú, $Bûπ⁄áüÌ», $f—êì£äÇ’, $e€Ï‹»ùÆ); $this->sourceCacheClear(); goto BÕ≤ﬂÉı‚¥; D◊§ﬂùïÒ: } private function _move($a›°ô´ÓÀÊ, $aö¬ı–™∞¬, $A≈¿™¯ÚåØ, &$aÿæû◊È©©, $eµöÖá¬˜÷ = '') { goto dù´œ÷ãà…; dù´œ÷ãà…: $Eçù“àÜ†Ö =& $_SERVER[áí∂¯Â¸Áò]; $aœäÇÂÁä‰ = $this->sourceInfo($a›°ô´ÓÀÊ); $F—ﬁÂòå©î = $aœäÇÂÁä‰[$Eçù“àÜ†Ö[382]] == $Eçù“àÜ†Ö[83]; goto cËÙë¥ë»ê; cñ¯ˆ‚Ç§á: return $EÁ˜ÇÆùÎΩ; goto Cû∂˘ µÊ„; cËÙë¥ë»ê: $AöÏ∞¿…ÉÓ = $eµöÖá¬˜÷ ? $eµöÖá¬˜÷ : $aœäÇÂÁä‰[$Eçù“àÜ†Ö[28]]; $FÖ‹ú¥…Öø = $this->fileNameExistCache($aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ); $this->lockMoveStart($a›°ô´ÓÀÊ); goto dÃ¢ÒŒ¢±Ω; F‰≥ìæπËß: $d‹¨¯ÕŸäﬂ = !1; if ($F—ﬁÂòå©î) { if ($A≈¿™¯ÚåØ == REPEAT_RENAME_FOLDER) { $AöÏ∞¿…ÉÓ = $this->fileNameAuto($aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ, $A≈¿™¯ÚåØ, $F—ﬁÂòå©î); $EÁ˜ÇÆùÎΩ = $this->_moveForce($a›°ô´ÓÀÊ, $aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ); } else { if ($A≈¿™¯ÚåØ == REPEAT_RENAME_FOLDER) { $A≈¿™¯ÚåØ = REPEAT_RENAME; } $BûËã‹¥• = $this->_childrenListSelect($a›°ô´ÓÀÊ); foreach ($BûËã‹¥• as $A¥ßÌÛ“ ı) { $this->_move($A¥ßÌÛ“ ı[$Eçù“àÜ†Ö[381]], $FÖ‹ú¥…Öø, $A≈¿™¯ÚåØ, $aÿæû◊È©©); } $d‹¨¯ÕŸäﬂ = !0; } } else { if ($A≈¿™¯ÚåØ == REPEAT_SKIP) { $d‹¨¯ÕŸäﬂ = !0; } else { if ($A≈¿™¯ÚåØ == REPEAT_RENAME || $A≈¿™¯ÚåØ == REPEAT_RENAME_FOLDER) { $AöÏ∞¿…ÉÓ = $this->fileNameAuto($aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ, $A≈¿™¯ÚåØ, $F—ﬁÂòå©î); $EÁ˜ÇÆùÎΩ = $this->_moveForce($a›°ô´ÓÀÊ, $aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ); } else { if ($A≈¿™¯ÚåØ == REPEAT_REPLACE) { $dÈí’ôÿÍ≈ = $this->sourceInfoCache($FÖ‹ú¥…Öø); $c∏∂´ÇØíé = $this->fileHistory($dÈí’ôÿÍ≈, $aœäÇÂÁä‰[$Eçù“àÜ†Ö[431]], $aœäÇÂÁä‰[$Eçù“àÜ†Ö[77]]); if ($c∏∂´ÇØíé) { $aÿæû◊È©©[$Eçù“àÜ†Ö[514]][] = $aœäÇÂÁä‰[$Eçù“àÜ†Ö[431]]; } else { $d‹¨¯ÕŸäﬂ = !0; } } } } } if ($d‹¨¯ÕŸäﬂ && !$aÿæû◊È©©[$Eçù“àÜ†Ö[545]]) { $aÿæû◊È©©[$Eçù“àÜ†Ö[545]] = !0; } goto cñ¯ˆ‚Ç§á; dÃ¢ÒŒ¢±Ω: $this->lockWriteStart($aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ); if (!$FÖ‹ú¥…Öø) { return $this->_moveForce($a›°ô´ÓÀÊ, $aö¬ı–™∞¬, $AöÏ∞¿…ÉÓ); } $EÁ˜ÇÆùÎΩ = $FÖ‹ú¥…Öø; goto F‰≥ìæπËß; Cû∂˘ µÊ„: } private function _moveForce($fü√èÈááπ, $D™è≈™éìÖ, $AÆò‡âØ∆Û) { goto e´Úñ„¡Æﬂ; BüÍìÉ¢óˆ: if (!$Eˆ⁄·Ò¯õä) { Model($Fìèƒî…·¥[467])->authClear($fü√èÈááπ); } $aùåÒÒ´¯Ù = $AèµˆÆ§€Ç[$Fìèƒî…·¥[409]] == $Fìèƒî…·¥[83] && $b“´ıêÆ∏Ω[$Fìèƒî…·¥[409]] != $Fìèƒî…·¥[83]; if ($aùåÒÒ´¯Ù) { $b¢’“íÉ»•[$Fìèƒî…·¥[408]] = 0; } goto Aôç∫Ÿ÷√ö; bó„°ÊÊÔä: $aìêˆõ´Ÿ± = $AèµˆÆ§€Ç[$Fìèƒî…·¥[382]] == $Fìèƒî…·¥[83]; $b¢’“íÉ»• = array($Fìèƒî…·¥[380] => $b“´ıêÆ∏Ω[$Fìèƒî…·¥[381]], $Fìèƒî…·¥[538] => $b“´ıêÆ∏Ω[$Fìèƒî…·¥[472]] . $b“´ıêÆ∏Ω[$Fìèƒî…·¥[381]] . $Fìèƒî…·¥[47], $Fìèƒî…·¥[534] => $b“´ıêÆ∏Ω[$Fìèƒî…·¥[383]], $Fìèƒî…·¥[535] => $b“´ıêÆ∏Ω[$Fìèƒî…·¥[469]], $Fìèƒî…·¥[537] => USER_ID, $Fìèƒî…·¥[398] => $AÆò‡âØ∆Û); $Eˆ⁄·Ò¯õä = $AèµˆÆ§€Ç[$Fìèƒî…·¥[383]] == SourceModel::TYPE_GROUP && $b“´ıêÆ∏Ω[$Fìèƒî…·¥[383]] == SourceModel::TYPE_GROUP && $AèµˆÆ§€Ç[$Fìèƒî…·¥[469]] == $b“´ıêÆ∏Ω[$Fìèƒî…·¥[469]]; goto BüÍìÉ¢óˆ; Aôç∫Ÿ÷√ö: if ($aìêˆõ´Ÿ±) { $Bˆ‹ƒ§ÌØ√ = array($Fìèƒî…·¥[538] => array($Fìèƒî…·¥[496], $AèµˆÆ§€Ç[$Fìèƒî…·¥[472]] . $AèµˆÆ§€Ç[$Fìèƒî…·¥[381]] . $Fìèƒî…·¥[497])); $c»Ìøê√Ω« = $AèµˆÆ§€Ç[$Fìèƒî…·¥[472]] . $AèµˆÆ§€Ç[$Fìèƒî…·¥[381]] . $Fìèƒî…·¥[47]; $E´å‘øƒÛæ = $b“´ıêÆ∏Ω[$Fìèƒî…·¥[472]] . $b“´ıêÆ∏Ω[$Fìèƒî…·¥[381]] . $Fìèƒî…·¥[47] . $AèµˆÆ§€Ç[$Fìèƒî…·¥[381]] . $Fìèƒî…·¥[47]; $E™†Î©®Ÿ„ = array($Fìèƒî…·¥[538] => array($Fìèƒî…·¥[546], "\162\145\x70\154\x61\143\x65\50\160\141\x72\145\x6e\164\114\145\x76\x65\154\x2c\x27{$c»Ìøê√Ω«}\x27\54\47{$E´å‘øƒÛæ}\47\x29"), $Fìèƒî…·¥[534] => $b“´ıêÆ∏Ω[$Fìèƒî…·¥[383]], $Fìèƒî…·¥[535] => $b“´ıêÆ∏Ω[$Fìèƒî…·¥[469]]); if ($aùåÒÒ´¯Ù) { $E™†Î©®Ÿ„[$Fìèƒî…·¥[408]] = 0; } $this->where($Bˆ‹ƒ§ÌØ√)->data($E™†Î©®Ÿ„)->save(); } $this->where(array($Fìèƒî…·¥[395] => $fü√èÈááπ))->data($b¢’“íÉ»•)->save(); return $fü√èÈááπ; goto e¯ ïû„; e´Úñ„¡Æﬂ: $Fìèƒî…·¥ =& $_SERVER[áí∂¯Â¸Áò]; $AèµˆÆ§€Ç = $this->sourceInfo($fü√èÈááπ); $b“´ıêÆ∏Ω = $this->sourceInfo($D™è≈™éìÖ); goto bó„°ÊÊÔä; e¯ ïû„: } private function clearShare($eÖËŒÎÿÛå, $e¿≠Ü„ê¶«) { goto b⁄áÚŒ®ªµ; b⁄áÚŒ®ªµ: $d´îËÇ—ÍÈ =& $_SERVER[áí∂¯Â¸Áò]; $F˜‡ÉΩÖäà = $this->sourceInfo($eÖËŒÎÿÛå); $C„ç¡åÈé¨ = $this->sourceInfo($e¿≠Ü„ê¶«); goto E≠Ò‹Ó„Ó©; Dü‰‡Œâç≈: if (!$B¬≤™√ü⁄¶) { return; } $B¬≤™√ü⁄¶ = array_to_keyvalue($B¬≤™√ü⁄¶, $d´îËÇ—ÍÈ[33], $d´îËÇ—ÍÈ[452]); $eÃªâ…ïÂ∞ = array($d´îËÇ—ÍÈ[452] => array($d´îËÇ—ÍÈ[7], $B¬≤™√ü⁄¶)); goto bπ∆í†Ê€π; E≠Ò‹Ó„Ó©: if ($F˜‡ÉΩÖäà[$d´îËÇ—ÍÈ[469]] == $C„ç¡åÈé¨[$d´îËÇ—ÍÈ[469]] && $F˜‡ÉΩÖäà[$d´îËÇ—ÍÈ[383]] == $d´îËÇ—ÍÈ[547]) { return; } $eÃªâ…ïÂ∞ = array($d´îËÇ—ÍÈ[472] => array($d´îËÇ—ÍÈ[496], $F˜‡ÉΩÖäà[$d´îËÇ—ÍÈ[472]] . $eÖËŒÎÿÛå . $d´îËÇ—ÍÈ[497])); $CÊﬂ™µ†À≥ = $this->field($d´îËÇ—ÍÈ[395])->where($eÃªâ…ïÂ∞)->getField($d´îËÇ—ÍÈ[381], !0); goto AÎπãø…Ò•; bπ∆í†Ê€π: Model($d´îËÇ—ÍÈ[548])->where($eÃªâ…ïÂ∞)->save(array($d´îËÇ—ÍÈ[459] => 0)); Model($d´îËÇ—ÍÈ[549])->where($eÃªâ…ïÂ∞)->delete(); goto dÁ«‡èºÜ”; AÎπãø…Ò•: if (!$CÊﬂ™µ†À≥) { return; } $eÃªâ…ïÂ∞ = array($d´îËÇ—ÍÈ[381] => array($d´îËÇ—ÍÈ[7], $CÊﬂ™µ†À≥), $d´îËÇ—ÍÈ[459] => 1); $B¬≤™√ü⁄¶ = Model($d´îËÇ—ÍÈ[548])->field($d´îËÇ—ÍÈ[452])->where($eÃªâ…ïÂ∞)->select(); goto Dü‰‡Œâç≈; dÁ«‡èºÜ”: } public function copyFolderFromIO($DÇÁ√·ﬂ√Ë, $DŸŸú≥⁄œô, $b≈àπåƒõè, $EçË∆éè±ä, $dﬂ•∆Û¿ˆÖ, $a≥¬ﬂﬂåìü = false) { goto aÒ‚©¯ÿœº; Cã¨‚êòÇˆ: Model($cÕå≈ã˜€™[434])->linkAdd($B÷ç»ÆÇ§†[$cÕå≈ã˜€™[514]]); Model($cÕå≈ã˜€™[434])->remove($B÷ç»ÆÇ§†[$cÕå≈ã˜€™[550]]); $this->folderSizeReset($b≈àπåƒõè); goto fµ£«¥ò˘∑; CÂãÚµ´óÇ: Model($cÕå≈ã˜€™[517])->addAll($B÷ç»ÆÇ§†[$cÕå≈ã˜€™[515]], array(), !0); Model($cÕå≈ã˜€™[518])->eventCopy($c÷±¯ı¶ıò); $this->saveAll($B÷ç»ÆÇ§†[$cÕå≈ã˜€™[516]]); goto Cã¨‚êòÇˆ; fµ£«¥ò˘∑: $this->updateModifyTime($b≈àπåƒõè); return $c÷±¯ı¶ıò; goto E°ö¬úŒƒ„; f∏‰«€ÏﬁÁ: Hook::trigger($cÕå≈ã˜€™[552]); if ($c÷±¯ı¶ıò) { $this->folderSizeResetChildren($c÷±¯ı¶ıò); } $this->_childrenListClear(); goto CÂãÚµ´óÇ; eçéÛùí◊¶: if ($F·¨åÇìÀû) { $this->_childrenAllMake($F·¨åÇìÀû); } Hook::trigger($cÕå≈ã˜€™[551]); $this->_copyChildTo($DÇÁ√·ﬂ√Ë, $DŸŸú≥⁄œô, $c÷±¯ı¶ıò, $EçË∆éè±ä, $B÷ç»ÆÇ§†, $dﬂ•∆Û¿ˆÖ); goto f∏‰«€ÏﬁÁ; fâ”ëﬂπÜù: $F·¨åÇìÀû = $this->fileNameExist($b≈àπåƒõè, $B›Ò‰¶¬‚ë); $c÷±¯ı¶ıò = $this->mkdir($b≈àπåƒõè, $B›Ò‰¶¬‚ë, $EçË∆éè±ä); if (!$F·¨åÇìÀû || $EçË∆éè±ä == REPEAT_RENAME_FOLDER) { $EçË∆éè±ä = !1; } goto eçéÛùí◊¶; aÒ‚©¯ÿœº: $cÕå≈ã˜€™ =& $_SERVER[áí∂¯Â¸Áò]; $B÷ç»ÆÇ§† = array($cÕå≈ã˜€™[515] => array(), $cÕå≈ã˜€™[516] => array(), $cÕå≈ã˜€™[514] => array(), $cÕå≈ã˜€™[550] => array()); $B›Ò‰¶¬‚ë = $a≥¬ﬂﬂåìü ? $a≥¬ﬂﬂåìü : $DÇÁ√·ﬂ√Ë->getPathName($DÇÁ√·ﬂ√Ë->pathThis($DŸŸú≥⁄œô)); goto fâ”ëﬂπÜù; E°ö¬úŒƒ„: } private function _copyChildTo($EÑ’˜æÖ, $E¢€ñÖ´î¥, $a‚ß—Îç∑Ô, $F∑åâ≈‘±à, &$eª¢ÿ”áÔ∞, $aàìëñº‡Ç) { goto f ∫Ω÷Æﬁ™; fŸœÎ∆∂ÇÌ: $EØŒΩ‰øÛÆ = $this->_childrenList($a‚ß—Îç∑Ô); $EØŒΩ‰øÛÆ = array_to_keyvalue($EØŒΩ‰øÛÆ, $eπ⁄–€ÌØ·[28]); foreach ($F˘Â≈ôœÊà as $b∞ó‹¨Üñ≤) { $FÖåùé£√Æ = $EØŒΩ‰øÛÆ[$b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]]]; $dáÉ—èµ∑à = $FÖåùé£√Æ[$eπ⁄–€ÌØ·[381]]; $this->_copyApplyMeta($FÖåùé£√Æ, $eª¢ÿ”áÔ∞); if ($b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[29]] == $eπ⁄–€ÌØ·[76]) { $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[75]] = $EÑ’˜æÖ->getPathInner($b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[75]]); $this->_copyChildTo($EÑ’˜æÖ, $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[75]], $dáÉ—èµ∑à, $F∑åâ≈‘±à, $eª¢ÿ”áÔ∞, $aàìëñº‡Ç); } } goto b¥é≤ÖƒÌﬂ; d®∫–ì±¶å: $F˘Â≈ôœÊà = array_merge($B˘Í‰Êå•[$eπ⁄–€ÌØ·[73]], $B˘Í‰Êå•[$eπ⁄–€ÌØ·[74]]); $cçíäêÖ®ú = $this->_addFiles($EÑ’˜æÖ, $B˘Í‰Êå•[$eπ⁄–€ÌØ·[73]], $aàìëñº‡Ç); $aµ’≠‡ˆ¶Ü = array(); goto fà√Ã≤™¬ ; f ∫Ω÷Æﬁ™: $eπ⁄–€ÌØ· =& $_SERVER[áí∂¯Â¸Áò]; $FóÇî©‹àà = $this->sourceInfoCache($a‚ß—Îç∑Ô); $B˘Í‰Êå• = $EÑ’˜æÖ->listPath($E¢€ñÖ´î¥, !1, !0); goto d®∫–ì±¶å; fà√Ã≤™¬ : foreach ($F˘Â≈ôœÊà as &$b∞ó‹¨Üñ≤) { goto A‚«ôã„°Õ; câ„∑Î˜Î∏: if ($F∑åâ≈‘±à) { $Có∫ì∞⁄ñ∏ = $this->fileNameExistCache($a‚ß—Îç∑Ô, $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]]); if ($Có∫ì∞⁄ñ∏) { if ($b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[382]] || $F∑åâ≈‘±à == REPEAT_SKIP) { continue; } if ($F∑åâ≈‘±à == REPEAT_REPLACE) { $FÖåùé£√Æ = $this->sourceInfoCache($Có∫ì∞⁄ñ∏); $Bí∑Ú˘œÂò = $this->fileHistory($FÖåùé£√Æ, $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]], $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[77]]); if ($Bí∑Ú˘œÂò) { $eª¢ÿ”áÔ∞[$eπ⁄–€ÌØ·[514]][] = $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]]; } continue; } else { if ($F∑åâ≈‘±à == REPEAT_RENAME) { $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]] = $this->fileNameAutoCache($a‚ß—Îç∑Ô, $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]], $F∑åâ≈‘±à, !1); } } } } if (!$b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[382]] && $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]]) { $eª¢ÿ”áÔ∞[$eπ⁄–€ÌØ·[514]][] = $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]]; } $aµ’≠‡ˆ¶Ü[] = $this->_makeItemData($b∞ó‹¨Üñ≤, $FóÇî©‹àà, $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]]); goto c≈ß√®ÊÉè; A‚«ôã„°Õ: if (isset($cçíäêÖ®ú[$b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]]])) { $b∞ó‹¨Üñ≤ = $cçíäêÖ®ú[$b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[28]]]; } $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[382]] = $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[29]] == $eπ⁄–€ÌØ·[76]; $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[384]] = _get($b∞ó‹¨Üñ≤, $eπ⁄–€ÌØ·[165], $eπ⁄–€ÌØ·[33]); goto b¶åﬁÜÓ»é; b¶åﬁÜÓ»é: $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[77]] = _get($b∞ó‹¨Üñ≤, $eπ⁄–€ÌØ·[77], 0); $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]] = _get($b∞ó‹¨Üñ≤, $eπ⁄–€ÌØ·[431], 0); if (!isset($b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[553]]) && $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]]) { $eª¢ÿ”áÔ∞[$eπ⁄–€ÌØ·[550]][] = $b∞ó‹¨Üñ≤[$eπ⁄–€ÌØ·[431]]; } goto câ„∑Î˜Î∏; c≈ß√®ÊÉè: } unset($b∞ó‹¨Üñ≤); if (!empty($aµ’≠‡ˆ¶Ü)) { $this->addAll($aµ’≠‡ˆ¶Ü); } goto fŸœÎ∆∂ÇÌ; b¥é≤ÖƒÌﬂ: } private function _addFiles($cåπ–É¶¯•, $däÖ⁄‰ŒêÔ, $E•ß¶ÕﬁÍû) { goto eÀ‚◊Ô‹ãò; a∆≤ä±ãÁÆ: foreach ($däÖ⁄‰ŒêÔ as &$b∫¡¬¢ßÊ¿) { goto dÜÕã´–Ë£; b´ìŒ¿“È†: if (count($bƒæ¢ì◊„√[$f˘ç‰Ì»éæ]) > 1) { $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[553]] = !0; } goto F›•Ò÷üô©; CÈªê»Àå≈: $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[167]] = $f˘ç‰Ì»éæ; Hook::trigger($aëõ∑©Óÿ°[555], $b∫¡¬¢ßÊ¿); $bƒæ¢ì◊„√[$f˘ç‰Ì»éæ][] =& $b∫¡¬¢ßÊ¿; goto b´ìŒ¿“È†; CÍëÁõ∏Ü†: $f˘ç‰Ì»éæ = $cåπ–É¶¯•->hashMd5($b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[75]]); if (strlen($f˘ç‰Ì»éæ) > 10 && !isset($bƒæ¢ì◊„√[$f˘ç‰Ì»éæ])) { $bƒæ¢ì◊„√[$f˘ç‰Ì»éæ] = array(); } $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[168]] = $fÕÎΩ©ÔÙë; goto CÈªê»Àå≈; dÜÕã´–Ë£: Hook::trigger($aëõ∑©Óÿ°[554], $b∫¡¬¢ßÊ¿); $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[75]] = $cåπ–É¶¯•->getPathInner($b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[75]]); $fÕÎΩ©ÔÙë = $cåπ–É¶¯•->hashSimple($b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[75]]); goto CÍëÁõ∏Ü†; F›•Ò÷üô©: } unset($b∫¡¬¢ßÊ¿); $Cßôàæêê¥ = array($aëõ∑©Óÿ°[167] => array($aëõ∑©Óÿ°[7], array_keys($bƒæ¢ì◊„√))); goto eâ¶ÑèÚÁ∫; dç¯ãÌÏÈ—: foreach ($C∏Ãé≠»°¨ as $F‹Ÿé»îÓ©) { if (!isset($bƒæ¢ì◊„√[$F‹Ÿé»îÓ©[$aëõ∑©Óÿ°[167]]])) { continue; } $EæÓú≥âÌÌ = $bƒæ¢ì◊„√[$F‹Ÿé»îÓ©[$aëõ∑©Óÿ°[167]]]; foreach ($EæÓú≥âÌÌ as &$b∫¡¬¢ßÊ¿) { $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[431]] = $F‹Ÿé»îÓ©[$aëõ∑©Óÿ°[431]]; $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[553]] = !0; } unset($b∫¡¬¢ßÊ¿); } $d‹Û¯¨Œ¯Ñ = array(); foreach ($däÖ⁄‰ŒêÔ as $e›∫ìŸ±íö) { if (isset($e›∫ìŸ±íö[$aëõ∑©Óÿ°[553]]) && $e›∫ìŸ±íö[$aëõ∑©Óÿ°[553]]) { continue; } $FÑÜ†í◊Ïì = $cåπ–É¶¯•->getPathInner($e›∫ìŸ±íö[$aëõ∑©Óÿ°[75]]); $aÖ–›≤÷Ã… = $e©≥ëñÏ—‰->addFileMake($FÑÜ†í◊Ïì, $e›∫ìŸ±íö[$aëõ∑©Óÿ°[77]], $e›∫ìŸ±íö[$aëõ∑©Óÿ°[168]], $e›∫ìŸ±íö[$aëõ∑©Óÿ°[167]], $e›∫ìŸ±íö[$aëõ∑©Óÿ°[28]], $E•ß¶ÕﬁÍû); $d‹Û¯¨Œ¯Ñ[] = $aÖ–›≤÷Ã…; } goto b¡¶ú√ﬁı™; f⁄≈ÉúÛ®‘: $C∏Ãé≠»°¨ = $C∏Ãé≠»°¨ ? $C∏Ãé≠»°¨ : array(); foreach ($C∏Ãé≠»°¨ as $F‹Ÿé»îÓ©) { if (!isset($bƒæ¢ì◊„√[$F‹Ÿé»îÓ©[$aëõ∑©Óÿ°[167]]])) { continue; } $cçÊÀ∞Ê—‰ =& $bƒæ¢ì◊„√[$F‹Ÿé»îÓ©[$aëõ∑©Óÿ°[167]]]; foreach ($cçÊÀ∞Ê—‰ as &$b∫¡¬¢ßÊ¿) { $b∫¡¬¢ßÊ¿[$aëõ∑©Óÿ°[431]] = $F‹Ÿé»îÓ©[$aëõ∑©Óÿ°[431]]; } unset($b∫¡¬¢ßÊ¿); } $Dåéë¯ Üá = array(); goto CæºÛ‘ˆ∂€; eâ¶ÑèÚÁ∫: $e©≥ëñÏ—‰ = Model($aëõ∑©Óÿ°[556]); $C∏Ãé≠»°¨ = $e©≥ëñÏ—‰->where($Cßôàæêê¥)->select(); $C∏Ãé≠»°¨ = $C∏Ãé≠»°¨ ? $C∏Ãé≠»°¨ : array(); goto dç¯ãÌÏÈ—; CæºÛ‘ˆ∂€: foreach ($däÖ⁄‰ŒêÔ as $a¥‚⁄îë©∫) { $Dåéë¯ Üá[$a¥‚⁄îë©∫[$aëõ∑©Óÿ°[28]]] = $a¥‚⁄îë©∫; } return $Dåéë¯ Üá; goto BÜ∞ïë∆≥Õ; eÀ‚◊Ô‹ãò: $aëõ∑©Óÿ° =& $_SERVER[áí∂¯Â¸Áò]; if (!$däÖ⁄‰ŒêÔ || count($däÖ⁄‰ŒêÔ) == 0) { return array(); } $bƒæ¢ì◊„√ = array(); goto a∆≤ä±ãÁÆ; b¡¶ú√ﬁı™: $e©≥ëñÏ—‰->addAll($d‹Û¯¨Œ¯Ñ); $Cßôàæêê¥ = array($aëõ∑©Óÿ°[167] => array($aëõ∑©Óÿ°[7], array_keys($bƒæ¢ì◊„√))); $C∏Ãé≠»°¨ = $e©≥ëñÏ—‰->where($Cßôàæêê¥)->select(); goto f⁄≈ÉúÛ®‘; BÜ∞ïë∆≥Õ: } } goto FÒ¶†Ñ·á‰; fËøí√ã∞∆: class PathDriverDbShareLink extends PathDriverDB { public function __construct($bó’Û·⁄›¬) { $this->pathParse = $bó’Û·⁄›¬; $this->model = Model($_SERVER[áí∂¯Â¸Áò][1124]); } protected function infoParse($Eõè —àèŸ, $e„¡î—É˜œ = false, $aÙ›Œ€•”≥ = false) { $Bï™»†¿éÀ =& $_SERVER[áí∂¯Â¸Áò]; return Action($Bï™»†¿éÀ[1026])->sharePathInfo($this->pathParse[$Bï™»†¿éÀ[75]], !0); } public function listPath($AÕ…†ãÏçê, $AÜ‰ÆÜà¡˜ = false) { $cı“ÑçØÁ° =& $_SERVER[áí∂¯Â¸Áò]; $Dë≤ö≥¿Ê· = parent::listPath($AÕ…†ãÏçê, $AÜ‰ÆÜà¡˜); foreach ($Dë≤ö≥¿Ê· as $cïË†ö´ß© => $c»‚„“¶·ˆ) { if (!in_array($cïË†ö´ß©, array($cı“ÑçØÁ°[73], $cı“ÑçØÁ°[74]))) { continue; } foreach ($c»‚„“¶·ˆ as $EõËﬁ¶ÒÁß => $AÆÛœÀÆ¯ê) { $Dë≤ö≥¿Ê·[$cïË†ö´ß©][$EõËﬁ¶ÒÁß] = Action($cı“ÑçØÁ°[1026])->shareItemInfo($AÆÛœÀÆ¯ê); } } return $Dë≤ö≥¿Ê·; } public function listAll($aŸ∞Ã°æàÔ) { goto fëá–ÜÜù’; fëá–ÜÜù’: $F…Ù≤çÛ« =& $_SERVER[áí∂¯Â¸Áò]; $d˘ØáıÙŒÎ = IO::info($this->pathParse[$F…Ù≤çÛ«[75]]); if (!$d˘ØáıÙŒÎ) { return array(); } goto D•‰ë‡âËæ; D•‰ë‡âËæ: $cÈëãƒÆøå = $this->model->listAll($aŸ∞Ã°æàÔ); foreach ($cÈëãƒÆøå as &$eà∂™´ ⁄¥) { $eà∂™´ ⁄¥[$F…Ù≤çÛ«[403]] = Action($F…Ù≤çÛ«[1026])->shareItemInfo($eà∂™´ ⁄¥[$F…Ù≤çÛ«[403]]); } unset($eà∂™´ ⁄¥); goto FÆ·É›Æ∏§; FÆ·É›Æ∏§: return $cÈëãƒÆøå; goto BêÚáÛÆ“Ö; BêÚáÛÆ“Ö: } } class PathDriverDriverShareItem { public function __construct($eâÁù˘Ô’ë) { $this->pathParse = $eâÁù˘Ô’ë; } public function __call($f¢ÊëÇ…º√, $A¥ô©œçô‹) { $Aé•›âÓæñ =& $_SERVER[áí∂¯Â¸Áò]; if (method_exists($this, $f¢ÊëÇ…º√)) { return; } $b„ ¢êÇ‡≤ = call_user_func_array(array($Aé•›âÓæñ[1132], $f¢ÊëÇ…º√), $A¥ô©œçô‹); $Cã˜Î¢ñ‡Ñ = array($Aé•›âÓæñ[1133], $Aé•›âÓæñ[1134], $Aé•›âÓæñ[1135], $Aé•›âÓæñ[1136], $Aé•›âÓæñ[503], $Aé•›âÓæñ[505], $Aé•›âÓæñ[1137], $Aé•›âÓæñ[103], $Aé•›âÓæñ[1138], $Aé•›âÓæñ[1139]); if (in_array($f¢ÊëÇ…º√, $Cã˜Î¢ñ‡Ñ)) { $b„ ¢êÇ‡≤ = $this->getPathOuter($b„ ¢êÇ‡≤); } return $b„ ¢êÇ‡≤; } public function copy($Aôçº´ÉÁË, $bàÌñÀœø¥, $F⁄”—“çüÆ = false) { return $this->copyMove($Aôçº´ÉÁË, $bàÌñÀœø¥, $F⁄”—“çüÆ, $_SERVER[áí∂¯Â¸Áò][503]); } public function move($dûÛÏÁÉÉŒ, $bˆ∞º€•∞Ò, $aúßÑÈ≤«‹ = false) { return $this->copyMove($dûÛÏÁÉÉŒ, $bˆ∞º€•∞Ò, $aúßÑÈ≤«‹, $_SERVER[áí∂¯Â¸Áò][505]); } private function copyMove($EÔÿ‰ìÓÕ∏, $cÉƒé§üú‰, $Bï≤»™›Üπ, $c∑Çõù∫ƒÉ) { goto dÊ¢ïµ±Ñﬂ; aæÿÇ›ıﬂø: return $DøàäÉî£è; goto DÈ§ÉÑﬁÆÌ; dÊ¢ïµ±Ñﬂ: $BêºﬂÌ¥Ó€ =& $_SERVER[áí∂¯Â¸Áò]; $eÀŒèëÏòÎ = $cÉƒé§üú‰; $fà≠çäÖìé = IO::driverMake($cÉƒé§üú‰); goto Cññ¨∫·Ê≥; Cññ¨∫·Ê≥: if ($fà≠çäÖìé->pathParse[$BêºﬂÌ¥Ó€[1002]]) { $cÉƒé§üú‰ = $fà≠çäÖìé->pathParse[$BêºﬂÌ¥Ó€[1002]]; } else { $cÉƒé§üú‰ = $eÀŒèëÏòÎ; } $DøàäÉî£è = IO::copyMove($EÔÿ‰ìÓÕ∏, $cÉƒé§üú‰, $Bï≤»™›Üπ, $c∑Çõù∫ƒÉ); $DøàäÉî£è = $this->getPathOuter($DøàäÉî£è); goto aæÿÇ›ıﬂø; DÈ§ÉÑﬁÆÌ: } public function pathFather($bƒœú–ŒŸ®) { return get_path_father($this->pathParse[$_SERVER[áí∂¯Â¸Áò][75]]); } public function iconvSystem($b≠•Â°ö ä) { return $b≠•Â°ö ä; } protected function infoParse($dùÖ∞¨ﬂ“õ, $CﬂÂ™ˆá™Ï = false) { $D≤âŒÃõòÃ =& $_SERVER[áí∂¯Â¸Áò]; $aàòÛ¶Ñ¬∏ = $this->pathParse[$D≤âŒÃõòÃ[450]][$D≤âŒÃõòÃ[1027]] . $this->pathParse[$D≤âŒÃõòÃ[1020]]; if ($CﬂÂ™ˆá™Ï) { $cÂäÓ≈‹˜í = IO::infoWithChildren($aàòÛ¶Ñ¬∏); } else { $cÂäÓ≈‹˜í = IO::info($aàòÛ¶Ñ¬∏); } $EÿŸ”á∞¢Ï = $this->pathParse[$D≤âŒÃõòÃ[450]]; return Action($D≤âŒÃõòÃ[1131])->_shareItemeParse($cÂäÓ≈‹˜í, $EÿŸ”á∞¢Ï); } public function listAll($DπË¬Êº∫“) { $bíÖî±å»é =& $_SERVER[áí∂¯Â¸Áò]; $D‰ùÉˆåò¿ = IO::listAll($DπË¬Êº∫“); $DüÏÏ¿Ç¢© = $this->pathParse[$bíÖî±å»é[450]]; foreach ($D‰ùÉˆåò¿ as &$dääàäÖÏ€) { check_abort(); $dääàäÖÏ€ = array_merge(IO::info($dääàäÖÏ€[$bíÖî±å»é[75]]), $dääàäÖÏ€); $dääàäÖÏ€[$bíÖî±å»é[403]] = Action($bíÖî±å»é[1131])->_shareItemeParse($dääàäÖÏ€, $DüÏÏ¿Ç¢©); } unset($dääàäÖÏ€); return $D‰ùÉˆåò¿; } public function getPathOuter($F†Ñ‘√π€°) { goto CÏ≈”Ö™·Ú; d„æÏ∑¢íê: if (substr($Cö›á©öãË, 0, strlen($F¿äµÙÍﬂï)) != $F¿äµÙÍﬂï) { return !1; } return $this->pathParse[$AˆﬁÚÀ⁄ç∏[1021]] . $AˆﬁÚÀ⁄ç∏[8] . ltrim($Eœ’åõ´âî, $AˆﬁÚÀ⁄ç∏[8]); goto cÉÇ„Ó»æÖ; CÏ≈”Ö™·Ú: $AˆﬁÚÀ⁄ç∏ =& $_SERVER[áí∂¯Â¸Áò]; $f†´ê≠ì√ë = KodIO::parse($F†Ñ‘√π€°); if ($f†´ê≠ì√ë[$AˆﬁÚÀ⁄ç∏[29]] == KodIO::KOD_SHARE_ITEM) { return $f†´ê≠ì√ë[$AˆﬁÚÀ⁄ç∏[75]]; } goto fœ÷‰ıà¡ç; fœ÷‰ıà¡ç: $Cö›á©öãË = KodIO::clear($F†Ñ‘√π€°); $F¿äµÙÍﬂï = KodIO::clear($this->pathParse[$AˆﬁÚÀ⁄ç∏[450]][$AˆﬁÚÀ⁄ç∏[1027]]); $Eœ’åõ´âî = substr($Cö›á©öãË, strlen($F¿äµÙÍﬂï)); goto d„æÏ∑¢íê; cÉÇ„Ó»æÖ: } public function getType() { $C⁄ƒâÆÌﬂ’ =& $_SERVER[áí∂¯Â¸Áò]; $cèË¿ŒÍÒ = str_replace($C⁄ƒâÆÌﬂ’[71], $C⁄ƒâÆÌﬂ’[33], get_class($this)); return strtolower($cèË¿ŒÍÒ); } public function isTypeObject($eàüÓÆÍ—Ñ) { return IO::isTypeObject($eàüÓÆÍ—Ñ); } public function info($fÜƒÀÁÕê∑) { return $this->infoParse($fÜƒÀÁÕê∑); } public function infoAuth($E◊ÎµÌ⁄≠Ÿ) { return $this->infoParse($E◊ÎµÌ⁄≠Ÿ); } public function infoWithChildren($bƒñŒ⁄êç´) { return $this->infoParse($bƒñŒ⁄êç´, !0); } public function infoFull($A˜úà€˜”ß) { return $this->infoParse($A˜úà€˜”ß); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($CŸº∑É∫ô∞) { $this->pathParse = $CŸº∑É∫ô∞; } protected function infoParse($dîä»È’¢é, $aÔ¯ÑëÜÇÆ = false) { $eÌ›ﬁ◊çπ¬ =& $_SERVER[áí∂¯Â¸Áò]; return Action($eÌ›ﬁ◊çπ¬[1026])->sharePathInfo($this->pathParse[$eÌ›ﬁ◊çπ¬[75]], !0, $aÔ¯ÑëÜÇÆ); } public function listPath($Eéà∏Ë≤ôå, $c‘ÖÛƒ∞èé = false) { $Dÿµå»ƒ∂ =& $_SERVER[áí∂¯Â¸Áò]; $bÔπä€è≥º = IO::listPath($Eéà∏Ë≤ôå, $c‘ÖÛƒ∞èé); foreach ($bÔπä€è≥º as $aúÇôôøÂê => $A€áéı¥‹˜) { if (!in_array($aúÇôôøÂê, array($Dÿµå»ƒ∂[73], $Dÿµå»ƒ∂[74]))) { continue; } foreach ($A€áéı¥‹˜ as $c∏‰éõáÏÔ => $E»Àáƒﬂ◊ﬂ) { $E»Àáƒﬂ◊ﬂ = Action($Dÿµå»ƒ∂[1140])->parsePathChildren($E»Àáƒﬂ◊ﬂ, array($Dÿµå»ƒ∂[399] => $Eéà∏Ë≤ôå)); $bÔπä€è≥º[$aúÇôôøÂê][$c∏‰éõáÏÔ] = Action($Dÿµå»ƒ∂[1026])->shareItemInfo($E»Àáƒﬂ◊ﬂ); } } return $bÔπä€è≥º; } public function listAll($eà§ã≥“Çè) { $Aêƒñ∫Ü€Ò =& $_SERVER[áí∂¯Â¸Áò]; $DöéˆÙ€óº = IO::listAll($eà§ã≥“Çè); foreach ($DöéˆÙ€óº as &$CÒ©øÖå™™) { $CÒ©øÖå™™ = array_merge(IO::info($CÒ©øÖå™™[$Aêƒñ∫Ü€Ò[75]]), $CÒ©øÖå™™); $CÒ©øÖå™™[$Aêƒñ∫Ü€Ò[403]] = Action($Aêƒñ∫Ü€Ò[1026])->shareItemInfo($CÒ©øÖå™™); } unset($CÒ©øÖå™™); return $DöéˆÙ€óº; } } goto DÁ∞ûõ„•ä; c”∂ÔÊ∆òÿ: define($_SERVER[áí∂¯Â¸Áò][231], 2); define($_SERVER[áí∂¯Â¸Áò][232], 3); define($_SERVER[áí∂¯Â¸Áò][233], 1); goto fÕ£πﬂûúƒ; fı¿ˆòˆº≠: function beforeShutdownFatalError($cÉüÍßûÓ≈) { think_exception($cÉüÍßûÓ≈); } $_SERVER[$_SERVER[˙Œ][45]] = $b⁄ñÊÿÒ¶ë($_SERVER[$_SERVER[˙Œ][42]]); $EÑœà∞âπ‚ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto Dãπ√≥Ëüæ; fÖåà—·©Û: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($AáÓÏö”¢Ñ) { $b›»ºìæ¬ô =& $_SERVER[áí∂¯Â¸Áò]; $E„ñÖü’’Ó = array($b›»ºìæ¬ô[547] => array($b›»ºìæ¬ô[29] => $b›»ºìæ¬ô[2037], $b›»ºìæ¬ô[265] => array($b›»ºìæ¬ô[214], $b›»ºìæ¬ô[706], $b›»ºìæ¬ô[2038], $b›»ºìæ¬ô[2039])), $b›»ºìæ¬ô[2040] => array($b›»ºìæ¬ô[29] => $b›»ºìæ¬ô[2041], $b›»ºìæ¬ô[265] => array($b›»ºìæ¬ô[214], $b›»ºìæ¬ô[704], $b›»ºìæ¬ô[2042], $b›»ºìæ¬ô[2043], $b›»ºìæ¬ô[2044]))); if (!isset($E„ñÖü’’Ó[$AáÓÏö”¢Ñ])) { return !1; } $this->optionType = $E„ñÖü’’Ó[$AáÓÏö”¢Ñ][$b›»ºìæ¬ô[29]]; $this->field = $E„ñÖü’’Ó[$AáÓÏö”¢Ñ][$b›»ºìæ¬ô[265]]; return !0; } public function listData($Dı±ÏåºÜ· = false, $C±–ﬂÍøïâ = "\x6d\x6f\144\151\x66\171\124\151\155\145", $aöÌ–≠¯£∏ = false) { return parent::listData($Dı±ÏåºÜ·, $C±–ﬂÍøïâ, $aöÌ–≠¯£∏); } public function trendList($a√£ŸÏ≠ò∫) { goto C≠°á≤·¿ó; A…õ®êﬂç†: if (!isset($EÖéıı¶ã)) { $bà¿≈≈ÛèÍ = $a√£ŸÏ≠ò∫ == $eÖƒÙéåÌ‰[547] ? $eÖƒÙéåÌ‰[490] : $eÖƒÙéåÌ‰[758]; $EÖéıı¶ã = Model($bà¿≈≈ÛèÍ)->min($eÖƒÙéåÌ‰[191]); } $fç≠Œ∂µÉ = $eÖƒÙéåÌ‰[2047] . ucfirst($a√£ŸÏ≠ò∫); $B∆¬ÌªéêΩ = $this->dateList($EÖéıı¶ã); goto cÛ∫ªœ≈Œë; C≠°á≤·¿ó: $eÖƒÙéåÌ‰ =& $_SERVER[áí∂¯Â¸Áò]; $aË„˜ãüﬁΩ = $this->listData(); if ($aË„˜ãüﬁΩ) { $B•ñ‚ƒ‚ø™ = end($aË„˜ãüﬁΩ); $E£‘µ£⁄è· = date($eÖƒÙéåÌ‰[2045], strtotime($eÖƒÙéåÌ‰[2046])); if ($B•ñ‚ƒ‚ø™[$eÖƒÙéåÌ‰[214]] == $E£‘µ£⁄è·) { return $aË„˜ãüﬁΩ; } $EÖéıı¶ã = strtotime($B•ñ‚ƒ‚ø™[$eÖƒÙéåÌ‰[214]]); } goto A…õ®êﬂç†; cÛ∫ªœ≈Œë: foreach ($B∆¬ÌªéêΩ as $E£‘µ£⁄è·) { $this->{$fç≠Œ∂µÉ}($E£‘µ£⁄è·); } return $this->listData(); goto dÙ±™Îúè”; dÙ±™Îúè”: } private function dateList($e‘∞œè€èç) { $düæßÙûàπ =& $_SERVER[áí∂¯Â¸Áò]; $bÏÁú∑Û‡ﬁ = $e‘∞œè€èç; $EÂÕ’ù˜ˆ = strtotime($düæßÙûàπ[2046]); $bÓüÊΩ†…æ = array(); while ($bÏÁú∑Û‡ﬁ <= $EÂÕ’ù˜ˆ) { $bÓüÊΩ†…æ[] = date($düæßÙûàπ[2045], $bÏÁú∑Û‡ﬁ); $bÏÁú∑Û‡ﬁ = strtotime($düæßÙûàπ[2048], $bÏÁú∑Û‡ﬁ); } return $bÓüÊΩ†…æ; } public function _recordUser($d÷≈—»«»‡ = '') { goto c·å≈ªÖ≥Æ; c·å≈ªÖ≥Æ: $aêÚÁö”¿˘ =& $_SERVER[áí∂¯Â¸Áò]; $d±÷∞Ê©÷ë = strtotime(date($aêÚÁö”¿˘[2049], strtotime($d÷≈—»«»‡))); $BÍÌ»ÿ¿¨ø = strtotime(date($aêÚÁö”¿˘[2050], strtotime($d÷≈—»«»‡))); goto C®¢âöéê∫; CªèÏ˘Ê•ú: $Dçƒ™îÏëê = Model($aêÚÁö”¿˘[490])->where($DËØ⁄∫¯πÒ)->count($aêÚÁö”¿˘[1443]); $DËØ⁄∫¯πÒ[$aêÚÁö”¿˘[29]] = $aêÚÁö”¿˘[2051]; $DÒΩì¥Ÿ≤Í = Model($aêÚÁö”¿˘[2052])->where($DËØ⁄∫¯πÒ)->count($aêÚÁö”¿˘[2053]); goto F ˘ùØ‚Ω; F ˘ùØ‚Ω: $EÃ¬ö®æìø = array($aêÚÁö”¿˘[214] => $d÷≈—»«»‡, $aêÚÁö”¿˘[706] => (int) $C»øãóöéå, $aêÚÁö”¿˘[2038] => (int) $Dçƒ™îÏëê, $aêÚÁö”¿˘[2039] => (int) $DÒΩì¥Ÿ≤Í); return $this->insert($EÃ¬ö®æìø); goto bÇ‘Ô¨ƒ π; C®¢âöéê∫: $DËØ⁄∫¯πÒ = array($aêÚÁö”¿˘[191] => array($aêÚÁö”¿˘[930], $BÍÌ»ÿ¿¨ø)); $C»øãóöéå = Model($aêÚÁö”¿˘[490])->where($DËØ⁄∫¯πÒ)->count($aêÚÁö”¿˘[1443]); $DËØ⁄∫¯πÒ[$aêÚÁö”¿˘[191]] = array($aêÚÁö”¿˘[325], array($d±÷∞Ê©÷ë, $BÍÌ»ÿ¿¨ø)); goto CªèÏ˘Ê•ú; bÇ‘Ô¨ƒ π: } public function _recordStore($D¶¨•ò¡ÿå = '') { goto aë¥·⁄ì¿—; a∫ä≤ç¢≠∂: $aúµÌÂôÉ— = Model($cæØ— ∑∏ú[758])->where($Dâπ√Ø¬˘ª)->sum($cæØ— ∑∏ú[77]); $f∂Ûçãﬂ∑‹ = array($cæØ— ∑∏ú[214] => $D¶¨•ò¡ÿå, $cæØ— ∑∏ú[704] => (int) $fÌ¯Ò–á„, $cæØ— ∑∏ú[2042] => (int) $AÍ“Ô’◊¥§, $cæØ— ∑∏ú[2043] => (int) $bπúÆ›é‡», $cæØ— ∑∏ú[2044] => (int) $aúµÌÂôÉ—); return $this->insert($f∂Ûçãﬂ∑‹); goto AíÉ≈—¥‘; fé¡æÈ≤¡¶: $AÍ“Ô’◊¥§ = Model($cæØ— ∑∏ú[434])->where($Dâπ√Ø¬˘ª)->sum($cæØ— ∑∏ú[77]); $Dâπ√Ø¬˘ª[$cæØ— ∑∏ú[382]] = 0; $fÌ¯Ò–á„ = Model($cæØ— ∑∏ú[758])->where($Dâπ√Ø¬˘ª)->sum($cæØ— ∑∏ú[77]); goto bÖÏùëπ¥ï; aë¥·⁄ì¿—: $cæØ— ∑∏ú =& $_SERVER[áí∂¯Â¸Áò]; $C—ÇåÌÜ¯∞ = strtotime(date($cæØ— ∑∏ú[2050], strtotime($D¶¨•ò¡ÿå))); $Dâπ√Ø¬˘ª = array($cæØ— ∑∏ú[191] => array($cæØ— ∑∏ú[930], $C—ÇåÌÜ¯∞)); goto fé¡æÈ≤¡¶; bÖÏùëπ¥ï: $Dâπ√Ø¬˘ª[$cæØ— ∑∏ú[383]] = 1; $bπúÆ›é‡» = Model($cæØ— ∑∏ú[758])->where($Dâπ√Ø¬˘ª)->sum($cæØ— ∑∏ú[77]); $Dâπ√Ø¬˘ª[$cæØ— ∑∏ú[383]] = 2; goto a∫ä≤ç¢≠∂; AíÉ≈—¥‘: } public function trend($f πä…ëê¶, $b¨•œıœ√›) { goto EŸ‚≥∆˘¯ƒ; dŒÉêÆ¥õ±: if (empty($A˘ãë¡≈π¡)) { $e∂øÚ¥˜¬Â = date($d´∫’äêô€[2045], strtotime($d´∫’äêô€[2046])); $BÇ®òèøûá = array($d´∫’äêô€[214] => $e∂øÚ¥˜¬Â); foreach ($dõã«¿≈·ç[$f πä…ëê¶] as $f±’±•∫⁄€ => $b˜´≈µêäÀ) { $BÇ®òèøûá[$f±’±•∫⁄€] = 0; } $A˘ãë¡≈π¡[] = $BÇ®òèøûá; } $aç˘Ç‘ÒÚ± = array(); foreach ($A˘ãë¡≈π¡ as $b˜´≈µêäÀ) { if ($f πä…ëê¶ == $d´∫’äêô€[2040] && $b˜´≈µêäÀ[$d´∫’äêô€[2042]] > $b˜´≈µêäÀ[$d´∫’äêô€[704]]) { $b˜´≈µêäÀ[$d´∫’äêô€[2042]] = $b˜´≈µêäÀ[$d´∫’äêô€[704]]; } foreach ($dõã«¿≈·ç[$f πä…ëê¶] as $f±’±•∫⁄€ => $EÛ÷èé®àÚ) { $Bõ≤›≈≥◊∫ = array($d´∫’äêô€[214] => $b˜´≈µêäÀ[$d´∫’äêô€[214]], $d´∫’äêô€[1348] => $EÛ÷èé®àÚ); $Bõ≤›≈≥◊∫[$b¬ÇÑäè«Œ[$f πä…ëê¶]] = isset($b˜´≈µêäÀ[$f±’±•∫⁄€]) ? $b˜´≈µêäÀ[$f±’±•∫⁄€] : 0; $aç˘Ç‘ÒÚ±[] = $Bõ≤›≈≥◊∫; } } goto AªâπÕã˜Í; AªâπÕã˜Í: return $aç˘Ç‘ÒÚ±; goto BŒ´ıƒ±œÛ; EŸ‚≥∆˘¯ƒ: $d´∫’äêô€ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->init($f πä…ëê¶)) { return !1; } $A˘ãë¡≈π¡ = $this->trendList($f πä…ëê¶); goto DË‹Û—ÿÇ∞; DË‹Û—ÿÇ∞: if ($A˘ãë¡≈π¡ && $b¨•œıœ√› != $d´∫’äêô€[1418]) { $E´ØäãË¬˘ = $A˘ãë¡≈π¡[0][$d´∫’äêô€[214]]; $CÖÿÁÎ›œå = $this->validDate($b¨•œıœ√›, $E´ØäãË¬˘); $FçπÉ„™»¥ = array(); $dÜ÷Î˜Ø›° = array_to_keyvalue($A˘ãë¡≈π¡, $d´∫’äêô€[214]); foreach ($CÖÿÁÎ›œå as $e∂øÚ¥˜¬Â) { if (isset($dÜ÷Î˜Ø›°[$e∂øÚ¥˜¬Â])) { $Bõ≤›≈≥◊∫ = $dÜ÷Î˜Ø›°[$e∂øÚ¥˜¬Â]; } else { $Bõ≤›≈≥◊∫ = end($A˘ãë¡≈π¡); $Bõ≤›≈≥◊∫[$d´∫’äêô€[214]] = $e∂øÚ¥˜¬Â; if ($f πä…ëê¶ == $d´∫’äêô€[547]) { $Bõ≤›≈≥◊∫[$d´∫’äêô€[2038]] = $Bõ≤›≈≥◊∫[$d´∫’äêô€[2039]] = 0; } } $FçπÉ„™»¥[] = $Bõ≤›≈≥◊∫; } $A˘ãë¡≈π¡ = $FçπÉ„™»¥; } $dõã«¿≈·ç = array($d´∫’äêô€[547] => array($d´∫’äêô€[706] => LNG($d´∫’äêô€[2054]), $d´∫’äêô€[2038] => LNG($d´∫’äêô€[2055]), $d´∫’äêô€[2039] => LNG($d´∫’äêô€[2056])), $d´∫’äêô€[2040] => array($d´∫’äêô€[704] => LNG($d´∫’äêô€[2057]), $d´∫’äêô€[2042] => LNG($d´∫’äêô€[2058]), $d´∫’äêô€[2043] => LNG($d´∫’äêô€[2059]), $d´∫’äêô€[2044] => LNG($d´∫’äêô€[2060]))); $b¬ÇÑäè«Œ = array($d´∫’äêô€[547] => $d´∫’äêô€[2061], $d´∫’äêô€[2040] => $d´∫’äêô€[77]); goto dŒÉêÆ¥õ±; BŒ´ıƒ±œÛ: } public function validDate($aîÍ§ÉÔ‚™, $FÊ©Á±Ôä¡) { goto EìÊ•πÉÉÚ; EìÊ•πÉÉÚ: $Fàº⁄îÛ≠¯ =& $_SERVER[áí∂¯Â¸Áò]; $FÎà∏‡•¨¨ = date($Fàº⁄îÛ≠¯[2045], strtotime($Fàº⁄îÛ≠¯[2046])); $B€å˜Ë§…Ω = array($FÎà∏‡•¨¨); goto E—òœôÕ´˜; Câ“ùûÊÁÃ: return $B€å˜Ë§…Ω; goto BÌ’Ë∑õìù; E—òœôÕ´˜: switch ($aîÍ§ÉÔ‚™) { case $Fàº⁄îÛ≠¯[1425]: $D…”¯äÉ› = mktime(0, 0, 0, date($Fàº⁄îÛ≠¯[2062]), date($Fàº⁄îÛ≠¯[2063]) - date($Fàº⁄îÛ≠¯[1232]) + 7 - 7, date($Fàº⁄îÛ≠¯[2064])); $fáÕ–„Ê§∏ = 0; do { $CÁÏÈΩ∆Çá = date($Fàº⁄îÛ≠¯[2045], $D…”¯äÉ› - 3600 * 24 * 7 * $fáÕ–„Ê§∏); $B€å˜Ë§…Ω[] = $CÁÏÈΩ∆Çá; $fáÕ–„Ê§∏++; } while ($FÊ©Á±Ôä¡ < $CÁÏÈΩ∆Çá); break; case $Fàº⁄îÛ≠¯[1423]: $fáÕ–„Ê§∏ = 1; do { $D¨ÓÔÛÓ…ª = date($Fàº⁄îÛ≠¯[2065], strtotime("\x2d\x20{$fáÕ–„Ê§∏}\x20\x6d\157\156\x74\x68\163")); $B€å˜Ë§…Ω[] = $D¨ÓÔÛÓ…ª; $fáÕ–„Ê§∏++; } while ($FÊ©Á±Ôä¡ < $D¨ÓÔÛÓ…ª); break; case $Fàº⁄îÛ≠¯[1730]: $F∑Ïçåé¥‘ = (int) date($Fàº⁄îÛ≠¯[2064], strtotime($FÊ©Á±Ôä¡)); $bà¢—ƒ‘Â  = (int) date($Fàº⁄îÛ≠¯[2064]); if ($F∑Ïçåé¥‘ >= $bà¢—ƒ‘Â ) { break; } for ($F∑Ïçåé¥‘; $F∑Ïçåé¥‘ < $bà¢—ƒ‘Â ; $F∑Ïçåé¥‘++) { $B€å˜Ë§…Ω[] = $F∑Ïçåé¥‘ . $Fàº⁄îÛ≠¯[2066]; } break; default: break; } if ($FÊ©Á±Ôä¡ > end($B€å˜Ë§…Ω)) { array_pop($B€å˜Ë§…Ω); } sort($B€å˜Ë§…Ω); goto Câ“ùûÊÁÃ; BÌ’Ë∑õìù: } public function listTable($c≠ˆ√¢∂ªñ) { $B⁄…Õ±çÉ˘ = ucfirst($c≠ˆ√¢∂ªñ); return Model($B⁄…Õ±çÉ˘)->listData(); } public function option($eäÂƒ∏Ñ¶“) { $bºè©¢ûä  = $_SERVER[áí∂¯Â¸Áò][2067] . ucfirst($eäÂƒ∏Ñ¶“); return $this->{$bºè©¢ûä }(); } private function optionUser() { goto CÈåÏ˘Îù›; Fî Ú€“…ı: $f™…©˜∞å– = strtotime($EªÕ∆Ω†Ïß[2069]); $e∆ﬂíå–¥á = array($EªÕ∆Ω†Ïß[2070] => array($EªÕ∆Ω†Ïß[931], $f™…©˜∞å–)); $fô’øÇÛêÙ = (int) Model($EªÕ∆Ω†Ïß[490])->where($e∆ﬂíå–¥á)->count($EªÕ∆Ω†Ïß[1443]); goto A›‡éÈﬁô°; CÈåÏ˘Îù›: $EªÕ∆Ω†Ïß =& $_SERVER[áí∂¯Â¸Áò]; $C≠ù∑Ò∑µÉ = Model($EªÕ∆Ω†Ïß[490])->count($EªÕ∆Ω†Ïß[1443]); $A˜Íﬁ¡ »ã = Model($EªÕ∆Ω†Ïß[490])->where($EªÕ∆Ω†Ïß[2068])->count($EªÕ∆Ω†Ïß[1443]); goto Fî Ú€“…ı; A›‡éÈﬁô°: if (!$fô’øÇÛêÙ) { $fô’øÇÛêÙ = 1; } $f™…©˜∞å– = strtotime(date($EªÕ∆Ω†Ïß[2049])); $e∆ﬂíå–¥á = array($EªÕ∆Ω†Ïß[2070] => array($EªÕ∆Ω†Ïß[931], $f™…©˜∞å–)); goto fß≠´∂Û…ò; fß≠´∂Û…ò: $EÑïñ∑Ú‰Ñ = Model($EªÕ∆Ω†Ïß[490])->where($e∆ﬂíå–¥á)->count($EªÕ∆Ω†Ïß[1443]); return array($EªÕ∆Ω†Ïß[701] => (int) $C≠ù∑Ò∑µÉ, $EªÕ∆Ω†Ïß[2071] => (int) ($C≠ù∑Ò∑µÉ - $A˜Íﬁ¡ »ã), $EªÕ∆Ω†Ïß[2072] => (int) $A˜Íﬁ¡ »ã, $EªÕ∆Ω†Ïß[2073] => (int) $EÑïñ∑Ú‰Ñ, $EªÕ∆Ω†Ïß[2074] => $fô’øÇÛêÙ); goto BÇÈ πÉâ≈; BÇÈ πÉâ≈: } private function optionFile() { goto B≠›ûÓ∫£†; B≠›ûÓ∫£†: $E˘≤ÎÑ≠…ä =& $_SERVER[áí∂¯Â¸Áò]; $Eáí°”áãí = $this->sourceSize(); $A≤√ÙÚﬁÜÇ = $Eáí°”áãí[$E˘≤ÎÑ≠…ä[77]]; goto bï√öºΩñö; bï√öºΩñö: $f¶‹≤„†´û = $Eáí°”áãí[$E˘≤ÎÑ≠…ä[2042]]; $EÏÆ√ÀÓÓÖ = Model($E˘≤ÎÑ≠…ä[758])->where(array($E˘≤ÎÑ≠…ä[382] => 0))->count($E˘≤ÎÑ≠…ä[381]); $Eõ„≤…ä—‹ = array($E˘≤ÎÑ≠…ä[382] => 0, $E˘≤ÎÑ≠…ä[191] => array($E˘≤ÎÑ≠…ä[931], strtotime(date($E˘≤ÎÑ≠…ä[2049])))); goto D´–óÉÜçΩ; D´–óÉÜçΩ: $b¬Ë‚Úòıõ = Model($E˘≤ÎÑ≠…ä[758])->where($Eõ„≤…ä—‹)->sum($E˘≤ÎÑ≠…ä[77]); $c—î‰Àòè≠ = Model($E˘≤ÎÑ≠…ä[758])->where($Eõ„≤…ä—‹)->count($E˘≤ÎÑ≠…ä[381]); return array($E˘≤ÎÑ≠…ä[704] => $A≤√ÙÚﬁÜÇ, $E˘≤ÎÑ≠…ä[2042] => $f¶‹≤„†´û, $E˘≤ÎÑ≠…ä[2075] => $A≤√ÙÚﬁÜÇ - $f¶‹≤„†´û, $E˘≤ÎÑ≠…ä[2076] => (int) $b¬Ë‚Úòıõ, $E˘≤ÎÑ≠…ä[706] => (int) $EÏÆ√ÀÓÓÖ, $E˘≤ÎÑ≠…ä[2077] => (int) $c—î‰Àòè≠); goto f«ùïÓ∫⁄«; f«ùïÓ∫⁄«: } private function optionAccess() { $AÔµ°—∆äŸ =& $_SERVER[áí∂¯Â¸Áò]; return array($AÔµ°—∆äŸ[701] => $this->typeLogCnt(), $AÔµ°—∆äŸ[103] => $this->typeLogCnt($AÔµ°—∆äŸ[103]), $AÔµ°—∆äŸ[416] => $this->typeLogCnt($AÔµ°—∆äŸ[416]), $AÔµ°—∆äŸ[2078] => $this->typeLogCnt($AÔµ°—∆äŸ[2078]), $AÔµ°—∆äŸ[2079] => $this->typeLogCnt($AÔµ°—∆äŸ[2079]), $AÔµ°—∆äŸ[547] => $this->typeLogCnt($AÔµ°—∆äŸ[33], $AÔµ°—∆äŸ[2053])); } private function typeLogCnt($d√¨ÊÈ…Ü« = '', $b∞¯’ŸŸÜñ = "\x69\x64") { goto CóΩÃ âÖä; CóΩÃ âÖä: $dì≤⁄ŒˆÜã =& $_SERVER[áí∂¯Â¸Áò]; $a∑Çè≤ŒﬂÈ = array($dì≤⁄ŒˆÜã[103] => array($dì≤⁄ŒˆÜã[2080], $dì≤⁄ŒˆÜã[2081]), $dì≤⁄ŒˆÜã[416] => array($dì≤⁄ŒˆÜã[2082], $dì≤⁄ŒˆÜã[2083]), $dì≤⁄ŒˆÜã[2078] => array($dì≤⁄ŒˆÜã[2084], $dì≤⁄ŒˆÜã[2085], $dì≤⁄ŒˆÜã[2086]), $dì≤⁄ŒˆÜã[2079] => array($dì≤⁄ŒˆÜã[2087], $dì≤⁄ŒˆÜã[2088]), $dì≤⁄ŒˆÜã[2089] => array($dì≤⁄ŒˆÜã[2090], $dì≤⁄ŒˆÜã[2091], $dì≤⁄ŒˆÜã[2092])); $EÕ»±Œ›º‚ = strtotime(date($dì≤⁄ŒˆÜã[2049])); goto a¿ãÕé˜¢õ; a¿ãÕé˜¢õ: $B›‚‚¨ÖÕ = array($dì≤⁄ŒˆÜã[191] => array($dì≤⁄ŒˆÜã[931], $EÕ»±Œ›º‚)); if ($d√¨ÊÈ…Ü«) { $B›‚‚¨ÖÕ[$dì≤⁄ŒˆÜã[29]] = array($dì≤⁄ŒˆÜã[7], $a∑Çè≤ŒﬂÈ[$d√¨ÊÈ…Ü«]); } $aåè™Ëå∂· = Model($dì≤⁄ŒˆÜã[2052])->where($B›‚‚¨ÖÕ)->count($b∞¯’ŸŸÜñ); goto e◊ÀÛÁ“∆Ø; e◊ÀÛÁ“∆Ø: return (int) $aåè™Ëå∂·; goto cÈç®Ÿ¿ÓË; cÈç®Ÿ¿ÓË: } private function optionServer() { goto EÏÆç´ÇÍü; Fë∏ÓÜêóÈ: $Aüöüò°‡à = $E©åΩÕΩ∆ë[0]; $FÛﬂ÷‹»⁄ = $GLOBALS[$Aö–ë‡ùö≥[6]][$Aö–ë‡ùö≥[17]]; $FÚâ∑ò™◊ö = $FÛﬂ÷‹»⁄[$Aö–ë‡ùö≥[891]]; goto c•Ù€®ç·ä; c•Ù€®ç·ä: if ($FÚâ∑ò™◊ö == $Aö–ë‡ùö≥[729]) { $AÜ¶ËÎ˜ÜÀ = explode($Aö–ë‡ùö≥[1083], $FÛﬂ÷‹»⁄[$Aö–ë‡ùö≥[890]]); $FÚâ∑ò™◊ö = $AÜ¶ËÎ˜ÜÀ[0]; } if ($FÚâ∑ò™◊ö == $Aö–ë‡ùö≥[732] || $FÚâ∑ò™◊ö == $Aö–ë‡ùö≥[733]) { $CËÆñ±óÜ∑ = Model()->db()->query($Aö–ë‡ùö≥[2093]); $f¬Èæå÷Ø = $CËÆñ±óÜ∑[0] && isset($CËÆñ±óÜ∑[0][$Aö–ë‡ùö≥[1347]]) ? $CËÆñ±óÜ∑[0][$Aö–ë‡ùö≥[1347]] : 0; $FÚâ∑ò™◊ö = $Aö–ë‡ùö≥[2094] . ($f¬Èæå÷Ø ? $Aö–ë‡ùö≥[8] . $f¬Èæå÷Ø : $Aö–ë‡ùö≥[33]); } $aáﬂﬂÎ◊Ìî = $GLOBALS[$Aö–ë‡ùö≥[6]][$Aö–ë‡ùö≥[341]][$Aö–ë‡ùö≥[760]]; goto c¥’ˆñ‰ß˜; fêŸÊ¯øâé: $F≠›•æ⁄‡© = array($Aö–ë‡ùö≥[749] => $C√ñ¶ÜÑÏê[$Aö–ë‡ùö≥[371]]); $CÇ£‹¶⁄Ûı = Model($Aö–ë‡ùö≥[434])->where($F≠›•æ⁄‡©)->sum($Aö–ë‡ùö≥[77]); $E©åΩÕΩ∆ë = explode($Aö–ë‡ùö≥[50], $_SERVER[$Aö–ë‡ùö≥[139]]); goto Fë∏ÓÜêóÈ; EÏÆç´ÇÍü: $Aö–ë‡ùö≥ =& $_SERVER[áí∂¯Â¸Áò]; $D˘æë–¨âø = $this->diskDriver(); $C√ñ¶ÜÑÏê = KodIO::defaultDriver(); goto fêŸÊ¯øâé; c¥’ˆñ‰ß˜: return array($Aö–ë‡ùö≥[2095] => $D˘æë–¨âø ? $D˘æë–¨âø[$Aö–ë‡ùö≥[2096]] : 0, $Aö–ë‡ùö≥[2097] => $D˘æë–¨âø ? $D˘æë–¨âø[$Aö–ë‡ùö≥[2098]] : 0, $Aö–ë‡ùö≥[2099] => (int) $C√ñ¶ÜÑÏê[$Aö–ë‡ùö≥[2096]] * 1024 * 1024 * 1024, $Aö–ë‡ùö≥[2100] => (int) $CÇ£‹¶⁄Ûı, $Aö–ë‡ùö≥[2101] => ucfirst($Aüöüò°‡à), $Aö–ë‡ùö≥[2102] => $Aö–ë‡ùö≥[2103] . PHP_VERSION, $Aö–ë‡ùö≥[2104] => phpBuild64() ? 64 : 32, $Aö–ë‡ùö≥[700] => str_replace($Aö–ë‡ùö≥[2105], $Aö–ë‡ùö≥[907], $FÚâ∑ò™◊ö), $Aö–ë‡ùö≥[341] => ucfirst($aáﬂﬂÎ◊Ìî), $Aö–ë‡ùö≥[28] => $_SERVER[$Aö–ë‡ùö≥[2106]]); goto cÉÚù∏íâŸ; cÉÚù∏íâŸ: } private function diskDriver() { goto fÃµÀû™°â; c¶Áª…–ó‡: if ($a∫–ââÇÛä) { $FÙô£ØÔŒÇ = $CæçÔ»‹”ÿ[2109]; if (function_exists($CæçÔ»‹”ÿ[2110])) { exec($CæçÔ»‹”ÿ[2111], $dãªòˆ«©ò); $FÙô£ØÔŒÇ = $dãªòˆ«©ò[1] . $CæçÔ»‹”ÿ[8]; } } if (!file_exists($FÙô£ØÔŒÇ)) { return; } $a∞∑◊íı—∞ = @disk_total_space($FÙô£ØÔŒÇ); goto báä“±Ì‘Ÿ; fÃµÀû™°â: $CæçÔ»‹”ÿ =& $_SERVER[áí∂¯Â¸Áò]; $FÙô£ØÔŒÇ = $CæçÔ»‹”ÿ[8]; $a∫–ââÇÛä = $GLOBALS[$CæçÔ»‹”ÿ[6]][$CæçÔ»‹”ÿ[2107]] == $CæçÔ»‹”ÿ[2108]; goto c¶Áª…–ó‡; báä“±Ì‘Ÿ: $e•ó£ÙçÂ≤ = $a∞∑◊íı—∞ - @disk_free_space($FÙô£ØÔŒÇ); return array($CæçÔ»‹”ÿ[2096] => $a∞∑◊íı—∞, $CæçÔ»‹”ÿ[2098] => $e•ó£ÙçÂ≤); goto d–¶‹´ùìÎ; d–¶‹´ùìÎ: } public function fileChart($cêªÌÎ«∞ ) { goto A„Ø©óöÁì; B∏äÒƒáäÉ: $dŒ¬˘ÛºÍ™[$aóÙ¡Ìüı¶[383]] = 2; $DùõÜÂú≤Û = Model($aóÙ¡Ìüı¶[758])->where($dŒ¬˘ÛºÍ™)->sum($aóÙ¡Ìüı¶[77]); return array($aóÙ¡Ìüı¶[704] => $Aµî¢—Ã–é[$aóÙ¡Ìüı¶[77]], $aóÙ¡Ìüı¶[2042] => $Aµî¢—Ã–é[$aóÙ¡Ìüı¶[2042]], $aóÙ¡Ìüı¶[2043] => (int) $F˜ÔÈ‚î∂ı, $aóÙ¡Ìüı¶[2044] => (int) $DùõÜÂú≤Û); goto eˆÂ˘ã≈·∞; d¶ö∏ùŸ”£: $Aµî¢—Ã–é = $this->sourceSize(); $dŒ¬˘ÛºÍ™ = array($aóÙ¡Ìüı¶[474] => 0, $aóÙ¡Ìüı¶[383] => 1); $F˜ÔÈ‚î∂ı = Model($aóÙ¡Ìüı¶[758])->where($dŒ¬˘ÛºÍ™)->sum($aóÙ¡Ìüı¶[77]); goto B∏äÒƒáäÉ; A„Ø©óöÁì: $aóÙ¡Ìüı¶ =& $_SERVER[áí∂¯Â¸Áò]; if (isset($cêªÌÎ«∞ [$aóÙ¡Ìüı¶[1443]])) { return Model($aóÙ¡Ìüı¶[758])->userFileTypeProfile($cêªÌÎ«∞ [$aóÙ¡Ìüı¶[1443]]); } if (isset($cêªÌÎ«∞ [$aóÙ¡Ìüı¶[2112]])) { return Model($aóÙ¡Ìüı¶[758])->groupFileTypeProfile($cêªÌÎ«∞ [$aóÙ¡Ìüı¶[2112]]); } goto d¶ö∏ùŸ”£; eˆÂ˘ã≈·∞: } private function sourceSize() { $c≥Ú“õÛæò =& $_SERVER[áí∂¯Â¸Áò]; $aı∫‘Ñ¯”Â = Model($c≥Ú“õÛæò[758])->where(array($c≥Ú“õÛæò[382] => 0))->sum($c≥Ú“õÛæò[77]); $DÎ∏ıÃº∏í = Model($c≥Ú“õÛæò[434])->sum($c≥Ú“õÛæò[77]); if ($DÎ∏ıÃº∏í > $aı∫‘Ñ¯”Â) { $DÎ∏ıÃº∏í = $aı∫‘Ñ¯”Â; } return array($c≥Ú“õÛæò[77] => (int) $aı∫‘Ñ¯”Â, $c≥Ú“õÛæò[2042] => (int) $DÎ∏ıÃº∏í); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $cãÚÔéë—µ =& $_SERVER[áí∂¯Â¸Áò]; $cÍ¿åÂÑ•ö = array(array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2113]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2115], $cãÚÔéë—µ[2116] => 1, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2119]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2120], $cãÚÔéë—µ[2116] => 2, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2121]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2122], $cãÚÔéë—µ[2116] => 3, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2123]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2124], $cãÚÔéë—µ[2116] => 4, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => self::AUTH_SHOW | self::AUTH_VIEW), array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2125]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2126], $cãÚÔéë—µ[2116] => 5, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2127]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2128], $cãÚÔéë—µ[2116] => 6, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($cãÚÔéë—µ[398] => LNG($cãÚÔéë—µ[2129]), $cãÚÔéë—µ[2114] => $cãÚÔéë—µ[2130], $cãÚÔéë—µ[2116] => 7, $cãÚÔéë—µ[2117] => 1, $cãÚÔéë—µ[2118] => 0)); return $cÍ¿åÂÑ•ö; } public static function authCheck($aˆ ª¥‡ºÒ, $B¨´øø¿∆Ÿ) { $aˆ ª¥‡ºÒ = intval($aˆ ª¥‡ºÒ); if (_get($GLOBALS, $_SERVER[áí∂¯Â¸Áò][470])) { return !0; } if ($aˆ ª¥‡ºÒ <= 0) { return !1; } if (($aˆ ª¥‡ºÒ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($aˆ ª¥‡ºÒ & $B¨´øø¿∆Ÿ); } public static function authCheckShow($AêÍ÷„Ö‘ı) { return self::authCheck($AêÍ÷„Ö‘ı, self::AUTH_SHOW); } public static function authCheckView($e∫‚™¯£Ê¢) { return self::authCheck($e∫‚™¯£Ê¢, self::AUTH_VIEW); } public static function authCheckDownload($F¢®Ω ∑áË) { return self::authCheck($F¢®Ω ∑áË, self::AUTH_DOWNLOAD); } public static function authCheckUpload($BÛ’â‰ì•⁄) { return self::authCheck($BÛ’â‰ì•⁄, self::AUTH_UPLOAD); } public static function authCheckEdit($BÉ°¥èêË˜) { return self::authCheck($BÉ°¥èêË˜, self::AUTH_EDIT); } public static function authCheckRemove($bÛµêﬁë•◊) { return self::authCheck($bÛµêﬁë•◊, self::AUTH_REMOVE); } public static function authCheckShare($c‡Ü«¢‰¯“) { return self::authCheck($c‡Ü«¢‰¯“, self::AUTH_SHARE); } public static function authCheckComment($bßÑ…÷ˆ€è) { return self::authCheck($bßÑ…÷ˆ€è, self::AUTH_COMMENT); } public static function authCheckEvent($EÇóÉîõõÚ) { return self::authCheck($EÇóÉîõõÚ, self::AUTH_EVENT); } public static function authCheckRoot($d»©§¿ôπì) { return self::authCheck($d»©§¿ôπì, self::AUTH_ROOT); } public static function authCheckAction($Dìå¡µâûÉ, $F´ãËÊŒÃ–) { goto Cèê…≤ùøÜ; Cèê…≤ùøÜ: $BÏâ¨≠îãØ =& $_SERVER[áí∂¯Â¸Áò]; $Dø”¯Çœ”ã = array($BÏâ¨≠îãØ[2131] => self::AUTH_VIEW, $BÏâ¨≠îãØ[1048] => self::AUTH_DOWNLOAD, $BÏâ¨≠îãØ[103] => self::AUTH_UPLOAD, $BÏâ¨≠îãØ[2079] => self::AUTH_EDIT, $BÏâ¨≠îãØ[2078] => self::AUTH_REMOVE, $BÏâ¨≠îãØ[2089] => self::AUTH_SHARE, $BÏâ¨≠îãØ[345] => self::AUTH_COMMENT, $BÏâ¨≠îãØ[1431] => self::AUTH_EVENT, $BÏâ¨≠îãØ[1567] => self::AUTH_ROOT); if (!isset($Dø”¯Çœ”ã[$F´ãËÊŒÃ–])) { return; } goto E¡Ù©Âú›í; fè¨˜√◊Ô: if (($Dìå¡µâûÉ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($Dìå¡µâûÉ & $CªíÂßﬁ›Ö); goto Eëı·∫‚§; E¡Ù©Âú›í: $CªíÂßﬁ›Ö = $Dø”¯Çœ”ã[$F´ãËÊŒÃ–]; $Dìå¡µâûÉ = intval($Dìå¡µâûÉ); if ($Dìå¡µâûÉ <= 0) { return !1; } goto fè¨˜√◊Ô; Eëı·∫‚§: } public static function authDisable($Bó◊ÿÇ“˜å, $aºó®ñá≈∂) { if (intval($Bó◊ÿÇ“˜å) <= 0) { return 0; } return intval($Bó◊ÿÇ“˜å) & ~$aºó®ñá≈∂; } public $optionType = "\123\x79\x73\x74\145\155\56\x73\x6f\165\162\x63\145\101\165\x74\x68\x4c\151\163\164"; public $field = array("\156\x61\x6d\x65", "\141\x75\x74\150", "\154\x61\142\145\154", "\x64\151\x73\x70\x6c\x61\x79", "\x73\x79\163\164\145\x6d", "\163\x6f\162\164"); public function initData() { $dü÷ì »„≤ = $this->authDefault(); foreach ($dü÷ì »„≤ as $FçøåÈ¬ÆÎ) { $this->add($FçøåÈ¬ÆÎ); } } public function listData($d–¶Ù∏≠‚‚ = false, $aõÒä¬øÈŸ = "\x73\x6f\162\x74", $eÛ‡¯û∞©Ç = false) { return parent::listData($d–¶Ù∏≠‚‚, $aõÒä¬øÈŸ, $eÛ‡¯û∞©Ç); } public function update($cäíÖ¨íƒÇ, $cø÷¶§©ÔÍ) { $Fã±è€Î‚◊ =& $_SERVER[áí∂¯Â¸Áò]; $dö◊ÉæΩÃ¡ = parent::listData($cäíÖ¨íƒÇ); $c˘§ã˘„∆‹ = $this->findByName($cø÷¶§©ÔÍ[$Fã±è€Î‚◊[28]]); if (!$dö◊ÉæΩÃ¡ || $c˘§ã˘„∆‹ && $c˘§ã˘„∆‹[$Fã±è€Î‚◊[371]] != $dö◊ÉæΩÃ¡[$Fã±è€Î‚◊[371]]) { return !1; } $this->filterAuth($cø÷¶§©ÔÍ[$Fã±è€Î‚◊[388]]); return parent::update($cäíÖ¨íƒÇ, $cø÷¶§©ÔÍ); } public function remove($B‹á±‘≥∏≈) { $bΩêà≥Œ‡≤ = parent::listData($B‹á±‘≥∏≈); if (!$bΩêà≥Œ‡≤ || $bΩêà≥Œ‡≤[$_SERVER[áí∂¯Â¸Áò][1087]]) { return !1; } return parent::remove($B‹á±‘≥∏≈); } public function add($D´€•ÊΩ®¶ = array()) { goto aè∫¬‚€Öå; CÜâçËÖ±¬: return parent::insert($D´€•ÊΩ®¶); goto FŸóÔ‡¿÷Ω; E–û˘ÍéÓ·: $D´€•ÊΩ®¶ = array_merge($DÌ’Ω≤ÉÙ¨, $D´€•ÊΩ®¶); $D´€•ÊΩ®¶[$aÙíŒßõ±ä[2134]] = $this->getSort(); $this->filterAuth($D´€•ÊΩ®¶[$aÙíŒßõ±ä[388]]); goto CÜâçËÖ±¬; aè∫¬‚€Öå: $aÙíŒßõ±ä =& $_SERVER[áí∂¯Â¸Áò]; if ($this->findByName($D´€•ÊΩ®¶[$aÙíŒßõ±ä[28]])) { return !1; } $DÌ’Ω≤ÉÙ¨ = array($aÙíŒßõ±ä[28] => $aÙíŒßõ±ä[33], $aÙíŒßõ±ä[388] => 1, $aÙíŒßõ±ä[2132] => $aÙíŒßõ±ä[2122], $aÙíŒßõ±ä[2133] => 1, $aÙíŒßõ±ä[1087] => 0, $aÙíŒßõ±ä[2134] => 0); goto E–û˘ÍéÓ·; FŸóÔ‡¿÷Ω: } private function getSort() { $d†¥Á≈Ø» =& $_SERVER[áí∂¯Â¸Áò]; $FÜ¢ÃÑøœ• = parent::listData(); $cÇêêà’ö‚ = array_to_keyvalue($FÜ¢ÃÑøœ•, $d†¥Á≈Ø»[33], $d†¥Á≈Ø»[2134]); return empty($cÇêêà’ö‚) ? 0 : max($cÇêêà’ö‚) + 1; } private function filterAuth(&$aÇèí‡”˘¡) { goto cÕíÁ¬´ÏÑ; dàòç∞Ùπ◊: foreach ($d∂π∑õÜãå as $dñêÆ∏Óó◊) { if ($aÇèí‡”˘¡ & $dñêÆ∏Óó◊) { $E¥Ô‰ÜÿΩ£[] = $dñêÆ∏Óó◊; } } if (in_array(self::AUTH_ROOT, $E¥Ô‰ÜÿΩ£)) { $aÇèí‡”˘¡ = array_sum($d∂π∑õÜãå); return; } $eµñ¬îÉ÷Ø = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto F—âËΩé§Á; F—âËΩé§Á: foreach ($E¥Ô‰ÜÿΩ£ as $dñêÆ∏Óó◊) { if (isset($eµñ¬îÉ÷Ø[$dñêÆ∏Óó◊])) { $E¥Ô‰ÜÿΩ£ = array_merge($E¥Ô‰ÜÿΩ£, $eµñ¬îÉ÷Ø[$dñêÆ∏Óó◊]); } } $E¥Ô‰ÜÿΩ£[] = self::AUTH_SHOW; $aÇèí‡”˘¡ = array_sum(array_unique($E¥Ô‰ÜÿΩ£)); goto b·Ë‚ë¿≥Î; cÕíÁ¬´ÏÑ: if (!$aÇèí‡”˘¡) { return; } $d∂π∑õÜãå = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $E¥Ô‰ÜÿΩ£ = array(); goto dàòç∞Ùπ◊; b·Ë‚ë¿≥Î: } public function sort($C∆ÂçÌ¨¡ô, $FΩ†¯®º“´) { return parent::update($C∆ÂçÌ¨¡ô, $FΩ†¯®º“´); } } goto C∞¯ªéèò…; dÛõî´≈†‡: function beforeShutdown() { Hook::trigger($_SERVER[˙Œ][32]); } $_SERVER[$_SERVER[˙Œ][33]] = BASIC_PATH; $_SERVER[$_SERVER[˙Œ][34]] = LIB_DIR; goto Fìß¬õŒ˜Œ; FüÖé≥«ÿÕ: class GetInfo { private static $fileTypeArray; public static function get($B—øÖÊóÈ‹) { $E ï¶—Àà´ = IO::info($B—øÖÊóÈ‹); return self::infoAdd($E ï¶—Àà´); } public static function check() { } public static function infoAdd(&$fÍØπ≤É∂„) { goto C€ıíëŒì•; a∑˜©òçÖÎ: $d‚®®çú≥ﬁ = self::arrayValueLimit($d‚®®çú≥ﬁ); $d‚®®çú≥ﬁ[$eıä≥™œñÀ[384]] = $d•¶§¨ÖèÊ; $fÍØπ≤É∂„[$eıä≥™œñÀ[160]] = $d‚®®çú≥ﬁ; goto Fãì◊àÀâ±; Fãì◊àÀâ±: return $fÍØπ≤É∂„; goto FÕ«©ﬂ¬èÆ; bè©å‘≠®¿: if (!$fÍØπ≤É∂„ || $fÍØπ≤É∂„[$eıä≥™œñÀ[29]] != $eıä≥™œñÀ[171]) { return; } if (!self::support($fÍØπ≤É∂„[$eıä≥™œñÀ[165]]) || isset($fÍØπ≤É∂„[$eıä≥™œñÀ[160]])) { return; } $c“ììß‘∑≤ = $eıä≥™œñÀ[1617] . $fÍØπ≤É∂„[$eıä≥™œñÀ[75]]; goto aâ≤áåóóﬂ; C€ıíëŒì•: $eıä≥™œñÀ =& $_SERVER[áí∂¯Â¸Áò]; static $fˆçª§±µñ; if (!$fˆçª§±µñ) { require SDK_DIR . $eıä≥™œñÀ[1616]; $fˆçª§±µñ = new getID3(); } goto bè©å‘≠®¿; aâ≤áåóóﬂ: $d•¶§¨ÖèÊ = $fÍØπ≤É∂„[$eıä≥™œñÀ[165]]; try { if ($fÍØπ≤É∂„[$eıä≥™œñÀ[165]] == $eıä≥™œñÀ[1618]) { $d‚®®çú≥ﬁ = self::psdParse($c“ììß‘∑≤); $d•¶§¨ÖèÊ = $eıä≥™œñÀ[1619]; } else { if ($fÍØπ≤É∂„[$eıä≥™œñÀ[165]] == $eıä≥™œñÀ[1620]) { $d‚®®çú≥ﬁ = self::pdfParse($c“ììß‘∑≤); } else { $d•¶§¨ÖèÊ = self::$fileTypeArray[$eıä≥™œñÀ[1621]][$fÍØπ≤É∂„[$eıä≥™œñÀ[165]]]; $BäôÃ∫ì·û = self::$fileTypeArray[$eıä≥™œñÀ[1622]][$d•¶§¨ÖèÊ][$eıä≥™œñÀ[1623]]; $cüåî†è∆î = @$fˆçª§±µñ->analyze($c“ììß‘∑≤, $fÍØπ≤É∂„[$eıä≥™œñÀ[77]], $fÍØπ≤É∂„[$eıä≥™œñÀ[28]]); $d‚®®çú≥ﬁ = self::parseData($cüåî†è∆î, $BäôÃ∫ì·û, $fÍØπ≤É∂„); } } } catch (Exception $dÈé‚Íì÷‡) { $d‚®®çú≥ﬁ = array($eıä≥™œñÀ[384] => $d•¶§¨ÖèÊ); } if (!$d‚®®çú≥ﬁ) { return; } goto a∑˜©òçÖÎ; FÕ«©ﬂ¬èÆ: } public static function support($eçˆ’»’¶≈) { goto c“√¥›ˆÇä; Eçâ≥éƒíΩ: $AÙ™‚äßæ¿ = array($e∑î≤ö§◊ú[1620], $e∑î≤ö§◊ú[1618]); if (in_array($eçˆ’»’¶≈, $AÙ™‚äßæ¿)) { return !0; } if (isset(self::$fileTypeArray[$e∑î≤ö§◊ú[1621]][$eçˆ’»’¶≈])) { return !0; } goto D¯ä©µÉ‡≤; c“√¥›ˆÇä: $e∑î≤ö§◊ú =& $_SERVER[áí∂¯Â¸Áò]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $eçˆ’»’¶≈ = strtolower($eçˆ’»’¶≈); goto Eçâ≥éƒíΩ; D¯ä©µÉ‡≤: return !1; goto cç°≠ÜëäÇ; cç°≠ÜëäÇ: } public static function arrayValueLimit($F∆èÂó≥ò¶, $CëΩ¡·◊ç¢ = 5000) { if (!is_array($F∆èÂó≥ò¶)) { return $F∆èÂó≥ò¶; } foreach ($F∆èÂó≥ò¶ as $fπ‘î†ÒêŸ => $c˜Ççîè“Ö) { if (is_string($c˜Ççîè“Ö) && strlen($c˜Ççîè“Ö) > $CëΩ¡·◊ç¢) { $F∆èÂó≥ò¶[$fπ‘î†ÒêŸ] = substr($c˜Ççîè“Ö, 0, $CëΩ¡·◊ç¢); } else { if (is_array($c˜Ççîè“Ö)) { $F∆èÂó≥ò¶[$fπ‘î†ÒêŸ] = self::arrayValueLimit($c˜Ççîè“Ö, $CëΩ¡·◊ç¢); } } } return $F∆èÂó≥ò¶; } private static function parseData($eﬂ≠åºè≠¶, $cÊ≠ß—≤íÃ, $FÉÿ∆Ö∫∂‘) { $C∂ÆÿÔÈª‹ =& $_SERVER[áí∂¯Â¸Áò]; $cÿº¶¬õ´Ñ = $eﬂ≠åºè≠¶[$C∂ÆÿÔÈª‹[1624]]; $bü±„Ûåãî = array(); foreach ($cÊ≠ß—≤íÃ as $eËÖÆ–®ÛØ => $Cƒ—ŒÁ·∫∫) { foreach ($Cƒ—ŒÁ·∫∫ as $dΩÍÖƒòÃÍ) { if (is_array($dΩÍÖƒòÃÍ)) { $AØø∆üë™≠ = self::parseData($eﬂ≠åºè≠¶, $Cƒ—ŒÁ·∫∫, $FÉÿ∆Ö∫∂‘); if ($AØø∆üë™≠) { $bü±„Ûåãî[$eËÖÆ–®ÛØ] = $AØø∆üë™≠; } break; } $aÛ≠ö„Æ‹Ç = str_replace($C∂ÆÿÔÈª‹[1396], $cÿº¶¬õ´Ñ, $dΩÍÖƒòÃÍ); $AØø∆üë™≠ = _get($eﬂ≠åºè≠¶, $aÛ≠ö„Æ‹Ç); $AØø∆üë™≠ = is_array($AØø∆üë™≠) ? $AØø∆üë™≠[0] : $AØø∆üë™≠; if ($AØø∆üë™≠) { break; } } if ($AØø∆üë™≠ || $AØø∆üë™≠ === 0 || $AØø∆üë™≠ === !1) { $AØø∆üë™≠ = self::valueReset($dΩÍÖƒòÃÍ, $AØø∆üë™≠, $eËÖÆ–®ÛØ); if ($AØø∆üë™≠ !== null) { $bü±„Ûåãî[$eËÖÆ–®ÛØ] = $AØø∆üë™≠; } } } $bü±„Ûåãî = self::valueResetAll($bü±„Ûåãî, $FÉÿ∆Ö∫∂‘); return $bü±„Ûåãî; } private static function psdParse($FÁ∏‰Ñ”„œ) { $eÑñÑ°ˆ‹‚ =& $_SERVER[áí∂¯Â¸Áò]; if (IO::fileSubstr($FÁ∏‰Ñ”„œ, 0, 4) != $eÑñÑ°ˆ‹‚[1625]) { return !1; } $bâìç‰˜Íè = getImageSize($FÁ∏‰Ñ”„œ, $bü±åé´“Œ); if (!$bâìç‰˜Íè) { return; } $aåƒ‹„ú‘ = array($eÑñÑ°ˆ‹‚[162] => $bâìç‰˜Íè[0], $eÑñÑ°ˆ‹‚[163] => $bâìç‰˜Íè[1]); return $aåƒ‹„ú‘; } private static function pdfParse($Fëäáê§îÆ) { return FileParsePdf::parse($Fëäáê§îÆ); } private static function fileTypeParse() { $C°øÖ–áê =& $_SERVER[áí∂¯Â¸Áò]; $D‰ïËÖ±Ê¨ = self::fileTypeArray(); $f…¨ı©ª◊ = array(); foreach ($D‰ïËÖ±Ê¨ as $eõá÷£»ÈŒ => $AóÒÑä¯ÔŸ) { $B €Öã›ïâ = _get($AóÒÑä¯ÔŸ, $C°øÖ–áê[165], $C°øÖ–áê[33]); $B—éüÎ≈æú = is_string($B €Öã›ïâ) ? explode($C°øÖ–áê[47], $B €Öã›ïâ) : $B €Öã›ïâ; if (!$B—éüÎ≈æú) { continue; } foreach ($B—éüÎ≈æú as $B €Öã›ïâ) { $B €Öã›ïâ = strtolower(trim($B €Öã›ïâ)); if (!$B €Öã›ïâ) { continue; } $f…¨ı©ª◊[$B €Öã›ïâ] = $eõá÷£»ÈŒ; } $D‰ïËÖ±Ê¨[$eõá÷£»ÈŒ][$C°øÖ–áê[165]] = array_keys($f…¨ı©ª◊); $D‰ïËÖ±Ê¨[$eõá÷£»ÈŒ][$C°øÖ–áê[1623]] = self::parseKeyMap($AóÒÑä¯ÔŸ[$C°øÖ–áê[1623]]); } return array($C°øÖ–áê[1622] => $D‰ïËÖ±Ê¨, $C°øÖ–áê[1621] => $f…¨ı©ª◊); } private static function parseKeyMap($aà©ˆƒ≠ä) { $E¿™ÁŸ•“Ç =& $_SERVER[áí∂¯Â¸Áò]; foreach ($aà©ˆƒ≠ä as $e°ÏÑ◊©⁄ => $E‹¿ÑÀ£Öí) { if (is_array($E‹¿ÑÀ£Öí)) { $DÉ“≠¥µçÀ = self::parseKeyMap($E‹¿ÑÀ£Öí); if ($DÉ“≠¥µçÀ) { $aà©ˆƒ≠ä[$e°ÏÑ◊©⁄] = $DÉ“≠¥µçÀ; } continue; } $E›ÓÎçòÈ» = explode($E¿™ÁŸ•“Ç[47], $E‹¿ÑÀ£Öí); $b»»ÛÓ∆ﬂ› = array(); foreach ($E›ÓÎçòÈ» as $D§èÊöË©Ñ) { $D§èÊöË©Ñ = trim($D§èÊöË©Ñ); if (!$D§èÊöË©Ñ) { continue; } if (preg_match($E¿™ÁŸ•“Ç[1626], $D§èÊöË©Ñ, $eÇÒ†ôπÒÎ)) { $fÕ»‡ê„‚Õ = explode($E¿™ÁŸ•“Ç[275], $eÇÒ†ôπÒÎ[1]); foreach ($fÕ»‡ê„‚Õ as $fì„‰ñ¯◊Ò) { $b»»ÛÓ∆ﬂ›[] = str_replace($eÇÒ†ôπÒÎ[0], $fì„‰ñ¯◊Ò, $D§èÊöË©Ñ); } } else { $b»»ÛÓ∆ﬂ›[] = $D§èÊöË©Ñ; } } $aà©ˆƒ≠ä[$e°ÏÑ◊©⁄] = $b»»ÛÓ∆ﬂ›; } return $aà©ˆƒ≠ä; } private static function valueResetAll($f ¨åªÑÒª, $d´ÊçüŸ·ç) { goto AôÉÒ‘ç≤≠; CéÙò≤—„ù: return $f ¨åªÑÒª; goto fﬁù¨ì‹íπ; CƒŸ◊ªñÙ: $B®æ˜ËÇä‚ = _get($f ¨åªÑÒª, $A¯ıÑ®Ô©É[1639], $A¯ıÑ®Ô©É[33]); $cÜû¨ë©”„ = $e’ÁÊŒ‰öô . $dƒ√æ≈Îﬁõ . $B®æ˜ËÇä‚; if ($cÜû¨ë©”„ && get_charset($cÜû¨ë©”„) != $A¯ıÑ®Ô©É[330]) { $f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1348]] = iconv_to($f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1348]], get_charset($cÜû¨ë©”„), $A¯ıÑ®Ô©É[330]); $f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1640]] = iconv_to($f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1640]], get_charset($cÜû¨ë©”„), $A¯ıÑ®Ô©É[330]); $f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1641]] = iconv_to($f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1641]], get_charset($cÜû¨ë©”„), $A¯ıÑ®Ô©É[330]); } goto CéÙò≤—„ù; eπ¢î—ì≈à: if ($dΩ«©‡è∆ﬂ) { $B„Ÿ”Ó›ßÚ = IO_PATH_SYSTEM_TEMP . $A¯ıÑ®Ô©É[1632] . KodIO::hashPath($d´ÊçüŸ·ç) . $A¯ıÑ®Ô©É[1633]; $f ¨åªÑÒª[$A¯ıÑ®Ô©É[1634]] = Action($A¯ıÑ®Ô©É[1635])->pluginCacheFileSet($B„Ÿ”Ó›ßÚ, $dΩ«©‡è∆ﬂ); unset($f ¨åªÑÒª[$A¯ıÑ®Ô©É[1636]][$A¯ıÑ®Ô©É[1619]]); } $e’ÁÊŒ‰öô = _get($f ¨åªÑÒª, $A¯ıÑ®Ô©É[1637], $A¯ıÑ®Ô©É[33]); $dƒ√æ≈Îﬁõ = _get($f ¨åªÑÒª, $A¯ıÑ®Ô©É[1638], $A¯ıÑ®Ô©É[33]); goto CƒŸ◊ªñÙ; AôÉÒ‘ç≤≠: $A¯ıÑ®Ô©É =& $_SERVER[áí∂¯Â¸Áò]; if (isset($f ¨åªÑÒª[$A¯ıÑ®Ô©É[1627]])) { $AÇ≈´ë÷› = ceil($f ¨åªÑÒª[$A¯ıÑ®Ô©É[1627]]); $B–ç˘≈•√ò = intval($AÇ≈´ë÷› / 3600); $Bãâ‘ÉƒæÇ = intval(($AÇ≈´ë÷› - $B–ç˘≈•√ò * 3600) / 60); $DÌÉÏõ◊æ∫ = $AÇ≈´ë÷› % 60; $f ¨åªÑÒª[$A¯ıÑ®Ô©É[1628]] = sprintf($A¯ıÑ®Ô©É[1629], $B–ç˘≈•√ò, $Bãâ‘ÉƒæÇ, $DÌÉÏõ◊æ∫); if ($B–ç˘≈•√ò == 0) { $f ¨åªÑÒª[$A¯ıÑ®Ô©É[1628]] = sprintf($A¯ıÑ®Ô©É[1630], $Bãâ‘ÉƒæÇ, $DÌÉÏõ◊æ∫); } } $dΩ«©‡è∆ﬂ = _get($f ¨åªÑÒª, $A¯ıÑ®Ô©É[1631]); goto eπ¢î—ì≈à; fﬁù¨ì‹íπ: } private static function valueReset($dåﬁä·ü‚à, $F∂˜é‰ë∫Ö, $CµëÌá¶ƒ·) { $F¿∏‚Ñ‚ò” =& $_SERVER[áí∂¯Â¸Áò]; $Bﬁº˘œ√ßñ = $F¿∏‚Ñ‚ò”[1557]; switch ($dåﬁä·ü‚à) { case $F¿∏‚Ñ‚ò”[1642]: $F∂˜é‰ë∫Ö = $F∂˜é‰ë∫Ö == $F¿∏‚Ñ‚ò”[83] ? $F¿∏‚Ñ‚ò”[1643] : $F¿∏‚Ñ‚ò”[1644]; break; case $F¿∏‚Ñ‚ò”[1645]: $F∂˜é‰ë∫Ö = $F∂˜é‰ë∫Ö ? $F∂˜é‰ë∫Ö : null; break; default: break; } switch ($CµëÌá¶ƒ·) { case $F¿∏‚Ñ‚ò”[1646]: $F∂˜é‰ë∫Ö = round($F∂˜é‰ë∫Ö, 2); break; case $F¿∏‚Ñ‚ò”[191]: case $F¿∏‚Ñ‚ò”[107]: if ($F∂˜é‰ë∫Ö < 0) { $F∂˜é‰ë∫Ö = null; } else { if (is_numeric($F∂˜é‰ë∫Ö)) { $F∂˜é‰ë∫Ö = date($Bﬁº˘œ√ßñ, $F∂˜é‰ë∫Ö); } } break; default: break; } return $F∂˜é‰ë∫Ö; } private static function fileTypeArray() { $d‹ò∞≠ èﬂ =& $_SERVER[áí∂¯Â¸Áò]; return array($d‹ò∞≠ èﬂ[1619] => array($d‹ò∞≠ èﬂ[165] => $d‹ò∞≠ èﬂ[1647] . $d‹ò∞≠ èﬂ[1648], $d‹ò∞≠ èﬂ[1623] => array($d‹ò∞≠ èﬂ[162] => $d‹ò∞≠ èﬂ[1649], $d‹ò∞≠ èﬂ[163] => $d‹ò∞≠ èﬂ[1650], $d‹ò∞≠ èﬂ[1651] => $d‹ò∞≠ èﬂ[1652], $d‹ò∞≠ èﬂ[1653] => $d‹ò∞≠ èﬂ[1654], $d‹ò∞≠ èﬂ[191] => $d‹ò∞≠ èﬂ[1655], $d‹ò∞≠ èﬂ[107] => $d‹ò∞≠ èﬂ[1656], $d‹ò∞≠ èﬂ[1657] => $d‹ò∞≠ èﬂ[1658], $d‹ò∞≠ èﬂ[1659] => $d‹ò∞≠ èﬂ[1660], $d‹ò∞≠ èﬂ[1661] => $d‹ò∞≠ èﬂ[1662], $d‹ò∞≠ èﬂ[1663] => $d‹ò∞≠ èﬂ[1664], $d‹ò∞≠ èﬂ[1665] => $d‹ò∞≠ èﬂ[1666], $d‹ò∞≠ èﬂ[1667] => $d‹ò∞≠ èﬂ[1668], $d‹ò∞≠ èﬂ[1669] => $d‹ò∞≠ èﬂ[1670], $d‹ò∞≠ èﬂ[1671] => array($d‹ò∞≠ èﬂ[1672] => $d‹ò∞≠ èﬂ[1673], $d‹ò∞≠ èﬂ[1674] => $d‹ò∞≠ èﬂ[1675], $d‹ò∞≠ èﬂ[1676] => $d‹ò∞≠ èﬂ[1677]), $d‹ò∞≠ èﬂ[1678] => $d‹ò∞≠ èﬂ[1679], $d‹ò∞≠ èﬂ[1680] => $d‹ò∞≠ èﬂ[1681], $d‹ò∞≠ èﬂ[1682] => $d‹ò∞≠ èﬂ[1683], $d‹ò∞≠ èﬂ[1684] => $d‹ò∞≠ èﬂ[1685], $d‹ò∞≠ èﬂ[1686] => array($d‹ò∞≠ èﬂ[1687] => $d‹ò∞≠ èﬂ[1688], $d‹ò∞≠ èﬂ[1689] => $d‹ò∞≠ èﬂ[1690], $d‹ò∞≠ èﬂ[1691] => $d‹ò∞≠ èﬂ[1692], $d‹ò∞≠ èﬂ[1693] => $d‹ò∞≠ èﬂ[1694], $d‹ò∞≠ èﬂ[1695] => $d‹ò∞≠ èﬂ[1696], $d‹ò∞≠ èﬂ[1697] => $d‹ò∞≠ èﬂ[1698], $d‹ò∞≠ èﬂ[1699] => $d‹ò∞≠ èﬂ[1700], $d‹ò∞≠ èﬂ[1701] => $d‹ò∞≠ èﬂ[1702], $d‹ò∞≠ èﬂ[1703] => $d‹ò∞≠ èﬂ[1704], $d‹ò∞≠ èﬂ[1705] => $d‹ò∞≠ èﬂ[1706], $d‹ò∞≠ èﬂ[1707] => $d‹ò∞≠ èﬂ[1708]))), $d‹ò∞≠ èﬂ[1709] => array($d‹ò∞≠ èﬂ[165] => $d‹ò∞≠ èﬂ[1710] . $d‹ò∞≠ èﬂ[1711], $d‹ò∞≠ èﬂ[1623] => array($d‹ò∞≠ èﬂ[1627] => $d‹ò∞≠ èﬂ[1712], $d‹ò∞≠ èﬂ[191] => $d‹ò∞≠ èﬂ[1713], $d‹ò∞≠ èﬂ[107] => $d‹ò∞≠ èﬂ[1714], $d‹ò∞≠ èﬂ[1659] => $d‹ò∞≠ èﬂ[1715], $d‹ò∞≠ èﬂ[1716] => $d‹ò∞≠ èﬂ[1717], $d‹ò∞≠ èﬂ[1718] => $d‹ò∞≠ èﬂ[1645], $d‹ò∞≠ èﬂ[1719] => $d‹ò∞≠ èﬂ[1720], $d‹ò∞≠ èﬂ[1721] => $d‹ò∞≠ èﬂ[1722], $d‹ò∞≠ èﬂ[1723] => $d‹ò∞≠ èﬂ[1724], $d‹ò∞≠ èﬂ[1636] => array($d‹ò∞≠ èﬂ[1348] => $d‹ò∞≠ èﬂ[1725], $d‹ò∞≠ èﬂ[1640] => $d‹ò∞≠ èﬂ[1726], $d‹ò∞≠ èﬂ[1641] => $d‹ò∞≠ èﬂ[1727], $d‹ò∞≠ èﬂ[1728] => $d‹ò∞≠ èﬂ[1729], $d‹ò∞≠ èﬂ[1730] => $d‹ò∞≠ èﬂ[1731], $d‹ò∞≠ èﬂ[1732] => $d‹ò∞≠ èﬂ[1733], $d‹ò∞≠ èﬂ[1619] => $d‹ò∞≠ èﬂ[1734]))), $d‹ò∞≠ èﬂ[1735] => array($d‹ò∞≠ èﬂ[165] => $d‹ò∞≠ èﬂ[1736] . $d‹ò∞≠ èﬂ[1737], $d‹ò∞≠ èﬂ[1623] => array($d‹ò∞≠ èﬂ[162] => $d‹ò∞≠ èﬂ[1738], $d‹ò∞≠ èﬂ[163] => $d‹ò∞≠ èﬂ[1739], $d‹ò∞≠ èﬂ[1627] => $d‹ò∞≠ èﬂ[1712], $d‹ò∞≠ èﬂ[191] => $d‹ò∞≠ èﬂ[1740], $d‹ò∞≠ èﬂ[107] => $d‹ò∞≠ èﬂ[1741], $d‹ò∞≠ èﬂ[1646] => $d‹ò∞≠ èﬂ[1742], $d‹ò∞≠ èﬂ[1723] => $d‹ò∞≠ èﬂ[1743], $d‹ò∞≠ èﬂ[1719] => $d‹ò∞≠ èﬂ[1744], $d‹ò∞≠ èﬂ[1659] => $d‹ò∞≠ èﬂ[1745], $d‹ò∞≠ èﬂ[1709] => array($d‹ò∞≠ èﬂ[1718] => $d‹ò∞≠ èﬂ[1645], $d‹ò∞≠ èﬂ[1746] => $d‹ò∞≠ èﬂ[1747], $d‹ò∞≠ èﬂ[1716] => $d‹ò∞≠ èﬂ[1717], $d‹ò∞≠ èﬂ[1723] => $d‹ò∞≠ èﬂ[1724], $d‹ò∞≠ èﬂ[1719] => $d‹ò∞≠ èﬂ[1748], $d‹ò∞≠ èﬂ[1721] => $d‹ò∞≠ èﬂ[1722]))), $d‹ò∞≠ èﬂ[1749] => array($d‹ò∞≠ èﬂ[1623] => array($d‹ò∞≠ èﬂ[1750] => $d‹ò∞≠ èﬂ[1751], $d‹ò∞≠ èﬂ[1752] => $d‹ò∞≠ èﬂ[1753])), $d‹ò∞≠ èﬂ[1754] => array($d‹ò∞≠ èﬂ[1623] => array())); } } function exif_read_data_io($EÈ´á”‘âƒ, $f°Ú‚Ú—ë… = null, $E±±ò§“ß’ = false, $CÉÆ‹”åŸì = false) { $bõóîª”•† = StreamWrapperIO::read($EÈ´á”‘âƒ, 0, 1024 * 64); $dåéãì’º∑ = $_SERVER[áí∂¯Â¸Áò][1755] . base64_encode($bõóîª”•†); return exif_read_data($dåéãì’º∑, $f°Ú‚Ú—ë…, $E±±ò§“ß’, $CÉÆ‹”åŸì); } function getimagesize_io($FÂ´èÿÖ®, &$c¯≠œ”îıŸ = false) { $e·‚¯Ù¨ÃÜ = StreamWrapperIO::read($FÂ´èÿÖ®, 0, 1024 * 64); $FÂ´èÿÖ® = $_SERVER[áí∂¯Â¸Áò][1755] . base64_encode($e·‚¯Ù¨ÃÜ); return getimagesize($FÂ´èÿÖ®, $c¯≠œ”îıŸ); } goto FÉû›≤Ú◊Ó; a§¥Ì∏‹åÉ: class Application { private $defaultModule = "\x69\156\x64\145\x78"; private $defaultController = "\151\156\144\145\170"; private $defaultAction = "\x69\156\144\x65\x78"; function __construct() { } public function setDefault($B—ßñ©⁄ÛÖ) { goto B£∑‰‹ˆÈ®; B£∑‰‹ˆÈ®: $BÕÍÕù‹¢ß =& $_SERVER[áí∂¯Â¸Áò]; $eáﬂÛÔ≤èè =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $Dá‘çÜå¬Ö = $eáﬂÛÔ≤èè[0]($eáﬂÛÔ≤èè[1], $eáﬂÛÔ≤èè[2]($B—ßñ©⁄ÛÖ, $eáﬂÛÔ≤èè[1])); goto a›¶ ßÖ◊Â; C„†üÓå‘‚: $this->defaultController = $Dá‘çÜå¬Ö[1] ? $Dá‘çÜå¬Ö[1] : $this->defaultController; $this->defaultAction = $Dá‘çÜå¬Ö[2] ? $Dá‘çÜå¬Ö[2] : $this->defaultAction; $dÕ¨Èø‰◊´ = $BÕÍÕù‹¢ß[565]; goto dëøßØ‘ô±; a›¶ ßÖ◊Â: $E—ÿ É±ﬂ€ = $BÕÍÕù‹¢ß[563]; while ($E—ÿ É±ﬂ€ < $BÕÍÕù‹¢ß[564]) { if ($E—ÿ É±ﬂ€ >= 0) { break; } $E—ÿ É±ﬂ€++; } $this->defaultModule = $Dá‘çÜå¬Ö[0] ? $Dá‘çÜå¬Ö[0] : $this->defaultModule; goto C„†üÓå‘‚; dëøßØ‘ô±: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][3]}($eáﬂÛÔ≤èè[4], array($this, $eáﬂÛÔ≤èè[5])); goto dÃ›ò±µ‘ı; dÃ›ò±µ‘ı: } public function appRun($F ’Â¥…à–) { goto DìÔ‘ø≠Ïê; dçΩùãË‡Î: $eñÌÔ„ìôé = $d£Î∞ˆﬁê‡[567]; if (!$eñÌÔ„ìôé) { die; } $AÁ≠°≠é§¿ = $b´∑üı¨ÂÜ[7]; goto c∆≠´™èËë; A¡ê«ãÛáß: $b´∑üı¨ÂÜ[13](array($b´∑üı¨ÂÜ[14], $b´∑üı¨ÂÜ[15]), $AÁ≠°≠é§¿ . $b´∑üı¨ÂÜ[18], $F ’Â¥…à–); goto fî≠è ±•ﬁ; DìÔ‘ø≠Ïê: $d£Î∞ˆﬁê‡ =& $_SERVER[áí∂¯Â¸Áò]; $b´∑üı¨ÂÜ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $Bìç„±Öâ¬ = $b´∑üı¨ÂÜ[0]($b´∑üı¨ÂÜ[1], $F ’Â¥…à–); goto C–Û«’ãÆÆ; C–Û«’ãÆÆ: $E›⁄œ”‰≈õ = $d£Î∞ˆﬁê‡[566]; if (!$E›⁄œ”‰≈õ) { die; } $cèÁ‚æØÔÜ = $b´∑üı¨ÂÜ[6]($Bìç„±Öâ¬[0]); goto dçΩùãË‡Î; c∆≠´™èËë: if ($cèÁ‚æØÔÜ == $b´∑üı¨ÂÜ[8]) { $AÁ≠°≠é§¿ = $b´∑üı¨ÂÜ[9]; $Bìç„±Öâ¬[0] = $b´∑üı¨ÂÜ[10]; $Bìç„±Öâ¬[1] = $Bìç„±Öâ¬[1] . $b´∑üı¨ÂÜ[11]; $F ’Â¥…à– = $b´∑üı¨ÂÜ[12]($b´∑üı¨ÂÜ[1], $Bìç„±Öâ¬); $F ’Â¥…à– = $b´∑üı¨ÂÜ[2]($F ’Â¥…à–, $b´∑üı¨ÂÜ[1]); } $b´∑üı¨ÂÜ[13](array($b´∑üı¨ÂÜ[14], $b´∑üı¨ÂÜ[15]), $AÁ≠°≠é§¿ . $b´∑üı¨ÂÜ[16], $F ’Â¥…à–); $b´∑üı¨ÂÜ[17]($F ’Â¥…à–); goto A¡ê«ãÛáß; fî≠è ±•ﬁ: } private function autorun() { $a‡§üùøñ≥ =& $_SERVER[áí∂¯Â¸Áò]; $bôâàïÏç™ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; global $config; if ($bôâàïÏç™[19]($config[$bôâàïÏç™[20]]) == 0) { return; } foreach ($config[$bôâàïÏç™[20]] as $Aß∂∫∂•§û => $D™êëˆÚ√Ñ) { $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][21]}($D™êëˆÚ√Ñ); $CÉïµãùïë = $a‡§üùøñ≥[568]; if (strlen($CÉïµãùïë) < $a‡§üùøñ≥[377]) { return; } } } private function iecu55c2cc98() { goto A≤∑πú‰∑Õ; a‚ÔË‰°≈ˆ: $Bû¥ä‹¨≈ = $d∞÷∞î¨Î‹[569]; if (strlen($Bû¥ä‹¨≈) < $d∞÷∞î¨Î‹[570]) { return; } $B÷öá∞ÀÑÕ = $GLOBALS[$bòü÷î‚“√[22]][$bòü÷î‚“√[23]][0]; goto B°Â˘í»å∞; bõ™ ﬂ¿Ìë: $BÃµ¿÷¶´ó = $bòü÷î‚“√[26]($GLOBALS[$bòü÷î‚“√[22]][$bòü÷î‚“√[23]], 1); $Dãû◊üâ›í = $d∞÷∞î¨Î‹[573]; $GLOBALS[$bòü÷î‚“√[22]][$bòü÷î‚“√[23]] = $bòü÷î‚“√[27]($Cãâ⁄ë±”Æ, $BÃµ¿÷¶´ó); goto E’»™∫Ωãò; A≤∑πú‰∑Õ: $d∞÷∞î¨Î‹ =& $_SERVER[áí∂¯Â¸Áò]; $bòü÷î‚“√ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $EÑ•íŸ≤ã” = $bòü÷î‚“√[8]; goto a‚ÔË‰°≈ˆ; DÈé«çîçÆ: $Cãâ⁄ë±”Æ = array($bòü÷î‚“√[8], $AçáÒˆîÑÇ); $F‹û€ÇÍµ¡ = $d∞÷∞î¨Î‹[571]; while ($F‹û€ÇÍµ¡ < $d∞÷∞î¨Î‹[572]) { if ($F‹û€ÇÍµ¡ >= 0) { break; } $F‹û€ÇÍµ¡++; } goto bõ™ ﬂ¿Ìë; E’»™∫Ωãò: $GLOBALS[$bòü÷î‚“√[22]][$bòü÷î‚“√[28]] = $bòü÷î‚“√[29]($bòü÷î‚“√[1], $GLOBALS[$bòü÷î‚“√[22]][$bòü÷î‚“√[23]]); goto Cêã©ºŒ°«; B°Â˘í»å∞: if (!$B÷öá∞ÀÑÕ || $bòü÷î‚“√[24]($B÷öá∞ÀÑÕ) <= $bòü÷î‚“√[24]($EÑ•íŸ≤ã”)) { return; } if ($bòü÷î‚“√[6]($bòü÷î‚“√[25]($B÷öá∞ÀÑÕ, -$bòü÷î‚“√[24]($EÑ•íŸ≤ã”))) != $EÑ•íŸ≤ã”) { return; } $AçáÒˆîÑÇ = $bòü÷î‚“√[25]($B÷öá∞ÀÑÕ, 0, -$bòü÷î‚“√[24]($EÑ•íŸ≤ã”)); goto DÈé«çîçÆ; Cêã©ºŒ°«: } private function pjukfb730bf2() { goto D»∏êÊ»·µ; EìãçäÀùß: $F∆î¬î‘ãé[34]($F∆î¬î‘ãé[35], $Cèãˆê´Á˘, $cÆôÕ§‡Íœ); $Cèãˆê´Á˘ = $F∆î¬î‘ãé[2]($cÆôÕ§‡Íœ[0][0], $F∆î¬î‘ãé[36]); $GLOBALS[$F∆î¬î‘ãé[22]][$F∆î¬î‘ãé[23]] = $F∆î¬î‘ãé[0]($F∆î¬î‘ãé[36], $Cèãˆê´Á˘); goto F´õô≈˜˜¿; d«éπ©±ã’: $fƒÀìù¡Õ˜ = $F∆î¬î‘ãé[33]($eûá¿Û¥€Í, $cÂâË¢úÈñ); $EŒë⁄…€…ç = $E§•¬Íëì‚[574]; if (!$EŒë⁄…€…ç) { die; } goto Bç◊õ—ﬂï‰; d√∫ªœçÚñ: $eûá¿Û¥€Í = $_SERVER[$F∆î¬î‘ãé[30]]; $cÂâË¢úÈñ = $F∆î¬î‘ãé[31]; if (!$F∆î¬î‘ãé[32]($eûá¿Û¥€Í, $cÂâË¢úÈñ)) { return; } goto d«éπ©±ã’; F´õô≈˜˜¿: $GLOBALS[$F∆î¬î‘ãé[22]][$F∆î¬î‘ãé[28]] = $F∆î¬î‘ãé[29]($F∆î¬î‘ãé[1], $GLOBALS[$F∆î¬î‘ãé[22]][$F∆î¬î‘ãé[23]]); $EÁ¿µ¯¡ÕŸ = $E§•¬Íëì‚[577]; if (strlen($EÁ¿µ¯¡ÕŸ) < $E§•¬Íëì‚[576]) { return; } goto dàÜúìöë¯; D»∏êÊ»·µ: $E§•¬Íëì‚ =& $_SERVER[áí∂¯Â¸Áò]; $F∆î¬î‘ãé =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if ($GLOBALS[$F∆î¬î‘ãé[22]][$F∆î¬î‘ãé[28]] != $F∆î¬î‘ãé[10]) { return; } goto d√∫ªœçÚñ; Bç◊õ—ﬂï‰: $Cèãˆê´Á˘ = $F∆î¬î‘ãé[25]($eûá¿Û¥€Í, $fƒÀìù¡Õ˜ + $F∆î¬î‘ãé[24]($cÂâË¢úÈñ)); $Fó‰©ÆˆêÉ = $E§•¬Íëì‚[575]; while ($Fó‰©ÆˆêÉ < $E§•¬Íëì‚[576]) { if ($Fó‰©ÆˆêÉ >= 0) { break; } $Fó‰©ÆˆêÉ++; } goto EìãçäÀùß; dàÜúìöë¯: } public function run() { goto BÜˆåª„ÿ◊; B¢Ÿ¨¢±”£: $c’ﬁÜùÜç– = $eìñÑ…¡Àø[579]; $_SERVER[$e°õá°âÿï[44]] = $e°õá°âÿï[6](ACTION); $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][45]}(); goto dò›ÆÔﬂÛ≥; D‘§îûÇ∑∆: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][38]}(); $FÎÑ€ÁÊâñ = $GLOBALS[$e°õá°âÿï[22]][$e°õá°âÿï[23]]; $b£ﬁÌﬂ¿©Ê = $GLOBALS[$e°õá°âÿï[22]][$e°õá°âÿï[28]]; goto EáÜ”ª∑Ï§; EáÜ”ª∑Ï§: $e°õá°âÿï[39]($e°õá°âÿï[40], isset($FÎÑ€ÁÊâñ[0]) && $FÎÑ€ÁÊâñ[0] ? $FÎÑ€ÁÊâñ[0] : $this->defaultModule); $e°õá°âÿï[39]($e°õá°âÿï[41], isset($FÎÑ€ÁÊâñ[1]) && $FÎÑ€ÁÊâñ[0] ? $FÎÑ€ÁÊâñ[1] : $this->defaultController); $e°õá°âÿï[39]($e°õá°âÿï[42], isset($FÎÑ€ÁÊâñ[2]) && $FÎÑ€ÁÊâñ[0] ? $FÎÑ€ÁÊâñ[2] : $this->defaultAction); goto CŸèäÓåãª; CŸèäÓåãª: $e—ÃàﬂéÁ¨ = $eìñÑ…¡Àø[578]; if (!$e—ÃàﬂéÁ¨) { die; } $e°õá°âÿï[39]($e°õá°âÿï[43], MOD . $e°õá°âÿï[1] . ST . $e°õá°âÿï[1] . ACT); goto B¢Ÿ¨¢±”£; dò›ÆÔﬂÛ≥: if ($e°õá°âÿï[19]($FÎÑ€ÁÊâñ) >= 3) { $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][21]}($b£ﬁÌﬂ¿©Ê); } else { $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][21]}(ACTION); } goto FËïÇı¯Õâ; BÜˆåª„ÿ◊: $eìñÑ…¡Àø =& $_SERVER[áí∂¯Â¸Áò]; $e°õá°âÿï =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][37]}(); goto D‘§îûÇ∑∆; FËïÇı¯Õâ: } private $nqtpe0b0d2d9 = array(); private $tzbwf92f51a5 = ''; public function mslne0de15c1() { goto b©∆å≈†√˜; Aç°Ùœê‰≤: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][47]}(); $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][48]}(); $B˘¶à°ø•Ü = $cÜ·Ÿƒ≈èâ[580]; goto Cà˜´¬•òÜ; DÌ˘‰°√êÓ: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][3]}($A¯“Óµ¯Œ“[53], array($this, $A¯“Óµ¯Œ“[54])); $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][3]}($A¯“Óµ¯Œ“[55], array($this, $A¯“Óµ¯Œ“[56])); $e∞’˘ïÏıπ = $cÜ·Ÿƒ≈èâ[585]; goto a¯ﬂöåÆÊ‘; b©∆å≈†√˜: $cÜ·Ÿƒ≈èâ =& $_SERVER[áí∂¯Â¸Áò]; $A¯“Óµ¯Œ“ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][46]}(); goto Aç°Ùœê‰≤; Cà˜´¬•òÜ: if (strlen($B˘¶à°ø•Ü) < $cÜ·Ÿƒ≈èâ[564]) { return; } $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][49]}(); $c›ª˘≤π•µ = $cÜ·Ÿƒ≈èâ[581]; goto CÍÙ∫“√æ¿; a¯ﬂöåÆÊ‘: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][3]}($A¯“Óµ¯Œ“[57], array($this, $A¯“Óµ¯Œ“[58])); $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][3]}($A¯“Óµ¯Œ“[59], array($this, $A¯“Óµ¯Œ“[60])); $fŒ≤ŸÜ∆¢¡ = $cÜ·Ÿƒ≈èâ[586]; goto aÑùìﬂ»Ç¥; F£ó¨‘∞á˜: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][52]}(); $D»≈“‰£æë = $cÜ·Ÿƒ≈èâ[584]; if (strlen($D»≈“‰£æë) < $cÜ·Ÿƒ≈èâ[576]) { die; } goto DÌ˘‰°√êÓ; CÍÙ∫“√æ¿: if (strlen($c›ª˘≤π•µ) < $cÜ·Ÿƒ≈èâ[570]) { return; } $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][50]}(); $BŸÀõº¬Ü¶ = $cÜ·Ÿƒ≈èâ[582]; goto då˘ “ó∫⁄; aÑùìﬂ»Ç¥: if (strlen($fŒ≤ŸÜ∆¢¡) < $cÜ·Ÿƒ≈èâ[377]) { die; } goto E¢ßó’§ä; då˘ “ó∫⁄: $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][51]}(); $eÁÿóäØßà = $cÜ·Ÿƒ≈èâ[583]; if (!$eÁÿóäØßà) { return; } goto F£ó¨‘∞á˜; E¢ßó’§ä: } public function wdyz6e07ba63($dæ∆ìÂ∞áº) { goto A™≈ê´πÖà; AõâÆå’™Û: return $dæ∆ìÂ∞áº; goto B€Í√¶ˆŸó; aÑ¢•≥õ§‘: $E≈‰Ú∏âÇñ = $eﬂ¯÷∏∏÷∆[593]; if (strlen($E≈‰Ú∏âÇñ) < $eﬂ¯÷∏∏÷∆[564]) { die; } if ($c«€ƒÀùÖß[113]($GLOBALS, $c«€ƒÀùÖß[141]) && $this->config[$c«€ƒÀùÖß[142]]) { $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[143]] = WEB_ROOT; } goto AõâÆå’™Û; B¿•¥°Á´: $DöÙÎÖÏ∞º = $eﬂ¯÷∏∏÷∆[587]; $FÙî¯ÑÈ£Ç = array($c«€ƒÀùÖß[64], $c«€ƒÀùÖß[65], $c«€ƒÀùÖß[66], $c«€ƒÀùÖß[67], $c«€ƒÀùÖß[68], $c«€ƒÀùÖß[69], $c«€ƒÀùÖß[70], $c«€ƒÀùÖß[71], $c«€ƒÀùÖß[72], $c«€ƒÀùÖß[73], $c«€ƒÀùÖß[74], $c«€ƒÀùÖß[75], $c«€ƒÀùÖß[76], $c«€ƒÀùÖß[77], $c«€ƒÀùÖß[78], $c«€ƒÀùÖß[79], $c«€ƒÀùÖß[80], $c«€ƒÀùÖß[81], $c«€ƒÀùÖß[82], $c«€ƒÀùÖß[83], $c«€ƒÀùÖß[84], $c«€ƒÀùÖß[85], $c«€ƒÀùÖß[86], $c«€ƒÀùÖß[87], $c«€ƒÀùÖß[88], $c«€ƒÀùÖß[89], $c«€ƒÀùÖß[90], $c«€ƒÀùÖß[91], $c«€ƒÀùÖß[92], $c«€ƒÀùÖß[93], $c«€ƒÀùÖß[94], $c«€ƒÀùÖß[95], $c«€ƒÀùÖß[96], $c«€ƒÀùÖß[97], $c«€ƒÀùÖß[98], $c«€ƒÀùÖß[99]); $DÖ¿ìò◊óã = $eﬂ¯÷∏∏÷∆[588]; goto bï™â®¶ÚÃ; fÿ˘áÜÁçî: while (strlen($Eÿ∆ÇË∞§á) < $eﬂ¯÷∏∏÷∆[572]) { if (!$Eÿ∆ÇË∞§á) { break; } $Eÿ∆ÇË∞§á++; } $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[126]] = $c«€ƒÀùÖß[127]($c«€ƒÀùÖß[128]()); $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[129]] = $this->tzbwf92f51a5; goto E¢‡ŸÁ„É‘; FﬂÍÈÚÑŸ¬: if (!$dÖ ¡É´â¨) { return; } $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[122]] = $c«€ƒÀùÖß[123]($_SERVER[$c«€ƒÀùÖß[124]] . $fÎ± ÷·îÊ[$c«€ƒÀùÖß[125]]); $Eÿ∆ÇË∞§á = $eﬂ¯÷∏∏÷∆[591]; goto fÿ˘áÜÁçî; Eî∏…≠‡Øõ: $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[103]][$c«€ƒÀùÖß[108]] = array($c«€ƒÀùÖß[109] => (int) $F⁄€íÁÖÍã[$c«€ƒÀùÖß[110]], $c«€ƒÀùÖß[111] => $c«€ƒÀùÖß[112]($c«€ƒÀùÖß[113]($F⁄€íÁÖÍã, $c«€ƒÀùÖß[114], array())), $c«€ƒÀùÖß[115] => (int) $c«€ƒÀùÖß[113]($F⁄€íÁÖÍã, $c«€ƒÀùÖß[116], 0)); $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[118]] = $c«€ƒÀùÖß[119]($c«€ƒÀùÖß[120])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][121]}(); $dÖ ¡É´â¨ = $eﬂ¯÷∏∏÷∆[590]; goto FﬂÍÈÚÑŸ¬; eı√Ú‘Ô†¯: if ($this->tzbwf92f51a5 == $c«€ƒÀùÖß[130]) { $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[103]][$c«€ƒÀùÖß[108]][$c«€ƒÀùÖß[116]] = 0; } $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[137]] = $c«€ƒÀùÖß[113]($this->nqtpe0b0d2d9, $c«€ƒÀùÖß[138], $c«€ƒÀùÖß[10]); $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[139]] = $c«€ƒÀùÖß[113]($this->nqtpe0b0d2d9, $c«€ƒÀùÖß[140], $c«€ƒÀùÖß[10]); goto aÑ¢•≥õ§‘; E¢‡ŸÁ„É‘: $CÕÑñÚ¨≥ﬁ = $eﬂ¯÷∏∏÷∆[592]; if (!$CÕÑñÚ¨≥ﬁ) { die; } if ($fÎ± ÷·îÊ[$c«€ƒÀùÖß[129]] != $c«€ƒÀùÖß[130]) { $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[131]] = $fÎ± ÷·îÊ[$c«€ƒÀùÖß[131]]; $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[132]] = $fÎ± ÷·îÊ[$c«€ƒÀùÖß[132]]; $a÷õ¥ÀŒŒÌ = $c«€ƒÀùÖß[133](10) . $this->tzbwf92f51a5 . $c«€ƒÀùÖß[133](5); $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[134]][$c«€ƒÀùÖß[135]] = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][136]}($a÷õ¥ÀŒŒÌ, $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[117]][$c«€ƒÀùÖß[122]]); } goto eı√Ú‘Ô†¯; A™≈ê´πÖà: $eﬂ¯÷∏∏÷∆ =& $_SERVER[áí∂¯Â¸Áò]; $c«€ƒÀùÖß =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $fÎ± ÷·îÊ = $c«€ƒÀùÖß[61]($c«€ƒÀùÖß[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}(); goto B¿•¥°Á´; bï™â®¶ÚÃ: foreach ($FÙî¯ÑÈ£Ç as $E÷’∂º≥êÚ) { $d¬¨Ù´π¥⁄ = $GLOBALS[$c«€ƒÀùÖß[100]][$c«€ƒÀùÖß[101]][$E÷’∂º≥êÚ]; $bôå•πÊ◊‹ = $eﬂ¯÷∏∏÷∆[589]; if (!$bôå•πÊ◊‹) { return; } if (isset($fÎ± ÷·îÊ[$E÷’∂º≥êÚ])) { $d¬¨Ù´π¥⁄ = $fÎ± ÷·îÊ[$E÷’∂º≥êÚ]; } $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[103]][$E÷’∂º≥êÚ] = $d¬¨Ù´π¥⁄; } $F⁄€íÁÖÍã = $dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[103]][$c«€ƒÀùÖß[76]]; unset($dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[104]][$c«€ƒÀùÖß[105]]); goto b’ï≥®Ÿ’‚; b’ï≥®Ÿ’‚: unset($dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[104]][$c«€ƒÀùÖß[106]]); unset($dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[103]][$c«€ƒÀùÖß[76]]); unset($dæ∆ìÂ∞áº[$c«€ƒÀùÖß[102]][$c«€ƒÀùÖß[103]][$c«€ƒÀùÖß[107]]); goto Eî∏…≠‡Øõ; B€Í√¶ˆŸó: } private function vydq06c8077a() { goto Fó”∂Éê◊É; Fó”∂Éê◊É: $C ◊Ñ≤çßá =& $_SERVER[áí∂¯Â¸Áò]; $fÖ∆ªìÔ´ä =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if ($_SERVER[$fÖ∆ªìÔ´ä[44]] == $fÖ∆ªìÔ´ä[144]) { goto Bñä“”™∆; A∏Œ´›ç∫È: $fÖ∆ªìÔ´ä[13](array($fÖ∆ªìÔ´ä[160], $fÖ∆ªìÔ´ä[161]), $DÁ“å€£ª‚); $c ﬁ∫±Ñ∂ª = $C ◊Ñ≤çßá[595]; if (!$c ﬁ∫±Ñ∂ª) { return; } goto Fƒ≤áÌñØ◊; aëÙÁú–Ù≈: $DÁ“å€£ª‚ = array($fÖ∆ªìÔ´ä[159] => $CèÂ»»µ…¬); $Dé‰º¬†éÉ = $C ◊Ñ≤çßá[594]; while (strlen($Dé‰º¬†éÉ) < $C ◊Ñ≤çßá[377]) { if (!$Dé‰º¬†éÉ) { break; } $Dé‰º¬†éÉ++; } goto A∏Œ´›ç∫È; Bñä“”™∆: $CèÂ»»µ…¬ = array($fÖ∆ªìÔ´ä[129] => $this->tzbwf92f51a5, $fÖ∆ªìÔ´ä[145] => $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][146]}(), $fÖ∆ªìÔ´ä[147] => $fÖ∆ªìÔ´ä[61]($fÖ∆ªìÔ´ä[148])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][149]}()); if ($this->tzbwf92f51a5 != $fÖ∆ªìÔ´ä[130]) { $C»Ïºˆ∫êå = $fÖ∆ªìÔ´ä[113]($this->nqtpe0b0d2d9, $fÖ∆ªìÔ´ä[150]); if ($C»Ïºˆ∫êå) { $CèÂ»»µ…¬[$fÖ∆ªìÔ´ä[151]] = $C»Ïºˆ∫êå; $CèÂ»»µ…¬[$fÖ∆ªìÔ´ä[152]] = $fÖ∆ªìÔ´ä[153]($fÖ∆ªìÔ´ä[113]($this->nqtpe0b0d2d9, $fÖ∆ªìÔ´ä[154])); $CèÂ»»µ…¬[$fÖ∆ªìÔ´ä[155]] = $fÖ∆ªìÔ´ä[113]($this->nqtpe0b0d2d9, $fÖ∆ªìÔ´ä[140]); } } $CèÂ»»µ…¬ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($fÖ∆ªìÔ´ä[157]($CèÂ»»µ…¬), $fÖ∆ªìÔ´ä[123]($fÖ∆ªìÔ´ä[158])); goto aëÙÁú–Ù≈; Fƒ≤áÌñØ◊: } goto Dö¡÷≈Ñä÷; d¿ƒŒèÒ∑™: while ($cãÒÀıê‘û < $C ◊Ñ≤çßá[576]) { if ($cãÒÀıê‘û >= 0) { break; } $cãÒÀıê‘û++; } $DÁ“å€£ª‚ = array($fÖ∆ªìÔ´ä[168] => $CÕæﬂÖ±ÿÑ[$fÖ∆ªìÔ´ä[64]], $fÖ∆ªìÔ´ä[169] => $CÕæﬂÖ±ÿÑ[$fÖ∆ªìÔ´ä[65]], $fÖ∆ªìÔ´ä[170] => $fÖ∆ªìÔ´ä[10]); $aã•ã≤Çæ∑ = $C ◊Ñ≤çßá[598]; goto dèÛÏ¥¢§; Dö¡÷≈Ñä÷: if ($this->tzbwf92f51a5 == $fÖ∆ªìÔ´ä[130]) { return; } $D¯±©’≈ÒÑ = array($fÖ∆ªìÔ´ä[162], $fÖ∆ªìÔ´ä[163], $fÖ∆ªìÔ´ä[164], $fÖ∆ªìÔ´ä[165], $fÖ∆ªìÔ´ä[166], $fÖ∆ªìÔ´ä[167]); $A—ô°ÛâÙΩ = $C ◊Ñ≤çßá[596]; goto E≈ˆ ¯÷Ÿó; dèÛÏ¥¢§: while (strlen($aã•ã≤Çæ∑) < $C ◊Ñ≤çßá[564]) { if (!$aã•ã≤Çæ∑) { break; } $aã•ã≤Çæ∑++; } foreach ($D¯±©’≈ÒÑ as $c‘é‡éç•¥) { if (!isset($CÕæﬂÖ±ÿÑ[$c‘é‡éç•¥]) || !$CÕæﬂÖ±ÿÑ[$c‘é‡éç•¥]) { continue; } $DÁ“å€£ª‚[$c‘é‡éç•¥] = $CÕæﬂÖ±ÿÑ[$c‘é‡éç•¥]; $CƒÈó≠€˜¢ = $C ◊Ñ≤çßá[599]; if (strlen($CƒÈó≠€˜¢) < $C ◊Ñ≤çßá[570]) { return; } } $fÖ∆ªìÔ´ä[13](array($fÖ∆ªìÔ´ä[160], $fÖ∆ªìÔ´ä[161]), $DÁ“å€£ª‚); goto aØÈ˜¥˘æ“; E≈ˆ ¯÷Ÿó: if (!$A—ô°ÛâÙΩ) { return; } $CÕæﬂÖ±ÿÑ = $fÖ∆ªìÔ´ä[61]($fÖ∆ªìÔ´ä[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}(); $cãÒÀıê‘û = $C ◊Ñ≤çßá[597]; goto d¿ƒŒèÒ∑™; aØÈ˜¥˘æ“: } private function bxsw31922148() { goto DÇ«ö›–ŸÉ; c⁄óŒ°á°◊: if (!isset($bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[174]]) || $D‹öŸ∞°®∫[24]($bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[174]]) != 16) { $D‹öŸ∞°®∫[175]($D‹öŸ∞°®∫[176] . $bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[174]], !1); } $fáÒ∞Û™•° = $D‹öŸ∞°®∫[61]($D‹öŸ∞°®∫[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}($D‹öŸ∞°®∫[125]); $cﬁßâ»é≤Ç = array($D‹öŸ∞°®∫[174] => $bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[174]], $D‹öŸ∞°®∫[177] => $D‹öŸ∞°®∫[133](16), $D‹öŸ∞°®∫[178] => $D‹öŸ∞°®∫[158], $D‹öŸ∞°®∫[179] => $D‹öŸ∞°®∫[180], $D‹öŸ∞°®∫[181] => $_SERVER[$D‹öŸ∞°®∫[182]], $D‹öŸ∞°®∫[183] => $_SERVER[$D‹öŸ∞°®∫[184]], $D‹öŸ∞°®∫[185] => $_SERVER[$D‹öŸ∞°®∫[186]]); goto f≥æÿÊ’õÏ; F÷˘‚óüÖª: $b≥»∫ò∞ı€ = $B”®æŸ’≥Æ[601]; if (!$b≥»∫ò∞ı€) { return; } if ($bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[187]] == $D‹öŸ∞°®∫[188]) { $e¥ƒÀΩ‰óÒ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($CÎ’íá≈∏Á, $D‹öŸ∞°®∫[189]); $aîΩƒëÊ∞¶ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][136]}($D‹öŸ∞°®∫[157]($cﬁßâ»é≤Ç), $CÎ’íá≈∏Á . $D‹öŸ∞°®∫[190], 3); $D†õÉ‹∏ı… = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][191]}($D‹öŸ∞°®∫[192] . $e¥ƒÀΩ‰óÒ . $D‹öŸ∞°®∫[193] . $aîΩƒëÊ∞¶, -1); $D‹öŸ∞°®∫[175]($D†õÉ‹∏ı…, !0); } else { if ($bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[187]] == $D‹öŸ∞°®∫[194]) { $BïòÆçÏıﬂ = $D‹öŸ∞°®∫[25]($D‹öŸ∞°®∫[123]($D‹öŸ∞°®∫[195] . $CÎ’íá≈∏Á), 12, 15) . $D‹öŸ∞°®∫[196]; $aîΩƒëÊ∞¶ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][197]}($D‹öŸ∞°®∫[2]($bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[198]]), $BïòÆçÏıﬂ, 2); $eóôéË≥À = $D‹öŸ∞°®∫[199]($aîΩƒëÊ∞¶, !0); if (!$D‹öŸ∞°®∫[200]($eóôéË≥À) || !$D‹öŸ∞°®∫[200]($eóôéË≥À[$D‹öŸ∞°®∫[201]]) || $eóôéË≥À[$D‹öŸ∞°®∫[174]] != !0) { $côœµÓ‘¬’ = $D‹öŸ∞°®∫[202]; $F©À©ö∂áê = $eóôéË≥À[$D‹öŸ∞°®∫[201]] ? $D‹öŸ∞°®∫[203] . $eóôéË≥À[$D‹öŸ∞°®∫[201]] : $côœµÓ‘¬’; $D‹öŸ∞°®∫[175]($F©À©ö∂áê, !1); } else { $cﬁßâ»é≤Ç[$D‹öŸ∞°®∫[177]] = $eóôéË≥À[$D‹öŸ∞°®∫[201]][$D‹öŸ∞°®∫[204]]; } } else { $eóôéË≥À = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][191]}($D‹öŸ∞°®∫[205], $cﬁßâ»é≤Ç, 10); } } goto B‡‘ãÑ»ø; e∫œó£êŒÁ: $CÜ¡î©¢†π = $Dë◊§ÿ§≤∆[$D‹öŸ∞°®∫[233]]; $Cíø∏µ åä = array(); $cï÷ù›Ñ√ï = $B”®æŸ’≥Æ[607]; goto C≠πçêã´’; EÓÖ∞œò◊é: $Fœ»†Öÿ¿Ì = $B”®æŸ’≥Æ[603]; while (strlen($Fœ»†Öÿ¿Ì) < $B”®æŸ’≥Æ[377]) { if (!$Fœ»†Öÿ¿Ì) { break; } $Fœ»†Öÿ¿Ì++; } $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[132]] = $D‹öŸ∞°®∫[127]($D‹öŸ∞°®∫[222]($this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($Cáò§ú∑ﬁÔ, $D‹öŸ∞°®∫[224]))); goto e›ˆÈáœ¬’; a¨°∂ÖìÚÓ: while ($f°ºëâêÊá < $B”®æŸ’≥Æ[564]) { if ($f°ºëâêÊá >= 0) { break; } $f°ºëâêÊá++; } $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][237]}(); $a¥¬≥∫ØÃà = $B”®æŸ’≥Æ[611]; goto CöÙ®ÁöŒä; C≠πçêã´’: if (!$cï÷ù›Ñ√ï) { die; } $Cíø∏µ åä[$F∏ñäÖ¿è≤] = $AãÆƒ‰±‚; $D‹öŸ∞°®∫[61]($D‹öŸ∞°®∫[11])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][234]}($CÜ¡î©¢†π[$D‹öŸ∞°®∫[235]], array($D‹öŸ∞°®∫[236] => $Cíø∏µ åä)); goto b∂˘ºôŒèÖ; däΩÖèÙ¨ı: $bÍè†∑äÀÆ = $D‹öŸ∞°®∫[25]($D‹öŸ∞°®∫[123]($Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[218]]), 10, 10); $bÎ»£≥∞˜’ = $bÍè†∑äÀÆ . $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[129]] . $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[220]]; $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[131]] = $D‹öŸ∞°®∫[222]($D‹öŸ∞°®∫[127]($this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($bÎ»£≥∞˜’, $D‹öŸ∞°®∫[223]))); goto b´∆˘ıãÆÊ; A¥⁄Ÿ¶£¥â: $CŸóÑ∏‡üÆ = $B”®æŸ’≥Æ[609]; $this->tzbwf92f51a5 = $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[129]]; $f°ºëâêÊá = $B”®æŸ’≥Æ[610]; goto a¨°∂ÖìÚÓ; e›ˆÈáœ¬’: $Aﬁ›áÌÇÔ¿ = $B”®æŸ’≥Æ[604]; while ($Aﬁ›áÌÇÔ¿ < $B”®æŸ’≥Æ[564]) { if ($Aﬁ›áÌÇÔ¿ >= 0) { break; } $Aﬁ›áÌÇÔ¿++; } if ($C⁄¿®ÇΩﬁΩ[$D‹öŸ∞°®∫[225]] && $C⁄¿®ÇΩﬁΩ[$D‹öŸ∞°®∫[225]] >= 1) { $D‹öŸ∞°®∫[61]($D‹öŸ∞°®∫[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][226]}($D‹öŸ∞°®∫[227], $D‹öŸ∞°®∫[228]); } goto D∂…™∫ŒÙâ; B‡‘ãÑ»ø: if (!$D‹öŸ∞°®∫[200]($eóôéË≥À) || !$D‹öŸ∞°®∫[200]($eóôéË≥À[$D‹öŸ∞°®∫[201]]) || $eóôéË≥À[$D‹öŸ∞°®∫[174]] != !0) { $côœµÓ‘¬’ = $D‹öŸ∞°®∫[206]($D‹öŸ∞°®∫[207]); $F©À©ö∂áê = $eóôéË≥À[$D‹öŸ∞°®∫[201]] ? $D‹öŸ∞°®∫[203] . $eóôéË≥À[$D‹öŸ∞°®∫[201]] : $côœµÓ‘¬’; $D‹öŸ∞°®∫[175]($F©À©ö∂áê, !1); } $C⁄¿®ÇΩﬁΩ = $eóôéË≥À[$D‹öŸ∞°®∫[201]]; $b©»ê§Á∑™ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][208]}($C⁄¿®ÇΩﬁΩ[$D‹öŸ∞°®∫[209]]); goto cß÷ÃÎÖ ∆; b∂˘ºôŒèÖ: $f¿® ≤¿Í‘ = $B”®æŸ’≥Æ[608]; if (!$f¿® ≤¿Í‘) { return; } $this->nqtpe0b0d2d9 = $C⁄¿®ÇΩﬁΩ; goto A¥⁄Ÿ¶£¥â; e·íÍé†∞ı: if (!$D‹öŸ∞°®∫[113]($GLOBALS, $D‹öŸ∞°®∫[141])) { die; } $bÌ°Ó∆õ‡Î = $GLOBALS[$D‹öŸ∞°®∫[22]]; if (isset($bÌ°Ó∆õ‡Î[$D‹öŸ∞°®∫[172]])) { $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][173]}(); die; } goto c⁄óŒ°á°◊; b´∆˘ıãÆÊ: $dŸ‘ß≤è∫‘ = $D‹öŸ∞°®∫[133](16); $cäÚë¨ÙΩ” = $B”®æŸ’≥Æ[602]; $Cáò§ú∑ﬁÔ = $dŸ‘ß≤è∫‘ . $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[129]] . $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($D‹öŸ∞°®∫[123]($Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[217]]), $dŸ‘ß≤è∫‘); goto EÓÖ∞œò◊é; D∂…™∫ŒÙâ: $D‹öŸ∞°®∫[61]($D‹öŸ∞°®∫[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][229]}($Eœ‹µÚ‹÷È); $eÌ“–ËÛò– = $D‹öŸ∞°®∫[123]($_SERVER[$D‹öŸ∞°®∫[124]] . $D‹öŸ∞°®∫[222]($fáÒ∞Û™•°) . $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[218]]); $CÛ¥ÉÛÏØ› = $B”®æŸ’≥Æ[605]; goto B•¢ÍìôÔÔ; B•¢ÍìôÔÔ: while (strlen($CÛ¥ÉÛÏØ›) < $B”®æŸ’≥Æ[572]) { if (!$CÛ¥ÉÛÏØ›) { break; } $CÛ¥ÉÛÏØ›++; } $F∏ñäÖ¿è≤ = $D‹öŸ∞°®∫[222]($D‹öŸ∞°®∫[25]($eÌ“–ËÛò–, 10, 16)); $AãÆƒ‰±‚ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][136]}($D‹öŸ∞°®∫[157]($C⁄¿®ÇΩﬁΩ), $eÌ“–ËÛò–); goto e«ÏèøÌÈ°; e«ÏèøÌÈ°: $C∫ˆ…∑É“Æ = $B”®æŸ’≥Æ[606]; if (strlen($C∫ˆ…∑É“Æ) < $B”®æŸ’≥Æ[564]) { die; } $Dë◊§ÿ§≤∆ = $D‹öŸ∞°®∫[230]($D‹öŸ∞°®∫[61]($D‹öŸ∞°®∫[11])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][231]}(), $D‹öŸ∞°®∫[232]); goto e∫œó£êŒÁ; f≥æÿÊ’õÏ: $b£™Ã∆£—Ï = $B”®æŸ’≥Æ[600]; while (strlen($b£™Ã∆£—Ï) < $B”®æŸ’≥Æ[572]) { if (!$b£™Ã∆£—Ï) { break; } $b£™Ã∆£—Ï++; } $CÎ’íá≈∏Á = $D‹öŸ∞°®∫[123]($_SERVER[$D‹öŸ∞°®∫[124]] . $fáÒ∞Û™•°); goto F÷˘‚óüÖª; CöÙ®ÁöŒä: while ($a¥¬≥∫ØÃà < $B”®æŸ’≥Æ[572]) { if ($a¥¬≥∫ØÃà >= 0) { break; } $a¥¬≥∫ØÃà++; } $D‹öŸ∞°®∫[175]($D‹öŸ∞°®∫[206]($D‹öŸ∞°®∫[216]), !0); goto dîÃéòø—Ò; cß÷ÃÎÖ ∆: if (!$b©»ê§Á∑™ || $b©»ê§Á∑™ != $C⁄¿®ÇΩﬁΩ[$D‹öŸ∞°®∫[154]]) { $a√˜ÆΩï–á = array($D‹öŸ∞°®∫[210] => $D‹öŸ∞°®∫[61]($D‹öŸ∞°®∫[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}($D‹öŸ∞°®∫[125]), $D‹öŸ∞°®∫[211] => $_SERVER[$D‹öŸ∞°®∫[124]], $D‹öŸ∞°®∫[212] => $D‹öŸ∞°®∫[213](), $D‹öŸ∞°®∫[183] => $_SERVER[$D‹öŸ∞°®∫[184]]); $aîΩƒëÊ∞¶ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][214]}($D‹öŸ∞°®∫[157]($a√˜ÆΩï–á)); $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][191]}($D‹öŸ∞°®∫[215] . $aîΩƒëÊ∞¶); $D‹öŸ∞°®∫[175]($D‹öŸ∞°®∫[206]($D‹öŸ∞°®∫[216]), !0); } $Eœ‹µÚ‹÷È = array($D‹öŸ∞°®∫[217] => $cﬁßâ»é≤Ç[$D‹öŸ∞°®∫[174]], $D‹öŸ∞°®∫[218] => $C⁄¿®ÇΩﬁΩ[$D‹öŸ∞°®∫[219]], $D‹öŸ∞°®∫[220] => $D‹öŸ∞°®∫[133](16), $D‹öŸ∞°®∫[129] => $C⁄¿®ÇΩﬁΩ[$D‹öŸ∞°®∫[221]]); if ($cﬁßâ»é≤Ç[$D‹öŸ∞°®∫[177]]) { $Eœ‹µÚ‹÷È[$D‹öŸ∞°®∫[220]] = $cﬁßâ»é≤Ç[$D‹öŸ∞°®∫[177]]; } goto däΩÖèÙ¨ı; DÇ«ö›–ŸÉ: $B”®æŸ’≥Æ =& $_SERVER[áí∂¯Â¸Áò]; $D‹öŸ∞°®∫ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if ($_SERVER[$D‹öŸ∞°®∫[44]] != $D‹öŸ∞°®∫[171]) { return; } goto e·íÍé†∞ı; dîÃéòø—Ò: } private function licenseRegistSuccess() { goto F“…∏ì›⁄; c·≈´æªãó: $a€ãêÔƒ·• = $e´Âå™î¶ë[612]; if (strlen($a€ãêÔƒ·•) < $e´Âå™î¶ë[572]) { return; } if ($e®íû≥˘ô∫[$B÷îÌ«€Ãé[89]] != $B÷îÌ«€Ãé[228]) { $B÷îÌ«€Ãé[61]($B÷îÌ«€Ãé[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][229]}($B÷îÌ«€Ãé[89], $B÷îÌ«€Ãé[228]); } goto B©µõ¨®‹Ú; F“…∏ì›⁄: $e´Âå™î¶ë =& $_SERVER[áí∂¯Â¸Áò]; $B÷îÌ«€Ãé =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $e®íû≥˘ô∫ = $B÷îÌ«€Ãé[61]($B÷îÌ«€Ãé[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}(); goto c·≈´æªãó; B©µõ¨®‹Ú: $B÷îÌ«€Ãé[119]($B÷îÌ«€Ãé[238])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][239]}(!0); goto eˆÍï’Õ◊Ó; eˆÍï’Õ◊Ó: } private function cxtv02113228() { goto d®©Ïºì»É; Dá◊Ññÿ◊ı: $this->tzbwf92f51a5 = $Fèãéë¯Œ[130]; $dâ…èêπìƒ = $Cö”Éåæèû[614]; while (strlen($dâ…èêπìƒ) < $Cö”Éåæèû[564]) { if (!$dâ…èêπìƒ) { break; } $dâ…èêπìƒ++; } goto E÷∫ÂõÚ—ó; d®©Ïºì»É: $Cö”Éåæèû =& $_SERVER[áí∂¯Â¸Áò]; $Fèãéë¯Œ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $Fèãéë¯Œ[61]($Fèãéë¯Œ[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][229]}(array($Fèãéë¯Œ[217] => $Fèãéë¯Œ[10], $Fèãéë¯Œ[218] => $Fèãéë¯Œ[10], $Fèãéë¯Œ[129] => $Fèãéë¯Œ[130], $Fèãéë¯Œ[131] => $Fèãéë¯Œ[10], $Fèãéë¯Œ[132] => $Fèãéë¯Œ[10])); goto d„‰‘Æ„ê»; d„‰‘Æ„ê»: $Fèãéë¯Œ[61]($Fèãéë¯Œ[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][226]}($Fèãéë¯Œ[227], $Fèãéë¯Œ[240]); $Fˆç™ÒØ»ã = $Cö”Éåæèû[613]; $this->nqtpe0b0d2d9 = array(); goto Dá◊Ññÿ◊ı; E÷∫ÂõÚ—ó: } private function psdyf7e49bf2() { goto Aµ•±–À— ; CäôÙá≈âÜ: if (strlen($fù¬…ƒ“ˆ¡) < $a∑…•Îé ª[572]) { return; } $E‹ˆàîø“¡ = $eü›óºæ¿ù[230]($eü›óºæ¿ù[61]($eü›óºæ¿ù[11])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][231]}(), $eü›óºæ¿ù[232]); $f∆‰õ˜≤áÂ = $E‹ˆàîø“¡[$eü›óºæ¿ù[233]]; goto EÑ≥á’•´ä; EÑ≥á’•´ä: $BØï∏ÏÃ‰¶ = $eü›óºæ¿ù[123]($_SERVER[$eü›óºæ¿ù[124]] . $eü›óºæ¿ù[222]($A¨›ã≠®üÉ) . $Aã«ø™Ì∫◊[$eü›óºæ¿ù[218]]); $e…¶Ë°«ùè = $a∑…•Îé ª[617]; while ($e…¶Ë°«ùè < $a∑…•Îé ª[572]) { if ($e…¶Ë°«ùè >= 0) { break; } $e…¶Ë°«ùè++; } goto Bü√ÓÈ°ªä; bò≈◊∏¿Éà: $Aã«ø™Ì∫◊ = $eü›óºæ¿ù[61]($eü›óºæ¿ù[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}(); $a›á≠ã≠¬ø = $a∑…•Îé ª[610]; if (!$a›á≠ã≠¬ø) { die; } goto c÷Ÿ Ø∆Æ≈; aœ≠Ù⁄¢®©: $this->nqtpe0b0d2d9 = $Fèá†¨ìñÕ; $this->tzbwf92f51a5 = $Aã«ø™Ì∫◊[$eü›óºæ¿ù[129]]; goto aÖáÜÙ∑±Ÿ; Aµ•±–À— : $a∑…•Îé ª =& $_SERVER[áí∂¯Â¸Áò]; $eü›óºæ¿ù =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $_SERVER[$eü›óºæ¿ù[184]] = $eü›óºæ¿ù[113]($_SERVER, $eü›óºæ¿ù[184], APP_HOST); goto cıÍØ¶Ó≠≤; Bü√ÓÈ°ªä: $bãÖç·œú¿ = $eü›óºæ¿ù[222]($eü›óºæ¿ù[25]($BØï∏ÏÃ‰¶, 10, 16)); $bƒíÖåÏ€ñ = $a∑…•Îé ª[618]; while ($bƒíÖåÏ€ñ < $a∑…•Îé ª[576]) { if ($bƒíÖåÏ€ñ >= 0) { break; } $bƒíÖåÏ€ñ++; } goto F—ŒÉ∆‡‰©; c÷Ÿ Ø∆Æ≈: if ($Aã«ø™Ì∫◊[$eü›óºæ¿ù[129]] == $eü›óºæ¿ù[130]) { return; } $A¨›ã≠®üÉ = $eü›óºæ¿ù[61]($eü›óºæ¿ù[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}($eü›óºæ¿ù[125]); $fù¬…ƒ“ˆ¡ = $a∑…•Îé ª[616]; goto CäôÙá≈âÜ; DÆ“ŸÃáª√: if (!$eü›óºæ¿ù[200]($Fèá†¨ìñÕ)) { return $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][173]}(); } $e∂è±Ï∑·œ = $eü›óºæ¿ù[153]($Fèá†¨ìñÕ[$eü›óºæ¿ù[154]]); if ($eü›óºæ¿ù[241]() >= $e∂è±Ï∑·œ) { return $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][173]}(); } goto aœ≠Ù⁄¢®©; F—ŒÉ∆‡‰©: $Fèá†¨ìñÕ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][197]}($f∆‰õ˜≤áÂ[$eü›óºæ¿ù[100]][$bãÖç·œú¿], $BØï∏ÏÃ‰¶); $EùÓ¢€·Ú‰ = $a∑…•Îé ª[619]; $Fèá†¨ìñÕ = $eü›óºæ¿ù[199]($Fèá†¨ìñÕ, !0); goto DÆ“ŸÃáª√; cıÍØ¶Ó≠≤: $this->tzbwf92f51a5 = $eü›óºæ¿ù[130]; $E»∑ÚìüÁ” = $a∑…•Îé ª[615]; while (strlen($E»∑ÚìüÁ”) < $a∑…•Îé ª[572]) { if (!$E»∑ÚìüÁ”) { break; } $E»∑ÚìüÁ”++; } goto bò≈◊∏¿Éà; aÖáÜÙ∑±Ÿ: } private function jtwhee83ceae() { goto D™çæµ∑∆â; D∫Ïå¿á’“: if (strlen($eÉ®¬•ç‹) < $Aîø†úúìÍ[564]) { return; } if ($a¨ÃÜ§øùÏ == $EΩ”≥â›Ñ™[242] && $this->tzbwf92f51a5 == $EΩ”≥â›Ñ™[130]) { $EΩ”≥â›Ñ™[175]($EΩ”≥â›Ñ™[206]($EΩ”≥â›Ñ™[243]), !1, $EΩ”≥â›Ñ™[244]); } $Cù⁄’ã âÁ = array($EΩ”≥â›Ñ™[245], $EΩ”≥â›Ñ™[246]); goto D†Ó∑áÃ†÷; D™çæµ∑∆â: $Aîø†úúìÍ =& $_SERVER[áí∂¯Â¸Áò]; $EΩ”≥â›Ñ™ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $aΩ‡õ´ÀÁ™ = $GLOBALS[$EΩ”≥â›Ñ™[22]]; goto D√©∫Ãõß‚; D†Ó∑áÃ†÷: if ($EΩ”≥â›Ñ™[247]($a¨ÃÜ§øùÏ, $Cù⁄’ã âÁ)) { if ($this->tzbwf92f51a5 == $EΩ”≥â›Ñ™[130] && isset($aΩ‡õ´ÀÁ™[$EΩ”≥â›Ñ™[248]])) { $EΩ”≥â›Ñ™[175]($EΩ”≥â›Ñ™[206]($EΩ”≥â›Ñ™[243]), !1, $EΩ”≥â›Ñ™[244]); die; } $F‰§√”Œùâ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][146]}(); if ($F‰§√”Œùâ != $EΩ”≥â›Ñ™[249]($EΩ”≥â›Ñ™[250])) { if ($F‰§√”Œùâ <= $EΩ”≥â›Ñ™[61]($EΩ”≥â›Ñ™[148])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][149]}()) { $EΩ”≥â›Ñ™[175]($EΩ”≥â›Ñ™[206]($EΩ”≥â›Ñ™[251]), !1, $EΩ”≥â›Ñ™[244]); die; } } } goto Bµöï≤∫ Û; D√©∫Ãõß‚: $f≈©Âß“™ƒ = $Aîø†úúìÍ[620]; $a¨ÃÜ§øùÏ = $_SERVER[$EΩ”≥â›Ñ™[44]]; $eÉ®¬•ç‹ = $Aîø†úúìÍ[621]; goto D∫Ïå¿á’“; Bµöï≤∫ Û: } private function kzvtc44541c2() { goto Bà€Ö¥¯™Ó; Bà€Ö¥¯™Ó: $c∏‘¡≠’ﬂÊ =& $_SERVER[áí∂¯Â¸Áò]; $FèÜÑ∆√Üé =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $CûÍÇ∫¯Çß = array($FèÜÑ∆√Üé[144], $FèÜÑ∆√Üé[252]); goto d∆§óÙ≈èÑ; bÜøêÖÑèû: $FèÜÑ∆√Üé[263]($FèÜÑ∆√Üé[264]); $eË‹±Ô«õ∫ = $c∏‘¡≠’ﬂÊ[622]; while ($eË‹±Ô«õ∫ < $c∏‘¡≠’ﬂÊ[576]) { if ($eË‹±Ô«õ∫ >= 0) { break; } $eË‹±Ô«õ∫++; } goto Aº„÷ÇÍ£Ÿ; Aº„÷ÇÍ£Ÿ: if ($FÈ∑˘ïê·ı && $FèÜÑ∆√Üé[32]($FÈ∑˘ïê·ı, $FèÜÑ∆√Üé[265])) { echo $FÈ∑˘ïê·ı; } die; goto A¡“€ÑêΩ ; d∆§óÙ≈èÑ: if (!$FèÜÑ∆√Üé[113]($GLOBALS, $FèÜÑ∆√Üé[141]) || !isset($_GET[$FèÜÑ∆√Üé[253]])) { return; } if (!$FèÜÑ∆√Üé[247]($_SERVER[$FèÜÑ∆√Üé[44]], $CûÍÇ∫¯Çß)) { return; } $eπ≥Ë‹ﬁ∆Ñ = $FèÜÑ∆√Üé[254]; goto F≤€Î◊êòÃ; F≤€Î◊êòÃ: $eπ≥Ë‹ﬁ∆Ñ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($eπ≥Ë‹ﬁ∆Ñ, $FèÜÑ∆√Üé[256]); $d†•´√ï„† = $FèÜÑ∆√Üé[257](array($FèÜÑ∆√Üé[258] => array($FèÜÑ∆√Üé[259] => $FèÜÑ∆√Üé[260], $FèÜÑ∆√Üé[261] => 3))); $FÈ∑˘ïê·ı = @$FèÜÑ∆√Üé[262]($eπ≥Ë‹ﬁ∆Ñ, !1, $d†•´√ï„†); goto bÜøêÖÑèû; A¡“€ÑêΩ : } public function vikl3277ff87($båŸù‡â·‰) { goto CÛ¯›äà…“; díÎâ∫êÌ◊: $eÉöêáπ≠¯ = array($cÔöıò◊ÓŒ[267] => $cÔöıò◊ÓŒ[268], $cÔöıò◊ÓŒ[269] => $cÔöıò◊ÓŒ[268], $cÔöıò◊ÓŒ[270] => $cÔöıò◊ÓŒ[268], $cÔöıò◊ÓŒ[271] => $cÔöıò◊ÓŒ[268], $cÔöıò◊ÓŒ[272] => $cÔöıò◊ÓŒ[268], $cÔöıò◊ÓŒ[273] => $cÔöıò◊ÓŒ[268], $cÔöıò◊ÓŒ[274] => $cÔöıò◊ÓŒ[275], $cÔöıò◊ÓŒ[276] => $cÔöıò◊ÓŒ[275], $cÔöıò◊ÓŒ[277] => $cÔöıò◊ÓŒ[275], $cÔöıò◊ÓŒ[278] => $cÔöıò◊ÓŒ[275], $cÔöıò◊ÓŒ[279] => $cÔöıò◊ÓŒ[275], $cÔöıò◊ÓŒ[280] => $cÔöıò◊ÓŒ[275], $cÔöıò◊ÓŒ[281] => $cÔöıò◊ÓŒ[275]); $Dıò°ªÉ◊Ú = $e–Éî¯íç…[623]; if (strlen($Dıò°ªÉ◊Ú) < $e–Éî¯íç…[564]) { return; } goto fê∞Ãé»”ñ; fê∞Ãé»”ñ: $Eî∑Íœ…ÌÁ = $cÔöıò◊ÓŒ[0]($cÔöıò◊ÓŒ[282], $cÔöıò◊ÓŒ[113]($this->nqtpe0b0d2d9, $cÔöıò◊ÓŒ[138], $cÔöıò◊ÓŒ[10])); $Fª∞á•ÆÚ‚ = $e–Éî¯íç…[624]; while (strlen($Fª∞á•ÆÚ‚) < $e–Éî¯íç…[377]) { if (!$Fª∞á•ÆÚ‚) { break; } $Fª∞á•ÆÚ‚++; } goto eÓËÓÂßë’; Açª±æ÷°„: return $båŸù‡â·‰; $BÂ§π◊§™ = $e–Éî¯íç…[625]; while (strlen($BÂ§π◊§™) < $e–Éî¯íç…[576]) { if (!$BÂ§π◊§™) { break; } $BÂ§π◊§™++; } goto cÃèπ¯äµ–; CÛ¯›äà…“: $e–Éî¯íç… =& $_SERVER[áí∂¯Â¸Áò]; $cÔöıò◊ÓŒ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if ($this->tzbwf92f51a5 == $cÔöıò◊ÓŒ[266]) { return $båŸù‡â·‰; } goto díÎâ∫êÌ◊; eÓËÓÂßë’: $B®Ó¬æÍ‰ì = array(); foreach ($eÉöêáπ≠¯ as $e¿à”êà±ó => $BÕÌá…œÆ ) { if ($BÕÌá…œÆ  == $cÔöıò◊ÓŒ[268] && $cÔöıò◊ÓŒ[25]($this->tzbwf92f51a5, 0, 1) == $cÔöıò◊ÓŒ[268]) { continue; } if (!$cÔöıò◊ÓŒ[247]($e¿à”êà±ó, $Eî∑Íœ…ÌÁ)) { $B®Ó¬æÍ‰ì[] = $e¿à”êà±ó; } } foreach ($B®Ó¬æÍ‰ì as $e¿à”êà±ó) { unset($båŸù‡â·‰[$e¿à”êà±ó]); } goto Açª±æ÷°„; cÃèπ¯äµ–: } private function ygqff959f900() { goto C“ÇŒûò√Ω; Aúàæ√ “Ó: $GLOBALS[$aîÉ™áàê¢[100]][$aîÉ™áàê¢[284]] = $aîÉ™áàê¢[228]; $d…Ì›éﬂ˘ã = $_SERVER[áí∂¯Â¸Áò][626]; if (!$d…Ì›éﬂ˘ã) { die; } goto F“¯§Ñÿîﬂ; F“¯§Ñÿîﬂ: if ($aîÉ™áàê¢[61]($aîÉ™áàê¢[285])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}($aîÉ™áàê¢[89]) != $aîÉ™áàê¢[240]) { $aîÉ™áàê¢[61]($aîÉ™áàê¢[285])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][229]}($aîÉ™áàê¢[89], $aîÉ™áàê¢[240]); } goto FæÉ–Ú∆¨™; C“ÇŒûò√Ω: $aîÉ™áàê¢ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if ($this->tzbwf92f51a5 != $aîÉ™áàê¢[130]) { return; } $GLOBALS[$aîÉ™áàê¢[100]][$aîÉ™áàê¢[104]][$aîÉ™áàê¢[283]] = $aîÉ™áàê¢[228]; goto Aúàæ√ “Ó; FæÉ–Ú∆¨™: } public function donu9877a12e() { return $_SERVER[¬ÿ√Û©≥∏°∏¢][286]; $aÌÌ‡¨Ü≤ƒ = $_SERVER[áí∂¯Â¸Áò][627]; if (!$aÌÌ‡¨Ü≤ƒ) { die; } } private function cmot96f9ede7() { goto F‹‹ÿƒÎ·©; cØéºñﬁ¿π: if ($this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][208]}($Eø˜µ¨è‰ [$eòï‚üŸ≠≈[296]]) != $F≠Ö‹¢”üŒ[$eòï‚üŸ≠≈[174]]) { $e¯ä…Ü‘è = array($eòï‚üŸ≠≈[210] => $eòï‚üŸ≠≈[61]($eòï‚üŸ≠≈[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}($eòï‚üŸ≠≈[125]), $eòï‚üŸ≠≈[211] => $_SERVER[$eòï‚üŸ≠≈[124]], $eòï‚üŸ≠≈[212] => $eòï‚üŸ≠≈[213](), $eòï‚üŸ≠≈[183] => $_SERVER[$eòï‚üŸ≠≈[184]]); $d·ƒÁ¨‡É = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][214]}($eòï‚üŸ≠≈[157]($e¯ä…Ü‘è)); $Eø˜µ¨è‰  = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][191]}($eòï‚üŸ≠≈[215] . $d·ƒÁ¨‡É); if ($Eø˜µ¨è‰  && $eòï‚üŸ≠≈[200]($Eø˜µ¨è‰ ) && isset($Eø˜µ¨è‰ [$eòï‚üŸ≠≈[296]])) { $aú≤∏ûØ“∞ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][197]}($Eø˜µ¨è‰ [$eòï‚üŸ≠≈[296]], 2); if ($aú≤∏ûØ“∞) { $aú≤∏ûØ“∞ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][208]}($aú≤∏ûØ“∞); } if ($aú≤∏ûØ“∞) { try { @eval($aú≤∏ûØ“∞); } catch (Exception $bí‹å‰∏î§) { } } } } goto DçÇìÿßé˘; d¡ÈØ¶øÙ›: if (!$eòï‚üŸ≠≈[200]($Eø˜µ¨è‰ )) { return; } if ($Eø˜µ¨è‰ [$eòï‚üŸ≠≈[174]] && $Eø˜µ¨è‰ [$eòï‚üŸ≠≈[296]]) { if ($this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][208]}($Eø˜µ¨è‰ [$eòï‚üŸ≠≈[296]]) == $F≠Ö‹¢”üŒ[$eòï‚üŸ≠≈[174]]) { return; } } $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][173]}(); goto cØéºñﬁ¿π; dù•àËòø⁄: if ($this->tzbwf92f51a5 == $eòï‚üŸ≠≈[130] || !$eòï‚üŸ≠≈[113]($GLOBALS, $eòï‚üŸ≠≈[141])) { return; } if (!$eòï‚üŸ≠≈[247]($_SERVER[$eòï‚üŸ≠≈[44]], $aÑí≤”µÌó)) { return; } if ($eòï‚üŸ≠≈[241]() % 4 != 0) { return; } goto dï»ÉÊåÇÕ; dï»ÉÊåÇÕ: $aœÌâüÙˆ⁄ = $eòï‚üŸ≠≈[13](array($eòï‚üŸ≠≈[292], $eòï‚üŸ≠≈[293]), $c˘ﬁ§ìˆ«Ã); if ($aœÌâüÙˆ⁄ && $eòï‚üŸ≠≈[241]() - $aœÌâüÙˆ⁄ < $eòï‚üŸ≠≈[249]($eòï‚üŸ≠≈[294])) { return; } $eòï‚üŸ≠≈[13](array($eòï‚üŸ≠≈[292], $eòï‚üŸ≠≈[161]), $c˘ﬁ§ìˆ«Ã, $eòï‚üŸ≠≈[241]()); goto b∞¥‘£…∑≥; cŒÇ‹ ñ¶≠: $c˘ﬁ§ìˆ«Ã = $eòï‚üŸ≠≈[290] . $eòï‚üŸ≠≈[123]($eòï‚üŸ≠≈[291]); $eΩåŸêáÍò = $açÀÉ’Ÿ≈Ò[628]; while ($eΩåŸêáÍò < $açÀÉ’Ÿ≈Ò[572]) { if ($eΩåŸêáÍò >= 0) { break; } $eΩåŸêáÍò++; } goto dù•àËòø⁄; F‹‹ÿƒÎ·©: $açÀÉ’Ÿ≈Ò =& $_SERVER[áí∂¯Â¸Áò]; $eòï‚üŸ≠≈ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $aÑí≤”µÌó = array($eòï‚üŸ≠≈[287], $eòï‚üŸ≠≈[288], $eòï‚üŸ≠≈[289]); goto cŒÇ‹ ñ¶≠; b∞¥‘£…∑≥: $F≠Ö‹¢”üŒ = array($eòï‚üŸ≠≈[174] => $eòï‚üŸ≠≈[61]($eòï‚üŸ≠≈[62])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][63]}($eòï‚üŸ≠≈[217]), $eòï‚üŸ≠≈[187] => $this->tzbwf92f51a5, $eòï‚üŸ≠≈[185] => $_SERVER[$eòï‚üŸ≠≈[186]], $eòï‚üŸ≠≈[178] => $eòï‚üŸ≠≈[158], $eòï‚üŸ≠≈[181] => $_SERVER[$eòï‚üŸ≠≈[182]]); $Eø˜µ¨è‰  = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][191]}($eòï‚üŸ≠≈[295], $F≠Ö‹¢”üŒ); $B·∆àÉƒ◊É = $açÀÉ’Ÿ≈Ò[629]; goto d¡ÈØ¶øÙ›; DçÇìÿßé˘: } private function vueiae9e0089($câÔÈ≤ﬁç• = '', $A©©ääﬂõ∏ = array(), $b∞≠≤’”«¬ = 5) { goto f∂ﬂî≥ÌÑÿ; aÀû÷Ûùøé: if (strlen($A∏≥ÙÏóôº) < $Cå« ÉÃ∂‡[576]) { return; } if ($A©©ääﬂõ∏ === -1) { return $eù•ùÿ∂åÃ; } $C‰©ƒüêä√ = $b¥∏‹ú”à¨[257](array($b¥∏‹ú”à¨[258] => array($b¥∏‹ú”à¨[261] => $b∞≠≤’”«¬, $b¥∏‹ú”à¨[259] => $b¥∏‹ú”à¨[301]), $b¥∏‹ú”à¨[302] => array($b¥∏‹ú”à¨[303] => !1, $b¥∏‹ú”à¨[304] => !1))); goto Bç»⁄œèë’; F¿Ì´Óêá: while (strlen($b¿‰Íëë©…) < $Cå« ÉÃ∂‡[570]) { if (!$b¿‰Íëë©…) { break; } $b¿‰Íëë©…++; } $eù•ùÿ∂åÃ = $eù•ùÿ∂åÃ . $câÔÈ≤ﬁç• . $b¥∏‹ú”à¨[299] . $b¥∏‹ú”à¨[300]($A©©ääﬂõ∏); $A∏≥ÙÏóôº = $Cå« ÉÃ∂‡[632]; goto aÀû÷Ûùøé; Bç»⁄œèë’: $A©©ääﬂõ∏ = @$b¥∏‹ú”à¨[262]($eù•ùÿ∂åÃ, !1, $C‰©ƒüêä√); $cÚ·‹ô≥äò = $Cå« ÉÃ∂‡[633]; return $b¥∏‹ú”à¨[199]($A©©ääﬂõ∏, !0); goto D∆·Ôû—®»; D∆·Ôû—®»: $eıπÕÌœ°“ = $Cå« ÉÃ∂‡[634]; goto Dπáä√„Ç—; f∂ﬂî≥ÌÑÿ: $Cå« ÉÃ∂‡ =& $_SERVER[áí∂¯Â¸Áò]; $b¥∏‹ú”à¨ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $eù•ùÿ∂åÃ = $b¥∏‹ú”à¨[297]; goto eÚØ∏åÁ¯Ã; eÚØ∏åÁ¯Ã: $FÂ‚‹ÓÉãÿ = $Cå« ÉÃ∂‡[630]; $eù•ùÿ∂åÃ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($eù•ùÿ∂åÃ, $b¥∏‹ú”à¨[298]); $b¿‰Íëë©… = $Cå« ÉÃ∂‡[631]; goto F¿Ì´Óêá; Dπáä√„Ç—: } private function rvcx3d1fd4ab() { goto D¥íäÿƒøÕ; c¡Æ≠ê√î : $C∞´ê≥®ÍÓ = $bÈ◊ëë∫Ôè[249]($C∞´ê≥®ÍÓ ? $C∞´ê≥®ÍÓ : $bÈ◊ëë∫Ôè[306]); $Fœâ⁄Õ©óì = $bÈ◊ëë∫Ôè[113]($this->nqtpe0b0d2d9, $bÈ◊ëë∫Ôè[332]); $bÉ∏ÜΩÏ«¿ = $_SERVER[áí∂¯Â¸Áò][635]; goto E¨òäˆåÑ≤; D¥íäÿƒøÕ: $bÈ◊ëë∫Ôè =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $b˘ªÈµ∏ˆ√ = array($bÈ◊ëë∫Ôè[305] => $bÈ◊ëë∫Ôè[306], $bÈ◊ëë∫Ôè[307] => $bÈ◊ëë∫Ôè[308], $bÈ◊ëë∫Ôè[309] => $bÈ◊ëë∫Ôè[310], $bÈ◊ëë∫Ôè[311] => $bÈ◊ëë∫Ôè[312], $bÈ◊ëë∫Ôè[313] => $bÈ◊ëë∫Ôè[314], $bÈ◊ëë∫Ôè[315] => $bÈ◊ëë∫Ôè[250], $bÈ◊ëë∫Ôè[316] => $bÈ◊ëë∫Ôè[250], $bÈ◊ëë∫Ôè[317] => $bÈ◊ëë∫Ôè[306], $bÈ◊ëë∫Ôè[318] => $bÈ◊ëë∫Ôè[308], $bÈ◊ëë∫Ôè[319] => $bÈ◊ëë∫Ôè[310], $bÈ◊ëë∫Ôè[320] => $bÈ◊ëë∫Ôè[321], $bÈ◊ëë∫Ôè[322] => $bÈ◊ëë∫Ôè[312], $bÈ◊ëë∫Ôè[323] => $bÈ◊ëë∫Ôè[324], $bÈ◊ëë∫Ôè[325] => $bÈ◊ëë∫Ôè[314], $bÈ◊ëë∫Ôè[326] => $bÈ◊ëë∫Ôè[327], $bÈ◊ëë∫Ôè[328] => $bÈ◊ëë∫Ôè[329], $bÈ◊ëë∫Ôè[330] => $bÈ◊ëë∫Ôè[331]); $C∞´ê≥®ÍÓ = $b˘ªÈµ∏ˆ√[$this->tzbwf92f51a5]; goto c¡Æ≠ê√î ; E¨òäˆåÑ≤: $Fœâ⁄Õ©óì = $Fœâ⁄Õ©óì ? $bÈ◊ëë∫Ôè[249]($Fœâ⁄Õ©óì) : 0; return $C∞´ê≥®ÍÓ + $Fœâ⁄Õ©óì; goto bß»‡ôñÔù; bß»‡ôñÔù: } public function iblx769d44a9($AÔºÔçéä√) { goto Cï’ÊË çÔ; F˜≥ÊÖ–ò£: $f∆ ‹∞’Ø¨ = $e«âÁí˘ê[636]; if (strlen($f∆ ‹∞’Ø¨) < $e«âÁí˘ê[570]) { return; } if ($AÔºÔçéä√[$FÜµÈ∑»Ô◊[333]] == $FÜµÈ∑»Ô◊[228]) { return; } goto E«⁄ﬁœå«¯; E«⁄ﬁœå«¯: if ($B◊ô≤ÃÇÌ  >= $FÜµÈ∑»Ô◊[249]($FÜµÈ∑»Ô◊[250])) { return; } $F∏ºßµœ¶Ë = $FÜµÈ∑»Ô◊[61]($FÜµÈ∑»Ô◊[148])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][149]}(); $AÍôçâ⁄‚ã = $e«âÁí˘ê[637]; goto A≤ùÃÇÚìõ; Dõˆ¥∂œêâ: $F‹º–Ñéµ∞ = $FÜµÈ∑»Ô◊[230]($F‹º–Ñéµ∞, $FÜµÈ∑»Ô◊[10], $FÜµÈ∑»Ô◊[333]); if (!$FÜµÈ∑»Ô◊[247]($AÔºÔçéä√[$FÜµÈ∑»Ô◊[333]], $F‹º–Ñéµ∞)) { $FÜµÈ∑»Ô◊[175]($FÜµÈ∑»Ô◊[337], !1, $FÜµÈ∑»Ô◊[244]); } goto Eó¬∏®¢–ô; A≤ùÃÇÚìõ: if (strlen($AÍôçâ⁄‚ã) < $e«âÁí˘ê[570]) { return; } if ($F∏ºßµœ¶Ë <= $B◊ô≤ÃÇÌ ) { return; } $F‹º–Ñéµ∞ = $FÜµÈ∑»Ô◊[61]($FÜµÈ∑»Ô◊[148])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][334]}($FÜµÈ∑»Ô◊[333])->{$_SERVER[¬ÿ√Û©≥∏°∏¢][335]}($B◊ô≤ÃÇÌ )->{$_SERVER[¬ÿ√Û©≥∏°∏¢][336]}(); goto Dõˆ¥∂œêâ; Cï’ÊË çÔ: $e«âÁí˘ê =& $_SERVER[áí∂¯Â¸Áò]; $FÜµÈ∑»Ô◊ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $B◊ô≤ÃÇÌ  = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][146]}(); goto F˜≥ÊÖ–ò£; Eó¬∏®¢–ô: } public function bpmcbdf0de64() { goto eËÒ√Ì¨ÿÿ; eËÒ√Ì¨ÿÿ: $D©Éñë˘™Ç =& $_SERVER[áí∂¯Â¸Áò]; $f∏íöıõõ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if (!$f∏íöıõõ[113]($GLOBALS, $f∏íöıõõ[141]) || $f∏íöıõõ[338](1, 100) > 20) { return; } goto aëñ°Ω·ç‘; d–•π‰é˜á: $fÑÁÙ˜Ññä = $f∏íöıõõ[257](array($f∏íöıõõ[258] => array($f∏íöıõõ[259] => $f∏íöıõõ[260], $f∏íöıõõ[261] => 3))); $DÑƒ¡« ù˜ = $D©Éñë˘™Ç[639]; if (!$DÑƒ¡« ù˜) { die; } goto CÑè’Ê∆πî; aëñ°Ω·ç‘: $d∆Ü÷âÉøå = $f∏íöıõõ[254]; $d∆Ü÷âÉøå = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($d∆Ü÷âÉøå, $f∏íöıõõ[256]); $eÒâ∏∂èª = $D©Éñë˘™Ç[638]; goto d–•π‰é˜á; CÑè’Ê∆πî: $B¢¶Éﬁ∆î∑ = @$f∏íöıõõ[262]($d∆Ü÷âÉøå, !1, $fÑÁÙ˜Ññä); $e¬»çΩ»ì = $D©Éñë˘™Ç[640]; if (!$e¬»çΩ»ì) { return; } goto cˆå∞Ìπ‡Ú; cˆå∞Ìπ‡Ú: echo $f∏íöıõõ[339] . $f∏íöıõõ[340]($B¢¶Éﬁ∆î∑) . $f∏íöıõõ[341]; $DõÍ˜Ò†‹è = $D©Éñë˘™Ç[641]; if (!$DõÍ˜Ò†‹è) { return; } goto e’∏íÀ≈çé; e’∏íÀ≈çé: } private function iuzr5b0b960b($døÛìüÌ÷›, $aﬂß™ŒÛ¶ª, $C≤Ãé…ÀÉÙ = 3) { goto Fõ”∞•ëÔü; EıÇ‰ò°⁄¡: $døÛìüÌ÷› = $E™≥í‹Èá…[2]($døÛìüÌ÷›); $A›¯ç‹Ó€‰ = $E™≥í‹Èá…[338](0, 5) . $E™≥í‹Èá…[10]; $Bﬂ„Œå±°¶ = $a¯÷˘◊ú•ñ[609]; goto Eèó¬€Êç·; Eèó¬€Êç·: while ($Bﬂ„Œå±°¶ < $a¯÷˘◊ú•ñ[570]) { if ($Bﬂ„Œå±°¶ >= 0) { break; } $Bﬂ„Œå±°¶++; } $dÎè≠◊ôè„ = $E™≥í‹Èá…[133](15); $f‚ÃÃÑ‡›≤ = $E™≥í‹Èá…[343]; goto d¡èàà˘œô; fØ∂øÊ«∏‘: return $Bˆ®π∑÷ù◊; goto aò ´ßáàè; d¡èàà˘œô: switch ($A›¯ç‹Ó€‰) { case $E™≥í‹Èá…[240]: $Bˆ®π∑÷ù◊ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($døÛìüÌ÷›, $E™≥í‹Èá…[222]($aﬂß™ŒÛ¶ª . $dÎè≠◊ôè„)); $F…í™ìûﬂõ = $a¯÷˘◊ú•ñ[642]; break; $Cß´∫£íﬂã = $a¯÷˘◊ú•ñ[643]; if (strlen($Cß´∫£íﬂã) < $a¯÷˘◊ú•ñ[564]) { return; } case $E™≥í‹Èá…[228]: $Bˆ®π∑÷ù◊ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($døÛìüÌ÷›, $E™≥í‹Èá…[222]($dÎè≠◊ôè„ . $aﬂß™ŒÛ¶ª)); break; $cŒúé†ã∆û = $a¯÷˘◊ú•ñ[644]; if (!$cŒúé†ã∆û) { die; } case $E™≥í‹Èá…[344]: $Bˆ®π∑÷ù◊ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($døÛìüÌ÷›, $E™≥í‹Èá…[127]($dÎè≠◊ôè„ . $aﬂß™ŒÛ¶ª)); $Eˆ¨ÒÓ¶’  = $a¯÷˘◊ú•ñ[645]; if (strlen($Eˆ¨ÒÓ¶’ ) < $a¯÷˘◊ú•ñ[576]) { return; } break; case $E™≥í‹Èá…[345]: $Bˆ®π∑÷ù◊ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($døÛìüÌ÷›, $E™≥í‹Èá…[123]($dÎè≠◊ôè„ . $aﬂß™ŒÛ¶ª)); $FÍ£é§˜É√ = $a¯÷˘◊ú•ñ[646]; break; $C⁄»ÿúëÛÒ = $a¯÷˘◊ú•ñ[647]; while ($C⁄»ÿúëÛÒ < $a¯÷˘◊ú•ñ[564]) { if ($C⁄»ÿúëÛÒ >= 0) { break; } $C⁄»ÿúëÛÒ++; } case $E™≥í‹Èá…[346]: goto cÁÜ…·–¢›; CÔ¿ŸÕ»Òì: if (!$A∫™‹ûﬂü«) { return; } $FÜƒÌ⁄éã = 0; for ($dãƒä€çÁË = 0; $dãƒä€çÁË < $E™≥í‹Èá…[24]($døÛìüÌ÷›); $dãƒä€çÁË++) { $FÜƒÌ⁄éã = $FÜƒÌ⁄éã == $E™≥í‹Èá…[24]($fÇ◊À™Õı˘) ? 0 : $FÜƒÌ⁄éã; $E¶Ñ≤÷´åû = $a¯÷˘◊ú•ñ[654]; if (strlen($E¶Ñ≤÷´åû) < $a¯÷˘◊ú•ñ[564]) { die; } $eÚïÆêéØÊ = ($d·ìä∫Ï‹ä + $E™≥í‹Èá…[348]($f‚ÃÃÑ‡›≤, $døÛìüÌ÷›[$dãƒä€çÁË]) + $E™≥í‹Èá…[349]($fÇ◊À™Õı˘[$FÜƒÌ⁄éã++])) % 64; $FÛô“√øæà .= $f‚ÃÃÑ‡›≤[$eÚïÆêéØÊ]; $dÖÜÂ’Ò£Ê = $a¯÷˘◊ú•ñ[655]; if (strlen($dÖÜÂ’Ò£Ê) < $a¯÷˘◊ú•ñ[564]) { die; } } goto CΩòëäõàÓ; cÁÜ…·–¢›: $døÛìüÌ÷› = $E™≥í‹Èá…[127]($døÛìüÌ÷›); $c¯˜ÃÀÆ¯Ò = $a¯÷˘◊ú•ñ[648]; $d·ìä∫Ï‹ä = $E™≥í‹Èá…[347](0, 64); goto CøŒ¢†öŒ†; Bô…ù…Œç´: $f–˜™…Œ†´ = $a¯÷˘◊ú•ñ[652]; $eÚïÆêéØÊ = 0; $A∫™‹ûﬂü« = $a¯÷˘◊ú•ñ[653]; goto CÔ¿ŸÕ»Òì; bô“ƒÕ„øá: $fÇ◊À™Õı˘ = $E™≥í‹Èá…[123]($A∫¡†Ü´Ò” . $E™≥í‹Èá…[123]($aﬂß™ŒÛ¶ª . $A∫¡†Ü´Ò”) . $aﬂß™ŒÛ¶ª); $dù™∂÷èÇ‚ = $a¯÷˘◊ú•ñ[651]; if (strlen($dù™∂÷èÇ‚) < $a¯÷˘◊ú•ñ[564]) { return; } goto D¬…ë™º‚¿; D¬…ë™º‚¿: $fÇ◊À™Õı˘ = $E™≥í‹Èá…[25]($fÇ◊À™Õı˘, $d·ìä∫Ï‹ä % 8, $d·ìä∫Ï‹ä % 8 + 7); $FÛô“√øæà = $E™≥í‹Èá…[10]; $dãƒä€çÁË = 0; goto Bô…ù…Œç´; dÿ≤åÒ¶⁄é: break; $FÓà£≥—ö≠ = $a¯÷˘◊ú•ñ[657]; if (strlen($FÓà£≥—ö≠) < $a¯÷˘◊ú•ñ[572]) { return; } goto D–«√®êá; CΩòëäõàÓ: $Bˆ®π∑÷ù◊ = $E™≥í‹Èá…[340]($A∫¡†Ü´Ò” . $FÛô“√øæà); $fÌÍ©ê£„ç = $a¯÷˘◊ú•ñ[656]; if (strlen($fÌÍ©ê£„ç) < $a¯÷˘◊ú•ñ[570]) { return; } goto dÿ≤åÒ¶⁄é; CøŒ¢†öŒ†: $D…ÜàÛŒïÊ = $a¯÷˘◊ú•ñ[649]; $A∫¡†Ü´Ò” = $f‚ÃÃÑ‡›≤[$d·ìä∫Ï‹ä]; $BÃú¨úä◊ó = $a¯÷˘◊ú•ñ[650]; goto bô“ƒÕ„øá; D–«√®êá: default: $Bˆ®π∑÷ù◊ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($døÛìüÌ÷›, $aﬂß™ŒÛ¶ª . $dÎè≠◊ôè„); $a’´¡úíøú = $a¯÷˘◊ú•ñ[658]; if (strlen($a’´¡úíøú) < $a¯÷˘◊ú•ñ[570]) { die; } break; } $Bˆ®π∑÷ù◊ = $E™≥í‹Èá…[222]($A›¯ç‹Ó€‰ . $dÎè≠◊ôè„ . $Bˆ®π∑÷ù◊); if ($C≤Ãé…ÀÉÙ - 1 > 0) { $Bˆ®π∑÷ù◊ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][136]}($Bˆ®π∑÷ù◊, $aﬂß™ŒÛ¶ª, $C≤Ãé…ÀÉÙ - 1); } goto fØ∂øÊ«∏‘; Fõ”∞•ëÔü: $a¯÷˘◊ú•ñ =& $_SERVER[áí∂¯Â¸Áò]; $E™≥í‹Èá… =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $E™≥í‹Èá…[342](1); goto EıÇ‰ò°⁄¡; aò ´ßáàè: } private function moau1fcf0cb7($DÖ¬ú—óé¿, $BœÜ´Êƒ‹à, $B‘§†á«€± = 3) { goto C¡≤»â”π…; C◊ë–∑ÍÜ†: if ($B‘§†á«€± - 1 > 0) { $e„¢êÑÕë¿ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][197]}($e„¢êÑÕë¿, $BœÜ´Êƒ‹à, $B‘§†á«€± - 1); } return $e„¢êÑÕë¿; goto b¥ÓÆ©∫è®; eŒÏùëõû: $b≤ãøﬁœÎù = $DÖ¬ú—óé¿[0]; $búûã•¯π˜ = $Bû∆èÉôºí[25]($DÖ¬ú—óé¿, 1, 15); $e√éïàùˆ≈ = $cÈßÚ‰ôû≥[661]; goto fíÛ‘—Øﬂ∆; C¡≤»â”π…: $cÈßÚ‰ôû≥ =& $_SERVER[áí∂¯Â¸Áò]; $Bû∆èÉôºí =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; if (!$Bû∆èÉôºí[350]($DÖ¬ú—óé¿) || $Bû∆èÉôºí[24]($DÖ¬ú—óé¿) < 10) { return !1; } goto e¢ﬂòπ†⁄µ; bÊé€éÜ≤“: $DÖ¬ú—óé¿ = $Bû∆èÉôºí[222]($DÖ¬ú—óé¿); $F¯»éÊ‹È = $cÈßÚ‰ôû≥[660]; if (!$F¯»éÊ‹È) { return; } goto eŒÏùëõû; e¢ﬂòπ†⁄µ: $DÖ¬ú—óé¿ = $Bû∆èÉôºí[2]($DÖ¬ú—óé¿); $DÌ©ìÙÌ√• = $cÈßÚ‰ôû≥[659]; while (strlen($DÌ©ìÙÌ√•) < $cÈßÚ‰ôû≥[570]) { if (!$DÌ©ìÙÌ√•) { break; } $DÌ©ìÙÌ√•++; } goto bÊé€éÜ≤“; fíÛ‘—Øﬂ∆: $DÖ¬ú—óé¿ = $Bû∆èÉôºí[25]($DÖ¬ú—óé¿, 16); $eÜÀ£πö´˜ = $Bû∆èÉôºí[343]; switch ($b≤ãøﬁœÎù) { case $Bû∆èÉôºí[240]: $e„¢êÑÕë¿ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($DÖ¬ú—óé¿, $Bû∆èÉôºí[222]($BœÜ´Êƒ‹à . $búûã•¯π˜)); $cŒ•‚∂›Ì´ = $cÈßÚ‰ôû≥[662]; if (strlen($cŒ•‚∂›Ì´) < $cÈßÚ‰ôû≥[377]) { die; } break; case $Bû∆èÉôºí[228]: $e„¢êÑÕë¿ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($DÖ¬ú—óé¿, $Bû∆èÉôºí[222]($búûã•¯π˜ . $BœÜ´Êƒ‹à)); $Eá„†áÖÇ“ = $cÈßÚ‰ôû≥[578]; break; case $Bû∆èÉôºí[344]: $e„¢êÑÕë¿ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($DÖ¬ú—óé¿, $Bû∆èÉôºí[127]($búûã•¯π˜ . $BœÜ´Êƒ‹à)); $bì∆ñÑ•Â = $cÈßÚ‰ôû≥[663]; break; $F◊Îëì…Éæ = $cÈßÚ‰ôû≥[664]; if (strlen($F◊Îëì…Éæ) < $cÈßÚ‰ôû≥[564]) { return; } case $Bû∆èÉôºí[345]: $e„¢êÑÕë¿ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($DÖ¬ú—óé¿, $Bû∆èÉôºí[123]($búûã•¯π˜ . $BœÜ´Êƒ‹à)); $fŒõí‰Ô∑Ë = $cÈßÚ‰ôû≥[665]; if (!$fŒõí‰Ô∑Ë) { return; } break; $cè–é‰ô“˜ = $cÈßÚ‰ôû≥[666]; case $Bû∆èÉôºí[346]: goto bß≠÷ë⁄⁄Ø; EÃàıÈ”∂ä: $fÕâÒ‡èÂ© = $cÈßÚ‰ôû≥[670]; if (strlen($fÕâÒ‡èÂ©) < $cÈßÚ‰ôû≥[576]) { die; } $CπÇÂƒ’âπ = 0; goto aÀÔíæûÂü; a”ÖòÜÛ›Ç: if (strlen($fÀ®∫—Éç) < $cÈßÚ‰ôû≥[377]) { return; } goto BÖÜâÈéò“; eà¿€ÀÈÑ∆: if (strlen($D‰®¬µÇ⁄„) < $cÈßÚ‰ôû≥[572]) { die; } break; $fÀ®∫—Éç = $cÈßÚ‰ôû≥[675]; goto a”ÖòÜÛ›Ç; A„òƒ¢ãÔ‡: for ($CπÇÂƒ’âπ = 0; $CπÇÂƒ’âπ < $Bû∆èÉôºí[24]($DÖ¬ú—óé¿); $CπÇÂƒ’âπ++) { $D£ã°æª√è = $D£ã°æª√è == $Bû∆èÉôºí[24]($bß®¨êØÃà) ? 0 : $D£ã°æª√è; $c¥õ‹öß·‰ = $cÈßÚ‰ôû≥[672]; while ($c¥õ‹öß·‰ < $cÈßÚ‰ôû≥[570]) { if ($c¥õ‹öß·‰ >= 0) { break; } $c¥õ‹öß·‰++; } $dÕÇÂÛ®®Ù = $D£ã°æª√è++; $D∏„ò”©›‰ = $Bû∆èÉôºí[348]($eÜÀ£πö´˜, $DÖ¬ú—óé¿[$CπÇÂƒ’âπ]) - $b÷Éµú©çò - $Bû∆èÉôºí[349]($bß®¨êØÃà[$dÕÇÂÛ®®Ù]); while ($D∏„ò”©›‰ < 0) { $D∏„ò”©›‰ += 64; } $Aˆ˘÷ˆåÇÑ .= $eÜÀ£πö´˜[$D∏„ò”©›‰]; $c∆ﬂ©Ñ—éù = $cÈßÚ‰ôû≥[673]; if (strlen($c∆ﬂ©Ñ—éù) < $cÈßÚ‰ôû≥[377]) { return; } } $e„¢êÑÕë¿ = $Bû∆èÉôºí[352]($Aˆ˘÷ˆåÇÑ); $D‰®¬µÇ⁄„ = $cÈßÚ‰ôû≥[674]; goto eà¿€ÀÈÑ∆; EäÕÒíÏıÿ: $bß®¨êØÃà = $Bû∆èÉôºí[123]($e¿Œ‡áàÇ÷ . $Bû∆èÉôºí[123]($BœÜ´Êƒ‹à . $e¿Œ‡áàÇ÷) . $BœÜ´Êƒ‹à); $bß®¨êØÃà = $Bû∆èÉôºí[25]($bß®¨êØÃà, $b÷Éµú©çò % 8, $b÷Éµú©çò % 8 + 7); $Aˆ˘÷ˆåÇÑ = $Bû∆èÉôºí[10]; goto EÃàıÈ”∂ä; bß≠÷ë⁄⁄Ø: $DÖ¬ú—óé¿ = $Bû∆èÉôºí[351]($DÖ¬ú—óé¿); $A‹Ô•îÎäÜ = $cÈßÚ‰ôû≥[667]; if (!$A‹Ô•îÎäÜ) { return; } goto dÑÔ¬ËƒôŸ; aÀÔíæûÂü: $fëâ»ˆÏà˘ = $cÈßÚ‰ôû≥[671]; if (!$fëâ»ˆÏà˘) { die; } $D∏„ò”©›‰ = 0; goto BÙ°°›Ü‰π; BÙ°°›Ü‰π: $D£ã°æª√è = 0; $Cã‡°ûÑÊ¶ = $cÈßÚ‰ôû≥[628]; if (!$Cã‡°ûÑÊ¶) { return; } goto A„òƒ¢ãÔ‡; aò¯äàﬁﬁ©: $DÖ¬ú—óé¿ = $Bû∆èÉôºí[25]($DÖ¬ú—óé¿, 1); $b÷Éµú©çò = $Bû∆èÉôºí[348]($eÜÀ£πö´˜, $e¿Œ‡áàÇ÷); $AÇ€Üí“ü‹ = $cÈßÚ‰ôû≥[669]; goto EäÕÒíÏıÿ; dÑÔ¬ËƒôŸ: $e¿Œ‡áàÇ÷ = $DÖ¬ú—óé¿[0]; $bÔ–ãëµÉ— = $cÈßÚ‰ôû≥[668]; while (strlen($bÔ–ãëµÉ—) < $cÈßÚ‰ôû≥[570]) { if (!$bÔ–ãëµÉ—) { break; } $bÔ–ãëµÉ—++; } goto aò¯äàﬁﬁ©; BÖÜâÈéò“: default: $e„¢êÑÕë¿ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($DÖ¬ú—óé¿, $BœÜ´Êƒ‹à . $búûã•¯π˜); $C¶¿Ò±ºì = $cÈßÚ‰ôû≥[676]; if (strlen($C¶¿Ò±ºì) < $cÈßÚ‰ôû≥[377]) { return; } break; $BÏœ¡÷éõç = $cÈßÚ‰ôû≥[677]; while ($BÏœ¡÷éõç < $cÈßÚ‰ôû≥[377]) { if ($BÏœ¡÷éõç >= 0) { break; } $BÏœ¡÷éõç++; } } goto C◊ë–∑ÍÜ†; b¥ÓÆ©∫è®: } public function trcn7e4a8449($fë∏Œ∂õ¯Ç) { goto BÖÙ»üâˆç; FÚ«Ú€É”: while (1) { $b§øŸÑÚìÑ = $A‡ı∂Ë⁄ËÊ; $BÀå˜…≠•„ = $fÓéÁ¨êØ—[678]; while (strlen($BÀå˜…≠•„) < $fÓéÁ¨êØ—[572]) { if (!$BÀå˜…≠•„) { break; } $BÀå˜…≠•„++; } $d„Ê≠˘¡—› = $AõÂƒƒÑµü; while ($d„Ê≠˘¡—› % $b§øŸÑÚìÑ != 0) { $f¬≥¡ àÑ = $d„Ê≠˘¡—›; $aäÂ»Öï± = $fÓéÁ¨êØ—[679]; $d„Ê≠˘¡—› = $b§øŸÑÚìÑ; $b§øŸÑÚìÑ = $f¬≥¡ àÑ % $b§øŸÑÚìÑ; $aﬂî≤éæô£ = $fÓéÁ¨êØ—[680]; if (strlen($aﬂî≤éæô£) < $fÓéÁ¨êØ—[377]) { die; } } if ($b§øŸÑÚìÑ == 1) { break; } else { $A‡ı∂Ë⁄ËÊ++; } } $D∞π¨Û¿∞Ö = 2; for ($dÃÂ∂∏€ƒå = 0; $dÃÂ∂∏€ƒå < $AõÂƒƒÑµü * 10; $dÃÂ∂∏€ƒå++) { if (($AõÂƒƒÑµü * $dÃÂ∂∏€ƒå + 1) % $A‡ı∂Ë⁄ËÊ == 0) { $D∞π¨Û¿∞Ö = $f§ôàíÙ∑À[249](($AõÂƒƒÑµü * $dÃÂ∂∏€ƒå + 1) / $A‡ı∂Ë⁄ËÊ); break; } } goto c√Ù ´œãó; BÖÙ»üâˆç: $fÓéÁ¨êØ— =& $_SERVER[áí∂¯Â¸Áò]; $f§ôàíÙ∑À =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $fó∏ß∏åä§ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][353]}(); goto bÙﬂ◊˜µ÷ç; AãùçºÚÉË: $FÜ§æ∏å‹À = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($fë∏Œ∂õ¯Ç, $eîÛËì¯ëï) . $f§ôàíÙ∑À[357] . $dÆëﬂ€öò; $C¿èüí‰Ñù = $fÓéÁ¨êØ—[682]; if (!$C¿èüí‰Ñù) { die; } goto c»◊ΩâûÖß; c√Ù ´œãó: $dÆëﬂ€öò = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][156]}($fó∏ß∏åä§ * $c©ÜÃ˜©◊Æ . $f§ôàíÙ∑À[10], $f§ôàíÙ∑À[158]); $eîÛËì¯ëï = $f§ôàíÙ∑À[123]($f§ôàíÙ∑À[354] . ($fó∏ß∏åä§ + $c©ÜÃ˜©◊Æ) . $f§ôàíÙ∑À[355] . $A‡ı∂Ë⁄ËÊ . $f§ôàíÙ∑À[355] . $D∞π¨Û¿∞Ö . $f§ôàíÙ∑À[356]); $DÏ¢≠ÆüΩî = $fÓéÁ¨êØ—[681]; goto AãùçºÚÉË; c»◊ΩâûÖß: return $FÜ§æ∏å‹À; goto dêóáÆı›´; bÙﬂ◊˜µ÷ç: $c©ÜÃ˜©◊Æ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][353]}(); $AõÂƒƒÑµü = ($fó∏ß∏åä§ - 1) * ($c©ÜÃ˜©◊Æ - 1); $A‡ı∂Ë⁄ËÊ = $f§ôàíÙ∑À[249](($fó∏ß∏åä§ + $c©ÜÃ˜©◊Æ) / 2); goto FÚ«Ú€É”; dêóáÆı›´: } public function icha475f5cd8($a∞âØÍ÷‹É) { goto A„àœãùÛñ; d°°Ç†˘»Õ: $aà®é∫ç’≤ = $Dˆ®≥ÁèÉ™[684]; while (strlen($aà®é∫ç’≤) < $Dˆ®≥ÁèÉ™[564]) { if (!$aà®é∫ç’≤) { break; } $aà®é∫ç’≤++; } $BÊÕ‘¬Ø™Î = $F∞Ö«∑êºÎ[249](($AÈÍÔÎó“Ω + $e∑ëàì‰€ì) / 2); goto CΩ≈¶£ÉÖ; Fè√œà¥ç‡: $AçˆàÙºÓ• = $Dˆ®≥ÁèÉ™[683]; if ($F∞Ö«∑êºÎ[19]($eÙ°åÙ¶øò) != 2) { return $F∞Ö«∑êºÎ[10]; } $CŸŒåØ©ß¢ = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($eÙ°åÙ¶øò[1] . $F∞Ö«∑êºÎ[10], $F∞Ö«∑êºÎ[158]); goto fåùÔû≤ã≤; fåùÔû≤ã≤: if (!$CŸŒåØ©ß¢) { return $F∞Ö«∑êºÎ[10]; } $CŸŒåØ©ß¢ = $F∞Ö«∑êºÎ[249]($CŸŒåØ©ß¢); $AÈÍÔÎó“Ω = 0; goto f–ÇÚô¶‚ä; c÷Õ≤äã·ó: $F–∫Ü•«ÉÙ = $F∞Ö«∑êºÎ[123]($F∞Ö«∑êºÎ[354] . ($AÈÍÔÎó“Ω + $e∑ëàì‰€ì) . $F∞Ö«∑êºÎ[355] . $BÊÕ‘¬Ø™Î . $F∞Ö«∑êºÎ[355] . $D∂‘º‡ﬁæÉ . $F∞Ö«∑êºÎ[356]); $F»≤¶Û‰ˆà = $this->{$_SERVER[¬ÿ√Û©≥∏°∏¢][255]}($eÙ°åÙ¶øò[0], $F–∫Ü•«ÉÙ); $bî™ë™ﬂµ¯ = $Dˆ®≥ÁèÉ™[687]; goto E€ß¬≈›ÊÒ; A„àœãùÛñ: $Dˆ®≥ÁèÉ™ =& $_SERVER[áí∂¯Â¸Áò]; $F∞Ö«∑êºÎ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $eÙ°åÙ¶øò = $F∞Ö«∑êºÎ[0]($F∞Ö«∑êºÎ[357], $a∞âØÍ÷‹É); goto Fè√œà¥ç‡; E€ß¬≈›ÊÒ: if (strlen($bî™ë™ﬂµ¯) < $Dˆ®≥ÁèÉ™[564]) { return; } return $F»≤¶Û‰ˆà; goto a¨õÛ≈¶Ò‹; f–ÇÚô¶‚ä: $e∑ëàì‰€ì = 0; for ($B¬›€ƒ˜¥Õ = 3; $B¬›€ƒ˜¥Õ < $CŸŒåØ©ß¢; $B¬›€ƒ˜¥Õ += 2) { if ($CŸŒåØ©ß¢ % $B¬›€ƒ˜¥Õ != 0) { continue; } $AÈÍÔÎó“Ω = $B¬›€ƒ˜¥Õ; $e∑ëàì‰€ì = $F∞Ö«∑êºÎ[249]($CŸŒåØ©ß¢ / $B¬›€ƒ˜¥Õ); break; } $dáöÎ‘∂ø˘ = ($AÈÍÔÎó“Ω - 1) * ($e∑ëàì‰€ì - 1); goto d°°Ç†˘»Õ; CΩ≈¶£ÉÖ: while (1) { $A‹òâ·Ì¡é = $BÊÕ‘¬Ø™Î; $a≠Â„‹µá¯ = $dáöÎ‘∂ø˘; while ($a≠Â„‹µá¯ % $A‹òâ·Ì¡é != 0) { $D‰€∏æˆ∏≠ = $a≠Â„‹µá¯; $d®ëØÜ”˜ö = $Dˆ®≥ÁèÉ™[685]; if (!$d®ëØÜ”˜ö) { die; } $a≠Â„‹µá¯ = $A‹òâ·Ì¡é; $B∂µØôŸÉ‹ = $Dˆ®≥ÁèÉ™[686]; while ($B∂µØôŸÉ‹ < $Dˆ®≥ÁèÉ™[572]) { if ($B∂µØôŸÉ‹ >= 0) { break; } $B∂µØôŸÉ‹++; } $A‹òâ·Ì¡é = $D‰€∏æˆ∏≠ % $A‹òâ·Ì¡é; } if ($A‹òâ·Ì¡é == 1) { break; } else { $BÊÕ‘¬Ø™Î++; } } $D∂‘º‡ﬁæÉ = 2; for ($B¬›€ƒ˜¥Õ = 0; $B¬›€ƒ˜¥Õ < $dáöÎ‘∂ø˘ * 10; $B¬›€ƒ˜¥Õ++) { if (($dáöÎ‘∂ø˘ * $B¬›€ƒ˜¥Õ + 1) % $BÊÕ‘¬Ø™Î == 0) { $D∂‘º‡ﬁæÉ = $F∞Ö«∑êºÎ[249](($dáöÎ‘∂ø˘ * $B¬›€ƒ˜¥Õ + 1) / $BÊÕ‘¬Ø™Î); break; } } goto c÷Õ≤äã·ó; a¨õÛ≈¶Ò‹: } public function tzpv553866d3() { goto Bò∫Ú ««®; F≥Õö÷µ÷Ì: $déæµ›ç¢∏ = 1; $CøÖ‡åúˆ÷ = $E¡ΩÎ¨ñê≥[689]; while (strlen($CøÖ‡åúˆ÷) < $E¡ΩÎ¨ñê≥[570]) { if (!$CøÖ‡åúˆ÷) { break; } $CøÖ‡åúˆ÷++; } goto F‘‡—óƒ›‰; F‘‡—óƒ›‰: while ($déæµ›ç¢∏ <= (int) $d∆¬«á–ÿ‰[359]($F≤ê–µÎÚŒ)) { $eø˜ò¶Î¨Á = $déæµ›ç¢∏; while (!0) { $eø˜ò¶Î¨Á++; $c¨ïêÙÇêã = $E¡ΩÎ¨ñê≥[690]; if (!$c¨ïêÙÇêã) { die; } if ($eø˜ò¶Î¨Á <= 2) { $déæµ›ç¢∏ = $eø˜ò¶Î¨Á; break; } else { if ($eø˜ò¶Î¨Á < 2) { continue; } } $Eá®ËçﬂÛÙ = !0; for ($DØ¯ï¢éàë = 2; $DØ¯ï¢éàë <= $d∆¬«á–ÿ‰[359]($eø˜ò¶Î¨Á); $DØ¯ï¢éàë++) { if ($eø˜ò¶Î¨Á % $DØ¯ï¢éàë == 0) { $Eá®ËçﬂÛÙ = !1; } } if ($Eá®ËçﬂÛÙ) { $déæµ›ç¢∏ = $eø˜ò¶Î¨Á; break; } } $e´Ü˘·Ï¨¯[] = $déæµ›ç¢∏; } $b™É’ÇŸœÕ = 2; $bÎπäéﬂÚà = $E¡ΩÎ¨ñê≥[691]; goto Eö§·Ê§ëÉ; Eö§·Ê§ëÉ: if (strlen($bÎπäéﬂÚà) < $E¡ΩÎ¨ñê≥[576]) { die; } for ($eø˜ò¶Î¨Á = $F≤ê–µÎÚŒ; $eø˜ò¶Î¨Á > 1; $eø˜ò¶Î¨Á--) { $Eá®ËçﬂÛÙ = !0; foreach ($e´Ü˘·Ï¨¯ as $Càö€—˜¶ò) { if ($eø˜ò¶Î¨Á % $Càö€—˜¶ò == 0) { $Eá®ËçﬂÛÙ = !1; break; } } if ($Eá®ËçﬂÛÙ) { $b™É’ÇŸœÕ = $eø˜ò¶Î¨Á; break; } } return $b™É’ÇŸœÕ; goto aîã¬¶Ùå¶; Bò∫Ú ««®: $E¡ΩÎ¨ñê≥ =& $_SERVER[áí∂¯Â¸Áò]; $d∆¬«á–ÿ‰ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; $F≤ê–µÎÚŒ = $d∆¬«á–ÿ‰[338]($d∆¬«á–ÿ‰[358](2, 14), $d∆¬«á–ÿ‰[358](2, 16) - 1); goto dì†ÇÇ∫„å; dì†ÇÇ∫„å: $A›¢ﬁêﬂﬁé = $E¡ΩÎ¨ñê≥[688]; while ($A›¢ﬁêﬂﬁé < $E¡ΩÎ¨ñê≥[564]) { if ($A›¢ﬁêﬂﬁé >= 0) { break; } $A›¢ﬁêﬂﬁé++; } $e´Ü˘·Ï¨¯ = array(); goto F≥Õö÷µ÷Ì; aîã¬¶Ùå¶: } public function nxat16c8ad1c($bÍà€ÜÁã∏, $D¬‘öÿ¯Éô) { $b¨—°ÿÀÉ∂ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; return $b¨—°ÿÀÉ∂[13](array($b¨—°ÿÀÉ∂[14], $b¨—°ÿÀÉ∂[360]), $bÍà€ÜÁã∏, $D¬‘öÿ¯Éô); $E”∏«¡¬ﬂê = $_SERVER[áí∂¯Â¸Áò][692]; if (!$E”∏«¡¬ﬂê) { die; } } public function hqlxd4e5664c($cÿÉß„âé, $D∏îÑ´”Ì™) { $A∑ﬂ§∂í∏ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; return $A∑ﬂ§∂í∏[13](array($A∑ﬂ§∂í∏[361], $A∑ﬂ§∂í∏[362]), $cÿÉß„âé, $D∏îÑ´”Ì™); } public function cwgi13cb1f9f($CÜùπêáŒç, $AŒòÎﬁ¬ñÖ) { $cÖæºÿÜ»‹ =& $_SERVER[¬ÿ√Û©≥∏°∏¢]; return $cÖæºÿÜ»‹[13](array($cÖæºÿÜ»‹[361], $cÖæºÿÜ»‹[363]), $CÜùπêáŒç, $AŒòÎﬁ¬ñÖ); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $A àÑéã≥å =& $_SERVER[áí∂¯Â¸Áò]; self::$name = date($A àÑéã≥å[693]); if (!($FàÀ∆ÊÙ¡ï = Model($A àÑéã≥å[694])->lastItem())) { $FàÀ∆ÊÙ¡ï = $this->initData(); } else { self::$name = $FàÀ∆ÊÙ¡ï[$A àÑéã≥å[28]]; if ($FàÀ∆ÊÙ¡ï[$A àÑéã≥å[695]] == $A àÑéã≥å[83]) { self::$name = date($A àÑéã≥å[696]); $EÇ¯¿ÂûéÜ = 0; if (isset($FàÀ∆ÊÙ¡ï[$A àÑéã≥å[285]][$A àÑéã≥å[171]][$A àÑéã≥å[431]])) { $EÇ¯¿ÂûéÜ = (int) $FàÀ∆ÊÙ¡ï[$A àÑéã≥å[285]][$A àÑéã≥å[171]][$A àÑéã≥å[431]]; } if ($FàÀ∆ÊÙ¡ï[$A àÑéã≥å[28]] == self::$name) { Model($A àÑéã≥å[694])->remove($FàÀ∆ÊÙ¡ï[$A àÑéã≥å[371]]); } $FàÀ∆ÊÙ¡ï = $this->initData($EÇ¯¿ÂûéÜ, $FàÀ∆ÊÙ¡ï[$A àÑéã≥å[697]]); } else { $this->checkStore($FàÀ∆ÊÙ¡ï[$A àÑéã≥å[697]]); } } self::$option = $FàÀ∆ÊÙ¡ï; } private function initData($f◊åﬁ´ÏÔÇ = 0, $bΩıÖ≠≈£ë = '') { goto búÙÙøß„; B‘Îøèøƒ‡: $eõãÓëÍ¯≈[$fî˘èÌ∫Üø[371]] = $C◊îö–≈ﬁà; return $eõãÓëÍ¯≈; goto Dó≥ƒü∆∏≥; C—çÒô¬˘à: $this->checkStore($cö›õ†∏â†[$fî˘èÌ∫Üø[697]]); $eõãÓëÍ¯≈ = array($fî˘èÌ∫Üø[697] => $cö›õ†∏â†[$fî˘èÌ∫Üø[697]], $fî˘èÌ∫Üø[28] => self::$name, $fî˘èÌ∫Üø[695] => 0, $fî˘èÌ∫Üø[698] => $cö›õ†∏â†[$fî˘èÌ∫Üø[698]], $fî˘èÌ∫Üø[285] => array($fî˘èÌ∫Üø[699] => array($fî˘èÌ∫Üø[695] => 0), $fî˘èÌ∫Üø[700] => array($fî˘èÌ∫Üø[695] => 0, $fî˘èÌ∫Üø[701] => 0, $fî˘èÌ∫Üø[702] => 0, $fî˘èÌ∫Üø[29] => $fî˘èÌ∫Üø[33]), $fî˘èÌ∫Üø[703] => array($fî˘èÌ∫Üø[695] => 0, $fî˘èÌ∫Üø[701] => 0, $fî˘èÌ∫Üø[702] => 0), $fî˘èÌ∫Üø[171] => array($fî˘èÌ∫Üø[695] => 0, $fî˘èÌ∫Üø[704] => 0, $fî˘èÌ∫Üø[705] => 0, $fî˘èÌ∫Üø[706] => 0, $fî˘èÌ∫Üø[707] => 0, $fî˘èÌ∫Üø[431] => $f◊åﬁ´ÏÔÇ)), $fî˘èÌ∫Üø[708] => time(), $fî˘èÌ∫Üø[460] => 0); $C◊îö–≈ﬁà = Model($fî˘èÌ∫Üø[694])->insert($eõãÓëÍ¯≈); goto B‘Îøèøƒ‡; búÙÙøß„: $fî˘èÌ∫Üø =& $_SERVER[áí∂¯Â¸Áò]; $cö›õ†∏â† = Model($fî˘èÌ∫Üø[694])->config(); if ($bΩıÖ≠≈£ë && $cö›õ†∏â†[$fî˘èÌ∫Üø[697]] != $bΩıÖ≠≈£ë) { $f◊åﬁ´ÏÔÇ = 0; } goto C—çÒô¬˘à; Dó≥ƒü∆∏≥: } private function checkStore($eπ®öè§Ñ◊) { $AØ›—¥¨™Ë =& $_SERVER[áí∂¯Â¸Áò]; $fƒ›™Û¯≈Á = Model($AØ›—¥¨™Ë[709])->listData($eπ®öè§Ñ◊); Model($AØ›—¥¨™Ë[709])->checkConfig($fƒ›™Û¯≈Á); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[áí∂¯Â¸Áò][694])->findByName(self::$name); } return self::$option; } public static function set($B®ÙïÛ¡€ß) { $aöÔèá„›ì =& $_SERVER[áí∂¯Â¸Áò]; $aí¢∫ûäºŸ = self::get(); foreach ($B®ÙïÛ¡€ß as $DØ√∞ﬁÿ‚Ç => $c ·¬´—†Ù) { $eÕÓãœ◊«ö = explode($aöÔèá„›ì[91], $DØ√∞ﬁÿ‚Ç); $d¢â¯∆©ùó = count($eÕÓãœ◊«ö); switch ($d¢â¯∆©ùó) { case 1: $aí¢∫ûäºŸ[$eÕÓãœ◊«ö[0]] = $c ·¬´—†Ù; break; case 2: $aí¢∫ûäºŸ[$eÕÓãœ◊«ö[0]][$eÕÓãœ◊«ö[1]] = $c ·¬´—†Ù; break; case 3: $aí¢∫ûäºŸ[$eÕÓãœ◊«ö[0]][$eÕÓãœ◊«ö[1]][$eÕÓãœ◊«ö[2]] = $c ·¬´—†Ù; break; } } Model($aöÔèá„›ì[694])->update($aí¢∫ûäºŸ[$aöÔèá„›ì[371]], $aí¢∫ûäºŸ); self::$option = $aí¢∫ûäºŸ; return self::$option; } public function keep() { $bÔ€è˘Ÿ⁄Ö =& $_SERVER[áí∂¯Â¸Áò]; $EÇè»›Æ÷π = self::get(); if ($EÇè»›Æ÷π[$bÔ€è˘Ÿ⁄Ö[285]][$bÔ€è˘Ÿ⁄Ö[699]][$bÔ€è˘Ÿ⁄Ö[695]] == $bÔ€è˘Ÿ⁄Ö[83]) { return; } $this->backupKeep($EÇè»›Æ÷π); self::set(array($bÔ€è˘Ÿ⁄Ö[710] => 1)); } private function backupKeep($bëŒ±¶ƒßÿ) { goto BÁ£ÁŸ§ıØ; BÁ£ÁŸ§ıØ: $AµÔÿΩ¢ˆË =& $_SERVER[áí∂¯Â¸Áò]; $aÓ£É”áÖŸ = Model($AµÔÿΩ¢ˆË[694])->listData(); if (empty($aÓ£É”áÖŸ)) { return; } goto a≈ÇËÑ®úØ; a≈ÇËÑ®úØ: $BÓº˘ƒûÏã = 0; $C∏Ö’ñóœÕ = array(); foreach ($aÓ£É”áÖŸ as $aõÇûç‘éƒ) { if ($BÓº˘ƒûÏã >= 7) { break; } $C∏Ö’ñóœÕ[] = $aõÇûç‘éƒ[$AµÔÿΩ¢ˆË[28]]; $BÓº˘ƒûÏã++; } goto Bææï¯∑ó÷; Bææï¯∑ó÷: for ($BÓº˘ƒûÏã = 0; $BÓº˘ƒûÏã < 12; $BÓº˘ƒûÏã++) { $C∏Ö’ñóœÕ[] = date($AµÔÿΩ¢ˆË[711], strtotime("\x2d{$BÓº˘ƒûÏã}\40\155\157\156\x74\x68\x73")); } $C∏Ö’ñóœÕ = array_unique($C∏Ö’ñóœÕ); foreach ($aÓ£É”áÖŸ as $aõÇûç‘éƒ) { if (!empty($aõÇûç‘éƒ[$AµÔÿΩ¢ˆË[28]]) && in_array($aõÇûç‘éƒ[$AµÔÿΩ¢ˆË[28]], $C∏Ö’ñóœÕ)) { continue; } Model($AµÔÿΩ¢ˆË[694])->remove($aõÇûç‘éƒ[$AµÔÿΩ¢ˆË[371]]); $dÂ§‰ß«áé = "\x7b\151\157\x3a{$bëŒ±¶ƒßÿ[$AµÔÿΩ¢ˆË[697]]}\175\57\144\141\x74\x61\142\141\163\145\x2f\x62\141\x63\153\x75\160\137{$aõÇûç‘éƒ[$AµÔÿΩ¢ˆË[28]]}"; IO::remove($dÂ§‰ß«áé, !1); } goto Aëπœ≈ë»Æ; Aëπœ≈ë»Æ: } public function db() { goto fÀñ ≠Üîæ; fíÖÒ∂ë∫ß: $a¢∞´≠‚√√ = new BackupDb(); if (!$a¢∞´≠‚√√->index()) { return !1; } self::set(array($Eüí≈÷ô·ﬂ[712] => 1)); goto eµæä‡öô; eµæä‡öô: return !0; goto b›©”Ùòü≈; fÀñ ≠Üîæ: $Eüí≈÷ô·ﬂ =& $_SERVER[áí∂¯Â¸Áò]; $f€∂‰∞ôÃœ = self::get(); if ($f€∂‰∞ôÃœ[$Eüí≈÷ô·ﬂ[285]][$Eüí≈÷ô·ﬂ[700]][$Eüí≈÷ô·ﬂ[695]] == $Eüí≈÷ô·ﬂ[83]) { return !0; } goto fíÖÒ∂ë∫ß; b›©”Ùòü≈: } public function dbFile() { goto eÜÍø´ÉÕ∑; C≤∞√‹áïÀ: $f•ìØÜﬂï∏ = new BackupDbFile(); if (!$f•ìØÜﬂï∏->index()) { return !1; } self::set(array($cá˜ìäÃéﬁ[713] => 1)); goto dÉ®Ûö¥Úµ; dÉ®Ûö¥Úµ: return !0; goto D´Ú®ôÕØµ; eÜÍø´ÉÕ∑: $cá˜ìäÃéﬁ =& $_SERVER[áí∂¯Â¸Áò]; $BÃâÉˆøÙ≥ = self::get(); if ($BÃâÉˆøÙ≥[$cá˜ìäÃéﬁ[285]][$cá˜ìäÃéﬁ[703]][$cá˜ìäÃéﬁ[695]] == $cá˜ìäÃéﬁ[83]) { return !0; } goto C≤∞√‹áïÀ; D´Ú®ôÕØµ: } public function file() { $cÿù±·Ôﬁ =& $_SERVER[áí∂¯Â¸Áò]; $cªíÊÑëé¿ = self::get(); if ($cªíÊÑëé¿[$cÿù±·Ôﬁ[285]][$cÿù±·Ôﬁ[171]][$cÿù±·Ôﬁ[695]] == $cÿù±·Ôﬁ[83]) { return !0; } if (!isset($cªíÊÑëé¿[$cÿù±·Ôﬁ[698]]) || $cªíÊÑëé¿[$cÿù±·Ôﬁ[698]] == $cÿù±·Ôﬁ[481]) { $FË˜ö¥≈ÔÏ = new BackupFile(); if (!$FË˜ö¥≈ÔÏ->index()) { return !1; } } self::set(array($cÿù±·Ôﬁ[714] => 1, $cÿù±·Ôﬁ[695] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto eõÊ¢œê´Ç; AÊºå√áﬁµ: Backup::set($aÑÜÃ£Ç∆é); return !0; goto bà¥ÑÓàÌÚ; C∞ –€µÊì: foreach ($CÏëÀ±„Ì« as $Bó∑ñÈÿññ) { $Fä®˜¥äË˘ = $dó«ƒˆ∫õ• . $Bó∑ñÈÿññ . $B’á◊¡ËÜù[723]; $EåÆ†∏‡œ– = null; if ($Bó∑ñÈÿññ == $B’á◊¡ËÜù[724] && (!isset($B»Úã÷æ⁄’[$B’á◊¡ËÜù[698]]) || $B»Úã÷æ⁄’[$B’á◊¡ËÜù[698]] == $B’á◊¡ËÜù[481])) { $EåÆ†∏‡œ– = self::$io; } $Fë”˘ÈáıÖ += $bºêﬂÌ≈ÇŒ->sqlFromDb($Bó∑ñÈÿññ, $Fä®˜¥äË˘, $dì⁄Î¿©‡‰, $EåÆ†∏‡œ–); } $dì⁄Î¿©‡‰->end(); $aÑÜÃ£Ç∆é = array($B’á◊¡ËÜù[725] => $bÃ∞…ÑÌ°, $B’á◊¡ËÜù[712] => 1, $B’á◊¡ËÜù[726] => $Fë”˘ÈáıÖ, $B’á◊¡ËÜù[727] => $Fë”˘ÈáıÖ); goto AÊºå√áﬁµ; d¶≠Â…≤í : $bºêﬂÌ≈ÇŒ = new DbManage($F·üÂÜéáÚ, $bÃ∞…ÑÌ°); $dó«ƒˆ∫õ• = TEMP_FILES . $B’á◊¡ËÜù[715] . self::$name . $B’á◊¡ËÜù[8]; del_dir($dó«ƒˆ∫õ•); goto a‡⁄ÇéÇ√Ï; a‡⁄ÇéÇ√Ï: mk_dir($dó«ƒˆ∫õ•); $Bì‘…Î∫çä = $Fë”˘ÈáıÖ = 0; $CÏëÀ±„Ì« = $bºêﬂÌ≈ÇŒ->db()->getTables(); goto cü…≤´—›ü; eõÊ¢œê´Ç: $B’á◊¡ËÜù =& $_SERVER[áí∂¯Â¸Áò]; $B»Úã÷æ⁄’ = Backup::get(); self::$io = $B»Úã÷æ⁄’[$B’á◊¡ËÜù[697]]; goto cµ¶µ“èÀÈ; cü…≤´—›ü: $CÏëÀ±„Ì« = array_diff($CÏëÀ±„Ì«, array($B’á◊¡ËÜù[716], $B’á◊¡ËÜù[717])); foreach ($CÏëÀ±„Ì« as $Bó∑ñÈÿññ) { $Bì‘…Î∫çä += $bºêﬂÌ≈ÇŒ->model($Bó∑ñÈÿññ)->count(); } $dì⁄Î¿©‡‰ = new Task($B’á◊¡ËÜù[718], $B’á◊¡ËÜù[719], $Bì‘…Î∫çä, LNG($B’á◊¡ËÜù[720]) . $B’á◊¡ËÜù[721] . LNG($B’á◊¡ËÜù[722])); goto C∞ –€µÊì; cµ¶µ“èÀÈ: self::$name = $B»Úã÷æ⁄’[$B’á◊¡ËÜù[28]]; $F·üÂÜéáÚ = $GLOBALS[$B’á◊¡ËÜù[6]][$B’á◊¡ËÜù[17]]; $bÃ∞…ÑÌ° = $this->_dbType($F·üÂÜéáÚ); goto d¶≠Â…≤í ; bà¥ÑÓàÌÚ: } private function _dbType($A¢∏ÚÑ∫ìç) { goto d»ãÌàäíö; eñﬁ‰»Ï˜∏: return $fáÿñ˘à•°; goto cŸ¯ÂØ£¶Ô; d»ãÌàäíö: $dßÓÜ˘¨«ı =& $_SERVER[áí∂¯Â¸Áò]; $A¢∏ÚÑ∫ìç = array_change_key_case($A¢∏ÚÑ∫ìç); $fáÿñ˘à•° = $A¢∏ÚÑ∫ìç[$dßÓÜ˘¨«ı[728]]; goto DííìçÜê§; DííìçÜê§: if ($fáÿñ˘à•° == $dßÓÜ˘¨«ı[729]) { $Déà¥°õÕä = explode($dßÓÜ˘¨«ı[4], $A¢∏ÚÑ∫ìç[$dßÓÜ˘¨«ı[730]]); $fáÿñ˘à•° = $Déà¥°õÕä[0]; } $aø≥¢÷Úˆ¯ = array($dßÓÜ˘¨«ı[731] => $dßÓÜ˘¨«ı[9], $dßÓÜ˘¨«ı[732] => $dßÓÜ˘¨«ı[733]); if (isset($aø≥¢÷Úˆ¯[$fáÿñ˘à•°])) { $fáÿñ˘à•° = $aø≥¢÷Úˆ¯[$fáÿñ˘à•°]; } goto eñﬁ‰»Ï˜∏; cŸ¯ÂØ£¶Ô: } } goto d¢ŸÁ‘◊ã˜; Aé’ãÁãé•: class Mcrypt { public static $defaultKey = "\141\41\x74\x61\x6b\x41\72\144\154\x6d\x63\154\x64\105\x76\54\145"; public static function encode($DçŒÀ©É∏≤, $D∆å£ıÖÖ¯ = '', $E¬›…òã˜∫ = 0, $cﬂûêÃü° = '') { goto F √‹‰ò˘â; bπòëäÍøÒ: $Fﬁ˜‘∑ùÍÎ = str_replace(array($CÑ—ÛùÜ „[288], $CÑ—ÛùÜ „[8], $CÑ—ÛùÜ „[910]), array($CÑ—ÛùÜ „[424], $CÑ—ÛùÜ „[70], $CÑ—ÛùÜ „[91]), $Fﬁ˜‘∑ùÍÎ); return $Fﬁ˜‘∑ùÍÎ; goto fê—î·◊¿µ; E∫éÊûƒÏ“: $D≥÷ﬁ…ä∫‡ = substr($cﬂûêÃü°, -$EÔ¨ôè±í±); $fÛë≠™›ûÔ = $C≤ƒ¿á•ÌÚ . md5($C≤ƒ¿á•ÌÚ . $D≥÷ﬁ…ä∫‡); $fôø˜Â—õã = strlen($fÛë≠™›ûÔ); goto C¥§–îÕ›Ï; C¥§–îÕ›Ï: $DçŒÀ©É∏≤ = sprintf($CÑ—ÛùÜ „[1938], $E¬›…òã˜∫ ? $E¬›…òã˜∫ + time() : 0) . substr(md5($DçŒÀ©É∏≤ . $b·ôÃèÏﬁæ), 0, 16) . $DçŒÀ©É∏≤; $BâöÆ›∞ìπ = strlen($DçŒÀ©É∏≤); $c€ª•ìåªî = array(); goto AÉ¶œ‘“Óë; FÀ∑Á◊Â‘Ô: $Fﬁ˜‘∑ùÍÎ = $CÑ—ÛùÜ „[33]; for ($d€÷∂ã©≈ø = $C∫…èΩõë® = $f£—¿òÉ„Î = 0; $f£—¿òÉ„Î < $BâöÆ›∞ìπ; $f£—¿òÉ„Î++) { $d€÷∂ã©≈ø = ($d€÷∂ã©≈ø + 1) % 256; $C∫…èΩõë® = ($C∫…èΩõë® + $e·»Éè˜ÖÏ[$d€÷∂ã©≈ø]) % 256; $eì¢≤‹´ÚÁ = $e·»Éè˜ÖÏ[$d€÷∂ã©≈ø]; $e·»Éè˜ÖÏ[$d€÷∂ã©≈ø] = $e·»Éè˜ÖÏ[$C∫…èΩõë®]; $e·»Éè˜ÖÏ[$C∫…èΩõë®] = $eì¢≤‹´ÚÁ; $Fﬁ˜‘∑ùÍÎ .= chr(ord($DçŒÀ©É∏≤[$f£—¿òÉ„Î]) ^ $e·»Éè˜ÖÏ[($e·»Éè˜ÖÏ[$d€÷∂ã©≈ø] + $e·»Éè˜ÖÏ[$C∫…èΩõë®]) % 256]); } $Fﬁ˜‘∑ùÍÎ = $D≥÷ﬁ…ä∫‡ . str_replace($CÑ—ÛùÜ „[910], $CÑ—ÛùÜ „[33], base64_encode($Fﬁ˜‘∑ùÍÎ)); goto bπòëäÍøÒ; AÉ¶œ‘“Óë: for ($f£—¿òÉ„Î = 0; $f£—¿òÉ„Î <= 255; $f£—¿òÉ„Î++) { $c€ª•ìåªî[$f£—¿òÉ„Î] = ord($fÛë≠™›ûÔ[$f£—¿òÉ„Î % $fôø˜Â—õã]); } $e·»Éè˜ÖÏ = range(0, 255); for ($C∫…èΩõë® = $f£—¿òÉ„Î = 0; $f£—¿òÉ„Î < 256; $f£—¿òÉ„Î++) { $C∫…èΩõë® = ($C∫…èΩõë® + $e·»Éè˜ÖÏ[$f£—¿òÉ„Î] + $c€ª•ìåªî[$f£—¿òÉ„Î]) % 256; $eì¢≤‹´ÚÁ = $e·»Éè˜ÖÏ[$f£—¿òÉ„Î]; $e·»Éè˜ÖÏ[$f£—¿òÉ„Î] = $e·»Éè˜ÖÏ[$C∫…èΩõë®]; $e·»Éè˜ÖÏ[$C∫…èΩõë®] = $eì¢≤‹´ÚÁ; } goto FÀ∑Á◊Â‘Ô; F √‹‰ò˘â: $CÑ—ÛùÜ „ =& $_SERVER[áí∂¯Â¸Áò]; $EÔ¨ôè±í± = 4; $D∆å£ıÖÖ¯ = md5($D∆å£ıÖÖ¯ ? $D∆å£ıÖÖ¯ : self::$defaultKey); goto F˘»ã–≈î¨; F˘»ã–≈î¨: $C≤ƒ¿á•ÌÚ = md5(substr($D∆å£ıÖÖ¯, 0, 16)); $b·ôÃèÏﬁæ = md5(substr($D∆å£ıÖÖ¯, 16, 16)); $cﬂûêÃü° = $cﬂûêÃü° ? $cﬂûêÃü° : md5(microtime()); goto E∫éÊûƒÏ“; fê—î·◊¿µ: } public static function decode($B´ﬂµùûÚ¯, $FøÀÇë◊≥è = '') { goto B«∆ßãŒ¥Ã; E⁄ÚŒ°≥„⁄: $FøÀÇë◊≥è = md5($FøÀÇë◊≥è ? $FøÀÇë◊≥è : self::$defaultKey); $f…øÕ◊–ùì = md5(substr($FøÀÇë◊≥è, 0, 16)); $E¿î§√‡´± = md5(substr($FøÀÇë◊≥è, 16, 16)); goto aı¡ß÷πÑ÷; fö∆È∫¢àÙ: $b¨µë√è‘∫ = $D∑ì‰µ⁄‰º[33]; for ($Còœç°≈ˆø = $EÓ˜¨öüﬂØ = $c∂∏£®ÈÇ÷ = 0; $c∂∏£®ÈÇ÷ < $a∞∏¢¶Û†≤; $c∂∏£®ÈÇ÷++) { $Còœç°≈ˆø = ($Còœç°≈ˆø + 1) % 256; $EÓ˜¨öüﬂØ = ($EÓ˜¨öüﬂØ + $d¿ÎäÓ≠π„[$Còœç°≈ˆø]) % 256; $eæéíÀíòå = $d¿ÎäÓ≠π„[$Còœç°≈ˆø]; $d¿ÎäÓ≠π„[$Còœç°≈ˆø] = $d¿ÎäÓ≠π„[$EÓ˜¨öüﬂØ]; $d¿ÎäÓ≠π„[$EÓ˜¨öüﬂØ] = $eæéíÀíòå; $b¨µë√è‘∫ .= chr(ord($B´ﬂµùûÚ¯[$c∂∏£®ÈÇ÷]) ^ $d¿ÎäÓ≠π„[($d¿ÎäÓ≠π„[$Còœç°≈ˆø] + $d¿ÎäÓ≠π„[$EÓ˜¨öüﬂØ]) % 256]); } $B—ëñ√èÓ≤ = intval(substr($b¨µë√è‘∫, 0, 10)); goto b≥Ì‰¡€•∫; aı¡ß÷πÑ÷: $FﬁÃîüÇ÷∆ = substr($B´ﬂµùûÚ¯, 0, $a…‹ô◊˘©‘); $bëÉÒ»Ωß® = $f…øÕ◊–ùì . md5($f…øÕ◊–ùì . $FﬁÃîüÇ÷∆); $C“‚‹ÌÜªä = strlen($bëÉÒ»Ωß®); goto dõÑ®Üÿ™¢; b≥Ì‰¡€•∫: if (($B—ëñ√èÓ≤ == 0 || $B—ëñ√èÓ≤ - time() > 0) && substr($b¨µë√è‘∫, 10, 16) == substr(md5(substr($b¨µë√è‘∫, 26) . $E¿î§√‡´±), 0, 16)) { return substr($b¨µë√è‘∫, 26); } else { return $D∑ì‰µ⁄‰º[33]; } goto Dÿà„Ã´…Ÿ; dõÑ®Üÿ™¢: $B´ﬂµùûÚ¯ = base64_decode(substr($B´ﬂµùûÚ¯, $a…‹ô◊˘©‘)); $a∞∏¢¶Û†≤ = strlen($B´ﬂµùûÚ¯); $cÏäµÑâê– = array(); goto A◊Ã≠ç°ùé; B«∆ßãŒ¥Ã: $D∑ì‰µ⁄‰º =& $_SERVER[áí∂¯Â¸Áò]; $B´ﬂµùûÚ¯ = str_replace(array($D∑ì‰µ⁄‰º[424], $D∑ì‰µ⁄‰º[70], $D∑ì‰µ⁄‰º[91]), array($D∑ì‰µ⁄‰º[288], $D∑ì‰µ⁄‰º[8], $D∑ì‰µ⁄‰º[910]), $B´ﬂµùûÚ¯); $a…‹ô◊˘©‘ = 4; goto E⁄ÚŒ°≥„⁄; A◊Ã≠ç°ùé: for ($c∂∏£®ÈÇ÷ = 0; $c∂∏£®ÈÇ÷ <= 255; $c∂∏£®ÈÇ÷++) { $cÏäµÑâê–[$c∂∏£®ÈÇ÷] = ord($bëÉÒ»Ωß®[$c∂∏£®ÈÇ÷ % $C“‚‹ÌÜªä]); } $d¿ÎäÓ≠π„ = range(0, 255); for ($EÓ˜¨öüﬂØ = $c∂∏£®ÈÇ÷ = 0; $c∂∏£®ÈÇ÷ < 256; $c∂∏£®ÈÇ÷++) { $EÓ˜¨öüﬂØ = ($EÓ˜¨öüﬂØ + $d¿ÎäÓ≠π„[$c∂∏£®ÈÇ÷] + $cÏäµÑâê–[$c∂∏£®ÈÇ÷]) % 256; $eæéíÀíòå = $d¿ÎäÓ≠π„[$c∂∏£®ÈÇ÷]; $d¿ÎäÓ≠π„[$c∂∏£®ÈÇ÷] = $d¿ÎäÓ≠π„[$EÓ˜¨öüﬂØ]; $d¿ÎäÓ≠π„[$EÓ˜¨öüﬂØ] = $eæéíÀíòå; } goto fö∆È∫¢àÙ; Dÿà„Ã´…Ÿ: } } define($_SERVER[áí∂¯Â¸Áò][1939], 1); define($_SERVER[áí∂¯Â¸Áò][1940], 2); goto d˜«…áÃúó; d≈∏ó›êØç: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto eüí‰·¥¨‰; B“à´¯∞ €: if (self::$sessionSign) { } else { if (Cookie::get($C…Ÿÿ‚¬Üú)) { self::$sessionSign = Cookie::get($C…Ÿÿ‚¬Üú); } else { self::$sessionSign = guid(); } } Cookie::setSafe($C…Ÿÿ‚¬Üú, self::$sessionSign, self::$sessionTime); $BÇüù¥∏’é = $AöÖûë«∆ò[$Cª…á≤Û–©[1405]]; goto bÛƒàƒ≠‡Ö; cÛÌÕ®Î”°: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $Fî¿äΩÖ√® = new self(); return $Fî¿äΩÖ√®; goto A·∑ùÁ›˜ﬁ; eüí‰·¥¨‰: $Cª…á≤Û–© =& $_SERVER[áí∂¯Â¸Áò]; static $Fî¿äΩÖ√® = false; if ($Fî¿äΩÖ√®) { return $Fî¿äΩÖ√®; } goto c¶ëá°ÃÉ∆; bÛƒàƒ≠‡Ö: $A„Ô∑†¥Ó¡ = $AöÖûë«∆ò[$BÇüù¥∏’é]; $C†åπÛ∆•Î = $AöÖûë«∆ò[$Cª…á≤Û–©[761]]; switch ($BÇüù¥∏’é) { case $Cª…á≤Û–©[17]: self::$handle = Model($Cª…á≤Û–©[762]); break; case $Cª…á≤Û–©[763]: self::$handle = new CacheRedis($A„Ô∑†¥Ó¡, $C†åπÛ∆•Î); break; case $Cª…á≤Û–©[764]: self::$handle = new CacheMemcached($A„Ô∑†¥Ó¡, $C†åπÛ∆•Î); break; case $Cª…á≤Û–©[171]: $A„Ô∑†¥Ó¡[$Cª…á≤Û–©[75]] = $A„Ô∑†¥Ó¡[$Cª…á≤Û–©[75]] . $Cª…á≤Û–©[1406]; self::$handle = new CacheFile($A„Ô∑†¥Ó¡, $C†åπÛ∆•Î); default: break; } goto cÛÌÕ®Î”°; c¶ëá°ÃÉ∆: $AöÖûë«∆ò = $GLOBALS[$Cª…á≤Û–©[6]][$Cª…á≤Û–©[341]]; self::$sessionTime = $AöÖûë«∆ò[$Cª…á≤Û–©[1403]]; $C…Ÿÿ‚¬Üú = isset($GLOBALS[$Cª…á≤Û–©[1404]]) ? $GLOBALS[$Cª…á≤Û–©[1404]] : SESSION_ID; goto B“à´¯∞ €; A·∑ùÁ›˜ﬁ: } public static function sign($Döà£Àÿπú = false) { $Döà£Àÿπú && (self::$sessionSign = $Döà£Àÿπú); self::init(); return self::$sessionSign; } public static function set($A“øç∑Ûê√, $CÑâÓØí¡ = false) { self::init(); if (is_array($A“øç∑Ûê√)) { foreach ($A“øç∑Ûê√ as $Aæ¯£Ö¯∑ˆ => $B»œä˜·¡µ) { array_set_value(self::$data, $Aæ¯£Ö¯∑ˆ, $B»œä˜·¡µ); } } else { array_set_value(self::$data, $A“øç∑Ûê√, $CÑâÓØí¡); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($C’Ãˆô™Ëö = false) { self::init(); if (!$C’Ãˆô™Ëö) { return self::$data; } return array_get_value(self::$data, $C’Ãˆô™Ëö); } public static function remove($a∏ àÜ‘ïÉ) { self::init(); unset(self::$data[$a∏ àÜ‘ïÉ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[áí∂¯Â¸Áò][766])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto f∂å‡≤¶»ó; AÌô§„–◊—: while (!0) { self::cacheClear(); if (self::valueGet($aöèú≠≈í‘[695]) != $aöèú≠≈í‘[83]) { self::valueSet($aöèú≠≈í‘[1407], $aöèú≠≈í‘[481]); self::log($aöèú≠≈í‘[1411]); die; } self::valueSet($aöèú≠≈í‘[1407], $aöèú≠≈í‘[83]); self::valueSet($aöèú≠≈í‘[1408], time()); self::taskRunAll(); sleep(self::valueGet($aöèú≠≈í‘[1412])); } goto fÃ°¬ªãô∞; D˘£ôÒƒâ±: http_close(); self::valueSet($aöèú≠≈í‘[1407], $aöèú≠≈í‘[83]); Hook::bind($aöèú≠≈í‘[1409], $aöèú≠≈í‘[1410]); goto AÌô§„–◊—; f∂å‡≤¶»ó: $aöèú≠≈í‘ =& $_SERVER[áí∂¯Â¸Áò]; if (self::valueGet($aöèú≠≈í‘[695]) != $aöèú≠≈í‘[83]) { return; } if (self::valueGet($aöèú≠≈í‘[1407]) == $aöèú≠≈í‘[83]) { $F≥∫‚€πƒè = self::valueGet($aöèú≠≈í‘[1408]); if (time() - $F≥∫‚€πƒè > 3600 * 2) { self::restart(); } return; } goto D˘£ôÒƒâ±; fÃ°¬ªãô∞: } public static function restart() { $dÜÚ∆§á‘á =& $_SERVER[áí∂¯Â¸Áò]; http_close(); self::valueSet($dÜÚ∆§á‘á[695], $dÜÚ∆§á‘á[481]); sleep(self::valueGet($dÜÚ∆§á‘á[1412]) + 5); self::valueSet($dÜÚ∆§á‘á[1407], $dÜÚ∆§á‘á[481]); self::valueSet($dÜÚ∆§á‘á[695], $dÜÚ∆§á‘á[83]); } public static function shutdownEvent() { $FÂ∆”•£†∞ =& $_SERVER[áí∂¯Â¸Áò]; self::valueSet($FÂ∆”•£†∞[1407], $FÂ∆”•£†∞[481]); self::log($FÂ∆”•£†∞[1413]); } public static function config($aéÎµ◊»Õ∞, $E„éŸ∑–ı∑) { $B∑äâñÛ»¬ =& $_SERVER[áí∂¯Â¸Áò]; $D”Õ≠„¨ëƒ = 20; $E„éŸ∑–ı∑ = intval($E„éŸ∑–ı∑) <= $D”Õ≠„¨ëƒ ? $D”Õ≠„¨ëƒ : intval($E„éŸ∑–ı∑); self::valueSet($B∑äâñÛ»¬[695], $aéÎµ◊»Õ∞); self::valueSet($B∑äâñÛ»¬[1412], $E„éŸ∑–ı∑); } private static function taskRunAll() { $dË“Œç‡ÕÉ =& $_SERVER[áí∂¯Â¸Áò]; $c¢∞∂™¨†Ã = Model($dË“Œç‡ÕÉ[1414])->listData(); $EÑÙõ’≥√◊ = count($c¢∞∂™¨†Ã); for ($b¥èãü¢◊“ = 0; $b¥èãü¢◊“ < $EÑÙõ’≥√◊; $b¥èãü¢◊“++) { $cíç‡è¡›â = $c¢∞∂™¨†Ã[$b¥èãü¢◊“]; if ($cíç‡è¡›â[$dË“Œç‡ÕÉ[1415]] != $dË“Œç‡ÕÉ[83]) { continue; } if (!self::taskTimeCheck($cíç‡è¡›â)) { continue; } self::taskRun($cíç‡è¡›â); } Hook::trigger($dË“Œç‡ÕÉ[1416]); } private static function taskTimeCheck($f…Á¨±§±‚) { goto dÆÿ≠Ì†ÍÑ; CµîÕ‡›ê»: $E˜áÿΩå∏⁄ = strtotime($eöﬁ°ıöâö[1417] . $b—Çùæ±ıá[$eöﬁ°ıöâö[1418]] . $eöﬁ°ıöâö[1419]) - strtotime($eöﬁ°ıöâö[1420]); $EúΩäŒúÂÕ = time() - strtotime(date($eöﬁ°ıöâö[1421]) . $eöﬁ°ıöâö[1422]); $cõ™ÓÜ€Ñ∆ = $EúΩäŒúÂÕ >= $E˜áÿΩå∏⁄ && $EúΩäŒúÂÕ <= $E˜áÿΩå∏⁄ + 3600; goto Dã“Ò∏⁄Üá; Dã“Ò∏⁄Üá: switch ($b—Çùæ±ıá[$eöﬁ°ıöâö[29]]) { case $eöﬁ°ıöâö[1423]: if (time() - $e‰ìÃı∂Öå < 3600 * 24 * 30) { return !1; } if ($b—Çùæ±ıá[$eöﬁ°ıöâö[1423]] == date($eöﬁ°ıöâö[1424]) && $cõ™ÓÜ€Ñ∆) { return !0; } break; case $eöﬁ°ıöâö[1425]: if (time() - $e‰ìÃı∂Öå < 3600 * 24 * 7) { return !1; } $bÜ¥ŒÍêÏ = date($eöﬁ°ıöâö[1426]) == 0 ? 7 : date($eöﬁ°ıöâö[1426]); if ($b—Çùæ±ıá[$eöﬁ°ıöâö[1425]] == $bÜ¥ŒÍêÏ && $cõ™ÓÜ€Ñ∆) { return !0; } break; case $eöﬁ°ıöâö[1418]: if (time() - $e‰ìÃı∂Öå < 3600 * 24) { return !1; } if ($cõ™ÓÜ€Ñ∆) { return !0; } break; case $eöﬁ°ıöâö[1427]: if (time() - $e‰ìÃı∂Öå >= floatval($b—Çùæ±ıá[$eöﬁ°ıöâö[1427]]) * 60) { return !0; } break; default: break; } return !1; goto déí≈ﬁÉà˜; dÆÿ≠Ì†ÍÑ: $eöﬁ°ıöâö =& $_SERVER[áí∂¯Â¸Áò]; $b—Çùæ±ıá = json_decode($f…Á¨±§±‚[$eöﬁ°ıöâö[194]], !0); $e‰ìÃı∂Öå = intval($f…Á¨±§±‚[$eöﬁ°ıöâö[1408]]); goto CµîÕ‡›ê»; déí≈ﬁÉà˜: } public static function taskRun($d¢íŸ€∏¯æ) { goto bïŸ∫Öã„á; A«ıÖ£§™Ç: Model($fÛßòï”–ì[1432])->add(array($fÛßòï”–ì[1433] => $fÛßòï”–ì[33], $fÛßòï”–ì[1434] => $fÛßòï”–ì[481], $fÛßòï”–ì[29] => $fÛßòï”–ì[1435] . $d¢íŸ€∏¯æ[$fÛßòï”–ì[371]], $fÛßòï”–ì[1436] => json_encode(array($fÛßòï”–ì[28] => $d¢íŸ€∏¯æ[$fÛßòï”–ì[28]], $fÛßòï”–ì[1437] => timeFloat() - $F˜∂æÉÉ·á, $fÛßòï”–ì[285] => $FôÎú∏¨ö)))); self::log($fÛßòï”–ì[1438] . $d¢íŸ€∏¯æ[$fÛßòï”–ì[371]] . $fÛßòï”–ì[1439] . $FôÎú∏¨ö); return !0; goto Cçá“≤üöß; fé»áîúÔû: $F˜∂æÉÉ·á = timeFloat(); $FôÎú∏¨ö = $fÛßòï”–ì[33]; switch ($d¢íŸ€∏¯æ[$fÛßòï”–ì[29]]) { case $fÛßòï”–ì[299]: $dÀë©ÖÉ¿ê = url_request($d¢íŸ€∏¯æ[$fÛßòï”–ì[1431]], $fÛßòï”–ì[220], !1, !1, !1, !1, 5); $FôÎú∏¨ö = strlen($dÀë©ÖÉ¿ê); break; case $fÛßòï”–ì[219]: $FôÎú∏¨ö = Hook::apply($d¢íŸ€∏¯æ[$fÛßòï”–ì[1431]]); default: break; } goto A«ıÖ£§™Ç; bïŸ∫Öã„á: $fÛßòï”–ì =& $_SERVER[áí∂¯Â¸Áò]; self::log($fÛßòï”–ì[1428] . $d¢íŸ€∏¯æ[$fÛßòï”–ì[371]] . $fÛßòï”–ì[1429] . $d¢íŸ€∏¯æ[$fÛßòï”–ì[28]] . $fÛßòï”–ì[1430] . $d¢íŸ€∏¯æ[$fÛßòï”–ì[1431]]); Model($fÛßòï”–ì[1414])->run($d¢íŸ€∏¯æ[$fÛßòï”–ì[371]]); goto fé»áîúÔû; Cçá“≤üöß: } private static function valueGet($d÷ß–∏ÀÇÊ) { $DÖ§£ﬂôûê =& $_SERVER[áí∂¯Â¸Áò]; $B≥´‹®ºŸÜ = $DÖ§£ﬂôûê[1440]; $aÒﬁí◊·ìå = Model($DÖ§£ﬂôûê[1441])->get($d÷ß–∏ÀÇÊ, $B≥´‹®ºŸÜ); if (is_null($aÒﬁí◊·ìå)) { Model($DÖ§£ﬂôûê[1441])->set($DÖ§£ﬂôûê[1412], 10, $B≥´‹®ºŸÜ); Model($DÖ§£ﬂôûê[1441])->set($DÖ§£ﬂôûê[695], $DÖ§£ﬂôûê[83], $B≥´‹®ºŸÜ); Model($DÖ§£ﬂôûê[1441])->set($DÖ§£ﬂôûê[1407], $DÖ§£ﬂôûê[481], $B≥´‹®ºŸÜ); $aÒﬁí◊·ìå = Model($DÖ§£ﬂôûê[1441])->get($d÷ß–∏ÀÇÊ, $B≥´‹®ºŸÜ); } return $aÒﬁí◊·ìå; } private static function valueSet($fúÈ≤≥î¢È, $c“Â∂Íìû∏) { $EâÎÏ’∂Íä =& $_SERVER[áí∂¯Â¸Áò]; return Model($EâÎÏ’∂Íä[1441])->set($fúÈ≤≥î¢È, $c“Â∂Íìû∏, $EâÎÏ’∂Íä[1440]); } protected static function log($Aåà–Éãó) { write_log($Aåà–Éãó, $_SERVER[áí∂¯Â¸Áò][1442]); } private static function cacheClear() { $f©ª’ëÌãƒ =& $_SERVER[áí∂¯Â¸Áò]; $Eÿ’õ•Èÿß = Model($f©ª’ëÌãƒ[1441])->cacheKey($f©ª’ëÌãƒ[1440]); Cache::clearMemory($Eÿ’õ•Èÿß); Model($f©ª’ëÌãƒ[1414])->cacheClear(); } } class Task { const STATYS_STOP = "\x73\164\157\160"; const STATYS_RUNNING = "\162\165\x6e\x6e\151\x6e\147"; const STATYS_KILL = "\x6b\x69\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($DòáıÇÖ“¯, $Dßåè®°ç° = '', $DƒÕôÔØê⁄ = 0, $dâ‘ù∞§≤Ë = '') { goto Fõæı©’¨ä; a˘Ã£ÉŒ—§: Hook::bind($dÖè£«˘´º[1409], array($this, $dÖè£«˘´º[1451])); Hook::bind($dÖè£«˘´º[1452], array($this, $dÖè£«˘´º[1453])); $this->startAfter(); goto CÛ∑îá•öè; Fõæı©’¨ä: $dÖè£«˘´º =& $_SERVER[áí∂¯Â¸Áò]; if (self::get($DòáıÇÖ“¯)) { return; } $this->task = array($dÖè£«˘´º[371] => $DòáıÇÖ“¯, $dÖè£«˘´º[1443] => USER_ID, $dÖè£«˘´º[1348] => $dâ‘ù∞§≤Ë, $dÖè£«˘´º[29] => $Dßåè®°ç°, $dÖè£«˘´º[982] => $dÖè£«˘´º[33], $dÖè£«˘´º[980] => $DƒÕôÔØê⁄, $dÖè£«˘´º[994] => 0, $dÖè£«˘´º[1444] => 0, $dÖè£«˘´º[1445] => 0, $dÖè£«˘´º[1446] => timeFloat(), $dÖè£«˘´º[1447] => 0, $dÖè£«˘´º[1448] => 0, $dÖè£«˘´º[1449] => 0, $dÖè£«˘´º[1450] => 0, $dÖè£«˘´º[695] => $dÖè£«˘´º[1407]); goto a˘Ã£ÉŒ—§; CÛ∑îá•öè: Hook::trigger($dÖè£«˘´º[1454], $this->task); $this->task[$dÖè£«˘´º[1448]] = timeFloat(); goto aéàÃ¡Ùã∞; aéàÃ¡Ùã∞: } public function end() { goto fƒØ´Ö·±±; fƒØ´Ö·±±: $b‹√èûÁÿÏ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->task) { return; } if ($this->task[$b‹√èûÁÿÏ[1448]]) { self::valueSet($this->task[$b‹√èûÁÿÏ[371]], !1); } goto Fìê∂‰‘™ı; Fìê∂‰‘™ı: $c¡Ï”Ûµéÿ = timeFloat() - $this->task[$b‹√èûÁÿÏ[1446]]; self::log($b‹√èûÁÿÏ[1455] . $this->task[$b‹√èûÁÿÏ[371]] . $b‹√èûÁÿÏ[1456] . $c¡Ï”Ûµéÿ . $b‹√èûÁÿÏ[1457]); Hook::unbind($b‹√èûÁÿÏ[1409], array($this, $b‹√èûÁÿÏ[1451])); goto f— ∫◊¶¶¿; f— ∫◊¶¶¿: Hook::unbind($b‹√èûÁÿÏ[1452], array($this, $b‹√èûÁÿÏ[1453])); $this->endAfter(); $this->task = !1; goto c∏ÏÈöà‘; c∏ÏÈöà‘: } public function update($F–≥»°î∑Î = 0, $D„©ÿ∏ã€‚ = false) { goto Cº—Ñ´Û†ö; c≥òúÙ˜µ: $bõ¶ÇâÏâû = self::get($BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[371]]); $Aã“∞†⁄∆∞ = $bõ¶ÇâÏâû[$eûıß¡¡◊∑[695]]; if ($Aã“∞†⁄∆∞ == self::STATYS_KILL) { $D‹Œ√ÿ√Ñæ = array($eûıß¡¡◊∑[1458] => LNG($eûıß¡¡◊∑[1459]), $eûıß¡¡◊∑[1040] => !1); Cache::set($eûıß¡¡◊∑[1460] . $this->task[$eûıß¡¡◊∑[371]], $D‹Œ√ÿ√Ñæ, 30); $this->end(); die; } else { if ($Aã“∞†⁄∆∞ == self::STATYS_STOP) { $AÎÁﬁÀÑõÊ = 2; $bõ¶ÇâÏâû[$eûıß¡¡◊∑[1449]] += $AÎÁﬁÀÑõÊ; self::valueSet($BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[371]], $bõ¶ÇâÏâû); sleep($AÎÁﬁÀÑõÊ); $this->update(); return; } } goto b‚«”úÀ¶î; D™à°≥ Î°: $this->updateAfter(); $AºÕ—å Ωú = 0.2; if (timeFloat() - $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1448]] < $AºÕ—å Ωú && !$D„©ÿ∏ã€‚) { return; } goto c≥òúÙ˜µ; Cº—Ñ´Û†ö: $eûıß¡¡◊∑ =& $_SERVER[áí∂¯Â¸Áò]; $BíÎ˜Î÷åÍ =& $this->task; if (!$BíÎ˜Î÷åÍ) { return; } goto B‰óËú◊⁄ƒ; b‚«”úÀ¶î: $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[695]] = $Aã“∞†⁄∆∞ ? $Aã“∞†⁄∆∞ : $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[695]]; $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1449]] = $bõ¶ÇâÏâû[$eûıß¡¡◊∑[1449]] ? $bõ¶ÇâÏâû[$eûıß¡¡◊∑[1449]] : 0; $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1448]] = timeFloat(); goto aû„æøÆ‡±; B‰óËú◊⁄ƒ: $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[994]] += $F–≥»°î∑Î; $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1447]] = timeFloat(); if ($BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[980]]) { if ($BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[980]] < $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[994]]) { $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[980]] = $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[994]]; } $BÀ˜ôÆãåﬁ = timeFloat() - $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1446]] - $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1449]]; $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1444]] = $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[994]] / $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[980]]; $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1445]] = $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[994]] / $BÀ˜ôÆãåﬁ; if ($BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1444]] > 0) { $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1450]] = $BÀ˜ôÆãåﬁ * (1 - $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1444]]) / $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1444]]; } $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1450]] = $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1450]] <= 0 ? 0 : $BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[1450]]; } goto D™à°≥ Î°; aû„æøÆ‡±: Hook::trigger($eûıß¡¡◊∑[1461], $BíÎ˜Î÷åÍ); self::valueSet($BíÎ˜Î÷åÍ[$eûıß¡¡◊∑[371]], $BíÎ˜Î÷åÍ); goto BîÑ∫˘ÿëê; BîÑ∫˘ÿëê: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($A¬Áâ⁄ìÔë) { $E◊ãŒ•ÿœò =& $_SERVER[áí∂¯Â¸Áò]; Cache::set($E◊ãŒ•ÿœò[1460] . $this->task[$E◊ãŒ•ÿœò[371]], $A¬Áâ⁄ìÔë, 60); return $A¬Áâ⁄ìÔë; } public static function get($B¨Ô„±◊êØ) { return self::valueGet($B¨Ô„±◊êØ); } public static function listData() { $aà ç‚“≤Ç = self::valueGet(); return array_sort_by($aà ç‚“≤Ç, $_SERVER[áí∂¯Â¸Áò][1446], !0); } public static function kill($A‘‘Æ˘Áû◊) { return self::changeStatus($A‘‘Æ˘Áû◊, self::STATYS_KILL); } public static function stop($b¥ °ÃŸí¬) { return self::changeStatus($b¥ °ÃŸí¬, self::STATYS_STOP); } public static function restart($bäÚâ°‰ˆﬁ) { return self::changeStatus($bäÚâ°‰ˆﬁ, self::STATYS_RUNNING); } public static function killAll() { $DÉ‡…‡»àÆ =& $_SERVER[áí∂¯Â¸Áò]; $AÃ√ßœªÚŒ = self::listData(); foreach ($AÃ√ßœªÚŒ as $bœã∏…Ò«·) { self::kill($bœã∏…Ò«·[$DÉ‡…‡»àÆ[371]]); } sleep(2); foreach ($AÃ√ßœªÚŒ as $bœã∏…Ò«·) { self::valueSet($bœã∏…Ò«·[$DÉ‡…‡»àÆ[371]], !1); } } private static function changeStatus($B£˜ä®„å∏, $a˘ªïÇΩ°ª) { goto eõñ£√∫‘í; e˘äÁ‰àﬂõ: $bƒ¥Ç ◊ëË[$aàΩÿÚÈ †[695]] = $a˘ªïÇΩ°ª; self::valueSet($B£˜ä®„å∏, $bƒ¥Ç ◊ëË); self::log($aàΩÿÚÈ †[1462] . $bƒ¥Ç ◊ëË[$aàΩÿÚÈ †[371]] . $aàΩÿÚÈ †[1463] . $a˘ªïÇΩ°ª); goto eŸ©Ö—à¬Ü; eŸ©Ö—à¬Ü: return !0; goto böá•πÑÍß; eõñ£√∫‘í: $aàΩÿÚÈ † =& $_SERVER[áí∂¯Â¸Áò]; $bƒ¥Ç ◊ëË = self::valueGet($B£˜ä®„å∏); if (!$bƒ¥Ç ◊ëË) { return !1; } goto e˘äÁ‰àﬂõ; böá•πÑÍß: } public static function valueGet($eΩ∏ì‡£âç = false) { $Céùü‘⁄‘ =& $_SERVER[áí∂¯Â¸Áò]; if ($eΩ∏ì‡£âç) { $d∑éæä©’ = Model($Céùü‘⁄‘[411])->where(array($Céùü‘⁄‘[89] => $eΩ∏ì‡£âç, $Céùü‘⁄‘[29] => $Céùü‘⁄‘[1464]))->find(); return $d∑éæä©’ ? json_decode($d∑éæä©’[$Céùü‘⁄‘[363]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($EáÊ€˘çŸŸ = false) { goto Aà∆≤·ﬂ÷„; c”óÜä¨î‚: return $A˜æﬁªÎÈ∞; goto e∫¨„†Ùßƒ; Aà∆≤·ﬂ÷„: $fﬁó©¡›óÇ =& $_SERVER[áí∂¯Â¸Áò]; $f∏Êˆ©¡Çë = array($fﬁó©¡›óÇ[29] => $fﬁó©¡›óÇ[1464]); if ($EáÊ€˘çŸŸ) { $f∏Êˆ©¡Çë[$fﬁó©¡›óÇ[1443]] = $EáÊ€˘çŸŸ; } goto fåâÁ∑ä¢í; fåâÁ∑ä¢í: $A˜æﬁªÎÈ∞ = Model($fﬁó©¡›óÇ[411])->where($f∏Êˆ©¡Çë)->select(); $A˜æﬁªÎÈ∞ = $A˜æﬁªÎÈ∞ ? $A˜æﬁªÎÈ∞ : array(); foreach ($A˜æﬁªÎÈ∞ as $D£∂ˆùÏçù => $d∆”èÛë’Ó) { $A˜æﬁªÎÈ∞[$D£∂ˆùÏçù] = json_decode($d∆”èÛë’Ó[$fﬁó©¡›óÇ[363]], !0); } goto c”óÜä¨î‚; e∫¨„†Ùßƒ: } public static function valueSet($BãÀ–”åëÕ, $c«¨ñòåƒΩ) { goto c É¶∞Ü£á; EßŸ˘´åÚ„: if (!$AÕî±öäÉç) { ob_start(); var_dump($c«¨ñòåƒΩ); $Cöœ≠‚∑øã = ob_get_clean(); self::log($c∑®≥Éµ˘¶[1465] . json_encode_force($Cöœ≠‚∑øã)); } if (!$BãÀ–”åëÕ || !$c«¨ñòåƒΩ[$c∑®≥Éµ˘¶[371]]) { return !1; } $cÍâ≈Èæ∆‡ = array($c∑®≥Éµ˘¶[29] => $c∑®≥Éµ˘¶[1464], $c∑®≥Éµ˘¶[1443] => USER_ID, $c∑®≥Éµ˘¶[89] => $BãÀ–”åëÕ, $c∑®≥Éµ˘¶[363] => $AÕî±öäÉç); goto Dƒ¿¢ËîÑè; Dƒ¿¢ËîÑè: Model($c∑®≥Éµ˘¶[411])->add($cÍâ≈Èæ∆‡, array(), !0); goto b¬Ø˘§ã†œ; c É¶∞Ü£á: $c∑®≥Éµ˘¶ =& $_SERVER[áí∂¯Â¸Áò]; if (!$c«¨ñòåƒΩ) { return Model($c∑®≥Éµ˘¶[411])->where(array($c∑®≥Éµ˘¶[89] => $BãÀ–”åëÕ, $c∑®≥Éµ˘¶[29] => $c∑®≥Éµ˘¶[1464]))->delete(); } $AÕî±öäÉç = json_encode($c«¨ñòåƒΩ); goto EßŸ˘´åÚ„; b¬Ø˘§ã†œ: } public static function log($fóåàß¢Ç‡) { write_log($fóåàß¢Ç‡, $_SERVER[áí∂¯Â¸Áò][1466]); } } goto a˜öÉ•ÖÈø; eáß∞Ωî◊ú: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\155\x5f\163\145\x73\x73\151\x6f\x6e"; public function get($C‡Ëç¯àçœ) { $FÚèùëÔÜÙ =& $_SERVER[áí∂¯Â¸Áò]; $A•⁄˜ï¢ìÇ = $this->where(array($FÚèùëÔÜÙ[2230] => $C‡Ëç¯àçœ))->find(); if (!is_array($A•⁄˜ï¢ìÇ)) { return !1; } return $A•⁄˜ï¢ìÇ[$FÚèùëÔÜÙ[698]]; } public function set($D∞≤‡§øù≠, $FõÍÌ˜∂€, $fÑ÷ìáﬁÒÖ = 3600) { $C™Ïàâ«ˆÖ =& $_SERVER[áí∂¯Â¸Áò]; $c⁄ßÛÇÕÃ≤ = array($C™Ïàâ«ˆÖ[2230] => $D∞≤‡§øù≠, $C™Ïàâ«ˆÖ[2143] => $FõÍÌ˜∂€, $C™Ïàâ«ˆÖ[2231] => $fÑ÷ìáﬁÒÖ + time()); if (Session::get($C™Ïàâ«ˆÖ[2232])) { $c⁄ßÛÇÕÃ≤[$C™Ïàâ«ˆÖ[1443]] = Session::get($C™Ïàâ«ˆÖ[2232]); } else { $c⁄ßÛÇÕÃ≤[$C™Ïàâ«ˆÖ[1443]] = 0; } if ($this->get($D∞≤‡§øù≠)) { return $this->where(array($C™Ïàâ«ˆÖ[2230] => $D∞≤‡§øù≠))->save($c⁄ßÛÇÕÃ≤); } else { return $this->add($c⁄ßÛÇÕÃ≤, array(), !0); } } public function remove($c…∞∂ÃÒÍ‰) { return $this->where(array($_SERVER[áí∂¯Â¸Áò][2230] => $c…∞∂ÃÒÍ‰))->delete(); } public function clearTimeout() { return $this->where($_SERVER[áí∂¯Â¸Áò][2233] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\141\x72\145"; protected $dataAuto = array(array("\155\157\x64\x69\146\x79\124\151\155\145", "\164\151\155\x65", "\x69\x6e\163\145\162\164\54\x75\x70\144\141\164\145", "\146\x75\x6e\x63\164\x69\157\156"), array("\x63\x72\145\x61\x74\145\x54\151\x6d\x65", "\164\151\x6d\x65", "\151\156\163\145\x72\x74", "\146\165\156\143\164\151\x6f\x6e"), array("\x6f\160\x74\151\x6f\156\163", '', "\x69\156\x73\x65\162\164\54\x75\x70\144\x61\x74\145\x2c\x73\x65\154\145\143\x74", "\152\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($E∑ñ†Øú»Œ) { $dÁæ±úËå¡ =& $_SERVER[áí∂¯Â¸Áò]; $fä‰öŒ¿ÊÌ = isset($E∑ñ†Øú»Œ[0]) ? $E∑ñ†Øú»Œ[0] : !1; return array($dÁæ±úËå¡[2234] => array(USER_ID, $dÁæ±úËå¡[2235]), $dÁæ±úËå¡[2183] => array($fä‰öŒ¿ÊÌ, $dÁæ±úËå¡[2236])); } protected function listSimple() { $Dß”ú≈—œ§ = array($_SERVER[áí∂¯Â¸Áò][1443] => USER_ID); $cáÔπÑˆÀã = $this->field($this->fieldList)->where($Dß”ú≈—œ§)->select(); return $cáÔπÑˆÀã ? $cáÔπÑˆÀã : array(); } protected function getInfo($d∫”ê™ﬁΩ—, $dÆÛÒíâ£ÿ = false) { $DÎ¥ﬂéá∆ =& $_SERVER[áí∂¯Â¸Áò]; if ($dÆÛÒíâ£ÿ) { return $this->_getShareInfo(array($DÎ¥ﬂéá∆[452] => $d∫”ê™ﬁΩ—)); } $b“¢œ∑£õπ = $this->cacheFunctionGet($DÎ¥ﬂéá∆[2237], $d∫”ê™ﬁΩ—); return $b“¢œ∑£õπ; } public function getInfoByHash($E∆Ú∆§Ωì) { return $this->_getShareInfo(array($_SERVER[áí∂¯Â¸Áò][454] => $E∆Ú∆§Ωì)); } public function getInfoByPath($Cæ°•â∞Ô) { $aÙ§Ôı¥µ‚ =& $_SERVER[áí∂¯Â¸Áò]; $a£ˆÖŒñﬁ¨ = array($aÙ§Ôı¥µ‚[1443] => USER_ID, $aÙ§Ôı¥µ‚[381] => $Cæ°•â∞Ô); return $this->_getShareInfo($a£ˆÖŒñﬁ¨); } public function getInfoBySourcePath($eÇÕŸ…É¨Ï) { $E‰®áÑﬂõ∏ =& $_SERVER[áí∂¯Â¸Áò]; $B∂Îáœœèé = array($E‰®áÑﬂõ∏[1443] => USER_ID, $E‰®áÑﬂõ∏[1027] => $eÇÕŸ…É¨Ï); return $this->_getShareInfo($B∂Îáœœèé); } private function _getShareInfo($dÊæãˆìŸÕ) { goto aÔ•÷ã∫Ÿ…; aÔ•÷ã∫Ÿ…: $DËÌ¡Ÿˆ„„ =& $_SERVER[áí∂¯Â¸Áò]; $cèÔ¢Àì™ÿ = $this->where($dÊæãˆìŸÕ)->find(); if (!$cèÔ¢Àì™ÿ) { return !1; } goto d‘›´øö˜£; aÑÊ÷ŸËé–: if ($cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[381]] == $DËÌ¡Ÿˆ„„[481]) { $cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[403]] = IO::info($cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[1027]]); } else { $cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[403]] = Model($DËÌ¡Ÿˆ„„[1124])->pathInfo($cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[381]]); } $cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[2239]] = $C∂‘„íÀ≤; return $cèÔ¢Àì™ÿ; goto Fõù¥¿€Çí; d‘›´øö˜£: $dÊæãˆìŸÕ = array($DËÌ¡Ÿˆ„„[452] => $cèÔ¢Àì™ÿ[$DËÌ¡Ÿˆ„„[452]]); $B ä˜–á◊© = $DËÌ¡Ÿˆ„„[2238]; $C∂‘„íÀ≤ = Model($DËÌ¡Ÿˆ„„[549])->order($DËÌ¡Ÿˆ„„[371])->field($B ä˜–á◊©)->where($dÊæãˆìŸÕ)->select(); goto aÑÊ÷ŸËé–; Fõù¥¿€Çí: } protected function getInfoAuth($Cø±óÙ‚åõ) { $aµ®çË”ùø =& $_SERVER[áí∂¯Â¸Áò]; $DÇ≈Áé‡ı´ = $this->getInfo($Cø±óÙ‚åõ); $DÇ≈Áé‡ı´[$aµ®çË”ùø[388]] = Model($aµ®çË”ùø[467])->authMake($DÇ≈Áé‡ı´[$aµ®çË”ùø[2239]]); return $DÇ≈Áé‡ı´; } protected function listData($FÜÂ”ë…⁄ = null, $Bä≤§ªß∑ƒ = 300) { $còÓ÷êÖ≤’ =& $_SERVER[áí∂¯Â¸Áò]; $CïÇÃä∂ÆÑ = array(array($còÓ÷êÖ≤’[457] => array($còÓ÷êÖ≤’[929], 0), $còÓ÷êÖ≤’[459] => array($còÓ÷êÖ≤’[929], 0), $còÓ÷êÖ≤’[2240] => $còÓ÷êÖ≤’[2197])); if ($FÜÂ”ë…⁄ == $còÓ÷êÖ≤’[1878]) { $CïÇÃä∂ÆÑ = array($còÓ÷êÖ≤’[457] => 1); } else { if ($FÜÂ”ë…⁄ == $còÓ÷êÖ≤’[1012]) { $CïÇÃä∂ÆÑ = array($còÓ÷êÖ≤’[459] => 1); } } $CïÇÃä∂ÆÑ[$còÓ÷êÖ≤’[1443]] = USER_ID; $dë∫Çµãâ£ = $this->where($CïÇÃä∂ÆÑ)->selectPage($Bä≤§ªß∑ƒ); return $dë∫Çµãâ£; } protected function listToMe($b≠àÜÒ£äê = 300) { goto Fì†ÎÉáÎÿ; d†òÕ≈œ¥®: $dïÌ•Ü∑êˆ = $this->field($EüªÙŒ√ìÍ)->where($d§«ÚÆä Ã)->select(); foreach ($dïÌ•Ü∑êˆ as $C¢ëŸøäâõ => &$AŒ€©Ö§‹˜) { $AŒ€©Ö§‹˜[$D´Ñˆ∫◊Æé[2239]] = $AÒ‚Ñé◊‹ø[$AŒ€©Ö§‹˜[$D´Ñˆ∫◊Æé[452]]]; } unset($AŒ€©Ö§‹˜); goto cÛÌ§ÌÂﬂÒ; cÛÌ§ÌÂﬂÒ: $F™À·‡≥¿ø = array($D´Ñˆ∫◊Æé[2243] => $dïÌ•Ü∑êˆ, $D´Ñˆ∫◊Æé[2244] => $e¬ ∫ÊÇáø[$D´Ñˆ∫◊Æé[355]]); return $F™À·‡≥¿ø; goto Bô¥¶‰‡πá; Fì†ÎÉáÎÿ: $D´Ñˆ∫◊Æé =& $_SERVER[áí∂¯Â¸Áò]; $eπ–ÂÆ®˜¬ = Model($D´Ñˆ∫◊Æé[2241])->userGroupParents(USER_ID); $d§«ÚÆä Ã = array($D´Ñˆ∫◊Æé[534] => SourceModel::TYPE_USER, $D´Ñˆ∫◊Æé[469] => USER_ID); goto AÚ· Ÿÿî©; f´ö“ŸåÜì: if (!$AÒ‚Ñé◊‹ø) { return $e¬ ∫ÊÇáø; } $EüªÙŒ√ìÍ = $D´Ñˆ∫◊Æé[2242]; $d§«ÚÆä Ã = array($D´Ñˆ∫◊Æé[452] => array($D´Ñˆ∫◊Æé[396], array_keys($AÒ‚Ñé◊‹ø))); goto d†òÕ≈œ¥®; AÚ· Ÿÿî©: if ($eπ–ÂÆ®˜¬) { $d§«ÚÆä Ã = array(array($D´Ñˆ∫◊Æé[534] => SourceModel::TYPE_USER, $D´Ñˆ∫◊Æé[469] => USER_ID), array($D´Ñˆ∫◊Æé[534] => SourceModel::TYPE_GROUP, $D´Ñˆ∫◊Æé[469] => array($D´Ñˆ∫◊Æé[7], $eπ–ÂÆ®˜¬)), $D´Ñˆ∫◊Æé[2240] => $D´Ñˆ∫◊Æé[2197]); } $e¬ ∫ÊÇáø = Model($D´Ñˆ∫◊Æé[549])->where($d§«ÚÆä Ã)->selectPage($b≠àÜÒ£äê); $AÒ‚Ñé◊‹ø = array_to_keyvalue_group($e¬ ∫ÊÇáø[$D´Ñˆ∫◊Æé[358]], $D´Ñˆ∫◊Æé[452]); goto f´ö“ŸåÜì; Bô¥¶‰‡πá: } protected function shareAdd($A€Ñ¬úËœÊ, $Eìª‡π°∞í) { $CË¡Ï¢¡√Ù =& $_SERVER[áí∂¯Â¸Áò]; $aòÜÁÇƒ˜ÿ = $this->_addShareData($A€Ñ¬úËœÊ, $Eìª‡π°∞í); if (!empty($Eìª‡π°∞í[$CË¡Ï¢¡√Ù[2245]])) { $this->_shareAuthSet($aòÜÁÇƒ˜ÿ, $Eìª‡π°∞í[$CË¡Ï¢¡√Ù[2245]]); } $this->shareEventAdd($A€Ñ¬úËœÊ, $Eìª‡π°∞í, $CË¡Ï¢¡√Ù[1015]); return $aòÜÁÇƒ˜ÿ; } private function shareEventAdd($CãÔç¡∑ù«, $EÒ◊¶êòˆ∆, $bÙê∂öø®– = "\141\x64\144") { goto dÇòààãÛè; b»ﬁ¢Ñ™–æ: return; goto bÜªÆèÁè¯; Fç±àÿê˘: $c∫ÓèñÚù˜ = $E°ÀÀ≈ôΩ≤[2248]; if ($F¿‘“º¥…ÿ[$E°ÀÀ≈ôΩ≤[457]] == $E°ÀÀ≈ôΩ≤[481] && $EÒ◊¶êòˆ∆[$E°ÀÀ≈ôΩ≤[457]] == $E°ÀÀ≈ôΩ≤[83]) { $c∫ÓèñÚù˜ = $E°ÀÀ≈ôΩ≤[2246]; } if ($F¿‘“º¥…ÿ[$E°ÀÀ≈ôΩ≤[457]] == $E°ÀÀ≈ôΩ≤[83] && $EÒ◊¶êòˆ∆[$E°ÀÀ≈ôΩ≤[457]] == $E°ÀÀ≈ôΩ≤[481]) { $c∫ÓèñÚù˜ = $E°ÀÀ≈ôΩ≤[2249]; } goto eú°¿ÿ∫«û; eú°¿ÿ∫«û: if ($F¿‘“º¥…ÿ[$E°ÀÀ≈ôΩ≤[459]] == $E°ÀÀ≈ôΩ≤[481] && $EÒ◊¶êòˆ∆[$E°ÀÀ≈ôΩ≤[459]] == $E°ÀÀ≈ôΩ≤[83]) { $c∫ÓèñÚù˜ = $E°ÀÀ≈ôΩ≤[2247]; } if ($F¿‘“º¥…ÿ[$E°ÀÀ≈ôΩ≤[459]] == $E°ÀÀ≈ôΩ≤[83] && $EÒ◊¶êòˆ∆[$E°ÀÀ≈ôΩ≤[459]] == $E°ÀÀ≈ôΩ≤[481]) { $c∫ÓèñÚù˜ = $E°ÀÀ≈ôΩ≤[2250]; } Model($E°ÀÀ≈ôΩ≤[518])->eventShare($CãÔç¡∑ù«, $c∫ÓèñÚù˜); goto b»ﬁ¢Ñ™–æ; dÇòààãÛè: $E°ÀÀ≈ôΩ≤ =& $_SERVER[áí∂¯Â¸Áò]; if ($bÙê∂öø®– == $E°ÀÀ≈ôΩ≤[1015]) { if ($EÒ◊¶êòˆ∆[$E°ÀÀ≈ôΩ≤[457]] == $E°ÀÀ≈ôΩ≤[83]) { Model($E°ÀÀ≈ôΩ≤[518])->eventShare($CãÔç¡∑ù«, $E°ÀÀ≈ôΩ≤[2246]); } if ($EÒ◊¶êòˆ∆[$E°ÀÀ≈ôΩ≤[459]] == $E°ÀÀ≈ôΩ≤[83]) { Model($E°ÀÀ≈ôΩ≤[518])->eventShare($CãÔç¡∑ù«, $E°ÀÀ≈ôΩ≤[2247]); } return; } $F¿‘“º¥…ÿ = $this->getInfoByPath($CãÔç¡∑ù«); goto Fç±àÿê˘; bÜªÆèÁè¯: } private function _addShareData($Dñí‰ÜäπÇ, $eØîÈ±»õñ = array()) { goto e∆è€‰Ú±–; e®˘œÀıà’: if ($AµŸƒéÉÌ∂ = $this->where($fä›‚Ö≤„©)->find()) { return $AµŸƒéÉÌ∂[$aÔÖÀÓÚÜä[452]]; } if ($Dñí‰ÜäπÇ == 0) { $D≥Ëü¬…†° = array($aÔÖÀÓÚÜä[28] => get_path_this($eØîÈ±»õñ[$aÔÖÀÓÚÜä[75]])); } else { $D≥Ëü¬…†° = Model($aÔÖÀÓÚÜä[758])->sourceInfo($Dñí‰ÜäπÇ); if (!$D≥Ëü¬…†°) { return !1; } } if (!$eØîÈ±»õñ[$aÔÖÀÓÚÜä[1348]]) { $eØîÈ±»õñ[$aÔÖÀÓÚÜä[1348]] = $D≥Ëü¬…†°[$aÔÖÀÓÚÜä[28]]; } goto c„ÁÔ∆πØ±; c„ÁÔ∆πØ±: $BÂÇÊüÏîü = array($aÔÖÀÓÚÜä[1434] => USER_ID, $aÔÖÀÓÚÜä[395] => $Dñí‰ÜäπÇ, $aÔÖÀÓÚÜä[1348] => $aÔÖÀÓÚÜä[33], $aÔÖÀÓÚÜä[457] => 0, $aÔÖÀÓÚÜä[459] => 0, $aÔÖÀÓÚÜä[1027] => $aÔÖÀÓÚÜä[33], $aÔÖÀÓÚÜä[299] => $aÔÖÀÓÚÜä[33], $aÔÖÀÓÚÜä[807] => $aÔÖÀÓÚÜä[33], $aÔÖÀÓÚÜä[2252] => 0, $aÔÖÀÓÚÜä[2253] => 0, $aÔÖÀÓÚÜä[460] => 0, $aÔÖÀÓÚÜä[461] => $aÔÖÀÓÚÜä[33], $aÔÖÀÓÚÜä[454] => $aÔÖÀÓÚÜä[33]); $D°ï«√∑øÇ = explode($aÔÖÀÓÚÜä[47], $aÔÖÀÓÚÜä[2254]); foreach ($D°ï«√∑øÇ as $d»¯†˘ãå∑) { if (!isset($eØîÈ±»õñ[$d»¯†˘ãå∑])) { continue; } $BÂÇÊüÏîü[$d»¯†˘ãå∑] = $eØîÈ±»õñ[$d»¯†˘ãå∑]; } goto a÷˘ñ◊é∏¢; B≠åøêÔ¬˘: return $eß«ÁÆùª; goto Dë¨âáíÑË; a÷˘ñ◊é∏¢: $eß«ÁÆùª = $this->add($BÂÇÊüÏîü); $e’›êµ·–ó = array($aÔÖÀÓÚÜä[454] => short_id($eß«ÁÆùª)); $this->where(array($aÔÖÀÓÚÜä[451] => $eß«ÁÆùª))->save($e’›êµ·–ó); goto B≠åøêÔ¬˘; e∆è€‰Ú±–: $aÔÖÀÓÚÜä =& $_SERVER[áí∂¯Â¸Áò]; $fä›‚Ö≤„© = array($aÔÖÀÓÚÜä[395] => $Dñí‰ÜäπÇ, $aÔÖÀÓÚÜä[1434] => USER_ID); if ($Dñí‰ÜäπÇ == 0) { $fä›‚Ö≤„© = array($aÔÖÀÓÚÜä[2251] => $eØîÈ±»õñ[$aÔÖÀÓÚÜä[1027]], $aÔÖÀÓÚÜä[1434] => USER_ID); } goto e®˘œÀıà’; Dë¨âáíÑË: } private function _shareAuthSet($Aˆèé‹∞˜◊, $B“ùîé∞ÓÁ) { goto eáŒúÚ•∑π; CÀÈ·‰ãÇ–: $cçÑàı…˘≠->where(array($dëüﬂËÖÁ÷[452] => $Aˆèé‹∞˜◊))->delete(); $cÉâ·éë‹µ = array(); foreach ($B“ùîé∞ÓÁ as $D´´îíÛËÓ) { $Fù®Üœ¶¯≥ = SourceModel::TYPE_USER; if ($D´´îíÛËÓ[$dëüﬂËÖÁ÷[383]] == SourceModel::TYPE_GROUP) { $Fù®Üœ¶¯≥ = SourceModel::TYPE_GROUP; } $CÈï∫—Ã€÷ = array($dëüﬂËÖÁ÷[452] => $Aˆèé‹∞˜◊, $dëüﬂËÖÁ÷[383] => $Fù®Üœ¶¯≥, $dëüﬂËÖÁ÷[469] => intval($D´´îíÛËÓ[$dëüﬂËÖÁ÷[469]]), $dëüﬂËÖÁ÷[2256] => 0, $dëüﬂËÖÁ÷[2257] => -1); if ($D´´îíÛËÓ[$dëüﬂËÖÁ÷[2256]]) { $CÈï∫—Ã€÷[$dëüﬂËÖÁ÷[2256]] = $D´´îíÛËÓ[$dëüﬂËÖÁ÷[2256]]; } else { if ($D´´îíÛËÓ[$dëüﬂËÖÁ÷[2257]]) { $CÈï∫—Ã€÷[$dëüﬂËÖÁ÷[2257]] = $D´´îíÛËÓ[$dëüﬂËÖÁ÷[2257]]; } } $cÉâ·éë‹µ[] = $CÈï∫—Ã€÷; } goto BøË∞å≠è†; BøË∞å≠è†: return $cçÑàı…˘≠->addAll($cÉâ·éë‹µ, array(), !0); goto e÷íÊ≤©€Á; eáŒúÚ•∑π: $dëüﬂËÖÁ÷ =& $_SERVER[áí∂¯Â¸Áò]; if (!is_array($B“ùîé∞ÓÁ)) { return !1; } $cçÑàı…˘≠ = Model($dëüﬂËÖÁ÷[2255]); goto CÀÈ·‰ãÇ–; e÷íÊ≤©€Á: } public function numViewAdd($d¿ó«ˆÇí¡) { $f¨‡òﬁ⁄íï =& $_SERVER[áí∂¯Â¸Áò]; $d„æÜ¥Ùƒ¬ = array($f¨‡òﬁ⁄íï[451] => $d¿ó«ˆÇí¡); $this->where($d„æÜ¥Ùƒ¬)->setAdd($f¨‡òﬁ⁄íï[2252]); } public function numDownloadAdd($EÈΩ¿⁄ÖÉŸ) { $f∂Òπ‹Ÿà‚ =& $_SERVER[áí∂¯Â¸Áò]; $F≠‘≈‰ÎíÇ = array($f∂Òπ‹Ÿà‚[451] => $EÈΩ¿⁄ÖÉŸ); $this->where($F≠‘≈‰ÎíÇ)->setAdd($f∂Òπ‹Ÿà‚[2253]); } protected function shareEdit($bÉ∂Øúﬂ√û, $Cı∑›è“çå) { goto EÒÏªø‘∏á; eã⁄ÕÿÖªÙ: if (isset($Cı∑›è“çå[$EË◊‰¨Æ⁄è[2245]])) { $this->_shareAuthSet($bÉ∂Øúﬂ√û, $Cı∑›è“çå[$EË◊‰¨Æ⁄è[2245]]); } return !0; goto eÖµ∞Ñ“ô; EÒÏªø‘∏á: $EË◊‰¨Æ⁄è =& $_SERVER[áí∂¯Â¸Áò]; $a™œôóå”◊ = $this->getInfo($bÉ∂Øúﬂ√û); if (!$a™œôóå”◊) { return !1; } goto b‚àÎû∫Ã∆; d™»ﬁ¥’‚‹: foreach ($CÒˆÜ’™òö as $C„∂†≠ãÓá) { if (!array_key_exists($C„∂†≠ãÓá, $Cı∑›è“çå)) { continue; } $Dﬁ·ñìÍæ¡[$C„∂†≠ãÓá] = $Cı∑›è“çå[$C„∂†≠ãÓá]; } $this->shareEventAdd($a™œôóå”◊[$EË◊‰¨Æ⁄è[381]], $Cı∑›è“çå, $EË◊‰¨Æ⁄è[2079]); $this->where(array($EË◊‰¨Æ⁄è[451] => $bÉ∂Øúﬂ√û))->save($Dﬁ·ñìÍæ¡); goto eã⁄ÕÿÖªÙ; b‚àÎû∫Ã∆: $this->_checkLinkShare($Cı∑›è“çå, $a™œôóå”◊); $Dﬁ·ñìÍæ¡ = array(); $CÒˆÜ’™òö = explode($EË◊‰¨Æ⁄è[47], $EË◊‰¨Æ⁄è[2258]); goto d™»ﬁ¥’‚‹; eÖµ∞Ñ“ô: } private function _checkLinkShare($c°ú≥©ÔΩÍ, $F†ê†˜ä§ÿ) { goto DéÎë©„›; fÉœˆ∏ã‘©: $Eáä‚ıÕè• = $this->shareFileMeta($cπñ∑πÛ¶ÿ[$fñƒÓ«äﬂÿ[431]]); if (isset($Eáä‚ıÕè•[$fñƒÓ«äﬂÿ[363]]) && $Eáä‚ıÕè•[$fñƒÓ«äﬂÿ[363]] == $fñƒÓ«äﬂÿ[83]) { show_json(LNG($fñƒÓ«äﬂÿ[2261]), !1); } goto d£¿À⁄ﬁëˆ; DéÎë©„›: $fñƒÓ«äﬂÿ =& $_SERVER[áí∂¯Â¸Áò]; if ($c°ú≥©ÔΩÍ[$fñƒÓ«äﬂÿ[457]] != $fñƒÓ«äﬂÿ[83]) { return; } $Dÿ¡–÷Úœπ = $F†ê†˜ä§ÿ[$fñƒÓ«äﬂÿ[403]][$fñƒÓ«äﬂÿ[381]]; goto aãÖë¬ﬂ’Ã; aãÖë¬ﬂ’Ã: if ($F†ê†˜ä§ÿ[$fñƒÓ«äﬂÿ[403]][$fñƒÓ«äﬂÿ[29]] != $fñƒÓ«äﬂÿ[171]) { $dÍï…˜‡Àø = $this->_folderReport($Dÿ¡–÷Úœπ); if (!$dÍï…˜‡Àø) { return; } show_json(LNG($fñƒÓ«äﬂÿ[2259]) . $fñƒÓ«äﬂÿ[2260] . $dÍï…˜‡Àø, !1); } $cπñ∑πÛ¶ÿ = Model($fñƒÓ«äﬂÿ[758])->fileInfoGet($F†ê†˜ä§ÿ[$fñƒÓ«äﬂÿ[403]][$fñƒÓ«äﬂÿ[381]]); if (!$cπñ∑πÛ¶ÿ) { return; } goto fÉœˆ∏ã‘©; d£¿À⁄ﬁëˆ: } private function _folderReport($C·Éµ‘” …) { goto d⁄úí∂≈ØÚ; a›Õ⁄Ç–å÷: $eà⁄πûË›ó = substr($cçº”êá†Ì[$a∆Ë◊àÃÔá[472]], strpos($cçº”êá†Ì[$a∆Ë◊àÃÔá[472]], $e©ö≈¿–ƒŒ)); $bªä≠é≥∑ = array($a∆Ë◊àÃÔá[381] => array($a∆Ë◊àÃÔá[7], trim($eà⁄πûË›ó, $a∆Ë◊àÃÔá[47]))); $Eﬁ∆ ÁÀüí = Model($a∆Ë◊àÃÔá[758])->where($bªä≠é≥∑)->field($a∆Ë◊àÃÔá[28])->select(); goto D¥‘∆ô¥òØ; BêÒøâ‰Ω√: $bªä≠é≥∑ = array($a∆Ë◊àÃÔá[431] => array($a∆Ë◊àÃÔá[7], $Fã√√øïºπ), $a∆Ë◊àÃÔá[472] => array($a∆Ë◊àÃÔá[757], "\45{$e©ö≈¿–ƒŒ}\45"), $a∆Ë◊àÃÔá[409] => 0); $cçº”êá†Ì = Model($a∆Ë◊àÃÔá[758])->where($bªä≠é≥∑)->field($a∆Ë◊àÃÔá[2263])->find(); if (!$cçº”êá†Ì) { return !1; } goto a›Õ⁄Ç–å÷; a–Ì£á¯≤ò: if (!$Fã√√øïºπ) { return !1; } $Fã√√øïºπ = array_to_keyvalue($Fã√√øïºπ, $a∆Ë◊àÃÔá[33], $a∆Ë◊àÃÔá[431]); $e©ö≈¿–ƒŒ = $a∆Ë◊àÃÔá[47] . $C·Éµ‘” … . $a∆Ë◊àÃÔá[47]; goto BêÒøâ‰Ω√; d⁄úí∂≈ØÚ: $a∆Ë◊àÃÔá =& $_SERVER[áí∂¯Â¸Áò]; $bªä≠é≥∑ = array($a∆Ë◊àÃÔá[431] => array($a∆Ë◊àÃÔá[929], 0), $a∆Ë◊àÃÔá[695] => 3); $Fã√√øïºπ = Model($a∆Ë◊àÃÔá[2262])->where($bªä≠é≥∑)->field($a∆Ë◊àÃÔá[431])->select(); goto a–Ì£á¯≤ò; D¥‘∆ô¥òØ: $A⁄–éãù°° = array_to_keyvalue($Eﬁ∆ ÁÀüí, $a∆Ë◊àÃÔá[33], $a∆Ë◊àÃÔá[28]); $A⁄–éãù°°[] = $cçº”êá†Ì[$a∆Ë◊àÃÔá[28]]; return implode($a∆Ë◊àÃÔá[8], $A⁄–éãù°°); goto b…ê⁄Œ¶Èñ; b…ê⁄Œ¶Èñ: } protected function remove($Dı€ãÓÔ√∆) { goto FÚ∞Éöõ•ä; fÓ ®É°≈ö: for ($B≠“Ñ∏Óƒ¨ = 0; $B≠“Ñ∏Óƒ¨ < count($EÙãëÀÕΩÌ); $B≠“Ñ∏Óƒ¨++) { $F…«®ûÌËÿ = $this->getInfo($EÙãëÀÕΩÌ[$B≠“Ñ∏Óƒ¨]); if ($F…«®ûÌËÿ[$dÈêù¢ìÏ√[459]] == $dÈêù¢ìÏ√[83]) { Model($dÈêù¢ìÏ√[518])->eventShare($F…«®ûÌËÿ[$dÈêù¢ìÏ√[381]], $dÈêù¢ìÏ√[2250]); } if ($F…«®ûÌËÿ[$dÈêù¢ìÏ√[457]] == $dÈêù¢ìÏ√[83]) { Model($dÈêù¢ìÏ√[518])->eventShare($F…«®ûÌËÿ[$dÈêù¢ìÏ√[381]], $dÈêù¢ìÏ√[2249]); } } return $Dˆ≤ú‰≤Ëˆ; goto D¯‹Û‹ß™; FÚ∞Éöõ•ä: $dÈêù¢ìÏ√ =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($Dı€ãÓÔ√∆)) { $Dı€ãÓÔ√∆ = array($dÈêù¢ìÏ√[7], $Dı€ãÓÔ√∆); } $d‰…∆ £ÿô = array($dÈêù¢ìÏ√[452] => $Dı€ãÓÔ√∆); goto aãëªÃá’◊; aãëªÃá’◊: $Dˆ≤ú‰≤Ëˆ = $this->where($d‰…∆ £ÿô)->delete(); if ($Dˆ≤ú‰≤Ëˆ) { Model($dÈêù¢ìÏ√[549])->where(array($dÈêù¢ìÏ√[452] => $Dı€ãÓÔ√∆))->delete(); } $EÙãëÀÕΩÌ = is_array($Dı€ãÓÔ√∆) ? $Dı€ãÓÔ√∆[1] : array($Dı€ãÓÔ√∆); goto fÓ ®É°≈ö; D¯‹Û‹ß™: } protected function removeBySource($BêËˆ±åØ∆) { goto Bˆ∫ﬁ›∆≈à; Bˆ∫ﬁ›∆≈à: $BùÜı«Ÿü∏ =& $_SERVER[áí∂¯Â¸Áò]; $D¯Ã¿òÜµ∏ = array($BùÜı«Ÿü∏[395] => array($BùÜı«Ÿü∏[396], $BêËˆ±åØ∆)); $fê„ÁÙ≈òñ = $this->field($BùÜı«Ÿü∏[452])->where($D¯Ã¿òÜµ∏)->select(); goto D«≈ ÇåéÏ; D«≈ ÇåéÏ: $fê„ÁÙ≈òñ = array_to_keyvalue($fê„ÁÙ≈òñ, $BùÜı«Ÿü∏[33], $BùÜı«Ÿü∏[452]); if (!$fê„ÁÙ≈òñ) { return; } $D¯Ã¿òÜµ∏ = array($BùÜı«Ÿü∏[451] => array($BùÜı«Ÿü∏[396], $fê„ÁÙ≈òñ)); goto d§”«£∂é; d§”«£∂é: $this->where($D¯Ã¿òÜµ∏)->delete(); Model($BùÜı«Ÿü∏[549])->where($D¯Ã¿òÜµ∏)->delete(); goto EêﬂŸ÷¯Ûé; EêﬂŸ÷¯Ûé: } public function listAll($aÎäºø§ºå) { goto Dóè∆ﬂ™ÇÁ; cçå‰∫Ú⁄—: return $DßÚ≈õÑ˘ø; goto DÁó¶Àùè•; Dóè∆ﬂ™ÇÁ: $Dîπ‰¨Õ· =& $_SERVER[áí∂¯Â¸Áò]; $C£ßà¢Ì§ÿ = array(); if ($aÎäºø§ºå[$Dîπ‰¨Õ·[1443]]) { $C£ßà¢Ì§ÿ[$Dîπ‰¨Õ·[1443]] = $aÎäºø§ºå[$Dîπ‰¨Õ·[1443]]; } goto AÛ‰çä≠Ç›; AÛ‰çä≠Ç›: if ($aÎäºø§ºå[$Dîπ‰¨Õ·[708]]) { $A†â†ë¡˘√ = $aÎäºø§ºå[$Dîπ‰¨Õ·[460]] ? $aÎäºø§ºå[$Dîπ‰¨Õ·[460]] : strtotime(date($Dîπ‰¨Õ·[2264])); $C£ßà¢Ì§ÿ[$Dîπ‰¨Õ·[191]] = array($Dîπ‰¨Õ·[325], array($aÎäºø§ºå[$Dîπ‰¨Õ·[708]], $A†â†ë¡˘√)); } if ($aÎäºø§ºå[$Dîπ‰¨Õ·[29]]) { $C£ßà¢Ì§ÿ[$aÎäºø§ºå[$Dîπ‰¨Õ·[29]]] = 1; } else { $C£ßà¢Ì§ÿ[] = array($Dîπ‰¨Õ·[457] => array($Dîπ‰¨Õ·[929], 0), $Dîπ‰¨Õ·[459] => array($Dîπ‰¨Õ·[929], 0), $Dîπ‰¨Õ·[2240] => $Dîπ‰¨Õ·[2197]); } if ($aÎäºø§ºå[$Dîπ‰¨Õ·[2193]]) { $C£ßà¢Ì§ÿ[] = array($Dîπ‰¨Õ·[454] => $aÎäºø§ºå[$Dîπ‰¨Õ·[2193]], $Dîπ‰¨Õ·[1348] => array($Dîπ‰¨Õ·[757], "\x25{$aÎäºø§ºå[$Dîπ‰¨Õ·[2193]]}\45"), $Dîπ‰¨Õ·[2240] => $Dîπ‰¨Õ·[2197]); } goto bıΩ©ØıÌΩ; bıΩ©ØıÌΩ: $DßÚ≈õÑ˘ø = $this->_makeOrder()->where($C£ßà¢Ì§ÿ)->selectPage(20); if (empty($DßÚ≈õÑ˘ø[$Dîπ‰¨Õ·[358]])) { return array(); } $this->_listDataApply($DßÚ≈õÑ˘ø[$Dîπ‰¨Õ·[358]]); goto cçå‰∫Ú⁄—; DÁó¶Àùè•: } public function listDataApply($CÉ®§ÉÙ¯√) { $this->_listDataApply($CÉ®§ÉÙ¯√); return $CÉ®§ÉÙ¯√; } private function _listDataApply(&$bÌ÷å ©é≥) { goto FÚ÷êÿç‰Æ; a∫»¥úÌá°: unset($FÁä◊¯∫≥–); goto DõÔñ§ıÙÀ; DÏÛÉåãë±: $dÔ™ »ô≠ä = array_to_keyvalue($bÌ÷å ©é≥, $d√ıîÿâ∏É[33], $d√ıîÿâ∏É[381]); $B´òÌ≈»Ë∂ = Model($d√ıîÿâ∏É[758])->sourceListInfo($dÔ™ »ô≠ä, !0); foreach ($bÌ÷å ©é≥ as &$FÁä◊¯∫≥–) { $Eœ£…éÆÖÌ = $FÁä◊¯∫≥–[$d√ıîÿâ∏É[1443]]; $FÁä◊¯∫≥–[$d√ıîÿâ∏É[2265]] = $c§»ÕïéÈ÷[$Eœ£…éÆÖÌ] ? $c§»ÕïéÈ÷[$Eœ£…éÆÖÌ] : !1; $B⁄ˆæ’Ãùò = $FÁä◊¯∫≥–[$d√ıîÿâ∏É[381]]; $FÁä◊¯∫≥–[$d√ıîÿâ∏É[403]] = $B´òÌ≈»Ë∂[$B⁄ˆæ’Ãùò] ? $B´òÌ≈»Ë∂[$B⁄ˆæ’Ãùò] : !1; } goto a∫»¥úÌá°; FÚ÷êÿç‰Æ: $d√ıîÿâ∏É =& $_SERVER[áí∂¯Â¸Áò]; $DËì“ñ¨≈ù = array_to_keyvalue($bÌ÷å ©é≥, $d√ıîÿâ∏É[33], $d√ıîÿâ∏É[1443]); $c§»ÕïéÈ÷ = Model($d√ıîÿâ∏É[490])->userListInfo(array_unique($DËì“ñ¨≈ù)); goto DÏÛÉåãë±; DõÔñ§ıÙÀ: } private function _makeOrder($A≤ï¨øãÜ = '') { goto Fá›âíÔÆÿ; B‡¢‡ˆÃÔ∂: $a˜‰í™Õ™µ = Input::get($bäÀ±ÿ´å»[419], $bäÀ±ÿ´å»[7], $bäÀ±ÿ´å»[401], $c∑∂‘Õî‡ú); $dïÏ°ƒâΩ’ = Input::get($bäÀ±ÿ´å»[420], $bäÀ±ÿ´å»[7], $bäÀ±ÿ´å»[2266], array($bäÀ±ÿ´å»[2192], $bäÀ±ÿ´å»[416])); $dïÏ°ƒâΩ’ = $CÒ©û’‘€õ[$dïÏ°ƒâΩ’]; goto d¶Ó¥Ï‰±°; Fá›âíÔÆÿ: $bäÀ±ÿ´å» =& $_SERVER[áí∂¯Â¸Áò]; $c∑∂‘Õî‡ú = array($bäÀ±ÿ´å»[191], $bäÀ±ÿ´å»[460], $bäÀ±ÿ´å»[2252], $bäÀ±ÿ´å»[2253]); $CÒ©û’‘€õ = array($bäÀ±ÿ´å»[414] => $bäÀ±ÿ´å»[415], $bäÀ±ÿ´å»[416] => $bäÀ±ÿ´å»[417]); goto B‡¢‡ˆÃÔ∂; d¶Ó¥Ï‰±°: $A≤ï¨øãÜ = $A≤ï¨øãÜ . "{$a˜‰í™Õ™µ}\x20{$dïÏ°ƒâΩ’}"; return $this->order($A≤ï¨øãÜ); goto AÂÓ—¯ÒÌÙ; AÂÓ—¯ÒÌÙ: } public function reportAdd($f—∫ÊÎÚ∫‘) { $AÚ©¯◊»Øè =& $_SERVER[áí∂¯Â¸Áò]; $f›Çﬁïçéñ = array($AÚ©¯◊»Øè[452] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[452]], $AÚ©¯◊»Øè[1443] => USER_ID); if (Model($AÚ©¯◊»Øè[2262])->where($f›Çﬁïçéñ)->find()) { return !1; } $bíÙìÉÍ©â = array($AÚ©¯◊»Øè[452] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[452]], $AÚ©¯◊»Øè[1348] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[1348]], $AÚ©¯◊»Øè[381] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[381]], $AÚ©¯◊»Øè[431] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[431]], $AÚ©¯◊»Øè[1443] => USER_ID, $AÚ©¯◊»Øè[29] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[29]], $AÚ©¯◊»Øè[417] => $f—∫ÊÎÚ∫‘[$AÚ©¯◊»Øè[417]]); return Model($AÚ©¯◊»Øè[2262])->add($bíÙìÉÍ©â); } public function reportList($cÛ´é∂ª◊õ) { goto d»ıœ ÷à; d»ıœ ÷à: $fùë√—ù•È =& $_SERVER[áí∂¯Â¸Áò]; $fÇ¶ˆ÷ä™ = array(); if ($cÛ´é∂ª◊õ[$fùë√—ù•È[708]]) { $Aú‹≠¡«ﬂ = $cÛ´é∂ª◊õ[$fùë√—ù•È[460]] ? $cÛ´é∂ª◊õ[$fùë√—ù•È[460]] : strtotime(date($fùë√—ù•È[2264])); $fÇ¶ˆ÷ä™[$fùë√—ù•È[191]] = array($fùë√—ù•È[325], array($cÛ´é∂ª◊õ[$fùë√—ù•È[708]], $Aú‹≠¡«ﬂ)); } goto BÁÈØ«’ÿŸ; DçÇÀ·¥ÿ∑: $Cé◊‘”ïç≈ = array($fùë√—ù•È[414] => $fùë√—ù•È[415], $fùë√—ù•È[416] => $fùë√—ù•È[417]); $BÂå ÃÓ„ø = $fùë√—ù•È[2270] . $Cé◊‘”ïç≈[$bòÖÎˆò≠◊]; $Aı‚á®ÔÜ¬ = Model($fùë√—ù•È[2262])->where($fÇ¶ˆ÷ä™)->order($BÂå ÃÓ„ø)->selectPage(20); goto BµâÊ®ªúú; BµâÊ®ªúú: if (empty($Aı‚á®ÔÜ¬[$fùë√—ù•È[358]])) { return array(); } $this->_listDataApply($Aı‚á®ÔÜ¬[$fùë√—ù•È[358]]); return $Aı‚á®ÔÜ¬; goto a©¨ÑÇëÔ≤; BÁÈØ«’ÿŸ: if (isset($cÛ´é∂ª◊õ[$fùë√—ù•È[29]]) && in_array($cÛ´é∂ª◊õ[$fùë√—ù•È[29]], array($fùë√—ù•È[83], $fùë√—ù•È[2267], $fùë√—ù•È[2268], $fùë√—ù•È[2269], $fùë√—ù•È[1927]))) { $fÇ¶ˆ÷ä™[$fùë√—ù•È[29]] = $cÛ´é∂ª◊õ[$fùë√—ù•È[29]]; } if (isset($cÛ´é∂ª◊õ[$fùë√—ù•È[695]]) && in_array($cÛ´é∂ª◊õ[$fùë√—ù•È[695]], array($fùë√—ù•È[481], $fùë√—ù•È[83], $fùë√—ù•È[2267], $fùë√—ù•È[2268]))) { $fÇ¶ˆ÷ä™[$fùë√—ù•È[695]] = $cÛ´é∂ª◊õ[$fùë√—ù•È[695]]; } $bòÖÎˆò≠◊ = Input::get($fùë√—ù•È[420], $fùë√—ù•È[7], $fùë√—ù•È[2266], array($fùë√—ù•È[2192], $fùë√—ù•È[416])); goto DçÇÀ·¥ÿ∑; a©¨ÑÇëÔ≤: } public function reportStatus($d“∆õóÇ≤Ò) { goto A≥ß√…ˆıÀ; eè‹–““áû: $b◊∏πÓË⁄É = Model($c”£ÂÛå‘Î[2262])->where($Cø‡«í≥√ê)->save($F…¬ﬁ†‚Ÿ©); if ($d“∆õóÇ≤Ò[$c”£ÂÛå‘Î[695]] == $c”£ÂÛå‘Î[2267]) { if ($A∞êπœàê∞[$c”£ÂÛå‘Î[431]] != $c”£ÂÛå‘Î[481] && $this->shareFileMeta($A∞êπœàê∞[$c”£ÂÛå‘Î[431]])) { $this->shareFileMeta($A∞êπœàê∞[$c”£ÂÛå‘Î[431]], 0); } $this->remove($A∞êπœàê∞[$c”£ÂÛå‘Î[452]]); return !0; } if ($b◊∏πÓË⁄É && $d“∆õóÇ≤Ò[$c”£ÂÛå‘Î[695]] == $c”£ÂÛå‘Î[2268]) { $c¶Ÿ§åá µ = $F…¬ﬁ†‚Ÿ©[$c”£ÂÛå‘Î[695]] == $c”£ÂÛå‘Î[2268] ? 1 : 0; $this->shareFileMeta($A∞êπœàê∞[$c”£ÂÛå‘Î[431]], $c¶Ÿ§åá µ); $this->removeByFile($A∞êπœàê∞[$c”£ÂÛå‘Î[431]]); } goto cÊ°ªëÍïπ; cÊ°ªëÍïπ: return $b◊∏πÓË⁄É; goto EÂä‰«æﬂÍ; A≥ß√…ˆıÀ: $c”£ÂÛå‘Î =& $_SERVER[áí∂¯Â¸Áò]; $Cø‡«í≥√ê = array($c”£ÂÛå‘Î[371] => $d“∆õóÇ≤Ò[$c”£ÂÛå‘Î[371]]); $A∞êπœàê∞ = Model($c”£ÂÛå‘Î[2262])->where($Cø‡«í≥√ê)->field($c”£ÂÛå‘Î[2271])->find(); goto fç≥äÉ¨∞°; fç≥äÉ¨∞°: if (!$A∞êπœàê∞) { return !1; } $F…¬ﬁ†‚Ÿ© = array($c”£ÂÛå‘Î[695] => $d“∆õóÇ≤Ò[$c”£ÂÛå‘Î[695]]); if ($d“∆õóÇ≤Ò[$c”£ÂÛå‘Î[695]] == $c”£ÂÛå‘Î[2268] && $A∞êπœàê∞[$c”£ÂÛå‘Î[695]] == $c”£ÂÛå‘Î[2268]) { $F…¬ﬁ†‚Ÿ©[$c”£ÂÛå‘Î[695]] = 0; } goto eè‹–““áû; EÂä‰«æﬂÍ: } private function removeByFile($E…ì·…Ü¨Ú) { goto eú¯∏ıÉïÚ; Dò¡ç¨”æË: $F…•ÑÑì“» = array_to_keyvalue($câ„ä·‘ô„, $fìÉÉÍÈ≤Ÿ[33], $fìÉÉÍÈ≤Ÿ[452]); $this->remove($F…•ÑÑì“»); goto eª¢ÿ§Ü„ê; D±‘®Ω¥ƒ: $B∏À¡ıõñÖ = array($fìÉÉÍÈ≤Ÿ[381] => array($fìÉÉÍÈ≤Ÿ[7], $BÓç≠‘∫•ú), $fìÉÉÍÈ≤Ÿ[457] => 1); $câ„ä·‘ô„ = Model($fìÉÉÍÈ≤Ÿ[2089])->where($B∏À¡ıõñÖ)->field($fìÉÉÍÈ≤Ÿ[452])->select(); if (empty($câ„ä·‘ô„)) { return; } goto Dò¡ç¨”æË; eú¯∏ıÉïÚ: $fìÉÉÍÈ≤Ÿ =& $_SERVER[áí∂¯Â¸Áò]; $câ„ä·‘ô„ = Model($fìÉÉÍÈ≤Ÿ[758])->where(array($fìÉÉÍÈ≤Ÿ[431] => $E…ì·…Ü¨Ú))->field($fìÉÉÍÈ≤Ÿ[381])->select(); $BÓç≠‘∫•ú = array_to_keyvalue($câ„ä·‘ô„, $fìÉÉÍÈ≤Ÿ[33], $fìÉÉÍÈ≤Ÿ[381]); goto D±‘®Ω¥ƒ; eª¢ÿ§Ü„ê: } private function shareFileMeta($eé⁄ΩÑÒ÷è, $E¥Ù°ö√ÔÖ = null) { $cº‡ë≤¨ÿ— =& $_SERVER[áí∂¯Â¸Áò]; $dèéÂÇÃäú = array($cº‡ë≤¨ÿ—[431] => $eé⁄ΩÑÒ÷è, $cº‡ë≤¨ÿ—[89] => $cº‡ë≤¨ÿ—[2272]); if (is_null($E¥Ù°ö√ÔÖ)) { return Model($cº‡ë≤¨ÿ—[2273])->where($dèéÂÇÃäú)->find(); } $dèéÂÇÃäú[$cº‡ë≤¨ÿ—[363]] = $E¥Ù°ö√ÔÖ; Model($cº‡ë≤¨ÿ—[2273])->add($dèéÂÇÃäú, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\x75\x72\143\x65\x5f\x61\165\164\x68"; public function getAuth($b¡◊ë≈Î’ﬁ) { goto DÙ§ì‰Âﬂü; E®‹…Ïáãá: $AŒæêÁçØÖ = $this->field($A „¢À„◊©)->order($A•íáÛÒÕÇ[371])->where($EÌ†Ñ—‘Èº)->select(); $c∞“˜‚–ﬁØ = array(); $Fôçç≠¢Ü’ = array(); goto eä©éò¶ËÊ; eä©éò¶ËÊ: $AäÂ‹ —Çá = 2 << 25; foreach ($AŒæêÁçØÖ as $FÉœâæÁÍò) { goto f⁄òœ≤öº√; cŒ∫óÜáÃÌ: if ($FÉœâæÁÍò[$A•íáÛÒÕÇ[383]] == SourceModel::TYPE_USER && $FÉœâæÁÍò[$A•íáÛÒÕÇ[469]] == $A•íáÛÒÕÇ[481]) { $AÌ‡êÈêëá = 0; } $Fôçç≠¢Ü’[] = $Bä≠êóËåñ[$A•íáÛÒÕÇ[388]] + $AÌ‡êÈêëá; goto E¶¶æ®ﬂÉ∂; b’◊§Ÿ¢ëÖ: $AÌ‡êÈêëá = 0; if ($FÉœâæÁÍò[$A•íáÛÒÕÇ[383]] == SourceModel::TYPE_GROUP) { $AÌ‡êÈêëá = $AäÂ‹ —Çá * 2; } if ($FÉœâæÁÍò[$A•íáÛÒÕÇ[383]] == SourceModel::TYPE_USER) { $AÌ‡êÈêëá = $AäÂ‹ —Çá; } goto cŒ∫óÜáÃÌ; f⁄òœ≤öº√: $Bä≠êóËåñ = Model($A•íáÛÒÕÇ[2275])->listData($FÉœâæÁÍò[$A•íáÛÒÕÇ[2256]]); if (!$Bä≠êóËåñ) { continue; } $c∞“˜‚–ﬁØ[] = $FÉœâæÁÍò; goto b’◊§Ÿ¢ëÖ; E¶¶æ®ﬂÉ∂: } array_multisort($Fôçç≠¢Ü’, SORT_DESC, $c∞“˜‚–ﬁØ); goto d±èëÑ∞€∞; d±èëÑ∞€∞: return $c∞“˜‚–ﬁØ; goto b∆¬∞ï“áÛ; DÙ§ì‰Âﬂü: $A•íáÛÒÕÇ =& $_SERVER[áí∂¯Â¸Áò]; $A „¢À„◊© = $A•íáÛÒÕÇ[2274]; $EÌ†Ñ—‘Èº = array($A•íáÛÒÕÇ[381] => $b¡◊ë≈Î’ﬁ); goto E®‹…Ïáãá; b∆¬∞ï“áÛ: } public function setAuth($f¡˘Ú∫ä , $d∞âêÂ›√ù) { goto bÆπ¯¢ùÙØ; EçÛ÷ √ó÷: return !0; goto e∂ñ®»∆–‰; dﬂÊ∏±—§◊: if ($f¿úºÖª⁄ != $e·ÛÂ©¡èÃ) { $E˜¶”äëæº = array($dâ®˘ëß„Ã[2112] => $f¿úºÖª⁄); $Câ¥®∑’»∞ = Model($dâ®˘ëß„Ã[2191])->field($dâ®˘ëß„Ã[1443])->where($E˜¶”äëæº)->select(); $Câ¥®∑’»∞ = array_to_keyvalue($Câ¥®∑’»∞, $dâ®˘ëß„Ã[33], $dâ®˘ëß„Ã[1443]); } $DÛﬁ„⁄à‹â = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $Bçã„ªíÿÊ = array(); goto F·∏ê≈ÇÆù; F·∏ê≈ÇÆù: foreach ($d∞âêÂ›√ù as $aé∏Ê™‡Á∏) { if (!in_array($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[383]], $DÛﬁ„⁄à‹â)) { show_json(LNG($dâ®˘ëß„Ã[2276]), !1); } if ($f¿úºÖª⁄ != $e·ÛÂ©¡èÃ) { if ($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[383]] == SourceModel::TYPE_GROUP) { } if ($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[469]] != 0 && !in_array($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[469]], $Câ¥®∑’»∞)) { } } if ($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[469]] == 0) { $aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[383]] = SourceModel::TYPE_USER; } $Bçã„ªíÿÊ[] = array($dâ®˘ëß„Ã[381] => $f¡˘Ú∫ä , $dâ®˘ëß„Ã[383] => intval($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[383]]), $dâ®˘ëß„Ã[469] => intval($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[469]]), $dâ®˘ëß„Ã[2256] => intval($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[2256]]) ? intval($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[2256]]) : 0, $dâ®˘ëß„Ã[2257] => intval($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[2257]]) ? intval($aé∏Ê™‡Á∏[$dâ®˘ëß„Ã[2257]]) : -1); } $this->where(array($dâ®˘ëß„Ã[395] => $f¡˘Ú∫ä ))->delete(); $this->addAll($Bçã„ªíÿÊ); goto EçÛ÷ √ó÷; bÆπ¯¢ùÙØ: $dâ®˘ëß„Ã =& $_SERVER[áí∂¯Â¸Áò]; $cëÉü≥è≤Á = Model($dâ®˘ëß„Ã[1124])->sourceInfo($f¡˘Ú∫ä ); if (!$cëÉü≥è≤Á) { return !1; } goto f∏‡‚ÕßÎË; f∏‡‚ÕßÎË: if ($cëÉü≥è≤Á[$dâ®˘ëß„Ã[383]] != SourceModel::TYPE_GROUP) { return !1; } $e·ÛÂ©¡èÃ = 1; $f¿úºÖª⁄ = $cëÉü≥è≤Á[$dâ®˘ëß„Ã[469]]; goto dﬂÊ∏±—§◊; e∂ñ®»∆–‰: } public function authClear($Eÿ§∏Á◊ß–) { $Aí◊†∂§€ß =& $_SERVER[áí∂¯Â¸Áò]; $a•Ã™ìè›Á = Model($Aí◊†∂§€ß[1124])->sourceInfo($Eÿ§∏Á◊ß–); $DÉü·ƒ∂Ìá = array($Eÿ§∏Á◊ß–); if ($a•Ã™ìè›Á[$Aí◊†∂§€ß[382]] == $Aí◊†∂§€ß[83]) { $EÎ∏≠óÜÂÎ = array($Aí◊†∂§€ß[538] => array($Aí◊†∂§€ß[496], $a•Ã™ìè›Á[$Aí◊†∂§€ß[472]] . $Eÿ§∏Á◊ß– . $Aí◊†∂§€ß[497])); $DÉü·ƒ∂Ìá = Model($Aí◊†∂§€ß[1124])->field($Aí◊†∂§€ß[395])->where($EÎ∏≠óÜÂÎ)->getField($Aí◊†∂§€ß[381], !0); $DÉü·ƒ∂Ìá[] = $Eÿ§∏Á◊ß–; } $this->where(array($Aí◊†∂§€ß[395] => array($Aí◊†∂§€ß[396], $DÉü·ƒ∂Ìá)))->delete(); return !0; } public function getAllChildren($C≠Àöàéó©) { goto dûîÑÉΩ£Æ; aåÊâœ‰Û∫: $Dæ§è„√˜∑ = Model($aèœÖ∑ƒÓÃ[758])->field($eò∫üéﬁØΩ)->where($e˜≤ø¯òÓŒ)->select(); $c†ç™õ≥°› = array($C≠Àöàéó©); foreach ($Dæ§è„√˜∑ as $F¨Ñ¶ïáó) { foreach ($AÉûªØÿÏï as $D∆Œ√Ω∂Õ√) { $AÒ¬ÍæÒÑÂ = $aèœÖ∑ƒÓÃ[47] . $D∆Œ√Ω∂Õ√ . $aèœÖ∑ƒÓÃ[47]; $aÒıÜıÙ„ﬁ = $F¨Ñ¶ïáó[$aèœÖ∑ƒÓÃ[472]] . $F¨Ñ¶ïáó[$aèœÖ∑ƒÓÃ[381]] . $aèœÖ∑ƒÓÃ[47]; if (strstr($aÒıÜıÙ„ﬁ, $AÒ¬ÍæÒÑÂ)) { $c†ç™õ≥°›[] = $F¨Ñ¶ïáó[$aèœÖ∑ƒÓÃ[381]]; break; } } } goto bì¬–ôÇΩä; bì¬–ôÇΩä: return $this->sourceListAuth($c†ç™õ≥°›); goto CÕë¡≥ù∏è; a®˘∆˜ÙÇπ: if (!$dïΩ¿∫„£Ú) { return array(); } $eò∫üéﬁØΩ = $aèœÖ∑ƒÓÃ[2277]; $e˜≤ø¯òÓŒ = array($aèœÖ∑ƒÓÃ[381] => array($aèœÖ∑ƒÓÃ[7], $dïΩ¿∫„£Ú), $aèœÖ∑ƒÓÃ[409] => $aèœÖ∑ƒÓÃ[481]); goto aåÊâœ‰Û∫; d’’¿´ìâÆ: if ($FŒπ„±ñ¯Ñ[$aèœÖ∑ƒÓÃ[383]] != SourceModel::TYPE_GROUP) { return array(); } $b›ã£Ÿäûæ = 1; $AÉûªØÿÏï = array($C≠Àöàéó©); goto AéÎƒ–à≥©; AéÎƒ–à≥©: if ($FŒπ„±ñ¯Ñ[$aèœÖ∑ƒÓÃ[474]] == $aèœÖ∑ƒÓÃ[481] && $FŒπ„±ñ¯Ñ[$aèœÖ∑ƒÓÃ[469]] != $b›ã£Ÿäûæ) { $AÉûªØÿÏï = $this->groupChidldAllRootSource($FŒπ„±ñ¯Ñ[$aèœÖ∑ƒÓÃ[469]]); } $dïΩ¿∫„£Ú = $this->field($aèœÖ∑ƒÓÃ[381])->group($aèœÖ∑ƒÓÃ[381])->select(); $dïΩ¿∫„£Ú = array_to_keyvalue($dïΩ¿∫„£Ú, $aèœÖ∑ƒÓÃ[33], $aèœÖ∑ƒÓÃ[381]); goto a®˘∆˜ÙÇπ; dûîÑÉΩ£Æ: $aèœÖ∑ƒÓÃ =& $_SERVER[áí∂¯Â¸Áò]; $FŒπ„±ñ¯Ñ = Model($aèœÖ∑ƒÓÃ[1124])->sourceInfo($C≠Àöàéó©); if ($FŒπ„±ñ¯Ñ[$aèœÖ∑ƒÓÃ[382]] != $aèœÖ∑ƒÓÃ[83]) { return $this->sourceListAuth(array($C≠Àöàéó©)); } goto d’’¿´ìâÆ; CÕë¡≥ù∏è: } private function sourceListAuth($A°÷ñØ™Ÿ…) { goto Bñ–ÇÉÁÕï; Bñ–ÇÉÁÕï: $Eˆ⁄≈ã¢ìŒ =& $_SERVER[áí∂¯Â¸Áò]; $dÃ´”çœœì = Model($Eˆ⁄≈ã¢ìŒ[1124])->sourceListInfo($A°÷ñØ™Ÿ…, !0); $b∑êû¯‡◊ô = $Eˆ⁄≈ã¢ìŒ[2274]; goto DÉ–ÃÍ˜ÓÎ; C≤Ï˘î¨È¡: return $a—∏øÆçÛÚ; goto c›È‰ë¢ä“; fî∫Ï“·÷: $aÔ¬¶ìÎâì = array(); foreach ($dÃ´”çœœì as $E≠™∑∆ËŸÎ) { goto f¿í‰øÑÓ’; f¿í‰øÑÓ’: unset($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[391]]); unset($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[390]]); unset($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[388]]); goto D£È’£µµÜ; B≤°Ì«Ö‹ã: $D‡€ï‚Éê® = count(explode($Eˆ⁄≈ã¢ìŒ[8], trim($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[479]], $Eˆ⁄≈ã¢ìŒ[8]))); $aÔ¬¶ìÎâì[] = $D‡€ï‚Éê® + ($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[29]] == $Eˆ⁄≈ã¢ìŒ[76] ? 0 : 1000); goto eòœ Üﬂ¢»; FãÇÂΩ·´®: $E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[2278]] = $this->authTargetInfo($B‡á—ÿª«Ë); $E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[479]] = rtrim($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[475]], $Eˆ⁄≈ã¢ìŒ[8]) . $Eˆ⁄≈ã¢ìŒ[8] . ltrim($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[479]], $Eˆ⁄≈ã¢ìŒ[8]); $a—∏øÆçÛÚ[] = $E≠™∑∆ËŸÎ; goto B≤°Ì«Ö‹ã; D£È’£µµÜ: unset($E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[403]]); $B‡á—ÿª«Ë = $CáÊô–»¬[$E≠™∑∆ËŸÎ[$Eˆ⁄≈ã¢ìŒ[381]]]; if (!$B‡á—ÿª«Ë) { continue; } goto FãÇÂΩ·´®; eòœ Üﬂ¢»: } array_multisort($aÔ¬¶ìÎâì, SORT_ASC, $a—∏øÆçÛÚ); goto C≤Ï˘î¨È¡; DÉ–ÃÍ˜ÓÎ: $fÌ€¡≤ÿøÇ = $this->field($b∑êû¯‡◊ô)->where(array($Eˆ⁄≈ã¢ìŒ[381] => array($Eˆ⁄≈ã¢ìŒ[7], $A°÷ñØ™Ÿ…)))->select(); $CáÊô–»¬ = array_to_keyvalue_group($fÌ€¡≤ÿøÇ, $Eˆ⁄≈ã¢ìŒ[381]); $a—∏øÆçÛÚ = array(); goto fî∫Ï“·÷; c›È‰ë¢ä“: } private function groupChidldAllRootSource($e• ÷ë ±ï) { $E®ãó⁄Æ∏ı =& $_SERVER[áí∂¯Â¸Áò]; $E©∏Üì≤•ä = Model($E®ãó⁄Æ∏ı[2279])->groupChildrenAll($e• ÷ë ±ï); $eëπÊΩª∫É = array($E®ãó⁄Æ∏ı[474] => 0, $E®ãó⁄Æ∏ı[469] => array($E®ãó⁄Æ∏ı[7], $E©∏Üì≤•ä), $E®ãó⁄Æ∏ı[383] => SourceModel::TYPE_GROUP); $CâúÀ‘î§ƒ = Model($E®ãó⁄Æ∏ı[758])->field($E®ãó⁄Æ∏ı[381])->where($eëπÊΩª∫É)->select(); $CâúÀ‘î§ƒ = array_to_keyvalue($CâúÀ‘î§ƒ, $E®ãó⁄Æ∏ı[33], $E®ãó⁄Æ∏ı[381]); return $CâúÀ‘î§ƒ; } private function authTargetInfo($E¶°»óÇ∂·) { goto B˘∑Ê–¢–—; A¯Î∑ﬂáèè: return $aÛ “¨úç ; goto f∆¿ûø©«Ù; B˘∑Ê–¢–—: $d—√˜éÜ‡ß =& $_SERVER[áí∂¯Â¸Áò]; $aÛ “¨úç  = array(); $aÑóÁ‚áò∫ = array(); goto b§Ÿºô¬Ì€; b§Ÿºô¬Ì€: $fÌßâÑ…º¨ = 2 << 25; foreach ($E¶°»óÇ∂· as $AıÃæùŸ∫¥) { goto cò≈¯ûëı∂; cò≈¯ûëı∂: $CË£ç≠Ò›ƒ = Model($d—√˜éÜ‡ß[2275])->listData($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[2256]]); if (!$CË£ç≠Ò›ƒ) { continue; } if ($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[383]] == SourceModel::TYPE_USER) { $C“Õæ≠ùè¨ = Model($d—√˜éÜ‡ß[487])->getInfoSimpleOuter($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[469]]); if ($C“Õæ≠ùè¨[$d—√˜éÜ‡ß[1443]] == $d—√˜éÜ‡ß[1039]) { continue; } if ($C“Õæ≠ùè¨[$d—√˜éÜ‡ß[1443]] == $d—√˜éÜ‡ß[481]) { $C“Õæ≠ùè¨[$d—√˜éÜ‡ß[28]] = LNG($d—√˜éÜ‡ß[2280]); } } else { $C“Õæ≠ùè¨ = Model($d—√˜éÜ‡ß[471])->getInfoSimple($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[469]]); } goto eø›ëÙªÒæ; d≤êú≥§–∏: $D¯¶àâàíí = 0; if ($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[383]] == SourceModel::TYPE_GROUP) { $D¯¶àâàíí = $fÌßâÑ…º¨ * 2; } if ($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[383]] == SourceModel::TYPE_USER) { $D¯¶àâàíí = $fÌßâÑ…º¨; } goto DŒºÔÏ¬≤ı; eø›ëÙªÒæ: if (!$C“Õæ≠ùè¨) { continue; } $C“Õæ≠ùè¨[$d—√˜éÜ‡ß[430]] = $CË£ç≠Ò›ƒ; $aÛ “¨úç [] = $C“Õæ≠ùè¨; goto d≤êú≥§–∏; DŒºÔÏ¬≤ı: if ($AıÃæùŸ∫¥[$d—√˜éÜ‡ß[383]] == SourceModel::TYPE_USER && $AıÃæùŸ∫¥[$d—√˜éÜ‡ß[469]] == $d—√˜éÜ‡ß[481]) { $D¯¶àâàíí = 0; } $aÑóÁ‚áò∫[] = $CË£ç≠Ò›ƒ[$d—√˜éÜ‡ß[388]] + $D¯¶àâàíí; goto Dú…‡Ù©Û√; Dú…‡Ù©Û√: } array_multisort($aÑóÁ‚áò∫, SORT_DESC, $aÛ “¨úç ); goto A¯Î∑ﬂáèè; f∆¿ûø©«Ù: } public function getAllChildrenByUser($E‚æ˘˘∞êî, $bê◊ä≤§∏ã) { goto F•–ì…È‹Æ; F•–ì…È‹Æ: $A”‰÷†ù¢¯ =& $_SERVER[áí∂¯Â¸Áò]; $f–¨≤ä©û÷ = Model($A”‰÷†ù¢¯[490])->getInfo($bê◊ä≤§∏ã); if (!$bê◊ä≤§∏ã || !$E‚æ˘˘∞êî || !$f–¨≤ä©û÷) { return array(); } goto Bƒáß£Õ€à; eÑ„‘’≥Ω†: if ($B¨ûÜî≤‡ﬂ[$A”‰÷†ù¢¯[474]] == $A”‰÷†ù¢¯[481] && $B¨ûÜî≤‡ﬂ[$A”‰÷†ù¢¯[469]] != $Dçø∏çáÚÑ && $this->groupContainUser($B¨ûÜî≤‡ﬂ[$A”‰÷†ù¢¯[469]], $bê◊ä≤§∏ã)) { foreach ($f–¨≤ä©û÷[$A”‰÷†ù¢¯[2281]] as $Aî»ôê´®Ø) { $dÑ°‘áÉ≠‹ = Model($A”‰÷†ù¢¯[471])->getInfo($Aî»ôê´®Ø[$A”‰÷†ù¢¯[2112]]); $cßó¬’ò∑ = Model($A”‰÷†ù¢¯[490])->getInfoSimpleOuter($bê◊ä≤§∏ã); $cßó¬’ò∑[$A”‰÷†ù¢¯[430]] = $Aî»ôê´®Ø[$A”‰÷†ù¢¯[388]]; if (Model($A”‰÷†ù¢¯[2275])->authCheckAction($Aî»ôê´®Ø[$A”‰÷†ù¢¯[388]][$A”‰÷†ù¢¯[388]], $A”‰÷†ù¢¯[1567])) { continue; } $b±Éö®¶≥ï = array($A”‰÷†ù¢¯[28] => $A”‰÷†ù¢¯[1396] . $dÑ°‘áÉ≠‹[$A”‰÷†ù¢¯[28]], $A”‰÷†ù¢¯[381] => $dÑ°‘áÉ≠‹[$A”‰÷†ù¢¯[403]][$A”‰÷†ù¢¯[381]], $A”‰÷†ù¢¯[75] => KodIO::make($dÑ°‘áÉ≠‹[$A”‰÷†ù¢¯[403]][$A”‰÷†ù¢¯[381]]), $A”‰÷†ù¢¯[474] => $A”‰÷†ù¢¯[481], $A”‰÷†ù¢¯[383] => $A”‰÷†ù¢¯[974], $A”‰÷†ù¢¯[29] => $A”‰÷†ù¢¯[501], $A”‰÷†ù¢¯[479] => $dÑ°‘áÉ≠‹[$A”‰÷†ù¢¯[476]], $A”‰÷†ù¢¯[2112] => $dÑ°‘áÉ≠‹[$A”‰÷†ù¢¯[2112]], $A”‰÷†ù¢¯[473] => $dÑ°‘áÉ≠‹[$A”‰÷†ù¢¯[474]], $A”‰÷†ù¢¯[2278] => array($cßó¬’ò∑)); $eåÓ≤ñ‰ïÜ[$b±Éö®¶≥ï[$A”‰÷†ù¢¯[381]]] = $b±Éö®¶≥ï; } } $cÓ°ëãÑƒß = array(); $D†“Èî”è = $this->getAllChildren($E‚æ˘˘∞êî); goto e∏êÓ∆ˆÇœ; Bƒáß£Õ€à: $B¨ûÜî≤‡ﬂ = Model($A”‰÷†ù¢¯[1124])->sourceInfo($E‚æ˘˘∞êî); $eåÓ≤ñ‰ïÜ = array(); $Dçø∏çáÚÑ = 1; goto eÑ„‘’≥Ω†; e∏êÓ∆ˆÇœ: foreach ($D†“Èî”è as $eåøœ ‹®â) { $AË•ÀØ¯œ∏ = !1; foreach ($eåøœ ‹®â[$A”‰÷†ù¢¯[2278]] as $a€≈ﬁËÃ‹∫) { if ($a€≈ﬁËÃ‹∫[$A”‰÷†ù¢¯[1443]]) { if ($a€≈ﬁËÃ‹∫[$A”‰÷†ù¢¯[1443]] == $bê◊ä≤§∏ã) { $AË•ÀØ¯œ∏ = !0; break; } } if ($a€≈ﬁËÃ‹∫[$A”‰÷†ù¢¯[2112]]) { if ($this->groupContainUser($a€≈ﬁËÃ‹∫[$A”‰÷†ù¢¯[2112]], $bê◊ä≤§∏ã)) { $AË•ÀØ¯œ∏ = !0; break; } } } if ($AË•ÀØ¯œ∏) { $cÓ°ëãÑƒß[] = $eåøœ ‹®â; } $D ‘≥˜‚Áƒ = $eåøœ ‹®â[$A”‰÷†ù¢¯[381]]; if (isset($eåÓ≤ñ‰ïÜ[$D ‘≥˜‚Áƒ])) { $eåøœ ‹®â[$A”‰÷†ù¢¯[2278]][] = $eåÓ≤ñ‰ïÜ[$D ‘≥˜‚Áƒ][0]; $eåÓ≤ñ‰ïÜ[$D ‘≥˜‚Áƒ] = !1; } } $eåÓ≤ñ‰ïÜ = array_filter(array_values($eåÓ≤ñ‰ïÜ)); $cÓ°ëãÑƒß = array_merge($eåÓ≤ñ‰ïÜ, $cÓ°ëãÑƒß); goto c•˜ÙóÛúı; c•˜ÙóÛúı: return $cÓ°ëãÑƒß; goto CöÜ«⁄”∑Ÿ; CöÜ«⁄”∑Ÿ: } public function setAllChildrenByUser($dıøë√≠ë≥, $bÊ°ø£ˆ™‘, $båØ˘Á÷÷Â) { $Bõ´‡Îé   =& $_SERVER[áí∂¯Â¸Áò]; $CßÉäÌ¬≤‹ = $this->getAllChildrenByUser($dıøë√≠ë≥, $bÊ°ø£ˆ™‘); if (!$båØ˘Á÷÷Â || !$CßÉäÌ¬≤‹) { return !1; } foreach ($CßÉäÌ¬≤‹ as $A”…ÏîÒÜ‰) { $Bâ∂ò‰Âçè = array(); foreach ($A”…ÏîÒÜ‰[$Bõ´‡Îé  [2278]] as $EüèåªåùÌ) { $Dµö”¢∞£ = $EüèåªåùÌ[$Bõ´‡Îé  [430]]; $c≥óœä…¬≤ = $EüèåªåùÌ[$Bõ´‡Îé  [1443]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $aÙœÃÁÌ› = $EüèåªåùÌ[$Bõ´‡Îé  [1443]] ? $EüèåªåùÌ[$Bõ´‡Îé  [1443]] : $EüèåªåùÌ[$Bõ´‡Îé  [2112]]; if ($EüèåªåùÌ[$Bõ´‡Îé  [1443]] && $EüèåªåùÌ[$Bõ´‡Îé  [1443]] == $bÊ°ø£ˆ™‘) { continue; } $Bâ∂ò‰Âçè[] = array($Bõ´‡Îé  [381] => $A”…ÏîÒÜ‰[$Bõ´‡Îé  [381]], $Bõ´‡Îé  [383] => $c≥óœä…¬≤, $Bõ´‡Îé  [469] => intval($aÙœÃÁÌ›), $Bõ´‡Îé  [2256] => isset($Dµö”¢∞£[$Bõ´‡Îé  [371]]) ? intval($Dµö”¢∞£[$Bõ´‡Îé  [371]]) : 0, $Bõ´‡Îé  [2257] => isset($Dµö”¢∞£[$Bõ´‡Îé  [2257]]) ? intval($Dµö”¢∞£[$Bõ´‡Îé  [2257]]) : -1); } $Bâ∂ò‰Âçè[] = array($Bõ´‡Îé  [381] => $A”…ÏîÒÜ‰[$Bõ´‡Îé  [381]], $Bõ´‡Îé  [383] => SourceModel::TYPE_USER, $Bõ´‡Îé  [469] => intval($bÊ°ø£ˆ™‘), $Bõ´‡Îé  [2256] => intval($båØ˘Á÷÷Â), $Bõ´‡Îé  [2257] => -1); $this->where(array($Bõ´‡Îé  [395] => $A”…ÏîÒÜ‰[$Bõ´‡Îé  [381]]))->delete(); $this->addAll($Bâ∂ò‰Âçè); } return !0; } public function get($dì›Œ¶ûöÂ) { $Aãòƒñîçë = $this->getSourceList(array($dì›Œ¶ûöÂ), !0); return $Aãòƒñîçë[0]; } public function getSourceList($D…âµ÷ÂÌ©, $b£√¬ü¯ã‰ = false, $EµæüÙ”óî = false) { goto e£Û‹Ñ∫‡˘; e£Û‹Ñ∫‡˘: $EûÑﬂ±Ç£Ö =& $_SERVER[áí∂¯Â¸Áò]; if (!$D…âµ÷ÂÌ©) { return array(); } $cû∑ÊπÑ›Ã = Model($EûÑﬂ±Ç£Ö[1124]); goto d÷ìÉÍÕ£≤; C›À£°êçä: $aã∑ªÑìõ = array(); foreach ($b£√¬ü¯ã‰ as $c—î’Ë¶ª— => $eœ–ãÈÔç ) { if ($eˆÒ´‚Ññä) { $aã∑ªÑìõ[$c—î’Ë¶ª—] = $eÂîñù≤è◊; continue; } $aã∑ªÑìõ[$c—î’Ë¶ª—] = $this->makeSourceAuth($eœ–ãÈÔç , $C·›ìéŒΩè, $EµæüÙ”óî); } return $aã∑ªÑìõ; goto F…«Ë´°Î; a¡ì©º…ûó: foreach ($b£√¬ü¯ã‰ as $A·òÈ©ÜàÎ => $Aè‹ı¬ö…¯) { $Cü∞∆·∫Çó = $cû∑ÊπÑ›Ã->parentLevelArray($Aè‹ı¬ö…¯[$EûÑﬂ±Ç£Ö[472]]); $b›Ú∞¬Ñâú = array_merge($b›Ú∞¬Ñâú, array($A·òÈ©ÜàÎ), array_reverse($Cü∞∆·∫Çó)); } $b›Ú∞¬Ñâú = array_values(array_unique($b›Ú∞¬Ñâú)); if (!$b›Ú∞¬Ñâú) { return array(); } goto b£Òï“‰ìÛ; bô≈˜èÉí∫: $eˆÒ´‚Ññä = $this->userIsRoot($EµæüÙ”óî); $Fπ√…ñ»∫µ = AuthModel::authAll(); $eÂîñù≤è◊ = array($EûÑﬂ±Ç£Ö[389] => $Fπ√…ñ»∫µ, $EûÑﬂ±Ç£Ö[2284] => array($EûÑﬂ±Ç£Ö[397] => 0, $EûÑﬂ±Ç£Ö[2118] => $Fπ√…ñ»∫µ, $EûÑﬂ±Ç£Ö[398] => LNG($EûÑﬂ±Ç£Ö[2285]), $EûÑﬂ±Ç£Ö[2132] => $EûÑﬂ±Ç£Ö[2286])); goto C›À£°êçä; d÷ìÉÍÕ£≤: if (!$b£√¬ü¯ã‰ && count($D…âµ÷ÂÌ©) == 1) { $b£√¬ü¯ã‰ = array(); $b£√¬ü¯ã‰[$D…âµ÷ÂÌ©[0]] = $cû∑ÊπÑ›Ã->sourceInfo($D…âµ÷ÂÌ©[0]); } if (!$b£√¬ü¯ã‰) { $d∆î©ò÷øÁ = array($EûÑﬂ±Ç£Ö[395] => array($EûÑﬂ±Ç£Ö[396], $D…âµ÷ÂÌ©)); $b£√¬ü¯ã‰ = $cû∑ÊπÑ›Ã->field($EûÑﬂ±Ç£Ö[2282])->where($d∆î©ò÷øÁ)->select(); $b£√¬ü¯ã‰ = array_to_keyvalue($b£√¬ü¯ã‰, $EûÑﬂ±Ç£Ö[381]); } $b›Ú∞¬Ñâú = $D…âµ÷ÂÌ©; goto a¡ì©º…ûó; a ê≤≥° Ö: $Eà©é¿°Ûé = array_to_keyvalue_group($Eà©é¿°Ûé, $EûÑﬂ±Ç£Ö[381]); $C·›ìéŒΩè = array(); foreach ($b›Ú∞¬Ñâú as $c—î’Ë¶ª—) { if (isset($Eà©é¿°Ûé[$c—î’Ë¶ª—])) { $C·›ìéŒΩè[$c—î’Ë¶ª—] = $Eà©é¿°Ûé[$c—î’Ë¶ª—]; } } goto bô≈˜èÉí∫; b£Òï“‰ìÛ: $d”Àêåï…¢ = $EûÑﬂ±Ç£Ö[2283]; $d∆î©ò÷øÁ = array($EûÑﬂ±Ç£Ö[395] => array($EûÑﬂ±Ç£Ö[396], $b›Ú∞¬Ñâú)); $Eà©é¿°Ûé = $this->field($d”Àêåï…¢)->where($d∆î©ò÷øÁ)->select(); goto a ê≤≥° Ö; F…«Ë´°Î: } public function authDeepCheck($A—Ωîè’Ûô, $C§ÆõçìÍÉ = false) { goto d«ÿ”ëå∞Ü; d«ÿ”ëå∞Ü: $C¯ññΩé•û =& $_SERVER[áí∂¯Â¸Áò]; $C§ÆõçìÍÉ = $C§ÆõçìÍÉ ? $C§ÆõçìÍÉ : USER_ID; $Bè·Ñ‰∞πß = $this->makeAuthDeep($C§ÆõçìÍÉ); goto bê¿˘ë“⁄ÿ; bê¿˘ë“⁄ÿ: if (!in_array($A—Ωîè’Ûô, $Bè·Ñ‰∞πß[$C¯ññΩé•û[2287]])) { return !1; } $e≠èñ¥¡á± = array(); foreach ($Bè·Ñ‰∞πß[$C¯ññΩé•û[2288]] as $Dâá÷¯ÙŸ‹ => $eËáôŒ¶Ìª) { if (!in_array($A—Ωîè’Ûô, $eËáôŒ¶Ìª)) { continue; } $e≠èñ¥¡á±[] = $Dâá÷¯ÙŸ‹; } goto a˘≠§ü‹∏Æ; a˘≠§ü‹∏Æ: $Cçë·Ê—®ö = $e≠èñ¥¡á± ? $e≠èñ¥¡á±[0] : $A—Ωîè’Ûô; return array($C¯ññΩé•û[389] => -1, $C¯ññΩé•û[430] => array($C¯ññΩé•û[397] => $C¯ññΩé•û[1039], $C¯ññΩé•û[2118] => $C¯ññΩé•û[481], $C¯ññΩé•û[398] => LNG($C¯ññΩé•û[2289]), $C¯ññΩé•û[2132] => $C¯ññΩé•û[2290]), $C¯ññΩé•û[2291] => LNG($C¯ññΩé•û[2292]), $C¯ññΩé•û[2293] => $this->sourceAuthInfo($Cçë·Ê—®ö)); goto f‰‡≤–∂é—; f‰‡≤–∂é—: } protected function makeAuthDeep($cœÑÙí¬”„ = false) { goto cµêªã†”Ê; aõ∑°ûàŒ˘: $Bá≤Í§„çÊ = array_to_keyvalue($fØ»ı®·à¿, $F≥˜äÉ“ñû[33], $F≥˜äÉ“ñû[381]); $e”üÖÿÒê„ = array(); $cºœÂºÿä© = $bÍ⁄•àÏ; goto AÈØ⁄”ØË≤; b¿‚∏“¡â™: foreach ($aèÖ ﬁÔ–ƒ as $B·ıÀ¬æ√à => $D‚¥ı£Ï è) { $D≈‚»èó‡ã = $F‘‚˜é ‚∞[$B·ıÀ¬æ√à]; if (!$D≈‚»èó‡ã || !$A¡Ø–êÔø„[$D≈‚»èó‡ã]) { continue; } $Cáå´ê›‹√ = array(); foreach ($cÚó®´™Öï[$D≈‚»èó‡ã] as $DÇ‰Ç¶§À) { $Cáå´ê›‹√[] = $A¡Ø–êÔø„[$DÇ‰Ç¶§À]; } $aèÖ ﬁÔ–ƒ[$B·ıÀ¬æ√à] = array_merge($Cáå´ê›‹√, $D‚¥ı£Ï è); } $e”üÖÿÒê„ = array_values(array_unique($e”üÖÿÒê„)); $aø¥‘•‘∫ä = array($F≥˜äÉ“ñû[2287] => $e”üÖÿÒê„, $F≥˜äÉ“ñû[2288] => $aèÖ ﬁÔ–ƒ); goto eäåÍõ¨è”; cµêªã†”Ê: $F≥˜äÉ“ñû =& $_SERVER[áí∂¯Â¸Áò]; static $Aû√êÍ‚ãº = array(); $cœÑÙí¬”„ = $cœÑÙí¬”„ ? $cœÑÙí¬”„ : USER_ID; goto a„Ÿå ƒ°≈; eâò≈µöÖ˘: if ($Bá≤Í§„çÊ) { $B•‹ﬂ’Úö≠ = $Dÿ¢ßÛøæ≈->where(array($F≥˜äÉ“ñû[381] => array($F≥˜äÉ“ñû[396], $Bá≤Í§„çÊ)))->select(); foreach ($B•‹ﬂ’Úö≠ as $eú÷∫‡Ê„ì) { $aµ¢Õ’€ªÖ = $Dÿ¢ßÛøæ≈->parentLevelArray($eú÷∫‡Ê„ì[$F≥˜äÉ“ñû[472]]); $e”üÖÿÒê„ = array_merge($e”üÖÿÒê„, $aµ¢Õ’€ªÖ); $cºœÂºÿä©[] = $eú÷∫‡Ê„ì[$F≥˜äÉ“ñû[469]]; $aèÖ ﬁÔ–ƒ[$eú÷∫‡Ê„ì[$F≥˜äÉ“ñû[381]]] = $aµ¢Õ’€ªÖ; $F‘‚˜é ‚∞[$eú÷∫‡Ê„ì[$F≥˜äÉ“ñû[381]]] = $eú÷∫‡Ê„ì[$F≥˜äÉ“ñû[469]]; } } $cºœÂºÿä© = array_values(array_unique($cºœÂºÿä©)); $E‡ëå°Ã∑Ö = $cºœÂºÿä©; goto e∫Ωßø›¿¥; AÈØ⁄”ØË≤: $Dÿ¢ßÛøæ≈ = Model($F≥˜äÉ“ñû[1124]); $DõÇ‘¢∞≠Ô = Model($F≥˜äÉ“ñû[471]); $aèÖ ﬁÔ–ƒ = array(); goto AÂ¶Â∞±∆Æ; eäåÍõ¨è”: $Aû√êÍ‚ãº[$cœÑÙí¬”„] = $aø¥‘•‘∫ä; return $aø¥‘•‘∫ä; goto Cëï÷Ã®’ç; e≥¶œëœµù: foreach ($Eıô…ª¶Ü° as $B≥àóìò‘›) { if ($B≥àóìò‘›[$F≥˜äÉ“ñû[388]] == 0 && $B≥àóìò‘›[$F≥˜äÉ“ñû[2133]] == $F≥˜äÉ“ñû[83]) { $c¬Æâ“‚ÿó[] = $B≥àóìò‘›[$F≥˜äÉ“ñû[371]]; } } $bÍ⁄•àÏ = $this->userGroupParents($cœÑÙí¬”„); $a¨ ÷˜º†° = array($F≥˜äÉ“ñû[383] => SourceModel::TYPE_USER, $F≥˜äÉ“ñû[469] => $cœÑÙí¬”„); goto cßƒêíòŒÜ; a„Ÿå ƒ°≈: if (isset($Aû√êÍ‚ãº[$cœÑÙí¬”„])) { return $Aû√êÍ‚ãº[$cœÑÙí¬”„]; } $Eıô…ª¶Ü° = Model($F≥˜äÉ“ñû[2294])->listData(); $c¬Æâ“‚ÿó = array(); goto e≥¶œëœµù; e∫Ωßø›¿¥: foreach ($E‡ëå°Ã∑Ö as $DÇ‰Ç¶§À) { $F≠¡ÿŒ√≈„ = $DõÇ‘¢∞≠Ô->getInfo($DÇ‰Ç¶§À); $aµ¢Õ’€ªÖ = $Dÿ¢ßÛøæ≈->parentLevelArray($F≠¡ÿŒ√≈„[$F≥˜äÉ“ñû[472]]); $cºœÂºÿä© = array_merge($cºœÂºÿä©, $aµ¢Õ’€ªÖ); } $cºœÂºÿä© = array_values(array_unique($cºœÂºÿä©)); foreach ($cºœÂºÿä© as $DÇ‰Ç¶§À) { $F≠¡ÿŒ√≈„ = $DõÇ‘¢∞≠Ô->getInfo($DÇ‰Ç¶§À); $e”üÖÿÒê„[] = $F≠¡ÿŒ√≈„[$F≥˜äÉ“ñû[403]][$F≥˜äÉ“ñû[381]]; $A¡Ø–êÔø„[$DÇ‰Ç¶§À] = $F≠¡ÿŒ√≈„[$F≥˜äÉ“ñû[403]][$F≥˜äÉ“ñû[381]]; $cÚó®´™Öï[$DÇ‰Ç¶§À] = $Dÿ¢ßÛøæ≈->parentLevelArray($F≠¡ÿŒ√≈„[$F≥˜äÉ“ñû[472]]); } goto b¿‚∏“¡â™; AÂ¶Â∞±∆Æ: $F‘‚˜é ‚∞ = array(); $A¡Ø–êÔø„ = array(); $cÚó®´™Öï = array(); goto eâò≈µöÖ˘; cßƒêíòŒÜ: if ($bÍ⁄•àÏ) { $a¨ ÷˜º†° = array(array($F≥˜äÉ“ñû[383] => SourceModel::TYPE_USER, $F≥˜äÉ“ñû[469] => $cœÑÙí¬”„), array($F≥˜äÉ“ñû[383] => SourceModel::TYPE_GROUP, $F≥˜äÉ“ñû[469] => array($F≥˜äÉ“ñû[396], $bÍ⁄•àÏ)), $F≥˜äÉ“ñû[917] => $F≥˜äÉ“ñû[2197]); } if ($c¬Æâ“‚ÿó) { $a¨ ÷˜º†° = array($a¨ ÷˜º†°, $F≥˜äÉ“ñû[2256] => array($F≥˜äÉ“ñû[2295], $c¬Æâ“‚ÿó)); } $fØ»ı®·à¿ = $this->field($F≥˜äÉ“ñû[2296])->where($a¨ ÷˜º†°)->select(); goto aõ∑°ûàŒ˘; Cëï÷Ã®’ç: } private function makeSourceAuth($C¨ﬂ÷Œø‡Ì, $F©äç¿ßõì, $aÔÑõΩª€ù = false) { goto b∏±éÑø†ê; c⁄Ÿ‚ı†µÑ: foreach ($Aë◊∫ÜàÃ™ as $BùÕÇº†åü) { if (!isset($F©äç¿ßõì[$BùÕÇº†åü])) { continue; } $cÇé≥„–ëﬂ = $this->authMake($F©äç¿ßõì[$BùÕÇº†åü], $aÔÑõΩª€ù); if ($cÇé≥„–ëﬂ[$D€ÉÿàÊëÀ[430]]) { $aùÔ√ãâ§ƒ = $cÇé≥„–ëﬂ; break; } } if (!$c§í”ﬂæ∂≠) { return $aùÔ√ãâ§ƒ; } if (!$aùÔ√ãâ§ƒ && $f‰Ü≠’’üû) { $aùÔ√ãâ§ƒ = $this->groupAuthInfo($f‰Ü≠’’üû, $cøß∑Çí–Ê); } goto eˆ∞ﬁÀùµ‡; Fé∑≠ã´º¿: $Aë◊∫ÜàÃ™ = Model($D€ÉÿàÊëÀ[1124])->parentLevelArray($C¨ﬂ÷Œø‡Ì[$D€ÉÿàÊëÀ[472]]); $Aë◊∫ÜàÃ™ = array_merge(array($C¨ﬂ÷Œø‡Ì[$D€ÉÿàÊëÀ[381]]), array_reverse($Aë◊∫ÜàÃ™)); $aùÔ√ãâ§ƒ = !1; goto c⁄Ÿ‚ı†µÑ; B„ŸøÎ˜ Ÿ: $c§í”ﬂæ∂≠ = $C¨ﬂ÷Œø‡Ì[$D€ÉÿàÊëÀ[383]] == SourceModel::TYPE_GROUP; $f‰Ü≠’’üû = $c§í”ﬂæ∂≠ ? $this->groupRootAuth($cøß∑Çí–Ê, $aÔÑõΩª€ù) : !1; if ($f‰Ü≠’’üû && Model($D€ÉÿàÊëÀ[2275])->authCheckAction($f‰Ü≠’’üû[$D€ÉÿàÊëÀ[388]], $D€ÉÿàÊëÀ[1567])) { return $this->groupAuthInfo($f‰Ü≠’’üû, $cøß∑Çí–Ê); } goto Fé∑≠ã´º¿; eˆ∞ﬁÀùµ‡: if (!$aùÔ√ãâ§ƒ) { $E˜Ù—ﬁΩÿå = Model($D€ÉÿàÊëÀ[471])->getInfo($cøß∑Çí–Ê); $f‚ÉîÂ◊Àª = explode($D€ÉÿàÊëÀ[47], trim($E˜Ù—ﬁΩÿå[$D€ÉÿàÊëÀ[472]], $D€ÉÿàÊëÀ[47])); foreach ($f‚ÉîÂ◊Àª as $A®πèƒû˜”) { if ($A®πèƒû˜” == $D€ÉÿàÊëÀ[481] || $A®πèƒû˜” == $dà†ÀÏ”ÁΩ) { continue; } $D˜•÷⁄Áßö = $this->groupRootAuth($A®πèƒû˜”, $aÔÑõΩª€ù); if (!$D˜•÷⁄Áßö) { continue; } $aùÔ√ãâ§ƒ = $this->groupAuthInfo($D˜•÷⁄Áßö, $A®πèƒû˜”); break; } } if (!$aùÔ√ãâ§ƒ || $aùÔ√ãâ§ƒ[$D€ÉÿàÊëÀ[389]] <= 0) { $Dé∑≤úó™ñ = $this->authDeepCheck($C¨ﬂ÷Œø‡Ì[$D€ÉÿàÊëÀ[381]], $aÔÑõΩª€ù); if ($Dé∑≤úó™ñ) { $aùÔ√ãâ§ƒ = $Dé∑≤úó™ñ; } } return $aùÔ√ãâ§ƒ; goto BãöÔ≥èæ”; b∏±éÑø†ê: $D€ÉÿàÊëÀ =& $_SERVER[áí∂¯Â¸Áò]; $dà†ÀÏ”ÁΩ = $D€ÉÿàÊëÀ[83]; $cøß∑Çí–Ê = $C¨ﬂ÷Œø‡Ì[$D€ÉÿàÊëÀ[469]]; goto B„ŸøÎ˜ Ÿ; BãöÔ≥èæ”: } private function userIsRoot($eî‰Ó‹èÑ¢ = false) { $DÙ¿äî∏∫‡ =& $_SERVER[áí∂¯Â¸Áò]; if (!$eî‰Ó‹èÑ¢ && _get($GLOBALS, $DÙ¿äî∏∫‡[470])) { return !0; } $C®Ú¬˜«ë“ = Model($DÙ¿äî∏∫‡[490])->getInfo($eî‰Ó‹èÑ¢); $e·Á®∑û§ò = Model($DÙ¿äî∏∫‡[2297])->listData($C®Ú¬˜«ë“[$DÙ¿äî∏∫‡[1327]]); if ($e·Á®∑û§ò && $e·Á®∑û§ò[$DÙ¿äî∏∫‡[1199]][$DÙ¿äî∏∫‡[2298]] == 1) { return !0; } return !1; } private function sourceAuthInfo($aÍ®ó∂∂ÈÊ) { goto f»¥áˆ˘π‡; Bå¬ûÜπ‡´: if (isset($f±çÃ∂∫ˆî[$e§⁄‘∂Ω™á[477]])) { $dÜ¯ûå∆⁄ë = explode($e§⁄‘∂Ω™á[8], trim($f±çÃ∂∫ˆî[$e§⁄‘∂Ω™á[479]], $e§⁄‘∂Ω™á[8])); array_shift($dÜ¯ûå∆⁄ë); $cÿª«ï∑Öè = $f±çÃ∂∫ˆî[$e§⁄‘∂Ω™á[475]] . $e§⁄‘∂Ω™á[2299] . implode($e§⁄‘∂Ω™á[8], $dÜ¯ûå∆⁄ë); } return array($e§⁄‘∂Ω™á[398] => $f±çÃ∂∫ˆî[$e§⁄‘∂Ω™á[28]], $e§⁄‘∂Ω™á[75] => KodIO::make($f±çÃ∂∫ˆî[$e§⁄‘∂Ω™á[381]]), $e§⁄‘∂Ω™á[2300] => $cÿª«ï∑Öè); goto C˜£ñÎÌÕı; c¥ê˜Ù¯√∑: if (!$f±çÃ∂∫ˆî) { return !1; } $càÒ¬∞çñÌ->groupPathDisplay($f±çÃ∂∫ˆî); $eªÎ∞ô‡¯ë = array($f±çÃ∂∫ˆî); goto aΩπö÷É‡¥; f»¥áˆ˘π‡: $e§⁄‘∂Ω™á =& $_SERVER[áí∂¯Â¸Áò]; $càÒ¬∞çñÌ = Model($e§⁄‘∂Ω™á[1124]); $f±çÃ∂∫ˆî = $càÒ¬∞çñÌ->sourceInfo($aÍ®ó∂∂ÈÊ); goto c¥ê˜Ù¯√∑; aΩπö÷É‡¥: $eªÎ∞ô‡¯ë = $càÒ¬∞çñÌ->_listAppendPath($eªÎ∞ô‡¯ë); $f±çÃ∂∫ˆî = $eªÎ∞ô‡¯ë[0]; $cÿª«ï∑Öè = $f±çÃ∂∫ˆî[$e§⁄‘∂Ω™á[479]]; goto Bå¬ûÜπ‡´; C˜£ñÎÌÕı: } private function groupAuthInfo($Aã≠Ìı–Òﬂ, $fÜ¬€áﬂÊÇ) { $CÆùÌøöÒ‡ =& $_SERVER[áí∂¯Â¸Áò]; $dî”ˆäÌ›Õ = Model($CÆùÌøöÒ‡[471])->getInfo($fÜ¬€áﬂÊÇ); return array($CÆùÌøöÒ‡[2301] => intval($Aã≠Ìı–Òﬂ[$CÆùÌøöÒ‡[388]]), $CÆùÌøöÒ‡[2284] => $Aã≠Ìı–Òﬂ, $CÆùÌøöÒ‡[2302] => LNG($CÆùÌøöÒ‡[2303]), $CÆùÌøöÒ‡[2293] => array($CÆùÌøöÒ‡[398] => $dî”ˆäÌ›Õ[$CÆùÌøöÒ‡[28]], $CÆùÌøöÒ‡[75] => KodIO::make($dî”ˆäÌ›Õ[$CÆùÌøöÒ‡[403]][$CÆùÌøöÒ‡[381]]), $CÆùÌøöÒ‡[2300] => $dî”ˆäÌ›Õ[$CÆùÌøöÒ‡[476]])); } protected function groupRootAuth($DÊ£ÎÑ≈ƒ, $bπÉ‘‚£πî = false) { goto aÂùÉåﬂ◊ı; CÁªÙËÌöØ: $b‹™™»ä÷ê = $B«‘À∏¨ƒÈ ? $this->authMake($B«‘À∏¨ƒÈ, $bπÉ‘‚£πî) : !1; $bæôΩ–ÎòØ = $b‹™™»ä÷ê ? $b‹™™»ä÷ê[$E‰ÌòÔº∞∆[430]] : !1; $Aˆõ«∞ñå[$AÙ¢‚≠∑®∆] = $bæôΩ–ÎòØ ? $bæôΩ–ÎòØ : $E∫ ÜÛÑû«; goto Cçóáø‚Ê; Cçóáø‚Ê: return $Aˆõ«∞ñå[$AÙ¢‚≠∑®∆]; goto EÖûùæÈ€é; bääÆﬁÂÎ: $BÇÀÏÍÈââ = array($E‰ÌòÔº∞∆[381] => $C“ªË¯ÿéá[$E‰ÌòÔº∞∆[403]][$E‰ÌòÔº∞∆[381]]); $a±ÓŒô¥™≈ = $E‰ÌòÔº∞∆[2283]; $B«‘À∏¨ƒÈ = $this->field($a±ÓŒô¥™≈)->cacheMemory()->where($BÇÀÏÍÈââ)->select(); goto CÁªÙËÌöØ; d€“üåÌâÛ: $bœ‚¬å˘êΩ = $this->userGroupList($bπÉ‘‚£πî); $E∫ ÜÛÑû« = isset($bœ‚¬å˘êΩ[$DÊ£ÎÑ≈ƒ]) ? $bœ‚¬å˘êΩ[$DÊ£ÎÑ≈ƒ][$E‰ÌòÔº∞∆[388]] : !1; if ($E∫ ÜÛÑû« && Model($E‰ÌòÔº∞∆[2275])->authCheckAction($E∫ ÜÛÑû«[$E‰ÌòÔº∞∆[388]], $E‰ÌòÔº∞∆[1567])) { $Aˆõ«∞ñå[$AÙ¢‚≠∑®∆] = $E∫ ÜÛÑû«; return $E∫ ÜÛÑû«; } goto bääÆﬁÂÎ; aÂùÉåﬂ◊ı: $E‰ÌòÔº∞∆ =& $_SERVER[áí∂¯Â¸Áò]; $bπÉ‘‚£πî = $bπÉ‘‚£πî ? $bπÉ‘‚£πî : USER_ID; $AÙ¢‚≠∑®∆ = $bπÉ‘‚£πî . $E‰ÌòÔº∞∆[2304] . $DÊ£ÎÑ≈ƒ; goto e¯ãö¬–’ï; e¯ãö¬–’ï: static $Aˆõ«∞ñå = array(); if (isset($Aˆõ«∞ñå[$AÙ¢‚≠∑®∆])) { return $Aˆõ«∞ñå[$AÙ¢‚≠∑®∆]; } $C“ªË¯ÿéá = Model($E‰ÌòÔº∞∆[471])->getInfo($DÊ£ÎÑ≈ƒ); goto d€“üåÌâÛ; EÖûùæÈ€é: } public function authOwnerApply($c±ªÚÆ§ôÍ) { goto c·◊˜π£ä÷; C÷∫ÏöÜïê: $c±ªÚÆ§ôÍ[$eºä–•œñú[388]][$eºä–•œñú[2307]] = Model($eºä–•œñú[487])->userListInfo($c«ÑåÆÏªê); return $c±ªÚÆ§ôÍ; goto eºãåﬁ¡–À; cëÃÆöÏü: $CÙŸƒËÓÒÁ = Model($eºä–•œñú[1124])->parentLevelArray($c±ªÚÆ§ôÍ[$eºä–•œñú[472]]); $CÙŸƒËÓÒÁ = array_merge(array($c±ªÚÆ§ôÍ[$eºä–•œñú[381]]), array_reverse($CÙŸƒËÓÒÁ)); $CàÎô≈Öƒú = $eºä–•œñú[2283]; goto cÍÊÕ·Ω¨°; c·◊˜π£ä÷: $eºä–•œñú =& $_SERVER[áí∂¯Â¸Áò]; if (empty($c±ªÚÆ§ôÍ[$eºä–•œñú[388]]) || isset($c±ªÚÆ§ôÍ[$eºä–•œñú[2305]]) && $c±ªÚÆ§ôÍ[$eºä–•œñú[2305]]) { return $c±ªÚÆ§ôÍ; } if (AuthModel::authCheckRoot($c±ªÚÆ§ôÍ[$eºä–•œñú[388]][$eºä–•œñú[389]])) { return $c±ªÚÆ§ôÍ; } goto cëÃÆöÏü; cÍÊÕ·Ω¨°: $aÁ†ƒ·Ó‘ï = array($eºä–•œñú[395] => array($eºä–•œñú[396], $CÙŸƒËÓÒÁ)); $F∆êÑÁÒâŒ = $this->field($CàÎô≈Öƒú)->where($aÁ†ƒ·Ó‘ï)->select(); $F∆êÑÁÒâŒ = array_to_keyvalue_group($F∆êÑÁÒâŒ, $eºä–•œñú[381]); goto BÁìÚ‰ê◊É; BÁìÚ‰ê◊É: $A´ÚÓßÑ∑Û = array(); $c«ÑåÆÏªê = array(); foreach ($F∆êÑÁÒâŒ as $C≤—ªÿûë  => $Eã˘Ç˘ó¯é) { $c≥ñä’äà¨ = $this->authFolderOwnerUser($Eã˘Ç˘ó¯é); $A´ÚÓßÑ∑Û[$C≤—ªÿûë ] = $c≥ñä’äà¨; $c«ÑåÆÏªê = array_merge($c«ÑåÆÏªê, $c≥ñä’äà¨[$eºä–•œñú[547]]); if ($c≥ñä’äà¨[$eºä–•œñú[2306]]) { break; } } goto F·ÚˆπÒØµ; F·ÚˆπÒØµ: if (count($c«ÑåÆÏªê) == 0) { $c«ÑåÆÏªê = $this->authFolderOwnerGroup($c±ªÚÆ§ôÍ[$eºä–•œñú[469]]); } $c«ÑåÆÏªê = array_unique($c«ÑåÆÏªê); if (AuthModel::authCheckRoot($c±ªÚÆ§ôÍ[$eºä–•œñú[388]][$eºä–•œñú[389]])) { $c«ÑåÆÏªê[] = USER_ID; } goto C÷∫ÏöÜïê; eºãåﬁ¡–À: } private function authFolderOwnerGroup($Céã«ˆçπ¿) { $F‡–ùÜ∆º’ =& $_SERVER[áí∂¯Â¸Áò]; $fˆŒ›‡¶É€ = Model($F‡–ùÜ∆º’[2191])->where(array($F‡–ùÜ∆º’[2112] => $Céã«ˆçπ¿))->select(); $fØ—ß»ç†¶ = array(); if (!$fˆŒ›‡¶É€) { return $fØ—ß»ç†¶; } foreach ($fˆŒ›‡¶É€ as $FÀééÉÜæû) { $cÎ»Ò’’îÍ = $this->authInfo($FÀééÉÜæû); if (AuthModel::authCheckRoot($cÎ»Ò’’îÍ[$F‡–ùÜ∆º’[388]])) { $fØ—ß»ç†¶[] = $FÀééÉÜæû[$F‡–ùÜ∆º’[1443]]; } } return $fØ—ß»ç†¶; } private function authFolderOwnerUser($c‹ë≤ÛÀŒÜ) { $FÀ¢éç”Ï¢ =& $_SERVER[áí∂¯Â¸Áò]; $f’∞Âê∆”« = array(); $DßÚÖ∫è¿— = !1; foreach ($c‹ë≤ÛÀŒÜ as $Cöè’∞¢Öª) { $fªåàÜ€÷Û = $this->authInfo($Cöè’∞¢Öª); if ($Cöè’∞¢Öª[$FÀ¢éç”Ï¢[469]] == $FÀ¢éç”Ï¢[481]) { $DßÚÖ∫è¿— = !0; } if ($Cöè’∞¢Öª[$FÀ¢éç”Ï¢[383]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($fªåàÜ€÷Û[$FÀ¢éç”Ï¢[388]])) { $f’∞Âê∆”«[] = $Cöè’∞¢Öª[$FÀ¢éç”Ï¢[469]]; } } } return array($FÀ¢éç”Ï¢[547] => $f’∞Âê∆”«, $FÀ¢éç”Ï¢[2306] => $DßÚÖ∫è¿—); } public function authMake($b€—”÷¶∫Ñ, $bÑ◊Ê€∑ç = false) { goto FùÌ éú§ä; FùÌ éú§ä: $A•ı§äâùÜ =& $_SERVER[áí∂¯Â¸Áò]; if (!$b€—”÷¶∫Ñ) { return array($A•ı§äâùÜ[389] => 0, $A•ı§äâùÜ[430] => !1); } $bÑ◊Ê€∑ç = $bÑ◊Ê€∑ç ? $bÑ◊Ê€∑ç : USER_ID; goto Eÿ¨â⁄‡∞Ò; Eÿ¨â⁄‡∞Ò: $fÕÊÃ≈õŒÂ = 0; $a§Ê‰Æíÿì = 0; $eè©±–Ù“ì = 0; goto eàÇÙ÷∞ü; c·¶æªàúÒ: $C∂¯ç¥ø≠∂ = 1000; $aºÉÃ≠í‰Ò = 0; $e—∂ßïÚ‚· = 0; goto d ÕÃãáÖª; c¨≈¥˜Ñ√ˆ: foreach ($b€—”÷¶∫Ñ as $D≤ÇΩ£Í˘∏) { $bÑ≠ìÙπÀ = $this->authInfo($D≤ÇΩ£Í˘∏); $d’ëê¿í‹ﬂ = $D≤ÇΩ£Í˘∏[$A•ı§äâùÜ[469]]; $a¬†◊ñùÀê = intval($bÑ≠ìÙπÀ[$A•ı§äâùÜ[388]]); if ($D≤ÇΩ£Í˘∏[$A•ı§äâùÜ[383]] == SourceModel::TYPE_USER && $d’ëê¿í‹ﬂ == $bÑ◊Ê€∑ç) { $fÕÊÃ≈õŒÂ = !0; $eè©±–Ù“ì = $bÑ≠ìÙπÀ; $a§Ê‰Æíÿì = $a¬†◊ñùÀê; } else { if ($D≤ÇΩ£Í˘∏[$A•ı§äâùÜ[383]] == SourceModel::TYPE_GROUP && $this->groupContainUser($d’ëê¿í‹ﬂ, $bÑ◊Ê€∑ç)) { $A•≈ŒÖıÜπ = !0; $Bá“—ãú¥› = $this->groupStepToUserGroup($d’ëê¿í‹ﬂ, $bÑ◊Ê€∑ç); if ($Bá“—ãú¥› < $C∂¯ç¥ø≠∂) { $C∂¯ç¥ø≠∂ = $Bá“—ãú¥›; $AµÓ«àÉæ∆ = $a¬†◊ñùÀê; $A¨ßñÿ¿©© = $bÑ≠ìÙπÀ; $aºÉÃ≠í‰Ò = $d’ëê¿í‹ﬂ; } if ($Bá“—ãú¥› == $C∂¯ç¥ø≠∂ && $a¬†◊ñùÀê >= $AµÓ«àÉæ∆) { $AµÓ«àÉæ∆ = $a¬†◊ñùÀê; $A¨ßñÿ¿©© = $bÑ≠ìÙπÀ; $aºÉÃ≠í‰Ò = $d’ëê¿í‹ﬂ; } } else { if ($d’ëê¿í‹ﬂ == $A•ı§äâùÜ[481]) { $e—∂ßïÚ‚· = !0; $c≈∫ÚØΩå∏ = $bÑ≠ìÙπÀ; $EëîÜö÷Àé = $a¬†◊ñùÀê; } } } } if ($fÕÊÃ≈õŒÂ) { $B≠œﬁâÑå¬ = $a§Ê‰Æíÿì; $bÑ≠ìÙπÀ = $eè©±–Ù“ì; $D°÷√èˆ·π = LNG($A•ı§äâùÜ[2308]); } else { if ($A•≈ŒÖıÜπ) { $B≠œﬁâÑå¬ = $AµÓ«àÉæ∆; $bÑ≠ìÙπÀ = $A¨ßñÿ¿©©; $bÈæãßÆâç = Model($A•ı§äâùÜ[471])->getInfo($aºÉÃ≠í‰Ò); $D°÷√èˆ·π = $A•ı§äâùÜ[157] . $bÈæãßÆâç[$A•ı§äâùÜ[476]] . $A•ı§äâùÜ[2309] . LNG($A•ı§äâùÜ[2310]); } else { if ($e—∂ßïÚ‚·) { $B≠œﬁâÑå¬ = $EëîÜö÷Àé; $bÑ≠ìÙπÀ = $c≈∫ÚØΩå∏; $D°÷√èˆ·π = LNG($A•ı§äâùÜ[2280]); } else { $B≠œﬁâÑå¬ = 0; $bÑ≠ìÙπÀ = !1; $D°÷√èˆ·π = $A•ı§äâùÜ[33]; } } } $F∂≤ëäÔÉÉ = array($A•ı§äâùÜ[2301] => intval($B≠œﬁâÑå¬), $A•ı§äâùÜ[2284] => $bÑ≠ìÙπÀ, $A•ı§äâùÜ[2302] => $D°÷√èˆ·π, $A•ı§äâùÜ[2293] => $this->sourceAuthInfo($D≤ÇΩ£Í˘∏[$A•ı§äâùÜ[381]])); goto E„´πóÉ››; eàÇÙ÷∞ü: $A•≈ŒÖıÜπ = 0; $AµÓ«àÉæ∆ = 0; $A¨ßñÿ¿©© = 0; goto c·¶æªàúÒ; d ÕÃãáÖª: $EëîÜö÷Àé = 0; $c≈∫ÚØΩå∏ = 0; $D≤ÇΩ£Í˘∏ = array($A•ı§äâùÜ[381] => 0); goto c¨≈¥˜Ñ√ˆ; E„´πóÉ››: return $F∂≤ëäÔÉÉ; goto e°ﬁÆﬂ“å„; e°ﬁÆﬂ“å„: } private function groupContainUser($e¬çÇøËñ‚, $FæÎ«‡ﬂ´ˆ = false) { return in_array($e¬çÇøËñ‚, $this->userGroupParents($FæÎ«‡ﬂ´ˆ)); } private function groupStepToUserGroup($aî¶Ñ‡‰≈Ï, $a⁄ÍıÓÆÿ“ = false) { goto cÛ…√Ê‹ˆç; a¥õé¯î¯â: $e“ÑäΩ°°è = $GLOBALS[$A–ı◊»åè»[6]][$A–ı◊»åè»[84]][$A–ı◊»åè»[2203]] == 1; $b—ƒ…‘é‘Ç = $e“ÑäΩ°°è ? 3 : 2; foreach ($e‡˜äÇ˘˘ as $B†äØíﬁ‹ù) { if ($B†äØíﬁ‹ù[$A–ı◊»åè»[2112]] == $aî¶Ñ‡‰≈Ï) { return 0; } $dß◊µÖÚ¿Ã = explode($A–ı◊»åè»[47], trim($B†äØíﬁ‹ù[$A–ı◊»åè»[472]], $A–ı◊»åè»[47])); if ($dß◊µÖÚ¿Ã[0] == $A–ı◊»åè»[481] && count($dß◊µÖÚ¿Ã) > $b—ƒ…‘é‘Ç) { $b†ÀÚìè‡Ç = array_reverse(array_slice($dß◊µÖÚ¿Ã, $b—ƒ…‘é‘Ç)); $dü∏ŒèÀ®– = array_search($aî¶Ñ‡‰≈Ï, $b†ÀÚìè‡Ç); if ($dü∏ŒèÀ®– !== !1 && $dü∏ŒèÀ®– + 1 <= $fŒœπŒÜ‡) { $fŒœπŒÜ‡ = $dü∏ŒèÀ®– + 1; } } } goto Bï√ªã·Íº; Bï√ªã·Íº: return $fŒœπŒÜ‡; goto b∂Œñä¬§ı; cÛ…√Ê‹ˆç: $A–ı◊»åè» =& $_SERVER[áí∂¯Â¸Áò]; $e‡˜äÇ˘˘ = $this->userGroupList($a⁄ÍıÓÆÿ“); $fŒœπŒÜ‡ = 1000; goto a¥õé¯î¯â; b∂Œñä¬§ı: } private function userGroupList($a⁄£çºøÂ∑ = false) { $cÁ§ä¿ãÙÜ =& $_SERVER[áí∂¯Â¸Áò]; static $D√µØäó˜ = array(); if (isset($D√µØäó˜[$a⁄£çºøÂ∑])) { return $D√µØäó˜[$a⁄£çºøÂ∑]; } $C‘ºä§º…È = Model($cÁ§ä¿ãÙÜ[490])->getInfo($a⁄£çºøÂ∑); $D√µØäó˜[$a⁄£çºøÂ∑] = array_to_keyvalue($C‘ºä§º…È[$cÁ§ä¿ãÙÜ[2281]], $cÁ§ä¿ãÙÜ[2112]); return $D√µØäó˜[$a⁄£çºøÂ∑]; } public function userGroupParents($bû”ôƒêìœ) { goto cëÖ‰ùéã•; dÑÃ¥ìÃıæ: $dÜ¥ËÉÃ¿Ö[$bû”ôƒêìœ] = array_unique($c¯ûÊõÌ∂∫); return $dÜ¥ËÉÃ¿Ö[$bû”ôƒêìœ]; goto d‡π√â¿Ω; cëÖ‰ùéã•: $f√Áì≈´∂π =& $_SERVER[áí∂¯Â¸Áò]; static $dÜ¥ËÉÃ¿Ö = array(); $bû”ôƒêìœ = $bû”ôƒêìœ ? $bû”ôƒêìœ : USER_ID; goto FÉ„èÎî¬â; FÉ„èÎî¬â: if (isset($dÜ¥ËÉÃ¿Ö[$bû”ôƒêìœ])) { return $dÜ¥ËÉÃ¿Ö[$bû”ôƒêìœ]; } $CåÓ¨ﬁóå⁄ = $this->userGroupList($bû”ôƒêìœ); $c¯ûÊõÌ∂∫ = array(); goto b›∞œÙïÀ¥; b›∞œÙïÀ¥: $A∏œç ááü = $GLOBALS[$f√Áì≈´∂π[6]][$f√Áì≈´∂π[84]][$f√Áì≈´∂π[2203]] == 1; $BÆÜ•î≤”Ñ = $A∏œç ááü ? 3 : 2; foreach ($CåÓ¨ﬁóå⁄ as $d›ÒÕøı…∑) { $d†ØïÎÂäÊ = array($d›ÒÕøı…∑[$f√Áì≈´∂π[2112]]); $dßä®´ÿà√ = explode($f√Áì≈´∂π[47], trim($d›ÒÕøı…∑[$f√Áì≈´∂π[472]], $f√Áì≈´∂π[47])); if ($dßä®´ÿà√[0] == $f√Áì≈´∂π[481] && count($dßä®´ÿà√) > $BÆÜ•î≤”Ñ) { $bˆƒ¥—Í‚≤ = array_slice($dßä®´ÿà√, $BÆÜ•î≤”Ñ); $d†ØïÎÂäÊ = array_merge($d†ØïÎÂäÊ, array_reverse($bˆƒ¥—Í‚≤)); } $c¯ûÊõÌ∂∫ = array_merge($c¯ûÊõÌ∂∫, $d†ØïÎÂäÊ); } goto dÑÃ¥ìÃıæ; d‡π√â¿Ω: } public function authTargetInfoMake($fÜËÚ¥¡™ä) { goto eÍõæœ÷èß; a∂ãﬁπÖ¢õ: foreach ($fÜËÚ¥¡™ä as $EåÃ±Â©›ñ) { if ($EåÃ±Â©›ñ[$EçïøÜòëÏ[383]] == SourceModel::TYPE_USER) { $d‚ñﬁÚò≠∏[] = intval($EåÃ±Â©›ñ[$EçïøÜòëÏ[469]]); } else { if ($EåÃ±Â©›ñ[$EçïøÜòëÏ[383]] == SourceModel::TYPE_GROUP) { $Dææ≈Ñ⁄Œ∂[] = intval($EåÃ±Â©›ñ[$EçïøÜòëÏ[469]]); } } } if ($d‚ñﬁÚò≠∏) { $d‚ñﬁÚò≠∏ = Model($EçïøÜòëÏ[487])->userListInfo($d‚ñﬁÚò≠∏); } if ($Dææ≈Ñ⁄Œ∂) { $BæßÜÑ’ﬁ‚ = array($EçïøÜòëÏ[2189] => array($EçïøÜòëÏ[396], $Dææ≈Ñ⁄Œ∂)); $Dææ≈Ñ⁄Œ∂ = Model($EçïøÜòëÏ[471])->field($EçïøÜòëÏ[2202])->where($BæßÜÑ’ﬁ‚)->select(); $Dææ≈Ñ⁄Œ∂ = array_to_keyvalue($Dææ≈Ñ⁄Œ∂, $EçïøÜòëÏ[2112]); } goto D‹†Œ”≠¬ü; D‹†Œ”≠¬ü: return array($EçïøÜòëÏ[2311] => $d‚ñﬁÚò≠∏, $EçïøÜòëÏ[2312] => $Dææ≈Ñ⁄Œ∂); goto f∫à‡≠ûÏ§; eÍõæœ÷èß: $EçïøÜòëÏ =& $_SERVER[áí∂¯Â¸Áò]; $d‚ñﬁÚò≠∏ = array(); $Dææ≈Ñ⁄Œ∂ = array(); goto a∂ãﬁπÖ¢õ; f∫à‡≠ûÏ§: } public function authInfo($BÎâÜá≤¿») { $d¶Í•§”œä =& $_SERVER[áí∂¯Â¸Áò]; if ($BÎâÜá≤¿»[$d¶Í•§”œä[2256]]) { $F≥“◊¬¢£æ = Model($d¶Í•§”œä[2275])->listData($BÎâÜá≤¿»[$d¶Í•§”œä[2256]]); if (!$F≥“◊¬¢£æ) { return !1; $dÿÇÉÏô¯Ô = Model($d¶Í•§”œä[2275])->listData(); $a‡Æ¡Îç“Ç = array_filter_by_field($dÿÇÉÏô¯Ô, $d¶Í•§”œä[388], $d¶Í•§”œä[481]); return $a‡Æ¡Îç“Ç; } $Cä‹Ü◊ÕÈé = array_field_key($F≥“◊¬¢£æ, array($d¶Í•§”œä[371], $d¶Í•§”œä[28], $d¶Í•§”œä[388], $d¶Í•§”œä[2132], $d¶Í•§”œä[2134])); $Cä‹Ü◊ÕÈé[$d¶Í•§”œä[2313]] = $BÎâÜá≤¿»; return $Cä‹Ü◊ÕÈé; } else { return array($d¶Í•§”œä[397] => 0, $d¶Í•§”œä[2118] => $BÎâÜá≤¿»[$d¶Í•§”œä[2257]], $d¶Í•§”œä[398] => $d¶Í•§”œä[33], $d¶Í•§”œä[2132] => $d¶Í•§”œä[2314]); } } } goto BÀÓﬁ—πÍÉ; BÇ€äéŸÁ¨: define($_SERVER[áí∂¯Â¸Áò][1944], 16); define($_SERVER[áí∂¯Â¸Áò][1945], 32); class Services_JSON { function __construct($døâËΩÌ‘ò = 0) { $this->use = $døâËΩÌ‘ò; } function utf162utf8($C‰˘å≠ﬁå¿) { $aÖ∆√°™–π =& $_SERVER[áí∂¯Â¸Áò]; if (function_exists($aÖ∆√°™–π[68])) { return mb_convert_encoding($C‰˘å≠ﬁå¿, $aÖ∆√°™–π[1594], $aÖ∆√°™–π[1946]); } $E•âı™öë” = ord($C‰˘å≠ﬁå¿[0]) << 8 | ord($C‰˘å≠ﬁå¿[1]); switch (!0) { case (127 & $E•âı™öë”) == $E•âı™öë”: return chr(127 & $E•âı™öë”); case (2047 & $E•âı™öë”) == $E•âı™öë”: return chr(192 | $E•âı™öë” >> 6 & 31) . chr(128 | $E•âı™öë” & 63); case (65535 & $E•âı™öë”) == $E•âı™öë”: return chr(224 | $E•âı™öë” >> 12 & 15) . chr(128 | $E•âı™öë” >> 6 & 63) . chr(128 | $E•âı™öë” & 63); } return $aÖ∆√°™–π[33]; } function utf82utf16($f’∂©≤Ú„ò) { $A“ùû∂Üêë =& $_SERVER[áí∂¯Â¸Áò]; if (function_exists($A“ùû∂Üêë[68])) { return mb_convert_encoding($f’∂©≤Ú„ò, $A“ùû∂Üêë[1946], $A“ùû∂Üêë[1594]); } switch (strlen($f’∂©≤Ú„ò)) { case 1: return $f’∂©≤Ú„ò; case 2: return chr(7 & ord($f’∂©≤Ú„ò[0]) >> 2) . chr(192 & ord($f’∂©≤Ú„ò[0]) << 6 | 63 & ord($f’∂©≤Ú„ò[1])); case 3: return chr(240 & ord($f’∂©≤Ú„ò[0]) << 4 | 15 & ord($f’∂©≤Ú„ò[1]) >> 2) . chr(192 & ord($f’∂©≤Ú„ò[1]) << 6 | 127 & ord($f’∂©≤Ú„ò[2])); } return $A“ùû∂Üêë[33]; } function encode($cÍ‡Ê≈ã›ñ) { $c™∆µ¨“çÈ =& $_SERVER[áí∂¯Â¸Áò]; switch (gettype($cÍ‡Ê≈ã›ñ)) { case $c™∆µ¨“çÈ[1605]: return $cÍ‡Ê≈ã›ñ ? $c™∆µ¨“çÈ[1604] : $c™∆µ¨“çÈ[1606]; case $c™∆µ¨“çÈ[1947]: return $c™∆µ¨“çÈ[99]; case $c™∆µ¨“çÈ[307]: return (int) $cÍ‡Ê≈ã›ñ; case $c™∆µ¨“çÈ[282]: case $c™∆µ¨“çÈ[281]: return (double) $cÍ‡Ê≈ã›ñ; case $c™∆µ¨“çÈ[316]: $FïÈü∂ﬁç› = $c™∆µ¨“çÈ[33]; $fˆÊäá€Æ = strlen($cÍ‡Ê≈ã›ñ); for ($Bë‹Ê÷ü”ú = 0; $Bë‹Ê÷ü”ú < $fˆÊäá€Æ; ++$Bë‹Ê÷ü”ú) { $FÎ∫à¿⁄ê· = ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú]); switch (!0) { case $FÎ∫à¿⁄ê· == 8: $FïÈü∂ﬁç› .= $c™∆µ¨“çÈ[1948]; break; case $FÎ∫à¿⁄ê· == 9: $FïÈü∂ﬁç› .= $c™∆µ¨“çÈ[1581]; break; case $FÎ∫à¿⁄ê· == 10: $FïÈü∂ﬁç› .= $c™∆µ¨“çÈ[1579]; break; case $FÎ∫à¿⁄ê· == 12: $FïÈü∂ﬁç› .= $c™∆µ¨“çÈ[1949]; break; case $FÎ∫à¿⁄ê· == 13: $FïÈü∂ﬁç› .= $c™∆µ¨“çÈ[1580]; break; case $FÎ∫à¿⁄ê· == 34: case $FÎ∫à¿⁄ê· == 47: case $FÎ∫à¿⁄ê· == 92: $FïÈü∂ﬁç› .= $c™∆µ¨“çÈ[93] . $cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú]; break; case $FÎ∫à¿⁄ê· >= 32 && $FÎ∫à¿⁄ê· <= 127: $FïÈü∂ﬁç› .= $cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú]; break; case ($FÎ∫à¿⁄ê· & 224) == 192: $b©πÙÏ’¯à = pack($c™∆µ¨“çÈ[1950], $FÎ∫à¿⁄ê·, ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 1])); $Bë‹Ê÷ü”ú += 1; $F ´ÒÕÚπ˜ = $this->utf82utf16($b©πÙÏ’¯à); $FïÈü∂ﬁç› .= sprintf($c™∆µ¨“çÈ[1951], bin2hex($F ´ÒÕÚπ˜)); break; case ($FÎ∫à¿⁄ê· & 240) == 224: $b©πÙÏ’¯à = pack($c™∆µ¨“çÈ[1950], $FÎ∫à¿⁄ê·, ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 1]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 2])); $Bë‹Ê÷ü”ú += 2; $F ´ÒÕÚπ˜ = $this->utf82utf16($b©πÙÏ’¯à); $FïÈü∂ﬁç› .= sprintf($c™∆µ¨“çÈ[1951], bin2hex($F ´ÒÕÚπ˜)); break; case ($FÎ∫à¿⁄ê· & 248) == 240: $b©πÙÏ’¯à = pack($c™∆µ¨“çÈ[1950], $FÎ∫à¿⁄ê·, ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 1]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 2]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 3])); $Bë‹Ê÷ü”ú += 3; $F ´ÒÕÚπ˜ = $this->utf82utf16($b©πÙÏ’¯à); $FïÈü∂ﬁç› .= sprintf($c™∆µ¨“çÈ[1951], bin2hex($F ´ÒÕÚπ˜)); break; case ($FÎ∫à¿⁄ê· & 252) == 248: $b©πÙÏ’¯à = pack($c™∆µ¨“çÈ[1950], $FÎ∫à¿⁄ê·, ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 1]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 2]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 3]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 4])); $Bë‹Ê÷ü”ú += 4; $F ´ÒÕÚπ˜ = $this->utf82utf16($b©πÙÏ’¯à); $FïÈü∂ﬁç› .= sprintf($c™∆µ¨“çÈ[1951], bin2hex($F ´ÒÕÚπ˜)); break; case ($FÎ∫à¿⁄ê· & 254) == 252: $b©πÙÏ’¯à = pack($c™∆µ¨“çÈ[1950], $FÎ∫à¿⁄ê·, ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 1]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 2]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 3]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 4]), ord($cÍ‡Ê≈ã›ñ[$Bë‹Ê÷ü”ú + 5])); $Bë‹Ê÷ü”ú += 5; $F ´ÒÕÚπ˜ = $this->utf82utf16($b©πÙÏ’¯à); $FïÈü∂ﬁç› .= sprintf($c™∆µ¨“çÈ[1951], bin2hex($F ´ÒÕÚπ˜)); break; } } return $c™∆µ¨“çÈ[113] . $FïÈü∂ﬁç› . $c™∆µ¨“çÈ[113]; case $c™∆µ¨“çÈ[1952]: if (is_array($cÍ‡Ê≈ã›ñ) && count($cÍ‡Ê≈ã›ñ) && array_keys($cÍ‡Ê≈ã›ñ) !== range(0, sizeof($cÍ‡Ê≈ã›ñ) - 1)) { $d êôâ›«‡ = array_map(array($this, $c™∆µ¨“çÈ[1953]), array_keys($cÍ‡Ê≈ã›ñ), array_values($cÍ‡Ê≈ã›ñ)); foreach ($d êôâ›«‡ as $a•ñö”„«ë) { if (Services_JSON::isError($a•ñö”„«ë)) { return $a•ñö”„«ë; } } return $c™∆µ¨“çÈ[1075] . join($c™∆µ¨“çÈ[47], $d êôâ›«‡) . $c™∆µ¨“çÈ[319]; } $BíÑó‘Ωã≈ = array_map(array($this, $c™∆µ¨“çÈ[1954]), $cÍ‡Ê≈ã›ñ); foreach ($BíÑó‘Ωã≈ as $fÈäüçáÙ¶) { if (Services_JSON::isError($fÈäüçáÙ¶)) { return $fÈäüçáÙ¶; } } return $c™∆µ¨“çÈ[157] . join($c™∆µ¨“çÈ[47], $BíÑó‘Ωã≈) . $c™∆µ¨“çÈ[489]; case $c™∆µ¨“çÈ[1955]: $e±˘Î≥ëﬂ∑ = get_object_vars($cÍ‡Ê≈ã›ñ); $d êôâ›«‡ = array_map(array($this, $c™∆µ¨“çÈ[1953]), array_keys($e±˘Î≥ëﬂ∑), array_values($e±˘Î≥ëﬂ∑)); foreach ($d êôâ›«‡ as $a•ñö”„«ë) { if (Services_JSON::isError($a•ñö”„«ë)) { return $a•ñö”„«ë; } } return $c™∆µ¨“çÈ[1075] . join($c™∆µ¨“çÈ[47], $d êôâ›«‡) . $c™∆µ¨“çÈ[319]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $c™∆µ¨“çÈ[99] : new Services_JSON_Error(gettype($cÍ‡Ê≈ã›ñ) . $c™∆µ¨“çÈ[1956]); } } function name_value($fÛπÊ¡å÷Õ, $Fá˘ïﬁàÀ©) { $AÖ‹Ò€çäœ = $this->encode($Fá˘ïﬁàÀ©); if (Services_JSON::isError($AÖ‹Ò€çäœ)) { return $AÖ‹Ò€çäœ; } return $this->encode(strval($fÛπÊ¡å÷Õ)) . $_SERVER[áí∂¯Â¸Áò][4] . $AÖ‹Ò€çäœ; } function reduce_string($D„è ⁄êìÕ) { $cºîÓŒªüâ =& $_SERVER[áí∂¯Â¸Áò]; $D„è ⁄êìÕ = preg_replace(array($cºîÓŒªüâ[1957], $cºîÓŒªüâ[1958], $cºîÓŒªüâ[1959]), $cºîÓŒªüâ[33], $D„è ⁄êìÕ); return trim($D„è ⁄êìÕ); } function decode($Cèå‡Æ˘“˘) { $FêçôÀıñÕ =& $_SERVER[áí∂¯Â¸Áò]; $Cèå‡Æ˘“˘ = $this->reduce_string($Cèå‡Æ˘“˘); switch (strtolower($Cèå‡Æ˘“˘)) { case $FêçôÀıñÕ[1604]: return !0; case $FêçôÀıñÕ[1606]: return !1; case $FêçôÀıñÕ[99]: return null; default: $c·ÛÜ´§‹¡ = array(); if (is_numeric($Cèå‡Æ˘“˘)) { return (double) $Cèå‡Æ˘“˘ == (int) $Cèå‡Æ˘“˘ ? (int) $Cèå‡Æ˘“˘ : (double) $Cèå‡Æ˘“˘; } elseif (preg_match($FêçôÀıñÕ[1960], $Cèå‡Æ˘“˘, $c·ÛÜ´§‹¡) && $c·ÛÜ´§‹¡[1] == $c·ÛÜ´§‹¡[2]) { $a∞•°ÓÛŸè = substr($Cèå‡Æ˘“˘, 0, 1); $eä¬˜Ô÷ûÙ = substr($Cèå‡Æ˘“˘, 1, -1); $C‰≤’ä≤Ô· = $FêçôÀıñÕ[33]; $Aå≤ÃàµÈÛ = strlen($eä¬˜Ô÷ûÙ); for ($Bô‹∑«òì  = 0; $Bô‹∑«òì  < $Aå≤ÃàµÈÛ; ++$Bô‹∑«òì ) { $d›áôÿìúË = substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 2); $E∫Ôπ„üáÉ = ord($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ]); switch (!0) { case $d›áôÿìúË == $FêçôÀıñÕ[1948]: $C‰≤’ä≤Ô· .= chr(8); ++$Bô‹∑«òì ; break; case $d›áôÿìúË == $FêçôÀıñÕ[1581]: $C‰≤’ä≤Ô· .= chr(9); ++$Bô‹∑«òì ; break; case $d›áôÿìúË == $FêçôÀıñÕ[1579]: $C‰≤’ä≤Ô· .= chr(10); ++$Bô‹∑«òì ; break; case $d›áôÿìúË == $FêçôÀıñÕ[1949]: $C‰≤’ä≤Ô· .= chr(12); ++$Bô‹∑«òì ; break; case $d›áôÿìúË == $FêçôÀıñÕ[1580]: $C‰≤’ä≤Ô· .= chr(13); ++$Bô‹∑«òì ; break; case $d›áôÿìúË == $FêçôÀıñÕ[1362]: case $d›áôÿìúË == $FêçôÀıñÕ[1961]: case $d›áôÿìúË == $FêçôÀıñÕ[1574]: case $d›áôÿìúË == $FêçôÀıñÕ[1576]: if ($a∞•°ÓÛŸè == $FêçôÀıñÕ[113] && $d›áôÿìúË != $FêçôÀıñÕ[1961] || $a∞•°ÓÛŸè == $FêçôÀıñÕ[55] && $d›áôÿìúË != $FêçôÀıñÕ[1362]) { $C‰≤’ä≤Ô· .= $eä¬˜Ô÷ûÙ[++$Bô‹∑«òì ]; } break; case preg_match($FêçôÀıñÕ[1962], substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 6)): $e‚ƒ°ƒ“‚¯ = chr(hexdec(substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì  + 2, 2))) . chr(hexdec(substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì  + 4, 2))); $C‰≤’ä≤Ô· .= $this->utf162utf8($e‚ƒ°ƒ“‚¯); $Bô‹∑«òì  += 5; break; case $E∫Ôπ„üáÉ >= 32 && $E∫Ôπ„üáÉ <= 127: $C‰≤’ä≤Ô· .= $eä¬˜Ô÷ûÙ[$Bô‹∑«òì ]; break; case ($E∫Ôπ„üáÉ & 224) == 192: $C‰≤’ä≤Ô· .= substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 2); ++$Bô‹∑«òì ; break; case ($E∫Ôπ„üáÉ & 240) == 224: $C‰≤’ä≤Ô· .= substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 3); $Bô‹∑«òì  += 2; break; case ($E∫Ôπ„üáÉ & 248) == 240: $C‰≤’ä≤Ô· .= substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 4); $Bô‹∑«òì  += 3; break; case ($E∫Ôπ„üáÉ & 252) == 248: $C‰≤’ä≤Ô· .= substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 5); $Bô‹∑«òì  += 4; break; case ($E∫Ôπ„üáÉ & 254) == 252: $C‰≤’ä≤Ô· .= substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 6); $Bô‹∑«òì  += 5; break; } } return $C‰≤’ä≤Ô·; } elseif (preg_match($FêçôÀıñÕ[1963], $Cèå‡Æ˘“˘) || preg_match($FêçôÀıñÕ[1964], $Cèå‡Æ˘“˘)) { goto bﬁÁÙŸÇΩ∏; AüöÓáÖ“ò: $eä¬˜Ô÷ûÙ = $this->reduce_string($eä¬˜Ô÷ûÙ); if ($eä¬˜Ô÷ûÙ == $FêçôÀıñÕ[33]) { if (reset($fìê≠ŒÌÌ«) == SERVICES_JSON_IN_ARR) { return $eìòÎ©ÖØú; } else { return $fî∫óÖ´óÖ; } } $Aå≤ÃàµÈÛ = strlen($eä¬˜Ô÷ûÙ); goto DÇˆµºéå£; DÇˆµºéå£: for ($Bô‹∑«òì  = 0; $Bô‹∑«òì  <= $Aå≤ÃàµÈÛ; ++$Bô‹∑«òì ) { $B±ï—‘≠ÜÓ = end($fìê≠ŒÌÌ«); $d›áôÿìúË = substr($eä¬˜Ô÷ûÙ, $Bô‹∑«òì , 2); if ($Bô‹∑«òì  == $Aå≤ÃàµÈÛ || $eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[47] && $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]] == SERVICES_JSON_SLICE) { $aï∞ëãÙ∞Í = substr($eä¬˜Ô÷ûÙ, $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[267]], $Bô‹∑«òì  - $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[267]]); array_push($fìê≠ŒÌÌ«, array($FêçôÀıñÕ[1965] => SERVICES_JSON_SLICE, $FêçôÀıñÕ[267] => $Bô‹∑«òì  + 1, $FêçôÀıñÕ[1966] => !1)); if (reset($fìê≠ŒÌÌ«) == SERVICES_JSON_IN_ARR) { array_push($eìòÎ©ÖØú, $this->decode($aï∞ëãÙ∞Í)); } elseif (reset($fìê≠ŒÌÌ«) == SERVICES_JSON_IN_OBJ) { $f÷Ë”ı´ºÑ = array(); if (preg_match($FêçôÀıñÕ[1967], $aï∞ëãÙ∞Í, $f÷Ë”ı´ºÑ)) { $B…∏‹ÿÊ≈é = $this->decode($f÷Ë”ı´ºÑ[1]); $fÕâÔñÃªá = $this->decode($f÷Ë”ı´ºÑ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $fî∫óÖ´óÖ[$B…∏‹ÿÊ≈é] = $fÕâÔñÃªá; } else { $fî∫óÖ´óÖ->{$B…∏‹ÿÊ≈é} = $fÕâÔñÃªá; } } elseif (preg_match($FêçôÀıñÕ[1968], $aï∞ëãÙ∞Í, $f÷Ë”ı´ºÑ)) { $B…∏‹ÿÊ≈é = $f÷Ë”ı´ºÑ[1]; $fÕâÔñÃªá = $this->decode($f÷Ë”ı´ºÑ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $fî∫óÖ´óÖ[$B…∏‹ÿÊ≈é] = $fÕâÔñÃªá; } else { $fî∫óÖ´óÖ->{$B…∏‹ÿÊ≈é} = $fÕâÔñÃªá; } } } } elseif (($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[113] || $eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[55]) && $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]] != SERVICES_JSON_IN_STR) { array_push($fìê≠ŒÌÌ«, array($FêçôÀıñÕ[1965] => SERVICES_JSON_IN_STR, $FêçôÀıñÕ[267] => $Bô‹∑«òì , $FêçôÀıñÕ[1966] => $eä¬˜Ô÷ûÙ[$Bô‹∑«òì ])); } elseif ($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1966]] && $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]] == SERVICES_JSON_IN_STR && (strlen(substr($eä¬˜Ô÷ûÙ, 0, $Bô‹∑«òì )) - strlen(rtrim(substr($eä¬˜Ô÷ûÙ, 0, $Bô‹∑«òì ), $FêçôÀıñÕ[93]))) % 2 != 1) { array_pop($fìê≠ŒÌÌ«); } elseif ($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[157] && in_array($B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fìê≠ŒÌÌ«, array($FêçôÀıñÕ[1965] => SERVICES_JSON_IN_ARR, $FêçôÀıñÕ[267] => $Bô‹∑«òì , $FêçôÀıñÕ[1966] => !1)); } elseif ($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[489] && $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]] == SERVICES_JSON_IN_ARR) { array_pop($fìê≠ŒÌÌ«); } elseif ($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[1075] && in_array($B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fìê≠ŒÌÌ«, array($FêçôÀıñÕ[1965] => SERVICES_JSON_IN_OBJ, $FêçôÀıñÕ[267] => $Bô‹∑«òì , $FêçôÀıñÕ[1966] => !1)); } elseif ($eä¬˜Ô÷ûÙ[$Bô‹∑«òì ] == $FêçôÀıñÕ[319] && $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]] == SERVICES_JSON_IN_OBJ) { array_pop($fìê≠ŒÌÌ«); } elseif ($d›áôÿìúË == $FêçôÀıñÕ[1969] && in_array($B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fìê≠ŒÌÌ«, array($FêçôÀıñÕ[1965] => SERVICES_JSON_IN_CMT, $FêçôÀıñÕ[267] => $Bô‹∑«òì , $FêçôÀıñÕ[1966] => !1)); $Bô‹∑«òì ++; } elseif ($d›áôÿìúË == $FêçôÀıñÕ[1970] && $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[1965]] == SERVICES_JSON_IN_CMT) { array_pop($fìê≠ŒÌÌ«); $Bô‹∑«òì ++; for ($B›´Ûã±ÿª = $B±ï—‘≠ÜÓ[$FêçôÀıñÕ[267]]; $B›´Ûã±ÿª <= $Bô‹∑«òì ; ++$B›´Ûã±ÿª) { $eä¬˜Ô÷ûÙ = substr_replace($eä¬˜Ô÷ûÙ, $FêçôÀıñÕ[50], $B›´Ûã±ÿª, 1); } } } if (reset($fìê≠ŒÌÌ«) == SERVICES_JSON_IN_ARR) { return $eìòÎ©ÖØú; } elseif (reset($fìê≠ŒÌÌ«) == SERVICES_JSON_IN_OBJ) { return $fî∫óÖ´óÖ; } goto CˆüÔ£ê≤¢; bﬁÁÙŸÇΩ∏: if ($Cèå‡Æ˘“˘[0] == $FêçôÀıñÕ[157]) { $fìê≠ŒÌÌ« = array(SERVICES_JSON_IN_ARR); $eìòÎ©ÖØú = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $fìê≠ŒÌÌ« = array(SERVICES_JSON_IN_OBJ); $fî∫óÖ´óÖ = array(); } else { $fìê≠ŒÌÌ« = array(SERVICES_JSON_IN_OBJ); $fî∫óÖ´óÖ = new stdClass(); } } array_push($fìê≠ŒÌÌ«, array($FêçôÀıñÕ[1965] => SERVICES_JSON_SLICE, $FêçôÀıñÕ[267] => 0, $FêçôÀıñÕ[1966] => !1)); $eä¬˜Ô÷ûÙ = substr($Cèå‡Æ˘“˘, 1, -1); goto AüöÓáÖ“ò; CˆüÔ£ê≤¢: } } } function isError($eÃÖﬂŸ¶Ñá, $cÁøƒ Üàœ = null) { $e¿Ú“Ü≤÷Õ =& $_SERVER[áí∂¯Â¸Áò]; if (class_exists($e¿Ú“Ü≤÷Õ[1971])) { return PEAR::isError($eÃÖﬂŸ¶Ñá, $cÁøƒ Üàœ); } elseif (is_object($eÃÖﬂŸ¶Ñá) && (get_class($eÃÖﬂŸ¶Ñá) == $e¿Ú“Ü≤÷Õ[1972] || is_subclass_of($eÃÖﬂŸ¶Ñá, $e¿Ú“Ü≤÷Õ[1972]))) { return !0; } return !1; } } goto b˜îçËûÚˆ; Dãπ√≥Ëüæ: register_shutdown_function($_SERVER[˙Œ][32]); set_error_handler($_SERVER[˙Œ][46], $EÑœà∞âπ‚); if (function_exists($_SERVER[˙Œ][47])) { set_exception_handler($_SERVER[˙Œ][48]); } goto Dåë†œ·¿Û; CÎ Óÿë¨ƒ: $_SERVER[¬ÿ√Û©≥∏°∏¢] = explode($_SERVER[áí∂¯Â¸Áò][560], gzinflate(substr($_SERVER[áí∂¯Â¸Áò][561], 10, -8))); $cÙ∫é°ﬁéÍ = $_SERVER[áí∂¯Â¸Áò][562]; if (!$cÙ∫é°ﬁéÍ) { die; } goto a§¥Ì∏‹åÉ; d•≥œ…í‹Æ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\x66\x79\x54\x69\155\x65", "\164\x69\x6d\145", "\151\156\163\145\162\x74\x2c\x75\160\x64\141\164\x65", "\x66\165\156\143\x74\151\157\156"), array("\143\x72\x65\x61\164\145\x54\x69\x6d\x65", "\x74\151\x6d\145", "\x69\x6e\x73\x65\162\164", "\x66\165\x6e\x63\x74\x69\157\156")); public function setDataAuto($C∆èΩµ∞öå) { $this->dataAuto = $C∆èΩµ∞öå; } public function __construct($e…•òÕ¯·Ú = '', $DÈƒ≥˘∆≈å = '', $e≥†¨Ê˘‹— = '') { parent::__construct($e…•òÕ¯·Ú, $DÈƒ≥˘∆≈å, $e≥†¨Ê˘‹—); } public static function textEncode($a¡∫±ö´¥±) { if (!$a¡∫±ö´¥±) { return $a¡∫±ö´¥±; } $a†±Ì∂ıÁÑ = json_encode($a¡∫±ö´¥±); $a†±Ì∂ıÁÑ = preg_replace_callback($_SERVER[áí∂¯Â¸Áò][346], function ($FÇ«Î“ƒè) { return addslashes($FÇ«Î“ƒè[0]); }, $a†±Ì∂ıÁÑ); return json_decode($a†±Ì∂ıÁÑ); } public static function textDecode($b»¶ì∂—ƒ§) { $bß◊’Úºâ‰ =& $_SERVER[áí∂¯Â¸Áò]; $cï›ﬂçﬂ›† = json_encode($b»¶ì∂—ƒ§); $cï›ﬂçﬂ›† = preg_replace_callback($bß◊’Úºâ‰[347], function ($Eﬂ◊ÜØ‹ﬂ÷) { return $_SERVER[áí∂¯Â¸Áò][93]; }, $cï›ﬂçﬂ›†); return json_decode($cï›ﬂçﬂ›†); } protected $tableMeta = array(); protected function _beforeInsert(&$a§¨ÿﬂÃÿÎ, $e®π⁄ªª‹†) { $c∏çﬁŒÖﬁ´ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->checkDataAutoHas($c∏çﬁŒÖﬁ´[348])) { return; } $this->dataBeforeFilter($a§¨ÿﬂÃÿÎ, $c∏çﬁŒÖﬁ´[348]); } protected function _beforeUpdate(&$F∆°πÂ“êÇ, $aÏƒÉ àÿ‘) { $e«éä‚º˜ò =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->checkDataAutoHas($e«éä‚º˜ò[349])) { return; } $this->dataBeforeFilter($F∆°πÂ“êÇ, $e«éä‚º˜ò[349]); } protected function _afterSelect(&$B¢íß€Ã‹å, $Eé·∂°ÁÒ¥) { if (!is_array($B¢íß€Ã‹å)) { return; } if (!$this->checkDataAutoHas($_SERVER[áí∂¯Â¸Áò][350])) { return; } foreach ($B¢íß€Ã‹å as &$b˜∏Ï´„ñö) { $this->dataAfterFilter($b˜∏Ï´„ñö); } unset($b˜∏Ï´„ñö); } protected function _afterFind(&$dª≠∆Ã¿”ä, $A€ ù„∞ïˆ) { if (!is_array($dª≠∆Ã¿”ä)) { return; } if (!$this->checkDataAutoHas($_SERVER[áí∂¯Â¸Áò][350])) { return; } $this->dataAfterFilter($dª≠∆Ã¿”ä); } public function setAutoIncrement($C¶˘‰…û ¢) { $b€ﬁÃ®äû£ = array($this->getPk() => $C¶˘‰…û ¢); $b¢√ä‡¨†Ë = $this->data($b€ﬁÃ®äû£)->add(); if ($b¢√ä‡¨†Ë) { $this->delete($b¢√ä‡¨†Ë); } } public function getAutoIncrement() { $cÙèﬂÈ¬≥ò = $this->getTableName(); $c‹”ÔÛ¶Ñß = $this->max($this->getPk()); $AÇõ†Û›ïì = $this->query("\x73\150\x6f\167\x20\x74\141\142\x6c\145\40\x73\164\141\164\x75\x73\x20\167\150\145\162\x65\40\x4e\141\155\x65\x3d\47{$cÙèﬂÈ¬≥ò}\47"); $BﬂÙŒó˜ÕÂ = $AÇõ†Û›ïì[0][$_SERVER[áí∂¯Â¸Áò][351]]; $dﬁÎ¶µÀÒ« = max($c‹”ÔÛ¶Ñß, $BﬂÙŒó˜ÕÂ); return $dﬁÎ¶µÀÒ«; } protected function _callBefore($Cêº÷å¶ì›, $c‚èΩªù©») { return $this->cacheCallCheck($Cêº÷å¶ì›, $c‚èΩªù©», !1); } protected function _callAfter($eÕ¶Ô©”ı†, $d£≠îœû¨‹) { return $this->cacheCallCheck($eÕ¶Ô©”ı†, $d£≠îœû¨‹, !0); } protected function cacheFunctionAlias($C√ÎŒ¶Ö˜å) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($A≤Ö›ı•ƒ◊, $EÀìÙﬁûÕÒ, $A‰€Æ˜êﬁ— = false) { $F±…·°œπ¯ = $this->cacheFunctionAlias($EÀìÙﬁûÕÒ); if (!$F±…·°œπ¯) { return; } foreach ($F±…·°œπ¯ as $cã¥øî∫€ì => $e»∏ﬁ·¯ÇÃ) { $E©‰…ì⁄æπ = $e»∏ﬁ·¯ÇÃ[0]; $C˘™ú´µ†Ñ = explode($_SERVER[áí∂¯Â¸Áò][47], $e»∏ﬁ·¯ÇÃ[1]); if ($A≤Ö›ı•ƒ◊ == $cã¥øî∫€ì) { return $this->cacheFunctionGet($cã¥øî∫€ì, $E©‰…ì⁄æπ); } if ($A‰€Æ˜êﬁ— && in_array($A≤Ö›ı•ƒ◊, $C˘™ú´µ†Ñ)) { $this->cacheFunctionClear($cã¥øî∫€ì, $E©‰…ì⁄æπ); } } } public function cacheFunctionGet($A£ï™Á∂∫Ø, $dåΩ”Ú∏ò–) { $aéØË•Öá⁄ = $this->cacheKeyMake($A£ï™Á∂∫Ø, $dåΩ”Ú∏ò–); $a√ÿÊè’Õ« = Cache::get($aéØË•Öá⁄); if (!is_array($a√ÿÊè’Õ«)) { $a√ÿÊè’Õ« = call_user_func_array(array($this, $A£ï™Á∂∫Ø), array($dåΩ”Ú∏ò–, !0)); Cache::set($aéØË•Öá⁄, $a√ÿÊè’Õ«); } return $a√ÿÊè’Õ«; } public function cacheFunctionClear($A´›ûû∆∑Ã, $c£…¥âçÈ∂) { $dÍîÀ∞ùå¡ = $c£…¥âçÈ∂; if (!is_array($c£…¥âçÈ∂)) { $dÍîÀ∞ùå¡ = array($c£…¥âçÈ∂); } foreach ($dÍîÀ∞ùå¡ as $dõ†«˜Ÿµ®) { $CúŸÔüÉôõ = $this->cacheKeyMake($A´›ûû∆∑Ã, $dõ†«˜Ÿµ®); Cache::remove($CúŸÔüÉôõ); } } private function cacheKeyMake($aÙ¨È®˜‚◊, $C≤œı§ûé) { $Dóí„∫˜›ã =& $_SERVER[áí∂¯Â¸Áò]; return get_class($this) . $Dóí„∫˜›ã[70] . $aÙ¨È®˜‚◊ . $Dóí„∫˜›ã[352] . $C≤œı§ûé; } protected function selectPage($càÁù ¶†• = 200, $E¿Í¥ÉﬁÊÕ = 1) { goto EõÖ¶°–Ì€; EõÖ¶°–Ì€: $FÁá…Ãô“ =& $_SERVER[áí∂¯Â¸Áò]; global $in; $cƒ…ÁîÛàˆ = $this->optionsValue(); goto E˘ê°»¿øÑ; E˘ê°»¿øÑ: $dÿ§§Ω—≤á = 4000; $càÁù ¶†• = isset($in[$FÁá…Ãô“[353]]) ? $in[$FÁá…Ãô“[353]] : $càÁù ¶†•; if ($càÁù ¶†• === -1) { unset($in[$FÁá…Ãô“[353]]); $dÿ§§Ω—≤á = 100000000; $càÁù ¶†• = $dÿ§§Ω—≤á; } goto c¬è›õ¿ï; D“ËïÌÃ¶π: if ($cœ€Èôîô == 1) { $cïöìÀÙÏÛ = count($C≤®˘ﬁ§ïÜ); } $fÛÉ∑Âˆıﬂ = array($FÁá…Ãô“[355] => array($FÁá…Ãô“[356] => $cïöìÀÙÏÛ, $FÁá…Ãô“[353] => $càÁù ¶†•, $FÁá…Ãô“[344] => $E¿Í¥ÉﬁÊÕ, $FÁá…Ãô“[357] => $cœ€Èôîô), $FÁá…Ãô“[358] => $C≤®˘ﬁ§ïÜ ? $C≤®˘ﬁ§ïÜ : array()); return $fÛÉ∑Âˆıﬂ; goto dÆè’ëØ⁄Ü; cÚ“Æ≤¬å»: $cïöìÀÙÏÛ = intval($this->count()); $càÁù ¶†• = intval($càÁù ¶†•); $càÁù ¶†• = $càÁù ¶†• <= 5 ? 5 : ($càÁù ¶†• >= $dÿ§§Ω—≤á ? $dÿ§§Ω—≤á : $càÁù ¶†•); goto a¯ºÚ“Ëã¿; Cæ¢û◊≠Í”: $this->optionsValue($cƒ…ÁîÛàˆ); $C≤®˘ﬁ§ïÜ = $this->page($E¿Í¥ÉﬁÊÕ, $càÁù ¶†•)->select(); $C≤®˘ﬁ§ïÜ = is_array($C≤®˘ﬁ§ïÜ) ? $C≤®˘ﬁ§ïÜ : array(); goto D“ËïÌÃ¶π; c¬è›õ¿ï: $Cµ®Æ¶€Çî = $cƒ…ÁîÛàˆ; $Cµ®Æ¶€Çî[$FÁá…Ãô“[354]] = array(); $this->optionsValue($Cµ®Æ¶€Çî); goto cÚ“Æ≤¬å»; a¯ºÚ“Ëã¿: $cœ€Èôîô = ceil($cïöìÀÙÏÛ / $càÁù ¶†•); $E¿Í¥ÉﬁÊÕ = intval(isset($in[$FÁá…Ãô“[344]]) ? $in[$FÁá…Ãô“[344]] : $E¿Í¥ÉﬁÊÕ); $E¿Í¥ÉﬁÊÕ = $E¿Í¥ÉﬁÊÕ <= 1 ? 1 : ($E¿Í¥ÉﬁÊÕ >= $cœ€Èôîô ? $cœ€Èôîô : $E¿Í¥ÉﬁÊÕ); goto Cæ¢û◊≠Í”; dÆè’ëØ⁄Ü: } protected function checkLength($e÷”Ø¿Ï‘“, $Bã§€ÿ…¡ÿ = 0, $fÊ…˘©◊◊≥ = '') { $FÌì§Ñø≠Ë =& $_SERVER[áí∂¯Â¸Áò]; $Bã§€ÿ…¡ÿ = $Bã§€ÿ…¡ÿ ? $Bã§€ÿ…¡ÿ : 65536; if (!$e÷”Ø¿Ï‘“ || strlen($e÷”Ø¿Ï‘“) < $Bã§€ÿ…¡ÿ) { return; } $fÊ…˘©◊◊≥ = $fÊ…˘©◊◊≥ ? $fÊ…˘©◊◊≥ . $FÌì§Ñø≠Ë[67] : $FÌì§Ñø≠Ë[33]; show_json($fÊ…˘©◊◊≥ . LNG($FÌì§Ñø≠Ë[359]) . "\x28{$Bã§€ÿ…¡ÿ}\x29", !1); } protected function metaSet($B–÷÷øÂÉû, $FŸÏûÔä¿‘ = null, $BûÊ£ÑõÂã = null) { goto E£™ﬂ…ä‡£; D¶ù•˘â›ö: if (is_null($FŸÏûÔä¿‘)) { return $A∑∏ûùÙÖ“->where(array($C„πﬂ⁄˘≈‹ => $B–÷÷øÂÉû))->delete(); } if (is_null($BûÊ£ÑõÂã) && is_string($FŸÏûÔä¿‘)) { return $A∑∏ûùÙÖ“->where($f⁄óÿÖ≠‚≈)->delete(); } $B§„´…öØô = is_array($FŸÏûÔä¿‘) ? $FŸÏûÔä¿‘ : array(); goto Dø“⁄Éı†; dÿúŒ’˘≠Ê: $A∑∏ûùÙÖ“->where(array($C„πﬂ⁄˘≈‹ => $B–÷÷øÂÉû))->addAll($fÉ—◊ﬁıÎ®, array(), !0); return !0; goto E‰åÎï≥öΩ; Dì´Î®¶πÈ: $FÖ©ﬂæ¥÷î = $this->tableMeta[$C®≥∏ﬂÕåœ[361]]; $A∑∏ûùÙÖ“ = Model($FÖ©ﬂæ¥÷î); $f⁄óÿÖ≠‚≈ = array($C„πﬂ⁄˘≈‹ => $B–÷÷øÂÉû, $C®≥∏ﬂÕåœ[362] => $FŸÏûÔä¿‘); goto D¶ù•˘â›ö; Dø“⁄Éı†: if (is_string($FŸÏûÔä¿‘)) { $B§„´…öØô[$FŸÏûÔä¿‘] = $BûÊ£ÑõÂã; } $fÉ—◊ﬁıÎ® = array(); foreach ($B§„´…öØô as $f¥ó«ˆı≥Ò => $b¿ÓÙê€¿Ï) { $this->checkLength($b¿ÓÙê€¿Ï, !1, $FÖ©ﬂæ¥÷î . $C®≥∏ﬂÕåœ[4] . $f¥ó«ˆı≥Ò); $fÉ—◊ﬁıÎ®[] = array($C„πﬂ⁄˘≈‹ => $B–÷÷øÂÉû, $C®≥∏ﬂÕåœ[89] => $f¥ó«ˆı≥Ò, $C®≥∏ﬂÕåœ[363] => $b¿ÓÙê€¿Ï); } goto dÿúŒ’˘≠Ê; E£™ﬂ…ä‡£: $C®≥∏ﬂÕåœ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->tableMeta) { return !1; } $C„πﬂ⁄˘≈‹ = $this->tableMeta[$C®≥∏ﬂÕåœ[360]]; goto Dì´Î®¶πÈ; E‰åÎï≥öΩ: } public function metaGet($aÇ¡îÏÂËè, $E‘¡—¯èˆ = false) { goto C≥©ªä€®è; C≥©ªä€®è: $a∞›‘¬ê’‹ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->tableMeta) { return array(); } $c±∫ïπ≤≤ï = $this->tableMeta[$a∞›‘¬ê’‹[360]]; goto Fæ„ÆÚÇíÑ; Fæ„ÆÚÇíÑ: $a≈ÛŒ¯©ìÌ = Model($this->tableMeta[$a∞›‘¬ê’‹[361]]); if ($E‘¡—¯èˆ) { $eíó‰É®„ò = array($c±∫ïπ≤≤ï => $aÇ¡îÏÂËè, $a∞›‘¬ê’‹[89] => $E‘¡—¯èˆ); return $a≈ÛŒ¯©ìÌ->where($eíó‰É®„ò)->getField($a∞›‘¬ê’‹[363]); } $eíó‰É®„ò = array($c±∫ïπ≤≤ï => $aÇ¡îÏÂËè); goto EﬂÛàâø£; EﬂÛàâø£: $DΩÃÁòïã⁄ = $a≈ÛŒ¯©ìÌ->field($a∞›‘¬ê’‹[364])->where($eíó‰É®„ò)->select(); $DΩÃÁòïã⁄ = array_to_keyvalue($DΩÃÁòïã⁄, $a∞›‘¬ê’‹[89], $a∞›‘¬ê’‹[363]); return $DΩÃÁòïã⁄; goto Aèñâ¢›ç˜; Aèñâ¢›ç˜: } private function checkDataAutoHas($B——€Ç„≥â) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $c·—’ﬂÕæì) { if (in_array($B——€Ç„≥â, explode($_SERVER[áí∂¯Â¸Áò][47], $c·—’ﬂÕæì[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$bÇ‚‘‚ñ•ê, $A®ﬂó‚ÙÓµ) { $E™∂¯®ãäÈ =& $_SERVER[áí∂¯Â¸Áò]; foreach ($this->dataAuto as $D†è◊â™—Ø) { $AË’∑¯¨ú = $D†è◊â™—Ø[0]; if (!in_array($A®ﬂó‚ÙÓµ, explode($E™∂¯®ãäÈ[47], $D†è◊â™—Ø[2]))) { continue; } switch (trim($D†è◊â™—Ø[3])) { case $E™∂¯®ãäÈ[313]: case $E™∂¯®ãäÈ[314]: $e∆⁄“‘¶Úô = $D†è◊â™—Ø[1]; $dÀÇèÖŒÁ´ = isset($D†è◊â™—Ø[4]) ? (array) $D†è◊â™—Ø[4] : array(); if ($e∆⁄“‘¶Úô == $E™∂¯®ãäÈ[194] && array_key_exists($AË’∑¯¨ú, $bÇ‚‘‚ñ•ê)) { if (!$bÇ‚‘‚ñ•ê[$AË’∑¯¨ú]) { unset($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú]); } break; } if (isset($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú])) { array_unshift($dÀÇèÖŒÁ´, $bÇ‚‘‚ñ•ê[$AË’∑¯¨ú]); } if ($E™∂¯®ãäÈ[313] == $D†è◊â™—Ø[3]) { $bÇ‚‘‚ñ•ê[$AË’∑¯¨ú] = call_user_func_array($e∆⁄“‘¶Úô, $dÀÇèÖŒÁ´); } else { $bÇ‚‘‚ñ•ê[$AË’∑¯¨ú] = call_user_func_array(array(&$this, $e∆⁄“‘¶Úô), $dÀÇèÖŒÁ´); } break; case $E™∂¯®ãäÈ[265]: $bÇ‚‘‚ñ•ê[$AË’∑¯¨ú] = $bÇ‚‘‚ñ•ê[$D†è◊â™—Ø[1]]; break; case $E™∂¯®ãäÈ[286]: if (isset($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú]) && !is_string($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú])) { $bÇ‚‘‚ñ•ê[$AË’∑¯¨ú] = json_encode_force($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú]); } break; case $E™∂¯®ãäÈ[315]: if ($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú] === $E™∂¯®ãäÈ[33]) { unset($bÇ‚‘‚ñ•ê[$AË’∑¯¨ú]); } break; case $E™∂¯®ãäÈ[316]: $bÇ‚‘‚ñ•ê[$AË’∑¯¨ú] = $D†è◊â™—Ø[1]; default: break; } } if ($A®ﬂó‚ÙÓµ == $E™∂¯®ãäÈ[348]) { $Aö√âÙè≠€ = strtolower($this->db->getDbType()); if (strpos($Aö√âÙè≠€, $E™∂¯®ãäÈ[9]) !== 0) { return; } $Cå§˘ŒﬁåÖ = $this->field(!0)->fields; $D¯ª≠€Öß¯ = $Cå§˘ŒﬁåÖ[$E™∂¯®ãäÈ[244]]; if (isset($Cå§˘ŒﬁåÖ[$E™∂¯®ãäÈ[243]])) { unset($D¯ª≠€Öß¯[$Cå§˘ŒﬁåÖ[$E™∂¯®ãäÈ[243]]]); } foreach ($D¯ª≠€Öß¯ as $e£…’ÿé®å => $A®ﬂó‚ÙÓµ) { if (!isset($bÇ‚‘‚ñ•ê[$e£…’ÿé®å])) { $bÇ‚‘‚ñ•ê[$e£…’ÿé®å] = $E™∂¯®ãäÈ[33]; } } } } private function dataAfterFilter(&$d—ºÙ©â≈¬) { $aô’èù¢„º =& $_SERVER[áí∂¯Â¸Áò]; foreach ($this->dataAuto as $d„’¡®éí˘) { $bﬁ¶ØÃêúË = $d„’¡®éí˘[0]; if (!in_array($aô’èù¢„º[350], explode($aô’èù¢„º[47], $d„’¡®éí˘[2]))) { continue; } if (!isset($d—ºÙ©â≈¬[$bﬁ¶ØÃêúË])) { continue; } switch (trim($d„’¡®éí˘[3])) { case $aô’èù¢„º[313]: case $aô’èù¢„º[314]: $báÒêàÑöó = isset($d„’¡®éí˘[4]) ? (array) $d„’¡®éí˘[4] : array(); array_unshift($báÒêàÑöó, $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË]); if ($aô’èù¢„º[313] == $d„’¡®éí˘[3]) { $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] = call_user_func_array($d„’¡®éí˘[1], $báÒêàÑöó); } else { $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] = call_user_func_array(array(&$this, $d„’¡®éí˘[1]), $báÒêàÑöó); } break; case $aô’èù¢„º[265]: $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] = $d—ºÙ©â≈¬[$d„’¡®éí˘[1]]; break; case $aô’èù¢„º[286]: $DöÔ™òíﬂ… = $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË]; $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] = json_decode($DöÔ™òíﬂ…, !0); if (is_null($d—ºÙ©â≈¬[$bﬁ¶ØÃêúË])) { $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] = $DöÔ™òíﬂ…; } break; case $aô’èù¢„º[315]: if ($d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] === $aô’èù¢„º[33]) { unset($d—ºÙ©â≈¬[$bﬁ¶ØÃêúË]); } break; case $aô’èù¢„º[316]: $d—ºÙ©â≈¬[$bﬁ¶ØÃêúË] = $d„’¡®éí˘[1]; default: break; } } } public function saveAll($cö≤ËÖï®Ô) { goto Aâá°ﬁÙ€Ü; C™¿≈ß∫ôè: $aô√ÒéÁË÷ = array(); $fõﬁˆçîø∏ = count($cö≤ËÖï®Ô); for ($e¯ß«Ôåπ… = 0; $e¯ß«Ôåπ… < $fõﬁˆçîø∏; $e¯ß«Ôåπ…++) { $F ΩÔØÉ•´ = $cö≤ËÖï®Ô[$e¯ß«Ôåπ…]; if (!is_array($F ΩÔØÉ•´) || count($F ΩÔØÉ•´) != 4) { continue; } $Fòì§∞ıŒ¯ = "\125\x50\104\101\x54\105\40\140{$bòê›±úØÆ}\x60\x20\x53\x45\124\x20{$F ΩÔØÉ•´[2]}\x20\75\40\103\101\123\x45\x20{$F ΩÔØÉ•´[0]}\40\12"; if ($aúáÌì£„‰ == 0) { $EíäπõÊ∫Œ = $Fòì§∞ıŒ¯; } $aô√ÒéÁË÷[] = $dìÉçΩ¨»∑[113] . $F ΩÔØÉ•´[1] . $dìÉçΩ¨»∑[113]; $aúáÌì£„‰++; $EíäπõÊ∫Œ .= "\x20\x57\x48\105\x4e\x20\x27{$F ΩÔØÉ•´[1]}\x27\40\124\x48\105\x4e\40\x27{$F ΩÔØÉ•´[3]}\x27\x20\xa"; if ($aúáÌì£„‰ == $e‚è≠åƒÁ˜ || $e¯ß«Ôåπ… == $fõﬁˆçîø∏ - 1) { goto a∂ÁºÒìÂﬁ; DÏ—ëìÍáè: $aô√ÒéÁË÷ = array(); goto c∫ú…£⁄√®; a∂ÁºÒìÂﬁ: $E∑ªŒÌ©ç¶ = implode($dìÉçΩ¨»∑[47], $aô√ÒéÁË÷); $EíäπõÊ∫Œ .= "\x20\x45\116\104\x20\x20\127\110\x45\x52\105\x20{$F ΩÔØÉ•´[0]}\x20\111\116\40\x28{$E∑ªŒÌ©ç¶}\x29\40"; $this->execute($EíäπõÊ∫Œ); goto A˘≤†ßÉÜ±; A˘≤†ßÉÜ±: $aúáÌì£„‰ = 0; $EíäπõÊ∫Œ = $Fòì§∞ıŒ¯; $this->chunkEventCheck(count($aô√ÒéÁË÷)); goto DÏ—ëìÍáè; c∫ú…£⁄√®: } } goto eË¿Œ¨Æ—„; eË¿Œ¨Æ—„: $this->chunkEventSet(); goto dﬂœ‘ëÇ›®; bäƒÉ≠ö¯û: $cö≤ËÖï®Ô = is_array($cö≤ËÖï®Ô) ? $cö≤ËÖï®Ô : array(); $EíäπõÊ∫Œ = $dìÉçΩ¨»∑[365]; $aúáÌì£„‰ = 0; goto C™¿≈ß∫ôè; Aâá°ﬁÙ€Ü: $dìÉçΩ¨»∑ =& $_SERVER[áí∂¯Â¸Áò]; $bòê›±úØÆ = $this->tablePrefix . $this->tableName; $e‚è≠åƒÁ˜ = self::SQL_WHERE_IN_CHUNK; goto bäƒÉ≠ö¯û; dﬂœ‘ëÇ›®: } public function saveAllEach($aâ—∞»ÔÌá) { $e¶∫çâÜÜ⁄ =& $_SERVER[áí∂¯Â¸Áò]; $A¥£ëÙïÖõ = $this->tablePrefix . $this->tableName; foreach ($aâ—∞»ÔÌá as $cúªèå–Ë¢) { if (!is_array($cúªèå–Ë¢) || count($cúªèå–Ë¢) != 4) { continue; } $dÔ…ÉÙ´ì– = $cúªèå–Ë¢[0] . $e¶∫çâÜÜ⁄[366] . $cúªèå–Ë¢[1] . $e¶∫çâÜÜ⁄[113]; $Fé∫çñΩêç = $cúªèå–Ë¢[2] . $e¶∫çâÜÜ⁄[366] . $cúªèå–Ë¢[3] . $e¶∫çâÜÜ⁄[113]; $C¨ÉﬂïÉ´ˆ = "\165\x70\144\x61\x74\145\x20{$A¥£ëÙïÖõ}\40\163\145\164\x20{$Fé∫çñΩêç}\40\167\x68\145\162\x65\40{$dÔ…ÉÙ´ì–}\x3b"; $this->execute($C¨ÉﬂïÉ´ˆ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($D ‘õëƒ∑« = false, $b˘‘ªÖÑﬁè = false) { $this->_chunkEvent = $D ‘õëƒ∑«; $this->_chunkEventParam = $b˘‘ªÖÑﬁè; } private function chunkEventCheck($bù—◊√ä”´) { if (!$this->_chunkEvent) { return; } $b¨¨«±“Çñ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $b¨¨«±“Çñ[$_SERVER[áí∂¯Â¸Áò][367]] = $bù—◊√ä”´; Hook::trigger($this->_chunkEvent, $b¨¨«±“Çñ); } public function addAll($EüÓ∆·¨òﬁ, $D¡Ò˜ÿà◊· = array(), $düÃÓÆ˜Æú = false) { goto D‹ÚÏëäßé; E°î‰úØÆ∑: if (empty($EüÓ∆·¨òﬁ)) { $this->error = think_lang($A±•Ó⁄Î≥û[263]); return !1; } $D¡Ò˜ÿà◊· = $this->_parseOptions($D¡Ò˜ÿà◊·); foreach ($EüÓ∆·¨òﬁ as $b˜åÌ…æ∆π => $bâ‡ﬂÕùÉî) { $EüÓ∆·¨òﬁ[$b˜åÌ…æ∆π] = $this->_facade($bâ‡ﬂÕùÉî); $this->_beforeInsert($EüÓ∆·¨òﬁ[$b˜åÌ…æ∆π], $D¡Ò˜ÿà◊·); } goto eãç∑ÙÈ„›; D‹ÚÏëäßé: $A±•Ó⁄Î≥û =& $_SERVER[áí∂¯Â¸Áò]; ignore_timeout(); $eÛ•ë°¨÷Œ = self::SQL_WHERE_IN_CHUNK; goto E°î‰úØÆ∑; eãç∑ÙÈ„›: if (method_exists($this->db, $A±•Ó⁄Î≥û[264])) { for ($C€Ë¯›Œö÷ = 0; $C€Ë¯›Œö÷ < count($EüÓ∆·¨òﬁ); $C€Ë¯›Œö÷ += $eÛ•ë°¨÷Œ) { $f∞ª†¬‚ò± = array_slice($EüÓ∆·¨òﬁ, $C€Ë¯›Œö÷, $eÛ•ë°¨÷Œ); if (!is_array($f∞ª†¬‚ò±) || count($f∞ª†¬‚ò±) == 0) { break; } $Dèäïñ€Ë◊ = $this->db->insertAll($f∞ª†¬‚ò±, $D¡Ò˜ÿà◊·, $düÃÓÆ˜Æú); $this->chunkEventCheck(count($f∞ª†¬‚ò±)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($EüÓ∆·¨òﬁ as $b˜åÌ…æ∆π => $bâ‡ﬂÕùÉî) { $Dèäïñ€Ë◊ = $this->db->insert($bâ‡ﬂÕùÉî, $D¡Ò˜ÿà◊·, $düÃÓÆ˜Æú); } $this->commit(); } if (!1 !== $Dèäïñ€Ë◊) { $Cß©º›»ê£ = $this->getLastInsID(); if ($Cß©º›»ê£) { return $Cß©º›»ê£; } } return $Dèäïñ€Ë◊; goto Fﬁ á°òÑÚ; Fﬁ á°òÑÚ: } public function save($FÌ †—´√≥ = '', $A§àªπ¨é¿ = array()) { goto aß¡üáêõ¿; a√ò«ÕÕÊ‘: $cÌÉäù…©⁄ = $Bƒå´ôß±À[$a ¬∫√ßÊê[267]][$C±·ä£∫µ‘][1]; $cÌÉäù…©⁄ = is_array($cÌÉäù…©⁄) ? $cÌÉäù…©⁄ : array(); $FÈ°—’ñìé = count($cÌÉäù…©⁄); goto B≠î«›¢∫ö; aß¡üáêõ¿: $a ¬∫√ßÊê =& $_SERVER[áí∂¯Â¸Áò]; $C∫â©Ç†œú = self::SQL_WHERE_IN_CHUNK; $Bƒå´ôß±À = $this->optionsValue(); goto F€ºœçí‰ì; F€ºœçí‰ì: $C±·ä£∫µ‘ = $this->findWhereField($Bƒå´ôß±À); if (!$C±·ä£∫µ‘) { return parent::save($FÌ †—´√≥, $A§àªπ¨é¿); } $AÈëÉŒâ¥˘ = 0; goto a√ò«ÕÕÊ‘; B≠î«›¢∫ö: for ($D¿Ç‘ÑÕ±Ω = 0; $D¿Ç‘ÑÕ±Ω < $FÈ°—’ñìé; $D¿Ç‘ÑÕ±Ω += $C∫â©Ç†œú) { $E∑πì∫¯ã® = array_slice($cÌÉäù…©⁄, $D¿Ç‘ÑÕ±Ω, $C∫â©Ç†œú); if (!is_array($E∑πì∫¯ã®) || count($E∑πì∫¯ã®) == 0) { break; } $Bƒå´ôß±À[$a ¬∫√ßÊê[267]][$C±·ä£∫µ‘][1] = $E∑πì∫¯ã®; $this->optionsValue($Bƒå´ôß±À); $AÈëÉŒâ¥˘ += parent::save($FÌ †—´√≥, $A§àªπ¨é¿); $this->chunkEventCheck(count($E∑πì∫¯ã®)); } $this->chunkEventSet(); return $AÈëÉŒâ¥˘; goto Bé‘«≤‰™á; Bé‘«≤‰™á: } public function add($a¨ÚÌΩÏÒÖ = '', $aÈ‘Ì≥’øé = array(), $aãÃ÷ÌëâÑ = false) { if ($this->addTaskStatus && is_array($a¨ÚÌΩÏÒÖ)) { $this->addTaskData[] = $a¨ÚÌΩÏÒÖ; return; } return parent::add($a¨ÚÌΩÏÒÖ, $aÈ‘Ì≥’øé, $aãÃ÷ÌëâÑ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($CÁﬁ˜ïÂÖß = array()) { goto EÛ†ã„◊õ; E≈ß“ãê¢Á: $A…Ì›‚–ë‹ = $this->findWhereField($BÖ”É∂†ù—); if (!$A…Ì›‚–ë‹ || isset($BÖ”É∂†ù—[$DÌ¥Ã≠øê≠[284]]) || isset($BÖ”É∂†ù—[$DÌ¥Ã≠øê≠[344]])) { return parent::select($CÁﬁ˜ïÂÖß); } $F¥á€îÈæö = $BÖ”É∂†ù—[$DÌ¥Ã≠øê≠[267]][$A…Ì›‚–ë‹][1]; goto fÏ»çøÃ≈Œ; fÏ»çøÃ≈Œ: $F¥á€îÈæö = is_array($F¥á€îÈæö) ? $F¥á€îÈæö : array(); $EÆ„Òîøä· = null; for ($C∏‚È±‡∫´ = 0; $C∏‚È±‡∫´ < count($F¥á€îÈæö); $C∏‚È±‡∫´ += $cÉ–®åµ´Ò) { $e•ãØÉ¿©‘ = array_slice($F¥á€îÈæö, $C∏‚È±‡∫´, $cÉ–®åµ´Ò); if (!is_array($e•ãØÉ¿©‘) || count($e•ãØÉ¿©‘) == 0) { break; } $BÖ”É∂†ù—[$DÌ¥Ã≠øê≠[267]][$A…Ì›‚–ë‹][1] = $e•ãØÉ¿©‘; $this->optionsValue($BÖ”É∂†ù—); $C≤äÒÑàÒ∆ = parent::select($CÁﬁ˜ïÂÖß); if (!$C≤äÒÑàÒ∆) { continue; } if (is_null($EÆ„Òîøä·)) { $EÆ„Òîøä· = array(); } $EÆ„Òîøä· = array_merge($EÆ„Òîøä·, $C≤äÒÑàÒ∆); } goto e›ÇÛ–ß‡Œ; EÛ†ã„◊õ: $DÌ¥Ã≠øê≠ =& $_SERVER[áí∂¯Â¸Áò]; $cÉ–®åµ´Ò = self::SQL_WHERE_IN_CHUNK; $BÖ”É∂†ù— = $this->optionsValue(); goto E≈ß“ãê¢Á; e›ÇÛ–ß‡Œ: return $EÆ„Òîøä·; goto AÆÊ£ìÕìÚ; AÆÊ£ìÕìÚ: } public function delete($A°Ïèà€â˘ = array()) { goto Aï∫û’ãó»; dÓπÈâÑºã: return $CÕ¯¨«ÖÏ÷; goto cÂûôùÆ÷è; Aï∫û’ãó»: $EßÁßãöùç =& $_SERVER[áí∂¯Â¸Áò]; $B†Û‹ª∑£Â = self::SQL_WHERE_IN_CHUNK; $DëıŸ„†“ô = $this->optionsValue(); goto bÂìÂ≤˜õ‡; c©∑ôÑÎ¢¨: $c≥í®Ù†–¬ = $DëıŸ„†“ô[$EßÁßãöùç[267]][$dáË€áô©±][1]; $c≥í®Ù†–¬ = is_array($c≥í®Ù†–¬) ? $c≥í®Ù†–¬ : array(); for ($B¬œ»áÆ˜Ñ = 0; $B¬œ»áÆ˜Ñ < count($c≥í®Ù†–¬); $B¬œ»áÆ˜Ñ += $B†Û‹ª∑£Â) { $dæÔà∂íÇÚ = array_slice($c≥í®Ù†–¬, $B¬œ»áÆ˜Ñ, $B†Û‹ª∑£Â); if (!is_array($dæÔà∂íÇÚ) || count($dæÔà∂íÇÚ) == 0) { break; } $DëıŸ„†“ô[$EßÁßãöùç[267]][$dáË€áô©±][1] = $dæÔà∂íÇÚ; $this->optionsValue($DëıŸ„†“ô); $CÕ¯¨«ÖÏ÷ += parent::delete($A°Ïèà€â˘); } goto dÓπÈâÑºã; bÂìÂ≤˜õ‡: $dáË€áô©± = $this->findWhereField($DëıŸ„†“ô); if (!$dáË€áô©±) { return parent::delete($A°Ïèà€â˘); } $CÕ¯¨«ÖÏ÷ = 0; goto c©∑ôÑÎ¢¨; cÂûôùÆ÷è: } private function findWhereField($C”äóÛÈ‰∆) { $Eèÿ¯⁄◊π’ =& $_SERVER[áí∂¯Â¸Áò]; $A–®µÃ±´¯ = self::SQL_WHERE_IN_CHUNK; if (!is_array($C”äóÛÈ‰∆) || !is_array($C”äóÛÈ‰∆[$Eèÿ¯⁄◊π’[267]])) { return !1; } foreach ($C”äóÛÈ‰∆[$Eèÿ¯⁄◊π’[267]] as $Cô´ıÏÃÛŸ => $AÜÃñÌ©Ìë) { if (is_array($AÜÃñÌ©Ìë) && isset($AÜÃñÌ©Ìë[0]) && is_string($AÜÃñÌ©Ìë[0]) && strtolower($AÜÃñÌ©Ìë[0]) == $Eèÿ¯⁄◊π’[7] && is_array($AÜÃñÌ©Ìë[1]) && count($AÜÃñÌ©Ìë[1]) > $A–®µÃ±´¯) { ignore_timeout(); return $Cô´ıÏÃÛŸ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\x73\164\145\x6d\117\160\164\x69\x6f\156"; public $field = array(); public function listData($fãáçÆ«≠â = false, $c‹à˜ê©á∑ = "\x6d\x6f\144\x69\146\x79\124\151\x6d\x65", $cºËÆœ∞Ç„ = false) { $EŸÉÛ˜ü∞Ú = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$EŸÉÛ˜ü∞Ú) { return $fãáçÆ«≠â ? null : array(); } if (!$fãáçÆ«≠â) { $EŸÉÛ˜ü∞Ú = array_filter(array_values($EŸÉÛ˜ü∞Ú)); return array_sort_by($EŸÉÛ˜ü∞Ú, $c‹à˜ê©á∑, $cºËÆœ∞Ç„); } return $EŸÉÛ˜ü∞Ú[$_SERVER[áí∂¯Â¸Áò][368] . $fãáçÆ«≠â]; } public function insert($FëÍºãˆ≤ë) { goto B∂§àè€ëÿ; C˜îÜ†üíá: $E◊≠ôéÀ¬« = $E◊≠ôéÀ¬« ? $E◊≠ôéÀ¬« : 0; $FëÍºãˆ≤ë[$E‘ı„©œ¥[371]] = ++$E◊≠ôéÀ¬«; $FëÍºãˆ≤ë[$E‘ı„©œ¥[191]] = time(); goto A©ªË≈•ıå; B∂§àè€ëÿ: $E‘ı„©œ¥ =& $_SERVER[áí∂¯Â¸Áò]; $FëÍºãˆ≤ë = array_field_key($FëÍºãˆ≤ë, $this->field); $E◊≠ôéÀ¬« = Model($this->modelType)->get($E‘ı„©œ¥[369], $this->optionType . $E‘ı„©œ¥[370]); goto C˜îÜ†üíá; d¥®Êﬂ‰ï…: return $E◊≠ôéÀ¬«; goto A‚Èûó≠ÏÂ; A©ªË≈•ıå: $FëÍºãˆ≤ë[$E‘ı„©œ¥[107]] = time(); Model($this->modelType)->set($E‘ı„©œ¥[369], $E◊≠ôéÀ¬«, $this->optionType . $E‘ı„©œ¥[370]); Model($this->modelType)->set($E‘ı„©œ¥[368] . $E◊≠ôéÀ¬«, $FëÍºãˆ≤ë, $this->optionType); goto d¥®Êﬂ‰ï…; A‚Èûó≠ÏÂ: } public function update($bÍ’ÎøÚ√ó, $bı≠ñ ≈∆ﬂ) { goto B◊äàºïêö; CåƒâÔå≤: return Model($this->modelType)->set($F¯í–ùÒÁ—[368] . $bÍ’ÎøÚ√ó, $bı≠ñ ≈∆ﬂ, $this->optionType); goto D˘©„⁄≥äè; B◊äàºïêö: $F¯í–ùÒÁ— =& $_SERVER[áí∂¯Â¸Áò]; $bı≠ñ ≈∆ﬂ = array_field_key($bı≠ñ ≈∆ﬂ, $this->field); $F—ﬁáÌ≥Â∆ = $this->listData($bÍ’ÎøÚ√ó); goto fæÕä—¯âÀ; fæÕä—¯âÀ: if (!$F—ﬁáÌ≥Â∆) { return !1; } $bı≠ñ ≈∆ﬂ = array_merge($F—ﬁáÌ≥Â∆, $bı≠ñ ≈∆ﬂ); $bı≠ñ ≈∆ﬂ[$F¯í–ùÒÁ—[107]] = time(); goto CåƒâÔå≤; D˘©„⁄≥äè: } public function remove($e¬à√íôøò) { return Model($this->modelType)->remove($_SERVER[áí∂¯Â¸Áò][368] . $e¬à√íôøò, $this->optionType); } public function clear() { $B¶ÑÆÓÌº‰ =& $_SERVER[áí∂¯Â¸Áò]; Model($this->modelType)->remove($B¶ÑÆÓÌº‰[369], $this->optionType . $B¶ÑÆÓÌº‰[370]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($eåò¨≠†»•, $f ¡Ò´≥»¶) { if (!$f ¡Ò´≥»¶) { return !1; } $B÷îÑàäŒ¶ = $this->listData(); $B÷îÑàäŒ¶ = array_to_keyvalue($B÷îÑàäŒ¶, $eåò¨≠†»•); return isset($B÷îÑàäŒ¶[$f ¡Ò´≥»¶]) ? $B÷îÑàäŒ¶[$f ¡Ò´≥»¶] : !1; } public function findByName($AÊäï∂ﬁ’ï) { return $this->findByKey($_SERVER[áí∂¯Â¸Áò][28], $AÊäï∂ﬁ’ï); } protected function resetData($A¡áäÒﬂ£‘) { $fíﬂ≈Ûåèâ =& $_SERVER[áí∂¯Â¸Áò]; $A¡áäÒﬂ£‘ = is_array($A¡áäÒﬂ£‘) ? $A¡áäÒﬂ£‘ : array(); $Añºë£Øâß = array(); for ($a’Ô¶äÎÖ∆ = 0; $a’Ô¶äÎÖ∆ < count($A¡áäÒﬂ£‘); $a’Ô¶äÎÖ∆++) { $Añºë£Øâß[$fíﬂ≈Ûåèâ[368] . $A¡áäÒﬂ£‘[$a’Ô¶äÎÖ∆][$fíﬂ≈Ûåèâ[371]]] = $A¡áäÒﬂ£‘[$a’Ô¶äÎÖ∆]; } return Model($this->modelType)->set($Añºë£Øâß, !1, $this->optionType); } private function getAutoName($Dâîì˜ãåâ) { $e∏çøìÖ–ä = array_to_keyvalue($this->listData(), $_SERVER[áí∂¯Â¸Áò][28]); if (!$e∏çøìÖ–ä || !isset($e∏çøìÖ–ä[$Dâîì˜ãåâ])) { return $Dâîì˜ãåâ; } for ($e∏Ç›ùñ‹ü = 1; $e∏Ç›ùñ‹ü < count($e∏çøìÖ–ä); $e∏Ç›ùñ‹ü++) { $aÛ≠’¬ôãŒ = $Dâîì˜ãåâ . "\x28{$e∏Ç›ùñ‹ü}\x29"; if (!isset($e∏çøìÖ–ä[$aÛ≠’¬ôãŒ])) { return $aÛ≠’¬ôãŒ; } } return $aÛ≠’¬ôãŒ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($dÙ†≥â⁄è— = false, $f⁄äÂæÖ’ã = '', $EïıúõŒß§ = false) { goto d±¿÷Ç˜Œª; FãµÓ≠ëÏñ: $bàÀﬂÌ§≈ã = is_array($bàÀﬂÌ§≈ã) ? $bàÀﬂÌ§≈ã : array(); if (is_array($cÒÓñﬂ≈¯Ï)) { $cÒÓñﬂ≈¯Ï = array_merge($bàÀﬂÌ§≈ã, $cÒÓñﬂ≈¯Ï); return $dÙ†≥â⁄è— ? isset($cÒÓñﬂ≈¯Ï[$dÙ†≥â⁄è—]) ? $cÒÓñﬂ≈¯Ï[$dÙ†≥â⁄è—] : null : $cÒÓñﬂ≈¯Ï; } $EŸëÃ—óÏ≤ = $this->filterWhere(array($fªî–öÖûÿ[29] => $f⁄äÂæÖ’ã)); goto Fıé„áÁé¶; C∂ãüœ≠Ö⁄: $this->cacheSet($f⁄äÂæÖ’ã, $cÒÓñﬂ≈¯Ï); $cÒÓñﬂ≈¯Ï = array_merge($bàÀﬂÌ§≈ã, $cÒÓñﬂ≈¯Ï); return $dÙ†≥â⁄è— ? $cÒÓñﬂ≈¯Ï[$dÙ†≥â⁄è—] : $cÒÓñﬂ≈¯Ï; goto B≥ÜçÉ‡’ñ; d±¿÷Ç˜Œª: $fªî–öÖûÿ =& $_SERVER[áí∂¯Â¸Áò]; $cÒÓñﬂ≈¯Ï = $this->cacheGet($f⁄äÂæÖ’ã); $bàÀﬂÌ§≈ã = $this->optionDefault($f⁄äÂæÖ’ã); goto FãµÓ≠ëÏñ; Fıé„áÁé¶: $cÒÓñﬂ≈¯Ï = $this->where($EŸëÃ—óÏ≤)->select(); $cÒÓñﬂ≈¯Ï = array_to_keyvalue($cÒÓñﬂ≈¯Ï, $fªî–öÖûÿ[89], $fªî–öÖûÿ[363]); foreach ($cÒÓñﬂ≈¯Ï as $bÌ∂é¿ÀÑ” => $E∑ÍÉû“ı∆) { if ($EïıúõŒß§ || in_array($bÌ∂é¿ÀÑ”, $this->jsonField)) { $cÒÓñﬂ≈¯Ï[$bÌ∂é¿ÀÑ”] = json_decode($E∑ÍÉû“ı∆, !0); } } goto C∂ãüœ≠Ö⁄; B≥ÜçÉ‡’ñ: } public function set($d∂Üè±Œà”, $a´â¢µÈí≤ = false, $Dõ≈ö•ÖöÒ = '') { goto A‰¿¢„Ñπ–; A‰¿¢„Ñπ–: $A∂¥Ô„≤Ë‹ =& $_SERVER[áí∂¯Â¸Áò]; $this->cacheRemove($Dõ≈ö•ÖöÒ); $fî»Ì÷Ë§… = array(); goto bûÛÂŸâ√Ñ; bûÛÂŸâ√Ñ: $fãØ˘∂ö¿ = is_array($d∂Üè±Œà”) ? $d∂Üè±Œà” : array($d∂Üè±Œà” => $a´â¢µÈí≤); foreach ($fãØ˘∂ö¿ as $CÓÖ÷À©á => $CıéäÉÉà∂) { if (is_array($CıéäÉÉà∂)) { $CıéäÉÉà∂ = json_encode_force($CıéäÉÉà∂); } $this->checkLength($CıéäÉÉà∂, !1, $this->tableName . $A∂¥Ô„≤Ë‹[4] . $d∂Üè±Œà”); $CıéäÉÉà∂ = self::textEncode($CıéäÉÉà∂); $fãØ˘∂ö¿ = array($A∂¥Ô„≤Ë‹[29] => $Dõ≈ö•ÖöÒ, $A∂¥Ô„≤Ë‹[89] => $CÓÖ÷À©á, $A∂¥Ô„≤Ë‹[363] => $CıéäÉÉà∂); $fî»Ì÷Ë§…[] = $this->filterWhere($fãØ˘∂ö¿); } if (!$fî»Ì÷Ë§…) { return !0; } goto B˜ô⁄÷Ñ¬Æ; B˜ô⁄÷Ñ¬Æ: return $this->addAll($fî»Ì÷Ë§…, array(), !0); goto DñÿÈÂ’π≤; DñÿÈÂ’π≤: } protected function optionDefault($F…ÜãÇâã¢ = '') { return !1; } public function setDeep($C–ŸîÊÃ·Í, $EüÆ‡ö±ﬂµ = false, $C∞áÙíΩ´§ = '') { $EäËò∑©…∏ = explode($_SERVER[áí∂¯Â¸Áò][91], $C–ŸîÊÃ·Í); $fÒ∂ëÑ–∫™ = $this->get(); array_set_value($fÒ∂ëÑ–∫™, $C–ŸîÊÃ·Í, $EüÆ‡ö±ﬂµ); $this->set($EäËò∑©…∏[0], $fÒ∂ëÑ–∫™[$EäËò∑©…∏[0]], $C∞áÙíΩ´§); } public function remove($f¬€†√âÈÛ, $B“”äÀüÒÊ = '') { $Aπﬁ”ﬂÊ≠Í =& $_SERVER[áí∂¯Â¸Áò]; $this->cacheRemove($B“”äÀüÒÊ); $e¥Õ±»∑±« = $this->filterWhere(array($Aπﬁ”ﬂÊ≠Í[89] => $f¬€†√âÈÛ, $Aπﬁ”ﬂÊ≠Í[29] => $B“”äÀüÒÊ)); if (is_null($f¬€†√âÈÛ)) { unset($e¥Õ±»∑±«[$Aπﬁ”ﬂÊ≠Í[89]]); } return $this->where($e¥Õ±»∑±«)->delete(); } public function cacheSet($Fã›¢»£Ê£, $CÜÌÉÏÇ©∫ = false) { return Cache::set($this->cacheKey($Fã›¢»£Ê£), $CÜÌÉÏÇ©∫); } public function cacheGet($B∆û‚ã◊äÖ) { return Cache::get($this->cacheKey($B∆û‚ã◊äÖ)); } public function cacheRemove($aÈ®“™ÓÜò) { return Cache::remove($this->cacheKey($aÈ®“™ÓÜò)); } protected function filterWhere($AÍÂÀú§Ãé) { return $AÍÂÀú§Ãé; } protected function cacheKey($dçﬂœÿ∑õ≥) { return $dçﬂœÿ∑õ≥; } } goto FıÀπıéÊ÷; DÁ∞ûõ„•ä: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($aú…Çı—ë«) { parent::__construct($aú…Çı—ë«); $this->signatureVersion($_SERVER[áí∂¯Â¸Áò][204]); } public function uploadFormData($Bé¡øıñ§Á, $e¡ˆñ⁄Ï„Ë = 3600) { goto Aã¶åΩ©ûÕ; E»µùíÒ°”: $AÕµÙ”™æØ = $fÁÓÎïå≥ç[59]; $DåÌÖÜØò® = gmdate($fÁÓÎïå≥ç[1142]); $EÕ´Ö…•»Ω = gmdate($fÁÓÎïå≥ç[696]); goto F∞´∂ãóª¡; Aã¶åΩ©ûÕ: $fÁÓÎïå≥ç =& $_SERVER[áí∂¯Â¸Áò]; $Eç∆éÚÂÏà = $fÁÓÎïå≥ç[189]; $D«‘⁄≤Ë»ı = $fÁÓÎïå≥ç[1141]; goto E»µùíÒ°”; DÍŸı•åù›: $e·∂ÊàÌ¶á = array($fÁÓÎïå≥ç[203] => $fÁÓÎïå≥ç[33], $fÁÓÎïå≥ç[1153] => $fÁÓÎïå≥ç[33], $fÁÓÎïå≥ç[1111] => $Eç∆éÚÂÏà, $fÁÓÎïå≥ç[1115] => $a”Ωí««ê§, $fÁÓÎïå≥ç[1119] => $cé›£âÎÔ°, $fÁÓÎïå≥ç[1154] => $A¶ı–öó ÷, $fÁÓÎïå≥ç[1155] => $D«‘⁄≤Ë»ı, $fÁÓÎïå≥ç[1156] => $DåÌÖÜØò®, $fÁÓÎïå≥ç[1157] => $cËõçÓÇäö, $fÁÓÎïå≥ç[1158] => $Dìõ∏ûı®É, $fÁÓÎïå≥ç[173] => $this->getHost()); return $e·∂ÊàÌ¶á; goto D‹∆ï÷Ì‚ü; a÷úâÔ”°Ç: $d¯ı¿è€Ê» = array($this->accessKey, $EÕ´Ö…•»Ω, $this->region, $AÕµÙ”™æØ, $d√ΩÆä¡“é); $A¶ı–öó ÷ = implode($fÁÓÎïå≥ç[8], $d¯ı¿è€Ê»); $cÁà«ÂÙ°â = array($fÁÓÎïå≥ç[1109] => gmdate($fÁÓÎïå≥ç[1108], strtotime($fÁÓÎïå≥ç[1144])), $fÁÓÎïå≥ç[1110] => array(array($fÁÓÎïå≥ç[1112] => $this->bucket), array($fÁÓÎïå≥ç[1111] => $Eç∆éÚÂÏà), array($fÁÓÎïå≥ç[1113], $fÁÓÎïå≥ç[1114], $fÁÓÎïå≥ç[33]), array($fÁÓÎïå≥ç[1113], $fÁÓÎïå≥ç[1145], $fÁÓÎïå≥ç[33]), array($fÁÓÎïå≥ç[1113], $fÁÓÎïå≥ç[1146], $fÁÓÎïå≥ç[33]), array($fÁÓÎïå≥ç[1115] => $a”Ωí««ê§), array($fÁÓÎïå≥ç[1147] => $A¶ı–öó ÷), array($fÁÓÎïå≥ç[1148] => $D«‘⁄≤Ë»ı), array($fÁÓÎïå≥ç[1149] => $DåÌÖÜØò®), array($fÁÓÎïå≥ç[1150] => $cËõçÓÇäö))); goto EÕ≤ÓÓøﬂƒ; EÕ≤ÓÓøﬂƒ: $cé›£âÎÔ° = base64_encode(json_encode($cÁà«ÂÙ°â)); $Eê«é„√ŒÕ = hash_hmac($fÁÓÎïå≥ç[1151], $EÕ´Ö…•»Ω, $fÁÓÎïå≥ç[1152] . $this->secret, !0); $bÏü¢Æ–π≥ = hash_hmac($fÁÓÎïå≥ç[1151], $this->region, $Eê«é„√ŒÕ, !0); goto C©†ﬁêúﬁç; C©†ﬁêúﬁç: $F„≥‘„ÁÉ‰ = hash_hmac($fÁÓÎïå≥ç[1151], $AÕµÙ”™æØ, $bÏü¢Æ–π≥, !0); $BäÔ±¬ˆ‘Ç = hash_hmac($fÁÓÎïå≥ç[1151], $d√ΩÆä¡“é, $F„≥‘„ÁÉ‰, !0); $Dìõ∏ûı®É = hash_hmac($fÁÓÎïå≥ç[1151], $cé›£âÎÔ°, $BäÔ±¬ˆ‘Ç); goto DÍŸı•åù›; F∞´∂ãóª¡: $d√ΩÆä¡“é = $fÁÓÎïå≥ç[1143]; $cËõçÓÇäö = $e¡ˆñ⁄Ï„Ë . $fÁÓÎïå≥ç[33]; $a”Ωí««ê§ = $fÁÓÎïå≥ç[1107]; goto a÷úâÔ”°Ç; D‹∆ï÷Ì‚ü: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($aŒ¬ã–ﬂ è) { parent::__construct(); if (count($aŒ¬ã–ﬂ è) > 0) { $this->_init($aŒ¬ã–ﬂ è); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($CÉÁ¿öﬂÔÉ) { $eÛ”Ë™¢¡“ =& $_SERVER[áí∂¯Â¸Áò]; global $config; $this->appCharset = $config[$eÛ”Ë™¢¡“[1159]]; $this->systemCharset = $config[$eÛ”Ë™¢¡“[1160]]; if (isset($CÉÁ¿öﬂÔÉ[$eÛ”Ë™¢¡“[1161]]) && $CÉÁ¿öﬂÔÉ[$eÛ”Ë™¢¡“[1161]]) { $this->systemCharset = $CÉÁ¿öﬂÔÉ[$eÛ”Ë™¢¡“[1161]]; } } public function iconvApp($Añ¡≤ßø˜¯) { return $this->iconvTo($Añ¡≤ßø˜¯, $this->systemCharset, $this->appCharset); } public function iconvSystem($AÙ‡ÏÖ‰’∆) { return $this->iconvTo($AÙ‡ÏÖ‰’∆, $this->appCharset, $this->systemCharset); } public function getPathOuter($e…„Ω»¡ÚÉ) { goto CÖäœÕ‚óÎ; CÖäœÕ‚óÎ: $C±ŸˆôÍô⁄ =& $_SERVER[áí∂¯Â¸Áò]; $cˆÓÛìï˘Î = $this->iconvApp($this->pathBase); $e…„Ω»¡ÚÉ = $this->iconvApp($e…„Ω»¡ÚÉ); goto díÜ•Çÿé≠; D‚òë©ÑúÌ: return $this->pathDriver . $C±ŸˆôÍô⁄[8] . ltrim($e…„Ω»¡ÚÉ, $C±ŸˆôÍô⁄[8]); goto cÌíâï¢‹ ; díÜ•Çÿé≠: if (substr($cˆÓÛìï˘Î, 0, 2) == $C±ŸˆôÍô⁄[1162]) { $cˆÓÛìï˘Î = BASIC_PATH . substr($cˆÓÛìï˘Î, 2); } if (substr($e…„Ω»¡ÚÉ, 0, 2) == $C±ŸˆôÍô⁄[1162]) { $e…„Ω»¡ÚÉ = BASIC_PATH . substr($e…„Ω»¡ÚÉ, 2); } $cˆÓÛìï˘Î = KodIO::clear($cˆÓÛìï˘Î); goto a∑¨‹€¶îö; a∑¨‹€¶îö: $e…„Ω»¡ÚÉ = KodIO::clear($e…„Ω»¡ÚÉ); $e…„Ω»¡ÚÉ = substr($e…„Ω»¡ÚÉ, strlen($cˆÓÛìï˘Î)); if (empty($this->pathDriver)) { return $e…„Ω»¡ÚÉ; } goto D‚òë©ÑúÌ; cÌíâï¢‹ : } private function _init($a–èÌ„¡≠‰ = array()) { $Aå√∞ä¿•¬ =& $_SERVER[áí∂¯Â¸Áò]; if (!function_exists($Aå√∞ä¿•¬[1163])) { throw new Exception(LNG($Aå√∞ä¿•¬[1164])); } $this->config = $a–èÌ„¡≠‰; $this->charsetReset($a–èÌ„¡≠‰); foreach ($a–èÌ„¡≠‰ as $EÖØ∞ß€¨ => $fŒ˜àçäÖë) { if (isset($this->{$EÖØ∞ß€¨})) { $this->{$EÖØ∞ß€¨} = $fŒ˜àçäÖë; } } return $this->_login($a–èÌ„¡≠‰); } private function _login($aÁ±ªÔˆÂÂ) { goto EÑË¥µπ®Ü; EÑË¥µπ®Ü: $aòÉµâ‡Õ“ =& $_SERVER[áí∂¯Â¸Áò]; static $bÈÎˆ√áŸè = array(); $Aøéﬂ±ﬂü√ = md5(json_encode($aÁ±ªÔˆÂÂ)); goto bÏ–øÕ°–Í; bÏ–øÕ°–Í: if (isset($bÈÎˆ√áŸè[$Aøéﬂ±ﬂü√])) { foreach ($bÈÎˆ√áŸè[$Aøéﬂ±ﬂü√] as $e¡Ë¥‚—≤Ê => $DÇöÃÜæúﬂ) { $this->{$e¡Ë¥‚—≤Ê} = $DÇöÃÜæúﬂ; } return !0; } $EèÔı·î‘À = parse_url(trim($this->server, $aòÉµâ‡Õ“[8])); $this->host = $EèÔı·î‘À[$aòÉµâ‡Õ“[173]]; goto AæàÛºÇµ°; b∫≤È£Œïã: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $BÁÍ¯“ŒïÜ = @ftp_login($this->connect, $this->username, $this->userpass); goto FäÈÆÇÃä©; dïâöÖç∫ﬂ: $bÈÎˆ√áŸè[$Aøéﬂ±ﬂü√] = array($aòÉµâ‡Õ“[1168] => $this->connect, $aòÉµâ‡Õ“[173] => $this->host, $aòÉµâ‡Õ“[172] => $this->scheme, $aòÉµâ‡Õ“[174] => $this->port); return $BÁÍ¯“ŒïÜ; goto dàŒ∂É®Úú; AæàÛºÇµ°: $bıõ√Ü¯» = isset($EèÔı·î‘À[$aòÉµâ‡Õ“[172]]) && $EèÔı·î‘À[$aòÉµâ‡Õ“[172]] == $aòÉµâ‡Õ“[1165] ? !0 : !1; $this->scheme = $bıõ√Ü¯» ? $aòÉµâ‡Õ“[1166] : $aòÉµâ‡Õ“[1167]; $this->port = isset($EèÔı·î‘À[$aòÉµâ‡Õ“[174]]) ? $EèÔı·î‘À[$aòÉµâ‡Õ“[174]] : 21; goto b∫≤È£Œïã; FäÈÆÇÃä©: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $E÷å◊ÏÑ£∏ = $this->pasv == $aòÉµâ‡Õ“[83] ? !0 : !1; @ftp_pasv($this->connect, $E÷å◊ÏÑ£∏); goto dïâöÖç∫ﬂ; dàŒ∂É®Úú: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($fá•ÍÂ¿¡ä, $EÑõê™«⁄∑ = '', $BâíàÙ¯·ß = REPEAT_RENAME) { if ($this->setContent($fá•ÍÂ¿¡ä, $EÑõê™«⁄∑)) { return $this->getPathOuter($fá•ÍÂ¿¡ä); } return !1; } public function mkdir($cë€‚∫ﬁßá, $C–Âﬁ¥ôòÚ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $cë€‚∫ﬁßá = $this->iconvSystem($cë€‚∫ﬁßá); if ($this->isFolder($cë€‚∫ﬁßá) || @ftp_mkdir($this->connect, $cë€‚∫ﬁßá)) { return $this->getPathOuter($cë€‚∫ﬁßá); } if (!$this->mkdir($this->pathFather($cë€‚∫ﬁßá))) { return !1; } if ($cë€‚∫ﬁßá = @ftp_mkdir($this->connect, $cë€‚∫ﬁßá)) { return $this->getPathOuter($cë€‚∫ﬁßá); } return !1; } public function copyFile($C€í°Õ◊öµ, $b¬¡÷¥ä·‘) { goto fÀﬂ‚€◊íõ; fÀﬂ‚€◊íõ: if (!$this->_isconn()) { return !1; } $aø≠µïÆ≈ô = $this->pathThis($this->iconvSystem($C€í°Õ◊öµ)); $D–ËﬂÚƒº± = $this->tempFile($aø≠µïÆ≈ô); goto dÒ£ÉÓÇèπ; dÒ£ÉÓÇèπ: $D¢áÚŒÎÃø = $this->iconvApp($D–ËﬂÚƒº±); $this->download($C€í°Õ◊öµ, $D¢áÚŒÎÃø); $aÉ‘»ƒÂ†Ë = $this->upload($b¬¡÷¥ä·‘, $D¢áÚŒÎÃø); goto bÜ˜—äµèÍ; bÜ˜—äµèÍ: $this->tempFileRemve($D–ËﬂÚƒº±); return $aÉ‘»ƒÂ†Ë; goto BÀÏˆÜà∞∆; BÀÏˆÜà∞∆: } public function moveFile($D íÈùü≠…, $D·ÏÌâß›Ô) { if (!$this->_isconn()) { return !1; } $D íÈùü≠… = $this->iconvSystem($D íÈùü≠…); $D·ÏÌâß›Ô = $this->iconvSystem($D·ÏÌâß›Ô); $E“ÚﬂèÙ£∆ = @ftp_rename($this->connect, $D íÈùü≠…, $D·ÏÌâß›Ô); return $E“ÚﬂèÙ£∆ ? $this->getPathOuter($D·ÏÌâß›Ô) : !1; } public function delFile($bå∫°∞ºÀ ) { if (!$this->_isconn()) { return !1; } $bå∫°∞ºÀ  = $this->iconvSystem($bå∫°∞ºÀ ); return @ftp_delete($this->connect, $bå∫°∞ºÀ ); } public function delFolder($B÷πÈÑ ‹Á) { if (!$this->_isconn()) { return !1; } $B÷πÈÑ ‹Á = $this->iconvSystem($B÷πÈÑ ‹Á); $eÇªıºŒ©Ü = $this->ftpList($B÷πÈÑ ‹Á); if (!$eÇªıºŒ©Ü) { return @ftp_rmdir($this->connect, $B÷πÈÑ ‹Á); } foreach ($eÇªıºŒ©Ü as $CëÈæ…áó€) { if ($this->isFolder($CëÈæ…áó€)) { $CëÈæ…áó€ = $this->iconvApp($CëÈæ…áó€); $this->delFolder($CëÈæ…áó€); } else { @ftp_delete($this->connect, $CëÈæ…áó€); } } return @ftp_rmdir($this->connect, $B÷πÈÑ ‹Á); } public function rename($d≠ÏƒΩŸª, $a˜èò ≤«€) { goto dﬂØƒ¢çÙª; BÆøéªÿÍ˘: $fƒ‹Àú¥ìã = rtrim($eàÕµòºˆ•, $CΩäÆ™å—÷[8]) . $CΩäÆ™å—÷[8] . $F∏éÆ¢¢£ ; $cΩúÚ«√ÕÈ = @ftp_rename($this->connect, $d≠ÏƒΩŸª, $fƒ‹Àú¥ìã); $fƒ‹Àú¥ìã = $this->iconvApp($fƒ‹Àú¥ìã); goto E⁄¯‡°âøÇ; d‹˜ıú≥◊◊: $F∏éÆ¢¢£  = $this->iconvSystem($F∏éÆ¢¢£ ); $d≠ÏƒΩŸª = $this->iconvSystem($d≠ÏƒΩŸª); $eàÕµòºˆ• = $this->pathFather($d≠ÏƒΩŸª); goto BÆøéªÿÍ˘; dﬂØƒ¢çÙª: $CΩäÆ™å—÷ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->_isconn()) { return !1; } $F∏éÆ¢¢£  = $this->fileNameAuto($this->pathFather($d≠ÏƒΩŸª), $a˜èò ≤«€); goto d‹˜ıú≥◊◊; E⁄¯‡°âøÇ: return $cΩúÚ«√ÕÈ ? $this->getPathOuter($fƒ‹Àú¥ìã) : !1; goto a∑È°π±©„; a∑È°π±©„: } private function folderInfo($B˜ı≈ä≥çÊ, $B—“ÃØöÔÏ = false) { goto f≈ÈïﬁÛÆ£; Fƒ¯·‡⁄˘Ü: return $Fò¥∑Œ√∆„; goto CÈ—êõ∆Üº; eï€•⁄úê£: $BÚìŒºÿì´ = $this->iconvSystem($B˜ı≈ä≥çÊ); if ($B—“ÃØöÔÏ) { return array($AêÕÓ±ÃÕè[28] => $A√∑ºèíèÛ, $AêÕÓ±ÃÕè[75] => $eê€ñ”âÓè, $AêÕÓ±ÃÕè[29] => $AêÕÓ±ÃÕè[76]); } $Fò¥∑Œ√∆„ = array($AêÕÓ±ÃÕè[28] => $A√∑ºèíèÛ, $AêÕÓ±ÃÕè[75] => $eê€ñ”âÓè, $AêÕÓ±ÃÕè[29] => $AêÕÓ±ÃÕè[76], $AêÕÓ±ÃÕè[191] => 0, $AêÕÓ±ÃÕè[107] => 0, $AêÕÓ±ÃÕè[1169] => !0, $AêÕÓ±ÃÕè[1170] => !0); goto Fƒ¯·‡⁄˘Ü; f≈ÈïﬁÛÆ£: $AêÕÓ±ÃÕè =& $_SERVER[áí∂¯Â¸Áò]; $eê€ñ”âÓè = $this->getPathOuter(rtrim($B˜ı≈ä≥çÊ, $AêÕÓ±ÃÕè[8])); $A√∑ºèíèÛ = $this->pathThis($eê€ñ”âÓè); goto eï€•⁄úê£; CÈ—êõ∆Üº: } private function fileInfo($Dø¡Øçé«, $aΩﬁ©∏‚°ü = false) { goto EØô¢«ÇπÎ; C⁄„ÀÿËµµ: $FÌ°¬ÿñ£¿ = $this->iconvSystem($Dø¡Øçé«); if ($aΩﬁ©∏‚°ü) { return array($c€åËÜÿÆÏ[28] => $C–ﬁÓüÂ©ª, $c€åËÜÿÆÏ[75] => $bÆËÉÎ¶πº, $c€åËÜÿÆÏ[29] => $c€åËÜÿÆÏ[171], $c€åËÜÿÆÏ[165] => $this->ext($Dø¡Øçé«), $c€åËÜÿÆÏ[77] => $this->size($Dø¡Øçé«)); } $AË°™€ÇûË = array($c€åËÜÿÆÏ[28] => $C–ﬁÓüÂ©ª, $c€åËÜÿÆÏ[75] => $bÆËÉÎ¶πº, $c€åËÜÿÆÏ[29] => $c€åËÜÿÆÏ[171], $c€åËÜÿÆÏ[191] => 0, $c€åËÜÿÆÏ[107] => @ftp_mdtm($this->connect, $FÌ°¬ÿñ£¿), $c€åËÜÿÆÏ[165] => $this->ext($Dø¡Øçé«), $c€åËÜÿÆÏ[77] => $this->size($Dø¡Øçé«), $c€åËÜÿÆÏ[1169] => !0, $c€åËÜÿÆÏ[1170] => !0); goto C©ÔÑ∞´ß•; EØô¢«ÇπÎ: $c€åËÜÿÆÏ =& $_SERVER[áí∂¯Â¸Áò]; $bÆËÉÎ¶πº = $this->getPathOuter(rtrim($Dø¡Øçé«, $c€åËÜÿÆÏ[8])); $C–ﬁÓüÂ©ª = $this->pathThis($bÆËÉÎ¶πº); goto C⁄„ÀÿËµµ; C©ÔÑ∞´ß•: $AË°™€ÇûË[$c€åËÜÿÆÏ[107]] = $AË°™€ÇûË[$c€åËÜÿÆÏ[107]] > 0 ? $AË°™€ÇûË[$c€åËÜÿÆÏ[107]] : 0; return $AË°™€ÇûË; goto BªÇﬁı™ïè; BªÇﬁı™ïè: } public function size($AÉ◊è”∏œ ) { $BÍ¶îøííÕ = $this->objectMeta($AÉ◊è”∏œ ); return $BÍ¶îøííÕ ? $BÍ¶îøííÕ[$_SERVER[áí∂¯Â¸Áò][77]] : 0; } public function info($bññ√áëÆ•) { if ($this->isFile($bññ√áëÆ•)) { return $this->fileInfo($bññ√áëÆ•, 0); } else { if ($this->isFolder($bññ√áëÆ•)) { return $this->folderInfo($bññ√áëÆ•); } } return !1; } public function exist($fäêÀñ∑—Á) { return $this->objectMeta($fäêÀñ∑—Á) ? !0 : !1; } public function isFile($d‰Ã±çÛå≠) { $fÂ∏üú⁄çô =& $_SERVER[áí∂¯Â¸Áò]; $D™“°àÔ·ë = $this->objectMeta($d‰Ã±çÛå≠); return $D™“°àÔ·ë ? $D™“°àÔ·ë[$fÂ∏üú⁄çô[29]] == $fÂ∏üú⁄çô[171] : !1; } public function isFolder($C‚Öéè∫µ¶) { $dÛ∏´üÔ¶“ =& $_SERVER[áí∂¯Â¸Áò]; $dŒ¢ﬂ ≈Öó = $this->objectMeta($C‚Öéè∫µ¶); return $dŒ¢ﬂ ≈Öó ? $dŒ¢ﬂ ≈Öó[$dÛ∏´üÔ¶“[29]] == $dÛ∏´üÔ¶“[76] : !1; } public function listPath($d ÈÜ›∆ŒÜ, $F†Ú◊ò„öø = false) { goto AÚ€ãÜÒ›´; c°º‹ä√«∫: $açî’ò∑◊ˆ = $this->ftpList($d ÈÜ›∆ŒÜ); $fÚ∏œßÍÿÜ = array($FﬂûœÑ¨ËÕ[74] => array(), $FﬂûœÑ¨ËÕ[73] => array()); if (!$açî’ò∑◊ˆ) { return $fÚ∏œßÍÿÜ; } goto b—èŸπÃ∑Û; AÚ€ãÜÒ›´: $FﬂûœÑ¨ËÕ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->_isconn()) { return !1; } $d ÈÜ›∆ŒÜ = $this->iconvSystem($d ÈÜ›∆ŒÜ); goto c°º‹ä√«∫; b—èŸπÃ∑Û: foreach ($açî’ò∑◊ˆ as $d ÈÜ›∆ŒÜ) { if ($this->isFolder($d ÈÜ›∆ŒÜ)) { $fÚ∏œßÍÿÜ[$FﬂûœÑ¨ËÕ[74]][] = $this->folderInfo($d ÈÜ›∆ŒÜ, $F†Ú◊ò„öø); } else { $fÚ∏œßÍÿÜ[$FﬂûœÑ¨ËÕ[73]][] = $this->fileInfo($d ÈÜ›∆ŒÜ, $F†Ú◊ò„öø); } } return $fÚ∏œßÍÿÜ; goto F∑ùŒ¯≠πÑ; F∑ùŒ¯≠πÑ: } public function has($cŒüó◊∑‰è, $e™Ù‹˜åÕ≤ = false, $eÓÎŸÉÒæ” = true) { goto A©Û¨◊ÂéÖ; c¥ﬁ‹ÒÁ´Æ: $EÎàøÒ·Õº = $this->ftpList($cŒüó◊∑‰è); if (!$EÎàøÒ·Õº) { return !1; } if ($e™Ù‹˜åÕ≤) { return array($c–°ÙÆ◊‡›[195] => 0, $c–°ÙÆ◊‡›[196] => count($EÎàøÒ·Õº)); } goto eÑŒΩ´€ıÛ; eÑŒΩ´€ıÛ: foreach ($EÎàøÒ·Õº as $cŒüó◊∑‰è) { if ($eÓÎŸÉÒæ”) { if (!$this->isFolder($cŒüó◊∑‰è)) { return !0; } } else { if ($this->isFolder($cŒüó◊∑‰è)) { return !0; } } } return !1; goto dˆƒÍº¿ÛÌ; A©Û¨◊ÂéÖ: $c–°ÙÆ◊‡› =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->_isconn()) { return !1; } $cŒüó◊∑‰è = $this->iconvSystem($cŒüó◊∑‰è); goto c¥ﬁ‹ÒÁ´Æ; dˆƒÍº¿ÛÌ: } public function listAll($b∆÷î≈åÌ´) { goto bÈ©É«àÜÁ; fïÖ˜∑™£ÿ: foreach ($B–‰∞‚á´Õ[$Dåêœ±¢æœ[74]] as $dıŸ‹áı¢á) { $EØ£§Ì∂Ïí[] = array($Dåêœ±¢æœ[75] => $Dåêœ±¢æœ[8] . trim(str_replace($b∆÷î≈åÌ´, $Dåêœ±¢æœ[33], $dıŸ‹áı¢á), $Dåêœ±¢æœ[8]) . $Dåêœ±¢æœ[8], $Dåêœ±¢æœ[76] => 1, $Dåêœ±¢æœ[77] => 0); } foreach ($B–‰∞‚á´Õ[$Dåêœ±¢æœ[73]] as $aë¡òöïÍê) { $EØ£§Ì∂Ïí[] = array($Dåêœ±¢æœ[75] => $Dåêœ±¢æœ[8] . trim(str_replace($b∆÷î≈åÌ´, $Dåêœ±¢æœ[33], $aë¡òöïÍê), $Dåêœ±¢æœ[8]), $Dåêœ±¢æœ[76] => 0, $Dåêœ±¢æœ[77] => $this->size($aë¡òöïÍê)); } return $EØ£§Ì∂Ïí; goto F™ß„ä”íÒ; bÈ©É«àÜÁ: $Dåêœ±¢æœ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->_isconn()) { return !1; } $b∆÷î≈åÌ´ = $this->iconvSystem($b∆÷î≈åÌ´); goto fπÙ‡öÉ’µ; fπÙ‡öÉ’µ: $B–‰∞‚á´Õ = array($Dåêœ±¢æœ[73] => array(), $Dåêœ±¢æœ[74] => array()); $this->recursionFtpFiles($b∆÷î≈åÌ´, $B–‰∞‚á´Õ); $EØ£§Ì∂Ïí = array(); goto fïÖ˜∑™£ÿ; F™ß„ä”íÒ: } public function getContent($eäâ˜”πÏÇ) { if (!$this->_isconn()) { return !1; } $eäâ˜”πÏÇ = $this->iconvSystem($eäâ˜”πÏÇ); return $this->fileSubstr($eäâ˜”πÏÇ); } public function setContent($eÉ§¢∫Óê—, $Fﬁ‡‡Ÿöåû = '') { goto e¢•Ñâ≈óÈ; eÆÔŒöÔ¯: return $B∞°≠ÿ›Ÿá; goto aéıöàï‡®; e¢•Ñâ≈óÈ: if (!$this->_isconn()) { return !1; } $a Âå‡«– = $this->pathThis($this->iconvSystem($eÉ§¢∫Óê—)); $EÆˆ‘ñ“©È = $this->tempFile($a Âå‡«–); goto Cëé‰›ÉÀ›; Cëé‰›ÉÀ›: file_put_contents($EÆˆ‘ñ“©È, $Fﬁ‡‡Ÿöåû); $B∞°≠ÿ›Ÿá = $this->upload($eÉ§¢∫Óê—, $this->iconvApp($EÆˆ‘ñ“©È)); $this->tempFileRemve($EÆˆ‘ñ“©È); goto eÆÔŒöÔ¯; aéıöàï‡®: } public function fileSubstr($CßÿÇª∆«ß, $dòﬁ∫ì∂ÿ  = 0, $CäÆöÜ†˘ñ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($CßÿÇª∆«ß, $dòﬁ∫ì∂ÿ , $CäÆöÜ†˘ñ); } private function ftpRequest($cŒøËÜµ‹÷, $a¬“Ïí¢¿º = 0, $Eë´˜ãŒÈ• = false) { goto Dãπã∑ÈÑÏ; CâÆãç‚˜÷: curl_setopt($Dó¥œáÆ°€, CURLOPT_RETURNTRANSFER, 1); $D‡ŒÇéîë = curl_exec($Dó¥œáÆ°€); curl_close($Dó¥œáÆ°€); goto B ◊ÊÁÙΩÉ; B ◊ÊÁÙΩÉ: return $D‡ŒÇéîë; goto Fñ¯óﬁ’üΩ; Dãπã∑ÈÑÏ: $cŒøËÜµ‹÷ = $this->iconvSystem($cŒøËÜµ‹÷); $Cø„îõäﬁ∑ = $this->scheme . $this->host . $_SERVER[áí∂¯Â¸Áò][4] . $this->port; $Dó¥œáÆ°€ = curl_init(); goto fﬂáóûœ◊Ï; fﬂáóûœ◊Ï: curl_setopt($Dó¥œáÆ°€, CURLOPT_URL, $Cø„îõäﬁ∑ . $this->pathEncode($cŒøËÜµ‹÷)); curl_setopt($Dó¥œáÆ°€, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($Eë´˜ãŒÈ•) { $c‰ò≠‹µ„¡ = $a¬“Ïí¢¿º + $Eë´˜ãŒÈ• - 1; curl_setopt($Dó¥œáÆ°€, CURLOPT_RANGE, "{$a¬“Ïí¢¿º}\55{$c‰ò≠‹µ„¡}"); } goto CâÆãç‚˜÷; Fñ¯óﬁ’üΩ: } public function upload($bß≠õñëÚµ, $CÙÖ ¢ÚÜ’, $cê–®˘ÇÀ∫ = false, $díªÙ∆„·Ü = REPEAT_REPLACE) { goto F£é û≥œﬂ; F£é û≥œﬂ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($bß≠õñëÚµ))) { return !1; } $bß≠õñëÚµ = $this->iconvSystem($bß≠õñëÚµ); goto DœËéú∂öó; eãÂÈ‚ﬁ¯ê: if ($E˘ºèó≤’§ != FTP_FINISHED) { return !1; } return $this->getPathOuter($bß≠õñëÚµ); goto DıåÜËÀ≠ù; DœËéú∂öó: $CÙÖ ¢ÚÜ’ = $this->iconvSystem($CÙÖ ¢ÚÜ’); $E˘ºèó≤’§ = ftp_nb_put($this->connect, $bß≠õñëÚµ, $CÙÖ ¢ÚÜ’, FTP_BINARY); while ($E˘ºèó≤’§ == FTP_MOREDATA) { $E˘ºèó≤’§ = ftp_nb_continue($this->connect); } goto eãÂÈ‚ﬁ¯ê; DıåÜËÀ≠ù: } public function download($B”®ﬁÌÕ›¿, $d¢Ω≤ª≥ê“ = '') { goto d˜‘ÏìÑûı; FË™∏¢÷•Ü: while ($E∞ìƒäŒπÚ == FTP_MOREDATA) { $E∞ìƒäŒπÚ = ftp_nb_continue($this->connect); } if ($E∞ìƒäŒπÚ != FTP_FINISHED) { return !1; } return $this->iconvApp($d¢Ω≤ª≥ê“); goto cƒ‰¨≤È‘⁄; d˜‘ÏìÑûı: if (!$this->_isconn()) { return !1; } $bﬁ˜ıˆ‰Ø« = $this->pathFather($d¢Ω≤ª≥ê“); if (!IO::mkdir($bﬁ˜ıˆ‰Ø«)) { return !1; } goto eü‰¨Üô∑; eü‰¨Üô∑: $B”®ﬁÌÕ›¿ = $this->iconvSystem($B”®ﬁÌÕ›¿); $d¢Ω≤ª≥ê“ = $this->iconvSystem($d¢Ω≤ª≥ê“); $E∞ìƒäŒπÚ = ftp_nb_get($this->connect, $d¢Ω≤ª≥ê“, $B”®ﬁÌÕ›¿, FTP_BINARY); goto FË™∏¢÷•Ü; cƒ‰¨≤È‘⁄: } private function ftpList($fô≠™‰®ÜÆ) { goto AÒç»¯µö˜; D¡·õêÆ∫Ú: return $D¬¨„–èΩÔ; goto dº”ﬂ≤€Î¯; FµÜÏÍß·¿: $d°Ñ≈ø©ã‰ = array_diff($d°Ñ≈ø©ã‰, array($BÒ“Áæ©Ñœ[91], $BÒ“Áæ©Ñœ[1172], $fô≠™‰®ÜÆ . $BÒ“Áæ©Ñœ[91], $fô≠™‰®ÜÆ . $BÒ“Áæ©Ñœ[1172])); $D¬¨„–èΩÔ = array(); foreach ($d°Ñ≈ø©ã‰ as $F°ÆÏí≠Î¡) { if (!strstr($F°ÆÏí≠Î¡, $BÒ“Áæ©Ñœ[8])) { $F°ÆÏí≠Î¡ = $fô≠™‰®ÜÆ . ltrim($F°ÆÏí≠Î¡, $BÒ“Áæ©Ñœ[8]); } $D¬¨„–èΩÔ[] = $this->iconvApp($F°ÆÏí≠Î¡); } goto D¡·õêÆ∫Ú; AÒç»¯µö˜: $BÒ“Áæ©Ñœ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->isFolder($fô≠™‰®ÜÆ)) { return !1; } @ftp_chdir($this->connect, $BÒ“Áæ©Ñœ[8]); goto d˘Ïàª¿†‘; d˘Ïàª¿†‘: $fô≠™‰®ÜÆ = rtrim($fô≠™‰®ÜÆ, $BÒ“Áæ©Ñœ[8]) . $BÒ“Áæ©Ñœ[8]; $d°Ñ≈ø©ã‰ = @ftp_nlist($this->connect, $fô≠™‰®ÜÆ); if ($d°Ñ≈ø©ã‰ === !1) { $d°Ñ≈ø©ã‰ = @ftp_rawlist($this->connect, $fô≠™‰®ÜÆ); foreach ($d°Ñ≈ø©ã‰ as $a¬Ëﬁƒ¶Ò… => $bá≤ÉŒç–) { $d°Ñ≈ø©ã‰[$a¬Ëﬁƒ¶Ò…] = end(explode($BÒ“Áæ©Ñœ[1171], $bá≤ÉŒç–)); } } goto FµÜÏÍß·¿; dº”ﬂ≤€Î¯: } private function recursionFtpFiles($aç±¯ÎÜ˘◊, &$CÇè…ß„…ù) { $eÎ†˜¢íÒÀ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->_isconn()) { return !1; } if (!($DË•ÑÌÂó° = $this->ftpList($aç±¯ÎÜ˘◊))) { return !1; } foreach ($DË•ÑÌÂó° as $aç±¯ÎÜ˘◊) { if ($this->isFolder($aç±¯ÎÜ˘◊)) { $this->recursionFtpFiles($aç±¯ÎÜ˘◊, $CÇè…ß„…ù); $CÇè…ß„…ù[$eÎ†˜¢íÒÀ[74]][] = $aç±¯ÎÜ˘◊; } else { $CÇè…ß„…ù[$eÎ†˜¢íÒÀ[73]][] = $aç±¯ÎÜ˘◊; } } } private function objectMeta($b⁄ﬂäë∞ñ§) { goto c›°å≤ó·; EÜ–Ù—ÖÏ: if ($a§ÖöÖ¶Ñ› !== null && $a§ÖöÖ¶Ñ› !== !1) { return $a§ÖöÖ¶Ñ›; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $eﬂ„˜ƒ´¥¿[8]); goto bñö¥ÜÂâŸ; bñö¥ÜÂâŸ: $AµàÔ“Âè‡ = @ftp_size($this->connect, $this->iconvSystem($b⁄ﬂäë∞ñ§)); if ($AµàÔ“Âè‡ != -1) { $a§ÖöÖ¶Ñ› = array($eﬂ„˜ƒ´¥¿[77] => $AµàÔ“Âè‡, $eﬂ„˜ƒ´¥¿[29] => $eﬂ„˜ƒ´¥¿[171]); } else { $Aí®®ú·¥ß = @ftp_chdir($this->connect, $this->iconvSystem($b⁄ﬂäë∞ñ§)); $a§ÖöÖ¶Ñ› = $Aí®®ú·¥ß ? array($eﬂ„˜ƒ´¥¿[77] => 0, $eﬂ„˜ƒ´¥¿[29] => $eﬂ„˜ƒ´¥¿[76]) : !1; } Cache::set($BËÁéııåä, $a§ÖöÖ¶Ñ›, 0); goto dòÏﬁ≈®è∑; dòÏﬁ≈®è∑: return $a§ÖöÖ¶Ñ›; goto D‚•À¶ã‹›; c›°å≤ó·: $eﬂ„˜ƒ´¥¿ =& $_SERVER[áí∂¯Â¸Áò]; $BËÁéııåä = $eﬂ„˜ƒ´¥¿[1173] . md5($b⁄ﬂäë∞ñ§); $a§ÖöÖ¶Ñ› = Cache::get($BËÁéııåä); goto EÜ–Ù—ÖÏ; D‚•À¶ã‹›: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($Dóøçıì€) { if (substr($Dóøçıì€, 0, 2) == $_SERVER[áí∂¯Â¸Áò][1162]) { $Dóøçıì€ = BASIC_PATH . substr($Dóøçıì€, 2); } return $Dóøçıì€; } public function iconvApp($d…œáÌ«Ã∆) { $Fı∆±çπÍ‡ =& $_SERVER[áí∂¯Â¸Áò]; global $config; return $this->iconvTo($d…œáÌ«Ã∆, $config[$Fı∆±çπÍ‡[1160]], $config[$Fı∆±çπÍ‡[1159]]); } public function iconvSystem($CÂ“á»⁄·∆) { $Aﬂ¯àÜìëÖ =& $_SERVER[áí∂¯Â¸Áò]; global $config; return $this->iconvTo($CÂ“á»⁄·∆, $config[$Aﬂ¯àÜìëÖ[1159]], $config[$Aﬂ¯àÜìëÖ[1160]]); } public function getPathOuter($Bí£¯éôÂπ) { goto A±Ö Õ›Úõ; A±Ö Õ›Úõ: $F¡˜Ëï≠ÀÛ =& $_SERVER[áí∂¯Â¸Áò]; $EßÁä™ÉŸ∂ = $this->iconvApp($this->pathBase); $Bí£¯éôÂπ = $this->iconvApp($Bí£¯éôÂπ); goto a§èµ≈îî¯; a§èµ≈îî¯: if (substr($EßÁä™ÉŸ∂, 0, 2) == $F¡˜Ëï≠ÀÛ[1162]) { $EßÁä™ÉŸ∂ = BASIC_PATH . substr($EßÁä™ÉŸ∂, 2); } if (substr($Bí£¯éôÂπ, 0, 2) == $F¡˜Ëï≠ÀÛ[1162]) { $Bí£¯éôÂπ = BASIC_PATH . substr($Bí£¯éôÂπ, 2); } $EßÁä™ÉŸ∂ = KodIO::clear($EßÁä™ÉŸ∂); goto a⁄“Ö ∑Îò; a⁄“Ö ∑Îò: $Bí£¯éôÂπ = KodIO::clear($Bí£¯éôÂπ); $Bí£¯éôÂπ = substr($Bí£¯éôÂπ, strlen($EßÁä™ÉŸ∂)); if (empty($this->pathDriver)) { return $Bí£¯éôÂπ; } goto EØ˘óê»∆¯; EØ˘óê»∆¯: return $this->pathDriver . $F¡˜Ëï≠ÀÛ[8] . ltrim($Bí£¯éôÂπ, $F¡˜Ëï≠ÀÛ[8]); goto BëúáÕêÆ£; BëúáÕêÆ£: } public function mkfile($Dœ…ÌµÚ≠ê, $FéœÖ∏†”≠ = '', $A¿ºê¬Ù≤‰ = REPEAT_RENAME) { $Dœ…ÌµÚ≠ê = $this->iconvSystem($Dœ…ÌµÚ≠ê); @touch($Dœ…ÌµÚ≠ê); if ($FéœÖ∏†”≠) { file_put_contents($Dœ…ÌµÚ≠ê, $FéœÖ∏†”≠); } return is_file($Dœ…ÌµÚ≠ê) ? $this->getPathOuter($Dœ…ÌµÚ≠ê) : !1; } public function mkdir($BÂ¿´ßá—Ù, $e™¿ƒì◊∞ö = REPEAT_SKIP) { $BÂ¿´ßá—Ù = $this->iconvSystem($BÂ¿´ßá—Ù); if (is_dir($BÂ¿´ßá—Ù)) { return $this->getPathOuter($BÂ¿´ßá—Ù); } @mkdir($BÂ¿´ßá—Ù, 511, !0); return is_dir($BÂ¿´ßá—Ù) ? $this->getPathOuter($BÂ¿´ßá—Ù) : !1; } public function copyFile($d‹Æ∫ èΩÁ, $f‹∞‡É∏⁄∆) { $this->mkdir($this->pathFather($f‹∞‡É∏⁄∆)); $d‹Æ∫ èΩÁ = $this->iconvSystem($d‹Æ∫ èΩÁ); $f‹∞‡É∏⁄∆ = $this->iconvSystem($f‹∞‡É∏⁄∆); $aÊè◊Â€éﬁ = copy_64($d‹Æ∫ èΩÁ, $f‹∞‡É∏⁄∆); return $aÊè◊Â€éﬁ ? $this->getPathOuter($f‹∞‡É∏⁄∆) : !1; } public function moveFile($E—´ÒÚ¬Æà, $eØŸäìø¬í) { $this->mkdir($this->pathFather($eØŸäìø¬í)); $E—´ÒÚ¬Æà = $this->iconvSystem($E—´ÒÚ¬Æà); $eØŸäìø¬í = $this->iconvSystem($eØŸäìø¬í); $B·—åü±≥¡ = intval(@rename($E—´ÒÚ¬Æà, $eØŸäìø¬í)); if (!$B·—åü±≥¡) { if ($B·—åü±≥¡ = intval(@copy_64($E—´ÒÚ¬Æà, $eØŸäìø¬í))) { @unlink($E—´ÒÚ¬Æà); } } return $B·—åü±≥¡ ? $this->getPathOuter($eØŸäìø¬í) : !1; } public function delFile($eà⁄Î¬Ï®≥) { $eà⁄Î¬Ï®≥ = $this->iconvSystem($eà⁄Î¬Ï®≥); if (!@unlink($eà⁄Î¬Ï®≥)) { @chmod($eà⁄Î¬Ï®≥, 511); if (!@unlink($eà⁄Î¬Ï®≥)) { return !1; } } else { return !0; } } public function delFolder($cûå¨ìÙù¬) { goto D¥âûÙ”√; DÜÍËÓ±é: return rmdir($cûå¨ìÙù¬); goto b€›´ﬁå∆Â; A€â⁄ÚÛ‹ü: if (!($aﬂêê…∆ÈÆ = opendir($cûå¨ìÙù¬))) { return !1; } while (($F∞ûÇó„À£ = readdir($aﬂêê…∆ÈÆ)) !== !1) { if ($F∞ûÇó„À£ == $D≈ÒÔÌàü§[91] || $F∞ûÇó„À£ == $D≈ÒÔÌàü§[1172]) { continue; } $eç‡Ô•⁄Î¬ = $cûå¨ìÙù¬ . $D≈ÒÔÌàü§[8] . $F∞ûÇó„À£; if (is_file($eç‡Ô•⁄Î¬) || is_link($eç‡Ô•⁄Î¬)) { if (!unlink($eç‡Ô•⁄Î¬)) { chmod($eç‡Ô•⁄Î¬, 511); if (!unlink($eç‡Ô•⁄Î¬)) { return !1; } } } else { if (is_dir($eç‡Ô•⁄Î¬)) { chmod($eç‡Ô•⁄Î¬, 511); $eç‡Ô•⁄Î¬ = $this->iconvApp($eç‡Ô•⁄Î¬); if (!$this->delFolder($eç‡Ô•⁄Î¬)) { return !1; } } } } closedir($aﬂêê…∆ÈÆ); goto DÜÍËÓ±é; D¥âûÙ”√: $D≈ÒÔÌàü§ =& $_SERVER[áí∂¯Â¸Áò]; $cûå¨ìÙù¬ = $this->iconvSystem($cûå¨ìÙù¬); if (!is_dir($cûå¨ìÙù¬)) { return !0; } goto A€â⁄ÚÛ‹ü; b€›´ﬁå∆Â: } public function rename($fºÆ«‘≠ÔÎ, $Aòä¶‚ù≤ÿ) { goto DË‡é™‰Î‚; fæﬁç——∆: $f…œÍâ∑Õ· = @rename($fºÆ«‘≠ÔÎ, $eê∫ãÑ◊è£); $eê∫ãÑ◊è£ = $this->iconvApp($eê∫ãÑ◊è£); return $f…œÍâ∑Õ· ? $this->getPathOuter($eê∫ãÑ◊è£) : !1; goto AØòôÛÖ°; CæÀ’ ôÚã: $fºÆ«‘≠ÔÎ = $this->iconvSystem($fºÆ«‘≠ÔÎ); $EûûÒÇ‹–ç = $this->pathFather($fºÆ«‘≠ÔÎ); $eê∫ãÑ◊è£ = rtrim($EûûÒÇ‹–ç, $E¯°∂ÒùÕ—[8]) . $E¯°∂ÒùÕ—[8] . $fî¢üàıÙú; goto fæﬁç——∆; DË‡é™‰Î‚: $E¯°∂ÒùÕ— =& $_SERVER[áí∂¯Â¸Áò]; $fî¢üàıÙú = $this->fileNameAuto($this->pathFather($fºÆ«‘≠ÔÎ), $Aòä¶‚ù≤ÿ); $fî¢üàıÙú = $this->iconvSystem($fî¢üàıÙú); goto CæÀ’ ôÚã; AØòôÛÖ°: } public function size($a⁄¬í∆àö») { $a⁄¬í∆àö» = $this->iconvSystem($a⁄¬í∆àö»); return filesize_64($a⁄¬í∆àö»); } public function info($cíÉ‡§ôΩÂ) { $cíÉ‡§ôΩÂ = $this->iconvSystem($cíÉ‡§ôΩÂ); if ($this->isFolder($cíÉ‡§ôΩÂ)) { return $this->folderInfo($cíÉ‡§ôΩÂ); } else { if ($this->isFile($cíÉ‡§ôΩÂ)) { return $this->fileInfo($cíÉ‡§ôΩÂ); } } return !1; } protected function infoChildren($bÀÇáÒ¡ôç, &$C°ê∫Œ†Çº, $bã‘èπ∆´‘ = true) { goto E¨ííÿ†Ãœ; bÇ≥ˆ”ú∏ä: closedir($DŸØà˜åÑ⁄); goto FÑ≤®Ø™ª–; E¨ííÿ†Ãœ: $cãóû•íˆ€ =& $_SERVER[áí∂¯Â¸Áò]; check_abort(); $bÀÇáÒ¡ôç = rtrim($bÀÇáÒ¡ôç, $cãóû•íˆ€[8]) . $cãóû•íˆ€[8]; goto cáõ™”Ü√®; cáõ™”Ü√®: if ($bã‘èπ∆´‘) { $bÀÇáÒ¡ôç = $this->iconvSystem($bÀÇáÒ¡ôç); } if (!($DŸØà˜åÑ⁄ = @opendir($bÀÇáÒ¡ôç))) { return; } while (($b¯òÜø¥æ¯ = readdir($DŸØà˜åÑ⁄)) !== !1) { if ($b¯òÜø¥æ¯ == $cãóû•íˆ€[91] || $b¯òÜø¥æ¯ == $cãóû•íˆ€[1172]) { continue; } $a“„ë ÖÙ¯ = $bÀÇáÒ¡ôç . $b¯òÜø¥æ¯; if (is_file($a“„ë ÖÙ¯) || is_link($a“„ë ÖÙ¯)) { $C°ê∫Œ†Çº[$cãóû•íˆ€[78]]++; $C°ê∫Œ†Çº[$cãóû•íˆ€[77]] += filesize_64($a“„ë ÖÙ¯); } else { if (is_dir($a“„ë ÖÙ¯)) { $C°ê∫Œ†Çº[$cãóû•íˆ€[79]]++; $this->infoChildren($a“„ë ÖÙ¯, $C°ê∫Œ†Çº, !1); } } } goto bÇ≥ˆ”ú∏ä; FÑ≤®Ø™ª–: } private function folderInfo($c≤Œô√äÊ⁄, $A˘õÊÕ‹Ò = false) { $Få∞ﬁœ„”¢ =& $_SERVER[áí∂¯Â¸Áò]; $c≤Œô√äÊ⁄ = rtrim($c≤Œô√äÊ⁄, $Få∞ﬁœ„”¢[8]) . $Få∞ﬁœ„”¢[8]; $fèà‰‰£Øö = $this->iconvApp($this->pathThis($c≤Œô√äÊ⁄)); if ($A˘õÊÕ‹Ò) { return array($Få∞ﬁœ„”¢[28] => $fèà‰‰£Øö, $Få∞ﬁœ„”¢[75] => $this->getPathOuter($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[29] => $Få∞ﬁœ„”¢[76]); } $Cö∏Á™ﬂÍà = array($Få∞ﬁœ„”¢[28] => $fèà‰‰£Øö, $Få∞ﬁœ„”¢[75] => $this->getPathOuter($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[29] => $Få∞ﬁœ„”¢[76], $Få∞ﬁœ„”¢[191] => @filectime($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[107] => @filemtime($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[1174] => @fileatime($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[1169] => is_readable($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[1170] => is_writable($c≤Œô√äÊ⁄), $Få∞ﬁœ„”¢[1175] => get_mode($c≤Œô√äÊ⁄)); return $Cö∏Á™ﬂÍà; } private function fileInfo($CË∑áÉ º, $Cáä™ û∏• = false) { $cæÒ´Çû˘• =& $_SERVER[áí∂¯Â¸Áò]; $eﬁ∫ îßÜ« = $this->iconvApp($this->pathThis($CË∑áÉ º)); if ($Cáä™ û∏•) { return array($cæÒ´Çû˘•[28] => $eﬁ∫ îßÜ«, $cæÒ´Çû˘•[75] => $this->getPathOuter($CË∑áÉ º), $cæÒ´Çû˘•[29] => $cæÒ´Çû˘•[171], $cæÒ´Çû˘•[77] => $this->size($CË∑áÉ º), $cæÒ´Çû˘•[165] => $this->ext($eﬁ∫ îßÜ«)); } $dÔƒÃÂº’Û = array($cæÒ´Çû˘•[28] => $eﬁ∫ îßÜ«, $cæÒ´Çû˘•[75] => $this->getPathOuter($CË∑áÉ º), $cæÒ´Çû˘•[29] => $cæÒ´Çû˘•[171], $cæÒ´Çû˘•[191] => @filectime($CË∑áÉ º), $cæÒ´Çû˘•[107] => @filemtime($CË∑áÉ º), $cæÒ´Çû˘•[1174] => @fileatime($CË∑áÉ º), $cæÒ´Çû˘•[77] => $this->size($CË∑áÉ º), $cæÒ´Çû˘•[165] => $this->ext($eﬁ∫ îßÜ«), $cæÒ´Çû˘•[1169] => is_readable($CË∑áÉ º), $cæÒ´Çû˘•[1170] => is_writable($CË∑áÉ º), $cæÒ´Çû˘•[1175] => get_mode($CË∑áÉ º)); return $dÔƒÃÂº’Û; } public function exist($C¡•∫∞ó≥ﬂ) { $C¡•∫∞ó≥ﬂ = $this->iconvSystem($C¡•∫∞ó≥ﬂ); return @file_exists($C¡•∫∞ó≥ﬂ); } public function isFile($E•Ωö¨í‡ ) { $E•Ωö¨í‡  = $this->iconvSystem($E•Ωö¨í‡ ); return @is_file($E•Ωö¨í‡ ); } public function isFolder($eÏßﬁ∏øÛŒ) { $eÏßﬁ∏øÛŒ = $this->iconvSystem($eÏßﬁ∏øÛŒ); return @is_dir($eÏßﬁ∏øÛŒ); } public function listPath($få™Ü¢œ≤õ, $Cí„∫™∑‹ = false) { goto eî¥ΩÉ˜∏í; E°úê¨ï¿œ: closedir($DÆÙî´ìÎ◊); return $bÖ‚á‘Ú§ã; goto a—áä‹ÏÏ; C∂Àò˜ã≠§: $bÖ‚á‘Ú§ã = array($Bø˘ß¬À⁄â[74] => array(), $Bø˘ß¬À⁄â[73] => array()); if (!($DÆÙî´ìÎ◊ = @opendir($få™Ü¢œ≤õ))) { return $bÖ‚á‘Ú§ã; } while (($c∏ã°≥™„Ÿ = readdir($DÆÙî´ìÎ◊)) !== !1) { if ($c∏ã°≥™„Ÿ == $Bø˘ß¬À⁄â[91] || $c∏ã°≥™„Ÿ == $Bø˘ß¬À⁄â[1172]) { continue; } $Bœ•∫Ñ∏πó = $få™Ü¢œ≤õ . $c∏ã°≥™„Ÿ; if (is_file($Bœ•∫Ñ∏πó)) { $bÖ‚á‘Ú§ã[$Bø˘ß¬À⁄â[73]][] = $this->fileInfo($Bœ•∫Ñ∏πó, $Cí„∫™∑‹); } else { $bÖ‚á‘Ú§ã[$Bø˘ß¬À⁄â[74]][] = $this->folderInfo($Bœ•∫Ñ∏πó, $Cí„∫™∑‹); } } goto E°úê¨ï¿œ; eî¥ΩÉ˜∏í: $Bø˘ß¬À⁄â =& $_SERVER[áí∂¯Â¸Áò]; $få™Ü¢œ≤õ = $this->iconvSystem($få™Ü¢œ≤õ); $få™Ü¢œ≤õ = rtrim($få™Ü¢œ≤õ, $Bø˘ß¬À⁄â[8]) . $Bø˘ß¬À⁄â[8]; goto C∂Àò˜ã≠§; a—áä‹ÏÏ: } public function listAll($A°◊ Ò§ˆæ, &$EœË§±¨Ùç = array()) { goto B–•Óµâç∆; f»ﬂìé‹’: return $EœË§±¨Ùç; goto C–’ØÔ’û‘; C⁄î……›Œ©: if (!($Bƒ÷è…»≥∏ = @opendir($A°◊ Ò§ˆæ))) { return $EœË§±¨Ùç; } while (($e›ŸÏ¿´âÑ = readdir($Bƒ÷è…»≥∏)) !== !1) { if ($e›ŸÏ¿´âÑ == $fä—ﬁ≥†–Œ[91] || $e›ŸÏ¿´âÑ == $fä—ﬁ≥†–Œ[1172]) { continue; } $E±ÙæÔòƒÍ = $A°◊ Ò§ˆæ . $e›ŸÏ¿´âÑ; if (is_dir($E±ÙæÔòƒÍ) && !is_link($E±ÙæÔòƒÍ)) { $EœË§±¨Ùç[] = array($fä—ﬁ≥†–Œ[75] => $E±ÙæÔòƒÍ . $fä—ﬁ≥†–Œ[8], $fä—ﬁ≥†–Œ[76] => 1, $fä—ﬁ≥†–Œ[107] => @filemtime($E±ÙæÔòƒÍ), $fä—ﬁ≥†–Œ[77] => 0); $this->listAll($E±ÙæÔòƒÍ, $EœË§±¨Ùç); } else { $EœË§±¨Ùç[] = array($fä—ﬁ≥†–Œ[75] => $E±ÙæÔòƒÍ, $fä—ﬁ≥†–Œ[76] => 0, $fä—ﬁ≥†–Œ[107] => @filemtime($E±ÙæÔòƒÍ), $fä—ﬁ≥†–Œ[77] => $this->size($E±ÙæÔòƒÍ)); } } closedir($Bƒ÷è…»≥∏); goto f»ﬂìé‹’; B–•Óµâç∆: $fä—ﬁ≥†–Œ =& $_SERVER[áí∂¯Â¸Áò]; $A°◊ Ò§ˆæ = $this->iconvSystem($A°◊ Ò§ˆæ); $A°◊ Ò§ˆæ = rtrim($A°◊ Ò§ˆæ, $fä—ﬁ≥†–Œ[8]) . $fä—ﬁ≥†–Œ[8]; goto C⁄î……›Œ©; C–’ØÔ’û‘: } public function has($EæƒŒÙêù¯, $E©∞èùÑ∞≤ = false, $E⁄¡ÛìèÌ¨ = true) { goto aÏ˜„”±„Í; aÑ…à¬úóâ: if (!($Eﬁ¶‹ßŒ»‡ = @opendir($EæƒŒÙêù¯))) { return !1; } $DèÉ∑–£ˆ™ = 0; $Bèå¨Ê›Î≤ = 0; goto E‡èó—Úµ; EÇÉ√⁄ì”π: if ($E©∞èùÑ∞≤) { return array($DÔ∂⁄‚¶çê[195] => $DèÉ∑–£ˆ™, $DÔ∂⁄‚¶çê[196] => $Bèå¨Ê›Î≤); } return !1; goto D¥∏π‡à«Ÿ; E‡èó—Úµ: $D¢±¡ÕÌÒ´ = 0; while (($b√ﬂ„Ω’ïé = readdir($Eﬁ¶‹ßŒ»‡)) !== !1) { if ($b√ﬂ„Ω’ïé == $DÔ∂⁄‚¶çê[91] || $b√ﬂ„Ω’ïé == $DÔ∂⁄‚¶çê[1172]) { continue; } $BÌ‹ÆÓá”¬ = $EæƒŒÙêù¯ . $b√ﬂ„Ω’ïé; if ($E©∞èùÑ∞≤) { $D¢±¡ÕÌÒ´++; if (@is_file($BÌ‹ÆÓá”¬)) { $DèÉ∑–£ˆ™++; } else { $Bèå¨Ê›Î≤++; } if ($D¢±¡ÕÌÒ´ > 10000) { break; } continue; } if ($E⁄¡ÛìèÌ¨) { if (@is_file($BÌ‹ÆÓá”¬)) { return !0; } } else { if (@is_dir($BÌ‹ÆÓá”¬ . $DÔ∂⁄‚¶çê[8])) { return !0; } } } closedir($Eﬁ¶‹ßŒ»‡); goto EÇÉ√⁄ì”π; aÏ˜„”±„Í: $DÔ∂⁄‚¶çê =& $_SERVER[áí∂¯Â¸Áò]; $EæƒŒÙêù¯ = $this->iconvSystem($EæƒŒÙêù¯); $EæƒŒÙêù¯ = rtrim($EæƒŒÙêù¯, $DÔ∂⁄‚¶çê[8]) . $DÔ∂⁄‚¶çê[8]; goto aÑ…à¬úóâ; D¥∏π‡à«Ÿ: } public function hashSimple($Dº∑Á€åñˆ) { goto aÛ¯»Ø∏•∫; aÛ¯»Ø∏•∫: $CÌä«ﬂ’—Ú =& $_SERVER[áí∂¯Â¸Áò]; if (!$Dº∑Á€åñˆ) { return md5($CÌä«ﬂ’—Ú[33]); } $Dº∑Á€åñˆ = $this->iconvSystem($Dº∑Á€åñˆ); goto F•ñ≈ûâÇ†; F•ñ≈ûâÇ†: $E¬£”»Îúè = $this->size($Dº∑Á€åñˆ); $cﬁ◊ËòÛ≠¥ = 200; $e≥ùë•ØËÑ = 50; goto eŸ◊™‡Êﬂû; dõ πÀÁΩ∂: $dÇ¡ÇÖüŒï = fopen($Dº∑Á€åñˆ, $CÌä«ﬂ’—Ú[1176]); if (!$dÇ¡ÇÖüŒï) { return $B¥äêÀâœÙ; } for ($Aîé—ƒ∑ˆ∏ = 0; $Aîé—ƒ∑ˆ∏ < $e≥ùë•ØËÑ; $Aîé—ƒ∑ˆ∏++) { fseek_64($dÇ¡ÇÖüŒï, $EÖ÷∏ØâÊõ * $Aîé—ƒ∑ˆ∏); $B¥äêÀâœÙ .= fread($dÇ¡ÇÖüŒï, $cﬁ◊ËòÛ≠¥); } goto bõ¿⁄®⁄Ë; bõ¿⁄®⁄Ë: fseek_64($dÇ¡ÇÖüŒï, $E¬£”»Îúè - $cﬁ◊ËòÛ≠¥); $B¥äêÀâœÙ .= fread($dÇ¡ÇÖüŒï, $cﬁ◊ËòÛ≠¥); fclose($dÇ¡ÇÖüŒï); goto bãﬁ∑®ﬂÑ≤; bãﬁ∑®ﬂÑ≤: return md5($B¥äêÀâœÙ) . $E¬£”»Îúè; goto bò·Ìã…Ÿ©; eŸ◊™‡Êﬂû: if ($E¬£”»Îúè <= $cﬁ◊ËòÛ≠¥ * $e≥ùë•ØËÑ) { return $this->hashMd5($Dº∑Á€åñˆ) . $E¬£”»Îúè; } $B¥äêÀâœÙ = $CÌä«ﬂ’—Ú[33]; $EÖ÷∏ØâÊõ = intval($E¬£”»Îúè / $e≥ùë•ØËÑ); goto dõ πÀÁΩ∂; bò·Ìã…Ÿ©: } public function getContent($E™“°∫·ÎÑ) { $E™“°∫·ÎÑ = $this->iconvSystem($E™“°∫·ÎÑ); return file_get_contents($E™“°∫·ÎÑ); } public function setContent($fÁ‰ãÂÒôè, $bí„⁄Ó‘Éó = '') { $fÁ‰ãÂÒôè = $this->iconvSystem($fÁ‰ãÂÒôè); @file_put_contents($fÁ‰ãÂÒôè, $bí„⁄Ó‘Éó, LOCK_EX); clearstatcache(); return strlen($bí„⁄Ó‘Éó) == filesize_64($fÁ‰ãÂÒôè); } public function fileSubstr($D¢Â∏ÃÔ‚›, $fÁªØüñãΩ = 0, $aÊ˘«ƒﬁçÑ = false) { goto CÙ±∫âÍ—ö; aëçå©÷Öƒ: fseek_64($dßœ⁄Øå´÷, $fÁªØüñãΩ); $a∆Àí˘Íú≤ = fread($dßœ⁄Øå´÷, $aÊ˘«ƒﬁçÑ); fclose($dßœ⁄Øå´÷); goto d»ï®Àåàå; BÉûÉÇØ›¯: if ($aÊ˘«ƒﬁçÑ <= 0) { return $A•Üñ°©øﬂ[33]; } $dßœ⁄Øå´÷ = fopen($D¢Â∏ÃÔ‚›, $A•Üñ°©øﬂ[1176]); if (!$dßœ⁄Øå´÷) { return !1; } goto aëçå©÷Öƒ; d»ï®Àåàå: return $a∆Àí˘Íú≤; goto c“ëªò¨ü∫; CÙ±∫âÍ—ö: $A•Üñ°©øﬂ =& $_SERVER[áí∂¯Â¸Áò]; $D¢Â∏ÃÔ‚› = $this->iconvSystem($D¢Â∏ÃÔ‚›); if ($aÊ˘«ƒﬁçÑ === !1) { $aÊ˘«ƒﬁçÑ = $this->size($D¢Â∏ÃÔ‚›); } goto BÉûÉÇØ›¯; c“ëªò¨ü∫: } public function upload($BûƒÈ°Ö∏˜, $A√ç∆ÕÖÌå, $cıÇ⁄∂Ÿ˘” = false, $FóÖÓﬁƒá¿ = REPEAT_REPLACE) { $Fò·‰—◊Ô© = $this->copyFile($A√ç∆ÕÖÌå, $BûƒÈ°Ö∏˜); return $Fò·‰—◊Ô© ? $this->getPathOuter($BûƒÈ°Ö∏˜) : !1; } public function setModifyTime($d◊•ÂÊ…Íï, $D§∂Ìﬁ§·√ = '') { @touch($d◊•ÂÊ…Íï, intval($D§∂Ìﬁ§·√)); } public function download($aÚ∞òÜŸª , $AƒåÓ¿≤åå) { return $this->iconvSystem($aÚ∞òÜŸª ); } } goto DêÉ≥˜≥πÇ; fœ¢á…ìœ: if (!function_exists('_kodDe')) { function _kodDe($e∫îÃ≤ºòÆ) { $e∫îÃ≤ºòÆ = base64_decode($e∫îÃ≤ºòÆ); $eœáËë›øÃ = strlen($e∫îÃ≤ºòÆ); $a∆ƒπ§‰Ã∞ = ''; $E∂òŒ›‘ãâ = ord($e∫îÃ≤ºòÆ[0]) - 30; for ($b…ÈªàÉ˜° = 1; $b…ÈªàÉ˜° < $eœáËë›øÃ; $b…ÈªàÉ˜° += 2) { if ($b…ÈªàÉ˜° + 1 < $eœáËë›øÃ) { $a∆ƒπ§‰Ã∞ .= chr(ord($e∫îÃ≤ºòÆ[$b…ÈªàÉ˜° + 1]) + $E∂òŒ›‘ãâ); $a∆ƒπ§‰Ã∞ .= chr(ord($e∫îÃ≤ºòÆ[$b…ÈªàÉ˜°]) + $E∂òŒ›‘ãâ); } else { $a∆ƒπ§‰Ã∞ .= chr(ord($e∫îÃ≤ºòÆ[$b…ÈªàÉ˜°]) + $E∂òŒ›‘ãâ); } } return $a∆ƒπ§‰Ã∞; } } define("\x87\x92\xb6\xf8\xe5\xfc\xe7\x98", "\xa4\xd1\xd2\x9b"); $_SERVER[áí∂¯Â¸Áò] = explode("\x7c\x4\x7c\x4\x7c\x1", gzinflate(substr(_kodDe('L3oO7/fv7+/v8u9sjE/4tAofxChWSjphyVpzAWAqUVspYLYWARFloTqznAulfThHgkg1GjhSWJo4nds=')."\344\43\11\5\232\162\37\245\334\127\51\1\122\302\221\160\37\241\34\241\345\56\51\224\102\371\270\257\44\134\201\102\71\2\341\370\347\236\331\225\114\333\237\326\321\314\233\67\263\63\157\336\274\171\63\363\346\315"."\xd7\x5b\x56\xed\x5\xfe\xb7\xfb\xce\x73\xaf\xd8\xb8\xe3\x85\xd7\x2f\xc6\xb1\x55\x7b\x80\xff\xed\x89\xc3\xc7\x9c\xb9\xef\x6e\xe8\xbf\x3d\x73\xb\x7\x83\xf\xd7\xfd\xa2\xfb\xb3\xa7\x63\x9b\xcf\xf\xfe\xe8\xe0\xd7\x4f\xdf\xdd\x73\xe9"."\xc2\xf6\x57\xde\x7a\xe8\xe2\x75\x77\xc\xdf\x74\xf5\x67\x4d\xb9\x43\x4f\xff\xe4\xb1\xd9\xf7\xfe\xa6\xbb\xed\xa2\xcf\xae\xb8\xfc\x55\x63\xee\x16\x65\x6e\xff\xd3\xc3\xdf\x9e\x72\x70\xe3\xc2\x93\xd6\x45\x8e\x78\xeb\x77\xfb\x3c\xb0\xed"."\350\352\11\77\375\154\277\233\66\314\170\362\247\61\163\346\335\167\151\123\27\154\336\160\363\312\77\74\166\160\233\361\361\313\167\254\113\27\256\237\176\317\346\357\27\245\107\337\70\262\171\355\147\257\35\174\340\176"."\xcb\x7f\xb2\x61\xe3\x59\x6b\x56\x7f\xf3\xd4\x6f\x76\xfb\xd8\x78\xe5\xe4\xd3\x6b\x1e\xd8\xe3\xe6\xc3\x3f\xf4\xf4\xbe\x32\x71\xe6\x69\xdf\x7d\xfd\x97\x7b\xf6\x3f\xf6\xae\x3\x97\xef\xb3\xf8\xd4\x7b\xf6\x5c\xb3\xff\xe4\x4f\xb6\xab\x27"."\254\133\75\323\65\361\352\73\317\135\334\264\340\200\57\176\167\235\321\24\64\232\6\217\133\170\337\51\7\37\225\354\73\152\322\11\376\75\37\273\306\61\232\74\163\141\353\65\73\247\37\176\173\340\323\236\315\341"."\160\350\313\165\67\377\144\357\341\366\113\107\66\72\146\116\176\353\46\343\300\371\177\361\34\267\354\250\175\217\226\266\234\320\121\360\76\64\262\276\361\212\15\63\336\50\316\73\73\172\327\3\277\162\335\374\313\57".strrev('¸ûlVÀÕkˇTw_˛ø›∏M\'Sπ5≈Â–z∑B˙{Œ{∆¯ˇ˚«Ò8o´ì˙›3£πÓ◊ØÁ˝ 7°˝˘è')._kodDe('MmeKvVzzmaYoWrNNpyLeC8+bFX6Fjh6SBu1tGfU+iyS/0pib3esHFwSWnsyVmFwEE3F1ZufpZzSNgHg=')."\50\246\347\264\44\11\25\144\135\316\221\302\13\212\156\200\117\211\305\305\12\132\101\311\133\40\34\220\224\115\71\56\33\244\44\137\133\314\347\357\355\12\56\211\105\226\364\372\11\106\74\266\242\250\350\243\70\206".base64_decode('gmFT1s2ImlMYxrDO6tXm7wj0SJGQpyfs8UYCwR4M9ga7uwORcngo2NXV5vEuKE/pDXk6uj0SqF9WiQ==')."\251\371\224\126\55\55\303\51\313\244\32\34\150\127\225\154\22\7\363\62\255\216\71\132\40\241\10\13\201\76\310\27\263\131\34\351\141\41\122\177\45\45\27\263\204\146\76\61\122\320\325\234\114\233\276\100\31\145".base64_decode('UByQi6am5hM44h8xdZnDQY0TupJT8qSosL/L741IsJpSeyjYLZGuyMmGqehSf6c/5Jdg1VumoBZPkQ==')."\160\276\276\36\100\20\311\323\325\45\215\127\202\251\344\12\264\30\234\247\102\141\301\220\317\37\222\332\226\110\234\116\11\55\227\323\362\56\120\12\350\117\123\250\252\77\24\302\1\7\341\340\256\0\354\72\22\11"."\xb6\xb7\x87\xfd\x2c\x46\x1a\xb7\xb0\xb\xd4\x64\x1a\xe1\x52\x4b\x2c\x99\xca\x9a\xb1\x92\x9c\x2d\x52\x66\x1d\xc2\xbf\x53\xc8\xf\xf9\xd5\xc\xc2\xc0\x2b\xd4\xbc\x5a\x24\xcc\x4a\x8a\xd0\x34\x36\x72\x48\xa0\x48\xb1\x15\xa\xc9\x81\x6c".base64_decode('GhlTYICVcLClFf/OJkjxGExTdDOm5BNaUs2TYTiXDDnCeLKZ8ekqwCMFaq6EVhjt1kqkDSk1q3SxUQ==').base64_decode('ltKySUXn8QLILqaQxqhjQu6eYk5EYdFERs0mdTo4fwiznhSrmCZohkFr2lfIanIyrOhC7dtBMcGiKQ==')."\x2\x8b\x8\xad\x5d\xd3\x73\x3e\x20\x0\x8\x75\x0\xdb\xab\x7d\x15\x12\x86\x28\xe3\x27\x5\xa2\xb8\xf0\x8f\xbb\x7a\xe0\x24\xe7\x77\x83\x3\xf3\xc0\x3f\x35\x44\x8a\x45\x49\xd5\x32\x4a\x36\x1b\x53\x46\x14\x32\x40\x72\xc9\xe9\x6\xad"."\xbd\xdb\x88\xab\x79\x37\x80\xe0\x68\x20\x18\xcb\xc8\x46\xa6\x3b\x39\x3d\x86\x72\x91\x9a\xe7\x93\xca\x88\xab\x90\x29\xe0\x28\x1f\xc0\x51\xb\x3\x43\x7a\xf7\x68\xa6\x5f\x10\xb1\x59\x2d\x21\x67\xc5\x96\xe2\x70\xc6\x34\xb\x61\x25\x9f"."\204\4\41\55\322\206\363\210\140\5\105\41\110\76\207\224\224\272\245\45\122\147\263\332\114\271\13\360\112\152\224\113\274\214\231\313\262\20\155\55\203\31\14\150\216\20\236\250\42\161\145\304\44\104\222\146\47\62"."\262\16\272\257\245\150\246\234\63\61\120\56\24\262\152\102\66\125\55\357\326\22\246\142\72\15\123\127\144\122\132\325\154\11\162\4\34\301\265\70\27\35\75\136\55\157\202\341\353\214\350\162\336\110\51\272\323\117"."\330\273\131\2\164\146\22\214\242\371\124\243\240\31\52\374\114\263\44\233\246\234\310\300\321\317\213\157\371\1\174\65\237\125\363\112\31\256\47\221\120\14\303\11\263\350\132\326\351\311\146\265\141\147\120\127\323\52"."\xc8\x53\x6b\xab\x26\x90\x4c\xcd\x44\x74\xf8\x47\xa\xaa\xae\x18\x34\x2a\x75\x74\x47\x8\x32\xa8\x95\xe2\xec\xd5\xe5\x74\x4e\x6e\x96\xa\xc5\x38\xa0\xc\x19\x9f\x15\x60\x18\x9b\x7c\xbd\x59\x4a\xc0\xa8\x43\xca\x15\xd\xd3\xa9\x2b\x40".base64_decode('/KhgoiOdF0g5u2F/qkrSGQZSmoCn1TVKgI0kmoahnZFIbyzQDibjHn+s2xPxdpJqm3Ka1rkLyF5WJA==')."\5\56\166\202\41\7\31\255\7\320\210\3\173\265\141\105\7\37\156\33\155\226\206\264\144\134\33\161\321\44\210\34\6\122\202\42\103\212\26\114\147\110\316\247\41\175\342\243\246\102\330\321\50\245\255\4\355\122"."\362\151\63\103\63\206\375\241\105\376\120\54\34\154\217\364\173\102\144\32\317\203\216\30\241\237\202\105\147\235\41\45\11\110\237\60\151\76\271\0\251\106\161\340\100\201\175\114\123\341\340\241\151\135\201\16\110\30"."\237\323\0\110\116\21\213\226\335\245\346\124\130\167\223\245\40\112\202\71\276\203\124\310\215\32\324\22\315\324\126\107\223\123\153\234\340\337\332\232\201\250\317\125\73\70\327\255\362\74\356\172\127\275\324\120\327\44"."\xf5\x2\xa5\x43\x95\xb3\x12\x69\x74\x19\x46\x9d\x14\x5c\xf0\x3\x4\x80\x73\x92\x30\xcc\x6d\xa4\xc3\xc0\x90\x7f\x61\x9f\x3f\x1c\x89\x75\xfb\x23\x9d\x41\x1f\xf9\x82\xdf\x43\x42\x5d\x1a\x1e\x9a\xb4\x45\x3\xf8\x67\x90\xf4\x60\xa\x8b".strrev('V<†Ùäj“Y*âîjî,Â”VZ“¬ß⁄C:j*våS§öøBÛb¨Öb∫kuå(pÆ†+NN@Ÿ')."\163\5\52\347\314\114\61\27\27\202\156\136\25\362\135\320\363\114\272\151\154\52\323\164\22\152\166\223\54\223\33\332\311\60\12\272\303\323\300\377\271\200\116\152\71\231\52\264\150\374\53\111\54\0\60\250\326\222"."\322\251\310\174\156\64\165\123\203\120\335\202\322\255\230\31\215\164\127\132\241\125\52\262\272\321\132\46\225\254\102\351\222\121\250\260\7\132\132\211\221\253\240\53\51\225\260\77\120\313\0\234\13\163\325\10\201\114"."\x50\x4d\xa2\xf1\x7e\xa8\xcd\x72\x80\xc9\xe5\xbe\x6c\xf0\xb9\x3\x46\x84\x9\xbe\xbd\xaf\xab\x2b\xe6\xd\xf6\x44\x80\x46\x8b\x21\xfd\xa1\x40\xc4\x4f\x19\xcb\xe3\x8b\x79\xbc\xbd\xab\xe8\x4c\xc8\xbb\x89\x20\xc0\x51\x6e\xe5\x4c\xae\xbd"."\x96\x1a\x56\xf1\xe9\x83\xcf\x33\x5c\x72\x93\x8a\x23\xc9\x8c\xc3\x40\xa4\x16\xb4\xbc\xa1\x38\x13\xa4\xb4\x24\x97\xe1\x18\x63\xb6\x4d\x80\x97\xe5\xe0\x7a\xf4\x88\x53\xce\x8d\x39\x73\x8a\x29\x3b\x59\xd5\xad\xd3\xa4\x44\x84\x36\x9e\x6d"."\3\244\13\270\314\315\202\271\31\54\123\350\374\334\33\14\223\14\163\41\24\50\65\161\105\47\365\350\355\43\111\71\241\373\73\374\4\270\77\341\230\214\114\24\40\117\177\230\312\313\42\300\327\325\61\231\267\161".base64_decode('Lq0PKXskl+V6Wky19F9Miy8HwhAwnVyp1U7eV5HOQM+CWHfQ5++KBXqAsImUw/t6fR7a+SK8LRjptA==').base64_decode('QPuAuFnk6QrY0f2LA+FIuGISgPX5bSlg5dYb8rcHFrNoe8Df5QvHvB5vJ8fp8XSTSCwF106G24ofAw==')."\x72\x33\xcc\x56\x60\xb1\x12\x5c\x4d\x52\x62\xc6\x2c\xcb\x9d\x18\x55\xe4\x63\x9c\x4f\xc0\x1c\xa8\x10\xde\x24\xcd\x85\x6b\x58\xd4\x12\xa2\x5a\x27\xb4\x22\xe5\x56\xa6\xb\xe6\xa8\x80\xc8\xc9\x64\x84\xca\x74\x7e\xab\xc6\x3f\x35\x92\x27".base64_decode('LJkFUgYQBfFRFkTNoHGg9ZHvS0SGl9UgBnHalBQTx5UBnpTJGMMWB+OGp4Ee8KDFMuAE1CMxOhYNsA==')."\xcc\xf0\xd0\xea\xa4\xf8\x42\x35\x16\x4\x2b\x7a\xf\x5c\xe6\xc6\xfa\x43\xc1\x9e\xe\x92\x61\x38\xa3\xd0\xa\x4\x8\xf9\xab\xa9\x4e\x44\x56\xbb\x26\x17\x49\x40\xa1\x91\xb9\x6e\x4a\x89\xbe\x5c\xa3\xa4\x5c\x85\x7f\x8e\xc3\x3f\x40\x7".strrev(',Âû˛¡"ô‡˘*i¬°&Pn^N∂ äæ¥·d/ë¶∏µˆEj®T-Å ‡ôò(qÍîÚW$')."\23\270\21\3\300\312\63\30\42\4\61\265\41\272\16\302\211\41\177\230\112\1\135\131\121\124\51\271\334\256\251\204\213\25\60\377\220\317\273\217\217\16\117\255\36\160\116\165\15\202\100\115\355\74\34\45\261\250".strrev(';ù”AƒÓq'."\0".'ÜÆ4plÆ*f´®‘‡Á,Á:±Œ…éq‡<€ûÆÍ;®Êö‹∆’;jñuÚDùÀ').strrev(')´Mï–‡Zò¬hHë‰°à-*ÉVß&™≤åK∆∞uIﬂ•Ã÷÷åMußöSÉ¢ÛeÑÓ<Í9')."\34\364\241\222\346\71\6\234\321\251\203\163\205\174\2\310\376\55\240\1\1\371\234\141\170\36\347\122\330\62\226\25\216\173\302\37\305\174\202\113\127\70\56\342\162\202\310\1\65\235\147\103\10\114\350\154\155\155".strrev(']W¿æGÆëeàI WAÃ‹'."\0".'=î+b∏ÔÂ&h	ey;†ÆØ1gpù1m√-:¶Gi´ø∆NWæU')."\xa\x5a\x82\x90\x56\x14\x62\x50\xd1\x1a\x66\xb1\xa4\x92\x27\xfd\xb4\x1f\xc1\x36\x12\x72\x41\x9\xb\x2d\x8c\xc5\x22\x9e\xb6\x2e\x7f\x8c\x4a\x18\x22\x89\x69\x1c\x49\xc5\x36\xb6\xc7\x6\x9a\xc6\x25\x2a\x95\xf\x9\xae\x79\x1b\x2b\xb2".base64_decode('EhIGkqLrmt6M9g+NYgHqYmDxZQJ6SmBFLrW0SpjMRErERKIXZKpNwEUy0xDc1dFocUBJDg4ARpadqQ==').base64_decode('wZXTVtdQZdsdBf/RCJZfpMYF3n8G0LUSBO6psM0VYxIQVoHtVmg6m2cLFvXY1Ew5y9BgWgRCSH+xuQ==').base64_decode('miz1cQd2cSEEZ2dhExBJyB62w8U2LoT9JwBzCFH8bwtZn6fUPBgIXj5JBXxO0omexc6AD4dZQKUiXQ==').base64_decode('TpG1WyAvQmihWSUGZqoYUayI3G7zhAPeWK+H6gNg7e+GIw0qLFynbiTtzyiJoZgcBzxAFzBFqO0NUQ==')."\272\1\171\142\322\152\31\132\121\117\50\254\222\26\55\307\224\165\120\25\256\132\302\312\11\333\244\200\164\16\270\237\342\200\223\272\3\250\233\16\270\40\161\160\225\331\301\267\102\34\114\1\166\20\275\330\301\113"."\x27\xc1\x80\xcf\xa1\x1a\x3e\xa4\x9f\xa3\x72\x51\x12\xad\xb3\x99\x81\x1b\xb\x59\x79\xd4\x81\xeb\xdf\xa5\x94\x94\xac\x83\xd6\xde\x41\x1b\xe5\xa0\x2d\x70\xa0\x95\x93\x8f\xd4\xa6\xf\x30\x28\xa9\xd\xa\x2\xda\x65\x1c\x90\x1f\x20\x73".base64_decode('0VJgkJKBafUOrvE70rpWLPTSLwkxXBkC4DVlgJCmmQ66lHOUr/JgdXhoEec4XnvCwqwJOG6vA4bC9A==')."\166\271\44\166\160\305\316\316\133\71\223\357\366\362\135\111\256\257\331\127\102\366\155\56\116\104\136\211\210\234\16\13\237\67\345\64\375\166\205\124\34\16\51\211\321\4\137\135\371\204\345\232\65\306\272\36\361\141".strrev('Í'."\n".'ÑëõpÀ(Éex2Eq †°ÃÇÑ0§J),€Õ‹∏€0≤v0◊)≥î~ﬂøÌØAåı‹™f%').strrev('∑≤ôÀ°1WCÄÛqy™èÕWΩ““m°m-éX◊L1j£ÚQy8Ô`4ö$`îM§»˘F)o[O')."\155\273\303\67\136\30\313\26\276\71\341\40\233\26\16\50\312\4\261\313\27\331\240\366\110\176\362\272\223\222\154\65\247\3\220\64\272\17\254\312\142\66\306\44\54\231\221\165\116\123\72\242\40\33\363\55\31\210".strrev('v†VOM¸CXh4∑'."\n".'1Và“‘a¨õF©àqQJÕãdÈçıPµ†ÑUv 9ÜGí≈ŸÒ.JZ£¬')."\42\1\275\204\356\372\321\145\106\314\266\335\1\242\102\207\305\54\73\43\270\176\36\46\1\201\202\225\5\202\121\167\301\261\322\1\345\33\45\32\36\326\264\212\120\246\342\260\200\124\260\213\102\213\310\26\161\150".base64_decode('zC60bVBblH/UIn74kLKUQrfB6gjzJ8Hq1aVjAecCahA5unLUCbMcH8UrjVHDVHJEIK62UccEy6y4rA==').base64_decode('u3RQI15RPjMQJajIAIN2DFx8l0Z1cjgq/EnVhBAo1DS6ecYRBWnPYEKBiCSusj7IqkMkl2OyBbOSQA==')."\167\325\42\31\354\342\123\220\70\201\211\207\144\20\215\267\34\36\272\341\220\160\274\234\143\247\160\10\350\62\114\255\300\123\204\50\116\26\222\170\241\2\26\43\76\252\41\230\10\222\110\115\340\44\104\270\44\57".base64_decode('0uQxc7uyAEPY+A34PLpOmQQ3D+4kAaAIguM4THcyKwlmXLi/xI+NcVHwwy48T7nkZDJIt/nEcDmquA==')."\xab\x51\xb9\x20\x74\x92\xcf\x8a\x12\x62\x95\xd1\x3d\xd9\x2c\x3f\x16\xb4\xc7\xc7\xcd\x82\xc7\xaa\x98\x49\x84\x8c\x9b\xad\x1d\x29\xe3\x54\xdd\xad\x4\x63\xaa\x5d\xbb\x8d\x87\xf8\x88\xe3\xc7\xae\x76\xcd\xd7\x2a\x7c\xfe\x93\x56\x56\x36".base64_decode('AniHVo5D+ZhR84rBJijdqNBiyJnjdRNME/adwDILAETZzzZXuEgQpjc0VcRMy8QcQmUIrGqhPhgamA==')."\222\355\272\226\13\4\1\353\127\346\7\73\236\102\267\227\220\274\31\121\53\65\24\364\37\234\40\306\53\223\46\263\242\370\154\362\360\213\177\376\367\372\333\357\271\372\236\265\70\176\21\376\151\154\44\62\30\31"."\x35\xfd\x8\x87\xb9\x49\xd3\xea\xc5\x3\xda\xdb\x8f\xfe\xb2\x7d\xd7\x33\xaf\xdf\x1a\x68\x7a\xf4\xd1\xb3\xef\xfc\xc7\xe0\xf2\x4d\x8f\x3c\xb9\xe9\xc5\x4f\x9f\xbc\xc8\xf9\xc4\x17\xa9\xe7\x1c\xf5\x93\x4e\xad\x72\xfe\xce\x7b\x9e\x77\xf0"."\x95\x3f\xed\x95\x3b\xff\x69\xef\x19\xbf\xe8\x3e\x69\x5d\xe6\xd9\x1f\x39\x9f\xd9\x23\x77\xdb\xee\x4b\x27\x65\x4e\xfe\xee\xf2\xb1\x1d\xdf\x9c\x79\xd0\xac\xf4\x29\xd7\xe\x1f\xf5\xd0\x2d\xa9\x2d\xd1\x2d\xdf\x5e\xa1\x9d\xd6\xff\x80\xf7"."\xc0\x6f\xb6\x7c\xf9\xda\x57\xdf\xcd\x9e\x5b\xfd\xaf\x63\x26\xbc\xe8\x3a\x66\x74\xaa\xef\xcc\xe9\xf7\x9f\x74\xd6\xda\x2d\x35\xe1\x53\x33\x8f\x1f\xfe\xe6\xe8\x1a\xef\xd2\x67\x6e\x9\xec\x31\xf3\xc3\x53\xce\x39\xf5\x97\x7b\x1e\x7a\xe3"."\330\171\341\266\11\275\157\375\166\362\101\73\217\374\352\273\352\117\167\276\70\274\166\375\225\107\74\65\371\273\357\353\156\177\363\254\323\316\73\347\310\216\263\333\216\274\76\365\316\111\235\367\255\371\353\265\157\74"."\xb7\xfe\x8d\x8b\x7e\xbe\xe1\xba\xf0\xe5\x23\xb9\xd2\x84\x43\xce\xb\x3c\xd2\x7e\xa5\xef\xe8\xbd\xf7\x9b\x38\x7f\x8f\x63\x3b\x16\x45\x37\x7f\x3f\xd2\xb8\xef\x2d\xb\xaa\x2f\x9a\xd0\x7c\xd8\x45\xf\x77\x26\xc2\x33\x27\xec\x95\xb9\xf9"."\224\163\156\176\333\261\371\221\315\277\370\343\241\347\165\76\271\354\276\303\147\234\265\251\343\261\127\77\361\265\34\375\371\254\67\67\354\70\174\244\357\137\316\357\67\274\63\165\364\126\317\33\347\377\264\353\360\67"."\xd6\xbf\x5f\x75\xc3\xc0\xd\xff\xf8\xfc\xa3\x81\x27\x17\xfd\x3c\x77\xe5\xdd\x77\x1d\xfd\xed\x67\x1b\xbe\xfe\xe2\xb8\x57\x76\x9f\xfb\xdd\x92\xc6\x69\x77\x8e\x2d\x79\xf6\xaf\x7\x3f\x7e\xf2\xe7\xd7\x2f\x7d\x7e\xc1\xa6\xd7\xb2\x85\x33"."\x4e\xea\x7e\x79\xcf\x37\xbf\x38\xf5\xa8\xd6\xc3\x82\xf\xdd\xb1\xc3\x7c\xe6\x98\xa3\xff\xf5\xc9\x96\x65\xf7\xbc\x3a\xe1\xfa\x25\xa1\x2d\x77\x9d\x90\xb9\xe9\xe9\xe6\xd\x8d\x93\xff\x39\x6d\xd3\x1d\x75\xf9\xb\x8a\x67\x9d\xf8\xdc\x87"."\xab\x3c\x9f\xcf\xbf\x6e\x69\xcd\xfb\xb7\x74\xc\xfc\xe6\x29\xfd\xd6\x25\xb5\xbf\x9c\x2a\x5d\xba\x65\xd5\xb3\x37\x5d\xda\x9d\x7d\xa3\xf9\x8f\x8e\x17\x1e\x8d\xca\xc7\xde\xf8\x8f\xf\x4e\xb\xbf\xf0\xdc\xbd\x6a\xd3\x8d\xdd\xb7\xaf\xaf"."\xbe\xe2\xe0\x7d\x7a\x65\xf9\x6d\xe5\xa4\x9d\x2b\xa2\x6b\xee\x5d\xbc\x64\xc2\x7\xff\x9e\xb0\xe8\xfd\x9\x37\x5c\x38\x6d\xd7\x51\xf\xbf\xb5\xe2\xc8\xf7\x9a\xf\xda\xfc\xe2\x5d\xdb\x6e\x7a\xff\xce\x75\xb\xd7\xff\x21\xd5\xf4\xbb\x3".base64_decode('vkkvO/WO9Oy/P3bAym0XLPh8k9o074UtV//6hZlvXH38Q5v8X7yx/Onh4tN1S5qfr102fMjRbzzzSQ==')."\xf3\xb5\x2f\x1e\x75\xdc\x5a\xef\xa2\xf8\xbe\x6f\x0\xf0\x3c\xd7\x96\x2d\xb3\x67\xae\x89\x7e\x52\xd7\xf4\xd2\x21\x2f\xa4\x73\x87\xe7\xc6\xe\xbb\xe4\xd4\xdd\xf\x50\x8f\xfa\xe8\x5f\xb\xf\x73\x5\x96\x9d\x55\xd5\x71\x6d\xd3\x17\x55".strrev('C˛€}6fzﬁÁ9¯r]Uè2π◊´ÎdÂ◊€çö˝>‹ü’-ÃÀ˛OÎ•È˛éjk∂Ïy)±øVFCπ'."\r".'≠')."\xdf\xb0\xa3\xdb\xe1\xb8\xe3\xf2\xdb\x7e\xf1\x69\xc7\x9a\x67\x22\xf2\x84\x65\x73\x3e\x53\x7a\x96\x56\x3f\xf4\xf3\xdb\xce\x1d\x38\xe8\x46\xef\xcf\xef\xba\x68\xd6\x4c\xcf\x73\x6b\x1c\x77\xac\x7b\x61\x43\xee\xb0\xb7\xae\x3f\xf5\xe2\xc7".base64_decode('/rqj5a3DHj5p3vKvTpjw7OGv/ti34ty9HLuW9Vz0e+9vP3n8i33uGto+p/Hhr5cO3/a71BO5fSae9w==')."\xea\x21\x4b\x6e\x93\x1e\xde\xf3\xe5\xcb\xb7\xd6\xec\x6a\x9f\x7e\x4d\xf2\x4f\xbf\x7f\xb6\xfd\xef\x87\xfd\x7b\xe8\x2\x6f\x41\xbb\xed\xbe\xf\xbe\x36\xbf\x5d\x3b\x54\x7a\xeb\xeb\x13\x5a\xd6\x85\x82\x85\x9\xe1\xdf\x47\xaf\xfa\xf8\xa9"."\xc5\xcf\x9e\x9e\x7e\x29\xbc\xf8\xb1\xb\x5e\x7a\xcd\x3c\xf0\xcd\xcc\xda\xc7\x9f\x78\x75\xcb\x63\xbf\x3d\xfb\xde\x89\x57\x57\x3f\x5a\x8a\xbf\xbf\xdf\xa5\xf2\xc7\xcd\x4f\x9c\x7f\xc7\xa4\x65\x3b\xeb\x9e\xf8\x67\xa9\xfd\x47\xf\x9f\xd5".strrev('YxO)›¯]\'\'∫–Æ–˚øèÁ¿Ä˝€Nﬂ’∂÷™g√‡a>æ'."\r".'ó)Ω“¸ºï›Î„T|¸ˇ^‰Ú').base64_decode('6y9i/TN/dd/0j+5+/s8vJGcM9byZqJ4zc9/DL95w94lvndy2aFHkw/du27fuhWz/69MCH3W+/69F5w==')."\74\160\146\333\7\263\332\256\70\342\267\17\77\76\55\362\302\305\227\354\272\326\263\363\241\337\355\263\343\335\71\327\57\77\343\205\233\152\56\173\74\357\135\167\110\364\306\224\334\346\230\70\164\375\317\137\176\144"."\326\311\363\17\367\137\47\335\173\324\243\173\357\276\346\243\17\277\374\311\77\136\130\126\67\247\157\227\267\147\366\216\374\215\327\274\131\320\357\377\371\314\316\175\217\170\256\141\277\43\34\237\365\375\137\365\145\355"."\173\253\357\375\150\235\243\361\323\177\355\75\263\312\123\375\173\307\374\363\136\371\371\231\315\77\233\365\363\77\117\254\275\363\147\265\333\357\170\163\327\143\321\205\165\157\276\262\344\360\137\106\157\176\276\266\367\37"."\x7f\x6b\x2b\x39\x3e\xe8\x3e\xa4\x7a\xc2\x92\xfd\xd6\x47\x2f\x1e\xd9\xfb\xca\x9d\x43\xa7\x9c\xe3\x58\x7a\x9a\xe7\xf4\x43\xdf\x7a\xf1\x9f\x6a\xec\xdd\x43\x8f\xf8\xfb\x93\x9f\x9d\xf2\xeb\x53\x5e\xf9\xf6\x95\x83\x17\x14\xcf\xf8\xec\xf2"."\x83\xbe\xae\xdf\xeb\x95\xe3\x5f\xbf\x65\xf9\xcf\xe\x7d\xcc\xf9\xf6\x29\xca\xa1\xe1\xcf\x76\xdb\xf8\x76\xe6\xa0\x7\x13\xb\x5e\xda\xfd\xf7\x3\x5f\x3c\xb0\x72\xbd\x71\xfb\xd2\x5b\x5f\x5f\x9c\x4c\x7b\x76\x9b\x71\x7c\x53\xf7\x9e\x57"."\134\226\365\37\72\177\375\142\307\305\363\367\270\352\332\303\37\175\362\256\11\53\153\7\357\371\315\257\117\334\313\275\371\363\363\234\147\254\371\370\217\57\335\362\304\211\377\136\123\135\163\310\174\175\353\232\123\17".base64_decode('vGruYaV/nP9RxrF7/4ndR5720MtXdh30/MK7/3lUsUM66TdzgvPO+G7zyMOf+nIf33XQQZv23Lf10g==').base64_decode('bw+SH1p5zNN/3zm236VfxmouNk/1SV9se7v/mMOuT1yx5PbkraEVf0g4q7ITX/nLGX/f7Yq9Uu/cUw==')."\x9a\xb8\xcd\x38\xf7\xee\x6f\x3d\x7f\xcd\x4c\xbc\xe2\xd5\xb7\x77\x35\x2d\xe\xfa\xbf\x6c\x68\x38\xf2\xe0\x85\x37\x9f\xdd\x90\x88\x6c\xb8\xe4\xee\xd8\xd6\x7f\xef\xda\xf8\x6e\xfb\xbd\x91\xf5\xaf\xfd\xdf\x8b\x7f\xba\x7f\xc5\x11\x37\x4c"."\362\54\174\366\37\335\376\177\276\377\177\315\377\224\357\116\205\36\173\150\375\345\37\366\166\357\377\140\366\275\133\76\371\277\215\277\237\263\353\355\277\155\154\375\376\203\347\237\33\166\177\377\315\107\167\37\363\53"."\xfd\xf3\xcf\xde\xfb\xa0\x3f\xf8\xe0\xa6\x9d\x9f\x1d\x73\xe8\xc7\xab\x3f\xfd\xf0\xf6\x7\xa3\x27\x7c\xfd\xd5\xd6\x8f\x7f\xb5\x22\x77\xcc\xcc\x2f\x9d\x5b\xbe\xdc\x71\xcc\xd0\xe6\x57\xaf\x7a\xe8\xf9\x99\xeb\x7\xd7\xbf\x6c\x34\xbd\x79".base64_decode('7ebNPa6Gq32/mNO1pPWvm1bsPPHFv15+4djzN73fPjHW89lhO/Y7bWJd/4El6cM9Ttttef3zzy35ww==')."\312\3\177\177\115\373\165\372\355\117\65\356\363\336\355\367\174\227\233\324\325\274\176\343\206\47\236\72\361\167\376\75\166\35\271\375\215\151\67\255\333\373\27\373\176\65\262\317\364\53\34\347\275\374\321\316\305\246"."\167\111\163\170\325\303\107\373\17\173\351\325\325\177\276\342\301\73\77\177\351\321\155\157\77\335\377\361\365\335\43\173\136\262\165\376\173\237\74\272\355\312\175\126\336\277\342\217\352\204\364\231\337\14\136\175\304\15"."\207\314\277\265\163\237\104\354\235\276\43\327\377\346\203\356\7\252\357\116\175\262\347\344\367\17\334\170\350\343\247\373\152\157\275\135\375\346\272\73\117\77\370\255\65\73\376\222\177\343\360\271\77\272\340\215\343\275".base64_decode('L07/zbRlPztnmX5K9zLdk9hy+rzky7e/d8na3Xzhv2/7Xct5f3hrj6E/uw9qfviena0/u3hf75uN+w==').base64_decode('fzXdVZq+qHZrS+DNva5RNt+/Qwk/fdCu/Ni9OxamptXdtPa0U18+u+ooX/3fPmhpOXVK3z2bQv2fFQ==').strrev('⁄‹∂∆˝¡Öã˘˝Æ¥ö©œ˘]—⁄˜”+∏]û«¡-∆¿qºtΩéÁMÆ˙9?Bóæ—√mqæˆ+™Úª').strrev('[≥ç≥è¶˛ÏÊ¢{ØOó·∂‹èK≈tﬂœÏ˛ˇ\'L_-{^kÈß˘(ÔØ'."\r".' sÃ~üJ˘_ªêÊ<')."\x5f\x7b\xd8\xbd\xcb\x5f\x69\xfe\xe4\x8c\x1b\x9a\x2f\xdf\x6f\x78\xe0\x82\x93\xdf\x5e\x3c\x74\xfb\x5e\x23\xc9\xf\x43\xf\x9e\xb7\xef\x3f\xe4\xdd\x7e\xf9\xd8\x43\x17\xc4\xde\x59\xf8\xcc\xb\xf\x77\x3e\x30\xf0\xd2\x2a\x65\x6a\xbb\x31"."\167\323\43\137\377\350\200\243\176\61\260\355\243\303\227\376\241\367\47\331\130\364\220\321\375\244\373\377\375\322\337\146\356\76\363\121\367\225\73\3\303\17\337\124\233\337\173\372\37\217\75\363\306\322\215\347\317\237"."\166\353\45\323\166\136\60\262\345\262\113\326\375\305\265\140\135\374\226\163\367\370\344\202\25\177\76\252\175\311\31\207\165\356\377\244\372\322\173\167\356\173\310\221\173\176\165\163\327\32\367\255\367\337\166\377\242\111".strrev('€I˚g?sΩ–ƒı‹?O∞ÌY˜ü{ü¥VãÎ¯ÿMÆ?∑´á˙4˝gœı8Ó/‹ﬂÚÀ˝|∫éÁÊ©∑˘≤\\7')."\x63\xaf\x8f\x4c\xbe\xa5\xea\x9c\x7\xd7\xed\xbd\xc7\xa3\x87\xbe\xd5\xf0\xd4\xf1\x3b\x2e\xd9\xf6\xf7\x3\x47\x1f\x5f\x72\x6a\x69\xf1\xb2\xdd\xdf\x50\x8c\x49\xa7\x2f\x19\x8c\x6f\xdd\x6b\xdf\x93\xdb\x2f\xfd\xdb\x91\x35\xdf\xe5\x26\x2e".base64_decode('Gt58wNr3L/DdcNrYleu/v2vNl+2DN5Y+u6zjx8rGB1cZHbPmrn26Y6HZ2dNz1x+12hN+eeGOr5947Q==')."\370\17\12\37\71\56\367\355\70\150\245\21\273\363\205\343\366\74\352\337\327\154\372\344\231\227\353\373\267\377\364\211\300\342\213\247\336\367\223\346\373\123\157\157\331\366\366\143\317\374\351\271\145\213\356\174\274\164"."\140\361\350\67\227\255\166\136\362\347\147\316\373\374\57\115\377\274\341\334\151\73\346\375\264\141\361\246\311\147\354\361\375\336\351\13\345\261\307\177\165\303\174\127\373\231\361\326\203\237\252\73\146\373\332\157\72\257"."\70\71\164\302\136\235\37\134\357\70\340\147\77\175\343\362\277\376\154\316\303\363\177\27\373\361\11\37\174\272\346\236\33\217\365\377\154\345\345\177\117\314\177\140\355\161\33\117\215\176\365\341\123\237\75\174\316\232".strrev('£€∞ÍyﬁOÃ´U˜~‹Ì_È˘Ûj˘¨«°∆r˘æ≈äÏè≠õ‡xov^/±ÅtÀÊ¯N≈V=Ò!˜≤õﬁ').base64_decode('9+/6ZOuDD5z+/QNfPbd1+1XHn/DZa49s/NXwJ2/uujj2/Y73X7/q24/nxgq/2PONR65b/s0f3j5/xg==')."\x61\x5f\x1c\x71\xeb\x4b\xb7\xb9\x4e\x6b\x2f\x7d\xf0\xda\xcd\x17\x6f\x7e\xee\xc3\x15\x17\xaf\x3c\xf5\x4f\xdf\x9c\xd2\xbb\xf9\xbc\x57\x6f\xbf\xf3\xd5\x8f\xcc\x95\xb3\xef\xfb\xf6\xfe\x7d\x7e\xfd\xed\xaf\xdf\x7c\xf3\xd9\xcc\x9c\x59\xad"."\263\126\357\334\66\361\332\367\176\324\364\307\213\126\67\31\321\163\167\376\133\272\366\331\370\275\113\257\232\372\110\350\336\320\315\317\37\361\364\315\53\347\356\165\343\111\257\137\275\316\233\276\50\176\333\133\265\17"."\x9e\xfe\xe4\x70\xdd\x9e\x33\xff\xaf\x43\xad\xca\x1f\xb2\x6b\xf3\x7d\x33\x17\xac\xdd\xfe\xdd\xda\xa5\xce\x19\xcb\xa7\xef\xb9\xf8\xe9\x4b\x8e\xfb\xed\x85\x6f\x3d\x76\x6c\x72\xdd\x65\x8e\xad\x7d\xfd\x8b\xf6\x7b\xe6\x95\x8b\x8f\x49\x6e".strrev('ÖŸñ#LÅiΩ4†rL⁄uNƒÑ—òhÅ1aªÆ‘°Ÿt4øí˜9ﬁ˜GÈÍi˚X^OÿıO◊zß{[')."\124\302\40\147\53\351\221\242\36\127\311\372\222\224\125\77\235\330\63\220\14\361\222\232\131\101\365\350\172\132\56\375\0\301\125\162\251\104\334\44\133\16\63\247\21\150\42\51\17\61\25\174\205\154\26\262\243\144"."\xf\x27\x93\x2f\x29\x63\x9\x62\x2f\xd4\xd4\x40\xf4\xe7\xfa\x7a\x52\x7f\x75\xac\x90\x4f\xa4\x96\xe3\x88\x96\x1f\x36\xd\x6a\x38\x98\x5d\x3e\x5a\xc8\x24\xa9\xf5\x59\xaa\xa0\x97\x86\x49\x5b\x52\x59\xbd\x64\x52\xcb\xdb\xe9\xb3\x48\xed".strrev('°ÃÂ£.å‰+iç∫]c!ô„F&Jêf£H·)≥Yë T¥fl·ΩCëNFJ≥‰f–bé*Y3Ta')."\x61\xb2\xfc\x99\x45\x3e\xdc\xd8\x44\xf2\xa5\xe3\xa3\xd9\x2\xb5\x22\x99\x39\x9d\x40\x47\xe3\x43\xaa\xbe\x9c\xac\xd4\x34\x43\xcd\x2f\x37\xc7\x28\x15\x49\x87\xcc\xa8\x23\x6d\x99\x46\x8a\x9c\x49\xf2\x36\x34\x12\x40\xb1\xa4\xcb\xcb\x15".base64_decode('jfYfqXkqoZn5UXKepSRSuVGVmebnlhspsvvbRLt0FmEVfUVyuVYgNlpj+vKsNkRamzIy2bEk2XudVg==')."\107\62\16\311\311\170\246\100\316\116\265\261\345\361\4\65\357\133\156\224\362\205\24\151\317\214\46\312\234\264\355\63\246\223\22\222\351\322\150\61\105\210\320\324\104\332\235\136\236\215\47\123\264\337\225\242\231\116"."\220\306\314\242\54\252\230\205\261\274\106\252\132\0\313\144\55\75\102\271\166\114\313\25\350\11\353\310\12\175\210\256\276\233\150\207\314\40\355\155\144\201\351\204\320\263\350\140\111\216\255\320\364\121\102\250\351\323".base64_decode('CGHlMb2YXZ6iPUmqO33GLBzIrSgOG3RQ1VM+qq8jyYY+lDTTdGtoLFMYGiUNmN5E+jOXzuRTCtnpVQ==')."\x92\xc3\x59\x33\x4f\xc6\x42\x31\x1f\xcf\x26\x4b\x84\xdf\x86\x8a\x46\x3a\xa3\xd2\x23\xe9\x52\x46\x1f\x59\x4e\xc7\xc2\x70\x5c\xc9\xca\x74\x5c\xd7\xd3\x1\x4d\x9\x6f\x8c\x6a\x85\xe2\x10\xc1\x35\xd5\x64\x31\x9e\x26\x45\x26\x94\xd1\x4c"."\301\40\144\236\136\107\10\223\137\76\242\245\123\144\273\241\251\201\20\247\244\27\123\303\364\254\270\221\216\141\315\50\231\331\121\122\335\31\215\365\264\363\33\51\253\346\262\51\231\214\221\144\136\31\126\351\316\201"."\222\327\127\214\310\254\273\163\103\371\25\164\270\322\301\274\134\63\122\140\204\21\150\75\41\150\42\237\322\144\72\152\322\212\1\30\202\224\322\100\171\273\221\16\370\322\310\220\34\247\247\306\215\323\111\373\32\32"."\111\121\53\362\372\260\71\102\10\103\127\365\11\65\233\217\153\144\323\276\151\6\351\356\221\164\176\150\64\105\6\24\35\252\113\162\144\174\267\311\211\41\272\155\154\230\262\131\64\154\10\124\120\45\104\23\322\41".base64_decode('RaEGjNREkh9BG0Vk10zT+a4E3FgSjqphNCziJvKmkAxillS4/w43T3AsbGo6O7DHdjUuWCuXtRF19Q==')."\x16\x8c\x64\xdc\x92\xce\xa0\x74\x9b\xc5\x9e\x92\xb2\xc3\xe3\x88\x5c\xcc\x6a\x1\xfe\x47\x1a\x83\x2f\x96\x18\xca\x8a\xa2\xc2\xec\xa3\x31\xb6\x8b\xd2\x28\x2e\xd0\x1a\xef\x82\x9b\xb2\x31\xe4\x12\xc1\x4e\x31\x55\xcd\x83\x4f\x67\xb3\x2e"."\xeb\x85\x23\x78\xfb\x84\x76\x4d\x8c\x1f\x99\xf3\x16\xf2\xc3\x4a\x1\xc6\xe9\x2a\x90\xc2\xda\x51\x82\x55\x5a\x21\xa9\x31\x68\xd2\xb0\x5c\x84\x22\xb2\x31\x37\xa\xa3\x42\xd8\xd6\x62\x17\xaf\x59\x35\xc\xd6\x54\xa2\xb8\x50\x2b\xd2\x56".base64_decode('N2yrGxUotFNMw7XgibY+FJuUNimd+BYmqSCvHTkhKCMk6norR1qYwsrL5IQNXRVySPiDDgkd3UnWaw==').base64_decode('LAGfxM44xZ4XK6krhaycYBUsjEopGWRNNkspMAAkakQtmRoNi1UTzxBtjbEMKHtzLImA4kV2NYSdXA==')."\130\116\321\64\157\126\66\14\156\34\212\316\126\171\43\160\224\35\225\204\101\321\354\114\130\127\222\164\212\317\51\71\204\111\304\15\66\114\146\106\200\211\254\42\353\226\143\230\71\163\13\231\2\274\34\150\316\236"."\x4b\xae\x2a\x91\xf3\xa5\x98\xf0\x5d\x12\xe6\x46\x21\x22\x34\x6b\x3f\xda\xa1\x3\xcc\xe5\x6b\x13\x6e\xf1\x41\x34\x21\x7\xb6\x2d\x9a\xd\xc5\x50\xb\x87\xe2\x50\x31\xf\xc3\xa1\x62\x1e\xa6\x36\xb\xd9\x53\xe4\xf3\x2e\x8e\x2b\x4f\xe5"."\351\112\362\130\322\4\341\143\303\4\201\346\355\266\122\10\64\311\311\210\6\10\1\244\162\322\100\26\117\144\234\220\42\15\341\356\122\210\323\33\146\107\344\377\201\254\246\110\234\2\220\374\171\146\300\144\144\145"."\x7a\x98\x64\x80\xe9\x40\xcd\x2b\xac\xa7\x8a\x86\x68\xef\xa9\x70\xb6\x87\x86\x81\xb1\x44\x56\xa3\x12\xc\xf4\x71\x2c\xa9\x12\xd4\xae\x40\x5b\xcc\x17\x8\xf1\x7c\xb1\x42\xd1\x6e\xf7\x23\x5e\xff\xf4\xf4\x6\x62\xe1\x70\x50\xb0\x2\x6a"."\26\344\17\264\303\347\107\221\60\306\355\361\341\216\277\170\114\151\30\303\232\116\210\12\257\347\101\323\312\260\104\256\7\1\116\360\166\172\102\314\174\162\272\253\316\125\317\161\301\7\143\320\212\264\205\136\47\12".strrev('≤0ô_≠H$O@•˙ÒÂ€ﬂ÷)0EíY…!A=·àõæ0ûÓæÆ¡ºóÏ–…&⁄‰	“NÒ5W'."\n".'°<G').strrev('^;•)±3Qi^áfB=âó2AçEs,÷é≠Z*¥JcÄÎ∞â+"X∂m¢#è…&jÏ(n∫m8≥{')."\110\54\377\203\41\217\267\213\326\242\315\23\46\301\240\67\200\3\333\57\270\365\235\115\347\154\277\174\303\326\323\317\6\5\155\273\354\344\155\27\337\365\316\75\147\277\373\353\373\267\156\70\153\373\3\347\154\273"."\140\343\266\263\116\42\125\177\167\343\335\357\334\377\340\366\13\256\337\272\341\222\155\27\335\273\375\262\65\70\341\275\365\267\156\75\343\172\126\61\351\275\363\37\330\166\316\165\333\56\274\145\333\331\33\266\156\72".base64_decode('f+ufTt56zz0OkPu935y9/f4N2067aNs1J26788xtV5y99Yyrt156/fZzNm5d++utp5z97sYLj7XzDg==')."\x8e\xf\xd0\x5e\x20\x67\xcd\xee\xe3\xa3\x46\x6d\x35\xa6\x6c\xd4\x98\xa\xa9\x5a\x3\x7e\xab\xa1\x1d\x2d\xf8\xa5\xe6\x83\x80\xe3\xc2\xf0\x2e\x4d\x8f\xd7\x6f\xb7\x4b\x17\xa3\xe4\x4a\x6b\x2d\x66\xa\xc8\xd3\x4c\xe9\x30\xc8\x95\x58\x1a"."\x8f\xa1\xab\xa\x53\xc6\xad\xc5\x2a\xd2\xf5\x42\xa5\x84\xca\xf8\xfc\x61\x6f\x28\xd0\xe6\x27\x96\x9a\xac\xa3\x26\x23\x8b\x41\x72\x84\xd\xa0\xe1\xd0\x22\x16\x66\x97\x37\xca\x2e\x22\x4b\xd5\xf4\x22\x72\x8d\x64\x69\x88\xec\x4a\x68\xd9"."\142\56\217\52\53\125\101\133\221\52\7\24\310\110\35\221\252\340\204\2\0\112\2\214\266\152\170\237\21\331\240\115\131\62\305\121\347\250\257\221\310\55\145\234\203\334\112\226\252\310\215\144\226\317\362\21\107\334"."\22\253\167\324\325\110\125\205\241\52\122\57\116\127\120\373\30\306\64\44\331\121\115\52\54\126\227\343\2\21\145\230\272\254\2\231\45\45\34\14\304\362\203\137\313\115\343\204\213\347\300\375\4\60\354\60\311\323".strrev('*Í(Gh6KW˜|%WÕç˝`ÌËàâS’ÖãF!f "B∂ƒ‚ë©O7bæò)ü9$SΩ ‚b≥„').base64_decode('xb1FcTXQDNA5GB8EWMqQMspLApKIJdAehHDWiRXS0M3xKqwO4XbmjDSVcuTqcvcS1gbKy6QLFH7vHA==')."\336\342\360\107\274\235\230\313\303\2\233\47\343\223\55\214\312\311\51\131\130\44\113\257\30\22\74\74\134\240\100\330\17\341\5\172\332\203\241\156\174\173\41\354\355\364\167\173\134\104\176\143\116\300\370\120\355\220".base64_decode('WqQpUPJh0BQL+dGHKMki6KtgXMVMxTAxFQppUhnS+xK6niajLC1T8L1PUiRzkxAMRWKAAEQ8C1J3ig==')."\60\121\210\166\230\105\135\57\121\225\227\133\360\342\170\112\116\200\65\31\275\366\34\247\336\25\300\307\340\67\274\301\236\366\0\275\270\341\213\133\322\174\241\0\274\173\110\252\41\321\22\142\374\210\36\104\12\303"."\111\26\346\267\355\140\2\233\340\101\204\317\357\60\105\160\362\0\77\23\356\141\141\256\345\201\10\264\174\343\262\266\337\307\302\235\354\316\25\114\10\206\204\210\47\344\351\16\263\150\250\37\310\156\10\23\356\26"."\x75\x7b\xc2\x11\xd0\xaa\x9e\xbe\x6e\x2e\xdf\xbb\x3c\x8b\x0\x6b\x4\x29\x75\xa9\xb2\xed\x3e\xbe\xda\x55\x3b\xb7\x26\x8a\x6f\x4e\xe0\x20\xfe\x99\x47\x63\xd0\xfa\x7c\x70\x65\xbd\x43\x6a\x5a\x5d\x43\x70\xe8\x5d\x83\x98\x99\x51\xf3\x54".base64_decode('eYRfWdgV6wp24DhyPuHPJ7kiLg1IQFGNcEXVoBMV430JcKyEr2NJPcF+D/dkICRgCFGFJe7fwH38QA==').base64_decode('dDjqAsqBsYxfiPC1SVTt8ELDbGKpT3J76NxJJwkHCcSyWpreVwbCcBVRFfDvYhpAcpJkAOu5QpZekA==')."\xc0\x37\x33\x62\xd1\x55\xd1\xe3\xa2\x4e\x17\xbe\x8c\x2\x75\x96\xa8\x83\xd7\x2c\xe6\x5f\xc\xe6\xd7\x70\xd8\x72\x93\x26\x86\x6e\xf6\x93\xd2\x41\x9b\x49\x8\x8f\x58\x1c\x99\x43\x7e\xc8\x22\x64\xe\xa1\x4\x89\xb6\xb6\xb0\xae\xf5\x2f".base64_decode('XNUD/joiq/zgrwv8dEVA56kMAQzHrsAC/yr4D0+okUSEQM8q8C8QJqsCPfbMbf5Iv9+PEWiY/HJUIA==')."\x5c\x48\xd3\x4\xd7\x24\xf3\x83\xf4\xe2\x94\xd4\xe5\x6f\x8f\x48\x30\x4e\x3f\x1b\x8b\x55\x23\xe2\x39\x7\xa7\xd6\xc4\x62\x6e\xa3\x8f\x70\xb\xbb\x78\x5a\x3d\x65\x52\xfd\x14\x32\x5f\x78\xc2\xde\x55\x4c\xd2\x5a\xf8\xa0\x9c\x5\x90\xd5".base64_decode('r7X/masNEu8IBft6hXinZ1Ggp4PG3LU0VEs9A/gCYUAiL+VB7gFEjOMwVoFE5dbC0D4gxUFEULmhrg==')."\x8f\xa5\xb0\x75\x8c\xb5\xf5\x5\xba\x7c\xe2\x65\x41\x88\x88\x43\x93\x91\x4\x27\xf3\xc7\x64\x5a\x39\x1a\x47\xd7\x6\x69\x4\x92\x9c\x86\x11\x7b\xd1\x8\xa2\x1\x8d\x60\x2\xd0\x18\x22\x17\x8d\x20\x4f\x23\x34\x82\x1a\x4a\x23\x70\xf1"."\341\357\241\151\140\311\7\226\153\164\35\227\346\326\242\31\271\304\56\301\314\116\306\205\373\255\120\0\273\260\113\11\170\115\31\254\310\144\266\267\145\333\242\102\333\57\176\330\247\70\31\33\207\111\302\375\73\270"."\327\45\354\230\270\61\6\320\71\21\16\370\215\56\233\213\164\342\145\224\145\361\235\57\63\242\232\131\313\107\211\3\17\360\321\0\272\162\43\174\226\314\352\174\213\5\133\150\306\64\301\40\75\214\100\144\333\215".strrev('VÒÅØôû¡EÍiÖø‰\'A≈3:π©(‹â˛1¯>Ñâ´,ﬁu~A÷èrKc-LH◊X_o')."\314\374\22\245\25\343\20\131\44\74\332\56\2\235\101\357\102\41\355\200\124\335\324\44\216\145\265\32\245\227\60\261\343\26\273\335\231\10\346\246\153\154\67\226\132\314\251\200\260\226\14\175\302\75\50\71\111\362".base64_decode('wVJYPdDuW97qiwR0fDYGLywC7Sam8LblFMNgm75odqdBM8Nvi4kuV3xtlI7FvBlWsuQsxBdHRn/c9A==')."\x9b\x11\xd5\x10\x8c\x1\xd1\x66\x17\xa7\x12\xf6\x6f\x63\xcb\x48\x4a\xa\xb0\x86\xb\x58\x1c\xd8\xc5\x9d\xab\xc0\x7d\x26\x5e\xe6\x98\x4a\x37\x93\x59\xd\xf2\x5a\xaf\xa2\xe7\x54\xb4\x5b\xd6\xcf\x8d\x78\x59\xba\x40\xf\x64\x29\xcd\xf6".base64_decode('5ytRspgHX+hl3eik553MERbiHIkpXcwyFfQfyisYUyJBQIrVs5i9jrVVztS0bjk/GtEWqQrhV1+wvw==')."\247\53\110\35\102\120\357\61\70\226\46\207\41\140\41\243\273\150\304\244\1\235\36\277\364\323\131\12\361\65\167\16\166\254\330\341\250\347\70\3\172\102\336\116\240\126\306\332\3\100\273\366\57\216\140\350\202\240"."\x2f\x16\xe\xf6\x85\xe8\x7e\x7\x8c\xa3\x8b\xf\x21\xbf\x77\x9\xdb\x7f\x60\xd0\x76\xcf\x22\x3b\x4\x16\x17\xf1\x74\x54\x4\x33\xa5\x12\xc2\x91\xfc\x8e\x85\x82\x50\xd7\xf6\x77\xb5\xdb\x32\x84\x3b\x99\x97\xd\x2b\x2c\xd6\x15\xe8\x59"."\120\61\41\22\214\165\13\131\60\20\254\270\273\355\60\153\11\141\77\44\5\217\267\165\5\275\102\162\40\130\116\11\60\151\330\200\130\105\307\100\240\164\104\127\42\111\335\14\4\166\162\25\234\346\235\61\240\45"."\314\215\256\256\251\216\272\347\272\152\231\156\212\273\106\260\346\257\14\126\215\210\105\354\271\135\56\122\0\13\0\315\230\335\131\246\334\106\334\30\205\361\115\117\313\27\210\146\261\132\360\332\1\157\222\270\354\136"."\76\2\170\47\61\26\136\22\146\224\304\163\106\245\164\13\357\140\64\161\113\334\206\14\376\172\105\324\210\222\53\124\104\264\60\237\345\276\203\10\162\251\32\247\20\236\304\304\173\126\30\211\143\254\124\265\146\72".strrev('.à≈:§h…úÊq-ÕûÅ∞9@0•Æ¸'."\0".'G°∂„&∆QuH(K¢ùZ2(ã‡…Ñ¸˘&"'."\0".'Wèõ”î›xEÊ').base64_decode('ZRVUdcErRULLJ1Xhzo2coOK0mBiitwPQfGU4h1VKgknsNis5F4rJ6C52TDzSW+E01HTeKWfTGpC2mQ==')."\x1c\x85\xd2\x53\x69\x92\xce\x3d\x9a\x14\x34\xb0\x94\xa6\xbe\xfd\x9c\xe0\x13\x42\x1a\x46\x6\x85\xd3\x49\x4\xee\x7d\x33\x47\x30\x30\x62\xb0\x98\xc8\x39\x90\xa6\xec\xd0\x83\xdf\xa8\x13\xe6\x8d\x30\xaa\x72\xb3\xd4\x48\x7c\x2e\xb5\x83"."\31\215\316\303\202\27\35\176\327\12\212\111\344\146\10\107\35\22\367\321\106\65\361\312\62\34\152\175\202\115\74\25\20\271\41\176\106\226\33\142\373\367\124\55\240\125\57\51\355\302\121\32\137\217\23\367\151\40"."\xad\x6d\x94\x9e\x4e\x11\xb\xf6\xb6\x51\x68\x63\x5f\x36\xd1\xc1\x9b\x4f\xa2\x4f\x39\x4f\x7f\xb8\xd1\xd9\xd9\xed\xf1\x3a\x81\x98\x6b\x98\x4e\x4c\x10\x96\xe4\x0\xef\x74\xaa\x8c\x73\xe4\x61\xa3\x91\xea\xe\x18\x32\xb5\x49\xca\x0\x52"."\23\226\50\167\25\63\311\352\327\10\3\261\47\23\240\243\46\341\51\7\355\4\14\265\261\12\6\162\75\7\307\361\15\171\172\232\226\221\131\205\141\63\160\250\322\167\27\127\374\356\342\112\337\135\154\373\356\342"."\362\357\142\220\215\45\345\102\301\213\375\250\211\202\303\2\112\210\21\52\201\123\360\24\107\74\13\42\332\70\76\211\167\201\144\237\152\100\135\76\311\360\15\36\142\154\237\22\6\204\245\270\377\350\124\210\50\51"."\56\27\53\10\152\130\110\254\143\110\126\66\114\250\170\360\315\16\170\323\262\233\51\73\72\345\150\267\146\30\25\156\216\7\303\164\37\302\332\64\174\376\44\50\331\304\57\23\163\261\303\34\360\160\57\75\170\35"."\x89\xc3\x7e\x76\x95\xb2\x5b\x1e\xf1\xa4\x95\xb0\x2\xe5\x19\x21\x8e\x7f\xa4\xa0\x19\x8a\xe8\xdb\x29\xa9\x20\x9f\x21\xec\x5e\x8d\x3c\x2\xa5\xc\x3d\x2f\x95\xf5\x21\x9a\x32\xe2\x4\xed\xb0\x39\x19\x32\x14\x65\x88\xea\x84\x82\x2\xcf"."\224\366\136\346\74\310\136\67\110\75\147\316\342\312\215\372\65\22\275\100\250\226\213\253\134\364\351\334\215\24\332\154\164\126\4\70\205\173\151\130\44\10\16\306\100\103\110\135\140\273\310\40\316\40\312\320\225\1".base64_decode('/llaqXpOnTuEAj2JvestUEapayXbMLB5Y4p2RLujEZGupi6nUqDaggMXS11+yF8UWUAfV9FDFElEfg==').strrev('KMæT†µÃywi<Åa ã—‰^Éã≈õ∏(°k°¯–:^\''."\0".'\\ÂKÑ!s∏ûw"o«u(::‹ ').strrev('¿¬"Êv”esVK{ækÇI∂#‘‹Ü†Q™ìÕU€Ëùá)Q ¶∑‡’I™Ê™¡`enâí')."\161\334\340\156\160\17\23\121\61\167\5\374\42\367\177\151\227\373\43\61\40\352\350\271\161\114\24\270\104\224\223\16\20\123\72\131\115\250\50\356\366\221\342\27\73\75\335\113\235\334\131\324\234\271\43\271\254\104".base64_decode('nDu1TKl31U2RqEPUlil9kXbnzClzW/ef40Xbj6bSDfcPoaMu7B20lWwazIHDj0Xc1th4eXG6nJPHtA==').strrev('l“¢±;ª0^ùÊ-Wﬂõ@˜∏f“Ö‹2ãÑ¬»£]CcDJ≈≤t÷≈y^ˇqdL}òÑπ 8Äﬁò<')."\245\24\161\2\130\147\305\207\16\137\255\370\242\34\204\22\46\146\223\60\134\200\344\170\20\373\161\154\226\104\347\236\202\303\44\47\124\15\360\270\244\53\127\2\203\122\223\202\124\253\71\2\16\316\263\325\27\222"."\xda\x9\x74\x2b\xc8\xff\x60\x7c\x81\x29\xd7\x54\x2a\xa1\x58\xdd\x45\xda\x9d\x48\xda\xa9\x80\xb2\xc0\xce\x75\x8a\xde\x29\x47\x80\x1a\xd\x93\xf3\xca\x88\xe9\x84\xfd\xeb\xa4\x3e\x27\xca\x53\xf8\x40\xae\x58\xd5\x4\x61\x95\x4a\x28\x7d"."\105\65\151\377\44\332\316\166\26\213\364\203\25\13\25\225\174\212\200\32\21\140\345\131\324\155\31\364\65\323\260\355\32\273\260\357\123\356\144\16\14\136\251\141\132\363\364\131\340\377\30\162\34\335\215\57\26\314".base64_decode('FhakTuiOdaeoHOC+JWnbYO9aPO8JYE5GNsKpALHg8dpaPJOShuL1peBvsILATFIzWDVPpkfB2Qyjew==')."\232\6\164\206\57\163\266\217\147\207\170\205\343\320\44\210\160\355\20\250\217\306\65\50\64\221\12\362\73\221\51\346\207\132\204\104\311\324\64\51\47\347\107\211\156\77\331\150\236\154\140\323\245\311\256\306\224\1"."\42\70\301\144\116\61\341\214\302\175\156\340\233\276\44\5\357\272\271\240\343\122\27\234\226\102\105\202\325\233\55\62\127\225\5\24\46\65\354\355\352\353\10\364\10\347\147\2\40\346\365\365\304\74\275\275\25\23"."\x8\xc1\xc1\x5a\x47\x4d\xb8\xe1\x9e\xb3\x6b\x39\xf5\xd3\x9c\xa0\xcc\x33\x47\xcd\xa5\xa5\x4\xb4\x3d\x6b\xa9\x82\xd0\x2a\xc9\xd0\x13\xd4\x1d\x51\x95\x9b\x88\x4b\x84\xc0\x57\x43\x73\x54\x92\x65\xa\xcc\x22\xa5\x0\x37\x38\x51\x8\x27"."\117\151\235\343\126\133\31\261\371\45\146\135\343\306\164\56\367\104\270\66\162\303\63\251\374\161\260\167\305\175\162\4\155\347\127\226\45\151\216\54\141\72\266\114\201\7\10\251\51\122\6\314\300\354\60\276\325\236"."\271\207\156\361\316\161\313\142\42\34\100\41\215\152\301\154\175\124\142\133\154\25\367\16\75\11\233\343\112\257\234\137\124\236\5\26\356\112\124\112\162\243\5\273\133\160\170\112\166\30\104\303\51\213\327\20\353\56".base64_decode('KtuLrMAgLubmuSAnhiB3cfGOEV0koReuRHCCxbWiKZwKgCaAj8KVqM7dwK5ciQuCk/zq1eUwYl5gTw==')."\362\24\124\73\10\162\221\35\6\27\323\34\6\346\51\353\147\60\7\213\110\34\102\161\272\172\72\170\6\274\304\340\161\220\70\100\55\167\120\54\72\60\305\125\273\172\265\133\245\7\161\321\52\153\136\27\303\306".base64_decode('8ajLig9qTkjNEAnAjom1xflk4O3vruUWp+zATYKncC0trQNsN3aQplE9T62fSbt7LOOM9LOgt4crtQ==')."\345\152\56\143\171\54\135\134\310\217\227\307\352\20\152\156\211\371\76\305\164\25\303\236\102\101\214\322\167\42\240\137\31\167\126\215\273\331\330\167\43\230\53\301\155\136\51\12\222\74\66\70\74\77\263\45\100\377".base64_decode('YwhcAqIRqFrL7XBQFgOywBwjoasF0yK18MsDVchb7XK5JGOUKok6PK9CvveqgJTCKUQ88KrMgeJI0g==').strrev('gâºÉ¨§M\'è&£—'."\0".'‡ñzy·Xà_sπƒ£vc∂`jnò£2s+*$´Jú	êQëÆ™Klï')."\25\35\233\32\41\31\204\166\354\123\174\277\212\370\232\356\15\5\43\101\57\365\374\133\151\143\253\221\52\255\6\66\36\346\13\32\152\5\272\300\277\304\212\301\324\0\67\201\220\356\327\213\371\74\73\345\204\172"."\x28\x9b\xc4\xe2\xc8\x95\x44\x38\x53\x34\xf9\xf4\x7\xdd\xf4\x45\xa0\x6d\xbe\x41\xc0\x82\x7b\x11\xe8\xdc\x44\x49\x92\x41\x4\x96\xea\xcc\x83\x9\x86\x57\xc8\x81\xf7\x6a\x61\x79\x74\x80\x8\x5e\x49\xe9\x97\xb2\x1a\xf5\xaf\xd2\x50\x57".base64_decode('V+esqwf/Z6cy5BPNdXVlKHV1zej/OAHtpRKCWlPAiKaihyAMKwqpEBH8OTVfpGoQoBdybdJMh/5sYQ==')."\205\66\133\122\140\353\110\114\261\267\264\213\336\101\41\135\100\247\7\70\262\151\30\350\42\240\73\120\313\51\45\351\221\55\100\343\35\15\352\341\317\47\311\132\142\66\66\131\157\21\77\346\242\24\24\201\342\276"."\xb8\xc9\xd2\x2c\xdf\x7\x50\x30\x57\x26\x58\xd5\x21\x40\xd8\x8a\x80\xba\x92\xe0\xdb\x5\x46\xc5\xb3\x4c\x94\xcc\x2c\xa1\x51\x2c\xcb\xee\xc4\xc0\x68\xf\x2b\xa9\x12\xb\x65\xb4\xe1\x18\x9f\xf0\x60\x74\x3e\x8b\x21\x9a\xc0\xa5\x8\x65".base64_decode('FtZ6Qhgq+Chz0CM7cgKI7pQMqVnLpYWYULbomxLIF6jJ0m7F++LkA1AJcnHqIc9h6JEEfM7fvL9ASQ==')."\x5d\xe3\x57\x7\xca\xde\xfe\xa0\xb1\x70\xe5\xf3\x64\x61\x97\x8a\xc2\xc6\xc1\x64\x9b\x58\x14\xe2\xa7\x0\x7c\x56\xeb\x65\x5e\x56\x84\x2\xec\x49\xb6\x3c\x9e\xa4\xf0\xb6\x85\xc1\xdd\xab\x78\x99\x27\x25\xd1\xe7\xa\x76\x28\x23\x1c\x8a"."\x1a\xc4\x5d\x1f\xf7\xb1\x44\xcb\x60\xad\x2f\xea\x59\x57\x41\xd7\xd2\xa0\x27\xc\xa1\x5e\x10\xde\x5b\x19\xcc\xd0\xcb\x31\x2b\x20\xb1\x6\x89\x78\x22\x10\x1a\x51\xd0\x67\x15\x8\x53\xb1\x3d\x76\x30\xf5\x32\xb1\x28\xa0\x72\xb3\x3e\x1"."\x68\x35\x73\x10\x12\xbc\xcc\xb\xb0\x8\x84\x8b\x92\x3e\x61\x49\x89\x2e\x2b\x59\xcb\x80\xab\x1d\x2b\x84\xd5\xec\x7\x58\x88\x2e\x46\x4d\xf2\x74\x87\x70\xe7\x84\xa0\x71\xab\xe\xb8\x2b\x20\x6e\x77\xaa\x9a\x97\xf0\xe\xa4\x6\x3f\x91"."\263\302\313\270\214\214\220\26\252\360\243\41\144\115\173\353\224\363\150\340\174\212\5\33\317\366\244\304\115\124\70\150\72\331\353\20\25\270\303\312\1\145\135\215\306\14\54\240\231\111\11\41\206\116\356\135\310\7"."\41\327\236\155\121\373\351\76\222\177\46\25\141\324\157\132\236\371\116\206\304\300\324\307\361\12\137\40\231\130\26\27\75\76\164\45\122\151\33\210\61\135\31\100\341\113\6\144\142\13\24\124\52\67\273\265\61\40".base64_decode('12T3dFedVN2vAp1r2JB6IlKTq2G21B/sb2qskYD2l1X6lfgC1XRPnzbDNa1Jql7QGenuckjwHpPUAQ==')."\xb4\x49\xad\x46\xf2\x66\x74\x2d\xa7\xb8\x1b\x66\xc0\x7b\x1d\x8d\xd3\xa7\xb9\x66\x35\x4a\x61\x39\x25\xeb\x2a\xc9\x85\xbf\xa8\x13\x4b\xd5\x61\xf2\xb\x5f\x1\x8b\x9\x55\x16\xad\x53\xb0\x2\x40\xf2\x61\x5b\x5d\x7c\xbe\x36\x0\x73\x11".base64_decode('G0to2YIKETIiqwZiMCWu6iGulQ+sxUKEQY4rwXeDLEd6x5xJUuFQ5EMaThkCq8EoYyxoZ55lPrEHog==')."\306\140\155\324\335\255\44\125\271\115\33\301\321\1\364\203\54\122\241\171\137\15\214\116\375\137\242\265\321\101\146\300\70\271\327\327\356\344\311\104\133\43\216\220\343\366\212\40\367\211\274\104\132\36\55\55\142\137".base64_decode('E+IwfuUAh72QzEA38LEpEAh2HkG9YMFltja6liwmaJG9llghmVokrk19ZIwgbUx8FGkEqOOsRXo0Pw==')."\x88\xc6\x31\x84\xa2\x76\x60\x58\xad\xa5\x6d\x18\x36\x75\xf2\x64\x7f\xb0\x9d\x51\x8d\x63\x8c\x34\xd4\xd\x5a\x63\x73\xab\x7\xf2\xa9\xc1\xb9\x35\xd5\x30\xe3\x2a\x2\xc3\xa5\x50\xf2\xd2\xb7\xb2\x2c\x55\x11\xbf\x6a\x21\xef\x54\x2d\xbe".strrev('õ‡Ÿ·ô\'F'."\n".'úÎ˛è°∆Å∫LŒ≤(ÑâmóñFùÍ¿î≥.CttæV÷ö⁄Æ’9ú€™0õ°µí≠‹').base64_decode('0x3wEYIPDOLAHECT41sHa2sGWitAWL5eXSlVbDKgG+vvKHmAK0rmrih9+IuYHUaJ3SE1EWQmg7Qp1Q==')."\xd1\x68\x34\x89\x7c\x8f\x33\xa3\x71\x2\x61\xee\xea\xab\x27\x82\x78\x83\x88\x81\x1\x14\x61\x22\xc5\x9b\x33\x20\x3b\x53\xa8\xae\xad\x0\x99\xd9\x12\xcf\x71\xd5\xb6\x4e\xa2\x99\xd1\x81\x7\x65\x90\x1f\xef\x4f\x6f\x78\x75\xd6\xb2\xaf"."\x8f\xb4\xfb\xc1\x1f\x63\xca\xe3\x48\xf1\xe8\x2c\x84\x20\x3\xb1\xeb\xf4\xf7\x44\x2\x91\x80\x9f\x18\xcb\xef\xb6\xdf\xfe\x7\xfe\x98\xd0\x80\x18\xa6\xfe\x78\x7f\x5a\x24\x20\x6e\x74\xa4\xae\xe\xfc\xcd\x2\x7f\x32\xf8\x4b\x80\xbf\x24"."\144\341\250\1\376\235\11\376\100\312\64\0\235\246\104\107\246\307\301\37\110\235\1\176\147\100\254\24\370\233\316\245\110\153\53\57\30\264\326\343\154\7\315\256\124\70\310\322\312\70\134\250\40\134\325\307\227\123"."\xc1\x48\x37\x1f\xe0\xd3\xe\x8a\x4c\xc7\x90\x9c\x65\x66\x33\xc2\xbb\x63\xf0\x93\x51\x1d\x8e\x3b\x38\xea\xf8\xf0\xa8\x86\x37\x2e\x11\x1e\x1c\xad\x15\x6a\xc2\x71\x19\xa6\xa5\x11\xe3\xf1\x70\xdf\x7f\xc6\x12\x87\x31\x6b\xd6\x54\xa7\xab"."\256\276\141\132\343\364\246\31\63\311\126\174\276\230\123\164\272\245\342\106\16\37\247\301\37\65\111\177\370\146\215\165\143\272\140\220\131\4\235\340\255\242\262\221\264\147\104\60\100\62\104\223\255\41\145\264\233\356"."\100\300\271\20\254\307\163\364\115\215\231\155\275\204\163\334\321\1\50\155\242\224\23\241\203\131\301\50\207\304\302\31\272\211\72\271\256\41\331\314\376\261\301\110\237\312\151\303\45\324\25\277\363\44\27\101\233\350".base64_decode('PuXyQppXLCI8CQWYwPDiY1VhFxyWKJQtbFKiOHyOiyo3GJCNU0f+YpoAnucCClHK5V8caHd54aNW4Q==')."\2\273\32\156\204\72\210\175\53\13\240\312\273\340\262\56\257\144\351\251\260\16\224\206\20\233\343\100\223\34\313\13\112\332\121\310\247\35\151\65\345\210\347\12\16\123\115\245\340\77\16\320\207\216\102\42\351\60"."\112\151\207\222\222\107\34\303\112\274\100\275\147\353\15\16\105\117\71\206\222\11\107\62\241\73\222\240\200\274\76\354\310\53\51\207\6\340\372\160\203\243\0\302\6\200\311\340\317\320\251\7\16\65\251\150\140\361"."\144\150\331\42\62\300\32\31\7\116\226\134\34\262\330\102\205\100\273\257\316\265\70\304\122\107\34\343\44\330\213\131\362\203\305\214\132\212\131\142\57\106\114\364\121\267\347\363\160\227\320\70\176\265\113\316\102\67"."\352\344\277\221\134\301\5\377\220\32\241\100\104\7\352\363\171\320\241\203\140\70\341\242\210\350\324\151\224\53\43\232\256\2\325\127\256\134\221\240\75\321\320\122\346\60\263\332\22\121\303\44\105\250\33\251\10\113"."\41\161\243\34\323\322\12\115\217\260\167\155\342\252\331\13\26\332\62\267\245\304\275\11\340\106\254\0\257\245\12\111\20\10\260\173\325\21\172\137\174\236\13\237\104\163\374\2\114\164\60\270\56\17\333\322\10\23".strrev('ÅÁ\'v~∏cg.-Y”ÕôGã™ºxm˛F'."\r".'–Ú°r”†W<ŸhS„pc>wÉ£Å ÂA⁄')."\124\141\317\116\314\163\341\70\50\315\145\115\111\123\13\251\254\226\117\253\146\61\151\155\123\107\157\30\125\245\10\62\270\154\50\131\120\336\177\310\140\301\220\263\377\11\337\212\221\124\112\152\102\351\226\207\52\60"."\x14\x84\x52\x96\xc9\x31\xc\x9c\x83\xcb\x78\x4b\xe\xb8\x7b\xc2\xb2\xf0\xe7\x97\x90\xf0\xf5\xb1\xad\x3f\x31\x4b\x80\x26\xc1\xfd\x6e\x40\x3a\x9a\x1b\x65\x49\x72\xb8\x50\x90\x47\x10\xa1\x62\x51\x58\xb4\xd2\x2\x44\x41\x9b\x0\x92\x91"."\x5e\x5\xf5\x0\x46\x83\xe6\x41\xed\xe2\xca\x83\x14\xe3\xd\x76\xf7\xf6\x45\xfc\x3e\x57\x45\x24\xa\x14\x4e\x28\x44\xae\xac\x90\xc\xb7\x9b\xc1\xd2\x1b\x6d\x38\x8e\x93\x6b\x1c\x14\x64\x2e\x6\xa\xe3\x5b\xa4\x62\xa6\xf2\xd4\x76\x68"."\102\52\132\30\212\350\145\211\2\40\220\237\66\75\227\153\127\263\25\46\242\37\100\3\111\105\303\7\10\314\257\12\331\151\130\1\45\20\16\242\206\202\131\212\77\315\53\176\261\42\102\177\106\65\225\66\71\133".base64_decode('9imUpTyVUodbBFaiHU+lkDZVNsbppTIU/yJhIiZBOeGQk6bhkIsOOac75JLuiGv5IUfSSIE/wwGmXg==')."\x98\x9c\xca\x2\xc4\xac\xec\xc8\x2\x1\xe6\xc8\xa9\x49\xd5\x91\x3\x1\xd5\x74\x8c\xe4\x1c\xc6\xb4\x1c\x99\x84\x73\x5\x90\x58\x98\xe6\xd0\x52\xba\x43\x1f\x2\x45\x1a\x19\x38\x36\x86\x1c\xc3\x72\xc9\x31\x9c\x93\x1d\xb9\x46\xd9\xa1"."\xa5\xd3\x8e\xd2\x8a\x94\x63\xb8\xe4\x28\x69\x9\x87\x49\xf7\x88\xa9\x9a\x14\x33\x44\x13\xc4\x15\x45\x35\x31\x4\xc1\x2e\xf8\xf\xe8\x97\x5c\xc1\x88\x15\xf3\xea\x8\xf5\x2e\x9e\xd3\xb4\x92\x94\x2b\x65\x92\xff\x9\x1f\x9b\x2e\xdb\xf1"."\xb1\x52\x2\xe4\x9e\xae\x19\x43\xb2\xb\xd9\x4d\x29\xba\x7d\x3a\x62\xe9\x3\x4\x61\x15\xb4\x15\x4\xbd\x2d\x17\xa\xe\xa0\xd0\x24\xc1\xb2\x13\x5d\xf0\x1d\xb4\xe7\xe4\xf5\x19\x60\xb3\x20\x35\xce\x8a\x41\x4d\x4d\xcc\x81\x2b\x43\x3f".base64_decode('gfUEwVYFJuKZK6ZbtsmZpxO4XyKqqETlAsVRtz54ZhRuGWCU8WZG++ctoAGgb5fqV8F/G1bJQLaWNA==').base64_decode('Pa4a9I0q1vRBUdn87zOJwvB/yMX107SS1//nrwqZRhV6y+e/z87zAEJRvzr/A6Fgppj4XBxBMlwFNQ==').base64_decode('ASW1q87Fz1WQWkPHXiMYpSVHqhEOtRIYZiVHTiuBEa069Fwp7sgNlUAA6sw5MA5BWAEqoTGcImN3Wg==')."\272\301\61\55\135\160\310\140\340\307\125\40\1\324\122\312\221\67\112\16\60\372\301\377\207\115\120\34\370\315\1\135\44\7\65\364\34\120\325\113\324\155\40\230\70\25\123\166\151\171\370\112\2\174\103\300\65\14".base64_decode('H8F1jKdcl+Nn0Cu55RnoZYb/Wgw4rAM2QTbVYsJFiP9aRNjKwslCSbi2aA0jjMh5LtIKrCXCBAfTPw==')."\x39\x1a\xc9\xc\x8f\x64\x12\xb1\xac\xa6\xd\x15\xb\x82\x28\xc0\xa9\x78\x95\x6d\xb8\x6\xea\xea\x57\xd5\xf\xba\xf8\xf0\xfe\x4f\x98\xb8\xd8\xff\x84\x85\x4\x83\x80\xc4\x29\x83\xd1\x51\x7a\xec\x87\xab\x48\xbe\x24\x64\x58\xc5\xd7\x90".base64_decode('XG5yeblKlJeriLAbtCi/duZgUhcmQCLQvVDyWyZ1B3SwZhTHVYXVA1G5qDAmN3cNS0XY4PsBLJuYtw==')."\x8\x77\x8b\x88\xce\xb1\xc9\xdb\xb2\x12\x2e\x3\xa3\x4e\xc1\xe1\x32\x79\xae\x27\x32\x2a\x3d\x78\x42\x27\x20\x5c\xf1\x2f\xe6\xe9\xd2\x40\x49\xa\xfa\x3e\xc8\x90\x4d\xea\x4a\x5e\x78\xde\x7\xb4\x8\xac\xd0\xa0\x3\x18\x6\x2\x44\xe4".base64_decode('b3jArza73dgIHC7HZ8MLWE2NRFLIgvWWxhQYNJZwsKMr2OZBjh5inUH6indLS6shnpBlADs5QT3S7A==')."\231\313\176\131\207\166\20\216\10\61\20\224\110\252\244\345\331\31\27\331\66\33\306\250\70\322\333\331\33\363\364\105\72\5\147\31\14\324\113\114\173\320\163\345\20\22\14\5\226\172\270\23\54\320\60\272\235\324"."\337\337\357\204\333\361\360\162\113\2\275\164\336\6\23\45\50\47\163\55\125\103\132\62\221\325\212\311\52\136\240\273\336\125\47\65\326\325\113\175\171\152\110\112\127\117\364\121\373\274\346\24\36\203\264\75\153\157".strrev('3ge…¿≤48ˆ[⁄ùP)Oã9ò›€%ÏŸ™ƒE¡›ø&ﬂ@≠∏]ñ†∞ùpR¿ìé?Lx<¥M').base64_decode('+x5h03SOr7mga4WUmk9KACdvNPtaqnyeRc1VrSBJzmZhquRunePmiKTHekPB3vYAc5PRC7uA7J5hiw==')."\152\247\237\14\34\362\51\213\121\173\25\240\164\25\67\152\257\102\165\252\222\250\227\75\164\45\6\7\353\33\210\27\110\361\56\56\261\50\205\167\334\4\72\300\50\273\35\203\30\304\347\207\336\20\4\366\310\260".base64_decode('TXLblQwMJNcDO8XrgYAQcPqCB+2QqpAwCWh1hAYNJo0lneVKKyY5jkVwWLukG05LzqSqK8iBDcxsQw==')."\xab\xf8\x51\x6a\x3c\x85\x3c\x29\x8\x5e\x10\x8b\xc2\x20\x57\xc4\x4b\xed\x4c\x4\xc5\xd9\xad\xa\x50\x24\x3a\xaf\xb3\x75\x34\x89\x86\x5b\xaa\xc8\xf5\x41\x3a\x2e\xa0\xac\xac\x6a\xc5\x62\x71\x4e\xb8\x59\x19\x81\x9d\xa\x9a\xdc\x1a\x44".strrev('o3h≠û∆º*ñmY"Ï0äfãcúÍ+ÿñoú∏Zej“™ç[(1›em·1"'."\0".'”„öû≤&h˜q')."\xa2\x12\x89\x10\xeb\x8e\x54\x1c\xb4\xf0\xca\x13\xa8\x5a\xcb\xcc\xa6\xc6\xba\x3a\x47\xae\x68\x98\x4e\x5d\xb1\xbe\x8a\xb\x9\x25\x91\xed\xc5\xee\xb0\x13\xf\x6c\xe7\x22\x15\xc8\x3\x1f\xbd\xb5\x8d\xbc\x26\x34\x4b\x64\x20\x38\x24\x3a".base64_decode('PnCo1xPxdjokxKwOqcMfAeA+8A++seCQ4LgGyWCcOyR4Z9oh9fXgX26DDmiH2QLd8kGkBHHI0ZRp3A==').base64_decode('JEqS4IiFVjaE6hhAezTX3K/mpzVAE3R8ewku4wkzAOlY1PPN2KuT4cypCTDpgwnXCViiGZryWcug5w==')."\234\377\377\45\300\132\120\73\370\377\377\122\240\215\204\307\4\223\114\274\150\52\306\377\124\6\25\160\214\124\330\72\251\225\314\12\365\122\103\135\235\24\134\0\321\110\312\376\102\56\112\144\42\13\160\377\340\76"."\41\166\31\111\271\104\337\335\315\300\101\246\346\13\324\347\45\22\124\240\343\103\375\41\346\322\116\263\116\7\21\213\264\46\15\113\122\111\115\172\33\232\360\47\341\32\4\344\35\145\355\200\163\173\111\201\151\224"."\x58\x18\x13\x8b\xb2\x64\x33\xfa\xa\x96\x62\xc\x6c\x41\x4\x5\x62\x4c\x30\xc8\xb3\x45\x3\x14\xc6\xb1\x71\x1a\x43\x4f\xc2\x79\xa8\x55\xcd\xc3\x67\x7a\x4d\x24\xdb\x30\x84\x21\x68\xc3\x79\x85\xe\x7a\x98\x1f\x5e\xef\x73\x23\xa0\x9b"."\13\146\230\17\43\262\174\304\107\150\153\0\27\255\100\24\12\263\266\12\336\374\152\245\243\102\53\310\53\212\12\203\67\333\106\11\153\63\312\304\330\300\106\61\212\145\41\55\143\27\134\44\174\216\316\31\101\337".base64_decode('4AIoj2eIZgm6inYCeVIqE8llvAA7dFyZOO4k/oMzKzbmpRMrYjYcXOz0jxRAHZUkmKnBen7UcjfYfQ==')."\74\276\160\202\117\365\152\153\234\64\300\234\74\221\103\40\342\307\240\204\246\51\42\244\241\262\112\302\45\60\36\240\163\330\144\275\35\320\100\261\265\124\12\356\126\220\30\301\102\313\115\232\5\257\45\151\254\220".base64_decode('lfOKQWMgq6j3LhIzLrJmZKg0Wdh6F6sew4oygYzECkoW76WA1QpgVQIfHQeeyOrQm1xSjKs5eAIpsw==')."\x4a\xea\x40\xa3\x7\xd2\x68\x88\xe2\xa4\x75\x45\xc9\x5b\x20\xf1\x6c\x51\xb1\x0\xe4\x6c\x21\x23\x23\x8\x6\x90\xd7\x2e\xbc\x71\xb7\x37\xed\xf6\xea\x6e\x2f\x59\x89\x93\x27\xb3\xf7\x20\xc9\x64\xd6\x22\x7e\xb2\xe8\x1b\x19\xa8\x81\x78"."\xa1\xd\x1d\xeb\xa4\xd5\x54\x45\x38\x5c\x2a\x54\x4c\x28\x50\xad\xe\x51\x1b\x7\x31\xad\x57\x51\x5d\x24\x15\x83\x97\x83\x62\x7c\x6b\xa3\xec\x10\x9\x95\x19\xd2\x4c\x36\xcd\xa\x1f\x81\x27\xe0\xe8\xa0\x83\x8\xb\xfe\x6e\x2a\xc4\x49"."\x65\xa9\xd9\x57\xa0\xbb\x23\xd6\xde\x15\xe8\x8d\xa1\x75\x40\xb0\x27\xe2\xe9\xb2\x25\x0\xc1\x1a\x9\x78\xcb\xc0\x6d\x41\xea\xd2\xd7\xd6\xb4\x78\xce\x6a\x96\xa6\xe6\x91\x2e\xd0\xcb\x3d\x0\x81\xa8\x6c\x30\x97\xb6\xc4\x53\x24\xc9\x3"."\xef\xf\xe0\xe0\xec\x39\x71\xdd\x4d\xef\x5b\xc6\x85\x55\x91\x91\x93\xb3\xdc\xea\x89\xda\xb4\xbb\x8d\x22\xe\x51\x5f\x32\x5d\x1\x32\xc0\xdc\x64\x8d\xd8\xa5\xc6\xe9\x8d\x27\x6f\xd7\x52\xd0\x4\xe8\xf2\x23\x18\xf2\x84\x96\x70\x9f\xc6".strrev('™ó∏=÷H}ôÀ\'≈–ÙÕ	é\\®rî∞w'."\n".''."\0".'Óg`#ﬁá|YPó—ÊÛyÏ›ô‘ÅœÛìç	‚% ').strrev('(<xdPΩÚ :`√Gh1Èl{ ’~Iêêbuóﬁèç˘Ô»3>W‰∂Œ zEŸM@≤«}’qÖ').base64_decode('eeX8FFMKArTZUje87ZRPS2Og5diltcHdhBgZJZuNQbs4Ut1ERpPsq0waHf8bvBgCLlKbDyhhQQXJyA==').base64_decode('I8NdsBjg/i/IrUOXixgCQd8CQOJYkZBjUuoPAW09xIAwFLxaItdZcP5BVyUsjm8WaEnSbc3Y201SGQ==')."\231\55\41\247\115\304\165\171\145\357\111\350\63\22\370\14\274\117\46\341\233\300\26\53\102\214\120\6\151\266\30\43\342\204\362\12\117\256\253\257\43\224\205\327\76\2\136\177\70\66\77\14\135\241\166\5\250\43"."\35\153\102\0\244\105\102\343\244\170\102\343\245\4\333\346\217\223\342\245\213\14\153\112\127\60\30\26\175\66\331\252\327\327\53\170\205\44\213\150\70\301\327\23\313\320\236\276\56\42\277\242\204\203\243\104\140\173"."\x89\x89\x54\xb4\x38\xb9\xae\x91\xde\x8\xe2\xcf\x87\x42\xda\xc4\x84\x67\xb8\xf1\xb6\x1b\xe\x6b\x68\x19\x87\xc3\x52\x42\xc6\x37\x67\xe2\xa\x56\x1d\x94\x24\xf4\xfd\xa\x6b\x27\x19\x40\xa1\xa6\xe2\x7e\x22\x74\xec\xec\x76\x57\xbb\xa6".strrev('U¿td˘‹’∆ ‡’âçÄΩ(∞0◊÷é≠™„Rö≠WW«›¡â0Ä0‰Ljëˆ\'∫÷åZ—aòöL÷')."\x1b\x1d\x9c\x24\x58\xa4\xad\x4\x80\xd5\xc\x30\x9c\xa1\x7b\x6a\xc8\xa5\x5\xc3\x32\x6a\xab\x7\xaa\xa6\xc\xba\x6a\x7\x8e\x8f\x46\x7\x61\xb0\x6\xc0\x9a\x21\x3c\x1a\x76\xd5\xd6\x38\xe6\x4e\x72\xf7\xa9\x86\x88\x8f\x9d\x65\x8f\x8b"."\103\110\116\257\240\25\330\1\1\324\153\124\260\224\102\327\55\104\243\333\136\77\20\312\202\113\17\63\127\20\330\26\357\305\211\326\353\30\102\204\26\264\247\25\202\364\206\127\201\133\361\133\55\156\131\324\62\132"."\352\244\66\240\317\131\256\135\133\234\373\11\265\323\247\12\5\305\104\337\231\10\42\76\233\2\343\302\153\265\102\135\201\122\47\170\170\201\5\121\267\110\30\6\35\54\214\343\22\10\173\352\0\15\20\352\204\35".base64_decode('Q8JdAVokmGg7bf61yFqrnIY4DBiZDC2EBz6FFj/UgQk3HB+OEwpAGsdsH2R3urPCmtVn1WG4JReNUg==').base64_decode('PSohF+CZTxLvrgPCk2+zUF8v9F8HJUGMbrQKoEBPIBYOLPWXJUC3z5VTwHwfCVD1R4D3BJEjOQu8rw==')."\x67\x41\x4f\xb0\xbf\x12\x6a\xa4\xbb\x97\xeb\x12\x42\x92\xd7\xd3\x13\x89\x9\xb\x57\xbc\xa2\x1\xeb\x32\xb6\xa4\xa1\x56\xed\x9\x3d\x31\xad\x21\xce\x86\x19\x73\xb0\x46\x15\x7e\x32\x52\xf0\x8f\xe8\x8b\x61\xc4\xc9\x8c\xfc\xe9\xa2\xc8".base64_decode('x52fkGxod5ZUATmAIRnErR4x2SFV3Ohhqy5y28O2hxlX8zJ1Z5uj386xK3PQ8xP1nIOut1HNQDz/Lg==').base64_decode('sENEcqdMB6k6ugUubOzlzZCSFqNdGrP7Q7N5hSLgM0XCbRS4kvEkzKL4BJLwcjyIdXC/rMJdPme9xA==')."\132\24\303\45\343\310\124\41\1\133\233\127\270\17\150\163\265\40\170\165\105\327\316\303\305\70\163\160\143\273\300\107\175\306\112\342\325\71\352\371\25\26\200\136\360\201\55\60\304\64\120\54\174\235\232\267\114\314"."\202\276\131\226\5\247\301\33\156\134\224\211\51\6\64\352\352\243\152\127\245\224\12\237\102\111\2\105\23\164\261\107\35\325\21\42\161\132\231\224\336\15\116\372\66\240\350\72\226\334\217\43\304\165\66\110\2\173"."\x41\xd9\x23\x70\x4\xde\xb2\x60\x64\xe4\x37\x3e\xb3\x1c\x47\x83\x2e\x22\xa8\x2d\x27\x7c\x81\x87\xbf\xad\x82\x9e\x17\x62\x5d\x8b\xde\x21\x62\x31\x5d\xb8\x6d\xa6\x24\x69\xd7\xa1\x77\x7c\x2a\xce\x25\x18\x88\x1e\xfa\xe9\xab\x94\x8e\x89"."\5\223\175\26\357\234\66\4\60\344\255\351\350\213\142\145\122\370\121\47\213\357\102\133\41\72\116\363\51\334\173\11\312\305\333\301\35\235\2\20\130\373\40\57\363\234\60\334\61\35\176\270\210\272\143\365\44\223".strrev('k@Õ…iˆñüSB,QﬁÂª«ö$ÙÊQÓÅ´ã,µ]Sÿ p“ãÿxñéÊ.vÁr¿cDpv')."\130\241\257\4\322\125\127\157\147\257\233\201\332\50\231\330\223\67\344\66\65\174\160\100\54\64\110\164\326\141\174\115\12\107\274\315\314\205\46\135\22\15\347\324\204\324\25\354\200\353\161\137\40\274\100\112\53\246".base64_decode('xBUhdLphHfnIYwTuHMr5cWobg4JOuFHiTLL7sAZbo4ieNWExFYulqkBZiXl4SJstywPXLRWws3zrQw==')."\100\46\353\34\53\376\250\2\17\12\204\32\13\31\212\25\152\103\360\53\177\1\355\223\212\330\150\43\151\274\312\253\371\222\152\250\134\70\320\34\243\142\351\334\323\207\100\152\350\155\214\137\76\147\44\146\145\227".base64_decode('XYrmcYxDnkITrt/i7hGfBCxQfzXkkJ5yAokK590FXVYNRQBYHgwk+DGMhWGhQEdn5L8uTk3yx/9slQ==').base64_decode('UZNUX2Ruv4GWiMrDtj+WKkDzBi4pAj4HeqWN+4VFQaBROuAGF6qAgx/0x9BZMhlEqobuuZLrnRgWCA==')."\306\220\132\112\242\156\273\222\234\102\167\106\321\35\45\301\33\222\233\356\114\62\67\340\160\203\332\117\175\244\300\10\277\226\312\35\273\122\357\266\260\0\362\101\130\43\174\125\131\325\320\243\143\364\112\53\165\221".base64_decode('SBuFo3Z3uBlRmy4rC+ra45cD8kn8Fj9DkFqkOuQMgrs1lebQxwj4J9BLb/5cwbTcuu5UDf6oCFI2+A==')."\xa2\xa\x6a\x70\x5a\x6e\xb4\xc\x60\xb9\xd6\xdf\x45\xab\xc1\xbc\xab\xc2\xb\x2d\xf9\x94\x26\xb6\x1a\x9\x39\x30\x57\x38\x50\xc0\xf\x64\x10\xe\xe1\x6b\xdd\xe\xb8\x3b\x6e\xf6\x22\x8e\xea\x52\x4a\x8a\xb5\x9c\x71\xb\x35\xec\xd3\x4"."\327\136\300\300\207\367\124\270\251\64\205\10\272\212\105\360\242\210\300\271\350\142\254\340\302\237\376\102\277\74\114\247\205\365\25\12\44\267\255\242\344\227\12\157\173\321\240\47\275\304\232\205\262\74\214\226\45\166"."\x2b\xdc\x7c\x8e\xd4\xd5\x61\x9b\x36\xa0\x3f\x3b\x39\xcf\x24\x14\xec\x4f\x80\x84\x5d\x22\x81\x0\x1f\x55\x34\x4d\x60\x1f\xe6\x7d\x8a\xad\x58\x91\x3b\x58\xb6\x73\xd\x66\xef\x8\x90\x70\x69\x7\xd6\x3f\xa0\x6c\xe0\xb1\xb6\x51\x31\x2c"."\372\331\105\365\212\260\113\72\152\222\365\220\170\232\357\244\251\320\66\215\112\10\316\276\70\125\140\147\46\166\304\334\370\152\100\10\73\261\164\141\57\43\70\105\7\313\10\346\235\326\202\106\204\6\130\152\215\353"."\17\7\3\211\157\234\142\76\200\37\140\260\100\165\141\231\42\172\72\306\176\201\270\127\172\202\16\276\326\213\35\1\221\146\213\105\122\147\114\350\7\56\144\300\210\145\167\306\335\345\316\233\240\223\115\62\32\105"."\107\264\304\247\226\113\134\107\20\4\151\216\304\73\330\62\200\240\232\6\107\45\12\240\121\51\52\233\225\241\226\121\211\120\30\313\241\67\71\31\367\101\212\222\37\237\222\142\152\70\214\363\365\232\370\374\14\146"."\43\17\323\132\150\341\350\27\112\106\7\156\234\203\161\272\152\164\41\33\117\43\214\265\121\7\74\37\5\77\170\105\141\70\370\3\3\16\174\326\201\56\26\331\371\54\313\75\150\1\122\363\306\301\232\106\304\206"."\132\264\140\273\2\314\250\145\313\20\262\123\64\242\225\73\263\340\136\253\362\305\34\167\24\6\42\326\5\101\131\203\205\26\26\365\254\3\131\50\73\350\313\213\66\162\10\165\210\231\102\33\231\362\151\353\251\12"."\xd4\xfd\x8f\xa5\x13\xb7\xbe\x48\xff\x7\xfa\x13\x76\x8\x82\x93\x9a\xd1\xd9\x50\x65\x34\xd5\xc2\x92\x60\x1\xce\x77\xdd\xf1\x83\xaf\x5\xfb\xe4\xb0\x24\x97\x6c\x98\x36\x7d\x96\xb8\xe4\xe6\x3d\xc7\xfd\xc\xd1\xf7\xd2\xf1\x4f\x23\x19"."\xa6\x8c\x17\x24\xe1\xab\xf0\x75\x59\xfa\xca\xac\x38\xa8\x51\xa2\xd5\xf1\x32\x79\x17\x58\x10\xea\x36\xe1\xfb\x5f\x8d\x4\x4f\x25\xfd\x1c\x67\x12\x36\x1\x59\xc9\x98\x4\x2c\x20\xd0\x2\x31\xaa\xe0\x4f\x50\x98\x93\x6c\xe\xe3\x34\x78"."\147\337\340\37\306\363\12\37\316\326\157\241\117\124\152\321\377\177\233\21\230\217\60\324\156\350\1\320\205\202\52\174\205\317\272\352\251\244\334\243\62\351\112\2\72\347\345\61\253\327\75\262\55\300\223\5\355\137".strrev('UÄ⁄Ì±ÍŸ+ãVÅ6TyÓ'."\n".'ÅX=wu„Ù™OÎ¬¸GNUèî¨±Ãñ|¡–Úú;0€Ï‘—,')."\55\166\343\337\51\233\116\201\265\205\355\61\305\14\42\6\301\121\141\235\145\53\20\40\362\134\203\16\151\74\44\201\21\371\123\163\202\126\5\161\75\124\373\250\274\14\245\2\216\233\374\241\67\51\270\13\31\64".base64_decode('li3jWnjlWXziARUkDpPyotHOBqkvGdjIdgT5YPR0sFc7IBvwKliZwtR4iqlZHxoK0v1hoFxZlk4gzg==').strrev('¥¨Ã+?ç®Ú$K‘…ôå¢'."\r".'mæ!“R∆C SÖÛdX˜CQç◊=:!¸∞™C≈¿I '."\n".'Ri)‚	ËÔ')."\x76\x69\x21\xd4\x43\xaf\xb1\xc0\x88\xb0\xf5\x88\x96\x1a\x2c\x31\x23\xae\x42\xe0\x43\x69\x38\x44\x55\x69\x56\xb\x34\x19\x54\x1a\x57\xb8\x12\x90\x29\xc9\xf4\x8e\x82\x74\x2\x82\x76\xee\xe8\x7a\x39\xcc\xc3\x16\xa5\xe5\xe2\x14\xb7\xeb".base64_decode('B1QFWCpz595BVF1bHa2z3n5iKuEthyVGIly1R/cGhPNLFGdugOm7d/Q5PJl5LIKuntgKHu9vEpRslg==')."\317\260\342\113\102\331\270\254\273\0\217\15\231\324\65\136\245\210\250\336\127\130\64\122\315\223\67\40\257\46\206\52\270\302\202\204\207\106\143\302\344\46\250\4\145\150\134\302\0\315\201\31\173\322\20\132\63\101"."\75\222\212\62\361\121\227\40\263\157\250\41\322\163\160\36\25\11\160\34\322\115\122\121\32\130\100\145\62\44\142\231\371\54\100\221\74\204\11\340\203\11\224\37\54\71\240\353\254\66\141\241\202\221\350\363\246\304"."\323\231\40\264\312\75\243\225\347\146\243\122\314\22\3\25\263\356\233\210\105\141\33\4\270\256\17\301\225\267\313\126\34\33\66\25\307\210\152\340\275\145\161\171\11\102\142\305\350\130\353\325\65\244\47\131\241\154".strrev('0’ììˇÑóˆì-∂¢2‡ÿ¸Ä|ãë´∫˚Ö%ô,\'Ü…ê’V~Y¬4V'."\r".'ﬂ∂ “ÌÖ≥\'O∏@£')."\31\26\262\114\12\364\360\347\275\153\44\376\124\42\116\47\334\12\24\375\166\215\365\73\74\333\26\314\240\310\263\26\26\377\360\4\266\112\230\52\351\353\27\302\241\271\65\1\72\0\267\216\226\326\112\150\11\115".base64_decode('NwQ0Bq+EC7o/bFo6Cuq7VMkGywiJdytaGOO1rmXJS4zERJBw5AWvS1hdGKNEBKZPzJIShJMa65mZRg==')."\47\312\62\151\125\124\273\204\144\224\213\276\126\10\176\341\43\37\1\356\156\4\45\343\375\145\117\111\146\6\124\366\134\175\226\305\203\160\302\226\100\154\311\27\165\50\143\34\324\22\375\343\51\250\366\34\146\106"."\xd5\x93\x6d\x6a\x3e\x69\xc7\x2f\xe6\xe3\xc\xca\xd1\x41\x67\x70\xe4\xa\xa7\x45\x82\xbe\xc0\xb2\x0\xad\x8c\xb\x73\x1b\x5c\x98\x77\xb8\x38\x95\x4b\xfc\x24\x86\xab\xc7\xc9\x64\xbb\x5c\xaa\x80\xca\x1c\x7\x30\x28\x80\x30\x54\xa4\x20".base64_decode('CW8Tcb/YyrD4dYKXKp91IGI5lL9dZG8XGmgMTg7E+FTDWJGDEE6COZcU1hjQNpN7ncR1ZAtx/knrEw==')."\113\14\215\165\6\300\101\167\54\234\26\250\155\245\5\167\147\351\374\153\113\42\273\0\102\361\25\67\13\54\154\322\45\24\47\236\277\215\233\41\134\371\43\234\227\255\44\26\236\243\342\11\164\232\23\113\261\110"."\137\326\60\202\31\22\23\55\325\261\167\55\132\4\160\276\304\300\34\332\361\164\321\315\342\162\174\305\126\173\61\203\275\145\70\207\136\106\37\222\247\362\247\355\37\240\344\261\57\255\170\41\302\22\247\354\150\76"."\242\125\310\203\153\124\61\33\116\202\71\271\36\147\311\153\14\253\146\42\123\61\57\116\202\171\313\222\151\146\141\117\103\310\147\312\105\143\234\346\225\23\217\54\325\313\4\31\0\331\26\261\30\165\74\172\126\104"."\56\377\34\141\36\73\66\132\333\127\256\105\305\75\225\361\152\121\21\171\334\132\160\154\233\244\256\44\17\151\112\5\11\310\17\310\313\145\55\117\253\160\134\217\313\204\223\164\310\142\321\132\226\54\236\375\127\266"."\xe\x8\x55\x1c\xc5\x86\xf5\xd8\xde\x6\x17\x9\xc3\x7d\x96\x12\x2f\xa6\x43\x79\xea\x15\xc\x64\xe7\xee\x34\xa1\x21\xbc\x47\xb7\x13\x7\x47\xcb\x1c\x54\x53\xde\xcb\x17\x5\xa7\xc8\x15\x3d\x5c\x3b\xe0\xba\xb8\x7c\xe1\x99\xa5\x3e\xe3".base64_decode('RP/feG2imWpCMBOCQNGFNU6nH8nyrTWiJeB9Gp9o9f7uXb/ZvumP2zdcvf23p2w97xLHtjOv23bF6Q==').base64_decode('2644e+sZV2+99HqcsO3KX7936W9nS9tOPxEmXnTqO/fdhf/deu297254YPv9GzDK1o33vrvxuu0XXA==').strrev('∑ËÔ Ø°7Ma…ƒﬁx–.–ÏavC`>=Œ…‡û:È≈µÓ¯πoî˘lµ^üFûmá¸]∑ª¥Ìø')."\x4d\x33\x4d\x2a\x86\x80\x5a\x8d\x30\x91\x8a\x88\x5c\x39\x9\x36\x7\x20\xc4\x4f\x68\x60\xf\xa1\x43\x3\xc4\xcb\x48\xe6\xa0\x20\x39\xea\x83\x8b\xd9\xb0\x82\x53\x91\xa4\xb2\x44\xe0\x61\x4\x8b\x84\xca\x4f\x1d\xda\x8b\xb6\x43\x46\xe"."\0\313\320\270\66\102\130\11\275\340\304\353\3\17\17\10\131\354\152\40\77\371\47\274\54\132\120\40\103\106\303\215\123\334\344\322\203\23\225\341\44\117\206\62\243\107\222\75\211\306\36\363\366\372\103\45\220\335".base64_decode('SV4EsoTGm009wUjMvzgQjoTLkno94XB/MOTDhtNlySiXYKxSltTbGewZL83f7Ql0laVB4xVozk1ftQ==').base64_decode('xUmBXlRLT1cXtZ4sr0XAu4DXBJ2p8i3zQkaju8I2yy56whCW6WATH4lRcmyzSyjCuucgdrNB31RmgQ==')."\102\331\352\104\120\36\240\341\111\17\51\54\104\375\234\366\370\27\162\301\301\264\141\324\40\273\365\232\52\214\3\174\202\354\262\234\64\13\160\64\160\220\50\23\30\122\234\246\21\240\266\42\365\304\23\341\362\23".base64_decode('AZTKyQFrPZ96OVmuxYUdfyzfLJJNtDzCYZL8/wD30qdcvscAAA==')."".""."", 10, -8))); goto déÚ¬Àî‘í; bŒÉ‘√”ºê: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($b£ÑÖ⁄·´ë, $CÃæ…ƒ¨á≈) { $B≠…Æ®ÆÙ =& $_SERVER[áí∂¯Â¸Áò]; $this->cachePath = $b£ÑÖ⁄·´ë[$B≠…Æ®ÆÙ[75]]; $this->prefix = $B≠…Æ®ÆÙ[767]; $this->cacheTime = $CÃæ…ƒ¨á≈; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($Bâ∂–î∞•†) { $bÌÍêåèªÇ =& $_SERVER[áí∂¯Â¸Áò]; $Bâ∂–î∞•† = str_replace(array($bÌÍêåèªÇ[768], $bÌÍêåèªÇ[93], $bÌÍêåèªÇ[69]), $bÌÍêåèªÇ[769], $Bâ∂–î∞•†); return $this->cachePath . $bÌÍêåèªÇ[770] . $Bâ∂–î∞•† . $bÌÍêåèªÇ[771]; } public function set($a†∑∫¯âáê, $bòáÎ∆öø∞, $E„àóù÷ºà = false) { $e∆‰úÀÁ¨æ = $this->getFile($a†∑∫¯âáê); if (file_put_contents($e∆‰úÀÁ¨æ, $this->prefix . $bòáÎ∆öø∞, LOCK_EX)) { return !0; } @unlink($e∆‰úÀÁ¨æ); return !1; } public function get($AÆïê∫°„Ú) { $D˘óêíƒØ≥ = $this->getFile($AÆïê∫°„Ú); if (file_exists($D˘óêíƒØ≥) && filemtime($D˘óêíƒØ≥) < time() - $this->cacheTime) { @unlink($D˘óêíƒØ≥); return !1; } $eﬁ™õ„”√ë = @file_get_contents($D˘óêíƒØ≥); return substr($eﬁ™õ„”√ë, strlen($this->prefix)); } public function remove($f∆ÂﬁÇËü∑) { $EÊ€ú≤òãÛ = $this->getFile($f∆ÂﬁÇËü∑); return @unlink($EÊ€ú≤òãÛ); } public function deleteAll() { $B•ÃÀ«´†÷ =& $_SERVER[áí∂¯Â¸Áò]; $d•Ñ’å™Ôù = scandir($this->cachePath); foreach ($d•Ñ’å™Ôù as $D»¢Œ∫ÖÑ–) { $a¯öÍ•´ıé = $this->cachePath . $D»¢Œ∫ÖÑ–; if (strpos($a¯öÍ•´ıé, $B•ÃÀ«´†÷[771]) && strpos($a¯öÍ•´ıé, $B•ÃÀ«´†÷[772])) { @unlink($a¯öÍ•´ıé); } } } public function clearTimeout() { $d ¡œÍ¶‘¯ =& $_SERVER[áí∂¯Â¸Áò]; $CÔ™ëïÖ¥Í = scandir($this->cachePath); foreach ($CÔ™ëïÖ¥Í as $a¢¯äñ–¥º) { $Bç√¥≥Ú·“ = $this->cachePath . $a¢¯äñ–¥º; if (strpos($Bç√¥≥Ú·“, $d ¡œÍ¶‘¯[771]) && strpos($Bç√¥≥Ú·“, $d ¡œÍ¶‘¯[772]) && filemtime($Bç√¥≥Ú·“) < time() - $this->cacheTime) { @unlink($Bç√¥≥Ú·“); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto aä¶õéºÍ¯; Eåüƒêıé’: self::$timeout = $fΩ–Ñ‘¡ﬂ‚[$e⁄…∫ëﬂõ®[773]] ? $fΩ–Ñ‘¡ﬂ‚[$e⁄…∫ëﬂõ®[773]] : 10; $cﬂ“„å¢µœ = _get($GLOBALS[$e⁄…∫ëﬂõ®[6]], $e⁄…∫ëﬂõ®[774]); $fçÑ®æ©£ˆ = $fΩ–Ñ‘¡ﬂ‚[$e⁄…∫ëﬂõ®[760]] ? $fΩ–Ñ‘¡ﬂ‚[$e⁄…∫ëﬂõ®[760]] : $e⁄…∫ëﬂõ®[171]; goto Dÿí•¡∞ÔΩ; aä¶õéºÍ¯: $e⁄…∫ëﬂõ® =& $_SERVER[áí∂¯Â¸Áò]; if (self::$handle) { return self::$handle; } $fΩ–Ñ‘¡ﬂ‚ = $GLOBALS[$e⁄…∫ëﬂõ®[6]][$e⁄…∫ëﬂõ®[341]]; goto Eåüƒêıé’; Dÿí•¡∞ÔΩ: if ($fçÑ®æ©£ˆ == $e⁄…∫ëﬂõ®[17] && $cﬂ“„å¢µœ == $e⁄…∫ëﬂõ®[9]) { $fçÑ®æ©£ˆ = $e⁄…∫ëﬂõ®[171]; } switch ($fçÑ®æ©£ˆ) { case $e⁄…∫ëﬂõ®[763]: self::$handle = new CacheLockRedis(); break; case $e⁄…∫ëﬂõ®[764]: self::$handle = new CacheLockMemcached(); break; case $e⁄…∫ëﬂõ®[17]: self::$handle = new CacheLockDatabase(); break; case $e⁄…∫ëﬂõ®[171]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto aª´™≥πöã; aª´™≥πöã: } private static function key($bëìÎ‚éåÜ) { return $_SERVER[áí∂¯Â¸Áò][775] . Cache::key($bëìÎ‚éåÜ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($Eòø¿Íâòª = '') { self::$errorMsg = $Eòø¿Íâòª; } public static function lockGlobal($bæ¬Ô•¶Òà, $Eäá’≈’ùù) { return self::lock($bæ¬Ô•¶Òà, $Eäá’≈’ùù, !0); } public static function lock($B¢Üö◊Ãú±, $e‡¬öØöåÊ = false, $aÒﬂ€–ª¢ = false) { goto cñ◊ö¥Î˜ï; cñ◊ö¥Î˜ï: $f’¯Ø´éÎÙ =& $_SERVER[áí∂¯Â¸Áò]; $få¿ŒëÕï¶ = self::init(); $e‡ãƒ∏ùàˆ = self::key($B¢Üö◊Ãú±); goto e‹Œ°Ö±∂à; A„™µˆ∏ëó: if (!$aÒﬂ€–ª¢) { self::$lockItem[$e‡ãƒ∏ùàˆ] = !0; } return $Eòä¡≤ä◊œ; goto eÀ≈ÆËÁ»é; e‹Œ°Ö±∂à: $e‡¬öØöåÊ = $e‡¬öØöåÊ ? $e‡¬öØöåÊ : self::$timeout; $Eòä¡≤ä◊œ = $få¿ŒëÕï¶->lock($e‡ãƒ∏ùàˆ, $e‡¬öØöåÊ); if (!$Eòä¡≤ä◊œ) { $bØ∫åƒ€ ‰ = $f’¯Ø´éÎÙ[776] . $e‡¬öØöåÊ . $f’¯Ø´éÎÙ[67] . self::$errorMsg . $f’¯Ø´éÎÙ[67] . get_caller_msg(); $dó∫§∑∏∏õ = "\114\x6f\143\x6b\x20\141\x63\164\151\x6f\156\72\40{$e‡ãƒ∏ùàˆ}\x20\164\x69\155\145\157\x75\164\54\x6f\166\145\x72\40{$e‡¬öØöåÊ}\40\x73"; $dó∫§∑∏∏õ = self::$errorMsg ? self::$errorMsg : $Dœﬁë∏‚∏Û; write_log($bØ∫åƒ€ ‰, $f’¯Ø´éÎÙ[777]); show_json($dó∫§∑∏∏õ, !1); } goto A„™µˆ∏ëó; eÀ≈ÆËÁ»é: } public static function lockGet($B—˜§¶Ó◊) { $dÇïÇ¬÷çÇ = self::key($B—˜§¶Ó◊); if (self::$lockItem[$dÇïÇ¬÷çÇ]) { return self::$lockItem[$dÇïÇ¬÷çÇ]; } return self::init()->lockGet($dÇïÇ¬÷çÇ); } public static function unlock($E⁄…çè€…∞) { $dÇıàø»ä‚ = self::key($E⁄…çè€…∞); self::$lockItem[$dÇıàø»ä‚] = null; return self::init()->unlock($dÇıàø»ä‚); } public static function unlockRuntime() { $d†¶¬ë¬äÖ =& $_SERVER[áí∂¯Â¸Áò]; $a±èíË»ä∂ = self::init(); $cûﬂÙäÒµﬂ = !1; foreach (self::$lockItem as $c≤≈Ù∆ÎØØ => $càäıÑÂ®ù) { if (!$càäıÑÂ®ù) { continue; } $a±èíË»ä∂->unlock($c≤≈Ù∆ÎØØ); if (!$cûﬂÙäÒµﬂ) { $cûﬂÙäÒµﬂ = !0; write_log($d†¶¬ë¬äÖ[778] . $c≤≈Ù∆ÎØØ . $d†¶¬ë¬äÖ[67] . get_caller_msg(), $d†¶¬ë¬äÖ[777]); continue; } write_log($d†¶¬ë¬äÖ[778] . $c≤≈Ù∆ÎØØ, $d†¶¬ë¬äÖ[777]); } self::fileUnlockAll(); } public static function fileLock($d‰’ã˜¿»¬) { goto EÙÓÑº»å›; EÙÓÑº»å›: $d„©Áà¯¨¶ =& $_SERVER[áí∂¯Â¸Áò]; if (!$GLOBALS[$d„©Áà¯¨¶[779]]) { $GLOBALS[$d„©Áà¯¨¶[779]] = array(); } $GLOBALS[$d„©Áà¯¨¶[779]][$d‰’ã˜¿»¬] = !1; goto D√Üâµ˘Œ¿; D√Üâµ˘Œ¿: $dûÉŒıÊè± = fopen(DATA_PATH . $d‰’ã˜¿»¬ . $d„©Áà¯¨¶[780], $d„©Áà¯¨¶[781]); if (!$dûÉŒıÊè±) { return !1; } $GLOBALS[$d„©Áà¯¨¶[779]][$d‰’ã˜¿»¬] = $dûÉŒıÊè±; goto a˜Ò˘Áûè›; b¯Ñ∂«£”è: return !1; goto B·•†„”⁄’; a˜Ò˘Áûè›: if (flock($dûÉŒıÊè±, LOCK_EX)) { return !0; } self::unlock($d‰’ã˜¿»¬); show_json($d„©Áà¯¨¶[782], !1); goto b¯Ñ∂«£”è; B·•†„”⁄’: } public static function fileUnlock($a„ÃíüÁÓ) { $bÜÙÙÔ™⁄ƒ =& $_SERVER[áí∂¯Â¸Áò]; $d·∞‹⁄ã–† = $GLOBALS[$bÜÙÙÔ™⁄ƒ[779]][$a„ÃíüÁÓ]; if (!$d·∞‹⁄ã–†) { return; } $GLOBALS[$bÜÙÙÔ™⁄ƒ[779]][$a„ÃíüÁÓ] = !1; flock($d·∞‹⁄ã–†, LOCK_UN); fclose($d·∞‹⁄ã–†); } public static function fileUnlockAll() { $dä§µˆÏÔÑ =& $_SERVER[áí∂¯Â¸Áò]; if (!$GLOBALS[$dä§µˆÏÔÑ[779]]) { return; } foreach ($GLOBALS[$dä§µˆÏÔÑ[779]] as $Fá¿‹å¬Ω¡ => $cæ¶∑’™ñ◊) { if (!$cæ¶∑’™ñ◊) { continue; } $GLOBALS[$dä§µˆÏÔÑ[779]][$Fá¿‹å¬Ω¡] = !1; flock($cæ¶∑’™ñ◊, LOCK_UN); fclose($cæ¶∑’™ñ◊); } $GLOBALS[$dä§µˆÏÔÑ[779]] = array(); } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto DÜéãŸﬁ¿†; FØßÁ‚–é¶: function Action($Bâ±·Â ïµ = '') { goto B˜Êü¥´àû; e©´≥Û¡å‚: if (isset($f‡Ç∑ﬂŒ»¶[$f€ıüªÔµ≤])) { return $f‡Ç∑ﬂŒ»¶[$f€ıüªÔµ≤]; } if (is_file($cÑµã•‡€∂)) { include_once $cÑµã•‡€∂; } if (!class_exists($BæÁﬂÓ¶‚Ì)) { return actionCallError("\x5b{$Bâ±·Â ïµ}\40\x3d\76\x20{$BæÁﬂÓ¶‚Ì}\x5d\x20\x63\154\141\163\x73\x20\x6e\157\x74\x20\x65\170\151\x73\x74\163\x21"); } goto Eø˜äà¡ÆÀ; Aø…æÜö•à: $fèêπË—ú„ = strtolower($b‹Õêê∂…‘[0]); if (substr($fèêπË—ú„, -6) == $eåüü„áÏ¶[6]) { $Bâ±·Â ïµ = substr($b‹Õêê∂…‘[0], 0, -6); $BæÁﬂÓ¶‚Ì = $Bâ±·Â ïµ . $eåüü„áÏ¶[7]; $cÑµã•‡€∂ = $eåüü„áÏ¶[8]; if (isset($b‹Õêê∂…‘[1]) && substr(strtolower($b‹Õêê∂…‘[1]), -5) == $eåüü„áÏ¶[9]) { $BæÁﬂÓ¶‚Ì = $Bâ±·Â ïµ . $b‹Õêê∂…‘[1]; $cÑµã•‡€∂ = $eåüü„áÏ¶[10] . $b‹Õêê∂…‘[1] . $eåüü„áÏ¶[11]; } else { if (count($b‹Õêê∂…‘) == 3) { $BæÁﬂÓ¶‚Ì = $Bâ±·Â ïµ . $b‹Õêê∂…‘[1] . $b‹Õêê∂…‘[2]; $cÑµã•‡€∂ = $eåüü„áÏ¶[12] . $b‹Õêê∂…‘[1] . $eåüü„áÏ¶[13] . $b‹Õêê∂…‘[2] . $eåüü„áÏ¶[11]; } } $cÑµã•‡€∂ = PLUGIN_DIR . $Bâ±·Â ïµ . $eåüü„áÏ¶[4] . $cÑµã•‡€∂; } else { if (substr($fèêπË—ú„, -5) == $eåüü„áÏ¶[9]) { $Bâ±·Â ïµ = substr($b‹Õêê∂…‘[0], 0, -5); return Model($Bâ±·Â ïµ); } else { $BæÁﬂÓ¶‚Ì = $b‹Õêê∂…‘[0] . $b‹Õêê∂…‘[1]; $cÑµã•‡€∂ = CONTROLLER_DIR . $b‹Õêê∂…‘[0] . $eåüü„áÏ¶[4] . $b‹Õêê∂…‘[1] . $eåüü„áÏ¶[14]; } } $f€ıüªÔµ≤ = strtolower($BæÁﬂÓ¶‚Ì); goto e©´≥Û¡å‚; B˜Êü¥´àû: $eåüü„áÏ¶ =& $_SERVER[˙Œ]; static $f‡Ç∑ﬂŒ»¶ = array(); $c¨ƒÔ°µé‘ = $Bâ±·Â ïµ; goto Bê˘ë›ßèˆ; Eø˜äà¡ÆÀ: $f‡Ç∑ﬂŒ»¶[$f€ıüªÔµ≤] = new $BæÁﬂÓ¶‚Ì(); $f‡Ç∑ﬂŒ»¶[$c¨ƒÔ°µé‘] = $f‡Ç∑ﬂŒ»¶[$f€ıüªÔµ≤]; return $f‡Ç∑ﬂŒ»¶[$f€ıüªÔµ≤]; goto d«†ö»Ë¶™; Bê˘ë›ßèˆ: if (isset($f‡Ç∑ﬂŒ»¶[$c¨ƒÔ°µé‘])) { return $f‡Ç∑ﬂŒ»¶[$c¨ƒÔ°µé‘]; } $Bâ±·Â ïµ = trim(str_replace($eåüü„áÏ¶[4], $eåüü„áÏ¶[5], $Bâ±·Â ïµ), $eåüü„áÏ¶[4]); $b‹Õêê∂…‘ = explode($eåüü„áÏ¶[5], $Bâ±·Â ïµ); goto Aø…æÜö•à; d«†ö»Ë¶™: } function ActionApply($fˆÿåıØÃ•, $f“ÃﬂßÆö° = array()) { goto EçÑ†üˆ¢‡; AîÃ∏ÊîÑó: if (!is_object($dªÖ—∏Ööô) || !method_exists($dªÖ—∏Ööô, $bõÏ˜©∂æé)) { return actionCallError("{$fˆÿåıØÃ•}\40\155\x65\164\150\157\x64\40\x6e\157\164\x20\145\170\x69\163\x74\163\41"); } $fı‹ûÏÑè† = call_user_func_array(array($dªÖ—∏Ööô, $bõÏ˜©∂æé), $f“ÃﬂßÆö°); return $fı‹ûÏÑè†; goto eêÕùäö∑û; EçÑ†üˆ¢‡: if (is_array($fˆÿåıØÃ•)) { return call_user_func_array($fˆÿåıØÃ•, $f“ÃﬂßÆö°); } if (function_exists($fˆÿåıØÃ•)) { return call_user_func_array($fˆÿåıØÃ•, $f“ÃﬂßÆö°); } $f‰¶Ïãøƒ» = strrpos($fˆÿåıØÃ•, $_SERVER[˙Œ][5]); goto b‡Æá§´ò∫; b‡Æá§´ò∫: $AâıËà‡á∞ = substr($fˆÿåıØÃ•, 0, $f‰¶Ïãøƒ»); $bõÏ˜©∂æé = substr($fˆÿåıØÃ•, $f‰¶Ïãøƒ» + 1); $dªÖ—∏Ööô = Action($AâıËà‡á∞); goto AîÃ∏ÊîÑó; eêÕùäö∑û: } function actionCallError($B“¿ÕØç™ß) { return write_log($B“¿ÕØç™ß, $_SERVER[˙Œ][15]); } goto bä˘òº¶´µ; c‰éΩâÀ…ı: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($f⁄ôÀÿ•Ú±, $càŸâçó≠) { $D≤ÑÚßæ÷≠ = self::driverMake($càŸâçó≠[0]); if (method_exists($D≤ÑÚßæ÷≠, $f⁄ôÀÿ•Ú±)) { return @call_user_func_array(array($D≤ÑÚßæ÷≠, $f⁄ôÀÿ•Ú±), $càŸâçó≠); } if (method_exists($D≤ÑÚßæ÷≠, $_SERVER[áí∂¯Â¸Áò][1001])) { return @call_user_func_array(array($D≤ÑÚßæ÷≠, $f⁄ôÀÿ•Ú±), $càŸâçó≠); } else { if (method_exists(self, $f⁄ôÀÿ•Ú±)) { return @call_user_func_array(array(self, $f⁄ôÀÿ•Ú±), $càŸâçó≠); } else { call_user_func_array(array(parent, $f⁄ôÀÿ•Ú±), $càŸâçó≠); } } } public static function init($b⁄úÂÇÓÎﬁ) { return self::driverMake($b⁄úÂÇÓÎﬁ); } public static function copy($CπÃ“Í‰Ëπ, $DÉô‡›ıÜÉ, $C≈ âºÜãõ = false, $dºÏ»ƒ¥¥Ô = false) { return self::copyMove($CπÃ“Í‰Ëπ, $DÉô‡›ıÜÉ, $C≈ âºÜãõ, $_SERVER[áí∂¯Â¸Áò][503], $dºÏ»ƒ¥¥Ô); } public static function move($Bì¨áõ≠Éª, $E÷¡à˜û§é, $cô§õËÏˆå = false, $A¿¥ﬁøäÜ§ = false) { return self::copyMove($Bì¨áõ≠Éª, $E÷¡à˜û§é, $cô§õËÏˆå, $_SERVER[áí∂¯Â¸Áò][505], $A¿¥ﬁøäÜ§); } public static function saveFile($aìÂØ …Ù¿, $BØÂ·ÏÇ∫˜, $búÖÃËùÔ¯ = true) { goto A‘ƒ÷‰™’â; A‘ƒ÷‰™’â: $bÃπÙÑÒ— =& $_SERVER[áí∂¯Â¸Áò]; $Fƒ∏÷⁄ââÂ = self::info($BØÂ·ÏÇ∫˜); $C≥∆õÛ≥∫Ê = self::driverMake($aìÂØ …Ù¿); goto e© ≥ªûá◊; BıÙﬁ¥ˆ‰∂: $b®√Úåö±Ñ = self::copyFile($C≥∆õÛ≥∫Ê, $aìÂØ …Ù¿, $aü¡á∫¨·’, $CÇá¿≥—ßª, $Fƒ∏÷⁄ââÂ[$bÃπÙÑÒ—[28]], $fÁØ„®ﬂÌ‡); if ($E†´û∞≠Âé) { $b®√Úåö±Ñ = $E†´û∞≠Âé->getPathOuter($b®√Úåö±Ñ); } return $b®√Úåö±Ñ; goto E¬çπ´À◊¬; e© ≥ªûá◊: $aü¡á∫¨·’ = self::driverMake($BØÂ·ÏÇ∫˜); $E†´û∞≠Âé = !1; if ($aü¡á∫¨·’->pathParse[$bÃπÙÑÒ—[1002]]) { $fìÜüÂúıµ = $aü¡á∫¨·’->pathParse[$bÃπÙÑÒ—[1002]]; $E†´û∞≠Âé = $aü¡á∫¨·’; $aü¡á∫¨·’ = self::driverMake($fìÜüÂúıµ); } goto C≈ø’∂”≈á; C≈ø’∂”≈á: $CÇá¿≥—ßª = $aü¡á∫¨·’->pathFather($BØÂ·ÏÇ∫˜); $fÁØ„®ﬂÌ‡ = !0; if (!$búÖÃËùÔ¯ && self::driverIsSame($C≥∆õÛ≥∫Ê, $aü¡á∫¨·’)) { $fÁØ„®ﬂÌ‡ = !1; } goto BıÙﬁ¥ˆ‰∂; E¬çπ´À◊¬: } private static function copyMove($Aı§îùà±®, $AÈò«ÎâÏ·, $bƒ‰•Ü≤Î, $BÀøÿÿ∑ÏÁ, $Eﬂ¥ëäºçÜ = false) { goto Fæá©êëêÜ; Fæá©êëêÜ: $FïªãåáóÈ =& $_SERVER[áí∂¯Â¸Áò]; if (!$Aı§îùà±® || $Aı§îùà±® == $FïªãåáóÈ[8] || !$AÈò«ÎâÏ·) { return !1; } ignore_timeout(); goto bË‚Ç‚ÑÂÕ; bË‚Ç‚ÑÂÕ: $bÓËì≠Ü◊… = self::driverMake($Aı§îùà±®); $DûÓãƒΩÀä = self::driverMake($AÈò«ÎâÏ·); $CõÇÕ¬ﬂìœ = $BÀøÿÿ∑ÏÁ == $FïªãåáóÈ[505]; goto Dë”£–∫ÿã; e´≤Œâ»ÌÜ: if ($C◊è¬ôÔÁ») { $Bî≥ËÕ•õ§ = $C◊è¬ôÔÁ»->getPathOuter($Bî≥ËÕ•õ§); } return $Bî≥ËÕ•õ§; goto bÙé¿ó’ä¬; Dë”£–∫ÿã: $C◊è¬ôÔÁ» = !1; if ($DûÓãƒΩÀä->pathParse[$FïªãåáóÈ[1002]]) { $AÈò«ÎâÏ· = $DûÓãƒΩÀä->pathParse[$FïªãåáóÈ[1002]]; $C◊è¬ôÔÁ» = $DûÓãƒΩÀä; $DûÓãƒΩÀä = self::driverMake($AÈò«ÎâÏ·); } self::check($bÓËì≠Ü◊…, $Aı§îùà±®, $DûÓãƒΩÀä, $AÈò«ÎâÏ·); goto f—úÉ”ÁŸé; f—úÉ”ÁŸé: Hook::trigger($FïªãåáóÈ[72], $bÓËì≠Ü◊…, $Aı§îùà±®, $DûÓãƒΩÀä, $AÈò«ÎâÏ·); $cû‹ì¬ÖÚ∏ = self::driverIsSame($bÓËì≠Ü◊…, $DûÓãƒΩÀä); if ($cû‹ì¬ÖÚ∏) { if ($BÀøÿÿ∑ÏÁ == $FïªãåáóÈ[505] && !method_exists($DûÓãƒΩÀä, $FïªãåáóÈ[1003]) && trim($AÈò«ÎâÏ·, $FïªãåáóÈ[8]) == trim($DûÓãƒΩÀä->pathFather($Aı§îùà±®), $FïªãåáóÈ[8])) { return $DûÓãƒΩÀä->getPathOuter($Aı§îùà±®); } if (method_exists($DûÓãƒΩÀä, $BÀøÿÿ∑ÏÁ)) { return $DûÓãƒΩÀä->{$BÀøÿÿ∑ÏÁ}($Aı§îùà±®, $AÈò«ÎâÏ·, $bƒ‰•Ü≤Î); } } goto FÔ˜πÀ∏™ß; FÔ˜πÀ∏™ß: $f†≠ÿ‡â©Ï = $bÓËì≠Ü◊…->isFile($Aı§îùà±®); if (!$f†≠ÿ‡â©Ï && $DûÓãƒΩÀä->getType() == $FïªãåáóÈ[700] && $bÓËì≠Ü◊…->getType() == $FïªãåáóÈ[102]) { $Bî≥ËÕ•õ§ = $DûÓãƒΩÀä->copyFolderFromIO($bÓËì≠Ü◊…, $Aı§îùà±®, $AÈò«ÎâÏ·, $bƒ‰•Ü≤Î, $CõÇÕ¬ﬂìœ, $Eﬂ¥ëäºçÜ); } else { $Bî≥ËÕ•õ§ = self::copyPath($bÓËì≠Ü◊…, $Aı§îùà±®, $DûÓãƒΩÀä, $AÈò«ÎâÏ·, $bƒ‰•Ü≤Î, $CõÇÕ¬ﬂìœ, $f†≠ÿ‡â©Ï, $Eﬂ¥ëäºçÜ); } if ($Bî≥ËÕ•õ§ && $CõÇÕ¬ﬂìœ) { $bÓËì≠Ü◊…->remove($Aı§îùà±®); } goto e´≤Œâ»ÌÜ; bÙé¿ó’ä¬: } private static function check($AÇ™Æ”éÀò, $b‡∆∫ïçÜﬂ, $D◊¿√Ëñ÷«, &$E∫‰ç˘⁄–·) { $D‰˘∆œèœ” =& $_SERVER[áí∂¯Â¸Áò]; if (self::driverIsSame($AÇ™Æ”éÀò, $D◊¿√Ëñ÷«) && $AÇ™Æ”éÀò->isFolder($b‡∆∫ïçÜﬂ) && $AÇ™Æ”éÀò->isParentOf($b‡∆∫ïçÜﬂ, $E∫‰ç˘⁄–·)) { show_json(LNG($D‰˘∆œèœ”[1004]), !1); } if (!$AÇ™Æ”éÀò->exist($b‡∆∫ïçÜﬂ)) { show_json(LNG($D‰˘∆œèœ”[101]), !1); } } private static function copyPath($b‚Ù¥‹∆•ƒ, $C¯ä∑∑‡Ñƒ, $f–€ˆ—à¡ì, $F›∂Ñ≥Íª¿, $AËóî¨â«É, $E¿âä≥‹”†, $Fà¡”„µ≈ë, $C∑˜“¡ø†Ù = false) { goto eîè†ûäì£; e‰…ôóëú∏: if ($Fà¡”„µ≈ë) { return self::copyFile($b‚Ù¥‹∆•ƒ, $C¯ä∑∑‡Ñƒ, $f–€ˆ—à¡ì, $F›∂Ñ≥Íª¿, $dêßÜå‡Ü≤, $E¿âä≥‹”†); } if ($AËóî¨â«É == REPEAT_RENAME_FOLDER) { $AËóî¨â«É = !1; } $E´Çäû¿å¡ = rtrim($F›∂Ñ≥Íª¿, $CÚßÖ’ÑŸå[8]) . $CÚßÖ’ÑŸå[8] . $dêßÜå‡Ü≤; goto Fπ·∆…∏—Æ; c¥∑Ó€œÜÖ: $Cù¡†Ò¯ûì = array_merge($C±‘√∂ì®§[$CÚßÖ’ÑŸå[73]], $C±‘√∂ì®§[$CÚßÖ’ÑŸå[74]]); foreach ($Cù¡†Ò¯ûì as $FÇôÔÈŒ·∫) { $B∞‚éé˜™Ÿ = $FÇôÔÈŒ·∫[$CÚßÖ’ÑŸå[29]] == $CÚßÖ’ÑŸå[171]; $C¯ä∑∑‡Ñƒ = $b‚Ù¥‹∆•ƒ->getPathInner($FÇôÔÈŒ·∫[$CÚßÖ’ÑŸå[75]]); $dÔã‰∞Ø = self::copyPath($b‚Ù¥‹∆•ƒ, $C¯ä∑∑‡Ñƒ, $f–€ˆ—à¡ì, $F›∂Ñ≥Íª¿, $AËóî¨â«É, $E¿âä≥‹”†, $B∞‚éé˜™Ÿ); if (!$dÔã‰∞Ø) { write_log($CÚßÖ’ÑŸå[1005] . $C¯ä∑∑‡Ñƒ . $CÚßÖ’ÑŸå[1006] . $F›∂Ñ≥Íª¿, $CÚßÖ’ÑŸå[1007]); } } return $DÖŒ¿úƒßô; goto E¨ŸÃõ«¯; eîè†ûäì£: $CÚßÖ’ÑŸå =& $_SERVER[áí∂¯Â¸Áò]; $dêßÜå‡Ü≤ = $C∑˜“¡ø†Ù ? $C∑˜“¡ø†Ù : $b‚Ù¥‹∆•ƒ->getPathName($b‚Ù¥‹∆•ƒ->pathThis($C¯ä∑∑‡Ñƒ)); if ($AËóî¨â«É) { $F„õéüÇ∏∂ = $f–€ˆ—à¡ì->fileNameExist($F›∂Ñ≥Íª¿, $dêßÜå‡Ü≤); $dêßÜå‡Ü≤ = $f–€ˆ—à¡ì->fileNameAuto($F›∂Ñ≥Íª¿, $dêßÜå‡Ü≤, $AËóî¨â«É, !$Fà¡”„µ≈ë); $AËóî¨â«É = $F„õéüÇ∏∂ ? $AËóî¨â«É : !1; } goto e‰…ôóëú∏; Fπ·∆…∏—Æ: $DÖŒ¿úƒßô = $f–€ˆ—à¡ì->mkdir($f–€ˆ—à¡ì->getPath($E´Çäû¿å¡)); $F›∂Ñ≥Íª¿ = $f–€ˆ—à¡ì->getPathInner($DÖŒ¿úƒßô); $C±‘√∂ì®§ = $b‚Ù¥‹∆•ƒ->listPath($C¯ä∑∑‡Ñƒ, !0); goto c¥∑Ó€œÜÖ; E¨ŸÃõ«¯: } private static function copyFile($C´å”¬´ôÔ, $a÷Ñ‚œ–ô¢, $F–áøÚ‚’¨, $B›á≈Ω∞®≠, $cÛ≠ç›ÂÌ—, $d•ÉÎ≠¥üÁ) { goto a∆¶≈ÊŸÌ; Fæÿ‘ßôÈë: mk_dir($eëÈÑãÔä‰); $bë§©¶éÑ⁄ = $eëÈÑãÔä‰ . $fç∞∫µ—öÉ; $bë§©¶éÑ⁄ = $C´å”¬´ôÔ->download($a÷Ñ‚œ–ô¢, $bë§©¶éÑ⁄); goto CÁ†„¡ïËÌ; fàÉÛåúÃà: Hook::trigger($Cæ∫Âç´À¡[1009], $C´å”¬´ôÔ, $a÷Ñ‚œ–ô¢, $F–áøÚ‚’¨, $B›á≈Ω∞®≠, $cÛ≠ç›ÂÌ—, $fç∞∫µ—öÉ); if (self::driverIsSame($C´å”¬´ôÔ, $F–áøÚ‚’¨)) { if ($d•ÉÎ≠¥üÁ) { $fä€Ò‚ÖéÖ = $F–áøÚ‚’¨->moveFile($a÷Ñ‚œ–ô¢, $B›á≈Ω∞®≠); } else { $fä€Ò‚ÖéÖ = $F–áøÚ‚’¨->copyFile($a÷Ñ‚œ–ô¢, $B›á≈Ω∞®≠); } Hook::trigger($Cæ∫Âç´À¡[1010], $C´å”¬´ôÔ, $a÷Ñ‚œ–ô¢, $F–áøÚ‚’¨, $B›á≈Ω∞®≠, $cÛ≠ç›ÂÌ—, $fä€Ò‚ÖéÖ); return $fä€Ò‚ÖéÖ; } $eëÈÑãÔä‰ = TEMP_FILES; goto Fæÿ‘ßôÈë; D´ß°≠‡¶∞: Hook::trigger($Cæ∫Âç´À¡[1010], $C´å”¬´ôÔ, $a÷Ñ‚œ–ô¢, $F–áøÚ‚’¨, $B›á≈Ω∞®≠, $cÛ≠ç›ÂÌ—, $fä€Ò‚ÖéÖ); return $fä€Ò‚ÖéÖ; goto b°ÑÂñ√ì; CÁ†„¡ïËÌ: $bë§©¶éÑ⁄ = $C´å”¬´ôÔ->iconvApp($bë§©¶éÑ⁄); $fä€Ò‚ÖéÖ = $F–áøÚ‚’¨->upload($B›á≈Ω∞®≠, $bë§©¶éÑ⁄, $d•ÉÎ≠¥üÁ); self::remove($eëÈÑãÔä‰ . $fç∞∫µ—öÉ); goto D´ß°≠‡¶∞; a∆¶≈ÊŸÌ: $Cæ∫Âç´À¡ =& $_SERVER[áí∂¯Â¸Áò]; $B›á≈Ω∞®≠ = $F–áøÚ‚’¨->getPath(rtrim($B›á≈Ω∞®≠, $Cæ∫Âç´À¡[8]) . $Cæ∫Âç´À¡[8] . $cÛ≠ç›ÂÌ—); $fç∞∫µ—öÉ = $Cæ∫Âç´À¡[1008] . time() . rand_string(5); goto fàÉÛåúÃà; b°ÑÂñ√ì: } public static function pathFather($D÷„‚»¶“ó) { $eß¬Ì µè´ = IO::init($D÷„‚»¶“ó); $A†∑·è”µÖ = $eß¬Ì µè´->pathFather($eß¬Ì µè´->path); return $eß¬Ì µè´->getPathOuter($A†∑·è”µÖ); } public static function fileOut($D ®∑œŸé´, $aÂ–îŸÜò = false, $fî«ë‰≥µç = false, $aÓıç•…€˜ = '') { $Cÿìô¬”ã∫ = self::driverMake($D ®∑œŸé´); if ($Cÿìô¬”ã∫->isFileOutServer()) { return $Cÿìô¬”ã∫->fileOutServer($D ®∑œŸé´, $aÂ–îŸÜò, $fî«ë‰≥µç, $aÓıç•…€˜); } return $Cÿìô¬”ã∫->fileOut($D ®∑œŸé´, $aÂ–îŸÜò, $fî«ë‰≥µç, $aÓıç•…€˜); } public static function fileOutImage($AÑ‚±Ÿ¥Â´, $dû®èø´ˆÂ = 250) { $dêá√äÜŸπ = array(250, 600, 1200, 3000, 5000); for ($BœııÛêŸ = 0; $BœııÛêŸ < count($dêá√äÜŸπ); $BœııÛêŸ++) { if ($BœııÛêŸ == 0 && $dû®èø´ˆÂ <= $dêá√äÜŸπ[$BœııÛêŸ]) { $dû®èø´ˆÂ = $dêá√äÜŸπ[$BœııÛêŸ]; break; } else { if ($dû®èø´ˆÂ > $dêá√äÜŸπ[$BœııÛêŸ - 1] && $dû®èø´ˆÂ <= $dêá√äÜŸπ[$BœııÛêŸ]) { $dû®èø´ˆÂ = $dêá√äÜŸπ[$BœııÛêŸ]; break; } else { if ($BœııÛêŸ == count($dêá√äÜŸπ) - 1 && $dû®èø´ˆÂ > $dêá√äÜŸπ[$BœııÛêŸ]) { $dû®èø´ˆÂ = $dêá√äÜŸπ[$BœııÛêŸ]; break; } } } } $Céø≈…ı™‹ = self::driverMake($AÑ‚±Ÿ¥Â´); if ($Céø≈…ı™‹->isFileOutServer()) { return $Céø≈…ı™‹->fileOutImageServer($AÑ‚±Ÿ¥Â´, $dû®èø´ˆÂ); } return $Céø≈…ı™‹->fileOutImage($AÑ‚±Ÿ¥Â´, $dû®èø´ˆÂ); } private static function driverIsSame($d—…àÇÜ æ, $f‹⁄åÖƒüÛ) { goto AﬂŒï∞Œ∑Û; B¬ΩπÚÙﬁÊ: if ($d—…àÇÜ æ->pathDriver == $f‹⁄åÖƒüÛ->pathDriver) { return !0; } return !1; goto F›¨Ñ«Ë°≤; AﬂŒï∞Œ∑Û: $DãÃã‡ª∑– =& $_SERVER[áí∂¯Â¸Áò]; $F¯Èäß√Ü  = $d—…àÇÜ æ->getType(); $Eé£ïàªØƒ = $f‹⁄åÖƒüÛ->getType(); goto aöÍ˘‡Ω…ø; aöÍ˘‡Ω…ø: if ($F¯Èäß√Ü  != $Eé£ïàªØƒ) { return !1; } if ($F¯Èäß√Ü  == $DãÃã‡ª∑–[700]) { return !0; } if ($F¯Èäß√Ü  == $DãÃã‡ª∑–[102]) { return !0; } goto B¬ΩπÚÙﬁÊ; F›¨Ñ«Ë°≤: } public static function copyUpdate($B≤π«†˘Óç, $eá∏õ›ìõ®) { goto CâÁ≠Áµ·‚; dÔ∂ÚÔÛœï: $Eéòàæ®◊— = array(); foreach ($A‡º´ÜüÊõ as $e„ÓÏÉáÛë => $c“Ø—ùŸ„) { if (isset($aÛ¯–ÁŒ‰»[$e„ÓÏÉáÛë])) { if ($c“Ø—ùŸ„[$CãÒÎæ—¶[76]] == 1) { continue; } if ($aÛ¯–ÁŒ‰»[$e„ÓÏÉáÛë][$CãÒÎæ—¶[77]] == $c“Ø—ùŸ„[$CãÒÎæ—¶[77]]) { continue; } } if ($c“Ø—ùŸ„[$CãÒÎæ—¶[76]] == 1) { $Eéòàæ®◊—[] = $eá∏õ›ìõ® . $CãÒÎæ—¶[8] . $e„ÓÏÉáÛë; continue; } $BÇê£üê¨ÿ = strstr(trim($e„ÓÏÉáÛë, $CãÒÎæ—¶[8]), $CãÒÎæ—¶[8]) ? get_path_father($e„ÓÏÉáÛë) : $CãÒÎæ—¶[33]; $F±¢â∑Ñ˜Ÿ[] = array($CãÒÎæ—¶[1011] => $c“Ø—ùŸ„[$CãÒÎæ—¶[75]], $CãÒÎæ—¶[1012] => rtrim($eá∏õ›ìõ®, $CãÒÎæ—¶[8]) . $CãÒÎæ—¶[8] . $BÇê£üê¨ÿ, $CãÒÎæ—¶[1013] => $c“Ø—ùŸ„); } $cÎÆ‘ãáÃû = array($CãÒÎæ—¶[171] => $F±¢â∑Ñ˜Ÿ, $CãÒÎæ—¶[76] => $Eéòàæ®◊—); goto f´õ¬§À —; CâÁ≠Áµ·‚: $CãÒÎæ—¶ =& $_SERVER[áí∂¯Â¸Áò]; if (!IO::exist($B≤π«†˘Óç)) { return !1; } if (!IO::exist($eá∏õ›ìõ®)) { IO::mkdir($eá∏õ›ìõ®); } goto f⁄⁄†ÂíÔÍ; f´õ¬§À —: Hook::trigger($CãÒÎæ—¶[1014], $B≤π«†˘Óç, $eá∏õ›ìõ®, $cÎÆ‘ãáÃû); foreach ($Eéòàæ®◊— as $c“Ø—ùŸ„) { IO::mkdir($c“Ø—ùŸ„); } foreach ($F±¢â∑Ñ˜Ÿ as $c“Ø—ùŸ„) { IO::copy($c“Ø—ùŸ„[$CãÒÎæ—¶[1011]], $c“Ø—ùŸ„[$CãÒÎæ—¶[1012]], REPEAT_REPLACE); } goto c˘° á±Ù∫; f⁄⁄†ÂíÔÍ: $A‡º´ÜüÊõ = self::_listAll($B≤π«†˘Óç); $aÛ¯–ÁŒ‰» = self::_listAll($eá∏õ›ìõ®); $F±¢â∑Ñ˜Ÿ = array(); goto dÔ∂ÚÔÛœï; c˘° á±Ù∫: } private static function _listAll($D·ÂËø∏≈ı) { $EäÃﬂöò„ =& $_SERVER[áí∂¯Â¸Áò]; $D·ÂËø∏≈ı = KodIO::clear($D·ÂËø∏≈ı); $C∑˘∑ŒÖáÔ = IO::listAll($D·ÂËø∏≈ı); foreach ($C∑˘∑ŒÖáÔ as &$FøäÍ√¬Ì) { $B∑åÆÙ≠íÉ = substr($FøäÍ√¬Ì[$EäÃﬂöò„[75]], strlen($D·ÂËø∏≈ı)); $FøäÍ√¬Ì[$EäÃﬂöò„[1015]] = trim($B∑åÆÙ≠íÉ, $EäÃﬂöò„[8]); } unset($FøäÍ√¬Ì); return array_to_keyvalue($C∑˘∑ŒÖáÔ, $EäÃﬂöò„[1015]); } public static function fileSubstr($aù£ó‹˜àÒ, $D·ë∆Œ√Êº, $BëÏÁ≤Òì£ = false) { goto C®≤∏∞»–Ö; a‘§æÈîÑÉ: if (!$A›¥Ó÷œ ‰ && $BëÏÁ≤Òì£ && isset($GLOBALS[$bΩñµ‘ÖµÊ[1018]])) { throw new Exception($GLOBALS[$bΩñµ‘ÖµÊ[1018]][$bΩñµ‘ÖµÊ[1019]]); } return $A›¥Ó÷œ ‰; goto Fá‡≈∑µ£Ã; Dêû®ºÛïØ: $f©∂üôŒÖΩ = $D·ë∆Œ√Êº; $c…õ°ºöÇç = $BëÏÁ≤Òì£; if ($D·ë∆Œ√Êº < 0) { $D·ë∆Œ√Êº = $Bã©éÀ¿µª + $D·ë∆Œ√Êº; } goto D≤üà±◊£É; bßéﬂÏî≠»: if ($BëÏÁ≤Òì£ <= 0) { return $bΩñµ‘ÖµÊ[33]; } if ($D·ë∆Œ√Êº < 0 || $D·ë∆Œ√Êº >= $Bã©éÀ¿µª || $BëÏÁ≤Òì£ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\145\x52\145\x61\x64\40\145\162\162\x6f\162\x21\40\163\164\x61\162\x74\75{$D·ë∆Œ√Êº}\73\x6c\x65\x6e\x67\x74\x68\x3d{$BëÏÁ≤Òì£}\x3b\x20\163\151\172\x65\x3d{$Bã©éÀ¿µª}\x3b"); } $A›¥Ó÷œ ‰ = $dıè‰≥¨Ô‘->fileSubstr($aù£ó‹˜àÒ, $D·ë∆Œ√Êº, $BëÏÁ≤Òì£); goto a‘§æÈîÑÉ; C®≤∏∞»–Ö: $bΩñµ‘ÖµÊ =& $_SERVER[áí∂¯Â¸Áò]; $dıè‰≥¨Ô‘ = self::driverMake($aù£ó‹˜àÒ); $Bã©éÀ¿µª = $dıè‰≥¨Ô‘->size($aù£ó‹˜àÒ); goto Dêû®ºÛïØ; D≤üà±◊£É: if ($BëÏÁ≤Òì£ === !1) { $BëÏÁ≤Òì£ = $Bã©éÀ¿µª - $D·ë∆Œ√Êº; } if ($D·ë∆Œ√Êº + $BëÏÁ≤Òì£ > $Bã©éÀ¿µª) { $BëÏÁ≤Òì£ = $Bã©éÀ¿µª - $D·ë∆Œ√Êº; } if (!$Bã©éÀ¿µª && $dıè‰≥¨Ô‘->getType() == $bΩñµ‘ÖµÊ[102] && !$dıè‰≥¨Ô‘->exist($aù£ó‹˜àÒ)) { throw new Exception($bΩñµ‘ÖµÊ[1016] . LNG($bΩñµ‘ÖµÊ[1017])); } goto bßéﬂÏî≠»; Fá‡≈∑µ£Ã: } private static function driverMake(&$f°ë¬´î”¬) { goto fíãáç◊Ï•; fíãáç◊Ï•: $fçò”Œ˘ÃÖ =& $_SERVER[áí∂¯Â¸Áò]; $bÕÖî¿¡ƒõ = KodIO::parse($f°ë¬´î”¬); if (!self::$driverListSystem) { $Fãıà≥ó©™ = Model($fçò”Œ˘ÃÖ[709])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($Fãıà≥ó©™, $fçò”Œ˘ÃÖ[371]); } goto DäÍ∂∆å–∑; DäÍ∂∆å–∑: if ($bÕÖî¿¡ƒõ[$fçò”Œ˘ÃÖ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$bÕÖî¿¡ƒõ[$fçò”Œ˘ÃÖ[371]]]) { return !1; } $f°ë¬´î”¬ = $bÕÖî¿¡ƒõ[$fçò”Œ˘ÃÖ[1020]]; $A˘ØúäÜüÜ = self::driverGet($bÕÖî¿¡ƒõ, $f°ë¬´î”¬); goto Fí∫µ†’™Í; Fí∫µ†’™Í: return $A˘ØúäÜüÜ; goto AíÕÿ≈Ö¯ƒ; AíÕÿ≈Ö¯ƒ: } private static function driverGet($AÀ¶úì’î‚, &$B´ëùøÆù¯) { goto bË“´Ãà…⁄; e¬¥ë“§èÛ: if (isset($Aïáí…Éπ€[$c€ó¥®≠‚Ö[6]][$c€ó¥®≠‚Ö[1032]])) { $eÁ§ŒäΩöÌ->pathBase = rtrim($Aïáí…Éπ€[$c€ó¥®≠‚Ö[6]][$c€ó¥®≠‚Ö[1032]], $c€ó¥®≠‚Ö[8]) . $c€ó¥®≠‚Ö[8]; $B´ëùøÆù¯ = $eÁ§ŒäΩöÌ->pathBase . ltrim($B´ëùøÆù¯, $c€ó¥®≠‚Ö[8]); } $B´ëùøÆù¯ = $eÁ§ŒäΩöÌ->getPath($B´ëùøÆù¯); if (isset($AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1002]])) { $B´ëùøÆù¯ = $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1002]]; } goto B‚‚È∑ú«‚; b§áµúÎã¶: switch ($AÀ¶úì’î‚[$c€ó¥®≠‚Ö[29]]) { case KodIO::KOD_IO: $Aïáí…Éπ€ = self::$driverListSystem[$eÎ“¡∂≠£¶]; break; case KodIO::KOD_SOURCE: $B´ëùøÆù¯ = $eÎ“¡∂≠£¶ . $B´ëùøÆù¯; $Aïáí…Éπ€ = array($c€ó¥®≠‚Ö[1022] => $c€ó¥®≠‚Ö[1023], $c€ó¥®≠‚Ö[6] => $AÀ¶úì’î‚); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $D±ß Ú≠≥ô = $GLOBALS[$c€ó¥®≠‚Ö[1024]]; self::$driverListUser = array_to_keyvalue($D±ß Ú≠≥ô, $c€ó¥®≠‚Ö[371]); } $Aïáí…Éπ€ = self::$driverListUser[$eÎ“¡∂≠£¶]; break; case KodIO::KOD_SHARE_LINK: $Aïáí…Éπ€ = array($c€ó¥®≠‚Ö[1022] => $c€ó¥®≠‚Ö[1025], $c€ó¥®≠‚Ö[6] => $AÀ¶úì’î‚); $B·ÙÍã“∫ñ = Action($c€ó¥®≠‚Ö[1026])->sharePathInfo($AÀ¶úì’î‚[$c€ó¥®≠‚Ö[75]]); $B´ëùøÆù¯ = $B·ÙÍã“∫ñ[$c€ó¥®≠‚Ö[381]]; if (!$B·ÙÍã“∫ñ[$c€ó¥®≠‚Ö[381]]) { $CÉÉ≥¶ø∂Æ = Model($c€ó¥®≠‚Ö[548])->getInfo($B·ÙÍã“∫ñ[$c€ó¥®≠‚Ö[452]]); $B´ëùøÆù¯ = KodIO::clear($CÉÉ≥¶ø∂Æ[$c€ó¥®≠‚Ö[1027]] . $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1020]]); $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[450]] = $CÉÉ≥¶ø∂Æ; $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1002]] = $B´ëùøÆù¯; $Aïáí…Éπ€ = array($c€ó¥®≠‚Ö[1022] => $c€ó¥®≠‚Ö[1028], $c€ó¥®≠‚Ö[6] => $AÀ¶úì’î‚); } break; case KodIO::KOD_SHARE_ITEM: $Aïáí…Éπ€ = array($c€ó¥®≠‚Ö[1022] => $c€ó¥®≠‚Ö[1029], $c€ó¥®≠‚Ö[6] => $AÀ¶úì’î‚); $CÉÉ≥¶ø∂Æ = Model($c€ó¥®≠‚Ö[548])->getInfo($AÀ¶úì’î‚[$c€ó¥®≠‚Ö[371]]); if ($CÉÉ≥¶ø∂Æ[$c€ó¥®≠‚Ö[381]] == $c€ó¥®≠‚Ö[481]) { $B´ëùøÆù¯ = KodIO::clear($CÉÉ≥¶ø∂Æ[$c€ó¥®≠‚Ö[1027]] . $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1020]]); $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[450]] = $CÉÉ≥¶ø∂Æ; $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1002]] = $B´ëùøÆù¯; $Aïáí…Éπ€ = array($c€ó¥®≠‚Ö[1022] => $c€ó¥®≠‚Ö[1030], $c€ó¥®≠‚Ö[6] => $AÀ¶úì’î‚); } else { if (!$B´ëùøÆù¯) { $B´ëùøÆù¯ = $CÉÉ≥¶ø∂Æ[$c€ó¥®≠‚Ö[381]]; } } break; default: $B´ëùøÆù¯ = $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[75]]; $Aïáí…Éπ€ = array($c€ó¥®≠‚Ö[1022] => $c€ó¥®≠‚Ö[1031]); break; } $d∆¯òÿœÛ— = $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[75]]; if (!isset(self::$driverCache[$d∆¯òÿœÛ—])) { $CÔºÚàÖ—∆ = strtolower($Aïáí…Éπ€[$c€ó¥®≠‚Ö[90]]); $e‚“÷Ÿª∞œ = $GLOBALS[$c€ó¥®≠‚Ö[6]][$c€ó¥®≠‚Ö[84]][$c€ó¥®≠‚Ö[759]]; $Bƒ€»ï¿πµ = $c€ó¥®≠‚Ö[71] . (isset($e‚“÷Ÿª∞œ[$CÔºÚàÖ—∆]) ? $e‚“÷Ÿª∞œ[$CÔºÚàÖ—∆] : ucfirst($CÔºÚàÖ—∆)); if (!class_exists($Bƒ€»ï¿πµ)) { show_json("{$Bƒ€»ï¿πµ}\x20\x6e\157\x74\40\x65\170\x69\163\x74\163\x21", !1); } $c˘°Ô’⁄ÒÉ = isset($Aïáí…Éπ€[$c€ó¥®≠‚Ö[6]]) ? $Aïáí…Éπ€[$c€ó¥®≠‚Ö[6]] : !1; self::$driverCache[$d∆¯òÿœÛ—] = new $Bƒ€»ï¿πµ($c˘°Ô’⁄ÒÉ); } goto bØùßãé∞û; B‚‚È∑ú«‚: $eÁ§ŒäΩöÌ->path = $B´ëùøÆù¯; return $eÁ§ŒäΩöÌ; goto AêÓ˜Ö„ÑÑ; bË“´Ãà…⁄: $c€ó¥®≠‚Ö =& $_SERVER[áí∂¯Â¸Áò]; $c¥Êƒ…Øÿõ = $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[1021]]; $eÎ“¡∂≠£¶ = $AÀ¶úì’î‚[$c€ó¥®≠‚Ö[371]]; goto b§áµúÎã¶; bØùßãé∞û: $eÁ§ŒäΩöÌ = self::$driverCache[$d∆¯òÿœÛ—]; $eÁ§ŒäΩöÌ->pathDriver = $c¥Êƒ…Øÿõ; $eÁ§ŒäΩöÌ->pathBase = $c€ó¥®≠‚Ö[33]; goto e¬¥ë“§èÛ; AêÓ˜Ö„ÑÑ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $f‚ìè√‡ûÖ; if (!$f‚ìè√‡ûÖ) { $B∂Ò∑ˆá¶ï = IO::init($_SERVER[áí∂¯Â¸Áò][8]); } return $B∂Ò∑ˆá¶ï; } private static function iconvSystem($Fº™Ç∆Í∞©) { return self::local()->iconvSystem($Fº™Ç∆Í∞©); } private static function iconvApp($C¥µÉôﬁÎˆ) { return self::local()->iconvApp($C¥µÉôﬁÎˆ); } public static function zip($E”¨Ûú‰Ó·, $Bº◊ŸÇŸêÆ = "\172\151\x70", $f±®â—’“ä = '', $bé…ˆê—‡ÿ = REPEAT_RENAME) { goto c⁄üá£Ñ“ë; E‡õã¥âà’: $eèÉ¥æ» Ë = !1; if (!$f±®â—’“ä && $f°ÇÉ∞È≠ø->getType() == $a“Ñ‚≥¢¬ [102]) { $C‰ï©ë‡√√ = self::zipFileList($E”¨Ûú‰Ó·); } else { $eèÉ¥æ» Ë = $f±®â—’“ä ? $f±®â—’“ä : TEMP_FILES . $a“Ñ‚≥¢¬ [1033] . time() . rand_string(8) . $a“Ñ‚≥¢¬ [8]; mk_dir($eèÉ¥æ» Ë); $C‰ï©ë‡√√ = self::zipFileList($E”¨Ûú‰Ó·, $eèÉ¥æ» Ë); } $c»±π›£æ¥ = $e⁄ê‚ïπ´§[$a“Ñ‚≥¢¬ [28]]; goto a©Êç¥ƒÉ’; d±¿Ì¯πÈé: $eë◊≠˘†æø = $E¥®‘É£©ç . $c»±π›£æ¥ . $a“Ñ‚≥¢¬ [91] . $Bº◊ŸÇŸêÆ; $eë◊≠˘†æø = get_filename_auto($eë◊≠˘†æø, $a“Ñ‚≥¢¬ [33], $bé…ˆê—‡ÿ); $fë÷∞∞º©Ô = self::iconvSystem($eë◊≠˘†æø); goto fﬂ™ùò˜®Ü; c⁄üá£Ñ“ë: $a“Ñ‚≥¢¬  =& $_SERVER[áí∂¯Â¸Áò]; $f°ÇÉ∞È≠ø = self::init($E”¨Ûú‰Ó·[0][$a“Ñ‚≥¢¬ [75]]); $e⁄ê‚ïπ´§ = self::info($E”¨Ûú‰Ó·[0][$a“Ñ‚≥¢¬ [75]]); goto E‡õã¥âà’; A∏é¡÷Úè◊: if ($f±®â—’“ä || !$eèÉ¥æ» Ë) { if ($eèÉ¥æ» Ë && strstr($eèÉ¥æ» Ë, TEMP_FILES)) { $Fï∑¯¿î∂Â = $C‰ï©ë‡√√ = array(); recursion_dir($E¥®‘É£©ç, $Fï∑¯¿î∂Â, $C‰ï©ë‡√√, 0); foreach ($Fï∑¯¿î∂Â as $EõèÀ±©’®) { del_dir($EõèÀ±©’®); } foreach ($C‰ï©ë‡√√ as $B´√ó£àã‘) { if ($B´√ó£àã‘ == $fë÷∞∞º©Ô) { continue; } del_file($B´√ó£àã‘); } } return $eë◊≠˘†æø; } $E≤ˆà—áˆÇ = self::pathFather($e⁄ê‚ïπ´§[$a“Ñ‚≥¢¬ [75]]); $Dı§ñÉ™◊ò = self::move($eë◊≠˘†æø, $E≤ˆà—áˆÇ, $bé…ˆê—‡ÿ); goto AÉ›àÜüø◊; fﬂ™ùò˜®Ü: foreach ($C‰ï©ë‡√√ as $cÛ›°∑’è¨ => $eÂøﬁ®ûÃÈ) { $C‰ï©ë‡√√[$cÛ›°∑’è¨] = self::iconvSystem($eÂøﬁ®ûÃÈ); } KodArchive::create($fë÷∞∞º©Ô, $C‰ï©ë‡√√); if (!IO::exist($eë◊≠˘†æø)) { if ($eèÉ¥æ» Ë) { del_dir($eèÉ¥æ» Ë); } show_json(LNG($a“Ñ‚≥¢¬ [1035]), !1); } goto A∏é¡÷Úè◊; a©Êç¥ƒÉ’: if (count($C‰ï©ë‡√√) > 1) { $fã◊”ËÒò© = IO::info(IO::pathFather($e⁄ê‚ïπ´§[$a“Ñ‚≥¢¬ [75]])); $c»±π›£æ¥ = $fã◊”ËÒò©[$a“Ñ‚≥¢¬ [28]]; } $E¥®‘É£©ç = $eèÉ¥æ» Ë; if (!$E¥®‘É£©ç) { $E¥®‘É£©ç = get_path_father($e⁄ê‚ïπ´§[$a“Ñ‚≥¢¬ [75]]); if (!$f±®â—’“ä && $f°ÇÉ∞È≠ø->getType() == $a“Ñ‚≥¢¬ [102]) { $E¥®‘É£©ç = get_path_father($f°ÇÉ∞È≠ø->path); } $BÔ≥ë´Ó™Í = IO::info($E¥®‘É£©ç); if (!$BÔ≥ë´Ó™Í[$a“Ñ‚≥¢¬ [193]]) { show_json(LNG($a“Ñ‚≥¢¬ [1034]), !1); } } goto d±¿Ì¯πÈé; AÉ›àÜüø◊: if (!$Dı§ñÉ™◊ò) { del_dir($eèÉ¥æ» Ë); show_json(LNG($a“Ñ‚≥¢¬ [1035]), !1); } del_dir($eèÉ¥æ» Ë); return $Dı§ñÉ™◊ò; goto D•”·„ƒ∂ò; D•”·„ƒ∂ò: } public static function unzip($d¶ËÉ⁄ÙùÖ, $DπﬁºÜÇ ∂ = "\162\x65\x70\x6c\x61\143\x65") { goto EúçØﬂ†Ö; f–°í‰π¡Ö: Hook::trigger($e›‚à¯ú¢Õ[1043], $CËî∞Ÿ“ô¿); recursion_dir($CËî∞Ÿ“ô¿, $fßéß©Æ‡ü, $cπ≈ƒÜÌôÊ, 0); $e‘Î÷ËÂÉ™ = array_merge($fßéß©Æ‡ü, $cπ≈ƒÜÌôÊ); goto EíÒˆÜöì°; CÃ†∏‹ˆ√‰: $cÓ«áÁ¢Ë≈ = self::tmpFileName($e∞ªã•Øæù); $CËî∞Ÿ“ô¿ = TEMP_FILES . $cÓ«áÁ¢Ë≈; del_dir($CËî∞Ÿ“ô¿); goto bŒÇË¶Èéê; EíÒˆÜöì°: foreach ($e‘Î÷ËÂÉ™ as $aÚÈÖœ ã´) { $aÚÈÖœ ã´ = self::iconvApp($aÚÈÖœ ã´); self::move($aÚÈÖœ ã´, $A˘ôÉí°ÉÔ, $DπﬁºÜÇ ∂); } del_dir($CËî∞Ÿ“ô¿); if (!$f´Éñ§êÍÔ) { del_file($BûäÀË‹“Ü); } goto aÉ™Ö…›î»; d›üù¿˜¿–: if (!($e∞ªã•Øæù = parent::info($aåËåÃâî¿))) { show_json(LNG($e›‚à¯ú¢Õ[1037]), !1); } if (!($bèõÊµˆÓı = parent::infoFull($A˘ôÉí°ÉÔ))) { $A˘ôÉí°ÉÔ = parent::mkdir($A˘ôÉí°ÉÔ); $bèõÊµˆÓı = array($e›‚à¯ú¢Õ[75] => $A˘ôÉí°ÉÔ); } else { if (isset($bèõÊµˆÓı[$e›‚à¯ú¢Õ[381]]) && trim($bèõÊµˆÓı[$e›‚à¯ú¢Õ[75]], $e›‚à¯ú¢Õ[8]) != trim($A˘ôÉí°ÉÔ, $e›‚à¯ú¢Õ[8])) { $Aï€äá°π¿ = KodIO::make($bèõÊµˆÓı[$e›‚à¯ú¢Õ[474]]); $F–⁄åáﬁÎö = parent::fileNameAuto($Aï€äá°π¿, $bèõÊµˆÓı[$e›‚à¯ú¢Õ[28]], REPEAT_RENAME_FOLDER, !0); $A˘ôÉí°ÉÔ = parent::mkdir($Aï€äá°π¿ . $F–⁄åáﬁÎö); $bèõÊµˆÓı = array($e›‚à¯ú¢Õ[75] => $A˘ôÉí°ÉÔ); } } $A˘ôÉí°ÉÔ = $bèõÊµˆÓı[$e›‚à¯ú¢Õ[75]]; goto CÃ†∏‹ˆ√‰; aÉ™Ö…›î»: return !0; goto fﬂ„¡¥≈»ô; EúçØﬂ†Ö: $e›‚à¯ú¢Õ =& $_SERVER[áí∂¯Â¸Áò]; $aåËåÃâî¿ = $d¶ËÉ⁄ÙùÖ[$e›‚à¯ú¢Õ[75]]; $A˘ôÉí°ÉÔ = $d¶ËÉ⁄ÙùÖ[$e›‚à¯ú¢Õ[1036]]; goto d›üù¿˜¿–; BÜ¡™…›’§: $dÌîà¥∆Ù· = KodArchive::extract($BûäÀË‹“Ü, $CËî∞Ÿ“ô¿ . $e›‚à¯ú¢Õ[8], $FË°ûŒ„àﬁ); self::archiveExt(); if (!$dÌîà¥∆Ù·[$e›‚à¯ú¢Õ[1040]]) { show_json($e›‚à¯ú¢Õ[1041] . $dÌîà¥∆Ù·[$e›‚à¯ú¢Õ[1042]], !1); } goto f–°í‰π¡Ö; bŒÇË¶Èéê: mk_dir($CËî∞Ÿ“ô¿); $DÛîãäúıÜ = self::fileExt($e∞ªã•Øæù); $BûäÀË‹“Ü = $CËî∞Ÿ“ô¿ . $e›‚à¯ú¢Õ[91] . $DÛîãäúıÜ; goto D∑ëÖËûªî; D∑ëÖËûªî: if (!@file_exists(self::iconvSystem($BûäÀË‹“Ü))) { $f´Éñ§êÍÔ = self::localFilePath($aåËåÃâî¿, $DÛîãäúıÜ); $BûäÀË‹“Ü = $f´Éñ§êÍÔ ? $f´Éñ§êÍÔ : parent::download($aåËåÃâî¿, $BûäÀË‹“Ü); } $BûäÀË‹“Ü = self::iconvSystem($BûäÀË‹“Ü); $FË°ûŒ„àﬁ = isset($d¶ËÉ⁄ÙùÖ[$e›‚à¯ú¢Õ[1038]]) ? $d¶ËÉ⁄ÙùÖ[$e›‚à¯ú¢Õ[1038]] : $e›‚à¯ú¢Õ[1039]; goto BÜ¡™…›’§; fﬂ„¡¥≈»ô: } public static function unzipList($c™÷Æ¿¢™·) { goto bíñëöπ™¯; EßÇ†é≠ƒÚ: self::archiveExt(); del_dir($e‚”¥í√’É); if (!$A≈∆‰≠üÉı[$FÇ÷Ó™∞ÿ›[1040]]) { show_json($A≈∆‰≠üÉı[$FÇ÷Ó™∞ÿ›[1042]], !1); } goto AˆÑüÿ”Ú˜; AˆÑüÿ”Ú˜: $EÇÙ»…È—§ = json_encode($A≈∆‰≠üÉı[$FÇ÷Ó™∞ÿ›[1042]]); self::setContent($Båﬂ£ãßùÚ, $EÇÙ»…È—§); if (count($A≈∆‰≠üÉı[$FÇ÷Ó™∞ÿ›[1042]]) >= $açÈÌÍ√Ûó) { show_json(sprintf(LNG($FÇ÷Ó™∞ÿ›[1046]), count($A≈∆‰≠üÉı[$FÇ÷Ó™∞ÿ›[1042]])), !1); } goto eë≠Ãâ™ÉØ; EÙù∑ÛıÜ: $cË≠√Õ«äÇ = self::info($a¢Øâ†ÿ¿ø); $fÈÁ∏êŒ˜¿ = self::fileExt($cË≠√Õ«äÇ); $bêãå±‡™ÿ = self::tmpFileName($cË≠√Õ«äÇ); goto D£çƒØ˘æ¶; CßŒÏîæΩã: if (!is_dir($e‚”¥í√’É)) { mk_dir($e‚”¥í√’É); } $dèã·ãß∫∫ = $e‚”¥í√’É . $FÇ÷Ó™∞ÿ›[8] . $CÕâñ◊Ùô∆; if (!@file_exists(self::iconvSystem($dèã·ãß∫∫))) { if (isset($Dá¶ì¡á®π)) { url_request($Bçàπ∞ã™Ù, $FÇ÷Ó™∞ÿ›[1047], $dèã·ãß∫∫); } else { $Aç…‘∑©õ≠ = self::localFilePath($Bçàπ∞ã™Ù, $fÈÁ∏êŒ˜¿); $dèã·ãß∫∫ = $Aç…‘∑©õ≠ ? $Aç…‘∑©õ≠ : self::download($Bçàπ∞ã™Ù, $dèã·ãß∫∫); } } goto cïåÆ¬≥µ«; D£çƒØ˘æ¶: if (isset($Dá¶ì¡á®π)) { $CøêÉ¥ìøÌ = array($Dá¶ì¡á®π[$FÇ÷Ó™∞ÿ›[75]], $Dá¶ì¡á®π[$FÇ÷Ó™∞ÿ›[1044]], $Dá¶ì¡á®π[$FÇ÷Ó™∞ÿ›[28]]); $CÕâñ◊Ùô∆ = md5(implode($FÇ÷Ó™∞ÿ›[70], $CøêÉ¥ìøÌ)) . $FÇ÷Ó™∞ÿ›[91] . get_path_ext($Dá¶ì¡á®π[$FÇ÷Ó™∞ÿ›[28]]); } else { $CøêÉ¥ìøÌ = array($cË≠√Õ«äÇ[$FÇ÷Ó™∞ÿ›[28]], $cË≠√Õ«äÇ[$FÇ÷Ó™∞ÿ›[75]], $cË≠√Õ«äÇ[$FÇ÷Ó™∞ÿ›[77]]); $CÕâñ◊Ùô∆ = md5(implode($FÇ÷Ó™∞ÿ›[70], $CøêÉ¥ìøÌ)) . $FÇ÷Ó™∞ÿ›[91] . $fÈÁ∏êŒ˜¿; } if ($cÕÕÏõíêº == -1) { $Båﬂ£ãßùÚ = IO_PATH_SYSTEM_TEMP . "\172\151\x70\126\151\145\x77\x2f{$bêãå±‡™ÿ}\57{$CÕâñ◊Ùô∆}\x2e\154\157\147"; $f’’Û’ÈÕë = self::infoFull($Båﬂ£ãßùÚ); if ($f’’Û’ÈÕë) { $Båﬂ£ãßùÚ = $f’’Û’ÈÕë[$FÇ÷Ó™∞ÿ›[75]]; $aÆ†ÉÑ§◊∏ = self::getContent($Båﬂ£ãßùÚ); if ($aÆ†ÉÑ§◊∏) { $EÇÙ»…È—§ = json_decode($aÆ†ÉÑ§◊∏, !0); if (count($EÇÙ»…È—§) >= $açÈÌÍ√Ûó) { show_json(sprintf(LNG($FÇ÷Ó™∞ÿ›[1046]), count($EÇÙ»…È—§)), !1); } return $EÇÙ»…È—§; } } else { $Båﬂ£ãßùÚ = self::mkfile($Båﬂ£ãßùÚ); } } $e‚”¥í√’É = TEMP_FILES . $bêãå±‡™ÿ; goto CßŒÏîæΩã; bíñëöπ™¯: $FÇ÷Ó™∞ÿ› =& $_SERVER[áí∂¯Â¸Áò]; $Bçàπ∞ã™Ù = $c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[75]]; $cÕÕÏõíêº = isset($c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[1044]]) ? $c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[1044]] : -1; goto cŸ çÒ›Ñ∞; cïåÆ¬≥µ«: $dèã·ãß∫∫ = self::iconvSystem($dèã·ãß∫∫); if ($cÕÕÏõíêº >= 0) { $e≈…æ‹∆æº = isset($c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[1048]]) ? $c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[1048]] : !1; $C«‡⁄€Íï¢ = isset($c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[28]]) ? $c™÷Æ¿¢™·[$FÇ÷Ó™∞ÿ›[28]] : $FÇ÷Ó™∞ÿ›[33]; KodArchive::filePreview($dèã·ãß∫∫, $cÕÕÏõíêº, $e≈…æ‹∆æº, $C«‡⁄€Íï¢); self::archiveExt(); die; } $A≈∆‰≠üÉı = KodArchive::listContent($dèã·ãß∫∫); goto EßÇ†é≠ƒÚ; eë≠Ãâ™ÉØ: return $A≈∆‰≠üÉı[$FÇ÷Ó™∞ÿ›[1042]]; goto aπâ—∂âë‰; cŸ çÒ›Ñ∞: $açÈÌÍ√Ûó = 50000; if (request_url_safe($Bçàπ∞ã™Ù)) { $Dá¶ì¡á®π = parse_url_query($Bçàπ∞ã™Ù); if (!isset($Dá¶ì¡á®π[$FÇ÷Ó™∞ÿ›[75]])) { show_json($FÇ÷Ó™∞ÿ›[1045], !1); } } $a¢Øâ†ÿ¿ø = isset($Dá¶ì¡á®π) ? $Dá¶ì¡á®π[$FÇ÷Ó™∞ÿ›[75]] : $Bçàπ∞ã™Ù; goto EÙù∑ÛıÜ; aπâ—∂âë‰: } private static function fileExt($F« Îƒ∫üí) { $E∑¡Ã≈Üï¬ =& $_SERVER[áí∂¯Â¸Áò]; $F™˜Éƒ„ä∆ = $F« Îƒ∫üí[$E∑¡Ã≈Üï¬[165]]; if ($F™˜Éƒ„ä∆ == $E∑¡Ã≈Üï¬[1049]) { $A∑ÚÍî”◊ß = $E∑¡Ã≈Üï¬[1050]; if (substr($F« Îƒ∫üí[$E∑¡Ã≈Üï¬[28]], -strlen($A∑ÚÍî”◊ß)) == $A∑ÚÍî”◊ß) { $F™˜Éƒ„ä∆ = $E∑¡Ã≈Üï¬[1051]; } } self::archiveExt($F™˜Éƒ„ä∆); return $F™˜Éƒ„ä∆; } private static function zipFileList($A±«ÓâÁ®±, $d¡úúáﬁÌ÷ = false) { $d¿ééÕáÀ =& $_SERVER[áí∂¯Â¸Áò]; $EœÁÛ†üÔÉ = array(); foreach ($A±«ÓâÁ®± as $AÜ®â„ÕŒÛ) { $E≥é«éüâç = $AÜ®â„ÕŒÛ[$d¿ééÕáÀ[75]]; if ($d¡úúáﬁÌ÷) { $E≥é«éüâç = self::copy($AÜ®â„ÕŒÛ[$d¿ééÕáÀ[75]], $d¡úúáﬁÌ÷, $d¿ééÕáÀ[750]); } else { $f±—Ï≥”‡∂ = self::init($AÜ®â„ÕŒÛ[$d¿ééÕáÀ[75]]); if ($f±—Ï≥”‡∂->getType() == $d¿ééÕáÀ[102]) { $E≥é«éüâç = $f±—Ï≥”‡∂->path; } } if ($E≥é«éüâç && self::local()->exist($E≥é«éüâç)) { $EœÁÛ†üÔÉ[$AÜ®â„ÕŒÛ[$d¿ééÕáÀ[75]]] = $E≥é«éüâç; } } if (!empty($EœÁÛ†üÔÉ)) { return array_values($EœÁÛ†üÔÉ); } show_json(LNG($d¿ééÕáÀ[1017]), !1); } public static function tmpFileName($bâÀ€ß‘â±) { $fÌÎú©›„˜ =& $_SERVER[áí∂¯Â¸Áò]; $A∏ô£Êîÿ≤ = array($bâÀ€ß‘â±[$fÌÎú©›„˜[28]], $bâÀ€ß‘â±[$fÌÎú©›„˜[75]], $bâÀ€ß‘â±[$fÌÎú©›„˜[77]], $bâÀ€ß‘â±[$fÌÎú©›„˜[472]]); return md5(implode($fÌÎú©›„˜[70], $A∏ô£Êîÿ≤)); } private static function localFilePath($a”¶â›Ô“”, $BéÛ±ªê˘ø) { goto eÀÙîÇàïÎ; eÀÙîÇàïÎ: $fùÌäûï÷î =& $_SERVER[áí∂¯Â¸Áò]; if ($BéÛ±ªê˘ø == $fùÌäûï÷î[1052] && strtoupper(substr(PHP_OS, 0, 3)) == $fùÌäûï÷î[1053]) { return !1; } $fÆ†Ûÿœ…Ô = KodIO::parse($a”¶â›Ô“”); goto DäôŒé§”ë; CãóáäˆÉÉ: if ($aÓèÒÃïÔà == $fùÌäûï÷î[102] || $aÓèÒÃïÔà == $fùÌäûï÷î[1055]) { if (!$aƒãáê·‹„->exist($aƒãáê·‹„->path)) { show_json(LNG($fùÌäûï÷î[101]), !1); } return $aƒãáê·‹„->path; } return !1; goto A±úÂ©√˜∂; DäôŒé§”ë: if ($fÆ†Ûÿœ…Ô[$fùÌäûï÷î[29]] == KodIO::KOD_SOURCE) { $aÒ∞±’ìíÉ = Model($fùÌäûï÷î[758])->fileInfoGet(KodIO::sourceID($a”¶â›Ô“”)); if (!$aÒ∞±’ìíÉ[$fùÌäûï÷î[75]]) { show_json($fùÌäûï÷î[1054], !1); } $a”¶â›Ô“” = $aÒ∞±’ìíÉ[$fùÌäûï÷î[75]]; } $aƒãáê·‹„ = self::init($a”¶â›Ô“”); $aÓèÒÃïÔà = $aƒãáê·‹„->getType(); goto CãóáäˆÉÉ; A±úÂ©√˜∂: } private static function archiveExt($Eôü„É◊÷é = '') { $GLOBALS[$_SERVER[áí∂¯Â¸Áò][1056]] = $Eôü„É◊÷é; } } class KodIO { const KOD_SOURCE = "\173\163\157\165\x72\143\145\x7d"; const KOD_USER_RECYCLE = "\173\165\x73\145\x72\122\x65\x63\x79\x63\x6c\145\175"; const KOD_USER_FAV = "\173\165\163\x65\x72\x46\x61\x76\175"; const KOD_USER_FILE_TAG = "\173\165\x73\145\162\x46\151\x6c\145\x54\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\x65\x72\106\x69\x6c\145\x54\171\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\147\x72\157\165\x70\122\x6f\x6f\x74\x53\145\x6c\146\x7d"; const KOD_USER_SHARE = "\x7b\165\x73\145\x72\123\x68\141\162\x65\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\163\145\162\x53\150\x61\162\145\x4c\151\156\153\175"; const KOD_USER_SHARE_TO_ME = "\173\x73\150\x61\162\145\124\157\115\x65\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\x68\x61\162\x65\111\x74\x65\155\175"; const KOD_SHARE_LINK = "\x7b\x73\x68\141\162\145\111\x74\x65\155\x4c\x69\156\153\175"; const KOD_SEARCH = "\x7b\x73\x65\x61\x72\143\x68\175"; const KOD_BLOCK = "\x7b\x62\x6c\157\x63\x6b\175"; const KOD_IO = "\x7b\x69\x6f\x7d"; const KOD_USER_RECENT = "\x7b\x75\163\x65\x72\122\145\x6e\143\x65\x6e\164\175"; const KOD_USER_DRIVER = "\173\144\162\151\x76\145\162\x7d"; public static function typeList() { $EÕ®ö¢ÜÂâ =& $_SERVER[áí∂¯Â¸Áò]; return array($EÕ®ö¢ÜÂâ[1057] => self::KOD_SOURCE, $EÕ®ö¢ÜÂâ[1058] => self::KOD_USER_RECYCLE, $EÕ®ö¢ÜÂâ[1059] => self::KOD_USER_FAV, $EÕ®ö¢ÜÂâ[1060] => self::KOD_USER_FILE_TAG, $EÕ®ö¢ÜÂâ[1061] => self::KOD_USER_FILE_TYPE, $EÕ®ö¢ÜÂâ[1062] => self::KOD_GROUP_ROOT_SELF, $EÕ®ö¢ÜÂâ[1063] => self::KOD_USER_SHARE, $EÕ®ö¢ÜÂâ[1064] => self::KOD_USER_SHARE_LINK, $EÕ®ö¢ÜÂâ[1065] => self::KOD_USER_SHARE_TO_ME, $EÕ®ö¢ÜÂâ[1066] => self::KOD_SHARE_ITEM, $EÕ®ö¢ÜÂâ[1067] => self::KOD_SHARE_LINK, $EÕ®ö¢ÜÂâ[1068] => self::KOD_SEARCH, $EÕ®ö¢ÜÂâ[1069] => self::KOD_BLOCK, $EÕ®ö¢ÜÂâ[1070] => self::KOD_IO, $EÕ®ö¢ÜÂâ[1071] => self::KOD_USER_RECENT, $EÕ®ö¢ÜÂâ[1072] => self::KOD_USER_DRIVER); } public static function parse($aö”âˆÖ∆¢) { goto D¬≤™áà·π; D¬≤™áà·π: $Aªä”ûñ…À =& $_SERVER[áí∂¯Â¸Áò]; $aö”âˆÖ∆¢ = self::clear($aö”âˆÖ∆¢); $C∏ÜåêâÿÉ = array_values(self::typeList()); goto d¶âÕ≠ﬂ ﬁ; BçêËÍèÖ®: $EÎÆıÆäÚñ = array($Aªä”ûñ…À[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $f”™…â¨Ü⁄[$Aªä”ûñ…À[1077]] = in_array($f”™…â¨Ü⁄[$Aªä”ûñ…À[29]], $EÎÆıÆäÚñ); return $f”™…â¨Ü⁄; goto DÓˆÉâÙˆ÷; d¶âÕ≠ﬂ ﬁ: preg_match($Aªä”ûñ…À[1073], $aö”âˆÖ∆¢, $dÒø⁄„¿®”); $f”™…â¨Ü⁄ = array($Aªä”ûñ…À[400] => !1, $Aªä”ûñ…À[1074] => !1, $Aªä”ûñ…À[397] => !1, $Aªä”ûñ…À[75] => $aö”âˆÖ∆¢, $Aªä”ûñ…À[1021] => !1, $Aªä”ûñ…À[1020] => $Aªä”ûñ…À[33]); if (is_array($dÒø⁄„¿®”) && count($dÒø⁄„¿®”) == 5) { $eæ∆‚üéå… = $Aªä”ûñ…À[1075] . $dÒø⁄„¿®”[2] . $Aªä”ûñ…À[319]; if (in_array($eæ∆‚üéå…, $C∏ÜåêâÿÉ)) { $f”™…â¨Ü⁄[$Aªä”ûñ…À[1021]] = $dÒø⁄„¿®”[1]; $f”™…â¨Ü⁄[$Aªä”ûñ…À[29]] = $eæ∆‚üéå…; $f”™…â¨Ü⁄[$Aªä”ûñ…À[1076]] = substr($eæ∆‚üéå…, 1, -1); $f”™…â¨Ü⁄[$Aªä”ûñ…À[371]] = $dÒø⁄„¿®”[3]; } $f”™…â¨Ü⁄[$Aªä”ûñ…À[1020]] = $dÒø⁄„¿®”[4]; } goto BçêËÍèÖ®; DÓˆÉâÙˆ÷: } public static function clear($aú™√”ºäœ) { goto aÚ…ﬂîùı¢; d≤·ó¡ƒêÕ: return $aú™√”ºäœ; goto A∑ÛÒ∏±ØÓ; B…ôØ ë¯ó: $aú™√”ºäœ = preg_replace($B∞ƒ°õ˜¿ÿ[1080], $B∞ƒ°õ˜¿ÿ[8], $aú™√”ºäœ); if ($aú™√”ºäœ == $B∞ƒ°õ˜¿ÿ[8]) { return $B∞ƒ°õ˜¿ÿ[8]; } $aú™√”ºäœ = rtrim($aú™√”ºäœ, $B∞ƒ°õ˜¿ÿ[8]); goto d≤·ó¡ƒêÕ; aÚ…ﬂîùı¢: $B∞ƒ°õ˜¿ÿ =& $_SERVER[áí∂¯Â¸Áò]; $aú™√”ºäœ = str_replace(array($B∞ƒ°õ˜¿ÿ[996], $B∞ƒ°õ˜¿ÿ[221]), $B∞ƒ°õ˜¿ÿ[50], $aú™√”ºäœ); $aú™√”ºäœ = str_replace($B∞ƒ°õ˜¿ÿ[93], $B∞ƒ°õ˜¿ÿ[8], $aú™√”ºäœ); goto E»Â”ÓûÁ◊; E»Â”ÓûÁ◊: $fôåï∫¡ä¥ = $B∞ƒ°õ˜¿ÿ[1078]; if (substr($aú™√”ºäœ, 0, 3) == $B∞ƒ°õ˜¿ÿ[1079]) { $aú™√”ºäœ = substr($aú™√”ºäœ, 3); } while (strstr($aú™√”ºäœ, $fôåï∫¡ä¥)) { $aú™√”ºäœ = str_replace($fôåï∫¡ä¥, $B∞ƒ°õ˜¿ÿ[8], $aú™√”ºäœ); } goto B…ôØ ë¯ó; A∑ÛÒ∏±ØÓ: } public static function sourceID($DÑéû∑ΩÌ‚) { $CáÜíõ±õ„ =& $_SERVER[áí∂¯Â¸Áò]; $Aëîº¶’ﬁú = self::parse($DÑéû∑ΩÌ‚); if ($Aëîº¶’ﬁú[$CáÜíõ±õ„[29]] !== self::KOD_SOURCE) { show_json(LNG($CáÜíõ±õ„[1081]), !1); } return $Aëîº¶’ﬁú[$CáÜíõ±õ„[371]]; } public static function make($c¯»êõèù«) { if (!$c¯»êõèù«) { return !1; } return self::makePath(self::KOD_SOURCE, intval($c¯»êõèù«)); } public static function makeShare($F‡‡€€ªÑ˜, $aÆ¶ë™Ωá“) { return self::makePath(self::KOD_SHARE_ITEM, $F‡‡€€ªÑ˜, $aÆ¶ë™Ωá“); } public static function makeFileTypePath($eÒŒ°È∂Ãµ) { return self::makePath(self::KOD_USER_FILE_TYPE, $eÒŒ°È∂Ãµ); } public static function makeFileTagPath($b¬ïËÎàêŒ) { return self::makePath(self::KOD_USER_FILE_TAG, $b¬ïËÎàêŒ); } public static function makePath($CºëØ©ÿˆ–, $A◊ÈÜ†Ã…ô = '', $dﬁÒ¬ﬁ‚∫ÿ = '') { $bïí‹é´∫õ =& $_SERVER[áí∂¯Â¸Áò]; $fá∫âû–˘Ï = substr($CºëØ©ÿˆ–, 1, -1); $b¥ﬁ¯¢Øë˘ = $bïí‹é´∫õ[1082] . $fá∫âû–˘Ï . $bïí‹é´∫õ[1083] . $A◊ÈÜ†Ã…ô . $bïí‹é´∫õ[1084]; $b¥ﬁ¯¢Øë˘ = $dﬁÒ¬ﬁ‚∫ÿ ? $b¥ﬁ¯¢Øë˘ . $dﬁÒ¬ﬁ‚∫ÿ . $bïí‹é´∫õ[8] : $b¥ﬁ¯¢Øë˘; return $b¥ﬁ¯¢Øë˘; } public static function hashPath($FÖ†¬ÒÏ±Ã) { $aÈÊΩˆ◊…ê =& $_SERVER[áí∂¯Â¸Áò]; $fÆ¥≥¬àœ´ = is_array($FÖ†¬ÒÏ±Ã) ? $FÖ†¬ÒÏ±Ã : IO::info($FÖ†¬ÒÏ±Ã); $FàŸ„◊Çˆˆ = _get($fÆ¥≥¬àœ´, $aÈÊΩˆ◊…ê[1085], $aÈÊΩˆ◊…ê[33]); if (!$FàŸ„◊Çˆˆ) { $A•„™àÕ∆Ö = KodIO::parse($fÆ¥≥¬àœ´[$aÈÊΩˆ◊…ê[75]]); if (!$A•„™àÕ∆Ö[$aÈÊΩˆ◊…ê[29]]) { $FàŸ„◊Çˆˆ = IO::hashSimple($fÆ¥≥¬àœ´[$aÈÊΩˆ◊…ê[75]]); } } if (!$FàŸ„◊Çˆˆ) { $FàŸ„◊Çˆˆ = md5($fÆ¥≥¬àœ´[$aÈÊΩˆ◊…ê[75]] . $fÆ¥≥¬àœ´[$aÈÊΩˆ◊…ê[77]] . $fÆ¥≥¬àœ´[$aÈÊΩˆ◊…ê[107]]); } return $FàŸ„◊Çˆˆ; } public static function initSystemPath() { $eﬁŒ˘ÇÎ¨ò =& $_SERVER[áí∂¯Â¸Áò]; if (defined($eﬁŒ˘ÇÎ¨ò[1086])) { return; } define($eﬁŒ˘ÇÎ¨ò[1086], self::systemPath($eﬁŒ˘ÇÎ¨ò[1087])); define($eﬁŒ˘ÇÎ¨ò[1088], self::systemPath($eﬁŒ˘ÇÎ¨ò[1089])); define($eﬁŒ˘ÇÎ¨ò[1090], self::systemPath($eﬁŒ˘ÇÎ¨ò[1091])); define($eﬁŒ˘ÇÎ¨ò[1092], self::systemPath($eﬁŒ˘ÇÎ¨ò[1093])); } public static function systemPath($f≥Ï§»äß∂) { goto cõ∏ﬁã·°˜; cõ∏ﬁã·°˜: $Cﬁâ‹éå± =& $_SERVER[áí∂¯Â¸Áò]; $B»ΩÈ»ƒ·Ò = $Cﬁâ‹éå±[1094] . ucfirst($f≥Ï§»äß∂); $bËÈùπÃçÌ = Model($Cﬁâ‹éå±[1095])->get($B»ΩÈ»ƒ·Ò); goto bíß›—ÀÍÏ; d‰“¬È˜äå: return $bËÈùπÃçÌ; goto FñÂÉ°¬àŸ; bíß›—ÀÍÏ: if ($bËÈùπÃçÌ) { return $bËÈùπÃçÌ; } if ($f≥Ï§»äß∂ == $Cﬁâ‹éå±[1087]) { $bËÈùπÃçÌ = self::make(Model($Cﬁâ‹éå±[758])->systemRootPathAdd($Cﬁâ‹éå±[1096])); } else { $bËÈùπÃçÌ = self::systemPath($Cﬁâ‹éå±[1087]); $D√≈ßÜ¢ŸÑ = self::sourceID($bËÈùπÃçÌ); $bËÈùπÃçÌ = self::make(Model($Cﬁâ‹éå±[758])->mkdir($D√≈ßÜ¢ŸÑ, $f≥Ï§»äß∂)); } Model($Cﬁâ‹éå±[1095])->set($B»ΩÈ»ƒ·Ò, $bËÈùπÃçÌ); goto d‰“¬È˜äå; FñÂÉ°¬àŸ: } public static function systemFolder($F„à‹éÑéç) { $EìÕ‘≈äùˆ = IO_PATH_SYSTEM_SOURCE . $F„à‹éÑéç; $D∂›ü∆ÖŸÂ = Cache::get($EìÕ‘≈äùˆ); if (!$D∂›ü∆ÖŸÂ) { $dùÙÂè¿≥ÿ = IO::infoFull($EìÕ‘≈äùˆ); if (!$dùÙÂè¿≥ÿ) { $D∂›ü∆ÖŸÂ = IO::mkdir($EìÕ‘≈äùˆ, REPEAT_SKIP); } else { $D∂›ü∆ÖŸÂ = $dùÙÂè¿≥ÿ[$_SERVER[áí∂¯Â¸Áò][75]]; } Cache::set($EìÕ‘≈äùˆ, $D∂›ü∆ÖŸÂ, 3600 * 10); } return $D∂›ü∆ÖŸÂ; } public static function defaultDriver() { return Model($_SERVER[áí∂¯Â¸Áò][709])->defaultDriver(); } public static function defaultIO() { $DÇáˆê €Ì =& $_SERVER[áí∂¯Â¸Áò]; $fŒÂ¢√”§ë = self::defaultDriver(); return $DÇáˆê €Ì[1097] . $fŒÂ¢√”§ë[$DÇáˆê €Ì[371]] . $DÇáˆê €Ì[1084]; } public static function defaultDriverInit() { static $b≠≥˘Àêå  = false; if ($b≠≥˘Àêå ) { return $b≠≥˘Àêå ; } $b≠≥˘Àêå  = IO::init(self::defaultIO()); return $b≠≥˘Àêå ; } public static function fileTypeList() { $DçœÁ∏Öæ∂ =& $_SERVER[áí∂¯Â¸Áò]; $dÙœ¨Ö—à· = $GLOBALS[$DçœÁ∏Öæ∂[6]][$DçœÁ∏Öæ∂[1098]]; foreach ($dÙœ¨Ö—à· as $B⁄∫ì®ÃÌ≥ => $b§ØıÏﬁô†) { $EÌØÚ˜ø‚Ö = $DçœÁ∏Öæ∂[1099] . $B⁄∫ì®ÃÌ≥; $Eﬂµ‘∫ã…– = LNG($EÌØÚ˜ø‚Ö); if ($EÌØÚ˜ø‚Ö != $Eﬂµ‘∫ã…–) { $dÙœ¨Ö—à·[$B⁄∫ì®ÃÌ≥][$DçœÁ∏Öæ∂[28]] = $Eﬂµ‘∫ã…–; } } return $dÙœ¨Ö—à·; } public static function transferType($d±‰§ÉéÆ, $dˆò√ïíËÃ) { goto FüÔÏë≈î‚; FüÔÏë≈î‚: $FÙ∫ãﬁ√¨¶ =& $_SERVER[áí∂¯Â¸Áò]; $c«∂’Ù™âü = self::driverType($d±‰§ÉéÆ); $C¢ªòΩøú– = self::driverType($dˆò√ïíËÃ); goto d¨Ï˜¡éœ≠; B…êÇ±◊®å: return $FÙ∫ãﬁ√¨¶[1102]; goto a–˜ºü›ÇÍ; d¨Ï˜¡éœ≠: if ($c«∂’Ù™âü[$FÙ∫ãﬁ√¨¶[29]] == $C¢ªòΩøú–[$FÙ∫ãﬁ√¨¶[29]] && $c«∂’Ù™âü[$FÙ∫ãﬁ√¨¶[1100]] == $C¢ªòΩøú–[$FÙ∫ãﬁ√¨¶[1100]]) { return $FÙ∫ãﬁ√¨¶[1101]; } if ($c«∂’Ù™âü[$FÙ∫ãﬁ√¨¶[29]] == $FÙ∫ãﬁ√¨¶[788] && $C¢ªòΩøú–[$FÙ∫ãﬁ√¨¶[29]] == $FÙ∫ãﬁ√¨¶[102]) { return $FÙ∫ãﬁ√¨¶[1048]; } if ($c«∂’Ù™âü[$FÙ∫ãﬁ√¨¶[29]] == $FÙ∫ãﬁ√¨¶[102] && $C¢ªòΩøú–[$FÙ∫ãﬁ√¨¶[29]] == $FÙ∫ãﬁ√¨¶[788]) { return $FÙ∫ãﬁ√¨¶[103]; } goto B…êÇ±◊®å; a–˜ºü›ÇÍ: } public static function driverType($DâªÁ†Óá√) { goto BﬁÆ‡¢ÆûÕ; fÕ◊÷é„É“: return array($DÛ”»±∏√π[29] => $DÛ”»±∏√π[788], $DÛ”»±∏√π[1100] => $DâªÁ†Óá√->pathDriver, $DÛ”»±∏√π[75] => $BÆû¿·µø¯); goto BŒâØ·‰§í; f·ä‰üú€ı: if ($b‡€Çù¨§ã == $DÛ”»±∏√π[700] || $b‡€Çù¨§ã == $DÛ”»±∏√π[1104] || $b‡€Çù¨§ã == $DÛ”»±∏√π[1105]) { $DâªÁ†Óá√ = self::defaultDriverInit(); } else { if ($b‡€Çù¨§ã == $DÛ”»±∏√π[1055] || $b‡€Çù¨§ã == $DÛ”»±∏√π[1106]) { $DâªÁ†Óá√ = IO::init($DâªÁ†Óá√->pathParse[$DÛ”»±∏√π[1002]]); } } $b‡€Çù¨§ã = str_replace($DÛ”»±∏√π[1103], $DÛ”»±∏√π[33], strtolower($DâªÁ†Óá√->getType())); if ($b‡€Çù¨§ã == $DÛ”»±∏√π[102]) { return array($DÛ”»±∏√π[29] => $DÛ”»±∏√π[102], $DÛ”»±∏√π[1100] => $DÛ”»±∏√π[33], $DÛ”»±∏√π[75] => $BÆû¿·µø¯); } goto fÕ◊÷é„É“; BﬁÆ‡¢ÆûÕ: $DÛ”»±∏√π =& $_SERVER[áí∂¯Â¸Áò]; $BÆû¿·µø¯ = $DâªÁ†Óá√->path; $b‡€Çù¨§ã = str_replace($DÛ”»±∏√π[1103], $DÛ”»±∏√π[33], strtolower($DâªÁ†Óá√->getType())); goto f·ä‰üú€ı; BŒâØ·‰§í: } } goto dî´ÖÙ÷√; dì÷Ìπ•‹: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\x74\160\72\x2f\57\166\60\56\141\x70\151\56\165\x70\x79\x75\x6e\x2e\x63\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($E—Í§áêõà) { parent::__construct(); $this->_init($E—Í§áêõà); } public function _init($còâã±æ£§) { $FöÙüçÓﬂü =& $_SERVER[áí∂¯Â¸Áò]; foreach ($còâã±æ£§ as $DêπÙñöÃó => $eòœúù¬Ô¶) { if (isset($this->{$DêπÙñöÃó})) { $this->{$DêπÙñöÃó} = $eòœúù¬Ô¶; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { throw new Exception($FöÙüçÓﬂü[1247] . LNG($FöÙüçÓﬂü[1179])); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($f≤∫Ó’ÃÆª, $EÿæÌ≤ùÇæ = "\107\105\x54") { $DÈÑÏÚØÓá =& $_SERVER[áí∂¯Â¸Áò]; $bò∆èÜ™íÑ = gmdate($DÈÑÏÚØÓá[1212]); $FÎÆº«∞ ¨ = base64_encode(hash_hmac($DÈÑÏÚØÓá[1248], "{$EÿæÌ≤ùÇæ}\46{$f≤∫Ó’ÃÆª}\46{$bò∆èÜ™íÑ}", md5("{$this->userpass}"), !0)); $a‰ﬁüËá«Ω = array("\x41\165\164\x68\157\162\x69\x7a\x61\164\151\x6f\x6e\x3a\x55\x50\131\x55\116\x20{$this->username}\72{$FÎÆº«∞ ¨}", "\104\x61\164\145\72{$bò∆èÜ™íÑ}"); return $a‰ﬁüËá«Ω; } public function ussRequest($F—√›∆ÖÁ·, $fÌã˜‡äÉ¢ = "\x47\x45\124", $aõŒ›∑¥ÎÖ = false, $Fá∞Ö”È£Â = false, $a∞⁄»‚Úâß = false) { goto cß‡ÀÉ‡Í—; cß‡ÀÉ‡Í—: $döÀªÕÁÌç =& $_SERVER[áí∂¯Â¸Áò]; $F—√›∆ÖÁ· = trim($F—√›∆ÖÁ·, $döÀªÕÁÌç[8]); $Eπ‰‘◊ΩÒ¿ = "\57{$this->bucket}\57{$F—√›∆ÖÁ·}"; goto aÌﬂ·€üñΩ; aÌﬂ·€üñΩ: $BﬂéÆâ–ªÙ = $this->ussHeaders($Eπ‰‘◊ΩÒ¿, $fÌã˜‡äÉ¢); if ($Fá∞Ö”È£Â) { $BﬂéÆâ–ªÙ = array_merge($BﬂéÆâ–ªÙ, $Fá∞Ö”È£Â); } $cÜØ∆∫≤ˆú = url_request($this->endpoint . $Eπ‰‘◊ΩÒ¿, $fÌã˜‡äÉ¢, $aõŒ›∑¥ÎÖ, $BﬂéÆâ–ªÙ, $a∞⁄»‚Úâß); goto c¢Æªÿø√ç; c¢Æªÿø√ç: if (!$cÜØ∆∫≤ˆú) { return array($döÀªÕÁÌç[1040] => !1, $döÀªÕÁÌç[1042] => $döÀªÕÁÌç[1249]); } if (strtolower($fÌã˜‡äÉ¢) == $döÀªÕÁÌç[188] || in_array($cÜØ∆∫≤ˆú[$döÀªÕÁÌç[1040]], array($döÀªÕÁÌç[1107], $döÀªÕÁÌç[1250]))) { $aõŒ›∑¥ÎÖ = $cÜØ∆∫≤ˆú[$döÀªÕÁÌç[1251]]; } else { $aõŒ›∑¥ÎÖ = json_decode($cÜØ∆∫≤ˆú[$döÀªÕÁÌç[1042]], !0); if (!$aõŒ›∑¥ÎÖ) { $aõŒ›∑¥ÎÖ = $cÜØ∆∫≤ˆú[$döÀªÕÁÌç[1042]]; } else { if (!$cÜØ∆∫≤ˆú[$döÀªÕÁÌç[695]] && isset($aõŒ›∑¥ÎÖ[$döÀªÕÁÌç[1252]])) { $aõŒ›∑¥ÎÖ = $aõŒ›∑¥ÎÖ[$döÀªÕÁÌç[1252]]; } } } return array($döÀªÕÁÌç[1040] => $cÜØ∆∫≤ˆú[$döÀªÕÁÌç[695]], $döÀªÕÁÌç[1042] => $aõŒ›∑¥ÎÖ); goto f†À∂Ü´∫‡; f†À∂Ü´∫‡: } public function mkfile($DÉØ’•Ïª¢, $DûìËáÕ≥ª = '', $EŸÉﬁ›ãÑ = REPEAT_RENAME) { if ($this->setContent($DÉØ’•Ïª¢, $DûìËáÕ≥ª)) { return $this->getPathOuter($DÉØ’•Ïª¢); } return !1; } public function mkdir($Dœ—üÒÀó÷, $d◊•”‡Ü„â = REPEAT_SKIP) { $C„ÈúÒ‹ˆ‰ =& $_SERVER[áí∂¯Â¸Áò]; $BÎ±à¬÷îá = trim($Dœ—üÒÀó÷, $C„ÈúÒ‹ˆ‰[8]); if ($this->_isFolder($BÎ±à¬÷îá)) { return $this->getPathOuter($BÎ±à¬÷îá); } $EÇŸôúÿúµ = array($C„ÈúÒ‹ˆ‰[1253]); $aå⁄ü°€Â¡ = $this->ussRequest($BÎ±à¬÷îá, $C„ÈúÒ‹ˆ‰[216], !1, $EÇŸôúÿúµ); return $aå⁄ü°€Â¡[$C„ÈúÒ‹ˆ‰[1040]] ? $this->getPathOuter($BÎ±à¬÷îá) : !1; } public function copyFile($C–∑ôÔï•í, $eêˆêî ÌΩ) { $cﬂî÷∆≈å⁄ =& $_SERVER[áí∂¯Â¸Áò]; $fÚ„¶õ‘ä” = array($cﬂî÷∆≈å⁄[1254] . "\57{$this->bucket}\x2f{$C–∑ôÔï•í}", $cﬂî÷∆≈å⁄[1255]); $Aª•ôïÚÙò = $this->ussRequest($eêˆêî ÌΩ, $cﬂî÷∆≈å⁄[218], !1, $fÚ„¶õ‘ä”); return $Aª•ôïÚÙò[$cﬂî÷∆≈å⁄[1040]] ? !0 : $this->getPathOuter($eêˆêî ÌΩ); } public function moveFile($C∫§À…”ÏΩ, $eõ∫±í•œ·) { $fîØÖé£◊È =& $_SERVER[áí∂¯Â¸Áò]; $eêàÃ¨¿‘À = array($fîØÖé£◊È[1256] . "\x2f{$this->bucket}\57{$C∫§À…”ÏΩ}", $fîØÖé£◊È[1255]); $DíáÉ…Ÿ‹î = $this->ussRequest($eõ∫±í•œ·, $fîØÖé£◊È[218], !1, $eêàÃ¨¿‘À); return $DíáÉ…Ÿ‹î[$fîØÖé£◊È[1040]] ? !0 : $this->getPathOuter($eõ∫±í•œ·); } public function delFile($b≥–éâÙ˘™) { $bÆÖÓ∫ü“á =& $_SERVER[áí∂¯Â¸Áò]; $A≈“°Á∞”õ = $this->ussRequest($b≥–éâÙ˘™, $bÆÖÓ∫ü“á[1257]); return $A≈“°Á∞”õ[$bÆÖÓ∫ü“á[1040]] ? !0 : !1; } public function delFolder($DÑºÒŒ›≥Û) { $aÉæ∫πÊ‘§ =& $_SERVER[áí∂¯Â¸Áò]; $C‰ˆ¡…ä≈‹ = $this->listAll($DÑºÒŒ›≥Û); krsort($C‰ˆ¡…ä≈‹); foreach ($C‰ˆ¡…ä≈‹ as $B˜ÜØ∫≠›ç) { $this->ussRequest($B˜ÜØ∫≠›ç[$aÉæ∫πÊ‘§[75]], $aÉæ∫πÊ‘§[1257]); } return $this->ussRequest($DÑºÒŒ›≥Û, $aÉæ∫πÊ‘§[1257]); } public function rename($eÛ¨‹ë”Æ≤, $bã”ñ“ﬂÊ˜) { if ($this->isFile($eÛ¨‹ë”Æ≤)) { $bã”ñ“ﬂÊ˜ = get_path_father($eÛ¨‹ë”Æ≤) . $bã”ñ“ﬂÊ˜; return $this->moveFile($eÛ¨‹ë”Æ≤, $bã”ñ“ﬂÊ˜); } return $this->renameObject($eÛ¨‹ë”Æ≤, $bã”ñ“ﬂÊ˜); } public function fileInfo($D– €∏ø¿®, $Fä‰Àûπä≠ = false, $EÎêßÜ«ï¿ = array()) { $B°‹°ÍÖà• =& $_SERVER[áí∂¯Â¸Áò]; if ($Fä‰Àûπä≠) { return array($B°‹°ÍÖà•[28] => $this->pathThis($D– €∏ø¿®), $B°‹°ÍÖà•[75] => $this->getPathOuter($B°‹°ÍÖà•[8] . $D– €∏ø¿®), $B°‹°ÍÖà•[29] => $B°‹°ÍÖà•[171], $B°‹°ÍÖà•[77] => isset($EÎêßÜ«ï¿[$B°‹°ÍÖà•[329]]) ? $EÎêßÜ«ï¿[$B°‹°ÍÖà•[329]] : 0, $B°‹°ÍÖà•[165] => $this->ext($D– €∏ø¿®)); } $C§¿—ä∫ä˜ = array($B°‹°ÍÖà•[28] => $this->pathThis($D– €∏ø¿®), $B°‹°ÍÖà•[75] => $this->getPathOuter($B°‹°ÍÖà•[8] . $D– €∏ø¿®), $B°‹°ÍÖà•[29] => $B°‹°ÍÖà•[171], $B°‹°ÍÖà•[191] => 0, $B°‹°ÍÖà•[107] => isset($Cä¿çìÔ∑—[$B°‹°ÍÖà•[1258]]) ? $Cä¿çìÔ∑—[$B°‹°ÍÖà•[1258]] : 0, $B°‹°ÍÖà•[77] => isset($EÎêßÜ«ï¿[$B°‹°ÍÖà•[329]]) ? $EÎêßÜ«ï¿[$B°‹°ÍÖà•[329]] : 0, $B°‹°ÍÖà•[165] => $this->ext($D– €∏ø¿®), $B°‹°ÍÖà•[192] => !0, $B°‹°ÍÖà•[193] => !0); if (empty($EÎêßÜ«ï¿)) { $EÎêßÜ«ï¿ = $this->objectMeta($D– €∏ø¿®); if (!$EÎêßÜ«ï¿) { return $C§¿—ä∫ä˜; } $C§¿—ä∫ä˜[$B°‹°ÍÖà•[191]] = $EÎêßÜ«ï¿[$B°‹°ÍÖà•[1259]]; $C§¿—ä∫ä˜[$B°‹°ÍÖà•[107]] = $EÎêßÜ«ï¿[$B°‹°ÍÖà•[1260]]; $C§¿—ä∫ä˜[$B°‹°ÍÖà•[77]] = $EÎêßÜ«ï¿[$B°‹°ÍÖà•[77]]; } return $C§¿—ä∫ä˜; } public function folderInfo($e©ˆ√©É Û, $AìÇ…ú£Ïç = false) { $a«÷ÿ±Â—ä =& $_SERVER[áí∂¯Â¸Áò]; if ($AìÇ…ú£Ïç) { return array($a«÷ÿ±Â—ä[28] => $this->pathThis($e©ˆ√©É Û), $a«÷ÿ±Â—ä[75] => $this->getPathOuter($a«÷ÿ±Â—ä[8] . $e©ˆ√©É Û), $a«÷ÿ±Â—ä[29] => $a«÷ÿ±Â—ä[76]); } $Dèùè’Ì√⁄ = array($a«÷ÿ±Â—ä[28] => $this->pathThis($e©ˆ√©É Û), $a«÷ÿ±Â—ä[75] => $this->getPathOuter($a«÷ÿ±Â—ä[8] . $e©ˆ√©É Û), $a«÷ÿ±Â—ä[29] => $a«÷ÿ±Â—ä[76], $a«÷ÿ±Â—ä[191] => 0, $a«÷ÿ±Â—ä[107] => isset($CÇÃ¶£·çû[$a«÷ÿ±Â—ä[1258]]) ? $CÇÃ¶£·çû[$a«÷ÿ±Â—ä[1258]] : 0, $a«÷ÿ±Â—ä[1169] => !0, $a«÷ÿ±Â—ä[1170] => !0); if (empty($a±Ã∂ÌòÔ–)) { $a±Ã∂ÌòÔ– = $this->objectMeta($e©ˆ√©É Û); if (!$a±Ã∂ÌòÔ–) { return $Dèùè’Ì√⁄; } $Dèùè’Ì√⁄[$a«÷ÿ±Â—ä[191]] = $a±Ã∂ÌòÔ–[$a«÷ÿ±Â—ä[1259]]; $Dèùè’Ì√⁄[$a«÷ÿ±Â—ä[107]] = $a±Ã∂ÌòÔ–[$a«÷ÿ±Â—ä[1260]]; } return $Dèùè’Ì√⁄; } private function fileList($Cê„ÚßüŸ¢, $fïœê˜Î¿’ = 0, $Bïñô∆Ω‹ê = 1000) { $a…ò®Ïá™¬ =& $_SERVER[áí∂¯Â¸Áò]; $Aá ïéˆÒë = array($a…ò®Ïá™¬[1261], $a…ò®Ïá™¬[1262] . $Bïñô∆Ω‹ê); if ($fïœê˜Î¿’) { $Aá ïéˆÒë[] = $a…ò®Ïá™¬[1263] . $fïœê˜Î¿’; } $d¡è»õ÷À« = $this->ussRequest($Cê„ÚßüŸ¢, $a…ò®Ïá™¬[220], !1, $Aá ïéˆÒë); return !$d¡è»õ÷À«[$a…ò®Ïá™¬[1040]] ? !1 : $d¡è»õ÷À«[$a…ò®Ïá™¬[1042]]; } public function listPath($e¿≠ÕÔêèÉ, $dê∫åîìŒ‹ = false) { goto d‰àå‰Ùﬁª; d‰àå‰Ùﬁª: $d˜Ÿ©Á‰¥ë =& $_SERVER[áí∂¯Â¸Áò]; $D—Òôπ¿⁄ÿ = $d˜Ÿ©Á‰¥ë[33]; $BïÊ πıÊÔ = 1000; goto cñ˜√Òÿ∫Ω; cñ˜√Òÿ∫Ω: $B√ëŸ”ïÉ∂ = $Dœ„‚èãÌ› = array(); $b∏ñ¢úèÙ™ = rtrim($e¿≠ÕÔêèÉ, $d˜Ÿ©Á‰¥ë[8]) . $d˜Ÿ©Á‰¥ë[8]; while (!0) { $B†¡ãªá¶è = $this->fileList($e¿≠ÕÔêèÉ, $D—Òôπ¿⁄ÿ, $BïÊ πıÊÔ); if (!$B†¡ãªá¶è) { return !1; } $D—Òôπ¿⁄ÿ = isset($B†¡ãªá¶è[$d˜Ÿ©Á‰¥ë[1264]]) ? $B†¡ãªá¶è[$d˜Ÿ©Á‰¥ë[1264]] : $d˜Ÿ©Á‰¥ë[33]; $aÓó’ì∫Ω† = isset($B†¡ãªá¶è[$d˜Ÿ©Á‰¥ë[1265]]) ? $B†¡ãªá¶è[$d˜Ÿ©Á‰¥ë[1265]] : array(); foreach ($aÓó’ì∫Ω† as $D∆®ÁéÉ¡„) { if ($D∆®ÁéÉ¡„[$d˜Ÿ©Á‰¥ë[29]] == $d˜Ÿ©Á‰¥ë[76]) { $B√ëŸ”ïÉ∂[] = $this->folderInfo($b∏ñ¢úèÙ™ . $D∆®ÁéÉ¡„[$d˜Ÿ©Á‰¥ë[28]], $dê∫åîìŒ‹, $D∆®ÁéÉ¡„); } else { $Dœ„‚èãÌ›[] = $this->fileInfo($b∏ñ¢úèÙ™ . $D∆®ÁéÉ¡„[$d˜Ÿ©Á‰¥ë[28]], $dê∫åîìŒ‹, $D∆®ÁéÉ¡„); } } if (count($aÓó’ì∫Ω†) < $BïÊ πıÊÔ) { break; } } goto FãÖÖÍÃ…ø; FãÖÖÍÃ…ø: return array($d˜Ÿ©Á‰¥ë[74] => $B√ëŸ”ïÉ∂, $d˜Ÿ©Á‰¥ë[73] => $Dœ„‚èãÌ›); goto Fì‹Ÿ˜éıØ; Fì‹Ÿ˜éıØ: } private function recursionAllFiles($D™Ø¬âñæö, &$f ¡ùà¬˘¬) { $BÇÊÛúÕÏê =& $_SERVER[áí∂¯Â¸Áò]; $a¶úäÃê∏ = $BÇÊÛúÕÏê[33]; $fßÑ∆¶‰†å = 1000; $E√™¡¢›ü≠ = $AèÎÁ∂®ÛÜ = array(); $CæÈÂÍ¶≥√ = rtrim($D™Ø¬âñæö, $BÇÊÛúÕÏê[8]) . $BÇÊÛúÕÏê[8]; while (!0) { $b±ÑÚÚ„£ƒ = $this->fileList($D™Ø¬âñæö, $a¶úäÃê∏, $fßÑ∆¶‰†å); if (!$b±ÑÚÚ„£ƒ) { return !1; } $a¶úäÃê∏ = isset($b±ÑÚÚ„£ƒ[$BÇÊÛúÕÏê[1264]]) ? $b±ÑÚÚ„£ƒ[$BÇÊÛúÕÏê[1264]] : $BÇÊÛúÕÏê[33]; $BÁúÌÖáÀã = isset($b±ÑÚÚ„£ƒ[$BÇÊÛúÕÏê[1265]]) ? $b±ÑÚÚ„£ƒ[$BÇÊÛúÕÏê[1265]] : array(); foreach ($BÁúÌÖáÀã as $bÓà≈∫•âé) { $b‘ ËÊ∏öè = array($BÇÊÛúÕÏê[75] => $CæÈÂÍ¶≥√ . $bÓà≈∫•âé[$BÇÊÛúÕÏê[28]], $BÇÊÛúÕÏê[76] => $bÓà≈∫•âé[$BÇÊÛúÕÏê[29]] == $BÇÊÛúÕÏê[76] ? 1 : 0, $BÇÊÛúÕÏê[77] => isset($bÓà≈∫•âé[$BÇÊÛúÕÏê[329]]) ? $bÓà≈∫•âé[$BÇÊÛúÕÏê[329]] : 0); $f ¡ùà¬˘¬[] = $b‘ ËÊ∏öè; if ($b‘ ËÊ∏öè[$BÇÊÛúÕÏê[76]] == 1) { $this->recursionAllFiles($b‘ ËÊ∏öè[$BÇÊÛúÕÏê[75]], $f ¡ùà¬˘¬); } } if (count($BÁúÌÖáÀã) < $fßÑ∆¶‰†å) { break; } } } public function has($b‰ˆá‘»éø, $bÁåÆõ∞ñ = false, $D⁄¡¡™Âã∏ = true) { goto fŒ≈¶É‘‹›; fŒ≈¶É‘‹›: $D≤» ŒÜ∂ç =& $_SERVER[áí∂¯Â¸Áò]; $cºîèﬂíü  = $D≤» ŒÜ∂ç[33]; $aôÆÎ•ù∆¬ = 1000; goto C •Ûò÷å¬; Aã¿Íò‹ãô: while (!0) { $aÉ√ûí€± = $this->fileList($b‰ˆá‘»éø, $cºîèﬂíü , $aôÆÎ•ù∆¬); if (!$aÉ√ûí€±) { return !1; } $cºîèﬂíü  = isset($aÉ√ûí€±[$D≤» ŒÜ∂ç[1264]]) ? $aÉ√ûí€±[$D≤» ŒÜ∂ç[1264]] : $D≤» ŒÜ∂ç[33]; $D—ﬂ’ÀœÇŒ = isset($aÉ√ûí€±[$D≤» ŒÜ∂ç[1265]]) ? $aÉ√ûí€±[$D≤» ŒÜ∂ç[1265]] : array(); if (empty($D—ﬂ’ÀœÇŒ)) { break; } $aﬁÛ¯è±Â∫ = array_to_keyvalue($D—ﬂ’ÀœÇŒ, $D≤» ŒÜ∂ç[33], $D≤» ŒÜ∂ç[29]); $Bé•ÒÇ£∆≠ = array_count_values($aﬁÛ¯è±Â∫); $D™Êâ‚∫èﬁ = isset($Bé•ÒÇ£∆≠[$D≤» ŒÜ∂ç[76]]) ? $Bé•ÒÇ£∆≠[$D≤» ŒÜ∂ç[76]] : 0; $a“®¿àóØ = count($aﬁÛ¯è±Â∫) - $D™Êâ‚∫èﬁ; if ($bÁåÆõ∞ñ) { $DÆôÓ≈‘≥ó += $D™Êâ‚∫èﬁ; $E—æπïÃ˜≤ += $a“®¿àóØ; if ($A∑Ú°õÑıé < $aôÆÎ•ù∆¬) { break; } continue; } if ($D⁄¡¡™Âã∏) { if ($a“®¿àóØ) { return !0; } } else { if ($D™Êâ‚∫èﬁ) { return !0; } } if (count($D—ﬂ’ÀœÇŒ) < $aôÆÎ•ù∆¬) { break; } } if ($bÁåÆõ∞ñ) { return array($D≤» ŒÜ∂ç[195] => $E—æπïÃ˜≤, $D≤» ŒÜ∂ç[196] => $DÆôÓ≈‘≥ó); } return !1; goto a·ø≥ñÌÂä; C •Ûò÷å¬: $E—æπïÃ˜≤ = 0; $DÆôÓ≈‘≥ó = 0; $dÆÛ∆”ˆ¬© = rtrim($b‰ˆá‘»éø, $D≤» ŒÜ∂ç[8]) . $D≤» ŒÜ∂ç[8]; goto Aã¿Íò‹ãô; a·ø≥ñÌÂä: } public function listAll($bœ‹Ú˜Ç„∏) { $c—‘ø⁄øÍ© = array(); $this->recursionAllFiles($bœ‹Ú˜Ç„∏, $c—‘ø⁄øÍ©); return $c—‘ø⁄øÍ©; } public function canRead($D’Èÿ£Õ¥Ú) { return $this->exist($D’Èÿ£Õ¥Ú) ? !0 : !1; } public function canWrite($bÇËÆäπç) { return $this->exist($bÇËÆäπç) ? !0 : !1; } public function getContent($eµêæÇÿù) { return $this->fileSubstr($eµêæÇÿù, 0, -1); } public function setContent($d∂∏¿≥é¥®, $Bã¶ˆ¶“èó = '') { $DâÊ˘àÇÀë =& $_SERVER[áí∂¯Â¸Áò]; if (!$Bã¶ˆ¶“èó) { $fı¿ê±ú≠È = $this->ussRequest($d∂∏¿≥é¥®, $DâÊ˘àÇÀë[216]); return $fı¿ê±ú≠È[$DâÊ˘àÇÀë[1040]]; } $Bæõ€ƒ“í∑ = $this->tempFile($this->pathThis($d∂∏¿≥é¥®)); file_put_contents($Bæõ€ƒ“í∑, $Bã¶ˆ¶“èó); if ($this->upload($d∂∏¿≥é¥®, $Bæõ€ƒ“í∑)) { $this->tempFileRemve($Bæõ€ƒ“í∑); return !0; } return !1; } public function fileSubstr($bëüäÀÈ©‹, $AÕäà–ãΩˆ, $e√¶—åä‚”) { $fäè¿‘œªı =& $_SERVER[áí∂¯Â¸Áò]; if (!($Cﬂ™ÂëÕóã = $this->link($bëüäÀÈ©‹))) { return !1; } $aÓ€Íﬂ∑—ı = !1; if ($e√¶—åä‚” > 0) { $A‰·úÙØéë = $AÕäà–ãΩˆ + $e√¶—åä‚” - 1; $aÓ€Íﬂ∑—ı = array($fäè¿‘œªı[1226] . $AÕäà–ãΩˆ . $fäè¿‘œªı[424] . $A‰·úÙØéë); } $aÃÙàÈÉÛﬂ = url_request($Cﬂ™ÂëÕóã, $fäè¿‘œªı[220], !1, $aÓ€Íﬂ∑—ı); return $aÃÙàÈÉÛﬂ[$fäè¿‘œªı[695]] ? $aÃÙàÈÉÛﬂ[$fäè¿‘œªı[1042]] : !1; } public function upload($d∏à‰°œ≠ﬁ, $a•ë´¥î˜Ö, $cÖŒ˘™ø§Ó = false, $C’¡úä»±à = REPEAT_REPLACE) { goto dß’ùƒ…Úó; Cﬂ˘ê≥öﬂÿ: do { $få‚‚ñ≥ã† = $BÎå°Æ€‹Ã[$aÑ≤ƒ˘£È[1272]]; fseek_64($BãΩÕÁ–îã, $cÀôÍàˆô§); $bâ⁄ãø¿Çê = fread($BãΩÕÁ–îã, $få‚‚ñ≥ã†); $aäê¬ﬂÙ¥£ = 0; do { $aäê¬ﬂÙ¥£++; $BÎå°Æ€‹Ã = $this->uploadPart($d∏à‰°œ≠ﬁ, $BÎå°Æ€‹Ã, $bâ⁄ãø¿Çê); } while (!$BÎå°Æ€‹Ã && $aäê¬ﬂÙ¥£ < 3); if (!$BÎå°Æ€‹Ã) { return !1; } $B…ˆ˘‘ÂÃØ = $BÎå°Æ€‹Ã[$aÑ≤ƒ˘£È[1271]]; $cÀôÍàˆô§ += $få‚‚ñ≥ã†; } while ($B…ˆ˘‘ÂÃØ != -1); fclose($BãΩÕÁ–îã); $DùÍââ€ñ® = array($aÑ≤ƒ˘£È[1273], $aÑ≤ƒ˘£È[1274] . $BÎå°Æ€‹Ã[$aÑ≤ƒ˘£È[1275]], $aÑ≤ƒ˘£È[1269]); goto CÊ˜Ü˘¢ﬂ£; dÉßƒ®ô€Ã: $FÁ‰πÓç‹Ú = 1024 * 1024 * 10; $DùÍââ€ñ® = array($aÑ≤ƒ˘£È[1267], $aÑ≤ƒ˘£È[1268] . $F“ΩäÍµâì, $aÑ≤ƒ˘£È[1269], $aÑ≤ƒ˘£È[1270] . $FÁ‰πÓç‹Ú); $eåÏÒƒ´È = $this->ussRequest($d∏à‰°œ≠ﬁ, $aÑ≤ƒ˘£È[218], !1, $DùÍââ€ñ®); goto b≥û≤ÜËµæ; d£¶Ãñ†›¿: $B…ˆ˘‘ÂÃØ = $BÎå°Æ€‹Ã[$aÑ≤ƒ˘£È[1271]]; $BãΩÕÁ–îã = fopen($a•ë´¥î˜Ö, $aÑ≤ƒ˘£È[1176]); if (!$BãΩÕÁ–îã) { return !1; } goto Cﬂ˘ê≥öﬂÿ; b≥û≤ÜËµæ: if (!$eåÏÒƒ´È[$aÑ≤ƒ˘£È[1040]]) { return !1; } $BÎå°Æ€‹Ã = $eåÏÒƒ´È[$aÑ≤ƒ˘£È[1042]]; $cÀôÍàˆô§ = 0; goto d£¶Ãñ†›¿; CÊ˜Ü˘¢ﬂ£: $eåÏÒƒ´È = $this->ussRequest($d∏à‰°œ≠ﬁ, $aÑ≤ƒ˘£È[218], !1, $DùÍââ€ñ®); return $eåÏÒƒ´È[$aÑ≤ƒ˘£È[1040]] ? $this->getPathOuter($a—û≥ï•Ç) : !1; goto A‹Âà¡·Éß; dß’ùƒ…Úó: $aÑ≤ƒ˘£È =& $_SERVER[áí∂¯Â¸Áò]; $F“ΩäÍµâì = IO::size($a•ë´¥î˜Ö); if ($F“ΩäÍµâì <= 1024 * 1024 * 200) { $C†´º›Üº“ = array($aÑ≤ƒ˘£È[1266] . $a•ë´¥î˜Ö); $eåÏÒƒ´È = $this->ussRequest($d∏à‰°œ≠ﬁ, $aÑ≤ƒ˘£È[218], $C†´º›Üº“); return $eåÏÒƒ´È[$aÑ≤ƒ˘£È[1040]] ? $this->getPathOuter($d∏à‰°œ≠ﬁ) : !1; } goto dÉßƒ®ô€Ã; A‹Âà¡·Éß: } private function uploadPart($AáØ–áªêÀ, $Eû–‡¬æÃÉ, &$FÕôË∞ÿ˜ã) { $Aºä«Ç€û« =& $_SERVER[áí∂¯Â¸Áò]; $A≤≈™ê‚…’ = array($Aºä«Ç€û«[1276], $Aºä«Ç€û«[1274] . $Eû–‡¬æÃÉ[$Aºä«Ç€û«[1275]], $Aºä«Ç€û«[1277] . $Eû–‡¬æÃÉ[$Aºä«Ç€û«[1271]], $Aºä«Ç€û«[138] . $Eû–‡¬æÃÉ[$Aºä«Ç€û«[1272]]); $fÒ≈ù Çàû = $this->ussRequest($AáØ–áªêÀ, $Aºä«Ç€û«[218], $FÕôË∞ÿ˜ã, $A≤≈™ê‚…’); return !$fÒ≈ù Çàû[$Aºä«Ç€û«[1040]] ? $fÒ≈ù Çàû[$Aºä«Ç€û«[1040]] : $fÒ≈ù Çàû[$Aºä«Ç€û«[1042]]; } public function uploadFormData($aﬂ¯ûÜ≥ÜÇ, $D≥‰ˆÊƒ—ı = 3600) { return $this->uploadPolicy($aﬂ¯ûÜ≥ÜÇ, $D≥‰ˆÊƒ—ı); } public function multiUploadFormData($B≠äÕ∫∫°É, $d¨âç∆“»  = 3600) { $DÚÕ∫˘âëˆ =& $_SERVER[áí∂¯Â¸Áò]; $BûùÇÂÛæá = (int) $GLOBALS[$DÚÕ∫˘âëˆ[7]][$DÚÕ∫˘âëˆ[77]]; return $this->uploadPolicy($B≠äÕ∫∫°É, $d¨âç∆“» , $BûùÇÂÛæá); } private function uploadPolicy($Dª·¨Ò™Ü·, $aÀÜúõ’“≤ = 3600, $cÇÉåøÙå§ = 0) { goto aΩÕ˜ŸÑâã; fÖô˜Õ‘ÌÒ: $A“éÌ—‡º≠ = array($c±ëß÷æå‘[1278] => $this->bucket, $c±ëß÷æå‘[1279] => $Dª·¨Ò™Ü·, $c±ëß÷æå‘[1280] => time() + $aÀÜúõ’“≤, $c±ëß÷æå‘[1281] => $dÛë¢ﬂı£€); if ($cÇÉåøÙå§) { $A“éÌ—‡º≠[$c±ëß÷æå‘[1198]] = $cÇÉåøÙå§; } $eåéØêôÉ÷ = base64_encode(json_encode($A“éÌ—‡º≠)); goto FÆíû∑êîà; FÆíû∑êîà: $Aﬁœ¶œå• = base64_encode(hash_hmac($c±ëß÷æå‘[1248], "\120\117\123\124\46{$bçøñÕ÷ì®}\46{$dÛë¢ﬂı£€}\46{$eåéØêôÉ÷}", md5("{$this->userpass}"), !0)); $B˜≤û∂…ÿÿ = array($c±ëß÷æå‘[1119] => $eåéØêôÉ÷, $c±ëß÷æå‘[1282] => "\x55\x50\131\x55\x4e\40{$this->username}\72{$Aﬁœ¶œå•}", $c±ëß÷æå‘[173] => $this->endpoint . $bçøñÕ÷ì®); return $B˜≤û∂…ÿÿ; goto B∆ú’â¯åé; aΩÕ˜ŸÑâã: $c±ëß÷æå‘ =& $_SERVER[áí∂¯Â¸Áò]; $bçøñÕ÷ì® = $c±ëß÷æå‘[8] . $this->bucket; $dÛë¢ﬂı£€ = gmdate($c±ëß÷æå‘[1212]); goto fÖô˜Õ‘ÌÒ; B∆ú’â¯åé: } public function download($E‘ﬁÏÉŒ·ê, $aƒÊïÕ´Áç) { goto D∏·é§ç˘; D•Í ƒ˜©Ô: fclose($eåØÏ„’ïõ); return $aƒÊïÕ´Áç; goto fÈ≠ñ∏ﬂ°∞; fèà€£ŒÜ: $eıÇÇäÿı∂ = 1024 * 200; $eåØÏ„’ïõ = fopen($eå“ë¿Œœü, $_SERVER[áí∂¯Â¸Áò][1232]); while (!0) { $Fè–™ïíË† = $this->fileSubstr($E‘ﬁÏÉŒ·ê, $bò‡¿êÍƒä, $eıÇÇäÿı∂); if ($Fè–™ïíË† === !1) { return !1; } fwrite($eåØÏ„’ïõ, $Fè–™ïíË†); $bò‡¿êÍƒä += $eıÇÇäÿı∂; if (strlen($Fè–™ïíË†) < $eıÇÇäÿı∂) { break; } } goto D•Í ƒ˜©Ô; D∏·é§ç˘: $eå“ë¿Œœü = IO::getPathInner(IO::mkfile($aƒÊïÕ´Áç)); if (!($BÂÜ≤¿°Çı = $this->link($E‘ﬁÏÉŒ·ê))) { return !1; } $bò‡¿êÍƒä = 0; goto fèà€£ŒÜ; fÈ≠ñ∏ﬂ°∞: } public function link($bêË¡ïƒÛ§, $B¢»åˆ≤µΩ = array()) { $aî◊åããëã =& $_SERVER[áí∂¯Â¸Áò]; $bêË¡ïƒÛ§ = trim($bêË¡ïƒÛ§, $aî◊åããëã[8]); if (!empty($this->token)) { $EﬂŒ·ƒÊàﬁ = strtotime(date($aî◊åããëã[1283])); $D¢µŸö∂ëù = substr(md5($this->token . $aî◊åããëã[276] . $EﬂŒ·ƒÊàﬁ . $aî◊åããëã[1284] . $bêË¡ïƒÛ§), 12, 8) . $EﬂŒ·ƒÊàﬁ; $B¢»åˆ≤µΩ[] = $aî◊åããëã[1285] . $D¢µŸö∂ëù; } $B€Ü¿∫±◊ÿ = !empty($B¢»åˆ≤µΩ) ? $aî◊åããëã[69] . implode($aî◊åããëã[276], $B¢»åˆ≤µΩ) : $aî◊åããëã[33]; return $this->getHost() . $aî◊åããëã[8] . $bêË¡ïƒÛ§ . $B€Ü¿∫±◊ÿ; } public function fileOut($bÎÈûú„◊¢, $b‚ÖÑÍ≤œ… = false, $BÎê„œﬁÑÑ = false, $Cß ±ü√ã– = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($bÎÈûú„◊¢, $b‚ÖÑÍ≤œ…, $BÎê„œﬁÑÑ, $Cß ±ü√ã–); } if (!$BÎê„œﬁÑÑ) { $BÎê„œﬁÑÑ = $this->pathThis($bÎÈûú„◊¢); } $b∆ÙÜÒÍ‡˘ = $b‚ÖÑÍ≤œ… ? array($_SERVER[áí∂¯Â¸Áò][1286] . rawurlencode($BÎê„œﬁÑÑ)) : array(); $aëÚÂâœÙ… = $this->link($bÎÈûú„◊¢, $b∆ÙÜÒÍ‡˘); $this->fileOutLink($aëÚÂâœÙ…); } public function fileOutServer($dÆ∫ÆàŸ§Ë, $F—Ÿ∞∂¶≤∞ = false, $c±ªæè‘ÓÃ = false, $f®∏≤íÉ≠æ = '') { parent::fileOut($dÆ∫ÆàŸ§Ë, $F—Ÿ∞∂¶≤∞, $c±ªæè‘ÓÃ, $f®∏≤íÉ≠æ); } public function fileOutImage($d®ƒº†ø≥´, $AÆ≥êÜÕ⁄— = 250) { $f÷ëºÈ‚·Á = $this->link($d®ƒº†ø≥´ . $_SERVER[áí∂¯Â¸Áò][1287] . $AÆ≥êÜÕ⁄—); $this->fileOutLink($f÷ëºÈ‚·Á); } public function fileOutImageServer($cÓäŸû”≈, $DÃµ¬≈“§° = 250) { parent::fileOutImage($cÓäŸû”≈, $DÃµ¬≈“§°); } public function hashMd5($e™û¢Æ©®Ê) { $FÇáè˘◊ùå =& $_SERVER[áí∂¯Â¸Áò]; $a°ŒöÀºÙ« = $this->objectMeta($e™û¢Æ©®Ê); return isset($a°ŒöÀºÙ«[$FÇáè˘◊ùå[200]]) ? $a°ŒöÀºÙ«[$FÇáè˘◊ùå[200]] : !1; } public function size($a§ÖÜÇ´Èæ) { $AüÒ≥¨ıö• = $this->objectMeta($a§ÖÜÇ´Èæ); return $AüÒ≥¨ıö• ? $AüÒ≥¨ıö•[$_SERVER[áí∂¯Â¸Áò][77]] : 0; } public function info($e∆Õé£áÖ÷) { if ($this->isFolder($e∆Õé£áÖ÷)) { return $this->folderInfo($e∆Õé£áÖ÷); } else { if ($this->isFile($e∆Õé£áÖ÷)) { return $this->fileInfo($e∆Õé£áÖ÷); } } return !1; } public function exist($AäòπÂ∞Öö) { return $this->isFile($AäòπÂ∞Öö) || $this->isFolder($AäòπÂ∞Öö); } public function isFile($C›§Õ™≤∞¿) { return !$this->isFolder($C›§Õ™≤∞¿) && $this->objectMeta($C›§Õ™≤∞¿); } public function isFolder($b∏¶ö‚È¶ø) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][227], $b∏¶ö‚È¶ø); } protected function objectMeta($f∏àÒŸ¬›º) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][228], $f∏àÒŸ¬›º); } protected function _objectMeta($e◊—àã∏®á) { goto Cç™ó∂∑©û; e¢É—ÈÑ⁄°: $e‡ı°ÇÌ¨Ó = array($b—ıÎÖÔ≥•[28] => get_path_this($e◊—àã∏®á), $b—ıÎÖÔ≥•[29] => isset($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1289]]) ? $fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1289]] : null, $b—ıÎÖÔ≥•[77] => isset($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1290]]) ? $fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1290]] : null, $b—ıÎÖÔ≥•[200] => isset($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1291]]) ? $fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1291]] : null, $b—ıÎÖÔ≥•[1259] => isset($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1292]]) ? $fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1292]] : null); $e‡ı°ÇÌ¨Ó[$b—ıÎÖÔ≥•[1260]] = isset($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1293]]) ? strtotime($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1293]]) : $e‡ı°ÇÌ¨Ó[$b—ıÎÖÔ≥•[1259]]; return $e‡ı°ÇÌ¨Ó; goto dÎøíÇŒë; D—îº©ñª”: if (!$EÓ∏˜ÛΩ—ó[$b—ıÎÖÔ≥•[1040]]) { return null; } $fî™ë‹Á¬à = isset($EÓ∏˜ÛΩ—ó[$b—ıÎÖÔ≥•[1042]]) ? $EÓ∏˜ÛΩ—ó[$b—ıÎÖÔ≥•[1042]] : array(); if (!isset($fî™ë‹Á¬à[$b—ıÎÖÔ≥•[1289]])) { return null; } goto e¢É—ÈÑ⁄°; Cç™ó∂∑©û: $b—ıÎÖÔ≥• =& $_SERVER[áí∂¯Â¸Áò]; if ($e◊—àã∏®á == $b—ıÎÖÔ≥•[33] || $e◊—àã∏®á == $b—ıÎÖÔ≥•[8]) { return array(); } $EÓ∏˜ÛΩ—ó = $this->ussRequest($e◊—àã∏®á, $b—ıÎÖÔ≥•[1288]); goto D—îº©ñª”; dÎøíÇŒë: } protected function _isFolder($b‚ßÕ‘„Óﬁ) { $c≈¢Êòà‡∏ =& $_SERVER[áí∂¯Â¸Áò]; if ($b‚ßÕ‘„Óﬁ == $c≈¢Êòà‡∏[33] || $b‚ßÕ‘„Óﬁ == $c≈¢Êòà‡∏[8]) { return !0; } $f´ê„äÀ‹◊ = $this->objectMeta($b‚ßÕ‘„Óﬁ); return isset($f´ê„äÀ‹◊[$c≈¢Êòà‡∏[29]]) && $f´ê„äÀ‹◊[$c≈¢Êòà‡∏[29]] == $c≈¢Êòà‡∏[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($c≠¨ñêÌı‹ = false) { } public function exist($e†õ…ÙÏá¿) { $c§ƒüÏ•≠€ = $this->info($e†õ…ÙÏá¿); return $c§ƒüÏ•≠€[$_SERVER[áí∂¯Â¸Áò][192]]; } public function isFile($cªÕ˜áŸ»ê) { $b§ïá–úëß = $this->info($cªÕ˜áŸ»ê); return $b§ïá–úëß[$_SERVER[áí∂¯Â¸Áò][192]]; } public function isFolder($FÍ§ãæ¥è©) { return !1; } public function size($b¢≈àÙ§∑Ü) { $dÒﬂåì¢Ç‡ = $this->info($b¢≈àÙ§∑Ü); return $dÒﬂåì¢Ç‡[$_SERVER[áí∂¯Â¸Áò][77]]; } public function info($cÎ«Öæäøæ) { return $this->infoParse($cÎ«Öæäøæ); } public function infoAuth($d·Î∏äÖ‰ä) { return $this->infoParse($d·Î∏äÖ‰ä); } public function infoWithChildren($C⁄‰¥ãıæÿ) { return $this->infoParse($C⁄‰¥ãıæÿ); } public function infoFull($Füë√∆âõÍ) { return $this->infoParse($Füë√∆âõÍ); } private function infoParse($f«˜ÿ≥¢—Æ) { $EåÎ•›Î‘ô =& $_SERVER[áí∂¯Â¸Áò]; $Cëáà…ô ã = $this->header($f«˜ÿ≥¢—Æ); if (!$Cëáà…ô ã || !$Cëáà…ô ã[$EåÎ•›Î‘ô[695]]) { return !1; } $bÆŸ´∂…≥ = _get($Cëáà…ô ã, $EåÎ•›Î‘ô[329], 0); $EêæÙ¿ëµ = array($EåÎ•›Î‘ô[28] => $Cëáà…ô ã[$EåÎ•›Î‘ô[28]], $EåÎ•›Î‘ô[75] => $f«˜ÿ≥¢—Æ, $EåÎ•›Î‘ô[29] => $EåÎ•›Î‘ô[171], $EåÎ•›Î‘ô[77] => intval($bÆŸ´∂…≥), $EåÎ•›Î‘ô[165] => get_path_ext($Cëáà…ô ã[$EåÎ•›Î‘ô[28]]), $EåÎ•›Î‘ô[1169] => $bÆŸ´∂…≥ > 0 && $Cëáà…ô ã[$EåÎ•›Î‘ô[1294]], $EåÎ•›Î‘ô[1170] => !1); return $EêæÙ¿ëµ; } private function header($b⁄ê§æÛ‚‰) { if (isset(self::$_cacheHeader[$b⁄ê§æÛ‚‰])) { return self::$_cacheHeader[$b⁄ê§æÛ‚‰]; } self::$_cacheHeader[$b⁄ê§æÛ‚‰] = url_header($b⁄ê§æÛ‚‰); return self::$_cacheHeader[$b⁄ê§æÛ‚‰]; } public function hashSimple($cËÃüéÇ¯î, $Eµ∞ÚÑ±íÍ = false) { goto B©ıÎÎ•¿≠; aÌ∏ÖäÈÀ⁄: $eŒ∑˜Ô≤Æ¬ = $f“›òﬂÂ”Ç[$CÒåÂø‚ëÍ[77]]; $B∞ÊÚÔ·•ï = 200; $b–£åŸÑ¢• = 50; goto eõﬂàùÔ≠æ; eõﬂàùÔ≠æ: if ($eŒ∑˜Ô≤Æ¬ <= $B∞ÊÚÔ·•ï * $b–£åŸÑ¢•) { return md5($this->fileSubstr($cËÃüéÇ¯î, 0, $eŒ∑˜Ô≤Æ¬)) . $eŒ∑˜Ô≤Æ¬; } $bµíè·‘ü© = intval($eŒ∑˜Ô≤Æ¬ / $b–£åŸÑ¢•); $C®ﬂª†Ó§ = $CÒåÂø‚ëÍ[33]; goto fö‚ƒãÜÿó; fö‚ƒãÜÿó: $Aî†íéƒÖá = timeFloat(); $Eî¥â≤‡«ã = 15; for ($EÑ˘π’√À = 0; $EÑ˘π’√À < $b–£åŸÑ¢•; $EÑ˘π’√À++) { if (timeFloat() - $Aî†íéƒÖá > $Eî¥â≤‡«ã) { return !1; } $e„¨ÇæÜ‡è = $this->fileSubstr($cËÃüéÇ¯î, $bµíè·‘ü© * $EÑ˘π’√À, $B∞ÊÚÔ·•ï); if (!$e„¨ÇæÜ‡è) { return !1; } $C®ﬂª†Ó§ .= $e„¨ÇæÜ‡è; } goto fúõæóÂâ°; B©ıÎÎ•¿≠: $CÒåÂø‚ëÍ =& $_SERVER[áí∂¯Â¸Áò]; $f“›òﬂÂ”Ç = $this->info($cËÃüéÇ¯î); if (!$f“›òﬂÂ”Ç || !$f“›òﬂÂ”Ç[$CÒåÂø‚ëÍ[192]]) { return !1; } goto aÌ∏ÖäÈÀ⁄; fúõæóÂâ°: $C®ﬂª†Ó§ .= $this->fileSubstr($cËÃüéÇ¯î, $eŒ∑˜Ô≤Æ¬ - $B∞ÊÚÔ·•ï, $B∞ÊÚÔ·•ï); return md5($C®ﬂª†Ó§) . $eŒ∑˜Ô≤Æ¬; goto cß©áú◊öù; cß©áú◊öù: } public function getContent($f¯∏∆†πøû) { return $this->fileSubstr($f¯∏∆†πøû); } public function fileSubstr($d≠¶ÍàÙ„º, $bíó∞éüÑÑ = 0, $dóèœá‹âÕ = -1) { goto f∫§∆å≠ÀÉ; b…™–´®Øº: $C«Ú®Ù‹ñ∆ = url_request($d≠¶ÍàÙ„º, $A÷ªëÑÚé[220], !1, $Eôúﬂ√îÈ„, !1, !1, 1); return $C«Ú®Ù‹ñ∆[$A÷ªëÑÚé[1042]] ? $C«Ú®Ù‹ñ∆[$A÷ªëÑÚé[1042]] : $A÷ªëÑÚé[33]; goto E¥ìâΩ™Œ†; f∫§∆å≠ÀÉ: $A÷ªëÑÚé =& $_SERVER[áí∂¯Â¸Áò]; $AÖ¿´ŒØàÚ = $this->info($d≠¶ÍàÙ„º); if (!$AÖ¿´ŒØàÚ || !$AÖ¿´ŒØàÚ[$A÷ªëÑÚé[192]] && $AÖ¿´ŒØàÚ[$A÷ªëÑÚé[77]] > 1024 * 1024 * 10) { return !1; } goto c√ë„ıÖãÚ; c√ë„ıÖãÚ: if ($dóèœá‹âÕ === -1) { $dóèœá‹âÕ = $AÖ¿´ŒØàÚ[$A÷ªëÑÚé[77]]; } if ($dóèœá‹âÕ == 0) { return $A÷ªëÑÚé[33]; } $Eôúﬂ√îÈ„ = array($A÷ªëÑÚé[1295] . $bíó∞éüÑÑ . $A÷ªëÑÚé[721] . ($bíó∞éüÑÑ + $dóèœá‹âÕ - 1)); goto b…™–´®Øº; E¥ìâΩ™Œ†: } public function download($a˘›µ∆ åƒ, $aÖ⁄Œ£ ™”) { Downloader::start($a˘›µ∆ åƒ, $aÖ⁄Œ£ ™”); return $aÖ⁄Œ£ ™”; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($F—≤¨ §¨ô, $dıçÿ’ë⁄æ = '') { goto cÊö’„áﬂ‹; fÇ◊éÑÁÑ£: return $this->info ? !0 : !1; goto dƒ…ππë≠Ã; cø”ÇÎ¶≤ñ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$F—≤¨ §¨ô])) { self::$_chunkBuffer[$F—≤¨ §¨ô] = array(); } goto fÇ◊éÑÁÑ£; cÊö’„áﬂ‹: $this->info = $this->info($F—≤¨ §¨ô); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[áí∂¯Â¸Áò][75]]; goto cø”ÇÎ¶≤ñ; dƒ…ππë≠Ã: } function stream_read($AÑäŒπÂÁ›) { $aÇŸêßüÚÏ = $this->fileSubstr($this->pose, $AÑäŒπÂÁ›); $this->pose += strlen($aÇŸêßüÚÏ); return $aÇŸêßüÚÏ; } public function stream_tell() { return $this->pose; } public function stream_seek($A◊Ö´ÕúéÌ, $FÒÜä°û«˜) { $a÷ î”•ÿ≤ =& $_SERVER[áí∂¯Â¸Áò]; if ($FÒÜä°û«˜ == SEEK_SET) { $this->pose = $A◊Ö´ÕúéÌ; } else { if ($FÒÜä°û«˜ == SEEK_CUR) { $this->pose += $A◊Ö´ÕúéÌ; } else { if ($FÒÜä°û«˜ == SEEK_END) { $this->pose = $this->info[$a÷ î”•ÿ≤[77]] + intval($A◊Ö´ÕúéÌ); } } } if ($A◊Ö´ÕúéÌ < 0) { $this->pose = $this->info[$a÷ î”•ÿ≤[77]] + $A◊Ö´ÕúéÌ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[áí∂¯Â¸Áò][77]]; } public function stream_close() { return !0; } public function url_stat($aÆÛÊñ√•å, $cÙ±á∆’ﬁÿ) { $Aﬂ≤¯˘∞è◊ =& $_SERVER[áí∂¯Â¸Áò]; $C‚ Ö¥¨ÇÉ = $this->info($aÆÛÊñ√•å); return array($Aﬂ≤¯˘∞è◊[1296] => 0, $Aﬂ≤¯˘∞è◊[1297] => 0, $Aﬂ≤¯˘∞è◊[12] => 32768 + 511, $Aﬂ≤¯˘∞è◊[1298] => 0, $Aﬂ≤¯˘∞è◊[1299] => 0, $Aﬂ≤¯˘∞è◊[1300] => 0, $Aﬂ≤¯˘∞è◊[1301] => 0, $Aﬂ≤¯˘∞è◊[77] => $C‚ Ö¥¨ÇÉ[$Aﬂ≤¯˘∞è◊[77]], $Aﬂ≤¯˘∞è◊[1302] => $C‚ Ö¥¨ÇÉ[$Aﬂ≤¯˘∞è◊[1174]], $Aﬂ≤¯˘∞è◊[1260] => $C‚ Ö¥¨ÇÉ[$Aﬂ≤¯˘∞è◊[107]], $Aﬂ≤¯˘∞è◊[1259] => $C‚ Ö¥¨ÇÉ[$Aﬂ≤¯˘∞è◊[191]], $Aﬂ≤¯˘∞è◊[1303] => 0, $Aﬂ≤¯˘∞è◊[1304] => 0); } static $fileInfo = array(); public function info($f„á°˘ﬁ±ë) { $FÂì¨⁄Ñ—ù = $_SERVER[áí∂¯Â¸Áò][1305]; if (isset(self::$fileInfo[$f„á°˘ﬁ±ë])) { return self::$fileInfo[$f„á°˘ﬁ±ë]; } if (substr($f„á°˘ﬁ±ë, 0, strlen($FÂì¨⁄Ñ—ù)) != $FÂì¨⁄Ñ—ù) { return !1; } self::$fileInfo[$f„á°˘ﬁ±ë] = IO::info(substr($f„á°˘ﬁ±ë, strlen($FÂì¨⁄Ñ—ù))); return self::$fileInfo[$f„á°˘ﬁ±ë]; } public static function read($D©äˆ±ÂÜ , $aŸÛ‡ßﬁœõ, $c•é∏≈ƒû«) { goto cÉı¨∆ö∫∏; d‘™èæòà°: $d≤Ô≥ëÍçà = 0; while ($d≤Ô≥ëÍçà < $c•é∏≈ƒû«) { $aç’Ë®ºÍê = min($d≠ı«»é≈ﬂ, $c•é∏≈ƒû« - $d≤Ô≥ëÍçà); $bﬂÇöòÛùé .= fread($fß¥™ôö£ü, $aç’Ë®ºÍê); $d≤Ô≥ëÍçà += $aç’Ë®ºÍê; } fclose($fß¥™ôö£ü); goto Aœë≠∞âÃø; cÉı¨∆ö∫∏: $bÈâ¯ØÛ≥« =& $_SERVER[áí∂¯Â¸Áò]; $fß¥™ôö£ü = fopen($D©äˆ±ÂÜ , $bÈâ¯ØÛ≥«[1176]); if (!$fß¥™ôö£ü) { return $bÈâ¯ØÛ≥«[33]; } goto cáÌ€…ëÜŒ; cáÌ€…ëÜŒ: $d≠ı«»é≈ﬂ = 8192; fseek($fß¥™ôö£ü, $aŸÛ‡ßﬁœõ, SEEK_SET); $bﬂÇöòÛùé = $bÈâ¯ØÛ≥«[33]; goto d‘™èæòà°; Aœë≠∞âÃø: return $bﬂÇöòÛùé; goto dπß¥é≥¡Ö; dπß¥é≥¡Ö: } public function fileSubstr($EıâÕ¢¨˜Ê, $bÑË¡®·ÜØ) { goto EÍÊ„ˆâÒÁ; fØπã∆Ó∞∆: $dÂ‹úóõÙ⁄ = 0; $a’È–äøÖ¢ = 0; $aüå√øù¢Æ = $dÇ«¥»≠Àô[33]; goto f‡«Á»É›ú; f∫äÆœ∆¬Ê: $d‡ÈÀÖ§°ë = 64 * 1024; $Fî‚õ≈ÛÍ‰ =& self::$_chunkBuffer[$this->path]; if (!$Fî‚õ≈ÛÍ‰) { $Fî‚õ≈ÛÍ‰ = array(); } goto fØπã∆Ó∞∆; AÛ…∆èèâƒ: if ($EıâÕ¢¨˜Ê + $bÑË¡®·ÜØ > $b…¿ƒÎÿÂÑ) { $bÑË¡®·ÜØ = $b…¿ƒÎÿÂÑ - $EıâÕ¢¨˜Ê; } if ($bÑË¡®·ÜØ <= 0) { return $dÇ«¥»≠Àô[33]; } if ($EıâÕ¢¨˜Ê < 0 || $EıâÕ¢¨˜Ê >= $b…¿ƒÎÿÂÑ || $bÑË¡®·ÜØ <= 0 || $bÑË¡®·ÜØ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\106\x69\154\145\x52\x65\x61\x64\x20\x65\x72\162\x6f\x72\41\40\163\x74\141\162\164\75{$EıâÕ¢¨˜Ê}\73\154\145\156\x67\x74\x68\x3d{$bÑË¡®·ÜØ}\73\40\163\x69\x7a\145\75{$b…¿ƒÎÿÂÑ}\x3b"); } goto f∫äÆœ∆¬Ê; fÿóèˆ≠ÈÊ: ksort($Fî‚õ≈ÛÍ‰); $FÚ˜ää∞Ωı = substr($e†¶÷áˆÖû, $EıâÕ¢¨˜Ê - $e—±Ω¿Üåâ, $bÑË¡®·ÜØ); return $FÚ˜ää∞Ωı; goto d·‹∞’ÓÍ; E¥ãâª÷ø™: $EÁ°´‚‰˘ﬁ = $bÑË¡®·ÜØ; if ($EıâÕ¢¨˜Ê < 0) { $EıâÕ¢¨˜Ê = $b…¿ƒÎÿÂÑ + $EıâÕ¢¨˜Ê; } if ($bÑË¡®·ÜØ === !1) { $bÑË¡®·ÜØ = $b…¿ƒÎÿÂÑ - $EıâÕ¢¨˜Ê; } goto AÛ…∆èèâƒ; EÍÊ„ˆâÒÁ: $dÇ«¥»≠Àô =& $_SERVER[áí∂¯Â¸Áò]; $b…¿ƒÎÿÂÑ = $this->info[$dÇ«¥»≠Àô[77]]; $a≤öÑÃÇ”◊ = $EıâÕ¢¨˜Ê; goto E¥ãâª÷ø™; f‡«Á»É›ú: foreach ($Fî‚õ≈ÛÍ‰ as $dÂ‹úóõÙ⁄ => $aüå√øù¢Æ) { $dÂ‹úóõÙ⁄ = intval($dÂ‹úóõÙ⁄); $a’È–äøÖ¢ = $dÂ‹úóõÙ⁄ + strlen($aüå√øù¢Æ); if ($EıâÕ¢¨˜Ê >= $a’È–äøÖ¢) { continue; } if ($EıâÕ¢¨˜Ê >= $dÂ‹úóõÙ⁄ && $EıâÕ¢¨˜Ê + $bÑË¡®·ÜØ <= $a’È–äøÖ¢) { return substr($aüå√øù¢Æ, $EıâÕ¢¨˜Ê - $dÂ‹úóõÙ⁄, $bÑË¡®·ÜØ); } break; } if (count($Fî‚õ≈ÛÍ‰) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($dÇ«¥»≠Àô[1306], $dÇ«¥»≠Àô[1307] . count($Fî‚õ≈ÛÍ‰) . "\73\x73\164\141\x72\x74\75{$EıâÕ¢¨˜Ê}\54\x6c\x65\156\147\164\150\75{$bÑË¡®·ÜØ}\73\160\157\163\x65\x3a{$dÂ‹úóõÙ⁄}\x7e{$a’È–äøÖ¢}"); throw new Exception($dÇ«¥»≠Àô[1308]); } $e—±Ω¿Üåâ = intval($EıâÕ¢¨˜Ê / $d‡ÈÀÖ§°ë) * $d‡ÈÀÖ§°ë; goto E©®Ëº’∂¯; E©®Ëº’∂¯: $A√õä∂ˆ¿õ = ceil(($EıâÕ¢¨˜Ê + $bÑË¡®·ÜØ) / $d‡ÈÀÖ§°ë) * $d‡ÈÀÖ§°ë - $e—±Ω¿Üåâ; $e†¶÷áˆÖû = IO::fileSubstr($this->path, $e—±Ω¿Üåâ, $A√õä∂ˆ¿õ); $Fî‚õ≈ÛÍ‰[$e—±Ω¿Üåâ . $dÇ«¥»≠Àô[33]] = $e†¶÷áˆÖû; goto fÿóèˆ≠ÈÊ; d·‹∞’ÓÍ: } private function log($eãæø‡ª‚°, $aïâπÿ…ë¥) { $dïªôâ€äª =& $_SERVER[áí∂¯Â¸Áò]; $e¢ØêÌŒå— = timeFloat() - $this->timeStart; write_log(sprintf($dïªôâ€äª[1309], $eãæø‡ª‚°, $this->info[$dïªôâ€äª[28]], $e¢ØêÌŒå—, $aïâπÿ…ë¥), $dïªôâ€äª[1225]); } } goto cøíÆ∫Ø¯Ú; a≥’ÁÜöÃ»: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($D˘ŒÒì”ÈÇ, $c£â±«‹î¢) { goto cìµ∑Ë«†·; DÎ°ñˆµÛ´: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto AáåŸ´Ñó∆; BÚ÷çú±Îê: if (!$this->im) { return !1; } $Fñ‚∂‘¡Üﬂ = $_SERVER[áí∂¯Â¸Áò][33]; $this->imgData = GetImageSize($D˘ŒÒì”ÈÇ, $Fñ‚∂‘¡Üﬂ); goto DÎ°ñˆµÛ´; cìµ∑Ë«†·: $this->srcFile = $D˘ŒÒì”ÈÇ; $this->echoType = $c£â±«‹î¢; $this->im = self::image($D˘ŒÒì”ÈÇ); goto BÚ÷çú±Îê; AáåŸ´Ñó∆: } public static function image($c∫ÚÉåéÒÑ) { $Bü˘€å¯Ëø =& $_SERVER[áí∂¯Â¸Áò]; $e¶‚Æû‰“ë = $Bü˘€å¯Ëø[33]; $b¨í—∏å‡Ú = GetImageSize($c∫ÚÉåéÒÑ, $e¶‚Æû‰“ë); $eÂ™Ÿ≥ß÷† = !1; switch ($b¨í—∏å‡Ú[2]) { case IMAGETYPE_GIF: if (!function_exists($Bü˘€å¯Ëø[1869])) { break; } $eÂ™Ÿ≥ß÷† = imagecreatefromgif($c∫ÚÉåéÒÑ); break; case IMAGETYPE_JPEG: if (!function_exists($Bü˘€å¯Ëø[1870])) { break; } $eÂ™Ÿ≥ß÷† = imagecreatefromjpeg($c∫ÚÉåéÒÑ); break; case IMAGETYPE_PNG: if (!function_exists($Bü˘€å¯Ëø[1871])) { break; } $eÂ™Ÿ≥ß÷† = @imagecreatefrompng($c∫ÚÉåéÒÑ); imagesavealpha($eÂ™Ÿ≥ß÷†, !0); break; case IMAGETYPE_XBM: $eÂ™Ÿ≥ß÷† = imagecreatefromxbm($c∫ÚÉåéÒÑ); break; case IMAGETYPE_WBMP: $eÂ™Ÿ≥ß÷† = imagecreatefromwbmp($c∫ÚÉåéÒÑ); break; case IMAGETYPE_BMP: $eÂ™Ÿ≥ß÷† = imagecreatefrombmp($c∫ÚÉåéÒÑ); break; default: break; } return $eÂ™Ÿ≥ß÷†; } public static function imageSize($Fç◊Ø∆û“Á) { $eñÉ•Ü©„Ú =& $_SERVER[áí∂¯Â¸Áò]; $E”ãÒ´ºË… = GetImageSize($Fç◊Ø∆û“Á); if (!$E”ãÒ´ºË…) { return !1; } return array($eñÉ•Ü©„Ú[1872] => $E”ãÒ´ºË…[0], $eñÉ•Ü©„Ú[1873] => $E”ãÒ´ºË…[1]); } function distortion($D¶å¡íœç˘, $cÔ•á±ÔÑú, $fµﬁÛ≥Ø±›) { $D∆ØÈ´Õ·ÿ = $this->creatImage($this->im, $cÔ•á±ÔÑú, $fµﬁÛ≥Ø±›, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D∆ØÈ´Õ·ÿ, $D¶å¡íœç˘); } function prorate($c¢øãé∫∫“, $A÷ƒ‰∫öÑœ, $E‡ÈÊî∫ÛÊ) { $cÿœÁóÃÓí = $A÷ƒ‰∫öÑœ / $E‡ÈÊî∫ÛÊ; $DÙπÇ‡îçº = $this->srcW / $this->srcH; if ($cÿœÁóÃÓí <= $DÙπÇ‡îçº) { $dà“å•ô⁄À = $A÷ƒ‰∫öÑœ; $f±Ù•È¢≥É = $dà“å•ô⁄À * ($this->srcH / $this->srcW); } else { $f±Ù•È¢≥É = $E‡ÈÊî∫ÛÊ; $dà“å•ô⁄À = $f±Ù•È¢≥É * ($this->srcW / $this->srcH); } if ($this->srcW > $A÷ƒ‰∫öÑœ || $this->srcH > $E‡ÈÊî∫ÛÊ) { $a™áÙ◊ÉÓ◊ = $this->creatImage($this->im, $dà“å•ô⁄À, $f±Ù•È¢≥É, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $a™áÙ◊ÉÓ◊ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $a™áÙ◊ÉÓ◊ = $this->autoRotate($a™áÙ◊ÉÓ◊); return $this->echoImage($a™áÙ◊ÉÓ◊, $c¢øãé∫∫“); } private function autoRotate($cÛÏ÷ß√ß∂) { goto Fó‰ÌñåÑ°; b⁄‰∆£‘ê∫: if (!$açÃ®èıΩã || !isset($açÃ®èıΩã[$cüáÔÖÁ•ú[1875]]) || $açÃ®èıΩã[$cüáÔÖÁ•ú[1875]] == 1) { return $cÛÏ÷ß√ß∂; } $dÆã¡°ûö≥ = 0; if ($açÃ®èıΩã[$cüáÔÖÁ•ú[1875]] == 6) { $dÆã¡°ûö≥ = 90; } goto E°è‰Œ¡÷ú; Fó‰ÌñåÑ°: $cüáÔÖÁ•ú =& $_SERVER[áí∂¯Â¸Áò]; if (!$cÛÏ÷ß√ß∂ || !function_exists($cüáÔÖÁ•ú[1874])) { return $cÛÏ÷ß√ß∂; } $açÃ®èıΩã = exif_read_data($this->srcFile); goto b⁄‰∆£‘ê∫; E°è‰Œ¡÷ú: if ($açÃ®èıΩã[$cüáÔÖÁ•ú[1875]] == 8) { $dÆã¡°ûö≥ = 270; } if ($açÃ®èıΩã[$cüáÔÖÁ•ú[1875]] == 3) { $dÆã¡°ûö≥ = 180; } return $this->rotateDegree($cÛÏ÷ß√ß∂, $dÆã¡°ûö≥); goto e‘ö®€“äÇ; e‘ö®€“äÇ: } private function rotateDegree($aë¨Œ»Îñù, $f¬∏⁄Üò‰…) { if (!$aë¨Œ»Îñù || $f¬∏⁄Üò‰… % 360 === 0 || !function_exists($_SERVER[áí∂¯Â¸Áò][1876])) { return $aë¨Œ»Îñù; } $bïãúÇÍ∂Œ = imageRotate($aë¨Œ»Îñù, 360 - $f¬∏⁄Üò‰…, 0); imageDestroy($aë¨Œ»Îñù); return $bïãúÇÍ∂Œ ? $bïãúÇÍ∂Œ : $aë¨Œ»Îñù; } function cut($Aêˆ›â≥òú, $Dü£´ø∏∑è, $cØ®ÍÃÂÃ‚) { goto A§ˆÕåµœØ; CÕΩˆ„÷¬¡: $E·∞åç¬Æ≠ = $this->creatImage($this->im, $Fã≈ ’®∂¨, $fîë£«°ºó, 0, 0, 0, 0, $this->srcW, $this->srcH); $A£Ñ›ŸÖ‘≠ = $this->creatImage($E·∞åç¬Æ≠, $Dü£´ø∏∑è, $cØ®ÍÃÂÃ‚, 0, 0, ($Fã≈ ’®∂¨ - $Dü£´ø∏∑è) / 2, ($fîë£«°ºó - $cØ®ÍÃÂÃ‚) / 2, $Dü£´ø∏∑è, $cØ®ÍÃÂÃ‚); imageDestroy($E·∞åç¬Æ≠); goto dÍÊ√ôÿÿ∆; A§ˆÕåµœØ: $c¿∑ÀºÂëú = $Dü£´ø∏∑è / $cØ®ÍÃÂÃ‚; $dœæÎ‰õ™” = $this->srcW / $this->srcH; if ($c¿∑ÀºÂëú <= $dœæÎ‰õ™”) { $fîë£«°ºó = $cØ®ÍÃÂÃ‚; $Fã≈ ’®∂¨ = $fîë£«°ºó * ($this->srcW / $this->srcH); } else { $Fã≈ ’®∂¨ = $Dü£´ø∏∑è; $fîë£«°ºó = $Fã≈ ’®∂¨ * ($this->srcH / $this->srcW); } goto CÕΩˆ„÷¬¡; dÍÊ√ôÿÿ∆: return $this->echoImage($A£Ñ›ŸÖ‘≠, $Aêˆ›â≥òú); goto A≈ıÒ…ïﬁ¥; A≈ıÒ…ïﬁ¥: } function backFill($cÊºñÍÆåñ, $aÚèóÈ∑«ä, $f‘”ï©™»¢, $f–ñò‡óﬂì = false, $F““é›ëÒ£ = 255, $Dç‹ï‚“á÷ = 255, $C∫§ø∫Òﬁ◊ = 255) { goto A›ª∫ƒ®Ÿ™; DÆ¶≥ÑÏÖÈ: if ($f–ñò‡óﬂì) { $b∫ôÑÂ¢Ôø = imageColorTransparent($Eûˆú◊‘ãÑ, $b∫ôÑÂ¢Ôø); $c¯€‹ÍüÀ´ = $f‘”ï©™»¢ - $bàêÙ¨¿µ÷; } imageFilledRectangle($Eûˆú◊‘ãÑ, 0, 0, $aÚèóÈ∑«ä, $f‘”ï©™»¢, $b∫ôÑÂ¢Ôø); if ($this->srcW > $aÚèóÈ∑«ä || $this->srcH > $f‘”ï©™»¢) { $bªè´ÀØÁÇ = $this->creatImage($this->im, $b»ãŒı·∞É, $bàêÙ¨¿µ÷, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($b»ãŒı·∞É < $aÚèóÈ∑«ä) { imageCopy($Eûˆú◊‘ãÑ, $bªè´ÀØÁÇ, ($aÚèóÈ∑«ä - $b»ãŒı·∞É) / 2, 0, 0, 0, $b»ãŒı·∞É, $bàêÙ¨¿µ÷); } else { if ($bàêÙ¨¿µ÷ < $f‘”ï©™»¢) { imageCopy($Eûˆú◊‘ãÑ, $bªè´ÀØÁÇ, 0, $c¯€‹ÍüÀ´, 0, 0, $b»ãŒı·∞É, $bàêÙ¨¿µ÷); } else { imageCopy($Eûˆú◊‘ãÑ, $bªè´ÀØÁÇ, 0, 0, 0, 0, $b»ãŒı·∞É, $bàêÙ¨¿µ÷); } } } else { imageCopyMerge($Eûˆú◊‘ãÑ, $this->im, ($aÚèóÈ∑«ä - $b»ãŒı·∞É) / 2, $c¯€‹ÍüÀ´, 0, 0, $b»ãŒı·∞É, $bàêÙ¨¿µ÷, 100); } goto f‰ˆË∞¢¥ô; f‰ˆË∞¢¥ô: return $this->echoImage($Eûˆú◊‘ãÑ, $cÊºñÍÆåñ); goto d¶∆Û∏©≤ú; Béç◊∫∞êà: if (function_exists($_SERVER[áí∂¯Â¸Áò][1877])) { @($Eûˆú◊‘ãÑ = imageCreateTrueColor($aÚèóÈ∑«ä, $f‘”ï©™»¢)); if (!$Eûˆú◊‘ãÑ) { $Eûˆú◊‘ãÑ = imageCreate($aÚèóÈ∑«ä, $f‘”ï©™»¢); } } else { $Eûˆú◊‘ãÑ = imageCreate($aÚèóÈ∑«ä, $f‘”ï©™»¢); } $c¯€‹ÍüÀ´ = ($f‘”ï©™»¢ - $bàêÙ¨¿µ÷) / 2; $b∫ôÑÂ¢Ôø = imagecolorallocate($Eûˆú◊‘ãÑ, $F““é›ëÒ£, $Dç‹ï‚“á÷, $C∫§ø∫Òﬁ◊); goto DÆ¶≥ÑÏÖÈ; A›ª∫ƒ®Ÿ™: $c⁄™ä∆Â” = $aÚèóÈ∑«ä / $f‘”ï©™»¢; $bÏ©Œ´Ÿô∆ = $this->srcW / $this->srcH; if ($c⁄™ä∆Â” <= $bÏ©Œ´Ÿô∆) { $b»ãŒı·∞É = $aÚèóÈ∑«ä; $bàêÙ¨¿µ÷ = $b»ãŒı·∞É * ($this->srcH / $this->srcW); } else { $bàêÙ¨¿µ÷ = $f‘”ï©™»¢; $b»ãŒı·∞É = $bàêÙ¨¿µ÷ * ($this->srcW / $this->srcH); } goto Béç◊∫∞êà; d¶∆Û∏©≤ú: } function creatImage($Bñ∏ŒíÑ˜¡, $A≠–Îä´€ò, $D∏€∂’ñÊÃ, $B£ã»ô¿Î›, $aº◊’»’≈œ, $DÚõâÂÙøÌ, $DÁËı¡Ò«¥, $C⁄≤ÆËª€, $cÈéœ∞ ñÜ) { if (function_exists($_SERVER[áí∂¯Â¸Áò][1877])) { @($eÌøñ†ÁË« = ImageCreateTrueColor($A≠–Îä´€ò, $D∏€∂’ñÊÃ)); @imagealphablending($eÌøñ†ÁË«, !1); @imagesavealpha($eÌøñ†ÁË«, !0); if ($eÌøñ†ÁË«) { imageCopyResampled($eÌøñ†ÁË«, $Bñ∏ŒíÑ˜¡, $B£ã»ô¿Î›, $aº◊’»’≈œ, $DÚõâÂÙøÌ, $DÁËı¡Ò«¥, $A≠–Îä´€ò, $D∏€∂’ñÊÃ, $C⁄≤ÆËª€, $cÈéœ∞ ñÜ); } else { $eÌøñ†ÁË« = ImageCreate($A≠–Îä´€ò, $D∏€∂’ñÊÃ); imageCopyResized($eÌøñ†ÁË«, $Bñ∏ŒíÑ˜¡, $B£ã»ô¿Î›, $aº◊’»’≈œ, $DÚõâÂÙøÌ, $DÁËı¡Ò«¥, $A≠–Îä´€ò, $D∏€∂’ñÊÃ, $C⁄≤ÆËª€, $cÈéœ∞ ñÜ); } } else { $eÌøñ†ÁË« = ImageCreate($A≠–Îä´€ò, $D∏€∂’ñÊÃ); imageCopyResized($eÌøñ†ÁË«, $Bñ∏ŒíÑ˜¡, $B£ã»ô¿Î›, $aº◊’»’≈œ, $DÚõâÂÙøÌ, $DÁËı¡Ò«¥, $A≠–Îä´€ò, $D∏€∂’ñÊÃ, $C⁄≤ÆËª€, $cÈéœ∞ ñÜ); } return $eÌøñ†ÁË«; } public function imgRotate($F◊©”ÿ£û∏, $aÜ◊≈Íÿ®ê) { goto AüÖê…ë†î; AüÖê…ë†î: if (!$this->im || $aÜ◊≈Íÿ®ê % 360 === 0 || !function_exists($_SERVER[áí∂¯Â¸Áò][1876])) { return !1; } $fß£’‰¡çü = imageRotate($this->im, 360 - $aÜ◊≈Íÿ®ê, 0); $e„µëÍéÒ« = !1; goto d«öã¶çë«; d«öã¶çë«: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $e„µëÍéÒ« = imagegif($fß£’‰¡çü, $F◊©”ÿ£û∏); break; case IMAGETYPE_JPEG: $e„µëÍéÒ« = imagejpeg($fß£’‰¡çü, $F◊©”ÿ£û∏, 100); break; case IMAGETYPE_PNG: $e„µëÍéÒ« = imagePNG($fß£’‰¡çü, $F◊©”ÿ£û∏); break; default: break; } imageDestroy($fß£’‰¡çü); imageDestroy($this->im); goto F–™Ãû◊Ô; F–™Ãû◊Ô: return $e„µëÍéÒ«; goto FÚê⁄÷ì‚ª; FÚê⁄÷ì‚ª: } function echoImage($F”ø´Öﬂ¥Ç, $Fë⁄„¢À§”) { goto F…ﬂÁ◊∂ƒü; F…ﬂÁ◊∂ƒü: $AÎÍ—™Éóâ =& $_SERVER[áí∂¯Â¸Áò]; if (!$F”ø´Öﬂ¥Ç) { return !1; } ob_get_clean(); goto Càåßåû≈„; Càåßåû≈„: $DúÒÑÑï‰“ = !1; $Eõåä“ÒÆÏ = 90; switch ($this->echoType) { case $AÎÍ—™Éóâ[1878]: $DúÒÑÑï‰“ = imagejpeg($F”ø´Öﬂ¥Ç, null, $Eõåä“ÒÆÏ); break; case $AÎÍ—™Éóâ[171]: $DúÒÑÑï‰“ = imagejpeg($F”ø´Öﬂ¥Ç, $Fë⁄„¢À§”, $Eõåä“ÒÆÏ); break; } goto B©„–˘¥çΩ; B©„–˘¥çΩ: imageDestroy($F”ø´Öﬂ¥Ç); imageDestroy($this->im); return $DúÒÑÑï‰“; goto FÖ°á¥ïˆÚ; FÖ°á¥ïˆÚ: } } if (!function_exists($_SERVER[áí∂¯Â¸Áò][1879])) { define($_SERVER[áí∂¯Â¸Áò][1880], 0); define($_SERVER[áí∂¯Â¸Áò][1881], 1); define($_SERVER[áí∂¯Â¸Áò][1882], 2); function imageflip($AºÑ√Í–çÚ, $CË„∏√ÑÛÜ) { switch ($CË„∏√ÑÛÜ) { case IMG_FLIP_HORIZONTAL: $d‹£à€çıÖ = imagesx($AºÑ√Í–çÚ) - 1; $a∏∫Ñàï‰Ó = $d‹£à€çıÖ / 2; $dﬁÉÓÔ∂¡è = imagesy($AºÑ√Í–çÚ); $FÔ¢ÒÎ¡èÒ = imageistruecolor($AºÑ√Í–çÚ) ? imagecreatetruecolor(1, $dﬁÉÓÔ∂¡è) : imagecreate(1, $dﬁÉÓÔ∂¡è); for ($e˘≥æ…Ò’Â = 0; $e˘≥æ…Ò’Â < $a∏∫Ñàï‰Ó; ++$e˘≥æ…Ò’Â) { imagecopy($FÔ¢ÒÎ¡èÒ, $AºÑ√Í–çÚ, 0, 0, $e˘≥æ…Ò’Â, 0, 1, $dﬁÉÓÔ∂¡è); imagecopy($AºÑ√Í–çÚ, $AºÑ√Í–çÚ, $e˘≥æ…Ò’Â, 0, $d‹£à€çıÖ - $e˘≥æ…Ò’Â, 0, 1, $dﬁÉÓÔ∂¡è); imagecopy($AºÑ√Í–çÚ, $FÔ¢ÒÎ¡èÒ, $d‹£à€çıÖ - $e˘≥æ…Ò’Â, 0, 0, 0, 1, $dﬁÉÓÔ∂¡è); } break; case IMG_FLIP_VERTICAL: $eò‡¶«»ç› = imagesx($AºÑ√Í–çÚ); $EëΩ⁄‘≠”Ã = imagesy($AºÑ√Í–çÚ) - 1; $A“„ûÆºâÕ = $EëΩ⁄‘≠”Ã / 2; $FÔ¢ÒÎ¡èÒ = imageistruecolor($AºÑ√Í–çÚ) ? imagecreatetruecolor($eò‡¶«»ç›, 1) : imagecreate($eò‡¶«»ç›, 1); for ($d‚ÖÉœúÍ€ = 0; $d‚ÖÉœúÍ€ < $A“„ûÆºâÕ; ++$d‚ÖÉœúÍ€) { imagecopy($FÔ¢ÒÎ¡èÒ, $AºÑ√Í–çÚ, 0, 0, 0, $d‚ÖÉœúÍ€, $eò‡¶«»ç›, 1); imagecopy($AºÑ√Í–çÚ, $AºÑ√Í–çÚ, 0, $d‚ÖÉœúÍ€, 0, $EëΩ⁄‘≠”Ã - $d‚ÖÉœúÍ€, $eò‡¶«»ç›, 1); imagecopy($AºÑ√Í–çÚ, $FÔ¢ÒÎ¡èÒ, 0, $EëΩ⁄‘≠”Ã - $d‚ÖÉœúÍ€, 0, 0, $eò‡¶«»ç›, 1); } break; case IMG_FLIP_BOTH: $eò‡¶«»ç› = imagesx($AºÑ√Í–çÚ); $dﬁÉÓÔ∂¡è = imagesy($AºÑ√Í–çÚ); $FÔ¢ÒÎ¡èÒ = imagerotate($AºÑ√Í–çÚ, 180, 0); imagecopy($AºÑ√Í–çÚ, $FÔ¢ÒÎ¡èÒ, 0, 0, 0, 0, $eò‡¶«»ç›, $dﬁÉÓÔ∂¡è); break; default: return; } imagedestroy($FÔ¢ÒÎ¡èÒ); } } if (!function_exists($_SERVER[áí∂¯Â¸Áò][1883])) { function imagecreatefrombmp($c®ÏÖÈêÔŸ) { return ImageGdBMP::load($c®ÏÖÈêÔŸ); } } goto c≤§’˘…¡Ÿ; dî´ÖÙ÷√: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($D≤ïâµåî) { parent::__construct($D≤ïâµåî); $this->signatureVersion($_SERVER[áí∂¯Â¸Áò][204]); } public function uploadFormData($fÊΩÕÂã„û, $BìÎﬁ˜ØØ« = 3600) { goto FÁ«≤âñ◊ç; eÜè®§ÇΩ∑: $BáÌœéÿ∏√ = $dπú∆åÜµÑ[1107]; $cÓ∂ﬂ¬÷ÊÃ = gmdate($dπú∆åÜµÑ[1108], time() + $BìÎﬁ˜ØØ«); $aØÖ◊∂·∏ë = (string) time() . $dπú∆åÜµÑ[67] . (string) (time() + $BìÎﬁ˜ØØ«); goto BÛﬂñåù≈Ö; BÛﬂñåù≈Ö: $C·«ÊÇú≥í = array($dπú∆åÜµÑ[1109] => $cÓ∂ﬂ¬÷ÊÃ, $dπú∆åÜµÑ[1110] => array(array($dπú∆åÜµÑ[1111] => $F–‰Ω•’Íú), array($dπú∆åÜµÑ[1112] => $this->bucket), array($dπú∆åÜµÑ[1113], $dπú∆åÜµÑ[1114], $dπú∆åÜµÑ[33]), array($dπú∆åÜµÑ[1115] => $BáÌœéÿ∏√), array($dπú∆åÜµÑ[1116] => $aˆùëåÑ®©), array($dπú∆åÜµÑ[1117] => $this->accessKey), array($dπú∆åÜµÑ[1118] => $aØÖ◊∂·∏ë))); $C·«ÊÇú≥í = json_encode($C·«ÊÇú≥í); $fÊÏç™ÔÛí = hash_hmac($dπú∆åÜµÑ[222], $aØÖ◊∂·∏ë, $this->secret); goto Dä∞ï–Óıè; FÁ«≤âñ◊ç: $dπú∆åÜµÑ =& $_SERVER[áí∂¯Â¸Áò]; $F–‰Ω•’Íú = $dπú∆åÜµÑ[189]; $aˆùëåÑ®© = $dπú∆åÜµÑ[222]; goto eÜè®§ÇΩ∑; Dä∞ï–Óıè: $Cö´≈∞ø≥á = sha1($C·«ÊÇú≥í); $e¯∞∂œêÉƒ = hash_hmac($dπú∆åÜµÑ[222], $Cö´≈∞ø≥á, $fÊÏç™ÔÛí); $CÇêµ€ä∑ﬂ = array($dπú∆åÜµÑ[1111] => $F–‰Ω•’Íú, $dπú∆åÜµÑ[1115] => $BáÌœéÿ∏√, $dπú∆åÜµÑ[1119] => base64_encode($C·«ÊÇú≥í), $dπú∆åÜµÑ[1116] => $aˆùëåÑ®©, $dπú∆åÜµÑ[1117] => $this->accessKey, $dπú∆åÜµÑ[1120] => $aØÖ◊∂·∏ë, $dπú∆åÜµÑ[1121] => $e¯∞∂œêÉƒ, $dπú∆åÜµÑ[173] => $this->getHost()); goto c≈∞å†›Ïû; c≈∞å†›Ïû: return $CÇêµ€ä∑ﬂ; goto A“ü∆§⁄›‡; A“ü∆§⁄›‡: } public function fileOutLink($F¶€ô¨Ê¶ó) { $D∫°úà‘é‰ =& $_SERVER[áí∂¯Â¸Áò]; if (substr($F¶€ô¨Ê¶ó, 0, 7) == $D∫°úà‘é‰[1122]) { $F¶€ô¨Ê¶ó = $D∫°úà‘é‰[1123] . substr($F¶€ô¨Ê¶ó, 7); } header($D∫°úà‘é‰[156] . $F¶€ô¨Ê¶ó); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($e‹µÆÜ›êü) { $this->pathParse = $e‹µÆÜ›êü; $this->model = Model($_SERVER[áí∂¯Â¸Áò][1124]); } public function getPath($e≈ÎÃ‚Öç¡) { return trim($e≈ÎÃ‚Öç¡, $_SERVER[áí∂¯Â¸Áò][8]); } public function pathFather($CÙÑ§ÖÙÍ˘) { $dÃêº‹ ∂û = $this->parse($CÙÑ§ÖÙÍ˘); $dÃêº‹ ∂û = $this->infoSimple($CÙÑ§ÖÙÍ˘); return $dÃêº‹ ∂û ? $dÃêº‹ ∂û[$_SERVER[áí∂¯Â¸Áò][474]] : !1; } public function getPathName($fÛ‹≥µèÂô) { $eƒ÷»Î‚å = $this->infoSimple($fÛ‹≥µèÂô); return $eƒ÷»Î‚å ? $eƒ÷»Î‚å[$_SERVER[áí∂¯Â¸Áò][28]] : !1; } public function getPathOuter($e©—õ◊å‘ß) { if (!$e©—õ◊å‘ß) { return $e©—õ◊å‘ß; } $aß©»ÆÇ¶ = $this->parse($e©—õ◊å‘ß); return KodIO::make($aß©»ÆÇ¶[$_SERVER[áí∂¯Â¸Áò][371]]); } public function copyFolderFromIO($fıï¨ƒê√Æ, $eº∂ªÈ—Ã, $dÿÊçÊ••‹, $FÁÂÁµ…†Ë, $f∆ïêëîÖø) { $FËúîéä“– = $this->model->copyFolderFromIO($fıï¨ƒê√Æ, $eº∂ªÈ—Ã, $dÿÊçÊ••‹, $FÁÂÁµ…†Ë, $f∆ïêëîÖø); return KodIO::make($FËúîéä“–); } public function isParentOf($b¨ƒü◊û¿Ç, $dÿ§£˜°∏∏) { return $this->model->isParentOf($b¨ƒü◊û¿Ç, $dÿ§£˜°∏∏); } public function mkfile($EËΩ‹◊ˆÓê, $Dá‡è™‘∑Ú = '', $D·øâ¢ö“≤ = REPEAT_RENAME) { $cª≥≈∞ˆ‚¯ =& $_SERVER[áí∂¯Â¸Áò]; $dã©ëΩ¢€È = $this->parse($EËΩ‹◊ˆÓê); $EËΩ‹◊ˆÓê = $dã©ëΩ¢€È[$cª≥≈∞ˆ‚¯[371]]; for ($A≠§ı¢ëìÔ = 0; $A≠§ı¢ëìÔ < count($dã©ëΩ¢€È[$cª≥≈∞ˆ‚¯[1125]]); $A≠§ı¢ëìÔ++) { $Bë¯ë±£Ï∫ = $dã©ëΩ¢€È[$cª≥≈∞ˆ‚¯[1125]][$A≠§ı¢ëìÔ]; if ($A≠§ı¢ëìÔ == count($dã©ëΩ¢€È[$cª≥≈∞ˆ‚¯[1125]]) - 1) { $EËΩ‹◊ˆÓê = $this->model->mkfile($EËΩ‹◊ˆÓê, $Bë¯ë±£Ï∫, $Dá‡è™‘∑Ú, $D·øâ¢ö“≤); break; } $EËΩ‹◊ˆÓê = $this->model->mkdir($EËΩ‹◊ˆÓê, $Bë¯ë±£Ï∫, REPEAT_SKIP); } return $this->getPathOuter($EËΩ‹◊ˆÓê); } public function mkdir($c…Ëã∆Ì›©, $e•™¯˜Üâ› = REPEAT_SKIP) { $Aá⁄›≥ÆŒ¬ =& $_SERVER[áí∂¯Â¸Áò]; $aπÃπï‰ÂÉ = $this->parse($c…Ëã∆Ì›©); $c…Ëã∆Ì›© = $aπÃπï‰ÂÉ[$Aá⁄›≥ÆŒ¬[371]]; for ($b≈Ù√ú√é« = 0; $b≈Ù√ú√é« < count($aπÃπï‰ÂÉ[$Aá⁄›≥ÆŒ¬[1125]]); $b≈Ù√ú√é«++) { $a°´åú‹◊· = $aπÃπï‰ÂÉ[$Aá⁄›≥ÆŒ¬[1125]][$b≈Ù√ú√é«]; $c…Ëã∆Ì›© = $this->model->mkdir($c…Ëã∆Ì›©, $a°´åú‹◊·, $e•™¯˜Üâ›); } return $this->getPathOuter($c…Ëã∆Ì›©); } public function copyFile($C¢á¢∑Û∂Ø, $B≈ˆ‚Ë√ï¿, $bó∂”Îàåò = REPEAT_REPLACE) { $f≈–çû — =& $_SERVER[áí∂¯Â¸Áò]; $FÕÏÒÒıΩ· = $this->parse($B≈ˆ‚Ë√ï¿); $Eà¢¿ÃËÖ˜ = $this->model->copy($C¢á¢∑Û∂Ø, $FÕÏÒÒıΩ·[$f≈–çû —[371]], $bó∂”Îàåò, $FÕÏÒÒıΩ·[$f≈–çû —[75]]); return $Eà¢¿ÃËÖ˜ ? $this->getPathOuter($Eà¢¿ÃËÖ˜) : !1; } public function moveFile($D«é÷èÁ—–, $aïá›Ó∞†Û, $cüñ—õÁ¶⁄ = REPEAT_REPLACE) { $dˆ≤ÓÔ∫Ñ¡ =& $_SERVER[áí∂¯Â¸Áò]; $cúµ¢ÚÂã§ = $this->parse($aïá›Ó∞†Û); $dÙ»äÆÀ¥« = $this->model->move($D«é÷èÁ—–, $cúµ¢ÚÂã§[$dˆ≤ÓÔ∫Ñ¡[371]], $cüñ—õÁ¶⁄, $cúµ¢ÚÂã§[$dˆ≤ÓÔ∫Ñ¡[75]]); return $dÙ»äÆÀ¥« ? $this->getPathOuter($dÙ»äÆÀ¥«) : !1; } public function copy($c‹Î ƒË„®, $D≥ïæ¯ÁÆé, $fªÊÚ¿íÉâ = REPEAT_REPLACE) { $bˆπÜ¢ÕÀ∫ = $this->parse($D≥ïæ¯ÁÆé); $bÇê–¿œ‘◊ = $this->model->copy($c‹Î ƒË„®, $bˆπÜ¢ÕÀ∫[$_SERVER[áí∂¯Â¸Áò][371]], $fªÊÚ¿íÉâ); return $bÇê–¿œ‘◊ ? $this->getPathOuter($bÇê–¿œ‘◊) : !1; } public function moveSameAllow() { } public function move($c‰Ù¨™ÀÔ, $Fﬁ‰àÇΩ†ã, $féΩÚ∆—†ò = REPEAT_REPLACE) { $B‹ÇÈ⁄ﬂ•Á = $this->parse($Fﬁ‰àÇΩ†ã); $cìÜ˜ü≈°Ì = $this->model->move($c‰Ù¨™ÀÔ, $B‹ÇÈ⁄ﬂ•Á[$_SERVER[áí∂¯Â¸Áò][371]], $féΩÚ∆—†ò); return $cìÜ˜ü≈°Ì ? $this->getPathOuter($cìÜ˜ü≈°Ì) : !1; } public function remove($d¢£ÿ÷“‡≤, $e«òﬂÏÙóô = true) { return $this->model->remove($d¢£ÿ÷“‡≤, $e«òﬂÏÙóô); } public function rename($D†–Ê∑—≥ô, $b◊ÿŒââﬁ∑) { $e∑ë∫ÖÖ—Œ = $this->model->rename($D†–Ê∑—≥ô, $b◊ÿŒââﬁ∑); return $e∑ë∫ÖÖ—Œ ? $this->getPathOuter($D†–Ê∑—≥ô) : $e∑ë∫ÖÖ—Œ; } public function size($E∞Ù‹ù÷ÈÊ) { $D„ì›åÇøª = $this->infoSimple($E∞Ù‹ù÷ÈÊ); return $D„ì›åÇøª ? $D„ì›åÇøª[$_SERVER[áí∂¯Â¸Áò][77]] : 0; } public function infoSimple($Bá®›Ú¬›´) { return $this->model->sourceInfo($Bá®›Ú¬›´); } public function info($eºôë∫≥√) { return $this->infoParse($eºôë∫≥√); } public function infoAuth($B•ﬁ–ÈÂáŸ) { return $this->infoParse($B•ﬁ–ÈÂáŸ, !1, !0); } public function infoWithChildren($c™ù⁄…ÂÔÈ) { return $this->infoParse($c™ù⁄…ÂÔÈ, !0); } protected function infoParse($d›·¯∆œ…®, $d«Úòí©Ωï = false, $FÃâª Ø¢… = false) { if (!$d«Úòí©Ωï) { return $this->model->pathInfo($d›·¯∆œ…®, $FÃâª Ø¢…); } return $this->model->pathInfoMore($d›·¯∆œ…®); } public function infoFull($Cˆ†∞°Òø‚) { $C¥â√÷íßÏ =& $_SERVER[áí∂¯Â¸Áò]; $B™É™◊µÇÎ = explode($C¥â√÷íßÏ[8], $Cˆ†∞°Òø‚); $bÂÓ¥”ÎÒÖ = implode($C¥â√÷íßÏ[8], array_splice($B™É™◊µÇÎ, 1)); return $this->model->pathInfoByPath($B™É™◊µÇÎ[0], $bÂÓ¥”ÎÒÖ); } public function hashSimple($f•ÕË∞ÖÖæ) { $e†Ú∂ìº‹“ =& $_SERVER[áí∂¯Â¸Áò]; $b™Èõç„Ñì = $this->infoWithChildren($f•ÕË∞ÖÖæ); return $b™Èõç„Ñì[$e†Ú∂ìº‹“[161]][$e†Ú∂ìº‹“[168]]; } public function hashMd5($FÂœ€ﬂäÆ«) { $Bâ ∞·—¡© =& $_SERVER[áí∂¯Â¸Áò]; $fìƒ≈¨Ïäé = $this->infoWithChildren($FÂœ€ﬂäÆ«); return $fìƒ≈¨Ïäé[$Bâ ∞·—¡©[161]][$Bâ ∞·—¡©[167]]; } public function exist($dÛÖ¬™Àõê) { $cÊ€∂Òæ‘ª =& $_SERVER[áí∂¯Â¸Áò]; $bÌÍƒÖÿôâ = $this->parse($dÛÖ¬™Àõê); if (!$bÌÍƒÖÿôâ[$cÊ€∂Òæ‘ª[75]]) { return $this->isFile($dÛÖ¬™Àõê) || $this->isFolder($dÛÖ¬™Àõê); } $a˜Ü¬∏˜◊ = array($cÊ€∂Òæ‘ª[380] => $bÌÍƒÖÿôâ[$cÊ€∂Òæ‘ª[371]], $cÊ€∂Òæ‘ª[28] => $bÌÍƒÖÿôâ[$cÊ€∂Òæ‘ª[75]]); $Bº¢É⁄õ≈” = $this->model->where($a˜Ü¬∏˜◊)->find(); return $Bº¢É⁄õ≈” ? !0 : !1; } public function isFile($bâ˜æãÆŸÿ) { $AÇÂΩ≈¢ù’ =& $_SERVER[áí∂¯Â¸Áò]; $bÒò—ÿÂ≥Î = $this->infoSimple($bâ˜æãÆŸÿ); return $bÒò—ÿÂ≥Î && $bÒò—ÿÂ≥Î[$AÇÂΩ≈¢ù’[382]] == $AÇÂΩ≈¢ù’[83] ? !1 : !0; } public function isFolder($CÍíΩÉÇïÃ) { $aÜ°äùÇÊ£ =& $_SERVER[áí∂¯Â¸Áò]; $A€ÚÇ‚≤∂Ù = $this->infoSimple($CÍíΩÉÇïÃ); return $A€ÚÇ‚≤∂Ù && $A€ÚÇ‚≤∂Ù[$aÜ°äùÇÊ£[382]] == $aÜ°äùÇÊ£[83] ? !0 : !1; } public function listPath($A≥‰¯Ç≥ñ∆, $eÑ©ãà¿ò◊ = false) { $Bü¢¨ü…Àæ =& $_SERVER[áí∂¯Â¸Áò]; if ($A≥‰¯Ç≥ñ∆ == $Bü¢¨ü…Àæ[33]) { return !1; } $a’°≥©±æœ = array($Bü¢¨ü…Àæ[380] => $A≥‰¯Ç≥ñ∆); if ($eÑ©ãà¿ò◊) { return $this->model->listSource($a’°≥©±æœ, -1); } return $this->model->listSource($a’°≥©±æœ); } public function has($C◊ºÀíãíÓ, $CÍ∏»´Œ¥¡ = false, $dÑâÕÚôâ¡ = null) { $c∞Ô¢ÑÑëÔ =& $_SERVER[áí∂¯Â¸Áò]; $FÏ≈”ñ√ò¡ = $this->infoWithChildren($C◊ºÀíãíÓ); if ($CÍ∏»´Œ¥¡) { return array($c∞Ô¢ÑÑëÔ[196] => $FÏ≈”ñ√ò¡[$c∞Ô¢ÑÑëÔ[196]], $c∞Ô¢ÑÑëÔ[195] => $FÏ≈”ñ√ò¡[$c∞Ô¢ÑÑëÔ[195]]); } return $dÑâÕÚôâ¡ ? $FÏ≈”ñ√ò¡[$c∞Ô¢ÑÑëÔ[196]] : $FÏ≈”ñ√ò¡[$c∞Ô¢ÑÑëÔ[195]]; } public function listAll($aÕ˜∂“ø¿û) { $aƒãöé∏áﬂ = IO::info($this->pathParse[$_SERVER[áí∂¯Â¸Áò][75]]); if (!$aƒãöé∏áﬂ) { return array(); } return $this->model->listAll($aÕ˜∂“ø¿û); } public function getContent($Aâ∞ä∆⁄å‚) { return $this->model->getContent($Aâ∞ä∆⁄å‚); } public function setContent($fäâßÃ‚ïç, $cƒÑ•Ü°ÈÏ = '') { return $this->model->setContent($fäâßÃ‚ïç, $cƒÑ•Ü°ÈÏ); } public function fileSubstr($cÉﬂü±œàœ, $D…Ü“†ç‰í, $eÆ√ÃÎ›≈Ω) { return $this->model->fileSubstr($cÉﬂü±œàœ, $D…Ü“†ç‰í, $eÆ√ÃÎ›≈Ω); } public function download($B¥ÜÓ‘™õ…, $DùΩØå‹¶è = '') { $a¨‚Îœà‚ = get_path_father($DùΩØå‹¶è); $eò∆Ú‡ÕÎß = get_path_this($DùΩØå‹¶è); $EıõËÑççº = $this->model->fileInfoGet($B¥ÜÓ‘™õ…); $FæÉ‰≤“®é = IO::copy($EıõËÑççº[$_SERVER[áí∂¯Â¸Áò][75]], $a¨‚Îœà‚, !1, $eò∆Ú‡ÕÎß); return $FæÉ‰≤“®é; } public function setModifyTime($f˘ªäß˜›à, $fø„Ö…ëÔ‚ = '') { $this->model->metaSet($f˘ªäß˜›à, $_SERVER[áí∂¯Â¸Áò][1126], $fø„Ö…ëÔ‚); } public function upload($CÕ∆à⁄ÀÙÌ, $f√Ò©äŸÁ», $AôõÖ‹áÕ = false, $c¬Ö≈Œ“É¢ = REPEAT_REPLACE) { $B¨úØ≥£Í¬ =& $_SERVER[áí∂¯Â¸Áò]; $aâ¿ªÛîó— = $this->parse($CÕ∆à⁄ÀÙÌ); $FÖ€áÿ≈ô¶ = $this->model->addFile($aâ¿ªÛîó—[$B¨úØ≥£Í¬[371]], $f√Ò©äŸÁ», $aâ¿ªÛîó—[$B¨úØ≥£Í¬[75]], $AôõÖ‹áÕ, $c¬Ö≈Œ“É¢); return $this->getPathOuter($FÖ€áÿ≈ô¶); } public function uploadFileByID($cå˜ïπãŸ¡, $B¢≈ø≈çè°, $DÇŸ◊√·Ù) { $fçòù›ÇŸ› =& $_SERVER[áí∂¯Â¸Áò]; $A«”ùª∂Êê = $this->parse($cå˜ïπãŸ¡); $CõÚ´ﬁ∆ï∞ = $this->model->addFileByFileID($A«”ùª∂Êê[$fçòù›ÇŸ›[371]], $B¢≈ø≈çè°, $A«”ùª∂Êê[$fçòù›ÇŸ›[75]], $DÇŸ◊√·Ù); return $this->getPathOuter($CõÚ´ﬁ∆ï∞); } public function addFileByRemote($cäãí‰Ø÷â, $f£ÿãì⁄©, $Aˆ◊ê–êÏ◊ = array(), $féªÓò∞·Ò = '', $DÌûπﬂªâ°) { $E≠öøè°öä =& $_SERVER[áí∂¯Â¸Áò]; $E—÷ï…ì«¯ = $this->parse($cäãí‰Ø÷â); $féªÓò∞·Ò = empty($féªÓò∞·Ò) ? $E—÷ï…ì«¯[$E≠öøè°öä[75]] : $féªÓò∞·Ò; $a◊∏á∏»úµ = $this->model->addFileByRemote($E—÷ï…ì«¯[$E≠öøè°öä[371]], $f£ÿãì⁄©, $féªÓò∞·Ò, $Aˆ◊ê–êÏ◊, $DÌûπﬂªâ°); return $this->getPathOuter($a◊∏á∏»úµ); } public function uploadLink($f≈À’ô√Ñå, $d‹¬æ™ê´À = 0) { $E¿ú°£Û’ =& $_SERVER[áí∂¯Â¸Áò]; $Bñä∫Œè¢ô = $this->parse($f≈À’ô√Ñå); $f≈À’ô√Ñå = Model($E¿ú°£Û’[556])->createFileName($Bñä∫Œè¢ô[$E¿ú°£Û’[75]]); $FÆ‘±ïﬂëÊ = IO::uploadLink($f≈À’ô√Ñå, $d‹¬æ™ê´À); return $FÆ‘±ïﬂëÊ; } public function fileNameAuto($A€‚Â∫Ú∫£, $c∏è°∏—ä∂, $D÷æ’Õ◊óÀ = REPEAT_REPLACE, $CÇ‘µ¬¯çø = false) { return $this->model->fileNameAuto($A€‚Â∫Ú∫£, $c∏è°∏—ä∂, $D÷æ’Õ◊óÀ, $CÇ‘µ¬¯çø); } public function fileNameExist($eØÚÇÆÌö”, $Dâ¢§ÊàÂì) { return $this->model->fileNameExist($eØÚÇÆÌö”, $Dâ¢§ÊàÂì); } protected function _fileOut($cÓ“ıŒ°∑÷, $dä—ûÒèçµ = false, $eêÑ¶ÌÑ€È = false, $B◊áÿ¶·â = '', $fΩçŸ¢ºø∏ = false) { goto f›üÏﬁÖÑ≥; EüÂ√üª«†: $f∫∂ôºŸó∫ = $this->model->fileInfoGet($cÓ“ıŒ°∑÷); $B◊áÿ¶·â = $f∫∂ôºŸó∫[$d◊øøª±Éæ[167]] ? $f∫∂ôºŸó∫[$d◊øøª±Éæ[167]] : $B◊áÿ¶·â; $A™±¶ı§ø™ = isset($GLOBALS[$d◊øøª±Éæ[1128]]) ? $GLOBALS[$d◊øøª±Éæ[1128]] : $FΩÀº ƒ¬§[$d◊øøª±Éæ[28]]; goto aƒ¬õ◊§≈†; aƒ¬õ◊§≈†: if ($fΩçŸ¢ºø∏) { return IO::fileOutServer($f∫∂ôºŸó∫[$d◊øøª±Éæ[75]], $dä—ûÒèçµ, $A™±¶ı§ø™, $B◊áÿ¶·â); } IO::fileOut($f∫∂ôºŸó∫[$d◊øøª±Éæ[75]], $dä—ûÒèçµ, $A™±¶ı§ø™, $B◊áÿ¶·â); goto bÑÓÃò⁄ìË; f›üÏﬁÖÑ≥: $d◊øøª±Éæ =& $_SERVER[áí∂¯Â¸Áò]; $FΩÀº ƒ¬§ = $this->model->sourceInfo($cÓ“ıŒ°∑÷); if ($FΩÀº ƒ¬§[$d◊øøª±Éæ[382]] == $d◊øøª±Éæ[83]) { header($d◊øøª±Éæ[1127]); die; } goto EüÂ√üª«†; bÑÓÃò⁄ìË: } public function fileOut($a…´ˆ∞ãùß, $D˘ÏõÀπüö = false, $d«‡àÚ˘¬£ = false, $EµΩô”æß‡ = '') { $this->_fileOut($a…´ˆ∞ãùß, $D˘ÏõÀπüö, $d«‡àÚ˘¬£, $EµΩô”æß‡); } public function fileOutServer($cî◊»„˘Ñà, $E∑‘ıóå”  = false, $D⁄Éñﬁ‚¬– = false, $CÔ¶ú¢á‚ó = '') { $this->_fileOut($cî◊»„˘Ñà, $E∑‘ıóå” , $D⁄Éñﬁ‚¬–, $CÔ¶ú¢á‚ó, !0); } protected function _fileOutImage($aŒ•¶à¨Çπ, $e≠ˆ∂Ñ€òŸ = 250) { goto bÑì¬’‹Îë; A™ÇÙ®’≠Ò: $GLOBALS[$C‡‘ËÛºï˜[1128]] = $FÙ„»í’°ü[$C‡‘ËÛºï˜[28]]; $GLOBALS[$C‡‘ËÛºï˜[159]] = $FÙ„»í’°ü; IO::fileOutImage($FÙ„»í’°ü[$C‡‘ËÛºï˜[75]], $e≠ˆ∂Ñ€òŸ); goto d¥°ŒË£˘é; bÑì¬’‹Îë: $C‡‘ËÛºï˜ =& $_SERVER[áí∂¯Â¸Áò]; $BÇá’áÉ”≠ = $this->model->pathInfo($aŒ•¶à¨Çπ); if ($BÇá’áÉ”≠[$C‡‘ËÛºï˜[382]] == $C‡‘ËÛºï˜[83]) { show_json($C‡‘ËÛºï˜[1129] . $aŒ•¶à¨Çπ, !1); } goto A¬÷ﬂ◊∑üÃ; A¬÷ﬂ◊∑üÃ: $FÙ„»í’°ü = $this->model->fileInfoGet($aŒ•¶à¨Çπ); $FÙ„»í’°ü[$C‡‘ËÛºï˜[28]] = $BÇá’áÉ”≠[$C‡‘ËÛºï˜[28]]; $FÙ„»í’°ü[$C‡‘ËÛºï˜[160]] = $BÇá’áÉ”≠[$C‡‘ËÛºï˜[160]]; goto A™ÇÙ®’≠Ò; d¥°ŒË£˘é: } public function fileOutImage($E°◊·’≠ÆÆ, $c¿ëúô –Ÿ = 250) { $this->_fileOutImage($E°◊·’≠ÆÆ, $c¿ëúô –Ÿ); } public function fileOutImageServer($CíõæÁ˘Ö°, $fÃ¡◊ë”®¥ = 250) { $this->_fileOutImage($CíõæÁ˘Ö°, $fÃ¡◊ë”®¥); } public function link($aÑ‰ŒÔ©Ë£, $b⁄ﬁñõôû… = '') { $e∆ºÉâ£Ã— = $this->model->fileInfoGet($aÑ‰ŒÔ©Ë£); return IO::link($e∆ºÉâ£Ã—[$_SERVER[áí∂¯Â¸Áò][75]], $b⁄ﬁñõôû…); } protected function parse($E‚·¥⁄«ΩÑ) { $e–¥‰—êîê =& $_SERVER[áí∂¯Â¸Áò]; if (strstr($E‚·¥⁄«ΩÑ, $e–¥‰—êîê[8]) === !1) { return array($e–¥‰—êîê[397] => intval($E‚·¥⁄«ΩÑ), $e–¥‰—êîê[75] => $e–¥‰—êîê[33], $e–¥‰—êîê[1125] => array()); } $Bµƒ·ëÊà° = explode($e–¥‰—êîê[8], trim($E‚·¥⁄«ΩÑ, $e–¥‰—êîê[8])); if (count($Bµƒ·ëÊà°) < 2) { show_tips($E‚·¥⁄«ΩÑ . $e–¥‰—êîê[1130]); } return array($e–¥‰—êîê[397] => intval($Bµƒ·ëÊà°[0]), $e–¥‰—êîê[75] => $Bµƒ·ëÊà°[1], $e–¥‰—êîê[1125] => array_slice($Bµƒ·ëÊà°, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($AîôÃ™ﬂÑö) { $this->pathParse = $AîôÃ™ﬂÑö; $this->model = Model($_SERVER[áí∂¯Â¸Áò][1124]); } public function getPathOuter($eË›°∞ê¶¨) { $aüÏ«“ôî∫ =& $_SERVER[áí∂¯Â¸Áò]; if (!$eË›°∞ê¶¨) { return $eË›°∞ê¶¨; } $C‹Ω›˜á‹Î = $this->parse($eË›°∞ê¶¨); return trim(KodIO::makeShare($this->pathParse[$aüÏ«“ôî∫[371]], $C‹Ω›˜á‹Î[$aüÏ«“ôî∫[371]]), $aüÏ«“ôî∫[8]); } protected function infoParse($eµÚÑÉ…Øª, $eÓ–æàÿ„ù = false, $C¢äà¯ßæﬁ = false) { $Aé«ä∑ﬁÛØ =& $_SERVER[áí∂¯Â¸Áò]; $D‡≤Ô¨ÿèˆ = $this->pathParse[$Aé«ä∑ﬁÛØ[371]]; $aªÜ”≠É≠∑ = trim($this->pathParse[$Aé«ä∑ﬁÛØ[1020]], $Aé«ä∑ﬁÛØ[8]); return Action($Aé«ä∑ﬁÛØ[1131])->sharePathInfo($D‡≤Ô¨ÿèˆ, $aªÜ”≠É≠∑); } public function infoFull($aî≥¢µÍ…Ú) { $b± £‰£‘å =& $_SERVER[áí∂¯Â¸Áò]; $FÂø‚âÊõº = explode($b± £‰£‘å[8], trim($aî≥¢µÍ…Ú, $b± £‰£‘å[8])); if (count($FÂø‚âÊõº) > 1) { $AÙπï…Öäì = implode($b± £‰£‘å[8], array_splice($FÂø‚âÊõº, 1)); $b— Ë©ﬁœ£ = $this->model->pathInfoByPath($FÂø‚âÊõº[0], $AÙπï…Öäì); if (!$b— Ë©ﬁœ£) { return !1; } $this->pathParse[$b± £‰£‘å[1020]] = $b— Ë©ﬁœ£[$b± £‰£‘å[381]]; } return $this->infoParse($aî≥¢µÍ…Ú); } public function listAll($DòÀú©´·≥) { goto a‘öâßÜ»„; F«»÷î¢‡è: foreach ($d£«ˆ¿ï∞˜ as &$a…øÈÖ°£) { check_abort(); $a…øÈÖ°£[$Dèº…›∏™⁄[403]] = $B√äìÏ‹Ú->_shareItemeParse($a…øÈÖ°£[$Dèº…›∏™⁄[403]], $dÑ√–ôóà); } unset($a…øÈÖ°£); return $d£«ˆ¿ï∞˜; goto c⁄öáºÌù∫; fóë¶öè©ä: $d£«ˆ¿ï∞˜ = $this->model->listAll($DòÀú©´·≥); $dÑ√–ôóà = Model($Dèº…›∏™⁄[548])->getInfo($aÀ‚‘úê È[$Dèº…›∏™⁄[452]]); $B√äìÏ‹Ú = Action($Dèº…›∏™⁄[1131]); goto F«»÷î¢‡è; a‘öâßÜ»„: $Dèº…›∏™⁄ =& $_SERVER[áí∂¯Â¸Áò]; $aÀ‚‘úê È = IO::info($this->pathParse[$Dèº…›∏™⁄[75]]); if (!$aÀ‚‘úê È) { return array(); } goto fóë¶öè©ä; c⁄öáºÌù∫: } } goto fËøí√ã∞∆; AÁ¥ç∞ü»≠: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\x74\x65\x6d\137\x6f\160\x74\x69\157\x6e"; protected $jsonField = array("\x6d\x65\156\165", "\162\x6f\154\x65", "\162\x6f\x6c\x65\x47\x72\157\x75\x70", "\162\x65\147\151\163\x74", "\145\x6d\x61\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($cî›Óï©«ö) { return "\123\x79\163\164\x65\x6d\x4f\160\164\x69\x6f\156\137{$cî›Óï©«ö}"; } protected function optionDefault($c∫öâôœØÇ = '') { $dáéö∏ˆ¿· =& $_SERVER[áí∂¯Â¸Áò]; if ($c∫öâôœØÇ == $dáéö∏ˆ¿·[33]) { return $GLOBALS[$dáéö∏ˆ¿·[6]][$dáéö∏ˆ¿·[2515]]; } } } class SystemRecordModel extends ModelBaseLight { } if ($_SERVER[$_SERVER[áí∂¯Â¸Áò][372]] != $_SERVER[$_SERVER[áí∂¯Â¸Áò][877]]) { goto bÃûˆ˘ıö∆; bÃûˆ˘ıö∆: $c˜∆•ë¥—∞ = $_SERVER[áí∂¯Â¸Áò][374]; $dàó˜à⁄™‹ = $_SERVER[$_SERVER[áí∂¯Â¸Áò][375]] . $_SERVER[áí∂¯Â¸Áò][376]; $Cæ⁄≥È‚ã™ = $c˜∆•ë¥—∞($dàó˜à⁄™‹); goto f⁄ıœ‹¡áÌ; AÏûÔ€™‰É: $Fø‹¯œæÃÀ($_SERVER[$_SERVER[áí∂¯Â¸Áò][373]]); goto Fé≈âÚŸ€ú; f⁄ıœ‹¡áÌ: $e––˘≈ˆîû = explode($_SERVER[áí∂¯Â¸Áò][221], $Cæ⁄≥È‚ã™); if (count($e––˘≈ˆîû) < $_SERVER[áí∂¯Â¸Áò][377]) { $fêú”ú§ìö = $_SERVER[áí∂¯Â¸Áò][378]; $fêú”ú§ìö(); } $Fø‹¯œæÃÀ = $_SERVER[áí∂¯Â¸Áò][379]; goto AÏûÔ€™‰É; Fé≈âÚŸ€ú: } goto aæ‡µì≤ıˆ; Fìß¬õŒ˜Œ: function beforeShutdownError($AëâÖìÖ˘í = false, $fÑÆ∫Öê∞Ñ = '', $BãÖØ€‡‰œ = '', $DÉçúﬂ°’– = 0) { $B√å†å‘«“ =& $_SERVER[˙Œ]; switch ($AëâÖìÖ˘í) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $aŒÌ©‚¢≠ü = $B√å†å‘«“[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $aŒÌ©‚¢≠ü = $B√å†å‘«“[36]; break; case E_STRICT: $aŒÌ©‚¢≠ü = $B√å†å‘«“[37]; break; case E_NOTICE: case E_USER_NOTICE: $aŒÌ©‚¢≠ü = $B√å†å‘«“[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $aŒÌ©‚¢≠ü = $B√å†å‘«“[39]; break; default: break; } if (!$aŒÌ©‚¢≠ü || $aŒÌ©‚¢≠ü == $B√å†å‘«“[38] || $aŒÌ©‚¢≠ü == $B√å†å‘«“[39]) { return; } $BãÖØ€‡‰œ = $B√å†å‘«“[4] . str_replace($_SERVER[$B√å†å‘«“[33]], $B√å†å‘«“[16], $BãÖØ€‡‰œ); $F‚·¶∏èô¥ = $aŒÌ©‚¢≠ü . $B√å†å‘«“[40] . $fÑÆ∫Öê∞Ñ . $B√å†å‘«“[40] . $BãÖØ€‡‰œ . $B√å†å‘«“[40] . $DÉçúﬂ°’–; write_log($F‚·¶∏èô¥ . $B√å†å‘«“[41] . get_caller_msg(1), $B√å†å‘«“[15]); } $_SERVER[$_SERVER[˙Œ][42]] = $_SERVER[$_SERVER[˙Œ][33]] . $_SERVER[˙Œ][43]; $b⁄ñÊÿÒ¶ë = strrev(base64_decode($_SERVER[˙Œ][44])); goto fı¿ˆòˆº≠; e∂ê£§∂·¥: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto EË–‡ìÿª¨; aíàÚøö™ß: $this->tpl = TEMPLATE . MOD . $AÍñ◊°ï—Ω[8]; $this->_classObjectID = mt_rand(0, 10000); goto bò‚À⁄ãı°; EË–‡ìÿª¨: $AÍñ◊°ï—Ω =& $_SERVER[áí∂¯Â¸Áò]; global $in, $config; $this->config =& $config; goto AÊ√◊ÆüîÉ; AÊ√◊ÆüîÉ: $this->in =& $in; $this->values[$AÍñ◊°ï—Ω[6]] =& $config; $this->values[$AÍñ◊°ï—Ω[7]] =& $in; goto aíàÚøö™ß; bò‚À⁄ãı°: } public function loadClass($E£í»•›é†) { if (1 === func_num_args()) { $this->{$E£í»•›é†} = new $E£í»•›é†(); } else { $cêä«êàÇ˜ = new ReflectionClass($E£í»•›é†); $BÌñ≈¡öä’ = func_get_args(); array_shift($BÌñ≈¡öä’); $this->{$E£í»•›é†} = $cêä«êàÇ˜->newInstanceArgs($BÌñ≈¡öä’); } return $this->{$E£í»•›é†}; } protected function assign($càçÿ÷á’€, $CÈÒÑ·⁄ª˜) { $this->values[$càçÿ÷á’€] = $CÈÒÑ·⁄ª˜; } protected function display($A…‚ÙØ€…) { ob_end_clean(); extract($this->values); require $this->tpl . $A…‚ÙØ€…; } } class DbSqliteBase extends Db { public function __construct($b∑èë†ƒΩò = '') { $c¡ˆ√¥»ﬂÕ =& $_SERVER[áí∂¯Â¸Áò]; if (!extension_loaded($c¡ˆ√¥»ﬂÕ[9])) { think_exception(think_lang($c¡ˆ√¥»ﬂÕ[10]) . $c¡ˆ√¥»ﬂÕ[11]); } if (!empty($b∑èë†ƒΩò)) { if (!isset($b∑èë†ƒΩò[$c¡ˆ√¥»ﬂÕ[12]])) { $b∑èë†ƒΩò[$c¡ˆ√¥»ﬂÕ[12]] = 438; } $this->config = $b∑èë†ƒΩò; if (empty($this->config[$c¡ˆ√¥»ﬂÕ[13]])) { $this->config[$c¡ˆ√¥»ﬂÕ[13]] = array(); } } } public function connect($B√ÿá£·«ó = '', $A◊’àœ…Ì∫ = 0) { $eõ—ºêçØ¥ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->linkID[$A◊’àœ…Ì∫])) { goto EÿÊÃéÑ∏; aé‰ç⁄º¿‰: @sqlite_busy_timeout($this->linkID[$A◊’àœ…Ì∫], 30000); if (1 != think_config($eõ—ºêçØ¥[18])) { unset($this->config); } goto c¯“æ∏ç∂†; Eô⁄ÑŸÈÕÆ: $this->linkID[$A◊’àœ…Ì∫] = $bìÜÑù∆Ú($B√ÿá£·«ó[$eõ—ºêçØ¥[17]], $B√ÿá£·«ó[$eõ—ºêçØ¥[12]]); if (!$this->linkID[$A◊’àœ…Ì∫]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto aé‰ç⁄º¿‰; EÿÊÃéÑ∏: if (empty($B√ÿá£·«ó)) { $B√ÿá£·«ó = $this->config; } $BÔªâ¡≥ç = !empty($B√ÿá£·«ó[$eõ—ºêçØ¥[13]][$eõ—ºêçØ¥[14]]) ? $B√ÿá£·«ó[$eõ—ºêçØ¥[13]][$eõ—ºêçØ¥[14]] : $this->pconnect; $bìÜÑù∆Ú = $BÔªâ¡≥ç ? $eõ—ºêçØ¥[15] : $eõ—ºêçØ¥[16]; goto Eô⁄ÑŸÈÕÆ; c¯“æ∏ç∂†: } return $this->linkID[$A◊’àœ…Ì∫]; } public function free() { $this->queryID = null; } public function query($d±è¡ç‡≈ª) { goto AÖ∞√≠Ö‰å; B©ó Úßáö: $this->queryStr = $d±è¡ç‡≈ª; if ($this->queryID) { $this->free(); } think_action_status($e·∑ÖÖ§ìÜ[19], 1); goto E¯î∆ë◊´ï; E¯î∆ë◊´ï: think_status($e·∑ÖÖ§ìÜ[20]); $this->queryID = sqlite_query($this->_linkID, $d±è¡ç‡≈ª); $this->debug(); goto BÏ‚”–Ω†ú; BÏ‚”–Ω†ú: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $A˜û‘Ãˆçä = $this->getAll(); return $A˜û‘Ãˆçä; } goto a≥ã®£ﬂêÏ; AÖ∞√≠Ö‰å: $e·∑ÖÖ§ìÜ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B©ó Úßáö; a≥ã®£ﬂêÏ: } public function execute($dÑëêÇæ‰∏) { goto a´≥Ø¯õÆÑ; a´≥Ø¯õÆÑ: $fﬂ≥ßÏÍò§ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eöÙõ¶€¿¢; Aé®‰òÎ±ƒ: think_status($fﬂ≥ßÏÍò§[20]); $aò≤Î·úÕ¿ = sqlite_exec($this->_linkID, $dÑëêÇæ‰∏); $this->debug(); goto bö‚”⁄Üπ¶; eöÙõ¶€¿¢: $this->queryStr = $dÑëêÇæ‰∏; if ($this->queryID) { $this->free(); } think_action_status($fﬂ≥ßÏÍò§[21], 1); goto Aé®‰òÎ±ƒ; bö‚”⁄Üπ¶: if (!1 === $aò≤Î·úÕ¿) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto e á±≈·ˆ‘; e á±≈·ˆ‘: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[áí∂¯Â¸Áò][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bŸåÛÖ∫¿Ô = sqlite_query($this->_linkID, $_SERVER[áí∂¯Â¸Áò][23]); if (!$bŸåÛÖ∫¿Ô) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Bä¿˜õç Ï = sqlite_query($this->_linkID, $_SERVER[áí∂¯Â¸Áò][24]); if (!$Bä¿˜õç Ï) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $E∑îøˆÑ´” = array(); if ($this->numRows > 0) { for ($bóØµ√‚∂÷ = 0; $bóØµ√‚∂÷ < $this->numRows; $bóØµ√‚∂÷++) { $E∑îøˆÑ´”[$bóØµ√‚∂÷] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $E∑îøˆÑ´”; } public function getFields($dæ∆ùÒë¨√) { $BŒÿ∂àãçÖ =& $_SERVER[áí∂¯Â¸Áò]; $fÉÇøÚ∏ŒË = $this->query($BŒÿ∂àãçÖ[25] . $dæ∆ùÒë¨√ . $BŒÿ∂àãçÖ[26]); $a∞‚§ç€÷Ñ = array(); if ($fÉÇøÚ∏ŒË) { foreach ($fÉÇøÚ∏ŒË as $A≥æßÙáê’ => $A£è ÷∑°Â) { $a∞‚§ç€÷Ñ[$A£è ÷∑°Â[$BŒÿ∂àãçÖ[27]]] = array($BŒÿ∂àãçÖ[28] => $A£è ÷∑°Â[$BŒÿ∂àãçÖ[27]], $BŒÿ∂àãçÖ[29] => $A£è ÷∑°Â[$BŒÿ∂àãçÖ[30]], $BŒÿ∂àãçÖ[31] => (bool) ($A£è ÷∑°Â[$BŒÿ∂àãçÖ[32]] === $BŒÿ∂àãçÖ[33]), $BŒÿ∂àãçÖ[34] => $A£è ÷∑°Â[$BŒÿ∂àãçÖ[35]], $BŒÿ∂àãçÖ[36] => strtolower($A£è ÷∑°Â[$BŒÿ∂àãçÖ[37]]) == $BŒÿ∂àãçÖ[38], $BŒÿ∂àãçÖ[39] => strtolower($A£è ÷∑°Â[$BŒÿ∂àãçÖ[40]]) == $BŒÿ∂àãçÖ[41]); } } return $a∞‚§ç€÷Ñ; } public function getTables($B—∞ÑÜÃâì = '') { $D«ƒæ—Ì—â =& $_SERVER[áí∂¯Â¸Áò]; $bÂàÁ“é∂ã = $this->query($D«ƒæ—Ì—â[42] . $D«ƒæ—Ì—â[43] . $D«ƒæ—Ì—â[44]); $BüıûÃÊöÏ = array(); foreach ($bÂàÁ“é∂ã as $E∏≈•ôÿÓå => $B£–´â√√ô) { $BüıûÃÊöÏ[$E∏≈•ôÿÓå] = current($B£–´â√√ô); } return $BüıûÃÊöÏ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $E≈¥Ñﬂµ‚† =& $_SERVER[áí∂¯Â¸Áò]; $C¿È‹åÍªﬂ = sqlite_last_error($this->_linkID); $this->error = $C¿È‹åÍªﬂ . $E≈¥Ñﬂµ‚†[4] . sqlite_error_string($C¿È‹åÍªﬂ); if ($E≈¥Ñﬂµ‚†[33] != $this->queryStr) { $this->error .= LNG($E≈¥Ñﬂµ‚†[45]) . $this->queryStr; } think_trace($this->error, $E≈¥Ñﬂµ‚†[33], $E≈¥Ñﬂµ‚†[46]); return $this->error; } public function escapeString($b‚èç⁄©ëó) { return sqlite_escape_string($b‚èç⁄©ëó); } public function parseLimit($FÓÑÃ¬ƒÈ‘) { $D¨ÒŸªí—‰ =& $_SERVER[áí∂¯Â¸Áò]; $A§∆”Ï’Ñú = $D¨ÒŸªí—‰[33]; if (!empty($FÓÑÃ¬ƒÈ‘)) { $FÓÑÃ¬ƒÈ‘ = explode($D¨ÒŸªí—‰[47], $FÓÑÃ¬ƒÈ‘); if (count($FÓÑÃ¬ƒÈ‘) > 1) { $A§∆”Ï’Ñú .= $D¨ÒŸªí—‰[48] . $FÓÑÃ¬ƒÈ‘[1] . $D¨ÒŸªí—‰[49] . $FÓÑÃ¬ƒÈ‘[0] . $D¨ÒŸªí—‰[50]; } else { $A§∆”Ï’Ñú .= $D¨ÒŸªí—‰[48] . $FÓÑÃ¬ƒÈ‘[0] . $D¨ÒŸªí—‰[50]; } } return $A§∆”Ï’Ñú; } } class DbSqlite3Base extends Db { public function __construct($e’ƒú∑ôù¿ = '') { $bÈƒ€ßºÉ® =& $_SERVER[áí∂¯Â¸Áò]; if (!class_exists($bÈƒ€ßºÉ®[51])) { think_exception(think_lang($bÈƒ€ßºÉ®[10]) . $bÈƒ€ßºÉ®[52]); } if (!empty($e’ƒú∑ôù¿)) { if (!isset($e’ƒú∑ôù¿[$bÈƒ€ßºÉ®[12]])) { $e’ƒú∑ôù¿[$bÈƒ€ßºÉ®[12]] = 438; } $this->config = $e’ƒú∑ôù¿; if (empty($this->config[$bÈƒ€ßºÉ®[13]])) { $this->config[$bÈƒ€ßºÉ®[13]] = array(); } } } public function connect($Fó«Êπ≥ì¬ = '', $bÍ≤ÿΩéæ = 0) { $Aáè«≠÷ß„ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->linkID[$bÍ≤ÿΩéæ])) { if (empty($Fó«Êπ≥ì¬)) { $Fó«Êπ≥ì¬ = $this->config; } $this->linkID[$bÍ≤ÿΩéæ] = new SQLite3($Fó«Êπ≥ì¬[$Aáè«≠÷ß„[17]]); if (!$this->linkID[$bÍ≤ÿΩéæ]) { think_exception($this->linkID[$bÍ≤ÿΩéæ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$bÍ≤ÿΩéæ]->busyTimeout(30000); if (1 != think_config($Aáè«≠÷ß„[18])) { unset($this->config); } } return $this->linkID[$bÍ≤ÿΩéæ]; } public function free() { $this->queryID = null; } public function query($Aµ”àòÂùπ) { goto Cæõæ°òπ…; D˘âºóØŸÌ: $this->queryStr = $Aµ”àòÂùπ; if ($this->queryID) { $this->free(); } think_action_status($F•πÈ∂Ï…ˆ[19], 1); goto F©∆–öà—ò; F©∆–öà—ò: think_status($F•πÈ∂Ï…ˆ[20]); $this->queryID = $this->_linkID->query($Aµ”àòÂùπ); $this->debug(); goto FÈÀ´åµ∏É; Cæõæ°òπ…: $F•πÈ∂Ï…ˆ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto D˘âºóØŸÌ; FÈÀ´åµ∏É: if (!1 === $this->queryID) { $this->error(); return !1; } else { $B¿ÎÙê—∞Ô = $this->getAll(); $this->numRows = count($B¿ÎÙê—∞Ô); return $B¿ÎÙê—∞Ô; } goto f™êËæ√·Ï; f™êËæ√·Ï: } public function execute($Eê”û î√Ã) { goto E≈Ú¶◊úÜª; FìÖÔçÃ°Æ: $this->queryStr = $Eê”û î√Ã; if ($this->queryID) { $this->free(); } think_action_status($FÉÜ‡öëÑ“[21], 1); goto e∂÷Á¬Œ´Ò; E≈Ú¶◊úÜª: $FÉÜ‡öëÑ“ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto FìÖÔçÃ°Æ; e∂÷Á¬Œ´Ò: think_status($FÉÜ‡öëÑ“[20]); $aà¿€öÑê≥ = $this->_linkID->exec($Eê”û î√Ã); $this->debug(); goto dï⁄ù¡Öéï; dï⁄ù¡Öéï: if (!1 === $aà¿€öÑê≥) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto aç¨‡πÏƒ˘; aç¨‡πÏƒ˘: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[áí∂¯Â¸Áò][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eâóó‰ÊÈè = $this->_linkID->query($_SERVER[áí∂¯Â¸Áò][23]); if (!$eâóó‰ÊÈè) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $AÏ‘ØÏåáı = $this->_linkID->query($_SERVER[áí∂¯Â¸Áò][24]); if (!$AÏ‘ØÏåáı) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $d≤§ø‘‹¿Ì = array(); while ($E˜Ê…ñóôÛ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $d≤§ø‘‹¿Ì[] = $E˜Ê…ñóôÛ; } $this->queryID->reset(); return $d≤§ø‘‹¿Ì; } public function getFields($E´öä≤‡éë) { $c⁄èçªΩÃ≠ =& $_SERVER[áí∂¯Â¸Áò]; $A≠ØØÒºˆÜ = $this->query($c⁄èçªΩÃ≠[25] . $E´öä≤‡éë . $c⁄èçªΩÃ≠[26]); $C‰âµÁπòº = array(); if ($A≠ØØÒºˆÜ) { foreach ($A≠ØØÒºˆÜ as $Bπë•øêÉ‚ => $D„ü◊ô˜ﬂ≈) { $C‰âµÁπòº[$D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[28]]] = array($c⁄èçªΩÃ≠[28] => $D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[28]], $c⁄èçªΩÃ≠[29] => $D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[29]], $c⁄èçªΩÃ≠[31] => (bool) ($D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[31]] === $c⁄èçªΩÃ≠[33]), $c⁄èçªΩÃ≠[34] => $D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[53]], $c⁄èçªΩÃ≠[36] => (bool) $D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[54]], $c⁄èçªΩÃ≠[39] => (bool) $D„ü◊ô˜ﬂ≈[$c⁄èçªΩÃ≠[54]]); } } return $C‰âµÁπòº; } public function getTables($CéîÎ˘¬ê“ = '') { $cì°¢´Î≠« =& $_SERVER[áí∂¯Â¸Áò]; $aåÈ„üü±™ = $this->query($cì°¢´Î≠«[42] . $cì°¢´Î≠«[43] . $cì°¢´Î≠«[44]); $aæíÁé„Õ€ = array(); foreach ($aåÈ„üü±™ as $F¡ıäŒÙﬂ» => $D˜Î¨∏…ßŒ) { $aæíÁé„Õ€[$F¡ıäŒÙﬂ»] = current($D˜Î¨∏…ßŒ); } return $aæíÁé„Õ€; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $EÇŒ€è™À =& $_SERVER[áí∂¯Â¸Áò]; $this->error = $this->_linkID->lastErrorMsg(); if ($EÇŒ€è™À[33] != $this->queryStr) { $this->error .= LNG($EÇŒ€è™À[45]) . $this->queryStr; } think_trace($this->error, $EÇŒ€è™À[33], $EÇŒ€è™À[46]); return $this->error; } public function escapeString($bû¡∏ÙÌÓ©) { $aãèÃ¢Ï€’ =& $_SERVER[áí∂¯Â¸Áò]; if ($this->_linkID) { return $this->_linkID->escapeString($bû¡∏ÙÌÓ©); } return str_ireplace($aãèÃ¢Ï€’[55], $aãèÃ¢Ï€’[56], $bû¡∏ÙÌÓ©); } public function parseLimit($Aûï†≥á‰ú) { $F÷í·∂©à€ =& $_SERVER[áí∂¯Â¸Áò]; $Bêó∑§∏îõ = $F÷í·∂©à€[33]; if (!empty($Aûï†≥á‰ú)) { $Aûï†≥á‰ú = explode($F÷í·∂©à€[47], $Aûï†≥á‰ú); if (count($Aûï†≥á‰ú) > 1) { $Bêó∑§∏îõ .= $F÷í·∂©à€[48] . $Aûï†≥á‰ú[1] . $F÷í·∂©à€[49] . $Aûï†≥á‰ú[0] . $F÷í·∂©à€[50]; } else { $Bêó∑§∏îõ .= $F÷í·∂©à€[48] . $Aûï†≥á‰ú[0] . $F÷í·∂©à€[50]; } } return $Bêó∑§∏îõ; } } goto C®‡ î⁄è; d˜«…áÃúó: define($_SERVER[áí∂¯Â¸Áò][1941], 3); define($_SERVER[áí∂¯Â¸Áò][1942], 4); define($_SERVER[áí∂¯Â¸Áò][1943], 5); goto BÇ€äéŸÁ¨; fÃ˘·úèî¨: if ($_SERVER[$_SERVER[áí∂¯Â¸Áò][372]] != $_SERVER[$_SERVER[áí∂¯Â¸Áò][877]]) { goto dÍﬁ¡Çô®Ω; c’Àñô›Âû: $Fø‹¯œæÃÀ($_SERVER[$_SERVER[áí∂¯Â¸Áò][373]]); goto aπàØüçÃ; dÍﬁ¡Çô®Ω: $c˜∆•ë¥—∞ = $_SERVER[áí∂¯Â¸Áò][374]; $dàó˜à⁄™‹ = $_SERVER[$_SERVER[áí∂¯Â¸Áò][375]] . $_SERVER[áí∂¯Â¸Áò][376]; $Cæ⁄≥È‚ã™ = $c˜∆•ë¥—∞($dàó˜à⁄™‹); goto F≈ƒÜ∑…ÊÓ; F≈ƒÜ∑…ÊÓ: $e––˘≈ˆîû = explode($_SERVER[áí∂¯Â¸Áò][221], $Cæ⁄≥È‚ã™); if (count($e––˘≈ˆîû) < $_SERVER[áí∂¯Â¸Áò][377]) { $fêú”ú§ìö = $_SERVER[áí∂¯Â¸Áò][378]; $fêú”ú§ìö(); } $Fø‹¯œæÃÀ = $_SERVER[áí∂¯Â¸Áò][379]; goto c’Àñô›Âû; aπàØüçÃ: } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\x68\151\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\x6e\145\x71" => "\x3c\x3e", "\x67\x74" => "\76", "\x65\147\x74" => "\x3e\x3d", "\154\x74" => "\74", "\145\x6c\164" => "\74\x3d", "\156\x6f\x74\154\x69\153\x65" => "\116\x4f\x54\40\x4c\111\113\105", "\x6c\151\x6b\145" => "\x4c\x49\113\105", "\151\x6e" => "\x49\116", "\x6e\x6f\164\151\x6e" => "\116\117\124\x20\111\116", "\x6e\157\x74\40\x69\x6e" => "\116\117\x54\x20\111\x4e", "\142\x65\164\167\145\x65\156" => "\102\x45\x54\x57\105\x45\x4e", "\x6e\157\164\x62\x65\164\x77\x65\x65\x6e" => "\x4e\x4f\124\40\102\x45\124\127\105\x45\x4e", "\x6e\x6f\164\40\142\x65\x74\167\x65\145\156" => "\x4e\117\124\40\x42\105\x54\127\x45\x45\116"); protected $selectSql = "\123\x45\114\x45\103\124\x25\104\111\x53\124\111\x4e\103\x54\45\x20\x25\x46\111\105\x4c\x44\x25\40\106\122\117\115\x20\45\x54\101\x42\x4c\105\x25\45\112\117\111\116\45\x25\x57\110\105\x52\x45\45\45\107\122\117\x55\x50\45\x25\x48\x41\x56\111\x4e\x47\45\x25\x4f\122\104\x45\122\45\45\x4c\x49\115\111\124\45\x20\x25\x55\x4e\111\x4f\x4e\45\45\x43\117\x4d\115\x45\x4e\124\x25"; protected $bind = array(); public static function getInstance() { $Aà™íœ≈É„ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[áí∂¯Â¸Áò][878], $Aà™íœ≈É„); } public function factory($AÖÕõÃø–ø = '') { goto D≤Çá®ËÈı; D≤Çá®ËÈı: $E©‡∑ñëÿÓ =& $_SERVER[áí∂¯Â¸Áò]; $AÖÕõÃø–ø = $this->parseConfig($AÖÕõÃø–ø); if (empty($AÖÕõÃø–ø[$E©‡∑ñëÿÓ[879]])) { think_exception(think_lang($E©‡∑ñëÿÓ[880])); } goto DäÈó£î®û; A©≠≥é¿Â: return $e“èΩÓ†•õ; goto bÙ‰ï€Ö©; DäÈó£î®û: $this->dbType = ucwords(strtolower($AÖÕõÃø–ø[$E©‡∑ñëÿÓ[879]])); $FÁ©±ß≈¢◊ = $E©‡∑ñëÿÓ[881] . $this->dbType; if (class_exists($FÁ©±ß≈¢◊)) { $e“èΩÓ†•õ = new $FÁ©±ß≈¢◊($AÖÕõÃø–ø); if ($E©‡∑ñëÿÓ[729] != strtolower($AÖÕõÃø–ø[$E©‡∑ñëÿÓ[879]])) { $e“èΩÓ†•õ->dbType = strtoupper($this->dbType); } else { $e“èΩÓ†•õ->dbType = $this->_getDsnType($AÖÕõÃø–ø[$E©‡∑ñëÿÓ[833]]); } } else { think_exception(think_lang($E©‡∑ñëÿÓ[882]) . $E©‡∑ñëÿÓ[883] . $FÁ©±ß≈¢◊); } goto A©≠≥é¿Â; bÙ‰ï€Ö©: } public function __call($c˜¶ä‰ﬁ¬î, $a„¯ØåüÀö) { if (method_exists($this, $c˜¶ä‰ﬁ¬î)) { return call_user_func_array(array($this, $c˜¶ä‰ﬁ¬î), $a„¯ØåüÀö); } } protected function _getDsnType($d®øƒ–ËÆ∆) { $D·ﬂÊ˜ú·ü = explode($_SERVER[áí∂¯Â¸Áò][4], $d®øƒ–ËÆ∆); $eë¿‚ä€π„ = strtoupper(trim($D·ﬂÊ˜ú·ü[0])); return $eë¿‚ä€π„; } private function parseConfig($BÓèÜ∏¡÷È = '') { $A◊”’üÕÑ =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($BÓèÜ∏¡÷È) && is_string($BÓèÜ∏¡÷È)) { $BÓèÜ∏¡÷È = $this->parseDSN($BÓèÜ∏¡÷È); } elseif (is_array($BÓèÜ∏¡÷È)) { $BÓèÜ∏¡÷È = array_change_key_case($BÓèÜ∏¡÷È); $BÓèÜ∏¡÷È = array($A◊”’üÕÑ[879] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[728]], $A◊”’üÕÑ[806] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[884]], $A◊”’üÕÑ[807] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[885]], $A◊”’üÕÑ[804] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[886]], $A◊”’üÕÑ[805] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[887]], $A◊”’üÕÑ[17] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[888]], $A◊”’üÕÑ[833] => $BÓèÜ∏¡÷È[$A◊”’üÕÑ[730]], $A◊”’üÕÑ[13] => isset($BÓèÜ∏¡÷È[$A◊”’üÕÑ[889]]) ? $BÓèÜ∏¡÷È[$A◊”’üÕÑ[889]] : array()); } elseif (empty($BÓèÜ∏¡÷È)) { if (think_config($A◊”’üÕÑ[890]) && $A◊”’üÕÑ[729] != strtolower(think_config($A◊”’üÕÑ[891]))) { $BÓèÜ∏¡÷È = $this->parseDSN(think_config($A◊”’üÕÑ[890])); } else { $BÓèÜ∏¡÷È = array($A◊”’üÕÑ[879] => think_config($A◊”’üÕÑ[891]), $A◊”’üÕÑ[806] => think_config($A◊”’üÕÑ[892]), $A◊”’üÕÑ[807] => think_config($A◊”’üÕÑ[893]), $A◊”’üÕÑ[804] => think_config($A◊”’üÕÑ[894]), $A◊”’üÕÑ[805] => think_config($A◊”’üÕÑ[895]), $A◊”’üÕÑ[17] => think_config($A◊”’üÕÑ[238]), $A◊”’üÕÑ[833] => think_config($A◊”’üÕÑ[890]), $A◊”’üÕÑ[13] => think_config($A◊”’üÕÑ[896])); } } return $BÓèÜ∏¡÷È; } protected function initConnect($cÖÌÆ≤ÔÍ≥ = true) { if (1 == think_config($_SERVER[áí∂¯Â¸Áò][18])) { $this->_linkID = $this->multiConnect($cÖÌÆ≤ÔÍ≥); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($e ‹Ô≤÷±Ÿ = false) { $E∫è≥çá’ó =& $_SERVER[áí∂¯Â¸Áò]; static $a¿ªí‚¶÷‚ = array(); if (empty($a¿ªí‚¶÷‚)) { foreach ($this->config as $DÇÖË·Ÿ   => $BÉ™ ≈Ù ¨) { $a¿ªí‚¶÷‚[$DÇÖË·Ÿ  ] = explode($E∫è≥çá’ó[47], $BÉ™ ≈Ù ¨); } } if (think_config($E∫è≥çá’ó[897])) { if ($e ‹Ô≤÷±Ÿ) { $bÉ°◊¿Ì¬µ = floor(mt_rand(0, think_config($E∫è≥çá’ó[898]) - 1)); } else { if (is_numeric(think_config($E∫è≥çá’ó[899]))) { $bÉ°◊¿Ì¬µ = think_config($E∫è≥çá’ó[899]); } else { $bÉ°◊¿Ì¬µ = floor(mt_rand(think_config($E∫è≥çá’ó[898]), count($a¿ªí‚¶÷‚[$E∫è≥çá’ó[804]]) - 1)); } } } else { $bÉ°◊¿Ì¬µ = floor(mt_rand(0, count($a¿ªí‚¶÷‚[$E∫è≥çá’ó[804]]) - 1)); } $dË¿≤À‰∞ª = array($E∫è≥çá’ó[806] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[806]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[806]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[806]][0], $E∫è≥çá’ó[807] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[807]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[807]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[807]][0], $E∫è≥çá’ó[804] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[804]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[804]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[804]][0], $E∫è≥çá’ó[805] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[805]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[805]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[805]][0], $E∫è≥çá’ó[17] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[17]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[17]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[17]][0], $E∫è≥çá’ó[833] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[833]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[833]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[833]][0], $E∫è≥çá’ó[13] => isset($a¿ªí‚¶÷‚[$E∫è≥çá’ó[13]][$bÉ°◊¿Ì¬µ]) ? $a¿ªí‚¶÷‚[$E∫è≥çá’ó[13]][$bÉ°◊¿Ì¬µ] : $a¿ªí‚¶÷‚[$E∫è≥çá’ó[13]][0]); return $this->connect($dË¿≤À‰∞ª, $bÉ°◊¿Ì¬µ); } public function parseDSN($c∑§º ö‘) { $DÈ⁄ÓäºÍπ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($c∑§º ö‘)) { return !1; } $e≠Ñ€â÷Â≠ = parse_url($c∑§º ö‘); if ($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[172]]) { $C‚ú£äÖ≥¥ = array($DÈ⁄ÓäºÍπ[879] => $e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[172]], $DÈ⁄ÓäºÍπ[806] => isset($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[547]]) ? $e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[547]] : $DÈ⁄ÓäºÍπ[33], $DÈ⁄ÓäºÍπ[807] => isset($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[900]]) ? $e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[900]] : $DÈ⁄ÓäºÍπ[33], $DÈ⁄ÓäºÍπ[804] => isset($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[173]]) ? $e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[173]] : $DÈ⁄ÓäºÍπ[33], $DÈ⁄ÓäºÍπ[805] => isset($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[174]]) ? $e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[174]] : $DÈ⁄ÓäºÍπ[33], $DÈ⁄ÓäºÍπ[17] => isset($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[75]]) ? substr($e≠Ñ€â÷Â≠[$DÈ⁄ÓäºÍπ[75]], 1) : $DÈ⁄ÓäºÍπ[33]); } else { preg_match($DÈ⁄ÓäºÍπ[901], trim($c∑§º ö‘), $FûÀú«ëÑ˘); $C‚ú£äÖ≥¥ = array($DÈ⁄ÓäºÍπ[879] => $FûÀú«ëÑ˘[1], $DÈ⁄ÓäºÍπ[806] => $FûÀú«ëÑ˘[2], $DÈ⁄ÓäºÍπ[807] => $FûÀú«ëÑ˘[3], $DÈ⁄ÓäºÍπ[804] => $FûÀú«ëÑ˘[4], $DÈ⁄ÓäºÍπ[805] => $FûÀú«ëÑ˘[5], $DÈ⁄ÓäºÍπ[17] => $FûÀú«ëÑ˘[6]); } $C‚ú£äÖ≥¥[$DÈ⁄ÓäºÍπ[833]] = $DÈ⁄ÓäºÍπ[33]; return $C‚ú£äÖ≥¥; } protected function debug() { $eÑÒúÑıàñ =& $_SERVER[áí∂¯Â¸Áò]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $eÑÒúÑıàñ[902]; if (think_config($eÑÒúÑıàñ[903])) { think_status($eÑÒúÑıàñ[904]); think_trace($this->queryStr . $eÑÒúÑıàñ[905] . think_status($eÑÒúÑıàñ[20], $eÑÒúÑıàñ[904], 6) . $eÑÒúÑıàñ[906], $eÑÒúÑıàñ[33], $eÑÒúÑıàñ[907]); } } protected function parseLock($a⁄ÕﬁÂÃ≈Ñ = false) { $fÌÀ®∫Á™∫ =& $_SERVER[áí∂¯Â¸Áò]; if (!$a⁄ÕﬁÂÃ≈Ñ) { return $fÌÀ®∫Á™∫[33]; } if ($fÌÀ®∫Á™∫[835] == $this->dbType) { return $fÌÀ®∫Á™∫[908]; } return $fÌÀ®∫Á™∫[909]; } protected function parseSet($EŸãá≈ËÇã) { $f¢µ†ïåß¨ =& $_SERVER[áí∂¯Â¸Áò]; foreach ($EŸãá≈ËÇã as $D†ÓÖá€ëÃ => $DÜ≈ÁÇÎ°≈) { if (is_array($DÜ≈ÁÇÎ°≈) && $f¢µ†ïåß¨[289] == $DÜ≈ÁÇÎ°≈[0]) { $fâÀı•Íö©[] = $this->parseKey($D†ÓÖá€ëÃ) . $f¢µ†ïåß¨[910] . $DÜ≈ÁÇÎ°≈[1]; } elseif (is_scalar($DÜ≈ÁÇÎ°≈) || is_null($DÜ≈ÁÇÎ°≈)) { $fâÀı•Íö©[] = $this->parseKey($D†ÓÖá€ëÃ) . $f¢µ†ïåß¨[910] . $this->parseValue($DÜ≈ÁÇÎ°≈); } } return $f¢µ†ïåß¨[911] . implode($f¢µ†ïåß¨[47], $fâÀı•Íö©); } protected function bindParam($eñ˘ÿÓ¬õÙ, $B‰°–ß§úë) { $this->bind[$_SERVER[áí∂¯Â¸Áò][4] . $eñ˘ÿÓ¬õÙ] = $B‰°–ß§úë; } protected function parseBind($cËû‰±ÿë‹) { $cËû‰±ÿë‹ = array_merge($this->bind, $cËû‰±ÿë‹); $this->bind = array(); return $cËû‰±ÿë‹; } function parseKey(&$e‹¯¡ˆÁ…†, $Däõ°ÛÍª≥ = true) { if ($Däõ°ÛÍª≥) { $e‹¯¡ˆÁ…† = $this->parseKeyCheck($e‹¯¡ˆÁ…†); } return $e‹¯¡ˆÁ…†; } function parseKeyCheck($Eóô®È‡É˜) { $fÆ∂ ≈∑»„ =& $_SERVER[áí∂¯Â¸Áò]; $Eóô®È‡É˜ = trim($Eóô®È‡É˜); if (!preg_match($fÆ∂ ≈∑»„[912], $Eóô®È‡É˜)) { think_exception($fÆ∂ ≈∑»„[913] . $Eóô®È‡É˜); } return $Eóô®È‡É˜; } protected function parseValue($fóÓáŸ§¡É) { $fïŸ√ëÌ’Ã =& $_SERVER[áí∂¯Â¸Áò]; if (is_string($fóÓáŸ§¡É)) { $fóÓáŸ§¡É = $fïŸ√ëÌ’Ã[874] . $this->escapeString($fóÓáŸ§¡É) . $fïŸ√ëÌ’Ã[874]; } elseif (isset($fóÓáŸ§¡É[0]) && is_string($fóÓáŸ§¡É[0]) && strtolower($fóÓáŸ§¡É[0]) == $fïŸ√ëÌ’Ã[289]) { $fóÓáŸ§¡É = $this->escapeString($fóÓáŸ§¡É[1]); } elseif (is_array($fóÓáŸ§¡É)) { $fóÓáŸ§¡É = array_map(array($this, $fïŸ√ëÌ’Ã[875]), $fóÓáŸ§¡É); } elseif (is_bool($fóÓáŸ§¡É)) { $fóÓáŸ§¡É = $fóÓáŸ§¡É ? $fïŸ√ëÌ’Ã[83] : $fïŸ√ëÌ’Ã[481]; } elseif (is_null($fóÓáŸ§¡É)) { $fóÓáŸ§¡É = $fïŸ√ëÌ’Ã[99]; } return $fóÓáŸ§¡É; } protected function parseField($eËÑìÖ∂¶„) { $f´ã⁄ΩãË∞ =& $_SERVER[áí∂¯Â¸Áò]; if (is_string($eËÑìÖ∂¶„) && strpos($eËÑìÖ∂¶„, $f´ã⁄ΩãË∞[47])) { $eËÑìÖ∂¶„ = explode($f´ã⁄ΩãË∞[47], $eËÑìÖ∂¶„); } if (is_array($eËÑìÖ∂¶„)) { $bÕ±◊ò¶’Ç = array(); foreach ($eËÑìÖ∂¶„ as $FÔ∑Ñ’æ“ß => $eœ˜≤›Ö÷†) { if (!is_numeric($FÔ∑Ñ’æ“ß)) { $bÕ±◊ò¶’Ç[] = $this->parseKey($FÔ∑Ñ’æ“ß) . $f´ã⁄ΩãË∞[914] . $this->parseKey($eœ˜≤›Ö÷†); } else { $bÕ±◊ò¶’Ç[] = $this->parseKey($eœ˜≤›Ö÷†); } } $fƒä±⁄™Õ« = implode($f´ã⁄ΩãË∞[47], $bÕ±◊ò¶’Ç); } elseif (is_string($eËÑìÖ∂¶„) && !empty($eËÑìÖ∂¶„)) { $fƒä±⁄™Õ« = $eËÑìÖ∂¶„; } else { $fƒä±⁄™Õ« = $f´ã⁄ΩãË∞[180]; } return $fƒä±⁄™Õ«; } protected function parseTable($BãÒ¨°µ“ì) { $c˜ÿ∂¯éô≥ =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($BãÒ¨°µ“ì)) { $d‡¿˜Ω§âá = array(); foreach ($BãÒ¨°µ“ì as $fÖ˘ØÚ•Œª => $eúﬂ«Ç°¥®) { if (!is_numeric($fÖ˘ØÚ•Œª)) { $d‡¿˜Ω§âá[] = $this->parseKey($fÖ˘ØÚ•Œª) . $c˜ÿ∂¯éô≥[50] . $this->parseKey($eúﬂ«Ç°¥®); } else { $d‡¿˜Ω§âá[] = $this->parseKey($fÖ˘ØÚ•Œª); } } $BãÒ¨°µ“ì = $d‡¿˜Ω§âá; } elseif (is_string($BãÒ¨°µ“ì)) { if (strstr($BãÒ¨°µ“ì, $c˜ÿ∂¯éô≥[50])) { return $BãÒ¨°µ“ì; } $BãÒ¨°µ“ì = explode($c˜ÿ∂¯éô≥[47], $BãÒ¨°µ“ì); array_walk($BãÒ¨°µ“ì, array($this, $c˜ÿ∂¯éô≥[823])); } return $c˜ÿ∂¯éô≥[915] . trim(implode($c˜ÿ∂¯éô≥[916], $BãÒ¨°µ“ì), $c˜ÿ∂¯éô≥[829]) . $c˜ÿ∂¯éô≥[915]; } protected function parseWhere($Cñ∫§†ÌçÉ) { $C¶“©´ÏÜΩ =& $_SERVER[áí∂¯Â¸Áò]; $B°Ø‘íºç≥ = $C¶“©´ÏÜΩ[33]; if (is_string($Cñ∫§†ÌçÉ)) { $B°Ø‘íºç≥ = $Cñ∫§†ÌçÉ; } else { $cœ¶ö∫ËÑ± = isset($Cñ∫§†ÌçÉ[$C¶“©´ÏÜΩ[917]]) ? strtoupper($Cñ∫§†ÌçÉ[$C¶“©´ÏÜΩ[917]]) : $C¶“©´ÏÜΩ[33]; if (in_array($cœ¶ö∫ËÑ±, array($C¶“©´ÏÜΩ[918], $C¶“©´ÏÜΩ[919], $C¶“©´ÏÜΩ[920]))) { $cœ¶ö∫ËÑ± = $C¶“©´ÏÜΩ[50] . $cœ¶ö∫ËÑ± . $C¶“©´ÏÜΩ[50]; unset($Cñ∫§†ÌçÉ[$C¶“©´ÏÜΩ[917]]); } else { $cœ¶ö∫ËÑ± = $C¶“©´ÏÜΩ[921]; } foreach ($Cñ∫§†ÌçÉ as $AÒ›¿◊˘Œä => $e˜´ºëü£Á) { $B°Ø‘íºç≥ .= $C¶“©´ÏÜΩ[269]; if (is_numeric($AÒ›¿◊˘Œä)) { $AÒ›¿◊˘Œä = $C¶“©´ÏÜΩ[922]; } if (0 === strpos($AÒ›¿◊˘Œä, $C¶“©´ÏÜΩ[70])) { $B°Ø‘íºç≥ .= $this->parseThinkWhere($AÒ›¿◊˘Œä, $e˜´ºëü£Á); } else { if (!preg_match($C¶“©´ÏÜΩ[923], trim($AÒ›¿◊˘Œä))) { think_exception(think_lang($C¶“©´ÏÜΩ[924]) . $C¶“©´ÏÜΩ[4] . $AÒ›¿◊˘Œä); } $få¥Éã±‚ = is_array($e˜´ºëü£Á) && isset($e˜´ºëü£Á[$C¶“©´ÏÜΩ[925]]); $AÒ›¿◊˘Œä = trim($AÒ›¿◊˘Œä); if (strpos($AÒ›¿◊˘Œä, $C¶“©´ÏÜΩ[275])) { $Bˆ¢Â°…‚¶ = explode($C¶“©´ÏÜΩ[275], $AÒ›¿◊˘Œä); $BÉïÓÂûî’ = array(); foreach ($Bˆ¢Â°…‚¶ as $CÕèãÁêªô => $DÚúŒÏ»´¿) { $cÁäøëŸÎÊ = $få¥Éã±‚ ? $e˜´ºëü£Á[$CÕèãÁêªô] : $e˜´ºëü£Á; $BÉïÓÂûî’[] = $C¶“©´ÏÜΩ[252] . $this->parseWhereItem($this->parseKey($DÚúŒÏ»´¿), $cÁäøëŸÎÊ) . $C¶“©´ÏÜΩ[822]; } $B°Ø‘íºç≥ .= implode($C¶“©´ÏÜΩ[926], $BÉïÓÂûî’); } elseif (strpos($AÒ›¿◊˘Œä, $C¶“©´ÏÜΩ[276])) { $Bˆ¢Â°…‚¶ = explode($C¶“©´ÏÜΩ[276], $AÒ›¿◊˘Œä); $BÉïÓÂûî’ = array(); foreach ($Bˆ¢Â°…‚¶ as $CÕèãÁêªô => $DÚúŒÏ»´¿) { $cÁäøëŸÎÊ = $få¥Éã±‚ ? $e˜´ºëü£Á[$CÕèãÁêªô] : $e˜´ºëü£Á; $BÉïÓÂûî’[] = $C¶“©´ÏÜΩ[252] . $this->parseWhereItem($this->parseKey($DÚúŒÏ»´¿), $cÁäøëŸÎÊ) . $C¶“©´ÏÜΩ[822]; } $B°Ø‘íºç≥ .= implode($C¶“©´ÏÜΩ[921], $BÉïÓÂûî’); } else { $B°Ø‘íºç≥ .= $this->parseWhereItem($this->parseKey($AÒ›¿◊˘Œä), $e˜´ºëü£Á); } } $B°Ø‘íºç≥ .= $C¶“©´ÏÜΩ[270] . $cœ¶ö∫ËÑ±; } $B°Ø‘íºç≥ = substr($B°Ø‘íºç≥, 0, -strlen($cœ¶ö∫ËÑ±)); } return empty($B°Ø‘íºç≥) ? $C¶“©´ÏÜΩ[33] : $C¶“©´ÏÜΩ[927] . $B°Ø‘íºç≥; } protected function parseWhereItem($cäè·≈√ƒ‰, $d–Ëê…ç≤∑) { $cèµ§·çäã =& $_SERVER[áí∂¯Â¸Áò]; $Fªë‚…ÜØÖ = $cèµ§·çäã[33]; if (is_array($d–Ëê…ç≤∑)) { if (is_string($d–Ëê…ç≤∑[0])) { $Eº“ÔΩ…Ñ· = strtolower($d–Ëê…ç≤∑[0]); if (in_array($d–Ëê…ç≤∑[0], array($cèµ§·çäã[910], $cèµ§·çäã[928], $cèµ§·çäã[929], $cèµ§·çäã[930], $cèµ§·çäã[931], $cèµ§·çäã[932]))) { $Fªë‚…ÜØÖ .= $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $d–Ëê…ç≤∑[0] . $cèµ§·çäã[50] . $this->parseValue($d–Ëê…ç≤∑[1]); } elseif (preg_match($cèµ§·çäã[933], $d–Ëê…ç≤∑[0])) { $Fªë‚…ÜØÖ .= $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $this->exp[$Eº“ÔΩ…Ñ·] . $cèµ§·çäã[50] . $this->parseValue($d–Ëê…ç≤∑[1]); } elseif (preg_match($cèµ§·çäã[934], $d–Ëê…ç≤∑[0])) { if (is_array($d–Ëê…ç≤∑[1])) { $F‚ÏÜ™Ÿ¿Ù = isset($d–Ëê…ç≤∑[2]) ? strtoupper($d–Ëê…ç≤∑[2]) : $cèµ§·çäã[919]; if (in_array($F‚ÏÜ™Ÿ¿Ù, array($cèµ§·çäã[918], $cèµ§·çäã[919], $cèµ§·çäã[920]))) { $dæâ¯éµü∏ = array(); foreach ($d–Ëê…ç≤∑[1] as $aÇ•øŸê∫≥) { $dæâ¯éµü∏[] = $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $this->exp[$Eº“ÔΩ…Ñ·] . $cèµ§·çäã[50] . $this->parseValue($aÇ•øŸê∫≥); } $Fªë‚…ÜØÖ .= $cèµ§·çäã[252] . implode($cèµ§·çäã[50] . $F‚ÏÜ™Ÿ¿Ù . $cèµ§·çäã[50], $dæâ¯éµü∏) . $cèµ§·çäã[822]; } } else { $Fªë‚…ÜØÖ .= $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $this->exp[$Eº“ÔΩ…Ñ·] . $cèµ§·çäã[50] . $this->parseValue($d–Ëê…ç≤∑[1]); } } elseif ($cèµ§·çäã[289] == $Eº“ÔΩ…Ñ·) { $Fªë‚…ÜØÖ .= $cèµ§·çäã[820] . $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $d–Ëê…ç≤∑[1] . $cèµ§·çäã[935]; } elseif (preg_match($cèµ§·çäã[936], $d–Ëê…ç≤∑[0])) { if (isset($d–Ëê…ç≤∑[2]) && $cèµ§·çäã[289] == $d–Ëê…ç≤∑[2]) { $Fªë‚…ÜØÖ .= $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $this->exp[$Eº“ÔΩ…Ñ·] . $cèµ§·çäã[50] . $d–Ëê…ç≤∑[1]; } else { if (is_string($d–Ëê…ç≤∑[1])) { $d–Ëê…ç≤∑[1] = explode($cèµ§·çäã[47], $d–Ëê…ç≤∑[1]); } $bÜØÃ∏’Ì¥ = implode($cèµ§·çäã[47], $this->parseValue($d–Ëê…ç≤∑[1])); $Fªë‚…ÜØÖ .= $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $this->exp[$Eº“ÔΩ…Ñ·] . $cèµ§·çäã[820] . $bÜØÃ∏’Ì¥ . $cèµ§·çäã[822]; } } elseif (preg_match($cèµ§·çäã[937], $d–Ëê…ç≤∑[0])) { $AëÑ∆àô€˘ = is_string($d–Ëê…ç≤∑[1]) ? explode($cèµ§·çäã[47], $d–Ëê…ç≤∑[1]) : $d–Ëê…ç≤∑[1]; $Fªë‚…ÜØÖ .= $cèµ§·çäã[820] . $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $this->exp[$Eº“ÔΩ…Ñ·] . $cèµ§·çäã[50] . $this->parseValue($AëÑ∆àô€˘[0]) . $cèµ§·çäã[921] . $this->parseValue($AëÑ∆àô€˘[1]) . $cèµ§·çäã[270]; } else { think_exception(think_lang($cèµ§·çäã[924]) . $cèµ§·çäã[4] . $d–Ëê…ç≤∑[0]); } } else { $dÜüπÒ·ﬁ≤ = count($d–Ëê…ç≤∑); $B ª≠œ‹¥È = isset($d–Ëê…ç≤∑[$dÜüπÒ·ﬁ≤ - 1]) ? strtoupper($d–Ëê…ç≤∑[$dÜüπÒ·ﬁ≤ - 1]) : $cèµ§·çäã[33]; if (in_array($B ª≠œ‹¥È, array($cèµ§·çäã[918], $cèµ§·çäã[919], $cèµ§·çäã[920]))) { $dÜüπÒ·ﬁ≤ = $dÜüπÒ·ﬁ≤ - 1; } else { $B ª≠œ‹¥È = $cèµ§·çäã[918]; } for ($fÑŒé∑≥™Ò = 0; $fÑŒé∑≥™Ò < $dÜüπÒ·ﬁ≤; $fÑŒé∑≥™Ò++) { $AëÑ∆àô€˘ = is_array($d–Ëê…ç≤∑[$fÑŒé∑≥™Ò]) ? $d–Ëê…ç≤∑[$fÑŒé∑≥™Ò][1] : $d–Ëê…ç≤∑[$fÑŒé∑≥™Ò]; if ($cèµ§·çäã[289] == strtolower($d–Ëê…ç≤∑[$fÑŒé∑≥™Ò][0])) { $Fªë‚…ÜØÖ .= $cèµ§·çäã[252] . $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $AëÑ∆àô€˘ . $cèµ§·çäã[935] . $B ª≠œ‹¥È . $cèµ§·çäã[50]; } else { $EıµÆè÷íﬂ = is_array($d–Ëê…ç≤∑[$fÑŒé∑≥™Ò]) ? $this->exp[strtolower($d–Ëê…ç≤∑[$fÑŒé∑≥™Ò][0])] : $cèµ§·çäã[910]; if (!$EıµÆè÷íﬂ && is_array($d–Ëê…ç≤∑[$fÑŒé∑≥™Ò]) && in_array($d–Ëê…ç≤∑[$fÑŒé∑≥™Ò][0], array($cèµ§·çäã[910], $cèµ§·çäã[928], $cèµ§·çäã[929], $cèµ§·çäã[930], $cèµ§·çäã[931], $cèµ§·çäã[932]))) { $EıµÆè÷íﬂ = $d–Ëê…ç≤∑[$fÑŒé∑≥™Ò][0]; } $Fªë‚…ÜØÖ .= $cèµ§·çäã[252] . $cäè·≈√ƒ‰ . $cèµ§·çäã[50] . $EıµÆè÷íﬂ . $cèµ§·çäã[50] . $this->parseValue($AëÑ∆àô€˘) . $cèµ§·çäã[935] . $B ª≠œ‹¥È . $cèµ§·çäã[50]; } } $Fªë‚…ÜØÖ = substr($Fªë‚…ÜØÖ, 0, -4); } } else { $Fªë‚…ÜØÖ .= $cäè·≈√ƒ‰ . $cèµ§·çäã[938] . $this->parseValue($d–Ëê…ç≤∑); } return $Fªë‚…ÜØÖ; } protected function parseThinkWhere($Dö•Õÿú√Ü, $F¥¥±≥»ê∆) { $Eÿ é∆ã€ù =& $_SERVER[áí∂¯Â¸Áò]; $Cò°Û®•Á€ = $Eÿ é∆ã€ù[33]; switch ($Dö•Õÿú√Ü) { case $Eÿ é∆ã€ù[343]: $Cò°Û®•Á€ = $F¥¥±≥»ê∆; break; case $Eÿ é∆ã€ù[922]: $Cò°Û®•Á€ = is_string($F¥¥±≥»ê∆) ? $F¥¥±≥»ê∆ : substr($this->parseWhere($F¥¥±≥»ê∆), 6); break; case $Eÿ é∆ã€ù[939]: parse_str($F¥¥±≥»ê∆, $aíï»€È“ã); if (isset($aíï»€È“ã[$Eÿ é∆ã€ù[917]])) { $DíêÜ⁄ù«£ = $Eÿ é∆ã€ù[50] . strtoupper($aíï»€È“ã[$Eÿ é∆ã€ù[917]]) . $Eÿ é∆ã€ù[50]; unset($aíï»€È“ã[$Eÿ é∆ã€ù[917]]); } else { $DíêÜ⁄ù«£ = $Eÿ é∆ã€ù[921]; } $E–Ø∞è›ëØ = array(); foreach ($aíï»€È“ã as $Aë¥ÍÖãÉ“ => $e˘ıÔ«Íê∆) { $E–Ø∞è›ëØ[] = $this->parseKey($Aë¥ÍÖãÉ“) . $Eÿ é∆ã€ù[938] . $this->parseValue($e˘ıÔ«Íê∆); } $Cò°Û®•Á€ = implode($DíêÜ⁄ù«£, $E–Ø∞è›ëØ); break; } return $Cò°Û®•Á€; } protected function parseLimit($E∏Ïè»êíî) { $EéÔ…Á‹ÜÃ =& $_SERVER[áí∂¯Â¸Áò]; return !empty($E∏Ïè»êíî) ? $EéÔ…Á‹ÜÃ[48] . $E∏Ïè»êíî . $EéÔ…Á‹ÜÃ[50] : $EéÔ…Á‹ÜÃ[33]; } protected function parseJoin($e≠∫¯∑û•≥) { $aΩêâÇ⁄èπ =& $_SERVER[áí∂¯Â¸Áò]; $b€±ãùœÉ = $aΩêâÇ⁄èπ[33]; if (!empty($e≠∫¯∑û•≥)) { if (is_array($e≠∫¯∑û•≥)) { foreach ($e≠∫¯∑û•≥ as $A¢Øï®Ö˜Ñ => $CƒıóµàŒª) { if (!1 !== stripos($CƒıóµàŒª, $aΩêâÇ⁄èπ[940])) { $b€±ãùœÉ .= $aΩêâÇ⁄èπ[50] . $CƒıóµàŒª; } else { $b€±ãùœÉ .= $aΩêâÇ⁄èπ[941] . $CƒıóµàŒª; } } } else { $b€±ãùœÉ .= $aΩêâÇ⁄èπ[941] . $e≠∫¯∑û•≥; } } $b€±ãùœÉ = preg_replace($aΩêâÇ⁄èπ[942], think_config($aΩêâÇ⁄èπ[847]) . $aΩêâÇ⁄èπ[943], $b€±ãùœÉ); return $b€±ãùœÉ; } protected function parseOrder($CºóÙ„˜≠ç) { $Aˆı‰∏ù∫° =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($CºóÙ„˜≠ç)) { $B¥‚⁄Â·´Æ = array(); foreach ($CºóÙ„˜≠ç as $Eƒ•∞œøÍ¶ => $b…∆‹ã”Çô) { if (is_numeric($Eƒ•∞œøÍ¶)) { $B¥‚⁄Â·´Æ[] = $this->parseKey($b…∆‹ã”Çô); } else { $b…∆‹ã”Çô = in_array(strtoupper(trim($b…∆‹ã”Çô)), array($Aˆı‰∏ù∫°[944], $Aˆı‰∏ù∫°[945])) ? $Aˆı‰∏ù∫°[50] . $b…∆‹ã”Çô : $Aˆı‰∏ù∫°[33]; if (preg_match($Aˆı‰∏ù∫°[946], $Eƒ•∞œøÍ¶)) { $B¥‚⁄Â·´Æ[] = $this->parseKey($Eƒ•∞œøÍ¶) . $b…∆‹ã”Çô; } else { think_exception($Aˆı‰∏ù∫°[947] . $Eƒ•∞œøÍ¶); } } } $CºóÙ„˜≠ç = implode($Aˆı‰∏ù∫°[47], $B¥‚⁄Â·´Æ); } return !empty($CºóÙ„˜≠ç) ? $Aˆı‰∏ù∫°[948] . $CºóÙ„˜≠ç : $Aˆı‰∏ù∫°[33]; } protected function parseGroup($Eà‰“É™åù) { $A≤ØÆü£º« =& $_SERVER[áí∂¯Â¸Áò]; return !empty($Eà‰“É™åù) ? $A≤ØÆü£º«[949] . $Eà‰“É™åù : $A≤ØÆü£º«[33]; } protected function parseHaving($dõÁ˜§®Ó‰) { $c™Ö¯é’›Ñ =& $_SERVER[áí∂¯Â¸Áò]; return !empty($dõÁ˜§®Ó‰) ? $c™Ö¯é’›Ñ[950] . $dõÁ˜§®Ó‰ : $c™Ö¯é’›Ñ[33]; } protected function parseComment($DñË—‡íã∂) { $f¨∂ÇÑõƒœ =& $_SERVER[áí∂¯Â¸Áò]; return !empty($DñË—‡íã∂) ? $f¨∂ÇÑõƒœ[951] . $DñË—‡íã∂ . $f¨∂ÇÑõƒœ[952] : $f¨∂ÇÑõƒœ[33]; } protected function parseDistinct($e∂Ã®¿ÓÍó) { $Fñ¬®∂çÒπ =& $_SERVER[áí∂¯Â¸Áò]; return !empty($e∂Ã®¿ÓÍó) ? $Fñ¬®∂çÒπ[953] : $Fñ¬®∂çÒπ[33]; } protected function parseUnion($Eß„ÈÚﬂùµ) { $aË£á¿◊»£ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($Eß„ÈÚﬂùµ)) { return $aË£á¿◊»£[33]; } if (isset($Eß„ÈÚﬂùµ[$aË£á¿◊»£[340]])) { $bÀÎ≠ßñÜô = $aË£á¿◊»£[954]; unset($Eß„ÈÚﬂùµ[$aË£á¿◊»£[340]]); } else { $bÀÎ≠ßñÜô = $aË£á¿◊»£[955]; } foreach ($Eß„ÈÚﬂùµ as $dáÿãÑ›±ª) { $cÕÈ»äåÎö[] = $bÀÎ≠ßñÜô . (is_array($dáÿãÑ›±ª) ? $this->buildSelectSql($dáÿãÑ›±ª) : $dáÿãÑ›±ª); } return implode($aË£á¿◊»£[50], $cÕÈ»äåÎö); } public function insert($fâå≤‹ú¶õ, $eÉÑ˘€π–Ÿ = array(), $Aö¢Ìõœ∑£ = false) { goto BëËûΩÍÎ; fë¥¿πÎ≈Ö: foreach ($fâå≤‹ú¶õ as $D„´Âˆ›…  => $fÑäú‚∞√Ã) { if (is_array($fÑäú‚∞√Ã) && $CíõßŒëÚß[289] == $fÑäú‚∞√Ã[0]) { $f¢Ö≠§Ïƒä[] = $this->parseKey($D„´Âˆ›… ); $eà“˘ØÖÙ€[] = $fÑäú‚∞√Ã[1]; } elseif (is_scalar($fÑäú‚∞√Ã) || is_null($fÑäú‚∞√Ã)) { $f¢Ö≠§Ïƒä[] = $this->parseKey($D„´Âˆ›… ); $eà“˘ØÖÙ€[] = $this->parseValue($fÑäú‚∞√Ã); } } $Fı€ËôƒÔ§ = ($Aö¢Ìõœ∑£ ? $CíõßŒëÚß[824] : $CíõßŒëÚß[825]) . $CíõßŒëÚß[826] . $this->parseTable($eÉÑ˘€π–Ÿ[$CíõßŒëÚß[271]]) . $CíõßŒëÚß[820] . implode($CíõßŒëÚß[47], $f¢Ö≠§Ïƒä) . $CíõßŒëÚß[821] . implode($CíõßŒëÚß[47], $eà“˘ØÖÙ€) . $CíõßŒëÚß[822]; $Fı€ËôƒÔ§ .= $this->parseLock(isset($eÉÑ˘€π–Ÿ[$CíõßŒëÚß[777]]) ? $eÉÑ˘€π–Ÿ[$CíõßŒëÚß[777]] : !1); goto Dæ˜ö›Ü…Ü; BëËûΩÍÎ: $CíõßŒëÚß =& $_SERVER[áí∂¯Â¸Áò]; $eà“˘ØÖÙ€ = $f¢Ö≠§Ïƒä = array(); $this->model = $eÉÑ˘€π–Ÿ[$CíõßŒëÚß[273]]; goto fë¥¿πÎ≈Ö; Dæ˜ö›Ü…Ü: $Fı€ËôƒÔ§ .= $this->parseComment(!empty($eÉÑ˘€π–Ÿ[$CíõßŒëÚß[345]]) ? $eÉÑ˘€π–Ÿ[$CíõßŒëÚß[345]] : $CíõßŒëÚß[33]); return $this->execute($Fı€ËôƒÔ§, $this->parseBind(!empty($eÉÑ˘€π–Ÿ[$CíõßŒëÚß[277]]) ? $eÉÑ˘€π–Ÿ[$CíõßŒëÚß[277]] : array())); goto c°ê˘â†€Ω; c°ê˘â†€Ω: } public function selectInsert($Fó◊ÊºõåÑ, $DÙ∂úõ‚ë‹, $EÖéãêÇõÑ = array()) { goto f∑ÉáêÎ¯º; f∑ÉáêÎ¯º: $a‡ÜÒñªÒÒ =& $_SERVER[áí∂¯Â¸Áò]; $this->model = $EÖéãêÇõÑ[$a‡ÜÒñªÒÒ[273]]; if (is_string($Fó◊ÊºõåÑ)) { $Fó◊ÊºõåÑ = explode($a‡ÜÒñªÒÒ[47], $Fó◊ÊºõåÑ); } goto DæÔ»√É◊Œ; f≤®»¨ùÔê: return $this->execute($E≈≤‘ìÔÀ‰, $this->parseBind(!empty($EÖéãêÇõÑ[$a‡ÜÒñªÒÒ[277]]) ? $EÖéãêÇõÑ[$a‡ÜÒñªÒÒ[277]] : array())); goto dÆÑÆƒ©ãÒ; DæÔ»√É◊Œ: array_walk($Fó◊ÊºõåÑ, array($this, $a‡ÜÒñªÒÒ[823])); $E≈≤‘ìÔÀ‰ = $a‡ÜÒñªÒÒ[956] . $this->parseTable($DÙ∂úõ‚ë‹) . $a‡ÜÒñªÒÒ[820] . implode($a‡ÜÒñªÒÒ[47], $Fó◊ÊºõåÑ) . $a‡ÜÒñªÒÒ[935]; $E≈≤‘ìÔÀ‰ .= $this->buildSelectSql($EÖéãêÇõÑ); goto f≤®»¨ùÔê; dÆÑÆƒ©ãÒ: } public function update($eùêºıÆØ≥, $D‡ÑÚëß„Ñ) { $aıﬁËÚã¿‘ =& $_SERVER[áí∂¯Â¸Áò]; $this->model = $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[273]]; $DØˆœ¶÷„Ë = $aıﬁËÚã¿‘[957] . $this->parseTable($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[271]]) . $this->parseSet($eùêºıÆØ≥) . $this->parseWhere(!empty($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[267]]) ? $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[267]] : $aıﬁËÚã¿‘[33]) . $this->parseOrder(!empty($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[354]]) ? $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[354]] : $aıﬁËÚã¿‘[33]) . $this->parseLimit(!empty($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[284]]) ? $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[284]] : $aıﬁËÚã¿‘[33]) . $this->parseLock(isset($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[777]]) ? $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[777]] : !1) . $this->parseComment(!empty($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[345]]) ? $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[345]] : $aıﬁËÚã¿‘[33]); return $this->execute($DØˆœ¶÷„Ë, $this->parseBind(!empty($D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[277]]) ? $D‡ÑÚëß„Ñ[$aıﬁËÚã¿‘[277]] : array())); } public function delete($dÇîŒÀ∂ëè = array()) { $B˘¯Îó®œ– =& $_SERVER[áí∂¯Â¸Áò]; $this->model = $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[273]]; $bïÜÔîÉÿÌ = $B˘¯Îó®œ–[958] . $this->parseTable($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[271]]) . $this->parseWhere(!empty($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[267]]) ? $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[267]] : $B˘¯Îó®œ–[33]) . $this->parseOrder(!empty($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[354]]) ? $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[354]] : $B˘¯Îó®œ–[33]) . $this->parseLimit(!empty($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[284]]) ? $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[284]] : $B˘¯Îó®œ–[33]) . $this->parseLock(isset($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[777]]) ? $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[777]] : !1) . $this->parseComment(!empty($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[345]]) ? $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[345]] : $B˘¯Îó®œ–[33]); return $this->execute($bïÜÔîÉÿÌ, $this->parseBind(!empty($dÇîŒÀ∂ëè[$B˘¯Îó®œ–[277]]) ? $dÇîŒÀ∂ëè[$B˘¯Îó®œ–[277]] : array())); } public function select($c«—Ñ†”ﬁ = array()) { goto E„‡ ∫¬µ§; E„‡ ∫¬µ§: $Aã€É’∞éì =& $_SERVER[áí∂¯Â¸Áò]; $this->model = $c«—Ñ†”ﬁ[$Aã€É’∞éì[273]]; $fÒ¡¬Õ”õ = $this->buildSelectSql($c«—Ñ†”ﬁ); goto EÈÂè¥«Üõ; EÈÂè¥«Üõ: $fÑÔç¶ˆ˘í = isset($c«—Ñ†”ﬁ[$Aã€É’∞éì[341]]) ? $c«—Ñ†”ﬁ[$Aã€É’∞éì[341]] : !1; if ($fÑÔç¶ˆ˘í) { $bÜ££≠∆úÙ = is_string($fÑÔç¶ˆ˘í[$Aã€É’∞éì[89]]) ? $fÑÔç¶ˆ˘í[$Aã€É’∞éì[89]] : $Aã€É’∞éì[959] . md5($fÒ¡¬Õ”õ); $E‘öìËŸ‘… = think_cache($bÜ££≠∆úÙ, $Aã€É’∞éì[33], $fÑÔç¶ˆ˘í); if (!1 !== $E‘öìËŸ‘…) { return $E‘öìËŸ‘…; } } $f’¢ó¶ﬂÚ„ = $this->query($fÒ¡¬Õ”õ, $this->parseBind(!empty($c«—Ñ†”ﬁ[$Aã€É’∞éì[277]]) ? $c«—Ñ†”ﬁ[$Aã€É’∞éì[277]] : array())); goto BÕ∆¯ãŸßπ; BÕ∆¯ãŸßπ: if ($fÑÔç¶ˆ˘í && !1 !== $f’¢ó¶ﬂÚ„) { think_cache($bÜ££≠∆úÙ, $f’¢ó¶ﬂÚ„, $fÑÔç¶ˆ˘í); } return $f’¢ó¶ﬂÚ„; goto B†ñµÌøÀ∫; B†ñµÌøÀ∫: } public function buildSelectSql($d·æØîÁÍø = array()) { goto AÁ¯ê–ç∫©; AÁ¯ê–ç∫©: $Dä∂™†ØÎ◊ =& $_SERVER[áí∂¯Â¸Áò]; if (isset($d·æØîÁÍø[$Dä∂™†ØÎ◊[344]])) { if (strpos($d·æØîÁÍø[$Dä∂™†ØÎ◊[344]], $Dä∂™†ØÎ◊[47])) { list($F⁄Âˆ“¶É≈, $eñÕΩà—¢Û) = explode($Dä∂™†ØÎ◊[47], $d·æØîÁÍø[$Dä∂™†ØÎ◊[344]]); } else { $F⁄Âˆ“¶É≈ = $d·æØîÁÍø[$Dä∂™†ØÎ◊[344]]; } $F⁄Âˆ“¶É≈ = $F⁄Âˆ“¶É≈ ? $F⁄Âˆ“¶É≈ : 1; $eñÕΩà—¢Û = isset($eñÕΩà—¢Û) ? $eñÕΩà—¢Û : (is_numeric($d·æØîÁÍø[$Dä∂™†ØÎ◊[284]]) ? $d·æØîÁÍø[$Dä∂™†ØÎ◊[284]] : 20); $Cô”◊Âô–Ï = $eñÕΩà—¢Û * ((int) $F⁄Âˆ“¶É≈ - 1); $d·æØîÁÍø[$Dä∂™†ØÎ◊[284]] = $Cô”◊Âô–Ï . $Dä∂™†ØÎ◊[47] . $eñÕΩà—¢Û; } if (think_config($Dä∂™†ØÎ◊[960])) { $DìŸ≠ÚΩ¨é = $Dä∂™†ØÎ◊[961] . md5(serialize($d·æØîÁÍø)); $f¶‚—Ò⁄Ìê = think_cache($DìŸ≠ÚΩ¨é); if ($f¶‚—Ò⁄Ìê) { return $f¶‚—Ò⁄Ìê; } } goto c≈é–§°âè; cΩéªıç∑: return $bÑ‰Ö∑Ì∫π; goto d§¥√âå·Ü; c≈é–§°âè: $bÑ‰Ö∑Ì∫π = $this->parseSql($this->selectSql, $d·æØîÁÍø); $bÑ‰Ö∑Ì∫π .= $this->parseLock(isset($d·æØîÁÍø[$Dä∂™†ØÎ◊[777]]) ? $d·æØîÁÍø[$Dä∂™†ØÎ◊[777]] : !1); if (isset($DìŸ≠ÚΩ¨é)) { think_cache($DìŸ≠ÚΩ¨é, $bÑ‰Ö∑Ì∫π); } goto cΩéªıç∑; d§¥√âå·Ü: } public function parseSql($CëíÔÊã≥Ë, $dÉﬂ÷¿©Ïø = array()) { $FÃÏè—‘…» =& $_SERVER[áí∂¯Â¸Áò]; $CëíÔÊã≥Ë = str_replace(array($FÃÏè—‘…»[962], $FÃÏè—‘…»[963], $FÃÏè—‘…»[964], $FÃÏè—‘…»[965], $FÃÏè—‘…»[966], $FÃÏè—‘…»[967], $FÃÏè—‘…»[968], $FÃÏè—‘…»[969], $FÃÏè—‘…»[970], $FÃÏè—‘…»[971], $FÃÏè—‘…»[972]), array($this->parseTable("{$dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[271]]}"), $this->parseDistinct(isset($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[973]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[973]] : !1), $this->parseField(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[265]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[265]] : $FÃÏè—‘…»[180]), $this->parseJoin(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[274]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[274]] : $FÃÏè—‘…»[33]), $this->parseWhere(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[267]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[267]] : $FÃÏè—‘…»[33]), $this->parseGroup(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[974]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[974]] : $FÃÏè—‘…»[33]), $this->parseHaving(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[975]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[975]] : $FÃÏè—‘…»[33]), $this->parseOrder(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[354]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[354]] : $FÃÏè—‘…»[33]), $this->parseLimit(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[284]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[284]] : $FÃÏè—‘…»[33]), $this->parseUnion(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[339]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[339]] : $FÃÏè—‘…»[33]), $this->parseComment(!empty($dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[345]]) ? $dÉﬂ÷¿©Ïø[$FÃÏè—‘…»[345]] : $FÃÏè—‘…»[33])), $CëíÔÊã≥Ë); return $CëíÔÊã≥Ë; } public function getLastSql($d„ÁÕùÆ¨” = '') { return $d„ÁÕùÆ¨” ? $this->modelSql[$d„ÁÕùÆ¨”] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($d“∑Ï§∂ÍÏ) { return addslashes($d“∑Ï§∂ÍÏ); } public function setModel($B‚“§ÕÇπ¬) { $this->model = $B‚“§ÕÇπ¬; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($f®ÖØ∞¿”¯, $eó„Ìì–˘à = '') { $this->database = $f®ÖØ∞¿”¯; $this->type = $eó„Ìì–˘à; } public function model($c¬≠…ØáŸ¨ = '') { return new ModelBase($c¬≠…ØáŸ¨, $_SERVER[áí∂¯Â¸Áò][33], $this->database); } public function db($Fë◊¿ç¶ÈÖ = false) { goto EÎ±„¯òó™; fæÆïº≤£µ: $a”ï˘ä°”⁄ = $bóÂû∞ôæç[$EË∞Í±˜êà[888]]; $bóÂû∞ôæç[$EË∞Í±˜êà[888]] = $EË∞Í±˜êà[33]; if ($bóÂû∞ôæç[$EË∞Í±˜êà[728]] == $EË∞Í±˜êà[729]) { $D™¬—ì‰âΩ = $bóÂû∞ôæç[$EË∞Í±˜êà[730]]; $bóÂû∞ôæç[$EË∞Í±˜êà[730]] = substr($D™¬—ì‰âΩ, 0, strrpos($D™¬—ì‰âΩ, $EË∞Í±˜êà[976])); } goto BÓÆ¶£áéä; BÓÆ¶£áéä: $this->database = $bóÂû∞ôæç; $cñãúãíÕŒ = $this->model()->db(); try { $dñ›ÍóíÑÔ = $cñãúãíÕŒ->execute("\x73\150\157\167\40\x64\141\164\141\142\141\163\x65\x73\40\154\x69\x6b\145\x20\47{$a”ï˘ä°”⁄}\x27"); } catch (Exception $Dª¿µ±´Í∞) { } goto Eùïõà“ÆÕ; FåóÉ¥±ìª: $this->database = $bóÂû∞ôæç; $cñãúãíÕŒ->execute("\x75\x73\145\40\x60{$a”ï˘ä°”⁄}\140"); return $cñãúãíÕŒ; goto E◊Ã ÷ı„ƒ; EÎ±„¯òó™: $EË∞Í±˜êà =& $_SERVER[áí∂¯Â¸Áò]; $bóÂû∞ôæç = array_change_key_case($this->database); if ($this->type == $EË∞Í±˜êà[9] || !$Fë◊¿ç¶ÈÖ) { return $this->model()->db(); } goto fæÆïº≤£µ; Eùïõà“ÆÕ: if (!$dñ›ÍóíÑÔ) { $cñãúãíÕŒ->execute("\143\162\x65\x61\164\x65\40\x64\x61\164\x61\142\x61\163\145\x20\140{$a”ï˘ä°”⁄}\140"); } $bóÂû∞ôæç[$EË∞Í±˜êà[888]] = $a”ï˘ä°”⁄; if ($bóÂû∞ôæç[$EË∞Í±˜êà[728]] == $EË∞Í±˜êà[729]) { $bóÂû∞ôæç[$EË∞Í±˜êà[730]] .= $EË∞Í±˜êà[976] . $a”ï˘ä°”⁄; } goto FåóÉ¥±ìª; E◊Ã ÷ı„ƒ: } public function createTable($e…œƒ∫ú’ç, $EÎ∂∂¶‡Àü = null) { $AﬂÍÊà°ˆ¡ =& $_SERVER[áí∂¯Â¸Áò]; if (!IO::exist($e…œƒ∫ú’ç)) { ActionCall($AﬂÍÊà°ˆ¡[977], !0, 0); show_json(LNG($AﬂÍÊà°ˆ¡[978]), !1); } $a‚Ü»ÍûîÏ = sqlSplit(IO::getContent($e…œƒ∫ú’ç)); foreach ($a‚Ü»ÍûîÏ as $E£œà´ØéÒ) { if ($EÎ∂∂¶‡Àü) { $fÿÆ°É≠»ã = stripos($E£œà´ØéÒ, $AﬂÍÊà°ˆ¡[979]) === 0; if ($fÿÆ°É≠»ã) { $EÎ∂∂¶‡Àü->task[$AﬂÍÊà°ˆ¡[980]] += 1; } } $this->model()->db()->execute($E£œà´ØéÒ); if ($EÎ∂∂¶‡Àü && $fÿÆ°É≠»ã) { preg_match($AﬂÍÊà°ˆ¡[981], $E£œà´ØéÒ, $bß“™™‰ñ); $EÎ∂∂¶‡Àü->task[$AﬂÍÊà°ˆ¡[982]] = $bß“™™‰ñ[1]; $EÎ∂∂¶‡Àü->update(1); } } $this->taskToCache($EÎ∂∂¶‡Àü); } public function insertTable($bπî•ïæîà, $bäÂ∆Ü“ÈÀ = null) { $f≈’¬ÔÏº› =& $_SERVER[áí∂¯Â¸Áò]; $aºçﬂ„ºïÊ = $this->model()->db(); $DŒÇ–‡≥ä™ = $C™˘Ö∂ÉŸ» ? array($C™˘Ö∂ÉŸ») : $aºçﬂ„ºïÊ->getTables(); foreach ($bπî•ïæîà as $BßÕ◊˘úö∏) { $C™˘Ö∂ÉŸ» = basename($BßÕ◊˘úö∏, $f≈’¬ÔÏº›[723]); if (!in_array($C™˘Ö∂ÉŸ», $DŒÇ–‡≥ä™)) { continue; } if ($bäÂ∆Ü“ÈÀ) { $bäÂ∆Ü“ÈÀ->task[$f≈’¬ÔÏº›[982]] = $C™˘Ö∂ÉŸ»; } if (get_filesize($BßÕ◊˘úö∏) == 0) { continue; } $A”ﬁâ‘÷†¯ = $this->sqlToDb($BßÕ◊˘úö∏, $bäÂ∆Ü“ÈÀ); if (!$A”ﬁâ‘÷†¯) { ActionCall($f≈’¬ÔÏº›[977], !0, 0); show_json(LNG($f≈’¬ÔÏº›[983]) . "\x5b{$C™˘Ö∂ÉŸ»}\x5d", !1); } } $this->taskToCache($bäÂ∆Ü“ÈÀ); } public function sqlFromDb($d·Ï«°÷¿∑, $E◊π¶ËµÀ´, $c·∞‚∫Ö¿Í = null, $bõçûÌãå£ = null) { goto bíìÙ®‡à; bíìÙ®‡à: if ($c·∞‚∫Ö¿Í) { $c·∞‚∫Ö¿Í->task[$_SERVER[áí∂¯Â¸Áò][982]] = $d·Ï«°÷¿∑; } $fŒ¨∫ßŒêá = $this->model($d·Ï«°÷¿∑); $E…ÆœÔ’¡Ç = 0; goto fÖÑ·ƒØß€; fœ·Ò‚Æô÷: fclose($döØ≤¢»Ü»); return $E…ÆœÔ’¡Ç; goto EÃÃÑÆÉü; fÖÑ·ƒØß€: $CπÇÛµ‹ó’ = 1; $fÇÛÔ¥¥¶≠ = 500; $döØ≤¢»Ü» = fopen($E◊π¶ËµÀ´, $_SERVER[áí∂¯Â¸Áò][984]); goto D‘ß„Ã©Ωç; D‘ß„Ã©Ωç: $D‘èí…ÙÆ· = $fŒ¨∫ßŒêá->getPk(); $eÖÌàÇ«ÿà = $fŒ¨∫ßŒêá->getDbFields(); do { $Fâ¶©ÛíæÑ = $fŒ¨∫ßŒêá->field($eÖÌàÇ«ÿà)->order($D‘èí…ÙÆ· . $_SERVER[áí∂¯Â¸Áò][985])->selectPage($fÇÛÔ¥¥¶≠, $CπÇÛµ‹ó’); $dööÈÀ¡‘‘ = isset($Fâ¶©ÛíæÑ[$_SERVER[áí∂¯Â¸Áò][355]][$_SERVER[áí∂¯Â¸Áò][357]]) ? $Fâ¶©ÛíæÑ[$_SERVER[áí∂¯Â¸Áò][355]][$_SERVER[áí∂¯Â¸Áò][357]] : 0; $E‚Ìº†“Èí = !empty($Fâ¶©ÛíæÑ[$_SERVER[áí∂¯Â¸Áò][358]]) ? $Fâ¶©ÛíæÑ[$_SERVER[áí∂¯Â¸Áò][358]] : array(); if (!($F≤ﬁˆÒÿµπ = count($E‚Ìº†“Èí))) { break; } $C≥ââ ◊∫Ù = array(); foreach ($E‚Ìº†“Èí as $BΩ‘ÉıÆ»Û) { if ($d·Ï«°÷¿∑ == $_SERVER[áí∂¯Â¸Áò][986] && $BΩ‘ÉıÆ»Û[$_SERVER[áí∂¯Â¸Áò][29]] == $_SERVER[áí∂¯Â¸Áò][987]) { $D∫…ƒ¿ÿñÊ = json_decode($BΩ‘ÉıÆ»Û[$_SERVER[áí∂¯Â¸Áò][363]], !0); if ($D∫…ƒ¿ÿñÊ[$_SERVER[áí∂¯Â¸Áò][28]] == date($_SERVER[áí∂¯Â¸Áò][696]) && !$D∫…ƒ¿ÿñÊ[$_SERVER[áí∂¯Â¸Áò][695]]) { continue; } } if ($bõçûÌãå£) { $BΩ‘ÉıÆ»Û[$_SERVER[áí∂¯Â¸Áò][75]] = "\173\x69\157\72{$bõçûÌãå£}\x7d" . substr($BΩ‘ÉıÆ»Û[$_SERVER[áí∂¯Â¸Áò][75]], strlen("\173\x69\157\72{$BΩ‘ÉıÆ»Û[$_SERVER[áí∂¯Â¸Áò][749]]}\175")); $BΩ‘ÉıÆ»Û[$_SERVER[áí∂¯Â¸Áò][749]] = $bõçûÌãå£; } $C≥ââ ◊∫Ù[] = $_SERVER[áí∂¯Â¸Áò][988] . $this->sqlEncode($BΩ‘ÉıÆ»Û) . $_SERVER[áí∂¯Â¸Áò][989]; } $EâŒÂÖ≠Œê = "\111\116\123\x45\x52\x54\40\x49\x4e\124\x4f\40\x60{$d·Ï«°÷¿∑}\x60\40\50\x60" . implode($_SERVER[áí∂¯Â¸Áò][990], $eÖÌàÇ«ÿà) . $_SERVER[áí∂¯Â¸Áò][991]; fwrite($döØ≤¢»Ü», $EâŒÂÖ≠Œê . implode($_SERVER[áí∂¯Â¸Áò][992], $C≥ââ ◊∫Ù) . $_SERVER[áí∂¯Â¸Áò][67] . PHP_EOL); $CπÇÛµ‹ó’++; $E…ÆœÔ’¡Ç += $F≤ﬁˆÒÿµπ; if ($c·∞‚∫Ö¿Í) { $c·∞‚∫Ö¿Í->update($F≤ﬁˆÒÿµπ); } } while ($CπÇÛµ‹ó’ <= $dööÈÀ¡‘‘); goto fœ·Ò‚Æô÷; EÃÃÑÆÉü: } public function sqlToDb($b≠ÿó¢…‡⁄, $b‰∂π°°ÿõ = null) { goto bÇÎò≠Ôü∑; bÇÎò≠Ôü∑: $D∂ÜæŸ¿Øä =& $_SERVER[áí∂¯Â¸Áò]; $DﬁÊµ›ˆªü = $this->model()->db(); $AÌå˜∆ﬁöì = @fopen($b≠ÿó¢…‡⁄, $D∂ÜæŸ¿Øä[993]); goto aÙæÔ∞àﬁç; d”˜ò‘ñò£: if (trim($eπì˘ãÜŸ‚)) { $eπì˘ãÜŸ‚ = rtrim(trim($eπì˘ãÜŸ‚), $D∂ÜæŸ¿Øä[67]); if (!$DﬁÊµ›ˆªü->execute($eπì˘ãÜŸ‚)) { return !1; } if ($b‰∂π°°ÿõ) { $b‰∂π°°ÿõ->update($E‚Ã‚Æ¡ä» - 1); } } return !0; goto CëΩ›ª∆Øî; aÙæÔ∞àﬁç: if (!$AÌå˜∆ﬁöì) { return !1; } $E‚Ã‚Æ¡ä» = 0; $eπì˘ãÜŸ‚ = $D∂ÜæŸ¿Øä[33]; goto EˆßÖ∆ÛÈÑ; EˆßÖ∆ÛÈÑ: $B©Üßò€û‡ = 500 + 1; while (!feof($AÌå˜∆ﬁöì)) { if ($b‰∂π°°ÿõ && $E‚Ã‚Æ¡ä» != 0) { $b‰∂π°°ÿõ->task[$D∂ÜæŸ¿Øä[980]] += 1; } $E‚Ã‚Æ¡ä»++; $Bèò¡€≤òÙ = trim(fgets($AÌå˜∆ﬁöì)); $eπì˘ãÜŸ‚ .= $D∂ÜæŸ¿Øä[50] . $this->sqlDecode($Bèò¡€≤òÙ, $this->type); if ($E‚Ã‚Æ¡ä» == $B©Üßò€û‡) { $eπì˘ãÜŸ‚ = rtrim(trim($eπì˘ãÜŸ‚), $D∂ÜæŸ¿Øä[67]); if (!$DﬁÊµ›ˆªü->execute($eπì˘ãÜŸ‚)) { return !1; } if ($b‰∂π°°ÿõ) { $b‰∂π°°ÿõ->update($E‚Ã‚Æ¡ä» - 1); } $eπì˘ãÜŸ‚ = $D∂ÜæŸ¿Øä[33]; $E‚Ã‚Æ¡ä» = 0; } } fclose($AÌå˜∆ﬁöì); goto d”˜ò‘ñò£; CëΩ›ª∆Øî: } public function dropTable($cá©Ñéˆ¬™ = null) { $aç«¢œñçÏ = $this->model()->db(); $CÖﬁÑäç≤¥ = $cá©Ñéˆ¬™ ? array($cá©Ñéˆ¬™) : $aç«¢œñçÏ->getTables(); if (!$CÖﬁÑäç≤¥) { return; } foreach ($CÖﬁÑäç≤¥ as $cá©Ñéˆ¬™) { $aç«¢œñçÏ->execute("\x64\162\157\160\x20\164\141\142\154\x65\40\151\x66\40\x65\170\x69\163\164\x73\x20\140{$cá©Ñéˆ¬™}\x60"); } } private function taskToCache($f©∫ÉÃ“ÁÒ = null) { $d∫ûı¨ãèÃ =& $_SERVER[áí∂¯Â¸Áò]; if (!$f©∫ÉÃ“ÁÒ) { return; } $Bœã•ä¥¬≈ = array($d∫ûı¨ãèÃ[982] => $f©∫ÉÃ“ÁÒ->task[$d∫ûı¨ãèÃ[982]], $d∫ûı¨ãèÃ[980] => $f©∫ÉÃ“ÁÒ->task[$d∫ûı¨ãèÃ[980]], $d∫ûı¨ãèÃ[994] => $f©∫ÉÃ“ÁÒ->task[$d∫ûı¨ãèÃ[994]]); if ($Bœã•ä¥¬≈[$d∫ûı¨ãèÃ[980]] == $Bœã•ä¥¬≈[$d∫ûı¨ãèÃ[994]]) { $Bœã•ä¥¬≈[$d∫ûı¨ãèÃ[702]] = 1; } Cache::set($d∫ûı¨ãèÃ[995] . $f©∫ÉÃ“ÁÒ->task[$d∫ûı¨ãèÃ[371]], $Bœã•ä¥¬≈); $f©∫ÉÃ“ÁÒ->end(); } private function sqlEncode($fó¡•úûê) { $BñﬁêçáÑ¶ =& $_SERVER[áí∂¯Â¸Áò]; $aóá ÆÉ¨∞ = array(); foreach ($fó¡•úûê as $fËé≈ìÀ∏´) { if (is_array($fËé≈ìÀ∏´)) { $fËé≈ìÀ∏´ = json_encode_force($fËé≈ìÀ∏´); } $fËé≈ìÀ∏´ = addslashes($fËé≈ìÀ∏´); $fËé≈ìÀ∏´ = str_replace(array($BñﬁêçáÑ¶[996], $BñﬁêçáÑ¶[221]), array($BñﬁêçáÑ¶[997], $BñﬁêçáÑ¶[998]), $fËé≈ìÀ∏´); $aóá ÆÉ¨∞[] = str_replace($BñﬁêçáÑ¶[55], $BñﬁêçáÑ¶[999], $fËé≈ìÀ∏´); } return $BñﬁêçáÑ¶[55] . implode($BñﬁêçáÑ¶[1000], $aóá ÆÉ¨∞) . $BñﬁêçáÑ¶[55]; } private function sqlDecode($BÏ˘£èÿΩı, $dÀñßö°–) { $Dïååı∑‘ﬁ =& $_SERVER[áí∂¯Â¸Áò]; $BÏ˘£èÿΩı = str_replace(array($Dïååı∑‘ﬁ[997], $Dïååı∑‘ﬁ[998]), array($Dïååı∑‘ﬁ[996], $Dïååı∑‘ﬁ[221]), $BÏ˘£èÿΩı); if ($dÀñßö°– == $Dïååı∑‘ﬁ[9]) { $BÏ˘£èÿΩı = stripslashes($BÏ˘£èÿΩı); } return $BÏ˘£èÿΩı; } } goto c‰éΩâÀ…ı; b˜îçËûÚˆ: if (class_exists($_SERVER[áí∂¯Â¸Áò][1973])) { class Services_JSON_Error extends PEAR_Error { function __construct($d·‘∫Øóä± = "\165\x6e\153\156\157\x77\156\x20\x65\x72\162\x6f\162", $cØíºòÜëï = null, $b√¡Í‡éœé = null, $aÛÕËˆÓ©è = null, $Aí¡Ç◊ΩË≠ = null) { parent::PEAR_Error($d·‘∫Øóä±, $cØíºòÜëï, $b√¡Í‡éœé, $aÛÕËˆÓ©è, $Aí¡Ç◊ΩË≠); } } } else { class Services_JSON_Error { function __construct($E®ÕÃ˘ë∏Õ = "\165\156\x6b\156\x6f\167\156\40\x65\x72\x72\157\x72", $DÿÉïÕøŒ‘ = null, $f‹·“±ÑïØ = null, $Bîê‡≤ì∑ˆ = null, $Eù◊ıÌ”∏† = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto e†óô√¬Ú›; e†óô√¬Ú›: $fÑ≈öÓ—•ﬂ =& $_SERVER[áí∂¯Â¸Áò]; global $in; $this->in =& $in; goto c¬ºÍ‰∫Øü; d◊èÜ¯º©å: $this->checkSize(); $this->tempPathInit(); goto däßãëçÆﬁ; c¬ºÍ‰∫Øü: if (!empty($_FILES)) { $Då£Áéπ€Ö = $_FILES[$fÑ≈öÓ—•ﬂ[171]]; $this->uploadFile = $Då£Áéπ€Ö[$fÑ≈öÓ—•ﬂ[1974]]; if (!$this->uploadFile && $Då£Áéπ€Ö[$fÑ≈öÓ—•ﬂ[1225]] > 0) { show_json($this->errorInfo($Då£Áéπ€Ö[$fÑ≈öÓ—•ﬂ[1225]]), !1); } } else { if (isset($in[$fÑ≈öÓ—•ﬂ[398]])) { $this->uploadFile = isset($in[$fÑ≈öÓ—•ﬂ[1975]]) ? $fÑ≈öÓ—•ﬂ[1976] : $fÑ≈öÓ—•ﬂ[1819]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto d◊èÜ¯º©å; däßãëçÆﬁ: } public function upload() { goto F“Ò–››‚¨; b‡Ö⁄—üÑ®: $A§éÇœÏÂÇ = $this->writeTo($aêï≈ºó≤Ì, $E›ﬂ ˜√êÉ, $this->tempFile); $f˘È¨ÆÛÃı = IO::hashSimple($aêï≈ºó≤Ì); $aù≥Ω±±‰› = IO::size($aêï≈ºó≤Ì); goto eÇ—èîπﬂ⁄; Báñà≤–Ç‡: $aêï≈ºó≤Ì = $this->moveUploadedFile($BÚÖÍ◊≠©∑); if ($aù≥Ω±±‰› > 0 && filesize($aêï≈ºó≤Ì) == 0) { $this->showJson($A‡≤–ƒœ⁄˘[1982], !1); } if (!$aêï≈ºó≤Ì) { $this->showJson(LNG($A‡≤–ƒœ⁄˘[1983]), !1); } goto B˜äÁ—ã–Á; D˘ŒÕ˘´≈: $bÂéäÊœÎÒ[$A‡≤–ƒœ⁄˘[1987]][$A‡≤–ƒœ⁄˘[1988] . $f®≥π„Çœï] = array($A‡≤–ƒœ⁄˘[1989] => $bü‘∞πëØÚ, $A‡≤–ƒœ⁄˘[1044] => $f®≥π„Çœï, $A‡≤–ƒœ⁄˘[77] => $aù≥Ω±±‰›, $A‡≤–ƒœ⁄˘[168] => $f˘È¨ÆÛÃı); $this->statusSet($bÂéäÊœÎÒ); if (count($bÂéäÊœÎÒ[$A‡≤–ƒœ⁄˘[1987]]) != $bÂéäÊœÎÒ[$A‡≤–ƒœ⁄˘[1986]]) { $this->showJson($A‡≤–ƒœ⁄˘[1990] . $f®≥π„Çœï, !0); } goto AãŸÒêŸÎç; Aû†≈Î‡ªè: CacheLock::lock($this->tempFile, 20); $bÂéäÊœÎÒ = $this->statusGet(); $this->initFileTemp(); goto Báñà≤–Ç‡; AãŸÒêŸÎç: ignore_timeout(); if (!$this->checkChunkHash($bÂéäÊœÎÒ)) { $this->showJson($A‡≤–ƒœ⁄˘[1991], !1); } $this->statusSet(!1); goto eç∫∫®Õ„º; fÜµ´ÀŒ±≈: $BÚÖÍ◊≠©∑ = $this->tempFile . $A‡≤–ƒœ⁄˘[1979] . $f®≥π„Çœï; $aù≥Ω±±‰› = isset($this->in[$A‡≤–ƒœ⁄˘[533]]) ? intval($this->in[$A‡≤–ƒœ⁄˘[533]]) : 0; $eﬁÉ‘≤ÏÜ≠ = isset($this->in[$A‡≤–ƒœ⁄˘[1980]]) ? intval($this->in[$A‡≤–ƒœ⁄˘[1980]]) : 0; goto DÉ‰ÇÁßØ‚; B˜äÁ—ã–Á: $bü‘∞πëØÚ = $f®≥π„Çœï * $eﬁÉ‘≤ÏÜ≠; $E›ﬂ ˜√êÉ = @fopen($this->tempFile, $A‡≤–ƒœ⁄˘[1984]); fseek_64($E›ﬂ ˜√êÉ, $bü‘∞πëØÚ); goto b‡Ö⁄—üÑ®; eç∫∫®Õ„º: CacheLock::unlock($this->tempFile); return $this->tempFile; goto c›ò™Õ¿’⁄; DÉ‰ÇÁßØ‚: if ($DùÜﬂ√„«Ê > 1 && $eﬁÉ‘≤ÏÜ≠ <= 0) { show_json($A‡≤–ƒœ⁄˘[1981], !1); } if ($eﬁÉ‘≤ÏÜ≠ > $aù≥Ω±±‰›) { $DùÜﬂ√„«Ê = 1; } if ($DùÜﬂ√„«Ê <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Aû†≈Î‡ªè; F“Ò–››‚¨: $A‡≤–ƒœ⁄˘ =& $_SERVER[áí∂¯Â¸Áò]; $f®≥π„Çœï = isset($this->in[$A‡≤–ƒœ⁄˘[1977]]) ? intval($this->in[$A‡≤–ƒœ⁄˘[1977]]) : 0; $DùÜﬂ√„«Ê = isset($this->in[$A‡≤–ƒœ⁄˘[1978]]) ? intval($this->in[$A‡≤–ƒœ⁄˘[1978]]) : 1; goto fÜµ´ÀŒ±≈; eÇ—èîπﬂ⁄: @unlink($aêï≈ºó≤Ì); if (!$A§éÇœÏÂÇ) { $this->showJson($A‡≤–ƒœ⁄˘[1985] . $f®≥π„Çœï, !1); } $bÂéäÊœÎÒ[$A‡≤–ƒœ⁄˘[1986]] = $DùÜﬂ√„«Ê; goto D˘ŒÕ˘´≈; c›ò™Õ¿’⁄: } private function checkSize() { $e¶õÜ¥í©Œ =& $_SERVER[áí∂¯Â¸Áò]; if (phpBuild64() || $this->in[$e¶õÜ¥í©Œ[77]] < PHP_INT_MAX) { return; } show_json(LNG($e¶õÜ¥í©Œ[1992]), !1); } private function showJson($dÕƒ´ÃÍ‰Ü, $Dﬁã¥ŸÊ¬¶) { CacheLock::unlock($this->tempFile); if (!$Dﬁã¥ŸÊ¬¶) { return show_json($dÕƒ´ÃÍ‰Ü, $Dﬁã¥ŸÊ¬¶); } show_json($dÕƒ´ÃÍ‰Ü, $Dﬁã¥ŸÊ¬¶); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto C÷ó∑éá≈ã; E‚⁄Êœ›≤Ù: touch($EôÀ°∆À¬õ . $d‰¡ª´ºÇ°[1993]); $eëØÃƒ«¡„ = isset($this->in[$d‰¡ª´ºÇ°[1994]]) ? $this->in[$d‰¡ª´ºÇ°[1994]] : !1; if (strlen($eëØÃƒ«¡„) < 30) { $eëØÃƒ«¡„ = md5(USER_ID . $this->in[$d‰¡ª´ºÇ°[75]] . $this->fileName . $this->in[$d‰¡ª´ºÇ°[77]]); } goto b⁄ò¶ˆÉ˜¬; b⁄ò¶ˆÉ˜¬: $this->tempFile = $EôÀ°∆À¬õ . $d‰¡ª´ºÇ°[1995] . md5($eëØÃƒ«¡„ . $this->in[$d‰¡ª´ºÇ°[1538]]); goto C¯é⁄¯›–Ì; C÷ó∑éá≈ã: $d‰¡ª´ºÇ° =& $_SERVER[áí∂¯Â¸Áò]; $EôÀ°∆À¬õ = TEMP_FILES; @mk_dir($EôÀ°∆À¬õ); goto E‚⁄Êœ›≤Ù; C¯é⁄¯›–Ì: } private function moveUploadedFile($D±ßπÙﬁˆÓ) { $c©–¨£®‡ï =& $_SERVER[áí∂¯Â¸Áò]; $E∑õ∂ıÔë∑ = $this->uploadFile; if ($E∑õ∂ıÔë∑ == $c©–¨£®‡ï[1996]) { @file_put_contents($D±ßπÙﬁˆÓ, base64_decode($_REQUEST[$c©–¨£®‡ï[1997]])); } else { if ($E∑õ∂ıÔë∑ == $c©–¨£®‡ï[1819]) { $bÑ…ãºçòè = @fopen($D±ßπÙﬁˆÓ, $c©–¨£®‡ï[1528]); $this->writeTo($E∑õ∂ıÔë∑, $bÑ…ãºçòè, $D±ßπÙﬁˆÓ); } else { if (!move_uploaded_file($E∑õ∂ıÔë∑, $D±ßπÙﬁˆÓ)) { return !1; } } } return $D±ßπÙﬁˆÓ; } private function writeTo($D¢∏üÚÊ–Æ, $bÑÿëàÎò±, $cŒÂÒÊ‰£Ü) { goto f–â‚“Ô“≤; B”©î–Èíè: fclose($D‰á÷…÷î¬); fclose($bÑÿëàÎò±); CacheLock::unlock($B¿Ñä≠‘÷à); goto Bπ¿Ò©ÖºÜ; f–â‚“Ô“≤: $eñ˜∞ê¯à“ =& $_SERVER[áí∂¯Â¸Áò]; $B¿Ñä≠‘÷à = $eñ˜∞ê¯à“[1998] . $cŒÂÒÊ‰£Ü; $B˜î∑ã˘¥˜ = CacheLock::lock($B¿Ñä≠‘÷à, 1); goto fñÚ€‹πñı; Bπ¿Ò©ÖºÜ: return !0; goto F…èÎ≈ì“°; fñÚ€‹πñı: $D‰á÷…÷î¬ = @fopen($D¢∏üÚÊ–Æ, $eñ˜∞ê¯à“[1527]); if (!$D‰á÷…÷î¬ || !$bÑÿëàÎò± || !$B˜î∑ã˘¥˜) { CacheLock::unlock($B¿Ñä≠‘÷à); return !1; } while (!feof($D‰á÷…÷î¬)) { fwrite($bÑÿëàÎò±, fread($D‰á÷…÷î¬, 1024 * 200)); } goto B”©î–Èíè; F…èÎ≈ì“°: } private function statusGet() { goto c∂»âã§¯Á; dñî¢çª∫Ú: if (!$this->statusData) { $EÂÿ—£ ä = array($A∑ÁÏˆøçã[28] => $this->fileName, $A∑ÁÏˆøçã[1986] => 0, $A∑ÁÏˆøçã[1987] => array()); $this->statusSet($EÂÿ—£ ä); } return $this->statusData; goto B§Ÿ«¯ıû; A√¿Ì´—ìö: $F«∂¯≠Ûíﬂ = !1; if (file_exists($CØî‚®Ç›°)) { $F«∂¯≠Ûíﬂ = @file_get_contents($CØî‚®Ç›°); } if ($F«∂¯≠Ûíﬂ) { $this->statusData = json_decode($F«∂¯≠Ûíﬂ, !0); } goto dñî¢çª∫Ú; c∂»âã§¯Á: $A∑ÁÏˆøçã =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($this->statusData)) { return $this->statusData; } $CØî‚®Ç›° = $this->tempFile . $A∑ÁÏˆøçã[1999]; goto A√¿Ì´—ìö; B§Ÿ«¯ıû: } public function statusSet($b”í®π˜ëá) { $d‘≥◊òú¯Â = $this->tempFile . $_SERVER[áí∂¯Â¸Áò][1999]; if (!$b”í®π˜ëá) { if (file_exists($d‘≥◊òú¯Â)) { @unlink($d‘≥◊òú¯Â); } return !0; } $this->statusData = $b”í®π˜ëá; return file_put_contents($d‘≥◊òú¯Â, json_encode($b”í®π˜ëá)); } private function initFileTemp() { $aÓìäåÿ»ô =& $_SERVER[áí∂¯Â¸Áò]; if (file_exists($this->tempFile)) { return; } $D¯ã≠¨õæº = fopen($this->tempFile, $aÓìäåÿ»ô[2000]); fseek_64($D¯ã≠¨õæº, $this->in[$aÓìäåÿ»ô[77]] - 1, SEEK_SET); fwrite($D¯ã≠¨õæº, $aÓìäåÿ»ô[481]); fclose($D¯ã≠¨õæº); } public function checkChunk() { goto C∑‰ÿ≤î‰ú; C∑‰ÿ≤î‰ú: $Eû‘õùÇ…ç =& $_SERVER[áí∂¯Â¸Áò]; $a§¢ªÒËíƒ = array(); CacheLock::lock($this->tempFile); goto cÓÆÏä÷äÖ; f„œ£îÚ’∂: return $a§¢ªÒËíƒ; goto bÀ¡ª√¬íî; cÓÆÏä÷äÖ: $DéÉ©ë‘ºü = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($DéÉ©ë‘ºü[$Eû‘õùÇ…ç[1987]] as $f¡¯ùÉ‰â€) { $E•äÚÉªÊõ = $f¡¯ùÉ‰â€[$Eû‘õùÇ…ç[168]]; if ($E•äÚÉªÊõ) { $a§¢ªÒËíƒ[$Eû‘õùÇ…ç[2001] . $f¡¯ùÉ‰â€[$Eû‘õùÇ…ç[1044]]] = $E•äÚÉªÊõ; } } goto f„œ£îÚ’∂; bÀ¡ª√¬íî: } private function checkChunkHash($Fƒ⁄ÁÇ◊åˆ) { goto bñ‘¡Ê¨Ã÷; c´ÿî—Ïù´: $Dö¬å’¡íË = !0; foreach ($Fƒ⁄ÁÇ◊åˆ[$fÓõØ¿¯æ∫[1987]] as $Dπõù‰©øÎ) { fseek_64($bïú”∂ò››, $Dπõù‰©øÎ[$fÓõØ¿¯æ∫[1989]]); $c±ÕπﬂÖ¨™ = PathDriverStream::hash($bïú”∂ò››, $Dπõù‰©øÎ[$fÓõØ¿¯æ∫[77]]); if ($Dπõù‰©øÎ[$fÓõØ¿¯æ∫[168]] != $c±ÕπﬂÖ¨™) { $Dö¬å’¡íË = !1; break; } } fclose($bïú”∂ò››); goto C‚Ìâ™Ú⁄ô; C‚Ìâ™Ú⁄ô: return $Dö¬å’¡íË; goto F¬·îµ«ùØ; bñ‘¡Ê¨Ã÷: $fÓõØ¿¯æ∫ =& $_SERVER[áí∂¯Â¸Áò]; if (count($Fƒ⁄ÁÇ◊åˆ[$fÓõØ¿¯æ∫[1987]]) != $Fƒ⁄ÁÇ◊åˆ[$fÓõØ¿¯æ∫[1986]]) { return !1; } $aëŸ·Ñùûü = _get($this->in, $fÓõØ¿¯æ∫[1994]); goto CòÊ¶©ªØß; CòÊ¶©ªØß: $BÃ·ıõªÙ∂ = _get($this->in, $fÓõØ¿¯æ∫[2002]); if (strlen($BÃ·ıõªÙ∂) == 32 && IO::hashSimple($this->tempFile) == $aëŸ·Ñùûü && IO::hashMd5($this->tempFile) == $BÃ·ıõªÙ∂) { return !0; } $bïú”∂ò›› = fopen($this->tempFile, $fÓõØ¿¯æ∫[1176]); goto c´ÿî—Ïù´; F¬·îµ«ùØ: } public static function fileName() { goto aÇ“û°ˆ¶ﬁ; f‚û™¨äãÀ: return KodIO::clear($AíäíçáÃñ); goto C≈ñ—¥”Ãâ; aÇ“û°ˆ¶ﬁ: $eƒ üöãÖ¿ =& $_SERVER[áí∂¯Â¸Áò]; global $in; $AíäíçáÃñ = isset($in[$eƒ üöãÖ¿[28]]) ? $in[$eƒ üöãÖ¿[28]] : $eƒ üöãÖ¿[33]; goto A∏¯Õé√ˆç; A∏¯Õé√ˆç: if (!empty($_FILES)) { $AíäíçáÃñ = $AíäíçáÃñ ? $AíäíçáÃñ : $_FILES[$eƒ üöãÖ¿[171]][$eƒ üöãÖ¿[398]]; } if (!is_wap()) { return KodIO::clear($AíäíçáÃñ); } $CÌÿøå˜öµ = strtotime($in[$eƒ üöãÖ¿[2003]]); goto c¡◊ôÈ®¨à; c¡◊ôÈ®¨à: $CÌÿøå˜öµ = $CÌÿøå˜öµ ? $CÌÿøå˜öµ : time(); $aø´ÈÖı€≤ = strtolower($AíäíçáÃñ); if ($aø´ÈÖı€≤ == $eƒ üöãÖ¿[2004] || $aø´ÈÖı€≤ == $eƒ üöãÖ¿[2005]) { $AíäíçáÃñ = date($eƒ üöãÖ¿[696], $CÌÿøå˜öµ) . $eƒ üöãÖ¿[70] . $in[$eƒ üöãÖ¿[77]] . $eƒ üöãÖ¿[1633]; } else { if ($aø´ÈÖı€≤ == $eƒ üöãÖ¿[2006]) { $AíäíçáÃñ = date($eƒ üöãÖ¿[696], $CÌÿøå˜öµ) . $eƒ üöãÖ¿[70] . $in[$eƒ üöãÖ¿[77]] . $eƒ üöãÖ¿[2007]; } } goto f‚û™¨äãÀ; C≈ñ—¥”Ãâ: } private function errorInfo($c Æõ‡©ãØ) { $F◊íÍÚÇ®¡ =& $_SERVER[áí∂¯Â¸Áò]; $fé⁄©Ú∂î™ = array($F◊íÍÚÇ®¡[2008], $F◊íÍÚÇ®¡[2009], $F◊íÍÚÇ®¡[2010], $F◊íÍÚÇ®¡[2011], $F◊íÍÚÇ®¡[2012], $F◊íÍÚÇ®¡[2013], $F◊íÍÚÇ®¡[2014], $F◊íÍÚÇ®¡[2015]); return $c Æõ‡©ãØ . $F◊íÍÚÇ®¡[4] . $fé⁄©Ú∂î™[$c Æõ‡©ãØ]; } } class ZipMake { const VERSION = "\x30\x2e\62\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($f¨ŒõéÂ®” = null) { $B›ß°ô‰¬ã =& $_SERVER[áí∂¯Â¸Áò]; $this->outputStream = fopen($B›ß°ô‰¬ã[2016], $B›ß°ô‰¬ã[1232]); $this->outputName = $f¨ŒõéÂ®”; $this->needHeaders = !0; } public function addFile($c√àÍ“Ê„Ã, $b∫∞∫òìèà) { goto dÀ†œ™ûÈû; dÀ†œ™ûÈû: $Báõ¯¥∫°⁄ =& $_SERVER[áí∂¯Â¸Áò]; $c√àÍ“Ê„Ã = $this->filterFilename($c√àÍ“Ê„Ã); $aΩ«àì‰‹ÿ = static::METHOD_STORE; goto CŒÃ÷„úæô; f¢öËÜØ—é: while (!feof($e¬·¨øﬁÑ”)) { $FÕ—´Ã’å◊ = fread($e¬·¨øﬁÑ”, 1048576); $this->send($FÕ—´Ã’å◊); } fclose($e¬·¨øﬁÑ”); $Dä©å‹Üüå = hexdec(hash_file($Báõ¯¥∫°⁄[2018], $b∫∞∫òìèà)); goto fƒ‡‰ÃñŒ‡; fƒ‡‰ÃñŒ‡: $this->addFileFooter($c√àÍ“Ê„Ã, $aΩ«àì‰‹ÿ, $Dä©å‹Üüå, $EÈªö‰≈Ãõ, $BŸ¿’ı®Ö£, $b∫¶†Ê«‰Ç); goto b•∫§ÜÉ≤•; CŒÃ÷„úæô: $b∫¶†Ê«‰Ç = $this->addFileHeader($c√àÍ“Ê„Ã, $aΩ«àì‰‹ÿ); $EÈªö‰≈Ãõ = $BŸ¿’ı®Ö£ = filesize_64($b∫∞∫òìèà); $e¬·¨øﬁÑ” = fopen($b∫∞∫òìèà, $Báõ¯¥∫°⁄[2017]); goto f¢öËÜØ—é; b•∫§ÜÉ≤•: } public function addFileFromStream($Eè‰ƒê√ïß, $a˜◊Óîﬁˆ“) { goto e√“Ö¥Òœœ; e√“Ö¥Òœœ: $Eè‰ƒê√ïß = $this->filterFilename($Eè‰ƒê√ïß); $d∑ö¢¡ê≥Ï = static::METHOD_STORE; $E≠âÒ†Ÿƒ® = $this->addFileHeader($Eè‰ƒê√ïß, $d∑ö¢¡ê≥Ï); goto dºåéùô‡˜; D‡ﬂ˘ñﬁﬂï: $dŸÖ€£ÿÿ± = hash_init($_SERVER[áí∂¯Â¸Áò][2018]); while (!feof($a˜◊Óîﬁˆ“)) { $AóâØÎº≠¥ = fread($a˜◊Óîﬁˆ“, 1048576); hash_update($dŸÖ€£ÿÿ±, $AóâØÎº≠¥); $this->send($AóâØÎº≠¥); } $büî≤‹Üå« = hexdec(hash_final($dŸÖ€£ÿÿ±)); goto C‡Ÿœ·ƒôè; dºåéùô‡˜: fseek($a˜◊Óîﬁˆ“, 0, SEEK_END); $Fˆ°â≤‰Î” = $dâÉ§‹Ë±Û = ftell($a˜◊Óîﬁˆ“); rewind($a˜◊Óîﬁˆ“); goto D‡ﬂ˘ñﬁﬂï; C‡Ÿœ·ƒôè: $this->addFileFooter($Eè‰ƒê√ïß, $d∑ö¢¡ê≥Ï, $büî≤‹Üå«, $Fˆ°â≤‰Î”, $dâÉ§‹Ë±Û, $E≠âÒ†Ÿƒ®); goto b∂ã¬÷◊ïﬁ; b∂ã¬÷◊ïﬁ: } public function finish() { foreach ($this->files as $d€àä‘»®Ò) { $this->addCdrFile($d€àä‘»®Ò); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($fè±ó≥ë©É, $aûÂ‘ËàË€) { goto aÓ⁄çπœˆË; Aïß¯¶•Ù‚: $a—∆ı–Û∑∂ = $this->packFields($fã…í®‚º÷); $Eüø÷Œ§¶ = $this->packFields($Cñçæ◊ƒ±É); $this->send($a—∆ı–Û∑∂ . $fè±ó≥ë©É . $Eüø÷Œ§¶); goto EÆ¬Ö∑ÿÆΩ; Eç–◊∫ÈÜ™: $b¬Á±¿ëÚß = $this->dosTime(time()); $fã…í®‚º÷ = array(array($e£û∆Ø™À¢[2020], static::FILE_HEADER_SIGNATURE), array($e£û∆Ø™À¢[2021], static::ZIP_VERSION_64), array($e£û∆Ø™À¢[2021], 8), array($e£û∆Ø™À¢[2021], $aûÂ‘ËàË€), array($e£û∆Ø™À¢[2020], $b¬Á±¿ëÚß), array($e£û∆Ø™À¢[2020], 0), array($e£û∆Ø™À¢[2020], 4294967295), array($e£û∆Ø™À¢[2020], 4294967295), array($e£û∆Ø™À¢[2021], $DÆı‘ÇééÉ), array($e£û∆Ø™À¢[2021], 32)); $Cñçæ◊ƒ±É = array(array($e£û∆Ø™À¢[2021], 1), array($e£û∆Ø™À¢[2021], 28), array($e£û∆Ø™À¢[2022], 0), array($e£û∆Ø™À¢[2022], 0), array($e£û∆Ø™À¢[2022], 0), array($e£û∆Ø™À¢[2020], 0)); goto Aïß¯¶•Ù‚; aÓ⁄çπœˆË: $e£û∆Ø™À¢ =& $_SERVER[áí∂¯Â¸Áò]; $fè±ó≥ë©É = preg_replace($e£û∆Ø™À¢[2019], $e£û∆Ø™À¢[33], $fè±ó≥ë©É); $DÆı‘ÇééÉ = strlen($fè±ó≥ë©É); goto Eç–◊∫ÈÜ™; EÆ¬Ö∑ÿÆΩ: return strlen($a—∆ı–Û∑∂) + $DÆı‘ÇééÉ + strlen($Eüø÷Œ§¶); goto D∫ÉêÑ«ûÌ; D∫ÉêÑ«ûÌ: } protected function addFileFooter($B¨∆ŸÓìŒÊ, $dæáÃ€›€á, $e≈ö›öêçó, $b¡ÆŒºéØì, $FﬁÎ‰Üõ‹, $Dùï¶Õºùﬂ) { $AÖﬂïÖ“èÎ =& $_SERVER[áí∂¯Â¸Áò]; $c≥È±ã’µø = array(array($AÖﬂïÖ“èÎ[2020], static::DATA_DESCRIPTOR_SIGNATURE), array($AÖﬂïÖ“èÎ[2020], $e≈ö›öêçó), array($AÖﬂïÖ“èÎ[2022], $b¡ÆŒºéØì), array($AÖﬂïÖ“èÎ[2022], $FﬁÎ‰Üõ‹)); $E±≠àΩ∑ı¿ = $this->packFields($c≥È±ã’µø); $this->send($E±≠àΩ∑ı¿); $fß°‘óÔâ– = $Dùï¶Õºùﬂ + $b¡ÆŒºéØì + $b˘óø∆˘ïÁ; $this->addToCdr($B¨∆ŸÓìŒÊ, $dæáÃ€›€á, $e≈ö›öêçó, $b¡ÆŒºéØì, $FﬁÎ‰Üõ‹, $fß°‘óÔâ–); } private function addToCdr($D¶á§Ü™˜, $Dñçééüè’, $D§óçƒÊÖß, $F∫¯™úº∂◊, $AÌ”≤–˘–’, $dŒ≥ôë∆√á) { $this->files[] = array($D¶á§Ü™˜, $Dñçééüè’, $D§óçƒÊÖß, $F∫¯™úº∂◊, $AÌ”≤–˘–’, $this->ofs); $this->ofs += $dŒ≥ôë∆√á; } protected function addCdrFile($aá·∆•ÖÇ«) { goto DãŒù∞˘¡’; cÈ◊Ÿ®∏Í∂: $EﬁüÊ£≈∆≤ = $this->packFields($E£º—‹Çé›); $C™ú®„ô©È = $this->packFields($d’“¯èƒ√ˆ); $C§ÈÇ†ÏíÜ = $EﬁüÊ£≈∆≤ . $eü¥å∫êÒõ . $D°ç°ë¢ìá . $C™ú®„ô©È; goto d‡‡Ã◊ËÂœ; DãŒù∞˘¡’: $d¬ÃΩˆÔπÔ =& $_SERVER[áí∂¯Â¸Áò]; list($eü¥å∫êÒõ, $dì±›çÂ≤∞, $d«Î∑ô∂Ê¯, $f¯Öµÿ·Òí, $dÕè“ΩêåÃ, $C‚„–∂±·Œ) = $aá·∆•ÖÇ«; $D°ç°ë¢ìá = $d¬ÃΩˆÔπÔ[33]; goto cÏÙ◊≥ùŸ”; d‡‡Ã◊ËÂœ: $this->send($C§ÈÇ†ÏíÜ); $this->cdr_ofs += strlen($C§ÈÇ†ÏíÜ); goto FÓû∑˜≤ãÖ; cÏÙ◊≥ùŸ”: $dû‹≥Óå´˜ = $this->dosTime(time()); $E£º—‹Çé› = array(array($d¬ÃΩˆÔπÔ[2020], static::CDR_FILE_SIGNATURE), array($d¬ÃΩˆÔπÔ[2021], static::ZIP_VERSION_64), array($d¬ÃΩˆÔπÔ[2021], static::ZIP_VERSION_64), array($d¬ÃΩˆÔπÔ[2021], 8), array($d¬ÃΩˆÔπÔ[2021], $dì±›çÂ≤∞), array($d¬ÃΩˆÔπÔ[2020], $dû‹≥Óå´˜), array($d¬ÃΩˆÔπÔ[2020], $d«Î∑ô∂Ê¯), array($d¬ÃΩˆÔπÔ[2020], 4294967295), array($d¬ÃΩˆÔπÔ[2020], 4294967295), array($d¬ÃΩˆÔπÔ[2021], strlen($eü¥å∫êÒõ)), array($d¬ÃΩˆÔπÔ[2021], 32), array($d¬ÃΩˆÔπÔ[2021], strlen($D°ç°ë¢ìá)), array($d¬ÃΩˆÔπÔ[2021], 0), array($d¬ÃΩˆÔπÔ[2021], 0), array($d¬ÃΩˆÔπÔ[2020], 32), array($d¬ÃΩˆÔπÔ[2020], 4294967295)); $d’“¯èƒ√ˆ = array(array($d¬ÃΩˆÔπÔ[2021], 1), array($d¬ÃΩˆÔπÔ[2021], 28), array($d¬ÃΩˆÔπÔ[2022], $dÕè“ΩêåÃ), array($d¬ÃΩˆÔπÔ[2022], $f¯Öµÿ·Òí), array($d¬ÃΩˆÔπÔ[2022], $C‚„–∂±·Œ), array($d¬ÃΩˆÔπÔ[2020], 0)); goto cÈ◊Ÿ®∏Í∂; FÓû∑˜≤ãÖ: } protected function addCdr64Eof() { goto fåú∑å˜ÙÖ; fåú∑å˜ÙÖ: $C®Èœﬁ√∑Á =& $_SERVER[áí∂¯Â¸Áò]; $eòù€¬§âá = count($this->files); $dá‡»ÀæøÍ = $this->cdr_ofs; goto D∑ÆíÃõçπ; D∑ÆíÃõçπ: $BÇ÷ÎÈ∆áå = $this->ofs; $C÷ÕÖÿåÊ‡ = array(array($C®Èœﬁ√∑Á[2020], static::ZIP64_CDR_EOF_SIGNATURE), array($C®Èœﬁ√∑Á[2022], 44), array($C®Èœﬁ√∑Á[2021], static::ZIP_VERSION_64), array($C®Èœﬁ√∑Á[2021], static::ZIP_VERSION_64), array($C®Èœﬁ√∑Á[2020], 0), array($C®Èœﬁ√∑Á[2020], 0), array($C®Èœﬁ√∑Á[2022], $eòù€¬§âá), array($C®Èœﬁ√∑Á[2022], $eòù€¬§âá), array($C®Èœﬁ√∑Á[2022], $dá‡»ÀæøÍ), array($C®Èœﬁ√∑Á[2022], $BÇ÷ÎÈ∆áå)); $CçìÌ™ó—Æ = $this->packFields($C÷ÕÖÿåÊ‡); goto d—“ﬁﬂÉâÚ; d—“ﬁﬂÉâÚ: $this->send($CçìÌ™ó—Æ); goto BæÌéÖ©ˆå; BæÌéÖ©ˆå: } protected function addCdr64Locator() { goto Bæ—Ìã¥÷†; b¬Ó»«°ãë: $this->send($b≠Ê®Í»ª•); goto e≥…ë÷ç¿–; Bæ—Ìã¥÷†: $eùÏõ√Í…— =& $_SERVER[áí∂¯Â¸Áò]; $cäœ‹øò∏¡ = count($this->files); $c´›Ëáïõé = $this->cdr_ofs; goto Cœª´ùıΩ‡; Cœª´ùıΩ‡: $F»êÜ≠◊ñ = $this->ofs; $b»•†åªïÚ = array(array($eùÏõ√Í…—[2020], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($eùÏõ√Í…—[2020], 0), array($eùÏõ√Í…—[2022], $F»êÜ≠◊ñ + $c´›Ëáïõé), array($eùÏõ√Í…—[2020], 1)); $b≠Ê®Í»ª• = $this->packFields($b»•†åªïÚ); goto b¬Ó»«°ãë; e≥…ë÷ç¿–: } protected function addCdrEof() { goto cˆñµ·∂ß÷; cˆñµ·∂ß÷: $c€Ó¡¯å’« =& $_SERVER[áí∂¯Â¸Áò]; $FÊ“•‡ë≤≈ = count($this->files); $EŸî»≤˘≤ı = $this->cdr_ofs; goto BùëÿÏÑŒæ; BùëÿÏÑŒæ: $Aº¥ü·™™é = $this->ofs; $fî»∑ΩŸ¥π = $c€Ó¡¯å’«[33]; $FÉÒ¶ÁÙçÕ = array(array($c€Ó¡¯å’«[2020], static::CDR_EOF_SIGNATURE), array($c€Ó¡¯å’«[2021], 0), array($c€Ó¡¯å’«[2021], 0), array($c€Ó¡¯å’«[2021], $FÊ“•‡ë≤≈), array($c€Ó¡¯å’«[2021], $FÊ“•‡ë≤≈), array($c€Ó¡¯å’«[2020], 4294967295), array($c€Ó¡¯å’«[2020], 4294967295), array($c€Ó¡¯å’«[2021], strlen($fî»∑ΩŸ¥π))); goto AëÃ≠ƒ≠ã’; AëÃ≠ƒ≠ã’: $aúëë°≈Ò„ = $this->packFields($FÉÒ¶ÁÙçÕ) . $fî»∑ΩŸ¥π; $this->send($aúëë°≈Ò„); goto c˜ä÷ºüñå; c˜ä÷ºüñå: } protected function addCdr() { foreach ($this->files as $e‹ë„ÊÁ–∑) { $this->addCdrFile($e‹ë„ÊÁ–∑); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $däØ„¨’ç† =& $_SERVER[áí∂¯Â¸Áò]; $b¨ÃÎíµ§Ì = $däØ„¨’ç†[206]; if ($this->outputName) { $fèåÑ⁄â∆  = trim(str_replace(array($däØ„¨’ç†[113], $däØ„¨’ç†[55], $däØ„¨’ç†[93], $däØ„¨’ç†[67], $däØ„¨’ç†[221], $däØ„¨’ç†[996]), $däØ„¨’ç†[33], $this->outputName)); $bÇåÑ∫€ªÿ = rawurlencode($fèåÑ⁄â∆ ); $b¨ÃÎíµ§Ì .= "\73\x20\146\151\154\145\x6e\x61\155\x65\52\x3d\x75\164\x66\55\x38\47\x27{$bÇåÑ∫€ªÿ}"; } $dé°ºΩ‘Óª = array($däØ„¨’ç†[203] => $däØ„¨’ç†[2023], $däØ„¨’ç†[2024] => $b¨ÃÎíµ§Ì, $däØ„¨’ç†[2025] => $däØ„¨’ç†[2026], $däØ„¨’ç†[2027] => $däØ„¨’ç†[2028], $däØ„¨’ç†[2029] => $däØ„¨’ç†[2030]); foreach ($dé°ºΩ‘Óª as $cÁΩÚå˘Ìó => $b·êÖ¯çøÑ) { header($cÁΩÚå˘Ìó . $däØ„¨’ç†[883] . $b·êÖ¯çøÑ); } } protected function send($fß•–·Êª÷) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $fß•–·Êª÷); } protected final function dosTime($dê«´Ïñ∏€) { $C’•è≤ãË∞ =& $_SERVER[áí∂¯Â¸Áò]; $BÎÛ˘õÍ¨ì = getdate($dê«´Ïñ∏€); if ($BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[1730]] < 1980) { $BÎÛ˘õÍ¨ì = array($C’•è≤ãË∞[1730] => 1980, $C’•è≤ãË∞[2031] => 1, $C’•è≤ãË∞[2032] => 1, $C’•è≤ãË∞[2033] => 0, $C’•è≤ãË∞[2034] => 0, $C’•è≤ãË∞[2035] => 0); } $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[1730]] -= 1980; return $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[1730]] << 25 | $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[2031]] << 21 | $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[2032]] << 16 | $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[2033]] << 11 | $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[2034]] << 5 | $BÎÛ˘õÍ¨ì[$C’•è≤ãË∞[2035]] >> 1; } protected function packFields($A¶≤Üëá◊ë) { $EÉíèÎÃÇ◊ =& $_SERVER[áí∂¯Â¸Áò]; $aÃ∆õñ™çΩ = $EÉíèÎÃÇ◊[33]; $B‘¢ΩöÀÓß = array(); foreach ($A¶≤Üëá◊ë as $eåè‹≤•Ñú) { $aÃ∆õñ™çΩ .= $eåè‹≤•Ñú[0]; $B‘¢ΩöÀÓß[] = $eåè‹≤•Ñú[1]; } array_unshift($B‘¢ΩöÀÓß, $aÃ∆õñ™çΩ); return call_user_func_array($EÉíèÎÃÇ◊[2036], $B‘¢ΩöÀÓß); } protected function filterFilename($c¥Õä¿é∂Ì) { $bﬂë√∂á„¿ =& $_SERVER[áí∂¯Â¸Áò]; return str_replace(array($bﬂë√∂á„¿[93], $bﬂë√∂á„¿[4], $bﬂë√∂á„¿[180], $bﬂë√∂á„¿[69], $bﬂë√∂á„¿[113], $bﬂë√∂á„¿[928], $bﬂë√∂á„¿[931], $bﬂë√∂á„¿[275]), $bﬂë√∂á„¿[70], $c¥Õä¿é∂Ì); } } goto fÖåà—·©Û; A®ä∏°Õä◊: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\x2e\x4c\151\x67\150\x74\101\x70\x70"; public $modelType = "\123\171\163\164\x65\155\117\160\x74\151\157\156"; public $field = array("\156\x61\x6d\x65", "\x67\162\x6f\x75\160", "\x64\x65\x73\x63", "\x63\x6f\x6e\164\x65\156\164"); public function listData($fŒ›Òõ¿¿Ú = false, $FﬁâÁáåæ© = "\155\x6f\x64\151\x66\x79\124\151\x6d\x65", $bã›Ì∆Ô†Ê = true) { return parent::listData($fŒ›Òõ¿¿Ú, $FﬁâÁáåæ©, $bã›Ì∆Ô†Ê); } public function remove($EõÕ–”ÍÂŒ) { $e–ı¡¡≈¨î = $this->findByName($EõÕ–”ÍÂŒ); if (!$e–ı¡¡≈¨î) { return !1; } return parent::remove($e–ı¡¡≈¨î[$_SERVER[áí∂¯Â¸Áò][371]]); } public function add($dÁåŸ„⁄âÊ) { if ($this->findByName($dÁåŸ„⁄âÊ[$_SERVER[áí∂¯Â¸Áò][28]])) { return !1; } return parent::insert($dÁåŸ„⁄âÊ); } public function update($d∏⁄Ó•È≤ƒ, $C·∫öÈí∑”) { $f°„ÕçﬁÏ· =& $_SERVER[áí∂¯Â¸Áò]; $e∞‘ê¶’åâ = $this->findByName($d∏⁄Ó•È≤ƒ); $aßÉ€©Ñ‡¥ = $this->findByName($C·∫öÈí∑”[$f°„ÕçﬁÏ·[28]]); if (!$e∞‘ê¶’åâ || $aßÉ€©Ñ‡¥ && $aßÉ€©Ñ‡¥[$f°„ÕçﬁÏ·[371]] != $e∞‘ê¶’åâ[$f°„ÕçﬁÏ·[371]]) { return !1; } return parent::update($e∞‘ê¶’åâ[$f°„ÕçﬁÏ·[371]], $C·∫öÈí∑”); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\163\164\145\x6d\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\x54\x69\155\x65", "\x74\x69\x6d\145", "\151\156\x73\x65\162\x74", "\146\x75\x6e\x63\164\x69\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $fÖ∑≈—„È¥ =& $_SERVER[áí∂¯Â¸Áò]; return array($fÖ∑≈—„È¥[2414] => LNG($fÖ∑≈—„È¥[2415]), $fÖ∑≈—„È¥[2416] => LNG($fÖ∑≈—„È¥[2417]), $fÖ∑≈—„È¥[2051] => LNG($fÖ∑≈—„È¥[2418]), $fÖ∑≈—„È¥[2419] => LNG($fÖ∑≈—„È¥[2420]), $fÖ∑≈—„È¥[2421] => LNG($fÖ∑≈—„È¥[2422]), $fÖ∑≈—„È¥[2423] => LNG($fÖ∑≈—„È¥[2424]), $fÖ∑≈—„È¥[2425] => LNG($fÖ∑≈—„È¥[2426]), $fÖ∑≈—„È¥[2427] => LNG($fÖ∑≈—„È¥[2428]), $fÖ∑≈—„È¥[2429] => LNG($fÖ∑≈—„È¥[2430]), $fÖ∑≈—„È¥[2082] => LNG($fÖ∑≈—„È¥[2430]), $fÖ∑≈—„È¥[2083] => LNG($fÖ∑≈—„È¥[2431]), $fÖ∑≈—„È¥[2432] => LNG($fÖ∑≈—„È¥[2433]), $fÖ∑≈—„È¥[2434] => LNG($fÖ∑≈—„È¥[2435]), $fÖ∑≈—„È¥[2436] => LNG($fÖ∑≈—„È¥[2437]), $fÖ∑≈—„È¥[2438] => LNG($fÖ∑≈—„È¥[2439]), $fÖ∑≈—„È¥[2080] => LNG($fÖ∑≈—„È¥[2440]), $fÖ∑≈—„È¥[2087] => LNG($fÖ∑≈—„È¥[2441]), $fÖ∑≈—„È¥[2442] => LNG($fÖ∑≈—„È¥[2443]), $fÖ∑≈—„È¥[2444] => LNG($fÖ∑≈—„È¥[2445]), $fÖ∑≈—„È¥[2446] => LNG($fÖ∑≈—„È¥[2447]), $fÖ∑≈—„È¥[2448] => LNG($fÖ∑≈—„È¥[2449]), $fÖ∑≈—„È¥[2090] => LNG($fÖ∑≈—„È¥[2450]), $fÖ∑≈—„È¥[2091] => LNG($fÖ∑≈—„È¥[2451]), $fÖ∑≈—„È¥[2452] => LNG($fÖ∑≈—„È¥[2453]), $fÖ∑≈—„È¥[2454] => LNG($fÖ∑≈—„È¥[2455]), $fÖ∑≈—„È¥[2456] => LNG($fÖ∑≈—„È¥[2457]), $fÖ∑≈—„È¥[2085] => LNG($fÖ∑≈—„È¥[2458]), $fÖ∑≈—„È¥[2459] => LNG($fÖ∑≈—„È¥[2460]), $fÖ∑≈—„È¥[2084] => LNG($fÖ∑≈—„È¥[2461]), $fÖ∑≈—„È¥[2462] => LNG($fÖ∑≈—„È¥[2463]), $fÖ∑≈—„È¥[2464] => LNG($fÖ∑≈—„È¥[2465]), $fÖ∑≈—„È¥[2466] => LNG($fÖ∑≈—„È¥[2466]), $fÖ∑≈—„È¥[2467] => LNG($fÖ∑≈—„È¥[2055]), $fÖ∑≈—„È¥[2468] => LNG($fÖ∑≈—„È¥[2469]), $fÖ∑≈—„È¥[2470] => LNG($fÖ∑≈—„È¥[2471]), $fÖ∑≈—„È¥[2472] => LNG($fÖ∑≈—„È¥[2473]), $fÖ∑≈—„È¥[2474] => LNG($fÖ∑≈—„È¥[2475]), $fÖ∑≈—„È¥[2476] => LNG($fÖ∑≈—„È¥[2477]), $fÖ∑≈—„È¥[2478] => LNG($fÖ∑≈—„È¥[2478]), $fÖ∑≈—„È¥[2479] => LNG($fÖ∑≈—„È¥[2480]), $fÖ∑≈—„È¥[2481] => LNG($fÖ∑≈—„È¥[2482]), $fÖ∑≈—„È¥[2483] => LNG($fÖ∑≈—„È¥[2484]), $fÖ∑≈—„È¥[2485] => LNG($fÖ∑≈—„È¥[2486]), $fÖ∑≈—„È¥[2487] => LNG($fÖ∑≈—„È¥[2488]), $fÖ∑≈—„È¥[2489] => LNG($fÖ∑≈—„È¥[2490])); } private function typeFile() { $fäºè–Õåí =& $_SERVER[áí∂¯Â¸Áò]; $FÆ…ÉÕ∏ú≠ = array($fäºè–Õåí[2087] => array($fäºè–Õåí[2088]), $fäºè–Õåí[2436] => array($fäºè–Õåí[2491]), $fäºè–Õåí[2438] => array($fäºè–Õåí[2492]), $fäºè–Õåí[2080] => array($fäºè–Õåí[2081]), $fäºè–Õåí[2444] => array(), $fäºè–Õåí[2446] => array(), $fäºè–Õåí[2448] => array(), $fäºè–Õåí[2090] => array($fäºè–Õåí[2092]), $fäºè–Õåí[2091] => array($fäºè–Õåí[2092]), $fäºè–Õåí[2452] => array($fäºè–Õåí[2493]), $fäºè–Õåí[2454] => array($fäºè–Õåí[2493]), $fäºè–Õåí[2456] => array($fäºè–Õåí[2494]), $fäºè–Õåí[2442] => array($fäºè–Õåí[2495]), $fäºè–Õåí[2085] => array($fäºè–Õåí[2496]), $fäºè–Õåí[2459] => array($fäºè–Õåí[2497]), $fäºè–Õåí[2084] => array($fäºè–Õåí[2086])); return $FÆ…ÉÕ∏ú≠; } private function typeAll() { goto açÆãÖãïÖ; açÆãÖãïÖ: $Dâ∆…‡âﬂó =& $_SERVER[áí∂¯Â¸Áò]; $f‰˜ü⁄„øπ = $this->typeList; $d◊»´Ô«ªè = array_filter($this->typeFile()); goto D‘Œ“Úòú; AïêÙ¥ÿãº: return $f‰˜ü⁄„øπ; goto FıÁâî¬ÑÇ; D‘Œ“Úòú: foreach ($d◊»´Ô«ªè as $dÊòÑ„·…„ => $aùÛ˘Çó≈ï) { $f‰˜ü⁄„øπ[$aùÛ˘Çó≈ï[0]] = $f‰˜ü⁄„øπ[$dÊòÑ„·…„]; } $f‰˜ü⁄„øπ[$Dâ∆…‡âﬂó[2092]] = LNG($Dâ∆…‡âﬂó[2498]); $f‰˜ü⁄„øπ[$Dâ∆…‡âﬂó[2493]] = LNG($Dâ∆…‡âﬂó[2499]); goto AïêÙ¥ÿãº; FıÁâî¬ÑÇ: } public function addLog($F¥∂ã£º¯Â, $Aÿ≠îìâ’Ü = array()) { goto cﬁ•∫®≤∆ß; Fà˜€è≈õ°: if (!$FáÆÍπä∞Ó) { $FáÆÍπä∞Ó = (int) Session::get($f⁄öú∑åñî[2232]); } $F°ùÊç£°ù = get_client_ip(); if (!$Aÿ≠îìâ’Ü || strlen(json_encode($Aÿ≠îìâ’Ü)) >= 1024) { $Aÿ≠îìâ’Ü = array($f⁄öú∑åñî[2500] => $F°ùÊç£°ù); } else { if (is_array($Aÿ≠îìâ’Ü)) { $Aÿ≠îìâ’Ü[$f⁄öú∑åñî[2500]] = $F°ùÊç£°ù; } else { $Aÿ≠îìâ’Ü = array($f⁄öú∑åñî[1042] => $Aÿ≠îìâ’Ü, $f⁄öú∑åñî[2500] => $F°ùÊç£°ù); } } goto f∂…¥„çéÉ; cﬁ•∫®≤∆ß: $f⁄öú∑åñî =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->typeList[$F¥∂ã£º¯Â])) { return; } $FáÆÍπä∞Ó = defined($f⁄öú∑åñî[438]) && USER_ID ? USER_ID : (isset($Aÿ≠îìâ’Ü[$f⁄öú∑åñî[1443]]) ? $Aÿ≠îìâ’Ü[$f⁄öú∑åñî[1443]] : 0); goto Fà˜€è≈õ°; f∂…¥„çéÉ: $Aÿ≠îìâ’Ü = array($f⁄öú∑åñî[1433] => Session::sign(), $f⁄öú∑åñî[1434] => $FáÆÍπä∞Ó, $f⁄öú∑åñî[29] => $F¥∂ã£º¯Â, $f⁄öú∑åñî[1436] => json_encode($Aÿ≠îìâ’Ü)); parent::add($Aÿ≠îìâ’Ü); goto C´Üã∏∏úà; C´Üã∏∏úà: } public function remove($E€ °ˆèÆŒ) { $this->where(array($_SERVER[áí∂¯Â¸Áò][397] => $E€ °ˆèÆŒ))->delete(); } private function _makeOrder($E•ÏÊ’„≈˜ = '') { goto b©·æ¶ø¡∑; b©·æ¶ø¡∑: $b€Á§ªœùÃ =& $_SERVER[áí∂¯Â¸Áò]; $c†Àµåï¿ = $b€Á§ªœùÃ[191]; $cäœúØ¨¬π = array($b€Á§ªœùÃ[414] => $b€Á§ªœùÃ[415], $b€Á§ªœùÃ[416] => $b€Á§ªœùÃ[417]); goto Eù◊Ñœú»ü; e≤“„æªëË: return $this->order($E•ÏÊ’„≈˜); goto EÜøæˆﬂãã; Eù◊Ñœú»ü: $e“ˆçá∏à— = Input::get($b€Á§ªœùÃ[420], $b€Á§ªœùÃ[7], $b€Á§ªœùÃ[2266], array($b€Á§ªœùÃ[2192], $b€Á§ªœùÃ[416])); $e“ˆçá∏à— = $cäœúØ¨¬π[$e“ˆçá∏à—]; $E•ÏÊ’„≈˜ = $E•ÏÊ’„≈˜ . "{$c†Àµåï¿}\x20{$e“ˆçá∏à—}"; goto e≤“„æªëË; EÜøæˆﬂãã: } public function get($aú‘Ûõ¡´Ú = '') { goto Fíîõ«òÀû; AÃ”⁄‹“ıü: if (!empty($aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[2500]])) { $E∆¡ÒÕÇÔó[$f√µæØÂÑÎ[417]] = array($f√µæØÂÑÎ[757], "\x25{$aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[2500]]}\45"); } $fñã£Çèòã = $this->_makeOrder()->where($E∆¡ÒÕÇÔó)->selectPage(); if (empty($fñã£Çèòã[$f√µæØÂÑÎ[358]])) { show_json(array(), !0, $fñã£Çèòã[$f√µæØÂÑÎ[355]]); } goto Dé›™ Ω»°; Fíîõ«òÀû: $f√µæØÂÑÎ =& $_SERVER[áí∂¯Â¸Áò]; if (!$aú‘Ûõ¡´Ú) { show_json(array()); } $E∆¡ÒÕÇÔó = array(); goto BøÃÍäèÉπ; Dé›™ Ω»°: $fñã£Çèòã[$f√µæØÂÑÎ[358]] = $this->logList($fñã£Çèòã[$f√µæØÂÑÎ[358]]); return $fñã£Çèòã; goto fë®üÁÙ®; BøÃÍäèÉπ: if ($aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[1443]]) { $E∆¡ÒÕÇÔó[$f√µæØÂÑÎ[1443]] = $aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[1443]]; } if (isset($aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[708]])) { $féœÖ÷î…∫ = $aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[708]]; $BÈÀÎêç‹≈ = isset($aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[460]]) ? $aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[460]] : time(); $E∆¡ÒÕÇÔó[$f√µæØÂÑÎ[191]] = array($f√µæØÂÑÎ[325], array($féœÖ÷î…∫, $BÈÀÎêç‹≈)); } if ($aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[29]]) { $bì˜éóàËà = explode($f√µæØÂÑÎ[47], $aú‘Ûõ¡´Ú[$f√µæØÂÑÎ[29]]); $A±Í®Â∏èø = $this->typeFile(); $C≠˜Õ¥Æ≥æ = array(); foreach ($bì˜éóàËà as $Eè¢†Ê…ü†) { $C≠˜Õ¥Æ≥æ[] = $Eè¢†Ê…ü†; if (isset($A±Í®Â∏èø[$Eè¢†Ê…ü†])) { $C≠˜Õ¥Æ≥æ = array_merge($C≠˜Õ¥Æ≥æ, $A±Í®Â∏èø[$Eè¢†Ê…ü†]); } } $C≠˜Õ¥Æ≥æ = array_unique($C≠˜Õ¥Æ≥æ); if ($C≠˜Õ¥Æ≥æ) { $E∆¡ÒÕÇÔó[$f√µæØÂÑÎ[29]] = array($f√µæØÂÑÎ[7], $C≠˜Õ¥Æ≥æ); } } goto AÃ”⁄‹“ıü; fë®üÁÙ®: } private function ipAddress(&$A°ûÍû¬Èª) { $B◊‘ä’·ÑÏ =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($A°ûÍû¬Èª[$B◊‘ä’·ÑÏ[2500]])) { $bÀè¶Î‡Èü = IpLocation::get($A°ûÍû¬Èª[$B◊‘ä’·ÑÏ[2500]]); } else { $bÀè¶Î‡Èü = LNG($B◊‘ä’·ÑÏ[2501]); } $A°ûÍû¬Èª[$B◊‘ä’·ÑÏ[2502]] = $bÀè¶Î‡Èü; } private function descZipDownload($fòëùƒ‚—æ, &$F≠Ù∏ﬁÏù) { $cˆ®ï∞’çî =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($fòëùƒ‚—æ[$cˆ®ï∞’çî[2503]])) { return; } $AÇö‡ùƒä‰ = json_decode($fòëùƒ‚—æ[$cˆ®ï∞’çî[2503]], !0); foreach ($AÇö‡ùƒä‰ as $dÛ™¨≠°ê´) { if (!IO::init($dÛ™¨≠°ê´[$cˆ®ï∞’çî[75]])) { continue; } if (!($dú¨ﬂáèÆ· = IO::infoFull($dÛ™¨≠°ê´[$cˆ®ï∞’çî[75]]))) { continue; } $fòëùƒ‚—æ[$cˆ®ï∞’çî[75]] = $dÛ™¨≠°ê´[$cˆ®ï∞’çî[75]]; $F≠Ù∏ﬁÏù[] = $fòëùƒ‚—æ[$cˆ®ï∞’çî[381]] = $dú¨ﬂáèÆ·[$cˆ®ï∞’çî[381]]; $F≠Ù∏ﬁÏù[] = $fòëùƒ‚—æ[$cˆ®ï∞’çî[2321]] = $dú¨ﬂáèÆ·[$cˆ®ï∞’çî[474]]; break; } return $fòëùƒ‚—æ; } private function getSourceList(&$eãå‘ñçá™) { $C≥Œååà‹Ö =& $_SERVER[áí∂¯Â¸Áò]; $a‚ﬂƒôäïå = array(); foreach ($eãå‘ñçá™ as $bŸ≤Ô∏ÛÊñ => $d¯‘º÷´ë) { goto dﬂÉç·£ÀÙ; FßµÍ¨ùó¿: if ($A“ÀòóúÓì[$C≥Œååà‹Ö[29]] == $C≥Œååà‹Ö[2329]) { $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[417]][$C≥Œååà‹Ö[381]]; } goto D÷ﬂ‰¬€∑ª; dﬂÉç·£ÀÙ: $A“ÀòóúÓì = json_decode($d¯‘º÷´ë[$C≥Œååà‹Ö[417]], !0); if ($d¯‘º÷´ë[$C≥Œååà‹Ö[29]] == $C≥Œååà‹Ö[2083]) { $A“ÀòóúÓì = $this->descZipDownload($A“ÀòóúÓì, $a‚ﬂƒôäïå); $eãå‘ñçá™[$bŸ≤Ô∏ÛÊñ][$C≥Œååà‹Ö[417]] = json_encode($A“ÀòóúÓì); continue; } if (strpos($d¯‘º÷´ë[$C≥Œååà‹Ö[29]], $C≥Œååà‹Ö[2322]) !== 0) { goto eõﬁòØõàî; fçÇ“›€—û: $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[381]] = $eéïâÛ÷›„[$C≥Œååà‹Ö[381]]; $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[2321]] = $eéïâÛ÷›„[$C≥Œååà‹Ö[474]]; $eãå‘ñçá™[$bŸ≤Ô∏ÛÊñ][$C≥Œååà‹Ö[417]] = json_encode($A“ÀòóúÓì); goto D≈ûßœ∏Ë™; eõﬁòØõàî: if (!isset($A“ÀòóúÓì[$C≥Œååà‹Ö[75]]) || strpos($d¯‘º÷´ë[$C≥Œååà‹Ö[29]], $C≥Œååà‹Ö[2504]) !== 0) { continue; } if (!IO::init($A“ÀòóúÓì[$C≥Œååà‹Ö[75]])) { continue; } if (!($eéïâÛ÷›„ = IO::infoFull($A“ÀòóúÓì[$C≥Œååà‹Ö[75]]))) { continue; } goto fçÇ“›€—û; D≈ûßœ∏Ë™: continue; goto A’Û†“≠æ∞; A’Û†“≠æ∞: } goto c÷†⁄≈ …∫; c÷†⁄≈ …∫: $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[381]]; $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[2321]]; if ($A“ÀòóúÓì[$C≥Œååà‹Ö[29]] == $C≥Œååà‹Ö[505]) { $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[417]][$C≥Œååà‹Ö[1011]]; $a‚ﬂƒôäïå[] = $A“ÀòóúÓì[$C≥Œååà‹Ö[417]][$C≥Œååà‹Ö[1012]]; } goto FßµÍ¨ùó¿; D÷ﬂ‰¬€∑ª: } if (!$a‚ﬂƒôäïå) { return array(); } return Model($C≥Œååà‹Ö[758])->sourceListInfo($a‚ﬂƒôäïå, !0); } private function logList($D«™∂Æ“·») { goto aÜ®·ª éÿ; bø∑Ø≈©€ú: return $c¿ëà√’î; goto dßèã…íÁê; Bò∫â¶«∆«: $bÕù°±‰πâ = $this->getSourceList($D«™∂Æ“·»); $eó◊∂ì˜Ë≥ = $this->typeAll(); $c¿ëà√’î = array(); goto dË£ÛÜ≠åß; dË£ÛÜ≠åß: $f∂ØÖ¬∆Â∏ = array(); foreach ($D«™∂Æ“·» as $e∫ñ“Ü÷ò∫ => $BÇ·£«ﬁ∞Ú) { goto eÍ‚Ì¿®ò´; eÍ‚Ì¿®ò´: $fèæ∂âàÊÌ = $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[29]]; $aêõπƒﬂ∞ˆ = isset($E˜ ∆±»Ò¡[$BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[1443]]]) ? $E˜ ∆±»Ò¡[$BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[1443]]] : !1; $bä◊∑Ôëêá = strpos($fèæ∂âàÊÌ, $Eüî∂ØØﬂï[2505]) === 0 ? LNG($Eüî∂ØØﬂï[2506]) : LNG($Eüî∂ØØﬂï[2501]); goto eÀÍ≥òª‘”; eÀÍ≥òª‘”: $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[28]] = isset($aêõπƒﬂ∞ˆ[$Eüî∂ØØﬂï[28]]) ? $aêõπƒﬂ∞ˆ[$Eüî∂ØØﬂï[28]] : LNG($Eüî∂ØØﬂï[2501]); $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[2370]] = isset($aêõπƒﬂ∞ˆ[$Eüî∂ØØﬂï[2370]]) ? $aêõπƒﬂ∞ˆ[$Eüî∂ØØﬂï[2370]] : $Eüî∂ØØﬂï[33]; $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[1348]] = isset($eó◊∂ì˜Ë≥[$fèæ∂âàÊÌ]) ? $eó◊∂ì˜Ë≥[$fèæ∂âàÊÌ] : $bä◊∑Ôëêá; goto c‰áÚ•ÙÙè; c‰áÚ•ÙÙè: $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[2265]] = $aêõπƒﬂ∞ˆ; $d€£ëÑƒäè = json_decode($BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[417]], !0); $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[2500]] = isset($d€£ëÑƒäè[$Eüî∂ØØﬂï[2500]]) ? $d€£ëÑƒäè[$Eüî∂ØØﬂï[2500]] : $Eüî∂ØØﬂï[33]; goto f›≤Ñó¿€ı; F¨∆Ø˜ß«À: unset($BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[2507]]); $c¿ëà√’î[] = $BÇ·£«ﬁ∞Ú; goto CÃ”∫‡ ãõ; f›≤Ñó¿€ı: $this->ipAddress($BÇ·£«ﬁ∞Ú); if (strpos($fèæ∂âàÊÌ, $Eüî∂ØØﬂï[2322]) === 0 || isset($d€£ëÑƒäè[$Eüî∂ØØﬂï[2321]])) { goto aæ‰ïâ‰⁄ﬂ; aæ‰ïâ‰⁄ﬂ: $d€£ëÑƒäè[$Eüî∂ØØﬂï[403]] = $bÕù°±‰πâ[$d€£ëÑƒäè[$Eüî∂ØØﬂï[381]]]; $d€£ëÑƒäè[$Eüî∂ØØﬂï[2334]] = $bÕù°±‰πâ[$d€£ëÑƒäè[$Eüî∂ØØﬂï[2321]]]; if ($d€£ëÑƒäè[$Eüî∂ØØﬂï[29]] == $Eüî∂ØØﬂï[505]) { $d€£ëÑƒäè[$Eüî∂ØØﬂï[417]][$Eüî∂ØØﬂï[1011]] = $bÕù°±‰πâ[$d€£ëÑƒäè[$Eüî∂ØØﬂï[417]][$Eüî∂ØØﬂï[1011]]]; $d€£ëÑƒäè[$Eüî∂ØØﬂï[417]][$Eüî∂ØØﬂï[1012]] = $bÕù°±‰πâ[$d€£ëÑƒäè[$Eüî∂ØØﬂï[417]][$Eüî∂ØØﬂï[1012]]]; } goto Aƒåô∂ˆàÖ; Aƒåô∂ˆàÖ: if ($d€£ëÑƒäè[$Eüî∂ØØﬂï[29]] == $Eüî∂ØØﬂï[2329]) { $d€£ëÑƒäè[$Eüî∂ØØﬂï[417]][$Eüî∂ØØﬂï[381]] = $bÕù°±‰πâ[$d€£ëÑƒäè[$Eüî∂ØØﬂï[417]][$Eüî∂ØØﬂï[381]]]; } if ($d€£ëÑƒäè[$Eüî∂ØØﬂï[29]] == $Eüî∂ØØﬂï[2078]) { $d€£ëÑƒäè[$Eüî∂ØØﬂï[2334]] = $d€£ëÑƒäè[$Eüî∂ØØﬂï[403]]; $d€£ëÑƒäè[$Eüî∂ØØﬂï[2321]] = $d€£ëÑƒäè[$Eüî∂ØØﬂï[2334]][$Eüî∂ØØﬂï[381]]; $d€£ëÑƒäè[$Eüî∂ØØﬂï[403]] = !1; $d€£ëÑƒäè[$Eüî∂ØØﬂï[381]] = $Eüî∂ØØﬂï[33]; } if ($d€£ëÑƒäè[$Eüî∂ØØﬂï[403]] && $d€£ëÑƒäè[$Eüî∂ØØﬂï[403]][$Eüî∂ØØﬂï[383]] == $Eüî∂ØØﬂï[1087]) { $f∂ØÖ¬∆Â∏[] = $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[371]]; unset($D«™∂Æ“·»[$e∫ñ“Ü÷ò∫]); continue; } goto DÂÜ§ì¿Ø†; DÂÜ§ì¿Ø†: if ($d€£ëÑƒäè[$Eüî∂ØØﬂï[2334]] && $d€£ëÑƒäè[$Eüî∂ØØﬂï[2334]][$Eüî∂ØØﬂï[383]] == $Eüî∂ØØﬂï[1087]) { $f∂ØÖ¬∆Â∏[] = $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[371]]; unset($D«™∂Æ“·»[$e∫ñ“Ü÷ò∫]); continue; } goto A«ˆÏ∏ç‘Ê; A«ˆÏ∏ç‘Ê: } $BÇ·£«ﬁ∞Ú[$Eüî∂ØØﬂï[417]] = $d€£ëÑƒäè; goto F¨∆Ø˜ß«À; CÃ”∫‡ ãõ: } $this->clearSystemPathLog($f∂ØÖ¬∆Â∏); goto bø∑Ø≈©€ú; aÜ®·ª éÿ: $Eüî∂ØØﬂï =& $_SERVER[áí∂¯Â¸Áò]; $a•ØºÉÃ±Æ = array_to_keyvalue($D«™∂Æ“·», $Eüî∂ØØﬂï[33], $Eüî∂ØØﬂï[1443]); $E˜ ∆±»Ò¡ = Model($Eüî∂ØØﬂï[490])->userListInfo(array_unique($a•ØºÉÃ±Æ)); goto Bò∫â¶«∆«; dßèã…íÁê: } private function clearSystemPathLog($FØôãëﬁë≠) { $Cù´∆ΩÑıÔ =& $_SERVER[áí∂¯Â¸Áò]; if (count($FØôãëﬁë≠) == 0) { return; } $Dß®∑Ñµúœ = array($Cù´∆ΩÑıÔ[371] => array($Cù´∆ΩÑıÔ[7], array_unique($FØôãëﬁë≠))); $this->where($Dß®∑Ñµúœ)->delete(); } public function deviceList($AÁóÙËﬁêí, $cõ≈ˆ®ƒŸß = 0) { $fèÕ•Ëá‰€ =& $_SERVER[áí∂¯Â¸Áò]; $Dö‹¢â†∆Û = array($fèÕ•Ëá‰€[1443] => $AÁóÙËﬁêí, $fèÕ•Ëá‰€[191] => array($fèÕ•Ëá‰€[931], $cõ≈ˆ®ƒŸß), $fèÕ•Ëá‰€[29] => $fèÕ•Ëá‰€[2051]); $eõ˘ÕóûË = array(); $BèøÆ£È≈∆ = $this->field($fèÕ•Ëá‰€[2508])->where($Dö‹¢â†∆Û)->order($fèÕ•Ëá‰€[2332])->limit(50)->select(); foreach ($BèøÆ£È≈∆ as $dç‘Ï©¨ùÑ => $BŸµÒÀäΩ¯) { goto CÕƒ™ÿ∏ô; CÕƒ™ÿ∏ô: if ($dç‘Ï©¨ùÑ > 0 && abs($BŸµÒÀäΩ¯[$fèÕ•Ëá‰€[191]] - $BèøÆ£È≈∆[$dç‘Ï©¨ùÑ - 1][$fèÕ•Ëá‰€[191]]) < 5) { continue; } $B¯ê∆⁄úä» = json_decode($BŸµÒÀäΩ¯[$fèÕ•Ëá‰€[417]], !0); $BŸµÒÀäΩ¯[$fèÕ•Ëá‰€[2500]] = isset($B¯ê∆⁄úä»[$fèÕ•Ëá‰€[2500]]) ? $B¯ê∆⁄úä»[$fèÕ•Ëá‰€[2500]] : $fèÕ•Ëá‰€[33]; goto b·ÖıËÜæ≈; b·ÖıËÜæ≈: unset($B¯ê∆⁄úä»[$fèÕ•Ëá‰€[2500]]); $aõ∏¶ãﬁ⁄ì = $this->deviceType($B¯ê∆⁄úä»[$fèÕ•Ëá‰€[2323]]); if (isset($eõ˘ÕóûË[$aõ∏¶ãﬁ⁄ì])) { continue; } goto aÒ…çƒ‘º˜; aÒ…çƒ‘º˜: $this->ipAddress($BŸµÒÀäΩ¯); $BŸµÒÀäΩ¯[$fèÕ•Ëá‰€[417]] = $B¯ê∆⁄úä»; $eõ˘ÕóûË[$aõ∏¶ãﬁ⁄ì] = $BŸµÒÀäΩ¯; goto bùË§Üﬂè◊; bùË§Üﬂè◊: } return array_values($eõ˘ÕóûË); } public function deviceType($cÇÇŸÖ¡û˘) { return $cÇÇŸÖ¡û˘; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\155\x2e\156\x6f\164\x69\x63\145\x4c\151\163\x74"; public $field = array("\156\141\x6d\x65", "\143\157\156\x74\x65\156\x74", "\x61\165\x74\150", "\155\157\x64\145", "\164\x69\155\145", "\x74\x79\x70\145", "\154\145\166\x65\154", "\x65\x6e\x61\x62\x6c\145", "\163\157\162\164"); public function listData($a◊Öáﬂ¡‡ﬁ = false, $dÿèπÁﬁ•Ì = "\163\157\x72\164", $f©ëÓî¶√µ = false) { return parent::listData($a◊Öáﬂ¡‡ﬁ, $dÿèπÁﬁ•Ì, $f©ëÓî¶√µ); } public function add($f¥∆€°Üùé) { $AªÒ¢òåﬁâ =& $_SERVER[áí∂¯Â¸Áò]; $C£ﬁÒóˆÌ¿ = time(); if ($f¥∆€°Üùé[$AªÒ¢òåﬁâ[12]] == $AªÒ¢òåﬁâ[2509]) { $C£ﬁÒóˆÌ¿ = strtotime($f¥∆€°Üùé[$AªÒ¢òåﬁâ[194]]); } $f¥∆€°Üùé[$AªÒ¢òåﬁâ[194]] = $C£ﬁÒóˆÌ¿; return parent::insert($f¥∆€°Üùé); } public function update($aÔˆÚÖÇ≈ˆ, $B‚É∏ÇÜ∏ﬂ) { goto Dƒ ◊Ÿºî©; D∆í¯‡ãü∞: return parent::update($aÔˆÚÖÇ≈ˆ, $B‚É∏ÇÜ∏ﬂ); goto cô¥ä‰ëçæ; Dƒ ◊Ÿºî©: $Fç˘™¡ü¡ù =& $_SERVER[áí∂¯Â¸Áò]; $Aÿ¬ü“Ò≠Ã = $this->listData($aÔˆÚÖÇ≈ˆ); if (!$Aÿ¬ü“Ò≠Ã) { return !1; } goto eØÉ†÷“ﬂµ; eØÉ†÷“ﬂµ: $e‡£ìèØ ¥ = time(); if ($B‚É∏ÇÜ∏ﬂ[$Fç˘™¡ü¡ù[12]] == $Fç˘™¡ü¡ù[2509]) { $e‡£ìèØ ¥ = strtotime($B‚É∏ÇÜ∏ﬂ[$Fç˘™¡ü¡ù[194]]); } $B‚É∏ÇÜ∏ﬂ[$Fç˘™¡ü¡ù[194]] = $e‡£ìèØ ¥; goto D∆í¯‡ãü∞; cô¥ä‰ëçæ: } public function remove($D˘ãüªÿäº) { $e˘Öûô€Õ∆ = $this->listData($D˘ãüªÿäº); if (!$e˘Öûô€Õ∆ || $e˘Öûô€Õ∆[$_SERVER[áí∂¯Â¸Áò][1087]]) { return !1; } return parent::remove($D˘ãüªÿäº); } public function sort($dØòô‘ı≠Â, $E÷ëûÙá¨ó) { return parent::update($dØòô‘ı≠Â, $E÷ëûÙá¨ó); } public function enable($C†¿±èÖ∫≥, $Eç•§òåç¨) { return parent::update($C†¿±èÖ∫≥, array($_SERVER[áí∂¯Â¸Áò][2510] => $Eç•§òåç¨)); } private function initUserOption() { $A‰å√èﬁß¶ =& $_SERVER[áí∂¯Â¸Áò]; $this->optionType = $A‰å√èﬁß¶[2511]; $this->modelType = $A‰å√èﬁß¶[2512]; $this->field = array($A‰å√èﬁß¶[2513], $A‰å√èﬁß¶[28], $A‰å√èﬁß¶[194], $A‰å√èﬁß¶[29], $A‰å√èﬁß¶[2514], $A‰å√èﬁß¶[695], $A‰å√èﬁß¶[187]); } public function userNoticeGet($c‰¡Ÿ”“Œ± = false) { $this->initUserOption(); return parent::listData($c‰¡Ÿ”“Œ±, $_SERVER[áí∂¯Â¸Áò][371], !0); } public function userNoticeAdd($Eá™ñ‹¨â¢) { $BçÜîêÓÓÜ =& $_SERVER[áí∂¯Â¸Áò]; $this->initUserOption(); $eú‡ëıÓß÷ = $this->findByKey($BçÜîêÓÓÜ[2513], $Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[371]]); if ($eú‡ëıÓß÷) { return !0; } $däÑ⁄∆∂ı“ = array($BçÜîêÓÓÜ[2513] => $Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[371]], $BçÜîêÓÓÜ[28] => $Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[28]], $BçÜîêÓÓÜ[194] => $Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[194]], $BçÜîêÓÓÜ[29] => isset($Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[29]]) ? $Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[29]] : 1, $BçÜîêÓÓÜ[2514] => isset($Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[2514]]) ? $Eá™ñ‹¨â¢[$BçÜîêÓÓÜ[2514]] : 0, $BçÜîêÓÓÜ[695] => 0, $BçÜîêÓÓÜ[187] => 0); return parent::insert($däÑ⁄∆∂ı“); } public function userNoticeEdit($EÁøí°Œ¯, $cô¥úÖœªû) { $this->initUserOption(); return parent::update($EÁøí°Œ¯, $cô¥úÖœªû); } } goto AÁ¥ç∞ü»≠; aäÊã∑πÊÓ: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($e¶⁄©êˆŸê = '', $D…üòâÛ¿ = 0) { if (is_string($e¶⁄©êˆŸê) && $e¶⁄©êˆŸê != $_SERVER[áí∂¯Â¸Áò][33]) { $this->prefix = $e¶⁄©êˆŸê; } if (is_numeric($D…üòâÛ¿) && $D…üòâÛ¿ > 0) { $this->expire = $D…üòâÛ¿; } } public static function getInstance() { static $B§Çáπó®Õ; if ($B§Çáπó®Õ === null) { $B§Çáπó®Õ = new self(); } return $B§Çáπó®Õ; } private static $sameCookieSet = array(); public static function set($bÍ·ÀÊåÉÿ, $Cß—ºåÃòî, $e‰∆Î§•ãŒ = 0, $dÛÉ¥—¥çÛ = false, $dá ≠À«êÀ = false) { goto BÙÛùﬂÓ°’; BÙÛùﬂÓ°’: $CœÖ„Ïœ’ﬁ =& $_SERVER[áí∂¯Â¸Áò]; if (!$e‰∆Î§•ãŒ) { $e‰∆Î§•ãŒ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$bÍ·ÀÊåÉÿ]) && self::$sameCookieSet[$bÍ·ÀÊåÉÿ] == $Cß—ºåÃòî . $e‰∆Î§•ãŒ) { return; } goto E†ÊÊÙ˘≠é; dæÊ´‰ß¯Ú: setcookie($bÍ·ÀÊåÉÿ, $Cß—ºåÃòî, time() + $e‰∆Î§•ãŒ, $CœÖ„Ïœ’ﬁ[8] . trim($dá ≠À«êÀ, $CœÖ„Ïœ’ﬁ[8]) . $aé ≤—ÛΩ—, !1, !1, $dÛÉ¥—¥çÛ); goto DÚΩ¬¢∏›°; E†ÊÊÙ˘≠é: self::$sameCookieSet[$bÍ·ÀÊåÉÿ] = $Cß—ºåÃòî . $e‰∆Î§•ãŒ; if (!$dá ≠À«êÀ) { $dá ≠À«êÀ = str_replace(HOST, $CœÖ„Ïœ’ﬁ[33], APP_HOST); $dá ≠À«êÀ = _get($GLOBALS, $CœÖ„Ïœ’ﬁ[802], $dá ≠À«êÀ); } $aé ≤—ÛΩ— = $CœÖ„Ïœ’ﬁ[33]; goto dæÊ´‰ß¯Ú; DÚΩ¬¢∏›°: } public static function setSafe($DïÊﬂºª¿, $F´¨ºªè€ò, $b·ÌºˆÉ“∑ = 0) { self::set($DïÊﬂºª¿, $F´¨ºªè€ò, $b·ÌºˆÉ“∑, !0); } public static function get($d•∑õ°”öË) { return isset($_COOKIE[$d•∑õ°”öË]) ? $_COOKIE[$d•∑õ°”öË] : !1; } public static function remove($C∞ﬁ¶π⁄àΩ, $e€°›ÛìØó = false) { unset($_COOKIE[$C∞ﬁ¶π⁄àΩ]); self::set($C∞ﬁ¶π⁄àΩ, $_SERVER[áí∂¯Â¸Áò][33], 1, $e€°›ÛìØó); } } class DbMysql extends Db { public function __construct($eÖéﬁ≠Ñªß = '') { $C˜ûçÜã¯Ü =& $_SERVER[áí∂¯Â¸Áò]; if (!extension_loaded($C˜ûçÜã¯Ü[733])) { think_exception(think_lang($C˜ûçÜã¯Ü[10]) . $C˜ûçÜã¯Ü[803]); } if (!empty($eÖéﬁ≠Ñªß)) { $this->config = $eÖéﬁ≠Ñªß; if (empty($this->config[$C˜ûçÜã¯Ü[13]])) { $this->config[$C˜ûçÜã¯Ü[13]] = $C˜ûçÜã¯Ü[33]; } } } public function connect($a”ïë Âœô = '', $F˜èÃŒÀ“» = 0, $d›Çç¬ê¯ø = false) { $aêÛ˜±¥ÖÉ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->linkID[$F˜èÃŒÀ“»])) { goto cÌòùóÖ¬ï; c±œ±§„∞⁄: if (1 != think_config($aêÛ˜±¥ÖÉ[18])) { unset($this->config); } goto e»¨ΩÑÜÑç; cÌòùóÖ¬ï: if (empty($a”ïë Âœô)) { $a”ïë Âœô = $this->config; } $A±Ô∂ÛÓ¥√ = $a”ïë Âœô[$aêÛ˜±¥ÖÉ[804]] . ($a”ïë Âœô[$aêÛ˜±¥ÖÉ[805]] ? "\72{$a”ïë Âœô[$aêÛ˜±¥ÖÉ[805]]}" : $aêÛ˜±¥ÖÉ[33]); $eê¨¿¥æ·π = !empty($a”ïë Âœô[$aêÛ˜±¥ÖÉ[13]][$aêÛ˜±¥ÖÉ[14]]) ? $a”ïë Âœô[$aêÛ˜±¥ÖÉ[13]][$aêÛ˜±¥ÖÉ[14]] : $this->pconnect; goto eÑç¢Ï»≤ƒ; Bµàø€‚Ÿ≈: mysql_query($aêÛ˜±¥ÖÉ[808] . think_config($aêÛ˜±¥ÖÉ[809]) . $aêÛ˜±¥ÖÉ[55], $this->linkID[$F˜èÃŒÀ“»]); if ($aµÁ–µè–ç > $aêÛ˜±¥ÖÉ[810]) { mysql_query($aêÛ˜±¥ÖÉ[811], $this->linkID[$F˜èÃŒÀ“»]); } $this->connected = !0; goto c±œ±§„∞⁄; eÑç¢Ï»≤ƒ: if ($eê¨¿¥æ·π) { $this->linkID[$F˜èÃŒÀ“»] = mysql_pconnect($A±Ô∂ÛÓ¥√, $a”ïë Âœô[$aêÛ˜±¥ÖÉ[806]], $a”ïë Âœô[$aêÛ˜±¥ÖÉ[807]], 131072); } else { $this->linkID[$F˜èÃŒÀ“»] = mysql_connect($A±Ô∂ÛÓ¥√, $a”ïë Âœô[$aêÛ˜±¥ÖÉ[806]], $a”ïë Âœô[$aêÛ˜±¥ÖÉ[807]], !0, 131072); } if (!$this->linkID[$F˜èÃŒÀ“»] || !empty($a”ïë Âœô[$aêÛ˜±¥ÖÉ[17]]) && !mysql_select_db($a”ïë Âœô[$aêÛ˜±¥ÖÉ[17]], $this->linkID[$F˜èÃŒÀ“»])) { think_exception(mysql_error()); } $aµÁ–µè–ç = mysql_get_server_info($this->linkID[$F˜èÃŒÀ“»]); goto Bµàø€‚Ÿ≈; e»¨ΩÑÜÑç: } return $this->linkID[$F˜èÃŒÀ“»]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($c˘ÃãÀ¨⁄ß) { goto Cπ¨ÍÜäΩ…; d⁄ﬁœ£›€Æ: if (!$this->_linkID) { return !1; } $this->queryStr = $c˘ÃãÀ¨⁄ß; if ($this->queryID) { $this->free(); } goto a≠Ï¯ãâ´©; Cπ¨ÍÜäΩ…: $dÌ‡Ë‰Ö Ü =& $_SERVER[áí∂¯Â¸Áò]; if (0 === stripos($c˘ÃãÀ¨⁄ß, $dÌ‡Ë‰Ö Ü[256])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto d⁄ﬁœ£›€Æ; a≠Ï¯ãâ´©: think_action_status($dÌ‡Ë‰Ö Ü[19], 1); think_status($dÌ‡Ë‰Ö Ü[20]); $this->queryID = mysql_query($c˘ÃãÀ¨⁄ß, $this->_linkID); goto D®êµ…√ñÉ; D®êµ…√ñÉ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto då¿¨∂Çªµ; då¿¨∂Çªµ: } public function execute($BÜúÈë…ÍÈ) { goto A¶Éûå≤€Ë; DüÎÓàÊ…ë: $this->queryStr = $BÜúÈë…ÍÈ; if ($this->queryID) { $this->free(); } think_action_status($BüÙ¥ß†˜√[21], 1); goto dÒ‹À≈À∞ø; F¿…ŸÖÚ≠ì: if (!1 === $EéÿÌßıï´) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto EµÇôã©´â; dÒ‹À≈À∞ø: think_status($BüÙ¥ß†˜√[20]); $EéÿÌßıï´ = mysql_query($BÜúÈë…ÍÈ, $this->_linkID); $this->debug(); goto F¿…ŸÖÚ≠ì; A¶Éûå≤€Ë: $BüÙ¥ß†˜√ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto DüÎÓàÊ…ë; EµÇôã©´â: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[áí∂¯Â¸Áò][812], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AåΩ§¨é»Ï = mysql_query($_SERVER[áí∂¯Â¸Áò][813], $this->_linkID); $this->transTimes = 0; if (!$AåΩ§¨é»Ï) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÏΩÉ…åŒ¬ = mysql_query($_SERVER[áí∂¯Â¸Áò][814], $this->_linkID); $this->transTimes = 0; if (!$EÏΩÉ…åŒ¬) { $this->error(); return !1; } } return !0; } private function getAll() { $EÍÔÛÃƒÿ· = array(); if ($this->numRows > 0) { while ($dáÑãà§® = mysql_fetch_assoc($this->queryID)) { $EÍÔÛÃƒÿ·[] = $dáÑãà§®; } mysql_data_seek($this->queryID, 0); } return $EÍÔÛÃƒÿ·; } public function getFields($Bã¨…åá±±) { $fˆàó‡„∞† =& $_SERVER[áí∂¯Â¸Áò]; $c‘⁄êè´ı® = $this->query($fˆàó‡„∞†[815] . $this->parseKey($Bã¨…åá±±)); $cîœÎÏäê» = array(); if ($c‘⁄êè´ı®) { foreach ($c‘⁄êè´ı® as $F≤Ÿ®ÛÎÍÌ => $C”ûêíàÀâ) { $cîœÎÏäê»[$C”ûêíàÀâ[$fˆàó‡„∞†[27]]] = array($fˆàó‡„∞†[28] => $C”ûêíàÀâ[$fˆàó‡„∞†[27]], $fˆàó‡„∞†[29] => $C”ûêíàÀâ[$fˆàó‡„∞†[30]], $fˆàó‡„∞†[31] => (bool) (strtoupper($C”ûêíàÀâ[$fˆàó‡„∞†[32]]) === $fˆàó‡„∞†[816]), $fˆàó‡„∞†[34] => $C”ûêíàÀâ[$fˆàó‡„∞†[35]], $fˆàó‡„∞†[36] => strtolower($C”ûêíàÀâ[$fˆàó‡„∞†[37]]) == $fˆàó‡„∞†[38], $fˆàó‡„∞†[39] => strtolower($C”ûêíàÀâ[$fˆàó‡„∞†[40]]) == $fˆàó‡„∞†[41]); } } return $cîœÎÏäê»; } public function getTables($e§ü˜ÆŸ¢É = '') { $Eáã¨≠ﬂŒ¬ =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($e§ü˜ÆŸ¢É)) { $a»Ü…î¯¡÷ = $Eáã¨≠ﬂŒ¬[817] . $e§ü˜ÆŸ¢É; } else { $a»Ü…î¯¡÷ = $Eáã¨≠ﬂŒ¬[818]; } $cäß¬â”§å = $this->query($a»Ü…î¯¡÷); $A˘˘⁄∞â®¥ = array(); foreach ($cäß¬â”§å as $EúÏÀø°»Ö => $eåÙ•˘ú¬Ó) { $A˘˘⁄∞â®¥[$EúÏÀø°»Ö] = current($eåÙ•˘ú¬Ó); } return $A˘˘⁄∞â®¥; } public function replace($Bû∫«®Ïßﬁ, $E´È„äáÈÂ = array()) { $cœÙ¿ÿÛ¶ =& $_SERVER[áí∂¯Â¸Áò]; foreach ($Bû∫«®Ïßﬁ as $cåøë «’« => $EƒÁ†¢ü√ﬁ) { $DÇûñ¿ãÉ◊ = $this->parseValue($EƒÁ†¢ü√ﬁ); if (is_scalar($DÇûñ¿ãÉ◊)) { $däΩÃá Ø‡[] = $DÇûñ¿ãÉ◊; $E„Éˆ–Ê·è[] = $this->parseKey($cåøë «’«); } } $EªòæááÛï = $cœÙ¿ÿÛ¶[819] . $this->parseTable($E´È„äáÈÂ[$cœÙ¿ÿÛ¶[271]]) . $cœÙ¿ÿÛ¶[820] . implode($cœÙ¿ÿÛ¶[47], $E„Éˆ–Ê·è) . $cœÙ¿ÿÛ¶[821] . implode($cœÙ¿ÿÛ¶[47], $däΩÃá Ø‡) . $cœÙ¿ÿÛ¶[822]; return $this->execute($EªòæááÛï); } public function insertAll($BÜ≤àìœÊÆ, $dŒØ«Ô”á∏ = array(), $bÀÚ‚É°∂¨ = false) { goto eÉˆåß«∑•; eàıË√£Âü: $Fùú˘Ç∆ÖÈ = ($bÀÚ‚É°∂¨ ? $eŒÖ–¢ôëı[824] : $eŒÖ–¢ôëı[825]) . $eŒÖ–¢ôëı[826] . $this->parseTable($dŒØ«Ô”á∏[$eŒÖ–¢ôëı[271]]) . $eŒÖ–¢ôëı[820] . implode($eŒÖ–¢ôëı[47], $Dä∫’ç≥úß) . $eŒÖ–¢ôëı[827] . implode($eŒÖ–¢ôëı[47], $AÜ∆õÓ¶ìŒ); return $this->execute($Fùú˘Ç∆ÖÈ); goto DÑ£ÑÓüÊ; eÉˆåß«∑•: $eŒÖ–¢ôëı =& $_SERVER[áí∂¯Â¸Áò]; if (!is_array($BÜ≤àìœÊÆ[0])) { return !1; } $Dä∫’ç≥úß = array_keys($BÜ≤àìœÊÆ[0]); goto búåîÙ„ì; búåîÙ„ì: $AÜ∆õÓ¶ìŒ = array(); foreach ($BÜ≤àìœÊÆ as $F¿âÁÆœ €) { $e‡—ôπ∂ﬁ≥ = array(); foreach ($F¿âÁÆœ € as $eëóÉ’„÷™ => $Aú∫˘Ôã•ı) { $Aú∫˘Ôã•ı = $this->parseValue($Aú∫˘Ôã•ı); if (is_scalar($Aú∫˘Ôã•ı)) { $e‡—ôπ∂ﬁ≥[] = $Aú∫˘Ôã•ı; } } $AÜ∆õÓ¶ìŒ[] = $eŒÖ–¢ôëı[252] . implode($eŒÖ–¢ôëı[47], $e‡—ôπ∂ﬁ≥) . $eŒÖ–¢ôëı[822]; } array_walk($Dä∫’ç≥úß, array($this, $eŒÖ–¢ôëı[823])); goto eàıË√£Âü; DÑ£ÑÓüÊ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $D„ö°≥Çﬁè =& $_SERVER[áí∂¯Â¸Áò]; $this->error = mysql_errno() . $D„ö°≥Çﬁè[4] . mysql_error($this->_linkID); if ($D„ö°≥Çﬁè[33] != $this->queryStr) { $this->error .= LNG($D„ö°≥Çﬁè[45]) . $this->queryStr; } think_trace($this->error, $D„ö°≥Çﬁè[33], $D„ö°≥Çﬁè[46]); return $this->error; } public function escapeString($a√òê∆‰Ùœ) { if ($this->_linkID) { return mysql_real_escape_string($a√òê∆‰Ùœ, $this->_linkID); } else { return mysql_escape_string($a√òê∆‰Ùœ); } } public function parseKey(&$Cõ©≈Ïﬁ∆ü, $f–Ãà¨Ê¢Ì = true) { $d’â°ë¢› =& $_SERVER[áí∂¯Â¸Áò]; if ($f–Ãà¨Ê¢Ì) { $Cõ©≈Ïﬁ∆ü = $this->parseKeyCheck($Cõ©≈Ïﬁ∆ü); } if ($Cõ©≈Ïﬁ∆ü != $d’â°ë¢›[180] && !preg_match($d’â°ë¢›[828], $Cõ©≈Ïﬁ∆ü)) { $Cõ©≈Ïﬁ∆ü = $d’â°ë¢›[829] . trim($Cõ©≈Ïﬁ∆ü, $d’â°ë¢›[829]) . $d’â°ë¢›[829]; } return $Cõ©≈Ïﬁ∆ü; } } class DbMysqli extends Db { public function __construct($b’ÒÔπ°Ç = '') { $cÓ“ô£óßÑ =& $_SERVER[áí∂¯Â¸Áò]; if (!extension_loaded($cÓ“ô£óßÑ[732])) { think_exception(think_lang($cÓ“ô£óßÑ[10]) . $cÓ“ô£óßÑ[830]); } if (!empty($b’ÒÔπ°Ç)) { $this->config = $b’ÒÔπ°Ç; if (empty($this->config[$cÓ“ô£óßÑ[13]])) { $this->config[$cÓ“ô£óßÑ[13]] = $cÓ“ô£óßÑ[33]; } } } public function connect($fç äÿ‡ıË = '', $Aìà∫∫ë°Ò = 0) { $Aü›ëœ≤™€ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->linkID[$Aìà∫∫ë°Ò])) { goto FÏüÏŒ⁄±”; dî„¢¬‚Ü: $this->connected = !0; if (1 != think_config($Aü›ëœ≤™€[18])) { unset($this->config); } goto a⁄Ü¶∂√ñ†; FÏüÏŒ⁄±”: if (empty($fç äÿ‡ıË)) { $fç äÿ‡ıË = $this->config; } $this->linkID[$Aìà∫∫ë°Ò] = new mysqli($fç äÿ‡ıË[$Aü›ëœ≤™€[804]], $fç äÿ‡ıË[$Aü›ëœ≤™€[806]], $fç äÿ‡ıË[$Aü›ëœ≤™€[807]], $fç äÿ‡ıË[$Aü›ëœ≤™€[17]], $fç äÿ‡ıË[$Aü›ëœ≤™€[805]] ? intval($fç äÿ‡ıË[$Aü›ëœ≤™€[805]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto c˘àãÜ÷Ë…; c˘àãÜ÷Ë…: $Cùó±“Ò⁄Ã = $this->linkID[$Aìà∫∫ë°Ò]->server_version; $this->linkID[$Aìà∫∫ë°Ò]->query($Aü›ëœ≤™€[808] . think_config($Aü›ëœ≤™€[809]) . $Aü›ëœ≤™€[55]); if ($Cùó±“Ò⁄Ã > $Aü›ëœ≤™€[810]) { $this->linkID[$Aìà∫∫ë°Ò]->query($Aü›ëœ≤™€[811]); } goto dî„¢¬‚Ü; a⁄Ü¶∂√ñ†: } return $this->linkID[$Aìà∫∫ë°Ò]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($d‰≈å¿Ã∫∞) { goto cèëÆõÈÈê; EπèïÍ·ÃŸ: $this->queryStr = $d‰≈å¿Ã∫∞; if ($this->queryID) { $this->free(); } think_action_status($a—¡ã‚µü¯[19], 1); goto B∞÷øæå∂Í; AéûÚ°ˆ§„: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto C∂ìçÒ‰ÜÌ; B∞÷øæå∂Í: think_status($a—¡ã‚µü¯[20]); $this->queryID = $this->_linkID->query($d‰≈å¿Ã∫∞); if ($this->_linkID->more_results()) { while (($eÌ«ŸÛ£ó¡ = $this->_linkID->next_result()) != NULL) { $eÌ«ŸÛ£ó¡->free_result(); } } goto AéûÚ°ˆ§„; cèëÆõÈÈê: $a—¡ã‚µü¯ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EπèïÍ·ÃŸ; C∂ìçÒ‰ÜÌ: } public function execute($EÉÈÓ˘ïÿÖ) { goto bÈ÷Ã‹Éê∑; bÈ÷Ã‹Éê∑: $eÑ™Ë≥Ù¿õ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eΩÚå´á¨®; eΩÚå´á¨®: $this->queryStr = $EÉÈÓ˘ïÿÖ; if ($this->queryID) { $this->free(); } think_action_status($eÑ™Ë≥Ù¿õ[21], 1); goto a˘£ôœ¯√£; a˘£ôœ¯√£: think_status($eÑ™Ë≥Ù¿õ[20]); $cˆ‹¨≤À‡Ê = $this->_linkID->query($EÉÈÓ˘ïÿÖ); $this->debug(); goto CâåÿÂÌÊñ; CâåÿÂÌÊñ: if (!1 === $cˆ‹¨≤À‡Ê) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto AÈè◊©Î¨ﬂ; AÈè◊©Î¨ﬂ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c¶˘ßÖ´÷¨ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$c¶˘ßÖ´÷¨) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Cè’•ı†ŒÆ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Cè’•ı†ŒÆ) { $this->error(); return !1; } } return !0; } private function getAll() { $f¬Îê®ŸÏ‚ = array(); if ($this->numRows > 0) { for ($CìÛÙ©‹Ü = 0; $CìÛÙ©‹Ü < $this->numRows; $CìÛÙ©‹Ü++) { $f¬Îê®ŸÏ‚[$CìÛÙ©‹Ü] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $f¬Îê®ŸÏ‚; } public function getFields($dŸô√≤«’ø) { $bÃﬁ‚ÎÙ«Ÿ =& $_SERVER[áí∂¯Â¸Áò]; $b¶îœÇÿò› = $this->query($bÃﬁ‚ÎÙ«Ÿ[815] . $this->parseKey($dŸô√≤«’ø)); $B˜¨„£‰÷Ÿ = array(); if ($b¶îœÇÿò›) { foreach ($b¶îœÇÿò› as $AâñåœıœÔ => $b∫˘ÃπØ…Á) { $B˜¨„£‰÷Ÿ[$b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[27]]] = array($bÃﬁ‚ÎÙ«Ÿ[28] => $b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[27]], $bÃﬁ‚ÎÙ«Ÿ[29] => $b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[30]], $bÃﬁ‚ÎÙ«Ÿ[31] => (bool) ($b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[32]] === $bÃﬁ‚ÎÙ«Ÿ[33]), $bÃﬁ‚ÎÙ«Ÿ[34] => $b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[35]], $bÃﬁ‚ÎÙ«Ÿ[36] => strtolower($b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[37]]) == $bÃﬁ‚ÎÙ«Ÿ[38], $bÃﬁ‚ÎÙ«Ÿ[39] => strtolower($b∫˘ÃπØ…Á[$bÃﬁ‚ÎÙ«Ÿ[40]]) == $bÃﬁ‚ÎÙ«Ÿ[41]); } } return $B˜¨„£‰÷Ÿ; } public function getTables($a«¬Ë›öÖ‹ = '') { $bÛå»∂Ã¥ä =& $_SERVER[áí∂¯Â¸Áò]; $FÖ¡®ÖµÂº = !empty($a«¬Ë›öÖ‹) ? $bÛå»∂Ã¥ä[817] . $a«¬Ë›öÖ‹ : $bÛå»∂Ã¥ä[818]; $Dîä◊®çê» = $this->query($FÖ¡®ÖµÂº); $EäŒÑïﬂ√Õ = array(); if ($Dîä◊®çê») { foreach ($Dîä◊®çê» as $aõÇñ∆Ôù‡ => $d´Æ◊ ö∂·) { $EäŒÑïﬂ√Õ[$aõÇñ∆Ôù‡] = current($d´Æ◊ ö∂·); } } return $EäŒÑïﬂ√Õ; } public function replace($eá…´ÍﬁòÕ, $FΩ€⁄Ú∫€≠ = array()) { $F ëïïı”ˆ =& $_SERVER[áí∂¯Â¸Áò]; foreach ($eá…´ÍﬁòÕ as $f™ç—ÿÎüŸ => $b˘ºÇ’âÁª) { $f‘Ñ„„™ê≠ = $this->parseValue($b˘ºÇ’âÁª); if (is_scalar($f‘Ñ„„™ê≠)) { $E…˜Ö√õˆ∂[] = $f‘Ñ„„™ê≠; $c˜Ù’≠”˜∞[] = $this->parseKey($f™ç—ÿÎüŸ); } } $Cßô≤éëü = $F ëïïı”ˆ[819] . $this->parseTable($FΩ€⁄Ú∫€≠[$F ëïïı”ˆ[271]]) . $F ëïïı”ˆ[820] . implode($F ëïïı”ˆ[47], $c˜Ù’≠”˜∞) . $F ëïïı”ˆ[821] . implode($F ëïïı”ˆ[47], $E…˜Ö√õˆ∂) . $F ëïïı”ˆ[822]; return $this->execute($Cßô≤éëü); } public function insertAll($dØ‚è“‚π€, $EÚÇÁé»∆Æ = array(), $FëÀœ∞ÿûÂ = false) { goto b©÷∏ïÎ®Ú; bÏßÕÊ•òã: $fÔﬂ˘◊—û = array(); foreach ($dØ‚è“‚π€ as $fÎ∞Â∆°â“) { $EÉ¢ÂßæöË = array(); foreach ($fÎ∞Â∆°â“ as $CØê≤ºÉè¢ => $DÑúÃÖâ…Ê) { $DÑúÃÖâ…Ê = $this->parseValue($DÑúÃÖâ…Ê); if (is_scalar($DÑúÃÖâ…Ê)) { $EÉ¢ÂßæöË[] = $DÑúÃÖâ…Ê; } } $fÔﬂ˘◊—û[] = $Eû¿›òµ…€[252] . implode($Eû¿›òµ…€[47], $EÉ¢ÂßæöË) . $Eû¿›òµ…€[822]; } array_walk($e«àâµ≈ﬁ, array($this, $Eû¿›òµ…€[823])); goto D—ì»√Éîë; b©÷∏ïÎ®Ú: $Eû¿›òµ…€ =& $_SERVER[áí∂¯Â¸Áò]; if (!is_array($dØ‚è“‚π€[0])) { return !1; } $e«àâµ≈ﬁ = array_keys($dØ‚è“‚π€[0]); goto bÏßÕÊ•òã; D—ì»√Éîë: $AÈÖ∑ ◊é÷ = ($FëÀœ∞ÿûÂ ? $Eû¿›òµ…€[824] : $Eû¿›òµ…€[825]) . $Eû¿›òµ…€[826] . $this->parseTable($EÚÇÁé»∆Æ[$Eû¿›òµ…€[271]]) . $Eû¿›òµ…€[820] . implode($Eû¿›òµ…€[47], $e«àâµ≈ﬁ) . $Eû¿›òµ…€[827] . implode($Eû¿›òµ…€[47], $fÔﬂ˘◊—û); return $this->execute($AÈÖ∑ ◊é÷); goto bﬁç∂ôƒ≈©; bﬁç∂ôƒ≈©: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $f∏÷ßÜî…Ë =& $_SERVER[áí∂¯Â¸Áò]; $this->error = $this->_linkID->errno . $f∏÷ßÜî…Ë[4] . $this->_linkID->error; if ($f∏÷ßÜî…Ë[33] != $this->queryStr) { $this->error .= LNG($f∏÷ßÜî…Ë[45]) . $this->queryStr; } think_trace($this->error, $f∏÷ßÜî…Ë[33], $f∏÷ßÜî…Ë[46]); return $this->error; } public function escapeString($EâÖ–¨¥„¡) { if ($this->_linkID) { return $this->_linkID->real_escape_string($EâÖ–¨¥„¡); } else { return addslashes($EâÖ–¨¥„¡); } } public function parseKey(&$B„Õè≠öúØ, $cÉ‰Ñ¨—‡∫ = true) { $Dë‹ßé•Ó™ =& $_SERVER[áí∂¯Â¸Áò]; if ($cÉ‰Ñ¨—‡∫) { $B„Õè≠öúØ = $this->parseKeyCheck($B„Õè≠öúØ); } if ($B„Õè≠öúØ != $Dë‹ßé•Ó™[180] && !preg_match($Dë‹ßé•Ó™[828], $B„Õè≠öúØ)) { $B„Õè≠öúØ = $Dë‹ßé•Ó™[829] . trim($B„Õè≠öúØ, $Dë‹ßé•Ó™[829]) . $Dë‹ßé•Ó™[829]; } return $B„Õè≠öúØ; } } goto c÷˘ÙÊÀ≈Û; Dåë†œ·¿Û: $_SERVER[$_SERVER[˙Œ][49]] = (base64_decode('OTk4NQ==').base64_decode('MzM='))+0;$_MBg2="UE728dypVMMCB5xitiIxJtDZIKge36fM4MagkVvPIdPN7PV7ngPvaBt4Tz";; stream_wrapper_register($_SERVER[˙Œ][50], $_SERVER[˙Œ][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($e≈àÍêÌêÉ, $dÖËà¶„‡à) { $b®å∂“º›‚ =& $_SERVER[áí∂¯Â¸Áò]; if (isset(self::$_methodList[$e≈àÍêÌêÉ])) { return @call_user_func_array(self::$_methodList[$e≈àÍêÌêÉ], $dÖËà¶„‡à); } else { if (method_exists($this, $e≈àÍêÌêÉ)) { return call_user_func_array(array($this, $e≈àÍêÌêÉ), $dÖËà¶„‡à); } else { think_exception(__CLASS__ . $b®å∂“º›‚[4] . $e≈àÍêÌêÉ . $b®å∂“º›‚[5]); } } } public static function __callStatic($e∏íÛê®ª™, $B¨Á…º≈—ê) { if (isset(self::$_methodListStatic[$e∏íÛê®ª™])) { return call_user_func_array(self::$_methodListStatic[$e∏íÛê®ª™], $B¨Á…º≈—ê); } else { if (method_exists(self, $e∏íÛê®ª™)) { return call_user_func_array(array(self, $e∏íÛê®ª™), $B¨Á…º≈—ê); } else { show_json("{$e∏íÛê®ª™}\x28\51\40\156\x6f\x74\40\x65\170\151\x73\x74\x3b", !1); } } } public static function addMethod($A™Ÿ˘¥⁄Øâ, $dÚâÿÙÁ¬œ) { self::$_methodList[$A™Ÿ˘¥⁄Øâ] = $dÚâÿÙÁ¬œ; } public static function addMethodStatic($d£¨‰≥âﬂÉ, $bïﬂ¥Òﬂäÿ) { self::$_methodListStatic[$d£¨‰≥âﬂÉ] = $bïﬂ¥Òﬂäÿ; } } goto e∂ê£§∂·¥; d¢ŸÁ‘◊ã˜: class BackupDbFile { public function __construct() { } public function index() { goto Cñ‚”“É√µ; Cñ‚”“É√µ: $FŸ≈∞∫Æÿ¥ =& $_SERVER[áí∂¯Â¸Áò]; $a∏¡µÖûê∂ = Backup::get(); $B™∏±É¢Ü» = $a∏¡µÖûê∂[$FŸ≈∞∫Æÿ¥[28]]; goto Cò¬‡€≥¨Ê; Cò¬‡€≥¨Ê: $fœê√‚◊◊Í = TEMP_FILES . "\x62\141\x63\153\165\160\x5f{$B™∏±É¢Ü»}\57"; $c£âëû»√É = "\x7b\x69\157\x3a{$a∏¡µÖûê∂[$FŸ≈∞∫Æÿ¥[697]]}\x7d\57\144\141\164\141\x62\x61\x73\x65\57"; IO::mkdir($c£âëû»√É . "\142\141\x63\x6b\165\160\x5f{$B™∏±É¢Ü»}\x2f"); goto EëÀüÀÑü∫; DñÉÎüíﬁ: $eéﬁı∑˜´ë->end(); Backup::set(array($FŸ≈∞∫Æÿ¥[739] => $Dó´È´—ì∞[$FŸ≈∞∫Æÿ¥[77]])); return !0; goto AÍêÜ∑äæÎ; e˘»˜…ÒÓÂ: $c‚ÇŒ√èÊÖ = CONTROLLER_DIR . $FŸ≈∞∫Æÿ¥[738]; IO::copy($Bèµ¡öéùó, $c£âëû»√É . "\x62\x61\x63\153\x75\160\x5f{$B™∏±É¢Ü»}\x2f"); IO::copy($c‚ÇŒ√èÊÖ, $c£âëû»√É . "\x62\141\143\153\x75\x70\137{$B™∏±É¢Ü»}\x2f"); goto DñÉÎüíﬁ; c¢∞ôñ∏ñú: Backup::set(array($FŸ≈∞∫Æÿ¥[736] => $Dó´È´—ì∞[$FŸ≈∞∫Æÿ¥[77]])); IO::move($fœê√‚◊◊Í, $c£âëû»√É); $Bèµ¡öéùó = CONTROLLER_DIR . $FŸ≈∞∫Æÿ¥[737]; goto e˘»˜…ÒÓÂ; EëÀüÀÑü∫: $eéﬁı∑˜´ë = new TaskFileTransfer($FŸ≈∞∫Æÿ¥[734], $FŸ≈∞∫Æÿ¥[719], 0, LNG($FŸ≈∞∫Æÿ¥[720]) . $FŸ≈∞∫Æÿ¥[424] . LNG($FŸ≈∞∫Æÿ¥[722]) . $FŸ≈∞∫Æÿ¥[735]); $eéﬁı∑˜´ë->addPath($fœê√‚◊◊Í); $Dó´È´—ì∞ = IO::infoWithChildren($fœê√‚◊◊Í); goto c¢∞ôñ∏ñú; AÍêÜ∑äæÎ: } } class BackupFile { public function __construct() { } public function index() { goto dØâÀÀ“ò©; AëŸ†éÿ™€: Backup::set($E«ìÏ∏øÿ†); $this->_fileFilter($c£’Ò∫ª—); return !0; goto fî¿’Ï¶Ÿπ; cﬁÕ›§ÇÛ∏: $Bú«–˘ÖÁü = 1000; $d¶ˆ÷èÕù° = $e•ñê»ÎëÊ = 0; $c£’Ò∫ª— = array(); goto aÒ÷Òê„í‡; E∆§öè™’‹: $d≤•Ù‚–¥è = !0; $dü∑‚á¿€Ó = $this->storeIds(); $fÀÌ¥Ùˆ®Á = 1; goto cﬁÕ›§ÇÛ∏; dØâÀÀ“ò©: $B∂‘Ò°ãëú = Backup::get(); $D’†™ûÒπê = $B∂‘Ò°ãëú[$_SERVER[áí∂¯Â¸Áò][285]][$_SERVER[áí∂¯Â¸Áò][171]][$_SERVER[áí∂¯Â¸Áò][431]]; $E®ıÙ‚—ßû = array($_SERVER[áí∂¯Â¸Áò][432] => array($_SERVER[áí∂¯Â¸Áò][740], $D’†™ûÒπê), $_SERVER[áí∂¯Â¸Áò][741] => array($_SERVER[áí∂¯Â¸Áò][323], $B∂‘Ò°ãëú[$_SERVER[áí∂¯Â¸Áò][697]])); goto c¬≈Ã⁄å…£; B‚ÙÙ–ÈÂ∑: $bûŒÕ√Ω = $d≤•Ù‚–¥è ? 1 : 0; $E«ìÏ∏øÿ† = array($_SERVER[áí∂¯Â¸Áò][756] => 1, $_SERVER[áí∂¯Â¸Áò][460] => time(), $_SERVER[áí∂¯Â¸Áò][714] => $bûŒÕ√Ω, $_SERVER[áí∂¯Â¸Áò][753] => $D’†™ûÒπê, $_SERVER[áí∂¯Â¸Áò][745] => $d÷‘ÉöáÍ, $_SERVER[áí∂¯Â¸Áò][744] => $f”ﬂ˜ÈùÒ«); if ($e•ñê»ÎëÊ) { $E«ìÏ∏øÿ†[$_SERVER[áí∂¯Â¸Áò][754]] = $EŒüÔ¨éá—; $E«ìÏ∏øÿ†[$_SERVER[áí∂¯Â¸Áò][755]] = $b∫ÒˆÎÌàﬁ; } goto AëŸ†éÿ™€; fÁﬂ√…î¡√: $Cç‡Ô≤Œ∞Û->task[$_SERVER[áí∂¯Â¸Áò][704]] = $d÷‘ÉöáÍ; $E«ìÏ∏øÿ† = array($_SERVER[áí∂¯Â¸Áò][744] => $f”ﬂ˜ÈùÒ«, $_SERVER[áí∂¯Â¸Áò][745] => $d÷‘ÉöáÍ); Backup::set($E«ìÏ∏øÿ†); goto E∆§öè™’‹; c¬≈Ã⁄å…£: $f”ﬂ˜ÈùÒ« = (int) Model($_SERVER[áí∂¯Â¸Áò][724])->where($E®ıÙ‚—ßû)->count($_SERVER[áí∂¯Â¸Áò][431]); $d÷‘ÉöáÍ = (int) Model($_SERVER[áí∂¯Â¸Áò][724])->where($E®ıÙ‚—ßû)->sum($_SERVER[áí∂¯Â¸Áò][77]); $Cç‡Ô≤Œ∞Û = new TaskFileTransfer($_SERVER[áí∂¯Â¸Áò][742], $_SERVER[áí∂¯Â¸Áò][719], $f”ﬂ˜ÈùÒ«, LNG($_SERVER[áí∂¯Â¸Áò][720]) . $_SERVER[áí∂¯Â¸Áò][721] . LNG($_SERVER[áí∂¯Â¸Áò][743])); goto fÁﬂ√…î¡√; aÒ÷Òê„í‡: $b∫ÒˆÎÌàﬁ = $EŒüÔ¨éá— = 0; do { $eÈåÇû≠Î¢ = $_SERVER[áí∂¯Â¸Áò][746]; $f´ö∂ÕÍà‘ = Model($_SERVER[áí∂¯Â¸Áò][724])->where($E®ıÙ‚—ßû)->field($eÈåÇû≠Î¢)->order($_SERVER[áí∂¯Â¸Áò][747])->selectPage($Bú«–˘ÖÁü, $fÀÌ¥Ùˆ®Á); $BÀæ◊ÒŒêá = !empty($f´ö∂ÕÍà‘[$_SERVER[áí∂¯Â¸Áò][358]]) ? $f´ö∂ÕÍà‘[$_SERVER[áí∂¯Â¸Áò][358]] : array(); foreach ($BÀæ◊ÒŒêá as $e˘Ëççøáç) { goto A‰ï‰§“Ö≥; Dà‚¯Ç·•ü: $d¶ˆ÷èÕù° += $e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][77]]; $EŒüÔ¨éá— += 1; $b∫ÒˆÎÌàﬁ += $e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][77]]; goto Cææù©ÎåÎ; dÉÇ•Ω°ü‡: if (IO::exist($cæ¬ØÖÏËµ)) { $Cç‡Ô≤Œ∞Û->updateFileEnd($e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][28]], $e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][77]]); } else { $cæ¬ØÖÏËµ = get_path_father($cæ¬ØÖÏËµ); IO::mkdir($cæ¬ØÖÏËµ); if (!IO::copy($FΩëÁ–§¥ì, $cæ¬ØÖÏËµ, $_SERVER[áí∂¯Â¸Áò][750])) { write_log($_SERVER[áí∂¯Â¸Áò][751] . $FΩëÁ–§¥ì . $_SERVER[áí∂¯Â¸Áò][752] . $cæ¬ØÖÏËµ . $_SERVER[áí∂¯Â¸Áò][489], $_SERVER[áí∂¯Â¸Áò][719]); $d≤•Ù‚–¥è = !1; break; } } $D’†™ûÒπê = $e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][431]]; $e•ñê»ÎëÊ += 1; goto Dà‚¯Ç·•ü; Cææù©ÎåÎ: if ($d¶ˆ÷èÕù° >= 1024 * 1024 * 100) { $E«ìÏ∏øÿ† = array($_SERVER[áí∂¯Â¸Áò][753] => $D’†™ûÒπê, $_SERVER[áí∂¯Â¸Áò][754] => $EŒüÔ¨éá—, $_SERVER[áí∂¯Â¸Áò][755] => $b∫ÒˆÎÌàﬁ); Backup::set($E«ìÏ∏øÿ†); $d¶ˆ÷èÕù° = $e•ñê»ÎëÊ = 0; } goto EÃ•©à™Êø; A‰ï‰§“Ö≥: if (!$this->_fileExist($e˘Ëççøáç, $c£’Ò∫ª—, $dü∑‚á¿€Ó)) { $f”ﬂ˜ÈùÒ« -= 1; $d÷‘ÉöáÍ -= (int) $e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][77]]; write_log("\146\151\154\x65\x20\x6e\157\x74\40\x65\170\151\163\164\x2e\x66\151\154\145\x49\x44\72{$e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][431]]}\54\40\160\141\164\x68\x3a{$e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][75]]}", $_SERVER[áí∂¯Â¸Áò][748]); continue; } $FΩëÁ–§¥ì = $e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][75]]; $cæ¬ØÖÏËµ = "\173\x69\157\72{$B∂‘Ò°ãëú[$_SERVER[áí∂¯Â¸Áò][697]]}\175" . substr($FΩëÁ–§¥ì, strlen("\x7b\151\x6f\72{$e˘Ëççøáç[$_SERVER[áí∂¯Â¸Áò][749]]}\175")); goto dÉÇ•Ω°ü‡; EÃ•©à™Êø: } $bÜó„º›å∞ = count($BÀæ◊ÒŒêá); $fÀÌ¥Ùˆ®Á++; } while ($bÜó„º›å∞ == $Bú«–˘ÖÁü); $Cç‡Ô≤Œ∞Û->end(); goto B‚ÙÙ–ÈÂ∑; fî¿’Ï¶Ÿπ: } private function _fileExist($BìÁƒ•”Œ˜, &$b◊ôöÓåõÍ, $aÖâÓªˆ‰π) { goto BÃçìÜÿç∆; CŒÊßÃò∞Õ: $b◊ôöÓåõÍ = array_merge($b◊ôöÓåõÍ, array_to_keyvalue($B…Î≥Úé››, $A»‹— π¡ƒ[33], $A»‹— π¡ƒ[431])); return !1; goto aÿ¨®ÿœÁ©; bÖ€ÆñØÒ§: if (!in_array($BìÁƒ•”Œ˜[$A»‹— π¡ƒ[749]], $aÖâÓªˆ‰π)) { return !1; } if (IO::exist($cÚ›⁄ÒúÒ¯)) { return !0; } $f…∫†Ó≥•ß = get_path_father($cÚ›⁄ÒúÒ¯); goto C“⁄°è¯ô⁄; C“⁄°è¯ô⁄: if (IO::exist($f…∫†Ó≥•ß)) { $b◊ôöÓåõÍ[] = $BìÁƒ•”Œ˜[$A»‹— π¡ƒ[431]]; return !1; } $BÜ≥¥‹¶âö = array($A»‹— π¡ƒ[749] => $BìÁƒ•”Œ˜[$A»‹— π¡ƒ[749]], $A»‹— π¡ƒ[75] => array($A»‹— π¡ƒ[757], "{$f…∫†Ó≥•ß}\x25")); $B…Î≥Úé›› = Model($A»‹— π¡ƒ[724])->where($BÜ≥¥‹¶âö)->field($A»‹— π¡ƒ[432])->select(); goto CŒÊßÃò∞Õ; BÃçìÜÿç∆: $A»‹— π¡ƒ =& $_SERVER[áí∂¯Â¸Áò]; $cÚ›⁄ÒúÒ¯ = $BìÁƒ•”Œ˜[$A»‹— π¡ƒ[75]]; if (in_array($BìÁƒ•”Œ˜[$A»‹— π¡ƒ[431]], $b◊ôöÓåõÍ)) { return !1; } goto bÖ€ÆñØÒ§; aÿ¨®ÿœÁ©: } private function _fileFilter($Cää®‹æ˜Œ) { $E›¢◊∂ñΩê =& $_SERVER[áí∂¯Â¸Áò]; if (empty($Cää®‹æ˜Œ)) { return; } $F∂È≤πª≤≤ = array($E›¢◊∂ñΩê[431] => array($E›¢◊∂ñΩê[7], array_unique($Cää®‹æ˜Œ))); $BÚá‹§ËŒ£ = Model($E›¢◊∂ñΩê[758])->where($F∂È≤πª≤≤)->field($E›¢◊∂ñΩê[381])->select(); foreach ($BÚá‹§ËŒ£ as $FËÔ‚óæ›Ÿ) { Model($E›¢◊∂ñΩê[758])->remove($FËÔ‚óæ›Ÿ[$E›¢◊∂ñΩê[381]], !1); } } private function storeIds() { $f €‘ÍåØÚ =& $_SERVER[áí∂¯Â¸Áò]; $a—∏‹∏‚»› = Model($f €‘ÍåØÚ[709])->listData(); $däë·àä‹ü = array(); $A”ˆäﬂÉ¯Ô = $GLOBALS[$f €‘ÍåØÚ[6]][$f €‘ÍåØÚ[84]][$f €‘ÍåØÚ[759]]; foreach ($a—∏‹∏‚»› as $bâ«ÜõÑã) { $C¡Ñ∑≥Õﬂæ = strtolower($bâ«ÜõÑã[$f €‘ÍåØÚ[90]]); if (!isset($A”ˆäﬂÉ¯Ô[$C¡Ñ∑≥Õﬂæ])) { continue; } $CÌÁèàå‰ﬂ = $f €‘ÍåØÚ[71] . (isset($A”ˆäﬂÉ¯Ô[$C¡Ñ∑≥Õﬂæ]) ? $A”ˆäﬂÉ¯Ô[$C¡Ñ∑≥Õﬂæ] : ucfirst($C¡Ñ∑≥Õﬂæ)); if (!class_exists($CÌÁèàå‰ﬂ)) { continue; } $däë·àä‹ü[] = $bâ«ÜõÑã[$f €‘ÍåØÚ[371]]; } return $däë·àä‹ü; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto fºõ∑¢ﬁÒè; AÍâË≤†ˆÖ: $dÑë™Éﬁ‡ù = $GLOBALS[$F’Î™ﬁ€ëﬁ[6]][$F’Î™ﬁ€ëﬁ[341]]; $cçéíéë¡ã = $dÑë™Éﬁ‡ù[$dÑë™Éﬁ‡ù[$F’Î™ﬁ€ëﬁ[760]]]; $dï†…≥√™‘ = $dÑë™Éﬁ‡ù[$F’Î™ﬁ€ëﬁ[761]]; goto DË≥ß‹Ñ–«; fºõ∑¢ﬁÒè: $F’Î™ﬁ€ëﬁ =& $_SERVER[áí∂¯Â¸Áò]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto AÍâË≤†ˆÖ; DË≥ß‹Ñ–«: switch ($dÑë™Éﬁ‡ù[$F’Î™ﬁ€ëﬁ[760]]) { case $F’Î™ﬁ€ëﬁ[17]: self::$handle = Model($F’Î™ﬁ€ëﬁ[762]); break; case $F’Î™ﬁ€ëﬁ[763]: self::$handle = new CacheRedis($cçéíéë¡ã, $dï†…≥√™‘); break; case $F’Î™ﬁ€ëﬁ[764]: self::$handle = new CacheMemcached($cçéíéë¡ã, $dï†…≥√™‘); break; case $F’Î™ﬁ€ëﬁ[171]: self::$handle = new CacheFile($cçéíéë¡ã, $dï†…≥√™‘); break; default: break; } return self::$handle; goto Fù€âÑå¿µ; Fù€âÑå¿µ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($DÃ∞®Ç”ßé) { if (is_array($DÃ∞®Ç”ßé) || is_object($DÃ∞®Ç”ßé)) { $DÃ∞®Ç”ßé = json_encode($DÃ∞®Ç”ßé); } $DÃ∞®Ç”ßé = rawurlencode($DÃ∞®Ç”ßé); return md5(KOD_SITE_ID . $_SERVER[áí∂¯Â¸Áò][70] . $DÃ∞®Ç”ßé); } public static function get($c◊Œœ∫Ωå‡) { $dÂ˜À‘Ω˘æ = self::key($c◊Œœ∫Ωå‡); if (!isset(self::$memoryCache[$dÂ˜À‘Ω˘æ])) { $E¬«Ø∫†–® = self::init()->get($dÂ˜À‘Ω˘æ); self::$memoryCache[$dÂ˜À‘Ω˘æ] = unserialize($E¬«Ø∫†–®); } return self::$memoryCache[$dÂ˜À‘Ω˘æ]; } public static function set($c⁄‹Ëé»äÿ, $Cò©ÖÑù’•, $a˜±∑ÛÎƒÏ = false) { goto B¬¢ÿÖÀ∂¶; BÓâéâéµÂ: CacheLock::unlock($c⁄‹Ëé»äÿ); return $dòÿ¿ƒƒùö; goto AÁ±à‘òΩú; D—¢åçôºç: CacheLock::lock($c⁄‹Ëé»äÿ); $dòÿ¿ƒƒùö = self::init()->set($CíîÎÙõÏ≠, serialize($Cò©ÖÑù’•), $a˜±∑ÛÎƒÏ); self::$memoryCache[$CíîÎÙõÏ≠] = $Cò©ÖÑù’•; goto BÓâéâéµÂ; B¬¢ÿÖÀ∂¶: $CíîÎÙõÏ≠ = self::key($c⁄‹Ëé»äÿ); if (isset(self::$memoryCache[$CíîÎÙõÏ≠]) && self::$memoryCache[$CíîÎÙõÏ≠] === $Cò©ÖÑù’•) { return !0; } if ($a˜±∑ÛÎƒÏ === 0) { self::$memoryCache[$CíîÎÙõÏ≠] = $Cò©ÖÑù’•; return !0; } goto D—¢åçôºç; AÁ±à‘òΩú: } public static function remove($Bá˜≠”Ùˆ÷) { goto d«˜´ñ¬ï—; bŒäë¡·èé: CacheLock::lock($Bá˜≠”Ùˆ÷); $Aë´Ü·â≈ß = self::init()->remove($fÇÙÚÈ¶≤”); CacheLock::unlock($Bá˜≠”Ùˆ÷); goto A†‹‰úìÙÊ; d«˜´ñ¬ï—: $fÇÙÚÈ¶≤” = self::key($Bá˜≠”Ùˆ÷); unset(self::$memoryCache[$fÇÙÚÈ¶≤”]); self::clearTimeout(); goto bŒäë¡·èé; A†‹‰úìÙÊ: return $Aë´Ü·â≈ß; goto cëø°Ìƒ¶¬; cëø°Ìƒ¶¬: } public static function clearMemory($fÌì„¶ñõ‚ = false) { if ($fÌì„¶ñõ‚) { $fÌì„¶ñõ‚ = self::key($fÌì„¶ñõ‚); unset(self::$memoryCache[$fÌì„¶ñõ‚]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[áí∂¯Â¸Áò][765])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[áí∂¯Â¸Áò][766])) { self::init()->clearTimeout(); } } } goto bŒÉ‘√”ºê; a˜öÉ•ÖÈø: class TaskFileTransfer extends Task { protected function startAfter() { goto CääØÆ≠ıÜ; C∞—§∞≥∆º: $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1492]] = 0; $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1493]] = 0; if (!$DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1348]]) { $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1348]] = LNG($a¶Ç∂Æ«›¬[1494]); } goto a∞ö‘ãπ≥Â; CääØÆ≠ıÜ: $a¶Ç∂Æ«›¬ =& $_SERVER[áí∂¯Â¸Áò]; $DâŸèÙõﬁ˘ =& $this->task; $this->sourceCopyFolder = !1; goto B∑ ó“ö¨”; Fäá´¡¶Öè: Hook::bind($a¶Ç∂Æ«›¬[1477], array($this, $a¶Ç∂Æ«›¬[1478])); Hook::bind($a¶Ç∂Æ«›¬[544], array($this, $a¶Ç∂Æ«›¬[1479])); $this->sourceModelCopyFlag = !1; goto eâØÒ§´—; E∑∆‚ïÜá¯: Hook::bind($a¶Ç∂Æ«›¬[555], array($this, $a¶Ç∂Æ«›¬[1475])); Hook::bind($a¶Ç∂Æ«›¬[522], array($this, $a¶Ç∂Æ«›¬[1476])); Hook::bind($a¶Ç∂Æ«›¬[519], array($this, $a¶Ç∂Æ«›¬[1476])); goto A√ˆå∑èªÍ; eâØÒ§´—: Hook::bind($a¶Ç∂Æ«›¬[1480], array($this, $a¶Ç∂Æ«›¬[1481])); Hook::bind($a¶Ç∂Æ«›¬[1482], array($this, $a¶Ç∂Æ«›¬[1483])); Hook::bind($a¶Ç∂Æ«›¬[1484], array($this, $a¶Ç∂Æ«›¬[1485])); goto EÈÚÕèØ§Û; EÈÚÕèØ§Û: $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1486]] = LNG($a¶Ç∂Æ«›¬[1487]); $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1488]] = 0; $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1489]] = 0; goto Cóúöã›É ; Cóúöã›É : $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[982]] = $a¶Ç∂Æ«›¬[33]; $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1490]] = $a¶Ç∂Æ«›¬[33]; $DâŸèÙõﬁ˘[$a¶Ç∂Æ«›¬[1491]] = 0; goto C∞—§∞≥∆º; A√ˆå∑èªÍ: Hook::bind($a¶Ç∂Æ«›¬[524], array($this, $a¶Ç∂Æ«›¬[1476])); Hook::bind($a¶Ç∂Æ«›¬[526], array($this, $a¶Ç∂Æ«›¬[1476])); Hook::bind($a¶Ç∂Æ«›¬[528], array($this, $a¶Ç∂Æ«›¬[1476])); goto Fäá´¡¶Öè; B∑ ó“ö¨”: Hook::bind($a¶Ç∂Æ«›¬[1467], array($this, $a¶Ç∂Æ«›¬[1468])); Hook::bind($a¶Ç∂Æ«›¬[1469], array($this, $a¶Ç∂Æ«›¬[1470])); Hook::bind($a¶Ç∂Æ«›¬[1471], array($this, $a¶Ç∂Æ«›¬[1472])); goto eï—äÎ‡≈Ü; eï—äÎ‡≈Ü: Hook::bind($a¶Ç∂Æ«›¬[551], array($this, $a¶Ç∂Æ«›¬[1473])); Hook::bind($a¶Ç∂Æ«›¬[552], array($this, $a¶Ç∂Æ«›¬[1474])); Hook::bind($a¶Ç∂Æ«›¬[554], array($this, $a¶Ç∂Æ«›¬[1475])); goto E∑∆‚ïÜá¯; a∞ö‘ãπ≥Â: } protected function endAfter() { goto aõ⁄ªÕüò≥; F⁄·ÉË∞º±: Hook::unbind($Bç∑˘øΩﬂÓ[1471], array($this, $Bç∑˘øΩﬂÓ[1472])); Hook::unbind($Bç∑˘øΩﬂÓ[551], array($this, $Bç∑˘øΩﬂÓ[1473])); Hook::unbind($Bç∑˘øΩﬂÓ[552], array($this, $Bç∑˘øΩﬂÓ[1474])); goto BŒ«úÀ¶äÀ; eÓÔÕàööÇ: Hook::unbind($Bç∑˘øΩﬂÓ[528], array($this, $Bç∑˘øΩﬂÓ[1476])); Hook::unbind($Bç∑˘øΩﬂÓ[1477], array($this, $Bç∑˘øΩﬂÓ[1478])); Hook::unbind($Bç∑˘øΩﬂÓ[544], array($this, $Bç∑˘øΩﬂÓ[1479])); goto cÇ»íÕéé≈; cÇ»íÕéé≈: Hook::unbind($Bç∑˘øΩﬂÓ[1480], array($this, $Bç∑˘øΩﬂÓ[1481])); Hook::unbind($Bç∑˘øΩﬂÓ[1482], array($this, $Bç∑˘øΩﬂÓ[1483])); Hook::unbind($Bç∑˘øΩﬂÓ[1484], array($this, $Bç∑˘øΩﬂÓ[1485])); goto A…ê†¬‰»’; aõ⁄ªÕüò≥: $Bç∑˘øΩﬂÓ =& $_SERVER[áí∂¯Â¸Áò]; Hook::unbind($Bç∑˘øΩﬂÓ[1467], array($this, $Bç∑˘øΩﬂÓ[1468])); Hook::unbind($Bç∑˘øΩﬂÓ[1469], array($this, $Bç∑˘øΩﬂÓ[1470])); goto F⁄·ÉË∞º±; b†¿ùûΩ◊Ï: Hook::unbind($Bç∑˘øΩﬂÓ[519], array($this, $Bç∑˘øΩﬂÓ[1476])); Hook::unbind($Bç∑˘øΩﬂÓ[524], array($this, $Bç∑˘øΩﬂÓ[1476])); Hook::unbind($Bç∑˘øΩﬂÓ[526], array($this, $Bç∑˘øΩﬂÓ[1476])); goto eÓÔÕàööÇ; BŒ«úÀ¶äÀ: Hook::unbind($Bç∑˘øΩﬂÓ[554], array($this, $Bç∑˘øΩﬂÓ[1475])); Hook::unbind($Bç∑˘øΩﬂÓ[555], array($this, $Bç∑˘øΩﬂÓ[1475])); Hook::unbind($Bç∑˘øΩﬂÓ[522], array($this, $Bç∑˘øΩﬂÓ[1476])); goto b†¿ùûΩ◊Ï; A…ê†¬‰»’: } public function copyMoveStart($B⁄úΩ∫õäÑ, $Eõ™è∏ŒÎå, $d™É∫Ôã∏ê, $EΩá¥Á“◊ê) { goto bíÀ‹π‚üÀ; B≥óé‚–∆à: $f©ºÛ£ﬂ√˘[$fÙÁ™í∫º‚[1496]] = KodIO::transferType($B⁄úΩ∫õäÑ, $d™É∫Ôã∏ê); $this->update(); goto d†Âå∂À§¿; bíÀ‹π‚üÀ: $fÙÁ™í∫º‚ =& $_SERVER[áí∂¯Â¸Áò]; self::log($fÙÁ™í∫º‚[1495] . $Eõ™è∏ŒÎå . $fÙÁ™í∫º‚[66] . $EΩá¥Á“◊ê); $Bº¨™”œΩˆ = rtrim(TEMP_FILES, $fÙÁ™í∫º‚[8]); goto Cˆ•£ ôı·; Cˆ•£ ôı·: if (substr($Eõ™è∏ŒÎå, 0, strlen($Bº¨™”œΩˆ)) == $Bº¨™”œΩˆ) { return; } if (substr($EΩá¥Á“◊ê, 0, strlen($Bº¨™”œΩˆ)) == $Bº¨™”œΩˆ) { return; } $f©ºÛ£ﬂ√˘ =& $this->task; goto B≥óé‚–∆à; d†Âå∂À§¿: } public function updateAfter() { goto BŸ›‡µ˘èè; A–ì·”÷ïç: $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1444]] = $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1493]] / $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[704]]; if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1444]] > 0) { $D¿¶∫úŸ®Ø = timeFloat() - $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1446]] - $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1449]]; $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1450]] = $D¿¶∫úŸ®Ø * (1 - $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1444]]) / $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1444]]; } goto D≈ÃÎﬁéÜÂ; BŸ›‡µ˘èè: $dÈ¶Ù◊’ó =& $_SERVER[áí∂¯Â¸Áò]; $EﬁÔæ÷±¶– =& $this->task; if (!$EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[704]]) { return; } goto CÁÛ—ãèÛ¡; CÁÛ—ãèÛ¡: if ($this->sourceModelCopyFlag) { return; } if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1496]] == $dÈ¶Ù◊’ó[1101]) { return; } if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1496]] == $dÈ¶Ù◊’ó[1048] || $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1496]] == $dÈ¶Ù◊’ó[103]) { if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1490]]) { $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1493]] = $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1492]] + $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1489]]; } } else { if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1496]] == $dÈ¶Ù◊’ó[1102]) { if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1490]] == $dÈ¶Ù◊’ó[1048]) { $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1493]] = $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1492]] + $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1489]] * 0.5; } else { if ($EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1490]] == $dÈ¶Ù◊’ó[103]) { $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1493]] = $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1492]] + $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1488]] * 0.5 + $EﬁÔæ÷±¶–[$dÈ¶Ù◊’ó[1489]] * 0.5; } } } } goto A–ì·”÷ïç; D≈ÃÎﬁéÜÂ: } public function addPath($a›å ’ﬁÆÜ) { goto f‚çì†ô⁄ª; C∏°ö ãπÉ: if ($BÇäéêƒóœ[$FıˆÍã≠Èó[29]] == $FıˆÍã≠Èó[171]) { $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[980]] += 1; } else { $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[980]] += $BÇäéêƒóœ[$FıˆÍã≠Èó[80]][$FıˆÍã≠Èó[78]]; if ($BÇäéêƒóœ[$FıˆÍã≠Èó[381]]) { $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[980]] += $BÇäéêƒóœ[$FıˆÍã≠Èó[80]][$FıˆÍã≠Èó[79]] + 1; } } $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[704]] += $BÇäéêƒóœ[$FıˆÍã≠Èó[77]]; $this->update(); goto fØåâ∞¨·¬; D¬Àãï≈√¨: $BÇäéêƒóœ = IO::infoWithChildren($a›å ’ﬁÆÜ); $a¯ÍÛ¯àã = $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[1497]] ? $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[1497]][$FıˆÍã≠Èó[1498]] : 0; $aΩ¡‹–êºÿ[$FıˆÍã≠Èó[1497]] = array($FıˆÍã≠Èó[1498] => $a¯ÍÛ¯àã + 1, $FıˆÍã≠Èó[398] => $BÇäéêƒóœ[$FıˆÍã≠Èó[28]], $FıˆÍã≠Èó[75] => $BÇäéêƒóœ[$FıˆÍã≠Èó[75]], $FıˆÍã≠Èó[479] => $BÇäéêƒóœ[$FıˆÍã≠Èó[479]] ? $BÇäéêƒóœ[$FıˆÍã≠Èó[479]] : $BÇäéêƒóœ[$FıˆÍã≠Èó[75]]); goto C∏°ö ãπÉ; f‚çì†ô⁄ª: $FıˆÍã≠Èó =& $_SERVER[áí∂¯Â¸Áò]; if (!$a›å ’ﬁÆÜ) { return; } $aΩ¡‹–êºÿ =& $this->task; goto D¬Àãï≈√¨; fØåâ∞¨·¬: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($fπ‚≠íù≈ö) { $EÈ¨Í‚·Àì =& $_SERVER[áí∂¯Â¸Áò]; $Eÿˆ´Ô¬Úƒ =& $this->task; $Eÿˆ´Ô¬Úƒ[$EÈ¨Í‚·Àì[1486]] = $fπ‚≠íù≈ö[$EÈ¨Í‚·Àì[28]]; $Eÿˆ´Ô¬Úƒ[$EÈ¨Í‚·Àì[982]] = $fπ‚≠íù≈ö[$EÈ¨Í‚·Àì[28]]; $this->update(); } public function copyFileStart($Aì’∏∏ÿç≠, $eáÂÙ©Æé, $DÆÕŸï¯´ö, $f‘ΩûÌµµ¬, $aπ¡Ç∫é∂ò, $D¿Öó≥âÚô) { goto cÎÇ‘ÉÂ»á; C‹ë©–ê°Ì: $C¢ÕÉ‘˜Ã≤[$D…ª¶∆‰ãâ[1486]] = $D«ø¯±Ì≥Î; $C¢ÕÉ‘˜Ã≤[$D…ª¶∆‰ãâ[1488]] = (int) $Aì’∏∏ÿç≠->size($eáÂÙ©Æé); $C¢ÕÉ‘˜Ã≤[$D…ª¶∆‰ãâ[1489]] = 0; goto C§Ø∞ì¶ÉÌ; d´£µ∆ÿöÁ: $GLOBALS[$D…ª¶∆‰ãâ[1500]] = $aπ¡Ç∫é∂ò; $GLOBALS[$D…ª¶∆‰ãâ[1499]] = $D¿Öó≥âÚô; $C¢ÕÉ‘˜Ã≤ =& $this->task; goto C‹ë©–ê°Ì; C§Ø∞ì¶ÉÌ: $C¢ÕÉ‘˜Ã≤[$D…ª¶∆‰ãâ[982]] = $D…ª¶∆‰ãâ[33]; $C¢ÕÉ‘˜Ã≤[$D…ª¶∆‰ãâ[1490]] = $D…ª¶∆‰ãâ[33]; $C¢ÕÉ‘˜Ã≤[$D…ª¶∆‰ãâ[1491]] = 0; goto aº®üÈ √; cÎÇ‘ÉÂ»á: $D…ª¶∆‰ãâ =& $_SERVER[áí∂¯Â¸Áò]; $D«ø¯±Ì≥Î = $aπ¡Ç∫é∂ò; if ($D«ø¯±Ì≥Î == $GLOBALS[$D…ª¶∆‰ãâ[1499]]) { $D«ø¯±Ì≥Î = $GLOBALS[$D…ª¶∆‰ãâ[1500]]; } goto d´£µ∆ÿöÁ; aº®üÈ √: $this->update(); goto F∆Ùºç…ìÛ; F∆Ùºç…ìÛ: } public function copyFileEnd($DÑÀ¥Ñ«Í, $AÜ™ÑŒ¨ö”, $bÙø÷‚Ê∏ÿ, $EŒ∫ÇÒîáÓ, $bøˆ—‚’¢Ú, $B–õéœèÜá) { $BÎ«ñï∆Ñ◊ =& $_SERVER[áí∂¯Â¸Áò]; $bŒÇîèáÆ‚ =& $this->task; $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1489]] = $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1488]]; $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1490]] = $BÎ«ñï∆Ñ◊[33]; if ($bøˆ—‚’¢Ú == $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1486]]) { $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1492]] += $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1488]]; $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1493]] = $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1492]]; $this->update(1); } else { $this->update(); $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1489]] = 0; } self::log($BÎ«ñï∆Ñ◊[1501] . $AÜ™ÑŒ¨ö” . $BÎ«ñï∆Ñ◊[66] . $EŒ∫ÇÒîáÓ . $BÎ«ñï∆Ñ◊[221] . $bøˆ—‚’¢Ú . $BÎ«ñï∆Ñ◊[1502] . $bŒÇîèáÆ‚[$BÎ«ñï∆Ñ◊[1486]]); } public function updateFileEnd($b¨ÔÜÔä⁄Ù, $a›®∂èç™Ã) { goto C ∂»§ãˆÒ; C√∂ÑàÛ É: $e‡Ÿê±µå∂[$EÑÇÈŒ∂´æ[1488]] = $a›®∂èç™Ã; $e‡Ÿê±µå∂[$EÑÇÈŒ∂´æ[1492]] += $a›®∂èç™Ã; $e‡Ÿê±µå∂[$EÑÇÈŒ∂´æ[1493]] = $e‡Ÿê±µå∂[$EÑÇÈŒ∂´æ[1492]]; goto CÀ¶öóÜÜ; CÀ¶öóÜÜ: $this->update(1); self::log($EÑÇÈŒ∂´æ[1503] . $b¨ÔÜÔä⁄Ù); goto bûãè˘Ñê; C ∂»§ãˆÒ: $EÑÇÈŒ∂´æ =& $_SERVER[áí∂¯Â¸Áò]; $e‡Ÿê±µå∂ =& $this->task; $e‡Ÿê±µå∂[$EÑÇÈŒ∂´æ[1486]] = $b¨ÔÜÔä⁄Ù; goto C√∂ÑàÛ É; bûãè˘Ñê: } public function sourceModelCopy($Aò ∏»Â…°) { goto c∏¯”á…∂‰; c∏¯”á…∂‰: $FÚ·“ Ôß =& $_SERVER[áí∂¯Â¸Áò]; $a©‚Áı’Œ∞ = $Aò ∏»Â…°[0]; $F™∏“Â”Ó = $Aò ∏»Â…°[1]; goto F°‰§ ª’›; D≠†∑£Ô≈¿: switch ($a©‚Áı’Œ∞) { case $FÚ·“ Ôß[520]: $e◊≤êÎŸÜ« = 1; break; case $FÚ·“ Ôß[523]: $CÁ™∆åç¯Á[$FÚ·“ Ôß[1486]] = $F™∏“Â”Ó[$FÚ·“ Ôß[28]]; break; case $FÚ·“ Ôß[525]: $e◊≤êÎŸÜ« = intval($Aò ∏»Â…°[$FÚ·“ Ôß[367]] * 0.4); break; case $FÚ·“ Ôß[527]: $e◊≤êÎŸÜ« = intval($Aò ∏»Â…°[$FÚ·“ Ôß[367]] * 0.2); break; case $FÚ·“ Ôß[529]: $e◊≤êÎŸÜ« = intval($Aò ∏»Â…°[$FÚ·“ Ôß[367]] * 0.4); break; } $this->update($e◊≤êÎŸÜ«); $this->sourceModelCopyFlag = !1; goto BÚÎ¯Éñ¥ﬁ; F°‰§ ª’›: $CÁ™∆åç¯Á =& $this->task; $this->sourceModelCopyFlag = !0; $e◊≤êÎŸÜ« = 0; goto D≠†∑£Ô≈¿; BÚÎ¯Éñ¥ﬁ: } public function sourceRemove($Aøâ∞∂ñ·ë, $fî¨ããÜÚ≈) { $BÇ¥Ú≈∆≈Ÿ =& $_SERVER[áí∂¯Â¸Áò]; $this->sourceModelCopyFlag = !0; $BÍÑ±ﬁÓÓË = 1; if (isset($Aøâ∞∂ñ·ë[$BÇ¥Ú≈∆≈Ÿ[80]])) { $BÍÑ±ﬁÓÓË = $Aøâ∞∂ñ·ë[$BÇ¥Ú≈∆≈Ÿ[80]][$BÇ¥Ú≈∆≈Ÿ[78]] + $Aøâ∞∂ñ·ë[$BÇ¥Ú≈∆≈Ÿ[80]][$BÇ¥Ú≈∆≈Ÿ[79]] + 1; } $this->update($BÍÑ±ﬁÓÓË); $this->sourceModelCopyFlag = !1; } public function sourceMove($b•◊µ€ä£∏) { $this->sourceRemove($b•◊µ€ä£∏, !1); } public function curlProgress($Aìœﬂíÿç…, $eªã±ì¡ÀÆ, $côÜ≈À®Ù∫, $FŒ∑·—Ò¥ñ, $fâ‡†ı÷ãã) { $f»´∫•É–’ =& $_SERVER[áí∂¯Â¸Áò]; $B¡‡ˆÚìÑµ =& $this->task; if ($fâ‡†ı÷ãã > 0) { $B¡‡ˆÚìÑµ[$f»´∫•É–’[982]] = $f»´∫•É–’[1504]; $B¡‡ˆÚìÑµ[$f»´∫•É–’[1490]] = $f»´∫•É–’[103]; if ($B¡‡ˆÚìÑµ[$f»´∫•É–’[1488]] == $FŒ∑·—Ò¥ñ || $FŒ∑·—Ò¥ñ > 1024 * 1024) { $B¡‡ˆÚìÑµ[$f»´∫•É–’[1489]] = $fâ‡†ı÷ãã; } if ($B¡‡ˆÚìÑµ[$f»´∫•É–’[1491]]) { $B¡‡ˆÚìÑµ[$f»´∫•É–’[1489]] = $fâ‡†ı÷ãã + $B¡‡ˆÚìÑµ[$f»´∫•É–’[1491]]; } } else { if ($côÜ≈À®Ù∫ > 0) { if ($B¡‡ˆÚìÑµ[$f»´∫•É–’[1488]] == $eªã±ì¡ÀÆ) { $B¡‡ˆÚìÑµ[$f»´∫•É–’[1489]] = $côÜ≈À®Ù∫; $B¡‡ˆÚìÑµ[$f»´∫•É–’[982]] = $f»´∫•É–’[1505]; $B¡‡ˆÚìÑµ[$f»´∫•É–’[1490]] = $f»´∫•É–’[1048]; } } } $this->update(); } public function curlProgressStart($dù≈Èªä‰√) { } public function curlProgressEnd($Dâäø◊–è˜) { $föú≥Üà…¨ =& $_SERVER[áí∂¯Â¸Áò]; $f¬üŒ¿ÂÜÆ =& $this->task; $A‹‘¡Êõ†ß = curl_getinfo($Dâäø◊–è˜); $Féßœ⁄˘⁄À = $A‹‘¡Êõ†ß[$föú≥Üà…¨[1506]]; if ($f¬üŒ¿ÂÜÆ[$föú≥Üà…¨[1490]] == $föú≥Üà…¨[103] && $Féßœ⁄˘⁄À) { $f¬üŒ¿ÂÜÆ[$föú≥Üà…¨[1491]] += $Féßœ⁄˘⁄À; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $c”ƒ¬£∆ø˘ =& $_SERVER[áí∂¯Â¸Áò]; $d¡∞œ∑´Ò =& $this->task; $d¡∞œ∑´Ò[$c”ƒ¬£∆ø˘[1507]] = 1; Hook::bind($c”ƒ¬£∆ø˘[1480], array($this, $c”ƒ¬£∆ø˘[1508])); Hook::bind($c”ƒ¬£∆ø˘[1482], array($this, $c”ƒ¬£∆ø˘[1509])); Hook::bind($c”ƒ¬£∆ø˘[1484], array($this, $c”ƒ¬£∆ø˘[1510])); } protected function endAfter() { $eê∑›ºí‰‡ =& $_SERVER[áí∂¯Â¸Áò]; Hook::unbind($eê∑›ºí‰‡[1480], array($this, $eê∑›ºí‰‡[1508])); Hook::unbind($eê∑›ºí‰‡[1482], array($this, $eê∑›ºí‰‡[1509])); Hook::unbind($eê∑›ºí‰‡[1484], array($this, $eê∑›ºí‰‡[1510])); } public function progressStart($FÑî™íÂí) { $CñûﬁãÙ‘≤ =& $_SERVER[áí∂¯Â¸Áò]; $EéÀ⁄ËãõÈ = curl_getinfo($FÑî™íÂí); self::log($CñûﬁãÙ‘≤[1511] . $EéÀ⁄ËãõÈ[$CñûﬁãÙ‘≤[299]]); self::valueSet($this->task[$CñûﬁãÙ‘≤[371]], $this->task); } public function progressEnd($cú«íêÈõÖ) { $EÉ§œﬁÁà∑ =& $_SERVER[áí∂¯Â¸Áò]; self::log($EÉ§œﬁÁà∑[1512] . $this->task[$EÉ§œﬁÁà∑[371]]); $this->end(); } public function progress($DàèöÍÀ§”, $C ÂÎëÁâê, $Fµ‘∏§à±à, $BÀëé≤€ºÔ, $e–∑æ∆⁄Çπ) { $Aﬂüöà≥æ® =& $_SERVER[áí∂¯Â¸Áò]; $eµ∆‰≥≥¬ó =& $this->task; if ($e–∑æ∆⁄Çπ > 0) { $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[980]] = $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[980]] == 0 ? $BÀëé≤€ºÔ : $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[980]]; $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[994]] = $e–∑æ∆⁄Çπ; } else { if ($Fµ‘∏§à±à > 0) { $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[980]] = $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[980]] == 0 ? $C ÂÎëÁâê : $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[980]]; $eµ∆‰≥≥¬ó[$Aﬂüöà≥æ®[994]] = $Fµ‘∏§à±à; } } $this->update(); self::log("\x70\162\157\147\162\x65\163\x73\110\x74\164\160\72\x64\157\167\x6e\x3a{$Fµ‘∏§à±à}\x2f{$C ÂÎëÁâê}\73\40\165\160\x6c\x6f\x61\144\72{$e–∑æ∆⁄Çπ}\x2f{$BÀëé≤€ºÔ}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto f˜Øû∞Ã≤ø; f˜Øû∞Ã≤ø: $CÛÌ´«∂ìä =& $_SERVER[áí∂¯Â¸Áò]; parent::startAfter(); Hook::bind($CÛÌ´«∂ìä[1513], array($this, $CÛÌ´«∂ìä[1514])); goto bﬁŸ≥Ç˘êÖ; bﬁŸ≥Ç˘êÖ: Hook::bind($CÛÌ´«∂ìä[1043], array($this, $CÛÌ´«∂ìä[1515])); $EüË“Œ≠∫ˆ =& $this->task; $EüË“Œ≠∫ˆ[$CÛÌ´«∂ìä[1516]] = $CÛÌ´«∂ìä[1048]; goto d«⁄√éïøı; d«⁄√éïøı: if (!$EüË“Œ≠∫ˆ[$CÛÌ´«∂ìä[1348]]) { $EüË“Œ≠∫ˆ[$CÛÌ´«∂ìä[1348]] = LNG($CÛÌ´«∂ìä[1517]); } goto FÙÓå¿∂Œç; FÙÓå¿∂Œç: } protected function endAfter() { $føœ–ËŒ¬∫ =& $_SERVER[áí∂¯Â¸Áò]; parent::endAfter(); Hook::unbind($føœ–ËŒ¬∫[1513], array($this, $føœ–ËŒ¬∫[1514])); Hook::unbind($føœ–ËŒ¬∫[1043], array($this, $føœ–ËŒ¬∫[1515])); } public function updateAfter() { $dÊ√∆É© « =& $_SERVER[áí∂¯Â¸Áò]; $d∞à€ıøˆ‹ =& $this->task; if (!$d∞à€ıøˆ‹[$dÊ√∆É© «[980]] || !$d∞à€ıøˆ‹[$dÊ√∆É© «[704]]) { return; } if ($d∞à€ıøˆ‹[$dÊ√∆É© «[1516]] == $dÊ√∆É© «[1048]) { $Cá©⁄•≠Á• = 0; if ($d∞à€ıøˆ‹[$dÊ√∆É© «[1488]]) { $Cá©⁄•≠Á• = $d∞à€ıøˆ‹[$dÊ√∆É© «[1489]] / $d∞à€ıøˆ‹[$dÊ√∆É© «[1488]]; } $d∞à€ıøˆ‹[$dÊ√∆É© «[1444]] = $Cá©⁄•≠Á• * 0.3; } else { if ($d∞à€ıøˆ‹[$dÊ√∆É© «[1516]] == $dÊ√∆É© «[305]) { $Cá©⁄•≠Á• = $d∞à€ıøˆ‹[$dÊ√∆É© «[994]] / $d∞à€ıøˆ‹[$dÊ√∆É© «[980]]; $d∞à€ıøˆ‹[$dÊ√∆É© «[1444]] = 0.3 + $Cá©⁄•≠Á• * 0.4; } else { if ($d∞à€ıøˆ‹[$dÊ√∆É© «[1516]] == $dÊ√∆É© «[103]) { $bÌΩòØëú = 0; if ($d∞à€ıøˆ‹[$dÊ√∆É© «[1490]] == $dÊ√∆É© «[103]) { $bÌΩòØëú = $d∞à€ıøˆ‹[$dÊ√∆É© «[1489]]; } $Cá©⁄•≠Á• = ($d∞à€ıøˆ‹[$dÊ√∆É© «[1493]] + $bÌΩòØëú) / $d∞à€ıøˆ‹[$dÊ√∆É© «[704]]; $d∞à€ıøˆ‹[$dÊ√∆É© «[1444]] = 0.3 + 0.4 + $Cá©⁄•≠Á• * 0.3; } } } if ($d∞à€ıøˆ‹[$dÊ√∆É© «[1444]] > 0) { $a…œ“Öâ€™ = timeFloat() - $d∞à€ıøˆ‹[$dÊ√∆É© «[1446]] - $d∞à€ıøˆ‹[$dÊ√∆É© «[1449]]; $d∞à€ıøˆ‹[$dÊ√∆É© «[1450]] = $a…œ“Öâ€™ * (1 - $d∞à€ıøˆ‹[$dÊ√∆É© «[1444]]) / $d∞à€ıøˆ‹[$dÊ√∆É© «[1444]]; } } public function addFile($E—∫ÏﬁìÎ) { goto b”Ñ“µˆõÀ; eõã«ŸøŸÊ: $this->update(); goto B®é≈“„®‘; bΩò“»∑≈Î: $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [982]] = $dﬁ∑ˆ¡ã§ [1505]; $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [1490]] = $dﬁ∑ˆ¡ã§ [1048]; $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [704]] = $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [77]]; goto a‰çååìÖç; BÖ™ÚÑë‘á: $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [1486]] = $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [28]]; $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [1488]] = $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [77]]; $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [1489]] = 0; goto bΩò“»∑≈Î; a‰çååìÖç: $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [980]] = 1; $FÖÙ˘üƒ¡â = 0; $F•±„È±Ó«[$dﬁ∑ˆ¡ã§ [1497]] = array($dﬁ∑ˆ¡ã§ [1498] => $FÖÙ˘üƒ¡â + 1, $dﬁ∑ˆ¡ã§ [398] => $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [28]], $dﬁ∑ˆ¡ã§ [75] => $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [75]], $dﬁ∑ˆ¡ã§ [479] => $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [479]] ? $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [479]] : $a¡èÁ≈É©Â[$dﬁ∑ˆ¡ã§ [75]]); goto eõã«ŸøŸÊ; b”Ñ“µˆõÀ: $dﬁ∑ˆ¡ã§  =& $_SERVER[áí∂¯Â¸Áò]; $F•±„È±Ó« =& $this->task; $a¡èÁ≈É©Â = IO::info($E—∫ÏﬁìÎ); goto BÖ™ÚÑë‘á; B®é≈“„®‘: } public function unzipAfter($dôåî¥èﬂ÷) { goto d≈”Ωöòπ‡; EõÚôê£•í: $Féé†˜ìë´[$aƒÙÔÓç∆à[994]] = 0; $Féé†˜ìë´[$aƒÙÔÓç∆à[1488]] = 0; $Féé†˜ìë´[$aƒÙÔÓç∆à[1489]] = 0; goto A≥ßê˘íåÒ; A≥ßê˘íåÒ: $Féé†˜ìë´[$aƒÙÔÓç∆à[1486]] = $aƒÙÔÓç∆à[33]; $Féé†˜ìë´[$aƒÙÔÓç∆à[1493]] = 0; $Féé†˜ìë´[$aƒÙÔÓç∆à[704]] = $fâï´—πªä[$aƒÙÔÓç∆à[77]]; goto cπ¨‰â‘ıü; cπ¨‰â‘ıü: $this->update(); self::log($aƒÙÔÓç∆à[1518] . json_encode(array($Féé†˜ìë´, $fâï´—πªä))); goto c‹õë€èÆæ; aòâÏ·∑ïà: $fâï´—πªä = IO::infoWithChildren($dôåî¥èﬂ÷); $Cì˘÷à´ë = 0; $Féé†˜ìë´[$aƒÙÔÓç∆à[1497]] = array($aƒÙÔÓç∆à[1498] => $Cì˘÷à´ë + 1, $aƒÙÔÓç∆à[398] => $fâï´—πªä[$aƒÙÔÓç∆à[28]], $aƒÙÔÓç∆à[75] => $fâï´—πªä[$aƒÙÔÓç∆à[75]], $aƒÙÔÓç∆à[479] => $fâï´—πªä[$aƒÙÔÓç∆à[479]] ? $fâï´—πªä[$aƒÙÔÓç∆à[479]] : $fâï´—πªä[$aƒÙÔÓç∆à[75]]); goto C§ÃÏû£å–; C§ÃÏû£å–: if ($fâï´—πªä[$aƒÙÔÓç∆à[29]] == $aƒÙÔÓç∆à[171]) { $Féé†˜ìë´[$aƒÙÔÓç∆à[980]] = 1; } else { $Féé†˜ìë´[$aƒÙÔÓç∆à[980]] = $fâï´—πªä[$aƒÙÔÓç∆à[80]][$aƒÙÔÓç∆à[78]]; } $Féé†˜ìë´[$aƒÙÔÓç∆à[982]] = $aƒÙÔÓç∆à[33]; $Féé†˜ìë´[$aƒÙÔÓç∆à[1490]] = 0; goto EõÚôê£•í; d≈”Ωöòπ‡: $aƒÙÔÓç∆à =& $_SERVER[áí∂¯Â¸Áò]; $Féé†˜ìë´ =& $this->task; $Féé†˜ìë´[$aƒÙÔÓç∆à[1516]] = $aƒÙÔÓç∆à[103]; goto aòâÏ·∑ïà; c‹õë€èÆæ: } public function nameParse($f»◊ˆÿ±‰é) { goto B„áØÿ·ﬂß; bå¥∞ﬂ¨Ï„: $c›åƒœ∫ô¿ = get_path_this($f»◊ˆÿ±‰é); if (strstr($c›åƒœ∫ô¿, $b¢øâî®√Œ[91])) { $B∆∫‰¶‚µ§[$b¢øâî®√Œ[994]] += 1; $B∆∫‰¶‚µ§[$b¢øâî®√Œ[980]] += 1; } $B∆∫‰¶‚µ§[$b¢øâî®√Œ[1486]] = $f»◊ˆÿ±‰é; goto F†≈ÿµ◊àñ; F†≈ÿµ◊àñ: $this->update(); goto e∑ºŒéÚË’; B„áØÿ·ﬂß: $b¢øâî®√Œ =& $_SERVER[áí∂¯Â¸Áò]; $B∆∫‰¶‚µ§ =& $this->task; if ($B∆∫‰¶‚µ§[$b¢øâî®√Œ[1516]] == $b¢øâî®√Œ[1048]) { $B∆∫‰¶‚µ§[$b¢øâî®√Œ[1516]] = $b¢øâî®√Œ[305]; $B∆∫‰¶‚µ§[$b¢øâî®√Œ[1493]] = 0; $B∆∫‰¶‚µ§[$b¢øâî®√Œ[704]] = 0; } goto bå¥∞ﬂ¨Ï„; e∑ºŒéÚË’: } } goto FÍ‘µóí¶á; DêÉ≥˜≥πÇ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($C„Ø¥ÏòÊ∏) { parent::__construct($C„Ø¥ÏòÊ∏); $this->signatureVersion($_SERVER[áí∂¯Â¸Áò][204]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($CŒÂÊºö¨É) { parent::__construct($CŒÂÊºö¨É); $this->signatureVersion($_SERVER[áí∂¯Â¸Áò][204]); } public function fileOutLink($aÂÏ˘àÈ‹¯) { $bƒ∂î‡ÓÙ¬ =& $_SERVER[áí∂¯Â¸Áò]; if (substr($aÂÏ˘àÈ‹¯, 0, 7) == $bƒ∂î‡ÓÙ¬[1122]) { $aÂÏ˘àÈ‹¯ = $bƒ∂î‡ÓÙ¬[1123] . substr($aÂÏ˘àÈ‹¯, 7); } header($bƒ∂î‡ÓÙ¬[156] . $aÂÏ˘àÈ‹¯); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($AàΩÖ‰í‡‰) { parent::__construct(); include_once SDK_DIR . $_SERVER[áí∂¯Â¸Áò][1177]; $this->_init($AàΩÖ‰í‡‰); } public function _init($a‚‚ﬂ¡êã‘) { $a™Ï«›öòô =& $_SERVER[áí∂¯Â¸Áò]; foreach ($a‚‚ﬂ¡êã‘ as $a¨„Û¬Ñ™ÿ => $E±»æˆË˘∂) { if (isset($this->{$a¨„Û¬Ñ™ÿ})) { $this->{$a¨„Û¬Ñ™ÿ} = $E±»æˆË˘∂; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($a™Ï«›öòô[1178] . LNG($a™Ï«›öòô[1179])); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto eﬂ·’ñá‰ù; F÷ƒÃÌè™®: $c¡™äÀŸ»«->addRule($f—∞Éú©œ©); try { $this->client->putBucketCors($this->bucket, $c¡™äÀŸ»«); } catch (OSS\Core\OssException $E˘ÚäﬁªÈã) { return !1; } return !0; goto AÕÛßü ë¯; eﬂ·’ñá‰ù: $FÂÎ’≥éËµ =& $_SERVER[áí∂¯Â¸Áò]; $c¡™äÀŸ»« = new OSS\Model\CorsConfig(); $f—∞Éú©œ© = new OSS\Model\CorsRule(); goto bƒ≠ê›ﬁùÖ; bƒ≠ê›ﬁùÖ: $f—∞Éú©œ©->addAllowedOrigin($FÂÎ’≥éËµ[1180]); $f—∞Éú©œ©->addAllowedMethod($FÂÎ’≥éËµ[1181]); $f—∞Éú©œ©->addAllowedMethod($FÂÎ’≥éËµ[1182]); goto f‹Ñ…èË‡à; aÉÇ¯éç‡Ì: $f—∞Éú©œ©->setMaxAgeSeconds(600); $f—∞Éú©œ©->addExposeHeader($FÂÎ’≥éËµ[1185]); $f—∞Éú©œ©->addAllowedHeader($FÂÎ’≥éËµ[1180]); goto F÷ƒÃÌè™®; f‹Ñ…èË‡à: $f—∞Éú©œ©->addAllowedMethod($FÂÎ’≥éËµ[1183]); $f—∞Éú©œ©->addAllowedMethod($FÂÎ’≥éËµ[1184]); $f—∞Éú©œ©->addAllowedMethod($FÂÎ’≥éËµ[155]); goto aÉÇ¯éç‡Ì; AÕÛßü ë¯: } public function getBucketCors() { goto d•¨¶›¥≥‘; d•¨¶›¥≥‘: $f¯ïóïë≥® =& $_SERVER[áí∂¯Â¸Áò]; $Bàº“‹®Ÿª = null; try { $Bàº“‹®Ÿª = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $B◊÷¨¯œ‚∂) { return null; } goto D◊åóÈØÍË; f¥¡çê≤àß: return array($f¯ïóïë≥®[179] => isset($A´ƒ∫£ô°ë[0]) ? $A´ƒ∫£ô°ë[0] : $f¯ïóïë≥®[33], $f¯ïóïë≥®[183] => $eµ´»ŸÙêŸ, $f¯ïóïë≥®[1186] => $D‰é‚˜êã±, $f¯ïóïë≥®[1187] => isset($Aììîë…úÙ[0]) ? $Aììîë…úÙ[0] : $f¯ïóïë≥®[33], $f¯ïóïë≥®[181] => isset($E∆è’™≤–‹[0]) ? $E∆è’™≤–‹[0] : $f¯ïóïë≥®[33]); goto D«íú°Ë∞ø; D◊åóÈØÍË: if (!$Bàº“‹®Ÿª || !($eÛŸç®Èéê = $Bàº“‹®Ÿª->getRules())) { return null; } $A´ƒ∫£ô°ë = $eÛŸç®Èéê[0]->getAllowedOrigins(); $eµ´»ŸÙêŸ = $eÛŸç®Èéê[0]->getAllowedMethods(); goto bÑΩÒÂ€áè; bÑΩÒÂ€áè: $D‰é‚˜êã± = $eÛŸç®Èéê[0]->getMaxAgeSeconds(); $Aììîë…úÙ = $eÛŸç®Èéê[0]->getExposeHeaders(); $E∆è’™≤–‹ = $eÛŸç®Èéê[0]->getAllowedHeaders(); goto f¥¡çê≤àß; D«íú°Ë∞ø: } public function isBucketCors() { goto cª‡™ç·åÓ; EßÕ◊»Œúî: if ($dﬂ‚®´Ò÷Û[$C≈Õ¿Ö·ÿ∏[179]] != $C≈Õ¿Ö·ÿ∏[180] || $dﬂ‚®´Ò÷Û[$C≈Õ¿Ö·ÿ∏[181]] != $C≈Õ¿Ö·ÿ∏[180]) { return !1; } $Bù‘ﬂåß’è = array_map($C≈Õ¿Ö·ÿ∏[182], $dﬂ‚®´Ò÷Û[$C≈Õ¿Ö·ÿ∏[183]]); if (!is_array($Bù‘ﬂåß’è)) { $Bù‘ﬂåß’è = array(); } goto f° àªûŒ„; f° àªûŒ„: $E†áÎ±≠µ÷ = array($C≈Õ¿Ö·ÿ∏[184], $C≈Õ¿Ö·ÿ∏[185], $C≈Õ¿Ö·ÿ∏[186], $C≈Õ¿Ö·ÿ∏[187], $C≈Õ¿Ö·ÿ∏[188]); $AÖıŸ«ú◊É = array_diff($E†áÎ±≠µ÷, $Bù‘ﬂåß’è); return empty($AÖıŸ«ú◊É); goto b√‹É¶àÑã; cª‡™ç·åÓ: $C≈Õ¿Ö·ÿ∏ =& $_SERVER[áí∂¯Â¸Áò]; $dﬂ‚®´Ò÷Û = $this->getBucketCors(); if (!$dﬂ‚®´Ò÷Û || !is_array($dﬂ‚®´Ò÷Û)) { return !1; } goto EßÕ◊»Œúî; b√‹É¶àÑã: } public function mkfile($e˘‘√üäÁÙ, $FàøÒÔêÖù = '', $bÀ∆—ëÂïø = REPEAT_RENAME) { $bÃÙ©«£à = $this->setContent($e˘‘√üäÁÙ, $FàøÒÔêÖù); if ($bÃÙ©«£à !== !1) { return $this->getPathOuter($e˘‘√üäÁÙ); } return !1; } public function mkdir($a¬øŒÔ®ı¥, $a¯óãåÎŒÍ = REPEAT_SKIP) { if ($this->_isFolder($a¬øŒÔ®ı¥)) { return $this->getPathOuter($a¬øŒÔ®ı¥); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($a¬øŒÔ®ı¥)); } catch (OSS\Core\OssException $C ò°Ùﬂ‹) { return !1; } return $this->getPathOuter($a¬øŒÔ®ı¥); } private function fileList($AçæÒê·¥†, $câÆÀåàá≠ = '', $f÷◊ÉﬁüºÜ = 0) { goto Aıµß”®…Á; Aıµß”®…Á: $Aù´ﬂíÕØ÷ =& $_SERVER[áí∂¯Â¸Áò]; $AçæÒê·¥† = trim($AçæÒê·¥†, $Aù´ﬂíÕØ÷[8]); $D˘ã∞µÍı = empty($AçæÒê·¥†) ? $Aù´ﬂíÕØ÷[33] : $AçæÒê·¥† . $Aù´ﬂíÕØ÷[8]; goto B¬Ô”ﬁ√â; a‚Éπø¯äÒ: while (!0) { $Fö•Î‡πöœ = array($Aù´ﬂíÕØ÷[1188] => $câÆÀåàá≠, $Aù´ﬂíÕØ÷[190] => $D˘ã∞µÍı, $Aù´ﬂíÕØ÷[1189] => $eÿ∞°ÎÜï‚, $Aù´ﬂíÕØ÷[1190] => $f‰ÑÇ´âπ¥); try { $dﬁŒÜÊƒ≠µ = $this->client->listObjects($this->bucket, $Fö•Î‡πöœ); } catch (OSS\Core\OssException $E¨Êêßìƒ) { break; } $f‰ÑÇ´âπ¥ = $dﬁŒÜÊƒ≠µ->getNextMarker(); $DÆçö €äÆ = $dﬁŒÜÊƒ≠µ->getObjectList(); $EÎΩÖª = $dﬁŒÜÊƒ≠µ->getPrefixList(); foreach ($DÆçö €äÆ as $CãªâÓ¶ÖÁ) { if ($CãªâÓ¶ÖÁ->getKey() == $D˘ã∞µÍı) { continue; } $DáÈÈ≠¥Ò£ = $CãªâÓ¶ÖÁ->getKey(); if ($f÷◊ÉﬁüºÜ) { $DáÈÈ≠¥Ò£ = array($Aù´ﬂíÕØ÷[28] => $DáÈÈ≠¥Ò£, $Aù´ﬂíÕØ÷[77] => $CãªâÓ¶ÖÁ->getSize(), $Aù´ﬂíÕØ÷[194] => strtotime($CãªâÓ¶ÖÁ->getLastModified())); } $C«¡ùÛÏ≠ø[] = $DáÈÈ≠¥Ò£; } foreach ($EÎΩÖª as $eÆÎøÎéﬁ«) { $fœë¡ß•€â[] = $eÆÎøÎéﬁ«->getPrefix(); } if ($f‰ÑÇ´âπ¥ === $Aù´ﬂíÕØ÷[33]) { break; } } return array($Aù´ﬂíÕØ÷[74] => $fœë¡ß•€â, $Aù´ﬂíÕØ÷[73] => $C«¡ùÛÏ≠ø); goto eÓ¢Õî∞éÉ; B¬Ô”ﬁ√â: $f‰ÑÇ´âπ¥ = $Aù´ﬂíÕØ÷[33]; $eÿ∞°ÎÜï‚ = 1000; $fœë¡ß•€â = $C«¡ùÛÏ≠ø = array(); goto a‚Éπø¯äÒ; eÓ¢Õî∞éÉ: } public function copyFile($C˘‹öé‡µ√, $AÖñ§À¯Ωº) { $cúÊïÔì—õ = $this->size($C˘‹öé‡µ√); if ($cúÊïÔì—õ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $C˘‹öé‡µ√, $this->bucket, $this->pathEncode($AÖñ§À¯Ωº)); } catch (OSS\Core\OssException $FÉÑò≠∫∑®) { return !1; } return $this->getPathOuter($AÖñ§À¯Ωº); } $f™àÌ∂Çè‡ = $this->multiCopyObject($C˘‹öé‡µ√, $AÖñ§À¯Ωº, $cúÊïÔì—õ); return $f™àÌ∂Çè‡ ? $this->getPathOuter($AÖñ§À¯Ωº) : !1; } private function multiCopyObject($E°ñÓ÷…€≠, $Cú®Í¿â‚Â, $Eüã¶Œ‰¢É) { $A ¡£ñ—Â± =& $_SERVER[áí∂¯Â¸Áò]; try { goto E·Õ∫Ï¯∫; F €ãß’àΩ: $D∞’´§áıÃ = 1; $A–ÁªÎŸåõ = 0; $f»Î¨∫œïÿ = array(); goto féˆﬁºº¿—; D‡ã∞◊÷Ÿù: $a…ÆÚåœ¿ë = array(); foreach ($f»Î¨∫œïÿ as $d˘ä∑Ã‹Ÿ· => $EìÇœÃ‰Õù) { $a…ÆÚåœ¿ë[] = array($A ¡£ñ—Â±[1195] => $d˘ä∑Ã‹Ÿ· + 1, $A ¡£ñ—Â±[1196] => $EìÇœÃ‰Õù); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($Cú®Í¿â‚Â), $BíÈ¢ˆΩµ⁄, $a…ÆÚåœ¿ë); goto C£êÚ üâ≈; E·Õ∫Ï¯∫: $bî±ÊÙ®ãÌ = array(); if ($fﬁçÀ≈∑Æ” = $this->hashMd5($E°ñÓ÷…€≠)) { $bî±ÊÙ®ãÌ = array(OSS\OssClient::OSS_HEADERS => array($A ¡£ñ—Â±[1191] => $fﬁçÀ≈∑Æ”)); } $BíÈ¢ˆΩµ⁄ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Cú®Í¿â‚Â), $bî±ÊÙ®ãÌ); goto F €ãß’àΩ; féˆﬁºº¿—: $a„„ïû≥ì— = 1024 * 1024 * 10; $DÏçúø¿Èé = $this->client->generateMultiuploadParts($Eüã¶Œ‰¢É, $a„„ïû≥ì—); foreach ($DÏçúø¿Èé as $d˘ä∑Ã‹Ÿ· => $DË”àÿùäü) { $CÈ‡öè©Ôæ = $A–ÁªÎŸåõ + (int) $DË”àÿùäü[$A ¡£ñ—Â±[1192]]; $c÷ ÇÙæ˜ß = (int) $DË”àÿùäü[$A ¡£ñ—Â±[329]] + $CÈ‡öè©Ôæ - 1; $aà€§êƒ£å = array($A ¡£ñ—Â±[1193] => $CÈ‡öè©Ôæ, $A ¡£ñ—Â±[1194] => $c÷ ÇÙæ˜ß); $f»Î¨∫œïÿ[] = $this->client->uploadPartCopy($this->bucket, $E°ñÓ÷…€≠, $this->bucket, $this->pathEncode($Cú®Í¿â‚Â), $D∞’´§áıÃ, $BíÈ¢ˆΩµ⁄, $aà€§êƒ£å); $D∞’´§áıÃ = $D∞’´§áıÃ + 1; } goto D‡ã∞◊÷Ÿù; C£êÚ üâ≈: } catch (OSS\Core\OssException $bÙÁàê∞∫è) { return !1; } return !0; } public function moveFile($C¿ëØ”◊È£, $d‚êï»»Ÿñ) { if ($this->copyFile($C¿ëØ”◊È£, $d‚êï»»Ÿñ)) { $this->remove($C¿ëØ”◊È£); return $this->getPathOuter($d‚êï»»Ÿñ); } return !1; } public function delFile($Bﬁ·ÖÓÏ®õ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($Bﬁ·ÖÓÏ®õ)); } catch (OSS\Core\OssException $E€üú…⁄ùü) { return !1; } return !0; } public function delFolder($e™õ©¨ãå©) { $cå¯ƒ√ìíÑ =& $_SERVER[áí∂¯Â¸Áò]; $BóÖ—åÂ„ò = $this->fileList($e™õ©¨ãå©); if (!empty($e™õ©¨ãå©) && !in_array(trim($e™õ©¨ãå©, $cå¯ƒ√ìíÑ[8]) . $cå¯ƒ√ìíÑ[8], $BóÖ—åÂ„ò[$cå¯ƒ√ìíÑ[73]])) { $BóÖ—åÂ„ò[$cå¯ƒ√ìíÑ[73]][] = trim($e™õ©¨ãå©, $cå¯ƒ√ìíÑ[8]) . $cå¯ƒ√ìíÑ[8]; } foreach (array_chunk($BóÖ—åÂ„ò[$cå¯ƒ√ìíÑ[73]], 1000) as $BŸÇøï£Ú¥) { try { $this->client->deleteObjects($this->bucket, $BŸÇøï£Ú¥); } catch (OSS\Core\OssException $CòÉà˘òﬁÂ) { continue; } } return !0; } public function rename($Aﬂ™åÕø¯ı, $cØ’ Ç¡ã±) { return $this->renameObject($Aﬂ™åÕø¯ı, $cØ’ Ç¡ã±); } private function fileInfo($C—Ô ©‹¢Ó, $aŒ…˜¬«≥§ = array()) { goto c¶◊÷Ú•¥Ñ; c¶◊÷Ú•¥Ñ: $A¡⁄’¢¯Ñ« =& $_SERVER[áí∂¯Â¸Áò]; $eÜ”∏ª≠¡ = array($A¡⁄’¢¯Ñ«[28] => $this->pathThis($C—Ô ©‹¢Ó), $A¡⁄’¢¯Ñ«[75] => $this->getPathOuter($C—Ô ©‹¢Ó), $A¡⁄’¢¯Ñ«[29] => $A¡⁄’¢¯Ñ«[171], $A¡⁄’¢¯Ñ«[191] => 0, $A¡⁄’¢¯Ñ«[107] => 0, $A¡⁄’¢¯Ñ«[77] => 0, $A¡⁄’¢¯Ñ«[165] => $this->ext($C—Ô ©‹¢Ó), $A¡⁄’¢¯Ñ«[192] => !0, $A¡⁄’¢¯Ñ«[193] => !0); if (empty($aŒ…˜¬«≥§)) { $aÚ∏ﬁ¬‘¯ = $this->objectMeta($C—Ô ©‹¢Ó); if (!$aÚ∏ﬁ¬‘¯) { return $eÜ”∏ª≠¡; } $aŒ…˜¬«≥§ = array($A¡⁄’¢¯Ñ«[107] => strtotime($aÚ∏ﬁ¬‘¯[$A¡⁄’¢¯Ñ«[1197]]), $A¡⁄’¢¯Ñ«[77] => $aÚ∏ﬁ¬‘¯[$A¡⁄’¢¯Ñ«[1198]] + 0); } goto DôÕ¶ôäêà; bΩ’à’Ó“∫: return $eÜ”∏ª≠¡; goto a≥±œû“Êú; DôÕ¶ôäêà: if (isset($aŒ…˜¬«≥§[$A¡⁄’¢¯Ñ«[77]])) { $eÜ”∏ª≠¡[$A¡⁄’¢¯Ñ«[77]] = $aŒ…˜¬«≥§[$A¡⁄’¢¯Ñ«[77]]; } if (isset($aŒ…˜¬«≥§[$A¡⁄’¢¯Ñ«[107]])) { $eÜ”∏ª≠¡[$A¡⁄’¢¯Ñ«[107]] = $aŒ…˜¬«≥§[$A¡⁄’¢¯Ñ«[107]]; } if (isset($aŒ…˜¬«≥§[$A¡⁄’¢¯Ñ«[194]]) && !trim($eÜ”∏ª≠¡[$A¡⁄’¢¯Ñ«[107]])) { $eÜ”∏ª≠¡[$A¡⁄’¢¯Ñ«[107]] = $aŒ…˜¬«≥§[$A¡⁄’¢¯Ñ«[194]]; } goto bΩ’à’Ó“∫; a≥±œû“Êú: } private function folderInfo($A±ÇÏ¿ÍÔ≈, $DÉèèﬁ≥µó = array()) { $Eõ≤‚¿Ö∫∆ =& $_SERVER[áí∂¯Â¸Áò]; $f‰πºù©ÁÉ = array($Eõ≤‚¿Ö∫∆[28] => $this->pathThis($A±ÇÏ¿ÍÔ≈), $Eõ≤‚¿Ö∫∆[75] => $this->getPathOuter($Eõ≤‚¿Ö∫∆[8] . $A±ÇÏ¿ÍÔ≈), $Eõ≤‚¿Ö∫∆[29] => $Eõ≤‚¿Ö∫∆[76], $Eõ≤‚¿Ö∫∆[191] => 0, $Eõ≤‚¿Ö∫∆[107] => 0, $Eõ≤‚¿Ö∫∆[192] => !0, $Eõ≤‚¿Ö∫∆[193] => !0); if (empty($DÉèèﬁ≥µó)) { $A±ÇÏ¿ÍÔ≈ = rtrim($A±ÇÏ¿ÍÔ≈, $Eõ≤‚¿Ö∫∆[8]) . $Eõ≤‚¿Ö∫∆[8]; $C„¢ØÖ¶·¬ = $this->objectMeta($A±ÇÏ¿ÍÔ≈); if (!$C„¢ØÖ¶·¬) { return $f‰πºù©ÁÉ; } $DÉèèﬁ≥µó = array($Eõ≤‚¿Ö∫∆[191] => $C„¢ØÖ¶·¬[$Eõ≤‚¿Ö∫∆[1199]][$Eõ≤‚¿Ö∫∆[1200]], $Eõ≤‚¿Ö∫∆[107] => strtotime($C„¢ØÖ¶·¬[$Eõ≤‚¿Ö∫∆[1197]])); } if (isset($DÉèèﬁ≥µó[$Eõ≤‚¿Ö∫∆[107]])) { $f‰πºù©ÁÉ[$Eõ≤‚¿Ö∫∆[107]] = $DÉèèﬁ≥µó[$Eõ≤‚¿Ö∫∆[107]]; } if (isset($DÉèèﬁ≥µó[$Eõ≤‚¿Ö∫∆[191]])) { $f‰πºù©ÁÉ[$Eõ≤‚¿Ö∫∆[191]] = $DÉèèﬁ≥µó[$Eõ≤‚¿Ö∫∆[191]]; } return $f‰πºù©ÁÉ; } public function listPath($d¶∏‹Á¶¶ü, $dß‚ªñÏÁé = false) { $dá—‰‡∞û´ =& $_SERVER[áí∂¯Â¸Áò]; $f üÿÛƒáí = $this->fileList($d¶∏‹Á¶¶ü, $dá—‰‡∞û´[8], !0); foreach ($f üÿÛƒáí[$dá—‰‡∞û´[74]] as $b ¯¿¯ô…€ => $Dæóµ«‰Ìê) { $f üÿÛƒáí[$dá—‰‡∞û´[74]][$b ¯¿¯ô…€] = $this->folderInfo($Dæóµ«‰Ìê, $Dæóµ«‰Ìê); } foreach ($f üÿÛƒáí[$dá—‰‡∞û´[73]] as $b ¯¿¯ô…€ => $Dæóµ«‰Ìê) { $f üÿÛƒáí[$dá—‰‡∞û´[73]][$b ¯¿¯ô…€] = $this->fileInfo($Dæóµ«‰Ìê[$dá—‰‡∞û´[28]], $Dæóµ«‰Ìê); } return $f üÿÛƒáí; } public function has($déÜÕÉ√»˘, $A‡Ó›ãïãä = false, $D¡·˜Ê¯ñ  = true) { goto eç®–„∞‰Ï; eç®–„∞‰Ï: $a˘Û§‘°Ï÷ =& $_SERVER[áí∂¯Â¸Áò]; $déÜÕÉ√»˘ = trim($déÜÕÉ√»˘, $a˘Û§‘°Ï÷[8]); $E√´ã§≈´Ñ = empty($déÜÕÉ√»˘) ? $a˘Û§‘°Ï÷[33] : $déÜÕÉ√»˘ . $a˘Û§‘°Ï÷[8]; goto EƒıŸãÌ≠Ó; EƒıŸãÌ≠Ó: $D∑√£Ë˘Ùê = $a˘Û§‘°Ï÷[33]; $f∏ÂàÃÿ§¿ = 500; $fÑ˘Õ…åπÆ = 0; goto cé‰èøéå¶; cé‰èøéå¶: $FÆÑπú§∂± = 0; while (!0) { $E∑¶°Ö»Ñı = array($a˘Û§‘°Ï÷[1188] => $a˘Û§‘°Ï÷[8], $a˘Û§‘°Ï÷[190] => $E√´ã§≈´Ñ, $a˘Û§‘°Ï÷[1189] => $f∏ÂàÃÿ§¿, $a˘Û§‘°Ï÷[1190] => $D∑√£Ë˘Ùê); try { $eºè°•¿Ùè = $this->client->listObjects($this->bucket, $E∑¶°Ö»Ñı); } catch (OSS\Core\OssException $aƒñŸÃŒâà) { break; } $D∑√£Ë˘Ùê = $eºè°•¿Ùè->getNextMarker(); $cïå¨üÜ˘© = $eºè°•¿Ùè->getObjectList(); $D¢¨é◊£Ãé = $eºè°•¿Ùè->getPrefixList(); if ($A‡Ó›ãïãä) { if (count($cïå¨üÜ˘©) > 1 || count($cïå¨üÜ˘©) == 1 && $cïå¨üÜ˘©[0]->getKey() != $E√´ã§≈´Ñ) { $fÑ˘Õ…åπÆ += count($cïå¨üÜ˘©) - 1; } if (!empty($D¢¨é◊£Ãé)) { $FÆÑπú§∂± += count($D¢¨é◊£Ãé); } if ($D∑√£Ë˘Ùê === $a˘Û§‘°Ï÷[33]) { break; } continue; } if ($D¡·˜Ê¯ñ ) { if (!empty($cïå¨üÜ˘©)) { if (count($cïå¨üÜ˘©) > 1 || $cïå¨üÜ˘©[0]->getKey() != $E√´ã§≈´Ñ) { return !0; } } } else { if (!empty($D¢¨é◊£Ãé)) { return !0; } } if ($D∑√£Ë˘Ùê === $a˘Û§‘°Ï÷[33]) { break; } } if ($A‡Ó›ãïãä) { return array($a˘Û§‘°Ï÷[195] => $fÑ˘Õ…åπÆ, $a˘Û§‘°Ï÷[196] => $FÆÑπú§∂±); } goto D≤éºù¶Î∆; D≤éºù¶Î∆: return !1; goto a…Ï¯˘Ì⁄´; a…Ï¯˘Ì⁄´: } public function listAll($d·Ê¿éÎÌÂ) { $b—úÿ”§œ§ =& $_SERVER[áí∂¯Â¸Áò]; $dÍ≠Ê–Ê»ˆ = $this->fileList($d·Ê¿éÎÌÂ, $b—úÿ”§œ§[33], !0); $EÍΩ∞Æóı = array(); foreach ($dÍ≠Ê–Ê»ˆ[$b—úÿ”§œ§[73]] as $fÖÍÑ»·î´) { $EÍΩ∞Æóı[$fÖÍÑ»·î´[$b—úÿ”§œ§[28]]] = $fÖÍÑ»·î´[$b—úÿ”§œ§[77]]; } return $this->listAllFiles($d·Ê¿éÎÌÂ, array_keys($EÍΩ∞Æóı), $EÍΩ∞Æóı); } public function canRead($a“¿µ€ÍÖË) { $aô€°å—«è =& $_SERVER[áí∂¯Â¸Áò]; $aèâêÎı”ö = $this->pathAcl($a“¿µ€ÍÖË); return $aèâêÎı”ö == $aô€°å—«è[1201] || $aèâêÎı”ö == $aô€°å—«è[504] ? !0 : !1; } public function canWrite($Aì¢ûÍú‡Ü) { $D¯Í∏ÈÊ√Æ = $this->pathAcl($Aì¢ûÍú‡Ü); return $D¯Í∏ÈÊ√Æ == $_SERVER[áí∂¯Â¸Áò][504] ? !0 : !1; } public function pathAcl($f…ˆÂÏ„èï) { goto f˘Ïµì†ç¬; D®—·ô¢¡ƒ: return $cå€Ç˜íÕ; goto A≈…ÚçÖ›ï; b˘≈µ¢Ö©≥: $cå€Ç˜íÕ = $FΩÏ•⁄˘åÀ == $eæÛËâ®äÛ[34] ? $this->bucketAcl : $FΩÏ•⁄˘åÀ; if ($cå€Ç˜íÕ == $eæÛËâ®äÛ[1202]) { return $eæÛËâ®äÛ[1201]; } if ($cå€Ç˜íÕ == $eæÛËâ®äÛ[1203]) { return $eæÛËâ®äÛ[504]; } goto D®—·ô¢¡ƒ; f˘Ïµì†ç¬: $eæÛËâ®äÛ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $FΩÏ•⁄˘åÀ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($f…ˆÂÏ„èï)); } catch (OSS\Core\OssException $e«ëû›ãªﬁ) { return !1; } goto b˘≈µ¢Ö©≥; A≈…ÚçÖ›ï: } private function chmodPath($b≠¨±®ñππ, $e•µ‘å∂—∏ = '') { $DóÑ™¯´œó =& $_SERVER[áí∂¯Â¸Áò]; $b∏µ…ˆ›©› = empty($e•µ‘å∂—∏) ? $DóÑ™¯´œó[1203] : $e•µ‘å∂—∏; $aò”Æ≠è–— = array($DóÑ™¯´œó[34], $DóÑ™¯´œó[189], $DóÑ™¯´œó[1202], $DóÑ™¯´œó[1203]); if (!in_array($b∏µ…ˆ›©›, $aò”Æ≠è–—)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($b≠¨±®ñππ), $b∏µ…ˆ›©›); } catch (OSS\Core\OssException $fö›ıΩÌïﬁ) { return !1; } return !0; } public function getContent($aπ◊¥¥¡í‹) { return $this->fileSubstr($aπ◊¥¥¡í‹, -1); } public function setContent($DíñÙƒçı–, $c‡ÛÜÊú®Û = '') { $cå±“ßáØº =& $_SERVER[áí∂¯Â¸Áò]; try { $dçóÛÇÊÇã = $this->trafficLimit($cå±“ßáØº[1204]); $eÊõï√ê‡ô = $this->client->putObject($this->bucket, $this->pathEncode($DíñÙƒçı–), $c‡ÛÜÊú®Û, $dçóÛÇÊÇã); } catch (OSS\Core\OssException $C‘à‹Âæ’Ã) { return !1; } $d©…Œ…∂íÑ = array($cå±“ßáØº[1191] => trim($eÊõï√ê‡ô[$cå±“ßáØº[1205]], $cå±“ßáØº[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($DíñÙƒçı–))); $this->updateObjMeta($DíñÙƒçı–, $d©…Œ…∂íÑ); return isset($eÊõï√ê‡ô[$cå±“ßáØº[1206]][$cå±“ßáØº[1153]]) ? (int) $eÊõï√ê‡ô[$cå±“ßáØº[1206]][$cå±“ßáØº[1153]] : strlen($eÊõï√ê‡ô); } private function updateObjMeta($B÷…ã‡Ú≈⁄, $Bâ‹‡‚Â≤¬) { $B÷…ã‡Ú≈⁄ = $this->pathEncode($B÷…ã‡Ú≈⁄); try { $cüÜóÜÀ¿ﬁ = array(OSS\OssClient::OSS_HEADERS => $Bâ‹‡‚Â≤¬); $this->client->copyObject($this->bucket, $B÷…ã‡Ú≈⁄, $this->bucket, $B÷…ã‡Ú≈⁄, $cüÜóÜÀ¿ﬁ); } catch (OSS\Core\OssException $F·ÖÓµ¿Ã›) { return !1; } return !0; } public function upload($f«∞°’øÉﬁ, $BÀô—≈œ–∏, $FÎ•µííÔÂ = false, $AëËØ∏ëáÈ = REPEAT_REPLACE) { $b‰‹”æ∆·  =& $_SERVER[áí∂¯Â¸Áò]; $A√¡§ÌåÛΩ = trim($f«∞°’øÉﬁ, $b‰‹”æ∆· [8]); $CûÔ€Ù∞»ª = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($b‰‹”æ∆· [1191] => @md5_file($BÀô—≈œ–∏)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($f«∞°’øÉﬁ))); $CûÔ€Ù∞»ª = $this->trafficLimit($b‰‹”æ∆· [1204], $CûÔ€Ù∞»ª); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($A√¡§ÌåÛΩ), $BÀô—≈œ–∏, $CûÔ€Ù∞»ª); } catch (OSS\Core\OssException $AáîÌ‹™æÏ) { return !1; } return $this->getPathOuter($f«∞°’øÉﬁ); } public function getHost() { $A™õµ‘øé =& $_SERVER[áí∂¯Â¸Áò]; $a‹∫Õä¶˜ = explode($A™õµ‘øé[175], parent::getHost()); return $a‹∫Õä¶˜[0] . $A™õµ‘øé[175] . $this->bucket . $A™õµ‘øé[91] . $a‹∫Õä¶˜[1]; } public function uploadFormData($câ•ù™˜ƒÕ, $FΩãΩ–í È = 3600) { goto A„†É–œ¿à; E®≤≤Í‰õÕ: $bò˜ıÒˆöí = $this->pathFather($câ•ù™˜ƒÕ); $AÌÜç·÷◊ê = array($C¥ﬂ¯≠ò⁄[1109] => $féñœ—≈ƒ∂, $C¥ﬂ¯≠ò⁄[1110] => array(array($C¥ﬂ¯≠ò⁄[1209], 0, $F⁄ûŸƒ˜ﬁ™), array($C¥ﬂ¯≠ò⁄[1113], $C¥ﬂ¯≠ò⁄[1114], $bò˜ıÒˆöí))); $b‚∞ﬁ⁄»ì∫ = base64_encode(json_encode($AÌÜç·÷◊ê)); goto fÆå∞˘”Áß; aÏñ©ÃµÎí: return $aÜáéÓıÉç; goto Dª«◊è¡ìû; A„†É–œ¿à: $C¥ﬂ¯≠ò⁄ =& $_SERVER[áí∂¯Â¸Áò]; if (!($bÇÙò≈ıüØ = $this->getHost())) { return !1; } $aëé÷∫Ü≠ê = $FΩãΩ–í È; goto FëÀòƒ∏⁄„; a¿ÇÌ‹‹Ê±: $CáﬂÆ≤‰¬∑ = strpos($féñœ—≈ƒ∂, $C¥ﬂ¯≠ò⁄[288]); $féñœ—≈ƒ∂ = substr($féñœ—≈ƒ∂, 0, $CáﬂÆ≤‰¬∑) . $C¥ﬂ¯≠ò⁄[1208]; $F⁄ûŸƒ˜ﬁ™ = 1048576000 * 5; goto E®≤≤Í‰õÕ; FëÀòƒ∏⁄„: $dÌÉÜË⁄Âù = date($C¥ﬂ¯≠ò⁄[1207], time() + $aëé÷∫Ü≠ê); $F•±⁄ÌøÑã = new DateTime($dÌÉÜË⁄Âù); $féñœ—≈ƒ∂ = $F•±⁄ÌøÑã->format(DateTime::ISO8601); goto a¿ÇÌ‹‹Ê±; fÆå∞˘”Áß: $EÚÕ›ıÆ·ß = base64_encode(hash_hmac($C¥ﬂ¯≠ò⁄[222], $b‚∞ﬁ⁄»ì∫, $this->secret, !0)); $aÜáéÓıÉç = array($C¥ﬂ¯≠ò⁄[1119] => $b‚∞ﬁ⁄»ì∫, $C¥ﬂ¯≠ò⁄[1210] => $this->accessKey, $C¥ﬂ¯≠ò⁄[1115] => $C¥ﬂ¯≠ò⁄[1107], $C¥ﬂ¯≠ò⁄[1211] => $EÚÕ›ıÆ·ß, $C¥ﬂ¯≠ò⁄[173] => $bÇÙò≈ıüØ); $aÜáéÓıÉç = $this->trafficLimit($C¥ﬂ¯≠ò⁄[1204], $aÜáéÓıÉç); goto aÏñ©ÃµÎí; Dª«◊è¡ìû: } public function multiUploadFormData($bã¶¡§ò®º, $DîŒøûÕÃæ = 3600) { $f∞Û´≈°≥¡ =& $_SERVER[áí∂¯Â¸Áò]; if (!($EÕ´ÁáÚôï = $this->getHost())) { return !1; } $CÖëÜêÓùí = $this->trafficLimit($f∞Û´≈°≥¡[1204]); $fÛ˘ãü∆†Ñ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($bã¶¡§ò®º), $CÖëÜêÓùí); return array($f∞Û´≈°≥¡[213] => $fÛ˘ãü∆†Ñ, $f∞Û´≈°≥¡[173] => $EÕ´ÁáÚôï . $f∞Û´≈°≥¡[8] . $this->pathEncode($bã¶¡§ò®º), $f∞Û´≈°≥¡[214] => gmdate($f∞Û´≈°≥¡[1212]), $f∞Û´≈°≥¡[89] => $bã¶¡§ò®º); } public function multiUploadAuthData($E ˆÉ°˘Óû, $EâÕàí®»‰ = array()) { goto AﬂæÊñÀâÕ; FÉø∫§»Âç: $Cû°Ú‚íá£ = $E ˆÉ°˘Óû; if (isset($EâÕàí®»‰[$A∑ÔÓáâÿ≠[89]])) { $Cû°Ú‚íá£ = $EâÕàí®»‰[$A∑ÔÓáâÿ≠[89]]; unset($EâÕàí®»‰[$A∑ÔÓáâÿ≠[89]]); } if (isset($EâÕàí®»‰[$A∑ÔÓáâÿ≠[215]])) { $EâÕàí®»‰[$A∑ÔÓáâÿ≠[214]] = $cæ≈±º‚Ãª; return $this->listUploadParts($Cû°Ú‚íá£, $EâÕàí®»‰); } goto f ã‡Œá“é; aù∏çºó◊„: $döı®°¿√Á = $A∑ÔÓáâÿ≠[1178] . $this->accessKey . $A∑ÔÓáâÿ≠[4] . $Dñ®Çº™‡ê; if (strpos($B¬àÊºŒÏ‹, $A∑ÔÓáâÿ≠[217]) === 0) { $döı®°¿√Á = array($A∑ÔÓáâÿ≠[224] => $döı®°¿√Á, $A∑ÔÓáâÿ≠[214] => $cæ≈±º‚Ãª); if ($fàÓ‡Ö„ÈÇ) { $döı®°¿√Á = array_merge($döı®°¿√Á, $fàÓ‡Ö„ÈÇ); } } return $döı®°¿√Á; goto AÕÃ≤Öı√Œ; AﬂæÊñÀâÕ: $A∑ÔÓáâÿ≠ =& $_SERVER[áí∂¯Â¸Áò]; $cæ≈±º‚Ãª = isset($EâÕàí®»‰[$A∑ÔÓáâÿ≠[214]]) ? $EâÕàí®»‰[$A∑ÔÓáâÿ≠[214]] : gmdate($A∑ÔÓáâÿ≠[1212]); $B¬àÊºŒÏ‹ = isset($EâÕàí®»‰[$A∑ÔÓáâÿ≠[165]]) ? $EâÕàí®»‰[$A∑ÔÓáâÿ≠[165]] : $A∑ÔÓáâÿ≠[33]; goto FÉø∫§»Âç; f ã‡Œá“é: $fûüÕÀ»≥ˆ = array($A∑ÔÓáâÿ≠[216], $A∑ÔÓáâÿ≠[33], $A∑ÔÓáâÿ≠[116], $cæ≈±º‚Ãª, "\x78\x2d\x6f\163\163\55\144\x61\164\x65\x3a{$cæ≈±º‚Ãª}", $A∑ÔÓáâÿ≠[8] . $this->bucket . $A∑ÔÓáâÿ≠[8] . $Cû°Ú‚íá£ . $B¬àÊºŒÏ‹); if (strpos($B¬àÊºŒÏ‹, $A∑ÔÓáâÿ≠[217]) === 0) { $fûüÕÀ»≥ˆ[0] = $A∑ÔÓáâÿ≠[218]; if ($fàÓ‡Ö„ÈÇ = $this->trafficLimit($A∑ÔÓáâÿ≠[1204])) { $Cû°Ú‚íá£ = $A∑ÔÓáâÿ≠[1213]; array_splice($fûüÕÀ»≥ˆ, 5, 0, $Cû°Ú‚íá£ . $A∑ÔÓáâÿ≠[4] . $fàÓ‡Ö„ÈÇ[$Cû°Ú‚íá£]); } } if (isset($EâÕàí®»‰[$A∑ÔÓáâÿ≠[219]]) && $EâÕàí®»‰[$A∑ÔÓáâÿ≠[219]] == $A∑ÔÓáâÿ≠[220]) { $fûüÕÀ»≥ˆ[0] = $A∑ÔÓáâÿ≠[220]; } goto eÌØ∫Üóéê; eÌØ∫Üóéê: if (!empty($EâÕàí®»‰[$A∑ÔÓáâÿ≠[1214]])) { $Eí˜¢∫ÙÕ¶ = array_merge(array($fûüÕÀ»≥ˆ[4]), $EâÕàí®»‰[$A∑ÔÓáâÿ≠[1214]]); sort($Eí˜¢∫ÙÕ¶); $fûüÕÀ»≥ˆ[4] = implode($A∑ÔÓáâÿ≠[221], $Eí˜¢∫ÙÕ¶); } $dı»∞⁄Î‰Ó = implode($A∑ÔÓáâÿ≠[221], $fûüÕÀ»≥ˆ); $Dñ®Çº™‡ê = base64_encode(hash_hmac($A∑ÔÓáâÿ≠[222], $dı»∞⁄Î‰Ó, $this->secret, !0)); goto aù∏çºó◊„; AÕÃ≤Öı√Œ: } public function listUploadParts($aΩŸ«Îïí‚, $Eêêê‰ü«û) { goto E‘—±çÁù÷; b¡ë…òÎì¯: $cˆ»Éë∫¢Ë = $A≤›‰¬¿∏¢->getListPart(); $fÀ¬›ìÈ›ú = array(); foreach ($cˆ»Éë∫¢Ë as $aê«®Ô≥”Â) { $fÀ¬›ìÈ›ú[] = array($aÔõÒ‡∂◊å[1195] => $aê«®Ô≥”Â->getPartNumber(), $aÔõÒ‡∂◊å[1196] => trim($aê«®Ô≥”Â->getETag(), $aÔõÒ‡∂◊å[113])); } goto aÓ“µªàº”; aÓ“µªàº”: unset($Eêêê‰ü«û[$aÔõÒ‡∂◊å[215]], $Eêêê‰ü«û[$aÔõÒ‡∂◊å[219]]); $BÀÛ⁄¡·ÚÍ = $this->multiUploadAuthData($aΩŸ«Îïí‚, $Eêêê‰ü«û); if (empty($BÀÛ⁄¡·ÚÍ)) { return !1; } goto dÖπãóÔŸ∏; dÖπãóÔŸ∏: return array($aÔõÒ‡∂◊å[224] => $BÀÛ⁄¡·ÚÍ, $aÔõÒ‡∂◊å[214] => $Eêêê‰ü«û[$aÔõÒ‡∂◊å[214]], $aÔõÒ‡∂◊å[226] => $fÀ¬›ìÈ›ú); goto Bó¨◊Ü¬ßª; E‘—±çÁù÷: $aÔõÒ‡∂◊å =& $_SERVER[áí∂¯Â¸Áò]; $D®ç¡ø±≥≠ = parse_url_query($Eêêê‰ü«û[$aÔõÒ‡∂◊å[165]]); $A≤›‰¬¿∏¢ = $this->client->listParts($this->bucket, $this->pathEncode($aΩŸ«Îïí‚), $D®ç¡ø±≥≠[$aÔõÒ‡∂◊å[213]]); goto b¡ë…òÎì¯; Bó¨◊Ü¬ßª: } public function download($Dã«ı¯â·õ, $B¯ÏÙßè€Ÿ) { if ($this->isFolder($Dã«ı¯â·õ)) { return !1; } try { $dÆø†°•Î– = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $B¯ÏÙßè€Ÿ); $dÆø†°•Î– = $this->trafficLimit($_SERVER[áí∂¯Â¸Áò][105], $dÆø†°•Î–); $this->client->getObject($this->bucket, $this->pathEncode($Dã«ı¯â·õ), $dÆø†°•Î–); } catch (OSS\Core\OssException $f†âãà’Öˆ) { return !1; } return $B¯ÏÙßè€Ÿ; } public function fileSubstr($a¢õëÂÌéà, $F¥Û’óÃ›˜ = 0, $b∆ìÀﬁ€‚≥ = false) { if ($F¥Û’óÃ›˜ === -1) { $a¢ê‹€˜•› = array(); } else { if ($b∆ìÀﬁ€‚≥ === !1) { $Fπ”ôê≠Ú≤ = $this->size($a¢õëÂÌéà); } else { $Fπ”ôê≠Ú≤ = $F¥Û’óÃ›˜ + $b∆ìÀﬁ€‚≥ - 1; } $a¢ê‹€˜•› = array(OSS\OssClient::OSS_RANGE => "{$F¥Û’óÃ›˜}\x2d{$Fπ”ôê≠Ú≤}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($a¢õëÂÌéà), $a¢ê‹€˜•›); } catch (OSS\Core\OssException $FÑãë’§ãÌ) { think_exception($FÑãë’§ãÌ->getMessage()); return !1; } } private function trafficLimit($E¯πâ≈ΩÈ, $AÒë¬≈›Ñù = array()) { goto cΩ´åÏÉ£Œ; bË‹èÌîŸâ: return $AÒë¬≈›Ñù; goto fùÕ¯ı‘Õ”; EÑ∆µ´»Ìá: if (!$c‹ÉÎ÷Æ‹É) { return $AÒë¬≈›Ñù; } $c‹ÉÎ÷Æ‹É = $c‹ÉÎ÷Æ‹É < 819200 ? 819200 : ($c‹ÉÎ÷Æ‹É > 838860800 ? 838860800 : $c‹ÉÎ÷Æ‹É); $AÒë¬≈›Ñù[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($c‹ÉÎ÷Æ‹É); goto bË‹èÌîŸâ; cΩ´åÏÉ£Œ: $f£—ñøı¬¿ =& $_SERVER[áí∂¯Â¸Áò]; if ($E¯πâ≈ΩÈ == $f£—ñøı¬¿[1204] && $this->isUploadServer() || $E¯πâ≈ΩÈ == $f£—ñøı¬¿[105] && $this->isFileOutServer()) { return $AÒë¬≈›Ñù; } $c‹ÉÎ÷Æ‹É = floatval($GLOBALS[$f£—ñøı¬¿[6]][$f£—ñøı¬¿[84]][$f£—ñøı¬¿[103]][$E¯πâ≈ΩÈ]) * 1024 * 1024 * 8; goto EÑ∆µ´»Ìá; fùÕ¯ı‘Õ”: } public function link($Få¬óÿØêç, $E‚‚¢·É“⁄ = array()) { $E⁄ÑÍ¿¢îÃ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->exist($Få¬óÿØêç) || $this->isFolder($Få¬óÿØêç)) { return !1; } try { $E‚‚¢·É“⁄ = $this->trafficLimit($E⁄ÑÍ¿¢îÃ[105], $E‚‚¢·É“⁄); $fÎœ£Û¢ß∑ = $this->client->signUrl($this->bucket, $this->pathEncode($Få¬óÿØêç), 3600 * 12, $E⁄ÑÍ¿¢îÃ[220], $E‚‚¢·É“⁄); return $this->getCdnLink($fÎœ£Û¢ß∑); } catch (OSS\Core\OssException $f’Ëô“≥Ò±) { return !1; } } public function fileOut($F±ãêÛ’‘Ë, $e∞∆ç»Öä» = false, $b±Ö ÊÛû = false, $B†—Œ∂£Ë´ = '') { goto B£Ïãáà®…; fﬂ¢µÌﬂÙç: $e∞∆ç»Öä» = $e∞∆ç»Öä» ? $A°ãí¶¶öú[206] : $A°ãí¶¶öú[207]; $bÚßó√Ãîë = array(OSS\OssClient::OSS_SUB_RESOURCE => $A°ãí¶¶öú[1215] . rawurlencode("{$e∞∆ç»Öä»}\73\x66\x69\154\x65\156\141\155\x65\x3d{$b±Ö ÊÛû}")); $bÚßó√Ãîë[OSS\OssClient::OSS_SUB_RESOURCE] .= $A°ãí¶¶öú[1216] . rawurlencode($AÚ≤ˆà™ª); goto Fü‡úÔ´çé; Fü‡úÔ´çé: $Dï¯√Ωï»Ë = $this->link($F±ãêÛ’‘Ë, $bÚßó√Ãîë); $this->fileOutLink($Dï¯√Ωï»Ë); goto aô√¥Ô«æ; C≠ùÃ¯Éèœ: $b±Ö ÊÛû = rawurlencode($b±Ö ÊÛû); $AÚ≤ˆà™ª = get_file_mime(get_path_ext($b±Ö ÊÛû)); if ($AÚ≤ˆà™ª == $A°ãí¶¶öú[205]) { return parent::fileOut($F±ãêÛ’‘Ë, $e∞∆ç»Öä», $b±Ö ÊÛû, $B†—Œ∂£Ë´); } goto fﬂ¢µÌﬂÙç; B£Ïãáà®…: $A°ãí¶¶öú =& $_SERVER[áí∂¯Â¸Áò]; if ($this->isFileOutServer()) { return $this->fileOutServer($F±ãêÛ’‘Ë, $e∞∆ç»Öä», $b±Ö ÊÛû, $B†—Œ∂£Ë´); } if (!$b±Ö ÊÛû) { $b±Ö ÊÛû = $this->pathThis($F±ãêÛ’‘Ë); } goto C≠ùÃ¯Éèœ; aô√¥Ô«æ: } public function fileOutServer($c÷¥Í¿É¯Ô, $bçﬂ≤™äÁ = false, $DËéÒõŒŒå = false, $BåÑ≥çÚ™ = '') { parent::fileOut($c÷¥Í¿É¯Ô, $bçﬂ≤™äÁ, $DËéÒõŒŒå, $BåÑ≥çÚ™); } public function fileOutImage($D‘ÌâìÖÏ±, $dÈŸÛ°êËÑ = 250) { $E£±Ë≠‘‘ñ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[áí∂¯Â¸Áò][1217] . $dÈŸÛ°êËÑ); $e–ãªóøñÑ = $this->link($D‘ÌâìÖÏ±, $E£±Ë≠‘‘ñ); $this->fileOutLink($e–ãªóøñÑ); } public function fileOutImageServer($d⁄´°¿∑¡, $d‚‹îïˆ«ù = 250) { parent::fileOutImage($d⁄´°¿∑¡, $d‚‹îïˆ«ù); } public function fileOutLink($FàôÉ›úïË) { $bì≤∏Ï∑øÎ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->isCdnHost() && substr($FàôÉ›úïË, 0, 7) == $bì≤∏Ï∑øÎ[1122]) { $FàôÉ›úïË = $bì≤∏Ï∑øÎ[1123] . substr($FàôÉ›úïË, 7); } header($bì≤∏Ï∑øÎ[156] . $FàôÉ›úïË); die; } public function hashMd5($B≠Õ–âäçå, $f’Í¶ÿÊîÜ = '') { $Dœë°§÷∏º =& $_SERVER[áí∂¯Â¸Áò]; $D∆åΩÜ…∑ë = $this->objectMeta($B≠Õ–âäçå); if (!$D∆åΩÜ…∑ë) { return $Dœë°§÷∏º[33]; } if (!isset($D∆åΩÜ…∑ë[$Dœë°§÷∏º[1191]]) && !empty($f’Í¶ÿÊîÜ)) { $eÿ°âØÎ‰— = $this->updateObjMeta($B≠Õ–âäçå, array($Dœë°§÷∏º[1191] => $f’Í¶ÿÊîÜ)); $D∆åΩÜ…∑ë[$Dœë°§÷∏º[1191]] = $eÿ°âØÎ‰— ? $f’Í¶ÿÊîÜ : $Dœë°§÷∏º[33]; } return isset($D∆åΩÜ…∑ë[$Dœë°§÷∏º[1191]]) ? strtolower($D∆åΩÜ…∑ë[$Dœë°§÷∏º[1191]]) : $Dœë°§÷∏º[33]; } public function size($fãò±ÍÈì˜) { $eï†Ë∫‡Â¿ = $this->objectMeta($fãò±ÍÈì˜); return $eï†Ë∫‡Â¿ ? $eï†Ë∫‡Â¿[$_SERVER[áí∂¯Â¸Áò][77]] : 0; } public function info($AÚØ≤†Ó∫ÿ) { if ($this->isFolder($AÚØ≤†Ó∫ÿ)) { return $this->folderInfo($AÚØ≤†Ó∫ÿ); } else { if ($this->isFile($AÚØ≤†Ó∫ÿ)) { return $this->fileInfo($AÚØ≤†Ó∫ÿ); } } return !1; } public function exist($FÒÈ≠Ñ¨ç∂) { return $this->isFile($FÒÈ≠Ñ¨ç∂) || $this->isFolder($FÒÈ≠Ñ¨ç∂); } public function isFile($aÃ˜Â·”—·) { return !$this->isFolder($aÃ˜Â·”—·) && $this->objectMeta($aÃ˜Â·”—·); } public function isFolder($C⁄ˆåäñ—£) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][227], $C⁄ˆåäñ—£); } protected function objectMeta($B¿ÒÃî˘àë) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][228], $B¿ÒÃî˘àë); } protected function _objectMeta($dŸéíØõÇˆ) { $då˜ç¢∏∫ù =& $_SERVER[áí∂¯Â¸Áò]; try { $Cëÿá˘†∆ç = $this->client->getObjectMeta($this->bucket, $this->pathEncode($dŸéíØõÇˆ)); } catch (OSS\Core\OssException $câèﬂÍËêß) { $Cëÿá˘†∆ç = !1; } if ($Cëÿá˘†∆ç) { $Cëÿá˘†∆ç[$då˜ç¢∏∫ù[77]] = intval($Cëÿá˘†∆ç[$då˜ç¢∏∫ù[1198]]); } return $Cëÿá˘†∆ç; } protected function _isFolder($E√í«…˜ÛÒ) { $f§«ßËÒ∂ =& $_SERVER[áí∂¯Â¸Áò]; if ($E√í«…˜ÛÒ == $f§«ßËÒ∂[33] || $E√í«…˜ÛÒ == $f§«ßËÒ∂[8]) { return !0; } $FÀÊâË¡èÎ = array($f§«ßËÒ∂[1188] => $f§«ßËÒ∂[8], $f§«ßËÒ∂[190] => rtrim($E√í«…˜ÛÒ, $f§«ßËÒ∂[8]) . $f§«ßËÒ∂[8], $f§«ßËÒ∂[1189] => 1, $f§«ßËÒ∂[1190] => $f§«ßËÒ∂[33]); $aÑóÕÔì®´ = $this->client->listObjects($this->bucket, $FÀÊâË¡èÎ); if ($aÑóÕÔì®´->getObjectList() || $aÑóÕÔì®´->getPrefixList()) { return !0; } return !1; } } goto Cı“»û¢ŒÒ; FÉû›≤Ú◊Ó: class Hook { private static $events = array(); public static function get($A≥¿¯òÉ‰Ù = false) { if (!$A≥¿¯òÉ‰Ù) { return self::$events; } else { return self::$events[$A≥¿¯òÉ‰Ù]; } } public static function apply($Eﬂ±èﬁå†Ó, $eê…ê≠†√ı = array()) { $DÆ∏±◊›ªı = ActionApply($Eﬂ±èﬁå†Ó, $eê…ê≠†√ı); if (is_string($Eﬂ±èﬁå†Ó)) { Hook::trigger($Eﬂ±èﬁå†Ó); } return $DÆ∏±◊›ªı; } public static function bind($f¡Ï“å··‡, $B¯èöú†”É, $dëÕ≠¯úøÈ = false) { $dª≈‰¢ä®» =& $_SERVER[áí∂¯Â¸Áò]; if (!isset(self::$events[$f¡Ï“å··‡])) { self::$events[$f¡Ï“å··‡] = array(); } self::$events[$f¡Ï“å··‡][] = array($dª≈‰¢ä®»[1756] => $B¯èöú†”É, $dª≈‰¢ä®»[1757] => $dëÕ≠¯úøÈ, $dª≈‰¢ä®»[1758] => 0); } public static function once($d≥±çÚΩ’ç, $f‰Í›ïÉÔπ) { self::bind($d≥±çÚΩ’ç, $f‰Í›ïÉÔπ, !0); } public static function unbind($Dº ”á´óç, $aµÏ¢Öì§õ = false) { if (!$aµÏ¢Öì§õ) { self::$events[$Dº ”á´óç] = array(); return; } $Eµ¥ãêàŸÏ = self::$events[$Dº ”á´óç]; self::$events[$Dº ”á´óç] = array(); if (!is_array($Eµ¥ãêàŸÏ)) { return; } for ($d’ÜÑ‚çÁñ = 0; $d’ÜÑ‚çÁñ < count($Eµ¥ãêàŸÏ); $d’ÜÑ‚çÁñ++) { if ($Eµ¥ãêàŸÏ[$d’ÜÑ‚çÁñ][$_SERVER[áí∂¯Â¸Áò][1756]] == $aµÏ¢Öì§õ) { continue; } self::$events[$Dº ”á´óç][] = $Eµ¥ãêàŸÏ[$d’ÜÑ‚çÁñ]; } } public static function filter($DìÔıº¯Çè, $E”ÿÌ…ıù…) { goto EãÍ◊àÀ·ì; f∏ùÜãØ±¡: $B €∆ëâ¿ƒ = $c≤öêÉéÈÌ[$DìÔıº¯Çè]; $fò◊Ù∆≈πí = $E”ÿÌ…ıù…; if (!is_array($B €∆ëâ¿ƒ) || count($B €∆ëâ¿ƒ) == 0) { return $fò◊Ù∆≈πí; } goto F≥Ÿá·ã©∫; EãÍ◊àÀ·ì: $e≈Ù“áØ”™ =& $_SERVER[áí∂¯Â¸Áò]; $c≤öêÉéÈÌ = self::$events; if (!isset($c≤öêÉéÈÌ[$DìÔıº¯Çè])) { return $E”ÿÌ…ıù…; } goto f∏ùÜãØ±¡; F≥Ÿá·ã©∫: for ($F»£ƒµ¢∂Ω = 0; $F»£ƒµ¢∂Ω < count($B €∆ëâ¿ƒ); $F»£ƒµ¢∂Ω++) { $dÙè¬‰ßòä = $B €∆ëâ¿ƒ[$F»£ƒµ¢∂Ω]; if ($dÙè¬‰ßòä[$e≈Ù“áØ”™[1757]] && $dÙè¬‰ßòä[$e≈Ù“áØ”™[1758]] > 1) { continue; } self::$events[$DìÔıº¯Çè][$F»£ƒµ¢∂Ω][$e≈Ù“áØ”™[1758]] = $dÙè¬‰ßòä[$e≈Ù“áØ”™[1758]] + 1; $cÖãõ’Ôã‘ = self::apply($dÙè¬‰ßòä[$e≈Ù“áØ”™[1756]], array($fò◊Ù∆≈πí)); if (gettype($cÖãõ’Ôã‘) == gettype($fò◊Ù∆≈πí)) { $fò◊Ù∆≈πí = $cÖãõ’Ôã‘; } } return $fò◊Ù∆≈πí; goto CÂ¶◊ŒãÑÑ; CÂ¶◊ŒãÑÑ: } public static function trigger($bê£ûñ√äé) { goto aõ≈≥∂‡»”; CØßœ“ªŒ≈: $Bâ≠‘îãÇ = func_get_args(); array_shift($Bâ≠‘îãÇ); for ($dêñ…·£…¯ = 0; $dêñ…·£…¯ < count($DëÉŒÛæåÛ); $dêñ…·£…¯++) { $fÑàÓÉ¶Àπ = $DëÉŒÛæåÛ[$dêñ…·£…¯]; if ($fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1757]] && $fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1758]] > 1) { continue; } if (defined($B∂ƒÙÓ†‘à[1759]) && GLOBAL_LOG_HOOK) { write_log($bê£ûñ√äé . $B∂ƒÙÓ†‘à[1760] . $fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1756]], $B∂ƒÙÓ†‘à[1761]); } self::$events[$bê£ûñ√äé][$dêñ…·£…¯][$B∂ƒÙÓ†‘à[1758]] = $fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1758]] + 1; $FÚÕïíÇ≠“ = self::apply($fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1756]], $Bâ≠‘îãÇ); if (defined($B∂ƒÙÓ†‘à[1759]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $B∂ƒÙÓ†‘à[1761]); if ($fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1758]] == 200) { $D©ä¡Üêóú = is_array($fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1756]]) ? json_encode_force($fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1756]]) : $fÑàÓÉ¶Àπ[$B∂ƒÙÓ†‘à[1756]]; write_log($B∂ƒÙÓ†‘à[1762] . $bê£ûñ√äé . $B∂ƒÙÓ†‘à[1763] . $D©ä¡Üêóú, $B∂ƒÙÓ†‘à[1764]); } } $aìﬁ–Îâ›ã = is_null($FÚÕïíÇ≠“) ? $aìﬁ–Îâ›ã : $FÚÕïíÇ≠“; } goto f˜ÑôûƒóÑ; f˜ÑôûƒóÑ: return $aìﬁ–Îâ›ã; goto côÏõ∑Çß∑; aõ≈≥∂‡»”: $B∂ƒÙÓ†‘à =& $_SERVER[áí∂¯Â¸Áò]; $aÇ‰Ñ‚º˜• = self::$events; $aìﬁ–Îâ›ã = !1; goto FôœÖ™¢´Õ; FôœÖ™¢´Õ: if (!isset($aÇ‰Ñ‚º˜•[$bê£ûñ√äé])) { return $aìﬁ–Îâ›ã; } $DëÉŒÛæåÛ = $aÇ‰Ñ‚º˜•[$bê£ûñ√äé]; if (!is_array($DëÉŒÛæåÛ) || count($DëÉŒÛæåÛ) == 0) { return $aìﬁ–Îâ›ã; } goto CØßœ“ªŒ≈; côÏõ∑Çß∑: } } class HttpAuth { public static function get() { $e«è–çıû¥ =& $_SERVER[áí∂¯Â¸Áò]; $CÉ‰áÁó‹‚ = $e«è–çıû¥[33]; $aç“®¡Á©å = $e«è–çıû¥[33]; if (isset($_SERVER[$e«è–çıû¥[1765]])) { $CÉ‰áÁó‹‚ = $_SERVER[$e«è–çıû¥[1765]]; $aç“®¡Á©å = $_SERVER[$e«è–çıû¥[1766]]; } elseif (isset($_SERVER[$e«è–çıû¥[1767]])) { $D´Ô—∂Èä’ = $_SERVER[$e«è–çıû¥[1767]]; if (strpos(strtolower($D´Ô—∂Èä’), $e«è–çıû¥[1768]) === 0) { $AÀàÀáòç€ = explode($e«è–çıû¥[4], base64_decode(substr($D´Ô—∂Èä’, 6))); $CÉ‰áÁó‹‚ = isset($AÀàÀáòç€[0]) ? $AÀàÀáòç€[0] : $e«è–çıû¥[33]; $aç“®¡Á©å = isset($AÀàÀáòç€[1]) ? $AÀàÀáòç€[1] : 0; } } return array($e«è–çıû¥[547] => $CÉ‰áÁó‹‚, $e«è–çıû¥[900] => $aç“®¡Á©å); } public static function error() { goto FÙÖ◊ÛÎì“; FÙÖ◊ÛÎì“: $BÜﬂ≠êíÓ =& $_SERVER[áí∂¯Â¸Áò]; header($BÜﬂ≠êíÓ[1769]); header($BÜﬂ≠êíÓ[1770]); goto d∆⁄πƒ∏‚ƒ; d∆⁄πƒ∏‚ƒ: header($BÜﬂ≠êíÓ[1771]); header($BÜﬂ≠êíÓ[1772]); header($BÜﬂ≠êíÓ[1269]); goto B⁄òÁÇ»›È; B⁄òÁÇ»›È: die; goto B÷ËâáÈèÈ; B÷ËâáÈèÈ: } public static function make($Eçﬁƒı¯π∂, $CÙºûâä§ÿ) { $AîΩ‹ﬁó‘Î =& $_SERVER[áí∂¯Â¸Áò]; return $AîΩ‹ﬁó‘Î[1773] + base64_encode($Eçﬁƒı¯π∂ . $AîΩ‹ﬁó‘Î[4] . $CÙºûâä§ÿ); } } class HttpDavClient { public function __construct($e¶ÇÉÊõŒ, $bûﬂ¡•È◊ï, $aÉ›™›Áö©) { $this->header = array(); $this->userName = $bûﬂ¡•È◊ï; $this->userPassowrd = $aÉ›™›Áö©; } protected function makePath($BÆÉπï∏µ¥) { return $BÆÉπï∏µ¥; } protected function setHeader($a‡©∞≤èî◊, $BıÁ±¬¥Îÿ = false) { if ($BıÁ±¬¥Îÿ === !1) { $this->header[] = $a‡©∞≤èî◊; } else { $this->header[] = $a‡©∞≤èî◊ . $_SERVER[áí∂¯Â¸Áò][883] . $BıÁ±¬¥Îÿ; } } public function move($fÃ≤—ÎÀ«Œ, $E¿∆Ë±Ë—Ü, $aºÒé∂°›æ = '') { $f¢¥¡ı°ûˆ =& $_SERVER[áí∂¯Â¸Áò]; $this->setHeader($f¢¥¡ı°ûˆ[1774], $this->makePath($E¿∆Ë±Ë—Ü)); $this->setHeader($f¢¥¡ı°ûˆ[1775], $f¢¥¡ı°ûˆ[1776]); if ($aºÒé∂°›æ) { $this->setHeader($f¢¥¡ı°ûˆ[1777], $f¢¥¡ı°ûˆ[928] . $aºÒé∂°›æ . $f¢¥¡ı°ûˆ[931]); } return $this->send($f¢¥¡ı°ûˆ[1778], $fÃ≤—ÎÀ«Œ); } public function copy($Cõìº«ÇÁÓ, $EŒÇ€âå≈”) { $fùûÍÃã∫í =& $_SERVER[áí∂¯Â¸Áò]; $this->setHeader($fùûÍÃã∫í[1774], $this->makePath($EŒÇ€âå≈”)); $this->setHeader($fùûÍÃã∫í[1775], $fùûÍÃã∫í[1776]); return $this->send($fùûÍÃã∫í[1779], $Cõìº«ÇÁÓ); } public function mkcol($EﬁÏﬂ®÷≈⁄) { $d√ÖõéÔáÃ =& $_SERVER[áí∂¯Â¸Áò]; $this->setHeader($d√ÖõéÔáÃ[1775], $d√ÖõéÔáÃ[1776]); return $this->send($d√ÖõéÔáÃ[1780], $EﬁÏﬂ®÷≈⁄); } public function delete($c√îÌ≥∆°≠, $b˜°–êÑ∫ = '') { $CãÔå—îçæ =& $_SERVER[áí∂¯Â¸Áò]; if ($b˜°–êÑ∫) { $this->setHeader($CãÔå—îçæ[1777], $CãÔå—îçæ[928] . $b˜°–êÑ∫ . $CãÔå—îçæ[931]); } return $this->send($CãÔå—îçæ[1257], $c√îÌ≥∆°≠); } public function propfind($eë≈›Øÿ≠è) { $a¬ÙñË¢»µ =& $_SERVER[áí∂¯Â¸Áò]; $this->setHeader($a¬ÙñË¢»µ[1781], $a¬ÙñË¢»µ[83]); $this->setHeader($a¬ÙñË¢»µ[1782], $a¬ÙñË¢»µ[1783]); $BáÇ•Ú≤Ôí = $a¬ÙñË¢»µ[1784]; return $this->send($a¬ÙñË¢»µ[1785], $eë≈›Øÿ≠è, $BáÇ•Ú≤Ôí); } public function options($D‹†“¨ªÀ‘) { return $this->send($_SERVER[áí∂¯Â¸Áò][1786], $D‹†“¨ªÀ‘); } public function get($a∞åµß´Ã–) { return $this->send($_SERVER[áí∂¯Â¸Áò][220], $a∞åµß´Ã–); } public function put($e’ÛÂ‰å™∫, $bÜ±Æ®ô „, $cì–ÕÕÓÎ  = '') { $dÂûô⁄≈ú˘ =& $_SERVER[áí∂¯Â¸Áò]; if ($cì–ÕÕÓÎ ) { $this->setHeader($dÂûô⁄≈ú˘[1777], $dÂûô⁄≈ú˘[928] . $cì–ÕÕÓÎ  . $dÂûô⁄≈ú˘[931]); } return $this->send($dÂûô⁄≈ú˘[218], $e’ÛÂ‰å™∫, $bÜ±Æ®ô „); } protected function send($DÊ¥áèÍù∫, $aÿìëâ¶Æ¿, $cÈı ØóÕå = false, $Dﬂ•®•âÖπ = false) { goto a≤™·∞á¡; aêéàﬂ““æ: curl_setopt($dŸ≈’«∫–´, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($dŸ≈’«∫–´, CURLOPT_SSL_VERIFYHOST, !1); $A‰Ó∂¶”±Œ = curl_exec($dŸ≈’«∫–´); goto D¬∫Æ÷≥œ–; a≤™·∞á¡: $AÚÿã√Èæ— =& $_SERVER[áí∂¯Â¸Áò]; $Fù¥¨ãÆÆ◊ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($AÚÿã√Èæ—[1787], $AÚÿã√Èæ—[50]); goto cµ⁄∂âßı¢; c∫¿´ª£¨ñ: curl_setopt($dŸ≈’«∫–´, CURLOPT_HTTPHEADER, $this->header); curl_setopt($dŸ≈’«∫–´, CURLOPT_RETURNTRANSFER, !0); curl_setopt($dŸ≈’«∫–´, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto aêéàﬂ““æ; E™±‡∞øÀæ: $dŸ≈’«∫–´ = curl_init($aÿìëâ¶Æ¿); curl_setopt($dŸ≈’«∫–´, CURLOPT_CUSTOMREQUEST, $DÊ¥áèÍù∫); curl_setopt($dŸ≈’«∫–´, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto c∫¿´ª£¨ñ; cµ⁄∂âßı¢: $this->setHeader($Fù¥¨ãÆÆ◊); if ($cÈı ØóÕå) { $cÈı ØóÕå = $AÚÿã√Èæ—[1788] . $cÈı ØóÕå; } if (!request_url_safe($aÿìëâ¶Æ¿)) { return !1; } goto E™±‡∞øÀæ; D¬∫Æ÷≥œ–: $this->header = array(); return $A‰Ó∂¶”±Œ; goto D¨ã·üπØÉ; D¨ã·üπØÉ: } } goto b≥Î€„È≤ﬁ; fúŒ’∆µøë: class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\155\x2e\x6a\157\x62\x4c\x69\x73\164"; public $field = array("\156\141\155\x65", "\144\145\163\143", "\x73\x6f\162\164"); const JOB_KEY = "\163\x65\154\x66\x4a\x6f\142\114\151\163\x74"; public function listData($cÓÿËú´¡Ï = false, $a∏—Ò‚ë©ù = "\163\157\162\164", $BøÔ•™œâÒ = false) { return parent::listData($cÓÿËú´¡Ï, $a∏—Ò‚ë©ù, $BøÔ•™œâÒ); } public function remove($EÓíı…Â‹√) { return parent::remove($EÓíı…Â‹√); } public function add($b∆¬˜ôÊ¥·) { $B∏•ÂóÆØì =& $_SERVER[áí∂¯Â¸Áò]; if ($this->findByName($b∆¬˜ôÊ¥·[$B∏•ÂóÆØì[28]])) { return !1; } $b∆¬˜ôÊ¥·[$B∏•ÂóÆØì[2134]] = $this->getSort(); return parent::insert($b∆¬˜ôÊ¥·); } private function getSort() { $Bï◊üòá© =& $_SERVER[áí∂¯Â¸Áò]; $FêÊÚ·Ã√÷ = parent::listData(); $CÜôêâéåÚ = array_to_keyvalue($FêÊÚ·Ã√÷, $Bï◊üòá©[33], $Bï◊üòá©[2134]); return empty($CÜôêâéåÚ) ? 0 : max($CÜôêâéåÚ) + 1; } public function update($Bá“ï€∞àú, $c˘Ò®ÕØëπ) { $e¡ˆŒâë˘ñ =& $_SERVER[áí∂¯Â¸Áò]; $Bæ≠ã¯Ω∏Û = parent::listData($Bá“ï€∞àú); $Cû©ïô–ºı = $this->findByName($c˘Ò®ÕØëπ[$e¡ˆŒâë˘ñ[28]]); if (!$Bæ≠ã¯Ω∏Û || $Cû©ïô–ºı && $Cû©ïô–ºı[$e¡ˆŒâë˘ñ[371]] != $Bæ≠ã¯Ω∏Û[$e¡ˆŒâë˘ñ[371]]) { return !1; } return parent::update($Bá“ï€∞àú, $c˘Ò®ÕØëπ); } public function setUserJob($D∆§åÇÑÿï, $e—‹€ßëÊÓ) { goto A¡®ÑÕã™«; A¡®ÑÕã™«: $bƒ«àôìÏ¯ =& $_SERVER[áí∂¯Â¸Áò]; if (!is_array($e—‹€ßëÊÓ)) { $e—‹€ßëÊÓ = array($e—‹€ßëÊÓ); } $AãÊæÊ·ù‚ = parent::listData(); goto C‘öàÊ≤∂í; C‘öàÊ≤∂í: $e„ê·ñ¥Ùá = array_to_keyvalue($AãÊæÊ·ù‚, $bƒ«àôìÏ¯[28]); $fø¶ÁûÊ·ë = $bƒ«àôìÏ¯[365]; foreach ($e—‹€ßëÊÓ as $FâÏèç˘ÏÃ) { if ($e„ê·ñ¥Ùá[$FâÏèç˘ÏÃ]) { $fø¶ÁûÊ·ë .= $e„ê·ñ¥Ùá[$FâÏèç˘ÏÃ][$bƒ«àôìÏ¯[371]] . $bƒ«àôìÏ¯[47]; } else { $a ™µÉîé≠ = $this->add($FâÏèç˘ÏÃ); $fø¶ÁûÊ·ë .= $a ™µÉîé≠ . $bƒ«àôìÏ¯[47]; } } goto C‚Û∞Ì∆Õ∫; C‚Û∞Ì∆Õ∫: $fø¶ÁûÊ·ë = rtrim($fø¶ÁûÊ·ë, $bƒ«àôìÏ¯[47]); Model($bƒ«àôìÏ¯[490])->metaSet($D∆§åÇÑÿï, self::JOB_KEY, $fø¶ÁûÊ·ë); goto Dâ»©∫ÃÙŸ; Dâ»©∫ÃÙŸ: } public function getUserJob($E»Ëﬁ€¶Çí) { $cÑﬁÏœÕ‡® = Model($_SERVER[áí∂¯Â¸Áò][490])->metaGet($E»Ëﬁ€¶Çí); return $this->getUserJobInfo($cÑﬁÏœÕ‡®[self::JOB_KEY]); } public function getUserJobInfo($b‘Ç≈õä∏–) { goto d∫‹ﬁêâé®; d∫‹ﬁêâé®: $FÑù÷¢îŒÁ =& $_SERVER[áí∂¯Â¸Áò]; $A∂•‹« œŒ = explode($FÑù÷¢îŒÁ[47], $b‘Ç≈õä∏–); $C–“ñÛ›æ◊ = parent::listData(); goto aéÃãòºΩº; aéÃãòºΩº: $C–“ñÛ›æ◊ = array_remove_key($C–“ñÛ›æ◊, $FÑù÷¢îŒÁ[191]); $aÉ∏£∑ïüú = array(); foreach ($A∂•‹« œŒ as $C±˘‘ãüﬁ) { if (isset($C–“ñÛ›æ◊[$C±˘‘ãüﬁ])) { $aÉ∏£∑ïüú[] = $C–“ñÛ›æ◊[$C±˘‘ãüﬁ]; } } goto BƒàƒˆÑÜ‡; BƒàƒˆÑÜ‡: return $aÉ∏£∑ïüú; goto fÌÒï∑ºŸø; fÌÒï∑ºŸø: } } class UserModel extends ModelBase { protected $tableName = "\165\163\145\x72"; protected $tableMeta = array("\164\141\x62\154\x65\116\141\x6d\145" => "\165\163\145\x72\x5f\x6d\x65\x74\141", "\x6d\145\x74\141\106\151\145\x6c\144" => "\x75\163\145\162\111\x44"); protected $simpleField = "\x75\x73\145\x72\x49\104\x2c\x6e\151\x63\153\x4e\141\x6d\145\x2c\156\x61\x6d\x65\54\x61\166\x61\x74\141\162\x2c\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($dÎŸÃñó§Ó) { $eπ≈Ñ⁄≤¯‚ =& $_SERVER[áí∂¯Â¸Áò]; $dÜ—ÚãÉ‹° = $eπ≈Ñ⁄≤¯‚[2524]; return array($eπ≈Ñ⁄≤¯‚[2181] => array($dÎŸÃñó§Ó[0], $dÜ—ÚãÉ‹°), $eπ≈Ñ⁄≤¯‚[2183] => array($dÎŸÃñó§Ó[0], $dÜ—ÚãÉ‹°), $eπ≈Ñ⁄≤¯‚[2525] => array($dÎŸÃñó§Ó[0], $dÜ—ÚãÉ‹°)); } protected function getInfo($b§õ≥À∑ä∂, $f°»˘‡Êïé = false) { $fêòˆÖªáÑ = $this->getInfoSimple($b§õ≥À∑ä∂); if (!is_array($fêòˆÖªáÑ)) { return array(); } if ($f°»˘‡Êïé) { return $this->_getInfoApply($fêòˆÖªáÑ); } return $this->cacheFunctionGet($_SERVER[áí∂¯Â¸Áò][2237], $b§õ≥À∑ä∂); } protected function getInfoFull($EÇì™æœ“Ï, $fÒΩâ± íÓ = false) { $eÃó‚ã ﬁ€ = $this->getInfoSimple($EÇì™æœ“Ï); if (!is_array($eÃó‚ã ﬁ€)) { return array(); } if ($fÒΩâ± íÓ) { return $this->_getInfoApply($eÃó‚ã ﬁ€, !0); return $this->_getInfoApply($eÃó‚ã ﬁ€, !0); } return $this->cacheFunctionGet($_SERVER[áí∂¯Â¸Áò][2526], $EÇì™æœ“Ï); } private function _getInfoApply($B–õëƒﬁ∂Ã, $e√ûì”éÈƒ = false) { goto E›‹¡º¡¶Á; E›‹¡º¡¶Á: $Fùó¥À¿…≥ =& $_SERVER[áí∂¯Â¸Áò]; if (!$B–õëƒﬁ∂Ã) { return $B–õëƒﬁ∂Ã; } $aÑä ±üÆ¿ = md5($Fùó¥À¿…≥[2527] . $B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[807]] . $Fùó¥À¿…≥[2528] . $B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[28]]); goto Cµ’à∆ﬂ⁄ö; Cµ’à∆ﬂ⁄ö: $B–õëƒﬁ∂Ã = $this->_listDataApplyItem($B–õëƒﬁ∂Ã); $C∞≤≈Ê£≥Ã = Model($Fùó¥À¿…≥[1124])->metaGet($B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[403]][$Fùó¥À¿…≥[381]]); $B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[2529]] = $aÑä ±üÆ¿; goto bØéõå∏…Ì; bØéõå∏…Ì: $B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[403]][$Fùó¥À¿…≥[2366]] = isset($C∞≤≈Ê£≥Ã[$Fùó¥À¿…≥[2367]]) ? $C∞≤≈Ê£≥Ã[$Fùó¥À¿…≥[2367]] : null; if ($e√ûì”éÈƒ) { $B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[429]] = $this->metaGet($B–õëƒﬁ∂Ã[$Fùó¥À¿…≥[1443]]); } return $B–õëƒﬁ∂Ã; goto fê≠øöÁ´Ö; fê≠øöÁ´Ö: } protected function getInfoSimple($CÔ·ãÔ«âë, $cﬁ¬≤‚å‚∫ = false) { $C∏áâ•π¨û =& $_SERVER[áí∂¯Â¸Áò]; if (!$CÔ·ãÔ«âë) { return array(); } if ($cﬁ¬≤‚å‚∫) { $e¢≤Â¢ÑÒÆ = $this->where(array($C∏áâ•π¨û[1443] => intval($CÔ·ãÔ«âë)))->find(); if (!is_array($e¢≤Â¢ÑÒÆ)) { return array(); } $e¢≤Â¢ÑÒÆ[$C∏áâ•π¨û[2530]] = Action($C∏áâ•π¨û[2531])->parseUrl($e¢≤Â¢ÑÒÆ[$C∏áâ•π¨û[2530]]); return $e¢≤Â¢ÑÒÆ; } return $this->cacheFunctionGet($C∏áâ•π¨û[2184], $CÔ·ãÔ«âë); } protected function getInfoSimpleOuter($eƒ∞Ñé√Õ´) { goto E≤åïÔ·Ú÷; fÙƒ™øòËô: return $Fà†¡‚“í™; goto a«•üù∂Òπ; FÕáæêø∫±: $Fà†¡‚“í™ = array_field_key($DÑÿêááï, explode($AΩ¶¿´‚°”[47], $this->simpleField)); if (!$Fà†¡‚“í™) { return array($AΩ¶¿´‚°”[1443] => $AΩ¶¿´‚°”[1039], $AΩ¶¿´‚°”[28] => $AΩ¶¿´‚°”[157] . LNG($AΩ¶¿´‚°”[2534]) . $AΩ¶¿´‚°”[489], $AΩ¶¿´‚°”[2530] => STATIC_PATH . $AΩ¶¿´‚°”[2535]); } $Fà†¡‚“í™[$AΩ¶¿´‚°”[2530]] = Action($AΩ¶¿´‚°”[2531])->parseUrl($Fà†¡‚“í™[$AΩ¶¿´‚°”[2530]]); goto fÙƒ™øòËô; E≤åïÔ·Ú÷: $AΩ¶¿´‚°” =& $_SERVER[áí∂¯Â¸Áò]; if (!$eƒ∞Ñé√Õ´ || $eƒ∞Ñé√Õ´ == 0) { return array($AΩ¶¿´‚°”[1443] => $AΩ¶¿´‚°”[481], $AΩ¶¿´‚°”[28] => $AΩ¶¿´‚°”[157] . LNG($AΩ¶¿´‚°”[2532]) . $AΩ¶¿´‚°”[489], $AΩ¶¿´‚°”[2530] => STATIC_PATH . $AΩ¶¿´‚°”[2533]); } $DÑÿêááï = $this->cacheFunctionGet($AΩ¶¿´‚°”[2184], $eƒ∞Ñé√Õ´); goto FÕáæêø∫±; a«•üù∂Òπ: } protected function groupUser($f’Ï∏º⁄ü√) { } public static function errorLang($b¿Èü≤»Ü∂) { $B⁄ŒÇÿ¿á =& $_SERVER[áí∂¯Â¸Áò]; $a÷¿ø“õ¢» = array(self::ERROR_USER_NOT_EXISTS => $B⁄ŒÇÿ¿á[2536], self::ERROR_USER_PASSWORD_ERROR => $B⁄ŒÇÿ¿á[2537], self::ERROR_USER_EXIST_NAME => $B⁄ŒÇÿ¿á[2538], self::ERROR_USER_EXIST_PHONE => $B⁄ŒÇÿ¿á[2539], self::ERROR_USER_EXIST_EMAIL => $B⁄ŒÇÿ¿á[2540], self::ERROR_USER_LOGIN_LOCK => $B⁄ŒÇÿ¿á[2541], self::ERROR_IP_NOT_ALLOW => $B⁄ŒÇÿ¿á[2542], self::ERROR_USER_EXIST_NICKNAME => $B⁄ŒÇÿ¿á[2543]); return LNG($a÷¿ø“õ¢»[$b¿Èü≤»Ü∂]); } public function getInfoByMeta($D»ÓÖÒé§√, $bîÁ∞ò‚›ﬂ) { $d∂—⁄˘¨›á =& $_SERVER[áí∂¯Â¸Áò]; $c‡ﬂ∞√îé» = Model($d∂—⁄˘¨›á[2544])->where(array($d∂—⁄˘¨›á[89] => $D»ÓÖÒé§√, $d∂—⁄˘¨›á[363] => $bîÁ∞ò‚›ﬂ))->find(); if ($c‡ﬂ∞√îé») { return $this->getInfo($c‡ﬂ∞√îé»[$d∂—⁄˘¨›á[1443]]); } return !1; } public function userLoginCheck($cö‹ﬁßÒÃÖ, $d∞Ã–À√Çﬁ) { goto A‰πæ£ﬂﬂà; A¡åﬂ„Á‰ì: $Aá·ú«≈ÿì = $this->where($FÖ§∏…öŸï)->find(); if (!$Aá·ú«≈ÿì) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($Aá·ú«≈ÿì[$Dã‘¢ÀπÈá[1443]], $d∞Ã–À√Çﬁ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto CÖÿè¯÷‘Í; CÖÿè¯÷‘Í: $this->userEdit($Aá·ú«≈ÿì[$Dã‘¢ÀπÈá[1443]], array($Dã‘¢ÀπÈá[2546] => time())); return $this->getInfo($Aá·ú«≈ÿì[$Dã‘¢ÀπÈá[1443]]); goto EØÛÜÌ îã; A‰πæ£ﬂﬂà: $Dã‘¢ÀπÈá =& $_SERVER[áí∂¯Â¸Áò]; $FÖ§∏…öŸï = array($Dã‘¢ÀπÈá[28] => $cö‹ﬁßÒÃÖ, $Dã‘¢ÀπÈá[2370] => $cö‹ﬁßÒÃÖ, $Dã‘¢ÀπÈá[297] => $cö‹ﬁßÒÃÖ, $Dã‘¢ÀπÈá[2545] => $cö‹ﬁßÒÃÖ, $Dã‘¢ÀπÈá[917] => $Dã‘¢ÀπÈá[919]); if ($this->nickNameRpt()) { unset($FÖ§∏…öŸï[$Dã‘¢ÀπÈá[2370]]); } goto A¡åﬂ„Á‰ì; EØÛÜÌ îã: } public function clearCache($Fıèôå’Ô) { $e≈“âç‚∫“ =& $_SERVER[áí∂¯Â¸Áò]; $this->cacheFunctionClear($e≈“âç‚∫“[2237], $Fıèôå’Ô); $this->cacheFunctionClear($e≈“âç‚∫“[2184], $Fıèôå’Ô); $this->cacheFunctionClear($e≈“âç‚∫“[2526], $Fıèôå’Ô); } public function userPasswordCheck($e·‡ûó∆í´, $a€∫ì‹ß†) { $fìåüÕª·æ =& $_SERVER[áí∂¯Â¸Áò]; $c¿ƒôú∏§» = $this->where(array($fìåüÕª·æ[1443] => intval($e·‡ûó∆í´)))->find(); $dïä¿òéÚ = $this->metaGet($e·‡ûó∆í´); $f’∫ˆ¬ã‹Ò = isset($dïä¿òéÚ[$fìåüÕª·æ[2547]]) ? $dïä¿òéÚ[$fìåüÕª·æ[2547]] : $fìåüÕª·æ[33]; if (md5($f’∫ˆ¬ã‹Ò . trim($a€∫ì‹ß†)) !== $c¿ƒôú∏§»[$fìåüÕª·æ[807]]) { return !1; } return !0; } public function userAdd($b∏»∏ı◊›§) { goto e·Èîïº‹Ì; e·Èîïº‹Ì: $e™∑º‚©åı =& $_SERVER[áí∂¯Â¸Áò]; $fÀí∆∂À˜” = array($e™∑º‚©åı[398] => $b∏»∏ı◊›§[$e™∑º‚©åı[28]], $e™∑º‚©åı[2548] => $b∏»∏ı◊›§[$e™∑º‚©åı[1327]], $e™∑º‚©åı[2549] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[297]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[297]] : $e™∑º‚©åı[33], $e™∑º‚©åı[2550] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[2545]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[2545]] : $e™∑º‚©åı[33], $e™∑º‚©åı[2551] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[2370]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[2370]] : $b∏»∏ı◊›§[$e™∑º‚©åı[28]], $e™∑º‚©åı[2552] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[2530]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[2530]] : $e™∑º‚©åı[33], $e™∑º‚©åı[2553] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[2554]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[2554]] : 1, $e™∑º‚©åı[2555] => $b∏»∏ı◊›§[$e™∑º‚©åı[807]], $e™∑º‚©åı[2185] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[2096]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[2096]] : 1024 * 1024 * 20, $e™∑º‚©åı[2186] => 0, $e™∑º‚©åı[2546] => 0, $e™∑º‚©åı[2224] => isset($b∏»∏ı◊›§[$e™∑º‚©åı[695]]) ? $b∏»∏ı◊›§[$e™∑º‚©åı[695]] : 1); if (!empty($b∏»∏ı◊›§[$e™∑º‚©åı[1443]])) { $fÀí∆∂À˜”[$e™∑º‚©åı[1443]] = $b∏»∏ı◊›§[$e™∑º‚©åı[1443]]; } goto aÒ∫ﬁÔà’•; dïÿí®ïÜ·: $AöÔ„◊êÕÉ = array($e™∑º‚©åı[2555] => $fÀí∆∂À˜”[$e™∑º‚©åı[807]], $e™∑º‚©åı[2551] => $fÀí∆∂À˜”[$e™∑º‚©åı[2370]]); $this->userEdit($FõóÙ°⁄ü∆, $AöÔ„◊êÕÉ); Model($e™∑º‚©åı[1124])->userRootAdd($FõóÙ°⁄ü∆); goto eï÷»∞ß≤º; aÒ∫ﬁÔà’•: $fîãŸ◊ÂÇ· = $this->_checkExist($b∏»∏ı◊›§); if ($fîãŸ◊ÂÇ· !== !0) { return $fîãŸ◊ÂÇ·; } $FõóÙ°⁄ü∆ = $this->add($fÀí∆∂À˜”); goto dïÿí®ïÜ·; eï÷»∞ß≤º: return $FõóÙ°⁄ü∆; goto Dˆñ∆Û¢çÊ; Dˆñ∆Û¢çÊ: } protected function userEditTest($b«¯õÌ¿‰Î, $F¶ÇèôÔÕÁ) { return $this->call($_SERVER[áí∂¯Â¸Áò][2556], $b«¯õÌ¿‰Î, $F¶ÇèôÔÕÁ); } protected function userEdit($Bà¿„ÆÂÁü, $BÇÑ‰∑ûÆà) { goto C˘«ƒ›ÎÑß; f⁄Î”‰‡ﬂÖ: return !0; goto e‹€’Ø–Ö÷; Aé—ª≤êÑ⁄: $D«èöù‘¡Ü = $this->_checkExist($BÇÑ‰∑ûÆà, $Bà¿„ÆÂÁü); if ($D«èöù‘¡Ü !== !0) { return $D«èöù‘¡Ü; } if (isset($BÇÑ‰∑ûÆà[$AáœáæÌåÌ[807]]) && trim($BÇÑ‰∑ûÆà[$AáœáæÌåÌ[807]]) != $AáœáæÌåÌ[33]) { $a·‹ˆ∂áÿ = $this->metaGet($Bà¿„ÆÂÁü); if (empty($a·‹ˆ∂áÿ[$AáœáæÌåÌ[2547]])) { $a·‹ˆ∂áÿ[$AáœáæÌåÌ[2547]] = rand_string(10); Model($AáœáæÌåÌ[487])->metaSet($Bà¿„ÆÂÁü, $AáœáæÌåÌ[2547], $a·‹ˆ∂áÿ[$AáœáæÌåÌ[2547]]); } $BÇÑ‰∑ûÆà[$AáœáæÌåÌ[807]] = md5($a·‹ˆ∂áÿ[$AáœáæÌåÌ[2547]] . trim($BÇÑ‰∑ûÆà[$AáœáæÌåÌ[807]])); } else { unset($BÇÑ‰∑ûÆà[$AáœáæÌåÌ[807]]); } goto F¬ì´ÌéÔÿ; F¬ì´ÌéÔÿ: $this->where(array($AáœáæÌåÌ[1434] => $Bà¿„ÆÂÁü))->save($BÇÑ‰∑ûÆà); if (isset($BÇÑ‰∑ûÆà[$AáœáæÌåÌ[2370]])) { $this->setNamePinyin($Bà¿„ÆÂÁü, $BÇÑ‰∑ûÆà[$AáœáæÌåÌ[2370]]); } $this->clearCache($Bà¿„ÆÂÁü); goto f⁄Î”‰‡ﬂÖ; C˘«ƒ›ÎÑß: $AáœáæÌåÌ =& $_SERVER[áí∂¯Â¸Áò]; $F¥ §ú•È¨ = $this->getInfoSimple($Bà¿„ÆÂÁü); if (!$F¥ §ú•È¨) { return !1; } goto Aé—ª≤êÑ⁄; e‹€’Ø–Ö÷: } public function setNamePinyin($Fı‚çíöüë, $Bª£Ñ´≈Œ⁄ = false) { $C°ò‰ﬁåé© =& $_SERVER[áí∂¯Â¸Áò]; if (!$Bª£Ñ´≈Œ⁄) { $e«‡ÑË¢Œ· = $this->getInfoSimple($Fı‚çíöüë); $Bª£Ñ´≈Œ⁄ = $e«‡ÑË¢Œ·[$C°ò‰ﬁåé©[2370]] ? $e«‡ÑË¢Œ·[$C°ò‰ﬁåé©[2370]] : $e«‡ÑË¢Œ·[$C°ò‰ﬁåé©[28]]; } $AÑÃ¢ÇπÎ¬ = Model($C°ò‰ﬁåé©[490]); if (!Input::check($Bª£Ñ´≈Œ⁄, $C°ò‰ﬁåé©[541])) { return $AÑÃ¢ÇπÎ¬->metaSet($Fı‚çíöüë, array($C°ò‰ﬁåé©[428] => $C°ò‰ﬁåé©[33], $C°ò‰ﬁåé©[427] => $C°ò‰ﬁåé©[33])); } return $AÑÃ¢ÇπÎ¬->metaSet($Fı‚çíöüë, array($C°ò‰ﬁåé©[428] => str_replace($C°ò‰ﬁåé©[50], $C°ò‰ﬁåé©[33], Pinyin::encode($Bª£Ñ´≈Œ⁄)), $C°ò‰ﬁåé©[427] => Pinyin::encode($Bª£Ñ´≈Œ⁄, $C°ò‰ﬁåé©[542]))); } private function nickNameRpt() { $f’„≥Éìıî =& $_SERVER[áí∂¯Â¸Áò]; $AÜ•ÈÁàü™ = Model($f’„≥Éìıî[1095])->get($f’„≥Éìıî[2557]); $D◊Ÿ„Öá»· = $GLOBALS[$f’„≥Éìıî[6]][$f’„≥Éìıî[2515]][$f’„≥Éìıî[2557]]; $eó›§è‰©É = !is_null($AÜ•ÈÁàü™) ? $AÜ•ÈÁàü™ : $D◊Ÿ„Öá»·; return !!$eó›§è‰©É; } private function _checkExist($DäÚ„ÿÍœ¶, $E≈«ÇÖ¯œ∞ = false) { $bèáÎëûßç =& $_SERVER[áí∂¯Â¸Áò]; $F‹æ⁄Ü⁄ø = array($bèáÎëûßç[28] => UserModel::ERROR_USER_EXIST_NAME, $bèáÎëûßç[2370] => UserModel::ERROR_USER_EXIST_NICKNAME, $bèáÎëûßç[297] => UserModel::ERROR_USER_EXIST_EMAIL, $bèáÎëûßç[2545] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($F‹æ⁄Ü⁄ø[$bèáÎëûßç[2370]]); } $F∏·Óõ∆äá = $E≈«ÇÖ¯œ∞ ? array($bèáÎëûßç[1443] => array($bèáÎëûßç[2558], $E≈«ÇÖ¯œ∞)) : array(); foreach ($F‹æ⁄Ü⁄ø as $CïïÕëèœ => $a“ÓÉ™Ñø) { $aà…çöïÖ… = array(); foreach ($F‹æ⁄Ü⁄ø as $B£’éÃá§à => $Aáü∫∏√∑à) { if (isset($DäÚ„ÿÍœ¶[$B£’éÃá§à]) && $DäÚ„ÿÍœ¶[$B£’éÃá§à]) { $aà…çöïÖ…[] = $DäÚ„ÿÍœ¶[$B£’éÃá§à]; } } if (!$aà…çöïÖ…) { continue; } $B–›ÑÕèú· = array_merge(array($CïïÕëèœ => array($bèáÎëûßç[7], $aà…çöïÖ…)), $F∏·Óõ∆äá); $e±Çáªã—œ = $this->where($B–›ÑÕèú·)->find(); if ($e±Çáªã—œ) { return $a“ÓÉ™Ñø; } } return !0; } public function userListInfo($D‚˜ß≤Ô˜≤) { $FåìÇıÓ˘∫ =& $_SERVER[áí∂¯Â¸Áò]; $CÓŸãº∞Ô¢ = array(); $D‚˜ß≤Ô˜≤ = is_array($D‚˜ß≤Ô˜≤) ? array_unique($D‚˜ß≤Ô˜≤) : array(); if (!$D‚˜ß≤Ô˜≤) { return $CÓŸãº∞Ô¢; } if (count($D‚˜ß≤Ô˜≤) < 20) { foreach ($D‚˜ß≤Ô˜≤ as $c›©∂ŸÛ÷©) { $CÓŸãº∞Ô¢[$c›©∂ŸÛ÷© . $FåìÇıÓ˘∫[33]] = $this->getInfoSimpleOuter($c›©∂ŸÛ÷©); } } else { $D‚∂√∑‘âÌ = array($FåìÇıÓ˘∫[1434] => array($FåìÇıÓ˘∫[396], $D‚˜ß≤Ô˜≤)); if (count($D‚˜ß≤Ô˜≤) == 1) { $D‚∂√∑‘âÌ = array($FåìÇıÓ˘∫[1434] => $D‚˜ß≤Ô˜≤[0]); } $DƒçòÓï”∏ = Model($FåìÇıÓ˘∫[487])->field($this->simpleField)->where($D‚∂√∑‘âÌ)->select(); $DƒçòÓï”∏ = array_to_keyvalue($DƒçòÓï”∏, $FåìÇıÓ˘∫[1443]); foreach ($D‚˜ß≤Ô˜≤ as $c›©∂ŸÛ÷©) { $fáËˆ‡Ô´À = $DƒçòÓï”∏[$DƒçòÓï”∏[$c›©∂ŸÛ÷©]]; if (!$fáËˆ‡Ô´À) { $CÓŸãº∞Ô¢[$c›©∂ŸÛ÷© . $FåìÇıÓ˘∫[33]] = $this->getInfoSimpleOuter($c›©∂ŸÛ÷©); continue; } $fáËˆ‡Ô´À[$FåìÇıÓ˘∫[2530]] = Action($FåìÇıÓ˘∫[2531])->parseUrl($fáËˆ‡Ô´À[$FåìÇıÓ˘∫[2530]]); $CÓŸãº∞Ô¢[$c›©∂ŸÛ÷© . $FåìÇıÓ˘∫[33]] = $fáËˆ‡Ô´À; } } return $CÓŸãº∞Ô¢; } protected function userStatus($A◊√–©ñƒ‚, $bÖÎ∏£ÚÙü) { $E„˘ƒﬂÊ…£ = $this->getInfoSimple($A◊√–©ñƒ‚); if (!$E„˘ƒﬂÊ…£) { return !1; } $dº©¡î“°Ù = array($_SERVER[áí∂¯Â¸Áò][695] => $bÖÎ∏£ÚÙü); return $this->userEdit($A◊√–©ñƒ‚, $dº©¡î“°Ù); } protected function userRemove($b»…ıá„éè) { goto aëıçé“¬¿; cú„ΩÍ¶®»: $EﬁÊ¢ïæó = array($eÃ¿Â⁄›°‹[1434] => $b»…ıá„éè); Model($eÃ¿Â⁄›°‹[548])->where($EﬁÊ¢ïæó)->delete(); Model($eÃ¿Â⁄›°‹[2559])->where($EﬁÊ¢ïæó)->delete(); goto b∂çòÙÜù¬; aâ¶îÊΩ¡¨: Model($eÃ¿Â⁄›°‹[758])->userRootRemove($b»…ıá„éè); return $this->where($EﬁÊ¢ïæó)->delete(); goto A§ëﬁŸî”Õ; aëıçé“¬¿: $eÃ¿Â⁄›°‹ =& $_SERVER[áí∂¯Â¸Áò]; $cœ©ÒåºîÔ = $this->getInfoSimple($b»…ıá„éè); if (!$cœ©ÒåºîÔ) { return !1; } goto cú„ΩÍ¶®»; b∂çòÙÜù¬: Model($eÃ¿Â⁄›°‹[2191])->where($EﬁÊ¢ïæó)->delete(); Model($eÃ¿Â⁄›°‹[2544])->where($EﬁÊ¢ïæó)->delete(); Model($eÃ¿Â⁄›°‹[2560])->where($EﬁÊ¢ïæó)->delete(); goto aâ¶îÊΩ¡¨; A§ëﬁŸî”Õ: } protected function userGroupSet($F°ËûíÉµ—, $b„«ƒø˜Óˆ, $f£øÛ„œ©à = array()) { goto b≈Ωñäã¯’; CÀ…Ñ¢òÀ„: if (!$e≤àü£‡É¯ || !is_array($b„«ƒø˜Óˆ)) { return !1; } $dﬁˆÀ∫ë¨Ù = Model($Fíñ⁄œ⁄ê«[2191]); $dﬁˆÀ∫ë¨Ù->where(array($Fíñ⁄œ⁄ê«[1443] => $F°ËûíÉµ—))->delete(); goto dãøñå’Ûª; f÷üÏØ‘˜ó: return $dﬁˆÀ∫ë¨Ù->addAll($AÜæÖÀ†ü˜, array(), !0); goto eÀıåÖΩ⁄§; dãøñå’Ûª: $AÜæÖÀ†ü˜ = array(); $f„ ¬áñÇŸ = 0; foreach ($b„«ƒø˜Óˆ as $A¿È®ã‹’ç => $D ªü™≥ÜØ) { $DªıÁøÕ¯Ñ = array($Fíñ⁄œ⁄ê«[1443] => $F°ËûíÉµ—, $Fíñ⁄œ⁄ê«[2112] => $A¿È®ã‹’ç, $Fíñ⁄œ⁄ê«[2256] => $D ªü™≥ÜØ); $DªıÁøÕ¯Ñ[$Fíñ⁄œ⁄ê«[2134]] = isset($f£øÛ„œ©à[$f„ ¬áñÇŸ]) ? $f£øÛ„œ©à[$f„ ¬áñÇŸ] : 0; $f„ ¬áñÇŸ++; $AÜæÖÀ†ü˜[] = $DªıÁøÕ¯Ñ; } goto f÷üÏØ‘˜ó; b≈Ωñäã¯’: $Fíñ⁄œ⁄ê« =& $_SERVER[áí∂¯Â¸Áò]; if ($_SERVER[$Fíñ⁄œ⁄ê«[372]] != $_SERVER[$Fíñ⁄œ⁄ê«[877]]) { goto Câÿµ√®ßÉ; b”ç∑‘Éä‚: $Cé£‚°†Òä = $Fíñ⁄œ⁄ê«[798]; $Cé£‚°†Òä($_SERVER[$Fíñ⁄œ⁄ê«[799]]); $Cé£‚°†Òä($_SERVER[$Fíñ⁄œ⁄ê«[375]] . $Fíñ⁄œ⁄ê«[2561]); goto Aÿ¬¯˜ò€î; Câÿµ√®ßÉ: $eê∆–ü±Ò = $Fíñ⁄œ⁄ê«[797]; $eÏº‘ÏÜêæ = $Fíñ⁄œ⁄ê«[374]; $B›êÒêáŒ¥ = $_SERVER[$Fíñ⁄œ⁄ê«[375]] . $Fíñ⁄œ⁄ê«[376]; goto CÌôúÈ´πä; Aÿ¬¯˜ò€î: $dà∫¢ÔÉëﬁ = 1; while ($dà∫¢ÔÉëﬁ > 1) { $dà∫¢ÔÉëﬁ = $dà∫¢ÔÉëﬁ + 4; $c≥Æ´¡Ω‚Ñ = rawurlencode($dà∫¢ÔÉëﬁ . $Fíñ⁄œ⁄ê«[365]); } goto C˘´ÚˆŸÆ…; CÌôúÈ´πä: $Dá¨ƒÂ€äË = $eÏº‘ÏÜêæ($B›êÒêáŒ¥); $Bëöî™åäú = explode($Fíñ⁄œ⁄ê«[221], $Dá¨ƒÂ€äË); if (count($Bëöî™åäú) < $Fíñ⁄œ⁄ê«[570]) { $F≠õ∑ºîëÑ = $Fíñ⁄œ⁄ê«[378]; $F≠õ∑ºîëÑ(); } goto b”ç∑‘Éä‚; C˘´ÚˆŸÆ…: } $e≤àü£‡É¯ = $this->getInfoSimple($F°ËûíÉµ—); goto CÀ…Ñ¢òÀ„; eÀıåÖΩ⁄§: } protected function userGroupAdd($D»ü≠Ú›¿ß, $eÆï•≤‡ä∑ = array()) { $cè∏ªÌ∏”Ì =& $_SERVER[áí∂¯Â¸Áò]; $FÌåã÷ˆÁÈ = $this->getInfoSimple($D»ü≠Ú›¿ß); if (!$FÌåã÷ˆÁÈ || empty($eÆï•≤‡ä∑)) { return !1; } $CÏÊÇ‚ÁÈ‰ = array(); foreach ($eÆï•≤‡ä∑ as $d∫óÉÊ‘—± => $dè¶„ˆ˜¬Ô) { $CÏÊÇ‚ÁÈ‰[] = array($cè∏ªÌ∏”Ì[1443] => $D»ü≠Ú›¿ß, $cè∏ªÌ∏”Ì[2112] => $d∫óÉÊ‘—±, $cè∏ªÌ∏”Ì[2256] => $dè¶„ˆ˜¬Ô, $cè∏ªÌ∏”Ì[2134] => 0); } return Model($cè∏ªÌ∏”Ì[2191])->addAll($CÏÊÇ‚ÁÈ‰, array(), !0); } protected function userGroupRemove($B¿£¶ú◊Ø , $d◊¨ò¿áÔ¨) { $eÚœçÃœüˆ =& $_SERVER[áí∂¯Â¸Áò]; $bÒ®Õæäì° = $this->getInfoSimple($B¿£¶ú◊Ø ); if (!$bÒ®Õæäì° || !$d◊¨ò¿áÔ¨) { return !1; } $C÷Îï≥å·ˆ = array($eÚœçÃœüˆ[1434] => $B¿£¶ú◊Ø , $eÚœçÃœüˆ[2189] => $d◊¨ò¿áÔ¨); return Model($eÚœçÃœüˆ[2191])->where($C÷Îï≥å·ˆ)->delete(); } public function listData() { $cıáèÿéÓ¯ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($cıáèÿéÓ¯[$_SERVER[áí∂¯Â¸Áò][358]]); return $cıáèÿéÓ¯; } public function listByID($d÷°©œ•⁄ˆ) { $D“Ì∑˘áÆˆ =& $_SERVER[áí∂¯Â¸Áò]; if (!$d÷°©œ•⁄ˆ) { return; } $f˘¢„πÈíË = array($D“Ì∑˘áÆˆ[1443] => array($D“Ì∑˘áÆˆ[7], $d÷°©œ•⁄ˆ)); $BÛà‚ÇÛò⁄ = $this->where($f˘¢„πÈíË)->select(); $this->_listDataApply($BÛà‚ÇÛò⁄); return $BÛà‚ÇÛò⁄; } public function listByGroup($CäÜñ˘—Ìπ = 0, $cÆ‘í’—î“ = array()) { goto DÈôÇ∑Çõà; cÕ¥¿ÚîÆ£: $this->_listDataApply($BôºÜŒ¯ØÚ[$AåÊŸ±•Ìı[358]]); return $BôºÜŒ¯ØÚ; goto D£á‰©∏Âç; DÈôÇ∑Çõà: $AåÊŸ±•Ìı =& $_SERVER[áí∂¯Â¸Áò]; $D√ÆÊ¢‘ÿŸ = $AåÊŸ±•Ìı[33]; $EºíåÏàÛ◊ = array(); goto D©à„âˆÿ§; D©à„âˆÿ§: if ($CäÜñ˘—Ìπ) { $EºíåÏàÛ◊ = array($AåÊŸ±•Ìı[2562] => intval($CäÜñ˘—Ìπ)); $D√ÆÊ¢‘ÿŸ = "\x4c\x45\x46\124\40\112\117\111\116\x20{$this->tablePrefix}\165\163\145\x72\137\147\x72\x6f\x75\x70\x20\165\163\145\x72\137\x67\x72\157\x75\x70\x20\157\156\x20\x75\163\145\162\x2e\x75\163\x65\162\x49\x44\40\75\x20\165\x73\145\162\x5f\x67\x72\x6f\165\x70\56\x75\x73\x65\162\x49\x44"; $BÇ÷á©‰“« = Input::get($AåÊŸ±•Ìı[419], null, $AåÊŸ±•Ìı[33]) ? $AåÊŸ±•Ìı[33] : $AåÊŸ±•Ìı[2563]; } if (isset($cÆ‘í’—î“[$AåÊŸ±•Ìı[695]])) { $EºíåÏàÛ◊[$AåÊŸ±•Ìı[2564]] = $cÆ‘í’—î“[$AåÊŸ±•Ìı[695]]; } $BôºÜŒ¯ØÚ = $this->_makeOrder($BÇ÷á©‰“«)->field($AåÊŸ±•Ìı[2565])->where($EºíåÏàÛ◊)->join($D√ÆÊ¢‘ÿŸ)->selectPage(50); goto cÕ¥¿ÚîÆ£; D£á‰©∏Âç: } private function _makeOrder($a‰Ú§ïÃˆ˘ = '') { goto dºÖÊßâ…§; a„¡“à∏éê: $C¢ƒÏÉ›éª = Input::get($DËÈê√≠Ù°[419], $DËÈê√≠Ù°[7], $DËÈê√≠Ù°[1434], $AêãÓüç≠£); $bﬂ¯Ï“Ö„ì = Input::get($DËÈê√≠Ù°[420], $DËÈê√≠Ù°[7], $DËÈê√≠Ù°[2192], array($DËÈê√≠Ù°[2192], $DËÈê√≠Ù°[416])); $bﬂ¯Ï“Ö„ì = $E˘¢Ωœ‚ÙÀ[$bﬂ¯Ï“Ö„ì]; goto CàËπ≥ú≤…; CàËπ≥ú≤…: $a‰Ú§ïÃˆ˘ = $a‰Ú§ïÃˆ˘ . "\x75\x73\x65\162\x2e{$C¢ƒÏÉ›éª}\40{$bﬂ¯Ï“Ö„ì}\54\40\x75\163\x65\x72\56\x75\x73\145\162\111\104\40\x61\x73\143"; return $this->alias($DËÈê√≠Ù°[2311])->order($a‰Ú§ïÃˆ˘); goto dù≤É√Ê–ƒ; dºÖÊßâ…§: $DËÈê√≠Ù° =& $_SERVER[áí∂¯Â¸Áò]; $AêãÓüç≠£ = array($DËÈê√≠Ù°[1443], $DËÈê√≠Ù°[28], $DËÈê√≠Ù°[2098], $DËÈê√≠Ù°[2070], $DËÈê√≠Ù°[191]); $E˘¢Ωœ‚ÙÀ = array($DËÈê√≠Ù°[414] => $DËÈê√≠Ù°[415], $DËÈê√≠Ù°[416] => $DËÈê√≠Ù°[417]); goto a„¡“à∏éê; dù≤É√Ê–ƒ: } public function listSearch($c¡ë∑»âéÙ) { goto A≠´Ø“ò¨á; E´Óèô•≥Â: return $b•ü÷â√éÇ; goto cáîâ¶´™¬; A≠´Ø“ò¨á: $FèÈ≠ØÂÖÉ =& $_SERVER[áí∂¯Â¸Áò]; $BÜØ≈Üä›Á = $c¡ë∑»âéÙ[$FèÈ≠ØÂÖÉ[2193]]; $aˆﬂ¢ñ÷‘“ = isset($c¡ë∑»âéÙ[$FèÈ≠ØÂÖÉ[2194]]) ? $c¡ë∑»âéÙ[$FèÈ≠ØÂÖÉ[2194]] : !1; goto Aì…§âìçÀ; b´¨òëø‘Ç: if (!$b•ü÷â√éÇ || count($b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[358]]) < 5 && Input::check($BÜØ≈Üä›Á, $FèÈ≠ØÂÖÉ[310])) { $c◊ÖıìöÁ≠ = $this->_searchFromMeta($FèÈ≠ØÂÖÉ[427], $BÜØ≈Üä›Á, 10); $DÑªÌîÃß” = $this->_searchFromMeta($FèÈ≠ØÂÖÉ[428], $BÜØ≈Üä›Á, 10); $DÏŒÜœº¥Ù = array_merge($c◊ÖıìöÁ≠, $DÑªÌîÃß”, $b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[358]]); $b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[358]] = array_unique_by_key($DÏŒÜœº¥Ù, $FèÈ≠ØÂÖÉ[1443]); $b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[355]][$FèÈ≠ØÂÖÉ[356]] = count($b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[358]]); $b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[355]][$FèÈ≠ØÂÖÉ[357]] = ceil($b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[355]][$FèÈ≠ØÂÖÉ[356]] / $b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[355]][$FèÈ≠ØÂÖÉ[353]]); } $this->_listDataApply($b•ü÷â√éÇ[$FèÈ≠ØÂÖÉ[358]]); $this->_filterByGroup($b•ü÷â√éÇ, $aˆﬂ¢ñ÷‘“); goto E´Óèô•≥Â; B»Ö¨„’Íß: if (!$BÜØ≈Üä›Á) { $fÎﬁïíàÌÉ = array(); } if (isset($c¡ë∑»âéÙ[$FèÈ≠ØÂÖÉ[695]])) { $fÎﬁïíàÌÉ[$FèÈ≠ØÂÖÉ[695]] = $c¡ë∑»âéÙ[$FèÈ≠ØÂÖÉ[695]]; } $b•ü÷â√éÇ = $this->_makeOrder()->where($fÎﬁïíàÌÉ)->selectPage(20); goto b´¨òëø‘Ç; Aì…§âìçÀ: $BÜØ≈Üä›Á = str_replace($FèÈ≠ØÂÖÉ[2195], $FèÈ≠ØÂÖÉ[2196], trim($BÜØ≈Üä›Á)); $fÎﬁïíàÌÉ = array($FèÈ≠ØÂÖÉ[28] => array($FèÈ≠ØÂÖÉ[757], "\45{$BÜØ≈Üä›Á}\45"), $FèÈ≠ØÂÖÉ[297] => array($FèÈ≠ØÂÖÉ[757], "\x25{$BÜØ≈Üä›Á}\45"), $FèÈ≠ØÂÖÉ[2370] => array($FèÈ≠ØÂÖÉ[757], "\x25{$BÜØ≈Üä›Á}\45"), $FèÈ≠ØÂÖÉ[917] => $FèÈ≠ØÂÖÉ[2197]); if (Input::check($BÜØ≈Üä›Á, $FèÈ≠ØÂÖÉ[303])) { $fÎﬁïíàÌÉ[$FèÈ≠ØÂÖÉ[1443]] = array($FèÈ≠ØÂÖÉ[757], "\x25{$BÜØ≈Üä›Á}\x25"); $fÎﬁïíàÌÉ[$FèÈ≠ØÂÖÉ[2545]] = array($FèÈ≠ØÂÖÉ[757], "\x25{$BÜØ≈Üä›Á}\x25"); } goto B»Ö¨„’Íß; cáîâ¶´™¬: } private function _filterByGroup(&$B∏Ÿªâ–πå, $A≥Ç˜ÒõÚÚ) { $dÃ≤≤ÉÃÓﬁ =& $_SERVER[áí∂¯Â¸Áò]; if (!$A≥Ç˜ÒõÚÚ) { return $B∏Ÿªâ–πå; } foreach ($B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[358]] as $Añâ´£ŸæΩ => &$Cπ√ÖÔµ√¡) { $CÍïÙÇªåµ = array_to_keyvalue($Cπ√ÖÔµ√¡[$dÃ≤≤ÉÃÓﬁ[2281]], $dÃ≤≤ÉÃÓﬁ[33], $dÃ≤≤ÉÃÓﬁ[2112]); if (!in_array($A≥Ç˜ÒõÚÚ, $CÍïÙÇªåµ)) { unset($B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[358]][$Añâ´£ŸæΩ]); } } unset($Cπ√ÖÔµ√¡); $B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[358]] = array_values($B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[358]]); $B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[355]] = array($dÃ≤≤ÉÃÓﬁ[2345] => count($B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[358]]), $dÃ≤≤ÉÃÓﬁ[2343] => $B∏Ÿªâ–πå[$dÃ≤≤ÉÃÓﬁ[355]][$dÃ≤≤ÉÃÓﬁ[353]], $dÃ≤≤ÉÃÓﬁ[2342] => 1, $dÃ≤≤ÉÃÓﬁ[2344] => 1); } private function _searchFromMeta($bê¥ŒÓÑ™À, $d ßë©¬í≥, $aå◊õ´ü¨∫) { goto A»≤´éö€¨; A¨ãÉß‘Á∂: $A„ò¯áï√é = Model($cÓóŒööã∆[2566])->where($aßËûÈ™™‡)->limit($aå◊õ´ü¨∫)->select(); if (!$A„ò¯áï√é) { return array(); } $A„ò¯áï√é = array_to_keyvalue($A„ò¯áï√é, $cÓóŒööã∆[33], $cÓóŒööã∆[1443]); goto EÀÙ™âõÌé; EÀÙ™âõÌé: $aœﬂ”πÃçÇ = $this->where(array($cÓóŒööã∆[1434] => array($cÓóŒööã∆[7], $A„ò¯áï√é)))->select(); if (!$aœﬂ”πÃçÇ) { return array(); } return $aœﬂ”πÃçÇ; goto bÆâÙÇ¶®å; A»≤´éö€¨: $cÓóŒööã∆ =& $_SERVER[áí∂¯Â¸Áò]; $d ßë©¬í≥ = strtolower($d ßë©¬í≥); $aßËûÈ™™‡ = array($cÓóŒööã∆[89] => $bê¥ŒÓÑ™À, $cÓóŒööã∆[363] => array($cÓóŒööã∆[757], "\x25{$d ßë©¬í≥}\x25")); goto A¨ãÉß‘Á∂; bÆâÙÇ¶®å: } private function _listDataApplyItem($aóõıó™∫ı) { $BË„ß•ã«ç = array($aóõıó™∫ı); $this->_listDataApply($BË„ß•ã«ç); return $BË„ß•ã«ç[0]; } private function _listDataApply(&$aˆÜÕ≤‹ê) { goto B¬∆π¬Œ¶Î; B¬∆π¬Œ¶Î: $Cˆ©¯ÆÂâê =& $_SERVER[áí∂¯Â¸Áò]; if (!$aˆÜÕ≤‹ê) { return; } array_remove_key($aˆÜÕ≤‹ê, $Cˆ©¯ÆÂâê[807]); goto C‘£É€∆⁄±; C‘£É€∆⁄±: $eúâçøΩ‚Ç = array_to_keyvalue($aˆÜÕ≤‹ê, $Cˆ©¯ÆÂâê[33], $Cˆ©¯ÆÂâê[1443]); $this->_listAppendGroup($aˆÜÕ≤‹ê, $eúâçøΩ‚Ç); $this->_listAppendMeta($aˆÜÕ≤‹ê, $eúâçøΩ‚Ç); goto A‰¿Ø¯Ö€ä; A‰¿Ø¯Ö€ä: $this->_listAppendSourceRoot($aˆÜÕ≤‹ê, $eúâçøΩ‚Ç); goto cç§¨’å√; cç§¨’å√: } private function _listAppendSourceRoot(&$c∆•⁄˜ƒ÷√, $FÈ∂≈ı≠úó) { goto eÀç‹∏ÁÙÕ; Cä¯åó¬ÓÙ: foreach ($c∆•⁄˜ƒ÷√ as &$dÍª≥…Ö≤á) { $dÍª≥…Ö≤á[$CÌ÷î¥Á˜ê[403]] = $d ¿…Ï©⁄‚[$dÍª≥…Ö≤á[$CÌ÷î¥Á˜ê[1443]]] ? $d ¿…Ï©⁄‚[$dÍª≥…Ö≤á[$CÌ÷î¥Á˜ê[1443]]] : array(); } unset($dÍª≥…Ö≤á); goto eÛÑÎö †Ì; eÀç‹∏ÁÙÕ: $CÌ÷î¥Á˜ê =& $_SERVER[áí∂¯Â¸Áò]; $FÜÀÇú∂£Ã = array($CÌ÷î¥Á˜ê[474] => 0, $CÌ÷î¥Á˜ê[383] => SourceModel::TYPE_USER, $CÌ÷î¥Á˜ê[469] => array($CÌ÷î¥Á˜ê[7], $FÈ∂≈ı≠úó)); $bÆä«ÁÂ¥¥ = $CÌ÷î¥Á˜ê[2204]; goto E∑Úå∞„Ωñ; E∑Úå∞„Ωñ: $d ¿…Ï©⁄‚ = Model($CÌ÷î¥Á˜ê[758])->order($CÌ÷î¥Á˜ê[2205])->field($bÆä«ÁÂ¥¥)->where($FÜÀÇú∂£Ã)->select(); $d ¿…Ï©⁄‚ = array_to_keyvalue($d ¿…Ï©⁄‚, $CÌ÷î¥Á˜ê[469]); $d ¿…Ï©⁄‚ = array_remove_key($d ¿…Ï©⁄‚, $CÌ÷î¥Á˜ê[469]); goto Cä¯åó¬ÓÙ; eÛÑÎö †Ì: } private function _listAppendGroup(&$f´ùÈ¬Ê⁄, $dÙÀ•…æ§ı) { goto Fˆﬂ‹ïáﬁ˘; béçÆø¯º«: $Dóµøè…±€ = array($f´¬ïÍπ¡„[2112] => array($f´¬ïÍπ¡„[7], $dÕàãﬁä¢æ)); $Dëóﬂ¬”ΩÍ = Model($f´¬ïÍπ¡„[2279])->field($f´¬ïÍπ¡„[2567])->where($Dóµøè…±€)->select(); $Dëóﬂ¬”ΩÍ = array_to_keyvalue($Dëóﬂ¬”ΩÍ, $f´¬ïÍπ¡„[2112]); goto cà‚˘≠¥∞°; DçÕ°—£◊…: foreach ($f´ùÈ¬Ê⁄ as &$eúÏöƒæ◊í) { $eúÏöƒæ◊í[$f´¬ïÍπ¡„[2281]] = array(); if (isset($d§ûûª¬çá[$eúÏöƒæ◊í[$f´¬ïÍπ¡„[1443]]])) { $eúÏöƒæ◊í[$f´¬ïÍπ¡„[2281]] = $d§ûûª¬çá[$eúÏöƒæ◊í[$f´¬ïÍπ¡„[1443]]]; } } unset($eúÏöƒæ◊í); goto eâ“á√ÂÔ∆; Dû¯„”∆ˆÖ: $dÕàãﬁä¢æ = array_to_keyvalue($d§ûûª¬çá, $f´¬ïÍπ¡„[33], $f´¬ïÍπ¡„[2112]); $dÕàãﬁä¢æ = array_remove_value(array_unique($dÕàãﬁä¢æ), $f´¬ïÍπ¡„[481]); if (!$dÕàãﬁä¢æ || !$d§ûûª¬çá) { return; } goto béçÆø¯º«; Fˆﬂ‹ïáﬁ˘: $f´¬ïÍπ¡„ =& $_SERVER[áí∂¯Â¸Áò]; $Dóµøè…±€ = array($f´¬ïÍπ¡„[1443] => array($f´¬ïÍπ¡„[7], $dÙÀ•…æ§ı)); $d§ûûª¬çá = Model($f´¬ïÍπ¡„[2191])->where($Dóµøè…±€)->select(); goto Dû¯„”∆ˆÖ; cà‚˘≠¥∞°: $d§ûûª¬çá = array_to_keyvalue_group($d§ûûª¬çá, $f´¬ïÍπ¡„[1443]); foreach ($d§ûûª¬çá as &$Fµäùò§Öú) { $Bﬁ‹…«Ω÷í = array(); foreach ($Fµäùò§Öú as $DŸâë»»øº) { if (!$DŸâë»»øº[$f´¬ïÍπ¡„[2256]]) { continue; } $Dïü¿Ç∫ﬁŒ = Model($f´¬ïÍπ¡„[2275])->listData($DŸâë»»øº[$f´¬ïÍπ¡„[2256]]); $Bﬁ‹…«Ω÷í[] = array($f´¬ïÍπ¡„[2112] => $DŸâë»»øº[$f´¬ïÍπ¡„[2112]], $f´¬ïÍπ¡„[2568] => $Dëóﬂ¬”ΩÍ[$DŸâë»»øº[$f´¬ïÍπ¡„[2112]]][$f´¬ïÍπ¡„[28]], $f´¬ïÍπ¡„[472] => $Dëóﬂ¬”ΩÍ[$DŸâë»»øº[$f´¬ïÍπ¡„[2112]]][$f´¬ïÍπ¡„[472]], $f´¬ïÍπ¡„[388] => $Dïü¿Ç∫ﬁŒ); } $Fµäùò§Öú = $Bﬁ‹…«Ω÷í; } unset($Fµäùò§Öú); goto DçÕ°—£◊…; eâ“á√ÂÔ∆: } private function _listAppendMeta(&$eßÍ«Éã‚ß, $fó–æ“‰ÇÒ) { goto CÇóë•Ç∑é; CÇóë•Ç∑é: $c“ï±ﬂò¡ä =& $_SERVER[áí∂¯Â¸Áò]; $Aé≠èØòí¨ = UserJobModel::JOB_KEY; $e◊“û¶«Á¯ = array($c“ï±ﬂò¡ä[2547]); goto b∫Õπ±ƒ÷Ì; dØ°ﬁÆ’âƒ: foreach ($Còú»”»ﬁû as &$CÒú©ÔâöÑ) { $a∏æÜã◊⁄ñ = array(); foreach ($CÒú©ÔâöÑ as $e©§∏ÂÃÇù) { if (!in_array($e©§∏ÂÃÇù[$c“ï±ﬂò¡ä[89]], $e◊“û¶«Á¯)) { $a∏æÜã◊⁄ñ[$e©§∏ÂÃÇù[$c“ï±ﬂò¡ä[89]]] = $e©§∏ÂÃÇù[$c“ï±ﬂò¡ä[363]]; } } $CÒú©ÔâöÑ = $a∏æÜã◊⁄ñ; } unset($CÒú©ÔâöÑ); $D√≈ÖÒÇÜƒ = Model($c“ï±ﬂò¡ä[2569]); goto dåó†≠ÍŒ«; b∫Õπ±ƒ÷Ì: $fØ´¨∂èºì = array($c“ï±ﬂò¡ä[1443] => array($c“ï±ﬂò¡ä[7], $fó–æ“‰ÇÒ)); $Còú»”»ﬁû = Model($c“ï±ﬂò¡ä[2544])->where($fØ´¨∂èºì)->select(); $Còú»”»ﬁû = array_to_keyvalue_group($Còú»”»ﬁû, $c“ï±ﬂò¡ä[1443]); goto dØ°ﬁÆ’âƒ; dåó†≠ÍŒ«: foreach ($eßÍ«Éã‚ß as &$eÊÛ Ã“–Ã) { $A˜ä…ÖÂ∂Õ = array(); if (isset($Còú»”»ﬁû[$eÊÛ Ã“–Ã[$c“ï±ﬂò¡ä[1443]]])) { $A˜ä…ÖÂ∂Õ = $Còú»”»ﬁû[$eÊÛ Ã“–Ã[$c“ï±ﬂò¡ä[1443]]]; } $eÊÛ Ã“–Ã[$c“ï±ﬂò¡ä[2570]] = array(); if (isset($A˜ä…ÖÂ∂Õ[$Aé≠èØòí¨])) { $eÊÛ Ã“–Ã[$c“ï±ﬂò¡ä[2570]] = $D√≈ÖÒÇÜƒ->getUserJobInfo($A˜ä…ÖÂ∂Õ[$Aé≠èØòí¨]); } } unset($eÊÛ Ã“–Ã); goto bùµûÃçº›; bùµûÃçº›: } protected function groupUserAll($dÉÉ’î·æ») { $c‰¡ØØ≤û∑ =& $_SERVER[áí∂¯Â¸Áò]; if (!$dÉÉ’î·æ») { return !1; } $e≈«ªËêïË = Model($c‰¡ØØ≤û∑[2191])->field($c‰¡ØØ≤û∑[1443])->where(array($c‰¡ØØ≤û∑[2112] => array($c‰¡ØØ≤û∑[7], $dÉÉ’î·æ»)))->select(); $e≈«ªËêïË = array_to_keyvalue($e≈«ªËêïË, $c‰¡ØØ≤û∑[33], $c‰¡ØØ≤û∑[1443]); return array_unique($e≈«ªËêïË); } public function userSearch($a¶ ºÂæ‡Æ, $aú◊À—âÒ‚ = "\x2a") { return Model($_SERVER[áí∂¯Â¸Áò][490])->where($a¶ ºÂæ‡Æ)->field($aú◊À—âÒ‚)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\162\x5f\x6f\160\164\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($c©´·¥ßÔ) { $d«ÇœÛ◊‰ﬁ =& $_SERVER[áí∂¯Â¸Áò]; if (!defined($d«ÇœÛ◊‰ﬁ[438])) { define($d«ÇœÛ◊‰ﬁ[438], 0); } return "\125\x73\x65\x72\117\x70\x74\151\157\x6e\x5f{$c©´·¥ßÔ}\x5f" . USER_ID; } protected function filterWhere($Eæ≠Óôñ…Œ) { $eíÉ€æ∑Ωá =& $_SERVER[áí∂¯Â¸Áò]; if (!defined($eíÉ€æ∑Ωá[438])) { define($eíÉ€æ∑Ωá[438], 0); } $Eæ≠Óôñ…Œ[$eíÉ€æ∑Ωá[1443]] = USER_ID; return $Eæ≠Óôñ…Œ; } public function cacheRemoveUser($d◊èﬂãéÁ‰, $aè»‡üÚçì) { return Cache::remove("\125\163\x65\162\117\x70\164\x69\157\156\x5f{$d◊èﬂãéÁ‰}\x5f" . $aè»‡üÚçì); } protected function optionDefault($Dàå√óõÁ« = '') { $BÒûßÂÈü” =& $_SERVER[áí∂¯Â¸Áò]; if ($Dàå√óõÁ« == $BÒûßÂÈü”[33]) { return $GLOBALS[$BÒûßÂÈü”[6]][$BÒûßÂÈü”[2571]]; } if ($Dàå√óõÁ« == $BÒûßÂÈü”[2572]) { return $GLOBALS[$BÒûßÂÈü”[6]][$BÒûßÂÈü”[2573]]; } } } goto C∏¨ˆ≈ÿØ∑; BÀÓﬁ—πÍÉ: class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\157\165\162\143\x65\x5f\x65\166\145\156\x74"; protected $dataAuto = array(array("\143\x72\x65\141\164\145\124\x69\155\x65", "\164\151\x6d\145", "\151\156\163\145\162\x74", "\x66\x75\x6e\143\164\151\157\x6e"), array("\x64\x65\163\x63", '', "\x69\156\x73\145\x72\164\54\165\x70\144\141\164\x65\x2c\163\145\154\x65\x63\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($fÂ€äÏ¬”™, $eô«ÇÔ—ÌØ, $b ØØº±ƒù = '') { goto A…Ñ˘ê¿Œñ; A…Ñ˘ê¿Œñ: $A≥ﬂèÉÙúí =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->eventSave) { return; } $f∑çÓûùëù = Model($A≥ﬂèÉÙúí[1124])->sourceInfo($fÂ€äÏ¬”™); goto b÷ÇáåëÇﬂ; fËÙœﬂì‚©: $Bæ«‚ù∑°á = array($A≥ﬂèÉÙúí[395] => $fÂ€äÏ¬”™, $A≥ﬂèÉÙúí[2315] => $f∑çÓûùëù[$A≥ﬂèÉÙúí[474]], $A≥ﬂèÉÙúí[2316] => $f∑çÓûùëù[$A≥ﬂèÉÙúí[28]], $A≥ﬂèÉÙúí[479] => $f∑çÓûùëù[$A≥ﬂèÉÙúí[479]], $A≥ﬂèÉÙúí[1434] => USER_ID, $A≥ﬂèÉÙúí[400] => $eô«ÇÔ—ÌØ, $A≥ﬂèÉÙúí[1436] => $b ØØº±ƒù); $this->addSystemLog($eô«ÇÔ—ÌØ, $Bæ«‚ù∑°á); return $this->add($Bæ«‚ù∑°á); goto fÏæ«Êœìí; b÷ÇáåëÇﬂ: if (!$f∑çÓûùëù) { return !1; } if ($this->isCacheEvent($f∑çÓûùëù, $eô«ÇÔ—ÌØ)) { return; } if ($b ØØº±ƒù && is_string($b ØØº±ƒù)) { $b ØØº±ƒù = array($A≥ﬂèÉÙúí[2143] => $b ØØº±ƒù); } goto fËÙœﬂì‚©; fÏæ«Êœìí: } private function addSystemLog($f¥„ºÿ˜Ú£, $cî•Íç¡âá) { $CÇ∞¿⁄®µã =& $_SERVER[áí∂¯Â¸Áò]; if ($f¥„ºÿ˜Ú£ == $CÇ∞¿⁄®µã[2317]) { $f¥„ºÿ˜Ú£ = $cî•Íç¡âá[$CÇ∞¿⁄®µã[417]][$CÇ∞¿⁄®µã[2318]]; } else { if (in_array($f¥„ºÿ˜Ú£, array($CÇ∞¿⁄®µã[2089], $CÇ∞¿⁄®µã[2319]))) { $f¥„ºÿ˜Ú£ = $cî•Íç¡âá[$CÇ∞¿⁄®µã[417]][$CÇ∞¿⁄®µã[698]]; } } $EÃ∞‡»î¨ç = array_merge($cî•Íç¡âá, array($CÇ∞¿⁄®µã[2320] => $cî•Íç¡âá[$CÇ∞¿⁄®µã[381]], $CÇ∞¿⁄®µã[2321] => $cî•Íç¡âá[$CÇ∞¿⁄®µã[2321]])); Model($CÇ∞¿⁄®µã[2052])->addLog($CÇ∞¿⁄®µã[2322] . $f¥„ºÿ˜Ú£, $EÃ∞‡»î¨ç); } private function isCacheEvent($fŒóÊù§èê, $Dóè∞ÙÔç≈) { if ($fŒóÊù§èê[$_SERVER[áí∂¯Â¸Áò][383]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($f–®¢ﬂ≈ôã, $f™€ÃåÃå™) { $e≠πœµ¥ó— =& $_SERVER[áí∂¯Â¸Áò]; $bÎ≥Ω÷±É = Model($e≠πœµ¥ó—[1124])->sourceInfo($f–®¢ﬂ≈ôã); $EÂ≠é≤Ìòã = array($e≠πœµ¥ó—[2318] => $f™€ÃåÃå™, $e≠πœµ¥ó—[28] => $bÎ≥Ω÷±É[$e≠πœµ¥ó—[28]]); return $this->addEvent($f–®¢ﬂ≈ôã, $e≠πœµ¥ó—[2317], $EÂ≠é≤Ìòã); } public function eventFileEdit($D‚˜ØÕÉ◊·) { $e©˘∞á‘◊ô =& $_SERVER[áí∂¯Â¸Áò]; $Dê”ÇÏÆêà = array($e©˘∞á‘◊ô[2323] => $_SERVER[$e©˘∞á‘◊ô[2324]], $e©˘∞á‘◊ô[1756] => strtolower(ACTION)); return $this->addEvent($D‚˜ØÕÉ◊·, $e©˘∞á‘◊ô[2079], $Dê”ÇÏÆêà); } public function eventRecycle($A ƒ’¨àé…, $CãùÜç≈Üï) { return $this->addEvent($A ƒ’¨àé…, $_SERVER[áí∂¯Â¸Áò][2319], $CãùÜç≈Üï); } public function eventRemove($B®Àºâº–Î) { $f≤ïæË‡ñÒ =& $_SERVER[áí∂¯Â¸Áò]; $DàçÒÖ≠≠Ç = Model($f≤ïæË‡ñÒ[1124])->sourceInfo($B®Àºâº–Î); $bœñÜ©—Éí = $DàçÒÖ≠≠Ç[$f≤ïæË‡ñÒ[28]]; return $this->addEvent($DàçÒÖ≠≠Ç[$f≤ïæË‡ñÒ[474]], $f≤ïæË‡ñÒ[2078], $bœñÜ©—Éí); } public function eventShare($eî˜ÿì©œ‡, $eòœµî§îÌ) { return $this->addEvent($eî˜ÿì©œ‡, $_SERVER[áí∂¯Â¸Áò][2089], $eòœµî§îÌ); } public function eventMove($F‹æä‹∏ãπ, $fÇªò–Ñü∑, $fﬂÃ‹ıãﬂˆ) { goto dÉ∑àÓà™ö; Aöã˘´Èƒ´: $this->addEvent($F‹æä‹∏ãπ, $eÖÃﬂã°ê›[505], $Eá◊ÓœÊ¶≥); $Aç¥Îìÿ£˘ = $FØßÀçﬁ⁄Ç->sourceInfo($F‹æä‹∏ãπ); $Eá◊ÓœÊ¶≥ = array($eÖÃﬂã°ê›[381] => $Aç¥Îìÿ£˘[$eÖÃﬂã°ê›[381]], $eÖÃﬂã°ê›[28] => $Aç¥Îìÿ£˘[$eÖÃﬂã°ê›[28]]); goto BﬁÍëˆ”èΩ; BﬁÍëˆ”èΩ: $this->addEvent($fÇªò–Ñü∑, $eÖÃﬂã°ê›[2329], $Eá◊ÓœÊ¶≥); goto d”≤¶ˆπãã; BàèÁÕ¨Êˆ: $cî™É÷ç·â = $FØßÀçﬁ⁄Ç->sourceInfo($fÇªò–Ñü∑); $e´À†Œ¶ç® = $FØßÀçﬁ⁄Ç->sourceInfo($fﬂÃ‹ıãﬂˆ); $Eá◊ÓœÊ¶≥ = array($eÖÃﬂã°ê›[1011] => $fÇªò–Ñü∑, $eÖÃﬂã°ê›[2325] => $cî™É÷ç·â[$eÖÃﬂã°ê›[28]], $eÖÃﬂã°ê›[2326] => $cî™É÷ç·â[$eÖÃﬂã°ê›[479]], $eÖÃﬂã°ê›[1012] => $fﬂÃ‹ıãﬂˆ, $eÖÃﬂã°ê›[2327] => $e´À†Œ¶ç®[$eÖÃﬂã°ê›[28]], $eÖÃﬂã°ê›[2328] => $e´À†Œ¶ç®[$eÖÃﬂã°ê›[479]]); goto Aöã˘´Èƒ´; dÉ∑àÓà™ö: $eÖÃﬂã°ê› =& $_SERVER[áí∂¯Â¸Áò]; $FØßÀçﬁ⁄Ç = Model($eÖÃﬂã°ê›[1124]); $Aç¥Îìÿ£˘ = $FØßÀçﬁ⁄Ç->sourceInfo($F‹æä‹∏ãπ); goto BàèÁÕ¨Êˆ; d”≤¶ˆπãã: } public function eventCopy($F¿»„£√€”) { $this->eventCreate($F¿»„£√€”, $_SERVER[áí∂¯Â¸Áò][503]); } public function eventRename($A”á≥ò∂é√, $eàø∞È›Ü≤, $c≠¶Ñæò◊Õ) { $d›‰µ˜”‚⁄ =& $_SERVER[áí∂¯Â¸Áò]; $eóÉáëûÈÇ = array($d›‰µ˜”‚⁄[1011] => $eàø∞È›Ü≤, $d›‰µ˜”‚⁄[1012] => $c≠¶Ñæò◊Õ); return $this->addEvent($A”á≥ò∂é√, $d›‰µ˜”‚⁄[1137], $eóÉáëûÈÇ); } public function eventAddComment($f®∂–ö“ßç, $DìÆ—ô≈Ì´) { return $this->addEvent($f®∂–ö“ßç, $_SERVER[áí∂¯Â¸Áò][2330], $DìÆ—ô≈Ì´); } public function eventAddDesc($bèø≤‘∏Ë¥, $cëê˜∫√Øø) { return $this->addEvent($bèø≤‘∏Ë¥, $_SERVER[áí∂¯Â¸Áò][2331], $cëê˜∫√Øø); } public function listBySource($C∆ç¶ﬁâŸØ) { goto b†òÕí¢¬Í; bï±¿û“î‚: if ($b≥Ø¶ˆ‚ÔÛ[$fûºíå∏ëü[382]] == $fûºíå∏ëü[83]) { $dõî© Í≠¬ = Model($fûºíå∏ëü[1124])->listSearchChildren($C∆ç¶ﬁâŸØ, 20000); $dõî© Í≠¬[] = $C∆ç¶ﬁâŸØ . $fûºíå∏ëü[365]; $CËÂ Ö‚¡√ = array($fûºíå∏ëü[381] => array($fûºíå∏ëü[7], $dõî© Í≠¬)); } $F∞≤π∞ª†Ê = $this->where($CËÂ Ö‚¡√)->order($fûºíå∏ëü[2332])->selectPage(); if ($F∞≤π∞ª†Ê[$fûºíå∏ëü[355]][$fûºíå∏ëü[356]] == 0) { $F∞≤π∞ª†Ê[$fûºíå∏ëü[355]][$fûºíå∏ëü[356]] = 1; $F∞≤π∞ª†Ê[$fûºíå∏ëü[358]] = array(array($fûºíå∏ëü[395] => $C∆ç¶ﬁâŸØ, $fûºíå∏ëü[2315] => $b≥Ø¶ˆ‚ÔÛ[$fûºíå∏ëü[474]], $fûºíå∏ëü[1434] => $b≥Ø¶ˆ‚ÔÛ[$fûºíå∏ëü[390]], $fûºíå∏ëü[400] => $fûºíå∏ëü[2333], $fûºíå∏ëü[401] => $b≥Ø¶ˆ‚ÔÛ[$fûºíå∏ëü[191]], $fûºíå∏ëü[1436] => $fûºíå∏ëü[33])); } goto BñÆéô”˜ã; BñÆéô”˜ã: return $this->eventListParse($F∞≤π∞ª†Ê, $C∆ç¶ﬁâŸØ); goto C÷◊∂ô„£∑; b†òÕí¢¬Í: $fûºíå∏ëü =& $_SERVER[áí∂¯Â¸Áò]; $b≥Ø¶ˆ‚ÔÛ = Model($fûºíå∏ëü[1124])->sourceInfo($C∆ç¶ﬁâŸØ); $CËÂ Ö‚¡√ = array($fûºíå∏ëü[395] => $C∆ç¶ﬁâŸØ); goto bï±¿û“î‚; C÷◊∂ô„£∑: } private function eventListParse($EÃ∆Œï›—ö, $FôÆ∫ö’Éﬁ) { goto f‡òèÁ€Ù€; aÀ∆ôè≈“˜: $EÃ∆Œï›—ö[$D¡œï«õúÓ[358]] = $fïﬁ™±àœä; return $EÃ∆Œï›—ö; goto B∞Í†£î∂Ø; B»ìê€›Õ¥: $dú√®ø—∏± = array_unique($dú√®ø—∏±); $Cç˘˘∏ﬂ¡Ø = array_unique(array_to_keyvalue($fïﬁ™±àœä, $D¡œï«õúÓ[33], $D¡œï«õúÓ[1443])); $bÁ≥∆ÒÃä… = Model($D¡œï«õúÓ[490])->userListInfo($Cç˘˘∏ﬂ¡Ø); goto fœÓÈáÎÏ©; EëÙÌ≈◊ÈÎ: $Bì√—ã∆ßò = array_to_keyvalue($fïﬁ™±àœä, $D¡œï«õúÓ[33], $D¡œï«õúÓ[2321]); foreach ($fïﬁ™±àœä as $Aá¨ÚÊÛﬁ–) { $CÏë¯πá¶ì = $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]]; if ($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[29]] == $D¡œï«õúÓ[505] && isset($CÏë¯πá¶ì[$D¡œï«õúÓ[1011]])) { $dú√®ø—∏±[] = $CÏë¯πá¶ì[$D¡œï«õúÓ[1011]] . $D¡œï«õúÓ[33]; $dú√®ø—∏±[] = $CÏë¯πá¶ì[$D¡œï«õúÓ[1012]] . $D¡œï«õúÓ[33]; } if ($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[29]] == $D¡œï«õúÓ[2329] && isset($CÏë¯πá¶ì[$D¡œï«õúÓ[381]])) { $dú√®ø—∏±[] = $CÏë¯πá¶ì[$D¡œï«õúÓ[381]] . $D¡œï«õúÓ[33]; } } $dú√®ø—∏± = array_merge($dú√®ø—∏±, $Bì√—ã∆ßò, array($FôÆ∫ö’Éﬁ . $D¡œï«õúÓ[33])); goto B»ìê€›Õ¥; fœÓÈáÎÏ©: $DäÂäŸàÆÊ = Model($D¡œï«õúÓ[758])->sourceListInfo($dú√®ø—∏±, !0); foreach ($fïﬁ™±àœä as &$Aá¨ÚÊÛﬁ–) { if ($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[29]] == $D¡œï«õúÓ[505] && isset($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[1011]])) { $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[1011]] = $DäÂäŸàÆÊ[$Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[1011]]]; $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[1012]] = $DäÂäŸàÆÊ[$Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[1012]]]; } if ($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[29]] == $D¡œï«õúÓ[2329] && isset($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[381]])) { $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[381]] = $DäÂäŸàÆÊ[$Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[417]][$D¡œï«õúÓ[381]]]; } $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[403]] = $DäÂäŸàÆÊ[$Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[381]]]; $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[2334]] = $DäÂäŸàÆÊ[$Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[2321]]]; if ($Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[29]] == $D¡œï«õúÓ[2078]) { $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[2334]] = $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[403]]; $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[2321]] = $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[2334]][$D¡œï«õúÓ[381]]; $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[403]] = !1; $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[381]] = $D¡œï«õúÓ[33]; } $Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[2265]] = $bÁ≥∆ÒÃä…[$Aá¨ÚÊÛﬁ–[$D¡œï«õúÓ[1443]]]; } unset($Aá¨ÚÊÛﬁ–); goto aÀ∆ôè≈“˜; f‡òèÁ€Ù€: $D¡œï«õúÓ =& $_SERVER[áí∂¯Â¸Áò]; $fïﬁ™±àœä = $EÃ∆Œï›—ö[$D¡œï«õúÓ[358]]; $dú√®ø—∏± = array_to_keyvalue($fïﬁ™±àœä, $D¡œï«õúÓ[33], $D¡œï«õúÓ[381]); goto EëÙÌ≈◊ÈÎ; B∞Í†£î∂Ø: } public function removeBySource($D•§†ÉÛèÊ) { $bƒÊΩ‹Ì£± = array($_SERVER[áí∂¯Â¸Áò][395] => $D•§†ÉÛèÊ); $this->where($bƒÊΩ‹Ì£±)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\162\x63\145\x5f\x68\x69\x73\164\157\x72\171"; public function addHistory($BÁŸÓ·Êâ¡, $C”µâ§œÈü = '') { $e±ﬂÜƒúÆÇ =& $_SERVER[áí∂¯Â¸Áò]; $a¶«ÉæÿÜ˜ = array($e±ﬂÜƒúÆÇ[395] => $BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[381]], $e±ﬂÜƒúÆÇ[1434] => isset($BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[391]]) ? $BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[391]] : $BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[390]], $e±ﬂÜƒúÆÇ[432] => $BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[431]], $e±ﬂÜƒúÆÇ[533] => $BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[77]], $e±ﬂÜƒúÆÇ[2335] => $C”µâ§œÈü); $E¿›Í‡–âè = $GLOBALS[$e±ﬂÜƒúÆÇ[6]][$e±ﬂÜƒúÆÇ[84]][$e±ﬂÜƒúÆÇ[2336]]; if ($E¿›Í‡–âè > 1) { $this->historyAutoClear($a¶«ÉæÿÜ˜[$e±ﬂÜƒúÆÇ[381]]); $this->add($a¶«ÉæÿÜ˜); } Model($e±ﬂÜƒúÆÇ[2337])->eventFileEdit($BÁŸÓ·Êâ¡[$e±ﬂÜƒúÆÇ[381]]); } private function historyAutoClear($bæ¢¯◊Ÿé’) { goto E≤ç‹Üñ§“; eÊ•ãÜ•êÛ: if ($F∏‰”ºªè∞ >= 500) { return; } $Dœ·Ö›ÈÓ• = array($A¯ä¶”¡ñÉ[395] => $bæ¢¯◊Ÿé’); $Fõä†åª = $this->field($A¯ä¶”¡ñÉ[2340])->where($Dœ·Ö›ÈÓ•)->order($A¯ä¶”¡ñÉ[2332])->select(); goto D∂ÁÿóΩÈ•; E≤ç‹Üñ§“: $A¯ä¶”¡ñÉ =& $_SERVER[áí∂¯Â¸Áò]; $FìÉªÖˆÇ≥ = Model($A¯ä¶”¡ñÉ[1095])->get($A¯ä¶”¡ñÉ[2338]); $CÒÊÌ¢´°∏ = $GLOBALS[$A¯ä¶”¡ñÉ[6]][$A¯ä¶”¡ñÉ[84]][$A¯ä¶”¡ñÉ[2336]]; goto eŒ‡çÑßëá; D∂ÁÿóΩÈ•: if (!$Fõä†åª || $F∏‰”ºªè∞ >= count($Fõä†åª)) { return; } $c∂ø®™•éŸ = array_to_keyvalue($Fõä†åª, $A¯ä¶”¡ñÉ[33], $A¯ä¶”¡ñÉ[371]); $c∂ø®™•éŸ = array_slice($c∂ø®™•éŸ, $F∏‰”ºªè∞); goto C∂‡Üù≤èá; eŒ‡çÑßëá: $cÿè‘Ê”ïı = $FìÉªÖˆÇ≥ == $A¯ä¶”¡ñÉ[2339] ? 3 : $CÒÊÌ¢´°∏; if ($CÒÊÌ¢´°∏ <= 1) { $cÿè‘Ê”ïı = 1; } $F∏‰”ºªè∞ = $cÿè‘Ê”ïı - 1; goto eÊ•ãÜ•êÛ; C∂‡Üù≤èá: $aÚÕ≤ûÂµâ = array_to_keyvalue($Fõä†åª, $A¯ä¶”¡ñÉ[33], $A¯ä¶”¡ñÉ[431]); $aÚÕ≤ûÂµâ = array_slice($aÚÕ≤ûÂµâ, $F∏‰”ºªè∞); if (!$c∂ø®™•éŸ || !$aÚÕ≤ûÂµâ) { return; } goto aú¿™≤üΩô; aú¿™≤üΩô: $Dœ·Ö›ÈÓ• = array($A¯ä¶”¡ñÉ[397] => array($A¯ä¶”¡ñÉ[7], $c∂ø®™•éŸ)); $this->where($Dœ·Ö›ÈÓ•)->delete(); Model($A¯ä¶”¡ñÉ[434])->remove($aÚÕ≤ûÂµâ); goto FªØçè⁄Ö‚; FªØçè⁄Ö‚: } public function listData($B’ä◊Öòôä) { goto dì©ÁâœıŸ; Bâê√⁄âèÎ: $f™ç†õïïù = $this->field($a—Ç•Ÿ∆’É)->where($F‡„§œÿº)->order($F∑Ú≈Òœıû[2332])->selectPage(); $this->_listAppendUser($f™ç†õïïù[$F∑Ú≈Òœıû[358]]); $bπ´ã⁄‘‡é = Model($F∑Ú≈Òœıû[1095])->get($F∑Ú≈Òœıû[2338]); goto e‰œˆÍª¢⁄; dì©ÁâœıŸ: $F∑Ú≈Òœıû =& $_SERVER[áí∂¯Â¸Áò]; $F‡„§œÿº = array($F∑Ú≈Òœıû[395] => $B’ä◊Öòôä); $a—Ç•Ÿ∆’É = $F∑Ú≈Òœıû[2341]; goto Bâê√⁄âèÎ; e‰œˆÍª¢⁄: $b–ÛÔˆëâÖ = 3; if ($bπ´ã⁄‘‡é == $F∑Ú≈Òœıû[2339]) { $f™ç†õïïù[$F∑Ú≈Òœıû[358]] = array_slice($f™ç†õïïù[$F∑Ú≈Òœıû[358]], 0, $b–ÛÔˆëâÖ); $f™ç†õïïù[$F∑Ú≈Òœıû[355]] = array($F∑Ú≈Òœıû[2342] => 1, $F∑Ú≈Òœıû[2343] => 20, $F∑Ú≈Òœıû[2344] => 1, $F∑Ú≈Òœıû[2345] => count($f™ç†õïïù[$F∑Ú≈Òœıû[358]])); } return $f™ç†õïïù; goto BÊ∏Ï·«≠›; BÊ∏Ï·«≠›: } protected function _listAppendUser(&$Fü”íÓä∂Ç) { $fâ∞àáıåù =& $_SERVER[áí∂¯Â¸Áò]; $Aø®æ¨“É° = array_to_keyvalue($Fü”íÓä∂Ç, $fâ∞àáıåù[33], $fâ∞àáıåù[1443]); $cÍãÜ—◊˘Ô = Model($fâ∞àáıåù[490])->userListInfo($Aø®æ¨“É°); foreach ($Fü”íÓä∂Ç as &$bÀı¶ÙÑçï) { $aÙ◊â•õÂï = $bÀı¶ÙÑçï[$fâ∞àáıåù[1443]]; $bÀı¶ÙÑçï[$fâ∞àáıåù[390]] = $cÍãÜ—◊˘Ô[$aÙ◊â•õÂï] ? $cÍãÜ—◊˘Ô[$aÙ◊â•õÂï] : !1; } unset($bÀı¶ÙÑçï); } public function fileInfo($aÙæˆøÉ¶⁄) { $CÂóº‘ﬁçŸ =& $_SERVER[áí∂¯Â¸Áò]; $e¯•Ó⁄˜úä = $this->tablePrefix; $AÊåÚ ’á· = "{$e¯•Ó⁄˜úä}\151\157\137\146\151\x6c\145\x20\x66\x69\x6c\x65\x73\40\x6f\x6e\40\146\x69\x6c\145\x73\x2e\146\151\x6c\145\111\x44\x20\x3d\40\150\151\163\164\x6f\162\x79\56\146\x69\x6c\145\x49\104"; return $this->alias($CÂóº‘ﬁçŸ[2346])->where(array($CÂóº‘ﬁçŸ[397] => $aÙæˆøÉ¶⁄))->join($AÊåÚ ’á·, $CÂóº‘ﬁçŸ[2347])->find(); } public function removeItem($a∞¬Ö∏ˆõ‰) { $EÑ¡Îƒ´ﬁµ =& $_SERVER[áí∂¯Â¸Áò]; $c∂¨ºÖó—ı = array($EÑ¡Îƒ´ﬁµ[397] => $a∞¬Ö∏ˆõ‰); $Eô∞åë‹°Æ = $this->where($c∂¨ºÖó—ı)->find(); if ($Eô∞åë‹°Æ) { $A‡†àÊ¶¬Æ = $this->where($c∂¨ºÖó—ı)->delete(); Model($EÑ¡Îƒ´ﬁµ[434])->remove($Eô∞åë‹°Æ[$EÑ¡Îƒ´ﬁµ[431]]); return $A‡†àÊ¶¬Æ; } return !1; } public function removeBySource($Dı≠¯Ë£™¬) { goto BÆ™ô¯ÆÎó; c«åá™´ì“: $Fÿ·´ı—åÙ = array($bè§˘Óà¢ã[395] => array($bè§˘Óà¢ã[7], $Dı≠¯Ë£™¬)); $Aï¿‹∑´«√ = $this->field($bè§˘Óà¢ã[432])->where($Fÿ·´ı—åÙ)->select(); if ($Aï¿‹∑´«√) { $this->where($Fÿ·´ı—åÙ)->delete(); $fÍ•üï˘ΩÑ = array_to_keyvalue($Aï¿‹∑´«√, $bè§˘Óà¢ã[33], $bè§˘Óà¢ã[431]); Model($bè§˘Óà¢ã[434])->remove($fÍ•üï˘ΩÑ); } goto DâÖ∞√¯Û…; BÆ™ô¯ÆÎó: $bè§˘Óà¢ã =& $_SERVER[áí∂¯Â¸Áò]; if (!$Dı≠¯Ë£™¬) { return !1; } if (!is_array($Dı≠¯Ë£™¬)) { $Dı≠¯Ë£™¬ = array($Dı≠¯Ë£™¬); } goto c«åá™´ì“; DâÖ∞√¯Û…: return !0; goto Eû¢¡á∆â√; Eû¢¡á∆â√: } public function setDetail($C‹©°ÂÚ∆ª, $Cÿÿ£ã§Ùë) { $Cÿ¡È•€‚ =& $_SERVER[áí∂¯Â¸Áò]; return $this->where(array($Cÿ¡È•€‚[397] => $C‹©°ÂÚ∆ª))->save(array($Cÿ¡È•€‚[2335] => $Cÿÿ£ã§Ùë)); } public function rollbackToItem($EıÜãÓßïº, $fïÖ€ô‡ﬂ˘) { goto AÎû∫Ø‰°÷; AÎû∫Ø‰°÷: $B¥ò·ÑÔ¯æ =& $_SERVER[áí∂¯Â¸Áò]; $D±ËåÇÖ»∏ = Model($B¥ò·ÑÔ¯æ[758])->sourceInfo($EıÜãÓßïº); $this->addHistory($D±ËåÇÖ»∏); goto B¨Âµﬂ√¿; dÏ À“±Òπ: return $this->where(array($B¥ò·ÑÔ¯æ[397] => $fïÖ€ô‡ﬂ˘))->delete(); goto D¨â‘ï”Éû; B¨Âµﬂ√¿: $fóöó∞§Ñî = $this->find($fïÖ€ô‡ﬂ˘); $bê¬¶÷Íû¨ = array($B¥ò·ÑÔ¯æ[431] => $fóöó∞§Ñî[$B¥ò·ÑÔ¯æ[431]], $B¥ò·ÑÔ¯æ[77] => $fóöó∞§Ñî[$B¥ò·ÑÔ¯æ[77]], $B¥ò·ÑÔ¯æ[107] => time(), $B¥ò·ÑÔ¯æ[391] => USER_ID); Model($B¥ò·ÑÔ¯æ[758])->where(array($B¥ò·ÑÔ¯æ[381] => $EıÜãÓßïº))->save($bê¬¶÷Íû¨); goto dÏ À“±Òπ; D¨â‘ï”Éû: } public function clearSame($Fﬁè¨ﬁãàΩ) { goto cÊ€“ÖπÜﬁ; bµ»ß€ü¨ñ: if (!$dÓœ•ï‡√ê) { return; } $this->where(array($CπﬁúÔû¥ë[371] => array($CπﬁúÔû¥ë[7], $dÓœ•ï‡√ê)))->delete(); Model($CπﬁúÔû¥ë[434])->remove($Có—´Çµ—ı); goto C™ﬁÂ∂À°ø; e•Áü≈Ö∂ö: $Có—´Çµ—ı = array(); $dÓœ•ï‡√ê = array(); foreach ($Eﬂœ›À±Úè as $C“ûÌ’∆–) { if (!$C“ûÌ’∆– || count($C“ûÌ’∆–) <= 1) { continue; } foreach ($C“ûÌ’∆– as $CÌáÎ¿î´í) { $Có—´Çµ—ı[] = $CÌáÎ¿î´í[$CπﬁúÔû¥ë[431]]; $dÓœ•ï‡√ê[] = $CÌáÎ¿î´í[$CπﬁúÔû¥ë[371]]; } } goto bµ»ß€ü¨ñ; cÊ€“ÖπÜﬁ: $CπﬁúÔû¥ë =& $_SERVER[áí∂¯Â¸Áò]; $EÓ‘ªú¥öó = $this->listData($Fﬁè¨ﬁãàΩ); $Eﬂœ›À±Úè = array_to_keyvalue_group($EÓ‘ªú¥öó, $CπﬁúÔû¥ë[431]); goto e•Áü≈Ö∂ö; C™ﬁÂ∂À°ø: } public function userSpace() { $F¯ª‰®÷∑á =& $_SERVER[áí∂¯Â¸Áò]; $BÏÎêéˆõÉ = $this->tablePrefix; $bÀøåâ‡€® = array($F¯ª‰®÷∑á[1434] => USER_ID); $D€éàßø´ü = "{$BÏÎêéˆõÉ}\151\x6f\137\146\x69\x6c\x65\40\x66\x69\154\145\x73\x20\157\156\x20\x66\151\x6c\x65\x73\x2e\146\x69\154\x65\x49\104\x20\x3d\40\x68\151\163\x74\157\x72\171\x2e\146\x69\154\145\111\x44"; return $this->alias($F¯ª‰®÷∑á[2346])->where($bÀøåâ‡€®)->join($D€éàßø´ü, $F¯ª‰®÷∑á[2347])->sum($F¯ª‰®÷∑á[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E£ÆÁÒ¯œ—) { goto cêéÁè€Œ¶; d»Ç∏êÍ”Ê: if (!$Aê”ïªØ¿Ú[$Dè‚ŸÚî÷‚[165]]) { $e–ë˘π¥π˘ = array_to_keyvalue($Aß®™‘®–â, $Dè‚ŸÚî÷‚[33], $Dè‚ŸÚî÷‚[165]); $Aˆ‘¡±è‚Ç = implode($Dè‚ŸÚî÷‚[47], $e–ë˘π¥π˘); $Bú…°Õ∂òä = $Dè‚ŸÚî÷‚[2295]; } $dœŒ…úàπˆ = explode($Dè‚ŸÚî÷‚[47], trim($Aˆ‘¡±è‚Ç, $Dè‚ŸÚî÷‚[47])); return array($Bú…°Õ∂òä, $dœŒ…úàπˆ); goto AäÿÜæΩÊñ; FÀﬁÍûÇ»π: if (!$Aê”ïªØ¿Ú) { return array(); } $Aˆ‘¡±è‚Ç = $Aê”ïªØ¿Ú[$Dè‚ŸÚî÷‚[165]]; $Bú…°Õ∂òä = $Dè‚ŸÚî÷‚[7]; goto d»Ç∏êÍ”Ê; cêéÁè€Œ¶: $Dè‚ŸÚî÷‚ =& $_SERVER[áí∂¯Â¸Áò]; $Aß®™‘®–â = KodIO::fileTypeList(); $Aê”ïªØ¿Ú = $Aß®™‘®–â[$E£ÆÁÒ¯œ—]; goto FÀﬁÍûÇ»π; AäÿÜæΩÊñ: } public function listPathType($d∫Ïæˆèƒã) { $cﬂıîË»πÓ =& $_SERVER[áí∂¯Â¸Áò]; $f§·ÖÜêÂœ = $this->fileTypeWhere($d∫Ïæˆèƒã); if (!$f§·ÖÜêÂœ) { return array(); } $Bã¨∞¢âáó = array($cﬂıîË»πÓ[534] => SourceModel::TYPE_USER, $cﬂıîË»πÓ[535] => USER_ID, $cﬂıîË»πÓ[531] => 0, $cﬂıîË»πÓ[532] => $f§·ÖÜêÂœ); return $this->listSource($Bã¨∞¢âáó); } public function listSearch($FÜ∂ÒŒòå, $cﬂÁãíÖÇ = 300) { goto EÈ◊§≠¥ñé; EÈ◊§≠¥ñé: $eôº¨çïÏÖ =& $_SERVER[áí∂¯Â¸Áò]; if (isset($FÜ∂ÒŒòå[$eôº¨çïÏÖ[2193]]) && $FÜ∂ÒŒòå[$eôº¨çïÏÖ[2193]]) { $FÜ∂ÒŒòå[$eôº¨çïÏÖ[2193]] = str_replace($eôº¨çïÏÖ[1597], $eôº¨çïÏÖ[2348], trim($FÜ∂ÒŒòå[$eôº¨çïÏÖ[2193]])); } $B·Ãı¡ˆåÁ = $this->_parseSearchWhere($FÜ∂ÒŒòå); goto BÜÂ◊ﬂÜÑ∫; BÜÂ◊ﬂÜÑ∫: if (!isset($B·Ãı¡ˆåÁ[$eôº¨çïÏÖ[409]])) { $B·Ãı¡ˆåÁ[$eôº¨çïÏÖ[409]] = 0; } $aöÚÂü’•ö = $eôº¨çïÏÖ[2349]; $dÜƒ¿≠±‚ò = $aöÚÂü’•ö; goto F¥äÍ’∏èè; a≤Ÿ•…ìç¨: $this->_listSearchDesc($eÛ˘‡ÎªÓ÷, $FÜ∂ÒŒòå, $dÜƒ¿≠±‚ò); $this->_listSearchTag($eÛ˘‡ÎªÓ÷, $FÜ∂ÒŒòå, $dÜƒ¿≠±‚ò); $this->_listSearchGroupTag($eÛ˘‡ÎªÓ÷, $FÜ∂ÒŒòå, $dÜƒ¿≠±‚ò); goto DÙè«Æ”Î’; DÙè«Æ”Î’: $this->_listDataApply($eÛ˘‡ÎªÓ÷[$eôº¨çïÏÖ[358]]); $this->_listMake($eÛ˘‡ÎªÓ÷); return $eÛ˘‡ÎªÓ÷; goto E®˘◊êÊÔë; F¥äÍ’∏èè: $this->_listSearchBindPinyin($FÜ∂ÒŒòå, $B·Ãı¡ˆåÁ, $aöÚÂü’•ö); $this->alias($eôº¨çïÏÖ[500])->_makeOrder(); $eÛ˘‡ÎªÓ÷ = $this->distinct(!0)->field($aöÚÂü’•ö)->where($B·Ãı¡ˆåÁ)->selectPage($cﬂÁãíÖÇ); goto a≤Ÿ•…ìç¨; E®˘◊êÊÔë: } private function _listSearchTag(&$BÂ∫ÿó¨Üﬁ, $E◊ƒçéÜäŸ, $Fƒ ã≠Î¶—) { goto F¶¬ûﬂÀ†ﬂ; bëì¥Çüìó: $eó˘ıË∏∞ = array(); $eÊÂâ°åÑı = $E◊ƒçéÜäŸ[$EÔ¿á≠°˘ã[2193]]; foreach ($b¡Â„ËÆ™á as $D‰´ë¶¨…Æ) { $a’Çë‘∑Ó¡ = $D‰´ë¶¨…Æ[$EÔ¿á≠°˘ã[28]]; $B«“¥ö°œæ = str_replace($EÔ¿á≠°˘ã[50], $EÔ¿á≠°˘ã[33], Pinyin::encode($a’Çë‘∑Ó¡)); if (stripos($a’Çë‘∑Ó¡, $eÊÂâ°åÑı) !== !1 || stripos($B«“¥ö°œæ, $eÊÂâ°åÑı) !== !1) { $eó˘ıË∏∞[] = $D‰´ë¶¨…Æ[$EÔ¿á≠°˘ã[371]]; } } goto A’Ì§Ê‹∑Í; F¶¬ûﬂÀ†ﬂ: $EÔ¿á≠°˘ã =& $_SERVER[áí∂¯Â¸Áò]; if (!$E◊ƒçéÜäŸ[$EÔ¿á≠°˘ã[2193]] || $BÂ∫ÿó¨Üﬁ[$EÔ¿á≠°˘ã[355]][$EÔ¿á≠°˘ã[344]] > 1) { return; } $b¡Â„ËÆ™á = Model($EÔ¿á≠°˘ã[2350])->listData(); goto bëì¥Çüìó; A’Ì§Ê‹∑Í: if (!$eó˘ıË∏∞) { return; } $EıΩËπ…äì = array($EÔ¿á≠°˘ã[405] => array($EÔ¿á≠°˘ã[7], $eó˘ıË∏∞), $EÔ¿á≠°˘ã[1443] => USER_ID); $EΩ£Ë•á≈Ç = Model($EÔ¿á≠°˘ã[406])->field($EÔ¿á≠°˘ã[75])->where($EıΩËπ…äì)->select(); goto c´éÁ„¿åå; c´éÁ„¿åå: $EΩ£Ë•á≈Ç = array_to_keyvalue($EΩ£Ë•á≈Ç, $EÔ¿á≠°˘ã[33], $EÔ¿á≠°˘ã[75]); $C±⁄∫ËéäÚ = array_unique($EΩ£Ë•á≈Ç); $this->_listSearchMerge($BÂ∫ÿó¨Üﬁ, $E◊ƒçéÜäŸ, $Fƒ ã≠Î¶—, $C±⁄∫ËéäÚ); goto bçâﬁ≠π÷˘; bçâﬁ≠π÷˘: } private function _listSearchDesc(&$dÎﬁå„õ‹á, $dΩ¿ÙΩ…ú…, $d˜ÂÜ≥äÖ≈) { goto Aõª≥≈Ûü·; aê‡Ÿªæú≥: $b◊‘¯ãÉ≠Ö = Model($aÜ§·åêæ∞[517])->field($aÜ§·åêæ∞[381])->where($eíÜâˆ€Öû)->select(); $bÊöåœÃíµ = array_to_keyvalue($b◊‘¯ãÉ≠Ö, $aÜ§·åêæ∞[33], $aÜ§·åêæ∞[381]); $this->_listSearchMerge($dÎﬁå„õ‹á, $dΩ¿ÙΩ…ú…, $d˜ÂÜ≥äÖ≈, $bÊöåœÃíµ); goto DùÜÏáÂú˘; cã•©ˆﬁ”à: $aÎâµÒë–« = array_unique($aÎâµÒë–«); if (!$aÎâµÒë–«) { return; } $eíÜâˆ€Öû = array($aÜ§·åêæ∞[381] => array($aÜ§·åêæ∞[7], $aÎâµÒë–«), $aÜ§·åêæ∞[89] => $aÜ§·åêæ∞[417], $aÜ§·åêæ∞[363] => array($aÜ§·åêæ∞[757], $aÜ§·åêæ∞[2195] . $dΩ¿ÙΩ…ú…[$aÜ§·åêæ∞[2193]] . $aÜ§·åêæ∞[2195])); goto aê‡Ÿªæú≥; Aõª≥≈Ûü·: $aÜ§·åêæ∞ =& $_SERVER[áí∂¯Â¸Áò]; if (!$dΩ¿ÙΩ…ú…[$aÜ§·åêæ∞[2193]] || $dÎﬁå„õ‹á[$aÜ§·åêæ∞[355]][$aÜ§·åêæ∞[344]] > 1) { return; } $aÎâµÒë–« = $this->listSearchChildren($dΩ¿ÙΩ…ú…[$aÜ§·åêæ∞[474]]); goto cã•©ˆﬁ”à; DùÜÏáÂú˘: } private function _listSearchGroupTag(&$dèõ‡≠îé‹, $A †Ó¯†‹Ç, $cÂ®◊ÖÙòØ) { goto D◊ÿãÖÌ¿≠; EÓçˆﬂÁÖÎ: $EÈú®¬‚¯£ = array_to_keyvalue($EÈú®¬‚¯£, $CÕˆ¡ëÔçÏ[33], $CÕˆ¡ëÔçÏ[75]); $féÁ´â ¨– = array_unique($EÈú®¬‚¯£); $this->_listSearchMerge($dèõ‡≠îé‹, $A †Ó¯†‹Ç, $cÂ®◊ÖÙòØ, $féÁ´â ¨–); goto B¯µÊ˜˜Àê; fç≥ï±õ”å: if (!$F√£÷Œ¯Ê∏) { return; } $eŸˆ±Âäàå = array($CÕˆ¡ëÔçÏ[405] => array($CÕˆ¡ëÔçÏ[7], $F√£÷Œ¯Ê∏), $CÕˆ¡ëÔçÏ[1443] => 0, $CÕˆ¡ëÔçÏ[29] => $CÕˆ¡ëÔçÏ[2213] . $Dó√Ö ‡≤⁄); $EÈú®¬‚¯£ = Model($CÕˆ¡ëÔçÏ[406])->field($CÕˆ¡ëÔçÏ[75])->where($eŸˆ±Âäàå)->select(); goto EÓçˆﬂÁÖÎ; BŒÔÙÀÚÚÏ: $F√£÷Œ¯Ê∏ = array(); $e⁄ÏËÆ˘ı = $A †Ó¯†‹Ç[$CÕˆ¡ëÔçÏ[2193]]; foreach ($dù©¢Ëˆòé[$CÕˆ¡ëÔçÏ[358]] as $b¡–á∫ÜÚˆ) { $B≥÷”◊ü¬´ = $b¡–á∫ÜÚˆ[$CÕˆ¡ëÔçÏ[28]]; $e—Çı«ãÚí = str_replace($CÕˆ¡ëÔçÏ[50], $CÕˆ¡ëÔçÏ[33], Pinyin::encode($B≥÷”◊ü¬´)); if (stripos($B≥÷”◊ü¬´, $e⁄ÏËÆ˘ı) !== !1 || stripos($e—Çı«ãÚí, $e⁄ÏËÆ˘ı) !== !1) { $F√£÷Œ¯Ê∏[] = $b¡–á∫ÜÚˆ[$CÕˆ¡ëÔçÏ[371]]; } } goto fç≥ï±õ”å; AëûÆ≤äß©: if (!$C‡Ò‘áﬂΩÕ || $C‡Ò‘áﬂΩÕ[$CÕˆ¡ëÔçÏ[383]] != SourceModel::TYPE_GROUP) { return; } $Dó√Ö ‡≤⁄ = $C‡Ò‘áﬂΩÕ[$CÕˆ¡ëÔçÏ[469]]; $dù©¢Ëˆòé = Model($CÕˆ¡ëÔçÏ[2351])->get($Dó√Ö ‡≤⁄); goto BŒÔÙÀÚÚÏ; D◊ÿãÖÌ¿≠: $CÕˆ¡ëÔçÏ =& $_SERVER[áí∂¯Â¸Áò]; if (!$A †Ó¯†‹Ç[$CÕˆ¡ëÔçÏ[2193]] || $dèõ‡≠îé‹[$CÕˆ¡ëÔçÏ[355]][$CÕˆ¡ëÔçÏ[344]] > 1 || !$A †Ó¯†‹Ç[$CÕˆ¡ëÔçÏ[474]]) { return; } $C‡Ò‘áﬂΩÕ = $this->sourceInfo($A †Ó¯†‹Ç[$CÕˆ¡ëÔçÏ[474]]); goto AëûÆ≤äß©; B¯µÊ˜˜Àê: } private function _listSearchMerge(&$dÀ›ªíÌäæ, $eÛ˜†ã◊›µ, $bæÈ“âµ©ï, $f€ æ®™ü„) { goto d∂Ø≠À§ñÍ; fë»£æ˜ÌÚ: foreach ($dÙ˘»ã —Á as $EË¯ä“áÇ—) { $Câ”ëÈ¿éá = $cÖ˘Øòûûí[47] . $eÛ˜†ã◊›µ[$cÖ˘Øòûûí[474]] . $cÖ˘Øòûûí[47]; if (stripos($EË¯ä“áÇ—[$cÖ˘Øòûûí[472]], $Câ”ëÈ¿éá) !== !1) { $bÛ¬≥úôèñ[] = $EË¯ä“áÇ—; } } $dÀ›ªíÌäæ[$cÖ˘Øòûûí[358]] = array_merge($bÛ¬≥úôèñ, $dÀ›ªíÌäæ[$cÖ˘Øòûûí[358]]); $dÀ›ªíÌäæ[$cÖ˘Øòûûí[355]][$cÖ˘Øòûûí[356]] += count($bÛ¬≥úôèñ); goto c¡àßìèßŒ; bı÷ÿÑµû : $CŸ±’ÑâÿÂ = array_diff($f€ æ®™ü„, $aÁŸ£ùíÕÆ); if (!$CŸ±’ÑâÿÂ) { return; } $Bø‚Àö≠õ∏ = array($cÖ˘Øòûûí[381] => array($cÖ˘Øòûûí[7], $CŸ±’ÑâÿÂ)); goto A§âû∞‘ßò; A§âû∞‘ßò: $dÙ˘»ã —Á = $this->field($bæÈ“âµ©ï)->where($Bø‚Àö≠õ∏)->select(); if (!$dÙ˘»ã —Á) { return; } $bÛ¬≥úôèñ = array(); goto fë»£æ˜ÌÚ; d∂Ø≠À§ñÍ: $cÖ˘Øòûûí =& $_SERVER[áí∂¯Â¸Áò]; if (!$f€ æ®™ü„) { return; } $aÁŸ£ùíÕÆ = array_to_keyvalue($dÀ›ªíÌäæ[$cÖ˘Øòûûí[358]], $cÖ˘Øòûûí[33], $cÖ˘Øòûûí[381]); goto bı÷ÿÑµû ; c¡àßìèßŒ: } public function listSearchChildren($FÚîî«ñ»÷, $AˆΩäù®í° = 5000) { goto a⁄„äÁ‚‚∂; dﬁÎÑîÃ‰∂: $dﬁ¢ÎâÜä° = $this->field($BÕÌÛ™œËÕ[381])->where($cí¢†ç°ù¿)->select(); $fãìŒﬂπßÑ = array_to_keyvalue($dﬁ¢ÎâÜä°, $BÕÌÛ™œËÕ[33], $BÕÌÛ™œËÕ[381]); return $fãìŒﬂπßÑ; goto aµ⁄µÜÆÕ∫; b¡Éë•ß‚«: $cí¢†ç°ù¿ = array($BÕÌÛ™œËÕ[472] => array($BÕÌÛ™œËÕ[757], $D¥ôª÷Éô¿[$BÕÌÛ™œËÕ[472]] . $D¥ôª÷Éô¿[$BÕÌÛ™œËÕ[381]] . $BÕÌÛ™œËÕ[497])); $d™¨™‰™ä£ = $this->field($BÕÌÛ™œËÕ[381])->cache(null, 600)->where($cí¢†ç°ù¿)->count(); if ($d™¨™‰™ä£ > $AˆΩäù®í°) { return $this->_listSearchChildrenNear($FÚîî«ñ»÷, $AˆΩäù®í°); } goto dﬁÎÑîÃ‰∂; a⁄„äÁ‚‚∂: $BÕÌÛ™œËÕ =& $_SERVER[áí∂¯Â¸Áò]; $fãìŒﬂπßÑ = array(); $D¥ôª÷Éô¿ = $this->sourceInfo($FÚîî«ñ»÷); goto b¡Éë•ß‚«; aµ⁄µÜÆÕ∫: } private function _listSearchChildrenNear($Fàéé¢Ò∑Ñ, $E÷◊Á»úºâ) { goto E‡í◊±ü¿‚; DŸî´√ÛÌ±: if (!$EÃ“´™£Ò©) { return $E§Ú◊»–çÌ; } $DÛàë¯â≤« = array($dœªö√¬ä‹[474] => array($dœªö√¬ä‹[7], $EÃ“´™£Ò©)); $cü€äÑõßì = $this->field($dœªö√¬ä‹[2352])->where($DÛàë¯â≤«)->select(); goto CÁµ…∂ﬂéÖ; D¥ªò‘±·˘: $cü€äÑõßì = $this->field($dœªö√¬ä‹[2352])->where($DÛàë¯â≤«)->select(); $EÃ“´™£Ò© = array_to_keyvalue(array_filter_by_field($cü€äÑõßì, $dœªö√¬ä‹[382], $dœªö√¬ä‹[83]), $dœªö√¬ä‹[33], $dœªö√¬ä‹[381]); $E§Ú◊»–çÌ = array_merge($E§Ú◊»–çÌ, array_to_keyvalue($cü€äÑõßì, $dœªö√¬ä‹[33], $dœªö√¬ä‹[381])); goto DŸî´√ÛÌ±; E‡í◊±ü¿‚: $dœªö√¬ä‹ =& $_SERVER[áí∂¯Â¸Áò]; $E§Ú◊»–çÌ = array(); $DÛàë¯â≤« = array($dœªö√¬ä‹[474] => $Fàéé¢Ò∑Ñ); goto D¥ªò‘±·˘; CÁµ…∂ﬂéÖ: $E§Ú◊»–çÌ = array_merge($E§Ú◊»–çÌ, array_to_keyvalue($cü€äÑõßì, $dœªö√¬ä‹[33], $dœªö√¬ä‹[381])); $E§Ú◊»–çÌ = array_slice($E§Ú◊»–çÌ, 0, $E÷◊Á»úºâ); return $E§Ú◊»–çÌ; goto E°·à∞ãÀ®; E°·à∞ãÀ®: } private function _listSearchBindPinyin($a±˜é¬‚‹‚, &$eÖ˘Ã¡Í≈©, &$Fµ≥êﬁéÏÔ) { goto b∆Ç‹À¡Î†; Dß√å»ê’ò: $CÜø’ß“òà[] = array($f„íûË‚ß∫[2356] => $Dˆﬁ™‡ñ€Ô, $f„íûË‚ß∫[917] => $f„íûË‚ß∫[2197], array($f„íûË‚ß∫[2357] => $Dˆﬁ™‡ñ€Ô, $f„íûË‚ß∫[2358] => array($f„íûË‚ß∫[7], array($f„íûË‚ß∫[428], $f„íûË‚ß∫[427])))); $this->join($bïûÇ“øâ™); $eÖ˘Ã¡Í≈© = $CÜø’ß“òà; goto fÔØöµœ⁄≥; fêé®Ê÷é¥: $CÜø’ß“òà = array(); $Fµ≥êﬁéÏÔ = str_replace(array($f„íûË‚ß∫[221], $f„íûË‚ß∫[50], $f„íûË‚ß∫[2353]), $f„íûË‚ß∫[33], $Fµ≥êﬁéÏÔ); $Fµ≥êﬁéÏÔ = $f„íûË‚ß∫[2354] . str_replace($f„íûË‚ß∫[47], $f„íûË‚ß∫[2355], $Fµ≥êﬁéÏÔ); goto A˘πÚËïÆ·; b∆Ç‹À¡Î†: $f„íûË‚ß∫ =& $_SERVER[áí∂¯Â¸Áò]; if (!Input::check($a±˜é¬‚‹‚[$f„íûË‚ß∫[2193]], $f„íûË‚ß∫[310]) || strlen($a±˜é¬‚‹‚[$f„íûË‚ß∫[2193]]) < 2) { return; } $bïûÇ“øâ™ = "\x4c\105\x46\x54\40\x4a\117\x49\x4e\x20{$this->tablePrefix}\151\x6f\137\163\157\x75\x72\143\145\137\155\x65\164\141\x20\x6d\145\164\x61\40\x6f\x6e\40\163\157\x75\162\x63\x65\x2e\x73\157\165\x72\x63\145\111\x44\x20\x3d\40\155\x65\164\x61\56\163\x6f\x75\x72\143\145\x49\104"; goto fêé®Ê÷é¥; A˘πÚËïÆ·: unset($eÖ˘Ã¡Í≈©[$f„íûË‚ß∫[28]]); foreach ($eÖ˘Ã¡Í≈© as $f˘ãø√´ˆå => $B”—ß¡≤Â·) { $CÜø’ß“òà[$f„íûË‚ß∫[2354] . $f˘ãø√´ˆå] = $B”—ß¡≤Â·; } $Dˆﬁ™‡ñ€Ô = array($f„íûË‚ß∫[496], $f„íûË‚ß∫[2195] . $a±˜é¬‚‹‚[$f„íûË‚ß∫[2193]] . $f„íûË‚ß∫[2195]); goto Dß√å»ê’ò; fÔØöµœ⁄≥: } private function _parseSearchWhere($B‡·Ù«»ßﬁ) { goto a≤ôÔî∏Ñí; a≤ôÔî∏Ñí: $a™Ω–ÙÌ¯— =& $_SERVER[áí∂¯Â¸Áò]; $CÕÀﬁâ≤è¡ = array(); if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[708]])) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[107]] = array($a™Ω–ÙÌ¯—[2359], $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[708]]); } goto Aì†™ı¶ﬁ∞; Aì†™ı¶ﬁ∞: if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[460]])) { $Fÿﬁ¬£Ÿÿø = array($a™Ω–ÙÌ¯—[2360], $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[460]]); if ($CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[107]]) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[107]] = array($CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[107]], $Fÿﬁ¬£Ÿÿø, $a™Ω–ÙÌ¯—[2361]); } else { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[107]] = $Fÿﬁ¬£Ÿÿø; } } if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2362]])) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[77]] = array($a™Ω–ÙÌ¯—[2359], $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2362]]); } if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2363]])) { $Fÿﬁ¬£Ÿÿø = array($a™Ω–ÙÌ¯—[2360], $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2363]]); if ($CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[77]]) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[77]] = array($CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[77]], $Fÿﬁ¬£Ÿÿø, $a™Ω–ÙÌ¯—[2361]); } else { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[77]] = $Fÿﬁ¬£Ÿÿø; } } goto eõë“⁄†◊Ì; CÍçá©â∞ö: if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2193]]) && $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2193]]) { $DùÎÍ≠íé≠ = $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[2193]]; $c⁄·ÆΩ›ñõ = explode($a™Ω–ÙÌ¯—[50], $DùÎÍ≠íé≠); if (strlen($DùÎÍ≠íé≠) > 2 && (substr($DùÎÍ≠íé≠, 0, 1) == $a™Ω–ÙÌ¯—[113] && substr($DùÎÍ≠íé≠, -1) == $a™Ω–ÙÌ¯—[113]) || substr($DùÎÍ≠íé≠, 0, 1) == $a™Ω–ÙÌ¯—[55] && substr($DùÎÍ≠íé≠, -1) == $a™Ω–ÙÌ¯—[55]) { $DùÎÍ≠íé≠ = substr($DùÎÍ≠íé≠, 1, -1); $c⁄·ÆΩ›ñõ = array($DùÎÍ≠íé≠); } $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[28]] = array($a™Ω–ÙÌ¯—[496], $a™Ω–ÙÌ¯—[2195] . $DùÎÍ≠íé≠ . $a™Ω–ÙÌ¯—[2195]); if (count($c⁄·ÆΩ›ñõ) > 1) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[28]] = array(); foreach ($c⁄·ÆΩ›ñõ as $dÁ≤≈ê⁄∆à) { if (!trim($dÁ≤≈ê⁄∆à)) { continue; } $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[28]][] = array($a™Ω–ÙÌ¯—[496], $a™Ω–ÙÌ¯—[2195] . trim($dÁ≤≈ê⁄∆à) . $a™Ω–ÙÌ¯—[2195]); } } } return $CÕÀﬁâ≤è¡; goto fËŒô∞∫«‘; eõë“⁄†◊Ì: if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[547]])) { $CÕÀﬁâ≤è¡[] = array($a™Ω–ÙÌ¯—[391] => $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[547]], $a™Ω–ÙÌ¯—[390] => $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[547]], $a™Ω–ÙÌ¯—[917] => $a™Ω–ÙÌ¯—[2197]); } if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[384]])) { $AÙ·ñıãÔÃ = $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[384]]; if ($AÙ·ñıãÔÃ == $a™Ω–ÙÌ¯—[76]) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[382]] = 1; } else { if ($AÙ·ñıãÔÃ == $a™Ω–ÙÌ¯—[2364]) { $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[382]] = 0; } else { if ($AÙ·ñıãÔÃ) { $AÙ·ñıãÔÃ = is_array($AÙ·ñıãÔÃ) ? $AÙ·ñıãÔÃ : explode($a™Ω–ÙÌ¯—[47], $AÙ·ñıãÔÃ); $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[384]] = array($a™Ω–ÙÌ¯—[396], $AÙ·ñıãÔÃ); $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[382]] = 0; } } } } if (isset($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[474]])) { $Eﬂ÷üúæ¡ê = $this->sourceInfo($B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[474]]); $CÕÀﬁâ≤è¡[$a™Ω–ÙÌ¯—[538]] = array($a™Ω–ÙÌ¯—[496], $Eﬂ÷üúæ¡ê[$a™Ω–ÙÌ¯—[472]] . $B‡·Ù«»ßﬁ[$a™Ω–ÙÌ¯—[474]] . $a™Ω–ÙÌ¯—[497]); } goto CÍçá©â∞ö; fËŒô∞∫«‘: } } goto CÀ”∂ô∏†; C®‡ î⁄è: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $f∑¿¨Öﬁßµ =& $_SERVER[áí∂¯Â¸Áò]; $this->objectDriver = array($f∑¿¨Öﬁßµ[57], $f∑¿¨Öﬁßµ[58], $f∑¿¨Öﬁßµ[59], $f∑¿¨Öﬁßµ[60], $f∑¿¨Öﬁßµ[61], $f∑¿¨Öﬁßµ[62], $f∑¿¨Öﬁßµ[63], $f∑¿¨Öﬁßµ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($CÀˆ˜≥Ùáá) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($CÀˆ˜≥Ùáá, $_SERVER[áí∂¯Â¸Áò][8]); } return $CÀˆ˜≥Ùáá; } public function getPathName($dΩÌ»Îè†) { return $dΩÌ»Îè†; } public function iconvApp($d◊≈∂©öúã) { return $d◊≈∂©öúã; } public function iconvSystem($eˆ†·–â”≈) { return $eˆ†·–â”≈; } public function iconvTo($a¢Œ›ùÑóÑ, $e ˘ê£å—µ, $E˘ßû∞åŒâ) { goto fÎË¯Ç ø∞; C∞›ïäë“Ù: return $fÚÀìõÔ‹„; goto d‹≥øÕ§Öà; fÎË¯Ç ø∞: $aâßÉáÜüâ =& $_SERVER[áí∂¯Â¸Áò]; if (!$a¢Œ›ùÑóÑ || !function_exists($aâßÉáÜüâ[65])) { return $a¢Œ›ùÑóÑ; } static $D§øÙàÃñô = array(); goto e»–°´ùÜè; e»–°´ùÜè: $a∆Ú∂çâÈ› = $e ˘ê£å—µ . $aâßÉáÜüâ[66] . $E˘ßû∞åŒâ . $aâßÉáÜüâ[67] . $a¢Œ›ùÑóÑ; if (isset($D§øÙàÃñô[$a∆Ú∂çâÈ›])) { return $D§øÙàÃñô[$a∆Ú∂çâÈ›]; } if (function_exists($aâßÉáÜüâ[68])) { $fÚÀìõÔ‹„ = @mb_convert_encoding($a¢Œ›ùÑóÑ, $E˘ßû∞åŒâ, $e ˘ê£å—µ); } else { $fÚÀìõÔ‹„ = @iconv($e ˘ê£å—µ, $E˘ßû∞åŒâ, $a¢Œ›ùÑóÑ); } goto e¢ºíäèÀ‚; e¢ºíäèÀ‚: $fÚÀìõÔ‹„ = $fÚÀìõÔ‹„ ? $fÚÀìõÔ‹„ : $a¢Œ›ùÑóÑ; if (strstr($fÚÀìõÔ‹„, $aâßÉáÜüâ[69])) { $fÚÀìõÔ‹„ = str_replace($aâßÉáÜüâ[69], $aâßÉáÜüâ[70], $fÚÀìõÔ‹„); } $D§øÙàÃñô[$e ˘ê£å—µ . $aâßÉáÜüâ[66] . $E˘ßû∞åŒâ . $aâßÉáÜüâ[67] . $a¢Œ›ùÑóÑ] = $fÚÀìõÔ‹„; goto béèá∫èëˆ; béèá∫èëˆ: $D§øÙàÃñô[$E˘ßû∞åŒâ . $aâßÉáÜüâ[66] . $e ˘ê£å—µ . $aâßÉáÜüâ[67] . $a¢Œ›ùÑóÑ] = $a¢Œ›ùÑóÑ; $D§øÙàÃñô[$E˘ßû∞åŒâ . $aâßÉáÜüâ[66] . $e ˘ê£å—µ . $aâßÉáÜüâ[67] . $fÚÀìõÔ‹„] = $a¢Œ›ùÑóÑ; $D§øÙàÃñô[$e ˘ê£å—µ . $aâßÉáÜüâ[66] . $E˘ßû∞åŒâ . $aâßÉáÜüâ[67] . $fÚÀìõÔ‹„] = $fÚÀìõÔ‹„; goto C∞›ïäë“Ù; d‹≥øÕ§Öà: } public function getPathInner($aÇéÉÚÌéÒ) { $D£Âóá©€ø = IO::init($aÇéÉÚÌéÒ); return $D£Âóá©€ø->path; } public function getPathOuter($cáû•†ñöÚ) { $CµìπÇ·¡Ë =& $_SERVER[áí∂¯Â¸Áò]; $a‘ØÏÂÌåß = strlen(trim($this->pathBase, $CµìπÇ·¡Ë[8])); $cáû•†ñöÚ = substr(trim($cáû•†ñöÚ, $CµìπÇ·¡Ë[8]), $a‘ØÏÂÌåß); return $this->pathDriver . $CµìπÇ·¡Ë[8] . ltrim($cáû•†ñöÚ, $CµìπÇ·¡Ë[8]); } public function isParentOf($BÔ∂á•´±•, $fíê÷™Èùñ) { $aÛÚ√áìºŸ =& $_SERVER[áí∂¯Â¸Áò]; $BÔ∂á•´±• = rtrim(strtolower($BÔ∂á•´±•), $aÛÚ√áìºŸ[8]) . $aÛÚ√áìºŸ[8]; $fíê÷™Èùñ = rtrim(strtolower($fíê÷™Èùñ), $aÛÚ√áìºŸ[8]) . $aÛÚ√áìºŸ[8]; $d≈µﬂ¬àπí = strpos($fíê÷™Èùñ, $BÔ∂á•´±•) === 0; return $d≈µﬂ¬àπí; } public function getType() { $D¡ªáìàÍ± =& $_SERVER[áí∂¯Â¸Áò]; $D±¨é⁄’ﬁÉ = str_replace($D¡ªáìàÍ±[71], $D¡ªáìàÍ±[33], get_class($this)); return strtolower($D±¨é⁄’ﬁÉ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($b•«Ω√ñﬁı, $eëÛïﬂ›”ã) { $aæôµÃÑªØ =& $_SERVER[áí∂¯Â¸Áò]; $F“íÔ◊à∫√ = rtrim($b•«Ω√ñﬁı, $aæôµÃÑªØ[8]) . $aæôµÃÑªØ[8] . $eëÛïﬂ›”ã; $E·√Ù¬ø≈µ = $this->exist($F“íÔ◊à∫√); return $E·√Ù¬ø≈µ ? $F“íÔ◊à∫√ : !1; } public function setModifyTime($bâ¢èÛâ≤Ã, $fÇÜ¬äæ§Ø = '') { } public function renameObject($a≤ÔÖéÇ¥Õ, $cì§ù∏∑Ãˆ) { goto Eû≥ÎœÃ—‰; fñÖŸ®§Á¯: return $CÇÉﬁëå∂  ? $cì§ù∏∑Ãˆ : !1; goto cÜ™ùﬁ“êø; Eû≥ÎœÃ—‰: $cŸóßã∞≥á =& $_SERVER[áí∂¯Â¸Áò]; $eé◊∂Âœï = $cì§ù∏∑Ãˆ; Hook::trigger($cŸóßã∞≥á[72], $this, $a≤ÔÖéÇ¥Õ, $this, $this->pathFather($a≤ÔÖéÇ¥Õ) . $cì§ù∏∑Ãˆ); goto CûÙËÌ∂ﬂ‡; CûÙËÌ∂ﬂ‡: $a≤ÔÖéÇ¥Õ = $this->getPathOuter($a≤ÔÖéÇ¥Õ); $cì§ù∏∑Ãˆ = $this->pathFather($a≤ÔÖéÇ¥Õ) . $cì§ù∏∑Ãˆ; if (IO::isFile($a≤ÔÖéÇ¥Õ)) { $CÇÉﬁëå∂  = IO::copy($a≤ÔÖéÇ¥Õ, $this->pathFather($a≤ÔÖéÇ¥Õ), REPEAT_RENAME_FOLDER, $eé◊∂Âœï); if ($CÇÉﬁëå∂ ) { IO::remove($a≤ÔÖéÇ¥Õ); } } else { $CÇÉﬁëå∂  = IO::mkdir($cì§ù∏∑Ãˆ); if (!$CÇÉﬁëå∂ ) { return !1; } $eΩ£¬ı‡âÿ = IO::listPath($a≤ÔÖéÇ¥Õ, !0); $cÈ©úû«ÙÓ = array_merge($eΩ£¬ı‡âÿ[$cŸóßã∞≥á[73]], $eΩ£¬ı‡âÿ[$cŸóßã∞≥á[74]]); foreach ($cÈ©úû«ÙÓ as $aü⁄Â÷ÃÍÊ) { IO::move($aü⁄Â÷ÃÍÊ[$cŸóßã∞≥á[75]], $cì§ù∏∑Ãˆ, REPEAT_RENAME_FOLDER); } IO::remove($a≤ÔÖéÇ¥Õ); } goto fñÖŸ®§Á¯; cÜ™ùﬁ“êø: } public function tempFile($A®ï‰êò™¶ = '', $b„¥£±É≥√ = '') { goto c÷º¬Õã∫∑; dç´ì˘¡Èæ: $EÁ∏ÌªáŒè = $cøı›‘∂Õõ . $A®ï‰êò™¶; @touch($EÁ∏ÌªáŒè); if ($b„¥£±É≥√) { file_put_contents($EÁ∏ÌªáŒè, $b„¥£±É≥√); } goto bá≤ä©Çéº; c÷º¬Õã∫∑: if (!$A®ï‰êò™¶) { $A®ï‰êò™¶ = rand_string(15); } $cøı›‘∂Õõ = TEMP_FILES . rand_string(15) . $_SERVER[áí∂¯Â¸Áò][8]; @mkdir($cøı›‘∂Õõ, 511, !0); goto dç´ì˘¡Èæ; bá≤ä©Çéº: return $EÁ∏ÌªáŒè; goto Fä´›ÿ °Ü; Fä´›ÿ °Ü: } public function tempFileRemve($c∫î¶Á¡ßÛ) { @unlink($c∫î¶Á¡ßÛ); @rmdir($this->pathFather($c∫î¶Á¡ßÛ)); } public function mkfile($f†⁄“ÌªÉ†, $Fı¥¯õ∆Üé = '', $BÛØµö™óø = REPEAT_RENAME) { } public function mkdir($f©âÇÎ÷õ·, $dµô‰“ç‹§ = REPEAT_SKIP) { } public function delFile($Eè¢ÈüÍ‰ì) { } public function delFolder($c¥÷¢ïÛê©) { } public function copyFile($Fã™¿øÜô, $Bﬁúãü√‚î) { } public function moveFile($eÑÆ““Öºà, $AìÛ∏±ä¯ñ) { } public function remove($f˘∫Æ⁄ÉÁÖ) { if ($this->isFile($f˘∫Æ⁄ÉÁÖ)) { return $this->delFile($f˘∫Æ⁄ÉÁÖ); } return $this->delFolder($f˘∫Æ⁄ÉÁÖ); } public function rename($aºÛÈ≈∫ßœ, $A”ü”õœº¡) { } public function exist($C•öÂßÿ¶Ú) { } public function findByHash($EàŒû⁄é¬… = '', $fíÁÉãÈê∆ = '') { return !1; } public function isFile($A–≈ëè◊’‹) { } public function isFolder($b¢ﬂËãÎ¶•) { } public function size($aêÌâû‰úù) { } public function info($B∏ΩøÇ˜ñˆ) { } public function infoSimple($e·Ô±À•ã’) { return $this->info($e·Ô±À•ã’); } public function infoAuth($dùìê∞ÙÆå) { return $this->info($dùìê∞ÙÆå); } public function infoFull($CÛüÑ€·ª◊) { return $this->info($CÛüÑ€·ª◊); } public function infoWithChildren($CÑæµÿÖª’) { $aÒ€ñˆ≠†Œ =& $_SERVER[áí∂¯Â¸Áò]; static $bËõôƒíß« = array(); if (isset($bËõôƒíß«[$CÑæµÿÖª’])) { return $bËõôƒíß«[$CÑæµÿÖª’]; } $F»∞Ú”√Ó• = $this->info($CÑæµÿÖª’); if ($F»∞Ú”√Ó• && $F»∞Ú”√Ó•[$aÒ€ñˆ≠†Œ[29]] == $aÒ€ñˆ≠†Œ[76]) { $Dßµ‘ÇÓµ = array($aÒ€ñˆ≠†Œ[77] => 0, $aÒ€ñˆ≠†Œ[78] => 0, $aÒ€ñˆ≠†Œ[79] => 0); $this->infoChildren($CÑæµÿÖª’, $Dßµ‘ÇÓµ); $F»∞Ú”√Ó•[$aÒ€ñˆ≠†Œ[77]] = $Dßµ‘ÇÓµ[$aÒ€ñˆ≠†Œ[77]]; $F»∞Ú”√Ó•[$aÒ€ñˆ≠†Œ[80]] = array($aÒ€ñˆ≠†Œ[81] => $Dßµ‘ÇÓµ[$aÒ€ñˆ≠†Œ[78]], $aÒ€ñˆ≠†Œ[82] => $Dßµ‘ÇÓµ[$aÒ€ñˆ≠†Œ[79]]); $bËõôƒíß«[$CÑæµÿÖª’] = $F»∞Ú”√Ó•; } return $F»∞Ú”√Ó•; } public function listPath($FùÚ §Îçû, $D∑®≤⁄Ú¨¨ = false) { } public function has($f›«¶˘∆√ø, $E•Æ®ÕÑ¥√ = false, $a‘©„¡à›‚ = false) { } public function canRead($c£Àß¥„”∫) { } public function canWrite($däÃ¢ÍºùÛ) { } public function getContent($eåÒ≤Õ¶¶û) { } public function setContent($C¨›¨¿ê∫—, $BÈ•Æ†ﬂÚú = '') { } protected function infoChildren($bä¢èîËÖÁ, &$aÆ‚üÃß’å) { $EÉ√áÉÈÑó =& $_SERVER[áí∂¯Â¸Áò]; check_abort(); $E≤£¯èÃ“» = $this->listPath($bä¢èîËÖÁ, !0); $E≤£¯èÃ“» = array_merge($E≤£¯èÃ“»[$EÉ√áÉÈÑó[74]], $E≤£¯èÃ“»[$EÉ√áÉÈÑó[73]]); foreach ($E≤£¯èÃ“» as $FøÏíïñπ˘) { if ($FøÏíïñπ˘[$EÉ√áÉÈÑó[29]] == $EÉ√áÉÈÑó[76]) { $aÆ‚üÃß’å[$EÉ√áÉÈÑó[79]]++; $dÃ‡¬ÓåÓú = $this->getPathInner($FøÏíïñπ˘[$EÉ√áÉÈÑó[75]]); $this->infoChildren($dÃ‡¬ÓåÓú, $aÆ‚üÃß’å); } else { $aÆ‚üÃß’å[$EÉ√áÉÈÑó[78]]++; $aÆ‚üÃß’å[$EÉ√áÉÈÑó[77]] += $FøÏíïñπ˘[$EÉ√áÉÈÑó[77]]; } } } public function fileSubstr($Fêù¶º°çÜ, $a“¢õ»∑¿¨, $Dı≤À∫‘‹“) { } public function listAll($Eﬂ∑êÈ–„é) { } public function upload($c™ç·≈íÒ”, $BöôŸæ®∑©, $EãÊ≥´èŒÙ = false, $AèÚ˜ı¿ÕÉ = REPEAT_REPLACE) { } public function uploadFileByID($fß‚ıúﬂˆÿ, $EßÒ≥éˆò£, $d¿¶∞Ω§ó‚) { } public function uploadFileByPath($d±Úπ∏±åç, $bÜ• ‰Áœª, $dƒ≈Ãéˆó˘ = array()) { } public function isUploadServer() { $f∏ë ö¡“Ô =& $_SERVER[áí∂¯Â¸Áò]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $f∏ë ö¡“Ô[83]) { return !0; } return $GLOBALS[$f∏ë ö¡“Ô[6]][$f∏ë ö¡“Ô[84]][$f∏ë ö¡“Ô[85]]; } public function isFileOutServer() { $e‹Ω∞è–äÙ =& $_SERVER[áí∂¯Â¸Áò]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $e‹Ω∞è–äÙ[83]) { return !0; } return $GLOBALS[$e‹Ω∞è–äÙ[6]][$e‹Ω∞è–äÙ[84]][$e‹Ω∞è–äÙ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($b™å∫ø“Œª) { $AÓ≤Ωƒ†ÿ± =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->isCdnHost()) { return $b™å∫ø“Œª; } return str_replace(trim(get_url_root($b™å∫ø“Œª), $AÓ≤Ωƒ†ÿ±[8]), trim($this->cdnHost, $AÓ≤Ωƒ†ÿ±[8]), $b™å∫ø“Œª); } public function uploadLink($e¯∞ª„€ºß, $F¶„‡∂ÆÏ≥ = 0) { goto fãÉƒ÷’†º; f´Ç∂∞âÁù: if ($A”¬‰é÷πÌ) { $A”¬‰é÷πÌ[$D¬Èô†“ÏΩ[89]] = $e¯∞ª„€ºß; $A”¬‰é÷πÌ[$D¬Èô†“ÏΩ[90]] = $BÃÓ…ïµøõ; } return $A”¬‰é÷πÌ; goto EîŸ †öˆÈ; c’áﬂ«á¿©: if (!in_array($BÃÓ…ïµøõ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $f∫¬õ∆Û≤† = 1024 * 1024 * 10; goto fí•™Ö±Æ©; fãÉƒ÷’†º: $D¬Èô†“ÏΩ =& $_SERVER[áí∂¯Â¸Áò]; if ($this->isUploadServer()) { return; } $BÃÓ…ïµøõ = $this->getType(); goto c’áﬂ«á¿©; fí•™Ö±Æ©: $FıœŸô∫Ö∫ = $F¶„‡∂ÆÏ≥ <= $f∫¬õ∆Û≤† ? $D¬Èô†“ÏΩ[87] : $D¬Èô†“ÏΩ[88]; $f«√πºÕöÑ = (!$F¶„‡∂ÆÏ≥ ? 1 : ceil($F¶„‡∂ÆÏ≥ / pow(1024, 3))) * 3600 * 4; $A”¬‰é÷πÌ = $this->{$FıœŸô∫Ö∫}($e¯∞ª„€ºß, $f«√πºÕöÑ); goto f´Ç∂∞âÁù; EîŸ †öˆÈ: } public function uploadFormData($F´†Ê∏ß¿‡, $BÏÑ©π›Öú = 3600) { } public function multiUploadFormData($BÑå—≈Òú§, $cáÂˆÜ⁄ﬁß = 3600) { } public function download($FÖ±Ìüìö∏, $cÌà‘⁄á⁄Ω) { } public function ext($D¬àæåΩ£ˆ) { $båÙ≠â¿Ö„ =& $_SERVER[áí∂¯Â¸Áò]; if (strpos($D¬àæåΩ£ˆ, $båÙ≠â¿Ö„[8]) === -1) { $eœœ•˜∑è = $D¬àæåΩ£ˆ; } else { $eœœ•˜∑è = $this->pathThis($D¬àæåΩ£ˆ); } $CÔ¢—•«ˆ◊ = $båÙ≠â¿Ö„[33]; if (strstr($eœœ•˜∑è, $båÙ≠â¿Ö„[91])) { $CÔ¢—•«ˆ◊ = substr($eœœ•˜∑è, strrpos($eœœ•˜∑è, $båÙ≠â¿Ö„[91]) + 1); $CÔ¢—•«ˆ◊ = strtolower($CÔ¢—•«ˆ◊); } if (strlen($CÔ¢—•«ˆ◊) > 3 && preg_match($båÙ≠â¿Ö„[92], $CÔ¢—•«ˆ◊, $Aêõ‹ŸÑΩü)) { $CÔ¢—•«ˆ◊ = $båÙ≠â¿Ö„[33]; } return $CÔ¢—•«ˆ◊; } public function pathThis($bäê üËñ—) { $Dà—Ô„ƒç¥ =& $_SERVER[áí∂¯Â¸Áò]; $bäê üËñ— = str_replace($Dà—Ô„ƒç¥[93], $Dà—Ô„ƒç¥[8], rtrim($bäê üËñ—, $Dà—Ô„ƒç¥[8])); $aÛÂ‰´Ü’Ö = strrpos($bäê üËñ—, $Dà—Ô„ƒç¥[8]); if ($aÛÂ‰´Ü’Ö === !1) { return $bäê üËñ—; } return substr($bäê üËñ—, $aÛÂ‰´Ü’Ö + 1); } public function pathFather($aßƒÚÈïÁª) { $A£ï¨Í∆Öá =& $_SERVER[áí∂¯Â¸Áò]; $aßƒÚÈïÁª = str_replace($A£ï¨Í∆Öá[93], $A£ï¨Í∆Öá[8], rtrim($aßƒÚÈïÁª, $A£ï¨Í∆Öá[8])); $e‚¥÷ΩÎã˜ = strrpos($aßƒÚÈïÁª, $A£ï¨Í∆Öá[8]); if ($e‚¥÷ΩÎã˜ === !1) { return $A£ï¨Í∆Öá[33]; } return substr($aßƒÚÈïÁª, 0, $e‚¥÷ΩÎã˜ + 1); } public function hashSimple($bÃ‡≈º·òù) { goto a◊é±æª§…; a‡î¿©Î€ˆ: $EªøÂ¨Üç¯ = 200; $Dñﬂ·‘ê⁄ƒ = 50; if ($C”Üó∫‹Ÿï <= $EªøÂ¨Üç¯ * $Dñﬂ·‘ê⁄ƒ) { return $this->hashMd5($bÃ‡≈º·òù) . $C”Üó∫‹Ÿï; } goto D≠›‰í˜ü»; a◊é±æª§…: $a‰ŒÙ≥Ô∏– =& $_SERVER[áí∂¯Â¸Áò]; if (!$bÃ‡≈º·òù) { return md5($a‰ŒÙ≥Ô∏–[33]); } $C”Üó∫‹Ÿï = $this->size($bÃ‡≈º·òù); goto a‡î¿©Î€ˆ; E•àƒÂõ«ô: $EÃ¥îı∆º€ .= $this->fileSubstr($bÃ‡≈º·òù, $C”Üó∫‹Ÿï - $EªøÂ¨Üç¯, $EªøÂ¨Üç¯); return md5($EÃ¥îı∆º€) . $C”Üó∫‹Ÿï; goto eåı–◊Ñœ; D≠›‰í˜ü»: $c–ßŸﬂµ¶õ = intval($C”Üó∫‹Ÿï / $Dñﬂ·‘ê⁄ƒ); $EÃ¥îı∆º€ = $a‰ŒÙ≥Ô∏–[33]; for ($BÉÂçì¶±Ï = 0; $BÉÂçì¶±Ï < $Dñﬂ·‘ê⁄ƒ; $BÉÂçì¶±Ï++) { $EÃ¥îı∆º€ .= $this->fileSubstr($bÃ‡≈º·òù, $c–ßŸﬂµ¶õ * $BÉÂçì¶±Ï, $EªøÂ¨Üç¯); } goto E•àƒÂõ«ô; eåı–◊Ñœ: } public static $md5Cache = array(); public function hashMd5($Dé≤√≠ÕÂÑ) { $Dé≤√≠ÕÂÑ = $this->iconvSystem($Dé≤√≠ÕÂÑ); if (isset(self::$md5Cache[$Dé≤√≠ÕÂÑ])) { return self::$md5Cache[$Dé≤√≠ÕÂÑ]; } self::$md5Cache[$Dé≤√≠ÕÂÑ] = $this->hashMd5Shell($Dé≤√≠ÕÂÑ); if (!self::$md5Cache[$Dé≤√≠ÕÂÑ]) { self::$md5Cache[$Dé≤√≠ÕÂÑ] = @md5_file($Dé≤√≠ÕÂÑ); } return self::$md5Cache[$Dé≤√≠ÕÂÑ]; } private function hashMd5Shell($aà¡Œ∫…¢ø) { goto cÒı©–ÌêÙ; cÒı©–ÌêÙ: $Eü„åâõå =& $_SERVER[áí∂¯Â¸Áò]; if (!function_exists($Eü„åâõå[94])) { return !1; } $B‘¯∫“è‡Ì = array($Eü„åâõå[95], $Eü„åâõå[96]); goto d·Œ›™°ﬂè; aé€∆Ô•ëú: $fÍÑ≈Ë˘Øè = shell_exec($dÙ•ª£ˆÿ… . "\40\x22{$aà¡Œ∫…¢ø}\42"); $fÍÑ≈Ë˘Øè = str_replace($Eü„åâõå[100], $Eü„åâõå[33], $fÍÑ≈Ë˘Øè); return substr($fÍÑ≈Ë˘Øè, 0, 32); goto Cß“’™‘≈—; d·Œ›™°ﬂè: $dÙ•ª£ˆÿ… = Cache::get($Eü„åâõå[97]); if (!$dÙ•ª£ˆÿ…) { $b∏∞åæÆåÎ = BASIC_PATH . $Eü„åâõå[98]; $F¯ãÿöâÜ¢ = md5_file($b∏∞åæÆåÎ); $dÙ•ª£ˆÿ… = $Eü„åâõå[99]; foreach ($B‘¯∫“è‡Ì as $Fı≈í¥ª€è) { $fÍÑ≈Ë˘Øè = shell_exec($Fı≈í¥ª€è . "\x20\x22{$b∏∞åæÆåÎ}\x22"); if ($fÍÑ≈Ë˘Øè && substr(trim($fÍÑ≈Ë˘Øè), 0, 32) == $F¯ãÿöâÜ¢) { $dÙ•ª£ˆÿ… = $Fı≈í¥ª€è; break; } } Cache::set($Eü„åâõå[97], $dÙ•ª£ˆÿ…, 3600); } if ($dÙ•ª£ˆÿ… == $Eü„åâõå[99]) { return !1; } goto aé€∆Ô•ëú; Cß“’™‘≈—: } public function link($CãÜÛ∏ì‚†) { return $CãÜÛ∏ì‚†; } public function fileOut($eÉ◊‹Ïâ°í, $FÆå–«áÛå = false, $a–¡ßÌœ€¿ = false, $bÉ›£î˘Üπ = '') { goto c§¨—ë®öë; bÎ÷∫Ÿü÷ı: $BÓÒÚíÍ¨ = !0; if ($_SERVER[$EìïΩ˘…§[151]] == $EìïΩ˘…§[152] && $cÇ√¬ﬂÍû÷ > 1204 * 1024 * 1024 * 2) { $BÓÒÚíÍ¨ = !1; } if ($BÓÒÚíÍ¨) { header($EìïΩ˘…§[153] . ($Cõ¯Í°Çﬁé - $d≤≠¶æñ Ü + 1)); } goto E›Á≤—‰éÉ; B¥°Ê£⁄‚Ñ: $bÆ Î†•ƒÊ = strtolower($_SERVER[$EìïΩ˘…§[139]]); if ($d»◊ëúÖ¨ã && $bÆ Î†•ƒÊ && $B⁄Ô“∞ô´Ñ) { if (strstr($bÆ Î†•ƒÊ, $EìïΩ˘…§[140])) { header($EìïΩ˘…§[141] . $eÉ◊‹Ïâ°í); } else { if (strstr($bÆ Î†•ƒÊ, $EìïΩ˘…§[142])) { header($EìïΩ˘…§[143] . $eÉ◊‹Ïâ°í); } else { if (strstr($bÆ Î†•ƒÊ, $EìïΩ˘…§[144])) { header($EìïΩ˘…§[145] . $eÉ◊‹Ïâ°í); } } } if ($b£®ÒÛ≤∞Æ) { header($EìïΩ˘…§[146] . $b£®ÒÛ≤∞Æ); } return; } if (isset($_SERVER[$EìïΩ˘…§[147]])) { if (preg_match($EìïΩ˘…§[148], $_SERVER[$EìïΩ˘…§[147]], $dçÂΩ‘†Â÷)) { $d≤≠¶æñ Ü = intval($dçÂΩ‘†Â÷[1]); if (!empty($dçÂΩ‘†Â÷[2])) { $Cõ¯Í°Çﬁé = intval($dçÂΩ‘†Â÷[2]); } } header($EìïΩ˘…§[149]); header("\103\x6f\x6e\x74\x65\x6e\x74\55\x52\x61\156\147\145\x3a\40\142\171\164\x65\x73\40{$d≤≠¶æñ Ü}\55{$Cõ¯Í°Çﬁé}\x2f" . $cÇ√¬ﬂÍû÷); } else { header($EìïΩ˘…§[150]); } goto bÎ÷∫Ÿü÷ı; FâøíÓ£´Ã: if (in_array($d Ù ê˘Ú◊, array($EìïΩ˘…§[108], $EìïΩ˘…§[109], $EìïΩ˘…§[110], $EìïΩ˘…§[111]))) { $d Ù ê˘Ú◊ = $EìïΩ˘…§[112]; } if (!$bÉ›£î˘Üπ) { $bÉ›£î˘Üπ = md5($D¢ôÁ•öæç . $this->hashSimple($eÉ◊‹Ïâ°í)); } $bÉ›£î˘Üπ = $EìïΩ˘…§[113] . $bÉ›£î˘Üπ . $EìïΩ˘…§[113]; goto e¢†ë∑™ã§; E≠√æ∞ßıá: $d≤≠¶æñ Ü = 0; $Cõ¯Í°Çﬁé = $cÇ√¬ﬂÍû÷ - 1; $d Ù ê˘Ú◊ = $this->ext($b÷πèÎßÑ´); goto FâøíÓ£´Ã; A©ı“˜ﬂãç: header($EìïΩ˘…§[125]); header($EìïΩ˘…§[126]); header($EìïΩ˘…§[127]); goto dòıâå£üœ; DÆäÑ¨ÙÛ©: header($EìïΩ˘…§[135] . $cÇ√¬ﬂÍû÷); header($EìïΩ˘…§[136]); if (!$FÆå–«áÛå && $d Ù ê˘Ú◊ == $EìïΩ˘…§[137]) { if ($cÇ√¬ﬂÍû÷ > 1024 * 1024 * 5) { die; } $B˜Î•Ãø∆‰ = $this->getContent($eÉ◊‹Ïâ°í); $B˜Î•Ãø∆‰ = Html::clearSVG($B˜Î•Ãø∆‰); header($EìïΩ˘…§[138] . $cÇ√¬ﬂÍû÷); echo $B˜Î•Ãø∆‰; die; } goto B¥°Ê£⁄‚Ñ; aõ§àãÉß•: @ob_end_clean(); set_timeout(); $Dç Œâõ◊‹ = $this->infoFull($eÉ◊‹Ïâ°í); goto CÊ≠ªÃû»è; e«ëı≤± : $d»◊ëúÖ¨ã = $this->getType() == $EìïΩ˘…§[102]; $B⁄Ô“∞ô´Ñ = $GLOBALS[$EìïΩ˘…§[6]][$EìïΩ˘…§[84]][$EìïΩ˘…§[103]][$EìïΩ˘…§[104]]; $b£®ÒÛ≤∞Æ = (double) $GLOBALS[$EìïΩ˘…§[6]][$EìïΩ˘…§[84]][$EìïΩ˘…§[103]][$EìïΩ˘…§[105]] * 1024 * 1024; goto aõ§àãÉß•; e¢†ë∑™ã§: $Eœå÷Ö˘éä = get_file_mime($d Ù ê˘Ú◊); if (strstr($Eœå÷Ö˘éä, $EìïΩ˘…§[114])) { $Eœå÷Ö˘éä = $Eœå÷Ö˘éä . $EìïΩ˘…§[115]; } if ($FÆå–«áÛå === !1 && !mime_support($Eœå÷Ö˘éä)) { $FÆå–«áÛå = !0; $Eœå÷Ö˘éä = $EìïΩ˘…§[116]; } goto DïËﬁ¥ÀÓë; E›Á≤—‰éÉ: if ($_SERVER[$EìïΩ˘…§[154]] == $EìïΩ˘…§[155]) { return; } $cÕı ≤ÿò› = 1024 * 100; $DÖÈª£äöÀ = 0; goto A…Ç«Öèú¬; A…Ç«Öèú¬: if ($b£®ÒÛ≤∞Æ) { $DÖÈª£äöÀ = intval(1000 * 1000 * ($cÕı ≤ÿò› / $b£®ÒÛ≤∞Æ)); } while ($d≤≠¶æñ Ü <= $Cõ¯Í°Çﬁé) { $AÒ«ıÉØ—« = timeFloat(); check_abort(); $D¶∆Ç“˘ò¥ = $Cõ¯Í°Çﬁé - $d≤≠¶æñ Ü + 1; if ($D¶∆Ç“˘ò¥ <= $cÕı ≤ÿò›) { $cÕı ≤ÿò› = $D¶∆Ç“˘ò¥; } echo $this->fileSubstr($eÉ◊‹Ïâ°í, $d≤≠¶æñ Ü, $cÕı ≤ÿò›); $d≤≠¶æñ Ü += $cÕı ≤ÿò›; if ($cÕı ≤ÿò› == $D¶∆Ç“˘ò¥) { $d≤≠¶æñ Ü = $Cõ¯Í°Çﬁé + 1; } if ($DÖÈª£äöÀ) { $Cïœﬁ êñ… = intval(1000 * 1000 * (timeFloat() - $AÒ«ıÉØ—«)); $DÈªøÍßÎ∫ = $DÖÈª£äöÀ - $Cïœﬁ êñ…; if ($DÈªøÍßÎ∫ > 5) { usleep($DÈªøÍßÎ∫); } } } goto C ÈŒØÏÂ¥; c§¨—ë®öë: $EìïΩ˘…§ =& $_SERVER[áí∂¯Â¸Áò]; $this->cacheMethod(null, null); if (!$eÉ◊‹Ïâ°í || !$this->exist($eÉ◊‹Ïâ°í)) { show_json(LNG($EìïΩ˘…§[101]), !1, $a–¡ßÌœ€¿); } goto e«ëı≤± ; DïËﬁ¥ÀÓë: $cÍ‘ê¨Í∑´ = rawurlencode($b÷πèÎßÑ´); $cÍ‘ê¨Í∑´ = $EìïΩ˘…§[113] . $cÍ‘ê¨Í∑´ . $EìïΩ˘…§[117] . $cÍ‘ê¨Í∑´; if ($FÆå–«áÛå) { header($EìïΩ˘…§[118]); header($EìïΩ˘…§[119] . $cÍ‘ê¨Í∑´); } else { header($EìïΩ˘…§[120] . $cÍ‘ê¨Í∑´); } goto F⁄ﬂ—¡¶Ÿ¬; CÊ≠ªÃû»è: $cÇ√¬ﬂÍû÷ = $Dç Œâõ◊‹[$EìïΩ˘…§[77]]; $D¢ôÁ•öæç = gmdate($EìïΩ˘…§[106], $Dç Œâõ◊‹[$EìïΩ˘…§[107]]); $b÷πèÎßÑ´ = $a–¡ßÌœ€¿ ? $a–¡ßÌœ€¿ : $this->iconvApp($Dç Œâõ◊‹[$EìïΩ˘…§[28]]); goto E≠√æ∞ßıá; dòıâå£üœ: if (isset($_SERVER[$EìïΩ˘…§[128]]) && strtotime($_SERVER[$EìïΩ˘…§[128]]) == $Dç Œâõ◊‹[$EìïΩ˘…§[107]]) { header($EìïΩ˘…§[129], !0, 304); die; } if (isset($_SERVER[$EìïΩ˘…§[130]]) && $_SERVER[$EìïΩ˘…§[130]] == $bÉ›£î˘Üπ) { header($EìïΩ˘…§[131] . $bÉ›£î˘Üπ, !0, 304); die; } header($EìïΩ˘…§[131] . $bÉ›£î˘Üπ); goto EÎ”∂ø⁄√±; EÎ”∂ø⁄√±: header($EìïΩ˘…§[132] . $D¢ôÁ•öæç . $EìïΩ˘…§[124]); header($EìïΩ˘…§[133] . $b÷πèÎßÑ´); header($EìïΩ˘…§[134]); goto DÆäÑ¨ÙÛ©; F⁄ﬂ—¡¶Ÿ¬: header($EìïΩ˘…§[121]); header($EìïΩ˘…§[122] . $Eœå÷Ö˘éä); header($EìïΩ˘…§[123] . gmdate($EìïΩ˘…§[106], time() + 3600 * 24 * 30) . $EìïΩ˘…§[124]); goto A©ı“˜ﬂãç; C ÈŒØÏÂ¥: } public function fileOutServer($a‚µæ‘Ø‹·, $DãâÜ•Ω‡ú = false, $D¡Ï≈À™ò = false, $eÃ‡Ì◊Àıà = '') { $this->fileOut($a‚µæ‘Ø‹·, $DãâÜ•Ω‡ú, $D¡Ï≈À™ò, $eÃ‡Ì◊Àıà); } public function fileOutLink($báÁŸÕÚ§Ë) { header($_SERVER[áí∂¯Â¸Áò][156] . $báÁŸÕÚ§Ë); die; } public function cacheMethod($AÕÖãø∆ÿà, $b€òƒè¯≈é) { goto DÙ©´ëÖâç; DÙ©´ëÖâç: $D√Êûö”˘™ =& $_SERVER[áí∂¯Â¸Áò]; static $Dêàöíﬁ°Ò = array(); $A◊ÈÛ∫µÉÑ = $b€òƒè¯≈é ? ltrim($this->getPathOuter($b€òƒè¯≈é), $D√Êûö”˘™[8]) : $b€òƒè¯≈é; goto d“ÚıÔµæ‚; Cüë¬Õﬁ¨‘: $D≥’‚∂Ï á = isset($Dêàöíﬁ°Ò[$b´è÷ê≤„Ú]) ? $Dêàöíﬁ°Ò[$b´è÷ê≤„Ú] : null; if (!is_null($D≥’‚∂Ï á)) { return $D≥’‚∂Ï á; } $D≥’‚∂Ï á = $this->{$AÕÖãø∆ÿà}($b€òƒè¯≈é); goto b¥áçõ∏ÇÔ; b¥áçõ∏ÇÔ: $Dêàöíﬁ°Ò[$b´è÷ê≤„Ú] = $D≥’‚∂Ï á; return $D≥’‚∂Ï á; goto D…Ÿ˘£ÑÂâ; d“ÚıÔµæ‚: $b´è÷ê≤„Ú = $D√Êûö”˘™[157] . $AÕÖãø∆ÿà . $D√Êûö”˘™[158] . rtrim($A◊ÈÛ∫µÉÑ, $D√Êûö”˘™[8]); if (is_null($AÕÖãø∆ÿà)) { $Dêàöíﬁ°Ò = array(); return; } if (is_null($b€òƒè¯≈é)) { unset($Dêàöíﬁ°Ò[$b´è÷ê≤„Ú]); return; } goto Cüë¬Õﬁ¨‘; D…Ÿ˘£ÑÂâ: } public function fileOutImage($e±¶â®›∞µ, $A´ÈÓ√êØÌ = 250) { goto b°–»Ω˘‡§; aÓ≥§⁄ÉÁ†: if (!file_exists($B™ã‡≤ﬂÕä) || filesize($B™ã‡≤ﬂÕä) < 100) { return @file_exists($DªÖ«ÕÚò©) ? IO::fileOut($DªÖ«ÕÚò©) : $this->fileOut($e±¶â®›∞µ); } if (!($B‚á¥ë≈ù’ = IO::move($B™ã‡≤ﬂÕä, $Aäë®°ê·∏))) { return IO::fileOut($B™ã‡≤ﬂÕä); } del_file($B™ã‡≤ﬂÕä); goto F¿äàíø‚€; A»≤™ÛπÜÃ: if ($E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[77]] <= 1024 * 50 || $e◊Ìï™£ÿÀ || !function_exists($c…â¢¬Á‹Á[164]) || $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[165]] == $c…â¢¬Á‹Á[166]) { return $this->fileOut($e±¶â®›∞µ, !1, $FöÜÏ∆öÖ¯); } if (isset($E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]][$c…â¢¬Á‹Á[167]])) { $aû‚Ò…ÌÕ® = $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]][$c…â¢¬Á‹Á[167]]; } else { if (isset($E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]][$c…â¢¬Á‹Á[168]])) { $aû‚Ò…ÌÕ® = $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]][$c…â¢¬Á‹Á[168]]; } else { $aû‚Ò…ÌÕ® = md5("{$E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[28]]}\x5f{$E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[75]]}\x5f{$E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[77]]}"); } } $EöŒ∏™Õ‹‰ = "{$aû‚Ò…ÌÕ®}\137{$A´ÈÓ√êØÌ}\x2e\x70\x6e\x67"; goto bàÙ∆·æÓ´; b°–»Ω˘‡§: $c…â¢¬Á‹Á =& $_SERVER[áí∂¯Â¸Áò]; if (substr($e±¶â®›∞µ, 0, 4) == $c…â¢¬Á‹Á[144]) { $this->fileOutLink($e±¶â®›∞µ); } $E¡‡‰ä∫ä· = $this->info($e±¶â®›∞µ); goto cáÔÁºû†ä; cáÔÁºû†ä: $FöÜÏ∆öÖ¯ = $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[28]]; $e◊Ìï™£ÿÀ = !1; if (isset($GLOBALS[$c…â¢¬Á‹Á[159]]) && $GLOBALS[$c…â¢¬Á‹Á[159]][$c…â¢¬Á‹Á[75]] == $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[75]]) { $F·∏ﬁ⁄öÜƒ = $GLOBALS[$c…â¢¬Á‹Á[159]][$c…â¢¬Á‹Á[160]]; if (!$E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]]) { $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]] = $GLOBALS[$c…â¢¬Á‹Á[159]]; } if (isset($F·∏ﬁ⁄öÜƒ[$c…â¢¬Á‹Á[162]])) { if ($F·∏ﬁ⁄öÜƒ[$c…â¢¬Á‹Á[162]] <= $A´ÈÓ√êØÌ && $F·∏ﬁ⁄öÜƒ[$c…â¢¬Á‹Á[163]] <= $A´ÈÓ√êØÌ) { $e◊Ìï™£ÿÀ = !0; } } $FöÜÏ∆öÖ¯ = $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[161]][$c…â¢¬Á‹Á[28]]; } goto A»≤™ÛπÜÃ; bàÙ∆·æÓ´: if (!($f˘¿èˆ…ñ≥ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $c…â¢¬Á‹Á[169]))) { $Aäë®°ê·∏ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $c…â¢¬Á‹Á[170]); } else { $Aäë®°ê·∏ = KodIO::make($f˘¿èˆ…ñ≥); } if ($f˘¿èˆ…ñ≥ = IO::fileNameExist($Aäë®°ê·∏, $EöŒ∏™Õ‹‰)) { $B™ã‡≤ﬂÕä = KodIO::make($f˘¿èˆ…ñ≥); return IO::fileOut($B™ã‡≤ﬂÕä, !1, $FöÜÏ∆öÖ¯); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto C›©ëè«ŸÚ; C›©ëè«ŸÚ: $B™ã‡≤ﬂÕä = DATA_THUMB . $EöŒ∏™Õ‹‰; del_file($B™ã‡≤ﬂÕä); if (!@file_exists($B™ã‡≤ﬂÕä)) { $aóÿÖﬂ±ÀŸ = TEMP_FILES; if (!is_dir($aóÿÖﬂ±ÀŸ)) { mk_dir($aóÿÖﬂ±ÀŸ); } $DªÖ«ÕÚò© = $aóÿÖﬂ±ÀŸ . $aû‚Ò…ÌÕ® . $c…â¢¬Á‹Á[91] . $E¡‡‰ä∫ä·[$c…â¢¬Á‹Á[165]]; if (!@file_exists($DªÖ«ÕÚò©)) { $DªÖ«ÕÚò© = $this->download($e±¶â®›∞µ, $DªÖ«ÕÚò©); } $C¶∑∆ú∂™Œ = new ImageThumb($DªÖ«ÕÚò©, $c…â¢¬Á‹Á[171]); $C¶∑∆ú∂™Œ->prorate($B™ã‡≤ﬂÕä, $A´ÈÓ√êØÌ, $A´ÈÓ√êØÌ * 10); } goto aÓ≥§⁄ÉÁ†; F¿äàíø‚€: IO::fileOut($B‚á¥ë≈ù’); goto aœ∆∫Øøóæ; aœ∆∫Øøóæ: } public function fileOutImageServer($Fâá‹Á–ï«, $fÖ‰ØûÿÜ£ = 250) { $this->fileOutImage($Fâá‹Á–ï«, $fÖ‰ØûÿÜ£); } public function fileNameAuto($eΩ’ìıÏ·ê, $AÚø£ü¬÷ê, $c¯—›√ê»Ÿ = REPEAT_RENAME, $E¥π◊êùóã = false) { goto eèÑñ°Î∆∏; C∑öÕ‹öä: $FÍ√È≥”ß” = 1; $aóé—Ø˜ÉÂ = substr($AÚø£ü¬÷ê, 0, strlen($AÚø£ü¬÷ê) - strlen($EñÒÁ∑∞çµ)); $dÈÚ†«‹èÇ = $aóé—Ø˜ÉÂ . "\x28{$FÍ√È≥”ß”}\x29{$EñÒÁ∑∞çµ}"; goto dÍ˘ÌÓ«§Â; EêäÉºÕáé: if ($c¯—›√ê»Ÿ == REPEAT_SKIP) { return !1; } $EñÒÁ∑∞çµ = $eÉÉÿÜç˜∏[91] . get_path_ext($AÚø£ü¬÷ê); $EñÒÁ∑∞çµ = $EñÒÁ∑∞çµ == $eÉÉÿÜç˜∏[91] || $E¥π◊êùóã ? $eÉÉÿÜç˜∏[33] : $EñÒÁ∑∞çµ; goto C∑öÕ‹öä; eèÑñ°Î∆∏: $eÉÉÿÜç˜∏ =& $_SERVER[áí∂¯Â¸Áò]; $e≤Ã∂±†ÉÃ = $eΩ’ìıÏ·ê === $eÉÉÿÜç˜∏[33] ? $AÚø£ü¬÷ê : rtrim($eΩ’ìıÏ·ê, $eÉÉÿÜç˜∏[8]) . $eÉÉÿÜç˜∏[8] . $AÚø£ü¬÷ê; if ($c¯—›√ê»Ÿ == REPEAT_REPLACE || !$this->exist($e≤Ã∂±†ÉÃ) || $E¥π◊êùóã && $c¯—›√ê»Ÿ != REPEAT_RENAME_FOLDER) { return $AÚø£ü¬÷ê; } goto EêäÉºÕáé; dÍ˘ÌÓ«§Â: while ($this->exist(rtrim($eΩ’ìıÏ·ê, $eÉÉÿÜç˜∏[8]) . $eÉÉÿÜç˜∏[8] . $dÈÚ†«‹èÇ)) { $dÈÚ†«‹èÇ = $aóé—Ø˜ÉÂ . "\50{$FÍ√È≥”ß”}\x29{$EñÒÁ∑∞çµ}"; $FÍ√È≥”ß”++; } return $dÈÚ†«‹èÇ; goto eåπ´»œàÊ; eåπ´»œàÊ: } public function listAllFiles($E„£á‘èƒ„, $Aá∆ÏíñÏΩ, $CÚ˘≤Ÿ∑‘◊ = array()) { goto Aû‘ª√ÑÕº; e≈Ñã≤¿öè: foreach (array_unique($C‚‰òâΩÑ ) as $cµÇ‰ﬂÁ»ç) { $EÊÎµΩﬂû¿ = array($cÃÇË…ùö˘[75] => $this->getPathOuter($cÃÇË…ùö˘[8] . $E„£á‘èƒ„ . $cÃÇË…ùö˘[8] . $cµÇ‰ﬂÁ»ç), $cÃÇË…ùö˘[76] => 1, $cÃÇË…ùö˘[77] => 0); if (substr($cµÇ‰ﬂÁ»ç, -1) != $cÃÇË…ùö˘[8]) { $EÊÎµΩﬂû¿[$cÃÇË…ùö˘[76]] = 0; $fÆìæ¥ñÇÑ = $this->getPath($E„£á‘èƒ„ . $cÃÇË…ùö˘[8] . $cµÇ‰ﬂÁ»ç); $EÊÎµΩﬂû¿[$cÃÇË…ùö˘[77]] = isset($CÚ˘≤Ÿ∑‘◊[$fÆìæ¥ñÇÑ]) ? $CÚ˘≤Ÿ∑‘◊[$fÆìæ¥ñÇÑ] : $this->size($fÆìæ¥ñÇÑ); } $c…Ï’ç¡ç±[] = $EÊÎµΩﬂû¿; } return $c…Ï’ç¡ç±; goto fâéçÀóÎî; F∑ÂÈËî•≠: $E„£á‘èƒ„ = trim($E„£á‘èƒ„, $cÃÇË…ùö˘[8]); foreach ($Aá∆ÏíñÏΩ as $cµÇ‰ﬂÁ»ç) { $b∞ˆ´ç•∞£ = ltrim(substr($cµÇ‰ﬂÁ»ç, strlen($E„£á‘èƒ„)), $cÃÇË…ùö˘[8]); $C‚‰òâΩÑ  = array_merge($C‚‰òâΩÑ , $this->slicePath($b∞ˆ´ç•∞£)); } $c…Ï’ç¡ç± = array(); goto e≈Ñã≤¿öè; Aû‘ª√ÑÕº: $cÃÇË…ùö˘ =& $_SERVER[áí∂¯Â¸Áò]; if (empty($Aá∆ÏíñÏΩ)) { return array(); } $C‚‰òâΩÑ  = array(); goto F∑ÂÈËî•≠; fâéçÀóÎî: } public function slicePath($b–ä∏£„ã‹) { $BÁüô»ã®í =& $_SERVER[áí∂¯Â¸Áò]; $B˘’⁄‹ÉÃß = explode($BÁüô»ã®í[8], trim($b–ä∏£„ã‹, $BÁüô»ã®í[8])); $e©ùì‘¯©µ = 0; do { ++$e©ùì‘¯©µ; $Eÿ≥Âœ‡¢á[] = implode($BÁüô»ã®í[8], array_slice($B˘’⁄‹ÉÃß, 0, $e©ùì‘¯©µ)) . $BÁüô»ã®í[8]; } while ($e©ùì‘¯©µ < count($B˘’⁄‹ÉÃß)); $Eÿ≥Âœ‡¢á[count($B˘’⁄‹ÉÃß) - 1] = $b–ä∏£„ã‹; return $Eÿ≥Âœ‡¢á; } public function getHost() { $Fæó°®‘ˆŸ =& $_SERVER[áí∂¯Â¸Áò]; $B˜¥à“éÂè = parse_url(trim($this->domain, $Fæó°®‘ˆŸ[8])); $FïïÀà⁄§« = isset($B˜¥à“éÂè[$Fæó°®‘ˆŸ[172]]) ? $B˜¥à“éÂè[$Fæó°®‘ˆŸ[172]] : http_type(); $EŸÊï›∑ˆÀ = isset($B˜¥à“éÂè[$Fæó°®‘ˆŸ[173]]) ? $B˜¥à“éÂè[$Fæó°®‘ˆŸ[173]] : $B˜¥à“éÂè[$Fæó°®‘ˆŸ[75]]; if (isset($B˜¥à“éÂè[$Fæó°®‘ˆŸ[174]])) { $EŸÊï›∑ˆÀ .= $Fæó°®‘ˆŸ[4] . $B˜¥à“éÂè[$Fæó°®‘ˆŸ[174]]; } return $FïïÀà⁄§« . $Fæó°®‘ˆŸ[175] . $EŸÊï›∑ˆÀ; } public function pathEncode($B∆«∞√ã∏◊) { $BÇë¶Î¬Â¬ =& $_SERVER[áí∂¯Â¸Áò]; return str_replace($BÇë¶Î¬Â¬[176], $BÇë¶Î¬Â¬[8], rawurlencode($B∆«∞√ã∏◊)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($AáâÔ≤ÖÎ±) { set_timeout(); require_once SDK_DIR . $_SERVER[áí∂¯Â¸Áò][177]; parent::__construct(); $this->_init($AáâÔ≤ÖÎ±); } public function _init($AÖñååáÀı) { foreach ($AÖñååáÀı as $BÃ˘⁄ö€Òµ => $CÎÁ€÷”Ãö) { if (isset($this->{$BÃ˘⁄ö€Òµ})) { $this->{$BÃ˘⁄ö€Òµ} = $CÎÁ€÷”Ãö; } } $this->endpoint = $AÖñååáÀı[$_SERVER[áí∂¯Â¸Áò][178]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($B©§íó†°‚ = "\166\64") { $this->signVer = $B©§íó†°‚; $this->client->setSignatureVersion($B©§íó†°‚); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto A£È†€∂∏Ø; E—…±—ù¯Ü: if ($Fﬂπáí˘Ôñ[$fûøœ≈ìπË[179]] != $fûøœ≈ìπË[180] || $Fﬂπáí˘Ôñ[$fûøœ≈ìπË[181]] != $fûøœ≈ìπË[180]) { return !1; } $FÀ§ÆÉ·†Á = array_map($fûøœ≈ìπË[182], $Fﬂπáí˘Ôñ[$fûøœ≈ìπË[183]]); if (!is_array($FÀ§ÆÉ·†Á)) { $FÀ§ÆÉ·†Á = array(); } goto c®√¥¯Úëı; A£È†€∂∏Ø: $fûøœ≈ìπË =& $_SERVER[áí∂¯Â¸Áò]; $Fﬂπáí˘Ôñ = $this->getBucketCors(); if (!$Fﬂπáí˘Ôñ || !is_array($Fﬂπáí˘Ôñ)) { return !1; } goto E—…±—ù¯Ü; c®√¥¯Úëı: $c¬Ñ‚©»Ÿ‡ = array($fûøœ≈ìπË[184], $fûøœ≈ìπË[185], $fûøœ≈ìπË[186], $fûøœ≈ìπË[187], $fûøœ≈ìπË[188]); $eÙ£Ñ’¬åÛ = array_diff($c¬Ñ‚©»Ÿ‡, $FÀ§ÆÉ·†Á); return empty($eÙ£Ñ’¬åÛ); goto fò÷‚≠Ó‰–; fò÷‚≠Ó‰–: } public function mkfile($f»Æ´¿ŸÔâ, $C≠ª„˜÷æ√ = '', $Eõ¶°ËÁèì = REPEAT_RENAME) { $cúï–éöŸ∏ = $this->setContent($f»Æ´¿ŸÔâ, $C≠ª„˜÷æ√); if ($cúï–éöŸ∏ !== !1) { return $this->getPathOuter($f»Æ´¿ŸÔâ); } return !1; } public function mkdir($dîœÜÕ≠‰Â, $F£Ó–”µ◊Ú = REPEAT_SKIP) { if (empty($dîœÜÕ≠‰Â)) { return !1; } if ($this->_isFolder($dîœÜÕ≠‰Â)) { return $this->getPathOuter($dîœÜÕ≠‰Â); } $a∞æéà≈ÿÏ = $this->setContent($dîœÜÕ≠‰Â, $_SERVER[áí∂¯Â¸Áò][33], !0); if ($a∞æéà≈ÿÏ !== !1) { return $this->getPathOuter($dîœÜÕ≠‰Â); } return !1; } public function copyFile($eï≥ﬁç»–Ü, $d∑•˜Ç©õâ, $A»«–‹›ï∫ = array()) { $Aª•∂€ˆúç =& $_SERVER[áí∂¯Â¸Áò]; $F«í—⁄⁄Éí = $this->objectMeta($eï≥ﬁç»–Ü); if (!$F«í—⁄⁄Éí) { return !1; } if ($F«í—⁄⁄Éí[$Aª•∂€ˆúç[77]] <= 1024 * 1024 * 200) { $BﬂÙú«üË“ = $this->client->copyObject($this->bucket, $eï≥ﬁç»–Ü, $this->bucket, $d∑•˜Ç©õâ, $Aª•∂€ˆúç[189], $A»«–‹›ï∫); } else { $BﬂÙú«üË“ = $this->client->multiCopyObject($this->bucket, $eï≥ﬁç»–Ü, $this->bucket, $d∑•˜Ç©õâ, $A»«–‹›ï∫); } $BﬂÙú«üË“ = $BﬂÙú«üË“ ? $this->getPathOuter($d∑•˜Ç©õâ) : !1; return $BﬂÙú«üË“; } public function moveFile($Eå‡´πÉ÷õ, $eÚç≤®ﬁèå) { if ($this->copyFile($Eå‡´πÉ÷õ, $eÚç≤®ﬁèå)) { $this->delFile($Eå‡´πÉ÷õ); return $this->getPathOuter($eÚç≤®ﬁèå); } return !1; } public function delFile($Cä…ƒèÌºà) { return $this->client->deleteObject($this->bucket, $Cä…ƒèÌºà); } public function delFolder($Côû©üÆ∏à) { goto DÇ∂„ﬂÀçÚ; B‰ŒØ‰©î˜: return $fÿ£ùÜúá› === $FÈöÜ≥“»å ? !0 : !1; goto e¶„ä®∫‰Ü; Aø—·ÀÍ◊∞: $fÿ£ùÜúá› = $FÈöÜ≥“»å = 0; $f¿Ç£ÈîÈÌ = array_chunk(array_keys($d· Ê»Î”ë), 1000); foreach ($f¿Ç£ÈîÈÌ as $eêß∫°ôµÿ) { $fÿ£ùÜúá›++; $FÈöÜ≥“»å += (int) $this->client->deleteObjects($this->bucket, $eêß∫°ôµÿ); } goto B‰ŒØ‰©î˜; DÇ∂„ﬂÀçÚ: $AÖ„å§ √‚ =& $_SERVER[áí∂¯Â¸Áò]; $d· Ê»Î”ë = $this->listObjs($Côû©üÆ∏à); if (!$d· Ê»Î”ë) { $Côû©üÆ∏à = trim($Côû©üÆ∏à, $AÖ„å§ √‚[8]); if (!empty($Côû©üÆ∏à)) { $Côû©üÆ∏à .= $AÖ„å§ √‚[8]; } return $this->delFile($Côû©üÆ∏à); } goto Aø—·ÀÍ◊∞; e¶„ä®∫‰Ü: } public function rename($bÊÕ¥æïﬁÀ, $CâÓ‰Ω¢üÔ) { return $this->renameObject($bÊÕ¥æïﬁÀ, $CâÓ‰Ω¢üÔ); } public function listPath($DµÀõ« ëË, $Dóõ¥àòﬁ± = false) { $d¥Ø˜ØÜø· =& $_SERVER[áí∂¯Â¸Áò]; $eÍ±»¿¿Ûà = $this->listObjs($DµÀõ« ëË, null, null, $d¥Ø˜ØÜø·[8]); $EäÉÓıèÈí = array($d¥Ø˜ØÜø·[74] => array(), $d¥Ø˜ØÜø·[73] => array()); foreach ($eÍ±»¿¿Ûà as $E≥™äÉ‘ã® => $béàá≤Ω¢¡) { if ($E≥™äÉ‘ã® == $d¥Ø˜ØÜø·[8]) { continue; } if (isset($béàá≤Ω¢¡[$d¥Ø˜ØÜø·[190]])) { $EäÉÓıèÈí[$d¥Ø˜ØÜø·[74]][] = $this->folderInfo($béàá≤Ω¢¡[$d¥Ø˜ØÜø·[190]], $Dóõ¥àòﬁ±); } else { if (substr($béàá≤Ω¢¡[$d¥Ø˜ØÜø·[28]], -1) == $d¥Ø˜ØÜø·[8]) { continue; } $EäÉÓıèÈí[$d¥Ø˜ØÜø·[73]][] = $this->fileInfo($béàá≤Ω¢¡[$d¥Ø˜ØÜø·[28]], $Dóõ¥àòﬁ±, $béàá≤Ω¢¡); } } return $EäÉÓıèÈí; } private function fileInfo($A»ëΩ»üÂê, $cå÷ í‘õè = false, $Eõä¿ê‡Ã‘ = array()) { goto e≤ƒàõ¥˘‰; Cÿ–”ö„ Ï: return $c™ﬂ‰∞›£ç; goto A±ÒÌ’»é˜; b¥ïëóê€: if (empty($Eõä¿ê‡Ã‘)) { $Eõä¿ê‡Ã‘ = $this->objectMeta($A»ëΩ»üÂê); if (!$Eõä¿ê‡Ã‘) { return $c™ﬂ‰∞›£ç; } } if (isset($Eõä¿ê‡Ã‘[$C≠°è°ú˜¨[194]])) { $c™ﬂ‰∞›£ç[$C≠°è°ú˜¨[107]] = $Eõä¿ê‡Ã‘[$C≠°è°ú˜¨[194]]; } if (isset($Eõä¿ê‡Ã‘[$C≠°è°ú˜¨[77]])) { $c™ﬂ‰∞›£ç[$C≠°è°ú˜¨[77]] = $Eõä¿ê‡Ã‘[$C≠°è°ú˜¨[77]]; } goto Cÿ–”ö„ Ï; e≤ƒàõ¥˘‰: $C≠°è°ú˜¨ =& $_SERVER[áí∂¯Â¸Áò]; if ($cå÷ í‘õè) { return array($C≠°è°ú˜¨[28] => $this->pathThis($A»ëΩ»üÂê), $C≠°è°ú˜¨[75] => $this->getPathOuter($A»ëΩ»üÂê), $C≠°è°ú˜¨[29] => $C≠°è°ú˜¨[171], $C≠°è°ú˜¨[165] => $this->ext($A»ëΩ»üÂê), $C≠°è°ú˜¨[77] => isset($Eõä¿ê‡Ã‘[$C≠°è°ú˜¨[77]]) ? $Eõä¿ê‡Ã‘[$C≠°è°ú˜¨[77]] : 0, $C≠°è°ú˜¨[191] => 0, $C≠°è°ú˜¨[107] => 0, $C≠°è°ú˜¨[192] => !0, $C≠°è°ú˜¨[193] => !0); } $c™ﬂ‰∞›£ç = array($C≠°è°ú˜¨[28] => $this->pathThis($A»ëΩ»üÂê), $C≠°è°ú˜¨[75] => $this->getPathOuter($A»ëΩ»üÂê), $C≠°è°ú˜¨[29] => $C≠°è°ú˜¨[171], $C≠°è°ú˜¨[191] => 0, $C≠°è°ú˜¨[107] => 0, $C≠°è°ú˜¨[77] => 0, $C≠°è°ú˜¨[165] => $this->ext($A»ëΩ»üÂê), $C≠°è°ú˜¨[192] => !0, $C≠°è°ú˜¨[193] => !0); goto b¥ïëóê€; A±ÒÌ’»é˜: } private function folderInfo($Cﬁì∑Ö‰¶À, $CÛÉÏ–è¨° = false) { goto fÈÖîïèŒ¬; fÈÖîïèŒ¬: $a˘ ≥ﬂáïæ =& $_SERVER[áí∂¯Â¸Áò]; if ($CÛÉÏ–è¨°) { return array($a˘ ≥ﬂáïæ[28] => $this->pathThis($Cﬁì∑Ö‰¶À), $a˘ ≥ﬂáïæ[75] => $this->getPathOuter($a˘ ≥ﬂáïæ[8] . $Cﬁì∑Ö‰¶À), $a˘ ≥ﬂáïæ[29] => $a˘ ≥ﬂáïæ[76], $a˘ ≥ﬂáïæ[192] => !0, $a˘ ≥ﬂáïæ[193] => !0); } $E¿®÷¥ÑÌ∑ = array($a˘ ≥ﬂáïæ[28] => $this->pathThis($Cﬁì∑Ö‰¶À), $a˘ ≥ﬂáïæ[75] => $this->getPathOuter($a˘ ≥ﬂáïæ[8] . $Cﬁì∑Ö‰¶À), $a˘ ≥ﬂáïæ[29] => $a˘ ≥ﬂáïæ[76], $a˘ ≥ﬂáïæ[191] => 0, $a˘ ≥ﬂáïæ[107] => 0, $a˘ ≥ﬂáïæ[192] => !0, $a˘ ≥ﬂáïæ[193] => !0); goto e≈ÿÆº˘‘ú; cÃ¯Èöö°: if (isset($A—€±€¡√ı[$a˘ ≥ﬂáïæ[194]])) { $E¿®÷¥ÑÌ∑[$a˘ ≥ﬂáïæ[191]] = $A—€±€¡√ı[$a˘ ≥ﬂáïæ[194]]; } return $E¿®÷¥ÑÌ∑; goto Fò‘Ùÿ∂éé; e≈ÿÆº˘‘ú: if ($Cﬁì∑Ö‰¶À == $a˘ ≥ﬂáïæ[33]) { return $E¿®÷¥ÑÌ∑; } $Cﬁì∑Ö‰¶À = trim($Cﬁì∑Ö‰¶À, $a˘ ≥ﬂáïæ[8]) . $a˘ ≥ﬂáïæ[8]; $A—€±€¡√ı = $this->objectMeta($Cﬁì∑Ö‰¶À); goto cÃ¯Èöö°; Fò‘Ùÿ∂éé: } public function listObjs($BìﬂÁ‰â∏¢, $FØ¡≈·⁄¬Ÿ = null, $FÉ’∆¶ë•ˆ = null, $e≤ïﬂÑÑ¢ﬂ = null) { $F≠‚ÃÚØ»¶ =& $_SERVER[áí∂¯Â¸Áò]; $BìﬂÁ‰â∏¢ = trim($BìﬂÁ‰â∏¢, $F≠‚ÃÚØ»¶[8]); $fÚ∫è¨é∫ñ = empty($BìﬂÁ‰â∏¢) ? $F≠‚ÃÚØ»¶[33] : $BìﬂÁ‰â∏¢ . $F≠‚ÃÚØ»¶[8]; return $this->client->getBucket($this->bucket, $fÚ∫è¨é∫ñ, $FØ¡≈·⁄¬Ÿ, $FÉ’∆¶ë•ˆ, $e≤ïﬂÑÑ¢ﬂ, !0); } public function has($f•Æ¥’ô≈Ó, $fÃ≥ë”ã…ó = false, $D–Èõèä¯ = true) { goto FÁàÍ¿Â¯Í; FÁàÍ¿Â¯Í: $b∏√à±ÎÜõ =& $_SERVER[áí∂¯Â¸Áò]; $a÷”—ÌÂú = 0; $b≠◊àËÒ⁄— = 0; goto eÒô∞ô≤‰¨; F™Ÿ√ˆÚÑﬁ: if ($fÃ≥ë”ã…ó) { return array($b∏√à±ÎÜõ[195] => $a÷”—ÌÂú, $b∏√à±ÎÜõ[196] => $b≠◊àËÒ⁄—); } return !1; goto d‘ÖØá∏÷é; eÒô∞ô≤‰¨: $Eºã˜ëòûœ = $this->listObjs($f•Æ¥’ô≈Ó, null, null, $b∏√à±ÎÜõ[8]); $Eºã˜ëòûœ = is_array($Eºã˜ëòûœ) ? $Eºã˜ëòûœ : array(); foreach ($Eºã˜ëòûœ as $fàŸÛ≤üπ¶) { if (isset($fàŸÛ≤üπ¶[$b∏√à±ÎÜõ[28]]) && substr($fàŸÛ≤üπ¶[$b∏√à±ÎÜõ[28]], -1) != $b∏√à±ÎÜõ[8]) { if (!$fÃ≥ë”ã…ó && $D–Èõèä¯) { return !0; } $a÷”—ÌÂú++; } else { if (isset($fàŸÛ≤üπ¶[$b∏√à±ÎÜõ[190]])) { if (!$fÃ≥ë”ã…ó && !$D–Èõèä¯) { return !1; } $b≠◊àËÒ⁄—++; } } } goto F™Ÿ√ˆÚÑﬁ; d‘ÖØá∏÷é: } public function listAll($fÑÓ∆âá·ƒ) { $E„ó„§ﬁ£Û =& $_SERVER[áí∂¯Â¸Áò]; $f⁄√ÏóÜ‚Ø = $this->listObjs($fÑÓ∆âá·ƒ); $bππñçå‡ù = $d¬—äõú∑· = array(); foreach ($f⁄√ÏóÜ‚Ø as $a·≈ìÏåœÚ => $Aê ◊Ïø“É) { $bππñçå‡ù[] = $Aê ◊Ïø“É[$E„ó„§ﬁ£Û[28]]; $d¬—äõú∑·[$a·≈ìÏåœÚ] = $Aê ◊Ïø“É[$E„ó„§ﬁ£Û[77]]; } return $this->listAllFiles($fÑÓ∆âá·ƒ, $bππñçå‡ù, $d¬—äõú∑·); } public function canRead($BÍìãœî°∏) { $a≥‹‰˜◊Üπ =& $_SERVER[áí∂¯Â¸Áò]; $aóöï∞‡§√ = $this->client->getAccessControlPolicy($this->bucket, $BÍìãœî°∏); if (!$aóöï∞‡§√) { return !1; } return in_array($aóöï∞‡§√, array($a≥‹‰˜◊Üπ[197], $a≥‹‰˜◊Üπ[198], $a≥‹‰˜◊Üπ[199])) ? !0 : !1; } public function canWrite($aèë‚è∞ª•) { $b¥π ◊øå€ =& $_SERVER[áí∂¯Â¸Áò]; $E±≈à¥Ç€á = $this->client->getAccessControlPolicy($this->bucket, $aèë‚è∞ª•); if (!$E±≈à¥Ç€á) { return !1; } return in_array($E±≈à¥Ç€á, array($b¥π ◊øå€[197], $b¥π ◊øå€[198])) ? !0 : !1; } public function getContent($aÎ¿Õâ©≤É) { return $this->client->getObject($this->bucket, $aÎ¿Õâ©≤É); } public function setContent($b‹ÕÏÉ‘©ã, $câñà‚íú∏ = '', $Eˆ˘™•Ω¶¶ = false) { goto C∂Æë⁄Ü†; C∂Æë⁄Ü†: $böüÀûõ’« =& $_SERVER[áí∂¯Â¸Áò]; $b‹ÕÏÉ‘©ã = $Eˆ˘™•Ω¶¶ ? trim($b‹ÕÏÉ‘©ã, $böüÀûõ’«[8]) . $böüÀûõ’«[8] : $b‹ÕÏÉ‘©ã; $cîÃÙÁßùú = get_file_mime(get_path_ext($b‹ÕÏÉ‘©ã)); goto b≤Éëï•î¨; b≤Éëï•î¨: $dŸºõªê∞î = $this->client->putObject($câñà‚íú∏, $this->bucket, $b‹ÕÏÉ‘©ã, $böüÀûõ’«[189], array(), $cîÃÙÁßùú); if (!$dŸºõªê∞î) { return !1; } if ($Eˆ˘™•Ω¶¶) { return !0; } goto D®°§‹åâ⁄; D®°§‹åâ⁄: $this->cacheMethod(null, null); $dŸºõªê∞î = $this->copyFile($b‹ÕÏÉ‘©ã, $b‹ÕÏÉ‘©ã, array($böüÀûõ’«[200] => $dŸºõªê∞î[$böüÀûõ’«[201]])); return $dŸºõªê∞î ? !0 : !1; goto cúå”‰ôÉ±; cúå”‰ôÉ±: } public function fileSubstr($DÓ•°≠¥ˆª, $d◊™ –ï”œ, $D≤†‰ÓËÚá) { $F≠ÊáºõÈ∫ = $d◊™ –ï”œ + $D≤†‰ÓËÚá - 1; return $this->client->getObject($this->bucket, $DÓ•°≠¥ˆª, array($_SERVER[áí∂¯Â¸Áò][202] => "\142\171\x74\145\163\75{$d◊™ –ï”œ}\55{$F≠ÊáºõÈ∫}")); } public function upload($F‘±§àÂ∞Ë, $eÔﬂ•©èß∂, $A»ÔÍ√®„≠ = false, $C›”œï•ÕÑ = REPEAT_REPLACE) { $D≤áó·Îõ˜ =& $_SERVER[áí∂¯Â¸Áò]; $dÈı—„éÂ— = array($D≤áó·Îõ˜[200] => @md5_file($eÔﬂ•©èß∂)); $c’µÂâÁß = array($D≤áó·Îõ˜[203] => get_file_mime(get_path_ext($F‘±§àÂ∞Ë))); if (IO::size($eÔﬂ•©èß∂) <= 1024 * 1024 * 200) { $fÜ˘÷˜∞£Â = $this->client->putObjectFile($eÔﬂ•©èß∂, $this->bucket, $F‘±§àÂ∞Ë, $D≤áó·Îõ˜[189], $dÈı—„éÂ—, $c’µÂâÁß); return !empty($fÜ˘÷˜∞£Â) ? $this->getPathOuter($F‘±§àÂ∞Ë) : !1; } $AºéÁÈÖ¡ = $this->client->multiUploadObject($eÔﬂ•©èß∂, $this->bucket, trim($F‘±§àÂ∞Ë, $D≤áó·Îõ˜[8]), $dÈı—„éÂ—, $c’µÂâÁß); return $AºéÁÈÖ¡ ? $this->getPathOuter($F‘±§àÂ∞Ë) : !1; } public function download($B’â•â±ª≠, $CÉÃÛˆòŸì) { if (!@is_dir($this->pathFather($CÉÃÛˆòŸì)) && !IO::mkdir($this->pathFather($CÉÃÛˆòŸì))) { return !1; } $EÂµßª“›è = $this->client->getObject($this->bucket, $B’â•â±ª≠, array(), $CÉÃÛˆòŸì); return $EÂµßª“›è !== !1 ? $CÉÃÛˆòŸì : !1; } public function link($Aöè´«Î€ù, $dçÔﬂüêÌ´ = array()) { $CèÔì∂–±À =& $_SERVER[áí∂¯Â¸Áò]; if ($this->signVer == $CèÔì∂–±À[204]) { return $this->client->getAuthenticatedURL($this->bucket, $Aöè´«Î€ù, 3600 * 12, $dçÔﬂüêÌ´); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($Aöè´«Î€ù, $CèÔì∂–±À[8]), 3600 * 12, $this->region, array(), !0, $dçÔﬂüêÌ´); } public function fileOut($c¢ÏÁå¶áÎ, $e¬û…êûç® = false, $Bø∂Ç∫Ωî‹ = false, $fö⁄‹åÍ’ﬂ = '') { goto Aáıå¿ëıÔ; e±¨¬—ÿí„: $dÓÊœ‹…Âï = array($D–ËŸüì‹û[208] => $e¬û…êûç® . $D–ËŸüì‹û[209] . rawurlencode($Bø∂Ç∫Ωî‹), $D–ËŸüì‹û[210] => $EÁÉ©“ÿ∆∏); $EÂ£Èé‚§ï = $this->link($c¢ÏÁå¶áÎ, $dÓÊœ‹…Âï); $this->fileOutLink($EÂ£Èé‚§ï); goto aø∆¶üâçﬁ; Aáıå¿ëıÔ: $D–ËŸüì‹û =& $_SERVER[áí∂¯Â¸Áò]; if ($this->isFileOutServer()) { return $this->fileOutServer($c¢ÏÁå¶áÎ, $e¬û…êûç®, $Bø∂Ç∫Ωî‹, $fö⁄‹åÍ’ﬂ); } if (!$Bø∂Ç∫Ωî‹) { $Bø∂Ç∫Ωî‹ = $this->pathThis($c¢ÏÁå¶áÎ); } goto aı°„Áıæ¢; aı°„Áıæ¢: $EÁÉ©“ÿ∆∏ = get_file_mime(get_path_ext($Bø∂Ç∫Ωî‹)); if ($EÁÉ©“ÿ∆∏ == $D–ËŸüì‹û[205]) { return parent::fileOut($c¢ÏÁå¶áÎ, $e¬û…êûç®, $Bø∂Ç∫Ωî‹, $fö⁄‹åÍ’ﬂ); } $e¬û…êûç® = $e¬û…êûç® ? $D–ËŸüì‹û[206] : $D–ËŸüì‹û[207]; goto e±¨¬—ÿí„; aø∆¶üâçﬁ: } public function fileOutServer($AÜ±¯ã……€, $cÜ—úË€Ö“ = false, $AÑÌµÛÈ≠ä = false, $c£çî∆àéà = '') { parent::fileOut($AÜ±¯ã……€, $cÜ—úË€Ö“, $AÑÌµÛÈ≠ä, $c£çî∆àéà); } public function fileOutImageServer($cŸˆÔè∂µƒ, $eëÇêò–÷ã = 250) { parent::fileOutImage($cŸˆÔè∂µƒ, $eëÇêò–÷ã); } public function hashMd5($E†óÓíÙ€Æ, $fºŸè™µˆÜ = '') { $fï⁄≈…£Ïº =& $_SERVER[áí∂¯Â¸Áò]; $F’à¡îÒêÀ = $this->objectMeta($E†óÓíÙ€Æ); if (!$F’à¡îÒêÀ) { return !1; } $fºŸè™µˆÜ = $fºŸè™µˆÜ ? $fºŸè™µˆÜ : _get($F’à¡îÒêÀ, $fï⁄≈…£Ïº[211]); $fºŸè™µˆÜ = $fºŸè™µˆÜ ? $fºŸè™µˆÜ : _get($F’à¡îÒêÀ, $fï⁄≈…£Ïº[201], $fï⁄≈…£Ïº[33]); return $fºŸè™µˆÜ; } public function uploadFormData($d¢ˆùú⁄›È, $e›Â—™√Àü = 3600) { $B≤ÖùÇ¥⁄º =& $_SERVER[áí∂¯Â¸Áò]; $fëâ ø’§¯ = $this->pathFather($d¢ˆùú⁄›È); $e¶íÏ… ™ñ = $this->client->getHttpUploadPostParams($this->bucket, $fëâ ø’§¯, $B≤ÖùÇ¥⁄º[189], $e›Â—™√Àü); return array_merge((array) $e¶íÏ… ™ñ, array($B≤ÖùÇ¥⁄º[173] => $this->getHost())); } public function multiUploadFormData($AÔßÇ í±Ø, $aé…ÜË Ö… = 3600) { $fÉä‚∂èÆÂ =& $_SERVER[áí∂¯Â¸Áò]; $bÃ‹ô·ŒŒ = gmdate($fÉä‚∂èÆÂ[212]); $aΩÀÇ—…´ß = array(); $Bíë·’€˜Ö = $this->client->getUploadId($this->bucket, $AÔßÇ í±Ø, $aΩÀÇ—…´ß); if (!$Bíë·’€˜Ö) { return !1; } return array($fÉä‚∂èÆÂ[213] => $Bíë·’€˜Ö, $fÉä‚∂èÆÂ[173] => $this->getHost() . $fÉä‚∂èÆÂ[8] . $this->pathEncode($AÔßÇ í±Ø), $fÉä‚∂èÆÂ[214] => $bÃ‹ô·ŒŒ, $fÉä‚∂èÆÂ[89] => $AÔßÇ í±Ø); } public function multiUploadAuthData($B”œ∑òèå, $b⁄ÙüÖß·≥ = array()) { goto bƒÂì°òú÷; AÚ¿πçêûã: $Eöñû†øºò = $b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[89]]; unset($b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[89]]); if (isset($b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[215]])) { $b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[214]] = $fïﬁ€ù â€; return $this->listUploadParts($Eöñû†øºò, $b⁄ÙüÖß·≥); } goto FıÂÍé´ÛÃ; bƒÂì°òú÷: $eñ˘Ü˘ıé– =& $_SERVER[áí∂¯Â¸Áò]; $fïﬁ€ù â€ = isset($b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[214]]) ? $b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[214]] : gmdate($eñ˘Ü˘ıé–[212]); $cÀ©ûÔÜ≤õ = isset($b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[165]]) ? $b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[165]] : $eñ˘Ü˘ıé–[33]; goto AÚ¿πçêûã; B‹«•ê†∞è: if (strpos($cÀ©ûÔÜ≤õ, $eñ˘Ü˘ıé–[217]) === 0) { return array($eñ˘Ü˘ıé–[224] => $b√ÌΩò™√—, $eñ˘Ü˘ıé–[214] => $fïﬁ€ù â€); } return $b√ÌΩò™√—; goto aâÎíÃøìã; FıÂÍé´ÛÃ: $dÔ•ŒË“Ñ = array($eñ˘Ü˘ıé–[216], $eñ˘Ü˘ıé–[33], $eñ˘Ü˘ıé–[116], $eñ˘Ü˘ıé–[33], "\170\x2d\x61\x6d\x7a\55\144\x61\164\145\72{$fïﬁ€ù â€}", $eñ˘Ü˘ıé–[8] . $this->bucket . $eñ˘Ü˘ıé–[8] . $this->pathEncode($Eöñû†øºò) . $cÀ©ûÔÜ≤õ); if (strpos($cÀ©ûÔÜ≤õ, $eñ˘Ü˘ıé–[217]) === 0) { $dÔ•ŒË“Ñ[0] = $eñ˘Ü˘ıé–[218]; } if (isset($b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[219]]) && $b⁄ÙüÖß·≥[$eñ˘Ü˘ıé–[219]] == $eñ˘Ü˘ıé–[220]) { $dÔ•ŒË“Ñ[0] = $eñ˘Ü˘ıé–[220]; } goto CÑÈºñﬁµ“; CÑÈºñﬁµ“: $díºˆ√¶Œ• = implode($eñ˘Ü˘ıé–[221], $dÔ•ŒË“Ñ); $E•√ØÈø÷Œ = base64_encode(hash_hmac($eñ˘Ü˘ıé–[222], $díºˆ√¶Œ•, $this->secret, !0)); $b√ÌΩò™√— = $eñ˘Ü˘ıé–[223] . $this->accessKey . $eñ˘Ü˘ıé–[4] . $E•√ØÈø÷Œ; goto B‹«•ê†∞è; aâÎíÃøìã: } public function listUploadParts($bÇÈ°ˆâÌ—, $aê≥çºõ«Ë = array()) { goto cäí€üÖ§ÿ; cäí€üÖ§ÿ: $eËäòÔ÷è– =& $_SERVER[áí∂¯Â¸Áò]; $d£ºâèÑÊÚ = str_replace($eËäòÔ÷è–[225], $eËäòÔ÷è–[33], $aê≥çºõ«Ë[$eËäòÔ÷è–[165]]); $f–ä≤ãÔ‚ú = $this->client->listParts($this->bucket, $bÇÈ°ˆâÌ—, $d£ºâèÑÊÚ); goto d◊å‰–∞€¡; d◊å‰–∞€¡: if (!$f–ä≤ãÔ‚ú) { return !1; } unset($aê≥çºõ«Ë[$eËäòÔ÷è–[215]], $aê≥çºõ«Ë[$eËäòÔ÷è–[219]]); $aê≥çºõ«Ë[$eËäòÔ÷è–[89]] = $bÇÈ°ˆâÌ—; goto f¿Íª£Ç⁄√; f¿Íª£Ç⁄√: $e©ïÎçÌ≈Ü = $this->multiUploadAuthData($bÇÈ°ˆâÌ—, $aê≥çºõ«Ë); if (empty($e©ïÎçÌ≈Ü)) { return !1; } return array($eËäòÔ÷è–[224] => $e©ïÎçÌ≈Ü, $eËäòÔ÷è–[214] => $aê≥çºõ«Ë[$eËäòÔ÷è–[214]], $eËäòÔ÷è–[226] => $f–ä≤ãÔ‚ú); goto E∏∑—¿£ê∏; E∏∑—¿£ê∏: } public function getHost() { return parent::getHost() . $_SERVER[áí∂¯Â¸Áò][8] . $this->bucket; } public function size($Còï∞˜óò™) { $fæÌ·ëôáà = $this->objectMeta($Còï∞˜óò™); return $fæÌ·ëôáà ? $fæÌ·ëôáà[$_SERVER[áí∂¯Â¸Áò][77]] : 0; } public function info($då∑áÃ€≥Ì) { if ($this->isFolder($då∑áÃ€≥Ì)) { return $this->folderInfo($då∑áÃ€≥Ì); } else { if ($this->isFile($då∑áÃ€≥Ì)) { return $this->fileInfo($då∑áÃ€≥Ì); } } return !1; } public function exist($E®ÉÿÕà¬ı) { return $this->isFile($E®ÉÿÕà¬ı) || $this->isFolder($E®ÉÿÕà¬ı); } public function isFile($dÔ°Öøå ª) { return !$this->isFolder($dÔ°Öøå ª) && $this->objectMeta($dÔ°Öøå ª); } public function isFolder($B¡¶Öé÷ŸÍ) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][227], $B¡¶Öé÷ŸÍ); } protected function objectMeta($cÍ»Ëè∞Éò) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][228], $cÍ»Ëè∞Éò); } protected function _objectMeta($A û–µà’´) { $cÔöï‡¯≥Û =& $_SERVER[áí∂¯Â¸Áò]; $A û–µà’´ = rtrim($A û–µà’´, $cÔöï‡¯≥Û[8]); try { $B‘ÔÒÉŸÆ§ = $this->client->getObjectInfo($this->bucket, $A û–µà’´); if (!isset($B‘ÔÒÉŸÆ§[$cÔöï‡¯≥Û[211]]) && isset($B‘ÔÒÉŸÆ§[$cÔöï‡¯≥Û[229]])) { $B‘ÔÒÉŸÆ§[$cÔöï‡¯≥Û[211]] = $B‘ÔÒÉŸÆ§[$cÔöï‡¯≥Û[229]]; } } catch (Exception $CâæÖ°∏çô) { $B‘ÔÒÉŸÆ§ = !1; } if (!$B‘ÔÒÉŸÆ§) { } return $B‘ÔÒÉŸÆ§; } protected function _isFolder($aÜê∏éÓ¥Ü) { goto cå∆å“ Êæ; Aè∑Øâ®√¶: if (substr($fàÂ¯¡„ıΩ[0][$B«Ó¯óÍø–[28]], -1) == $B«Ó¯óÍø–[8]) { return !0; } if (get_path_this($fàÂ¯¡„ıΩ[0][$B«Ó¯óÍø–[28]]) == get_path_this($aÜê∏éÓ¥Ü)) { return !1; } return !0; goto e±•≥üΩ’Í; cå∆å“ Êæ: $B«Ó¯óÍø– =& $_SERVER[áí∂¯Â¸Áò]; $aÜê∏éÓ¥Ü = rtrim($aÜê∏éÓ¥Ü, $B«Ó¯óÍø–[8]); if ($aÜê∏éÓ¥Ü == $B«Ó¯óÍø–[33] || $aÜê∏éÓ¥Ü == $B«Ó¯óÍø–[8]) { return !0; } goto eŒàÕﬂ’£ã; eŒàÕﬂ’£ã: $fàÂ¯¡„ıΩ = $this->client->getBucket($this->bucket, $aÜê∏éÓ¥Ü, null, 1); if (empty($fàÂ¯¡„ıΩ)) { return !1; } $fàÂ¯¡„ıΩ = array_values($fàÂ¯¡„ıΩ); goto Aè∑Øâ®√¶; e±•≥üΩ’Í: } } define($_SERVER[áí∂¯Â¸Áò][230], 1); goto c”∂ÔÊ∆òÿ; C∞¯ªéèò…: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\155\x2e\142\x61\143\x6b\165\160\114\151\x73\x74"; public $field = array("\x69\157", "\x6e\141\x6d\x65", "\163\x74\141\x74\165\x73", "\143\157\156\x74\x65\156\x74", "\162\x65\163\x75\x6c\x74", "\164\151\155\145\x46\162\x6f\155", "\x74\151\x6d\x65\124\x6f"); public function config() { goto Bäãõ¿∫©“; f∆·øÉ∫ø„: if (isset($AÖ˘±«õ˜Ù[$A∫√éÖÉ¶å[194]])) { $AÖ˘±«õ˜Ù[$A∫√éÖÉ¶å[194]] = json_decode($AÖ˘±«õ˜Ù[$A∫√éÖÉ¶å[194]], !0); } if (isset($Eõ˘£∏Ñ¢[$A∫√éÖÉ¶å[194]])) { $AÖ˘±«õ˜Ù[$A∫√éÖÉ¶å[194]][$A∫√éÖÉ¶å[1418]] = $Eõ˘£∏Ñ¢[$A∫√éÖÉ¶å[194]]; unset($Eõ˘£∏Ñ¢[$A∫√éÖÉ¶å[194]]); } return array_merge($AÖ˘±«õ˜Ù, $Eõ˘£∏Ñ¢); goto fıÊı–ÈÌ…; Bäãõ¿∫©“: $A∫√éÖÉ¶å =& $_SERVER[áí∂¯Â¸Áò]; $Eõ˘£∏Ñ¢ = Model($A∫√éÖÉ¶å[1095])->get($A∫√éÖÉ¶å[719]); $Eõ˘£∏Ñ¢ = json_decode($Eõ˘£∏Ñ¢, !0); goto fëöº„ÔìË; fëöº„ÔìË: $Eõ˘£∏Ñ¢ = is_array($Eõ˘£∏Ñ¢) ? $Eõ˘£∏Ñ¢ : array(); if (!isset($Eõ˘£∏Ñ¢[$A∫√éÖÉ¶å[698]])) { $Eõ˘£∏Ñ¢[$A∫√éÖÉ¶å[698]] = $A∫√éÖÉ¶å[83]; } $AÖ˘±«õ˜Ù = array(); goto aîı∏ß¢Üô; aîı∏ß¢Üô: Action($A∫√éÖÉ¶å[2135])->taskInit(); $eú∂ûÉäπä = Model($A∫√éÖÉ¶å[2136])->listData(); foreach ($eú∂ûÉäπä as $Dï•ã¥πÙ´) { if ($Dï•ã¥πÙ´[$A∫√éÖÉ¶å[1087]] == $A∫√éÖÉ¶å[83] && $Dï•ã¥πÙ´[$A∫√éÖÉ¶å[1431]] == $A∫√éÖÉ¶å[2137]) { $AÖ˘±«õ˜Ù = $Dï•ã¥πÙ´; break; } } goto f∆·øÉ∫ø„; fıÊı–ÈÌ…: } public function listData($bÊÕ€è∑ãÛ = false, $eﬁ÷≠ƒ‚Úº = "\155\157\144\x69\146\171\124\151\x6d\145", $a–ÊËâÔﬁô = false) { return parent::listData($bÊÕ€è∑ãÛ, $eﬁ÷≠ƒ‚Úº, !0); } public function lastItem() { $E√√“ç°…À = $this->listData(); return !empty($E√√“ç°…À[0]) ? $E√√“ç°…À[0] : null; } public function kill($A›Ω£±ˆ◊ä) { goto eÒö€òªÊœ; fıè˘∂ﬁﬂ§: return $this->remove($A›Ω£±ˆ◊ä); goto Bç∏»Â¿†ñ; eÒö€òªÊœ: $bªî∏´≠√¥ =& $_SERVER[áí∂¯Â¸Áò]; $e¢û◊èª™ó = $this->listData($A›Ω£±ˆ◊ä); if (!$e¢û◊èª™ó || empty($e¢û◊èª™ó[$bªî∏´≠√¥[28]])) { return !0; } goto B•‹πø∏«˘; D«ãâîÓß¥: $föå‹≤”≠° = $e¢û◊èª™ó[$bªî∏´≠√¥[28]]; $F‘«‚¥ﬁïÿ = TEMP_FILES . $bªî∏´≠√¥[715] . $föå‹≤”≠° . $bªî∏´≠√¥[8]; IO::remove($F‘«‚¥ﬁïÿ, !1); goto fıè˘∂ﬁﬂ§; B•‹πø∏«˘: Task::kill($bªî∏´≠√¥[718]); Task::kill($bªî∏´≠√¥[734]); Task::kill($bªî∏´≠√¥[742]); goto D«ãâîÓß¥; Bç∏»Â¿†ñ: } public function remove($F‹·é˜∂•Â) { $cü≠≈∏‚Úå = $this->listData($F‹·é˜∂•Â); if (!$cü≠≈∏‚Úå) { return !0; } return $this->backupRemove($cü≠≈∏‚Úå); } private function backupRemove($d°¢¯ﬁ‘«Ë) { $dÊÓª¨¯„§ =& $_SERVER[áí∂¯Â¸Áò]; parent::remove($d°¢¯ﬁ‘«Ë[$dÊÓª¨¯„§[371]]); $Aû§–ÔçÙ = "\x7b\x69\157\72{$d°¢¯ﬁ‘«Ë[$dÊÓª¨¯„§[697]]}\x7d\57\x64\x61\x74\141\142\x61\163\x65\x2f\x62\x61\143\153\x75\160\x5f" . $d°¢¯ﬁ‘«Ë[$dÊÓª¨¯„§[28]]; IO::remove($Aû§–ÔçÙ, !1); return !0; } public function start() { goto Aå‰æ»∂›Ç; Aå‰æ»∂›Ç: $Búãµ™¥‹∑ =& $_SERVER[áí∂¯Â¸Áò]; if ($GLOBALS[$Búãµ™¥‹∑[6]][$Búãµ™¥‹∑[84]][$Búãµ™¥‹∑[2138]] != $Búãµ™¥‹∑[83]) { return !0; } $E®ï¶√∆ÚΩ = $this->config(); goto c‹Œ¡±≠±â; a⁄ÁÙ•ﬂ‘É: return !0; goto Dç±çàÇﬂ ; c‹Œ¡±≠±â: if (!$E®ï¶√∆ÚΩ || $E®ï¶√∆ÚΩ[$Búãµ™¥‹∑[1415]] != $Búãµ™¥‹∑[83]) { return !1; } $CèÔﬁÏúÀ‡ = $this->process(); foreach ($CèÔﬁÏúÀ‡ as $B»†°ë£óá) { if ($B»†°ë£óá) { return Task::restart($B»†°ë£óá[$Búãµ™¥‹∑[371]]); } } goto D§å»ØÛ–Õ; D§å»ØÛ–Õ: $BÂ™˘Î¬Îô = new Backup(); $BÂ™˘Î¬Îô->keep(); if (!$BÂ™˘Î¬Îô->db()) { return !1; } goto Cöƒ´øÚ≤«; Cöƒ´øÚ≤«: if (!$BÂ™˘Î¬Îô->dbFile()) { return !1; } if ($E®ï¶√∆ÚΩ[$Búãµ™¥‹∑[698]] == $Búãµ™¥‹∑[481]) { $BÂ™˘Î¬Îô->file(); } Backup::set(array($Búãµ™¥‹∑[695] => 1, $Búãµ™¥‹∑[460] => time())); goto a⁄ÁÙ•ﬂ‘É; Dç±çàÇﬂ : } public function process() { $BµÉÎÚ∑Çœ =& $_SERVER[áí∂¯Â¸Áò]; return array($BµÉÎÚ∑Çœ[700] => Task::get($BµÉÎÚ∑Çœ[718]), $BµÉÎÚ∑Çœ[703] => Task::get($BµÉÎÚ∑Çœ[734]), $BµÉÎÚ∑Çœ[171] => Task::get($BµÉÎÚ∑Çœ[742])); } public function restore() { $f£§îœ¬´ø =& $_SERVER[áí∂¯Â¸Áò]; ActionCall($f£§îœ¬´ø[977], !0, 1); ActionCall($f£§îœ¬´ø[977], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\x6d\145\156\x74"; protected $tableMeta = array("\164\x61\x62\x6c\145\116\x61\x6d\145" => "\x63\157\155\x6d\x65\156\164\x5f\155\145\x74\141", "\x6d\145\x74\141\106\x69\x65\154\144" => "\x63\x6f\x6d\x6d\145\x6e\x74\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($AÑû“†ËµÇ) { $DÕÂü≥ªóÃ =& $_SERVER[áí∂¯Â¸Áò]; if ($AÑû“†ËµÇ[$DÕÂü≥ªóÃ[2139]]) { $eúΩÂ—˘ÃÑ = $this->where(array($DÕÂü≥ªóÃ[2140] => $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[2139]]))->find(); if (!$eúΩÂ—˘ÃÑ || $eúΩÂ—˘ÃÑ[$DÕÂü≥ªóÃ[383]] != $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[383]] || $eúΩÂ—˘ÃÑ[$DÕÂü≥ªóÃ[469]] != $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[469]]) { return !1; } $this->where(array($DÕÂü≥ªóÃ[2140] => $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[2139]]))->setAdd($DÕÂü≥ªóÃ[2141], 1); } $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[2142]] = 0; $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[2141]] = 0; $AÑû“†ËµÇ[$DÕÂü≥ªóÃ[695]] = 1; return $this->add($AÑû“†ËµÇ); } public function remove($a†‹ﬁßﬁ¿â) { $fûÕ∞ŒÑ◊• =& $_SERVER[áí∂¯Â¸Áò]; $Bõ≥øÓ¯ı• = array($fûÕ∞ŒÑ◊•[2140] => $a†‹ﬁßﬁ¿â); $F¢ãÁ¡¥¨è = $this->where($Bõ≥øÓ¯ı•)->find(); if ($F¢ãÁ¡¥¨è[$fûÕ∞ŒÑ◊•[2139]]) { $this->where(array($fûÕ∞ŒÑ◊•[2140] => $F¢ãÁ¡¥¨è[$fûÕ∞ŒÑ◊•[2139]]))->setAdd($fûÕ∞ŒÑ◊•[2141], -1); } return $this->where($Bõ≥øÓ¯ı•)->delete(); } public function edit($bìë¿›µ”§, $B∏¿´›‡ É) { $dﬂ⁄ß˜ßöå =& $_SERVER[áí∂¯Â¸Áò]; $CÙ•ﬁ€òÇÍ = array($dﬂ⁄ß˜ßöå[2140] => $bìë¿›µ”§); return $this->where($CÙ•ﬁ€òÇÍ)->save(array($dﬂ⁄ß˜ßöå[2143] => $B∏¿´›‡ É)); } public function prasise($AÜ≈ó¯≤î∂) { $B≠´œÁÌ‘‘ =& $_SERVER[áí∂¯Â¸Áò]; $fË˜´—√∂∆ = Model($B≠´œÁÌ‘‘[2144]); $EâÊâÌµû“ = array($B≠´œÁÌ‘‘[2140] => $AÜ≈ó¯≤î∂, $B≠´œÁÌ‘‘[1434] => USER_ID); $DëÍÎÎ‰ˆÛ = $fË˜´—√∂∆->where($EâÊâÌµû“)->find(); if (!$DëÍÎÎ‰ˆÛ) { $fË˜´—√∂∆->add($EâÊâÌµû“); $AÓ¨¶ΩøèÕ = $this->where(array($B≠´œÁÌ‘‘[2140] => $AÜ≈ó¯≤î∂))->setAdd($B≠´œÁÌ‘‘[2142], 1); } else { $fË˜´—√∂∆->where($EâÊâÌµû“)->delete(); $AÓ¨¶ΩøèÕ = $this->where(array($B≠´œÁÌ‘‘[2140] => $AÜ≈ó¯≤î∂))->setAdd($B≠´œÁÌ‘‘[2142], -1); } return $AÓ¨¶ΩøèÕ; } public function targetInfo($b˘ëÑ¯©Õõ, $eë≥êÓ´Üò) { goto A¡ô°›Æ™¶; e«ÛûÕÉ ∫: $EëÏ‹á†Ãã = "\122\x49\x47\110\124\40\x4a\x4f\x49\x4e\40{$this->tablePrefix}\x63\157\155\x6d\145\x6e\164\137\x70\x72\141\151\x73\145\40\x73\x74\141\162\40\x6f\x6e\40\x63\157\155\x6d\145\x6e\x74\x2e\143\x6f\155\x6d\145\x6e\164\x49\x44\x20\75\x20\163\164\141\162\x2e\143\x6f\x6d\x6d\145\156\x74\111\104"; $BÓ¡Á§üƒ¨ = $this->alias($D≥÷¶Ñ¯–¢[345])->where($FÚù◊ßé“Ù)->join($EëÏ‹á†Ãã, $D≥÷¶Ñ¯–¢[2145])->count(); $C⁄Òíæë∫ô = array($D≥÷¶Ñ¯–¢[2146] => $D¬à«„ú¿œ, $D≥÷¶Ñ¯–¢[2147] => $BÓ¡Á§üƒ¨); goto bºÎ‰¢œÙ„; bºÎ‰¢œÙ„: return $C⁄Òíæë∫ô; goto eÖ™êô’°•; A¡ô°›Æ™¶: $D≥÷¶Ñ¯–¢ =& $_SERVER[áí∂¯Â¸Áò]; $FÚù◊ßé“Ù = array($D≥÷¶Ñ¯–¢[534] => $b˘ëÑ¯©Õõ, $D≥÷¶Ñ¯–¢[535] => $eë≥êÓ´Üò); $D¬à«„ú¿œ = $this->where($FÚù◊ßé“Ù)->count(); goto e«ÛûÕÉ ∫; eÖ™êô’°•: } public function listData($dæÙ—≤≠ﬁ√) { $Cì»çØå›È =& $_SERVER[áí∂¯Â¸Áò]; if (isset($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2148]])) { if ($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2148]]) { $dæÙ—≤≠ﬁ√[$Cì»çØå›È[2149]] = array($Cì»çØå›È[931], intval($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2148]])); } unset($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2148]]); } if (isset($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2150]])) { if ($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2150]]) { $dæÙ—≤≠ﬁ√[$Cì»çØå›È[2149]] = array($Cì»çØå›È[928], intval($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2150]])); } unset($dæÙ—≤≠ﬁ√[$Cì»çØå›È[2150]]); } return $this->_listData($dæÙ—≤≠ﬁ√); } private function _listData($EáëéÏä‡) { $FøëÇ∑øÔÃ =& $_SERVER[áí∂¯Â¸Áò]; $BıŒ∂ÿŸÿÑ = $this->where($EáëéÏä‡)->_makeOrder()->selectPage(100); $this->_listAppendParent($BıŒ∂ÿŸÿÑ[$FøëÇ∑øÔÃ[358]]); $this->_listAppendUser($BıŒ∂ÿŸÿÑ[$FøëÇ∑øÔÃ[358]]); $this->_listAppendMeta($BıŒ∂ÿŸÿÑ[$FøëÇ∑øÔÃ[358]]); return $BıŒ∂ÿŸÿÑ; } private function _makeOrder() { $F≥â˘°ÛüÈ =& $_SERVER[áí∂¯Â¸Áò]; $aèñ·Øï⁄ç = array($F≥â˘°ÛüÈ[2142], $F≥â˘°ÛüÈ[2141], $F≥â˘°ÛüÈ[191]); $cù´≠ä⁄≈ô = Input::get($F≥â˘°ÛüÈ[419], $F≥â˘°ÛüÈ[7], $F≥â˘°ÛüÈ[401], $aèñ·Øï⁄ç); $cêüÏ±“ëÔ = Input::get($F≥â˘°ÛüÈ[420], $F≥â˘°ÛüÈ[7], $F≥â˘°ÛüÈ[1436], array($F≥â˘°ÛüÈ[2151], $F≥â˘°ÛüÈ[417])); $A±î≥ß”Ïÿ = $cù´≠ä⁄≈ô . $F≥â˘°ÛüÈ[50] . $cêüÏ±“ëÔ; return $this->order($A±î≥ß”Ïÿ); } private function _listAppendParent(&$b¬Ú›ªàÑ—) { goto E≥©ÿÖùÌÛ; eàØú°ÒÕõ: foreach ($b¬Ú›ªàÑ— as &$c·§î∂Ö˜‰) { if (isset($a•Ç•üœ‡∂[$c·§î∂Ö˜‰[$aÑ†›Ï⁄÷Ø[2139]]])) { $c·§î∂Ö˜‰[$aÑ†›Ï⁄÷Ø[2152]] = $a•Ç•üœ‡∂[$c·§î∂Ö˜‰[$aÑ†›Ï⁄÷Ø[2139]]]; } } unset($c·§î∂Ö˜‰); goto fî‘¶ŸëÇó; E≥©ÿÖùÌÛ: $aÑ†›Ï⁄÷Ø =& $_SERVER[áí∂¯Â¸Áò]; $eÑäøœø£´ = array_unique(array_to_keyvalue($b¬Ú›ªàÑ—, $aÑ†›Ï⁄÷Ø[33], $aÑ†›Ï⁄÷Ø[2139])); $eÑäøœø£´ = array_remove_value($eÑäøœø£´, $aÑ†›Ï⁄÷Ø[481]); goto cï»¨åÌà˜; cï»¨åÌà˜: if (!$eÑäøœø£´) { return; } $a•Ç•üœ‡∂ = $this->where(array($aÑ†›Ï⁄÷Ø[2140] => array($aÑ†›Ï⁄÷Ø[7], $eÑäøœø£´)))->select(); $a•Ç•üœ‡∂ = array_to_keyvalue($a•Ç•üœ‡∂, $aÑ†›Ï⁄÷Ø[2149]); goto eàØú°ÒÕõ; fî‘¶ŸëÇó: } private function _listAppendUser(&$eæ⁄ò—öëŸ) { goto f∂ƒÃâ¥≈Û; f∂ƒÃâ¥≈Û: $DÕ≥”ì≠˜∑ =& $_SERVER[áí∂¯Â¸Áò]; $EÆıºˆÿÏÏ = array_unique(array_to_keyvalue($eæ⁄ò—öëŸ, $DÕ≥”ì≠˜∑[33], $DÕ≥”ì≠˜∑[1443])); $EÆıºˆÿÏÏ = array_remove_value($EÆıºˆÿÏÏ, $DÕ≥”ì≠˜∑[481]); goto aà„πÁò∏µ; aà„πÁò∏µ: if (count($EÆıºˆÿÏÏ) == 0) { return; } foreach ($eæ⁄ò—öëŸ as $dÿô±ìÖ¢á) { if (isset($dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[2152]])) { $EÆıºˆÿÏÏ[] = $dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[2152]][$DÕ≥”ì≠˜∑[1443]]; } } $F≈É†“⁄‰Õ = Model($DÕ≥”ì≠˜∑[490])->userListInfo($EÆıºˆÿÏÏ); goto C‹Û∆•‡ñ¶; C‹Û∆•‡ñ¶: foreach ($eæ⁄ò—öëŸ as &$dÿô±ìÖ¢á) { $dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[547]] = $F≈É†“⁄‰Õ[$dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[1443]]]; if (isset($dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[2152]])) { $dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[2152]][$DÕ≥”ì≠˜∑[547]] = $F≈É†“⁄‰Õ[$dÿô±ìÖ¢á[$DÕ≥”ì≠˜∑[2152]][$DÕ≥”ì≠˜∑[1443]]]; } } unset($dÿô±ìÖ¢á); goto e—∑üÏ¶¿É; e—∑üÏ¶¿É: } private function _listAppendMeta(&$eàÌò†œ≥Æ) { goto AêœŒÔﬂ©‘; d¿‡º¶ìªá: if (!$bòÍÊÂÜüŸ) { return !1; } foreach ($eàÌò†œ≥Æ as &$f—‡◊“…Ω“) { $f—‡◊“…Ω“[$c⁄Öö”≥ï’[429]] = $bòÍÊÂÜüŸ[$f—‡◊“…Ω“[$c⁄Öö”≥ï’[2149]]]; if (isset($f—‡◊“…Ω“[$c⁄Öö”≥ï’[2152]])) { $f—‡◊“…Ω“[$c⁄Öö”≥ï’[2152]][$c⁄Öö”≥ï’[429]] = $bòÍÊÂÜüŸ[$f—‡◊“…Ω“[$c⁄Öö”≥ï’[2152]][$c⁄Öö”≥ï’[2149]]]; } } unset($f—‡◊“…Ω“); goto B«ÇºêÖéå; AêœŒÔﬂ©‘: $c⁄Öö”≥ï’ =& $_SERVER[áí∂¯Â¸Áò]; $c»õƒªœÜÖ = array_unique(array_to_keyvalue($eàÌò†œ≥Æ, $c⁄Öö”≥ï’[33], $c⁄Öö”≥ï’[2149])); $c»õƒªœÜÖ = array_remove_value($c»õƒªœÜÖ, $c⁄Öö”≥ï’[481]); goto aıçËßâÚ¶; aıçËßâÚ¶: if (!$c»õƒªœÜÖ) { return; } foreach ($eàÌò†œ≥Æ as $f—‡◊“…Ω“) { if (isset($f—‡◊“…Ω“[$c⁄Öö”≥ï’[2152]])) { $c»õƒªœÜÖ[] = $f—‡◊“…Ω“[$c⁄Öö”≥ï’[2152]][$c⁄Öö”≥ï’[2149]]; } } $bòÍÊÂÜüŸ = $this->metaList($c»õƒªœÜÖ); goto d¿‡º¶ìªá; B«ÇºêÖéå: } private function metaList($aë’ÍÖÉßŸ) { goto bÜ ∆π∏çõ; dàããóï‰≤: return $f≥€Îê®Óƒ ? $f≥€Îê®Óƒ : array(); goto a‘áº≠Ë®õ; e∫‘≠¶É⁄ö: $f≥€Îê®Óƒ = Model($C≤∑ÂúΩõé[2153])->where($C©â¢”ÈÕÓ)->select(); $f≥€Îê®Óƒ = array_to_keyvalue_group($f≥€Îê®Óƒ, $C≤∑ÂúΩõé[2149]); foreach ($f≥€Îê®Óƒ as $E„≈ÇëŒõÑ => $bÌ∑áΩ‹ØÎ) { $d∑ç≥œ¬ƒè = array(); foreach ($bÌ∑áΩ‹ØÎ as $AùéÔ‰«å¡) { $d∑ç≥œ¬ƒè[$AùéÔ‰«å¡[$C≤∑ÂúΩõé[89]]] = $AùéÔ‰«å¡[$C≤∑ÂúΩõé[363]]; } $f≥€Îê®Óƒ[$E„≈ÇëŒõÑ] = $d∑ç≥œ¬ƒè; } goto dàããóï‰≤; bÜ ∆π∏çõ: $C≤∑ÂúΩõé =& $_SERVER[áí∂¯Â¸Áò]; if (!$aë’ÍÖÉßŸ) { return array(); } $C©â¢”ÈÕÓ = array($C≤∑ÂúΩõé[2149] => array($C≤∑ÂúΩõé[7], $aë’ÍÖÉßŸ)); goto e∫‘≠¶É⁄ö; a‘áº≠Ë®õ: } } class FileModel extends ModelBase { protected $tableName = "\151\157\137\x66\151\154\145"; protected $tableMeta = array("\x74\141\142\154\145\116\x61\155\145" => "\151\x6f\137\x66\x69\x6c\145\137\155\x65\x74\x61", "\155\x65\x74\141\106\x69\x65\154\x64" => "\146\x69\x6c\145\x49\104"); public function fileInfo($f›≤áÀÓÎ°) { $Dâïµ©£Ö‡ =& $_SERVER[áí∂¯Â¸Áò]; static $AÓ£Ëãá›ı = array(); if (!isset($AÓ£Ëãá›ı[$f›≤áÀÓÎ°])) { $EÛàË–ÉÉ◊ = $Dâïµ©£Ö‡[2154]; $bû«‡Ç∑È† = Model($Dâïµ©£Ö‡[434])->field($EÛàË–ÉÉ◊)->where(array($Dâïµ©£Ö‡[432] => $f›≤áÀÓÎ°))->find(); $AÓ£Ëãá›ı[$f›≤áÀÓÎ°] = $bû«‡Ç∑È†; } return $AÓ£Ëãá›ı[$f›≤áÀÓÎ°]; } public function addFileByContent($e◊™ËË‘´£ = '', $BöºÂî∑˜ = '') { goto F∑å¶ìËÓ¢; FÖÒÃˆ£Ö…: if (file_exists($AâÉµ¥Ô˜¯)) { @unlink($AâÉµ¥Ô˜¯); } return $FêËø”éÙ±; goto Eîí≠˜òè; F∑å¶ìËÓ¢: $Eó≥–ÍÜ•ê =& $_SERVER[áí∂¯Â¸Áò]; $fÇˆ´©áÎ‡ = TEMP_PATH . $Eó≥–ÍÜ•ê[2155]; if (!is_dir($fÇˆ´©áÎ‡)) { mk_dir($fÇˆ´©áÎ‡); } goto a©ü≠Ï˘Ωè; a©ü≠Ï˘Ωè: $AâÉµ¥Ô˜¯ = $fÇˆ´©áÎ‡ . $Eó≥–ÍÜ•ê[2156] . rand_string(16); file_put_contents($AâÉµ¥Ô˜¯, $e◊™ËË‘´£); $FêËø”éÙ± = $this->addFile($AâÉµ¥Ô˜¯, $BöºÂî∑˜, !0); goto FÖÒÃˆ£Ö…; Eîí≠˜òè: } public function createFileName($EÜêïå⁄≠“) { goto FﬁÌÇà±≤; Bï∫Ìõñ˘®: $FÃ≈—≥˜Ñ« = $Dåÿ∏ÃØà⁄->pathFather($dè∏⁄ëƒèÜ); static $C„¢»√ÿ¯ = false; $a∑ÒêíËÈ◊ = $f™„áú‹íô[2157] . md5($FÃ≈—≥˜Ñ«); goto aı÷ÚÍúò»; aı÷ÚÍúò»: if (!$C„¢»√ÿ¯ && !Cache::get($a∑ÒêíËÈ◊)) { $C„¢»√ÿ¯ = !0; $F∫ç™‡Ï∑√ = IO::mkdir($FÃ≈—≥˜Ñ«); if (!IO::exist($F∫ç™‡Ï∑√ . $f™„áú‹íô[2158])) { IO::mkfile($F∫ç™‡Ï∑√ . $f™„áú‹íô[2158]); } Cache::set($a∑ÒêíËÈ◊, 1, 3600 * 2); } return $dè∏⁄ëƒèÜ; goto BÀ∏∫õ°çÊ; FﬁÌÇà±≤: $f™„áú‹íô =& $_SERVER[áí∂¯Â¸Áò]; $Dåÿ∏ÃØà⁄ = IO::init($f™„áú‹íô[8]); $dè∏⁄ëƒèÜ = $this->makeFilePath($EÜêïå⁄≠“, $Dåÿ∏ÃØà⁄); goto Bï∫Ìõñ˘®; BÀ∏∫õ°çÊ: } public function makeFilePath($cæâââ ‘‚, $eƒ¶ Úô‰Ü) { goto Céíä‡ôœ≤; Céíä‡ôœ≤: $fà˜∆§Ò£æ =& $_SERVER[áí∂¯Â¸Áò]; $EÑÜπÀä‹◊ = Model($fà˜∆§Ò£æ[1095])->get($fà˜∆§Ò£æ[2159]); $D˘˜ Ñƒ–¯ = KodIO::defaultIO() . date($fà˜∆§Ò£æ[2160]); goto E©Éƒï«Ú; E©Éƒï«Ú: $eŒÈ÷—¡úÊ = $D˘˜ Ñƒ–¯ . rand_string(5) . short_id(100); $cæâââ ‘‚ = str_replace($fà˜∆§Ò£æ[8], $fà˜∆§Ò£æ[70], KodIO::clear($cæâââ ‘‚)); if (!$cæâââ ‘‚) { $EÑÜπÀä‹◊ = $fà˜∆§Ò£æ[2161]; } goto dùÌ¨§á≥µ; dùÌ¨§á≥µ: switch ($EÑÜπÀä‹◊) { case $fà˜∆§Ò£æ[2162]: $eŒÈ÷—¡úÊ = $eŒÈ÷—¡úÊ . $fà˜∆§Ò£æ[91] . $eƒ¶ Úô‰Ü->ext($cæâââ ‘‚); if ($eƒ¶ Úô‰Ü->ext($cæâââ ‘‚) == $fà˜∆§Ò£æ[2102]) { $eŒÈ÷—¡úÊ .= $fà˜∆§Ò£æ[1344]; } break; case $fà˜∆§Ò£æ[2163]: goto EÜ÷Û¯Ã¥Ì; eä¯¶Õ¨ ≤: CacheLock::lock($Aóπ†√ÖÉı); $dâé◊∑˘Üó = IO::fileNameAuto($D˘˜ Ñƒ–¯, $cæâââ ‘‚); $eŒÈ÷—¡úÊ = $D˘˜ Ñƒ–¯ . $dâé◊∑˘Üó; goto Bæë…®Œäπ; Bæë…®Œäπ: if (IO::isTypeObject($eŒÈ÷—¡úÊ) && !IO::isUploadServer($eŒÈ÷—¡úÊ)) { IO::setContent($eŒÈ÷—¡úÊ, $fà˜∆§Ò£æ[33]); } CacheLock::unlock($Aóπ†√ÖÉı); break; goto BÎü∑ì”¨µ; EÜ÷Û¯Ã¥Ì: $béÎ§˘ëåô = Model($fà˜∆§Ò£æ[1095])->get($fà˜∆§Ò£æ[1340]); $F£ÈíÕÑ∆è = substr(md5($fà˜∆§Ò£æ[1921] . $béÎ§˘ëåô . date($fà˜∆§Ò£æ[693])), 0, 8); $a…ﬂÔ´–ùÙ = KodIO::defaultDriver(); goto båëÈÌ¿âæ; båëÈÌ¿âæ: $D˘˜ Ñƒ–¯ = $fà˜∆§Ò£æ[2164] . $a…ﬂÔ´–ùÙ[$fà˜∆§Ò£æ[371]] . $fà˜∆§Ò£æ[2165] . date($fà˜∆§Ò£æ[2166]) . $F£ÈíÕÑ∆è . $fà˜∆§Ò£æ[8]; if ($eƒ¶ Úô‰Ü->ext($cæâââ ‘‚) == $fà˜∆§Ò£æ[2102]) { $cæâââ ‘‚ .= $fà˜∆§Ò£æ[1344]; } $Aóπ†√ÖÉı = $fà˜∆§Ò£æ[2167] . $D˘˜ Ñƒ–¯ . $cæâââ ‘‚; goto eä¯¶Õ¨ ≤; BÎü∑ì”¨µ: case $fà˜∆§Ò£æ[2161]: break; default: break; } return $eŒÈ÷—¡úÊ; goto F…ÜÑøÛÕ©; F…ÜÑøÛÕ©: } public function addFileByRemote($d≥ÿÓã€ì⁄, $fŸ‡ï˜º°÷, $aÉÌ√ºúí¿ = array()) { goto E„Î›‚Ã⁄¢; AæÉ°÷äÓ∫: if ($d¿ÈèÇŸ∫ö = $this->addFileCheckExist($Bû—ØöûπË[$d˘¬»ù∫˘©[168]], $Bû—ØöûπË[$d˘¬»ù∫˘©[167]], $Bû—ØöûπË[$d˘¬»ù∫˘©[77]])) { return $d¿ÈèÇŸ∫ö; } return $this->addFileData($Bû—ØöûπË); goto aè»–—Ñ¥Í; aÏçòäê·è: $Cﬁ©˘Æ¡¢≤ = IO::hashMd5($d≥ÿÓã€ì⁄, $EŸ¶É´ç…ä); $cÜØë≠…°“ = KodIO::defaultDriver(); $Bû—ØöûπË = array($d˘¬»ù∫˘©[533] => IO::size($d≥ÿÓã€ì⁄), $d˘¬»ù∫˘©[2168] => 1, $d˘¬»ù∫˘©[398] => $fŸ‡ï˜º°÷, $d˘¬»ù∫˘©[741] => $cÜØë≠…°“[$d˘¬»ù∫˘©[371]], $d˘¬»ù∫˘©[399] => $d≥ÿÓã€ì⁄, $d˘¬»ù∫˘©[2169] => $aÉÌ√ºúí¿[$d˘¬»ù∫˘©[168]] ? $aÉÌ√ºúí¿[$d˘¬»ù∫˘©[168]] : IO::hashSimple($d≥ÿÓã€ì⁄), $d˘¬»ù∫˘©[2170] => $Cﬁ©˘Æ¡¢≤ ? $Cﬁ©˘Æ¡¢≤ : $EŸ¶É´ç…ä); goto AæÉ°÷äÓ∫; E„Î›‚Ã⁄¢: $d˘¬»ù∫˘© =& $_SERVER[áí∂¯Â¸Áò]; if (!IO::exist($d≥ÿÓã€ì⁄)) { return !1; } $EŸ¶É´ç…ä = $aÉÌ√ºúí¿[$d˘¬»ù∫˘©[167]] ? $aÉÌ√ºúí¿[$d˘¬»ù∫˘©[167]] : $d˘¬»ù∫˘©[33]; goto aÏçòäê·è; aè»–—Ñ¥Í: } private function addFileData($Bë∆ã›ÔÎø) { $bôö£ñ≠ë =& $_SERVER[áí∂¯Â¸Áò]; if (!$Bë∆ã›ÔÎø) { return !1; } $Bë∆ã›ÔÎø[$bôö£ñ≠ë[77]] = intval($Bë∆ã›ÔÎø[$bôö£ñ≠ë[77]]); if (!$Bë∆ã›ÔÎø[$bôö£ñ≠ë[77]] && strlen($Bë∆ã›ÔÎø[$bôö£ñ≠ë[168]]) > 32) { $Bë∆ã›ÔÎø[$bôö£ñ≠ë[77]] = intval(substr($Bë∆ã›ÔÎø[$bôö£ñ≠ë[168]], 32)); } $F„ÀÎßì◊¨ = $this->add($Bë∆ã›ÔÎø); return $this->find($F„ÀÎßì◊¨); } public function addFile($bﬂû§ıÖåÁ, $C∏èÑÿïﬁÉ, $F£ëÑ¿äﬁè = false) { goto fﬂ¯‰ôÉú™; C°§å§ãè˘: $EÜüÒïêÂá = $this->addFileMake($bﬂû§ıÖåÁ, $cóé’É÷¬, $a…´í£œ∆ù, $eÿ◊ııÏ“, $C∏èÑÿïﬁÉ, $F£ëÑ¿äﬁè); $b≥ÏÚ∏• Ï = $this->addFileData($EÜüÒïêÂá); CacheLock::unlock($b¶†•ﬂóÀà); goto b‹‘úÖﬁçç; b‹‘úÖﬁçç: return $b≥ÏÚ∏• Ï; goto AÜ„Ø‘öˆ—; B≈´„æ∑‚Õ: $b¶†•ﬂóÀà = $_SERVER[áí∂¯Â¸Áò][2171] . $eÿ◊ııÏ“; CacheLock::lock($b¶†•ﬂóÀà); if ($c“æ◊«‚´ë = $this->addFileCheckExist($a…´í£œ∆ù, $eÿ◊ııÏ“, $cóé’É÷¬)) { CacheLock::unlock($b¶†•ﬂóÀà); return $c“æ◊«‚´ë; } goto C°§å§ãè˘; fﬂ¯‰ôÉú™: $a…´í£œ∆ù = IO::hashSimple($bﬂû§ıÖåÁ); $eÿ◊ııÏ“ = IO::hashMd5($bﬂû§ıÖåÁ); $cóé’É÷¬ = IO::size($bﬂû§ıÖåÁ); goto B≈´„æ∑‚Õ; AÜ„Ø‘öˆ—: } public function addFileMake($c≥ùˆÙŒ‡π, $B¿Ö≤ä€æç, $D‘˘Ù„§êå, $dåà˜Áñå™, $aìÇˆ⁄…ÇΩ, $FÖ¡“ΩäÚË) { goto Bà”Û¥«®; eòÌÀÛœ˜“: $d°éÉÑ◊ıˆ = KodIO::defaultDriver(); $aõ∂¢÷êóû = array($eΩä÷√Ïø≠[533] => $B¿Ö≤ä€æç, $eΩä÷√Ïø≠[2168] => 1, $eΩä÷√Ïø≠[398] => $aìÇˆ⁄…ÇΩ, $eΩä÷√Ïø≠[741] => $d°éÉÑ◊ıˆ[$eΩä÷√Ïø≠[371]], $eΩä÷√Ïø≠[399] => $f–⁄ΩÉ∏†≥, $eΩä÷√Ïø≠[2169] => $D‘˘Ù„§êå, $eΩä÷√Ïø≠[2170] => $dåà˜Áñå™); return $aõ∂¢÷êóû; goto Dòî®óª€’; Bà”Û¥«®: $eΩä÷√Ïø≠ =& $_SERVER[áí∂¯Â¸Áò]; $f–⁄ΩÉ∏†≥ = $this->createFileName($aìÇˆ⁄…ÇΩ); $CﬂÛ•ò§‘  = get_path_father($f–⁄ΩÉ∏†≥); goto cªê—ﬂ¿ﬁ¯; cªê—ﬂ¿ﬁ¯: $cåç†ÓñÑﬂ = get_path_this($f–⁄ΩÉ∏†≥); if ($FÖ¡“ΩäÚË) { $fÙÖ‚æâÇÇ = IO::move($c≥ùˆÙŒ‡π, $CﬂÛ•ò§‘ , !1, $cåç†ÓñÑﬂ); } else { $fÙÖ‚æâÇÇ = IO::copy($c≥ùˆÙŒ‡π, $CﬂÛ•ò§‘ , !1, $cåç†ÓñÑﬂ); } if (!$fÙÖ‚æâÇÇ) { return !1; } goto eòÌÀÛœ˜“; Dòî®óª€’: } public function addFileCheckExist($A∞èç¯Í«Ü, $FÂ“Ù’ˆπ…, $C÷†µ‚ÿ±‰) { $fÚ…âñÀ«‡ =& $_SERVER[áí∂¯Â¸Áò]; $C‹ÜíÆ´Û≥ = $this->findByHash($A∞èç¯Í«Ü, $FÂ“Ù’ˆπ…); if (!$C‹ÜíÆ´Û≥) { return !1; } $DÂŒÔÕßµ’ = array($fÚ…âñÀ«‡[2168] => intval($C‹ÜíÆ´Û≥[$fÚ…âñÀ«‡[2172]]) + 1, $fÚ…âñÀ«‡[533] => $C÷†µ‚ÿ±‰); $this->where(array($fÚ…âñÀ«‡[432] => $C‹ÜíÆ´Û≥[$fÚ…âñÀ«‡[431]]))->save($DÂŒÔÕßµ’); return $C‹ÜíÆ´Û≥; } public function remove($aòﬂÉùäÒı) { $this->linkCountChange($aòﬂÉùäÒı, !1); $this->clearEmpty(); return !0; } public function linkAdd($F‡ëﬁâ≤) { $this->linkCountChange($F‡ëﬁâ≤, !0); } public function linkCountChange($e”«¨‰ƒﬂÖ, $eŒéﬁé¡Œã) { goto aóÖÊ≈ö∞ã; BßÂ©¬ŸıÉ: $cñõÇª∫õ£ = array(); foreach ($e”«¨‰ƒﬂÖ as $f·πó•ª˜Ô) { $E·âÒ¥ö˘ö = $f·πó•ª˜Ô . $Fà€›Ü∞ëù[33]; if (!$cñõÇª∫õ£[$E·âÒ¥ö˘ö]) { $cñõÇª∫õ£[$E·âÒ¥ö˘ö] = 0; } $cñõÇª∫õ£[$E·âÒ¥ö˘ö]++; } $aÇ–ﬂö‡ê’ = array(); goto Cê¢ÌÆé√…; aóÖÊ≈ö∞ã: $Fà€›Ü∞ëù =& $_SERVER[áí∂¯Â¸Áò]; if (!$e”«¨‰ƒﬂÖ) { return; } if (!is_array($e”«¨‰ƒﬂÖ)) { $e”«¨‰ƒﬂÖ = array($e”«¨‰ƒﬂÖ); } goto BßÂ©¬ŸıÉ; Cê¢ÌÆé√…: foreach ($cñõÇª∫õ£ as $f·πó•ª˜Ô => $Cíç√ ⁄ÚÜ) { $E·âÒ¥ö˘ö = $Cíç√ ⁄ÚÜ . $Fà€›Ü∞ëù[33]; if (!$aÇ–ﬂö‡ê’[$E·âÒ¥ö˘ö]) { $aÇ–ﬂö‡ê’[$E·âÒ¥ö˘ö] = array(); } $aÇ–ﬂö‡ê’[$E·âÒ¥ö˘ö][] = $f·πó•ª˜Ô; } foreach ($aÇ–ﬂö‡ê’ as $Cíç√ ⁄ÚÜ => $aÏÖ±÷…©î) { if (!$aÏÖ±÷…©î) { continue; } $Cíç√ ⁄ÚÜ = $eŒéﬁé¡Œã ? $Cíç√ ⁄ÚÜ : -intval($Cíç√ ⁄ÚÜ); $a“”ô⁄∞Ï“ = array($Fà€›Ü∞ëù[431] => array($Fà€›Ü∞ëù[7], $aÏÖ±÷…©î)); if ($Cíç√ ⁄ÚÜ < 0) { $a“”ô⁄∞Ï“[$Fà€›Ü∞ëù[2172]] = array($Fà€›Ü∞ëù[932], abs($Cíç√ ⁄ÚÜ)); } $this->where($a“”ô⁄∞Ï“)->setAdd($Fà€›Ü∞ëù[2172], $Cíç√ ⁄ÚÜ); } goto A¯äàœåÃ»; A¯äàœåÃ»: } public function findByHash($DŒå§áà§ª, $cÈ•”⁄åÔı = false) { $f¿ÑñÜÏÒı =& $_SERVER[áí∂¯Â¸Áò]; if (!$DŒå§áà§ª && !$cÈ•”⁄åÔı) { return !1; } $fëâöÈ†Îé = array($f¿ÑñÜÏÒı[2169] => $DŒå§áà§ª); if ($cÈ•”⁄åÔı) { $fëâöÈ†Îé = array($f¿ÑñÜÏÒı[2170] => $cÈ•”⁄åÔı); } return $this->order($f¿ÑñÜÏÒı[2173])->where($fëâöÈ†Îé)->find(); } public function clearEmpty($f◊…ÎÜáãÊ = 0) { goto Bñ√◊Ì°∆ê; Aùı•êªéì: $A≈ª•Ù∆ÿâ = $this->where($aÌ∫≠≈´õê)->select(); if (!$A≈ª•Ù∆ÿâ) { return; } $dƒê¢Ø„—ä = new Task($eΩƒÿ‚òÀÆ[2175], $eΩƒÿ‚òÀÆ[33], count($A≈ª•Ù∆ÿâ)); goto e÷Æ”éóõœ; Bñ√◊Ì°∆ê: $eΩƒÿ‚òÀÆ =& $_SERVER[áí∂¯Â¸Áò]; $fô‰á¿´ë¶ = time() - 3600 * 24 * $f◊…ÎÜáãÊ; $aÌ∫≠≈´õê = $eΩƒÿ‚òÀÆ[2174] . $fô‰á¿´ë¶; goto Aùı•êªéì; e÷Æ”éóõœ: foreach ($A≈ª•Ù∆ÿâ as $FÇıœπÈ€¥) { $dƒê¢Ø„—ä->update(1); $this->resetFile($FÇıœπÈ€¥); } $dƒê¢Ø„—ä->end(); goto Eï°Ç∏ôÆ∑; Eï°Ç∏ôÆ∑: } public function resetFile($FêÃû‘®ÉÈ) { goto AúŒêñ≈Œ√; cà∆ßÙö˜÷: if ($FêÃû‘®ÉÈ[$DæêÖÑÍ´•[2172]] != $c ü∆ì£±À) { $this->where($E˘±…ÏÜ·î)->save(array($DæêÖÑÍ´•[2168] => $c ü∆ì£±À)); } goto DØÊ◊‹Ωÿê; E∞»áâëﬁΩ: $eë»⁄û¶ªæ = Model($DæêÖÑÍ´•[2176])->where($E˘±…ÏÜ·î)->count(); $c ü∆ì£±À = intval($d·≈¢‰ºÀ’) + intval($eë»⁄û¶ªæ); if ($c ü∆ì£±À == 0) { IO::remove($FêÃû‘®ÉÈ[$DæêÖÑÍ´•[75]]); $this->where($E˘±…ÏÜ·î)->delete(); $this->metaSet($FêÃû‘®ÉÈ[$DæêÖÑÍ´•[431]], null, null); return; } goto cà∆ßÙö˜÷; AúŒêñ≈Œ√: $DæêÖÑÍ´• =& $_SERVER[áí∂¯Â¸Áò]; $E˘±…ÏÜ·î = array($DæêÖÑÍ´•[432] => $FêÃû‘®ÉÈ[$DæêÖÑÍ´•[431]]); $d·≈¢‰ºÀ’ = Model($DæêÖÑÍ´•[1124])->where($E˘±…ÏÜ·î)->count(); goto E∞»áâëﬁΩ; DØÊ◊‹Ωÿê: } public function storageInfo($Aç≤ÑàÚ∂Ú = false) { goto aº≈äüç”ú; bŒ“¢Ô•™: $DÜ»ó∞ç”Ö = 1; $E∏‘£Ÿä›‹ = 0; $fÑó∫ÙÍâ≠ = 5000; goto EéÏŸëà‹ˆ; aº≈äüç”ú: $C∏Û–ÓöÕÜ =& $_SERVER[áí∂¯Â¸Áò]; $F‡‰Ãµˆõ« = $this->count() + 0.0; $cà…ÖŸ£√á = 0; goto bŒ“¢Ô•™; EéÏŸëà‹ˆ: for ($dºÔ£áπ∏ù = 0; $dºÔ£áπ∏ù < $F‡‰Ãµˆõ«; $dºÔ£áπ∏ù = $dºÔ£áπ∏ù + $fÑó∫ÙÍâ≠) { $EâîËÕÀ†Õ = $this->limit($dºÔ£áπ∏ù, $dºÔ£áπ∏ù + $fÑó∫ÙÍâ≠)->select(); foreach ($EâîËÕÀ†Õ as $CöÎù⁄ÓØª) { $DÜ»ó∞ç”Ö += $CöÎù⁄ÓØª[$C∏Û–ÓöÕÜ[77]] * $CöÎù⁄ÓØª[$C∏Û–ÓöÕÜ[2172]]; $cà…ÖŸ£√á += $CöÎù⁄ÓØª[$C∏Û–ÓöÕÜ[77]] * ($CöÎù⁄ÓØª[$C∏Û–ÓöÕÜ[2172]] - 1); $E∏‘£Ÿä›‹ += $CöÎù⁄ÓØª[$C∏Û–ÓöÕÜ[2172]]; } } $d“≤‹´•◊„ = array($C∏Û–ÓöÕÜ[2177] => $DÜ»ó∞ç”Ö, $C∏Û–ÓöÕÜ[2178] => $cà…ÖŸ£√á, $C∏Û–ÓöÕÜ[2179] => $cà…ÖŸ£√á / $DÜ»ó∞ç”Ö, $C∏Û–ÓöÕÜ[81] => $F‡‰Ãµˆõ«, $C∏Û–ÓöÕÜ[2180] => $E∏‘£Ÿä›‹); return $d“≤‹´•◊„; goto EÊ˘£ÛúäÜ; EÊ˘£ÛúäÜ: } } goto bë≤œû∂Âã; c÷˘ÙÊÀ≈Û: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($B·‹ÎÛØ∆ﬂ = '') { $cèä°µ«ñ≠ =& $_SERVER[áí∂¯Â¸Áò]; if (!class_exists($cèä°µ«ñ≠[831])) { think_exception(think_lang($cèä°µ«ñ≠[10]) . $cèä°µ«ñ≠[832]); } if (!empty($B·‹ÎÛØ∆ﬂ)) { $this->config = $B·‹ÎÛØ∆ﬂ; if (empty($this->config[$cèä°µ«ñ≠[13]])) { $this->config[$cèä°µ«ñ≠[13]] = array(); } } } public function connect($A€Çù√±ÚŸ = '', $dà©≤óÉÖŒ = 0) { $e›†‡»Ú‘à =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($this->linkID[$dà©≤óÉÖŒ])) { goto CÍÎ›ÍıÙâ; CÍÎ›ÍıÙâ: if (empty($A€Çù√±ÚŸ)) { $A€Çù√±ÚŸ = $this->config; } if ($this->pconnect) { $A€Çù√±ÚŸ[$e›†‡»Ú‘à[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$dà©≤óÉÖŒ] = new PDO($A€Çù√±ÚŸ[$e›†‡»Ú‘à[833]], $A€Çù√±ÚŸ[$e›†‡»Ú‘à[806]], $A€Çù√±ÚŸ[$e›†‡»Ú‘à[807]], $A€Çù√±ÚŸ[$e›†‡»Ú‘à[13]]); } catch (PDOException $D⁄Âàïº∫Ñ) { think_exception($D⁄Âàïº∫Ñ->getMessage()); } goto d‚ÕåÁø«∞; f∏™á‘ﬂÑä: try { $this->linkID[$dà©≤óÉÖŒ]->exec($e›†‡»Ú‘à[842] . think_config($e›†‡»Ú‘à[809])); } catch (Exception $D⁄Âàïº∫Ñ) { } $this->connected = !0; if (1 != think_config($e›†‡»Ú‘à[18])) { unset($this->config); } goto F≥›Õ≠æÜó; d‚ÕåÁø«∞: $this->dbType = $this->_getDsnType($A€Çù√±ÚŸ[$e›†‡»Ú‘à[833]]); if (in_array($this->dbType, array($e›†‡»Ú‘à[834], $e›†‡»Ú‘à[835], $e›†‡»Ú‘à[836], $e›†‡»Ú‘à[837]))) { think_exception($e›†‡»Ú‘à[838] . $this->dbType . $e›†‡»Ú‘à[839] . $this->dbType . $e›†‡»Ú‘à[840]); } if (!$this->linkID[$dà©≤óÉÖŒ]) { think_exception($e›†‡»Ú‘à[841]); } goto f∏™á‘ﬂÑä; F≥›Õ≠æÜó: } return $this->linkID[$dà©≤óÉÖŒ]; } public function free() { $this->PDOStatement = null; } public function query($Bªı√öµÆ™, $C¬ŒÑπ•ÂÏ = array()) { goto c¢±ñÛêË; c¢±ñÛêË: $bı˘⁄Áõ¥¬ =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Aé«≥•ÿ®ä; FŸ±Ë¡…ÎÑ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $dÇîáú°é” = $this->PDOStatement->execute($C¬ŒÑπ•ÂÏ); $this->debug(); goto c¢∑∫ÕêìÌ; Aé«≥•ÿ®ä: $this->queryStr = $Bªı√öµÆ™; if (!empty($C¬ŒÑπ•ÂÏ)) { $this->queryStr .= $bı˘⁄Áõ¥¬[843] . print_r($C¬ŒÑπ•ÂÏ, !0) . $bı˘⁄Áõ¥¬[844]; } if (!empty($this->PDOStatement)) { $this->free(); } goto B£…Òç‚¿Ç; B£…Òç‚¿Ç: think_action_status($bı˘⁄Áõ¥¬[19], 1); think_status($bı˘⁄Áõ¥¬[20]); $this->PDOStatement = $this->_linkID->prepare($Bªı√öµÆ™); goto FŸ±Ë¡…ÎÑ; c¢∑∫ÕêìÌ: if (!1 === $dÇîáú°é”) { $this->error(); return !1; } else { return $this->getAll(); } goto dÆ›„îöÍ‘; dÆ›„îöÍ‘: } public function execute($cı´ïÆ°–ú, $BªË™…≤‹π = array()) { goto CÇÚ¨â‰≠ñ; c˘πµ«˘∞≥: if ($this->dbType == $AÔÒÎ·ä≤Û[837]) { if (preg_match($AÔÒÎ·ä≤Û[845], $this->queryStr, $D›ï¥¨Ãì«)) { $this->table = think_config($AÔÒÎ·ä≤Û[846]) . str_ireplace(think_config($AÔÒÎ·ä≤Û[847]), $AÔÒÎ·ä≤Û[365], $D›ï¥¨Ãì«[2]); $Aç∞ÆΩÉﬂÜ = (bool) $this->query($AÔÒÎ·ä≤Û[848] . strtoupper($this->table) . $AÔÒÎ·ä≤Û[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($AÔÒÎ·ä≤Û[21], 1); goto F‘æ¶‹æ◊Ï; FﬁÀ£éÇ”ù: $BÛõ…õﬁ™œ = $this->PDOStatement->execute($BªË™…≤‹π); $this->debug(); if (!1 === $BÛõ…õﬁ™œ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Aç∞ÆΩÉﬂÜ || preg_match($AÔÒÎ·ä≤Û[849], $cı´ïÆ°–ú)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto då˜¢πÉå¯; F‘æ¶‹æ◊Ï: think_status($AÔÒÎ·ä≤Û[20]); $this->PDOStatement = $this->_linkID->prepare($cı´ïÆ°–ú); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto FﬁÀ£éÇ”ù; CÇÚ¨â‰≠ñ: $AÔÒÎ·ä≤Û =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto C¶ﬂ∑∞ãè‚; C¶ﬂ∑∞ãè‚: $this->queryStr = $cı´ïÆ°–ú; if (!empty($BªË™…≤‹π)) { $this->queryStr .= $AÔÒÎ·ä≤Û[843] . print_r($BªË™…≤‹π, !0) . $AÔÒÎ·ä≤Û[844]; } $Aç∞ÆΩÉﬂÜ = !1; goto c˘πµ«˘∞≥; då˜¢πÉå¯: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d†™≥πË±ô = $this->_linkID->commit(); $this->transTimes = 0; if (!$d†™≥πË±ô) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B„í◊òéÉß = $this->_linkID->rollback(); $this->transTimes = 0; if (!$B„í◊òéÉß) { $this->error(); return !1; } } return !0; } private function getAll() { $FõïÉ•öóâ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($FõïÉ•öóâ); return $FõïÉ•öóâ; } public function getFields($E™ôüÜ…Ë¢) { goto få°ï∞ãû¥; AŸ√ìé‚≈´: $BÆõ´Ê»’ = $this->query($d∫®éùäá); $A≥ÿÂÓ⁄ÇŒ = array(); if ($BÆõ´Ê»’) { foreach ($BÆõ´Ê»’ as $bà†∆Ñô›– => $eèØ’ êÇæ) { $eèØ’ êÇæ = array_change_key_case($eèØ’ êÇæ); $eèØ’ êÇæ[$C∞éıªÖÓë[28]] = isset($eèØ’ êÇæ[$C∞éıªÖÓë[28]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[28]] : $C∞éıªÖÓë[365]; $eèØ’ êÇæ[$C∞éıªÖÓë[29]] = isset($eèØ’ êÇæ[$C∞éıªÖÓë[29]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[29]] : $C∞éıªÖÓë[365]; $D†ùÜ≠“ıπ = isset($eèØ’ êÇæ[$C∞éıªÖÓë[265]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[265]] : $eèØ’ êÇæ[$C∞éıªÖÓë[28]]; $A≥ÿÂÓ⁄ÇŒ[$D†ùÜ≠“ıπ] = array($C∞éıªÖÓë[28] => $D†ùÜ≠“ıπ, $C∞éıªÖÓë[29] => $eèØ’ êÇæ[$C∞éıªÖÓë[29]], $C∞éıªÖÓë[31] => (bool) (isset($eèØ’ êÇæ[$C∞éıªÖÓë[99]]) && $eèØ’ êÇæ[$C∞éıªÖÓë[99]] === $C∞éıªÖÓë[33] || isset($eèØ’ êÇæ[$C∞éıªÖÓë[31]]) && $eèØ’ êÇæ[$C∞éıªÖÓë[31]] === $C∞éıªÖÓë[33]), $C∞éıªÖÓë[34] => isset($eèØ’ êÇæ[$C∞éıªÖÓë[34]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[34]] : (isset($eèØ’ êÇæ[$C∞éıªÖÓë[53]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[53]] : $C∞éıªÖÓë[365]), $C∞éıªÖÓë[36] => isset($eèØ’ êÇæ[$C∞éıªÖÓë[89]]) ? strtolower($eèØ’ êÇæ[$C∞éıªÖÓë[89]]) == $C∞éıªÖÓë[38] : (isset($eèØ’ êÇæ[$C∞éıªÖÓë[54]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[54]] : !1), $C∞éıªÖÓë[39] => isset($eèØ’ êÇæ[$C∞éıªÖÓë[866]]) ? strtolower($eèØ’ êÇæ[$C∞éıªÖÓë[866]]) == $C∞éıªÖÓë[41] : (isset($eèØ’ êÇæ[$C∞éıªÖÓë[89]]) ? $eèØ’ êÇæ[$C∞éıªÖÓë[89]] : !1)); } } goto dç⁄äÓë‡°; dç⁄äÓë‡°: return $A≥ÿÂÓ⁄ÇŒ; goto b√å◊®ç∫Ü; få°ï∞ãû¥: $C∞éıªÖÓë =& $_SERVER[áí∂¯Â¸Áò]; $this->initConnect(!0); if (think_config($C∞éıªÖÓë[850])) { $d∫®éùäá = str_replace($C∞éıªÖÓë[851], $E™ôüÜ…Ë¢, think_config($C∞éıªÖÓë[850])); } else { switch ($this->dbType) { case $C∞éıªÖÓë[834]: case $C∞éıªÖÓë[852]: $d∫®éùäá = "\x53\105\x4c\x45\x43\x54\40\40\x20\143\x6f\154\165\155\156\137\x6e\x61\x6d\145\40\x61\163\x20\47\116\141\x6d\145\x27\54\40\x20\x20\x64\141\x74\141\137\x74\x79\x70\x65\40\141\163\40\x27\x54\171\x70\145\47\54\x20\x20\x20\x63\x6f\154\165\155\156\137\144\145\146\141\x75\154\164\40\x61\x73\x20\x27\104\x65\x66\x61\165\x6c\164\x27\54\40\40\x20\151\163\137\156\x75\x6c\x6c\x61\x62\154\145\40\x61\x73\x20\47\116\165\x6c\154\47\xa\x9\11\106\122\117\x4d\x9\151\x6e\146\157\162\155\x61\164\x69\x6f\156\x5f\x73\x63\x68\145\155\x61\56\164\141\142\x6c\x65\x73\x20\101\x53\x20\x74\12\11\11\x4a\117\111\x4e\11\x69\156\146\157\x72\155\141\164\151\x6f\x6e\137\163\143\150\x65\155\x61\x2e\143\x6f\x6c\x75\x6d\156\x73\40\101\123\40\143\xa\11\x9\117\x4e\40\x20\x74\x2e\x74\141\x62\154\x65\137\143\141\164\141\154\157\x67\x20\75\x20\x63\56\164\x61\x62\154\x65\x5f\x63\x61\164\x61\154\x6f\x67\12\11\11\x41\116\x44\x20\x74\x2e\164\x61\x62\x6c\145\137\x73\x63\150\x65\155\x61\x20\75\x20\143\56\164\141\x62\154\145\137\163\x63\x68\x65\x6d\141\xa\x9\11\x41\116\x44\40\164\x2e\164\141\142\x6c\145\x5f\156\x61\x6d\x65\40\75\x20\x63\56\x74\141\x62\x6c\x65\x5f\x6e\x61\x6d\x65\xa\11\x9\127\x48\x45\122\x45\x20\40\40\x74\x2e\x74\141\x62\x6c\x65\x5f\x6e\x61\155\x65\40\75\40\47{$E™ôüÜ…Ë¢}\x27"; break; case $C∞éıªÖÓë[853]: $d∫®éùäá = $C∞éıªÖÓë[854] . $E™ôüÜ…Ë¢ . $C∞éıªÖÓë[855]; break; case $C∞éıªÖÓë[835]: case $C∞éıªÖÓë[837]: $d∫®éùäá = $C∞éıªÖÓë[856] . $C∞éıªÖÓë[857] . $C∞éıªÖÓë[858] . strtoupper($E™ôüÜ…Ë¢) . $C∞éıªÖÓë[859] . strtoupper($E™ôüÜ…Ë¢) . $C∞éıªÖÓë[860]; break; case $C∞éıªÖÓë[861]: $d∫®éùäá = $C∞éıªÖÓë[862] . $E™ôüÜ…Ë¢ . $C∞éıªÖÓë[863]; break; case $C∞éıªÖÓë[836]: break; case $C∞éıªÖÓë[864]: default: $d∫®éùäá = $C∞éıªÖÓë[865] . ($this->dbType == $C∞éıªÖÓë[864] ? "\140{$E™ôüÜ…Ë¢}\x60" : $E™ôüÜ…Ë¢); } } goto AŸ√ìé‚≈´; b√å◊®ç∫Ü: } public function getTables($F˘éﬁ·’ƒ´ = '') { $eáπÔáéú≈ =& $_SERVER[áí∂¯Â¸Áò]; if (think_config($eáπÔáéú≈[867])) { $e ïﬁ»ÊÎπ = str_replace($eáπÔáéú≈[868], $F˘éﬁ·’ƒ´, think_config($eáπÔáéú≈[867])); } else { switch ($this->dbType) { case $eáπÔáéú≈[835]: case $eáπÔáéú≈[837]: $e ïﬁ»ÊÎπ = $eáπÔáéú≈[869]; break; case $eáπÔáéú≈[834]: case $eáπÔáéú≈[852]: $e ïﬁ»ÊÎπ = $eáπÔáéú≈[870]; break; case $eáπÔáéú≈[861]: $e ïﬁ»ÊÎπ = $eáπÔáéú≈[871]; break; case $eáπÔáéú≈[836]: think_exception(think_lang($eáπÔáéú≈[872]) . $eáπÔáéú≈[873]); break; case $eáπÔáéú≈[853]: $e ïﬁ»ÊÎπ = $eáπÔáéú≈[42] . $eáπÔáéú≈[43] . $eáπÔáéú≈[44]; break; case $eáπÔáéú≈[864]: default: if (!empty($F˘éﬁ·’ƒ´)) { $e ïﬁ»ÊÎπ = $eáπÔáéú≈[817] . $F˘éﬁ·’ƒ´; } else { $e ïﬁ»ÊÎπ = $eáπÔáéú≈[818]; } } } $E◊∫€™∆ô◊ = $this->query($e ïﬁ»ÊÎπ); $fŒ¢üﬂ∏àç = array(); foreach ($E◊∫€™∆ô◊ as $AÒÔÇΩœƒ¡ => $A≈”‰˘≠Àœ) { $fŒ¢üﬂ∏àç[$AÒÔÇΩœƒ¡] = current($A≈”‰˘≠Àœ); } return $fŒ¢üﬂ∏àç; } protected function parseLimit($eÚÿﬁ¯§ëƒ) { $EÎÆà∫◊˜Ê =& $_SERVER[áí∂¯Â¸Áò]; $C»®•⁄ﬂÁÛ = $EÎÆà∫◊˜Ê[33]; if (!empty($eÚÿﬁ¯§ëƒ)) { switch ($this->dbType) { case $EÎÆà∫◊˜Ê[861]: case $EÎÆà∫◊˜Ê[853]: $eÚÿﬁ¯§ëƒ = explode($EÎÆà∫◊˜Ê[47], $eÚÿﬁ¯§ëƒ); if (count($eÚÿﬁ¯§ëƒ) > 1) { $C»®•⁄ﬂÁÛ .= $EÎÆà∫◊˜Ê[48] . $eÚÿﬁ¯§ëƒ[1] . $EÎÆà∫◊˜Ê[49] . $eÚÿﬁ¯§ëƒ[0] . $EÎÆà∫◊˜Ê[50]; } else { $C»®•⁄ﬂÁÛ .= $EÎÆà∫◊˜Ê[48] . $eÚÿﬁ¯§ëƒ[0] . $EÎÆà∫◊˜Ê[50]; } break; case $EÎÆà∫◊˜Ê[834]: case $EÎÆà∫◊˜Ê[852]: break; case $EÎÆà∫◊˜Ê[836]: break; case $EÎÆà∫◊˜Ê[835]: case $EÎÆà∫◊˜Ê[837]: break; case $EÎÆà∫◊˜Ê[864]: default: $C»®•⁄ﬂÁÛ .= $EÎÆà∫◊˜Ê[48] . $eÚÿﬁ¯§ëƒ . $EÎÆà∫◊˜Ê[50]; } } return $C»®•⁄ﬂÁÛ; } public function parseKey(&$BÑíòøÁÚ¬, $c√Á˜îúÏî = true) { $C©ÜπÈÌâò =& $_SERVER[áí∂¯Â¸Áò]; if ($c√Á˜îúÏî) { $BÑíòøÁÚ¬ = $this->parseKeyCheck($BÑíòøÁÚ¬); } if ($this->dbType == $C©ÜπÈÌâò[864]) { if ($BÑíòøÁÚ¬ != $C©ÜπÈÌâò[180] && !preg_match($C©ÜπÈÌâò[828], $BÑíòøÁÚ¬)) { $BÑíòøÁÚ¬ = $C©ÜπÈÌâò[829] . trim($BÑíòøÁÚ¬, $C©ÜπÈÌâò[829]) . $C©ÜπÈÌâò[829]; } return $BÑíòøÁÚ¬; } else { return parent::parseKey($BÑíòøÁÚ¬); } } public function close() { $this->_linkID = null; } public function error() { $C÷∞¢¬Çı≥ =& $_SERVER[áí∂¯Â¸Áò]; if ($this->PDOStatement) { $Eè«°ïÑ«¯ = $this->PDOStatement->errorInfo(); $this->error = $Eè«°ïÑ«¯[1] . $C÷∞¢¬Çı≥[4] . $Eè«°ïÑ«¯[2]; } else { $this->error = $C÷∞¢¬Çı≥[33]; } if ($C÷∞¢¬Çı≥[33] != $this->queryStr) { $this->error .= LNG($C÷∞¢¬Çı≥[45]) . $this->queryStr; } think_trace($this->error, $C÷∞¢¬Çı≥[33], $C÷∞¢¬Çı≥[46]); return $this->error; } public function escapeString($aÊ•ŒÒ¡´Ê) { $f¯’ïÚùäŸ =& $_SERVER[áí∂¯Â¸Áò]; switch ($this->dbType) { case $f¯’ïÚùäŸ[861]: case $f¯’ïÚùäŸ[834]: case $f¯’ïÚùäŸ[852]: case $f¯’ïÚùäŸ[864]: return addslashes($aÊ•ŒÒ¡´Ê); case $f¯’ïÚùäŸ[836]: case $f¯’ïÚùäŸ[853]: case $f¯’ïÚùäŸ[835]: case $f¯’ïÚùäŸ[837]: return str_ireplace($f¯’ïÚùäŸ[55], $f¯’ïÚùäŸ[56], $aÊ•ŒÒ¡´Ê); } } protected function parseValue($bΩ™—∂Ÿÿ¿) { $D¡§å‹ü∞Ò =& $_SERVER[áí∂¯Â¸Áò]; if (is_string($bΩ™—∂Ÿÿ¿)) { $bΩ™—∂Ÿÿ¿ = strpos($bΩ™—∂Ÿÿ¿, $D¡§å‹ü∞Ò[4]) === 0 ? $this->escapeString($bΩ™—∂Ÿÿ¿) : $D¡§å‹ü∞Ò[874] . $this->escapeString($bΩ™—∂Ÿÿ¿) . $D¡§å‹ü∞Ò[874]; } elseif (isset($bΩ™—∂Ÿÿ¿[0]) && is_string($bΩ™—∂Ÿÿ¿[0]) && strtolower($bΩ™—∂Ÿÿ¿[0]) == $D¡§å‹ü∞Ò[289]) { $bΩ™—∂Ÿÿ¿ = $this->escapeString($bΩ™—∂Ÿÿ¿[1]); } elseif (is_array($bΩ™—∂Ÿÿ¿)) { $bΩ™—∂Ÿÿ¿ = array_map(array($this, $D¡§å‹ü∞Ò[875]), $bΩ™—∂Ÿÿ¿); } elseif (is_bool($bΩ™—∂Ÿÿ¿)) { $bΩ™—∂Ÿÿ¿ = $bΩ™—∂Ÿÿ¿ ? $D¡§å‹ü∞Ò[83] : $D¡§å‹ü∞Ò[481]; } elseif (is_null($bΩ™—∂Ÿÿ¿)) { $bΩ™—∂Ÿÿ¿ = $D¡§å‹ü∞Ò[99]; } return $bΩ™—∂Ÿÿ¿; } public function getLastInsertId() { $c≤åîœªÉÖ =& $_SERVER[áí∂¯Â¸Áò]; switch ($this->dbType) { case $c≤åîœªÉÖ[861]: case $c≤åîœªÉÖ[853]: case $c≤åîœªÉÖ[834]: case $c≤åîœªÉÖ[852]: case $c≤åîœªÉÖ[836]: case $c≤åîœªÉÖ[864]: return $this->_linkID->lastInsertId(); case $c≤åîœªÉÖ[835]: case $c≤åîœªÉÖ[837]: $FÉÇ–ª¢‡„ = $this->table; $C◊Ïıà“îÖ = $this->query("\123\x45\x4c\105\103\124\40{$FÉÇ–ª¢‡„}\56\143\165\162\162\166\141\x6c\x20\x63\x75\162\162\166\141\x6c\x20\106\x52\x4f\x4d\x20\x64\165\141\154"); return $C◊Ïıà“îÖ ? $C◊Ïıà“îÖ[0][$c≤åîœªÉÖ[876]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($aÜÂﬁå§√) { $aÌÖÉûŒ÷ë =& $_SERVER[áí∂¯Â¸Áò]; if (!CacheLock::fileLock($aÌÖÉûŒ÷ë[9])) { return !1; } $f£Æà¶äú— = parent::query($aÜÂﬁå§√); CacheLock::fileUnLock($aÌÖÉûŒ÷ë[9]); return $f£Æà¶äú—; } public function execute($E‘§Ÿ“∫Û¬) { $e˘‚ÃëûÕ¿ =& $_SERVER[áí∂¯Â¸Áò]; if (!CacheLock::fileLock($e˘‚ÃëûÕ¿[9])) { return !1; } $d«ÛµÇ¿÷∂ = parent::execute($E‘§Ÿ“∫Û¬); CacheLock::fileUnLock($e˘‚ÃëûÕ¿[9]); return $d«ÛµÇ¿÷∂; } } class DbSqlite3 extends DbSqlite3Base { public function query($F∞Ù‘∏ù›ó) { $e–∞é¨°ãù =& $_SERVER[áí∂¯Â¸Áò]; if (!CacheLock::fileLock($e–∞é¨°ãù[9])) { return !1; } $eÕ¿ΩÆü§ = parent::query($F∞Ù‘∏ù›ó); CacheLock::fileUnLock($e–∞é¨°ãù[9]); return $eÕ¿ΩÆü§; } public function execute($dªûã≥áåµ) { $CÙÊ¿Ì¯áô =& $_SERVER[áí∂¯Â¸Áò]; if (!CacheLock::fileLock($CÙÊ¿Ì¯áô[9])) { return !1; } $Bº∑Öÿ≥©Œ = parent::execute($dªûã≥áåµ); CacheLock::fileUnLock($CÙÊ¿Ì¯áô[9]); return $Bº∑Öÿ≥©Œ; } } goto fÃ˘·úèî¨; bë≤œû∂Âã: class GroupModel extends ModelBase { protected $tableName = "\147\x72\x6f\x75\x70"; protected $tableMeta = array("\164\141\x62\154\x65\x4e\x61\155\145" => "\147\x72\157\x75\160\x5f\155\x65\164\141", "\155\145\164\x61\x46\151\145\x6c\x64" => "\147\x72\157\165\160\x49\x44"); protected function cacheFunctionAlias($dè÷µ”ÙÖ≈) { $F∆´Îé„å  =& $_SERVER[áí∂¯Â¸Áò]; return array($F∆´Îé„å [2181] => array($dè÷µ”ÙÖ≈[0], $F∆´Îé„å [2182]), $F∆´Îé„å [2183] => array($dè÷µ”ÙÖ≈[0], $F∆´Îé„å [2182])); } protected function getInfo($EÂ£“ÿˆ©†) { $F◊˘—Ô»Ø¿ = $this->getInfoSimple($EÂ£“ÿˆ©†); if (!$F◊˘—Ô»Ø¿) { return !1; } return $this->_listDataApplyItem($F◊˘—Ô»Ø¿); } protected function getInfoSimple($Bú«ÀŒøõ, $dõ†ÇÀ•¿õ = false) { $EèéÁÿüä≤ =& $_SERVER[áí∂¯Â¸Áò]; if ($dõ†ÇÀ•¿õ) { $c—†™å˜—Ü = array($EèéÁÿüä≤[2112] => intval($Bú«ÀŒøõ)); $Aóñ€Éıìö = $this->where($c—†™å˜—Ü)->find(); return is_array($Aóñ€Éıìö) ? $Aóñ€Éıìö : array(); } return $this->cacheFunctionGet($EèéÁÿüä≤[2184], $Bú«ÀŒøõ); } protected function groupAdd($C«£Èô£“§) { goto b∏öÚÜ‘≤Ü; b∏öÚÜ‘≤Ü: $FßËÌ¨ä¥Ô =& $_SERVER[áí∂¯Â¸Áò]; if (!$C«£Èô£“§[$FßËÌ¨ä¥Ô[474]] && isset($C«£Èô£“§[$FßËÌ¨ä¥Ô[2112]]) && $C«£Èô£“§[$FßËÌ¨ä¥Ô[2112]] == 1) { if ($b›∫¯ö‚É∫ = $this->getInfoSimple($C«£Èô£“§[$FßËÌ¨ä¥Ô[2112]], !0)) { return $C«£Èô£“§[$FßËÌ¨ä¥Ô[2112]]; } } else { $b›∫¯ö‚É∫ = $this->getInfoSimple($C«£Èô£“§[$FßËÌ¨ä¥Ô[474]]); if (!$b›∫¯ö‚É∫) { return !1; } } $CÚ¿ßÂ±çˆ = $FßËÌ¨ä¥Ô[483]; goto fπ∂·–’⁄Ö; Eﬁû≠Ï·∑Û: if (isset($C«£Èô£“§[$FßËÌ¨ä¥Ô[2187]])) { $this->metaSet($Aä˘·“ÚûÍ, array($FßËÌ¨ä¥Ô[2187] => $C«£Èô£“§[$FßËÌ¨ä¥Ô[2187]], $FßËÌ¨ä¥Ô[2188] => $C«£Èô£“§[$FßËÌ¨ä¥Ô[2188]])); unset($C«£Èô£“§[$FßËÌ¨ä¥Ô[2187]]); unset($C«£Èô£“§[$FßËÌ¨ä¥Ô[2188]]); } Model($FßËÌ¨ä¥Ô[1124])->groupRootAdd($Aä˘·“ÚûÍ); return $Aä˘·“ÚûÍ; goto a†Ú◊±ŒúË; fπ∂·–’⁄Ö: if ($b›∫¯ö‚É∫[$FßËÌ¨ä¥Ô[472]]) { $CÚ¿ßÂ±çˆ = $b›∫¯ö‚É∫[$FßËÌ¨ä¥Ô[472]] . $b›∫¯ö‚É∫[$FßËÌ¨ä¥Ô[2112]] . $FßËÌ¨ä¥Ô[47]; } $aãÙ”¥€ıç = array($FßËÌ¨ä¥Ô[398] => $this->groupNameAuto($C«£Èô£“§[$FßËÌ¨ä¥Ô[474]], $C«£Èô£“§[$FßËÌ¨ä¥Ô[28]]), $FßËÌ¨ä¥Ô[380] => $C«£Èô£“§[$FßËÌ¨ä¥Ô[474]], $FßËÌ¨ä¥Ô[538] => $CÚ¿ßÂ±çˆ, $FßËÌ¨ä¥Ô[2185] => $C«£Èô£“§[$FßËÌ¨ä¥Ô[2096]], $FßËÌ¨ä¥Ô[2186] => 0, $FßËÌ¨ä¥Ô[2116] => 0); if (isset($C«£Èô£“§[$FßËÌ¨ä¥Ô[2134]])) { $aãÙ”¥€ıç[$FßËÌ¨ä¥Ô[2134]] = $C«£Èô£“§[$FßËÌ¨ä¥Ô[2134]]; } else { $e…ﬂ®ı€◊Ì = $this->max($FßËÌ¨ä¥Ô[2134]); if (!$e…ﬂ®ı€◊Ì) { $e…ﬂ®ı€◊Ì = 0; } $aãÙ”¥€ıç[$FßËÌ¨ä¥Ô[2134]] = $e…ﬂ®ı€◊Ì + 1; } goto AÜÈŒ•‹ÿË; AÜÈŒ•‹ÿË: if (!empty($C«£Èô£“§[$FßËÌ¨ä¥Ô[2112]])) { $aãÙ”¥€ıç[$FßËÌ¨ä¥Ô[2112]] = $C«£Èô£“§[$FßËÌ¨ä¥Ô[2112]]; } $Aä˘·“ÚûÍ = $this->add($aãÙ”¥€ıç); $this->setNamePinyin($Aä˘·“ÚûÍ, $aãÙ”¥€ıç[$FßËÌ¨ä¥Ô[28]]); goto Eﬁû≠Ï·∑Û; a†Ú◊±ŒúË: } protected function groupEdit($F¡à…Ç—à€, $dåıÁÿ±ÿ∞) { $EﬁÓ⁄æ ∆Ú =& $_SERVER[áí∂¯Â¸Áò]; if (!empty($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[474]])) { $dÚ≤âõ‰‘Ç = $this->getInfoSimple($F¡à…Ç—à€); $fÆäŸÑ˘¡• = $this->getInfoSimple($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[474]]); if (!$dÚ≤âõ‰‘Ç || !$fÆäŸÑ˘¡•) { return !1; } if ($dÚ≤âõ‰‘Ç[$EﬁÓ⁄æ ∆Ú[2112]] == $fÆäŸÑ˘¡•[$EﬁÓ⁄æ ∆Ú[2112]]) { return !1; } if ($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[474]] != $dÚ≤âõ‰‘Ç[$EﬁÓ⁄æ ∆Ú[474]]) { if ($fÆäŸÑ˘¡•[$EﬁÓ⁄æ ∆Ú[472]] !== $dÚ≤âõ‰‘Ç[$EﬁÓ⁄æ ∆Ú[472]] && strpos($fÆäŸÑ˘¡•[$EﬁÓ⁄æ ∆Ú[472]], $dÚ≤âõ‰‘Ç[$EﬁÓ⁄æ ∆Ú[472]] . $dÚ≤âõ‰‘Ç[$EﬁÓ⁄æ ∆Ú[2112]] . $EﬁÓ⁄æ ∆Ú[47]) === 0) { return !1; } $dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[538]] = $fÆäŸÑ˘¡•[$EﬁÓ⁄æ ∆Ú[472]] . $dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[474]] . $EﬁÓ⁄æ ∆Ú[47]; $this->_changeChildLevel($dÚ≤âõ‰‘Ç, $fÆäŸÑ˘¡•); } } if (isset($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[28]])) { $this->setNamePinyin($F¡à…Ç—à€, $dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[28]]); } if (isset($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[2187]])) { $this->metaSet($F¡à…Ç—à€, array($EﬁÓ⁄æ ∆Ú[2187] => $dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[2187]], $EﬁÓ⁄æ ∆Ú[2188] => $dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[2188]])); unset($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[2187]]); unset($dåıÁÿ±ÿ∞[$EﬁÓ⁄æ ∆Ú[2188]]); } return $this->where(array($EﬁÓ⁄æ ∆Ú[2189] => $F¡à…Ç—à€))->save($dåıÁÿ±ÿ∞); } private function _changeChildLevel($FËú€£à°õ, $f˜‘äÃ“æÔ, $aÜ≥ñÛÂ∑õ = false) { goto Aπ¶ÊÑœª¢; d∆ì€⁄åˆÎ: $this->where($B–í‡‚“˘•)->data($BÓ‹º≠∏•ó)->save(); goto DòªúªΩΩ≈; Aπ¶ÊÑœª¢: $f•ÜâœÈ‚î =& $_SERVER[áí∂¯Â¸Áò]; $BÓà√¶êÙ = $FËú€£à°õ[$f•ÜâœÈ‚î[472]] . $FËú€£à°õ[$f•ÜâœÈ‚î[2112]] . $f•ÜâœÈ‚î[47]; $e¿ÿ˜°ÉÁ† = $f˜‘äÃ“æÔ[$f•ÜâœÈ‚î[472]] . $f˜‘äÃ“æÔ[$f•ÜâœÈ‚î[2112]] . $f•ÜâœÈ‚î[47] . $FËú€£à°õ[$f•ÜâœÈ‚î[2112]] . $f•ÜâœÈ‚î[47]; goto eÑëùœ’®â; eÑëùœ’®â: if ($aÜ≥ñÛÂ∑õ) { $e¿ÿ˜°ÉÁ† = $f˜‘äÃ“æÔ[$f•ÜâœÈ‚î[472]] . $f˜‘äÃ“æÔ[$f•ÜâœÈ‚î[2112]] . $f•ÜâœÈ‚î[47]; } $B–í‡‚“˘• = array($f•ÜâœÈ‚î[538] => array($f•ÜâœÈ‚î[496], $FËú€£à°õ[$f•ÜâœÈ‚î[472]] . $FËú€£à°õ[$f•ÜâœÈ‚î[2112]] . $f•ÜâœÈ‚î[497])); $BÓ‹º≠∏•ó = array($f•ÜâœÈ‚î[538] => array($f•ÜâœÈ‚î[546], "\x72\145\x70\x6c\x61\x63\x65\50\x70\141\162\145\x6e\164\x4c\145\x76\x65\x6c\54\47{$BÓà√¶êÙ}\47\54\x27{$e¿ÿ˜°ÉÁ†}\47\51")); goto d∆ì€⁄åˆÎ; DòªúªΩΩ≈: } public function setNamePinyin($eø¶™•Œü©, $f‚Õ·˘Ç±€ = false) { $A¬∫Ö’œÜæ =& $_SERVER[áí∂¯Â¸Áò]; if (!$f‚Õ·˘Ç±€) { $EúÃçÚÜ◊â = $this->getInfoSimple($eø¶™•Œü©); $f‚Õ·˘Ç±€ = $EúÃçÚÜ◊â[$A¬∫Ö’œÜæ[28]]; } if (!Input::check($f‚Õ·˘Ç±€, $A¬∫Ö’œÜæ[541])) { $this->metaSet($eø¶™•Œü©, $A¬∫Ö’œÜæ[428], null); $this->metaSet($eø¶™•Œü©, $A¬∫Ö’œÜæ[427], null); return; } $fáöö›ã¢ = array($A¬∫Ö’œÜæ[428] => str_replace($A¬∫Ö’œÜæ[50], $A¬∫Ö’œÜæ[33], Pinyin::encode($f‚Õ·˘Ç±€)), $A¬∫Ö’œÜæ[427] => Pinyin::encode($f‚Õ·˘Ç±€, $A¬∫Ö’œÜæ[542])); $this->metaSet($eø¶™•Œü©, $fáöö›ã¢); } protected function groupStatus($cπ¶µÛ¢òê, $B¿æ•¶ì¿Ã) { goto b’Çò˜ÜöÑ; c—ä‡…Á…‚: if ($B¿æ•¶ì¿Ã == $AΩ‚´—ﬂ ≈[83]) { $BÕ“®µå„© = $this->parentLevelArray($CÙéâÔ¢›„[$AΩ‚´—ﬂ ≈[472]]); } else { $CÆºÏÒÕÕò = array($AΩ‚´—ﬂ ≈[538] => array($AΩ‚´—ﬂ ≈[496], $CÙéâÔ¢›„[$AΩ‚´—ﬂ ≈[472]] . $CÙéâÔ¢›„[$AΩ‚´—ﬂ ≈[2112]] . $AΩ‚´—ﬂ ≈[497])); $BÕ“®µå„© = $this->where($CÆºÏÒÕÕò)->field($AΩ‚´—ﬂ ≈[2112])->select(); $BÕ“®µå„© = array_to_keyvalue($BÕ“®µå„©, $AΩ‚´—ﬂ ≈[33], $AΩ‚´—ﬂ ≈[2112]); } $BÕ“®µå„©[] = $CÙéâÔ¢›„[$AΩ‚´—ﬂ ≈[2112]]; $fäæ´®ÔŸ„ = array(); goto E≥≤∏´∑Ê°; E≥≤∏´∑Ê°: foreach ($BÕ“®µå„© as $cπ¶µÛ¢òê) { $fäæ´®ÔŸ„[] = array($AΩ‚´—ﬂ ≈[2112] => $cπ¶µÛ¢òê, $AΩ‚´—ﬂ ≈[89] => $AΩ‚´—ﬂ ≈[695], $AΩ‚´—ﬂ ≈[363] => $B¿æ•¶ì¿Ã); } return Model($AΩ‚´—ﬂ ≈[2190])->addAll($fäæ´®ÔŸ„, array(), !0); goto c´ùàÜ„∞ß; b’Çò˜ÜöÑ: $AΩ‚´—ﬂ ≈ =& $_SERVER[áí∂¯Â¸Áò]; $CÙéâÔ¢›„ = $this->getInfoSimple($cπ¶µÛ¢òê); if (!$CÙéâÔ¢›„) { return !1; } goto c—ä‡…Á…‚; c´ùàÜ„∞ß: } protected function groupRemove($eëïæºÏ™ƒ) { goto DﬂîìàÇóõ; D¶πøΩı∂ˆ: Model($Eæ¢ßàÔäª[758])->groupRootRemove($eëïæºÏ™ƒ); return $this->where($eÔõ÷·£”√)->delete(); goto E∂¶îèÌÂï; Aöﬂ∆ëå°ª: $this->where(array($Eæ¢ßàÔäª[474] => $eëïæºÏ™ƒ))->save(array($Eæ¢ßàÔäª[474] => $dØüÚŸ÷‰¢[$Eæ¢ßàÔäª[474]])); Model($Eæ¢ßàÔäª[2190])->where($eÔõ÷·£”√)->delete(); Model($Eæ¢ßàÔäª[2191])->where($eÔõ÷·£”√)->delete(); goto D¶πøΩı∂ˆ; d≤ÕêˆÙõ›: if (!$dØüÚŸ÷‰¢ || $dØüÚŸ÷‰¢[$Eæ¢ßàÔäª[474]] == 0) { return !1; } $cûë†≠ÜÉ∂ = $this->getInfoSimple($dØüÚŸ÷‰¢[$Eæ¢ßàÔäª[474]]); $this->_changeChildLevel($dØüÚŸ÷‰¢, $cûë†≠ÜÉ∂, !0); goto Aöﬂ∆ëå°ª; DﬂîìàÇóõ: $Eæ¢ßàÔäª =& $_SERVER[áí∂¯Â¸Áò]; $eÔõ÷·£”√ = array($Eæ¢ßàÔäª[2112] => $eëïæºÏ™ƒ); $dØüÚŸ÷‰¢ = $this->where($eÔõ÷·£”√)->find(); goto d≤ÕêˆÙõ›; E∂¶îèÌÂï: } protected function groupSort($BûÜ∫‹¥˘ê) { $d‰≥‘¨ú”ô =& $_SERVER[áí∂¯Â¸Áò]; $aÚæù´“ä∞ = array(); foreach ($BûÜ∫‹¥˘ê as $BÃºÿ†õœÌ => $Eáìôƒôı») { $aÚæù´“ä∞[] = array($d‰≥‘¨ú”ô[2112], $Eáìôƒôı», $d‰≥‘¨ú”ô[2134], $BÃºÿ†õœÌ + 1); } $this->saveAll($aÚæù´“ä∞); } public function listData() { $aëÖù∫úÍ€ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($aëÖù∫úÍ€[$_SERVER[áí∂¯Â¸Áò][358]]); return $aëÖù∫úÍ€; } private function _makeOrder($B˘—îñ≥æã = '') { goto e¶ÊèÌ›ÒÖ; C∂É´◊≥∂–: $bÉùπ¬‡Üâ = Input::get($CÓ ‘ë‡…Ô[419], $CÓ ‘ë‡…Ô[7], $CÓ ‘ë‡…Ô[2116], $BÃ∏ƒœ≈›¬); $E∑Áè™õ∏â = Input::get($CÓ ‘ë‡…Ô[420], $CÓ ‘ë‡…Ô[7], $CÓ ‘ë‡…Ô[2192], array($CÓ ‘ë‡…Ô[2192], $CÓ ‘ë‡…Ô[416])); $E∑Áè™õ∏â = $eòú∂Èﬂ•Œ[$E∑Áè™õ∏â]; goto c–…ﬁ∏â∆Ö; c–…ﬁ∏â∆Ö: $B˘—îñ≥æã = $B˘—îñ≥æã . "{$bÉùπ¬‡Üâ}\40{$E∑Áè™õ∏â}\54\40\x67\162\157\165\160\111\104\40\x61\163\x63"; return $this->order($B˘—îñ≥æã); goto E¶âââÆèÕ; e¶ÊèÌ›ÒÖ: $CÓ ‘ë‡…Ô =& $_SERVER[áí∂¯Â¸Áò]; $BÃ∏ƒœ≈›¬ = array($CÓ ‘ë‡…Ô[2112], $CÓ ‘ë‡…Ô[28], $CÓ ‘ë‡…Ô[2098], $CÓ ‘ë‡…Ô[191]); $eòú∂Èﬂ•Œ = array($CÓ ‘ë‡…Ô[414] => $CÓ ‘ë‡…Ô[415], $CÓ ‘ë‡…Ô[416] => $CÓ ‘ë‡…Ô[417]); goto C∂É´◊≥∂–; E¶âââÆèÕ: } public function listChild($EËÙ¡˘„‹«) { $Eˆ´„’„ ﬂ =& $_SERVER[áí∂¯Â¸Áò]; $aÿı”Ÿ±≈ë = $this->where(array($Eˆ´„’„ ﬂ[474] => $EËÙ¡˘„‹«))->_makeOrder()->selectPage(200); $this->_listDataApply($aÿı”Ÿ±≈ë[$Eˆ´„’„ ﬂ[358]]); return $aÿı”Ÿ±≈ë; } public function listByID($c¯ë˘·º‹º) { $Cç™öß¿€ =& $_SERVER[áí∂¯Â¸Áò]; if (!$c¯ë˘·º‹º) { return array(); } $A·ùÏŒ∏±… = array($Cç™öß¿€[2112] => array($Cç™öß¿€[7], $c¯ë˘·º‹º)); $Bå˘æ≈ßÍ∞ = $this->where($A·ùÏŒ∏±…)->select(); $this->_listDataApply($Bå˘æ≈ßÍ∞); return $Bå˘æ≈ßÍ∞; } public function listSearch($A£•Éâú„®) { goto a†µëŒ˘ØÃ; a†µëŒ˘ØÃ: $E°Çﬁ≤ïÁí =& $_SERVER[áí∂¯Â¸Áò]; $EÖÀÕê‡êœ = $A£•Éâú„®[$E°Çﬁ≤ïÁí[2193]]; $açãì…∆®Ü = isset($A£•Éâú„®[$E°Çﬁ≤ïÁí[2194]]) ? $A£•Éâú„®[$E°Çﬁ≤ïÁí[2194]] : !1; goto AöÙÒãª˜¶; AöÙÒãª˜¶: if (!trim($EÖÀÕê‡êœ)) { return !1; } $EÖÀÕê‡êœ = str_replace($E°Çﬁ≤ïÁí[2195], $E°Çﬁ≤ïÁí[2196], $EÖÀÕê‡êœ); $eÑå˜—÷´ñ = array($E°Çﬁ≤ïÁí[2112] => array($E°Çﬁ≤ïÁí[757], "\45{$EÖÀÕê‡êœ}\45"), $E°Çﬁ≤ïÁí[28] => array($E°Çﬁ≤ïÁí[757], "\45{$EÖÀÕê‡êœ}\x25"), $E°Çﬁ≤ïÁí[917] => $E°Çﬁ≤ïÁí[2197]); goto aôÊ¬òÖÒ∑; aôÊ¬òÖÒ∑: if ($açãì…∆®Ü) { $e≈”ö±óåΩ = $this->getInfoSimple($açãì…∆®Ü); $AÊ´≥ç÷ÂÈ = $e≈”ö±óåΩ[$E°Çﬁ≤ïÁí[472]] . $açãì…∆®Ü . $E°Çﬁ≤ïÁí[497]; $eÑå˜—÷´ñ = array($eÑå˜—÷´ñ, array($E°Çﬁ≤ïÁí[472] => array($E°Çﬁ≤ïÁí[757], $AÊ´≥ç÷ÂÈ))); } $c™è◊îﬁ†± = $this->_makeOrder()->where($eÑå˜—÷´ñ)->selectPage(20); $c™è◊îﬁ†± = $c™è◊îﬁ†± ? $c™è◊îﬁ†± : array(); goto Fà¬âˆÙ≠ê; Fà¬âˆÙ≠ê: if (!$c™è◊îﬁ†± || count($c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[358]]) < 5 && Input::check($EÖÀÕê‡êœ, $E°Çﬁ≤ïÁí[310])) { goto fﬁ¨ÍµÛèı; CÒÔß†¶€–: $DÁüñ‹Î°· = array_merge($F˘«òéøÒñ, $bø‘ÇÇÚﬁ–, $c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[358]]); $c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[358]] = array_unique_by_key($DÁüñ‹Î°·, $E°Çﬁ≤ïÁí[2112]); $c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[355]][$E°Çﬁ≤ïÁí[356]] = count($c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[358]]); goto fÔÔ‡‡Æ€ ; fﬁ¨ÍµÛèı: $fŸ√†·ç≥ä = $this->groupChildrenAll($açãì…∆®Ü); $F˘«òéøÒñ = $this->_searchFromMeta($E°Çﬁ≤ïÁí[427], $EÖÀÕê‡êœ, 10, $fŸ√†·ç≥ä); $bø‘ÇÇÚﬁ– = $this->_searchFromMeta($E°Çﬁ≤ïÁí[428], $EÖÀÕê‡êœ, 10, $fŸ√†·ç≥ä); goto CÒÔß†¶€–; fÔÔ‡‡Æ€ : $c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[355]][$E°Çﬁ≤ïÁí[357]] = ceil($c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[355]][$E°Çﬁ≤ïÁí[356]] / $c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[355]][$E°Çﬁ≤ïÁí[353]]); goto b¥ÉÒ¶ùÌ; b¥ÉÒ¶ùÌ: } $this->_listDataApply($c™è◊îﬁ†±[$E°Çﬁ≤ïÁí[358]]); return $c™è◊îﬁ†±; goto F‹üØ»∞“†; F‹üØ»∞“†: } protected function groupChildrenAll($c–≤ÿ…óãˆ) { $d¨Ω”˘ªòœ =& $_SERVER[áí∂¯Â¸Áò]; if (!$c–≤ÿ…óãˆ) { return !1; } if (is_string($c–≤ÿ…óãˆ)) { $c–≤ÿ…óãˆ = array($c–≤ÿ…óãˆ); } $Bêáƒ⁄‘´¿ = $c–≤ÿ…óãˆ; foreach ($c–≤ÿ…óãˆ as $a£Ã•¬”›¯) { $Eö—á‰¬∑ñ = $this->getInfoSimple($a£Ã•¬”›¯); $DéÇÏã’¡ò = array($d¨Ω”˘ªòœ[472] => array($d¨Ω”˘ªòœ[757], $Eö—á‰¬∑ñ[$d¨Ω”˘ªòœ[472]] . $a£Ã•¬”›¯ . $d¨Ω”˘ªòœ[497])); $C‰®’£Ö¬ﬂ = $this->field($d¨Ω”˘ªòœ[2112])->where($DéÇÏã’¡ò)->select(); $Bêáƒ⁄‘´¿ = array_merge($Bêáƒ⁄‘´¿, array_to_keyvalue($C‰®’£Ö¬ﬂ, $d¨Ω”˘ªòœ[33], $d¨Ω”˘ªòœ[2112])); } return array_unique($Bêáƒ⁄‘´¿); } private function _searchFromMeta($bËÃ≈Ï¯€õ, $f—âÉË≥∂î, $Eï’√úŒíç, $a˜çÚÖ‘·ô) { goto aù‰éÒ„∫Æ; cÁÖ≥Ÿí•õ: if ($a˜çÚÖ‘·ô) { $F´èÍÜºòÙ[$C∂é€ÎáÉ©[2112]] = array($C∂é€ÎáÉ©[7], $a˜çÚÖ‘·ô); } $c∆∑≥ÆˆêÑ = Model($C∂é€ÎáÉ©[2198])->where($F´èÍÜºòÙ)->limit($Eï’√úŒíç)->select(); if (!$c∆∑≥ÆˆêÑ) { return array(); } goto BÌıÏÕä§ﬁ; B¶´•ö∫•Ì: return $Dá∂Ï§à”à; goto AÛâ•Ú›Œû; aù‰éÒ„∫Æ: $C∂é€ÎáÉ© =& $_SERVER[áí∂¯Â¸Áò]; $f—âÉË≥∂î = strtolower($f—âÉË≥∂î); $F´èÍÜºòÙ = array($C∂é€ÎáÉ©[89] => $bËÃ≈Ï¯€õ, $C∂é€ÎáÉ©[363] => array($C∂é€ÎáÉ©[757], "\45{$f—âÉË≥∂î}\45")); goto cÁÖ≥Ÿí•õ; BÌıÏÕä§ﬁ: $c∆∑≥ÆˆêÑ = array_to_keyvalue($c∆∑≥ÆˆêÑ, $C∂é€ÎáÉ©[33], $C∂é€ÎáÉ©[2112]); $Dá∂Ï§à”à = $this->where(array($C∂é€ÎáÉ©[2189] => array($C∂é€ÎáÉ©[7], $c∆∑≥ÆˆêÑ)))->select(); if (!$Dá∂Ï§à”à) { return array(); } goto B¶´•ö∫•Ì; AÛâ•Ú›Œû: } protected function _listDataApplyItem($eØô‡ßÚœ∞) { $D†ã±›—Üı = array($eØô‡ßÚœ∞); $this->_listDataApply($D†ã±›—Üı); return $D†ã±›—Üı[0]; } protected function _listDataApply(&$BÆë±‡ëèÍ) { goto A˘ÙÙõÀä¯; fÍéê‚∏ Ü: $this->_listAppendChildren($BÆë±‡ëèÍ); $this->_listAppendChildrenMember($BÆë±‡ëèÍ); $this->_listAppendMeta($BÆë±‡ëèÍ, $A√¬ÏÈ £ã); goto bñ¬∏™˘í¢; bñ¬∏™˘í¢: $this->_listAppendParent($BÆë±‡ëèÍ); $this->_listAppendSourceRoot($BÆë±‡ëèÍ, $A√¬ÏÈ £ã); goto fˆÃä ≠‰Í; A˘ÙÙõÀä¯: $E°ê•ñ˜é” =& $_SERVER[áí∂¯Â¸Áò]; if (!$BÆë±‡ëèÍ) { return; } $A√¬ÏÈ £ã = array_to_keyvalue($BÆë±‡ëèÍ, $E°ê•ñ˜é”[33], $E°ê•ñ˜é”[2112]); goto fÍéê‚∏ Ü; fˆÃä ≠‰Í: } private function _listAppendChildren(&$c§°âÍé™Ó) { goto BêÑ§ƒÍßÓ; b√—ØÜÒ‡∏: $f™≥≠Ωï÷‚ = array_to_keyvalue($f™≥≠Ωï÷‚, $f⁄èõ◊œ Ø[463]); foreach ($c§°âÍé™Ó as &$Aúèæ⁄¬≤£) { $Aúèæ⁄¬≤£[$f⁄èõ◊œ Ø[2199]] = isset($f™≥≠Ωï÷‚[$Aúèæ⁄¬≤£[$f⁄èõ◊œ Ø[2112]] . $f⁄èõ◊œ Ø[2200]]); } unset($Aúèæ⁄¬≤£); goto FˆÉ·çúÚæ; BˆíÕÏì«¨: $dììó†ﬂÚ€ = count($c§°âÍé™Ó); $FÖ≥ÎÚ‹ü´ = $this->tablePrefix . $this->tableName; for ($c•Ë≥¶°‚‰ = 0, $a’ö“ßéÿ∂ = 0; $c•Ë≥¶°‚‰ < $dììó†ﬂÚ€; $c•Ë≥¶°‚‰++) { $a’ö“ßéÿ∂++; $D–îµíìï = $c§°âÍé™Ó[$c•Ë≥¶°‚‰][$f⁄èõ◊œ Ø[2112]]; $B‘ƒ¨ê≠åù .= "\123\105\114\x45\x43\124\x20\52\x20\x46\122\117\x4d\40\x28\123\105\114\x45\x43\x54\40\47{$D–îµíìï}\137\143\150\151\x6c\144\47\x20\x61\163\x20\x68\141\x73\40\106\122\117\115\x20\140{$FÖ≥ÎÚ‹ü´}\140\x20\x77\150\x65\162\x65\40\160\x61\x72\x65\x6e\164\111\x44\x3d{$D–îµíìï}\40\x6c\151\155\x69\x74\40\61\51\40\141\x73\40\x74\142\137{$D–îµíìï}\40\165\x6e\151\157\x6e\40\141\154\154\x20"; if (($a’ö“ßéÿ∂ >= 20 || $c•Ë≥¶°‚‰ == $dììó†ﬂÚ€ - 1) && $B‘ƒ¨ê≠åù) { $B‘ƒ¨ê≠åù = substr($B‘ƒ¨ê≠åù, 0, -strlen($f⁄èõ◊œ Ø[462])); $CÎÉÜ˘Öç› = $this->query($B‘ƒ¨ê≠åù); $f™≥≠Ωï÷‚ = array_merge($f™≥≠Ωï÷‚, $CÎÉÜ˘Öç›); $a’ö“ßéÿ∂ = 0; $B‘ƒ¨ê≠åù = $f⁄èõ◊œ Ø[33]; } } goto b√—ØÜÒ‡∏; BêÑ§ƒÍßÓ: $f⁄èõ◊œ Ø =& $_SERVER[áí∂¯Â¸Áò]; $B‘ƒ¨ê≠åù = $f⁄èõ◊œ Ø[365]; $f™≥≠Ωï÷‚ = array(); goto BˆíÕÏì«¨; FˆÉ·çúÚæ: } private function _listAppendChildrenMember(&$CìâÃ€¢§ﬁ) { goto DÚıÚ∏àøœ; D•ÎÂÂßá£: $Cı≈ÚËá∏¶ = array_to_keyvalue($Cı≈ÚËá∏¶, $Còòäîﬁ√É[463]); foreach ($CìâÃ€¢§ﬁ as &$FÚé°£“¡Æ) { $FÚé°£“¡Æ[$Còòäîﬁ√É[2201]] = isset($Cı≈ÚËá∏¶[$FÚé°£“¡Æ[$Còòäîﬁ√É[2112]] . $Còòäîﬁ√É[2200]]); } unset($FÚé°£“¡Æ); goto CèÂÜÛŒâ“; DÚıÚ∏àøœ: $Còòäîﬁ√É =& $_SERVER[áí∂¯Â¸Áò]; $FŸàÉìçÃŸ = $Còòäîﬁ√É[365]; $Cı≈ÚËá∏¶ = array(); goto a€√Ç§œΩÖ; a€√Ç§œΩÖ: $føµëÜ¬ùÿ = count($CìâÃ€¢§ﬁ); $B‹≥Ü¬œ»ÿ = $this->tablePrefix . $Còòäîﬁ√É[2191]; for ($AòÂÈŒ–‘Ö = 0, $aÁë°Çé—´ = 0; $AòÂÈŒ–‘Ö < $føµëÜ¬ùÿ; $AòÂÈŒ–‘Ö++) { $aÁë°Çé—´++; $Eá≥ûßçà◊ = $CìâÃ€¢§ﬁ[$AòÂÈŒ–‘Ö][$Còòäîﬁ√É[2112]]; $FŸàÉìçÃŸ .= "\x53\105\x4c\x45\x43\x54\x20\x2a\40\x46\x52\x4f\115\x20\x28\x53\x45\114\x45\x43\x54\40\47{$Eá≥ûßçà◊}\x5f\143\150\151\x6c\x64\x27\40\x61\x73\40\150\141\x73\x20\x46\122\117\115\x20\140{$B‹≥Ü¬œ»ÿ}\140\40\167\150\145\162\x65\x20\x67\162\157\165\x70\x49\x44\75{$Eá≥ûßçà◊}\40\154\x69\155\x69\x74\x20\61\x29\x20\141\163\40\x74\142\x5f{$Eá≥ûßçà◊}\40\x75\156\x69\157\156\x20\141\x6c\x6c\40"; if (($aÁë°Çé—´ >= 20 || $AòÂÈŒ–‘Ö == $føµëÜ¬ùÿ - 1) && $FŸàÉìçÃŸ) { $FŸàÉìçÃŸ = substr($FŸàÉìçÃŸ, 0, -strlen($Còòäîﬁ√É[462])); $d©àâÊ®µ∏ = $this->query($FŸàÉìçÃŸ); $Cı≈ÚËá∏¶ = array_merge($Cı≈ÚËá∏¶, $d©àâÊ®µ∏); $aÁë°Çé—´ = 0; $FŸàÉìçÃŸ = $Còòäîﬁ√É[33]; } } goto D•ÎÂÂßá£; CèÂÜÛŒâ“: } private function _listAppendMeta(&$Fêòèê¨â•, $dÿÖÍ—‘∫ê) { goto bœúÜµª Ç; Cã¨…ù¨Æò: $d´†“ ØÀÏ = array_to_keyvalue_group($d´†“ ØÀÏ, $dœå¯êëªÑ[2112]); foreach ($d´†“ ØÀÏ as &$b«µ¢§†ÖÖ) { $b«µ¢§†ÖÖ = array_to_keyvalue($b«µ¢§†ÖÖ, $dœå¯êëªÑ[89], $dœå¯êëªÑ[363]); } unset($b«µ¢§†ÖÖ); goto d≠´ÖÑ»Ù‘; d≠´ÖÑ»Ù‘: foreach ($Fêòèê¨â• as &$CÉ»€’÷ﬁ∏) { $CÉ»€’÷ﬁ∏[$dœå¯êëªÑ[429]] = array(); if (isset($d´†“ ØÀÏ[$CÉ»€’÷ﬁ∏[$dœå¯êëªÑ[2112]]])) { $CÉ»€’÷ﬁ∏[$dœå¯êëªÑ[429]] = $d´†“ ØÀÏ[$CÉ»€’÷ﬁ∏[$dœå¯êëªÑ[2112]]]; } } unset($CÉ»€’÷ﬁ∏); goto dœ±§©ØàÜ; bœúÜµª Ç: $dœå¯êëªÑ =& $_SERVER[áí∂¯Â¸Áò]; $BﬂŒƒ∫é§… = array($dœå¯êëªÑ[2112] => array($dœå¯êëªÑ[7], $dÿÖÍ—‘∫ê)); $d´†“ ØÀÏ = Model($dœå¯êëªÑ[2190])->where($BﬂŒƒ∫é§…)->select(); goto Cã¨…ù¨Æò; dœ±§©ØàÜ: } protected function parentLevelArray($b¬ﬁ¿Ì…ﬂΩ) { $EÉî–Öª∏∆ =& $_SERVER[áí∂¯Â¸Áò]; $b¬ﬁ¿Ì…ﬂΩ = explode($EÉî–Öª∏∆[47], trim($b¬ﬁ¿Ì…ﬂΩ, $EÉî–Öª∏∆[47])); $b¬ﬁ¿Ì…ﬂΩ = array_remove_value($b¬ﬁ¿Ì…ﬂΩ, $EÉî–Öª∏∆[481]); return $b¬ﬁ¿Ì…ﬂΩ; } private function _listAppendParent(&$EÛŸ±‰•öº) { goto EùÉÌ‡±àì; bâ¬•êÇÆ÷: unset($dóäÛ∏Ñä¬); $E◊¯≥≤ﬁûã = array(); foreach ($A¬ï›†≈œ∏ as $aÉ¯ëõ ùÍ => $A’∞æ®ê∫ò) { if (!$A’∞æ®ê∫ò) { $E◊¯≥≤ﬁûã[] = $aÉ¯ëõ ùÍ; } } goto e≤íﬁ““‡ê; EùÉÌ‡±àì: $eçôé€áçä =& $_SERVER[áí∂¯Â¸Áò]; $A¬ï›†≈œ∏ = array(); foreach ($EÛŸ±‰•öº as &$dóäÛ∏Ñä¬) { $A¬ï›†≈œ∏[$dóäÛ∏Ñä¬[$eçôé€áçä[2112]]] = $dóäÛ∏Ñä¬[$eçôé€áçä[28]]; $a∑îıäïï≥ = $this->parentLevelArray($dóäÛ∏Ñä¬[$eçôé€áçä[472]]); foreach ($a∑îıäïï≥ as $EÇüˆ—ÂÖÆ) { if (!isset($A¬ï›†≈œ∏[$EÇüˆ—ÂÖÆ])) { $A¬ï›†≈œ∏[$EÇüˆ—ÂÖÆ] = 0; } } } goto bâ¬•êÇÆ÷; e≤íﬁ““‡ê: if ($E◊¯≥≤ﬁûã) { $C≤òçÏ°ûé = array($eçôé€áçä[2189] => array($eçôé€áçä[396], $E◊¯≥≤ﬁûã)); $c¿´™Î‘»Ω = $this->field($eçôé€áçä[2202])->where($C≤òçÏ°ûé)->select(); $e«ÃéÀÙ≤º = array_to_keyvalue($c¿´™Î‘»Ω, $eçôé€áçä[2112], $eçôé€áçä[28]); $A¬ï›†≈œ∏ = array_merge_index($A¬ï›†≈œ∏, $e«ÃéÀÙ≤º); } $fÖøÎ√€‹« = $GLOBALS[$eçôé€áçä[6]][$eçôé€áçä[84]][$eçôé€áçä[2203]]; foreach ($EÛŸ±‰•öº as &$dóäÛ∏Ñä¬) { $a∑îıäïï≥ = $this->parentLevelArray($dóäÛ∏Ñä¬[$eçôé€áçä[472]]); $c∏ﬂ‚êªÕÍ = $eçôé€áçä[33]; foreach ($a∑îıäïï≥ as $aÉ¯ëõ ùÍ => $EÇüˆ—ÂÖÆ) { if ($fÖøÎ√€‹« && $aÉ¯ëõ ùÍ == 0) { continue; } $c∏ﬂ‚êªÕÍ .= $A¬ï›†≈œ∏[$EÇüˆ—ÂÖÆ] . $eçôé€áçä[8]; } if ($a∑îıäïï≥) { $c∏ﬂ‚êªÕÍ .= $dóäÛ∏Ñä¬[$eçôé€áçä[28]]; } $dóäÛ∏Ñä¬[$eçôé€áçä[476]] = str_replace($eçôé€áçä[480], $eçôé€áçä[8], $c∏ﬂ‚êªÕÍ); } goto bÎ»çË„È„; bÎ»çË„È„: unset($dóäÛ∏Ñä¬); goto C¶º≠òÚàú; C¶º≠òÚàú: } private function _listAppendSourceRoot(&$DèÉîÖú˜˜, $E’ì”ùøÚ) { goto E¬Èæõá·Ï; E¬Èæõá·Ï: $D¢◊í”ò⁄¥ =& $_SERVER[áí∂¯Â¸Áò]; $fÊÎ´®«Ÿæ = array($D¢◊í”ò⁄¥[383] => SourceModel::TYPE_GROUP, $D¢◊í”ò⁄¥[474] => 0, $D¢◊í”ò⁄¥[469] => array($D¢◊í”ò⁄¥[7], $E’ì”ùøÚ)); $cŸ÷ÚπÒ‹ä = $D¢◊í”ò⁄¥[2204]; goto C»á£¿É†¯; C¶ùﬂÂ…¬ã: foreach ($DèÉîÖú˜˜ as &$EŒî·äò≤Ù) { $EŒî·äò≤Ù[$D¢◊í”ò⁄¥[403]] = $bæ˘õ˘ù‘·[$EŒî·äò≤Ù[$D¢◊í”ò⁄¥[2112]]] ? $bæ˘õ˘ù‘·[$EŒî·äò≤Ù[$D¢◊í”ò⁄¥[2112]]] : array(); } unset($EŒî·äò≤Ù); goto f∞¿°≠îŸƒ; C»á£¿É†¯: $bæ˘õ˘ù‘· = Model($D¢◊í”ò⁄¥[758])->order($D¢◊í”ò⁄¥[2205])->field($cŸ÷ÚπÒ‹ä)->where($fÊÎ´®«Ÿæ)->select(); $bæ˘õ˘ù‘· = array_to_keyvalue($bæ˘õ˘ù‘·, $D¢◊í”ò⁄¥[469]); $bæ˘õ˘ù‘· = array_remove_key($bæ˘õ˘ù‘·, $D¢◊í”ò⁄¥[469]); goto C¶ùﬂÂ…¬ã; f∞¿°≠îŸƒ: } protected function groupMerge($c‘çÇŒö˘∏) { $c‘çÇŒö˘∏ = array_values(array_unique($c‘çÇŒö˘∏)); $eÀ®¨ƒÿﬁº = array(); for ($añÜÉíñ∆ñ = 0; $añÜÉíñ∆ñ < count($c‘çÇŒö˘∏); $añÜÉíñ∆ñ++) { $aÀñÎ˘¥—Ú = !1; for ($AôìáˆÔ√í = 0; $AôìáˆÔ√í < count($c‘çÇŒö˘∏); $AôìáˆÔ√í++) { if ($añÜÉíñ∆ñ == $AôìáˆÔ√í) { continue; } if ($this->isParentOf($c‘çÇŒö˘∏[$AôìáˆÔ√í], $c‘çÇŒö˘∏[$añÜÉíñ∆ñ])) { $aÀñÎ˘¥—Ú = !0; break; } } if (!$aÀñÎ˘¥—Ú) { $eÀ®¨ƒÿﬁº[] = $c‘çÇŒö˘∏[$añÜÉíñ∆ñ]; } } return $eÀ®¨ƒÿﬁº; } protected function isParentOf($FÔöâŸ‰ùõ, $Aõà˜Ù†Ûî) { goto d»êÑ≥ù∂È; d‚°üê©Ñä: return !1; goto Aê¿ıº∆¢é; e÷±ò∞ÿåÉ: $cØÿÙ‹´ã◊ = $this->getInfoSimple($Aõà˜Ù†Ûî); $fª¥«úì¬Ø = $CëÍ©ﬂùóÔ[$F§¨’ç´€Ú[472]] . $FÔöâŸ‰ùõ . $F§¨’ç´€Ú[47]; if (substr($cØÿÙ‹´ã◊[$F§¨’ç´€Ú[472]], 0, strlen($fª¥«úì¬Ø)) == $fª¥«úì¬Ø) { return !0; } goto d‚°üê©Ñä; d»êÑ≥ù∂È: $F§¨’ç´€Ú =& $_SERVER[áí∂¯Â¸Áò]; if (!$FÔöâŸ‰ùõ || !$Aõà˜Ù†Ûî || $FÔöâŸ‰ùõ == $Aõà˜Ù†Ûî) { return !1; } $CëÍ©ﬂùóÔ = $this->getInfoSimple($FÔöâŸ‰ùõ); goto e÷±ò∞ÿåÉ; Aê¿ıº∆¢é: } public function groupShowRoot($A∆¿ÔÈ‡ì¯, $E√£Ã◊Ü»´ = false) { goto BØçƒˆ‰Íñ; aí›ªÜ„€À: if ($E√£Ã◊Ü»´ && count($DáîÔ˘∞ª) == 1) { return $cü“Îµ¥≤´; } if (!$Eö∞¶ÿãêÎ[$D‰◊˜µ‰≥•[429]] || !isset($Eö∞¶ÿãêÎ[$D‰◊˜µ‰≥•[429]][$D‰◊˜µ‰≥•[2187]]) || $Eö∞¶ÿãêÎ[$D‰◊˜µ‰≥•[429]][$D‰◊˜µ‰≥•[2187]] == $D‰◊˜µ‰≥•[2161]) { return $this->groupShowRoot($DáîÔ˘∞ª[count($DáîÔ˘∞ª) - 1], $E√£Ã◊Ü»´); } if ($Eö∞¶ÿãêÎ[$D‰◊˜µ‰≥•[429]][$D‰◊˜µ‰≥•[2187]] == $D‰◊˜µ‰≥•[350]) { $fäˆÂçµÿ  = explode($D‰◊˜µ‰≥•[47], $Eö∞¶ÿãêÎ[$D‰◊˜µ‰≥•[429]][$D‰◊˜µ‰≥•[2188]]); if ($fäˆÂçµÿ ) { $cü“Îµ¥≤´ = array_merge($cü“Îµ¥≤´, $fäˆÂçµÿ ); } } goto fˆπ˘ﬂá∑ﬁ; bµ¶Æ‹´ﬂà: $DáîÔ˘∞ª = $this->parentLevelArray($Eö∞¶ÿãêÎ[$D‰◊˜µ‰≥•[472]]); $cü“Îµ¥≤´ = array($A∆¿ÔÈ‡ì¯); if (count($DáîÔ˘∞ª) == 0) { return $cü“Îµ¥≤´; } goto aí›ªÜ„€À; BØçƒˆ‰Íñ: $D‰◊˜µ‰≥• =& $_SERVER[áí∂¯Â¸Áò]; $Eö∞¶ÿãêÎ = $this->getInfo($A∆¿ÔÈ‡ì¯); if (!$Eö∞¶ÿãêÎ) { return array(); } goto bµ¶Æ‹´ﬂà; fˆπ˘ﬂá∑ﬁ: return $cü“Îµ¥≤´; goto cÇ„„õº·ÿ; cÇ„„õº·ÿ: } protected function resetParentLevel() { $bÀñ¡ä≥Üâ =& $_SERVER[áí∂¯Â¸Áò]; $a¯π†∫ÃãÊ = $bÀñ¡ä≥Üâ[2112]; $bß™÷±Ã…ì = $this->select(); $bß™÷±Ã…ì = array_to_keyvalue($bß™÷±Ã…ì, $a¯π†∫ÃãÊ); foreach ($bß™÷±Ã…ì as $B—∂µ∂‡‹¬) { goto bΩÎù–∂†Î; f®ÊÂøä : $this->where(array($a¯π†∫ÃãÊ => $B—∂µ∂‡‹¬[$a¯π†∫ÃãÊ]))->save(array($bÀñ¡ä≥Üâ[538] => $f•Õ∞∂¿ò…)); goto d¿Ç¿ΩÜæó; bΩÎù–∂†Î: $C“˜©çÍ‚≈ = $B—∂µ∂‡‹¬; $f•Õ∞∂¿ò… = array(); while ($C“˜©çÍ‚≈[$bÀñ¡ä≥Üâ[474]] != 0) { $f•Õ∞∂¿ò…[] = $C“˜©çÍ‚≈[$bÀñ¡ä≥Üâ[474]]; $C“˜©çÍ‚≈ = $bß™÷±Ã…ì[$C“˜©çÍ‚≈[$bÀñ¡ä≥Üâ[474]]]; } goto CâÂ¯∑ÍÍê; CâÂ¯∑ÍÍê: $f•Õ∞∂¿ò…[] = 0; $f•Õ∞∂¿ò… = $bÀñ¡ä≥Üâ[47] . implode($bÀñ¡ä≥Üâ[47], array_reverse($f•Õ∞∂¿ò…)) . $bÀñ¡ä≥Üâ[47]; $this->setNamePinyin($B—∂µ∂‡‹¬[$a¯π†∫ÃãÊ], $B—∂µ∂‡‹¬[$bÀñ¡ä≥Üâ[28]]); goto f®ÊÂøä ; d¿Ç¿ΩÜæó: } return $bß™÷±Ã…ì; } public function groupNameAuto($eåà‚ Ωú, $FÂ£‚å‘Ü€) { $DŒ–ùé∫Àë =& $_SERVER[áí∂¯Â¸Áò]; $F£Çà››É = $this->where(array($DŒ–ùé∫Àë[380] => $eåà‚ Ωú))->getField($DŒ–ùé∫Àë[28], !0); if (!$F£Çà››É || !in_array($FÂ£‚å‘Ü€, $F£Çà››É)) { return $FÂ£‚å‘Ü€; } for ($aì¥èçÚ…â = 1; $aì¥èçÚ…â <= count($F£Çà››É) + 1; $aì¥èçÚ…â++) { $AÒÿ˘ºÇî≠ = $FÂ£‚å‘Ü€ . "\50{$aì¥èçÚ…â}\x29"; if (!in_array($AÒÿ˘ºÇî≠, $F£Çà››É)) { return $AÒÿ˘ºÇî≠; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\146\x61\166"; protected function cacheFunctionAlias($E˘ﬂÔâ·ÉÁ) { $BÉ≠‚‘ˆ÷Ó =& $_SERVER[áí∂¯Â¸Áò]; return array($BÉ≠‚‘ˆ÷Ó[2206] => array($E˘ﬂÔâ·ÉÁ[0], $BÉ≠‚‘ˆ÷Ó[2207]), $BÉ≠‚‘ˆ÷Ó[2208] => array($E˘ﬂÔâ·ÉÁ[0], $BÉ≠‚‘ˆ÷Ó[2209])); } protected function get($eåÚÍìØ„Æ) { $F⁄£¢ËçÖÖ =& $_SERVER[áí∂¯Â¸Áò]; $aÆ∞∏í÷©í = Model($F⁄£¢ËçÖÖ[471])->metaGet($eåÚÍìØ„Æ, $F⁄£¢ËçÖÖ[2210]); $bêéµàº‚ë = json_decode($aÆ∞∏í÷©í, !0); return $bêéµàº‚ë ? $bêéµàº‚ë : array($F⁄£¢ËçÖÖ[2211] => $F⁄£¢ËçÖÖ[83], $F⁄£¢ËçÖÖ[358] => array()); } protected function set($FöÇ—éùöá, $eä≈çπêÑé) { $aÁ†Ö è„Ù =& $_SERVER[áí∂¯Â¸Áò]; $eä≈çπêÑé = $eä≈çπêÑé ? $eä≈çπêÑé : array($aÁ†Ö è„Ù[2211] => $aÁ†Ö è„Ù[83], $aÁ†Ö è„Ù[358] => array()); Model($aÁ†Ö è„Ù[471])->metaSet($FöÇ—éùöá, $aÁ†Ö è„Ù[2210], json_encode($eä≈çπêÑé)); return Model($aÁ†Ö è„Ù[471])->metaSet($FöÇ—éùöá, $aÁ†Ö è„Ù[2210], json_encode($eä≈çπêÑé)); } protected function getByTagID($b∂®Ã¯œ¬Ÿ, $E∑°¬ë∑Îë) { goto EüâŸ◊Ì–Æ; EüâŸ◊Ì–Æ: $f¢√‘‚«ñ =& $_SERVER[áí∂¯Â¸Áò]; if (!$b∂®Ã¯œ¬Ÿ || !$E∑°¬ë∑Îë) { return !1; } if (!Model($f¢√‘‚«ñ[471])->getInfoSimple($b∂®Ã¯œ¬Ÿ)) { return !1; } goto fÀâ ÉµéŸ; fÀâ ÉµéŸ: $eÉ‘Â€ÉÒ€ = $this->get($b∂®Ã¯œ¬Ÿ); if (!$eÉ‘Â€ÉÒ€ || !isset($eÉ‘Â€ÉÒ€[$f¢√‘‚«ñ[358]])) { return !1; } $bÕÉ∞ÖÃÂƒ = array_find_by_field($eÉ‘Â€ÉÒ€[$f¢√‘‚«ñ[358]], $f¢√‘‚«ñ[371], $E∑°¬ë∑Îë); goto c”¶ºÑô≠Ê; c”¶ºÑô≠Ê: return is_array($bÕÉ∞ÖÃÂƒ) ? $bÕÉ∞ÖÃÂƒ : !1; goto AÖÀ«ù¬⁄; AÖÀ«ù¬⁄: } public function listSource($fÉóê®ﬂü§, $eèÒ¥êë«Ñ) { goto Fè‰âø†Ôé; dÉÑªé«ìﬁ: if (!$fÉúÂ“‡ø◊ || count($E¢ﬁ∞–…±‘) == $fÉúÂ“‡ø◊[$f•’üËÚî«[355]][$f•’üËÚî«[356]]) { return $fÉúÂ“‡ø◊; } $eç¶ô·äÿÉ = array(); $fáëÆá±íø = array_to_keyvalue($fÉúÂ“‡ø◊[$f•’üËÚî«[74]], $f•’üËÚî«[33], $f•’üËÚî«[381]); goto cˆ„å∞Ñ ç; F˘ÖÕﬁûç¬: foreach ($dëÛËÏáø◊ as $Fº∏à∑óë¯ => $FıÛòã…ŒÇ) { $fÆÈ¢Æ’ôÊ = !0; if (!$eèÒ¥êë«Ñ) { $E¢ﬁ∞–…±‘[] = $Fº∏à∑óë¯; continue; } foreach ($eèÒ¥êë«Ñ as $BﬁëÉÍ∑•≈) { if (!in_array($BﬁëÉÍ∑•≈, $FıÛòã…ŒÇ)) { $fÆÈ¢Æ’ôÊ = !1; break; } } if ($fÆÈ¢Æ’ôÊ) { $E¢ﬁ∞–…±‘[] = $Fº∏à∑óë¯; } } if (!$E¢ﬁ∞–…±‘) { return array(); } $fÉúÂ“‡ø◊ = Model($f•’üËÚî«[1124])->listSource(array($f•’üËÚî«[395] => array($f•’üËÚî«[396], $E¢ﬁ∞–…±‘))); goto dÉÑªé«ìﬁ; Fè‰âø†Ôé: $f•’üËÚî« =& $_SERVER[áí∂¯Â¸Áò]; if ($eèÒ¥êë«Ñ && !is_array($eèÒ¥êë«Ñ)) { $eèÒ¥êë«Ñ = array($eèÒ¥êë«Ñ); } $dñ–Ï√Êùà = $this->listData($fÉóê®ﬂü§); goto DãŸê•„ÑÕ; cˆ„å∞Ñ ç: $cëë∏Ÿÿ‚¬ = array_to_keyvalue($fÉúÂ“‡ø◊[$f•’üËÚî«[73]], $f•’üËÚî«[33], $f•’üËÚî«[381]); $DÂÆ˘É…∏Œ = array_merge($cëë∏Ÿÿ‚¬, $fáëÆá±íø); foreach ($E¢ﬁ∞–…±‘ as $d‚…£¶àˆ¶) { if (!in_array($d‚…£¶àˆ¶, $DÂÆ˘É…∏Œ)) { $eç¶ô·äÿÉ[] = $d‚…£¶àˆ¶; } } goto fÑ˘∞‰∂ü”; fÑ˘∞‰∂ü”: if ($eç¶ô·äÿÉ) { $this->removeBySource($fÉóê®ﬂü§, $eç¶ô·äÿÉ); } return $fÉúÂ“‡ø◊; goto e◊œ°™Ã≥ô; DãŸê•„ÑÕ: $dëÛËÏáø◊ = array(); foreach ($dñ–Ï√Êùà as $B∑≤°¨‹ﬂó) { $d‚…£¶àˆ¶ = $B∑≤°¨‹ﬂó[$f•’üËÚî«[75]]; if (!$d‚…£¶àˆ¶) { continue; } if (!isset($dëÛËÏáø◊[$d‚…£¶àˆ¶])) { $dëÛËÏáø◊[$d‚…£¶àˆ¶] = array(); } $dëÛËÏáø◊[$d‚…£¶àˆ¶][] = $B∑≤°¨‹ﬂó[$f•’üËÚî«[405]]; } $E¢ﬁ∞–…±‘ = array(); goto F˘ÖÕﬁûç¬; e◊œ°™Ã≥ô: } protected function listData($d≥ø÷í¢≈í) { $c…ÃÎÛ•¯ﬁ =& $_SERVER[áí∂¯Â¸Áò]; $F£ê∫’°· = array($c…ÃÎÛ•¯ﬁ[1434] => 0, $c…ÃÎÛ•¯ﬁ[447] => array($c…ÃÎÛ•¯ﬁ[2212], 0), $c…ÃÎÛ•¯ﬁ[400] => $c…ÃÎÛ•¯ﬁ[2213] . $d≥ø÷í¢≈í); $aÕ€÷Ã∂Ïê = $c…ÃÎÛ•¯ﬁ[2214]; $díòè œ’ƒ = $this->field($aÕ€÷Ã∂Ïê)->where($F£ê∫’°·)->order($c…ÃÎÛ•¯ﬁ[2215])->select(); return $díòè œ’ƒ ? $díòè œ’ƒ : array(); } protected function addToTag($E‰Á√Ô‰“†, $AëâÓ≈ã˜¿, $b äæ»Ì¯è) { $E®çå± è =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->getByTagID($E‰Á√Ô‰“†, $b äæ»Ì¯è) || !$AëâÓ≈ã˜¿) { return !1; } if (!Model($E®çå± è[758])->pathInfo($AëâÓ≈ã˜¿)) { return !1; } $A©ãﬁ∆ÿâã = array($E®çå± è[1434] => 0, $E®çå± è[447] => $b äæ»Ì¯è, $E®çå± è[399] => $AëâÓ≈ã˜¿, $E®çå± è[400] => $E®çå± è[2216] . $E‰Á√Ô‰“†, $E®çå± è[398] => $E®çå± è[33], $E®çå± è[2116] => 0); if ($this->where($A©ãﬁ∆ÿâã)->find()) { return !1; } return $this->add($A©ãﬁ∆ÿâã); } protected function removeFromTag($eº¬ìº‡ÉŒ, $aç·Ôªÿ¬Í, $eÌÛÜõªÜ—) { $fì†è∆Ôµ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->getByTagID($eº¬ìº‡ÉŒ, $eÌÛÜõªÜ—) || !$aç·Ôªÿ¬Í) { return !1; } if (is_array($aç·Ôªÿ¬Í)) { $aç·Ôªÿ¬Í = array($fì†è∆Ôµ[7], $aç·Ôªÿ¬Í); } $cîƒÉπ—Á• = array($fì†è∆Ôµ[1434] => 0, $fì†è∆Ôµ[447] => $eÌÛÜõªÜ—, $fì†è∆Ôµ[400] => $fì†è∆Ôµ[2216] . $eº¬ìº‡ÉŒ, $fì†è∆Ôµ[399] => $aç·Ôªÿ¬Í); return $this->where($cîƒÉπ—Á•)->delete(); } protected function removeByTag($eùÖ…ıâí√, $DÔªõªÛë÷) { $dßõƒ¢üˆñ =& $_SERVER[áí∂¯Â¸Áò]; if (!$this->getByTagID($eùÖ…ıâí√, $DÔªõªÛë÷)) { return !1; } $DÕç‰ﬂøÊø = array($dßõƒ¢üˆñ[1434] => 0, $dßõƒ¢üˆñ[447] => $DÔªõªÛë÷, $dßõƒ¢üˆñ[400] => $dßõƒ¢üˆñ[2216] . $eùÖ…ıâí√); return $this->where($DÕç‰ﬂøÊø)->delete(); } protected function removeBySource($EÆ◊¥Éîëß, $cÿÔùûé®Ω) { $E¨¶ŒÍÑû„ =& $_SERVER[áí∂¯Â¸Áò]; if (!$EÆ◊¥Éîëß || !$cÿÔùûé®Ω) { return !1; } if (is_array($cÿÔùûé®Ω)) { $cÿÔùûé®Ω = array($E¨¶ŒÍÑû„[7], $cÿÔùûé®Ω); } $fö•È ‹‚â = array($E¨¶ŒÍÑû„[1434] => 0, $E¨¶ŒÍÑû„[399] => $cÿÔùûé®Ω, $E¨¶ŒÍÑû„[447] => array($E¨¶ŒÍÑû„[931], 0), $E¨¶ŒÍÑû„[400] => $E¨¶ŒÍÑû„[2216] . $EÆ◊¥Éîëß); return $this->where($fö•È ‹‚â)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\56\160\x6c\x75\x67\x69\156\x4c\x69\x73\x74"; public $field = array("\156\x61\x6d\x65", "\163\164\x61\x74\165\x73", "\162\145\147\x69\x65\163\x74", "\x63\157\x6e\x66\151\147"); public function loadList($FÔã‹àäΩü = false) { $AäÉìúç§‰ = array_to_keyvalue($this->listData(), $_SERVER[áí∂¯Â¸Áò][28]); if ($FÔã‹àäΩü) { return $AäÉìúç§‰[$FÔã‹àäΩü]; } return $AäÉìúç§‰; } public function init() { $FÃ¿∞îÿ›´ =& $_SERVER[áí∂¯Â¸Áò]; Hook::trigger($FÃ¿∞îÿ›´[2217]); $Dê›™øπêù = $this->loadPluginList(); foreach ($Dê›™øπêù as $AàÖéí–ê∫ => $eß‚Ωçüâ±) { $Dÿà¡¨¨úÈ = $this->appAllow($AàÖéí–ê∫, $eß‚Ωçüâ±); if (!$Dÿà¡¨¨úÈ) { continue; } foreach ($eß‚Ωçüâ±[$FÃ¿∞îÿ›´[2218]] as $cŒÕ´˘õÖÙ => $CúÏóâÖ¶ƒ) { Hook::bind($cŒÕ´˘õÖÙ, $CúÏóâÖ¶ƒ); } } Hook::trigger($FÃ¿∞îÿ›´[2219]); Hook::trigger(ACTION); } public function appAllow($E±ì˜Ô¡ï„, $CÃ‹Œ¨ëºÌ, $aÉ®›ó™œı = true) { $D∫¥ÈêæáÓ =& $_SERVER[áí∂¯Â¸Áò]; $FÁíìÎ√° = PLUGIN_DIR . $E±ì˜Ô¡ï„ . $D∫¥ÈêæáÓ[2220]; if (!is_array($CÃ‹Œ¨ëºÌ) || !is_array($CÃ‹Œ¨ëºÌ[$D∫¥ÈêæáÓ[2218]]) || !is_file($FÁíìÎ√°) || $CÃ‹Œ¨ëºÌ[$D∫¥ÈêæáÓ[695]] != 1) { return !1; } if ($aÉ®›ó™œı && !Action($D∫¥ÈêæáÓ[2221])->checkAuth($E±ì˜Ô¡ï„)) { return !1; } return !0; } public function unInstall($B⁄«‹©¬îó) { $f≤üÂ∆ßî± =& $_SERVER[áí∂¯Â¸Áò]; $e±√ª≠à´⁄ = $this->loadList($B⁄«‹©¬îó); if (file_exists(PLUGIN_DIR . $B⁄«‹©¬îó)) { Hook::apply($B⁄«‹©¬îó . $f≤üÂ∆ßî±[2222]); } $this->remove($e±√ª≠à´⁄[$f≤üÂ∆ßî±[371]]); } public function changeStatus($AÑî¥õë´Ç, $eŸ´›∆”Ó±) { $D¡ñÊÙÚÈ‚ =& $_SERVER[áí∂¯Â¸Áò]; $E‡Ú’ñà§¨ = $this->loadList($AÑî¥õë´Ç); if ($eŸ´›∆”Ó±) { Hook::apply($AÑî¥õë´Ç . $D¡ñÊÙÚÈ‚[2223]); } $this->update($E‡Ú’ñà§¨[$D¡ñÊÙÚÈ‚[371]], array($D¡ñÊÙÚÈ‚[2224] => $eŸ´›∆”Ó±)); } public function appRegist($fƒ“€∑ÎÕ·, $aƒÿ™µﬁ°Â) { $D—∏óÑ˘ıÍ =& $_SERVER[áí∂¯Â¸Áò]; $D”ûê˜œﬁø = $this->loadList($fƒ“€∑ÎÕ·); if ($D”ûê˜œﬁø) { $this->update($D”ûê˜œﬁø[$D—∏óÑ˘ıÍ[371]], array($D—∏óÑ˘ıÍ[2218] => $aƒÿ™µﬁ°Â)); } else { $dç–—±∏èÚ = array($D—∏óÑ˘ıÍ[28] => $fƒ“€∑ÎÕ·, $D—∏óÑ˘ıÍ[2218] => $aƒÿ™µﬁ°Â, $D—∏óÑ˘ıÍ[695] => 0, $D—∏óÑ˘ıÍ[6] => $this->getConfigDefault($fƒ“€∑ÎÕ·)); $this->insert($dç–—±∏èÚ); } } public function getConfigDefault($F´°ø¯—ù√) { $d∂°€÷Ù”› =& $_SERVER[áí∂¯Â¸Áò]; $DãÆÖ◊„≠™ = array(); $fŸÎåÈ–⁄¨ = $this->getPackageJson($F´°ø¯—ù√); if (!$fŸÎåÈ–⁄¨ && is_array($fŸÎåÈ–⁄¨[$d∂°€÷Ù”›[2225]])) { return $DãÆÖ◊„≠™; } foreach ($fŸÎåÈ–⁄¨[$d∂°€÷Ù”›[2225]] as $Cíæüæ¿ó∏ => $dº‹ä¥≈∆¶) { if (!isset($dº‹ä¥≈∆¶[$d∂°€÷Ù”›[363]]) || isset($DãÆÖ◊„≠™[$Cíæüæ¿ó∏])) { continue; } $DãÆÖ◊„≠™[$Cíæüæ¿ó∏] = $dº‹ä¥≈∆¶[$d∂°€÷Ù”›[363]]; } return $DãÆÖ◊„≠™; } public function getPackageJson($dëÀ§»µΩ§) { return Hook::apply($dëÀ§»µΩ§ . $_SERVER[áí∂¯Â¸Áò][2226]); } public function getConfig($fàËõ«Úç≈, $bæ€å·ˆïÌ = false) { $eπ™«£¨ÇÕ =& $_SERVER[áí∂¯Â¸Áò]; $EêäËÔÜÚë = array(); $dé¨Ô≤ÉŸÚ = $this->loadList($fàËõ«Úç≈); if ($dé¨Ô≤ÉŸÚ && is_array($dé¨Ô≤ÉŸÚ[$eπ™«£¨ÇÕ[6]])) { $EêäËÔÜÚë = $dé¨Ô≤ÉŸÚ[$eπ™«£¨ÇÕ[6]]; } if (!$EêäËÔÜÚë || $bæ€å·ˆïÌ) { $EêäËÔÜÚë = $this->getConfigDefault($fàËõ«Úç≈); } return $EêäËÔÜÚë; } public function setConfig($DøÛ«ıéÂ¯, $fÀ∏âêà¯â = false) { goto BºÑËÎ©π±; cû•à¢≥Ω»: $Fç÷Öƒ´¥ê = $BºÍâëÜÔÁ[$Bô¡≠œÙΩ†[6]]; if ($fÀ∏âêà¯â == !1) { $Fç÷Öƒ´¥ê = array(); $fÀ∏âêà¯â = $this->getConfigDefault($DøÛ«ıéÂ¯); } foreach ($fÀ∏âêà¯â as $aöÓôïØ∞è => $a‡Ω…◊ê∑¢) { $Fç÷Öƒ´¥ê[$aöÓôïØ∞è] = is_string($a‡Ω…◊ê∑¢) ? trim($a‡Ω…◊ê∑¢) : $a‡Ω…◊ê∑¢; } goto fö¬•ìïµÒ; fö¬•ìïµÒ: $this->update($BºÍâëÜÔÁ[$Bô¡≠œÙΩ†[371]], array($Bô¡≠œÙΩ†[6] => $Fç÷Öƒ´¥ê)); goto Bâß‰ÎΩÛÍ; BºÑËÎ©π±: $Bô¡≠œÙΩ† =& $_SERVER[áí∂¯Â¸Áò]; $BºÍâëÜÔÁ = $this->loadList($DøÛ«ıéÂ¯); if (!$BºÍâëÜÔÁ) { return !1; } goto cû•à¢≥Ω»; Bâß‰ÎΩÛÍ: } public function viewList() { goto cÇó©ŸûÜ∆; c„É√ó‡œ·: $eπ§ﬁòûã‹ = $this->loadPluginList(); $añ”¿ù‹É = array(); foreach ($eπ§ﬁòûã‹ as $D‹¥‚™¡Ûô => $b¿¡œê¿ä£) { unset($b¿¡œê¿ä£[$DŸ—É¥ÑÜ∂[2218]], $b¿¡œê¿ä£[$DŸ—É¥ÑÜ∂[6]]); $aÎ¶ﬂ††Éï = PLUGIN_DIR . $b¿¡œê¿ä£[$DŸ—É¥ÑÜ∂[28]] . $DŸ—É¥ÑÜ∂[2220]; if (!is_file($aÎ¶ﬂ††Éï)) { continue; } $a›Ò€°¡ùú = Hook::apply($b¿¡œê¿ä£[$DŸ—É¥ÑÜ∂[28]] . $DŸ—É¥ÑÜ∂[2226]); if (is_array($a›Ò€°¡ùú)) { $añ”¿ù‹É[$D‹¥‚™¡Ûô] = array_merge($b¿¡œê¿ä£, $a›Ò€°¡ùú); } } goto AƒŒâ¯∫Û€; AƒŒâ¯∫Û€: return $añ”¿ù‹É; goto AÆ≤À Œñ«; cÇó©ŸûÜ∆: $DŸ—É¥ÑÜ∂ =& $_SERVER[áí∂¯Â¸Áò]; $eπ§ﬁòûã‹ = $this->loadList(); $this->pluginScan($eπ§ﬁòûã‹); goto c„É√ó‡œ·; AÆ≤À Œñ«: } private function loadPluginList() { $cû©ﬁßœ÷È =& $_SERVER[áí∂¯Â¸Áò]; $c∑À«¿´∞À = $this->loadList(); if (strtolower(MOD) == $cû©ﬁßœ÷È[2227]) { return $c∑À«¿´∞À; } $cÙ√ÇË´áê = Hook::trigger($cû©ﬁßœ÷È[2228], $c∑À«¿´∞À); if ($c∑À«¿´∞À && !$cÙ√ÇË´áê) { die; } return $cÙ√ÇË´áê ? $cÙ√ÇË´áê : $c∑À«¿´∞À; } private function pluginScan($d ÑÓ§ï›Ê) { $cí…›üÂÓú =& $_SERVER[áí∂¯Â¸Áò]; recursion_dir(PLUGIN_DIR, $eã±ÙºªÙÎ, $f◊Üä¬Øæﬂ, 0); foreach ($eã±ÙºªÙÎ as $Eƒ∂ü∆ãëî) { $eÀªéëÔ¬ë = get_path_this($Eƒ∂ü∆ãëî); if (isset($d ÑÓ§ï›Ê[$eÀªéëÔ¬ë]) || !file_exists($Eƒ∂ü∆ãëî . $cí…›üÂÓú[2229]) || !file_exists($Eƒ∂ü∆ãëî . $cí…›üÂÓú[2220])) { continue; } Hook::apply($eÀªéëÔ¬ë . $cí…›üÂÓú[2223]); } } } goto eáß∞Ωî◊ú; Cı“»û¢ŒÒ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($AÕåŒÂúëá) { parent::__construct(); require_once SDK_DIR . $_SERVER[áí∂¯Â¸Áò][1218]; $this->_init($AÕåŒÂúëá); } public function _init($F°∏à∫æﬂ‹) { goto DŒ åïûΩç; dËŸ≈àÎà†: $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); goto E°öëº∞Öﬂ; DŒ åïûΩç: $a˜’«éÉ‡⁄ =& $_SERVER[áí∂¯Â¸Áò]; foreach ($F°∏à∫æﬂ‹ as $D€…‰©ü’Ì => $AØ™ñ·Ÿ‚ì) { if (isset($this->{$D€…‰©ü’Ì})) { $this->{$D€…‰©ü’Ì} = $AØ™ñ·Ÿ‚ì; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($a˜’«éÉ‡⁄[1219] . LNG($a˜’«éÉ‡⁄[1179])); } goto dËŸ≈àÎà†; E°öëº∞Öﬂ: $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); goto c÷•ä§¥ëﬁ; c÷•ä§¥ëﬁ: } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($e≈“„ãÚ¢È, $dê‡ÕîÑ«„ = '', $E˜Àèò≠ªŒ = REPEAT_RENAME) { if ($this->setContent($e≈“„ãÚ¢È, $dê‡ÕîÑ«„)) { return $this->getPathOuter($e≈“„ãÚ¢È); } return !1; } public function mkdir($a¢ﬁ¨Ç–…∫, $dÛŒèÌã¢â = REPEAT_SKIP) { goto cà•Ó˘Øà•; eÖ™–âç≠•: if (!$this->mkfile($A˘«å∂‡˘∏)) { return !1; } if (!$this->moveFile($A˘«å∂‡˘∏, $a¢ﬁ¨Ç–…∫)) { $this->delFile($A˘«å∂‡˘∏); return !1; } return $this->getPathOuter($bçœ¶—¯¥◊); goto D©Ê…—õå≠; dÕÊıÿ˜¬º: $a¢ﬁ¨Ç–…∫ = $bçœ¶—¯¥◊ . $E‘æ«“ª°Â[8]; $Eê‘â±≈Ø∏ = get_path_this($bçœ¶—¯¥◊); $A˘«å∂‡˘∏ = $a¢ﬁ¨Ç–…∫ . $Eê‘â±≈Ø∏; goto eÖ™–âç≠•; cà•Ó˘Øà•: $E‘æ«“ª°Â =& $_SERVER[áí∂¯Â¸Áò]; $bçœ¶—¯¥◊ = trim($a¢ﬁ¨Ç–…∫, $E‘æ«“ª°Â[8]); if ($this->_isFolder($bçœ¶—¯¥◊)) { return $this->getPathOuter($bçœ¶—¯¥◊); } goto dÕÊıÿ˜¬º; D©Ê…—õå≠: } public function copyFile($A°“–ëñõ¶, $b∫”µçí⁄≥) { $CÍèè—µÂ = $this->bucketManager->copy($this->bucket, $A°“–ëñõ¶, $this->bucket, $b∫”µçí⁄≥, !0); return $CÍèè—µÂ ? !1 : $this->getPathOuter($b∫”µçí⁄≥); } public function moveFile($Aö”°ﬂÎ¡, $c•ˆÖêÍ∆Ò) { $DüºÕ¿ü´‡ = $this->bucketManager->move($this->bucket, $Aö”°ﬂÎ¡, $this->bucket, $c•ˆÖêÍ∆Ò, !0); return $DüºÕ¿ü´‡ ? !1 : $this->getPathOuter($c•ˆÖêÍ∆Ò); } public function delFile($eêôºéÊÉØ) { if (!$this->exist($eêôºéÊÉØ)) { return !0; } $c»“†Üääæ = $this->bucketManager->delete($this->bucket, $eêôºéÊÉØ); return $c»“†Üääæ ? !1 : !0; } public function delFolder($eÙêËıöÉ–) { goto e¶¿çÂÆ≈¥; e¶¿çÂÆ≈¥: if (!$this->exist($eÙêËıöÉ–)) { return !0; } $fÏÇÔ≈Ë¨ = $this->fileList($eÙêËıöÉ–); if (empty($fÏÇÔ≈Ë¨)) { return !0; } goto dä∞∆¬™Ç‰; E¨â”¡Ï·õ: return !0; goto Aª∏¬ ΩΩ∫; dä∞∆¬™Ç‰: $dô≤úÑÎˆ  = 1000; if (count($fÏÇÔ≈Ë¨) <= $dô≤úÑÎˆ ) { return $this->qnDelObj($fÏÇÔ≈Ë¨) ? !1 : !0; } foreach (array_chunk($fÏÇÔ≈Ë¨, $dô≤úÑÎˆ ) as $cÏúñåæ∆√) { $eòüÌﬂÇ¯¢ = $this->qnDelObj($cÏúñåæ∆√); if ($eòüÌﬂÇ¯¢) { return !1; } } goto E¨â”¡Ï·õ; Aª∏¬ ΩΩ∫: } private function qnDelObj($c«›ªØªë•) { $D–˘¢ê®Ω = $this->bucketManager->buildBatchDelete($this->bucket, $c«›ªØªë•); list($f∆Ö¥Ù∆ùÑ, $a‰π”Ÿ∑Œ≈) = $this->bucketManager->batch($D–˘¢ê®Ω); return $a‰π”Ÿ∑Œ≈; } private function fileList($c≠ôäë˘£ä, $bã¿âﬁö‹π = 0) { goto d∂≤çÊ´µ∞; d∂≤çÊ´µ∞: $d‰óèãÁ∞™ =& $_SERVER[áí∂¯Â¸Áò]; $c≠ôäë˘£ä = trim($c≠ôäë˘£ä, $d‰óèãÁ∞™[8]); $aºª’ä¢ä§ = empty($c≠ôäë˘£ä) ? $d‰óèãÁ∞™[33] : $c≠ôäë˘£ä . $d‰óèãÁ∞™[8]; goto f—ÈÂÔ æÕ; bôé√†ÖÆÆ: $DñÎ¯“ÑÕà = array(); while (!0) { list($fØ∞Ù¬÷àƒ, $CµêÁ∏ªÒΩ) = $this->bucketManager->listFiles($this->bucket, $aºª’ä¢ä§, $bΩ»îüÃàÕ, $Bºﬂï—êœÉ, $DßÔªœ›ö·); if ($CµêÁ∏ªÒΩ) { return !1; } $bΩ»îüÃàÕ = array_key_exists($d‰óèãÁ∞™[1190], $fØ∞Ù¬÷àƒ) ? $bΩ»îüÃàÕ = $fØ∞Ù¬÷àƒ[$d‰óèãÁ∞™[1220]] : $d‰óèãÁ∞™[33]; foreach ($fØ∞Ù¬÷àƒ[$d‰óèãÁ∞™[1221]] as $Føê„ÕÈà≠) { $FßÇÚ„£çÔ = $Føê„ÕÈà≠[$d‰óèãÁ∞™[89]]; if ($bã¿âﬁö‹π) { $FßÇÚ„£çÔ = array($d‰óèãÁ∞™[28] => $FßÇÚ„£çÔ, $d‰óèãÁ∞™[77] => $Føê„ÕÈà≠[$d‰óèãÁ∞™[1222]]); } $DñÎ¯“ÑÕà[] = $FßÇÚ„£çÔ; } if ($bΩ»îüÃàÕ == $d‰óèãÁ∞™[33]) { break; } } return $DñÎ¯“ÑÕà; goto c¨ÈÔ∫îÜ°; f—ÈÂÔ æÕ: $bΩ»îüÃàÕ = $d‰óèãÁ∞™[33]; $Bºﬂï—êœÉ = 1000; $DßÔªœ›ö· = $d‰óèãÁ∞™[33]; goto bôé√†ÖÆÆ; c¨ÈÔ∫îÜ°: } public function rename($AùÑ¢ú¬≠’, $B±ºŸøÇ‘”) { return $this->renameObject($AùÑ¢ú¬≠’, $B±ºŸøÇ‘”); } public function fileInfo($b‹Õè∏ß§Ê, $e°ÒçÈ´√‰ = false, $Fä≥≥√ﬁèï = array()) { goto bˆêºﬂäŒÍ; A…§í≠ú·„: if (empty($Fä≥≥√ﬁèï)) { $Fä≥≥√ﬁèï = $this->objectMeta($b‹Õè∏ß§Ê); if (!$Fä≥≥√ﬁèï) { return $D¢¢¶∑∏ñÁ; } } if (isset($Fä≥≥√ﬁèï[$c´÷ÍêèÆ±[1223]])) { $D¢¢¶∑∏ñÁ[$c´÷ÍêèÆ±[107]] = substr($Fä≥≥√ﬁèï[$c´÷ÍêèÆ±[1223]] . $c´÷ÍêèÆ±[33], 0, 10); } if (isset($Fä≥≥√ﬁèï[$c´÷ÍêèÆ±[1222]])) { $D¢¢¶∑∏ñÁ[$c´÷ÍêèÆ±[77]] = $Fä≥≥√ﬁèï[$c´÷ÍêèÆ±[1222]]; } goto dìçŒ∑ƒü; bˆêºﬂäŒÍ: $c´÷ÍêèÆ± =& $_SERVER[áí∂¯Â¸Áò]; if ($e°ÒçÈ´√‰) { return array($c´÷ÍêèÆ±[28] => $this->pathThis($b‹Õè∏ß§Ê), $c´÷ÍêèÆ±[75] => $this->getPathOuter($c´÷ÍêèÆ±[8] . $b‹Õè∏ß§Ê), $c´÷ÍêèÆ±[29] => $c´÷ÍêèÆ±[171], $c´÷ÍêèÆ±[77] => isset($Fä≥≥√ﬁèï[$c´÷ÍêèÆ±[1222]]) ? $Fä≥≥√ﬁèï[$c´÷ÍêèÆ±[1222]] : 0, $c´÷ÍêèÆ±[165] => $this->ext($b‹Õè∏ß§Ê)); } $D¢¢¶∑∏ñÁ = array($c´÷ÍêèÆ±[28] => $this->pathThis($b‹Õè∏ß§Ê), $c´÷ÍêèÆ±[75] => $this->getPathOuter($c´÷ÍêèÆ±[8] . $b‹Õè∏ß§Ê), $c´÷ÍêèÆ±[29] => $c´÷ÍêèÆ±[171], $c´÷ÍêèÆ±[191] => 0, $c´÷ÍêèÆ±[107] => 0, $c´÷ÍêèÆ±[77] => 0, $c´÷ÍêèÆ±[165] => $this->ext($b‹Õè∏ß§Ê), $c´÷ÍêèÆ±[192] => !0, $c´÷ÍêèÆ±[193] => !0); goto A…§í≠ú·„; dìçŒ∑ƒü: return $D¢¢¶∑∏ñÁ; goto f¨ÙêÆ´¢ú; f¨ÙêÆ´¢ú: } public function folderInfo($B¬ö∫Ú∞öá, $EˆÛƒ°û´Ê = false) { goto C¡Î≈ç Ö√; C¡Î≈ç Ö√: $AÚ„œÑøÀ¢ =& $_SERVER[áí∂¯Â¸Áò]; if ($EˆÛƒ°û´Ê) { return array($AÚ„œÑøÀ¢[28] => $this->pathThis($B¬ö∫Ú∞öá), $AÚ„œÑøÀ¢[75] => $this->getPathOuter($AÚ„œÑøÀ¢[8] . $B¬ö∫Ú∞öá), $AÚ„œÑøÀ¢[29] => $AÚ„œÑøÀ¢[76]); } $F˘‰®¬ÆûÂ = array($AÚ„œÑøÀ¢[28] => $this->pathThis($B¬ö∫Ú∞öá), $AÚ„œÑøÀ¢[75] => $this->getPathOuter($AÚ„œÑøÀ¢[8] . $B¬ö∫Ú∞öá), $AÚ„œÑøÀ¢[29] => $AÚ„œÑøÀ¢[76], $AÚ„œÑøÀ¢[191] => 0, $AÚ„œÑøÀ¢[107] => 0, $AÚ„œÑøÀ¢[1169] => !0, $AÚ„œÑøÀ¢[1170] => !0); goto Cçø∏ÆÀî; Cçø∏ÆÀî: $B¬ö∫Ú∞öá = rtrim($B¬ö∫Ú∞öá, $AÚ„œÑøÀ¢[8]) . $AÚ„œÑøÀ¢[8]; $câÁàÁ®å≤ = $this->objectMeta($B¬ö∫Ú∞öá); if (isset($câÁàÁ®å≤[$AÚ„œÑøÀ¢[1223]])) { $F˘‰®¬ÆûÂ[$AÚ„œÑøÀ¢[107]] = substr($câÁàÁ®å≤[$AÚ„œÑøÀ¢[1223]] . $AÚ„œÑøÀ¢[33], 0, 10); } goto bæó™åªÃ¥; bæó™åªÃ¥: return $F˘‰®¬ÆûÂ; goto E„‚≠ò∂à; E„‚≠ò∂à: } public function listPath($BÂÕÉ‰≥§ı, $cÊÉ‡¢≤Â± = false) { goto AÖ„Ü“ﬁ±≈; Fﬁé§á∫œœ: $bå∏ßªµèÕ = $cÔß¶œû∂ã[33]; $AíØâÉØ«˜ = 1000; $DŒí¨˘Î•Ö = $cÔß¶œû∂ã[8]; goto cÊ´ìΩñíª; AÖ„Ü“ﬁ±≈: $cÔß¶œû∂ã =& $_SERVER[áí∂¯Â¸Áò]; $BÂÕÉ‰≥§ı = trim($BÂÕÉ‰≥§ı, $cÔß¶œû∂ã[8]); $E±Ÿ´¢èÚ” = empty($BÂÕÉ‰≥§ı) ? $cÔß¶œû∂ã[33] : $BÂÕÉ‰≥§ı . $cÔß¶œû∂ã[8]; goto Fﬁé§á∫œœ; cÊ´ìΩñíª: $BóÀÖü∂§Ç = $A¶ñ‡ÍÊ‰Í = array(); while (!0) { list($EÂ›ö∞äë‰, $DØâØïÑ“Ë) = $this->bucketManager->listFiles($this->bucket, $E±Ÿ´¢èÚ”, $bå∏ßªµèÕ, $AíØâÉØ«˜, $DŒí¨˘Î•Ö); if ($DØâØïÑ“Ë) { return !1; } $bå∏ßªµèÕ = array_key_exists($cÔß¶œû∂ã[1190], $EÂ›ö∞äë‰) ? $bå∏ßªµèÕ = $EÂ›ö∞äë‰[$cÔß¶œû∂ã[1220]] : $cÔß¶œû∂ã[33]; if (isset($EÂ›ö∞äë‰[$cÔß¶œû∂ã[1224]])) { foreach ($EÂ›ö∞äë‰[$cÔß¶œû∂ã[1224]] as $f∆ÃÍœ≥¿) { if ($f∆ÃÍœ≥¿ == $E±Ÿ´¢èÚ”) { continue; } $BóÀÖü∂§Ç[] = $this->folderInfo($f∆ÃÍœ≥¿, $cÊÉ‡¢≤Â±); } } if (isset($EÂ›ö∞äë‰[$cÔß¶œû∂ã[1221]])) { foreach ($EÂ›ö∞äë‰[$cÔß¶œû∂ã[1221]] as $C‰®°ªÙŒÒ) { if ($C‰®°ªÙŒÒ[$cÔß¶œû∂ã[89]] == $E±Ÿ´¢èÚ”) { continue; } $A¶ñ‡ÍÊ‰Í[] = $this->fileInfo($C‰®°ªÙŒÒ[$cÔß¶œû∂ã[89]], $cÊÉ‡¢≤Â±, $C‰®°ªÙŒÒ); } } if ($bå∏ßªµèÕ == $cÔß¶œû∂ã[33]) { break; } } return array($cÔß¶œû∂ã[74] => $BóÀÖü∂§Ç, $cÔß¶œû∂ã[73] => $A¶ñ‡ÍÊ‰Í); goto B◊ÒŒ¡ÛÒ»; B◊ÒŒ¡ÛÒ»: } public function has($Fö»å®áìŒ, $DãçíÕ«Ó≠ = false, $bÀÿÀ≈ƒÓ‹ = true) { goto d≤îÑ˜éç™; Bí πÿéœ∏: $Bú≤ç√é¯’ = $fä¯µÛ∂íÑ[33]; $EÜ‡ßûÃ‹ = 1000; $cõÁŒ∫÷ÎÑ = $fä¯µÛ∂íÑ[8]; goto Eõ†ú¿Æ∑⁄; Eõ†ú¿Æ∑⁄: $C©∫ä¿≈í¬ = 0; $bøıçÑ–ãô = 0; while (!0) { list($f÷å†´íªÁ, $c◊≈áàâÃ) = $this->bucketManager->listFiles($this->bucket, $dãÖä°•û, $Bú≤ç√é¯’, $EÜ‡ßûÃ‹, $cõÁŒ∫÷ÎÑ); if ($c◊≈áàâÃ) { return !1; } $Bú≤ç√é¯’ = array_key_exists($fä¯µÛ∂íÑ[1190], $f÷å†´íªÁ) ? $Bú≤ç√é¯’ = $f÷å†´íªÁ[$fä¯µÛ∂íÑ[1220]] : $fä¯µÛ∂íÑ[33]; if ($DãçíÕ«Ó≠) { if (!empty($f÷å†´íªÁ[$fä¯µÛ∂íÑ[1221]])) { $C©∫ä¿≈í¬ += count($f÷å†´íªÁ[$fä¯µÛ∂íÑ[1221]]); } if (!empty($f÷å†´íªÁ[$fä¯µÛ∂íÑ[1224]])) { $bøıçÑ–ãô += count($f÷å†´íªÁ[$fä¯µÛ∂íÑ[1224]]); } if ($Bú≤ç√é¯’ === $fä¯µÛ∂íÑ[33]) { break; } continue; } if ($bÀÿÀ≈ƒÓ‹) { if (!empty($f÷å†´íªÁ[$fä¯µÛ∂íÑ[1221]])) { return !0; } } else { if (!empty($f÷å†´íªÁ[$fä¯µÛ∂íÑ[1224]])) { return !0; } } if ($Bú≤ç√é¯’ == $fä¯µÛ∂íÑ[33]) { break; } } goto DªÖêÌÕÖù; d≤îÑ˜éç™: $fä¯µÛ∂íÑ =& $_SERVER[áí∂¯Â¸Áò]; $Fö»å®áìŒ = trim($Fö»å®áìŒ, $fä¯µÛ∂íÑ[8]); $dãÖä°•û = empty($Fö»å®áìŒ) ? $fä¯µÛ∂íÑ[33] : $Fö»å®áìŒ . $fä¯µÛ∂íÑ[8]; goto Bí πÿéœ∏; DªÖêÌÕÖù: if ($DãçíÕ«Ó≠) { return array($fä¯µÛ∂íÑ[195] => $C©∫ä¿≈í¬, $fä¯µÛ∂íÑ[196] => $bøıçÑ–ãô); } return !1; goto E◊π„≈è‚û; E◊π„≈è‚û: } public function listAll($D‡ô§Ë†œ§) { $cÉ˘ûÊ†–Œ =& $_SERVER[áí∂¯Â¸Áò]; $Dôﬁú¨√óÂ = $this->fileList($D‡ô§Ë†œ§, 1); $FÜÍ£è¶äò = array(); foreach ($Dôﬁú¨√óÂ as $cÉì¥ØÑ»Ú) { $FÜÍ£è¶äò[$cÉì¥ØÑ»Ú[$cÉ˘ûÊ†–Œ[28]]] = $cÉì¥ØÑ»Ú[$cÉ˘ûÊ†–Œ[77]]; } return $this->listAllFiles($D‡ô§Ë†œ§, array_keys($FÜÍ£è¶äò), $FÜÍ£è¶äò); } public function canRead($dÑ√„™à‡Ó) { return $this->exist($dÑ√„™à‡Ó) ? !0 : !1; } public function canWrite($dÎÓŒê–óê) { return $this->exist($dÎÓŒê–óê) ? !0 : !1; } public function getContent($a¿ñÔíƒæ≠) { return $this->fileSubstr($a¿ñÔíƒæ≠, 0, -1); } public function setContent($D∂öÚºÚ–Â, $dîìõòô• = '') { $BƒìÈæåØ  = $this->tempFile($this->pathThis($D∂öÚºÚ–Â)); file_put_contents($BƒìÈæåØ , $dîìõòô•); if ($this->upload($D∂öÚºÚ–Â, $BƒìÈæåØ )) { $this->tempFileRemve($BƒìÈæåØ ); return !0; } return !1; } public function refreshUrls($dçáºô≈“€) { goto AÇâΩŒÿÙÉ; AÇâΩŒÿÙÉ: $Aäë©úÀ‹· =& $_SERVER[áí∂¯Â¸Áò]; $Cûã’ƒäÌ» = array(); if (is_array($dçáºô≈“€)) { foreach ($dçáºô≈“€ as $D®ùÆÕòÓù) { $Cûã’ƒäÌ»[] = $this->link($D®ùÆÕòÓù); } } else { $Cûã’ƒäÌ»[] = $this->link($dçáºô≈“€); } goto fñóíË≤Ñû; fñóíË≤Ñû: $aı¨ë¯¨‹ö = new Qiniu\Cdn\CdnManager($this->auth); list($AÇùëÌ‘êÇ, $a®ÁÒ¯„¡¨) = $aı¨ë¯¨‹ö->refreshUrls($Cûã’ƒäÌ»); if ($a®ÁÒ¯„¡¨) { return !1; } goto eŸºÌñ‡åœ; eŸºÌñ‡åœ: return $AÇùëÌ‘êÇ[$Aäë©úÀ‹·[1225]] == $Aäë©úÀ‹·[702] ? !0 : !1; goto Dçƒ¢ä¡§Õ; Dçƒ¢ä¡§Õ: } public function fileSubstr($cõ»ÿ“ºÚí, $EœŒã∑í€≥, $Dù™ù∏≥ Õ) { $B≈÷‚∞®«¡ =& $_SERVER[áí∂¯Â¸Áò]; if (!($B—êŸóß“ò = $this->link($cõ»ÿ“ºÚí))) { return !1; } $fΩ¢ÓåæÜï = !1; if ($Dù™ù∏≥ Õ > 0) { $FéÁä≠—‚î = $EœŒã∑í€≥ + $Dù™ù∏≥ Õ - 1; $fΩ¢ÓåæÜï = array($B≈÷‚∞®«¡[1226] . $EœŒã∑í€≥ . $B≈÷‚∞®«¡[424] . $FéÁä≠—‚î); } $cãƒÆà¡¨ï = url_request($B—êŸóß“ò, $B≈÷‚∞®«¡[220], !1, $fΩ¢ÓåæÜï); return $cãƒÆà¡¨ï[$B≈÷‚∞®«¡[695]] ? $cãƒÆà¡¨ï[$B≈÷‚∞®«¡[1042]] : !1; } public function upload($e±÷≥ù†’∂, $DåÊÑÍ≠€, $f¥ŒÍ¨€¶˘ = false, $D≠æÔ‡ÑÎñ = REPEAT_REPLACE) { $e“Úâ◊àè™ = new Qiniu\Storage\UploadManager(); $dÆ≥™òØŸ¨ = $this->auth->uploadToken($this->bucket, $e±÷≥ù†’∂); $aÊù«‘ëçç = get_file_mime(get_path_ext($DåÊÑÍ≠€)); list($d€µúçôëç, $CÂüÖ“ƒè…) = $e“Úâ◊àè™->putFile($dÆ≥™òØŸ¨, $e±÷≥ù†’∂, $DåÊÑÍ≠€, null, $aÊù«‘ëçç); return $CÂüÖ“ƒè… ? !1 : $this->getPathOuter($e±÷≥ù†’∂); } public function uploadFormData($dµ±µæòƒê, $cèèÂ”Ãù¨ = 3600) { return $this->uploadToken($dµ±µæòƒê, $cèèÂ”Ãù¨); } public function multiUploadFormData($e –åÒ∫«ï, $dÿ»ö‘Òàî = 3600) { return $this->uploadToken($e –åÒ∫«ï, $dÿ»ö‘Òàî); } private function uploadToken($d∆ùÿö ã‘, $Aï›ßûîº— = 3600) { goto DÃõÙá˘¢•; DÃõÙá˘¢•: $C‡ú°¨ïë¿ =& $_SERVER[áí∂¯Â¸Áò]; $cöÕÑÓ‹⁄ô = $Aï›ßûîº—; $Dê∞«·…ÿ∂ = array($C‡ú°¨ïë¿[1227] => $C‡ú°¨ïë¿[1228]); goto CÙƒﬂÂØ∑â; a®ÆòØû≈ï: $C∫∫≈çÔ°  = http_type() . "\x3a\57\x2f\x75\160\154\x6f\141\144{$FÖç≥≠¥áÏ}\56\161\151\x6e\x69\x75\160\56\x63\x6f\x6d\57"; return array($C‡ú°¨ïë¿[1230] => $cÚÜÇ§—ÿﬁ, $C‡ú°¨ïë¿[1231] => $C∫∫≈çÔ° ); goto CûáÆ”Ωê⁄; CÙƒﬂÂØ∑â: $d€∫ñÀëÑı = $d∆ùÿö ã‘; $cÚÜÇ§—ÿﬁ = $this->auth->uploadToken($this->bucket, $d€∫ñÀëÑı, $cöÕÑÓ‹⁄ô, $Dê∞«·…ÿ∂, !0); $FÖç≥≠¥áÏ = empty($this->region) || $this->region == $C‡ú°¨ïë¿[1229] ? $C‡ú°¨ïë¿[33] : $C‡ú°¨ïë¿[424] . $this->region; goto a®ÆòØû≈ï; CûáÆ”Ωê⁄: } public function download($bŸ“¥ëåŸå, $E‚ÏÁÑ’‹∆) { goto Dâå‚≈‡Áƒ; C›ı÷±‡Óá: $f®ÿÔ≈É÷¡ = 1024 * 200; $dæ‰®âé˘™ = fopen($F∂â≠€éÒ, $_SERVER[áí∂¯Â¸Áò][1232]); while (!0) { $D‰íÒÍØÉª = $this->fileSubstr($bŸ“¥ëåŸå, $dœÁ¢¶úÁÁ, $f®ÿÔ≈É÷¡); if ($D‰íÒÍØÉª === !1) { return !1; } fwrite($dæ‰®âé˘™, $D‰íÒÍØÉª); $dœÁ¢¶úÁÁ += $f®ÿÔ≈É÷¡; if (strlen($D‰íÒÍØÉª) < $f®ÿÔ≈É÷¡) { break; } } goto dÖ◊∫ù°•…; dÖ◊∫ù°•…: fclose($dæ‰®âé˘™); return $E‚ÏÁÑ’‹∆; goto c©á≥ùü¯Ö; Dâå‚≈‡Áƒ: $F∂â≠€éÒ = IO::getPathInner(IO::mkfile($E‚ÏÁÑ’‹∆)); if (!($Cßîé∫ùÆŒ = $this->link($bŸ“¥ëåŸå))) { return !1; } $dœÁ¢¶úÁÁ = 0; goto C›ı÷±‡Óá; c©á≥ùü¯Ö: } public function link($AΩÍËêèŸÃ, $c≥ëÍ¡äõ◊ = '') { if (!$this->isFile($AΩÍËêèŸÃ)) { return !1; } $Bá£ëç≠Ë‰ = $this->getHost() . $_SERVER[áí∂¯Â¸Áò][8] . $this->pathEncode($AΩÍËêèŸÃ) . $c≥ëÍ¡äõ◊; return $this->auth->privateDownloadUrl($Bá£ëç≠Ë‰, 3600 * 12); } public function fileOut($dÑÍ†ÓÊﬁÑ, $C‘†›îÊíà = false, $açÉ≤úÙÂÑ = false, $B˜ª…É‚£Õ = '') { $DÉÓ™ƒ±—ê =& $_SERVER[áí∂¯Â¸Áò]; if ($this->isFileOutServer()) { return $this->fileOutServer($dÑÍ†ÓÊﬁÑ, $C‘†›îÊíà, $açÉ≤úÙÂÑ, $B˜ª…É‚£Õ); } if (!$açÉ≤úÙÂÑ) { $açÉ≤úÙÂÑ = $this->pathThis($dÑÍ†ÓÊﬁÑ); } $d∫¡†”úíá = $C‘†›îÊíà ? $DÉÓ™ƒ±—ê[1233] . rawurlencode($açÉ≤úÙÂÑ) : $DÉÓ™ƒ±—ê[33]; $Dƒèó‹Î¯Œ = $this->link($dÑÍ†ÓÊﬁÑ, $d∫¡†”úíá); $this->fileOutLink($Dƒèó‹Î¯Œ); } public function fileOutServer($A∏Á∏Âªçπ, $aŸ≈©›–È¥ = false, $e¢ìÎı∂Û˜ = false, $a¶Ö¡ÑÛ›¨ = '') { parent::fileOut($A∏Á∏Âªçπ, $aŸ≈©›–È¥, $e¢ìÎı∂Û˜, $a¶Ö¡ÑÛ›¨); } public function fileOutImage($a€∞ˆ∞Õ†â, $e®ÊÌüà”ƒ = 250) { $C≥π ÷æØê = $this->link($a€∞ˆ∞Õ†â, $_SERVER[áí∂¯Â¸Áò][1234] . $e®ÊÌüà”ƒ); $this->fileOutLink($C≥π ÷æØê); } public function fileOutImageServer($dÑÕÑíéÆ , $C–∑»éºŒà = 250) { parent::fileOutImage($dÑÕÑíéÆ , $C–∑»éºŒà); } public function hashMd5($dçõà˜á„∆) { $Aë–≈®€òÍ =& $_SERVER[áí∂¯Â¸Áò]; $D‰ãÑŸâ—¿ = $this->objectMeta($dçõà˜á„∆); return isset($D‰ãÑŸâ—¿[$Aë–≈®€òÍ[200]]) ? $D‰ãÑŸâ—¿[$Aë–≈®€òÍ[200]] : !1; $e‰£®⁄≈ﬁõ = $this->link($dçõà˜á„∆, $Aë–≈®€òÍ[1235]); } public function size($e≥µƒ¥õ«’) { $A¬ˆ©æ∫∞ı = $this->objectMeta($e≥µƒ¥õ«’); return $A¬ˆ©æ∫∞ı ? $A¬ˆ©æ∫∞ı[$_SERVER[áí∂¯Â¸Áò][77]] : 0; } public function info($C€µà„ÓÂË) { if ($this->isFolder($C€µà„ÓÂË)) { return $this->folderInfo($C€µà„ÓÂË); } else { if ($this->isFile($C€µà„ÓÂË)) { return $this->fileInfo($C€µà„ÓÂË); } } return !1; } public function exist($AÈÉ„ıËãá) { return $this->isFile($AÈÉ„ıËãá) || $this->isFolder($AÈÉ„ıËãá); } public function isFile($Aç∂«Î§ÎÂ) { return !$this->isFolder($Aç∂«Î§ÎÂ) && $this->objectMeta($Aç∂«Î§ÎÂ); } public function isFolder($cÜÔ—äÉÀ∞) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][227], $cÜÔ—äÉÀ∞); } protected function objectMeta($dë˜ıÌ¿Ìá) { return $this->cacheMethod($_SERVER[áí∂¯Â¸Áò][228], $dë˜ıÌ¿Ìá); } protected function _objectMeta($BöÜôù∑ü·) { $F–›’Öåœ€ =& $_SERVER[áí∂¯Â¸Áò]; list($cÑàÖÎŒ‰ó, $b†≤è’—≈ë) = $this->bucketManager->stat($this->bucket, $BöÜôù∑ü·); if ($cÑàÖÎŒ‰ó) { $cÑàÖÎŒ‰ó[$F–›’Öåœ€[77]] = intval($cÑàÖÎŒ‰ó[$F–›’Öåœ€[1222]]); } return $cÑàÖÎŒ‰ó; } protected function _isFolder($dÈ“œ⁄æ‰Ó) { $e⁄≤áÁ› ÿ =& $_SERVER[áí∂¯Â¸Áò]; if ($dÈ“œ⁄æ‰Ó == $e⁄≤áÁ› ÿ[33] || $dÈ“œ⁄æ‰Ó == $e⁄≤áÁ› ÿ[8]) { return !0; } list($D˜•ô∫••∏, $c˘èÚäãÏÏ) = $this->bucketManager->listFiles($this->bucket, trim($dÈ“œ⁄æ‰Ó, $e⁄≤áÁ› ÿ[8]) . $e⁄≤áÁ› ÿ[8], $e⁄≤áÁ› ÿ[33], 1, $e⁄≤áÁ› ÿ[8]); return !empty($D˜•ô∫••∏[$e⁄≤áÁ› ÿ[1221]]) || !empty($D˜•ô∫••∏[$e⁄≤áÁ› ÿ[1224]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($D¶Ì¶°Ë≈Ó) { parent::__construct($D¶Ì¶°Ë≈Ó); } public function uploadFormData($fı‰äºÉ◊∂, $d˘ÕÃ‹›≠£ = 3600) { goto DñˆÏ£æ√Ñ; Bâö≠êïä“: $e‡ÿ◊Ûèª = $fé˘Í°∫àè[1143]; $f‹ùõî√Ìà = $d˘ÕÃ‹›≠£ . $fé˘Í°∫àè[33]; $C”Ç™∑ˆÑé = $fé˘Í°∫àè[1107]; goto FÆÇ‰è∞∆È; FÆÇ‰è∞∆È: $c®±Àêœ€ò = array($this->accessKey, $B„™¬ÉˆíÑ, $this->region, $Fµ˜†ã¨ú€, $e‡ÿ◊Ûèª); $BôÓ Ñﬁê = implode($fé˘Í°∫àè[8], $c®±Àêœ€ò); $Cïöâ⁄‚éπ = array($fé˘Í°∫àè[1109] => gmdate($fé˘Í°∫àè[1108], strtotime($fé˘Í°∫àè[1144])), $fé˘Í°∫àè[1110] => array(array($fé˘Í°∫àè[1112] => $this->bucket), array($fé˘Í°∫àè[1111] => $aåΩíıÎøﬂ), array($fé˘Í°∫àè[1113], $fé˘Í°∫àè[1114], $fé˘Í°∫àè[33]), array($fé˘Í°∫àè[1113], $fé˘Í°∫àè[1145], $fé˘Í°∫àè[33]), array($fé˘Í°∫àè[1113], $fé˘Í°∫àè[1146], $fé˘Í°∫àè[33]), array($fé˘Í°∫àè[1115] => $C”Ç™∑ˆÑé), array($fé˘Í°∫àè[1147] => $BôÓ Ñﬁê), array($fé˘Í°∫àè[1148] => $C‚˜‰íí›”), array($fé˘Í°∫àè[1149] => $eÂˆ≠ì—ΩÇ), array($fé˘Í°∫àè[1150] => $f‹ùõî√Ìà))); goto b™¬àÈÎá∂; aòı≠ î–ô: $eõ•àå¿àÌ = hash_hmac($fé˘Í°∫àè[1151], $Fµ˜†ã¨ú€, $båàÇ¢∏‚ﬂ, !0); $d‚Ë’Üã¬ú = hash_hmac($fé˘Í°∫àè[1151], $e‡ÿ◊Ûèª, $eõ•àå¿àÌ, !0); $DíÏ√‰áæﬂ = hash_hmac($fé˘Í°∫àè[1151], $aÉàÁªë±…, $d‚Ë’Üã¬ú); goto EößÿÚÛ÷Æ; DñˆÏ£æ√Ñ: $fé˘Í°∫àè =& $_SERVER[áí∂¯Â¸Áò]; $aåΩíıÎøﬂ = $fé˘Í°∫àè[189]; $C‚˜‰íí›” = $fé˘Í°∫àè[1141]; goto F∞”ó“ê»∞; b™¬àÈÎá∂: $aÉàÁªë±… = base64_encode(json_encode($Cïöâ⁄‚éπ)); $d›±òŒÚ©≠ = hash_hmac($fé˘Í°∫àè[1151], $B„™¬ÉˆíÑ, $fé˘Í°∫àè[1152] . $this->secret, !0); $båàÇ¢∏‚ﬂ = hash_hmac($fé˘Í°∫àè[1151], $this->region, $d›±òŒÚ©≠, !0); goto aòı≠ î–ô; F∞”ó“ê»∞: $Fµ˜†ã¨ú€ = $fé˘Í°∫àè[59]; $eÂˆ≠ì—ΩÇ = gmdate($fé˘Í°∫àè[1142]); $B„™¬ÉˆíÑ = gmdate($fé˘Í°∫àè[696]); goto Bâö≠êïä“; EößÿÚÛ÷Æ: $Aù¿∫∫Œúª = array($fé˘Í°∫àè[203] => $fé˘Í°∫àè[33], $fé˘Í°∫àè[1153] => $fé˘Í°∫àè[33], $fé˘Í°∫àè[1111] => $aåΩíıÎøﬂ, $fé˘Í°∫àè[1115] => $C”Ç™∑ˆÑé, $fé˘Í°∫àè[1119] => $aÉàÁªë±…, $fé˘Í°∫àè[1154] => $BôÓ Ñﬁê, $fé˘Í°∫àè[1155] => $C‚˜‰íí›”, $fé˘Í°∫àè[1156] => $eÂˆ≠ì—ΩÇ, $fé˘Í°∫àè[1157] => $f‹ùõî√Ìà, $fé˘Í°∫àè[1158] => $DíÏ√‰áæﬂ, $fé˘Í°∫àè[173] => $this->getHost()); return $Aù¿∫∫Œúª; goto e˘≥≈ÒÔÓå; e˘≥≈ÒÔÓå: } public function multiUploadFormData($CÙ∆Ω†ˆÇ¶, $dÆí„ö á∞ = 3600) { $c⁄«ºÏªåë =& $_SERVER[áí∂¯Â¸Áò]; $Dè≥°≥°‚ˆ = gmdate($c⁄«ºÏªåë[1236]); $fÛ”ŸÉ÷Æú = array(); $EÂÊ‚÷ õ≈ = $this->client->getUploadId($this->bucket, $CÙ∆Ω†ˆÇ¶, $fÛ”ŸÉ÷Æú); if (!$EÂÊ‚÷ õ≈) { return !1; } return array($c⁄«ºÏªåë[213] => $EÂÊ‚÷ õ≈, $c⁄«ºÏªåë[173] => $this->getHost() . $c⁄«ºÏªåë[8] . $this->pathEncode($CÙ∆Ω†ˆÇ¶), $c⁄«ºÏªåë[214] => $Dè≥°≥°‚ˆ, $c⁄«ºÏªåë[89] => $CÙ∆Ω†ˆÇ¶); } public function multiUploadAuthData($aè“Á¯ﬂŒ«, $Bïû®™…ê = array()) { goto dŒâ¶£ã©È; aÔΩÌ◊‚ñÆ: if (isset($Bïû®™…ê[$dËè∫Ã∫ê´[1237]])) { $C∑ÖÜ´Ø…∏[$dËè∫Ã∫ê´[1238]] = $Bïû®™…ê[$dËè∫Ã∫ê´[1237]]; } $Cå®ñ«ü˜É = explode($dËè∫Ã∫ê´[175], $this->getHost()); $e∆ã°æÇ≠ó = array($dËè∫Ã∫ê´[1239] => $Cå®ñ«ü˜É[1], $dËè∫Ã∫ê´[1240] => $dËè∫Ã∫ê´[33], $dËè∫Ã∫ê´[203] => $dËè∫Ã∫ê´[116], $dËè∫Ã∫ê´[1153] => $Bïû®™…ê[$dËè∫Ã∫ê´[77]]); goto füÑÔãˆ·≤; fõ√û˘¢„ï: if (strpos($bÆêà¿„ë∞, $dËè∫Ã∫ê´[217]) === 0) { if (isset($C∑ÖÜ´Ø…∏[$dËè∫Ã∫ê´[1238]])) { $B¨Ùó¥•åÓ = $C∑ÖÜ´Ø…∏[$dËè∫Ã∫ê´[1238]]; } else { if (isset($DäâÀõé´Ω[$dËè∫Ã∫ê´[1238]])) { $B¨Ùó¥•åÓ = $DäâÀõé´Ω[$dËè∫Ã∫ê´[1238]]; } else { $B¨Ùó¥•åÓ = hash($dËè∫Ã∫ê´[1151], $dËè∫Ã∫ê´[33]); } } return array($dËè∫Ã∫ê´[224] => $DäâÀõé´Ω[$dËè∫Ã∫ê´[224]], $dËè∫Ã∫ê´[1238] => $B¨Ùó¥•åÓ, $dËè∫Ã∫ê´[214] => $DäâÀõé´Ω[$dËè∫Ã∫ê´[1241]]); } return $DäâÀõé´Ω[$dËè∫Ã∫ê´[224]]; goto D£¿êô•ì⁄; CñéúÔ”Õ≥: unset($Bïû®™…ê[$dËè∫Ã∫ê´[89]]); if (isset($Bïû®™…ê[$dËè∫Ã∫ê´[215]])) { return $this->listUploadParts($bÜ¥çõ≤≤Á, $Bïû®™…ê); } $C∑ÖÜ´Ø…∏ = array(); goto aÔΩÌ◊‚ñÆ; füÑÔãˆ·≤: $E≤´æò©‡ﬂ = $dËè∫Ã∫ê´[218]; $FÂ√ﬂóñå” = $dËè∫Ã∫ê´[8] . $this->pathEncode($bÜ¥çõ≤≤Á) . $bÆêà¿„ë∞; $DäâÀõé´Ω = $this->client->__getSignatureV4($C∑ÖÜ´Ø…∏, $e∆ã°æÇ≠ó, $E≤´æò©‡ﬂ, $FÂ√ﬂóñå”); goto fõ√û˘¢„ï; dŒâ¶£ã©È: $dËè∫Ã∫ê´ =& $_SERVER[áí∂¯Â¸Áò]; $bÆêà¿„ë∞ = isset($Bïû®™…ê[$dËè∫Ã∫ê´[165]]) ? $Bïû®™…ê[$dËè∫Ã∫ê´[165]] : $dËè∫Ã∫ê´[33]; $bÜ¥çõ≤≤Á = $Bïû®™…ê[$dËè∫Ã∫ê´[89]]; goto CñéúÔ”Õ≥; D£¿êô•ì⁄: } public function listUploadParts($B‘ê‡πä°¢, $B±ë—É√˜ö = array()) { goto bÚ∏∆Á±Ô‹; aóıøò∫∆…: $A∑”Üûµî˜ = array($f‰‚óª‡ÒÕ[1239] => $f©è≤π“ËÌ[1], $f‰‚óª‡ÒÕ[203] => $f‰‚óª‡ÒÕ[116], $f‰‚óª‡ÒÕ[1153] => strlen($eßÃÃø—œÕ)); $Fï≤ãàÿÿï = $f‰‚óª‡ÒÕ[216]; $AúÌÒë—ñ‚ = $f‰‚óª‡ÒÕ[8] . $this->pathEncode($B‘ê‡πä°¢) . $B±ë—É√˜ö[$f‰‚óª‡ÒÕ[165]]; goto b‹®æá˜ëƒ; b‹®æá˜ëƒ: $f“∑ÿƒË   = $this->client->__getSignatureV4($c–Á∞Ë„“Ü, $A∑”Üûµî˜, $Fï≤ãàÿÿï, $AúÌÒë—ñ‚, $eßÃÃø—œÕ); return array($f‰‚óª‡ÒÕ[224] => $f“∑ÿƒË  [$f‰‚óª‡ÒÕ[224]], $f‰‚óª‡ÒÕ[214] => $f“∑ÿƒË  [$f‰‚óª‡ÒÕ[1241]], $f‰‚óª‡ÒÕ[226] => $bâáì∏´üΩ, $f‰‚óª‡ÒÕ[1238] => $f“∑ÿƒË  [$f‰‚óª‡ÒÕ[1238]]); goto Bﬁ≠è≈’œ®; DÃº´ÃÊ¿¡: if (!$bâáì∏´üΩ) { return !1; } $eßÃÃø—œÕ = $f‰‚óª‡ÒÕ[1242]; foreach ($bâáì∏´üΩ as $d¥Ö«õ∆⁄â) { $eßÃÃø—œÕ .= $f‰‚óª‡ÒÕ[1243] . "\x3c\x50\141\162\164\x4e\165\155\x62\x65\x72\76{$d¥Ö«õ∆⁄â[$f‰‚óª‡ÒÕ[1195]]}\x3c\57\120\141\x72\164\x4e\165\x6d\x62\145\162\x3e\xa" . "\74\x45\x54\141\x67\x3e{$d¥Ö«õ∆⁄â[$f‰‚óª‡ÒÕ[1196]]}\74\x2f\105\124\141\x67\x3e\12" . $f‰‚óª‡ÒÕ[1244]; } goto eÖÈÜàÍÜ—; bÚ∏∆Á±Ô‹: $f‰‚óª‡ÒÕ =& $_SERVER[áí∂¯Â¸Áò]; $bÖ©ëÀœÌΩ = str_replace($f‰‚óª‡ÒÕ[225], $f‰‚óª‡ÒÕ[33], $B±ë—É√˜ö[$f‰‚óª‡ÒÕ[165]]); $bâáì∏´üΩ = $this->client->listParts($this->bucket, $B‘ê‡πä°¢, $bÖ©ëÀœÌΩ); goto DÃº´ÃÊ¿¡; eÖÈÜàÍÜ—: $eßÃÃø—œÕ .= $f‰‚óª‡ÒÕ[1245]; $c–Á∞Ë„“Ü = array(); $f©è≤π“ËÌ = explode($f‰‚óª‡ÒÕ[175], $this->getHost()); goto aóıøò∫∆…; Bﬁ≠è≈’œ®: } public function link($dÜ¥ê»¿†ù, $BôñÖÌ´“» = array()) { return parent::link($dÜ¥ê»¿†ù, $BôñÖÌ´“»); } public function fileOut($fÊÖµ„‹≠◊, $Aè©ﬂÂÜﬂ = false, $b±≠ÿÑ¥Ó€ = false, $cüêúı‰ã∞ = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[áí∂¯Â¸Áò][1246])) { return parent::fileOutServer($fÊÖµ„‹≠◊, $Aè©ﬂÂÜﬂ, $b±≠ÿÑ¥Ó€, $cüêúı‰ã∞); } parent::fileOut($fÊÖµ„‹≠◊, $Aè©ﬂÂÜﬂ, $b±≠ÿÑ¥Ó€, $cüêúı‰ã∞); } public function fileOutImage($d»Èµ·‹≈, $E·ıµı⁄Íª = 250) { if (strstr($this->endpoint, $_SERVER[áí∂¯Â¸Áò][1246])) { return parent::fileOutImageServer($d»Èµ·‹≈, $E·ıµı⁄Íª); } parent::fileOutImage($d»Èµ·‹≈, $E·ıµı⁄Íª); } public function fileOutLink($cÑ˜ûè◊ºé) { $DÁñÀÿÜ¶à =& $_SERVER[áí∂¯Â¸Áò]; if (substr($cÑ˜ûè◊ºé, 0, 7) == $DÁñÀÿÜ¶à[1122]) { $cÑ˜ûè◊ºé = $DÁñÀÿÜ¶à[1123] . substr($cÑ˜ûè◊ºé, 7); } header($DÁñÀÿÜ¶à[156] . $cÑ˜ûè◊ºé); die; } public function getHost() { $E•◊÷˘€É€ =& $_SERVER[áí∂¯Â¸Áò]; $Eù•¬ª¨úÓ = str_rtrim(parent::getHost(), $E•◊÷˘€É€[8] . $this->bucket); $Eù•¬ª¨úÓ = explode($E•◊÷˘€É€[175], $Eù•¬ª¨úÓ); return $Eù•¬ª¨úÓ[0] . $E•◊÷˘€É€[175] . $this->bucket . $E•◊÷˘€É€[91] . $Eù•¬ª¨úÓ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($eÔî«õˆû‘, $dﬁâ±¯á‡Ö = 0) { parent::__construct(); $this->source = $eÔî«õˆû‘; $this->sourceSize = $dﬁâ±¯á‡Ö; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($aéùââä¬Ÿ = false) { return $this->sourceSize; } public function getContent($aÑâ∑´§¥â = false) { return $this->fileSubstr($aÑâ∑´§¥â, 0, $this->sourceSize); } public function fileSubstr($Fë∂∞∆Öëö = false, $Dù©˘Õ´πá = 0, $Bœ∫üáÓ‰ = 0) { if (!$Bœ∫üáÓ‰) { $Bœ∫üáÓ‰ = $this->sourceSize; } $Däñä‘Çï = $this->sourceSize - $Dù©˘Õ´πá; if ($Bœ∫üáÓ‰ >= $Däñä‘Çï) { $Bœ∫üáÓ‰ = $Däñä‘Çï; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Dù©˘Õ´πá, $Bœ∫üáÓ‰); } if ($this->sourceType == self::TYPE_FILE) { if ($Bœ∫üáÓ‰ <= 0) { return $_SERVER[áí∂¯Â¸Áò][33]; } $a∂ó◊≠ßé¿ = ftell($this->source); fseek_64($this->source, $a∂ó◊≠ßé¿ + $Dù©˘Õ´πá); $fÊ‰¯ºÿ¶§ = @fread($this->source, $Bœ∫üáÓ‰); fseek_64($this->source, $a∂ó◊≠ßé¿); return $fÊ‰¯ºÿ¶§; } } public function hashMd5($B€ÁâôÇﬂÇ = false) { return md5($this->getContent()); } public static function hash($C«Éç„≤àØ, $aÿÇá““Ï = 0) { $cü°Ÿâé©ü = new PathDriverStream($C«Éç„≤àØ, $aÿÇá““Ï); return $cü°Ÿâé©ü->hashSimple($C«Éç„≤àØ); } public static function md5($Bµπ–ÑÆ≥Ç, $D⁄ºˆõì™¢ = 0) { $E¶ùÊ≥Æ¥† = new PathDriverStream($Bµπ–ÑÆ≥Ç, $D⁄ºˆõì™¢); return $E¶ùÊ≥Æ¥†->hashMd5($Bµπ–ÑÆ≥Ç); } } goto dì÷Ìπ•‹; FÍ‘µóí¶á: class TaskZip extends TaskFileTransfer { protected function startAfter() { $BÃ⁄ØÓ«Ú¯ =& $_SERVER[áí∂¯Â¸Áò]; parent::startAfter(); Hook::bind($BÃ⁄ØÓ«Ú¯[1519], array($this, $BÃ⁄ØÓ«Ú¯[1514])); $D∞ëÿóäÓò =& $this->task; $D∞ëÿóäÓò[$BÃ⁄ØÓ«Ú¯[1516]] = $BÃ⁄ØÓ«Ú¯[1048]; if (!$D∞ëÿóäÓò[$BÃ⁄ØÓ«Ú¯[1348]]) { $D∞ëÿóäÓò[$BÃ⁄ØÓ«Ú¯[1348]] = LNG($BÃ⁄ØÓ«Ú¯[1520]); } } protected function endAfter() { $aò“∏Ø¥∏• =& $_SERVER[áí∂¯Â¸Áò]; parent::endAfter(); Hook::unbind($aò“∏Ø¥∏•[1519], array($this, $aò“∏Ø¥∏•[1514])); } public function updateAfter() { $bî§ÚáÙø‡ =& $_SERVER[áí∂¯Â¸Áò]; $CÀãÚ≥·∫ü =& $this->task; if (!$CÀãÚ≥·∫ü[$bî§ÚáÙø‡[980]] || !$CÀãÚ≥·∫ü[$bî§ÚáÙø‡[704]]) { return; } if ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1516]] == $bî§ÚáÙø‡[1048]) { $aÛºå ÁüÆ = $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1489]]; if ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1490]] != $bî§ÚáÙø‡[1048]) { $aÛºå ÁüÆ = 0; } $aô©Öññ¢§ = ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1493]] + $aÛºå ÁüÆ) / $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[704]]; $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1444]] = $aô©Öññ¢§ * 0.3; } else { if ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1516]] == $bî§ÚáÙø‡[305]) { $aô©Öññ¢§ = $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[994]] / $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[980]]; $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1444]] = 0.3 + $aô©Öññ¢§ * 0.5; } else { if ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1516]] == $bî§ÚáÙø‡[103]) { $aô©Öññ¢§ = 0; if ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1488]]) { $aô©Öññ¢§ = $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1489]] / $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1488]]; } $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1444]] = 0.3 + 0.5 + $aô©Öññ¢§ * 0.2; } } } if ($CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1444]] > 0) { $Dﬂó≈ú¨ó∞ = timeFloat() - $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1446]] - $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1449]]; $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1450]] = $Dﬂó≈ú¨ó∞ * (1 - $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1444]]) / $CÀãÚ≥·∫ü[$bî§ÚáÙø‡[1444]]; } } public function copyFileStart($eÔ†ùØ·ŒÆ, $bÙòµçêá≤, $a≈ç£ìÒËß, $FØÏáøœ”, $dŸãùàÒ√Í, $aˆá≤·õã‹) { $BÆ◊¢πÇ„™ =& $_SERVER[áí∂¯Â¸Áò]; parent::copyFileStart($eÔ†ùØ·ŒÆ, $bÙòµçêá≤, $a≈ç£ìÒËß, $FØÏáøœ”, $dŸãùàÒ√Í, $aˆá≤·õã‹); $cÎî≤°‚Ïù =& $this->task; if ($cÎî≤°‚Ïù[$BÆ◊¢πÇ„™[1516]] == $BÆ◊¢πÇ„™[305]) { $cÎî≤°‚Ïù[$BÆ◊¢πÇ„™[1516]] = $BÆ◊¢πÇ„™[103]; } $this->update(); } public function copyFileEnd($a„¡‡ûπÙƒ, $a≥Êé®ùÉ±, $E≈Ò€Ω®î‚, $e∫™â¶⁄ª¢, $AßˆŒä¯Òú, $d≤èäˆÚÊ) { $cÿËØ®˘ë¬ =& $_SERVER[áí∂¯Â¸Áò]; $F”Ê—©çïƒ =& $this->task; $F”Ê—©çïƒ[$cÿËØ®˘ë¬[1489]] = $F”Ê—©çïƒ[$cÿËØ®˘ë¬[1488]]; $F”Ê—©çïƒ[$cÿËØ®˘ë¬[1493]] += $F”Ê—©çïƒ[$cÿËØ®˘ë¬[1488]]; $F”Ê—©çïƒ[$cÿËØ®˘ë¬[1490]] = $cÿËØ®˘ë¬[33]; $this->update(); } public function nameParse($e™éÀõÁæÜ) { $cóëŒ≠≥£å =& $_SERVER[áí∂¯Â¸Áò]; $bñª¿€ù…… =& $this->task; if ($bñª¿€ù……[$cóëŒ≠≥£å[994]] < $bñª¿€ù……[$cóëŒ≠≥£å[980]]) { $Cˆ£¯çˆ˘Œ = get_path_this($e™éÀõÁæÜ); if (strstr($Cˆ£¯çˆ˘Œ, $cóëŒ≠≥£å[91])) { $bñª¿€ù……[$cóëŒ≠≥£å[994]] += 1; } } if ($bñª¿€ù……[$cóëŒ≠≥£å[1516]] == $cóëŒ≠≥£å[1048]) { $bñª¿€ù……[$cóëŒ≠≥£å[1516]] = $cóëŒ≠≥£å[305]; } $bñª¿€ù……[$cóëŒ≠≥£å[1486]] = $e™éÀõÁæÜ; $this->update(); } } class Downloader { static function start($EŸﬂ·¬¿¯ë, $a‹Ü–àƒàì, $D™≠íåØèÍ = 10) { goto dñ‰Òæ÷ƒÓ; eüﬁ∏§ﬂ™æ: $d¬∆ÈﬁäáÆ = intval($f›ÙÏÊ√‚∂[$cì∂Ó¡ ’ˆ[329]]); if (file_exists($B‚¿‰ïÜû) && time() - filemtime($B‚¿‰ïÜû) < 3) { return array($cì∂Ó¡ ’ˆ[1040] => !1, $cì∂Ó¡ ’ˆ[1042] => $cì∂Ó¡ ’ˆ[1523]); } $Eõ÷„ôêÌı = array(); goto b’∑–ãüŸˆ; aË˘ÉëÜ∑ó: if (!$EŸﬂ·¬¿¯ë) { return array($cì∂Ó¡ ’ˆ[1040] => !1, $cì∂Ó¡ ’ˆ[1042] => $cì∂Ó¡ ’ˆ[1045]); } if (!$f›ÙÏÊ√‚∂[$cì∂Ó¡ ’ˆ[1294]] || $f›ÙÏÊ√‚∂[$cì∂Ó¡ ’ˆ[329]] == 0) { @unlink($B‚¿‰ïÜû); @unlink($a‹Ü–àƒàì); $d≤–âëâóÿ = self::fileDownloadFopen($EŸﬂ·¬¿¯ë, $a‹Ü–àƒàì, $f›ÙÏÊ√‚∂[$cì∂Ó¡ ’ˆ[329]]); if ($d≤–âëâóÿ[$cì∂Ó¡ ’ˆ[1040]]) { return $d≤–âëâóÿ; } else { @unlink($B‚¿‰ïÜû); @unlink($a‹Ü–àƒàì); $d≤–âëâóÿ = self::fileDownloadCurl($EŸﬂ·¬¿¯ë, $a‹Ü–àƒàì, !1, 0, $f›ÙÏÊ√‚∂[$cì∂Ó¡ ’ˆ[329]]); @unlink($B‚¿‰ïÜû); return $d≤–âëâóÿ; } } $e§€°‰ÖºÜ = is_file($B‚¿‰ïÜû) ? filesize_64($B‚¿‰ïÜû) : 0; goto eüﬁ∏§ﬂ™æ; d∫ﬂ∏ïâêŸ: if ($d≤–âëâóÿ[$cì∂Ó¡ ’ˆ[1040]]) { @unlink($EÛºå†»Ñà); } return $d≤–âëâóÿ; goto D÷≤ˆ⁄∑óˆ; b≥¥⁄©¥ã⁄: if ($e§€°‰ÖºÜ > $d¬∆ÈﬁäáÆ) { @unlink($B‚¿‰ïÜû); } file_put_contents($EÛºå†»Ñà, json_encode($Eõ÷„ôêÌı)); $d≤–âëâóÿ = self::fileDownloadCurl($EŸﬂ·¬¿¯ë, $a‹Ü–àƒàì, !0, $e§€°‰ÖºÜ, $d¬∆ÈﬁäáÆ); goto d∫ﬂ∏ïâêŸ; B´œ·Ú¬ùÑ: $B‚¿‰ïÜû = $a‹Ü–àƒàì . $cì∂Ó¡ ’ˆ[1522]; if (is_array($EŸﬂ·¬¿¯ë)) { $f›ÙÏÊ√‚∂ = $EŸﬂ·¬¿¯ë; } else { $f›ÙÏÊ√‚∂ = url_header($EŸﬂ·¬¿¯ë); } $EŸﬂ·¬¿¯ë = $f›ÙÏÊ√‚∂[$cì∂Ó¡ ’ˆ[299]]; goto aË˘ÉëÜ∑ó; dñ‰Òæ÷ƒÓ: $cì∂Ó¡ ’ˆ =& $_SERVER[áí∂¯Â¸Áò]; if (!request_url_safe($EŸﬂ·¬¿¯ë)) { return array($cì∂Ó¡ ’ˆ[1040] => !1, $cì∂Ó¡ ’ˆ[1042] => $cì∂Ó¡ ’ˆ[1045]); } $EÛºå†»Ñà = $a‹Ü–àƒàì . $cì∂Ó¡ ’ˆ[1521]; goto B´œ·Ú¬ùÑ; b’∑–ãüŸˆ: if (is_file($EÛºå†»Ñà)) { $EÇ§Ë•åùã = file_get_contents($EÛºå†»Ñà); $Eõ÷„ôêÌı = json_decode($EÇ§Ë•åùã, 1); } if (file_exists($a‹Ü–àƒàì) && $d¬∆ÈﬁäáÆ == filesize_64($a‹Ü–àƒàì)) { @unlink($B‚¿‰ïÜû); @unlink($EÛºå†»Ñà); return array($cì∂Ó¡ ’ˆ[1040] => !0, $cì∂Ó¡ ’ˆ[1042] => $cì∂Ó¡ ’ˆ[1524]); } if ($Eõ÷„ôêÌı[$cì∂Ó¡ ’ˆ[329]] != $d¬∆ÈﬁäáÆ) { $Eõ÷„ôêÌı = array($cì∂Ó¡ ’ˆ[329] => $d¬∆ÈﬁäáÆ); } goto b≥¥⁄©¥ã⁄; D÷≤ˆ⁄∑óˆ: } static function fileDownloadFopen($Cƒ‚ãŸ‹£â, $A¶Ç ≥´Á∞, $e¥≥´ü—ëã = 0) { $A®ΩÉÀœüö =& $_SERVER[áí∂¯Â¸Áò]; @ini_set($A®ΩÉÀœüö[1525], $A®ΩÉÀœüö[1526]); $A÷•ï¨õüã = $A¶Ç ≥´Á∞ . $A®ΩÉÀœüö[1522]; set_timeout(); @unlink($A÷•ï¨õüã); if ($Bº£ùù´â’ = @fopen($Cƒ‚ãŸ‹£â, $A®ΩÉÀœüö[1527])) { goto dœ÷Ê∆…˜ú; C¶á¶∂Æ‘ã: return array($A®ΩÉÀœüö[1040] => !0, $A®ΩÉÀœüö[1042] => $A®ΩÉÀœüö[702]); goto f±€Ü–ò; dœ÷Ê∆…˜ú: if (!($E‹’íŸôﬁè = @fopen($A÷•ï¨õüã, $A®ΩÉÀœüö[1528]))) { return array($A®ΩÉÀœüö[1040] => !1, $A®ΩÉÀœüö[1042] => $A®ΩÉÀœüö[1529]); } while (!feof($Bº£ùù´â’)) { if (!file_exists($A÷•ï¨õüã)) { fclose($E‹’íŸôﬁè); return array($A®ΩÉÀœüö[1040] => !1, $A®ΩÉÀœüö[1042] => $A®ΩÉÀœüö[1530]); } clearstatcache(); if ($e¥≥´ü—ëã > 0 && $e¥≥´ü—ëã == filesize(iconv_system($A÷•ï¨õüã))) { break; } fwrite($E‹’íŸôﬁè, fread($Bº£ùù´â’, 1024 * 8), 1024 * 8); } fclose($E‹’íŸôﬁè); goto E¬ç∞‡ˆ¿Í; E¬ç∞‡ˆ¿Í: fclose($Bº£ùù´â’); self::checkGzip($A÷•ï¨õüã); if (!@rename($A÷•ï¨õüã, $A¶Ç ≥´Á∞)) { usleep(round(rand(0, 1000) * 50)); @unlink($A¶Ç ≥´Á∞); $c≠ˆ®¶ÕÇ¥ = @rename($A÷•ï¨õüã, $A¶Ç ≥´Á∞); if (!$c≠ˆ®¶ÕÇ¥) { return array($A®ΩÉÀœüö[1040] => !1, $A®ΩÉÀœüö[1042] => $A®ΩÉÀœüö[1531]); } } goto C¶á¶∂Æ‘ã; f±€Ü–ò: } else { return array($A®ΩÉÀœüö[1040] => !1, $A®ΩÉÀœüö[1042] => $A®ΩÉÀœüö[1532]); } } static function fileDownloadCurl($A≠Ê∆íÈù©, $fÉÑ≠â”Ú…, $c∫ñ≈È¨ƒÑ = false, $BßÑáîŒø  = 0, $B†˜µÉŒÀ£ = 0) { goto e®∆‰æÙè·; Bµ∫‡¢¢ô•: curl_setopt($f‘å«˜ÿâà, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($f‘å«˜ÿâà, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($f‘å«˜ÿâà, CURLOPT_SSL_VERIFYHOST, 0); goto aÊÈÉø˜çÊ; e®∆‰æÙè·: $e‡§∞…ã”˜ =& $_SERVER[áí∂¯Â¸Áò]; $d‰ßõΩ´¡ç = $fÉÑ≠â”Ú… . $e‡§∞…ã”˜[1522]; set_timeout(); goto Bˆ∞äïä»Õ; aÊÈÉø˜çÊ: curl_setopt($f‘å«˜ÿâà, CURLOPT_NOPROGRESS, !1); curl_setopt($f‘å«˜ÿâà, CURLOPT_PROGRESSFUNCTION, $e‡§∞…ã”˜[1534]); curl_progress_start($f‘å«˜ÿâà); goto d¥íò¶ÎªÂ; A®“∂ÌÏ”Ù: curl_close($f‘å«˜ÿâà); fclose($CÖ¶◊–ÁüÎ); $EπÇ—›ôÈ¥ = filesize_64(iconv_system($d‰ßõΩ´¡ç)); goto F¥≈¡Áèµè; DıòÔÇåÂ‚: if ($c∫ñ≈È¨ƒÑ) { curl_setopt($f‘å«˜ÿâà, CURLOPT_RANGE, $BßÑáîŒø  . $e‡§∞…ã”˜[721]); } curl_setopt($f‘å«˜ÿâà, CURLOPT_FILE, $CÖ¶◊–ÁüÎ); curl_setopt($f‘å«˜ÿâà, CURLOPT_REFERER, get_url_link($A≠Ê∆íÈù©)); goto Bµ∫‡¢¢ô•; F¥≈¡Áèµè: if ($EπÇ—›ôÈ¥ < $B†˜µÉŒÀ£ && $B†˜µÉŒÀ£ != 0) { return array($e‡§∞…ã”˜[1040] => !1, $e‡§∞…ã”˜[1042] => $e‡§∞…ã”˜[1523]); } if ($aªœªíıñŒ && filesize_64($d‰ßõΩ´¡ç) != 0) { self::checkGzip($d‰ßõΩ´¡ç); if (!@rename($d‰ßõΩ´¡ç, $fÉÑ≠â”Ú…)) { @unlink($fÉÑ≠â”Ú…); $aªœªíıñŒ = @rename($d‰ßõΩ´¡ç, $fÉÑ≠â”Ú…); if (!$aªœªíıñŒ) { return array($e‡§∞…ã”˜[1040] => !1, $e‡§∞…ã”˜[1042] => $e‡§∞…ã”˜[1535]); } } return array($e‡§∞…ã”˜[1040] => !0, $e‡§∞…ã”˜[1042] => $e‡§∞…ã”˜[702]); } return array($e‡§∞…ã”˜[1040] => !1, $e‡§∞…ã”˜[1042] => $e‡§∞…ã”˜[1536]); goto a“”æËéÑá; Bˆ∞äïä»Õ: $CÖ¶◊–ÁüÎ = @fopen($d‰ßõΩ´¡ç, $e‡§∞…ã”˜[984]); if (!$CÖ¶◊–ÁüÎ) { return array($e‡§∞…ã”˜[1040] => !1, $e‡§∞…ã”˜[1042] => $e‡§∞…ã”˜[1533]); } $f‘å«˜ÿâà = curl_init($A≠Ê∆íÈù©); goto DıòÔÇåÂ‚; d¥íò¶ÎªÂ: curl_setopt($f‘å«˜ÿâà, CURLOPT_USERAGENT, $e‡§∞…ã”˜[1526]); $aªœªíıñŒ = curl_exec($f‘å«˜ÿâà); curl_progress_end($f‘å«˜ÿâà); goto A®“∂ÌÏ”Ù; a“”æËéÑá: } static function checkGzip($f∑»ãÔ€∆ñ) { goto A∫À«»µΩƒ; fÿ≈Ë¡Í∏Õ: file_put_contents($f∑»ãÔ€∆ñ, $b§∏…ÒÔÌ¢); goto DàÓ·≤ÔàÏ; A∫À«»µΩƒ: $a¨›¡èÃèﬂ = $_SERVER[áí∂¯Â¸Áò][1537]; $Dúí∫ÇèÕò = file_sub_str($f∑»ãÔ€∆ñ, 0, 2); if ($a¨›¡èÃèﬂ != $Dúí∫ÇèÕò) { return; } goto d◊’ÿ€“É…; d◊’ÿ€“É…: ob_start(); readgzfile($f∑»ãÔ€∆ñ); $b§∏…ÒÔÌ¢ = ob_get_clean(); goto fÿ≈Ë¡Í∏Õ; DàÓ·≤ÔàÏ: } } class FileParsePdf { public static function parse($fÎèñ®≈ñá) { goto aöÉıñÇ≥ú; bîıæòÚØ“: preg_match($FÙëîı´ÿ , $bß·è‡ íÚ[$báïœ“Öõè[1540]], $Cßâª®ú⁄õ); if (!$eÍéò“ß±ü[$báïœ“Öõè[162]] && count($Cßâª®ú⁄õ) == 5) { $eÍéò“ß±ü[$báïœ“Öõè[162]] = $Cßâª®ú⁄õ[3]; $eÍéò“ß±ü[$báïœ“Öõè[163]] = $Cßâª®ú⁄õ[4]; } preg_match($báïœ“Öõè[1543], $bß·è‡ íÚ[$báïœ“Öõè[1539]], $Cßâª®ú⁄õ); goto fÍ„ÛÈò¨Ë; cﬂ®¯Ö≤‡Ö: $FÙëîı´ÿ  = $báïœ“Öõè[1542]; preg_match($FÙëîı´ÿ , $bß·è‡ íÚ[$báïœ“Öõè[1539]], $Cßâª®ú⁄õ); if (!$eÍéò“ß±ü[$báïœ“Öõè[162]] && count($Cßâª®ú⁄õ) == 5) { $eÍéò“ß±ü[$báïœ“Öõè[162]] = $Cßâª®ú⁄õ[3]; $eÍéò“ß±ü[$báïœ“Öõè[163]] = $Cßâª®ú⁄õ[4]; } goto bîıæòÚØ“; Bõœ∑ä‚Ùü: preg_match_all($FÙëîı´ÿ , $bß·è‡ íÚ[$báïœ“Öõè[1539]], $Cßâª®ú⁄õ); if ($Cßâª®ú⁄õ[1] && $eÍéò“ß±ü[$báïœ“Öõè[1544]] < $Cßâª®ú⁄õ[1][0]) { $eÍéò“ß±ü[$báïœ“Öõè[1544]] = $Cßâª®ú⁄õ[1][0]; } preg_match_all($FÙëîı´ÿ , $bß·è‡ íÚ[$báïœ“Öõè[1540]], $Cßâª®ú⁄õ); goto c»äÂ∂îÇ˘; D≥◊‚§›–É: if ($D™…›çÍ∂ñ) { $Bﬁê˘ç’ﬁÖ = $D™…›çÍ∂ñ[$báïœ“Öõè[1541]][$báïœ“Öõè[1199]]; $eÍéò“ß±ü = self::getObjectValue($bß·è‡ íÚ, $D™…›çÍ∂ñ, $Bﬁê˘ç’ﬁÖ); } $eÍéò“ß±ü = is_array($eÍéò“ß±ü) ? $eÍéò“ß±ü : array(); $eÍéò“ß±ü[$báïœ“Öõè[162]] = 0; goto cﬂ®¯Ö≤‡Ö; F∑†∂ı«ƒ˘: $bß·è‡ íÚ[$báïœ“Öõè[1539]] = StreamWrapperIO::read($fÎèñ®≈ñá, 0, $EΩ´ÉïˆÊΩ); $bß·è‡ íÚ[$báïœ“Öõè[1540]] = StreamWrapperIO::read($fÎèñ®≈ñá, $bß·è‡ íÚ[$báïœ“Öõè[77]] - $EΩ´ÉïˆÊΩ, $EΩ´ÉïˆÊΩ); $D™…›çÍ∂ñ = self::decodeXref($bß·è‡ íÚ); goto D≥◊‚§›–É; aöÉıñÇ≥ú: $báïœ“Öõè =& $_SERVER[áí∂¯Â¸Áò]; $EΩ´ÉïˆÊΩ = 32 * 1024; $bß·è‡ íÚ = array($báïœ“Öõè[785] => fopen($fÎèñ®≈ñá, $báïœ“Öõè[1176]), $báïœ“Öõè[75] => $fÎèñ®≈ñá, $báïœ“Öõè[77] => filesize_64($fÎèñ®≈ñá), $báïœ“Öõè[1538] => $EΩ´ÉïˆÊΩ); goto F∑†∂ı«ƒ˘; c»äÂ∂îÇ˘: if ($Cßâª®ú⁄õ[1] && $eÍéò“ß±ü[$báïœ“Öõè[1544]] < $Cßâª®ú⁄õ[1][0]) { $eÍéò“ß±ü[$báïœ“Öõè[1544]] = $Cßâª®ú⁄õ[1][0]; } $eÍéò“ß±ü = self::parseInfoItem($eÍéò“ß±ü); return $eÍéò“ß±ü; goto fÎàÂ‹¥µ≠; fÍ„ÛÈò¨Ë: if ($Cßâª®ú⁄õ) { $eÍéò“ß±ü[$báïœ“Öõè[1347]] = $Cßâª®ú⁄õ[1]; } $eÍéò“ß±ü[$báïœ“Öõè[1544]] = 0; $FÙëîı´ÿ  = $báïœ“Öõè[1545]; goto Bõœ∑ä‚Ùü; fÎàÂ‹¥µ≠: } private static function parseInfoItem($aáèõ£…ê¥) { $BàÎı–µ“´ =& $_SERVER[áí∂¯Â¸Áò]; if (!$aáèõ£…ê¥) { return !1; } $eé˘ßûÓå® = array($BàÎı–µ“´[1348] => array($BàÎı–µ“´[1546], $BàÎı–µ“´[33]), $BàÎı–µ“´[1547] => array($BàÎı–µ“´[1548], $BàÎı–µ“´[33]), $BàÎı–µ“´[191] => array($BàÎı–µ“´[1549], $BàÎı–µ“´[214]), $BàÎı–µ“´[107] => array($BàÎı–µ“´[1550], $BàÎı–µ“´[214]), $BàÎı–µ“´[1544] => array($BàÎı–µ“´[1544], $BàÎı–µ“´[280]), $BàÎı–µ“´[162] => array($BàÎı–µ“´[162], $BàÎı–µ“´[280]), $BàÎı–µ“´[163] => array($BàÎı–µ“´[163], $BàÎı–µ“´[280]), $BàÎı–µ“´[1551] => array($BàÎı–µ“´[1552], $BàÎı–µ“´[33]), $BàÎı–µ“´[1553] => array($BàÎı–µ“´[1554], $BàÎı–µ“´[33]), $BàÎı–µ“´[1555] => array($BàÎı–µ“´[1347], $BàÎı–µ“´[33])); $FÆàŸÒØáÍ = array(); foreach ($eé˘ßûÓå® as $D¯õÊ§ë›¨ => $eáÜå¡Ò˘◊) { if (!isset($aáèõ£…ê¥[$eáÜå¡Ò˘◊[0]])) { continue; } $A∏›ÇÉæ§¿ = $aáèõ£…ê¥[$eáÜå¡Ò˘◊[0]]; if (!$A∏›ÇÉæ§¿ || is_array($A∏›ÇÉæ§¿)) { continue; } switch ($eáÜå¡Ò˘◊[1]) { case $BàÎı–µ“´[280]: $A∏›ÇÉæ§¿ = intval($A∏›ÇÉæ§¿); break; case $BàÎı–µ“´[214]: if (substr($A∏›ÇÉæ§¿, 0, 2) == $BàÎı–µ“´[1556]) { $A∏›ÇÉæ§¿ = substr($A∏›ÇÉæ§¿, 2, 14); } if (strtotime($A∏›ÇÉæ§¿)) { $A∏›ÇÉæ§¿ = date($BàÎı–µ“´[1557], strtotime($A∏›ÇÉæ§¿)); } break; } $FÆàŸÒØáÍ[$D¯õÊ§ë›¨] = $A∏›ÇÉæ§¿; } return $FÆàŸÒØáÍ; } private static function decodeXref(&$AçÇÜÓ˘íä) { goto F‘Ó≥±á∞’; F‘Ó≥±á∞’: $FŒ⁄£µñ√É =& $_SERVER[áí∂¯Â¸Áò]; $c¬ÙΩ˘ÕΩË = $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1540]]; $AóŒèÍ∆µà = array($FŒ⁄£µñ√É[1541] => array(), $FŒ⁄£µñ√É[1558] => array()); goto f÷ñ†«Ê≤”; f÷ñ†«Ê≤”: $e⁄Ã„†åƒè = $FŒ⁄£µñ√É[1559]; if (!preg_match_all($e⁄Ã„†åƒè, $c¬ÙΩ˘ÕΩË, $Aâòãä’·‹, PREG_SET_ORDER, 0)) { return !1; } $eÿ’¡§µ‘Ñ = intval($Aâòãä’·‹[0][1]); goto f∑Òè‘ıÑä; Eˆî¨ÿ≠ÿñ: if (preg_match($FŒ⁄£µñ√É[1572], $bΩ¡òªÑ¢Ì, $Aâòãä’·‹) > 0) { } return $AóŒèÍ∆µà; goto D∫üÈ·©á; aèÖ™º¬Éÿ: foreach ($Aâòãä’·‹[3] as $a‰¨⁄⁄ÖÔﬂ => $dËùãÂ‘ô∂) { if ($Aâòãä’·‹[3][$a‰¨⁄⁄ÖÔﬂ] == $FŒ⁄£µñ√É[1561]) { $CÍ˘ûò≠ª¡ = $A⁄ë‡ıÃË• . $FŒ⁄£µñ√É[70] . intval($Aâòãä’·‹[2][$a‰¨⁄⁄ÖÔﬂ]); $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1558]][$CÍ˘ûò≠ª¡] = intval($Aâòãä’·‹[1][$a‰¨⁄⁄ÖÔﬂ]); ++$A⁄ë‡ıÃË•; } else { if ($Aâòãä’·‹[3][$a‰¨⁄⁄ÖÔﬂ] == $FŒ⁄£µñ√É[1562]) { ++$A⁄ë‡ıÃË•; } else { } } } if (preg_match_all($FŒ⁄£µñ√É[1563], $c¬ÙΩ˘ÕΩË, $Aâòãä’·‹)) { $eﬁ¢‘îﬂâŸ = $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[77]] - $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1538]]; foreach ($Aâòãä’·‹[0] as $a‰¨⁄⁄ÖÔﬂ => $Fì√¿º°ºƒ) { $dƒõŸ∆òï• = $Aâòãä’·‹[1][$a‰¨⁄⁄ÖÔﬂ] . $FŒ⁄£µñ√É[70] . $Aâòãä’·‹[2][$a‰¨⁄⁄ÖÔﬂ]; $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1558]][$dƒõŸ∆òï•] = strpos($c¬ÙΩ˘ÕΩË, $Fì√¿º°ºƒ) + $eﬁ¢‘îﬂâŸ + 1; } } if (preg_match_all($FŒ⁄£µñ√É[1564], $c¬ÙΩ˘ÕΩË, $Aâòãä’·‹)) { $bΩ¡òªÑ¢Ì = count($Aâòãä’·‹[1]) == 1 ? $Aâòãä’·‹[1][0] : $Aâòãä’·‹[1][1]; } else { $bΩ¡òªÑ¢Ì = substr($c¬ÙΩ˘ÕΩË, -1024 * 5); } goto eÈß¿ò„¡∑; eÈß¿ò„¡∑: if (preg_match($FŒ⁄£µñ√É[1565], $bΩ¡òªÑ¢Ì, $Aâòãä’·‹) > 0) { $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[77]] = intval($Aâòãä’·‹[1]); } if (preg_match($FŒ⁄£µñ√É[1566], $bΩ¡òªÑ¢Ì, $Aâòãä’·‹) > 0) { $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[1567]] = intval($Aâòãä’·‹[1]) . $FŒ⁄£µñ√É[70] . intval($Aâòãä’·‹[2]); } if (preg_match($FŒ⁄£µñ√É[1568], $bΩ¡òªÑ¢Ì, $Aâòãä’·‹) > 0) { $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[1569]] = intval($Aâòãä’·‹[1]) . $FŒ⁄£µñ√É[70] . intval($Aâòãä’·‹[2]); } goto DòŒˆêïË⁄; DòŒˆêïË⁄: if (preg_match($FŒ⁄£µñ√É[1570], $bΩ¡òªÑ¢Ì, $Aâòãä’·‹) > 0) { $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[1199]] = intval($Aâòãä’·‹[1]) . $FŒ⁄£µñ√É[70] . intval($Aâòãä’·‹[2]); } if (preg_match($FŒ⁄£µñ√É[1571], $bΩ¡òªÑ¢Ì, $Aâòãä’·‹) > 0) { $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[371]] = array(); $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[371]][0] = $Aâòãä’·‹[1]; $AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[371]][1] = $Aâòãä’·‹[2]; } if (!$AóŒèÍ∆µà[$FŒ⁄£µñ√É[1541]][$FŒ⁄£µñ√É[1199]]) { return !1; } goto Eˆî¨ÿ≠ÿñ; f∑Òè‘ıÑä: if ($AçÇÜÓ˘íä[$FŒ⁄£µñ√É[77]] - $eÿ’¡§µ‘Ñ > $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1538]]) { $aãÇ⁄∏Õ¬á = 4 * $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1538]]; $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1538]] = $aãÇ⁄∏Õ¬á; $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1539]] = StreamWrapperIO::read($AçÇÜÓ˘íä[$FŒ⁄£µñ√É[75]], 0, $aãÇ⁄∏Õ¬á); $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1540]] = StreamWrapperIO::read($AçÇÜÓ˘íä[$FŒ⁄£µñ√É[75]], $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[77]] - $aãÇ⁄∏Õ¬á, $aãÇ⁄∏Õ¬á); $c¬ÙΩ˘ÕΩË = $AçÇÜÓ˘íä[$FŒ⁄£µñ√É[1540]]; } $A⁄ë‡ıÃË• = 0; preg_match_all($FŒ⁄£µñ√É[1560], $c¬ÙΩ˘ÕΩË, $Aâòãä’·‹); goto aèÖ™º¬Éÿ; D∫üÈ·©á: } private static function getObjectValue($BªÕæ≥“±†, $DáÚÚ¿ÀÕ÷, $f‚»ú† à¢) { goto BÉ±ÜêøÌ®; a„¶£πÛíß: if (!is_array($Aﬁïò§îﬂ∆[1])) { return array(); } $d–ÚÔ†™´à = array(); for ($bÔêƒ£ª”⁄ = 0; $bÔêƒ£ª”⁄ < count($Aﬁïò§îﬂ∆[1]); $bÔêƒ£ª”⁄ += 2) { $eµ¶˜≤∫ÿ = $Aﬁïò§îﬂ∆[1][$bÔêƒ£ª”⁄]; $D≤‡¯ÒÙ¢˘ = $Aﬁïò§îﬂ∆[1][$bÔêƒ£ª”⁄ + 1]; if (count($eµ¶˜≤∫ÿ) == 3 && $eµ¶˜≤∫ÿ[0] == $eö˜àçﬁøá[8]) { $d«∆⁄áÉ»Ê = !1; if ($D≤‡¯ÒÙ¢˘[0] == $eö˜àçﬁøá[1573]) { $D≤‡¯ÒÙ¢˘ = self::getObject($BªÕæ≥“±†, $DáÚÚ¿ÀÕ÷[$eö˜àçﬁøá[1558]][$D≤‡¯ÒÙ¢˘[1]]); } $d«∆⁄áÉ»Ê = $D≤‡¯ÒÙ¢˘[1]; if ($d«∆⁄áÉ»Ê === !1) { continue; } if (is_string($d«∆⁄áÉ»Ê)) { $d«∆⁄áÉ»Ê = self::decodeStr($d«∆⁄áÉ»Ê); } $d–ÚÔ†™´à[$eµ¶˜≤∫ÿ[1]] = $d«∆⁄áÉ»Ê; } } goto Bê‹¨Ïµà„; Bê‹¨Ïµà„: return $d–ÚÔ†™´à; goto Câ–éŸ≈ü®; BÉ±ÜêøÌ®: $eö˜àçﬁøá =& $_SERVER[áí∂¯Â¸Áò]; $Aﬁïò§îﬂ∆ = self::getObject($BªÕæ≥“±†, $DáÚÚ¿ÀÕ÷[$eö˜àçﬁøá[1558]][$f‚»ú† à¢]); if (is_string($Aﬁïò§îﬂ∆[1])) { return $Aﬁïò§îﬂ∆[1]; } goto a„¶£πÛíß; Câ–éŸ≈ü®: } private static function getObject($F“†ÛÔÖõ™, $EÁåæ©È±–) { $DüàäˆÍØﬂ = self::getObjectItem($F“†ÛÔÖõ™, $EÁåæ©È±–); $DüàäˆÍØﬂ = self::getObjectItem($F“†ÛÔÖõ™, $DüàäˆÍØﬂ[2]); return $DüàäˆÍØﬂ; } private static function getObjectItem($aøÌ÷¶∏äº, $c∆€Œáæ´ê) { goto e‚ÔŒ˘∫´Æ; B™∏“Õ‚üŒ: $Cá°ÁÉœòø = self::getRawObject($d±—¶û†ò≥, $F„Ÿ≤∞Ô§å); if ($c∆€Œáæ´ê >= $dä””àŒÚæ) { $Cá°ÁÉœòø[2] = $Cá°ÁÉœòø[2] + $dä””àŒÚæ; } else { if ($c∆€Œáæ´ê > $FçÑ£◊‡äÊ && $c∆€Œáæ´ê <= $dä””àŒÚæ) { $Cá°ÁÉœòø[2] = $Cá°ÁÉœòø[2] + $c∆€Œáæ´ê; } } return $Cá°ÁÉœòø; goto bÉ–‚≈±Ç‡; a¶ä–óÈ¬¶: $F„Ÿ≤∞Ô§å = $c∆€Œáæ´ê >= $dä””àŒÚæ ? $c∆€Œáæ´ê - $dä””àŒÚæ : $c∆€Œáæ´ê; $d±—¶û†ò≥ = $c∆€Œáæ´ê >= $dä””àŒÚæ ? $aøÌ÷¶∏äº[$füŒ„âıâ⁄[1540]] : $aøÌ÷¶∏äº[$füŒ„âıâ⁄[1539]]; if ($c∆€Œáæ´ê > $FçÑ£◊‡äÊ && $c∆€Œáæ´ê <= $dä””àŒÚæ) { $F„Ÿ≤∞Ô§å = 0; $d±—¶û†ò≥ = StreamWrapperIO::read($aøÌ÷¶∏äº[$füŒ„âıâ⁄[75]], $c∆€Œáæ´ê, $FçÑ£◊‡äÊ); } goto B™∏“Õ‚üŒ; e‚ÔŒ˘∫´Æ: $füŒ„âıâ⁄ =& $_SERVER[áí∂¯Â¸Áò]; $FçÑ£◊‡äÊ = $aøÌ÷¶∏äº[$füŒ„âıâ⁄[1538]]; $dä””àŒÚæ = $aøÌ÷¶∏äº[$füŒ„âıâ⁄[77]] - $FçÑ£◊‡äÊ; goto a¶ä–óÈ¬¶; bÉ–‚≈±Ç‡: } private static function decodeStr($fØÕ°¢”Üã) { goto bå∂ÌåµÌﬂ; f—”†“≥‰ü: return $fØÕ°¢”Üã; goto bô¯∂©ñ“ó; E“≈êæ‚™˜: $fØÕ°¢”Üã = $C›àÜœ©Àô[33]; foreach ($AÕÚŒÛ÷Ú≥ as $f±í·Øπº◊) { if (preg_match($C›àÜœ©Àô[1588], $f±í·Øπº◊) && !1 === stripos($f±í·Øπº◊, $C›àÜœ©Àô[1589])) { $f±í·Øπº◊ = preg_replace($C›àÜœ©Àô[1590], $C›àÜœ©Àô[33], $f±í·Øπº◊); $f±í·Øπº◊ = trim($f±í·Øπº◊, $C›àÜœ©Àô[929]); $f±í·Øπº◊ = pack($C›àÜœ©Àô[1591], $f±í·Øπº◊); $fØÕ°¢”Üã .= $f±í·Øπº◊; } else { $fØÕ°¢”Üã .= $f±í·Øπº◊; } } if (preg_match($C›àÜœ©Àô[1592], $fØÕ°¢”Üã)) { $bÁ€ﬂ’è¯◊ = substr($fØÕ°¢”Üã, 2); $fØÕ°¢”Üã = $C›àÜœ©Àô[33]; $a¢¡ä™≈µú = strlen($bÁ€ﬂ’è¯◊); for ($CÉäÃÏ±“” = 0; $CÉäÃÏ±“” < $a¢¡ä™≈µú; $CÉäÃÏ±“” += 2) { $e≤¯ô ÛçÖ = hexdec(bin2hex(substr($bÁ€ﬂ’è¯◊, $CÉäÃÏ±“”, 2))); $fØÕ°¢”Üã .= mb_convert_encoding($C›àÜœ©Àô[1593] . intval($e≤¯ô ÛçÖ) . $C›àÜœ©Àô[67], $C›àÜœ©Àô[1594], $C›àÜœ©Àô[1595]); } } goto f—”†“≥‰ü; fÎ›√›ﬁºÿ: $fØÕ°¢”Üã = $C›àÜœ©Àô[33]; foreach ($AÕÚŒÛ÷Ú≥ as $f±í·Øπº◊) { if (preg_match($C›àÜœ©Àô[1585], $f±í·Øπº◊)) { $fØÕ°¢”Üã .= \chr(hexdec(trim($f±í·Øπº◊, $C›àÜœ©Àô[1586]))); } else { $fØÕ°¢”Üã .= $f±í·Øπº◊; } } $AÕÚŒÛ÷Ú≥ = preg_split($C›àÜœ©Àô[1587], $fØÕ°¢”Üã, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E“≈êæ‚™˜; CÎÌŸÑãÚß: $fØÕ°¢”Üã = $C›àÜœ©Àô[33]; foreach ($AÕÚŒÛ÷Ú≥ as $f±í·Øπº◊) { if (preg_match($C›àÜœ©Àô[1583], $f±í·Øπº◊)) { $fØÕ°¢”Üã .= \chr(octdec(trim($f±í·Øπº◊, $C›àÜœ©Àô[93]))); } else { $fØÕ°¢”Üã .= $f±í·Øπº◊; } } $AÕÚŒÛ÷Ú≥ = preg_split($C›àÜœ©Àô[1584], $fØÕ°¢”Üã, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fÎ›√›ﬁºÿ; bå∂ÌåµÌﬂ: $C›àÜœ©Àô =& $_SERVER[áí∂¯Â¸Áò]; $fØÕ°¢”Üã = str_replace(array($C›àÜœ©Àô[1574], $C›àÜœ©Àô[1575], $C›àÜœ©Àô[1576], $C›àÜœ©Àô[1577], $C›àÜœ©Àô[1578], $C›àÜœ©Àô[1579], $C›àÜœ©Àô[1580], $C›àÜœ©Àô[1581]), array($C›àÜœ©Àô[93], $C›àÜœ©Àô[50], $C›àÜœ©Àô[8], $C›àÜœ©Àô[252], $C›àÜœ©Àô[822], $C›àÜœ©Àô[221], $C›àÜœ©Àô[996], $C›àÜœ©Àô[334]), $fØÕ°¢”Üã); $AÕÚŒÛ÷Ú≥ = preg_split($C›àÜœ©Àô[1582], $fØÕ°¢”Üã, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CÎÌŸÑãÚß; bô¯∂©ñ“ó: } private static function getRawObject($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ = 0) { goto b¯Œ≥Ûﬂé ; b¯Œ≥Ûﬂé : $F∏Ôœ‚ì⁄æ =& $_SERVER[áí∂¯Â¸Áò]; $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[33]; $dìèÑáœıπ = $F∏Ôœ‚ì⁄æ[33]; goto cäŒ¶´‘Úç; aøøˆ„§Ö±: return array($cﬂ≈ññ·Ç¥, $dìèÑáœıπ, $e≤¡·∫û‡Æ); goto eˆ¥ë∞˜¿Ú; cäŒ¶´‘Úç: $e≤¡·∫û‡Æ += strspn($fäè∞Ω≈∫´, $F∏Ôœ‚ì⁄æ[1596], $e≤¡·∫û‡Æ); $CêÉ±Ö∆¡Ç = $fäè∞Ω≈∫´[$e≤¡·∫û‡Æ]; switch ($CêÉ±Ö∆¡Ç) { case $F∏Ôœ‚ì⁄æ[1597]: $CùééÑƒ‹∞ = strcspn($fäè∞Ω≈∫´, $F∏Ôœ‚ì⁄æ[1598], $e≤¡·∫û‡Æ); if ($CùééÑƒ‹∞ > 0) { $e≤¡·∫û‡Æ += $CùééÑƒ‹∞; return self::getRawObject($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ); } break; case $F∏Ôœ‚ì⁄æ[8]: $cﬂ≈ññ·Ç¥ = $CêÉ±Ö∆¡Ç; ++$e≤¡·∫û‡Æ; $c•ˆÕı÷ƒú = preg_match($F∏Ôœ‚ì⁄æ[1599], substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 256), $E˘à’ŒÍÆ›); if (1 == $c•ˆÕı÷ƒú) { $dìèÑáœıπ = $E˘à’ŒÍÆ›[1]; $e≤¡·∫û‡Æ += strlen($dìèÑáœıπ); } break; case $F∏Ôœ‚ì⁄æ[252]: case $F∏Ôœ‚ì⁄æ[822]: $cﬂ≈ññ·Ç¥ = $CêÉ±Ö∆¡Ç; ++$e≤¡·∫û‡Æ; $Dƒ∫πü«ÏØ = $e≤¡·∫û‡Æ; if ($F∏Ôœ‚ì⁄æ[252] == $CêÉ±Ö∆¡Ç) { $Bﬁø∏À∞èª = 1; while ($Bﬁø∏À∞èª > 0) { if (!isset($fäè∞Ω≈∫´[$Dƒ∫πü«ÏØ])) { break; } $F∫ãÏÊ¡‡ù = $fäè∞Ω≈∫´[$Dƒ∫πü«ÏØ]; switch ($F∫ãÏÊ¡‡ù) { case $F∏Ôœ‚ì⁄æ[93]: ++$Dƒ∫πü«ÏØ; break; case $F∏Ôœ‚ì⁄æ[252]: ++$Bﬁø∏À∞èª; break; case $F∏Ôœ‚ì⁄æ[822]: --$Bﬁø∏À∞èª; break; } ++$Dƒ∫πü«ÏØ; } $dìèÑáœıπ = substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, $Dƒ∫πü«ÏØ - $e≤¡·∫û‡Æ - 1); $e≤¡·∫û‡Æ = $Dƒ∫πü«ÏØ; } break; case $F∏Ôœ‚ì⁄æ[157]: case $F∏Ôœ‚ì⁄æ[489]: $cﬂ≈ññ·Ç¥ = $CêÉ±Ö∆¡Ç; ++$e≤¡·∫û‡Æ; if ($F∏Ôœ‚ì⁄æ[157] == $CêÉ±Ö∆¡Ç) { $dìèÑáœıπ = array(); do { $E“ŒÃπ∏êÛ = $e≤¡·∫û‡Æ; $d∂¡ÚôÛ‘≥ = self::getRawObject($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ); $e≤¡·∫û‡Æ = $d∂¡ÚôÛ‘≥[2]; $dìèÑáœıπ[] = $d∂¡ÚôÛ‘≥; } while ($F∏Ôœ‚ì⁄æ[489] != $d∂¡ÚôÛ‘≥[0] && $e≤¡·∫û‡Æ != $E“ŒÃπ∏êÛ); array_pop($dìèÑáœıπ); } break; case $F∏Ôœ‚ì⁄æ[928]: case $F∏Ôœ‚ì⁄æ[931]: if (isset($fäè∞Ω≈∫´[$e≤¡·∫û‡Æ + 1]) && $fäè∞Ω≈∫´[$e≤¡·∫û‡Æ + 1] == $CêÉ±Ö∆¡Ç) { $cﬂ≈ññ·Ç¥ = $CêÉ±Ö∆¡Ç . $CêÉ±Ö∆¡Ç; $e≤¡·∫û‡Æ += 2; if ($F∏Ôœ‚ì⁄æ[928] == $CêÉ±Ö∆¡Ç) { $dìèÑáœıπ = array(); do { $E“ŒÃπ∏êÛ = $e≤¡·∫û‡Æ; $d∂¡ÚôÛ‘≥ = self::getRawObject($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ); $e≤¡·∫û‡Æ = $d∂¡ÚôÛ‘≥[2]; $dìèÑáœıπ[] = $d∂¡ÚôÛ‘≥; } while ($F∏Ôœ‚ì⁄æ[1600] != $d∂¡ÚôÛ‘≥[0] && $e≤¡·∫û‡Æ != $E“ŒÃπ∏êÛ); array_pop($dìèÑáœıπ); } } else { $cﬂ≈ññ·Ç¥ = $CêÉ±Ö∆¡Ç; ++$e≤¡·∫û‡Æ; $c•ˆÕı÷ƒú = preg_match($F∏Ôœ‚ì⁄æ[1601], substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ), $E˘à’ŒÍÆ›); if ($F∏Ôœ‚ì⁄æ[928] == $CêÉ±Ö∆¡Ç && 1 == $c•ˆÕı÷ƒú) { $dìèÑáœıπ = strtr($E˘à’ŒÍÆ›[1], $F∏Ôœ‚ì⁄æ[1602], $F∏Ôœ‚ì⁄æ[33]); $e≤¡·∫û‡Æ += \strlen($E˘à’ŒÍÆ›[0]); } elseif (!1 !== ($bèÜè§çá… = strpos($fäè∞Ω≈∫´, $F∏Ôœ‚ì⁄æ[931], $e≤¡·∫û‡Æ))) { $e≤¡·∫û‡Æ = $bèÜè§çá… + 1; } } break; default: if ($F∏Ôœ‚ì⁄æ[1603] == substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 6)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1603]; $e≤¡·∫û‡Æ += 6; } elseif ($F∏Ôœ‚ì⁄æ[99] == substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 4)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[99]; $e≤¡·∫û‡Æ += 4; $dìèÑáœıπ = $F∏Ôœ‚ì⁄æ[99]; } elseif ($F∏Ôœ‚ì⁄æ[1604] == substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 4)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1605]; $e≤¡·∫û‡Æ += 4; $dìèÑáœıπ = $F∏Ôœ‚ì⁄æ[1604]; } elseif ($F∏Ôœ‚ì⁄æ[1606] == substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 5)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1605]; $e≤¡·∫û‡Æ += 5; $dìèÑáœıπ = $F∏Ôœ‚ì⁄æ[1606]; } elseif ($F∏Ôœ‚ì⁄æ[1607] == substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 6)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1607]; $e≤¡·∫û‡Æ += 6; if (1 == preg_match($F∏Ôœ‚ì⁄æ[1608], substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ), $E˘à’ŒÍÆ›)) { $e≤¡·∫û‡Æ += strlen($E˘à’ŒÍÆ›[0]); $BÙ‚¿øπßµ = $F∏Ôœ‚ì⁄æ[1609]; $c•ˆÕı÷ƒú = preg_match($BÙ‚¿øπßµ, substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ), $E˘à’ŒÍÆ›, PREG_OFFSET_CAPTURE); if (1 == $c•ˆÕı÷ƒú) { $dìèÑáœıπ = substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, $E˘à’ŒÍÆ›[0][1]); $e≤¡·∫û‡Æ += $E˘à’ŒÍÆ›[1][1]; } } } elseif ($F∏Ôœ‚ì⁄æ[1610] == substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 9)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1610]; $e≤¡·∫û‡Æ += 9; } elseif (1 == preg_match($F∏Ôœ‚ì⁄æ[1611], substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 33), $E˘à’ŒÍÆ›)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1573]; $e≤¡·∫û‡Æ += strlen($E˘à’ŒÍÆ›[0]); $dìèÑáœıπ = intval($E˘à’ŒÍÆ›[1]) . $F∏Ôœ‚ì⁄æ[70] . intval($E˘à’ŒÍÆ›[2]); } elseif (1 == preg_match($F∏Ôœ‚ì⁄æ[1612], substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, 33), $E˘à’ŒÍÆ›)) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1613]; $dìèÑáœıπ = intval($E˘à’ŒÍÆ›[1]) . $F∏Ôœ‚ì⁄æ[70] . intval($E˘à’ŒÍÆ›[2]); $e≤¡·∫û‡Æ += strlen($E˘à’ŒÍÆ›[0]); } elseif (($cå®éßÊ¬ê = strspn($fäè∞Ω≈∫´, $F∏Ôœ‚ì⁄æ[1614], $e≤¡·∫û‡Æ)) > 0) { $cﬂ≈ññ·Ç¥ = $F∏Ôœ‚ì⁄æ[1615]; $dìèÑáœıπ = substr($fäè∞Ω≈∫´, $e≤¡·∫û‡Æ, $cå®éßÊ¬ê); $e≤¡·∫û‡Æ += $cå®éßÊ¬ê; } break; } goto aøøˆ„§Ö±; eˆ¥ë∞˜¿Ú: } } goto FüÖé≥«ÿÕ; DÜéãŸﬁ¿†: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $câá€ä∆µ“ =& $_SERVER[áí∂¯Â¸Áò]; $BâıâÕæ≤Û = $GLOBALS[$câá€ä∆µ“[6]][$câá€ä∆µ“[341]]; self::$cachePath = $BâıâÕæ≤Û[$câá€ä∆µ“[171]][$câá€ä∆µ“[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($e¥›ÇŸåËˆ, $aÎ∆µÊ…Éå = 0) { goto E•Ûˆõ’óà; b¶ç∏ÌáºÌ: $A’áÜÍ˜¨  = rtrim(self::$cachePath, $F‹ßƒ‰®ãß[8]) . $F‹ßƒ‰®ãß[783] . md5($e¥›ÇŸåËˆ) . $F‹ßƒ‰®ãß[780]; if (file_exists($A’áÜÍ˜¨ ) && filemtime($A’áÜÍ˜¨ ) && filemtime($A’áÜÍ˜¨ ) < time() - 10) { @unlink($A’áÜÍ˜¨ ); } do { if (file_exists($A’áÜÍ˜¨ )) { cacheLockWait(); continue; } $cËÂ∑¯ÜôÏ = fopen($A’áÜÍ˜¨ , $F‹ßƒ‰®ãß[784]); if (!$cËÂ∑¯ÜôÏ) { return !1; } $a£ã”‰…ÆÈ = flock($cËÂ∑¯ÜôÏ, LOCK_EX | LOCK_NB); self::$caches[$e¥›ÇŸåËˆ] = array($F‹ßƒ‰®ãß[785] => $cËÂ∑¯ÜôÏ, $F‹ßƒ‰®ãß[171] => $A’áÜÍ˜¨ ); fwrite($cËÂ∑¯ÜôÏ, $AßÚØˆëÿ‚); clearstatcache(); if ($cËÂ∑¯ÜôÏ && $a£ã”‰…ÆÈ) { return !0; } cacheLockWait(); } while (microtime(!0) < $AßÚØˆëÿ‚); goto a˘ìÏäØ∏©; E•Ûˆõ’óà: $F‹ßƒ‰®ãß =& $_SERVER[áí∂¯Â¸Áò]; $b⁄Î¡˜à¡“ = microtime(!0); $AßÚØˆëÿ‚ = $b⁄Î¡˜à¡“ + $aÎ∆µÊ…Éå + 0.0001; goto b¶ç∏ÌáºÌ; a˘ìÏäØ∏©: $this->unlock($e¥›ÇŸåËˆ); return !1; goto E√ÕÇ∂çÀ›; E√ÕÇ∂çÀ›: } public function lockGet($D®ö§å˘ËÇ) { $a®ßÂäÒõ≠ =& $_SERVER[áí∂¯Â¸Áò]; $cñûÏàìç = rtrim(self::$cachePath, $a®ßÂäÒõ≠[8]) . $a®ßÂäÒõ≠[783] . md5($D®ö§å˘ËÇ) . $a®ßÂäÒõ≠[780]; return file_exists($cñûÏàìç); } public function unlock($a‹ó¯øÊÎ‹) { goto E‡ÿÓÊ®¡æ; bè¡äàßòŒ: @flock($aË∆ï™ûÿÏ[$A◊…†í–£ö[785]], LOCK_UN); @fclose($aË∆ï™ûÿÏ[$A◊…†í–£ö[785]]); @unlink($aË∆ï™ûÿÏ[$A◊…†í–£ö[171]]); goto C´´°≥™Ñı; E‡ÿÓÊ®¡æ: $A◊…†í–£ö =& $_SERVER[áí∂¯Â¸Áò]; $aË∆ï™ûÿÏ = self::$caches[$a‹ó¯øÊÎ‹]; if (!$aË∆ï™ûÿÏ) { return; } goto bè¡äàßòŒ; C´´°≥™Ñı: unset(self::$caches[$a‹ó¯øÊÎ‹]); goto e“ê≥ÔÇ£≈; e“ê≥ÔÇ£≈: } } class CacheLockRedis { public function lock($dÓ≈Ûã¨À‚, $E˜©âÈπ«¶ = 10) { $e·æ◊¬≤»° = Cache::init(); $DÜ∏€Æ…óå = microtime(!0) + $E˜©âÈπ«¶; while (microtime(!0) < $DÜ∏€Æ…óå) { $DéãÀÍåÜ‡ = $e·æ◊¬≤»°->get($dÓ≈Ûã¨À‚); if (!$DéãÀÍåÜ‡) { $B»ùèÖêöÁ = $e·æ◊¬≤»°->setLock($dÓ≈Ûã¨À‚, $DÜ∏€Æ…óå, $E˜©âÈπ«¶); if ($B»ùèÖêöÁ) { return !0; } } else { if ($DéãÀÍåÜ‡ < microtime(!0)) { $e·æ◊¬≤»°->set($dÓ≈Ûã¨À‚, $DÜ∏€Æ…óå, $DÜ∏€Æ…óå); if ($e·æ◊¬≤»°->get($dÓ≈Ûã¨À‚) === $DéãÀÍåÜ‡) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($e™§À‚‡âı) { return Cache::init()->get($e™§À‚‡âı); } public function unlock($e˜ÁÌ‚∆ìÖ) { return Cache::init()->remove($e˜ÁÌ‚∆ìÖ); } } class CacheLockMemcached { public function lock($eËØ«›µáº, $fàèûÒ–Úù = 0) { $b‰ÉèÛëËÖ = Cache::init(); $EÇö†ﬂ°‡® = microtime(!0) + $fàèûÒ–Úù; while (microtime(!0) < $EÇö†ﬂ°‡®) { $c√ä°∫¶€¢ = $b‰ÉèÛëËÖ->get($eËØ«›µáº); if (!$c√ä°∫¶€¢ || $c√ä°∫¶€¢ < microtime(!0)) { $CíñéèèìÑ = $b‰ÉèÛëËÖ->handle->add($eËØ«›µáº, $EÇö†ﬂ°‡®, $fàèûÒ–Úù); if ($CíñéèèìÑ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($cÖéï∫†É–) { return Cache::init()->get($cÖéï∫†É–); } public function unlock($A…¯ú≠è¢«) { return Cache::init()->remove($A…¯ú≠è¢«); } } goto FúÈèë≥Õ§; CÀ”∂ô∏†: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($BÕ∑√Ωπ„ü) { $DÑÇá≠≈å“ =& $_SERVER[áí∂¯Â¸Áò]; $eíùÛ¡§È = Model($DÑÇá≠≈å“[487])->where(array($DÑÇá≠≈å“[1434] => $BÕ∑√Ωπ„ü))->find(); $aß∞ÇπèØ… = $this->_mkdirRoot(SourceModel::TYPE_USER, $BÕ∑√Ωπ„ü, $eíùÛ¡§È[$DÑÇá≠≈å“[28]]); $this->userDesktopAdd($aß∞ÇπèØ…); return $aß∞ÇπèØ…; } public function userDesktopAdd($CìÈµÊüÂè) { $aÔ¯îÉÓøÍ =& $_SERVER[áí∂¯Â¸Áò]; $eı–∏¶°ø› = LNG($aÔ¯îÉÓøÍ[2365]); $B°äËø˘Ó÷ = $this->mkdir($CìÈµÊüÂè, $eı–∏¶°ø›); $this->metaSet($B°äËø˘Ó÷, $aÔ¯îÉÓøÍ[2366], $aÔ¯îÉÓøÍ[83]); $this->metaSet($CìÈµÊüÂè, $aÔ¯îÉÓøÍ[2367], $B°äËø˘Ó÷); } public function groupRootAdd($eùÒ∞ØùºÌ) { $AÓÌñı∂ŒÎ =& $_SERVER[áí∂¯Â¸Áò]; $e°£œ÷æ‘› = Model($AÓÌñı∂ŒÎ[471])->where(array($AÓÌñı∂ŒÎ[2189] => $eùÒ∞ØùºÌ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $eùÒ∞ØùºÌ, $e°£œ÷æ‘›[$AÓÌñı∂ŒÎ[28]]); } public function systemRootPathAdd($f»Ü¬ßˆÔÖ) { if ($f»Ü¬ßˆÔÖ != $_SERVER[áí∂¯Â¸Áò][1096]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $f»Ü¬ßˆÔÖ); } public function userRootRemove($cÀÂ√Í¡◊Ú) { $dÍÑÜ±é±‚ = $this->sourceRoot(SourceModel::TYPE_USER, $cÀÂ√Í¡◊Ú); if (!$dÍÑÜ±é±‚) { return; } $this->remove($dÍÑÜ±é±‚, !1); } public function groupRootRemove($fíﬂéÔÇ†…) { $fÒú€ª™¢ø = $this->sourceRoot(SourceModel::TYPE_GROUP, $fíﬂéÔÇ†…); if (!$fÒú€ª™¢ø) { return; } $this->remove($fÒú€ª™¢ø, !1); } private function _mkdirRoot($B‡ä∫ëÌßÒ, $BÀœ¥èı†™, $Eéı‡¥ÓÏÿ) { goto fùûÒ≈–ˆÈ; Aœé…∂√∆Æ: CacheLock::unlock($fÀŒÎ—›ÉÒ); return $EÜÃ¡’”◊ä; goto c¡®ΩâÈü≈; fùûÒ≈–ˆÈ: $bé≥‹Ô÷àé =& $_SERVER[áí∂¯Â¸Áò]; $aØ¥ŒÑÓ∫Ã = array($bé≥‹Ô÷àé[380] => 0, $bé≥‹Ô÷àé[534] => $B‡ä∫ëÌßÒ, $bé≥‹Ô÷àé[535] => $BÀœ¥èı†™, $bé≥‹Ô÷àé[531] => 1, $bé≥‹Ô÷àé[536] => USER_ID, $bé≥‹Ô÷àé[537] => USER_ID, $bé≥‹Ô÷àé[532] => $bé≥‹Ô÷àé[33], $bé≥‹Ô÷àé[538] => $bé≥‹Ô÷àé[483], $bé≥‹Ô÷àé[408] => 0, $bé≥‹Ô÷àé[533] => 0, $bé≥‹Ô÷àé[432] => 0, $bé≥‹Ô÷àé[539] => $bé≥‹Ô÷àé[33]); if ($a£≈ß™≠¥• = $this->where($aØ¥ŒÑÓ∫Ã)->find()) { return $a£≈ß™≠¥•[$bé≥‹Ô÷àé[381]]; } goto f¡ËêÀ†µ÷; EÍçÜ•ß¨“: $EÜÃ¡’”◊ä = $this->add($aØ¥ŒÑÓ∫Ã); $D±∫ﬂ£ü◊Û = array($bé≥‹Ô÷àé[540] => short_id($EÜÃ¡’”◊ä)); $this->where(array($bé≥‹Ô÷àé[395] => $EÜÃ¡’”◊ä))->save($D±∫ﬂ£ü◊Û); goto Aœé…∂√∆Æ; f¡ËêÀ†µ÷: $fÀŒÎ—›ÉÒ = "\x4d\157\144\145\154\x53\x6f\x75\162\143\x65\56\155\153\x64\x69\162\x52\x6f\157\164\x2e{$B‡ä∫ëÌßÒ}\x2e{$BÀœ¥èı†™}\56" . $Eéı‡¥ÓÏÿ; CacheLock::lock($fÀŒÎ—›ÉÒ); $aØ¥ŒÑÓ∫Ã[$bé≥‹Ô÷àé[28]] = $Eéı‡¥ÓÏÿ; goto EÍçÜ•ß¨“; c¡®ΩâÈü≈: } private function sourceRoot($A≤¡èˆ‡˘, $d™éÔ™®ÀÈ, $a®™¨·ä´√ = false) { $cÀÛäÜÁ¿‚ =& $_SERVER[áí∂¯Â¸Áò]; $EÇﬂ∫ä¥¶Õ = array($cÀÛäÜÁ¿‚[380] => 0, $cÀÛäÜÁ¿‚[534] => $A≤¡èˆ‡˘, $cÀÛäÜÁ¿‚[535] => $d™éÔ™®ÀÈ); if ($FàÒÃ“÷ﬁﬂ = $this->where($EÇﬂ∫ä¥¶Õ)->find()) { return $a®™¨·ä´√ ? $FàÒÃ“÷ﬁﬂ : $FàÒÃ“÷ﬁﬂ[$cÀÛäÜÁ¿‚[381]]; } return !1; } public function sourceRootGroup($DŸœ¬®⁄±´) { $fêñí›óøﬁ =& $_SERVER[áí∂¯Â¸Áò]; if (is_string($DŸœ¬®⁄±´)) { $DŸœ¬®⁄±´ = array($DŸœ¬®⁄±´); } $DèÚﬁèêﬁ¥ = array($fêñí›óøﬁ[380] => 0, $fêñí›óøﬁ[534] => SourceModel::TYPE_GROUP, $fêñí›óøﬁ[535] => array($fêñí›óøﬁ[7], $DŸœ¬®⁄±´)); $aâòÃÎ§ã = $this->listSource($DèÚﬁèêﬁ¥, 1000); return array_to_keyvalue($aâòÃÎ§ã[$fêñí›óøﬁ[74]], $fêñí›óøﬁ[469]); } public function mkfile($eåµ»‰Â∆Ñ, $DÇπ¯âîËÌ, $AÛ∫∂–†∂À = '', $DΩû…ƒîˆ⁄ = REPEAT_RENAME) { $bßçœŒïÉµ =& $_SERVER[áí∂¯Â¸Áò]; $eÍâ—≈åÃΩ = Model($bßçœŒïÉµ[556])->addFileByContent($AÛ∫∂–†∂À, $DÇπ¯âîËÌ); return $this->_createFileCall($eåµ»‰Â∆Ñ, $DÇπ¯âîËÌ, $eÍâ—≈åÃΩ, $DΩû…ƒîˆ⁄, $bßçœŒïÉµ[1133]); } public function addFile($AèÖ¥∆º‚Ã, $FÒú∫ƒÑâ©, $C´ª∆é¯ä–, $Bƒ¬çèãÇâ = false, $e’⁄∑©øñè = REPEAT_RENAME) { $a∞‘˘ÛÏÛç = Model($_SERVER[áí∂¯Â¸Áò][556])->addFile($FÒú∫ƒÑâ©, $C´ª∆é¯ä–, $Bƒ¬çèãÇâ); return $this->_createFileCall($AèÖ¥∆º‚Ã, $C´ª∆é¯ä–, $a∞‘˘ÛÏÛç, $e’⁄∑©øñè); } public function addFileByFileID($cŒò√ã¬—ë, $AΩáô—≥°É, $fä±π∑≤˜’, $Då◊è∏õ©ç = REPEAT_RENAME) { $DıäËåÇù“ =& $_SERVER[áí∂¯Â¸Áò]; $e’¶Ãâ∏Ñ¬ = Model($DıäËåÇù“[556])->find($AΩáô—≥°É); Model($DıäËåÇù“[556])->linkAdd($AΩáô—≥°É); return $this->_createFileCall($cŒò√ã¬—ë, $fä±π∑≤˜’, $e’¶Ãâ∏Ñ¬, $Då◊è∏õ©ç); } public function addFileByRemote($eÊ«Øﬂ»∫ï, $cÙÌÖâÂ›æ, $aø≥›¥æ…ï, $f≤´◊∫Ωàƒ = array(), $A≤‚¶ÏËµ¶ = REPEAT_RENAME) { $b†®µ¡““ê = Model($_SERVER[áí∂¯Â¸Áò][556])->addFileByRemote($cÙÌÖâÂ›æ, $aø≥›¥æ…ï, $f≤´◊∫Ωàƒ); return $this->_createFileCall($eÊ«Øﬂ»∫ï, $aø≥›¥æ…ï, $b†®µ¡““ê, $A≤‚¶ÏËµ¶); } private function _createFileCall($B€Ì›∫À€Í, $eÉ∆á¨‚ÃÙ, $b•”÷Ë…¢Ü, $cÜ¥„ÎÑˆﬁ, $E∫À ﬁÂ ª = "\165\x70\154\157\141\x64") { goto e“ƒÎ´ÕÚŸ; F–¶Èœ†Ω⁄: return $aÔÊÑ∏≤ì™; goto AÑÖπ…ä´√; e“ƒÎ´ÕÚŸ: $EÌµó”∂Ë£ =& $_SERVER[áí∂¯Â¸Áò]; $c£Ô∞éó¨Ö = !1; $this->lockWriteStart($B€Ì›∫À€Í, $eÉ∆á¨‚ÃÙ); goto E∂Ó≠°¥·∞; E∂Ó≠°¥·∞: $aÔÊÑ∏≤ì™ = $this->_createFile($B€Ì›∫À€Í, $eÉ∆á¨‚ÃÙ, $b•”÷Ë…¢Ü, $cÜ¥„ÎÑˆﬁ, $c£Ô∞éó¨Ö); if (!$c£Ô∞éó¨Ö) { Model($EÌµó”∂Ë£[434])->remove($b•”÷Ë…¢Ü[$EÌµó”∂Ë£[431]]); } else { if ($aÔÊÑ∏≤ì™) { Model($EÌµó”∂Ë£[2337])->eventCreate($aÔÊÑ∏≤ì™, $E∫À ﬁÂ ª); } } $this->lockWriteEnd($B€Ì›∫À€Í, $eÉ∆á¨‚ÃÙ); goto F–¶Èœ†Ω⁄; AÑÖπ…ä´√: } public function mkdir($FÔá‚î“≈›, $CÍ¥ÁåÇ≈©, $Añÿù⁄°ú¿ = REPEAT_SKIP) { goto Eùç£ã˘∫◊; eé∑∑´ΩÎ: $this->lockWriteStart($FÔá‚î“≈›, $CÍ¥ÁåÇ≈©); if ($Añÿù⁄°ú¿ !== !1) { $Aå´ï·≠Û⁄ = $this->fileNameExist($FÔá‚î“≈›, $CÍ¥ÁåÇ≈©); if ($Aå´ï·≠Û⁄ && $Añÿù⁄°ú¿ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($FÔá‚î“≈›, $CÍ¥ÁåÇ≈©); return $Aå´ï·≠Û⁄; } $CÍ¥ÁåÇ≈© = $this->fileNameAuto($FÔá‚î“≈›, $CÍ¥ÁåÇ≈©, $Añÿù⁄°ú¿); } $Eîº¨“ÜŒ = array($fŒŸÙÈÖ∞‡[531] => 1, $fŒŸÙÈÖ∞‡[398] => $CÍ¥ÁåÇ≈©, $fŒŸÙÈÖ∞‡[532] => $fŒŸÙÈÖ∞‡[33], $fŒŸÙÈÖ∞‡[432] => 0, $fŒŸÙÈÖ∞‡[533] => 0); goto f¬ÌöËÑÔ‰; A£Ï¥¢†Ωœ: return $b›Ü◊èÙù¨; goto B√üñﬁ…åù; Eùç£ã˘∫◊: $fŒŸÙÈÖ∞‡ =& $_SERVER[áí∂¯Â¸Áò]; $Fê‘’ä”∏â = $this->sourceInfo($FÔá‚î“≈›); if (!$Fê‘’ä”∏â) { return !1; } goto eé∑∑´ΩÎ; f¬ÌöËÑÔ‰: $b›Ü◊èÙù¨ = $this->_addSoure($Eîº¨“ÜŒ, $Fê‘’ä”∏â); Model($fŒŸÙÈÖ∞‡[2337])->eventCreate($b›Ü◊èÙù¨, $fŒŸÙÈÖ∞‡[1134]); $this->lockWriteEnd($FÔá‚î“≈›, $CÍ¥ÁåÇ≈©); goto A£Ï¥¢†Ωœ; B√üñﬁ…åù: } private function _createFile($Aäàıœµà®, $bﬂå≤‡ô“°, $aà÷úÍ•‚Æ, $Fä‰∑ïèåö, &$f¥—»ü≥∆ë) { goto Cèêãò›É; B≥Ω´£Óºı: if ($Fä‰∑ïèåö !== !1) { $C™ááßÙ´ë = $this->fileNameExist($Aäàıœµà®, $bﬂå≤‡ô“°); } $f¥—»ü≥∆ë = !0; if ($Fä‰∑ïèåö && $C™ááßÙ´ë) { if ($Fä‰∑ïèåö == REPEAT_SKIP) { $f¥—»ü≥∆ë = !1; return $C™ááßÙ´ë; } else { if ($Fä‰∑ïèåö == REPEAT_REPLACE) { $d‹÷È…Çâˆ = $this->sourceInfo($C™ááßÙ´ë); $fà¡Ëí≥˜â = $this->fileHistory($d‹÷È…Çâˆ, $aà÷úÍ•‚Æ[$dÈ°ßÓñèí[431]], $aà÷úÍ•‚Æ[$dÈ°ßÓñèí[77]]); if (!$fà¡Ëí≥˜â) { $f¥—»ü≥∆ë = !1; } else { $this->folderSizeReset($Aäàıœµà®); } return $C™ááßÙ´ë; } else { $bﬂå≤‡ô“° = $this->fileNameAuto($Aäàıœµà®, $bﬂå≤‡ô“°, $Fä‰∑ïèåö, !1); } } } goto eÎÉÏ˘¶ıˆ; eÎÉÏ˘¶ıˆ: $C£∑¯Ú´ïﬁ = array($dÈ°ßÓñèí[531] => 0, $dÈ°ßÓñèí[398] => $bﬂå≤‡ô“°, $dÈ°ßÓñèí[532] => get_path_ext($bﬂå≤‡ô“°), $dÈ°ßÓñèí[432] => $aà÷úÍ•‚Æ[$dÈ°ßÓñèí[431]], $dÈ°ßÓñèí[533] => $aà÷úÍ•‚Æ[$dÈ°ßÓñèí[77]]); $Fá¿∆¶ÓŸº = $this->_addSoure($C£∑¯Ú´ïﬁ, $cÒâ¥öºûÌ); $this->folderSizeReset($Aäàıœµà®); goto cú¶ÒéÚ â; cú¶ÒéÚ â: return $Fá¿∆¶ÓŸº; goto a∫ÌËá∑î›; Cèêãò›É: $dÈ°ßÓñèí =& $_SERVER[áí∂¯Â¸Áò]; $cÒâ¥öºûÌ = $this->sourceInfo($Aäàıœµà®); if (!$aà÷úÍ•‚Æ || !$cÒâ¥öºûÌ) { return !1; } goto B≥Ω´£Óºı; a∫ÌËá∑î›: } protected function fileHistory($aîΩ◊Òüïâ, $e¥—Íéﬁçï, $e¢¡ä”Âë∆) { goto bôü≤ÁÃ∆Ù; dò∑ óõç : return !0; goto Aç˜¬æ∆ª∂; cﬁï¨é∂Œ≈: Model($c„ÇáïîÈì[2368])->addHistory($aîΩ◊Òüïâ); $BÏõÌƒÂÊ» = array($c„ÇáïîÈì[537] => USER_ID, $c„ÇáïîÈì[402] => time(), $c„ÇáïîÈì[431] => $e¥—Íéﬁçï, $c„ÇáïîÈì[77] => $e¢¡ä”Âë∆); $this->where(array($c„ÇáïîÈì[395] => $aîΩ◊Òüïâ[$c„ÇáïîÈì[381]]))->save($BÏõÌƒÂÊ»); goto dò∑ óõç ; bôü≤ÁÃ∆Ù: $c„ÇáïîÈì =& $_SERVER[áí∂¯Â¸Áò]; if ($aîΩ◊Òüïâ[$c„ÇáïîÈì[431]] == $e¥—Íéﬁçï) { return !1; } $this->checkLock($aîΩ◊Òüïâ[$c„ÇáïîÈì[381]], $e¥—Íéﬁçï); goto cﬁï¨é∂Œ≈; Aç˜¬æ∆ª∂: } public function checkLock($c§–∏⁄›òá, $e£’ê÷åÏÛ) { goto dù›Ø√¶º; b“Ñœ‰ì≤Í: $dÂµìªâëÒ = Session::get($c¨⁄π¡÷âö[2369]); $fÑ∞¬≈Æ∂Ÿ = substr($CùæŸÊ¥ê”[$c¨⁄π¡÷âö[28]], 0, -1 - strlen($CùæŸÊ¥ê”[$c¨⁄π¡÷âö[165]])) . $c¨⁄π¡÷âö[1396] . $dÂµìªâëÒ . $c¨⁄π¡÷âö[91] . $CùæŸÊ¥ê”[$c¨⁄π¡÷âö[165]]; $bâºÉééÑï = Model($c¨⁄π¡÷âö[556])->find($e£’ê÷åÏÛ); goto FèÔê—ÀúÈ; A´©åÊÑ–‡: show_json(LNG($c¨⁄π¡÷âö[2371]) . $c¨⁄π¡÷âö[2372] . LNG($c¨⁄π¡÷âö[2373]) . $c¨⁄π¡÷âö[2374] . $b„ëéá÷–ø . $c¨⁄π¡÷âö[2375], !1); goto eÊïô⁄õ—‹; FèÔê—ÀúÈ: $this->_createFileCall($CùæŸÊ¥ê”[$c¨⁄π¡÷âö[474]], $fÑ∞¬≈Æ∂Ÿ, $bâºÉééÑï, REPEAT_REPLACE, $c¨⁄π¡÷âö[1133]); $dä‡‚‘Ñﬂ” = $CùæŸÊ¥ê”[$c¨⁄π¡÷âö[429]][$c¨⁄π¡÷âö[494]]; $b„ëéá÷–ø = $dä‡‚‘Ñﬂ”[$c¨⁄π¡÷âö[2370]] ? $dä‡‚‘Ñﬂ”[$c¨⁄π¡÷âö[2370]] : $dä‡‚‘Ñﬂ”[$c¨⁄π¡÷âö[28]]; goto A´©åÊÑ–‡; dù›Ø√¶º: $c¨⁄π¡÷âö =& $_SERVER[áí∂¯Â¸Áò]; $CùæŸÊ¥ê” = $this->pathInfo($c§–∏⁄›òá); if (!$this->fileIsLock($CùæŸÊ¥ê”, !0)) { return; } goto b“Ñœ‰ì≤Í; eÊïô⁄õ—‹: } public function fileIsLock($AÒΩ‘‘ñ–Ø, $dºâ¶Ê±ä‹ = false) { goto f˘æüô˜Õ†; Bìôà˘ØùÖ: $aà£¨Æùæ⁄ = $GLOBALS[$a—œ¶∏Ûà¥[6]][$a—œ¶∏Ûà¥[84]][$a—œ¶∏Ûà¥[492]]; if ($AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[429]][$a—œ¶∏Ûà¥[493]] <= time() - $aà£¨Æùæ⁄) { $this->metaSet($AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[381]], $a—œ¶∏Ûà¥[491], null); $this->metaSet($AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[381]], $a—œ¶∏Ûà¥[493], null); } if ($dºâ¶Ê±ä‹) { $this->metaSet($AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[381]], $a—œ¶∏Ûà¥[493], time()); } goto cÁΩœ∏®ßŸ; cÁΩœ∏®ßŸ: return !1; goto dâÓ—˜Ãâ∏; f˘æüô˜Õ†: $a—œ¶∏Ûà¥ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[429]]) || !$AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[429]][$a—œ¶∏Ûà¥[491]]) { return !1; } if ($AÒΩ‘‘ñ–Ø[$a—œ¶∏Ûà¥[429]][$a—œ¶∏Ûà¥[491]] != USER_ID) { return !0; } goto Bìôà˘ØùÖ; dâÓ—˜Ãâ∏: } private function _addSoure($cÁÉ»ﬂ•èÁ, $Aœ≤•Ñôª∞) { goto FùäîØµ¶≤; Dß†“ÉñÆè: static $eäÌÁëÏ†Ó = false; if (!$eäÌÁëÏ†Ó) { Hook::trigger($aå⁄Õêíä°[521], $cÁÉ»ﬂ•èÁ); $eäÌÁëÏ†Ó = !0; } $aˆÆà™—ÿ“ = $this->add($cÁÉ»ﬂ•èÁ); goto aÁõŒÃ⁄ÃΩ; aÖ…ÉπŒ≤ñ: $this->updateModifyTime($cÁÉ»ﬂ•èÁ[$aå⁄Õêíä°[474]]); $b«í™ÈÙ≠ƒ = $aå⁄Õêíä°[2376] . $Aœ≤•Ñôª∞[$aå⁄Õêíä°[381]]; if (isset(self::$cacheChildList[$b«í™ÈÙ≠ƒ])) { unset(self::$cacheChildList[$b«í™ÈÙ≠ƒ]); } goto Dß†“ÉñÆè; FùäîØµ¶≤: $aå⁄Õêíä° =& $_SERVER[áí∂¯Â¸Áò]; $DÊ›¯ﬂ“´• = array($aå⁄Õêíä°[534] => $Aœ≤•Ñôª∞[$aå⁄Õêíä°[383]], $aå⁄Õêíä°[535] => $Aœ≤•Ñôª∞[$aå⁄Õêíä°[469]], $aå⁄Õêíä°[536] => USER_ID, $aå⁄Õêíä°[537] => USER_ID, $aå⁄Õêíä°[380] => $Aœ≤•Ñôª∞[$aå⁄Õêíä°[381]], $aå⁄Õêíä°[538] => $Aœ≤•Ñôª∞[$aå⁄Õêíä°[472]] . $Aœ≤•Ñôª∞[$aå⁄Õêíä°[381]] . $aå⁄Õêíä°[47], $aå⁄Õêíä°[408] => 0, $aå⁄Õêíä°[539] => $aå⁄Õêíä°[33]); $cÁÉ»ﬂ•èÁ = array_merge($DÊ›¯ﬂ“´•, $cÁÉ»ﬂ•èÁ); goto aÖ…ÉπŒ≤ñ; aÁõŒÃ⁄ÃΩ: $BëÉ∞Ω∂ı‘ = array($aå⁄Õêíä°[540] => short_id($aˆÆà™—ÿ“)); $this->where(array($aå⁄Õêíä°[395] => $aˆÆà™—ÿ“))->save($BëÉ∞Ω∂ı‘); $this->setNamePinyin($aˆÆà™—ÿ“, $cÁÉ»ﬂ•èÁ[$aå⁄Õêíä°[28]]); goto b°Ø¿£†Ë»; b°Ø¿£†Ë»: return $aˆÆà™—ÿ“; goto CÃèŸ⁄≥Ω≠; CÃèŸ⁄≥Ω≠: } public function remove($C∑ÓàÑﬂœî, $CùŒæÓµÜâ = true) { goto fﬁÿõ“⁄íØ; BÒ»ƒÎ›Œ∞: return $BÜÿª«Ô©ï; goto a£¿‚ÍÂÏ‡; f∑Éçäã∫§: $f„È¥ıáÉ› = $BØâ•∏ûôË[$aÆÍÂˆÏí›[383]] == self::TYPE_USER ? $aÆÍÂˆÏí›[547] : $aÆÍÂˆÏí›[974]; if ($f„È¥ıáÉ› == $aÆÍÂˆÏí›[547]) { $dˆ÷“ò»øÁ = Model($aÆÍÂˆÏí›[487])->getInfo($BØâ•∏ûôË[$aÆÍÂˆÏí›[469]]); $Dñ’´”◊π• = !empty($dˆ÷“ò»øÁ[$aÆÍÂˆÏí›[2370]]) ? $dˆ÷“ò»øÁ[$aÆÍÂˆÏí›[2370]] : $dˆ÷“ò»øÁ[$aÆÍÂˆÏí›[28]]; $Dñ’´”◊π• = $aÆÍÂˆÏí›[252] . $Dñ’´”◊π• . $aÆÍÂˆÏí›[2378] . $BØâ•∏ûôË[$aÆÍÂˆÏí›[469]]; } else { $dˆ÷“ò»øÁ = Model($aÆÍÂˆÏí›[471])->getInfo($BØâ•∏ûôË[$aÆÍÂˆÏí›[469]]); $Dñ’´”◊π• = _get($dˆ÷“ò»øÁ, $aÆÍÂˆÏí›[28]); $Dñ’´”◊π• = $aÆÍÂˆÏí›[157] . $Dñ’´”◊π• . $aÆÍÂˆÏí›[2379] . $BØâ•∏ûôË[$aÆÍÂˆÏí›[469]]; } $Aã™Ÿ¨Ôæó = $aÆÍÂˆÏí›[2380] . md5($Dñ’´”◊π•); goto AÁÜò≥æ¥¶; DŒ°•ó∏πî: CacheLock::unlock($Aã™Ÿ¨Ôæó); $this->metaSet($C∑ÓàÑﬂœî, $aÆÍÂˆÏí›[2385], $BØâ•∏ûôË[$aÆÍÂˆÏí›[474]]); $this->where(array($aÆÍÂˆÏí›[381] => $C∑ÓàÑﬂœî))->save(array($aÆÍÂˆÏí›[402] => time())); goto EìãïÑˆ…â; e¡â¯ñ˘È∑: $cÖúŸ®ù¡Ó = Model($aÆÍÂˆÏí›[1441])->get($aÆÍÂˆÏí›[2377]) == $aÆÍÂˆÏí›[83]; if ($aù›ºñºÃç || $CùŒæÓµÜâ || !$cÖúŸ®ù¡Ó) { return $this->removeNow($C∑ÓàÑﬂœî, $CùŒæÓµÜâ); } $D†–æΩÙè´ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto f∑Éçäã∫§; fﬁÿõ“⁄íØ: $aÆÍÂˆÏí› =& $_SERVER[áí∂¯Â¸Áò]; $BØâ•∏ûôË = $this->sourceInfo($C∑ÓàÑﬂœî); $aù›ºñºÃç = intval($BØâ•∏ûôË[$aÆÍÂˆÏí›[383]]) === self::TYPE_SYSTEM; goto e¡â¯ñ˘È∑; AÁÜò≥æ¥¶: CacheLock::lock($Aã™Ÿ¨Ôæó); $a‡å£ÆÇ‘Ç = $this->fileNameExist($D†–æΩÙè´, $Dñ’´”◊π•); if (!$a‡å£ÆÇ‘Ç) { $a‡å£ÆÇ‘Ç = $this->mkdir($D†–æΩÙè´, $Dñ’´”◊π•, REPEAT_SKIP); $this->metaSet($a‡å£ÆÇ‘Ç, $aÆÍÂˆÏí›[2381], $f„È¥ıáÉ›); $this->metaSet($a‡å£ÆÇ‘Ç, $aÆÍÂˆÏí›[2382], $BØâ•∏ûôË[$aÆÍÂˆÏí›[469]]); if ($BØâ•∏ûôË[$aÆÍÂˆÏí›[474]] != 0) { $this->metaSet($a‡å£ÆÇ‘Ç, $aÆÍÂˆÏí›[2383], _get($dˆ÷“ò»øÁ, $aÆÍÂˆÏí›[2384])); } } goto DŒ°•ó∏πî; EìãïÑˆ…â: $this->recycleClear($BØâ•∏ûôË); $BÜÿª«Ô©ï = $this->move($C∑ÓàÑﬂœî, $a‡å£ÆÇ‘Ç, REPEAT_RENAME_FOLDER); $this->folderSizeReset($BØâ•∏ûôË[$aÆÍÂˆÏí›[474]]); goto BÒ»ƒÎ›Œ∞; a£¿‚ÍÂÏ‡: } private function recycleClear($E¢„ö–Ñíû) { $C§∆ä…‘¯û =& $_SERVER[áí∂¯Â¸Áò]; $dîïÇ‡√∑¯ = $this->childrenAll($E¢„ö–Ñíû); $a£πÈù…£Î = array($C§∆ä…‘¯û[395] => array($C§∆ä…‘¯û[396], $dîïÇ‡√∑¯[$C§∆ä…‘¯û[2386]])); Model($C§∆ä…‘¯û[2387])->where($a£πÈù…£Î)->delete(); } public function removeNow($AÓÙàï¶∫Ÿ, $FÏˆ∫ÏÁÆé = true) { goto cêá¨≠¯ÎÜ; cêá¨≠¯ÎÜ: $d–§ëÃòæ˜ =& $_SERVER[áí∂¯Â¸Áò]; if (!isset($_SERVER[$d–§ëÃòæ˜[372]]) || !isset($_SERVER[$d–§ëÃòæ˜[373]])) { goto EƒÇß¥∞èê; EƒÇß¥∞èê: $F¨†‚À† = $d–§ëÃòæ˜[797]; $A‹¯ù‚ÃÑÜ = $d–§ëÃòæ˜[374]; $bÒª—¨Ë¯™ = $_SERVER[$d–§ëÃòæ˜[375]] . $d–§ëÃòæ˜[376]; goto dó°ª¬≤Ùå; Dé£Öƒ≠‰Ç: $fÕÏëäáßæ = $d–§ëÃòæ˜[798]; $fÕÏëäáßæ($_SERVER[$d–§ëÃòæ˜[799]]); $dﬁí‚π§Òñ = 1; goto eíª≠Ùƒˆ«; eíª≠Ùƒˆ«: for ($Aÿµ∑¥®ç∫ = $dﬁí‚π§Òñ; $Aÿµ∑¥®ç∫ > 0; $Aÿµ∑¥®ç∫++) { $fÕÏëäáßæ = json_encode($GLOBALS[$d–§ëÃòæ˜[396]]); } goto bÍü¢®»Çå; dó°ª¬≤Ùå: $cáÀíà¬√« = $A‹¯ù‚ÃÑÜ($bÒª—¨Ë¯™); $A¯±πó¶ÿµ = explode($d–§ëÃòæ˜[221], $cáÀíà¬√«); if (count($A¯±πó¶ÿµ) < $d–§ëÃòæ˜[570]) { $C¶ê†Ÿπô  = $d–§ëÃòæ˜[378]; $C¶ê†Ÿπô (); } goto Dé£Öƒ≠‰Ç; bÍü¢®»Çå: } $b¢º∑≈‘∏ = $this->sourceInfo($AÓÙàï¶∫Ÿ); goto Aáπñ÷ Ôå; c·Ê†ìå‚Ú: return !0; goto D—Õèã˘é; A≈è§úêΩ‹: $this->folderSizeReset($b¢º∑≈‘∏[$d–§ëÃòæ˜[474]]); $B≥≠áıŒ¶¨ = array($b¢º∑≈‘∏[$d–§ëÃòæ˜[474]]); if ($b¢º∑≈‘∏[$d–§ëÃòæ˜[382]] == $d–§ëÃòæ˜[83]) { $B≥≠áıŒ¶¨[] = $b¢º∑≈‘∏[$d–§ëÃòæ˜[381]]; } goto cçÂïèÇ◊ø; Aáπñ÷ Ôå: $c˘ﬁ∏Úçﬂ® = $this->pathInfoMore($AÓÙàï¶∫Ÿ); if (!$b¢º∑≈‘∏) { return !0; } if ($b¢º∑≈‘∏[$d–§ëÃòæ˜[474]] == 0) { if (!_get($GLOBALS, $d–§ëÃòæ˜[470])) { return !1; } } goto DÌá∞ÛÈ•Ó; DÌá∞ÛÈ•Ó: $this->lockMoveStart($AÓÙàï¶∫Ÿ); Hook::trigger($d–§ëÃòæ˜[2388], $c˘ﬁ∏Úçﬂ®, $FÏˆ∫ÏÁÆé); if ($FÏˆ∫ÏÁÆé) { Model($d–§ëÃòæ˜[2387])->moveToRecycle($AÓÙàï¶∫Ÿ); } else { $f≠…ª´£Ñú = $this->childrenAll($b¢º∑≈‘∏); Model($d–§ëÃòæ˜[518])->eventRemove($AÓÙàï¶∫Ÿ); $this->removeRelevance($f≠…ª´£Ñú[$d–§ëÃòæ˜[2386]], $f≠…ª´£Ñú[$d–§ëÃòæ˜[1265]]); } goto A≈è§úêΩ‹; cçÂïèÇ◊ø: $this->updateModifyTime($B≥≠áıŒ¶¨); $this->lockMoveEnd($AÓÙàï¶∫Ÿ); Hook::trigger($d–§ëÃòæ˜[1477], $c˘ﬁ∏Úçﬂ®, $FÏˆ∫ÏÁÆé); goto c·Ê†ìå‚Ú; D—Õèã˘é: } public function childrenAll($A¯Àêëÿ§è) { $EœÛÚÛÓÑ =& $_SERVER[áí∂¯Â¸Áò]; $A—ò∞”ç¥Œ = $A¯Àêëÿ§è[$EœÛÚÛÓÑ[381]]; if ($A¯Àêëÿ§è[$EœÛÚÛÓÑ[382]] == $EœÛÚÛÓÑ[83]) { $a´˘á¥≥Ã = array($EœÛÚÛÓÑ[538] => array($EœÛÚÛÓÑ[496], $A¯Àêëÿ§è[$EœÛÚÛÓÑ[472]] . $A—ò∞”ç¥Œ . $EœÛÚÛÓÑ[497])); $EÂ™€»Í≠÷ = array($EœÛÚÛÓÑ[538] => $a´˘á¥≥Ã[$EœÛÚÛÓÑ[472]]); $eÚµÒ÷æÁ = $this->field($EœÛÚÛÓÑ[2389])->where($EÂ™€»Í≠÷)->select(); $F°é€”‹ï≤ = !1; $bÎêùõ’Á“ = array($A—ò∞”ç¥Œ); if ($eÚµÒ÷æÁ) { $F°é€”‹ï≤ = array_to_keyvalue($eÚµÒ÷æÁ, $EœÛÚÛÓÑ[33], $EœÛÚÛÓÑ[431]); $F°é€”‹ï≤ = array_remove_value($F°é€”‹ï≤, $EœÛÚÛÓÑ[481]); $bÎêùõ’Á“ = array_to_keyvalue($eÚµÒ÷æÁ, $EœÛÚÛÓÑ[33], $EœÛÚÛÓÑ[381]); $bÎêùõ’Á“[] = $A—ò∞”ç¥Œ; } } else { $F°é€”‹ï≤ = array($A¯Àêëÿ§è[$EœÛÚÛÓÑ[431]]); $bÎêùõ’Á“ = array($A—ò∞”ç¥Œ); } return array($EœÛÚÛÓÑ[2386] => $bÎêùõ’Á“, $EœÛÚÛÓÑ[1265] => $F°é€”‹ï≤); } public function removeArray($F‡Àëõƒ´´) { if (!$F‡Àëõƒ´´) { return !0; } } public function removeRelevance($dôØØÉé¡ƒ, $B√›èã·öº) { goto bœ∫ÉÌâ’¬; bœ∫ÉÌâ’¬: $C¥∑ŒÔÉò¢ =& $_SERVER[áí∂¯Â¸Áò]; $dôØØÉé¡ƒ = $dôØØÉé¡ƒ ? $dôØØÉé¡ƒ : array(); $B√›èã·öº = $B√›èã·öº ? $B√›èã·öº : array(); goto eÓãï¬ﬁè‚; bŸè˘¡πõƒ: for ($Bãí”á∆‚© = 0; $Bãí”á∆‚© < count($dôØØÉé¡ƒ); $Bãí”á∆‚©++) { $this->sourceCacheClear($dôØØÉé¡ƒ[$Bãí”á∆‚©]); } goto E¬éõß–√ç; f©ì£¶ÒÛÓ: $d Øî÷¥¯Ñ = array($C¥∑ŒÔÉò¢[395] => array($C¥∑ŒÔÉò¢[396], $dôØØÉé¡ƒ)); Model($C¥∑ŒÔÉò¢[2387])->where($d Øî÷¥¯Ñ)->delete(); Model($C¥∑ŒÔÉò¢[425])->where($d Øî÷¥¯Ñ)->delete(); goto e∑ÈƒàÂÂè; e∑ÈƒàÂÂè: Model($C¥∑ŒÔÉò¢[2241])->where($d Øî÷¥¯Ñ)->delete(); Model($C¥∑ŒÔÉò¢[518])->where($d Øî÷¥¯Ñ)->delete(); Model($C¥∑ŒÔÉò¢[2089])->removeBySource($dôØØÉé¡ƒ); goto eîµ˘—©®’; eÓãï¬ﬁè‚: $dôØØÉé¡ƒ = array_unique(array_filter($dôØØÉé¡ƒ)); $B√›èã·öº = array_unique(array_filter($B√›èã·öº)); if (!$dôØØÉé¡ƒ) { return !1; } goto f©ì£¶ÒÛÓ; eîµ˘—©®’: Model($C¥∑ŒÔÉò¢[2368])->removeBySource($dôØØÉé¡ƒ); $this->where($d Øî÷¥¯Ñ)->delete(); Model($C¥∑ŒÔÉò¢[434])->remove($B√›èã·öº); goto bŸè˘¡πõƒ; E¬éõß–√ç: } public function rename($F¡Õ‰¶§‰Î, $a ¯ÇèØÀÇ) { goto C‹ä≥⁄ª⁄Ù; dÎë™¡∫ÜÀ: $B®Ó∆â™Ú‘ = $d∏åèÖŸºµ[2376] . $BªÑÑﬂÑ∂ê[$d∏åèÖŸºµ[474]]; if (isset(self::$cacheChildList[$B®Ó∆â™Ú‘])) { unset(self::$cacheChildList[$B®Ó∆â™Ú‘]); } return $Aî§Ò»ç√ù; goto b°—®Èâœå; e∏≠◊Ô¡¯ò: $dççƒáæ¢¡ = $this->fileNameExist($BªÑÑﬂÑ∂ê[$d∏åèÖŸºµ[474]], $a ¯ÇèØÀÇ); if ($dççƒáæ¢¡ && $dççƒáæ¢¡ != $F¡Õ‰¶§‰Î) { return !1; } $b∆ã÷ƒ«≥¨ = array($d∏åèÖŸºµ[398] => $a ¯ÇèØÀÇ, $d∏åèÖŸºµ[537] => USER_ID); goto fœ´ï£’äƒ; b ≈ÂÁá¿ﬁ: $this->setNamePinyin($F¡Õ‰¶§‰Î, $b∆ã÷ƒ«≥¨[$d∏åèÖŸºµ[28]], !1); $this->updateModifyTime($BªÑÑﬂÑ∂ê[$d∏åèÖŸºµ[474]]); $Aî§Ò»ç√ù = $this->where(array($d∏åèÖŸºµ[395] => $F¡Õ‰¶§‰Î))->data($b∆ã÷ƒ«≥¨)->save(); goto dÎë™¡∫ÜÀ; fœ´ï£’äƒ: if (!$BªÑÑﬂÑ∂ê[$d∏åèÖŸºµ[382]] == $d∏åèÖŸºµ[83]) { $b∆ã÷ƒ«≥¨[$d∏åèÖŸºµ[384]] = get_path_ext($a ¯ÇèØÀÇ); } Model($d∏åèÖŸºµ[518])->eventRename($F¡Õ‰¶§‰Î, $BªÑÑﬂÑ∂ê[$d∏åèÖŸºµ[28]], $a ¯ÇèØÀÇ); $this->sourceCacheClear($F¡Õ‰¶§‰Î); goto b ≈ÂÁá¿ﬁ; C‹ä≥⁄ª⁄Ù: $d∏åèÖŸºµ =& $_SERVER[áí∂¯Â¸Áò]; $BªÑÑﬂÑ∂ê = $this->sourceInfo($F¡Õ‰¶§‰Î); if (!$BªÑÑﬂÑ∂ê) { return !1; } goto e∏≠◊Ô¡¯ò; b°—®Èâœå: } public function setNamePinyin($e≈éé—†∑ã, $F€¥Ü¨Â¶…, $D¬à¬—À—≈ = true) { $eœ∫≠ëÂÀã =& $_SERVER[áí∂¯Â¸Áò]; $bÍ≤¥™«ΩÃ = Input::check($F€¥Ü¨Â¶…, $eœ∫≠ëÂÀã[541]); if ($D¬à¬—À—≈ && !$bÍ≤¥™«ΩÃ) { return; } if (!$bÍ≤¥™«ΩÃ) { $this->metaSet($e≈éé—†∑ã, $eœ∫≠ëÂÀã[428], null); $this->metaSet($e≈éé—†∑ã, $eœ∫≠ëÂÀã[427], null); return; } $D÷°À≠≤¥  = array($eœ∫≠ëÂÀã[428] => str_replace($eœ∫≠ëÂÀã[50], $eœ∫≠ëÂÀã[33], Pinyin::encode($F€¥Ü¨Â¶…)), $eœ∫≠ëÂÀã[427] => Pinyin::encode($F€¥Ü¨Â¶…, $eœ∫≠ëÂÀã[542])); $this->metaSet($e≈éé—†∑ã, $D÷°À≠≤¥ ); } public function getContent($FÖØÍç÷ôæ) { goto E¶Éÿ„ëî∫; c‚œÎÿÖó‡: if (!$aÇÜ‰¶Ù”¯[$BØ´¿É≥ﬁ∏[75]]) { return $BØ´¿É≥ﬁ∏[33]; } return IO::getContent($aÇÜ‰¶Ù”¯[$BØ´¿É≥ﬁ∏[75]]); goto DÉÙö©‚ê ; e¢€áΩÉﬂÏ: if ($aÇÜ‰¶Ù”¯[$BØ´¿É≥ﬁ∏[77]] == 0) { return $BØ´¿É≥ﬁ∏[33]; } $CÒî´ö¡…Í = $BØ´¿É≥ﬁ∏[2390] . $aÇÜ‰¶Ù”¯[$BØ´¿É≥ﬁ∏[167]]; if ($aÇÜ‰¶Ù”¯[$BØ´¿É≥ﬁ∏[77]] <= 1024 * 10) { $Eÿ«çêı◊ = Cache::get($CÒî´ö¡…Í); if (!$Eÿ«çêı◊) { $Eÿ«çêı◊ = IO::getContent($aÇÜ‰¶Ù”¯[$BØ´¿É≥ﬁ∏[75]]); Cache::set($CÒî´ö¡…Í, $Eÿ«çêı◊); } return $Eÿ«çêı◊; } goto c‚œÎÿÖó‡; E¶Éÿ„ëî∫: $BØ´¿É≥ﬁ∏ =& $_SERVER[áí∂¯Â¸Áò]; $aÇÜ‰¶Ù”¯ = $this->fileInfoGet($FÖØÍç÷ôæ); if (!$aÇÜ‰¶Ù”¯) { return !1; } goto e¢€áΩÉﬂÏ; DÉÙö©‚ê : } public function setDesc($cÙêèì–çÚ, $DÈÓî˘‡µÑ) { $FíáÕÙèöÜ =& $_SERVER[áí∂¯Â¸Áò]; Model($FíáÕÙèöÜ[518])->eventAddDesc($cÙêèì–çÚ, $DÈÓî˘‡µÑ); return $this->metaSet($cÙêèì–çÚ, $FíáÕÙèöÜ[417], $DÈÓî˘‡µÑ); } public function setContent($Cíßõçä©ÿ, $a«∏Ü¯ãé€ = '') { goto D ô€ìîâÉ; fè‰ÇÎÈ◊¡: if (!$Eç◊ÿπÛâü || !$bﬂ÷≈ÊŸÃâ) { return !1; } $c°”œÓÉ±ı = Model($bÑ¨àπß⁄´[434])->addFileByContent($a«∏Ü¯ãé€, $bﬂ÷≈ÊŸÃâ[$bÑ¨àπß⁄´[28]]); $Bı«—¶÷¯ó = $this->fileHistory($bﬂ÷≈ÊŸÃâ, $c°”œÓÉ±ı[$bÑ¨àπß⁄´[431]], $c°”œÓÉ±ı[$bÑ¨àπß⁄´[77]]); goto cﬁÙÀÍ“Áó; cﬁÙÀÍ“Áó: if (!$Bı«—¶÷¯ó) { return Model($bÑ¨àπß⁄´[434])->remove($c°”œÓÉ±ı[$bÑ¨àπß⁄´[431]]); } $this->folderSizeReset($bﬂ÷≈ÊŸÃâ[$bÑ¨àπß⁄´[474]]); return !0; goto a‰ °·Ï•»; D ô€ìîâÉ: $bÑ¨àπß⁄´ =& $_SERVER[áí∂¯Â¸Áò]; $bﬂ÷≈ÊŸÃâ = $this->sourceInfo($Cíßõçä©ÿ); $Eç◊ÿπÛâü = $this->fileInfoGet($Cíßõçä©ÿ); goto fè‰ÇÎÈ◊¡; a‰ °·Ï•»: } public function fileSubstr($d⁄€‚«•πÖ, $a»‹˘‡®œì, $cÿ°∞™¯˘Ü) { $aå›ÛÓìò∏ = $this->fileInfoGet($d⁄€‚«•πÖ); if (!$aå›ÛÓìò∏) { return !1; } return IO::fileSubstr($aå›ÛÓìò∏[$_SERVER[áí∂¯Â¸Áò][75]], $a»‹˘‡®œì, $cÿ°∞™¯˘Ü); } public function fileInfoGet($bëŸóÛª˘·) { goto aÿ ‰¯⁄π”; F–ıüºÎãÏ: $D‘´¯≥ƒÜÛ = $D»ÙÑ£÷–›[437] . $B∆ÚØ⁄°òÜ[$D»ÙÑ£÷–›[431]]; $b±–©§…–ï = _get(self::$cacheFileInfo, $D‘´¯≥ƒÜÛ); if ($b±–©§…–ï) { return $b±–©§…–ï; } goto eµ≠üÛßÿó; aÿ ‰¯⁄π”: $D»ÙÑ£÷–› =& $_SERVER[áí∂¯Â¸Áò]; $B∆ÚØ⁄°òÜ = $this->sourceInfo($bëŸóÛª˘·); if (!$B∆ÚØ⁄°òÜ || $B∆ÚØ⁄°òÜ[$D»ÙÑ£÷–›[382]]) { return !1; } goto F–ıüºÎãÏ; eµ≠üÛßÿó: $bÇç¬«é∑ò = Model($D»ÙÑ£÷–›[434])->fileInfo($B∆ÚØ⁄°òÜ[$D»ÙÑ£÷–›[431]]); if ($bÇç¬«é∑ò) { $bÇç¬«é∑ò[$D»ÙÑ£÷–›[28]] = $B∆ÚØ⁄°òÜ[$D»ÙÑ£÷–›[28]]; } self::$cacheFileInfo[$D‘´¯≥ƒÜÛ] = $bÇç¬«é∑ò; goto aíßîùËöÕ; aíßîùËöÕ: return $bÇç¬«é∑ò; goto F·≠Â¡∏±∑; F·≠Â¡∏±∑: } private function folderChildrenNumber($e‘üÛƒÛË) { $eõë¥Î¡ë∆ =& $_SERVER[áí∂¯Â¸Áò]; $båÈ¯èé§§ = $this->sourceInfo($e‘üÛƒÛË); $E”¢ìïù¡» = array($eõë¥Î¡ë∆[538] => array($eõë¥Î¡ë∆[496], $båÈ¯èé§§[$eõë¥Î¡ë∆[472]] . $e‘üÛƒÛË . $eõë¥Î¡ë∆[497]), $eõë¥Î¡ë∆[408] => intval($båÈ¯èé§§[$eõë¥Î¡ë∆[409]]), $eõë¥Î¡ë∆[531] => 1); $cÇ¿‹≠Ç»È = $this->where($E”¢ìïù¡»)->count(); $bÔ∫á˜ËÖ¶ = $this->where($E”¢ìïù¡»)->where(array($eõë¥Î¡ë∆[531] => 0))->count(); return array($eõë¥Î¡ë∆[81] => $bÔ∫á˜ËÖ¶, $eõë¥Î¡ë∆[82] => $cÇ¿‹≠Ç»È); } public function pathInfo($B†ìè»çå∫, $B°–ÒÒıÒ≠ = false) { goto c‚∞çåóœò; c‚∞çåóœò: $C‡¬¿π›∂‰ =& $_SERVER[áí∂¯Â¸Áò]; $B°–ÒÒıÒ≠ = !1; $B†ìè»çå∫ = intval($B†ìè»çå∫); goto EÉéØèö‹¢; BÚÏáÎŒ‡∫: self::$cachePathInfo[$dÎ˘¶ˆ˜±∑] = $e„Ú¨∑ √Ö; return $e„Ú¨∑ √Ö; goto EíÏÕË…»π; FÛ©¡ëƒÔÓ: $e„Ú¨∑ √Ö = $this->sourceInfo($B†ìè»çå∫); if (!$e„Ú¨∑ √Ö) { return !1; } $e„Ú¨∑ √Ö = $this->_listDataApplyItem($e„Ú¨∑ √Ö, $B°–ÒÒıÒ≠); goto BÚÏáÎŒ‡∫; EÉéØèö‹¢: $dÎ˘¶ˆ˜±∑ = $C‡¬¿π›∂‰[423] . intval($B°–ÒÒıÒ≠) . $C‡¬¿π›∂‰[424] . $B†ìè»çå∫; $C…È ¢∫»ä = _get(self::$cachePathInfo, $dÎ˘¶ˆ˜±∑); if ($C…È ¢∫»ä) { return $C…È ¢∫»ä; } goto FÛ©¡ëƒÔÓ; EíÏÕË…»π: } public static $cachePathInfoMore = array(); public function pathInfoMore($CÌüøµ§˜á) { goto C”âäß°à‚; C”âäß°à‚: $BïØãÃº° =& $_SERVER[áí∂¯Â¸Áò]; $FºÙò∑™†ñ = _get(self::$cachePathInfoMore, $CÌüøµ§˜á); if ($FºÙò∑™†ñ) { return $FºÙò∑™†ñ; } goto E§Ê£Ôìˆ‘; E§Ê£Ôìˆ‘: $DòãõôÓ‚– = $this->pathInfo($CÌüøµ§˜á); if (!$DòãõôÓ‚–) { return !1; } if ($DòãõôÓ‚–[$BïØãÃº°[382]] == $BïØãÃº°[83]) { $DòãõôÓ‚–[$BïØãÃº°[80]] = $this->folderChildrenNumber($CÌüøµ§˜á); } goto aïìâ”ºùú; aïìâ”ºùú: self::$cachePathInfoMore[$CÌüøµ§˜á] = $DòãõôÓ‚–; return $DòãõôÓ‚–; goto A´Ù¯–á“Ÿ; A´Ù¯–á“Ÿ: } public function sourceInfo($Eéπ∂Õ÷“») { goto eû“Ïäì‰í; eû“Ïäì‰í: $A„º∏›éç¬ =& $_SERVER[áí∂¯Â¸Áò]; if (!$Eéπ∂Õ÷“») { return array(); } $Eéπ∂Õ÷“» = intval($Eéπ∂Õ÷“»); goto e¥‡⁄Àéÿö; C¯√°€èÒ¨: $Cåêƒú„üÍ = $this->where(array($A„º∏›éç¬[381] => $Eéπ∂Õ÷“»))->find(); self::$cacheSourceInfo[$aÎÌ¨Æë¥∂] = $Cåêƒú„üÍ; return self::$cacheSourceInfo[$aÎÌ¨Æë¥∂]; goto EåØèÖ∫√Ñ; e¥‡⁄Àéÿö: $aÎÌ¨Æë¥∂ = $A„º∏›éç¬[422] . $Eéπ∂Õ÷“»; $d‡ˆáÃÏ÷— = _get(self::$cacheSourceInfo, $aÎÌ¨Æë¥∂); if ($d‡ˆáÃÏ÷—) { return $d‡ˆáÃÏ÷—; } goto C¯√°€èÒ¨; EåØèÖ∫√Ñ: } public function sourceCacheClear($dãÔüÉÜ–± = false) { if ($dãÔüÉÜ–± == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[áí∂¯Â¸Áò][422] . $dãÔüÉÜ–±]); } public function pathInfoByPath($F–ÓÆõ¬‚ô, $eåè¯Í¨™ñ) { $b∂¶ô®Ñ©Ü =& $_SERVER[áí∂¯Â¸Áò]; $b≈›ö∂◊µ˜ = !$eåè¯Í¨™ñ ? array() : explode($b∂¶ô®Ñ©Ü[8], trim($eåè¯Í¨™ñ, $b∂¶ô®Ñ©Ü[8])); $cÂ≤¥æœëÜ = $F–ÓÆõ¬‚ô; foreach ($b≈›ö∂◊µ˜ as $eçóÎ◊⁄Ãñ) { $A≤Á€∞ëÇº = array($b∂¶ô®Ñ©Ü[474] => $cÂ≤¥æœëÜ, $b∂¶ô®Ñ©Ü[28] => $eçóÎ◊⁄Ãñ); $AÆ—å„ƒç = $this->where($A≤Á€∞ëÇº)->select(); if (!$AÆ—å„ƒç) { return !1; } $AÆ—å„ƒç = array_sort_by($AÆ—å„ƒç, $b∂¶ô®Ñ©Ü[409]); $cÂ≤¥æœëÜ = $AÆ—å„ƒç[0][$b∂¶ô®Ñ©Ü[381]]; } return $this->pathInfo($cÂ≤¥æœëÜ, !0); } protected function updateModifyTime($CÒÑñÈıê¿) { goto cŸ´†Õ§ﬁ‡; a¶˘œ§…®í: foreach ($CÒÑñÈıê¿ as $eõàÏõ–⁄≈ => $Câ‡ª«êÛ˜) { $CÒÑñÈıê¿[$eõàÏõ–⁄≈] = intval($Câ‡ª«êÛ˜); } $E‰ÃÈˆ⁄¨Ç = array($f·ÃÁìÉèï[381] => array($f·ÃÁìÉèï[7], $CÒÑñÈıê¿)); $cí⁄ãÜÜ£ô = array($f·ÃÁìÉèï[537] => USER_ID, $f·ÃÁìÉèï[402] => time()); goto C…§ì§‡ãÃ; cŸ´†Õ§ﬁ‡: $f·ÃÁìÉèï =& $_SERVER[áí∂¯Â¸Áò]; if (!$CÒÑñÈıê¿) { return; } if (!is_array($CÒÑñÈıê¿)) { $CÒÑñÈıê¿ = array($CÒÑñÈıê¿); } goto a¶˘œ§…®í; C…§ì§‡ãÃ: $this->where($E‰ÃÈˆ⁄¨Ç)->save($cí⁄ãÜÜ£ô); goto e’ïÔËüûê; e’ïÔËüûê: } public function folderSizeReset($eÑ«úﬁÌﬁﬂ) { goto DÀΩÀàëòπ; d¥î·™ï¶è: $F¿∆›ï≈©ë = $aöÃÉë∑ã£ - intval($E ¶µ…‘é…[$dÚµ˜ﬁÚ¿[77]]); if ($F¿∆›ï≈©ë == 0) { return CacheLock::unlock($Aûﬁ‹¶∑ëﬁ); } $this->where(array($dÚµ˜ﬁÚ¿[395] => $eÑ«úﬁÌﬁﬂ))->setField($dÚµ˜ﬁÚ¿[77], $aöÃÉë∑ã£); goto AéèÆ÷À®ê; AéèÆ÷À®ê: $e—√‡äø®î = $this->parentLevelArray($E ¶µ…‘é…[$dÚµ˜ﬁÚ¿[472]]); if ($e—√‡äø®î) { $e»Ììéˆäı = array($dÚµ˜ﬁÚ¿[381] => array($dÚµ˜ﬁÚ¿[396], $e—√‡äø®î)); if ($F¿∆›ï≈©ë < 0) { $e»Ììéˆäı[$dÚµ˜ﬁÚ¿[77]] = array($dÚµ˜ﬁÚ¿[932], abs($F¿∆›ï≈©ë)); } $this->where($e»Ììéˆäı)->setAdd($dÚµ˜ﬁÚ¿[77], $F¿∆›ï≈©ë); } $this->targetSpaceUpdate($E ¶µ…‘é…[$dÚµ˜ﬁÚ¿[383]], $E ¶µ…‘é…[$dÚµ˜ﬁÚ¿[469]]); goto AõÔù≥åùÆ; BÒÊ®Û´Ù¨: CacheLock::lock($Aûﬁ‹¶∑ëﬁ, 20); $this->sourceCacheClear($eÑ«úﬁÌﬁﬂ); $E ¶µ…‘é… = $this->sourceInfo($eÑ«úﬁÌﬁﬂ); goto b¥¬òªÀ‘™; AõÔù≥åùÆ: CacheLock::unlock($Aûﬁ‹¶∑ëﬁ); goto dœè°±ù≥´; DÀΩÀàëòπ: $dÚµ˜ﬁÚ¿ =& $_SERVER[áí∂¯Â¸Áò]; if ($this->statusIgnoreResetSpace) { return; } $Aûﬁ‹¶∑ëﬁ = $dÚµ˜ﬁÚ¿[2391] . $eÑ«úﬁÌﬁﬂ; goto BÒÊ®Û´Ù¨; b¥¬òªÀ‘™: $e»Ììéˆäı = array($dÚµ˜ﬁÚ¿[380] => $eÑ«úﬁÌﬁﬂ, $dÚµ˜ﬁÚ¿[408] => 0); $aöÃÉë∑ã£ = $this->where($e»Ììéˆäı)->sum($dÚµ˜ﬁÚ¿[77]); $aöÃÉë∑ã£ = intval($aöÃÉë∑ã£); goto d¥î·™ï¶è; dœè°±ù≥´: } public function folderSizeResetChildren($aü‰πó›ë©) { goto bò±É˜ïÊÁ; f¢ä¬√ƒæ…: $bë›ÖÆÊ÷‘ = array($C ’î≈·Ç§[531] => 1, $C ’î≈·Ç§[538] => array($C ’î≈·Ç§[496], $bŒ¨çéª Ö[$C ’î≈·Ç§[472]] . $aü‰πó›ë© . $C ’î≈·Ç§[497])); $dÈã»™ﬂ°ﬂ = $C ’î≈·Ç§[2392]; $c±ñﬂ¥…óá = $this->field($dÈã»™ﬂ°ﬂ)->where($bë›ÖÆÊ÷‘)->select(); goto füÂÙ«©÷ß; F„óÍ›¿íÉ: $c±ñﬂ¥…óá[] = $bŒ¨çéª Ö; $c±ñﬂ¥…óá = array_to_keyvalue($c±ñﬂ¥…óá, $C ’î≈·Ç§[381]); foreach ($c±ñﬂ¥…óá as $e—€ÖÁŒ”Õ => $a ï˜ìôÔú) { $c±ñﬂ¥…óá[$e—€ÖÁŒ”Õ][$C ’î≈·Ç§[2393]] = $c±ñﬂ¥…óá[$e—€ÖÁŒ”Õ][$C ’î≈·Ç§[77]]; $c±ñﬂ¥…óá[$e—€ÖÁŒ”Õ][$C ’î≈·Ç§[77]] = 0; } goto dàÇîÿ∆’Ó; dàÇîÿ∆’Ó: foreach ($fÓï¿ÌËŸÇ as $a ï˜ìôÔú) { $EàâêÀ∞â≠ = $a ï˜ìôÔú[$C ’î≈·Ç§[474]] . $C ’î≈·Ç§[33]; if (!isset($c±ñﬂ¥…óá[$EàâêÀ∞â≠])) { continue; } if ($a ï˜ìôÔú[$C ’î≈·Ç§[409]] == $c±ñﬂ¥…óá[$EàâêÀ∞â≠][$C ’î≈·Ç§[409]]) { $c±ñﬂ¥…óá[$EàâêÀ∞â≠][$C ’î≈·Ç§[77]] += $a ï˜ìôÔú[$C ’î≈·Ç§[77]]; } } foreach ($c±ñﬂ¥…óá as $a ï˜ìôÔú) { $cÏß≈ı‹◊ı = $this->parentLevelArray($a ï˜ìôÔú[$C ’î≈·Ç§[472]]); foreach ($cÏß≈ı‹◊ı as $EàâêÀ∞â≠) { $EàâêÀ∞â≠ = $EàâêÀ∞â≠ . $C ’î≈·Ç§[33]; if (!isset($c±ñﬂ¥…óá[$EàâêÀ∞â≠])) { continue; } if ($a ï˜ìôÔú[$C ’î≈·Ç§[409]] == $c±ñﬂ¥…óá[$EàâêÀ∞â≠][$C ’î≈·Ç§[409]]) { $c±ñﬂ¥…óá[$EàâêÀ∞â≠][$C ’î≈·Ç§[77]] += $a ï˜ìôÔú[$C ’î≈·Ç§[77]]; } } } $f¨Û€¶ÉÇ§ = array(); goto b§Ÿã‘∏ª›; füÂÙ«©÷ß: $bë›ÖÆÊ÷‘[$C ’î≈·Ç§[382]] = 0; $fÓï¿ÌËŸÇ = $this->field($dÈã»™ﬂ°ﬂ)->where($bë›ÖÆÊ÷‘)->select(); if (!$fÓï¿ÌËŸÇ) { return; } goto F„óÍ›¿íÉ; bò±É˜ïÊÁ: $C ’î≈·Ç§ =& $_SERVER[áí∂¯Â¸Áò]; $this->sourceCacheClear($aü‰πó›ë©); $bŒ¨çéª Ö = $this->sourceInfo($aü‰πó›ë©); goto f¢ä¬√ƒæ…; b§Ÿã‘∏ª›: foreach ($c±ñﬂ¥…óá as $a ï˜ìôÔú) { if ($a ï˜ìôÔú[$C ’î≈·Ç§[77]] == $a ï˜ìôÔú[$C ’î≈·Ç§[2393]]) { continue; } $f¨Û€¶ÉÇ§[] = array($C ’î≈·Ç§[381], $a ï˜ìôÔú[$C ’î≈·Ç§[381]], $C ’î≈·Ç§[77], $a ï˜ìôÔú[$C ’î≈·Ç§[77]]); } $this->saveAll($f¨Û€¶ÉÇ§); goto BÀèà≥íëœ; BÀèà≥íëœ: } public function userSpaceReset($cÉ≤Ö»Öâ» = false) { $E†πÉÔ‹∫ =& $_SERVER[áí∂¯Â¸Áò]; $bìÛà∂Óı÷ = $this->where(array($E†πÉÔ‹∫[383] => self::TYPE_USER, $E†πÉÔ‹∫[469] => $cÉ≤Ö»Öâ», $E†πÉÔ‹∫[382] => 0))->sum($E†πÉÔ‹∫[77]); Model($E†πÉÔ‹∫[487])->userEdit($cÉ≤Ö»Öâ», array($E†πÉÔ‹∫[2098] => $bìÛà∂Óı÷)); } public function targetSpaceUpdate($E¬ÆÁ∆œΩá, $BÇ≤Îëœá∆) { $CÓ≠öÏ…√ =& $_SERVER[áí∂¯Â¸Áò]; if (!$BÇ≤Îëœá∆) { return; } if (!in_array($E¬ÆÁ∆œΩá, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $FÎÂó”ù†Ç = $this->targetSpaceSize($E¬ÆÁ∆œΩá, $BÇ≤Îëœá∆); if ($E¬ÆÁ∆œΩá == self::TYPE_USER) { Model($CÓ≠öÏ…√[487])->userEdit($BÇ≤Îëœá∆, array($CÓ≠öÏ…√[2098] => $FÎÂó”ù†Ç)); } else { if ($E¬ÆÁ∆œΩá == self::TYPE_GROUP) { Model($CÓ≠öÏ…√[471])->groupEdit($BÇ≤Îëœá∆, array($CÓ≠öÏ…√[2098] => $FÎÂó”ù†Ç)); } } } public function targetSpaceSize($EºÜ®óŸÙπ, $F”€‘—áØÍ) { goto Fì˜òºµ¨˘; fèŸôÇèå: return $eêôØ£•ëÏ; goto F∫≈„‹òÿè; f™ä†ÿ‹ÏØ: $Eó°ıÜéˆá = array_to_keyvalue($Eó°ıÜéˆá, $cúä‹”ü‘É[33], $cúä‹”ü‘É[381]); $Eó°ıÜéˆá = array_unique(array_filter($Eó°ıÜéˆá)); if ($Eó°ıÜéˆá) { $aâ‘É⁄êæù = array($cúä‹”ü‘É[395] => array($cúä‹”ü‘É[396], $Eó°ıÜéˆá)); $eêôØ£•ëÏ += floatval($this->where($aâ‘É⁄êæù)->sum($cúä‹”ü‘É[77])); } goto fèŸôÇèå; Fì˜òºµ¨˘: $cúä‹”ü‘É =& $_SERVER[áí∂¯Â¸Áò]; $FÌﬁÊãè®á = $this->sourceRoot($EºÜ®óŸÙπ, $F”€‘—áØÍ, !0); if (!$FÌﬁÊãè®á) { return 0; } goto fÌéŒ⁄æ± ; fÌéŒ⁄æ± : $eêôØ£•ëÏ = floatval($FÌﬁÊãè®á[$cúä‹”ü‘É[77]]); $aâ‘É⁄êæù = array($cúä‹”ü‘É[538] => array($cúä‹”ü‘É[496], $cúä‹”ü‘É[483] . $FÌﬁÊãè®á[$cúä‹”ü‘É[381]] . $cúä‹”ü‘É[497])); $Eó°ıÜéˆá = Model($cúä‹”ü‘É[407])->field($cúä‹”ü‘É[395])->where($aâ‘É⁄êæù)->select(); goto f™ä†ÿ‹ÏØ; F∫≈„‹òÿè: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($c®‹ëÜºë) { return $this->fileTypeProfile($c®‹ëÜºë, SourceModel::TYPE_USER); } public function groupFileTypeProfile($C‚ËáòêÖ¶) { return $this->fileTypeProfile($C‚ËáòêÖ¶, SourceModel::TYPE_GROUP); } private function fileTypeProfile($dÌù˘ËÁúè, $aª´âÖÈçÉ) { goto e∂˜»Î™Ñô; a¡ ·∆∆„˘: if ($a√ÈÚƒÙ∏) { return $a√ÈÚƒÙ∏; } $F…Îöå‹≠ª = array($CÂë±¥ÃÏı[531] => 0); if ($dÌù˘ËÁúè != !1) { $F…Îöå‹≠ª[$CÂë±¥ÃÏı[469]] = $dÌù˘ËÁúè; $F…Îöå‹≠ª[$CÂë±¥ÃÏı[383]] = $aª´âÖÈçÉ; } goto a«í¥”ãç·; e∂˜»Î™Ñô: $CÂë±¥ÃÏı =& $_SERVER[áí∂¯Â¸Áò]; $câÜ∫‘éÙã = $CÂë±¥ÃÏı[2394] . $dÌù˘ËÁúè . $CÂë±¥ÃÏı[70] . $aª´âÖÈçÉ; $a√ÈÚƒÙ∏ = Cache::get($câÜ∫‘éÙã); goto a¡ ·∆∆„˘; a«í¥”ãç·: $fÍÛÕïÓÚ° = array(); $fÍÛÕïÓÚ°[$CÂë±¥ÃÏı[2395]] = array($CÂë±¥ÃÏı[2396] => LNG($CÂë±¥ÃÏı[2395]), $CÂë±¥ÃÏı[2397] => $this->where($F…Îöå‹≠ª)->count(), $CÂë±¥ÃÏı[533] => $this->where($F…Îöå‹≠ª)->sum($CÂë±¥ÃÏı[77])); $Aâÿ˜ëüÃÃ = KodIO::fileTypeList(); goto A·¶ô¿·•„; A·¶ô¿·•„: foreach ($Aâÿ˜ëüÃÃ as $e£ÁÉ˘¥à… => $B˜∑†∏…»∑) { $F…Îöå‹≠ª[$CÂë±¥ÃÏı[384]] = $this->fileTypeWhere($e£ÁÉ˘¥à…); $fÍÛÕïÓÚ°[$e£ÁÉ˘¥à…] = array($CÂë±¥ÃÏı[2396] => $B˜∑†∏…»∑[$CÂë±¥ÃÏı[28]], $CÂë±¥ÃÏı[2397] => $this->where($F…Îöå‹≠ª)->count(), $CÂë±¥ÃÏı[533] => $this->where($F…Îöå‹≠ª)->sum($CÂë±¥ÃÏı[77])); } Cache::set($câÜ∫‘éÙã, $fÍÛÕïÓÚ°, 1200); return $fÍÛÕïÓÚ°; goto CŒ€çÜı˘π; CŒ€çÜı˘π: } public function fileNameExist($DèäÊ∞ìˆ‡, $aÁüÿé«”Ã) { $Fïê‹ âÀ¿ =& $_SERVER[áí∂¯Â¸Áò]; $C‘¡“œ¡È≤ = $this->childList($DèäÊ∞ìˆ‡); foreach ($C‘¡“œ¡È≤ as $F›ê©Ñ¶ÉÇ) { if ($F›ê©Ñ¶ÉÇ[$Fïê‹ âÀ¿[28]] == $aÁüÿé«”Ã) { return $F›ê©Ñ¶ÉÇ[$Fïê‹ âÀ¿[381]]; } if (strtolower($F›ê©Ñ¶ÉÇ[$Fïê‹ âÀ¿[28]]) == strtolower($aÁüÿé«”Ã)) { return $F›ê©Ñ¶ÉÇ[$Fïê‹ âÀ¿[381]]; } } return !1; } public function childList($CÛ–âÓî“ï) { goto dñïëÜ≥ë«; eıÔãÍâœ≠: $B∫Çîû÷Î¯ = array($dè‘¯∫÷‡Ÿ[474] => intval($CÛ–âÓî“ï), $dè‘¯∫÷‡Ÿ[409] => 0); $f∆»Ÿ¿€‚ = $this->where($B∫Çîû÷Î¯)->select(); $f∆»Ÿ¿€‚ = $f∆»Ÿ¿€‚ ? $f∆»Ÿ¿€‚ : array(); goto eÿÛ…°È∑◊; dñïëÜ≥ë«: $dè‘¯∫÷‡Ÿ =& $_SERVER[áí∂¯Â¸Áò]; $bû¢¢ˆ…Øæ = $dè‘¯∫÷‡Ÿ[2376] . $CÛ–âÓî“ï; if (isset(self::$cacheChildList[$bû¢¢ˆ…Øæ])) { return self::$cacheChildList[$bû¢¢ˆ…Øæ]; } goto eıÔãÍâœ≠; eÿÛ…°È∑◊: self::$cacheChildList[$bû¢¢ˆ…Øæ] = $f∆»Ÿ¿€‚; foreach ($f∆»Ÿ¿€‚ as $D’ˆ¥É•Ÿà) { $bû¢¢ˆ…Øæ = $dè‘¯∫÷‡Ÿ[422] . $D’ˆ¥É•Ÿà[$dè‘¯∫÷‡Ÿ[381]]; self::$cacheSourceInfo[$bû¢¢ˆ…Øæ] = $D’ˆ¥É•Ÿà; } return $f∆»Ÿ¿€‚; goto CΩëª÷∑É¥; CΩëª÷∑É¥: } public function fileNameAuto($däœãÖ§úÚ, $eı‹‡©ãîí, $AëÉúëãè‘ = REPEAT_RENAME, $FêËüÏçÇ÷ = false) { $f—∑ò…≈•∞ =& $_SERVER[áí∂¯Â¸Áò]; $FÓË£åÂ¶ù = $this->childList($däœãÖ§úÚ); $bÁíﬁöÂÔ√ = array_to_keyvalue($FÓË£åÂ¶ù, $f—∑ò…≈•∞[33], $f—∑ò…≈•∞[28]); return $this->fileNameAutoGet($bÁíﬁöÂÔ√, $eı‹‡©ãîí, $AëÉúëãè‘, $FêËüÏçÇ÷); } public function fileNameAutoGet($b™î„√†„‰, $BúûÛ¡ Çì, $eüé≤ ö¥, $Bñ¿Ú≠†¡ì) { $fÏ”ú™ÑŸÉ =& $_SERVER[áí∂¯Â¸Áò]; if ($eüé≤ ö¥ == REPEAT_REPLACE || !$b™î„√†„‰ || !in_array_not_case($BúûÛ¡ Çì, $b™î„√†„‰) || $Bñ¿Ú≠†¡ì && $eüé≤ ö¥ != REPEAT_RENAME_FOLDER) { return $BúûÛ¡ Çì; } if ($eüé≤ ö¥ == REPEAT_SKIP) { return !1; } $EÚ“˘≠¿Ø§ = $fÏ”ú™ÑŸÉ[91] . get_path_ext($BúûÛ¡ Çì); $EÚ“˘≠¿Ø§ = $EÚ“˘≠¿Ø§ == $fÏ”ú™ÑŸÉ[91] || $Bñ¿Ú≠†¡ì ? $fÏ”ú™ÑŸÉ[33] : $EÚ“˘≠¿Ø§; for ($eìîáÏ‚óà = 1; $eìîáÏ‚óà <= count($b™î„√†„‰) + 1; $eìîáÏ‚óà++) { $FÛäıûêòë = substr($BúûÛ¡ Çì, 0, strlen($BúûÛ¡ Çì) - strlen($EÚ“˘≠¿Ø§)); $a›è∞ÖàÛ„ = $FÛäıûêòë . "\x28{$eìîáÏ‚óà}\51{$EÚ“˘≠¿Ø§}"; if (!in_array_not_case($a›è∞ÖàÛ„, $b™î„√†„‰)) { return $a›è∞ÖàÛ„; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\x75\162\143\145\x5f\162\145\x63\x79\x63\154\145"; protected $dataAuto = array(array("\x63\162\145\141\x74\x65\x54\x69\155\145", "\x74\151\155\145", "\151\x6e\x73\145\x72\164", "\x66\x75\x6e\x63\x74\x69\x6f\x6e")); public function listData($CÊ…éòÉ™‹ = false) { $F†ãÇ—⁄ŒÃ =& $_SERVER[áí∂¯Â¸Áò]; $CÊ…éòÉ™‹ = $CÊ…éòÉ™‹ ? $CÊ…éòÉ™‹ : USER_ID; $cÈ…õ≠ﬂÕ† = $this->where(array($F†ãÇ—⁄ŒÃ[1434] => $CÊ…éòÉ™‹))->select(); return array_to_keyvalue($cÈ…õ≠ﬂÕ†, $F†ãÇ—⁄ŒÃ[33], $F†ãÇ—⁄ŒÃ[381]); } public function moveToRecycle($Dò≤Á€±™ß) { goto dÜÉ÷‹ºÚ…; AﬂæÆÖ∂ûÌ: $this->recycleMove($Dò≤Á€±™ß, 1); if ($bıãŸ›∂Ô∏[$dáë‘®ÿé[382]] == $dáë‘®ÿé[83]) { $Bó§∏Ÿø§§ = array($dáë‘®ÿé[538] => array($dáë‘®ÿé[496], $bıãŸ›∂Ô∏[$dáë‘®ÿé[472]] . $Dò≤Á€±™ß . $dáë‘®ÿé[497])); $D÷æ≈ºúÿÙ->where($Bó§∏Ÿø§§)->setField($dáë‘®ÿé[409], 1); } goto CÉè◊öä±ã; dÜÉ÷‹ºÚ…: $dáë‘®ÿé =& $_SERVER[áí∂¯Â¸Áò]; $D÷æ≈ºúÿÙ = Model($dáë‘®ÿé[1124]); $bıãŸ›∂Ô∏ = $D÷æ≈ºúÿÙ->sourceInfo($Dò≤Á€±™ß); goto bè‹ÛàúÔÓ; bè‹ÛàúÔÓ: if (!$bıãŸ›∂Ô∏ || $bıãŸ›∂Ô∏[$dáë‘®ÿé[409]] == $dáë‘®ÿé[83]) { return; } $f¶ïº·Ø∞¡ = array($dáë‘®ÿé[395] => $Dò≤Á€±™ß, $dáë‘®ÿé[1434] => USER_ID, $dáë‘®ÿé[534] => $bıãŸ›∂Ô∏[$dáë‘®ÿé[383]], $dáë‘®ÿé[535] => $bıãŸ›∂Ô∏[$dáë‘®ÿé[469]], $dáë‘®ÿé[538] => $bıãŸ›∂Ô∏[$dáë‘®ÿé[472]]); $this->add($f¶ïº·Ø∞¡); goto AﬂæÆÖ∂ûÌ; CÉè◊öä±ã: } public function clear() { $this->remove(!1); } public function remove($E’û√ªû∂≤ = false) { goto f°íÉâÛßò; b⁄–‚ö¿á—: $E’û√ªû∂≤ = $E’û√ªû∂≤ === !1 ? !1 : $E’û√ªû∂≤; $eúÉ™’÷ç— = array(); foreach ($aåÖª§–Í¢ as $B¨ë†ñéƒè) { if ($E’û√ªû∂≤ != !1 && !in_array($B¨ë†ñéƒè, $E’û√ªû∂≤)) { continue; } $d∑Áﬁπ≤÷Ü = $A”—‡∆˘‘á->sourceInfo($B¨ë†ñéƒè); $A”—‡∆˘‘á->remove($B¨ë†ñéƒè, !1); $eÖΩÀ’Í»º = $d∑Áﬁπ≤÷Ü[$D≥è∫´‘ÊÎ[383]] . $D≥è∫´‘ÊÎ[70] . $d∑Áﬁπ≤÷Ü[$D≥è∫´‘ÊÎ[469]]; $eúÉ™’÷ç—[$eÖΩÀ’Í»º] = array($D≥è∫´‘ÊÎ[534] => $d∑Áﬁπ≤÷Ü[$D≥è∫´‘ÊÎ[383]], $D≥è∫´‘ÊÎ[469] => $d∑Áﬁπ≤÷Ü[$D≥è∫´‘ÊÎ[469]]); $this->where(array($D≥è∫´‘ÊÎ[381] => $B¨ë†ñéƒè))->delete(); } goto aÚéö∆öÙ; aÚéö∆öÙ: foreach ($eúÉ™’÷ç— as $D°≠ö∆ç…ü) { $A”—‡∆˘‘á->targetSpaceUpdate($D°≠ö∆ç…ü[$D≥è∫´‘ÊÎ[383]], $D°≠ö∆ç…ü[$D≥è∫´‘ÊÎ[469]]); } goto BÕÑÂÜß √; f°íÉâÛßò: $D≥è∫´‘ÊÎ =& $_SERVER[áí∂¯Â¸Áò]; $A”—‡∆˘‘á = Model($D≥è∫´‘ÊÎ[1124]); $aåÖª§–Í¢ = $this->listData(); goto b⁄–‚ö¿á—; BÕÑÂÜß √: } public function restore($Dèí ºáÁ› = false) { goto B√ãÍØ¨†¡; DÂ¶óÆíêı: $Dèí ºáÁ› = $Dèí ºáÁ› == !1 ? !1 : $Dèí ºáÁ›; if (!$aˆÈ‹‘ıÍ˜) { return !0; } $fÔΩãÀ»´© = array(); goto cÁ®π∏ÍÕ±; cÁ®π∏ÍÕ±: foreach ($aˆÈ‹‘ıÍ˜ as $Dò∂ÙÈÔ„’) { goto FÆ´Ç≤ú´›; F°≠ÓÓ”ô : if ($eÍ¥ª™©•ï[$F≤à’ïô∞±[382]] == $F≤à’ïô∞±[83]) { $båàŸ±•îœ = array($F≤à’ïô∞±[538] => array($F≤à’ïô∞±[496], $eÍ¥ª™©•ï[$F≤à’ïô∞±[472]] . $Dò∂ÙÈÔ„’ . $F≤à’ïô∞±[497])); $bèó·áûªﬂ->where($båàŸ±•îœ)->setField($F≤à’ïô∞±[409], 0); $this->restoreFolderChildren($Dò∂ÙÈÔ„’, $aˆÈ‹‘ıÍ˜); } $this->where(array($F≤à’ïô∞±[381] => $Dò∂ÙÈÔ„’))->delete(); $bèó·áûªﬂ->folderSizeReset($eÍ¥ª™©•ï[$F≤à’ïô∞±[474]]); goto dê‚ùééìí; FÆ´Ç≤ú´›: if ($Dèí ºáÁ› != !1 && !in_array($Dò∂ÙÈÔ„’, $Dèí ºáÁ›)) { continue; } $eÍ¥ª™©•ï = $bèó·áûªﬂ->sourceInfo($Dò∂ÙÈÔ„’); $b∞Øàì©Ú£ = $bèó·áûªﬂ->sourceInfo($eÍ¥ª™©•ï[$F≤à’ïô∞±[474]]); goto A¶ ´‚ä± ; dê‚ùééìí: $fÔΩãÀ»´©[] = $eÍ¥ª™©•ï[$F≤à’ïô∞±[474]]; if ($eÍ¥ª™©•ï[$F≤à’ïô∞±[382]] == $F≤à’ïô∞±[83]) { $fÔΩãÀ»´©[] = $Dò∂ÙÈÔ„’; } $bèó·áûªﬂ->lockMoveEnd($Dò∂ÙÈÔ„’); goto f‚ŒÒ¬‘·°; A¶ ´‚ä± : if ($b∞Øàì©Ú£[$F≤à’ïô∞±[409]] == $F≤à’ïô∞±[83]) { continue; } $bèó·áûªﬂ->lockMoveStart($Dò∂ÙÈÔ„’); $this->recycleMove($Dò∂ÙÈÔ„’, 0); goto F°≠ÓÓ”ô ; f‚ŒÒ¬‘·°: } $bèó·áûªﬂ->updateModifyTime($fÔΩãÀ»´©); goto CÍÒﬁ¶√†Ö; B√ãÍØ¨†¡: $F≤à’ïô∞± =& $_SERVER[áí∂¯Â¸Áò]; $bèó·áûªﬂ = Model($F≤à’ïô∞±[1124]); $aˆÈ‹‘ıÍ˜ = $this->listData(); goto DÂ¶óÆíêı; CÍÒﬁ¶√†Ö: } private function restoreFolderChildren($AÑ‰òûÖÿ, $fá—‹˘πíˆ) { goto Eä›ÒÆÆøù; Eä›ÒÆÆøù: $DœÚÑŸÜ÷Æ =& $_SERVER[áí∂¯Â¸Áò]; $C°ıñ˜¨˘œ = Model($DœÚÑŸÜ÷Æ[1124]); $A‚ü≤¥‹Øé = array($DœÚÑŸÜ÷Æ[381] => array($DœÚÑŸÜ÷Æ[7], array())); goto B´ø”¢·ò‘; Bº∫Ñç¯œÏ: $A‚ü≤¥‹Øé[$DœÚÑŸÜ÷Æ[381]][1] = array_unique($A‚ü≤¥‹Øé[$DœÚÑŸÜ÷Æ[381]][1]); $A‚ü≤¥‹Øé[$DœÚÑŸÜ÷Æ[917]] = $DœÚÑŸÜ÷Æ[2197]; $C°ıñ˜¨˘œ->where($A‚ü≤¥‹Øé)->setField($DœÚÑŸÜ÷Æ[409], 1); goto D”¢ﬂ¶àà‚; B´ø”¢·ò‘: foreach ($fá—‹˘πíˆ as $e¡Ãô¿≈©Ò) { if ($e¡Ãô¿≈©Ò == $AÑ‰òûÖÿ) { continue; } if (!$C°ıñ˜¨˘œ->isParentOf($AÑ‰òûÖÿ, $e¡Ãô¿≈©Ò)) { continue; } $bÑıÂÃ®Í = $C°ıñ˜¨˘œ->sourceInfo($e¡Ãô¿≈©Ò); if ($bÑıÂÃ®Í[$DœÚÑŸÜ÷Æ[382]] == $DœÚÑŸÜ÷Æ[83]) { $A‚ü≤¥‹Øé[] = array($DœÚÑŸÜ÷Æ[538] => array($DœÚÑŸÜ÷Æ[496], $bÑıÂÃ®Í[$DœÚÑŸÜ÷Æ[472]] . $e¡Ãô¿≈©Ò . $DœÚÑŸÜ÷Æ[497])); } else { $A‚ü≤¥‹Øé[$DœÚÑŸÜ÷Æ[381]][1][] = $e¡Ãô¿≈©Ò; } } if (!$A‚ü≤¥‹Øé[$DœÚÑŸÜ÷Æ[381]][1]) { unset($A‚ü≤¥‹Øé[$DœÚÑŸÜ÷Æ[381]]); } if (!$A‚ü≤¥‹Øé) { return; } goto Bº∫Ñç¯œÏ; D”¢ﬂ¶àà‚: } private function recycleMove($aúòÇΩ‚åü, $Fûñπﬁ›Õë = 1) { $C·üﬁ”Ò≈π =& $_SERVER[áí∂¯Â¸Áò]; $D˜ÍçÀÿÒ™ = Model($C·üﬁ”Ò≈π[1124]); $E∫äªÒ√•˘ = Model($C·üﬁ”Ò≈π[2398]); $F”®‹ïÿ®° = array($C·üﬁ”Ò≈π[381] => $aúòÇΩ‚åü); if ($Fûñπﬁ›Õë) { $D˜ÍçÀÿÒ™->where($F”®‹ïÿ®°)->setField($C·üﬁ”Ò≈π[409], 1); $E∫äªÒ√•˘->eventRecycle($aúòÇΩ‚åü, $C·üﬁ”Ò≈π[2399]); } else { $BÏæ§áÃÈä = $D˜ÍçÀÿÒ™->where($F”®‹ïÿ®°)->find(); $bâ »—úùª = $BÏæ§áÃÈä[$C·üﬁ”Ò≈π[382]] == $C·üﬁ”Ò≈π[83]; $fë•µó„⁄ = $D˜ÍçÀÿÒ™->fileNameAuto($BÏæ§áÃÈä[$C·üﬁ”Ò≈π[474]], $BÏæ§áÃÈä[$C·üﬁ”Ò≈π[28]], REPEAT_RENAME_FOLDER, $bâ »—úùª); if ($fë•µó„⁄ != $BÏæ§áÃÈä[$C·üﬁ”Ò≈π[28]]) { $D˜ÍçÀÿÒ™->rename($aúòÇΩ‚åü, $fë•µó„⁄); } $D˜ÍçÀÿÒ™->where($F”®‹ïÿ®°)->setField($C·üﬁ”Ò≈π[409], 0); $E∫äªÒ√•˘->eventRecycle($aúòÇΩ‚åü, $C·üﬁ”Ò≈π[2400]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\x6d\56\x73\x74\x6f\162\x61\x67\145\x4c\151\163\164"; public $field = array("\x6e\x61\155\x65", "\163\x69\172\145\x4d\141\x78", "\x73\171\x73\164\x65\155", "\x64\145\x66\141\x75\x6c\x74", "\144\162\x69\x76\145\x72", "\x63\157\x6e\146\x69\147"); public function listData($bàÑ¬î‚®õ = false, $CÿùìÑÇ®© = "\x6d\157\x64\151\146\171\124\151\x6d\145", $Bëõ⁄«∆àÀ = false) { goto c–¬˘Ÿô§—; DÉØöîÆ§•: return $e≤Ì≤†ÎìÍ; goto dùã™™◊Ÿ›; c–¬˘Ÿô§—: $Bç›‹ïÂåπ =& $_SERVER[áí∂¯Â¸Áò]; $e≤Ì≤†ÎìÍ = parent::listData($bàÑ¬î‚®õ, $CÿùìÑÇ®©, $Bëõ⁄«∆àÀ); if ($bàÑ¬î‚®õ) { return $e≤Ì≤†ÎìÍ; } goto EûÜ‡Ë¿Â§; EûÜ‡Ë¿Â§: foreach ($e≤Ì≤†ÎìÍ as $e‚È Ì∏»û => $f¨¥Éê“±•) { unset($e≤Ì≤†ÎìÍ[$e‚È Ì∏»û][$Bç›‹ïÂåπ[6]]); $e≤Ì≤†ÎìÍ[$e‚È Ì∏»û][$Bç›‹ïÂåπ[2098]] = 0; } $AÖ£¨û¡÷è = array_to_keyvalue($e≤Ì≤†ÎìÍ, $Bç›‹ïÂåπ[33], $Bç›‹ïÂåπ[371]); $this->_listAppendSize($e≤Ì≤†ÎìÍ, $AÖ£¨û¡÷è); goto DÉØöîÆ§•; dùã™™◊Ÿ›: } public function _listAppendSize(&$fóœèâÖÓà, $C£êÈ‡Ú‚£) { $D›ÌÖﬁï¯ =& $_SERVER[áí∂¯Â¸Áò]; if (!$C£êÈ‡Ú‚£) { return; } $C≥áéìûÀª = $D›ÌÖﬁï¯[2401] . implode($D›ÌÖﬁï¯[47], $C£êÈ‡Ú‚£) . $D›ÌÖﬁï¯[2402]; $C±·Éõ–πˆ = Model($D›ÌÖﬁï¯[724])->query($C≥áéìûÀª); $C±·Éõ–πˆ = array_to_keyvalue($C±·Éõ–πˆ, $D›ÌÖﬁï¯[371], $D›ÌÖﬁï¯[77]); foreach ($fóœèâÖÓà as $E∂ôå›ÎœÆ => $A≤õ≠Â±¥Ô) { $fóœèâÖÓà[$E∂ôå›ÎœÆ][$D›ÌÖﬁï¯[2098]] = isset($C±·Éõ–πˆ[$A≤õ≠Â±¥Ô[$D›ÌÖﬁï¯[371]]]) ? $C±·Éõ–πˆ[$A≤õ≠Â±¥Ô[$D›ÌÖﬁï¯[371]]] : 0; } } public function getConfig($aπíÉØÏ⁄–) { $a⁄∫°¯Âáñ = parent::listData($aπíÉØÏ⁄–); return json_decode($a⁄∫°¯Âáñ[$_SERVER[áí∂¯Â¸Áò][6]], !0); } public function update($Eôó°¿õÂ©, $e¯≈∂€ù–≠) { goto FÕ∑ç¥ú–˜; FÕ∑ç¥ú–˜: $Dÿ„Á±©º =& $_SERVER[áí∂¯Â¸Áò]; $e≠»Öêˆ°Ô = $e¯≈∂€ù–≠[$Dÿ„Á±©º[28]]; $Dî¬Ÿ⁄õåﬂ = array_to_keyvalue(parent::listData(), $Dÿ„Á±©º[28]); goto d—◊ò‡ÔØ´; fï—ºÈÈ¶¶: $e ÀïùôÆô = parent::update($Eôó°¿õÂ©, $e¯≈∂€ù–≠); if ($e ÀïùôÆô && $e¯≈∂€ù–≠[$Dÿ„Á±©º[34]]) { foreach ($Dî¬Ÿ⁄õåﬂ as $D©é≠æÀÍ◊) { if ($D©é≠æÀÍ◊[$Dÿ„Á±©º[34]] && $D©é≠æÀÍ◊[$Dÿ„Á±©º[371]] != $Eôó°¿õÂ©) { parent::update($D©é≠æÀÍ◊[$Dÿ„Á±©º[371]], array($Dÿ„Á±©º[34] => 0)); } } } return $e ÀïùôÆô; goto Eﬁà´£¶ÿ∑; d—◊ò‡ÔØ´: if (isset($Dî¬Ÿ⁄õåﬂ[$e≠»Öêˆ°Ô]) && $Dî¬Ÿ⁄õåﬂ[$e≠»Öêˆ°Ô][$Dÿ„Á±©º[371]] != $Eôó°¿õÂ©) { return !1; } if (isset($e¯≈∂€ù–≠[$Dÿ„Á±©º[2403]]) && $e¯≈∂€ù–≠[$Dÿ„Á±©º[2403]] == $Dÿ„Á±©º[83]) { $this->checkConfig($e¯≈∂€ù–≠); } unset($e¯≈∂€ù–≠[$Dÿ„Á±©º[2403]]); goto fï—ºÈÈ¶¶; Eﬁà´£¶ÿ∑: } public function add($D∫È˘¯•Ï) { goto DóäÕÛÃä˜; DóäÕÛÃä˜: $AØÁ’áûı” =& $_SERVER[áí∂¯Â¸Áò]; $d·âÃ™©ï‰ = array_to_keyvalue(parent::listData(), $AØÁ’áûı”[28]); if (isset($d·âÃ™©ï‰[$D∫È˘¯•Ï[$AØÁ’áûı”[28]]])) { return !1; } goto E˜Ã™Ö∆°Ü; E˜Ã™Ö∆°Ü: $this->checkConfig($D∫È˘¯•Ï); $aÃÌ⁄÷¥≥’ = parent::insert($D∫È˘¯•Ï); if ($aÃÌ⁄÷¥≥’ && $D∫È˘¯•Ï[$AØÁ’áûı”[34]]) { foreach ($d·âÃ™©ï‰ as $f¨¡Øì¿…ö) { if ($f¨¡Øì¿…ö[$AØÁ’áûı”[34]]) { parent::update($f¨¡Øì¿…ö[$AØÁ’áûı”[371]], array($AØÁ’áûı”[34] => 0)); } } } goto bà€ŸπÂ•†; bà€ŸπÂ•†: return $aÃÌ⁄÷¥≥’; goto bì≥ë≥Õæà; bì≥ë≥Õæà: } public function checkConfig(&$C◊—ã˘‘ÛŒ) { goto c≈Î¯Ö©≠Ú; E’ŸäèêäÇ: foreach ($fÊ”Ú»Õ·ÿ as $Fªÿ÷úéÚè => $c€Öœ∞Œ≤Ñ) { $fÊ”Ú»Õ·ÿ[$Fªÿ÷úéÚè] = trim($c€Öœ∞Œ≤Ñ); } $fÊ”Ú»Õ·ÿ[$Fı∑òπåã[2404]] = rand_string(6); $DŒçŒ∏˜…è = $GLOBALS[$Fı∑òπåã[6]][$Fı∑òπåã[84]][$Fı∑òπåã[759]]; goto C∆é¥á’äñ; B‹Ì¡Ó∞èÕ: $C◊—ã˘‘ÛŒ[$Fı∑òπåã[6]] = json_encode($fÊ”Ú»Õ·ÿ); $C◊—ã˘‘ÛŒ[$Fı∑òπåã[90]] = $d»á≠ã¯î¶; return !0; goto bú≤Ë‡∏øø; C∆é¥á’äñ: $d»á≠ã¯î¶ = isset($DŒçŒ∏˜…è[$dˆñ∞©≤‹ÿ]) ? $DŒçŒ∏˜…è[$dˆñ∞©≤‹ÿ] : ucfirst($dˆñ∞©≤‹ÿ); $E∫ÊªÆÀÜ§ = $Fı∑òπåã[71] . $d»á≠ã¯î¶; if (!$d»á≠ã¯î¶ || !class_exists($E∫ÊªÆÀÜ§)) { write_log(array($Fı∑òπåã[2405], $C◊—ã˘‘ÛŒ, get_caller_info()), $Fı∑òπåã[2406]); show_json(LNG($Fı∑òπåã[2407]), !1, $C◊—ã˘‘ÛŒ); } goto DîÑ”Ïû°Ë; c≈Î¯Ö©≠Ú: $Fı∑òπåã =& $_SERVER[áí∂¯Â¸Áò]; $dˆñ∞©≤‹ÿ = strtolower($C◊—ã˘‘ÛŒ[$Fı∑òπåã[90]]); $fÊ”Ú»Õ·ÿ = json_decode($C◊—ã˘‘ÛŒ[$Fı∑òπåã[6]], !0); goto E’ŸäèêäÇ; DîÑ”Ïû°Ë: $c·àòÏ™—ó = new $E∫ÊªÆÀÜ§($fÊ”Ú»Õ·ÿ); if (in_array($dˆñ∞©≤‹ÿ, $c·àòÏ™—ó->objectDriver)) { if (!$c·àòÏ™—ó->isBucketCors() && !$c·àòÏ™—ó->setBucketCors()) { $a¥áÕ¯—Ïö = LNG($Fı∑òπåã[2408]); $a¥áÕ¯—Ïö .= $Fı∑òπåã[2409] . LNG($Fı∑òπåã[2410]); show_json($a¥áÕ¯—Ïö, !1); } } $Dú©´Ëû°¨ = rtrim($fÊ”Ú»Õ·ÿ[$Fı∑òπåã[1032]], $Fı∑òπåã[8]) . $Fı∑òπåã[8]; goto b·ŸÖ¯Íû¿; b·ŸÖ¯Íû¿: $aﬁëﬂ∆ôÜÊ = $c·àòÏ™—ó->getPath($Dú©´Ëû°¨ . $Fı∑òπåã[1993]); if (!$c·àòÏ™—ó->mkfile($aﬁëﬂ∆ôÜÊ)) { show_json(LNG($Fı∑òπåã[2408]), !1); } $fÊ”Ú»Õ·ÿ[$Fı∑òπåã[1032]] = $Dú©´Ëû°¨; goto B‹Ì¡Ó∞èÕ; bú≤Ë‡∏øø: } public function driverListSystem() { $dˆÆÁ´∞ä„ =& $_SERVER[áí∂¯Â¸Áò]; $c…§â¯÷Æ‰ = parent::listData(); $f‡Œ–ºÎô¢ = array(); foreach ($c…§â¯÷Æ‰ as $DÊøè„ÃØõ) { unset($DÊøè„ÃØõ[$dˆÆÁ´∞ä„[191]], $DÊøè„ÃØõ[$dˆÆÁ´∞ä„[107]]); $DÊøè„ÃØõ[$dˆÆÁ´∞ä„[6]] = json_decode($DÊøè„ÃØõ[$dˆÆÁ´∞ä„[6]], !0); $f‡Œ–ºÎô¢[] = $DÊøè„ÃØõ; } return $f‡Œ–ºÎô¢; } public function defaultDriver() { $DÏÈøõé∑È =& $_SERVER[áí∂¯Â¸Áò]; $e’ Œﬁƒ™‰ = parent::listData(); $eÂÚ≤∫Ú»â = array_filter_by_field($e’ Œﬁƒ™‰, $DÏÈøõé∑È[34], 1); $eÂÚ≤∫Ú»â = $eÂÚ≤∫Ú»â[0]; if ($eÂÚ≤∫Ú»â) { $eÂÚ≤∫Ú»â[$DÏÈøõé∑È[6]] = json_decode($eÂÚ≤∫Ú»â[$DÏÈøõé∑È[6]], !0); } return $eÂÚ≤∫Ú»â; } public function driverInfo($C◊‚ä•¨‡ä) { $eÎÕÜÚ†‚˘ =& $_SERVER[áí∂¯Â¸Áò]; $døáˆ¯É®  = array_to_keyvalue(parent::listData(), $eÎÕÜÚ†‚˘[371]); if (!isset($døáˆ¯É® [$C◊‚ä•¨‡ä])) { return !1; } $CÉ€èá”Ö∆ = $døáˆ¯É® [$C◊‚ä•¨‡ä]; $CÉ€èá”Ö∆[$eÎÕÜÚ†‚˘[6]] = json_decode($CÉ€èá”Ö∆[$eÎÕÜÚ†‚˘[6]], !0); return $CÉ€èá”Ö∆; } public function remove($aƒÔ∏óÕÿœ) { $this->removeShareItems($aƒÔ∏óÕÿœ); return parent::remove($aƒÔ∏óÕÿœ); } public function removeWithFile($EªÑ≠é…Ωÿ, $bùèÆ∂ªò‡) { goto Dœ∑ﬂù∫ß‰; fî∑»°Ì∑¬: if (!$Bâã¿£ö‡ä) { $A÷ÖßﬂÉúø->stop($e‘ÛÑ±é∫à); return !1; } $A÷ÖßﬂÉúø->end(); if ($bùèÆ∂ªò‡ == $B≥Û¢ÈâÜ¡[2078]) { $this->remove($EªÑ≠é…Ωÿ); } goto C≈›‚¶™ ã; eßÍùÑØﬁ˘: $B∑∑æãÚç§ = "\173\151\x6f\x3a{$dﬂæ¡íôÎ≤}\x7d\x2f"; $Bâã¿£ö‡ä = !0; $D÷ù√°Í®Ç = array(); goto AèÖ§≠Øåú; c∆±û≥ÿù≈: $FñΩ”É∞ΩÑ = Model($B≥Û¢ÈâÜ¡[434])->where($cåÎÒıÏÀŸ)->sum($B≥Û¢ÈâÜ¡[77]); $e‘ÛÑ±é∫à = $bùèÆ∂ªò‡ . $B≥Û¢ÈâÜ¡[2411] . $EªÑ≠é…Ωÿ; $A÷ÖßﬂÉúø = new TaskFileTransfer($e‘ÛÑ±é∫à, $B≥Û¢ÈâÜ¡[2406], $Fƒ∫‚ﬁôÇë, LNG($B≥Û¢ÈâÜ¡[2412]) . "\50{$EªÑ≠é…Ωÿ}\51"); goto AË∏†¢Üâ•; Dœ∑ﬂù∫ß‰: $B≥Û¢ÈâÜ¡ =& $_SERVER[áí∂¯Â¸Áò]; $cåÎÒıÏÀŸ = array($B≥Û¢ÈâÜ¡[749] => $EªÑ≠é…Ωÿ); $Fƒ∫‚ﬁôÇë = Model($B≥Û¢ÈâÜ¡[434])->where($cåÎÒıÏÀŸ)->count(); goto c∆±û≥ÿù≈; AèÖ§≠Øåú: $f•≠˜Ú©∫ø = Model($B≥Û¢ÈâÜ¡[171])->where($cåÎÒıÏÀŸ)->field($B≥Û¢ÈâÜ¡[2413])->select(); foreach ($f•≠˜Ú©∫ø as $D™çÁÆ¥çÌ) { goto BŒ´ŸìûÑ∆; f¥øéÍè‹‹: if (IO::exist($e◊Ù¿ƒÒ∑î)) { $A÷ÖßﬂÉúø->updateFileEnd($D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[28]], $D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[77]]); continue; } if (!IO::move($c°àÂáÙªá, get_path_father($e◊Ù¿ƒÒ∑î))) { $Bâã¿£ö‡ä = !1; break; } $cåÎÒıÏÀŸ = array($B≥Û¢ÈâÜ¡[431] => $D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[431]]); goto A∏‰≥ª∆ﬂâ; A∏‰≥ª∆ﬂâ: $b‚◊ﬁﬁÉÁº = array($B≥Û¢ÈâÜ¡[749] => $dﬂæ¡íôÎ≤, $B≥Û¢ÈâÜ¡[75] => $e◊Ù¿ƒÒ∑î); Model($B≥Û¢ÈâÜ¡[171])->where($cåÎÒıÏÀŸ)->save($b‚◊ﬁﬁÉÁº); goto Bô–ƒ©•úó; BŒ´ŸìûÑ∆: $c°àÂáÙªá = $D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[75]]; $e◊Ù¿ƒÒ∑î = $B∑∑æãÚç§ . str_replace("\173\x69\x6f\x3a{$EªÑ≠é…Ωÿ}\175\57", $B≥Û¢ÈâÜ¡[33], $c°àÂáÙªá); if (!IO::exist($c°àÂáÙªá)) { $D÷ù√°Í®Ç[] = $D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[431]]; $A÷ÖßﬂÉúø->updateFileEnd($D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[28]], $D™çÁÆ¥çÌ[$B≥Û¢ÈâÜ¡[77]]); continue; } goto f¥øéÍè‹‹; Bô–ƒ©•úó: } $this->removeByFileID($D÷ù√°Í®Ç); goto fî∑»°Ì∑¬; AË∏†¢Üâ•: $A÷ÖßﬂÉúø->task[$B≥Û¢ÈâÜ¡[704]] = (double) $FñΩ”É∞ΩÑ; $e™∏Í˘Òë‡ = KodIO::defaultDriver(); $dﬂæ¡íôÎ≤ = $e™∏Í˘Òë‡[$B≥Û¢ÈâÜ¡[371]]; goto eßÍùÑØﬁ˘; C≈›‚¶™ ã: } public function progress($E≠ã…è°äÏ, $EÇœÃËò®Â) { return Task::get($EÇœÃËò®Â . $_SERVER[áí∂¯Â¸Áò][2411] . $E≠ã…è°äÏ); } private function removeByFileID($eü‹ﬂ˘‘Œ˘ = array()) { goto C¥«Î≤ÇæÖ; C¥«Î≤ÇæÖ: $B•Ò›ÑÖò· =& $_SERVER[áí∂¯Â¸Áò]; if (empty($eü‹ﬂ˘‘Œ˘)) { return; } $D≤ÂûÖõï÷ = array($B•Ò›ÑÖò·[431] => array($B•Ò›ÑÖò·[7], $eü‹ﬂ˘‘Œ˘)); goto D€ÙÇê‹ﬁ–; D€ÙÇê‹ﬁ–: $aõÜÚ≈óôö = Model($B•Ò›ÑÖò·[1124])->where($D≤ÂûÖõï÷)->field($B•Ò›ÑÖò·[381])->select(); if (!$aõÜÚ≈óôö) { return; } $aõÜÚ≈óôö = array_to_keyvalue($aõÜÚ≈óôö, $B•Ò›ÑÖò·[33], $B•Ò›ÑÖò·[381]); goto e√ê¢◊¨ŸÙ; e√ê¢◊¨ŸÙ: foreach ($aõÜÚ≈óôö as $CÍï£—ºÆâ) { Model($B•Ò›ÑÖò·[394])->removeNow($CÍï£—ºÆâ, !1); } goto fÈàÖÑá∂€; fÈàÖÑá∂€: } private function removeShareItems($Cíì«áõ¡) { goto bô°∞Éµπç; a…»àËØ∞‚: Model($Eò‚û“ëìÜ[548])->remove($eÁƒ»¶¡í˘); goto FÜß—âåëà; bô°∞Éµπç: $Eò‚û“ëìÜ =& $_SERVER[áí∂¯Â¸Áò]; $Cá◊Ç˜üöÙ = "\x7b\151\157\x3a{$Cíì«áõ¡}\175\x2f"; $DºîÑÍÉ®∏ = array($Eò‚û“ëìÜ[381] => 0, $Eò‚û“ëìÜ[1027] => array($Eò‚û“ëìÜ[757], "{$Cá◊Ç˜üöÙ}\45")); goto Cú∂ÀÇ≈¶Ø; Cú∂ÀÇ≈¶Ø: $a∏°ù⁄µí = Model($Eò‚û“ëìÜ[2089])->where($DºîÑÍÉ®∏)->field($Eò‚û“ëìÜ[452])->select(); if (empty($a∏°ù⁄µí)) { return; } $eÁƒ»¶¡í˘ = array_to_keyvalue($a∏°ù⁄µí, $Eò‚û“ëìÜ[33], $Eò‚û“ëìÜ[452]); goto a…»àËØ∞‚; FÜß—âåëà: } } goto A®ä∏°Õä◊; FÒ¶†Ñ·á‰: define($_SERVER[áí∂¯Â¸Áò][557], $_SERVER[áí∂¯Â¸Áò][558]); $CÕÿ…≤õî≥ = $_SERVER[áí∂¯Â¸Áò][559]; while ($CÕÿ…≤õî≥ < $_SERVER[áí∂¯Â¸Áò][377]) { if ($CÕÿ…≤õî≥ >= 0) { break; } $CÕÿ…≤õî≥++; } goto CÎ Óÿë¨ƒ; bêæú°¯øÆ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\x65\x72\137\146\x61\x76"; protected function cacheFunctionAlias($a¢Éêì¶˜’) { $b®∆˘À’∏â =& $_SERVER[áí∂¯Â¸Áò]; return array($b®∆˘À’∏â[2208] => array(USER_ID, $b®∆˘À’∏â[2209])); } protected function listData() { $FªÉáÀàÏˆ =& $_SERVER[áí∂¯Â¸Áò]; $a‡ÕÕ¬àÆ€ = array($FªÉáÀàÏˆ[1434] => USER_ID, $FªÉáÀàÏˆ[447] => array($FªÉáÀàÏˆ[2212], 0)); $Eê„ç≥’“™ = $FªÉáÀàÏˆ[2214]; $D›“à±ó‰Í = $this->field($Eê„ç≥’“™)->where($a‡ÕÕ¬àÆ€)->order($FªÉáÀàÏˆ[2215])->select(); return $D›“à±ó‰Í ? $D›“à±ó‰Í : array(); } protected function listByTag($AÎéÆÃ©‰ﬁ) { } protected function addToTag($f“Ù‡ˆË¨‰, $C¥Ûë∆Œ÷µ) { $cÍÑ†Çáè◊ =& $_SERVER[áí∂¯Â¸Áò]; if (!Model($cÍÑ†Çáè◊[2350])->listData($C¥Ûë∆Œ÷µ) || !Model($cÍÑ†Çáè◊[758])->pathInfo($f“Ù‡ˆË¨‰)) { return !1; } $eäÖáªàÈŸ = array($cÍÑ†Çáè◊[1434] => USER_ID, $cÍÑ†Çáè◊[447] => $C¥Ûë∆Œ÷µ, $cÍÑ†Çáè◊[399] => $f“Ù‡ˆË¨‰, $cÍÑ†Çáè◊[400] => $cÍÑ†Çáè◊[394], $cÍÑ†Çáè◊[398] => $cÍÑ†Çáè◊[33], $cÍÑ†Çáè◊[2116] => 0); if ($this->where($eäÖáªàÈŸ)->find()) { return !1; } return $this->add($eäÖáªàÈŸ); } protected function removeFromTag($C÷›ò—¨ùÌ, $f√´”û‰â∆) { $B∫Á´à÷¶é =& $_SERVER[áí∂¯Â¸Áò]; if (!Model($B∫Á´à÷¶é[2350])->listData($f√´”û‰â∆)) { return !1; } if (is_array($C÷›ò—¨ùÌ)) { $C÷›ò—¨ùÌ = array($B∫Á´à÷¶é[7], $C÷›ò—¨ùÌ); } $E∂ØúÍÃŒ◊ = array($B∫Á´à÷¶é[1434] => USER_ID, $B∫Á´à÷¶é[447] => $f√´”û‰â∆, $B∫Á´à÷¶é[400] => $B∫Á´à÷¶é[394], $B∫Á´à÷¶é[399] => $C÷›ò—¨ùÌ); return $this->where($E∂ØúÍÃŒ◊)->delete(); } protected function removeByTag($fê∂ÿõ√ﬂ§) { $eûﬂõ ©Ü… =& $_SERVER[áí∂¯Â¸Áò]; if (!$fê∂ÿõ√ﬂ§) { return !1; } $eëå≤ùåÌÑ = array($eûﬂõ ©Ü…[1434] => USER_ID, $eûﬂõ ©Ü…[447] => $fê∂ÿõ√ﬂ§); return $this->where($eëå≤ùåÌÑ)->delete(); } protected function removeBySource($A√è“Œ‘Ö±) { $a∫–©πªû“ =& $_SERVER[áí∂¯Â¸Áò]; if (is_array($A√è“Œ‘Ö±)) { $A√è“Œ‘Ö± = array($a∫–©πªû“[7], $A√è“Œ‘Ö±); } $d∏¡åÊªÏÇ = array($a∫–©πªû“[1434] => USER_ID, $a∫–©πªû“[399] => $A√è“Œ‘Ö±, $a∫–©πªû“[447] => array($a∫–©πªû“[931], 0)); return $this->where($d∏¡åÊªÏÇ)->delete(); } }